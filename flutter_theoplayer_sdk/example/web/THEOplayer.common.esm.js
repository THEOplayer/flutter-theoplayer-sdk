/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 6.10.1
 Created: 2024-02-20T14:33:50.457Z
 */
var Nl,Dl,Il,El,Ll,Ol,zl,Wr,Pl,Bl,Rl,Ul,Ql,Fl,Yl,Gl,Vl,Wl,Hl,ql,Xl,Zl,Kl,Jl,$l,td,f,id,xh,ed,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,sd=a.location,nd=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,m=a.clearInterval,b=a.Error,k=a.TypeError,_=(a.SyntaxError,a.Object),x=a.Math,C=a.parseInt,S=a.parseFloat,j=a.isNaN,T=a.Uint8Array,rd=a.Worker,hd=(a.WorkerGlobalScope,a.XMLHttpRequest),od=_.create,ad=_.defineProperty,ud=_.getOwnPropertyDescriptor,cd=_.getOwnPropertyNames,ld=_.getPrototypeOf,dd=_.prototype.hasOwnProperty,fd=(t,i)=>()=>(t&&(i=t(t=0)),i),to=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),Zh=(t,i,e)=>(e=null!=t?od(ld(t)):{},((t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of cd(i))dd.call(t,n)||n===e||ad(t,n,{get:()=>i[n],enumerable:!(s=ud(i,n))||s.enumerable});return t})(!i&&t&&t.__esModule?e:ad(e,"default",{value:t,enumerable:!0}),t));function _d(){}function kt(t){return"object"==typeof t&&null!==t||"function"==typeof t}function gd(t){return t.slice()}function wd(t,i,e,s,n){new T(t).set(new T(e,s,n),i)}function Ad(t){return!1!==function(t){if("number"!=typeof t)return!1;if(Dl(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function vd(t,i,e){if("function"!=typeof t)throw new k("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function md(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new k(n+" is not a method");switch(e){case 0:return function(){return yd(n,t,s)};case 1:return function(i){var e=[i].concat(s);return yd(n,t,e)}}}return function(){return de(void 0)}}function pd(t,i,e){var s=t[i];if(void 0!==s)return vd(s,t,e)}function yd(t,i,e){try{return de(vd(t,i,e))}catch(t){return oh(t)}}function po(t){if(t=Number(t),Dl(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function Md(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new k("size property of a queuing strategy must be a function");return function(i){return t(i)}}function Zc(t){return new El(t)}function de(t){return Ol(t)}function oh(t){return zl(t)}function Td(t,i,e){return Ll.call(t,i,e)}function Xe(t,i,e){Td(Td(t,i,e),void 0,Il)}function Nd(t,i){Xe(t,i)}function Dd(t,i){Xe(t,void 0,i)}function hh(t,i,e){return Td(t,i,e)}function Sd(t){Td(t,void 0,Il)}function Gi(t,i,e){var s=null;!0===e&&(s=_.prototype);var n=_.create(s);return n.value=t,n.done=i,n}function Id(t,i){t.ul=!0,t.hd=i,i.Nd=t,"readable"===i.ja?Ld(t):"closed"===i.ja?function(t){Ld(t),xd(t)}(t):kd(t,i.Dd)}function Ed(t,i){return qr(t.hd,i)}function bd(t){"readable"===t.hd.ja?Cd(t,new k("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){kd(t,i)}(t,new k("Reader was released and can no longer be used to monitor the stream's closedness")),t.hd.Nd=void 0,t.hd=void 0}function _o(t){return new k("Cannot "+t+" a stream using a released reader")}function Ld(t){t.Id=Zc((function(i,e){t.Ld=i,t.Od=e}))}function kd(t,i){Ld(t),Cd(t,i)}function Cd(t,i){Sd(t.Id),t.Od(i),t.Ld=void 0,t.Od=void 0}function xd(t){t.Ld(void 0),t.Ld=void 0,t.Od=void 0}function Od(t,i){void 0===i&&(i=!1);var e=new Rl(t);return e.ul=i,e}function jd(t){return Zc((function(i,e){var s={zd:i,Bd:e};t.Nd.Rd.push(s)}))}function zd(t,i,e){var s=t.Nd;s.Rd.shift().zd(Gi(i,e,s.ul))}function Pd(t){return t.Nd.Rd.length}function Bd(t){var i=t.Nd;return void 0!==i&&!!fr(i)}function fr(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"Rd")}function Rd(t){var i=t.hd;return i.Ud=!0,"closed"===i.ja?de(Gi(void 0,!0,t.ul)):"errored"===i.ja?oh(i.Dd):i.Qd[Bl]()}function Ud(t){return new k("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}function Qd(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"Fd")}function Fd(t){return new k("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function Yd(t){var i=t.Yd.shift();return t.Gd-=i.size,t.Gd<0&&(t.Gd=0),i.value}function Gd(t,i,e){if(!Ad(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.Yd.push({value:i,size:e}),t.Gd+=e}function Vd(t){t.Yd=new Wr,t.Gd=0}function Wd(t){return new Wl(t)}function Hd(t){t.ja="writable",t.Dd=void 0,t.Vd=void 0,t.Wd=void 0,t.Hd=new Wr,t.qd=void 0,t.Xd=void 0,t.Zd=void 0,t.Kd=void 0,t.Jd=!1}function Lr(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"Wd")}function xo(t){return void 0!==t.Vd}function qd(t,i){var e=t.ja;if("closed"===e||"errored"===e)return de(void 0);if(void 0!==t.Kd)return t.Kd.$d;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=Zc((function(e,n){t.Kd={$d:void 0,zd:e,Bd:n,tf:i,if:s}}));return t.Kd.$d=n,!1===s&&Kd(t,i),n}function Xd(t){var i=t.ja;if("closed"===i||"errored"===i)return oh(new k("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=Zc((function(i,e){var s={zd:i,Bd:e};t.Xd=s})),s=t.Vd;return void 0!==s&&!0===t.Jd&&"writable"===i&&Df(s),function(t){Gd(t,"close",0),cf(t)}(t.Wd),e}function Zd(t,i){"writable"!==t.ja?Jd(t):Kd(t,i)}function Kd(t,i){var e=t.Wd;t.ja="erroring",t.Dd=i;var s=t.Vd;void 0!==s&&nf(s,i),!1===function(t){if(void 0===t.qd&&void 0===t.Zd)return!1;return!0}(t)&&!0===e.ef&&Jd(t)}function Jd(t){t.ja="errored",t.Wd[Gl]();var i=t.Dd;if(t.Hd.forEach((function(t){t.Bd(i)})),t.Hd=new Wr,void 0!==t.Kd){var e=t.Kd;if(t.Kd=void 0,!0===e.if)return e.Bd(i),void $d(t);Xe(t.Wd[Yl](e.tf),(function(){e.zd(),$d(t)}),(function(i){e.Bd(i),$d(t)}))}else $d(t)}function eo(t){return void 0!==t.Xd||void 0!==t.Zd}function $d(t){void 0!==t.Xd&&(t.Xd.Bd(t.Dd),t.Xd=void 0);var i=t.Vd;void 0!==i&&mf(i,t.Dd)}function tf(t,i){var e=t.Vd;void 0!==e&&i!==t.Jd&&(!0===i?function(t){yf(t)}(e):Df(e)),t.Jd=i}function pr(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"sf")}function ef(t){return Xd(t.sf)}function sf(t,i){"pending"===t.nf?mf(t,i):function(t,i){vf(t,i)}(t,i)}function nf(t,i){"pending"===t.rf?Nf(t,i):function(t,i){Mf(t,i)}(t,i)}function rf(t){var i=t.sf,e=new k("Writer was released and can no longer be used to monitor the stream's closedness");nf(t,e),sf(t,e),i.Vd=void 0,t.sf=void 0}function hf(t,i){var e=t.sf,s=e.Wd,n=function(t,i){try{return t.hf(i)}catch(i){return lf(t,i),1}}(s,i);if(e!==t.sf)return oh(wf("write to"));var r=e.ja;if("errored"===r)return oh(e.Dd);if(!0===eo(e)||"closed"===r)return oh(new k("The stream is closing or closed and cannot be written to"));if("erroring"===r)return oh(e.Dd);var h=function(t){return Zc((function(i,e){var s={zd:i,Bd:e};t.Hd.push(s)}))}(e);return function(t,i,e){var s={chunk:i};try{Gd(t,s,e)}catch(i){return void lf(t,i)}var n=t.uf;if(!1===eo(n)&&"writable"===n.ja){tf(n,df(t))}cf(t)}(s,i,n),h}function of(t,i,e,s,n,r,h,o){i.uf=t,t.Wd=i,i.Yd=void 0,i.Gd=void 0,Vd(i),i.ef=!1,i.hf=o,i.cf=h,i.lf=s,i.df=n,i._f=r;var a=df(i);tf(t,a),Xe(de(e()),(function(){i.ef=!0,cf(i)}),(function(e){i.ef=!0,Zd(t,e)}))}function af(t){t.lf=void 0,t.df=void 0,t._f=void 0,t.hf=void 0}function uf(t){return t.cf-t.Gd}function cf(t){var i=t.uf;if(!1!==t.ef&&void 0===i.qd)if("erroring"!==i.ja){if(0!==t.Yd.length){var e=function(t){return t.Yd.peek().value}(t);"close"===e?function(t){var i=t.uf;(function(t){t.Zd=t.Xd,t.Xd=void 0})(i),Yd(t);var e=t.df();af(t),Xe(e,(function(){!function(t){t.Zd.zd(void 0),t.Zd=void 0,"erroring"===t.ja&&(t.Dd=void 0,void 0!==t.Kd&&(t.Kd.zd(),t.Kd=void 0)),t.ja="closed";var i=t.Vd;void 0!==i&&pf(i)}(i)}),(function(t){!function(t,i){t.Zd.Bd(i),t.Zd=void 0,void 0!==t.Kd&&(t.Kd.Bd(i),t.Kd=void 0),Zd(t,i)}(i,t)}))}(t):function(t,i){var e=t.uf;!function(t){t.qd=t.Hd.shift()}(e);var s=t.lf(i);Xe(s,(function(){!function(t){t.qd.zd(void 0),t.qd=void 0}(e);var i=e.ja;if(Yd(t),!1===eo(e)&&"writable"===i){var s=df(t);tf(e,s)}cf(t)}),(function(i){"writable"===e.ja&&af(t),function(t,i){t.qd.Bd(i),t.qd=void 0,Zd(t,i)}(e,i)}))}(t,e.chunk)}}else Jd(i)}function lf(t,i){"writable"===t.uf.ja&&ff(t,i)}function df(t){return uf(t)<=0}function ff(t,i){var e=t.uf;af(t),Kd(e,i)}function _f(t){return new k("WritableStream.prototype."+t+" can only be used on a WritableStream")}function gf(t){return new k("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function wf(t){return new k("Cannot "+t+" a stream using a released writer")}function Af(t){t.Id=Zc((function(i,e){t.Ld=i,t.Od=e,t.nf="pending"}))}function vf(t,i){Af(t),mf(t,i)}function mf(t,i){Sd(t.Id),t.Od(i),t.Ld=void 0,t.Od=void 0,t.nf="rejected"}function pf(t){t.Ld(void 0),t.Ld=void 0,t.Od=void 0,t.nf="resolved"}function yf(t){t.gf=Zc((function(i,e){t.wf=i,t.Af=e})),t.rf="pending"}function Mf(t,i){yf(t),Nf(t,i)}function Tf(t){yf(t),Df(t)}function Nf(t,i){Sd(t.gf),t.Af(i),t.wf=void 0,t.Af=void 0,t.rf="rejected"}function Df(t){t.wf(void 0),t.wf=void 0,t.Af=void 0,t.rf="fulfilled"}function Sf(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}function If(t,i,e,s,n,r){var h=Od(t),o=Wd(i);t.Ud=!0;var a=!1,u=de(void 0);return Zc((function(c,l){var d,f,_,g;if(void 0!==r){if(d=function(){var e=new Xl("Aborted","AbortError"),r=[];!1===s&&r.push((function(){return"writable"===i.ja?qd(i,e):de(void 0)})),!1===n&&r.push((function(){return"readable"===t.ja?qr(t,e):de(void 0)})),m((function(){return Promise.all(r.map((function(t){return t()})))}),!0,e)},!0===r.aborted)return void d();r.addEventListener("abort",d)}if(v(t,h.Id,(function(t){!1===s?m((function(){return qd(i,t)}),!0,t):p(!0,t)})),v(i,o.Id,(function(i){!1===n?m((function(){return qr(t,i)}),!0,i):p(!0,i)})),f=t,_=h.Id,g=function(){!1===e?m((function(){return function(t){var i=t.sf,e=i.ja;return!0===eo(i)||"closed"===e?de(void 0):"errored"===e?oh(i.Dd):ef(t)}(o)})):p()},"closed"===f.ja?g():Nd(_,g),!0===eo(i)||"closed"===i.ja){var w=new k("the destination writable stream closed before all data could be piped to it");!1===n?m((function(){return qr(t,w)}),!0,w):p(!0,w)}function A(){var t=u;return Td(u,(function(){return t!==u?A():void 0}))}function v(t,i,e){"errored"===t.ja?e(t.Dd):Dd(i,e)}function m(t,e,s){function n(){Xe(t(),(function(){return y(e,s)}),(function(t){return y(!0,t)}))}!0!==a&&(a=!0,"writable"===i.ja&&!1===eo(i)?Nd(A(),n):n())}function p(t,e){!0!==a&&(a=!0,"writable"===i.ja&&!1===eo(i)?Nd(A(),(function(){return y(t,e)})):y(t,e))}function y(t,i){rf(o),bd(h),void 0!==r&&r.removeEventListener("abort",d),t?l(i):c(void 0)}Sd(Zc((function(t,i){!function e(s){s?t():Td(!0===a?de(!0):Td(o.gf,(function(){return Td(Rd(h),(function(t){return!0===t.done||(u=Td(hf(o,t.value),void 0,_d),!1)}))})),e,i)}(!1)})))}))}function Ef(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"vf")}function bf(t){!1!==Lf(t)&&(!0!==t.mf?(t.mf=!0,Xe(t.pf(),(function(){t.mf=!1,!0===t.yf&&(t.yf=!1,bf(t))}),(function(i){xf(t,i)}))):t.yf=!0)}function Lf(t){var i=t.vf;return!1!==$o(t)&&(!1!==t.ef&&(!0===a_(i)&&Pd(i)>0||Of(t)>0))}function kf(t){t.pf=void 0,t.Mf=void 0,t.hf=void 0}function vl(t){var i=t.vf;t.Tf=!0,0===t.Yd.length&&(kf(t),u_(i))}function Cf(t,i){var e=t.vf;if(!0===a_(e)&&Pd(e)>0)zd(e,i,!1);else{var s=void 0;try{s=t.hf(i)}catch(i){throw xf(t,i),i}try{Gd(t,i,s)}catch(i){throw xf(t,i),i}}bf(t)}function xf(t,i){var e=t.vf;"readable"===e.ja&&(Vd(t),kf(t),c_(e,i))}function Of(t){var i=t.vf.ja;return"errored"===i?null:"closed"===i?0:t.cf-t.Gd}function $o(t){var i=t.vf.ja;return!1===t.Tf&&"readable"===i}function jf(t,i,e,s,n,r,h){i.vf=t,i.Yd=void 0,i.Gd=void 0,Vd(i),i.ef=!1,i.Tf=!1,i.yf=!1,i.mf=!1,i.hf=h,i.cf=r,i.pf=s,i.Mf=n,t.Qd=i,Xe(de(e()),(function(){i.ef=!0,bf(i)}),(function(t){xf(i,t)}))}function zf(t){return new k("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}function Pf(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"Nf")}function Bf(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"Df")}function nh(t){var i=function(t){var i=t.Nf;if("readable"!==i.ja)return!1;if(!0===t.Tf)return!1;if(!1===t.ef)return!1;if(!0===Bd(i)&&Pd(i)>0)return!0;if(!0===e_(i)&&i_(i)>0)return!0;var e=Zf(t);if(e>0)return!0;return!1}(t);!1!==i&&(!0!==t.mf?(t.mf=!0,Xe(t.pf(),(function(){t.mf=!1,!0===t.yf&&(t.yf=!1,nh(t))}),(function(i){ul(t,i)}))):t.yf=!0)}function Rf(t,i){var e=!1;"closed"===t.ja&&(e=!0);var s=Uf(i);"default"===i.readerType?zd(t,s,e):function(t,i,e){var s=t.Nd,n=s.Sf.shift();n.zd(Gi(i,e,s.ul))}(t,s,e)}function Uf(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function Qf(t,i,e,s){t.Yd.push({buffer:i,byteOffset:e,byteLength:s}),t.Gd+=s}function Ff(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=x.min(t.Gd,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,h=r-r%e,o=n,a=!1;h>s&&(o=h-i.bytesFilled,a=!0);for(var u=t.Yd;o>0;){var c=u.peek(),l=x.min(o,c.byteLength),d=i.byteOffset+i.bytesFilled;wd(i.buffer,d,c.buffer,c.byteOffset,l),c.byteLength===l?u.shift():(c.byteOffset+=l,c.byteLength-=l),t.Gd-=l,Yf(t,l,i),o-=l}return a}function Yf(t,i,e){Vf(t),e.bytesFilled+=i}function Gf(t){0===t.Gd&&!0===t.Tf?(Xf(t),u_(t.Nf)):nh(t)}function Vf(t){void 0!==t.If&&(t.If.Df=void 0,t.If.Ef=void 0,t.If=void 0)}function Wf(t){for(;t.bf.length>0;){if(0===t.Gd)return;var i=t.bf.peek();!0===Ff(t,i)&&(qf(t),Rf(t.Nf,i))}}function Hf(t,i){var e=t.bf.peek();if("closed"===t.Nf.ja){if(0!==i)throw new k("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.Nf;if(!0===e_(e))for(;i_(e)>0;)Rf(e,qf(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(Yf(t,i,e),!(e.bytesFilled<e.elementSize)){qf(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);Qf(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,Rf(t.Nf,e),Wf(t)}}(t,i,e);nh(t)}function qf(t){var i=t.bf.shift();return Vf(t),i}function Xf(t){t.pf=void 0,t.Mf=void 0}function ul(t,i){var e=t.Nf;"readable"===e.ja&&(!function(t){Vf(t),t.bf=new Wr}(t),Vd(t),Xf(t),c_(e,i))}function Zf(t){var i=t.Nf.ja;return"errored"===i?null:"closed"===i?0:t.cf-t.Gd}function Kf(t,i,e){var s=_.create($l.prototype);var n=md(i,"pull",0,[s]),r=md(i,"cancel",1,[]),h=i.autoAllocateChunkSize;if(void 0!==h&&(h=Number(h),!1===Kl(h)||h<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,h){i.Nf=t,i.yf=!1,i.mf=!1,i.If=void 0,i.Yd=i.Gd=void 0,Vd(i),i.Tf=!1,i.ef=!1,i.cf=po(r),i.pf=s,i.Mf=n,i.Lf=h,i.bf=new Wr,t.Qd=i,Xe(de(e()),(function(){i.ef=!0,nh(i)}),(function(t){ul(i,t)}))}(t,s,(function(){return pd(i,"start",[s])}),n,r,e,h)}function Jf(t){return new k("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function $f(t){return new k("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function t_(t){return Zc((function(i,e){var s={zd:i,Bd:e};t.Nd.Sf.push(s)}))}function i_(t){return t.Nd.Sf.length}function e_(t){var i=t.Nd;return void 0!==i&&!!s_(i)}function s_(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"Sf")}function n_(t,i){var e=t.hd;return e.Ud=!0,"errored"===e.ja?oh(e.Dd):function(t,i){var e=t.Nf,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.bf.length>0)return t.bf.push(r),t_(e);if("closed"===e.ja)return de(Gi(new n(r.buffer,r.byteOffset,0),!0,e.Nd.ul));if(t.Gd>0){if(!0===Ff(t,r)){var h=Uf(r);return Gf(t),de(Gi(h,!1,e.Nd.ul))}if(!0===t.Tf){var o=new k("Insufficient bytes to fill elements in the given buffer");return ul(t,o),oh(o)}}t.bf.push(r);var a=t_(e);return nh(t),a}(e.Qd,i)}function r_(t){return new k("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}function h_(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=_.create(f.prototype);return o_(r),jf(r,_.create(Zl.prototype),t,i,e,s,n),r}function o_(t){t.ja="readable",t.Nd=void 0,t.Dd=void 0,t.Ud=!1}function no(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"Qd")}function a_(t){return void 0!==t.Nd}function qr(t,i){return t.Ud=!0,"closed"===t.ja?de(void 0):"errored"===t.ja?oh(t.Dd):(u_(t),hh(t.Qd[Pl](i),_d))}function u_(t){t.ja="closed";var i=t.Nd;void 0!==i&&(fr(i)&&(i.Rd.forEach((function(t){t.zd(Gi(void 0,!0,i.ul))})),i.Rd=new Wr),xd(i))}function c_(t,i){t.ja="errored",t.Dd=i;var e=t.Nd;void 0!==e&&(fr(e)?(e.Rd.forEach((function(t){t.Bd(i)})),e.Rd=new Wr):(e.Sf.forEach((function(t){t.Bd(i)})),e.Sf=new Wr),Cd(e,i))}function wr(t){return new k("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}function l_(t,i,e,s,n,r){function h(){return i}t.kf=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var h=_.create(Vl.prototype);return Hd(h),of(h,_.create(Hl.prototype),t,i,e,s,n,r),h}(h,(function(i){return function(t,i){var e=t.Cf;if(!0===t.Jd){return hh(t.xf,(function(){var s=t.kf;if("erroring"===s.ja)throw s.Dd;return m_(e,i)}))}return m_(e,i)}(t,i)}),(function(){return function(t){var i=t.Of,e=t.Cf,s=e.jf();return A_(e),hh(s,(function(){if("errored"===i.ja)throw i.Dd;var t=i.Qd;!0===$o(t)&&vl(t)}),(function(e){throw f_(t,e),i.Dd}))}(t)}),(function(i){return function(t,i){return f_(t,i),de(void 0)}(t,i)}),e,s),t.Of=h_(h,(function(){return function(t){return g_(t,!1),t.xf}(t)}),(function(i){return __(t,i),de(void 0)}),n,r),t.Jd=void 0,t.xf=void 0,t.zf=void 0,g_(t,!0),t.Cf=void 0}function d_(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"Cf")}function f_(t,i){xf(t.Of.Qd,i),__(t,i)}function __(t,i){A_(t.Cf),lf(t.kf.Wd,i),!0===t.Jd&&g_(t,!1)}function g_(t,i){void 0!==t.xf&&t.zf(),t.xf=Zc((function(i){t.zf=i})),t.Jd=i}function w_(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"Pf")}function A_(t){t.Bf=void 0,t.jf=void 0}function v_(t,i){var e=t.Pf,s=e.Of.Qd;if(!1===$o(s))throw new k("Readable side is not in a state that permits enqueue");try{Cf(s,i)}catch(t){throw __(e,t),e.Of.Dd}var n=function(t){return!0!==Lf(t)}(s);n!==e.Jd&&g_(e,!0)}function m_(t,i){return hh(t.Bf(i),void 0,(function(i){throw f_(t.Pf,i),i}))}function p_(t){return new k("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function y_(t){return new k("TransformStream.prototype."+t+" can only be used on a TransformStream")}var le,g,Yu,M_=fd((()=>{var t;r(),Nl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"},Dl=Number.isNaN||function(t){return t!=t},Il=_d,El=Promise,Ll=Promise.prototype.then,Ol=Promise.resolve.bind(El),zl=Promise.reject.bind(El),16384,Wr=function(){function t(){this.Rf=0,this.Uf=0,this.Qf={Ff:[],Yf:void 0},this.Gf=this.Qf,this.Rf=0,this.Uf=0}return _.defineProperty(t.prototype,"length",{get:function(){return this.Uf},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.Gf,e=i;16383===i.Ff.length&&(e={Ff:[],Yf:void 0}),i.Ff.push(t),e!==i&&(this.Gf=e,i.Yf=e),++this.Uf},t.prototype.shift=function(){var t=this.Qf,i=t,e=this.Rf,s=e+1,n=t.Ff,r=n[e];return 16384===s&&(i=t.Yf,s=0),--this.Uf,this.Rf=s,t!==i&&(this.Qf=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.Rf,e=this.Qf,s=e.Ff;!(i===s.length&&void 0===e.Yf||i===s.length&&(i=0,0===(s=(e=e.Yf).Ff).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.Qf,i=this.Rf;return t.Ff[i]},t}(),Pl=Nl("[[CancelSteps]]"),Bl=Nl("[[PullSteps]]"),Rl=function(){function t(t){if(!1===no(t))throw new k("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===a_(t))throw new k("This stream has already been locked for exclusive reading by another reader");Id(this,t),this.Rd=new Wr}return _.defineProperty(t.prototype,"closed",{get:function(){return fr(this)?this.Id:oh(Ud("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return fr(this)?void 0===this.hd?oh(_o("cancel")):Ed(this,t):oh(Ud("cancel"))},t.prototype.read=function(){return fr(this)?void 0===this.hd?oh(_o("read from")):Rd(this):oh(Ud("read"))},t.prototype.releaseLock=function(){if(!fr(this))throw Ud("releaseLock");if(void 0!==this.hd){if(this.Rd.length>0)throw new k("Tried to release a reader lock when that reader has pending read() calls un-settled");bd(this)}},t}(),"symbol"==typeof Nl.asyncIterator&&((Ul={})[Nl.asyncIterator]=function(){return this},Ql=Ul,_.defineProperty(Ql,Nl.asyncIterator,{enumerable:!1})),Fl={next:function(){if(!1===Qd(this))return oh(Fd("next"));var t=this.Fd;return void 0===t.hd?oh(_o("iterate")):hh(Rd(t),(function(i){var e=i.done;return e&&bd(t),Gi(i.value,e,!0)}))},return:function(t){if(!1===Qd(this))return oh(Fd("next"));var i=this.Fd;if(void 0===i.hd)return oh(_o("finish iterating"));if(i.Rd.length>0)return oh(new k("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.Vf){var e=Ed(i,t);return bd(i),hh(e,(function(){return Gi(t,!0,!0)}))}return bd(i),de(Gi(t,!0,!0))}},void 0!==Ql&&_.setPrototypeOf(Fl,Ql),_.defineProperty(Fl,"next",{enumerable:!1}),_.defineProperty(Fl,"return",{enumerable:!1}),Yl=Nl("[[AbortSteps]]"),Gl=Nl("[[ErrorSteps]]"),Vl=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),Hd(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=Md(e);void 0===s&&(s=1),function(t,i,e,s){var n=_.create(Hl.prototype),r=md(i,"write",1,[n]),h=md(i,"close",0,[]),o=md(i,"abort",1,[]);of(t,n,(function(){return pd(i,"start",[n])}),r,h,o,e,s)}(this,t,s=po(s),n)}return _.defineProperty(t.prototype,"locked",{get:function(){if(!1===Lr(this))throw _f("locked");return xo(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Lr(this)?oh(_f("abort")):!0===xo(this)?oh(new k("Cannot abort a stream that already has a writer")):qd(this,t)},t.prototype.close=function(){return!1===Lr(this)?oh(_f("close")):!0===xo(this)?oh(new k("Cannot close a stream that already has a writer")):!0===eo(this)?oh(new k("Cannot close an already-closing stream")):Xd(this)},t.prototype.getWriter=function(){if(!1===Lr(this))throw _f("getWriter");return Wd(this)},t}(),Wl=function(){function t(t){if(!1===Lr(t))throw new k("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===xo(t))throw new k("This stream has already been locked for exclusive writing by another writer");this.sf=t,t.Vd=this;var i=t.ja;if("writable"===i)!1===eo(t)&&!0===t.Jd?yf(this):Tf(this),Af(this);else if("erroring"===i)Mf(this,t.Dd),Af(this);else if("closed"===i)Tf(this),function(t){Af(t),pf(t)}(this);else{var e=t.Dd;Mf(this,e),vf(this,e)}}return _.defineProperty(t.prototype,"closed",{get:function(){return!1===pr(this)?oh(gf("closed")):this.Id},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===pr(this))throw gf("desiredSize");if(void 0===this.sf)throw wf("desiredSize");return function(t){var i=t.sf,e=i.ja;return"errored"===e||"erroring"===e?null:"closed"===e?0:uf(i.Wd)}(this)},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"ready",{get:function(){return!1===pr(this)?oh(gf("ready")):this.gf},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===pr(this)?oh(gf("abort")):void 0===this.sf?oh(wf("abort")):function(t,i){return qd(t.sf,i)}(this,t)},t.prototype.close=function(){if(!1===pr(this))return oh(gf("close"));var t=this.sf;return void 0===t?oh(wf("close")):!0===eo(t)?oh(new k("Cannot close an already-closing stream")):ef(this)},t.prototype.releaseLock=function(){if(!1===pr(this))throw gf("releaseLock");void 0!==this.sf&&rf(this)},t.prototype.write=function(t){return!1===pr(this)?oh(gf("write")):void 0===this.sf?oh(wf("write to")):hf(this,t)},t}(),Hl=function(){function t(){throw new k("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){return!!kt(t)&&!!_.prototype.hasOwnProperty.call(t,"uf")}(this))throw new k("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.uf.ja&&ff(this,t)},t.prototype[Yl]=function(t){var i=this._f(t);return af(this),i},t.prototype[Gl]=function(){Vd(this)},t}(),ql="undefined"!=typeof DOMException?DOMException:void 0,Xl=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(ql)?ql:((t=function(t,i){this.message=t||"",this.name=i||"Error",b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}).prototype=_.create(b.prototype),_.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t),Zl=function(){function t(){throw new k}return _.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Ef(this))throw zf("desiredSize");return Of(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===Ef(this))throw zf("close");if(!1===$o(this))throw new k("The stream is not in a state that permits close");vl(this)},t.prototype.enqueue=function(t){if(!1===Ef(this))throw zf("enqueue");if(!1===$o(this))throw new k("The stream is not in a state that permits enqueue");return Cf(this,t)},t.prototype.error=function(t){if(!1===Ef(this))throw zf("error");xf(this,t)},t.prototype[Pl]=function(t){Vd(this);var i=this.Mf(t);return kf(this),i},t.prototype[Bl]=function(){var t=this.vf;if(this.Yd.length>0){var i=Yd(this);return!0===this.Tf&&0===this.Yd.length?(kf(this),u_(t)):bf(this),de(Gi(i,!1,t.Nd.ul))}var e=jd(t);return bf(this),e},t}(),Kl=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&x.floor(t)===t},Jl=function(){function t(){throw new k("ReadableStreamBYOBRequest cannot be used directly")}return _.defineProperty(t.prototype,"view",{get:function(){if(!1===Bf(this))throw Jf("view");return this.Ef},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===Bf(this))throw Jf("respond");if(void 0===this.Df)throw new k("This BYOB request has been invalidated");this.Ef.buffer,function(t,i){if(!1===Ad(i=Number(i)))throw new RangeError("bytesWritten must be a finite");Hf(t,i)}(this.Df,t)},t.prototype.respondWithNewView=function(t){if(!1===Bf(this))throw Jf("respond");if(void 0===this.Df)throw new k("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new k("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.bf.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,Hf(t,i.byteLength)}(this.Df,t)},t}(),$l=function(){function t(){throw new k("ReadableByteStreamController constructor cannot be used directly")}return _.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===Pf(this))throw $f("byobRequest");if(void 0===this.If&&this.bf.length>0){var t=this.bf.peek(),i=new T(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=_.create(Jl.prototype);!function(t,i,e){t.Df=i,t.Ef=e}(e,this,i),this.If=e}return this.If},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Pf(this))throw $f("desiredSize");return Zf(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===Pf(this))throw $f("close");if(!0===this.Tf)throw new k("The stream has already been closed; do not close it again!");var t=this.Nf.ja;if("readable"!==t)throw new k("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.Nf;if(t.Gd>0)t.Tf=!0;else{if(t.bf.length>0&&t.bf.peek().bytesFilled>0){var e=new k("Insufficient bytes to fill elements in the given buffer");throw ul(t,e),e}Xf(t),u_(i)}}(this)},t.prototype.enqueue=function(t){if(!1===Pf(this))throw $f("enqueue");if(!0===this.Tf)throw new k("stream is closed or draining");var i=this.Nf.ja;if("readable"!==i)throw new k("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new k("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.Nf,s=i.buffer,n=i.byteOffset,r=i.byteLength,h=s;!0===Bd(e)?0===Pd(e)?Qf(t,h,n,r):zd(e,new T(h,n,r),!1):!0===e_(e)?(Qf(t,h,n,r),Wf(t)):Qf(t,h,n,r),nh(t)}(this,t)},t.prototype.error=function(t){if(!1===Pf(this))throw $f("error");ul(this,t)},t.prototype[Pl]=function(t){this.bf.length>0&&(this.bf.peek().bytesFilled=0);Vd(this);var i=this.Mf(t);return Xf(this),i},t.prototype[Bl]=function(){var t=this.Nf;if(this.Gd>0){var i=this.Yd.shift();this.Gd-=i.byteLength,Gf(this);var e=void 0;try{e=new T(i.buffer,i.byteOffset,i.byteLength)}catch(t){return oh(t)}return de(Gi(e,!1,t.Nd.ul))}var s=this.Lf;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return oh(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:T,readerType:"default"};this.bf.push(r)}var h=jd(t);return nh(this),h},t}(),td=function(){function t(t){if(!no(t))throw new k("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===Pf(t.Qd))throw new k("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(a_(t))throw new k("This stream has already been locked for exclusive reading by another reader");Id(this,t),this.Sf=new Wr}return _.defineProperty(t.prototype,"closed",{get:function(){return s_(this)?this.Id:oh(r_("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return s_(this)?void 0===this.hd?oh(_o("cancel")):Ed(this,t):oh(r_("cancel"))},t.prototype.read=function(t){return s_(this)?void 0===this.hd?oh(_o("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?oh(new k("view must have non-zero byteLength")):n_(this,t)):oh(new k("view must be an array buffer view")):oh(r_("read"))},t.prototype.releaseLock=function(){if(!s_(this))throw r_("releaseLock");if(void 0!==this.hd){if(this.Sf.length>0)throw new k("Tried to release a reader lock when that reader has pending read() calls un-settled");bd(this)}},t}(),f=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),o_(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),Kf(this,t,s=po(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=Md(e);void 0===s&&(s=1),function(t,i,e,s){var n=_.create(Zl.prototype),r=md(i,"pull",0,[n]),h=md(i,"cancel",1,[]);jf(t,n,(function(){return pd(i,"start",[n])}),r,h,e,s)}(this,t,s=po(s),r)}}return _.defineProperty(t.prototype,"locked",{get:function(){if(!1===no(this))throw wr("locked");return a_(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===no(this)?oh(wr("cancel")):!0===a_(this)?oh(new k("Cannot cancel a stream that already has a reader")):qr(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===no(this))throw wr("getReader");if(void 0===i)return Od(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new td(t);return e.ul=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,h=n.preventAbort,o=n.preventCancel,a=n.signal;if(!1===no(this))throw wr("pipeThrough");if(!1===Lr(e))throw new k("writable argument to pipeThrough must be a WritableStream");if(!1===no(s))throw new k("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),h=Boolean(h),o=Boolean(o),void 0!==a&&!Sf(a))throw new k("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===a_(this))throw new k("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===xo(e))throw new k("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return Sd(If(this,e,r,h,o,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,h=e.signal;return!1===no(this)?oh(wr("pipeTo")):!1===Lr(t)?oh(new k("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===h||Sf(h)?!0===a_(this)?oh(new k("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===xo(t)?oh(new k("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):If(this,t,s,n,r,h):oh(new k("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===no(this))throw wr("tee");var t=function(t,i){var e,s,n,r,h,o=Od(t),a=!1,u=!1,c=!1,l=Zc((function(t){h=t}));function d(){return!0===a||(a=!0,Sd(hh(Rd(o),(function(t){if(a=!1,!0===t.done)return!1===u&&vl(n.Qd),void(!1===c&&vl(r.Qd));var i=t.value,e=i,s=i;!1===u&&Cf(n.Qd,e),!1===c&&Cf(r.Qd,s)})))),de(void 0)}function f(){}return n=h_(f,d,(function(i){if(u=!0,e=i,!0===c){var n=gd([e,s]),r=qr(t,n);h(r)}return l})),r=h_(f,d,(function(i){if(c=!0,s=i,!0===u){var n=gd([e,s]),r=qr(t,n);h(r)}return l})),Dd(o.Id,(function(t){xf(n.Qd,t),xf(r.Qd,t)})),[n,r]}(this);return gd(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===no(this))throw wr("getIterator");return function(t,i){void 0===i&&(i=!1);var e=Od(t),s=_.create(Fl);return s.Fd=e,s.Vf=Boolean(i),s}(this,e)},t}(),"symbol"==typeof Nl.asyncIterator&&_.defineProperty(f.prototype,Nl.asyncIterator,{value:f.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0}),function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(t){return t.byteLength},t}(),id=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),xh=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,h=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var o=Md(s);if(void 0===n&&(n=1),n=po(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=Md(r);void 0===h&&(h=0),h=po(h),l_(this,Zc((function(t){a=t})),n,o,h,u),function(t,i){var e=_.create(ed.prototype),s=function(t){try{return v_(e,t),de(void 0)}catch(t){return oh(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new k("transform is not a method");s=function(t){return yd(n,i,[t,e])}}var r=md(i,"flush",0,[e]);!function(t,i,e,s){i.Pf=t,t.Cf=i,i.Bf=e,i.jf=s}(t,e,s,r)}(this,t);var c=pd(t,"start",[this.Cf]);a(c)}return _.defineProperty(t.prototype,"readable",{get:function(){if(!1===d_(this))throw y_("readable");return this.Of},enumerable:!0,configurable:!0}),_.defineProperty(t.prototype,"writable",{get:function(){if(!1===d_(this))throw y_("writable");return this.kf},enumerable:!0,configurable:!0}),t}(),ed=function(){function t(){throw new k("TransformStreamDefaultController instances cannot be created directly")}return _.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===w_(this))throw p_("desiredSize");return Of(this.Pf.Of.Qd)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===w_(this))throw p_("enqueue");v_(this,t)},t.prototype.error=function(t){if(!1===w_(this))throw p_("error");!function(t,i){f_(t.Pf,i)}(this,t)},t.prototype.terminate=function(){if(!1===w_(this))throw p_("terminate");!function(t){var i=t.Pf,e=i.Of.Qd;!0===$o(e)&&vl(e),__(i,new k("TransformStream terminated"))}(this)},t}()})),r=fd((()=>{"use strict";M_()})),T_=to(((t,i)=>{r(),i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),N_=to(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=e+e,o=s+s,a=n+n,u=e*h,c=s*h,l=s*o,d=n*h,f=n*o,_=n*a,g=r*h,w=r*o,A=r*a;return t[0]=1-l-_,t[1]=c+A,t[2]=d-w,t[3]=0,t[4]=c-A,t[5]=1-u-_,t[6]=f+g,t[7]=0,t[8]=d+w,t[9]=f-g,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),D_=to(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,h=e[0],o=e[1],a=e[2],u=x.sqrt(h*h+o*o+a*a);if(x.abs(u)<1e-6)return null;return h*=u=1/u,o*=u,a*=u,s=x.sin(i),n=x.cos(i),r=1-n,t[0]=h*h*r+n,t[1]=o*h*r+a*s,t[2]=a*h*r-o*s,t[3]=0,t[4]=h*o*r-a*s,t[5]=o*o*r+n,t[6]=a*o*r+h*s,t[7]=0,t[8]=h*a*r+o*s,t[9]=o*a*r-h*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),S_=to(((t,i)=>{r(),i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}})),I_=to(((t,i)=>{r(),i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),E_=to(((t,i)=>{r(),i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],A=i[15],v=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-l*_,D=c*w-d*_,S=c*A-f*_,I=l*w-d*g,E=l*A-f*g,b=d*A-f*w,L=v*b-m*E+p*I+y*S-M*D+T*N;if(!L)return null;return L=1/L,t[0]=(o*b-a*E+u*I)*L,t[1]=(n*E-s*b-r*I)*L,t[2]=(g*T-w*M+A*y)*L,t[3]=(d*M-l*T-f*y)*L,t[4]=(a*S-h*b-u*D)*L,t[5]=(e*b-n*S+r*D)*L,t[6]=(w*p-_*T-A*m)*L,t[7]=(c*T-d*p+f*m)*L,t[8]=(h*E-o*S+u*N)*L,t[9]=(s*S-e*E-r*N)*L,t[10]=(_*M-g*p+A*v)*L,t[11]=(l*p-c*M-f*v)*L,t[12]=(o*D-h*I-a*N)*L,t[13]=(e*I-s*D+n*N)*L,t[14]=(g*m-_*y-w*v)*L,t[15]=(c*y-l*m+d*v)*L,t}})),b_=to(((t,i)=>{r(),i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],g=i[12],w=i[13],A=i[14],v=i[15],m=e[0],p=e[1],y=e[2],M=e[3];return t[0]=m*s+p*o+y*l+M*g,t[1]=m*n+p*a+y*d+M*w,t[2]=m*r+p*u+y*f+M*A,t[3]=m*h+p*c+y*_+M*v,m=e[4],p=e[5],y=e[6],M=e[7],t[4]=m*s+p*o+y*l+M*g,t[5]=m*n+p*a+y*d+M*w,t[6]=m*r+p*u+y*f+M*A,t[7]=m*h+p*c+y*_+M*v,m=e[8],p=e[9],y=e[10],M=e[11],t[8]=m*s+p*o+y*l+M*g,t[9]=m*n+p*a+y*d+M*w,t[10]=m*r+p*u+y*f+M*A,t[11]=m*h+p*c+y*_+M*v,m=e[12],p=e[13],y=e[14],M=e[15],t[12]=m*s+p*o+y*l+M*g,t[13]=m*n+p*a+y*d+M*w,t[14]=m*r+p*u+y*f+M*A,t[15]=m*h+p*c+y*_+M*v,t}})),L_=to(((t,i)=>{r(),i.exports=function(t,i,e,s,n){var r=1/x.tan(i/2),h=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*h,t[15]=0,t}})),k_=to(((t,i)=>{r(),i.exports=function(t,i,e,s){var n,r,h,o,a,u,c,l,d,f,_,g,w,A,v,m,p,y,M,T,N,D,S,I,E=s[0],b=s[1],L=s[2],k=x.sqrt(E*E+b*b+L*L);if(x.abs(k)<1e-6)return null;E*=k=1/k,b*=k,L*=k,n=x.sin(e),r=x.cos(e),h=1-r,o=i[0],a=i[1],u=i[2],c=i[3],l=i[4],d=i[5],f=i[6],_=i[7],g=i[8],w=i[9],A=i[10],v=i[11],m=E*E*h+r,p=b*E*h+L*n,y=L*E*h-b*n,M=E*b*h-L*n,T=b*b*h+r,N=L*b*h+E*n,D=E*L*h+b*n,S=b*L*h-E*n,I=L*L*h+r,t[0]=o*m+l*p+g*y,t[1]=a*m+d*p+w*y,t[2]=u*m+f*p+A*y,t[3]=c*m+_*p+v*y,t[4]=o*M+l*T+g*N,t[5]=a*M+d*T+w*N,t[6]=u*M+f*T+A*N,t[7]=c*M+_*T+v*N,t[8]=o*D+l*S+g*I,t[9]=a*D+d*S+w*I,t[10]=u*D+f*S+A*I,t[11]=c*D+_*S+v*I,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}})),C_=to(((t,i)=>{r(),i.exports=function(t,i,e){var s,n,r,h,o,a,u,c,l,d,f,_,g=e[0],w=e[1],A=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*A+i[12],t[13]=i[1]*g+i[5]*w+i[9]*A+i[13],t[14]=i[2]*g+i[6]*w+i[10]*A+i[14],t[15]=i[3]*g+i[7]*w+i[11]*A+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+o*w+l*A+i[12],t[13]=n*g+a*w+d*A+i[13],t[14]=r*g+u*w+f*A+i[14],t[15]=h*g+c*w+_*A+i[15]);return t}}));function Xc(t,i){return x_(t.slice(),i)}function Cl(t,i){const e=x_(t,i);return e!==t&&O_(e,void 0,t.length,t),t}function x_(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){O_(e,i,t,n);const s=e;e=n,n=s}return e}function O_(t,i,e,s){const n=t.length;let r=0;const h=2*e;let o,a,u,c,l;for(a=0;a<n;a+=h)for(u=a+e,o=u+e,u>n&&(u=n),o>n&&(o=n),c=a,l=u;;)if(c<u&&l<o)i&&i(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<o))break;s[r++]=t[l++]}}r(),(g=le||(le={}))[g.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",g[g.LICENSE_ERROR=2e3]="LICENSE_ERROR",g[g.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",g[g.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",g[g.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",g[g.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",g[g.SOURCE_INVALID=3e3]="SOURCE_INVALID",g[g.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",g[g.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",g[g.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",g[g.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",g[g.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",g[g.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",g[g.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",g[g.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",g[g.MEDIA_ABORTED=5004]="MEDIA_ABORTED",g[g.NETWORK_ERROR=6e3]="NETWORK_ERROR",g[g.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",g[g.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",g[g.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",g[g.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",g[g.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",g[g.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",g[g.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",g[g.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",g[g.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",g[g.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",g[g.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",g[g.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",g[g.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",g[g.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",g[g.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",g[g.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",g[g.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",g[g.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",g[g.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",g[g.AD_ERROR=1e4]="AD_ERROR",g[g.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",g[g.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",g[g.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",g[g.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",function(t){t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE"}(Yu||(Yu={})),(Yu||(Yu={})).fromCode=function(t){const i=x.floor(t/1e3);if(i in Yu)return i;throw new k("Invalid error code: "+t)},r(),r(),r(),r(),r(),r(),r(),r(),r(),r();var tl={}.hasOwnProperty,Do={}.toString;function j_(t){return null!=t}function Wo(t){return void 0===t}var Yn=Array.isArray||function(t){return"[object Array]"===Do.call(t)};function qe(t){return lt(t)&&tl.call(t,"length")&&B_(t.length)}function lt(t){return"object"==typeof t&&null!==t}function ui(t){return lt(t)&&t.constructor&&t.constructor===_}function ae(t){return"string"==typeof t}function z_(t){return"boolean"==typeof t}function pu(t){return j_(t)&&"function"==typeof t.then}function P_(t){return"[object Date]"===Do.call(t)}function B_(t){return"number"==typeof t}r(),r();var Ji,Da=9007199254740991,R_=2**-52;function hi(t,i,e){return x.min(x.max(t,i),e)}function Ua(t,i,e){return t===i||x.abs(t-i)<=e}function U_(t,i){if(t===i)return!0;const e=x.abs(t-i);if(e<R_)return!0;return e<x.max(x.abs(t),x.abs(i))*R_}function _l(t,i){return t%i+(t<0?i:0)}function Q_(t){return t!=t}function F_(t,i){return t===i||Q_(t)&&Q_(i)}function Y_(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}function So(t,i){return t.reduce(((t,e)=>t+i(e)),0)}!function(t){t[t.Zr=0]="Zr",t[t.Wf=1]="Wf",t[t.Hf=-1]="Hf"}(Ji||(Ji={}));var Xo=(t,i)=>(0|t)-(0|i),Li=(t,i)=>t===i?0:t<i?-1:t>i?1:j(t)?j(i)?0:1:-1;function G_(t,i,e){return Ua(t,i,e)?0:Li(t,i)}var V_=(t,i)=>U_(t,i)?0:Li(t,i);var W_="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=Z_(t,i);return-1===e?void 0:t[e]},H_=W_,q_="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=K_(t,i);return-1===e?void 0:t[e]},X_=q_,Z_="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},K_="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1};function Et(t,i){const e=t.indexOf(i);return-1!==e&&(jc(t,e),!0)}function jc(t,i){0===i?t.shift():t.splice(i,1)}function J_(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function na(t,i){return-1!==t.indexOf(i)}function wl(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function Ri(t){t.length=0}function zo(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!na(i,e))return!1;return!0}Array.prototype.flat;var Nh="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function Oo(t,i){return kh(t,((t,e)=>Li(i(t),i(e))))}function $_(t,i){return tg(t,((t,e)=>Li(i(t),i(e))))}function kh(t,i){if(0!==t.length)return t.reduce(((t,e)=>i(t,e)<=0?t:e))}function tg(t,i){return kh(t,((t,e)=>i(e,t)))}function Ic(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function ig(t,i){return Promise.all(t.map(i)).then((i=>t.filter(((t,e)=>i[e]))))}function eg(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function kl(){const t=_.create(null);return t.qf=void 0,delete t.qf,t}function Qt(){return new hg}function Ye(){return new og}function sg(t){const i=Qt();for(const e in t)tl.call(t,e)&&i.set(e,t[e]);return i}function ng(t){const i=[];return t.forEach((t=>i.push(t))),i}r();var rg="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,hg=rg||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.index=0,this.data=t,this.selector=i,this.keys=_.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=kl(),this.size=0}keys(){return new t(this.data,((t,i)=>i))}values(){return new t(this.data,((t,i)=>t[i]))}entries(){return new t(this.data,((t,i)=>[i,t[i]]))}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=kl(),this.size=0}}}();var og=rg||function(){class t{next(){const t=this.Xf.next();return t.done?t:{value:this.Zf(t.value),done:!1}}constructor(t,i){this.Xf=t,this.Zf=i}}return class{get size(){return this.Kf.size}get(t){return this.Kf.get(""+t)}set(t,i){return this.Kf.set(""+t,i),this}has(t){return this.Kf.has(""+t)}delete(t){return this.Kf.delete(""+t)}clear(){this.Kf.clear()}keys(){return new t(this.Kf.keys(),(t=>Number(t)))}values(){return this.Kf.values()}entries(){return new t(this.Kf.entries(),(t=>{let[i,e]=t;return[Number(i),e]}))}forEach(t){this.Kf.forEach(((i,e)=>{t(i,Number(e))}))}constructor(){this.Kf=Qt()}}}();r(),r();var Fc=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];b.apply(this,i)};(Fc.prototype=_.create(b.prototype)).constructor=Fc;var Jo=class extends Fc{get name(){return"BaseError"}constructor(t,i){super(),this.message=t||"Unknown error",this.cause=i,b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}};r();var ag,ug=class{Jf(){if(!this.$f&&!this.t_){this.$f=!0;for(const t of this.i_.slice())t();this.e_()}}e_(){if(!this.t_){this.t_=!0;for(const t of this.s_.slice())t();Ri(this.i_),Ri(this.s_)}}n_(t){this.t_||this.i_.push(t)}r_(t){this.t_||Et(this.i_,t)}h_(t){this.t_||this.s_.push(t)}o_(t){this.t_||Et(this.s_,t)}constructor(){this.$f=!1,this.t_=!1,this.i_=[],this.s_=[]}},Po=class t{get a_(){return this.u_}c_(){this.u_.Jf()}e_(){this.u_.e_()}l_(t){const i=this.u_;if(i.$f)return;if(t.$f)return void i.Jf();if(i.t_||t.t_)return;const e=()=>{s(),i.Jf()},s=()=>{t.r_(e),t.o_(s),i.r_(e),i.o_(s)};t.n_(e),t.h_(s),i.n_(e),i.h_(s)}d_(){const i=new t,e=new t,s=i.a_,n=e.a_,r=this.u_,h=()=>{s.$f&&n.t_||n.$f&&s.t_?r.Jf():s.t_&&n.t_&&r.e_()};s.n_(h),n.n_(h),s.h_(h),n.h_(h),i.l_(r),e.l_(r);return r.h_((()=>{s.r_(h),n.r_(h),s.o_(h),n.o_(h)})),[i,e]}constructor(){this.u_=new ug}};r(),r();var xs=()=>{},cg=t=>t;function oo(t,i){let e=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=ag.f_();h-e>=i&&(t.apply(this,n),e=h)}}function Ml(t,i){let e=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=this;0!==e&&ag.__(e),e=ag.g_((()=>{e=0,t.apply(h,n)}),i)}}function jl(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}var sa=class extends Jo{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function Oi(t){return t instanceof b&&"AbortError"===t.name}function Pi(t){if(t&&t.$f)throw new sa}function yo(t){if(Oi(t))throw t}function Ah(t){if(!Oi(t))throw t}function hl(t,i){return i?new Promise(((e,s)=>{if(i.$f)return t.catch(xs),s(new sa);const n=()=>{i.r_(n),s(new sa)};i.n_(n),t.then((t=>{i.r_(n),e(t)}),(t=>{i.r_(n),s(t)}))})):t}function H(t,i){return t.then((t=>(i.e_(),t)),(t=>{throw i.e_(),t}))}function hu(t,i){const e=new Po;return i&&e.l_(i),H(t(e.a_),e)}r();var lg=Promise.resolve(),yc="function"==typeof queueMicrotask?queueMicrotask:t=>{lg.then(t)};function W(t){t.then(xs,xs)}async function il(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map((t=>t.catch(xs)))),i}}function be(t,i){return new Promise(((e,s)=>{if(void 0!==i&&i.$f)return void s(new sa);const n=ag.g_((()=>{void 0!==i&&i.r_(r),e()}),t),r=()=>{ag.__(n),s(new sa)};void 0!==i&&i.n_(r)}))}function dg(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}var gt,i=class{yn(t,i){if("function"==typeof i)if("string"==typeof t)this.w_(t,i);else for(const e of t)this.w_(e,i)}w_(t,i){const e=this.A_[t];void 0===e?this.A_[t]=i:"function"==typeof e?this.A_[t]=[e,i]:0===this.v_?e.push(i):this.A_[t]=e.concat(i)}m_(t){if("function"!=typeof t)return;const i=this.p_;void 0===i?this.p_=t:"function"==typeof i?this.p_=[i,t]:0===this.v_?i.push(t):this.p_=i.concat(t)}Vo(){this.A_=kl(),this.p_=void 0}Co(t){this.v_++;const i=this.A_[t.type],e=this.p_;void 0!==i&&dg(this.y_,t,i),void 0!==e&&dg(this.y_,t,e),this.v_--}fn(t,i){if("function"==typeof i)if("string"==typeof t)this.M_(t,i);else for(const e of t)this.M_(e,i)}M_(t,i){const e=this.A_[t];void 0!==e&&("function"==typeof e?e===i&&(this.A_[t]=void 0):0===this.v_?Et(e,i):this.A_[t]=J_(e,i))}T_(t){if("string"==typeof t)this.A_[t]=void 0;else for(const i of t)this.A_[i]=void 0}N_(t){const i=this.p_;void 0!==i&&("function"==typeof i?i===t&&(this.p_=void 0):0===this.v_?Et(i,t):this.p_=J_(i,t))}D_(t,i){return new Promise(((e,s)=>{if(i&&i.$f)return s(new sa);const n=t=>{h(),e(t)},r=()=>{h(),s(new sa)},h=()=>{this.fn(t,n),i&&i.r_(r)};this.yn(t,n),i&&i.n_(r)}))}constructor(t){this.A_=kl(),this.p_=void 0,this.v_=0,this.Ds=t=>{this.Co(t)},this.y_=null!=t?t:this}},nt=class extends i{Co(t){yc((()=>{super.Co(t)}))}},ha=class extends i{m_(t){super.m_(t)}N_(t){super.N_(t)}},fg=class extends ha{},_g=class extends ha{get ht(){return this.S_()}S_(){return this.I_.ht}E_(){return this.I_.E_()}get b_(){return this.L_()}L_(){return this.I_.b_}get k_(){return this.C_()}set k_(t){this.x_(t)}C_(){return this.I_.k_}x_(t){this.I_.k_=t}get bt(){return this.O_()}O_(){return this.I_.bt}get j_(){return this.z_()}set j_(t){this.P_(t)}z_(){return this.I_.j_}P_(t){this.I_.j_=t}get ct(){return this.Td()}Td(){return this.I_.ct}get we(){return this.B_()}B_(){return this.I_.we}get R_(){return this.U_()}U_(){return this.I_.R_}get lt(){return this.Q_()}get F_(){return this.Y_()}Q_(){return this.I_.lt}Y_(){return this.I_.F_}get G_(){return this.V_()}V_(){return this.I_.G_}get W_(){return this.H_()}H_(){return this.I_.W_}get q_(){return this.X_()}X_(){return this.I_.q_}get Z_(){return this.K_()}set Z_(t){this.J_(t)}K_(){return this.I_.Z_}J_(t){this.I_.Z_=t}get eg(){return this.rg()}rg(){return this.I_.eg}get hg(){return this.og()}og(){return this.I_.hg}get ag(){return this.cg()}set ag(t){this.dg(t)}cg(){return this.I_.ag}dg(t){this.I_.ag=t}get fg(){return this._g()}_g(){return this.I_.fg}get gg(){return this.wg()}set gg(t){this.Ag(t)}wg(){return this.I_.gg}Ag(t){this.I_.gg=t}get vg(){return this.pg()}pg(){return this.I_.vg}get yg(){return this.Mg()}Mg(){return this.I_.yg}get Tg(){return this.Ng()}Ng(){return this.I_.Tg}Wa(){return this.I_.Wa()}ga(t,i){return this.I_.ga(t,i)}get nt(){return this.Dg()}Dg(){return this.I_.nt}get Sg(){return this.Ig()}Ig(){return this.I_.Sg}get rt(){return this.Eg()}Eg(){return this.I_.rt}get Lg(){return this.Cg()}Cg(){return this.I_.Lg}get xg(){return this.Og()}set xg(t){this.jg(t)}get zg(){return this.Pg()}Pg(){return this.I_.zg}Og(){return this.I_.xg}jg(t){this.I_.xg=t}get Bg(){return this.I_.Bg}set Bg(t){this.I_.Bg=t}Rg(){return this.I_.Rg()}Ug(){return this.I_.Ug()}Qg(t){this.I_.Qg(t)}Fg(){this.I_.Fg()}be(){this.I_.be()}Yg(){this.I_.Yg()}Gg(){this.I_.Gg()}Vg(){this.I_.Vg()}ge(){this.I_.ge()}Wg(){return this.I_.Wg()}Hg(){return this.I_.Hg()}qg(){this.I_.qg()}Xg(){this.I_.Xg()}Zn(){return this.I_.Zn()}Zg(){this.I_.Zg()}Kg(){this.I_.Kg()}Jg(t){return this.I_.Jg(t)}$g(t){return!1}async gn(){this.Vo(),await this.I_.gn()}constructor(t){super(),this.iw=t=>{this.$g(t)||this.Co(t)},this.I_=t,t.m_(this.iw)}};r(),r(),r(),function(t){t.ew="nw",t.hw="ow"}(gt||(gt={})),r(),r(),r(),r(),r();var gg=class{constructor(t,i=new Date){this.type=t,this.date=i}},Ha=class extends gg{get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}constructor(t,i){super(t,i),this.Xa=void 0}};function wg(t){return Boolean(t&&t.va)}var bo=class extends Ha{constructor(t){super(t)}},te=class extends gg{constructor(t){super(t)}},Ag=class extends bo{fa(){return new vg(this.Lt.va)}constructor(t){super(gt.ew),this.Lt=t}},vg=class extends te{constructor(t){super("addtrack"),this.track=t}};r();var Os,mg=class extends bo{fa(){return new pg(this.Lt.va)}constructor(t){super(gt.hw),this.Lt=t}},pg=class extends te{constructor(t){super("removetrack"),this.track=t}};r(),function(t){t.aw="uw",t.cw="lw",t.dw="fw",t._w="gw",t.ww="Aw",t.mw="pw",t.ra="yw",t.Mw="Tw",t.Nw="Dw",t.Sw="Qn",t.Iw="Ew",t.Lw="Cw",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality"}(Os||(Os={}));var co=class extends i{get xw(){return this.Ow}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}get U(){return this.Ow.length}jw(t){return this.Ow[t]}tt(t){return!(!t||na(this.Ow,t))&&(this.Ow.push(t),this.Xa&&this.Xa.push(t.va),t.yn(Os.ra,this.Ds),this.Co(new Ag(t)),!0)}it(t){if(!t)return!1;const i=this.Ow.indexOf(t);return!(i<0)&&(jc(this.Ow,i),this.Xa&&jc(this.Xa,i),t.fn(Os.ra,this.Ds),this.Co(new mg(t)),!0)}zw(t){return na(this.Ow,t)}Zn(){const t=this.Ow;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}gn(){this.Zn(),this.Vo()}constructor(){super(),this.Ow=[],this.Xa=void 0}};r();var Zr=class extends bo{fa(){return new yg(this.Lt.va)}constructor(t){super(Os.ra),this.Lt=t}},yg=class extends te{constructor(t){super("change"),this.track=t}},Lc=class extends co{get Pw(){return this.Bw}set Pw(t){const i=this.Bw;if(t!==i){if(i){this.Rw(i);for(const e of i.xw)t&&t.zw(e)||this.it(e)}if(this.Bw=t,t){const i=[];for(const e of t.xw)this.tt(e),this.Uw(e)&&i.push(e);this.Qw(t);for(const t of i)t.Co(new Zr(t))}}}Qw(t){t.yn(gt.ew,this.Fw),t.yn(gt.hw,this.Yw)}Rw(t){t.fn(gt.ew,this.Fw),t.fn(gt.hw,this.Yw)}gn(){this.Bw&&this.Bw.gn(),super.gn()}constructor(){super(),this.Bw=void 0,this.Fw=t=>{const i=t.Lt;this.tt(i)},this.Yw=t=>{const i=t.Lt;this.it(i)}}};r(),r(),r();var Mg=_.freeze||cg;function Vc(t,i,e){_.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function Tg(t){return Mg(t)}function Ou(t,i){for(const e of _.getOwnPropertyNames(i))_.defineProperty(t,e,_.getOwnPropertyDescriptor(i,e));return t}function se(t){if(ui(t)){const i={};for(const e in t)tl.call(t,e)&&(i[e]=se(t[e]));return i}if(Yn(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=se(t[e]));return i}return t}function Ph(t,i){return t===i||!(!t||!i)&&(!(!lt(t)||!lt(i))&&(qe(t)?!!qe(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!Ph(t[s],i[s]))return!1;return!0}(t,i):!qe(i)&&function(t,i){const e=_.keys(t),s=_.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!tl.call(i,s)||!Ph(t[s],i[s]))return!1;return!0}(t,i)))}function Ng(t,i){if(!lt(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function Dg(t,i){return t.constructor===i.constructor}function Sg(t){const i={};for(const e of _.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function wh(t){const i={};for(const e of _.keys(t)){const s=t[e];if(qe(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=lt(e)?wh(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=lt(s)?wh(s):s)}return i}function Ig(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function dt(t){return j_(t)?Ig(t):void 0}function Ee(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function Eg(t){const i=Ee(t);if(j(i))throw new b("Expected a valid number.");return i}function P(t){return"string"==typeof t?t:""}function bg(t,i){if(!qe(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function As(t,i){let e;return e=qe(t)?bg(t,i):i(t),e}r();var Ku,Lg=[gt.ew,gt.hw,Os.ra];function kg(t){let i;const e=t.xw.map((t=>t.va));return e.item=i=>{const e=0|i,s=t.jw(e);return s&&s.va||void 0},e.addEventListener=(t,e)=>{i.yn(t,e)},e.removeEventListener=(t,e)=>{i.fn(t,e)},i=new nt(e),t.yn(Lg,(t=>i.Co(t.va))),e}function Cg(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function xg(){}function Di(t){const i=[Os.Sw,Os.ra,Os.Iw,Os.Lw,Os.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.Gw&&t.Gw.va},get enabled(){return t.Rt},set enabled(i){t.Rt=Ig(i)},get id(){return t.o},get uid(){return t.Vw},get kind(){return t.zt},get label(){return t.kh},set label(i){t.kh=P(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.Ww)?void 0:i.map(Cg))?e:[]},get language(){return t.gs},get qualities(){return t.Hw.va},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.Hw.xw)for(const t of i)s.va===t&&e.push(s);return e}(t,Yn(i)?i:[i]):[],e.length>0?t.qw=e:t.qw=void 0},get targetQuality(){if(t.qw)return 1===t.qw.length?t.qw[0].va:t.qw.map((t=>t.va))},addEventListener(t,i){const s=As(t,P);e.yn(s,i)},removeEventListener(t,i){const s=As(t,P);e.fn(s,i)}};return e=new nt(s),t.yn(i,(t=>e.Co(t.va))),_.defineProperty(s,"constructor",{value:xg}),s}function Og(){}function jg(t){const i=kg(t);return _.defineProperty(i,"constructor",{value:Og}),i}r(),function(t){t[t.Xw=0]="Xw",t[t.Zw=1]="Zw",t[t.Kw=2]="Kw",t[t.Jw=3]="Jw",t[t.$w=4]="$w",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.tA=7]="tA"}(Ku||(Ku={}));var Ht,Bi,_e=class extends Lc{fa(){return jg(this)}Uw(t){return t.Rt}};function Ne(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}function zg(){}function Qo(t){const i=[Os.ra,Os.Sw,Os.aw,Os.cw,Os._w,Os.ww,Os.dw,Os.mw,Os.Mw,Os.Nw],e=[Bi.ha];let s;const n={get kind(){return t.zt},get label(){return t.kh},set label(i){t.kh=P(i)},get language(){return t.gs},get id(){return t.o},get uid(){return t.Vw},get inBandMetadataTrackDispatchType(){return t.iA},get mode(){return t.eA},set mode(i){i!==Ht.Xn&&i!==Ht.sA&&i!==Ht.Ch||t.nA(i)},get forced(){return Boolean(t.rA)},get accessibility(){var i,e;return null!=(e=null==(i=t.Ww)?void 0:i.map(Cg))?e:[]},get type(){return t.hA},get readyState(){return t.vg},get cues(){return t.eA===Ht.Ch?null:t.L.va},get activeCues(){return t.eA===Ht.Ch?null:t.q.va},get src(){return t.oA||""},addEventListener(t,i){const e=As(t,P);s.yn(e,i)},removeEventListener(t,i){const e=As(t,P);s.fn(e,i)}};return s=new nt(t),t.yn(i,(t=>s.Co(t.va))),t.yn(e,(t=>s.Co(t))),_.defineProperty(n,"constructor",{value:zg}),n}function Pg(){}function Hc(t){const i=kg(t);return _.defineProperty(i,"constructor",{value:Pg}),i}r(),r(),r(),function(t){t.Ch="disabled",t.sA="hidden",t.Xn="showing"}(Ht||(Ht={})),r(),(Bi||(Bi={})).ha="error";var Ac=class extends Lc{fa(){return Hc(this)}Uw(t){return t.eA===Ht.Xn}};r(),r(),r(),r();var t,qo,Bg=.25,Rg=400,Ug={aA:.2,uA:.45,cA:.7,lA:3,dA:Ch,fA:Sh},Qg={aA:.4,uA:.65,cA:1,lA:3,dA:Ch,fA:Sh},Fg={aA:.4,uA:.7,cA:.9,lA:3,dA:Ch,fA:Sh},Yg={aA:.2,uA:.45,cA:1,lA:3,dA:Ch,fA:Sh},Gg={aA:.5,uA:1.125,cA:1.75,lA:2.55,dA:Ch,fA:Sh};function dl(){let t;return t=ag.Ys._A?Yg:ag.Ys.gA?Qg:ag.Ys.wA?"Android"===ag.vA.AA?Fg:Ug:Gg,ag.vA.mA?function(t){if(ag.vA.mA){const i=(Rg+250)/1e3,e=x.max(i,t.aA),s=x.max(e+Bg,t.uA),n=x.max(s+Bg,t.cA);return{aA:e,uA:s,cA:n,lA:x.max(n+Bg,t.lA),dA:Ch,fA:Sh}}return t}(t):t}function Vg(t){return{windowStart:t.aA,windowEnd:t.cA,target:t.uA,maxOffset:t.lA}}r(),r(),function(t){t.pA="yA",t.MA="TA",t.NA="contentprotectionerror",t.DA="contentprotectionsuccess",t.SA="currentsourcechange",t.IA="destroy",t.EA="durationchange",t.bA="emptied",t.LA="encrypted",t.kA="ended",t.CA="xA",t.OA="jA",t.zA="PA",t.BA="RA",t.UA="loadstart",t.QA="manifestupdate",t.FA="nosupportedrepresentationfound",t.YA="offline",t.GA="online",t.Sh="pause",t.jh="play",t.VA="progress",t.WA="ratechange",t.HA="representationchange",t.qA="resize",t.XA="seeked",t.ZA="seeking",t.KA="segmentnotfound",t.JA="$A",t.rv="hv",t.lo="sourcechange",t.ov="timeupdate",t.uv="volumechange",t.fv="_v",t.Av="metricschange"}(t||(t={})),r(),function(t){t.vv="canplay",t.mv="canplaythrough",t.pv="loadeddata",t.yv="loadedmetadata",t.Mw="readystatechange",t.Mv="waiting",t.Tv="playing"}(qo||(qo={}));var Wh=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function oe(){return oe=_.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)_.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},oe.apply(this,arguments)}r(),r();var Wg,Ch=.92,Sh=1.08;!function(t){t[t.Ch=0]="Ch",t[t.Nv=1]="Nv",t[t.Dv=2]="Dv"}(Wg||(Wg={}));var Wc=class extends i{get Sv(){}get Iv(){}get Ev(){}get bv(){return!1}get Lv(){}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=Hg(this)}Cv(){}constructor(...t){super(...t),this.xv=Vg(dl())}};function Hg(t){return{goLive:()=>t.Cv(),get isLive(){return t.bv},get currentServerLiveTime(){return t.Sv},get currentLatency(){return t.Iv},get latencies(){return t.Ev},get latency(){return t.xv},set latency(i){if(!function(t){if(!lt(t))return!1;const i=t,e=j_(i.target)&&"number"==typeof i.target&&j_(i.windowEnd)&&"number"==typeof i.windowEnd&&j_(i.windowStart)&&"number"==typeof i.windowStart&&j_(i.maxOffset)&&"number"==typeof i.maxOffset,s=i.windowStart>=0&&i.windowStart<=i.target&&i.target<=i.windowEnd&&i.maxOffset>=i.windowEnd;return e&&s}(i))throw new b("Invalid latency configuration");t.xv=i},get manifest(){return t.Lv},addEventListener(i,e){t.yn(Xg(i),e)},removeEventListener(i,e){t.fn(Xg(i),e)}}}var qg=["golive","latencyrecoveryseek"];function Xg(t){const i=As(t,P);return(ae(i)?[i]:i).filter((t=>na(qg,t)))}var ra=class extends i{set Pw(t){const i=this.Bw;t!==i&&(i&&this.Rw(i),t&&this.Qw(t),this.Bw=t,this.Bw&&(this.Bw.xv=this.Ov))}get Pw(){return this.Bw}get va(){return this.Xa||(this.Xa=Hg(this)),this.Xa}Qw(t){t.yn(qg,this.Ds)}Rw(t){t.fn(qg,this.Ds)}Cv(){var t;null==(t=this.Bw)||t.Cv()}get Sv(){var t;return null==(t=this.Bw)?void 0:t.Sv}get Iv(){var t;return null==(t=this.Bw)?void 0:t.Iv}get Ev(){var t;return null==(t=this.Bw)?void 0:t.Ev}get bv(){return!!this.Bw&&this.Bw.bv}get xv(){return this.Bw?this.Bw.xv:this.Ov}set xv(t){this.Bw&&(this.Bw.xv=t),this.Ov=t}get Lv(){var t;return null==(t=this.Bw)?void 0:t.Lv}gn(){this.Vo(),this.Bw&&this.Rw(this.Bw),this.Bw=void 0}constructor(){super(),this.Bw=void 0,this.Xa=void 0,this.Ov=Vg(dl()),this.Bw=void 0}};r(),r(),r();var Zg="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function Va(t,i){return j_(t)&&-1!==t.indexOf(i)}var Kg="function"==typeof String.prototype.startsWith?(t,i)=>j_(t)&&t.startsWith(i):(t,i)=>j_(t)&&t.substr(0,i.length)===i,Eh="function"==typeof String.prototype.endsWith?(t,i)=>j_(t)&&t.endsWith(i):(t,i)=>j_(t)&&t.substr(t.length-i.length,i.length)===i;function Ei(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var Jg="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1==(1&e)&&(n+=s),e>>>=1,0!==e;)s+=s;return n},va="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=Jg(s,n/s.length)),s.slice(0,n)+t)},$g=(String.prototype.padEnd,16384),tw="function"==typeof String.fromCodePoint?t=>t.length<=$g?String.fromCodePoint(...t):iw(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return zh(i)};function zh(t){return t.length<=$g?String.fromCharCode(...t):iw(t,String.fromCharCode)}function iw(t,i){const e=[];for(let s=0;s<t.length;s+=$g)e.push(i(...t.slice(s,s+$g)));return e.join("")}function ew(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}function ua(t,i){const e=ag.Dh(t);return Gc(e,i),e.toString()}function Gc(t,i){for(const e of _.keys(i))t.searchParams.set(e,i[e])}function xa(t,i){let e=ag.zv(t);return i&&!Eh(e,"/")&&(e+="/"),e}var sw=/cache:(.+)?(?=&|$)/,nw="http://webcache.googleusercontent.com/search?q=cache:";function rw(t){if(!Kg(t,nw))return"";const i=ag.Dh(t).search.match(sw);return i&&i.length>1?i[1]:""}function hw(t){return ag.Dh(".",t)}r();var ow,Ds,vi,aw="1ADD53F3";function uw(t){return{appID:t&&t.appID?P(t.appID):aw}}function Qc(t){if(null!==t)return t}function cw(t){const i={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:Qc(t.streamActivityMonitorID),adTagParameters:lt(t.adTagParameters)?t.adTagParameters:{},authToken:Qc(t.authToken),omidAccessModeRules:Qc(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const e=t.videoID,s=t.contentSourceID;return e?s?oe({},i,{availabilityType:"vod",videoID:e,contentSourceID:s}):void ag.Pv("A VOD DAI configuration was provided without valid contentSourceID which is required."):void ag.Pv("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const e=t.assetKey;return e?oe({},i,{availabilityType:"live",assetKey:e}):void ag.Pv("A Live DAI configuration was provided without valid assetKey which is required.")}ag.Pv("A DAI configuration was provided without a valid availabilityType which is required.")}function lw(t){switch(t.integration){case"google-dai":return cw(t);case"imagine":return function(t){return{integration:t.integration}}(t);case"yospace":return function(t){var i;return{integration:t.integration,streamType:null!=(i=t.streamType)?i:void 0}}(t);default:return{integration:t.integration}}}!function(t){t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled"}(ow||(ow={})),r(),r(),function(t){t.Bv="",t.Rv="anonymous",t.Uv="use-credentials"}(Ds||(Ds={})),function(t){t.Qv="application/dash+xml",t.Fv="application/vnd.apple.mpegurl",t.Yv="application/x-mpegurl",t.Gv="video/mp4",t.Vv="application/vnd.theoplayer.hesp+json",t.Wv="application/vnd.theo.hesp+json"}(vi||(vi={})),r(),r(),r(),r(),r(),r(),r(),r();var Ci,gs,dw="titanium",Tl="conax",fw="ezdrm",Dh="irdeto",jh="vudrm",_w="verimatrix",gw="keyos",Vh="drmtoday",ww="expressplay",gl="azure",Ih="xstream",Aw="vimond",qh="axinom",vw="uplynk",mw="comcast",pw="custom";function yw(t,i){if(null==t)return{};var e,s,n={},r=_.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function Mw(t){return j_(t.token&&t.deviceId)}function Tw(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&j_(e.PreAuthorization)}function Nw(t){const i=t;return Mw(i)&&""!==i.token&&""!==i.deviceId&&!Tw(i)}r(),r(),r(),function(t){t.Hv="playready",t.qv="widevine",t.Xv="fairplay",t.Zv="clearkey",t.Kv="aes128"}(Ci||(Ci={})),r(),r(),r(),function(t){t.Jv=!1,t.$v=!1,t.tm=!1,t.im=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.nm=!1,t.hm=!1,t.LOG_LCEVC_DETAILS=!1}(gs||(gs={})),r(),r();var ce=class extends Jo{get name(){return"THEOplayerError"}get category(){return Yu.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=t}};var Yr=class extends ce{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,h,o){super(t,i,e),this.url=s,this.status=n,this.statusText=r,this.response=h,this.systemCode=o}};r();var Dw,Sw=class{get um(){return this.lm}get dm(){return this.fm}_m(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new k("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new k("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new k("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new k("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new k("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.gm.build(t))}constructor(t,i,e){this.lm=t,this.fm=i,this.gm=e}};r(),function(t){t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED"}(Dw||(Dw={}));var Iw,Pu=class{registerContentProtectionIntegration(t,i,e){switch(this.wm(t,i,e)){case Dw.FAILED:throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+i+".");case Dw.OVERRIDDEN:{const e=cl(i);ag.Pv("Warning: Overwriting an earlier registered integration for "+t+" and "+e+".");break}case Dw.SUCCEEDED:cl(i);0;break}}wm(t,i,e){const s=cl(i);if(!s)return Dw.FAILED;let n=Dw.SUCCEEDED;for(const i of this.Am.slice())i.um===t&&i.dm===s&&(n=Dw.OVERRIDDEN,Et(this.Am,i));return this.Am.push(new Sw(t,s,e)),n}vm(t,i){return void 0!==this.pm(t,i)}ym(t,i,e){const s=this.pm(t,i);if(!s)throw b("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s._m(e)}pm(t,i){for(const e of this.Am)if(e.um===t&&(!i||e.dm===i))return e}constructor(){this.Am=[]}};Pu.Mm=new Pu,r(),function(t){t.Hv="9a04f079-9840-4286-ab92-e65be0885f95",t.qv="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.Zv="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.Xv="94ce86fb-07ff-4f43-adb8-93d2fa968ca2"}(Iw||(Iw={}));var At,Ew,pa,mt,hn,bw="urn:mpeg:dash:mp4protection:2011",Lw="cenc",kw="sinf",Xh="skd",Cw="9a04f079-9840-4286-ab92-e65be0885f95",Wi="urn:uuid:"+Cw,xw="com.microsoft.playready",Ow="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",jt="urn:uuid:"+Ow,jw="com.widevine.alpha",zw="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Pw="urn:uuid:"+zw,Yc="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",Wa="urn:uuid:"+Yc,Bw="com.apple.fps.1_0",Rw="com.apple.streamingkeydelivery",Uw="identity";r(),r(),function(t){t.Tm="moov",t.Nm="mvhd",t.Dm="trak",t.Sm="tkhd",t.Im="mdia",t.Em="mdhd",t.Lm="hdlr",t.Cm="minf",t.xm="stbl",t.Om="stsd",t.jm="stsc",t.zm="mvex",t.Pm="trex",t.Bm="avc1",t.Rm="avcC",t.Um="hev1",t.Qm="hvc1",t.Fm="hvcC",t.Ym="vp09",t.Gm="vpcC",t.Vm="av01",t.Wm="av1C",t.Hm="colr",t.qm="pasp",t.Xm="mp4a",t.Zm="esds",t.Km="wvtt",t.Jm="vttC",t.$m="vlab",t.tp="enca",t.ip="encv",t.ep="moof",t.sp="mfhd",t.np="traf",t.rp="tfhd",t.hp="trun",t.op="tfdt",t.ap="senc",t.cp="mdat",t.lp="pssh",t.dp="emsg",t.fp="sidx",t._p="styp",t.gp="ftyp",t.wp="sinf",t.Ap="frma"}(At||(At={})),function(t){t.vp="vide",t.mp="soun",t.pp="subt",t.yp="hint",t.Mp="meta",t.Tp="auxv"}(Ew||(Ew={})),function(t){t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof"}(pa||(pa={})),function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF"}(mt||(mt={})),function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT"}(hn||(hn={})),r(),r(),r();var Qw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Fw=16383,Yw=/[\t\n\f\r ]/g;function Gw(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:Vw()}function Vw(){throw new b("Invalid base64 input")}function mi(t){let i=t;Yw.test(i)&&(i=i.replace(Yw,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return Vw();const n=0===s?0:4-s,r=new T(function(t,i){return 3*(t+i)/4-i}(e,n)),h=n>0?e-4:e;let o,a=0,u=0;for(;a<h;a+=4)o=Gw(i.charCodeAt(a))<<18|Gw(i.charCodeAt(a+1))<<12|Gw(i.charCodeAt(a+2))<<6|Gw(i.charCodeAt(a+3)),r[u++]=o>>16&255,r[u++]=o>>8&255,r[u++]=255&o;return 2===n?(o=Gw(i.charCodeAt(a))<<2|Gw(i.charCodeAt(a+1))>>4,r[u++]=255&o):1===n&&(o=Gw(i.charCodeAt(a))<<10|Gw(i.charCodeAt(a+1))<<4|Gw(i.charCodeAt(a+2))>>2,r[u++]=o>>8&255,r[u++]=255&o),r}function Ww(t,i,e){return Qw[t>>2]+Qw[(3&t)<<4|i>>4]+Qw[(15&i)<<2|e>>6]+Qw[63&e]}function Hw(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push(Ww(t[n],t[n+1],t[n+2]));return s.join("")}function Fh(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=Fw)s.push(Hw(t,i,x.min(n,i+Fw)));if(1===e){const e=t[i-1];s.push(Qw[e>>2]+Qw[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push(Qw[e>>2]+Qw[(3&e)<<4|n>>4]+Qw[(15&n)<<2]+"=")}return s.join("")}function qw(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}var Xw=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],ga=ArrayBuffer.isView||(t=>t&&na(Xw,Do.call(t)));function Zw(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return Xi(new T(t),new T(i))}function Xi(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function Lh(t){const i=t.reduce(((t,i)=>t+i.byteLength),0);return Kw(t,i)}function Kw(t,i){const e=new T(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function Jw(t,i,e){const s=new T(t.byteLength+i.byteLength),n=ml(t,0,e),r=ml(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function Ta(t){return mi(t).buffer}function $w(t){return Fh(new T(t))}function _a(t){return Fh(ba(t))}function Ws(t,i){const e=i.Ku,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.Np(1),(s&n)===n?1:0}function ls(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+Ws(t,i);return s}r();var pl=class t{get Ku(){return this.Zu}Np(t){this.Zu+=t}Dp(t){this.Zu=t}Sp(){return new t(this.Ku)}constructor(t=0){this.Zu=t}};var tA=x.clz32||function(t){let i=32,e=t>>16;return e&&(i-=16,t=e),e=t>>8,e&&(i-=8,t=e),e=t>>4,e&&(i-=4,t=e),e=t>>2,e&&(i-=2,t=e),e=t>>1,e?i-2:i-t};r(),r();var Mt=null;try{Mt=new WebAssembly.Instance(new WebAssembly.Module(new T([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(g){}function Ge(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function $h(t){return!0===(t&&t.Ip)}function iA(t){var i=x.clz32(t&-t);return t?31-i:i}Ge.prototype.Ip,_.defineProperty(Ge.prototype,"Ip",{value:!0}),Ge.isLong=$h;var eA={},sA={};function uo(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=sA[t])?s:(e=He(t,0,!0),n&&(sA[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=eA[t])?s:(e=He(t,t<0?-1:0,!1),n&&(eA[t]=e),e)}function _t(t,i){if(j(t))return i?cA:Ke;if(i){if(t<0)return cA;if(t>=oA)return _A}else{if(t<=-aA)return du;if(t+1>=aA)return fA}return t<0?_t(-t,i).neg():He(t%hA|0,t/hA|0,i)}function He(t,i,e){return new Ge(t,i,e)}Ge.fromInt=uo,Ge.fromNumber=_t,Ge.fromBits=He;var nA=x.pow;function rA(t,i,e){if(0===t.length)throw b("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?cA:Ke;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw b("interior hyphen");if(0===s)return rA(t.substring(1),i,e).neg();for(var n=_t(nA(e,8)),r=Ke,h=0;h<t.length;h+=8){var o=x.min(8,t.length-h),a=C(t.substring(h,h+o),e);if(o<8){var u=_t(nA(e,o));r=r.mul(u).add(_t(a))}else r=(r=r.mul(n)).add(_t(a))}return r.unsigned=i,r}function De(t,i){return"number"==typeof t?_t(t,i):"string"==typeof t?rA(t,i):He(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}Ge.fromString=rA,Ge.fromValue=De;var hA=4294967296,oA=hA*hA,aA=oA/2,uA=uo(1<<24),Ke=uo(0);Ge.ZERO=Ke;var cA=uo(0,!0);Ge.UZERO=cA;var ol=uo(1);Ge.ONE=ol;var lA=uo(1,!0);Ge.UONE=lA;var dA=uo(-1);Ge.NEG_ONE=dA;var fA=He(-1,2147483647,!1);Ge.MAX_VALUE=fA;var _A=He(-1,-1,!0);Ge.MAX_UNSIGNED_VALUE=_A;var du=He(0,-2147483648,!1);Ge.MIN_VALUE=du;var To=Ge.prototype;To.toInt=function(){return this.unsigned?this.low>>>0:this.low},To.toNumber=function(){return this.unsigned?(this.high>>>0)*hA+(this.low>>>0):this.high*hA+(this.low>>>0)},To.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(du)){var i=_t(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=_t(nA(t,6),this.unsigned),r=this,h="";;){var o=r.div(n),a=(r.sub(o.mul(n)).toInt()>>>0).toString(t);if((r=o).isZero())return a+h;for(;a.length<6;)a="0"+a;h=""+a+h}},To.getHighBits=function(){return this.high},To.getHighBitsUnsigned=function(){return this.high>>>0},To.getLowBits=function(){return this.low},To.getLowBitsUnsigned=function(){return this.low>>>0},To.getNumBitsAbs=function(){if(this.isNegative())return this.eq(du)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},To.isZero=function(){return 0===this.high&&0===this.low},To.eqz=To.isZero,To.isNegative=function(){return!this.unsigned&&this.high<0},To.isPositive=function(){return this.unsigned||this.high>=0},To.isOdd=function(){return 1==(1&this.low)},To.isEven=function(){return 0==(1&this.low)},To.equals=function(t){return $h(t)||(t=De(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},To.eq=To.equals,To.notEquals=function(t){return!this.eq(t)},To.neq=To.notEquals,To.ne=To.notEquals,To.lessThan=function(t){return this.comp(t)<0},To.lt=To.lessThan,To.lessThanOrEqual=function(t){return this.comp(t)<=0},To.lte=To.lessThanOrEqual,To.le=To.lessThanOrEqual,To.greaterThan=function(t){return this.comp(t)>0},To.gt=To.greaterThan,To.greaterThanOrEqual=function(t){return this.comp(t)>=0},To.gte=To.greaterThanOrEqual,To.ge=To.greaterThanOrEqual,To.compare=function(t){if($h(t)||(t=De(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},To.comp=To.compare,To.negate=function(){return!this.unsigned&&this.eq(du)?du:this.not().add(ol)},To.neg=To.negate,To.add=function(t){$h(t)||(t=De(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+o)>>>16,a+=(u+=e+h)>>>16,a+=i+r,He((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},To.subtract=function(t){return $h(t)||(t=De(t)),this.add(t.neg())},To.sub=To.subtract,To.multiply=function(t){if(this.isZero())return this;if($h(t)||(t=De(t)),Mt)return He(Mt.mul(this.low,this.high,t.low,t.high),Mt.get_high(),this.unsigned);if(t.isZero())return this.unsigned?cA:Ke;if(this.eq(du))return t.isOdd()?du:Ke;if(t.eq(du))return this.isOdd()?du:Ke;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(uA)&&t.lt(uA))return _t(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*o)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*o)>>>16,c&=65535,u+=(c+=n*h)>>>16,u+=i*a+e*o+s*h+n*r,He((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},To.mul=To.multiply,To.divide=function(t){if($h(t)||(t=De(t)),t.isZero())throw b("division by zero");var i,e,s;if(Mt)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?He((this.unsigned?Mt.div_u:Mt.div_s)(this.low,this.high,t.low,t.high),Mt.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?cA:Ke;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return cA;if(t.gt(this.shru(1)))return lA;s=cA}else{if(this.eq(du))return t.eq(ol)||t.eq(dA)?du:t.eq(du)?ol:(i=this.shr(1).div(t).shl(1)).eq(Ke)?t.isNegative()?ol:dA:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(du))return this.unsigned?cA:Ke;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=Ke}for(e=this;e.gte(t);){i=x.max(1,x.floor(e.toNumber()/t.toNumber()));for(var n=x.ceil(x.log(i)/x.LN2),r=n<=48?1:nA(2,n-48),h=_t(i),o=h.mul(t);o.isNegative()||o.gt(e);)o=(h=_t(i-=r,this.unsigned)).mul(t);h.isZero()&&(h=ol),s=s.add(h),e=e.sub(o)}return s},To.div=To.divide,To.modulo=function(t){return $h(t)||(t=De(t)),Mt?He((this.unsigned?Mt.rem_u:Mt.rem_s)(this.low,this.high,t.low,t.high),Mt.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},To.mod=To.modulo,To.rem=To.modulo,To.not=function(){return He(~this.low,~this.high,this.unsigned)},To.countLeadingZeros=function(){return this.high?x.clz32(this.high):x.clz32(this.low)+32},To.clz=To.countLeadingZeros,To.countTrailingZeros=function(){return this.low?iA(this.low):iA(this.high)+32},To.ctz=To.countTrailingZeros,To.and=function(t){return $h(t)||(t=De(t)),He(this.low&t.low,this.high&t.high,this.unsigned)},To.or=function(t){return $h(t)||(t=De(t)),He(this.low|t.low,this.high|t.high,this.unsigned)},To.xor=function(t){return $h(t)||(t=De(t)),He(this.low^t.low,this.high^t.high,this.unsigned)},To.shiftLeft=function(t){return $h(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?He(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):He(0,this.low<<t-32,this.unsigned)},To.shl=To.shiftLeft,To.shiftRight=function(t){return $h(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?He(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):He(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},To.shr=To.shiftRight,To.shiftRightUnsigned=function(t){return $h(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?He(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):He(32===t?this.high:this.high>>>t-32,0,this.unsigned)},To.shru=To.shiftRightUnsigned,To.shr_u=To.shiftRightUnsigned,To.rotateLeft=function(t){var i;return $h(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?He(this.high,this.low,this.unsigned):t<32?(i=32-t,He(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),He(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},To.rotl=To.rotateLeft,To.rotateRight=function(t){var i;return $h(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?He(this.high,this.low,this.unsigned):t<32?(i=32-t,He(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),He(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},To.rotr=To.rotateRight,To.toSigned=function(){return this.unsigned?He(this.low,this.high,!1):this},To.toUnsigned=function(){return this.unsigned?this:He(this.low,this.high,!0)},To.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},To.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},To.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},Ge.fromBytes=function(t,i,e){return e?Ge.fromBytesLE(t,i):Ge.fromBytesBE(t,i)},Ge.fromBytesLE=function(t,i){return new Ge(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},Ge.fromBytesBE=function(t,i){return new Ge(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};var Se=Ge;function gA(t,i){return t.lessThan(i)?t:i}function wA(t){if(t>=55296&&t<=57343)throw new b("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function AA(t,i){return t>>i&63|128}function vA(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(wA(t),i.push(t>>12&15|224),i.push(AA(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(AA(t,12)),i.push(AA(t,6))),i.push(63&t|128)):i.push(t)}function mA(t,i){if(i.Ku>=t.length)throw new b("Invalid byte index");const e=255&t[i.Ku];if(i.Np(1),128==(192&e))return 63&e;throw new b("Invalid continuation byte")}function pA(t,i){const e=i.Ku;if(e>t.length)throw new b("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.Np(1),0==(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|mA(t,i);if(e>=128)return e;throw new b("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|mA(t,i)<<6|mA(t,i);if(e>=2048)return wA(e),e;throw new b("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|mA(t,i)<<12|mA(t,i)<<6|mA(t,i);if(e>=65536&&e<=1114111)return e}throw new b("Invalid UTF-8 detected")}r(),r();var yA=65279;var MA=[128,64,32,16,8,4,2,1],yl=class{Ep(t){return TA(this.bp,t)}constructor(t){this.bp=t}};function TA(t,i){return(t&i)===i}function _u(t,i){return TA(t,MA[i])}function F(t,i){const e=t.getUint8(i.Ku);return i.Np(1),e}function NA(t,i,e){t.setUint8(i.Ku,e),i.Np(1)}function cc(t,i,e){const s=ml(xe(t),i.Ku,i.Ku+e);return i.Np(s.byteLength),s}function DA(t,i,e){xe(t).set(xe(e),i.Ku),i.Np(e.byteLength)}function SA(t,i,e){return i.Ku+e<=t.byteLength}function IA(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=F(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+F(t,i);return s}(t,i,e)}function bl(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.Ku,e);return i.Np(2),s}function EA(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.Ku,e,s),i.Np(2)}function Sn(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.Ku,e);return i.Np(4),s}function eu(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.Ku,e,s),i.Np(4)}function We(t,i,e){void 0===e&&(e=!1);const s=Sn(t,i,e),n=Sn(t,i,e),r=e?n:s,h=e?s:n;return Se.fromBits(h,r,!0)}function bA(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),h=s?n:r;eu(t,i,s?r:n,s),eu(t,i,h,s)}function LA(t,i){return CA(t,i)}function Vo(t,i,e){return zh(GA(cc(t,i,e)))}function kA(t,i){const e=F(t,i);let s;return 0==(128&e)?s=e:192==(224&e)?s=64*(31&e)+(63&F(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&F(t,i))+(63&F(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&F(t,i))+64*(63&F(t,i))+(63&F(t,i))),s}function CA(t,i){return xA(t,i,!0)}function xA(t,i,e){const s=[];for(;i.Ku<t.byteLength;){const n=F(t,i);if(e&&!n)break;s.push(n)}return zh(s)}function OA(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){NA(t,i,e.charCodeAt(n))}}function jA(t,i){if(!(i.Ku+2<=t.byteLength))return;const e=t.getUint8(i.Ku),s=t.getUint8(i.Ku+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function zA(t,i){const e=jA(t,i);return void 0!==e&&i.Np(2),Sa(t,i,!0===e)}function Sa(t,i,e){return void 0===e&&(e=!1),PA(t,i,e,!0)}function PA(t,i,e,s){const n=[];for(;i.Ku+2<=t.byteLength;){const r=bl(t,i,e);if(s&&!r)break;n.push(r)}return zh(n)}function BA(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){EA(t,i,e.charCodeAt(r),s)}}function Yi(t){return xA(Ao(t),new Vr,!1)}function ba(t){const i=new T(t.length);return OA(Ao(i),new Vr,t),i}function RA(t,i){return void 0===i&&(i=!1),PA(Ao(t),new Vr,i,!1)}function UA(t,i){void 0===i&&(i=!1);const e=new T(2*t.length);return BA(Ao(e),new Vr,t,i),e}function QA(t,i){return i.Ku+3<=t.byteLength&&(239===t.getUint8(i.Ku)&&187===t.getUint8(i.Ku+1)&&191===t.getUint8(i.Ku+2))}function Fi(t,i){return function(t,i,e){const s=[],n=QA(t,i);n&&i.Np(3);for(;i.Ku<t.byteLength;){const n=kA(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return tw(s)}(t,i,!0)}function wa(t){return function(t){return tw(t)}(function(t,i){const e=[],s=new Vr;let n;if(!i){if(n=pA(t,s),!1===n)return e;n===yA||e.push(n)}for(;!1!==(n=pA(t,s));)e.push(n);return e}(xe(t)))}function FA(t){return new T(function(t){const i=[];for(const e of t)vA(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function Hi(t,i){if(QA(t,i))return Fi(t,i);if(void 0!==jA(t,i))return zA(t,i);if(i.Ku+4<=t.byteLength){if(0===t.getUint8(i.Ku)&&0===t.getUint8(i.Ku+2))return Sa(t,i,!1);if(0===t.getUint8(i.Ku+1)&&0===t.getUint8(i.Ku+3))return Sa(t,i,!0)}return Fi(t,i)}function ml(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new T(t.buffer,t.byteOffset+i,e-i)}function ir(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function Ao(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function xe(t){return new T(t.buffer,t.byteOffset,t.byteLength)}function YA(t){return t instanceof ArrayBuffer||ga(t)}function ts(t){return t instanceof ArrayBuffer?new T(t):xe(t)}function Th(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):Pe(ml(t,i,e))}function Pe(t){if(t.slice)return t.slice(0);{const i=new T(t.byteLength);return i.set(t,0),i}}function GA(t){return[].slice.call(t)}var Vr=class t{get Ku(){return this.Zu}Np(t){this.Zu+=t}Dp(t){this.Zu=t}Sp(){return new t(this.Ku)}Lp(){return new pl(this.Ku<<3)}constructor(t=0){this.Zu=t}};function go(t){let i=t.toLowerCase(),e=0,s=0;Kg(i,"0x")&&(i=i.substring(2));const n=new T(x.ceil(i.length/2));for(1==(1&i.length)&&(e=1,n[s++]=C(i[0],16));e<i.length;e+=2)n[s++]=C(i.substr(e,2),16);return n}function VA(t){return.001*t}r();var Rh=class t{kp(){return F(this.Cp,this.xp)}Op(){return bl(this.Cp,this.xp)}jp(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.Ku,e);return i.Np(2),s}(this.Cp,this.xp)}zp(){return Sn(this.Cp,this.xp)}Pp(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.Ku,e);return i.Np(4),s}(this.Cp,this.xp)}Bp(){return We(this.Cp,this.xp)}Rp(t){return cc(this.Cp,this.xp,t)}Up(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(Sn(t,i));return s}(this.Cp,this.xp,t)}Qp(t){return Vo(this.Cp,this.xp,t)}Fp(){return Fi(this.Cp,this.xp)}Yp(t){this.xp.Np(t)}Sp(){return new t(this.Cp,this.xp.Sp())}constructor(t,i){this.Cp=t,this.xp=i}};r(),r();function WA(t,i){return t.hA===i}function HA(t,i){for(const e of t)if(WA(e,i))return e}var qA=class extends Jo{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.Gp=t,this.Vp=i}},Mi=class t{static Wp(i){const e=i.Cp,s=i.xp,n=t.Hp(e,s,!1);if(!n.qp)throw new qA(s.Ku,n.m);return n.m}static Hp(i,e,s){const n=[];for(;e.Ku<i.byteLength;){const r=t.Xp(i,e,s);if(!r.qp)return{qp:!1,m:n};n.push(r.Zp)}return{qp:!0,m:n}}static Kp(i,e){const s=t.Xp(i,e,!1);if(!s.qp)throw new qA(e.Ku);return s.Zp}static Jp(i,e){const s=i.Cp,n=i.xp;for(;n.Ku<s.byteLength;){const i=t.Xp(s,n,!1);if(!i.qp)return;if(i.Zp.hA===e)return i.Zp}}static Xp(i,e,s){const n=e.Ku,r=t.$p(i,e);if(!r.qp)return r;const h=r.iy;let o=h.ey;if(0===o){if(s)return e.Dp(n),{qp:!1,sy:1/0};o=i.byteLength-n}const a=n+o;if(a>i.byteLength){const t=a;return e.Dp(n),{qp:!1,sy:t}}const u={hA:h.hA,Ku:n,Cp:new Rh(ir(i,n,a),new Vr(h.oy))};return e.Dp(a),{qp:!0,Zp:u}}static $p(t,i){const e=i.Ku;if(!SA(t,i,8)){return{qp:!1,sy:i.Ku+8}}let s=Sn(t,i),n=Vo(t,i,4);if(1===s){if(!SA(t,i,8)){const t=i.Ku+8;return i.Dp(e),{qp:!1,sy:t}}s=We(t,i).toNumber()}if("uuid"===n){if(!SA(t,i,16)){const t=i.Ku+16;return i.Dp(e),{qp:!1,sy:t}}n=Vo(t,i,16)}return{qp:!0,iy:{hA:n,ey:s,oy:i.Ku-e}}}static uy(t,i,e){const s=t.Cp,n=t.xp;let r=ml(xe(s),n.Ku,s.byteLength);return e&&(r=Pe(r)),n.Np(r.byteLength),{hA:i,Cp:r}}static ly(i,e,s){const n=i.zp(),{version:r,flags:h}=sc(n);return{hA:e,_y:r,gy:h,Cp:t.uy(i,e,s).Cp}}};function Ns(t,i){const e=XA(t,i);if(!e)throw new b("Missing "+i+" atom");return e}function XA(t,i){for(const e of t)if(e.hA===i)return e.Cp}function La(t,i){const e=[];for(const s of t)s.hA===i&&e.push(s.Cp);return e}function sc(t){return{version:t>>24,flags:new yl(16777215&t)}}var Qi=class t{static wy(i){const e=[],s=Mi.Wp(new Rh(i,new Vr));for(const i of s){const s=t.Ay(i);s&&e.push(s)}return e}static vy(t){return Mi.Hp(t,new Vr,!1).m.some(this.py)}static yy(i){return La(Mi.Wp(new Rh(i,new Vr)),At.lp).map(t.My)}static Ty(i){return La(Mi.Wp(i.Cp),At.lp).map(t.My)}static py(t){return t.hA===At.gp||t.hA===At._p||t.hA===At.Tm||t.hA===At.ep||t.hA===At.cp||t.hA===At.fp||t.hA===At.dp}static Ay(i){switch(i.hA){case At.Tm:return t.Ny(i.Cp);case At.ep:return t.Dy(i.Cp,i.Ku);case At.cp:return t.Sy(i.Cp);case At.fp:return t.Iy(i.Cp);case At.dp:return t.Ey(i.Cp)}}static Ny(i){const e=Mi.Wp(i),s=Ns(e,At.Nm),n=La(e,At.Dm),r=XA(e,At.zm),h=t.by(s),o=n.map(t.Ly),a=r?t.Cy(r):void 0;return{hA:At.Tm,iy:h,Z:o,xy:a}}static by(t){const i=t.zp(),{version:e,flags:s}=sc(i),n=1===e?t.Bp():t.zp(),r=1===e?t.Bp():t.zp(),h=t.zp(),o=1===e?t.Bp():t.zp(),a=t.zp(),u=t.Op()>>8;t.Yp(2),t.Yp(8);const c=t.Up(9);t.Yp(24);const l=t.zp();return{hA:At.Nm,_y:e,gy:s,Oy:n,jy:r,zy:h,ct:o,Py:a,xg:u,By:c,Ry:l}}static Ly(i){const e=Mi.Wp(i),s=Ns(e,At.Sm),n=Ns(e,At.Im),r=t.Uy(s),h=t.Qy(n);return{hA:At.Dm,iy:r,Fy:h}}static Uy(t){const i=t.zp(),{version:e,flags:s}=sc(i),n=1===e?t.Bp():t.zp(),r=1===e?t.Bp():t.zp(),h=t.zp();t.Yp(4);const o=1===e?t.Bp():t.zp();t.Yp(8);const a=t.jp(),u=t.jp(),c=t.jp()/256;t.Yp(2);const l=t.Up(9),d=t.zp()/65536,f=t.zp()/65536;return{hA:At.Sm,Yy:s.Ep(1),Gy:s.Ep(2),Vy:s.Ep(4),Oy:n,jy:r,Wy:h,ct:o,Hy:a,qy:u,xg:c,By:l,ji:d,Ti:f}}static Qy(i){const e=Mi.Wp(i),s=Ns(e,At.Em),n=Ns(e,At.Lm),r=Ns(e,At.Cm),h=t.Xy(s),o=t.Zy(n),a=t.Ky(r);return{hA:At.Im,iy:h,Jy:o,$y:a}}static Xy(t){const i=t.zp(),{version:e,flags:s}=sc(i),n=1===e?t.Bp():t.zp(),r=1===e?t.Bp():t.zp(),h=t.zp(),o=1===e?t.Bp():t.zp();t.Op();return t.Yp(2),{hA:At.Em,_y:e,gy:s,Oy:n,jy:r,zy:h,ct:o}}static Zy(t){const i=t.zp(),{version:e,flags:s}=sc(i);t.Yp(4);const n=t.Qp(4);t.Yp(12);const r=t.Fp();return{hA:At.Lm,_y:e,gy:s,tM:n,l:r}}static Ky(i){const e=Ns(Mi.Wp(i),At.xm),s=t.iM(e);return{hA:At.Cm,eM:s}}static iM(i){const e=Ns(Mi.Wp(i),At.Om),s=t.sM(e);return{hA:At.xm,nM:s}}static sM(i){const e=i.zp(),{version:s,flags:n}=sc(e),r=(i.zp(),[]),h=Mi.Wp(i);for(const i of h){const e=t.rM(i.Cp,i.hA);e&&r.push(e)}return{hA:At.Om,_y:s,gy:n,hM:r}}static rM(i,e){let s=t.oM(i,e);return s||(s=t.aM(i,e),s||(e===At.Km?t.uM(i):void 0))}static oM(i,e){return e===At.Xm?t.cM(i):e===At.tp?t.lM(i):void 0}static aM(i,e){return e===At.Bm?t.dM(i):e===At.Um||e===At.Qm?t.fM(i,e):e===At.Ym?t._M(i,e):e===At.Vm?t.gM(i,e):e===At.ip?t.wM(i):void 0}static AM(t,i){t.Yp(6);return{hA:i,vM:t.Op()}}static mM(i,e){const s=t.AM(i,e);i.Yp(8);const n=i.Op(),r=i.Op();i.Yp(2),i.Yp(2);return oe({},s,{pM:n,yM:r,MM:i.zp()>>>16})}static TM(i,e){const s=t.AM(i,e);i.Yp(2),i.Yp(2),i.Yp(12);const n=i.Op(),r=i.Op(),h=i.zp(),o=i.zp();i.Yp(4);const a=i.Op();i.Yp(32);const u=i.Op();return i.Yp(2),oe({},s,{ji:n,Ti:r,NM:h,DM:o,SM:a,IM:u})}static cM(i){const e=t.mM(i,At.Xm),s=Ns(Mi.Wp(i),At.Zm);return oe({},e,{EM:t.bM(s)})}static uM(i){const e=t.AM(i,At.Km),s=Mi.Wp(i),n=Ns(s,At.Jm),r=t.LM(n),h=XA(s,At.$m);return oe({},e,{kM:r,CM:h?t.xM(h):h})}static LM(t){return{hA:At.Jm,wd:t.Fp()}}static xM(t){return{hA:At.$m,kh:t.Fp()}}static bM(t){return Mi.ly(t,At.Zm,!0)}static dM(i){const e=t.TM(i,At.Bm),s=Mi.Wp(i),n=Ns(s,At.Rm),r=XA(s,At.qm);return oe({},e,{OM:t.jM(n),zM:r?t.PM(r):void 0})}static fM(i,e){const s=t.TM(i,e),n=Ns(Mi.Wp(i),At.Fm);return oe({},s,{BM:t.RM(n)})}static _M(i,e){const s=t.TM(i,e),n=Ns(Mi.Wp(i),At.Gm);return oe({},s,{UM:t.QM(n)})}static gM(i,e){const s=t.TM(i,e),n=Mi.Wp(i),r=Ns(n,At.Wm),h=t.FM(r),o=XA(n,At.Hm);return oe({},s,{YM:h,GM:o?t.VM(o):void 0})}static wM(i){const e=i.Sp(),s=t.TM(i,At.ip),n=Ns(Mi.Wp(i),At.wp),r=t.WM(n);return oe({},s,{HM:t.aM(e,r.XM.qM),ZM:r})}static lM(i){const e=i.Sp(),s=t.mM(i,At.tp),n=Ns(Mi.Wp(i),At.wp),r=t.WM(n);return oe({},s,{HM:t.oM(e,r.XM.qM),ZM:r})}static WM(i){const e=Ns(Mi.Wp(i),At.Ap),s=t.KM(e);return{hA:At.wp,XM:s}}static KM(t){const i=t.Qp(4);return{hA:At.Ap,qM:i}}static jM(t){return Mi.uy(t,At.Rm,!0)}static RM(t){return Mi.uy(t,At.Fm,!0)}static QM(t){return Mi.uy(t,At.Gm,!0)}static FM(t){return Mi.uy(t,At.Wm,!0)}static VM(t){const i=t.Qp(4);switch(i){case"nclx":return{JM:pa.ON_SCREEN_COLOURS,$M:t.Op(),tT:t.Op(),iT:t.Op(),eT:0!=(128&t.kp())};case"rICC":return{JM:pa.RESTRICTED_ICC_PROFILE};case"prof":return{JM:pa.UNRESTRICED_ICC_PROFILE};default:throw b("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static PM(t){const i=t.zp(),e=t.zp();return{hA:At.qm,sT:i,nT:e}}static Cy(i){const e=La(Mi.Wp(i),At.Pm).map(t.rT);return{hA:At.zm,Z:e}}static rT(t){const i=t.zp(),{version:e,flags:s}=sc(i),n=t.zp(),r=t.zp(),h=t.zp(),o=t.zp(),a=t.zp();return{hA:At.Pm,_y:e,gy:s,Wy:n,hT:r,oT:h,aT:o,uT:a}}static Dy(i,e){const s=Mi.Wp(i),n=Ns(s,At.sp),r=La(s,At.np),h=t.cT(n),o=r.map(t.lT);return{hA:At.ep,dT:e,iy:h,Z:o}}static cT(t){const i=t.zp(),{version:e,flags:s}=sc(i),n=t.zp();return{hA:At.sp,_y:e,gy:s,fT:n}}static lT(i){const e=Mi.Wp(i),s=Ns(e,At.rp),n=La(e,At.hp),r=XA(e,At.op),h=t._T(s),o=n.map((i=>t.gT(i,h))),a=r?t.wT(r):void 0;return{hA:At.np,iy:h,AT:o,vT:a}}static _T(t){const i=t.zp(),{version:e,flags:s}=sc(i),n=t.zp(),r=s.Ep(mt.BASE_DATA_OFFSET_PRESENT)?t.Bp():void 0,h=s.Ep(mt.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.zp():void 0,o=s.Ep(mt.DEFAULT_SAMPLE_DURATION_PRESENT)?t.zp():void 0,a=s.Ep(mt.DEFAULT_SAMPLE_SIZE_PRESENT)?t.zp():void 0,u=s.Ep(mt.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.zp():void 0;return{hA:At.rp,_y:e,gy:s,Wy:n,mT:r,pT:h,oT:o,aT:a,uT:u}}static gT(i,e){const s=i.zp(),{version:n,flags:r}=sc(s),h=i.zp(),o=r.Ep(hn.DATA_OFFSET_PRESENT)?i.Pp():void 0,a=r.Ep(hn.FIRST_SAMPLE_FLAGS_PRESENT)?i.zp():void 0,u=[];for(let s=0;s<h;s++){const h=t.yT(i,r,n,e);0===s&&void 0!==a&&(h.gy=a),u.push(h)}return{hA:At.hp,_y:n,gy:r,MT:h,dT:o,TT:a,NT:u}}static yT(t,i,e,s){return{ct:i.Ep(hn.SAMPLE_DURATION_PRESENT)?t.zp():s.oT,ey:i.Ep(hn.SAMPLE_SIZE_PRESENT)?t.zp():s.aT,gy:i.Ep(hn.SAMPLE_FLAGS_PRESENT)?t.zp():s.uT,DT:i.Ep(hn.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.zp():t.Pp():void 0}}static Ey(t){const i=t.Cp,e=t.xp,s=Sn(i,e),{version:n,flags:r}=sc(s);if(1===n){const t=Sn(i,e),s=We(i,e),h=Sn(i,e),o=Sn(i,e),a=LA(i,e),u=LA(i,e),c=Th(xe(i),e.Ku,i.byteLength);return e.Np(c.byteLength),{hA:At.dp,_y:n,gy:r,ST:a,IT:u,zy:t,ET:s,bT:h,o:o,LT:c}}{const t=LA(i,e),s=LA(i,e),h=Sn(i,e),o=Sn(i,e),a=Sn(i,e),u=Sn(i,e),c=Th(xe(i),e.Ku,i.byteLength);return e.Np(c.byteLength),{hA:At.dp,gy:r,_y:n,ST:t,IT:s,zy:h,kT:o,bT:a,o:u,LT:c}}}static Sy(t){return Mi.uy(t,At.cp,!1)}static My(i){const e=i.Cp,s=i.xp,n=Pe(xe(e)).buffer,r=Sn(e,s),{version:h,flags:o}=sc(r),a=t.CT(e,s),u=[];if(h>0){const t=Sn(e,s);for(let i=0;i<t;i++){const t=cc(e,s,16);u.push(t)}}const c=Sn(e,s),l=new T(n,s.Ku,c);return s.Np(e.byteLength),{hA:At.lp,_y:h,gy:o,xT:a,OT:u,jT:c,Cp:l,zT:n}}static CT(t,i){let e="";for(let s=0;s<4;s++){const s=F(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=F(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=F(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=F(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=F(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static Iy(t){const i=t.Cp,e=t.xp,s=Sn(i,e),{version:n,flags:r}=sc(s),h=Sn(i,e),o=Sn(i,e);let a,u;0===n?(a=Se.fromBits(Sn(i,e),0,!0),u=Se.fromBits(Sn(i,e),0,!0)):(a=We(i,e),u=We(i,e)),e.Np(2);const c=bl(i,e),l=[];for(let t=0;t<c;t+=1){const t=Sn(i,e),s=t>>31&1,n=2147483647&t,r=Sn(i,e),h=Sn(i,e),o=h>>31&1,a=h>>28&7,u=268435455&h;l.push({PT:s,BT:n,ct:r,RT:o,UT:a,QT:u})}return{hA:At.fp,_y:n,gy:r,FT:h,zy:o,YT:a,GT:u,VT:c,WT:l}}static wT(t){const i=t.Cp,e=t.xp,s=Sn(i,e),{version:n,flags:r}=sc(s);let h;return h=0===n?Se.fromBits(Sn(i,e),0,!0):We(i,e),{hA:At.op,_y:n,gy:r,vT:h}}},ZA={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function KA(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,h=t.queryParameters;return!(i||e||s||n||r||h)}function JA(t){return t&&void 0!==t.licenseAcquisitionURL}var $A,iv,wo,ev,sv,nv,Ks,rv,hv=JA,ov=JA;function av(t){if(!t)return!0;if(lv(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return KA(i)&&KA(e)&&KA(s)&&void 0===n&&KA(r)}function uv(t){const i=Nw(t),e=function(t){var i;const e=t;return Tw(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!Mw(e)}(t);return(!i||!e)&&(i||e)}function cv(t){return t.integration===Dh}function Ps(t){const i=t;if(!i)return!1;if(av(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(lv(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!hv(s))return!1;if(n&&!ov(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(Pu.Mm.vm(i.integration))return!0;switch(i.integration){case dw:if(!function(t){const i=t,e=i.integration===dw;return e&&(dv(t)||fv(t))}(t))return!1;break;case jh:if(!Jh(t))return!1;break;case _w:if(!function(t){const i=t;return i.integration===_w}(t))return!1;break;case Dh:if(!cv(t))return!1;break;case Tl:if(!uv(t))return!1;break;case fw:if(!function(t){const i=t;return i.integration===fw}(t))return!1;break;case gw:if(!lv(t))return!1;break;case Vh:if(!function(t){const i=t;return i.integration===Vh&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case ww:if(!function(t){const i=t;return i.integration===ww}(t))return!1;break;case Ih:if(!_v(t))return!1;break;case Aw:if(!function(t){return t.integration===Aw}(t))return!1;break;case qh:if(!Uo(t))return!1;break;case gl:if(!function(t){const i=t;return i.integration===gl&&void 0!==i.token}(t))return!1;break;case vw:if(!function(t){const i=t;return i.integration===vw}(t))return!1;break;case mw:if(!function(t){const i=t;return i&&j_(i.releasePid)&&j_(i.accountId)&&j_(i.token)}(t))return!1;break;case pw:return!0;default:return!1}}return!0}function lv(t){return t.integration===gw}function dv(t){return void 0!==t.authToken}function fv(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function Jh(t){const i=t;return i.integration===jh&&void 0!==i.token}function _v(t){const i=t;return i&&i.integration===Ih&&ae(i.ticketAcquisitionURL)&&ae(i.streamId)}function Uo(t){const i=t;return i.integration===qh&&void 0!==i.token}function gv(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:ZA[t];var r;const h=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,o=h?{customData:h}:{};var a;const u=oe({},null!=(a=null==e?void 0:e.headers)?a:{},o),c=null!=e?e:{},{customdata:l}=c;return oe({},yw(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function cl(t){switch(t.toLowerCase()){case"widevine":case jt:return jt;case"playready":case Wi:return Wi;case"fairplay":case Wa:return Wa}}function wv(t,i){switch(t){case Lw:return function(t){const i={},e=Qi.yy(new DataView(t));for(const t of e)i[t.xT]=t.zT;return i}(i);case kw:case Xh:return function(t){return{[Yc]:t}}(i);default:throw new ce(le.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}function Av(t,i,e){const s=function(t,i,e){var s;const{useCredentials:n,crossOrigin:r}=function(t,i){let e=Ds.Bv;return t.useCredentials?e=Ds.Uv:t.crossOrigin&&(e=bv(t.crossOrigin)),e===Ds.Bv&&i&&i.vr&&i.vr[360]&&(e=Ds.Rv),{useCredentials:e===Ds.Uv,crossOrigin:e}}(t,i);let h=t.liveOffset;j_(h)||(h=e&&j_(e.liveOffset)?e.liveOffset:void 0);let o=t.timeServer;j_(o)||(o=i&&j_(i.timeServer)?i.timeServer:void 0);let a=t.hlsDateRange;j_(a)||(a=e&&j_(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=j_(t.dash)?mv(t.dash):void 0,g=j_(t.hls)?pv(t.hls):void 0,w=Mv(Ni(t.abr),null==e?void 0:e.abr),A=dt(t.lcevc),v=j_(t.ignoreEmbeddedTextTrackTypes)?Qv(t.ignoreEmbeddedTextTrackTypes):[];var m;const p=Sv(null!=(m=t.seamlessSwitchStrategy)?m:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch);return{crossOrigin:r,useCredentials:n,liveOffset:h,timeServer:o,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:_,hls:g,abr:w,lcevc:A,ignoreEmbeddedTextTrackTypes:v,seamlessSwitchStrategy:p}}(t,i,e),n=Qc(t.src);let r=t.type;r||(r=t.src?la(t.src):void 0);const h=function(t,i){let e;e=j_(t.contentProtection)?t.contentProtection:j_(t.drm)?t.drm:j_(i)&&j_(i.contentProtection)?i.contentProtection:j_(i)&&j_(i.drm)?i.drm:void 0;return vv(e)}(t,i);return oe({},s,{src:n,type:r,contentProtection:h,ssai:j_(t.ssai)?lw(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function vv(t){return Ps(t)&&t.integration&&t.integration===gw?function(t){const i=gv(Ci.qv,t),e=gv(Ci.Hv,t),s=t[Ci.Xv]&&gv(Ci.Xv,t);return oe({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}function mv(t){return{useSeamlessPeriodSwitch:Sv(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:dt(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?Ee(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:dt(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:dt(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:dt(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards)}}function pv(t){return{discontinuityAlignment:yv(null==t?void 0:t.discontinuityAlignment)}}function yv(t){if(!t||!ae(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}function Ni(t){if(!j_(t))return;return Tv(bg(null==t?void 0:t.preferredAudioCodecs,P),bg(null==t?void 0:t.preferredVideoCodecs,P),dt(null==t?void 0:t.restrictToPlayerSize))}function Mv(t,i){if(!j_(t)&&!j_(i))return;var e;return Tv(Nv(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),Nv(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function Tv(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function Nv(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function Dv(t,i){if(void 0!==i)switch(t){case iv.vp:return i.preferredVideoCodecs;case iv.mp:return i.preferredAudioCodecs;default:return}}function Sv(t){if(!t||!ae(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}function Iv(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":return!0;default:return!1}}function Ev(t){return!!t&&Va(t,"mpd")}function la(t){let i=vi.Gv;return Ev(t)&&(i=vi.Qv),function(t){return!!t&&Va(t,"m3u8")}(t)&&(i=vi.Fv),i}function bv(t){switch(t){case Ds.Rv:case Ds.Uv:return t;default:return Ds.Bv}}function Lv(t){if(!t)return!1;const i=t.toLowerCase();return Kg(i,vi.Qv)}function Fa(t){if(!t)return!1;const i=t.toLowerCase();return Kg(i,vi.Fv)||Kg(i,vi.Yv)}function Aa(t){return lt(t)&&lt(t.ssai)&&"google-dai"===t.ssai.integration}function kv(t){return lt(t)&&ae(t.integration)&&"verizon-media"===t.integration}function Cv(t){return lt(t)&&ae(t.integration)&&"mediatailor"===t.integration}function xv(t){if(ae(t))return!t;if(kv(t))return!t.id;if(Aa(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return!t.src}function Ov(t){return Boolean(lt(t)&&ae(t.src))}function jv(t){return t.type===vi.Vv||t.type===vi.Wv}function Ra(t){return ae(t)||Ov(t)||Aa(t)||kv(t)}function zv(t){if(t){if(Ra(t))return xv(t);for(const i of t)if(!xv(i))return!1;return!0}return!0}function Pv(){return{crossOrigin:Ds.Bv,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:wo.HT}}function Bv(){return oe({},Pv(),{src:void 0,type:vi.Gv,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function Rv(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:sv.ENABLED,googleIma:{useNativeIma:!1,bitrate:-1}};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?nv.NONE:nv.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=Ig(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return sv.INSECURE;case"disabled":return sv.DISABLED;default:return sv.ENABLED}}(t.vpaidMode)),Yn(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(ae)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,bitrate:-1}:{useNativeIma:Ig(t.useNativeIma),bitrate:null!=(i=t.bitrate)?i:-1};var i}(t.googleIma))),i}function Uv(t){if(!qe(t))return[];const i=[];for(const e of t)ui(e)&&i.push(e);return i}function _s(t){return ae(t.src)}function Qv(t){return Yn(t)?t.filter(Iv):[]}r(),r(),function(t){t.HT="auto",t.qT="playlist",t.XT="media"}($A||($A={})),r(),r(),function(t){t.mp="audio",t.vp="video",t.Ru="text",t.ZT="image",t.KT="unknown"}(iv||(iv={})),function(t){t.HT="auto",t.JT="always",t.$T="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only"}(wo||(wo={})),function(t){t.VERIZON_MEDIA="verizon-media",t.MEDIATAILOR="mediatailor"}(ev||(ev={})),r(),r(),function(t){t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled"}(sv||(sv={})),r(),r(),function(t){t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll"}(nv||(nv={})),r(),function(t){t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange"}(Ks||(Ks={})),r(),r(),function(t){t[t.tN=0]="tN",t[t.Gn=1]="Gn",t[t.iN=2]="iN",t[t.eN=3]="eN",t[t.sN=4]="sN"}(rv||(rv={}));var Fv=class extends gg{constructor(i,e=rv.tN){super(t.bA),this.currentTime=i,this.readyState=e}};r();var ws=class extends gg{constructor(i){super(t.Sh),this.currentTime=i}};r();var vh=class extends gg{constructor(i){super(t.jh),this.currentTime=i}};r();var ns=class extends gg{constructor(t,i=rv.Gn){super(qo.yv),this.currentTime=t,this.readyState=i}};r();var Mn=class extends gg{constructor(i){super(t.EA),this.duration=i}};r();var Qh=class extends gg{constructor(i,e){super(t.WA),this.currentTime=i,this.playbackRate=e}};r();var Tc=class extends gg{constructor(i,e){super(t.ov),this.currentTime=i,this.currentProgramDateTime=e}};r();var ys=class extends gg{constructor(i){super(t.kA),this.currentTime=i}};r();var ms=class extends gg{constructor(t,i=rv.iN){super(qo.pv),this.currentTime=t,this.readyState=i}};r();var Ot=class extends gg{constructor(i){super(t.ZA),this.currentTime=i}};r();var $s=class extends gg{constructor(i){super(t.XA),this.currentTime=i}};r();var Ve=class extends gg{constructor(i,e){super(t.uv),this.currentTime=i,this.volume=e}};r();var Ct=class extends gg{constructor(t,i=rv.eN){super(qo.vv),this.currentTime=t,this.readyState=i}};r();var cs=class extends gg{constructor(t,i=rv.sN){super(qo.mv),this.currentTime=t,this.readyState=i}};r();var ds=class extends gg{constructor(t,i){super(qo.Mw),this.currentTime=t,this.readyState=i}};r();var me=class extends Ha{get error(){return this.errorObject.message}fa(){return this}constructor(t){super(Bi.ha),this.errorObject=t}};async function mu(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(yo(t),r<e){const t=x.min(s*2**r,n);r++,await be(t,i);continue}throw t}}r();var Yv,Gv={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};function Vv(t){switch(t){case"all":case"content":return t;default:return"none"}}function Wv(t){const i=se(t||{});return i.libraryLocation&&(i.libraryLocation=xa(i.libraryLocation,!0)),i.isEmbeddable=Boolean(i.isEmbeddable),i.cast=function(t){const i=uw(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(i.cast),i.ads=Rv(i.ads),i.analytics=Uv(i.analytics),i.mutedAutoplay=Vv(i.mutedAutoplay),i.allowNativeFullscreen=Boolean(i.allowNativeFullscreen),i.allowMixedContent=Boolean(i.allowMixedContent),i.persistVolume=Boolean(i.persistVolume),i.liveOffset=function(t){return Number(t)||void 0}(i.liveOffset),i.hlsDateRange=function(t){return Boolean(t)}(i.hlsDateRange),i.retainPlaybackRateOnSourceChange=Boolean(i.retainPlaybackRateOnSourceChange),i.license=function(t){return ae(t)?t:void 0}(i.license),i.licenseUrl=function(t){if(!t)return;try{return xa(t)}catch(t){return void ag.Pv("Invalid 'licenseUrl', falling back to default URL")}}(i.licenseUrl),i.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(i.vr),i.abr=Ni(i.abr),i.retryConfiguration=function(t){const i=oe({},Gv);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(i.retryConfiguration),i.hideDeprecationWarnings=Boolean(i.hideDeprecationWarnings),i}function Hv(t){return{j_:t.j_,ct:t.ct,R_:t.R_,lt:t.lt,F_:t.F_,Z_:t.Z_,hg:t.hg,ag:t.ag,vg:t.vg,Tg:t.Tg,Sg:t.Sg,Lg:t.Lg,xg:t.xg}}function qv(t,i){const e=i.xg,s=i.Z_;t.xg=e,t.Z_=s}function au(t,i,e){if(i===e)return;const s=i.j_,n=i.ct,r=i.Z_,h=i.hg,o=i.ag,a=i.vg,u=i.Tg,c=(i.Lg,i.Sg,i.xg),l=e.j_,d=e.ct,f=e.R_,_=e.F_,g=e.Z_,w=e.hg,A=e.ag,v=e.vg,m=e.Tg,p=(e.Lg,e.Sg,e.xg);a!==rv.tN&&t.Co(new Fv(l,v)),w&&!h?t.Co(new ws(l)):!w&&h&&t.Co(new vh(l)),v>=rv.Gn&&t.Co(new ns(l,v)),d===n||j(d)&&j(n)||t.Co(new Mn(d)),A!==o&&t.Co(new Qh(l,A)),l!==s&&t.Co(new Tc(l,void 0)),f&&t.Co(new ys(l)),v>=rv.iN&&t.Co(new ms(l,v)),m&&!u?t.Co(new Ot(l)):!m&&u&&t.Co(new $s(l)),p===c&&g===r||t.Co(new Ve(l,p)),v>=rv.eN&&t.Co(new Ct(l,v)),v>=rv.sN&&t.Co(new cs(l,v)),v!==a&&t.Co(new ds(l,v)),_&&t.Co(new me(_))}!function(t){t.NONE="none",t.ALL="all",t.CONTENT="content"}(Yv||(Yv={})),r();var Wt=class extends gg{constructor(i){super(t.SA),this.currentSource=i}};r();var M=class extends gg{constructor(){super(t.CA)}};r();var rs=class extends gg{constructor(){super(t.OA)}},Xv=class extends _g{S_(){return this.nN}get G_(){return this.V_()}V_(){return this.rN}Dg(){return this.Dl}Eg(){return this.hN}oN(t){const i=this.I_;if(i===t)return;i.N_(this.iw);const e=Hv(this),s=this.O_(),n=this.Rg(),r=this.Ug();this.I_=t,this.nN.Pw=t.ht,this.hN.Pw=t.rt,this.Dl.Pw=t.nt,this.rN.Pw=t.G_,void 0!==e&&au(this,e,this);const h=this.O_();h!==s&&this.Co(new Wt(h)),this.Rg()!==n&&this.Co(new M),this.Ug()!==r&&this.Co(new rs),t.m_(this.iw)}async gn(){await super.gn(),this.nN.gn(),this.hN.gn(),this.Dl.gn(),this.rN.gn()}constructor(t){super(t),this.nN=new _e,this.hN=new _e,this.Dl=new Ac,this.rN=new ra,this.nN.Pw=t.ht,this.hN.Pw=t.rt,this.Dl.Pw=t.nt,this.rN.Pw=t.G_}};r();var Zv,Kv=class extends Xv{X_(){return function(t){let i=0,e=0,s=0,n=0,r=0,h=0,o=0;for(const a of t)i+=a.aN,e+=a.uN,s+=a.cN,n+=a.lN,r+=a.dN,h+=a.fN.amountOfBufferedAudioSegments,o+=a.fN.amountOfBufferedVideoSegments;return{aN:i,uN:e,cN:s,lN:n,dN:r,fN:{amountOfBufferedAudioSegments:h,amountOfBufferedVideoSegments:o}}}(this._N.map((t=>t.q_)))}Wg(){return il(this._N.map((t=>t.Wg()))).then(xs)}Zn(){return il(this._N.map((t=>t.Zn()))).then(xs)}Yg(){if(!this.bo){for(const t of this._N)t.Yg();this.bo=!0}}E_(){const t=[];for(const i of this._N)t.push(...i.E_());return t}Jg(t){let i=!1;for(const e of this._N)i=e.Jg(t)||i;return i}Co(t){this.Jg(t)||super.Co(t)}get Pw(){return this.I_}set Pw(t){this.oN(t)}gN(t){this._N.push(t)}wN(t){Et(this._N,t)}oN(t){if(t===this.I_)return;const i=this.I_;i.Fg(),super.oN(t),t.Qg(i)}Zg(){for(const t of this._N)t.Zg()}async gn(){this.Vo(),this.I_.Fg();for(const t of this._N)this.I_!==t&&await t.gn();await super.gn()}constructor(t){super(t),this._N=[],this.bo=!1,this.AN=!1,this.gN(t)}};r(),function(t){t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR"}(Zv||(Zv={}));var lc=class extends Fc{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}};function Jv(t){Vc(t,"MEDIA_ERR_ABORTED",1),Vc(t,"MEDIA_ERR_NETWORK",2),Vc(t,"MEDIA_ERR_DECODE",3),Vc(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),Vc(t,"MEDIA_ERR_ENCRYPTED",5)}function ne(t){var i,e;return function(t){return t.category===Yu.CONTENT_PROTECTION}(t)?new lc(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new lc($v(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function $v(t){if(t===le.MEDIA_ABORTED)return 1;if(t===le.MANIFEST_LOAD_ERROR||t===le.MEDIA_LOAD_ERROR||t===le.SUBTITLE_LOAD_ERROR)return 2;if(t===le.MEDIA_DECODE_ERROR)return 3;if(t===le.MEDIA_NOT_SUPPORTED)return 4;const i=Yu.fromCode(t);return i===Yu.NETWORK?2:i===Yu.SOURCE?4:i===Yu.LICENSE?6:i===Yu.CONTENT_PROTECTION?5:i===Yu.AD?7:3}function tm(t){return new ce(im(t.code),t.message,t)}function im(t){switch(t){case 1:return le.MEDIA_ABORTED;case 2:return le.NETWORK_ERROR;case 3:return le.MEDIA_DECODE_ERROR;case 4:return le.SOURCE_NOT_SUPPORTED;case 5:return le.CONTENT_PROTECTION_ERROR;case 6:return le.LICENSE_ERROR;case 7:return le.AD_ERROR}}Jv(lc),Jv(lc.prototype),r(),r(),r(),r(),r();var Tn=class extends co{tt(t){return super.tt(t)}fa(){return jg(this)}};r(),r(),r(),r();var em=class{get xw(){return this.vN}get U(){return this.vN.length}get va(){return this.Xa||(this.Xa=function(t){const i=t.xw.map((t=>t.va));return i.item=i=>{const e=0|i,s=t.jw(e);return s&&s.va||void 0},i}(this)),this.Xa}mN(t){this.vN.push(t),this.Xa&&this.Xa.push(t.va)}pN(t){Et(this.vN,t),this.Xa&&Et(this.Xa,t.va)}jw(t){return this.vN[t]}yN(t){return Yn(t)?function(t,i){for(const e of i)if(!na(t,e))return!1;return!0}(this.vN,t):na(this.vN,t)}Zn(){Ri(this.vN),this.Xa&&Ri(this.Xa)}constructor(){this.vN=[],this.Xa=void 0}};r();var Hn=class extends bo{fa(){return new sm(this.Lt.va)}constructor(t){super(Os.Sw),this.Lt=t}},sm=class extends te{constructor(t){super("update"),this.track=t}};r();var nm=0;function Vu(){return nm++}var rm=0;var hm=0;function om(){return hm++}var am=0;function um(){return am++}var cm=0;var lm=class extends i{get Gw(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.MN=t,this.Co(new Zr(this)))}get MN(){return this.TN.enabled}set MN(t){this.TN.enabled=t}get va(){return this.Xa||(this.Xa=Di(this)),this.Xa}get o(){return this.NN}get Vw(){return this.DN}get zt(){return this.TN.kind}get kh(){return this.SN}set kh(t){t!==this.SN&&(this.SN=t,this.Co(new Hn(this)))}get gs(){return this.TN.language}get eA(){return this.Rt?"enabled":"disabled"}get IN(){return this.TN}get Hw(){return this.vN}get qw(){}set qw(t){}EN(t){this.Rt=t}bN(){this.Rt=this.MN}constructor(t){super(),this.hA=iv.mp,this.Le=!1,this.Xa=void 0,this.TN=t,this.DN=Vu(),this.NN=cm+++"",this.SN=t.label,this.vN=new em,this.bN()}};r();var dm=0;var fm=class extends i{get Gw(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.MN=t,this.Co(new Zr(this)))}get MN(){return!!this.TN.selected}set MN(t){this.TN.selected=t}get va(){return this.Xa||(this.Xa=Di(this)),this.Xa}get o(){return this.NN}get Vw(){return this.DN}get zt(){return"main"}get kh(){return this.SN}set kh(t){t!==this.SN&&(this.SN=t,this.Co(new Hn(this)))}get gs(){return this.TN.language}get eA(){return this.Rt?"enabled":"disabled"}get IN(){return this.TN}get Hw(){return this.vN}get qw(){}set qw(t){}bN(){this.Rt=this.MN}EN(t){this.Rt=t}constructor(t){super(),this.hA=iv.vp,this.Le=!1,this.Xa=void 0,this.TN=t,this.DN=Vu(),this.NN=dm+++"",this.vN=new em,this.SN=t.label,this.bN()}};r();var ja,Ja,_m=class extends gg{constructor(i){super(t.pA),this.W_=i}};r(),r(),function(t){t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(ja||(ja={})),r(),r(),function(t){t.LN="cue",t.kN="region",t.CN="stylesheet"}(Ja||(Ja={})),r(),r();var Sl,gm={"line-left":"start",center:"middle","line-right":"end"},wm={start:"line-left",middle:"center",end:"line-right"};function Am(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function vm(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:S(t);return j(e)?i:e}(t,50)}r(),r(),r(),function(t){t.xN="mo",t.ON="So",t.Sw="Qn"}(Sl||(Sl={}));var za=class extends bo{constructor(t,i){super(t),this.jN=i}},yu=class extends te{constructor(t,i){super(t),this.cue=i}};function Oh(t){const i=[Sl.xN,Sl.ON,Sl.Sw];let e;const s={get track(){return t.Lt.va},get id(){return t.o},get uid(){return t.Vw},get startTime(){return t.zN},set startTime(i){t.zN=i},get endTime(){return t.PN},set endTime(i){t.PN=i},get content(){return t.O},addEventListener(t,i){const s=As(t,P);e.yn(s,i)},removeEventListener(t,i){const s=As(t,P);e.fn(s,i)}};return e=new nt(s),t.yn(i,(t=>e.Co(t.va))),s}function mm(){}function pm(t){return Ou(Oh(t),{get align(){return t.BN},get line(){return t.RN},get lineAlign(){return t.UN},get position(){return t.po},get positionAlign(){return t.QN},get region(){return t.FN?t.FN.va:null},get size(){return t.ey},get snapToLines(){return t.YN},get text(){return t.O},get vertical(){return t.Pt}})}r(),r();var $a=class extends za{fa(){return new ym(this.jN.va)}constructor(t){super(Sl.Sw,t)}},ym=class extends yu{constructor(t){super("update",t)}};r();var fu=class extends bo{fa(){return new Mm(this.jN.va)}constructor(t){super(Os.dw),this.jN=t}},Mm=class extends te{constructor(t){super("updatecue"),this.cue=t}},Qa=.02;function Tm(t,i){return Ua(t.GN,i.GN,Qa)&&Ua(t.VN,i.VN,Qa)&&t.o===i.o}var yn=class extends i{get zN(){return this.WN}set zN(t){var i,e;this.WN!==t&&(this.WN=t,null==(i=this.HN)||i.qN(this),this.Co(new $a(this)),null==(e=this.HN)||e.Co(new fu(this)))}get PN(){return this.XN}set PN(t){var i,e;this.XN!==t&&(this.XN=t,null==(i=this.HN)||i.qN(this),this.Co(new $a(this)),null==(e=this.HN)||e.Co(new fu(this)))}get o(){return this.NN}get Vw(){return this.DN}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Oh(this)}get ro(){return this.ho}set ro(t){this.ho=t}get Lt(){return this.HN}set Lt(t){this.HN=t}get O(){return this.ZN}set O(t){var i;this.ZN!==t&&(this.ZN=t,this.Co(new $a(this)),null==(i=this.HN)||i.Co(new fu(this)))}get KN(){return this.JN}set KN(t){this.JN=t}$N(t){return this===t||Dg(this,t)&&Tm(this,t)&&this.tD(t)}tD(t){return Ph(this.O,t.O)}iD(t,i){this.WN=t,this.XN=i,this.GN=t,this.VN=i}gn(){this.Vo()}constructor(t,i,e,s,n){super(),this.Xa=void 0,this.HN=void 0,this.ho=!1,this.eD=-1,this.DN=um(),this.WN=t,this.XN=i,this.GN=t,this.VN=i,this.ZN=e,this.JN=Boolean(s),this.NN=null!=n?n:""}};function Nm(t,i){return t.O===i.O&&t.RN===i.RN&&t.UN===i.UN&&t.po===i.po&&t.QN===i.QN&&t.FN===i.FN&&t.YN===i.YN&&t.ey===i.ey&&t.BN===i.BN&&t.Pt===i.Pt}var Qs=class extends yn{get va(){return this.Xa||(this.Xa=pm(this)),this.Xa}get hA(){return Ja.LN}tD(t){return Nm(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.RN="auto",this.UN="start",this.po="auto",this.QN="auto",this.FN=void 0,this.YN=!0,this.ey=100,this.BN="center",this.Pt=""}};function Dm(t){const i=t.RN,e=B_(i);return e&&!t.YN&&(i<0||i>100)?100:e?Number(i):t.YN?-1:100}function Sm(t){return vm(t.po,t.BN)}function Im(t){return Am(t.QN,t.BN)}function Em(t){const i=Im(t),e=Sm(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return x.min(t.ey,s)}function bm(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.sD},get regionAnchorX(){return t.nD},get regionAnchorY(){return t.rD},get scrollValue(){return t.hD},get viewportAnchorX(){return t.oD},get viewportAnchorY(){return t.aD},get width(){return t.ji}}}r(),r();var Lm=class{get va(){return this.Xa||(this.Xa=bm(this)),this.Xa}get hA(){return Ja.kN}constructor(t,i,e,s,n,r,h,o){this.o=t,this.ji=i,this.sD=e,this.nD=s,this.rD=n,this.oD=r,this.aD=h,this.hD=o}};r(),r();var km=1e6,Ss=class{uD(t){return this.cD()*t}lD(t){return this.dD(t)>0}fD(t){return this.dD(t)>=0}_D(t,i){return this.wD(t).gD(i)}$N(t){return 0===this.dD(t)}vD(t){return this.dD(t)<0}gD(t){return this.dD(t)<=0}mD(){return this.pD()?this.yD():this}MD(t){return this.mN(t.yD())}wD(t){return this.MD(t).mD()}};function Cm(t,i){return t.TD()?i.TD()?Ji.Zr:Ji.Wf:i.TD()?Ji.Hf:t.ND()?i.ND()&&t.pD()===i.pD()?Ji.Zr:t.pD()?Ji.Hf:Ji.Wf:i.pD()?Ji.Wf:Ji.Hf}r(),r();var xm=4294967296,Om=xm*xm,jm=Om*Om,zm=jm/2,is=class t{static DD(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static SD(i){return i.unsigned?new t(i,Se.UZERO):new t(i,i.isNegative()?Se.NEG_ONE:Se.ZERO)}static ED(i,e){if(j(i))return e?t.bD:t.LD;if(e){if(i<0)return t.bD;if(i>=jm)return t.kD}else{if(i<=-zm)return t.CD;if(i+1>=zm)return t.xD}return i<0?t.ED(-i,e).yD():t.DD(Se.fromNumber(i%Om),Se.fromNumber(i/Om),e)}OD(){return this.jD.unsigned}zD(){return this.PD.isZero()&&this.jD.isZero()}pD(){return this.jD.isNegative()}BD(){return this.OD()?t.DD(this.PD,this.jD,!1):this}RD(){return this.OD()?this:t.DD(this.PD,this.jD,!0)}UD(){return this.PD}cD(){return this.pD()?-this.yD().cD():this.jD.toNumber()*Om+this.PD.toUnsigned().toNumber()}QD(){return this.PD.toInt()}$N(t){return(this.OD()===t.OD()||this.jD.getHighBits()>>>31!=1||t.jD.getHighBits()>>>31!=1)&&(this.jD.toUnsigned().eq(t.jD.toUnsigned())&&this.PD.toUnsigned().eq(t.PD.toUnsigned()))}dD(t){if(this.$N(t))return Ji.Zr;const i=this.pD(),e=t.pD();if(i&&!e)return Ji.Hf;if(!i&&e)return Ji.Wf;if(!this.OD())return this.MD(t).pD()?Ji.Hf:Ji.Wf;const s=this.RD(),n=t.RD(),r=n.jD.comp(s.jD);return r>0||0===r&&n.PD.gt(s.PD)?Ji.Hf:Ji.Wf}vD(t){return this.dD(t)<0}gD(t){return this.dD(t)<=0}FD(t){return this.dD(t)>0}YD(t){return this.dD(t)>=0}GD(){return new t(this.PD.not(),this.jD.not())}VD(i){return new t(this.PD.and(i.PD),this.jD.and(i.jD))}WD(i){return new t(this.PD.or(i.PD),this.jD.or(i.jD))}HD(i){const e=127&i;return 0===e?this:e<64?t.DD(this.PD.shl(e),this.jD.shl(e).or(this.PD.shru(64-e)),this.OD()):t.DD(Se.ZERO,this.PD.shl(e-64),this.OD())}qD(i){const e=127&i;return 0===e?this:e<64?t.DD(this.PD.shru(e).or(this.jD.shl(64-e)),this.jD.shr(e),this.OD()):t.DD(this.jD.shr(e-64),this.jD.isNegative()?Se.NEG_ONE:Se.ZERO,this.OD())}XD(i){const e=127&i;return 0===e?this:e<64?t.DD(this.PD.shru(e).or(this.jD.shl(64-e)),this.jD.shru(e),this.OD()):64===e?t.DD(this.jD,Se.ZERO,this.OD()):t.DD(this.jD.shru(e-64),Se.ZERO,this.OD())}mN(i){const e=this.jD.high>>>16,s=65535&this.jD.high,n=this.jD.low>>>16,r=65535&this.jD.low,h=this.PD.high>>>16,o=65535&this.PD.high,a=this.PD.low>>>16,u=65535&this.PD.low,c=i.jD.high>>>16,l=65535&i.jD.high,d=i.jD.low>>>16,f=65535&i.jD.low,_=i.PD.high>>>16,g=65535&i.PD.high,w=i.PD.low>>>16;let A=0,v=0,m=0,p=0,y=0,M=0,T=0,N=0;N+=u+(65535&i.PD.low),T+=N>>>16,N&=65535,T+=a+w,M+=T>>>16,T&=65535,M+=o+g,y+=M>>>16,M&=65535,y+=h+_,p+=y>>>16,y&=65535,p+=r+f,m+=p>>>16,p&=65535,m+=n+d,v+=m>>>16,m&=65535,v+=s+l,A+=v>>>16,v&=65535,A+=e+c,A&=65535;const D=this.OD(),S=Se.fromBits(m<<16|p,A<<16|v,D),I=Se.fromBits(T<<16|N,y<<16|M,D);return t.DD(I,S,D)}MD(t){return this.mN(t.yD())}yD(){return this.GD().mN(t.ZD)}KD(i){if(this.zD()||i.zD())return this.OD()?t.bD:t.LD;if(this.pD())return i.pD()?this.yD().KD(i.yD()):this.yD().KD(i).yD();if(i.pD())return this.KD(i.yD()).yD();if(this.jD.isZero()&&0===this.PD.high&&i.jD.isZero()&&0===i.PD.high)return t.SD(this.PD.multiply(i.PD));const e=Se.fromBits(4294967295,0,!0),s=this.PD.and(e),n=this.PD.shru(32),r=this.jD.and(e),h=this.jD.shru(32),o=i.PD.and(e),a=i.PD.shru(32),u=i.jD.and(e),c=i.jD.shru(32);let l=Se.UZERO,d=Se.UZERO,f=Se.UZERO,_=Se.UZERO;l=l.add(s.mul(o)),d=d.add(l.shru(32)),l=l.and(e),d=d.add(n.mul(o)),f=f.add(d.shru(32)),d=d.and(e),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(e),f=f.add(r.mul(o)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(e),_=_.add(h.mul(o)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const g=Se.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),w=Se.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.DD(g,w,this.OD())}JD(i){let e,s,n=i;if(n.zD())throw new RangeError("division by zero");if(this.zD())return this.OD()?[t.bD,t.bD]:[t.LD,t.LD];if(this.OD()){if(n.OD()||(n=n.RD()),n.FD(this))return[t.bD,this];if(n.FD(this.XD(1)))return s=t.$D,e=this.MD(n),[s,e];s=t.bD}else{if(this.$N(t.CD)){if(n.$N(t.ZD)||n.$N(t.tS))return[t.CD,t.LD];if(n.$N(t.CD))return[t.ZD,t.LD];{const i=this.qD(1).iS(n).HD(1);return i.$N(t.LD)?s=n.pD()?t.ZD:t.tS:(e=this.MD(n.KD(i)),s=i.mN(e.iS(n))),e=this.MD(n.KD(s)),[s,e]}}if(n.$N(t.CD))return this.OD()?[t.bD,this]:[t.LD,this];if(this.pD())return n.pD()?this.yD().JD(n.yD()):([s,e]=this.yD().JD(n),[s.yD(),e.yD()]);if(n.pD())return[s,e]=this.JD(n.yD()),[s.yD(),e.yD()];s=t.LD}for(e=this;e.YD(n);){let i=x.max(1,x.floor(e.cD()/n.cD()));const r=x.ceil(x.log(i)/x.LN2),h=r<=48?1:2**(r-48);let o=t.ED(i),a=o.KD(n);for(;a.pD()||a.FD(e);)i-=h,o=t.ED(i,this.OD()),a=o.KD(n);o.zD()&&(o=t.ZD),s=s.mN(o),e=e.MD(a)}return[s,e]}iS(t){return this.JD(t)[0]}eS(t){return this.JD(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.zD())return"0";if(this.pD()){if(this.$N(t.CD)){const i=t.ED(e),s=this.iS(i),n=s.KD(i).MD(this);return s.toString(e)+n.QD().toString(e)}return"-"+this.yD().toString(e)}const s=t.ED(e**6,this.OD());let n=this,r="";for(;;){const t=n.iS(s);let i=(n.MD(t.KD(s)).QD()>>>0).toString(e);if(n=t,n.zD())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.PD=t,this.jD=i}};is.LD=is.SD(Se.ZERO),is.bD=is.SD(Se.UZERO),is.ZD=is.SD(Se.ONE),is.$D=is.SD(Se.UONE),is.tS=is.SD(Se.NEG_ONE),is.xD=is.DD(Se.NEG_ONE,Se.MAX_VALUE,!1),is.kD=is.DD(Se.MAX_UNSIGNED_VALUE,Se.MAX_UNSIGNED_VALUE,!0),is.CD=is.DD(Se.ZERO,Se.MIN_VALUE,!1),r();var Bt=class t{get ND(){return!isFinite(this.sS)}get Kl(){return this.sS/this.zy}static nS(i){return new t(x.ceil(i.sS),i.zy)}static rS(i){return new t(x.floor(i.sS),i.zy)}static hS(t,i){return t.fD(i)?t:i}static oS(t,i){return t.gD(i)?t:i}mN(i){return this.zy>=i.zy?new t(this.sS+i.aS(this.zy).sS,this.zy):new t(this.aS(i.zy).sS+i.sS,i.zy)}lD(t){return t.vD(this)}fD(t){return t.gD(this)}wD(i){if(this.zy>=i.zy){const e=x.abs(this.sS-i.aS(this.zy).sS),s=this.zy;return new t(e,s)}return i.wD(this)}_D(t,i){return this.wD(t).gD(i)}dD(t){return function(t,i){return t.zy>=i.zy?V_(t.sS,i.aS(t.zy).sS):V_(t.aS(i.zy).sS,i.sS)}(this,t)}$N(t){return 0===this.dD(t)}vD(t){return this.dD(t)<0}gD(t){return this.dD(t)<=0}aS(i){return new t(this.sS*(i/this.zy),i)}MD(i){return this.zy>=i.zy?new t(this.sS-i.aS(this.zy).sS,this.zy):new t(this.aS(i.zy).sS-i.sS,i.zy)}uS(i){return new t(this.sS*i,this.zy)}constructor(t,i=1){this.sS=t,this.zy=i}};Bt.Zl=new Bt(1/6,1),Bt.LD=new Bt(0),Bt.cS=new Bt(1/0),Bt.lS=1e6;var ya=class t extends Ss{static dS(i,e){return void 0===e&&(e=km),t.ED(i*e,e)}static ED(i,e){return j(i)?t.fS:i===1/0?t._S:i===-1/0?t.gS:new t(Se.fromNumber(i),e)}static SD(i,e){return new t(i,e)}static wS(i){return t.dS(i.Kl,km)}static AS(i){return new t(Se.fromNumber(i.getTime()),1e3)}static hS(t,i){return t.fD(i)?t:i}static oS(t,i){return t.gD(i)?t:i}static vS(i,e,s){return t.hS(e,t.oS(s,i))}pD(){return this.IT.isNegative()}zD(){return 0!==this.zy&&this.IT.isZero()}ND(){return 0===this.zy&&!this.IT.isZero()}TD(){return 0===this.zy&&this.IT.isZero()}cD(){if(0===this.zy)return this.IT.isZero()?NaN:this.IT.isNegative()?-1/0:1/0;const t=this.IT.divide(this.zy),i=this.IT.subtract(t.multiply(this.zy));return t.toNumber()+i.toNumber()/this.zy}UD(){if(0===this.zy)throw new b("Failed to convert timestamp");return this.IT}mS(){return new Date(0===this.zy?NaN:this.aS(1e3).IT.toNumber())}pS(){return new Bt(0===this.zy?this.cD():this.IT.toNumber(),this.zy)}aS(i,e){void 0===e&&(e=Xu.yS);const s=this.zy;if(s===i)return this;if(0===s)return this;const n=Y_(s,i),r=function(t,i,e){const[s,n]=t.JD(i);if(n.zD())return s;if(e===Xu.yS)return n.pD()?s.MD(is.ZD):s;if(e===Xu.MS)return n.pD()?s:s.mN(is.ZD);{const t=n.KD(is.ED(2));return t.pD()?t.yD().vD(i)?s:s.MD(is.ZD):t.vD(i)?s:s.mN(is.ZD)}}(is.SD(this.IT).KD(is.ED(i/n)),is.ED(s/n),e);return new t(r.UD(),i)}dD(t){if(this===t)return Ji.Zr;if(0===this.zy||0===t.zy)return Cm(this,t);if(this.zD())return t.zD()?Ji.Zr:t.pD()?Ji.Wf:Ji.Hf;if(t.zD())return this.pD()?Ji.Hf:Ji.Wf;const i=x.min(this.zy,t.zy),e=this.aS(i,Xu.TS).IT,s=t.aS(i,Xu.TS).IT;return e.compare(s)}yD(){return 0===this.zy?function(t){0;return t.TD()?t:t.pD()?ya._S:ya.gS}(this):new t(this.IT.negate(),this.zy)}mN(i){if(0===this.zy||0===i.zy)return function(t,i){0;if(t.TD()||i.TD())return ya.fS;if(t.ND()&&i.ND())return t.pD()===i.pD()?t:ya.fS;return t.ND()?t:i}(this,i);if(this.zD())return i;if(i.zD())return this;const e=x.max(this.zy,i.zy),s=this.aS(e,Xu.TS),n=i.aS(e,Xu.TS);return new t(s.IT.add(n.IT),e)}KD(i){if(this.TD()||j(i))return t.fS;if(this.ND()||!isFinite(i)){if(this.zD()||0===i)return t.fS;{const e=this.pD()?t.gS:t._S;return i<0?e.yD():e}}return this.zD()?this:new t(0===i?Se.ZERO:this.IT.multiply(i),this.zy)}iS(i){if(this.TD()||j(i))return t.fS;if(this.ND())return isFinite(i)?0===i?1/i<0?this.yD():this:i<0?this.yD():this:t.fS;if(!isFinite(i))return new t(Se.ZERO,this.zy);if(this.zD())return 0===i?t.fS:new t(Se.ZERO,this.zy);if(0===i){const e=this.pD()?t.gS:t._S;return 1/i<0?e.yD():e}return new t(this.IT.divide(i),this.zy)}NS(){return[this.IT.low,this.IT.high,this.zy]}constructor(t,i){super(),this.IT=t.toSigned(),this.zy=i>>>0}};ya.LD=new ya(Se.ZERO,km),ya.fS=new ya(Se.ZERO,0),ya._S=new ya(Se.ONE,0),ya.gS=new ya(Se.NEG_ONE,0),r();var Xu,zt=class t extends Ss{static dS(i,e){return void 0===e&&(e=km),t.ED(i*e,e)}static ED(i,e){return j(i)?t.fS:i===1/0?t._S:i===-1/0?t.gS:new t(BigInt(x.floor(i)),e)}static SD(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static wS(i){return t.dS(i.Kl,km)}static AS(i){return t.ED(i.getTime(),1e3)}static get LD(){return t.DS||(t.DS=new t(BigInt(0),km)),t.DS}static get fS(){return t.SS||(t.SS=new t(BigInt(0),0)),t.SS}static get _S(){return t.IS||(t.IS=new t(BigInt(1),0)),t.IS}static get gS(){return t.ES||(t.ES=new t(BigInt(-1),0)),t.ES}static hS(t,i){return t.fD(i)?t:i}static oS(t,i){return t.gD(i)?t:i}static vS(i,e,s){return t.hS(e,t.oS(s,i))}pD(){return this.IT<BigInt(0)}zD(){return 0!==this.zy&&this.IT===BigInt(0)}ND(){return 0===this.zy&&this.IT!==BigInt(0)}TD(){return 0===this.zy&&this.IT===BigInt(0)}cD(){if(0===this.zy)return this.IT===BigInt(0)?NaN:this.IT<BigInt(0)?-1/0:1/0;const t=this.IT/BigInt(this.zy),i=this.IT-t*BigInt(this.zy);return Number(t)+Number(i)/this.zy}UD(){if(0===this.zy)throw new b("Failed to convert timestamp");return this.bS()}bS(){const t=this.IT&BigInt(4294967295),i=this.IT>>BigInt(32)&BigInt(4294967295);return Se.fromBits(Number(t),Number(i))}mS(){return new Date(0===this.zy?NaN:Number(this.aS(1e3).IT))}pS(){return new Bt(0===this.zy?this.cD():Number(this.IT),this.zy)}aS(i,e){void 0===e&&(e=Xu.yS);const s=this.zy;if(s===i)return this;if(0===s)return this;const n=Y_(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===Xu.yS)return n<BigInt(0)?s-BigInt(1):s;if(e===Xu.MS)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.IT*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}dD(t){if(this===t)return Ji.Zr;if(0===this.zy||0===t.zy)return Cm(this,t);if(this.zD())return t.zD()?Ji.Zr:t.pD()?Ji.Wf:Ji.Hf;if(t.zD())return this.pD()?Ji.Hf:Ji.Wf;const i=x.min(this.zy,t.zy),e=this.aS(i,Xu.TS).IT,s=t.aS(i,Xu.TS).IT;return e>s?Ji.Wf:e<s?Ji.Hf:Ji.Zr}yD(){return 0===this.zy?function(t){0;return t.TD()?t:t.pD()?zt._S:zt.gS}(this):new t(-this.IT,this.zy)}mN(i){if(0===this.zy||0===i.zy)return function(t,i){0;if(t.TD()||i.TD())return zt.fS;if(t.ND()&&i.ND())return t.pD()===i.pD()?t:zt.fS;return t.ND()?t:i}(this,i);if(this.zD())return i;if(i.zD())return this;const e=x.max(this.zy,i.zy),s=this.aS(e,Xu.TS),n=i.aS(e,Xu.TS);return new t(s.IT+n.IT,e)}KD(i){if(this.TD()||j(i))return t.fS;if(this.ND()||!isFinite(i)){if(this.zD()||0===i)return t.fS;{const e=this.pD()?t.gS:t._S;return i<0?e.yD():e}}return this.zD()?this:new t(0===i?BigInt(0):this.IT*BigInt(i),this.zy)}iS(i){if(this.TD()||j(i))return t.fS;if(this.ND())return isFinite(i)?0===i?1/i<0?this.yD():this:i<0?this.yD():this:t.fS;if(!isFinite(i))return new t(BigInt(0),this.zy);if(this.zD())return 0===i?t.fS:new t(BigInt(0),this.zy);if(0===i){const e=this.pD()?t.gS:t._S;return 1/i<0?e.yD():e}return new t(this.IT/BigInt(i),this.zy)}NS(){const t=this.bS();return[t.low,t.high,this.zy]}constructor(t,i){super(),this.IT=BigInt.asIntN(64,t),this.zy=i>>>0}};zt.DS=void 0,zt.SS=void 0,zt.IS=void 0,zt.ES=void 0,function(t){t[t.yS=0]="yS",t[t.MS=1]="MS",t[t.TS=2]="TS"}(Xu||(Xu={}));var aa=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?zt:ya;function Pm(t,i){return t.dD(i)}function Lo(t,i){return void 0!==t?void 0!==i?aa.oS(t,i):t:i}r();var Bm=9e4,Ia=jl((()=>aa.ED(8589934592,Bm))),Rm=jl((()=>Ia().iS(2)));r();var Um={LS:0,kS:1/0,CS:0},Qm=6,Fm=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],Ym=[" ","\t","\n","\f","\r"],Gm=/^\d*$/,Vm=/.*[0-9]+.*/,Wm=/^[\d.-]+$/,Hm=/(^\.|\.$)/,qm=/(\D\.|\.\D)/;function Xm(t,i){void 0===i&&(i=Um);return Zm(Hi(Ao(t),new Vr),i)}function Zm(t,i){void 0===i&&(i=Um);const e={L:[],xS:[],OS:[]},s=Km(t),n=new Vr;if(op(s),gu(s,(t=>"\n"!==t),n),n.Ku>=s.length)return e;if(n.Np(1),"\n"!==s.charAt(n.Ku)){ep(Jm(s,n,false,!0,e,i),e)}else n.Np(1);for(gu(s,(t=>"\n"===t),n);n.Ku<s.length;){ep(Jm(s,n,false,!1,e,i),e),gu(s,(t=>"\n"===t),n)}return e}function Km(t){const i=Zg(t,"\0"," "),e=Zg(i,"\r\n","\n");return Zg(e,"\r","\n")}function gu(t,i,e){const s=e.Ku;for(;e.Ku<t.length&&i(t.charAt(e.Ku));)e.Np(1);return t.substring(s,e.Ku)}function Jm(t,i,e,s,n,r){let h,o=0,a=i.Ku,u="",c=!1,l=!1,d=null,f=null,_=null;for(;!c;)if(h=gu(t,(t=>"\n"!==t),i),o++,i.Ku>=t.length?c=!0:i.Np(1),Va(h,"--\x3e")){if(s||1!==o&&(2!==o||l)){i.Dp(a);break}l=!0,a=i.Ku,d=new Qs(0,0,"",!1,u);try{sp(h,n.xS,d,r),u=""}catch(t){ag.Pv(t),d=null}}else{if(""===h)break;s&&Kg(h,"X-TIMESTAMP-MAP")&&(n.jS=$m(h)),s||2!==o||e||(Ei("STYLE",u.replace(/ /g,""))?(f={hA:Ja.CN},u=""):Ei("REGION",u.replace(/ /g,""))&&(_=new Lm("",100,3,0,100,0,100,""),u="")),u&&(u+="\n"),u+=h,a=i.Ku}if(d)return d.O=u,d;if(f);else if(_)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&Va(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":mp(r,i);break;case"WIDTH":Mp(r,i);break;case"LINES":yp(r,i);break;case"REGIONANCHOR":{const t=vp(r);t&&(i.nD=t[0],i.rD=t[1]);break}case"VIEWPORTANCHOR":{const t=vp(r);t&&(i.oD=t[0],i.aD=t[1]);break}case"SCROLL":pp(r,i)}}}(u,_),_;return null}function $m(t){const i=t.split("=")[1].trim().split(","),e=ip(i[0].trim(),"MPEGTS")?i[0]:i[1],s=ip(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{zS:tp(Number(e.split(/:(.*)/)[1].trim())||0),lh:aa.dS(null!=(n=ju(s.split(/:(.*)/)[1].trim(),new Vr))?n:0)}}function tp(t){return aa.ED(t,Bm)}function ip(t,i){return Kg(t,i)}function ep(t,i){t&&function(t){return"cue"===t.hA}(t)?i.L.push(t):t&&function(t){return"region"===t.hA}(t)?i.xS.push(t):t&&function(t){return"stylesheet"===t.hA}(t)&&i.OS.push(t)}function sp(t,i,e,s){const n=new Vr;up(t,n);const r=np(ju(t,n),s);if(up(t,n),"--\x3e"!==t.substring(n.Ku,n.Ku+3))throw b("Something went wrong with parsing a WebVTT Cue");n.Np(3),up(t,n);const h=np(ju(t,n),s);e.iD(r,h);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Va(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),h=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":_p(h,i,e);break;case"VERTICAL":wp(h,i);break;case"D":Ap(h,i);break;case"LINE":case"L":dp(h,i);break;case"POSITION":case"T":fp(h,i);break;case"SIZE":case"S":gp(h,i);break;case"ALIGN":case"A":lp(h,i)}}}(t.substring(n.Ku,t.length),e,i)}function np(t,i){return t+i.LS}function rp(t){return/^[0-9]$/.test(t)}function ju(t,i){const e=Zg(t,",",".");let s,n,r,h=!1;if(i.Ku>=e.length||!rp(e.charAt(i.Ku)))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");const o=gu(e,rp,i),a=C(o,10);if((o.length>2||a>59)&&(h=!0),i.Ku>=e.length||":"!==e.charAt(i.Ku))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Np(1);const u=gu(e,rp,i);if(2!==u.length)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");const c=C(u,10);if(h||i.Ku<e.length&&":"===e.charAt(i.Ku)){if(i.Ku>=e.length||":"!==e.charAt(i.Ku))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Np(1);const t=gu(e,rp,i);if(2!==u.length)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=C(t,10)}else s=0,n=a,r=c;if(i.Ku>=e.length||"."!==e.charAt(i.Ku))throw new b("Something went wrong with parsing a WebVTT Cue timestamp");i.Np(1);const l=gu(e,rp,i),d=C(l,10);if(c>59||r>59)throw new b("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function hp(t){return op(Km(t))}function op(t){if(t.length<Qm)return!1;for(const i of Fm)if(Kg(t,i))return!0;return!1}function ap(t){return na(Ym,t)}function up(t,i){for(;i.Ku<t.length&&ap(t.charAt(i.Ku));)i.Np(1)}function cp(t){const i=t.lastIndexOf("%");if(i>-1){const e=S(t.substring(0,i));if(!j(e)&&e>=0&&e<=100)return e}return null}function lp(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.BN=e;break;case"middle":i.BN="center"}}function dp(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!Vm.test(e))return;let r,h;if(Eh(e,"%")){const t=cp(e);if(null===t)return;r=t,h=!1}else{if(!Wm.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!qm.test(e)||Hm.test(e)))return;if(r=S(e),j(r))return;h=!0}switch(i.RN=r,i.YN=h,s=s.toLowerCase(),s){case"start":case"center":case"end":i.UN=s;break;case"middle":i.UN="center"}}function fp(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=cp(e);if(null!==r)switch(i.po=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.QN=s;break;case"start":i.QN="line-left";break;case"middle":i.QN="center";break;case"end":i.QN="line-right"}}function _p(t,i,e){const s=X_(e,(i=>i.o===t));void 0!==s&&(i.FN=s)}function gp(t,i){const e=cp(t);null!==e&&(i.ey=e)}function wp(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function Ap(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function vp(t){if(t.indexOf(",")>=0){const i=cp(t.substring(0,t.indexOf(","))),e=cp(t.substring(t.indexOf(",")+1,t.length));return[hi(i||0,0,100),hi(e||100,0,100)]}return null}function mp(t,i){i.o=t}function pp(t,i){"up"===t.toLowerCase()&&(i.hD="up")}function yp(t,i){Gm.test(t)&&(i.sD=C(t))}function Mp(t,i){const e=cp(t);null!==e&&(i.ji=e)}function Tp(t){return t&&"PS"in t?t.PS:t}r(),r(),r();var Np,Dp=class extends yn{get RS(){return this.US}get xS(){return this.QS}get FS(){return this.YS}get va(){return this.Xa||(this.Xa=function(t){return Ou(Oh(t),{get styles(){return t.RS},get regions(){return t.xS},get metadata(){return Tp(t.FS)},get content(){return Tp(t.O)}})}(this)),this.Xa}tD(t){return!!Ph(this.RS,t.RS)&&(!!Ph(this.xS,t.xS)&&(this.FS&&t.FS?!!this.FS.GS(t.FS)&&(this.O&&t.O?this.O.GS(t.O):this.O===t.O):this.FS===t.FS))}constructor(t,i,e,s,n,r,h){super(t,i,e,s),this.US=n,this.QS=r,this.YS=h||void 0}};function fs(t){return 1===t.VS}function Sp(t){return 3===t.VS}r(),r(),function(t){t[t.WS=1]="WS",t[t.HS=2]="HS",t[t.Ru=3]="Ru",t[t.qS=4]="qS",t[t.XS=9]="XS"}(Np||(Np={}));var Ip=class{get ZS(){return this.Ef.KS(!0)}get zN(){return this.JS}get PN(){return this.$S}constructor(t,i,e){this.JS=t,this.$S=i,fs(e)?this.Ef=function(t,i,e){for(const t of["begin","end","dur"])e.tI(t);return e}(0,0,e):this.Ef=e}};r();var K={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function ln(t){return Va(t,K.APPLICATION_MP4)||Va(t,K.VIDEO_MP4)||Va(t,K.AUDIO_MP4)}function Ep(t){return Va(t,K.VIDEO_WEBM)||Va(t,K.AUDIO_WEBM)}var bp=class{iI(t){for(const[i,e]of this.eI)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.hA=t,this.eI=i}};function Lp(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new bp(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let h=0,o=!1;for(let t=0;t<n.length;t++){const i=n[t];if(o||";"!==i)'"'===i&&(o=!o);else{const i=kp(n.substr(h,t));i&&r.push(i),h=t+1}}if(h!==n.length){const t=kp(n.substr(h));t&&r.push(t)}return new bp(s,r)}function kp(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function Cp(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function xp(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+va((t<<16|s).toString(16),6,"0")}return i}r();var Op="http://www.w3.org/XML/1998/namespace";function jp(t,i,e,s){let n=t.sI(e,i);return 0===n.length&&(n=t.nI(s+":"+i)),n}function zp(t){const i={};for(const e of t.rI)i[e.hI]=e.IT;return i}var Pp=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,Bp=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,ou="http://www.w3.org/ns/ttml";function Rp(t,i,e,s){void 0===e&&(e=Um),void 0===s&&(s=K.APPLICATION_TTML_XML);let n=[];const r=Ao(t);return s===K.APPLICATION_MP4?n=function(t,i,e){const s=Qi.wy(t),n=HA(s,At.cp);if(!n)return[];return Fp(Ao(n.Cp),i,e)}(r,i,e):s===K.APPLICATION_TTML_XML&&(n=Fp(r,i,e)),n}function Up(t,i,e){return void 0===e&&(e=Um),Yp(t,i,e)}function Qp(t,i){const e=Kp(i.ZS),s={};for(const i of e)s[i]=t[i];return s}function Fp(t,i,e){return Yp(Hi(t,new Vr),i,e)}function Yp(t,i,e){const s=[];let n;try{n=ag.oI(t)}catch(t){return s}const r=n.aI;if("tt"!==r.hI)return s;const h=r&&r.sI(ou,"head")[0],o=r&&r.sI(ou,"body")[0];if(!o||!h)return s;const a=function(t){const i={},e=t.sI(ou,"styling")[0],s=e&&e.sI(ou,"style")||[];for(const t of s){i[t.uI(Op,"id")]=zp(t)}return i}(h),u=function(t){const i={},e=t.sI(ou,"layout")[0],s=e&&e.sI(ou,"region")||[];for(const t of s){const e=t.uI(Op,"id");if(!e)continue;i[e]=zp(t);const s=Zp(t);for(const t in s)tl.call(s,t)&&(i[e][t]=s[t])}return i}(h),c=function(t,i){const e=se(t),s=Wp(i.cI("tts:extent"));if(!s)return e;for(const t of _.keys(e)){const i=Wp(e[t].extent);if(i){const n=Gp(i[0],s[0]),r=Gp(i[1],s[1]);e[t].extent=n+" "+r}const n=Wp(e[t].origin);if(n){const i=Gp(n[0],s[0]),r=Gp(n[1],s[1]);e[t].origin=i+" "+r}}return e}(u,r),l=h.sI(ou,"metadata")[0],d=Hp(o,e.LS,e.kS,e.CS);for(const t of d){const i=Qp(c,t);s.push(new Dp(t.zN,t.PN,t.ZS,!1,a,i,l))}return s}function Gp(t,i){const e=Vp(t),s=Vp(i);if(e&&s&&e===s){const n=Number(t.slice(0,-e.length)),r=Number(i.slice(0,-s.length));return j(n)||j(r)?t:n/r*100+"%"}return t}function Vp(t){return Eh(t,"px")?"px":Eh(t,"em")?"em":Eh(t,"c")?"c":Eh(t,"%")?"%":void 0}function Wp(t){if(!t)return;const i=t.split(" ");return 2===i.length?[i[0],i[1]]:void 0}function Hp(t,i,e,s){let n,r=i,h=e,o=[];const a=[];if(fs(t)){var u,c;r=null!=(u=Xp(t.cI("begin"),s))?u:r,n=Xp(t.cI("dur"),0),h=null!=(c=Xp(t.cI("end"),s))?c:void 0!==n?r+n:h;const i=t.lI;for(let e=0;e<i.length;e++)("body"===t.hI||"div"===t.hI)&&i[e].VS>1||(o=o.concat(Hp(i[e],r,h,s)))}const l=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.zN,t.PN);s.sort(Li);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(jc(s,t+1),t--,n=s.length);return s}(r,h,o);for(let i=0;i<l.length-1;i++){const e=qp(l[i],l[i+1],o);if(e.length<=0&&Jp(t)){const e=t.KS(!1);a.push(new Ip(l[i],l[i+1],e))}else if(e.length>0){const s=t.KS(!1);e.forEach((t=>s.dI(t.ZS))),a.push(new Ip(l[i],l[i+1],s))}}return a}function qp(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].zN,h=e[n].PN;(r>=t&&h<=i||r<i&&h>=i||r<t&&h>t)&&s.push(e[n])}return s}function Xp(t,i){if(t){if(Pp.test(t)){const e=Pp.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=e[6];return 3600*s+60*n+r+(h?Number(h)*.1**h.length:0)+i}if(Bp.test(t)){const e=Bp.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function Zp(t){const i={},e=t.nI("style")||[];for(const t of e){const e=zp(t);for(const t in e)tl.call(e,t)&&(i[t]=e[t])}return i}function Kp(t){let i,e=[];if(fs(t)){i=t.cI("region"),i&&e.push(i);const s=t.lI;for(let t=0;t<s.length;t++)e=e.concat(Kp(s[t]))}return e}function Jp(t){if(fs(t)){const i=t.hI.toUpperCase(),e=Boolean(t.cI("smpte:backgroundImage"));return"BR"===i||e}return t.VS===Np.Ru}function $p(t){const i=function(t){try{return ag.oI(t).aI}catch(t){}}(t);return"tt"===(null==i?void 0:i.hI)}r(),r();var Pt,sn=class extends co{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t.eA=Ht.Ch),i}fa(){return Hc(this)}};r(),r(),function(t){t.pp="subtitles",t.fI="captions",t._I="descriptions",t.Fn="chapters",t.Mp="metadata",t.gI="thumbnails"}(Pt||(Pt={}));var ty=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function iy(t){return"string"==typeof t&&na(ty,t)}function ey(t,i){return!(!iy(t)||!iy(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}r();var us,ee=class extends ce{constructor(t,i,e,s,n){super(t,i,n),this.url=e,this.status=s}};r(),function(t){t.wI="HttpOpenError",t.AI="HttpResponseError",t.vI="HttpTimeoutError"}(us||(us={}));var ai=class extends Jo{get mI(){return this.pI}constructor(t,i,e){super(i,e),this.pI=t}};r(),r();var ve=class extends ai{get name(){return us.AI}get yI(){return this.MI}constructor(t,i,e){super(t.mI,null!=e?e:function(t){return"Error while loading "+t.mI.zu+", status code "+t.TI}(t),i),this.MI=t}};r();var sy,ny=class extends ai{get name(){return us.vI}constructor(t,i){super(t,function(t){return"Request for "+t.zu+" timed out after "+t.NI+" seconds."}(t),i)}};function Xt(t){return t instanceof ai}function Ya(t){return t instanceof ve}function ry(t){return t instanceof ny}function hy(t){return t===Pt.pp||t===Pt.fI}function oy(t){return t.some(ay)}function ay(t){return Va(t,"stpp")}function uy(t){return t.some(cy)}function cy(t){return Va(t,"vtt")||Va(t,"wvtt")}function Fo(t,i){return ln(t)&&uy(i)}function ly(t,i){return t===Pt.gI||t===Pt.Mp&&i===Pt.gI}function dy(t,i,e,s){for(const n of t.L.xw){if(n.zN>e)break;i<=n.PN&&!na(s,n)&&s.push(n)}}function fy(t,i){return Xo(t.Vw,i.Vw)}function _y(t,i,e,s){const n=function(t){switch(t){case Ks.WEBVTT:return"WebVTT";case Ks.SRT:return"SRT";case Ks.TTML:return"TTML";default:return""}}(t);return new ee(le.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function gy(t,i){const e=[];for(const s of t.L.xw)if(s.PN<=i)e.push(s);else if(s.zN>=i)break;for(const i of e)t.DI(i)}function wy(t,i){if(t.U>0){const e=10,s=t.Cn(0),n=x.max(0,s-e);for(const t of i)t.SI(n)}}!function(t){t.II="vtt",t.Km="wvtt",t.EI="stpp"}(sy||(sy={}));var nr,ni=class extends i{tt(t){t.yn(Os.ra,this.bI),this.Z.tt(t),this.LI(t)}it(t){t.fn(Os.ra,this.bI),t.eA=Ht.Ch,this.Z.it(t)}kI(t){}CI(t){}LI(t){t.eA!==Ht.Ch?this.kI(t):this.CI(t)}xI(){for(const t of this.Z.xw)t.fn(Os.ra,this.bI),t.gn()}SI(t){if(t>0)for(const i of this.Z.xw)gy(i,t)}Zn(){return this.xI(),this.Z.Zn(),Promise.resolve()}async gn(){this.Vo(),await this.Zn(),this.Z.gn()}constructor(...t){super(...t),this.Z=new sn,this.bI=t=>{const i=t.Lt;this.LI(i)}}};r(),r(),function(t){t.OI="arraybuffer",t.jI="json",t.zI="stream",t.Ru="text"}(nr||(nr={})),r();var Kc,zu,jo,rn,Ko=class t{append(t,i){let e=t,s=i;e=Ay(e),s=vy(s);const n=e.toLowerCase();if(this.Kf.hasOwnProperty(n)){const t=this.Kf[n],i=t[1];t[1]=i?i+", "+s:s}else this.Kf[n]=[e,s]}delete(t){const i=Ay(t).toLowerCase();delete this.Kf[i]}get(t){const i=Ay(t).toLowerCase();return this.Kf.hasOwnProperty(i)?this.Kf[i][1]:null}has(t){const i=Ay(t).toLowerCase();return this.Kf.hasOwnProperty(i)}set(t,i){let e=t;e=Ay(e);const s=e.toLowerCase();this.Kf[s]=[e,vy(i)]}forEach(t,i){for(const e in this.Kf)this.Kf.hasOwnProperty(e)&&t.call(i,this.Kf[e][1],e,this)}asList(){const t=[];for(const i in this.Kf)if(this.Kf.hasOwnProperty(i)){const[e,s]=this.Kf[i];t.push([e,s])}return t}BI(){const t={};return this.forEach(((i,e)=>{t[e]=i})),t}RI(t){t.forEach(((t,i)=>{this.append(i,t)}))}UI(t){t.forEach(((t,i)=>{this.set(i,t)}))}constructor(i){this.Kf={},i instanceof t?i.asList().forEach((t=>{let[i,e]=t;this.append(i,e)})):Array.isArray(i)?i.forEach((t=>{this.append(t[0],t[1])})):i&&_.getOwnPropertyNames(i).forEach((t=>{this.append(t,i[t])}))}};function Ay(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new k("Invalid character in header field name");return i}function vy(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}!function(t){t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT"}(Kc||(Kc={})),function(t){t.KT="",t.QI="manifest",t.FI="segment",t.YI="preload-hint",t.GI="content-protection"}(zu||(zu={})),function(t){t.KT="",t.VI="initialization-segment",t.WI="fairplay-license",t.HI="fairplay-certificate",t.qI="widevine-license",t.XI="widevine-certificate",t.ZI="playready-license",t.KI="clearkey-license",t.JI="aes128-key"}(jo||(jo={})),function(t){t.KT="",t.mp="audio",t.vp="video",t.Ru="text",t.ZT="image"}(rn||(rn={}));var nc=class{constructor(t,i){const e=t.zu;let s,n,r,h,o,a,u,c,l,d,f,_;i?(s=i.$I,n=i.tE,r=i.iE,h=i.eE,o=i.NI,a=i.sE,u=i.a_,c=i.hA,l=i.nE,d=i.rE,f=i.hE,_=i.oE):(s=null,n={},r="GET",h=nr.Ru,o=0,a=0,c="",l="",d="",f=!1),this.zu=e,this.$I=t.$I||s,this.tE=new Ko(t.tE||n),this.iE=t.iE||r,this.eE=t.eE||h,this.NI=void 0!==t.NI?Number(t.NI)||0:o,this.sE=void 0!==t.sE?Number(t.sE)||0:a,this.a_=t.a_||u||(new Po).a_,this.hA=t.hA||c,this.nE=t.nE||l,this.rE=t.rE||d,this.hE=void 0!==t.hE?Boolean(t.hE):f,this.oE=t.oE||_}};r();var my,py=class extends Ha{get error(){return this.errorObject.message}fa(){return this}constructor(t){super(Bi.ha),this.errorObject=t}},Cu=class extends ni{aE(t){if(!t.src)return;const i=t.kind||Pt.pp,e=this.cE.uE(i,t.id,t.label,t.srclang,t.default);return e.oA=xa(t.src),this.tt(e),e}async lE(t,i){t.vg=ja.LOADING;const e=new nc({zu:t.oA,eE:nr.Ru,iE:Kc.GET,a_:i});let s,n;try{const t=await this.dE.mI(e);n=t.TI,s=await t.fE()}catch(i){return yo(i),t.vg=ja.ERROR,void t.Co(new py(function(t,i){let e=i,s=0;if(Xt(t)&&t.name===us.wI)e=t.mI.zu;else if(Ya(t)){const i=t.yI;if(e=i._E,s=i.TI,0===s)return new ee(le.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new ee(le.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.oA)))}try{const i=function(t){return hp(t)?Ks.WEBVTT:$p(t)?Ks.TTML:Ks.SRT}(s);t.hA=i;let e=[];if(i===Ks.WEBVTT||i===Ks.SRT){e=Zm(s).L}else i===Ks.TTML&&(e=Up(s,t));for(const i of e)t.gE(i)}catch(i){return yo(i),t.vg=ja.ERROR,void t.Co(new py(_y(t.hA,t.oA,n,i)))}t.vg=ja.LOADED}kI(t){na(this.Z.xw,t)&&t.vg===ja.NONE&&this.lE(t,this.wE.a_).catch(Ah)}$n(){}async Zn(){this.wE.c_(),this.wE=new Po;for(const t of this.Z.xw)this.cE.AE(t);await super.Zn()}constructor(t,i){super(),this.wE=new Po,this.cE=t,this.dE=i}};function yy(t,i){for(const e of t)if(e.zt===i&&e.vE)return e}function My(t,i){Ty(yy(t.xw,i))}function Ty(t){void 0!==t&&(t.eA=Ht.Xn)}function Ny(t,i){const e=yy(t.xw,i)||function(t,i){for(const e of t)if(e.zt===i)return e}(t.xw,i);Ty(e)}function qs(t){for(const i of ty)i===Pt.Fn?Ny(t,i):My(t,i)}r(),r(),r(),function(t){t.mE="web",t.pE="android",t.yE="android-tv",t.ME="ios",t.TE="tvos",t.NE="chromecast",t.DE="theoliveweb"}(my||(my={}));var di=nd?nd.userAgent:"",Dy=di.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Sy=di.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),Iy=di.match(/Android ([0-9\.]+)/i),Ey=di.match(/Windows NT ([0-9\.]+)/i),by=di.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Ly=di.match(/Firefox\/([0-9\.]+)/i),ky=di.match(/OPR\/(\d+\.\d+)/i),Cy=di.match(/Tizen ([0-9\.]+)/i),xy=di.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Oy=class{get Je(){return this.SE}get EE(){return this.bE}get LE(){return this.kE}get CE(){return this.xE}get OE(){return this.jE}get zE(){return this.PE}get BE(){return this.RE}get UE(){return this.QE}get FE(){return this.YE}get GE(){return this.VE}get WE(){return this.HE}get Ga(){return this.qE}get XE(){return this.ZE}get KE(){return this.JE||this.$E}get td(){return this.ib}get Qs(){return this.eb}get sb(){return this.hb}get ob(){return this.ub}get fb(){return this._b}get gb(){return this.wb}get Ab(){return this.vb}get mb(){return this.pb}get yb(){return this.Mb}get Tb(){return this.Nb}get Db(){return this.Sb}get Ib(){return this.Eb}get bb(){return this.Lb}get kb(){return this.Cb}get xb(){return this.Ob}get jb(){return this.zb}get Pb(){return this.Bb}get Rb(){return this.Ub}get Qb(){return this.Fb}get Yb(){return this.Gb}get Vb(){return this.Wb}get Hb(){return this.qb}get Xb(){return this.Zb}get Kb(){return!(!this.Tb&&!this.mb)&&this.fb<=56}get Jb(){return this.$b}get tL(){return this.iL}get eL(){return this.sL}get nL(){return this.rL}get hL(){return this.oL}get aL(){return this.uL}get cL(){return this.lL}constructor(){this.SE=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||nd&&nd.msMaxTouchPoints),this.bE=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(di)||/(macintosh|mac(?=_powerpc)\s)/i.test(di),this.kE=/Windows NT/i.test(di),this.xE=Ey?S(Ey[1]):0,this.jE=/Android/i.test(di),this.PE=Iy?S(Iy[1]):0,this.RE=/windows phone (8|8\.1)/i.test(di),this.QE=/iPhone/i.test(di),this.YE=/iPad/i.test(di),this.VE=this.bE&&this.SE&&!this.YE,this.HE=/iPod/i.test(di),this.ib=/Mobile Safari/i.test(di),this.JE=/EOS\d*STB/i.test(di),this.$E=/APP\d*STB/i.test(di),this.qE=(this.QE||this.YE||this.VE||this.HE)&&!this.RE,this.ZE=xy?S(xy[2]):0,this.eb=this.RE||this.qE||this.jE||this.ib,this.hb=/CriOS/i.test(di),this.ub=Boolean(self.chrome&&/google/i.test(nd.vendor))||this.hb,this.wb=this.ub&&/Edg\//i.test(nd.userAgent),this.vb=Sy?C(Sy[1],10):0,this.lL=Boolean(self.chrome||/Chrome/i.test(di)||/CriOS/i.test(di)),this._b=Dy?C(Dy[1],10):0,this.pb=/SMART-TV.*Tizen/i.test(di),this.Mb=Cy?S(Cy[1]):0,this.Nb=/webos|web0s/i.test(di),this.Sb=/VIZIO/i.test(di),this.Eb=/Edge\/\d+/i.test(di),this.Lb=/Trident/i.test(di),this.Cb=this.Lb&&!self.ActiveXObject&&"ActiveXObject"in self,this.Ob=/Vivaldi/i.test(di),this.zb=/Firefox/i.test(di)&&!/Seamonkey/i.test(di),this.Bb=Ly?S(Ly[1]):0,this.Ub=/Safari/i.test(di)&&!/Chrome/i.test(di)&&!this.RE&&!this.pb,this.Fb=by?S(by[2]):0,this.Gb=Boolean(ky),this.Wb=ky?S(ky[1]):0,this.qb=/CrKey/.test(di),this.Zb=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(di),this.$b="web"===my.yE,this.iL="web"===my.pE,this.sL=this.iL||this.$b,this.rL="web"===my.ME,this.oL="web"===my.TE,this.uL="web"===my.NE}};Oy.dL=new Oy;var li=Oy.dL;r();var jy,zy,ps,Ys,Py,By,Ry=class extends gg{constructor(){super(t.qA)}};r(),r();var Za={hA:Ci.Hv,fL:xw,_L:"cenc",gL:Cw,wL:Wi,AL:"PlayReady"},Uy={hA:Ci.qv,fL:jw,_L:"cenc",gL:Ow,wL:jt,AL:"Widevine"},Qy={hA:Ci.Xv,fL:Bw,_L:"skd",gL:Yc,wL:Wa,AL:"FairPlay"},Fy={hA:Ci.Xv,fL:"com.apple.fps",_L:"sinf",gL:Yc,wL:Wa,AL:"FairPlay"},Yy={hA:Ci.Zv,fL:"org.w3.clearkey",_L:"cenc",gL:zw,wL:Pw,AL:"ClearKey"},Gy=[Za,Uy,Qy,Yy];function Vy(t){return Gy.filter((i=>i.wL===t.toLowerCase()))}r(),r(),r(),r(),r(),r();var sr,Wy=["cenc"],Hy=["cbcs","cbcs-1-9"],Ze=class extends gg{constructor(t){super("vL"),this.mL=t}},bs=class extends gg{constructor(t,i,e,s){super("pL"),this.mL=t,this.yL=i,this.pL=e,this.ML=s}},qy=class extends gg{constructor(){super("lt")}};!function(t){t.LA="TL",t.NL="DL"}(sr||(sr={}));var vs=class extends gg{constructor(t,i){super("TL"),this._L=t,this.SL=i}},Xy=class extends gg{constructor(){super("DL")}};r();var je=new T([0]).buffer,Bs=class{get ey(){return this.Xu.length}IL(t){for(const i of this.Xu)if(i[0]===t)return!0;return!1}EL(t){for(const i of this.Xu)if(i[0]===t)return i[1]}bL(t,i){this.Xu.forEach((i=>t(i[1],i[0])),i)}LL(t,i){this.Xu.push([t,i])}kL(){Ri(this.Xu)}constructor(){this.Xu=[]}};r();var No=class{CL(t){this.zd&&(this.zd(t),this.e_())}xL(t){this.Bd&&(this.Bd(t),this.e_())}c_(){this.OL.catch(xs),this.xL(new sa)}l_(t){t.then((t=>this.CL(t)),(t=>this.xL(t)))}e_(){this.zd=void 0,this.Bd=void 0}constructor(){this.OL=new Promise(((t,i)=>{this.zd=t,this.Bd=i}))}};function Zy(){return new T([8,4]).buffer}function Ky(t,i){return t===xw?function(t){if(t.byteLength<2*Jy.length)return t;const i=new DataView(t,0,2*Jy.length),e=RA(i,!0);if(e===Jy)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+$w(t)+e;return UA(s,!0).buffer}(t)}(i):i}r();var Jy="<PlayReady";r(),r();var $t=class extends Jo{constructor(t,i,e,s){super(t,s),this.jL=i,this.zL=e}};r(),r(),r(),r(),r();var $y=function(t,i){return($y=_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)_.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function _n(t,i){if("function"!=typeof i&&null!==i)throw new k("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}$y(t,i),t.prototype=null===i?_.create(i):(e.prototype=i.prototype,new e)}function tM(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}r(),r(),r(),r(),r(),r(),r();!function(){function t(t,i){this.PL=t,this.BL=i}t.prototype.get=function(t){var i=this.PL.get(t);if(0===this.BL||void 0===i)return i;var e=this.PL.get(t+1)||0,s=i&(1<<8-this.BL)-1,n=e>>8-this.BL;return(s<<this.BL)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.PL.get(x.floor((t+this.BL)/8));if(void 0!==i)return(i&1<<7-this.BL-t%8)>0?1:0}},_.defineProperty(t.prototype,"bitLength",{get:function(){return this.PL.bitLength-this.BL},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"length",{get:function(){return this.PL.length},enumerable:!1,configurable:!0})}();r(),r();x.pow(2,-52);function iM(t,i,e){return x.min(x.max(t,i),e)}function Ie(t,i){return t>>8-i}function eM(t,i){return t&(1<<i)-1}var sM=function(){function t(t){this.RL=t,this.UL=0,this.QL=0}return _.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.UL+this.QL},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"done",{get:function(){return this.UL===this.RL.length&&0===this.QL},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"location",{get:function(){return{byte:this.UL,bit:this.QL}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.RL);return i.seek(this.UL,this.QL),i},t.prototype.canReadBits=function(t){return 8*this.UL+t+this.QL<=8*this.RL.length},t.prototype.canReadBytes=function(t){return 0===this.QL?this.UL+t<=this.RL.length:this.UL+t<this.RL.length},t.prototype.incBit=function(){this.QL++,this.QL>7&&(this.UL++,this.QL=0)},t.prototype.seek=function(t,i){this.UL=t,this.QL=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new b("Cannot read past end of buffer.");return this.RL.get(this.UL)>>7-this.QL&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new b("Cannot read past end of buffer.");if(0===this.QL)return this.RL.get(this.UL++);var t=eM(this.RL.get(this.UL),8-this.QL),i=Ie(this.RL.get(this.UL+1),this.QL);return this.UL++,t<<this.QL|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new b("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");var i=0;if(0===this.QL&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new b("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new b("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-x.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new b("Skipping over the buffer edge is not allowed.");var i=this.QL+t;this.UL+=i>>3,this.QL=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new b("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}();r(),r(),r();var nM=function(t,i){return t===i?0:t<i?-1:t>i?1:j(t)?j(i)?0:1:-1},Jr=function(){function t(){this.FL=[],this.YL=[],this.GL=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var h=r[n];s.pushRange(h)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new b("The buffer length must be positive.");if(0!==e){if(0===this.YL.length)this.YL.push(0);else{var s=this.YL[this.YL.length-1]+this.FL[this.FL.length-1].length;this.YL.push(s)}this.FL.push(t.subarray(i,i+e)),this.GL+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.FL;n<r.length;n++){var h=r[n];t.set(h,s),e+=h.length,s+=h.length}return e},t.prototype.clear=function(){this.FL=[],this.YL=[],this.GL=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.YL[i];return this.FL[i][e]}},_.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.FL.length<1)return-1;if(this.FL.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.FL[0];return"number"==typeof t?tM(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=tM(t,e,r))<0||r>n);r++){for(var h=r+1,o=r+s,a=1;h<o&&t[h]===i[a];h++,a++);if(h===o)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=x.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.YL,t,nM)},t.prototype.join=function(){if(1===this.FL.length)return this.FL[0];var t=new T(this.length);return this.copyInternal(t,0),t},_.defineProperty(t.prototype,"length",{get:function(){return this.GL},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new b("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new b("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*x.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=iM(i,0,this.length),n=iM(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,h=this.findContainingBufferIndex(s),o=this.FL[h],a=s,u=a-this.YL[h];a+o.length-u<n;)r.pushRange(o,u,o.length-u),h+=1,u=(a+=o.length-u)-this.YL[h],o=this.FL[h];var c=n-a;return r.pushRange(o,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.FL.length-1,s=this.FL[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.FL[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),rM=function(){function t(i){this.VL=i||t.BUFFER_CHUNK_SIZE,this.WL=!1,this.HL=new Jr,this.RL=new T(this.VL),this.qL=0,this.XL=0,this.QL=7}return t.prototype.closeByte=function(){this.RL[this.qL++]=this.XL,this.qL>=this.VL&&this.closeBuffer(),this.XL=0,this.QL=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.qL&&(this.HL.pushRange(this.RL,0,this.qL),t&&(this.RL=new T(this.VL)),this.qL=0)},_.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.QL},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.WL)throw new b("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.WL=!0,this.HL},t.prototype.writeBit=function(t){if(this.WL)throw new b("Cannot write to a closed BitWriter.");this.XL|=t<<this.QL,0===this.QL?this.closeByte():this.QL--},t.prototype.writeByte=function(t){if(this.WL)throw new b("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.XL=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.QL;this.XL|=Ie(t,i+1),this.closeByte(),this.XL=eM(t,8-i)<<i+1,this.QL=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.WL)throw new b("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.qL+t.length<=this.VL?(this.RL.set(t,this.qL),this.qL+=t.length,this.qL===this.VL&&this.closeBuffer()):(this.closeBuffer(),this.HL.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.QL;this.XL|=Ie(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=eM(t[e-1],8-i),n=Ie(t[e],i+1);this.XL=s<<i+1|n,this.closeByte()}this.XL=eM(t[t.length-1],8-i)<<i+1,this.QL=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new b("Received a negative number.");if(i>32)throw new b("The max bitlength that can be provided is 32.");if(t>=x.pow(2,i))throw new b("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new b("The max bitlength that can be provided is 32.");if(x.abs(t)>=x.pow(2,i-1))throw new b("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+x.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new b("Received a negative number.");for(var i=x.floor(x.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new T(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}();r();var hM=function(){function t(t){this.rb=new Jr,this.Vd=t}return t.prototype.closeWriter=function(){void 0!==this.Vd&&(this.rb=this.rb.concat(this.Vd.close()),this.Vd=void 0)},_.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.Vd&&(this.Vd=new rM),this.Vd},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),ro=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new b("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(x.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new hM;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=x.pow(2,32),t}();function oM(t,i){return t instanceof Se?64===i:t<x.pow(2,i)}function E(t,i){return x.round(t*x.pow(2,i))}function aM(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function Jc(t,i){return t/x.pow(2,i)}r();var Lt=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!oM(e,8))throw new b("the provided version cannot fit in 8 bits.");return n.flags=s,n}return _n(i,t),_.defineProperty(i.prototype,"flags",{get:function(){return this.ZL},set:function(t){this.ZL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new b("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(ro);r(),r();var uM=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return _n(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(Jr.from(this.data))},i}(ro);r(),r();var cM=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();r();var lM=16384;function dM(t){var i=t.length;if(i<=lM)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=lM)e.push(String.fromCharCode.apply(String,t.slice(s,s+lM)));return e.join("")}var fM=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function _M(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function gM(t,i,e){var s=MM(DM(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function wM(t,i,e){return i.offset+e<=t.byteLength}function AM(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function vM(t,i,e){void 0===e&&(e=!1);var s=AM(t,i,e),n=AM(t,i,e),r=e?n:s,h=e?s:n;return Se.fromBits(h,r,!0)}function mM(t,i,e){return dM(function(t){return[].slice.call(t)}(gM(t,i,e)))}function pM(t,i){var e,s=_M(t,i);return 0==(128&s)?e=s:192==(224&s)?e=64*(31&s)+(63&_M(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&_M(t,i))+(63&_M(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&_M(t,i))+64*(63&_M(t,i))+(63&_M(t,i))),e}function yM(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=pM(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return dM(i)}(s)}(t,i,!0)}function MM(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new T(t.buffer,t.byteOffset+i,e-i)}function TM(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function NM(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function DM(t){return new T(t.buffer,t.byteOffset,t.byteLength)}var SM=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new cM(this.offset<<3)},t}();r();var IM=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return _M(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return AM(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=AM(t,i,e),n=AM(t,i,e),r=e?n:s,h=e?s:n;return Se.fromBits(h,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return vM(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return gM(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(AM(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return mM(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return yM(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function fo(t,i){return t.type===i}var EM=8;function Io(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=bM(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new b("Data incomplete");return i.boxes}function bM(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!wM(t,i,EM)){return{complete:!1,neededOffset:r=i.offset+EM}}var s=AM(t,i),n=mM(t,i,4);if(1===s){if(!wM(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=vM(t,i).toNumber()}if("uuid"===n){if(!wM(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=mM(t,i,16)}var h=i.offset,o={type:n,size:s,headerSize:h-e};return{complete:!0,header:o}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var h=e+r;if(h>t.byteLength){var o=h;return i.seek(e),{complete:!1,neededOffset:o}}var a={type:n.type,offset:e,data:new IM(TM(t,e,h),new SM(n.headerSize))};return i.seek(h),{complete:!0,box:a}}function Ea(t){return{version:t>>24,flags:new fM(16777215&t)}}function LM(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function kM(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function CM(t){var i=t.nextUint32Array(9);return{a:Jc(i[0],16),b:Jc(i[1],16),u:Jc(i[2],30),c:Jc(i[3],16),d:Jc(i[4],16),v:Jc(i[5],30),x:Jc(i[6],16),y:Jc(i[7],16),w:Jc(i[8],30)}}function Uh(t){return new uM(t.type,MM(DM(t.data.data),t.data.cursor.offset))}var xM=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return _n(i,t),_.defineProperty(i.prototype,"handlerType",{get:function(){return this.KL},set:function(t){this.KL=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(Lt);function OM(t){var i=t.data,e=Ea(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var h=i.nextUTF8String();return new xM(r,h,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}_n(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(xM);r(),r(),r();var jM=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},_.defineProperty(t.prototype,"tag",{get:function(){return this.JL},set:function(t){if(!oM(t,8))throw new b("Provided tag does not fit in 8 bits.");this.JL=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}();r();!function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a=t.call(this,4,o.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=h,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}_n(i,t),_.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.$L},set:function(t){if(!oM(t,8))throw new b("Provided objectTypeIndication does not fit in 8 bits.");this.$L=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"streamType",{get:function(){return this.ek},set:function(t){if(!oM(t,6))throw new b("Provided streamType does not fit in 6 bits.");this.ek=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.nk},set:function(t){if(!oM(t,24))throw new b("Provided bufferSizeDb does not fit in 24 bits.");this.nk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.rk},set:function(t){if(!oM(t,32))throw new b("Provided maxBitrate does not fit in 32 bits.");this.rk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.hk},set:function(t){if(!oM(t,32))throw new b("Provided avgBitrate does not fit in 32 bits.");this.hk=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(jM);r();!function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}_n(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(Jr.from(this.data))}}(jM);r(),r();var zM=function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return _n(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(jM);!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new zM(n.fixed28BitMode),r}_n(i,t),_.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"esId",{get:function(){return this.ck},set:function(t){if(!oM(t,16))throw new b("Provided esId does not fit in 16 bits.");this.ck=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"streamPriority",{get:function(){return this.lk},set:function(t){if(!oM(t,5))throw new b("Provided streamPriority does not fit in 5 bits.");this.lk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.dk},set:function(t){if(t&&!oM(t,16))throw new b("Provided dependsOnEsId does not fit in 16 bits.");this.dk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.fk},set:function(t){if(t&&!oM(t,16))throw new b("Provided ocrEsId does not fit in 16 bits.");this.fk=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(jM);r(),r(),r(),r(),r();var PM=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return _n(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(ro),Dt=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return _n(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(PM),BM=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return _n(i,t),_.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this._k},set:function(t){if(!oM(t,16))throw new b("Provided dataReferenceIndex does not fit in 16 bits.");this._k=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(Dt),RM=function(t){function i(i,e,s,n){var r,h,o=this;return(o=t.call(this,i,e)||this).extra=n,o.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,o.sampleSize=null!==(h=s.sampleSize)&&void 0!==h?h:16,o.sampleRate=s.sampleRate,o}return _n(i,t),_.defineProperty(i.prototype,"channelCount",{get:function(){return this.gk},set:function(t){if(!oM(t,16))throw new b("Provided channelCount does not fit in 16 bits.");this.gk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleSize",{get:function(){return this.wk},set:function(t){if(!oM(t,16))throw new b("Provided sampleSize does not fit in 16 bits.");this.wk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleRate",{get:function(){return this.Ak},set:function(t){if(!oM(E(t,16),32))throw new b("Provided rate does not fit in 32 bits (fixed 16.16).");this.Ak=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(E(this.sampleRate,16),32),this.extra&&aM(i.writer,this.extra)},i}(BM);r();!function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}_n(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.vk},set:function(t){if(!oM(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oM(t,32)})))throw new b("Not all entries can be represented in 32 bits.");this.vk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Lt);r();!function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}_n(i,t),_.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.pk},set:function(t){if(!oM(t,32))throw new b("Provided cleanApertureWidthN does not fit in 32 bits.");this.pk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.yk},set:function(t){if(!oM(t,32))throw new b("Provided cleanApertureWidthD does not fit in 32 bits.");this.yk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.Mk},set:function(t){if(!oM(t,32))throw new b("Provided cleanApertureHeightN does not fit in 32 bits.");this.Mk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.Tk},set:function(t){if(!oM(t,32))throw new b("Provided cleanApertureHeightD does not fit in 32 bits.");this.Tk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizOffN",{get:function(){return this.Nk},set:function(t){if(!oM(t,32))throw new b("Provided horizOffN does not fit in 32 bits.");this.Nk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizOffD",{get:function(){return this.Dk},set:function(t){if(!oM(t,32))throw new b("Provided horizOffD does not fit in 32 bits.");this.Dk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vertOffN",{get:function(){return this.Sk},set:function(t){if(!oM(t,32))throw new b("Provided vertOffN does not fit in 32 bits.");this.Sk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vertOffD",{get:function(){return this.Ik},set:function(t){if(!oM(t,32))throw new b("Provided vertOffD does not fit in 32 bits.");this.Ik=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(ro);r();!function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}_n(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.vk},set:function(t){if(!oM(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oM(t.sampleCount,32)||!oM(t.sampleOffset,32)})))throw new b("Not all entries can be represented in 64 bits.");this.vk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(Lt);r();!function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}_n(i,t),_.defineProperty(i.prototype,"location",{get:function(){return this.Ek},set:function(t){this.flags=void 0===t?1:0,this.Ek=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Lt);r();!function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}_n(i,t),_.defineProperty(i.prototype,"location",{get:function(){return this.Ek},set:function(t){if(1&this.flags)throw new b("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.Ek=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Lt);r();!function(t){function i(){return t.call(this,"dinf")||this}_n(i,t)}(Dt);r(),r();var UM=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!oM(e,8))throw new b("the provided version cannot fit in 8 bits.");return n.flags=s,n}return _n(i,t),_.defineProperty(i.prototype,"flags",{get:function(){return this.ZL},set:function(t){this.ZL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new b("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(PM);!function(t){function i(){return t.call(this,"dref",0,0)||this}_n(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(UM);r(),r();var QM=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return _n(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"entries",{get:function(){return this.vk},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!oM(s.segmentDuration,this.bitSize))throw new b("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!oM(s.mediaTime,this.bitSize))throw new b("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!oM(s.mediaRateInteger,16))throw new b("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!oM(s.mediaRateFraction,16))throw new b("Provided mediaRateFraction does not fit in 16 bits.")}this.vk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(Lt),FM=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return _n(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(QM),YM=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return _n(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(QM);function GM(t){for(var i=t.data,e=Ea(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=[],o=0;o<r;o++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),l=i.nextInt16();h.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new FM(h,n.raw):new YM(h,n.raw)}var VM=function(t){function i(){return t.call(this,"edts")||this}return _n(i,t),i}(Dt);function WM(t){for(var i=new VM,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"elst")?i.boxes.push(GM(n)):i.boxes.push(Uh(n))}return i}r(),r();var HM=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return _n(i,t),_.defineProperty(i.prototype,"majorBrand",{get:function(){return this.bk},set:function(t){if(4!==t.length)throw new b("the provided major brand does not conform to the 4 character requirement");this.bk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"minorVersion",{get:function(){return this.Lk},set:function(t){if(!oM(t,32))throw new b("the provided minor version does not fit in 32 bits.");this.Lk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.Ck},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new b("Some of the compatible brands do not conform to the 4 character requirement");this.Ck=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(ro),qM=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return _n(i,t),i}(HM);function XM(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new qM(e,s,n)}r();var ZM=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return _n(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(Jr.from(this.data))},i}(ro);r(),r();var KM=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return _n(i,t),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.xk},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.xk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Ok},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Ok=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.jk},set:function(t){if(!oM(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.jk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.zk},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.zk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"language",{get:function(){return this.Pk},set:function(t){if(!iT(t))throw new b("Expected an ISO-639-2/T language code");this.Pk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(Lt),JM=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return _n(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(KM),$M=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return _n(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(KM);function tT(t){var i=t.data,e=Ea(i.nextUint32()),s=e.version,n=e.flags,r=LM(i,s),h=new sM(Jr.from(i.nextUint8Array(2)));h.skipBits(1);for(var o=[],a=0;a<3;a++)o.push(h.readUInt(5));var u=o.map((function(t){return String.fromCharCode(t+96)})).join("");return iT(u)||(u="und"),i.skip(2),0===s?new JM(r,u,n.raw):new $M(r,u,n.raw)}function iT(t){return/^[a-z]{3}$/.test(t)}var eT=function(t){function i(){return t.call(this,"mdia")||this}return _n(i,t),i}(Dt);function sT(t){for(var i=new eT,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"mdhd")?i.boxes.push(tT(n)):fo(n,"hdlr")?i.boxes.push(OM(n)):i.boxes.push(Uh(n))}return i}r();var nT=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new Jr,i}return _n(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(ro);function rT(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new nT;return s.data.pushRange(e),s}r();!function(t){function i(){return t.call(this,"minf")||this}_n(i,t)}(Dt);r();var hT;!function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}_n(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(UM);r(),r(),function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(hT||(hT={})),r();var oT,aT,uT={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function cT(t,i){i.writer.writeUInt(E(t.a,16),32),i.writer.writeUInt(E(t.b,16),32),i.writer.writeUInt(E(0,30),32),i.writer.writeUInt(E(t.c,16),32),i.writer.writeUInt(E(t.d,16),32),i.writer.writeUInt(E(0,30),32),i.writer.writeUInt(E(t.x,16),32),i.writer.writeUInt(E(t.y,16),32),i.writer.writeUInt(E(1,30),32)}function lT(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:oT.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:aT.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:aT.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:aT.UNKNOWN,2)}function Ga(t,i){var e,s,n;i.writer.writeUInt(0,4),lT(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}r(),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(oT||(oT={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(aT||(aT={})),r(),r();var dT=function(){};r(),r(),r();var fT=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return _n(i,t),_.defineProperty(i.prototype,"systemId",{get:function(){return this.Bk},set:function(t){if(16!==t.length)throw new b("Provided systemId length is not 16.");this.Bk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"data",{get:function(){return this.Rk},set:function(t){if(!oM(t.length,32))throw new b("Provided data length does not fit in 32 bits.");this.Rk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(Jr.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(Jr.from(this.data))},i}(Lt),_T=function(t){function i(i,e){return t.call(this,0,i,e)||this}return _n(i,t),i}(fT),gT=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return _n(i,t),_.defineProperty(i.prototype,"kIds",{get:function(){return this.Uk},set:function(t){if(!oM(t.length,32))throw new b("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new b("Not all provided key ids are 16 bytes long.");this.Uk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(Jr.from(s))}},i}(fT);function Be(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var h=t.data.nextUint32(),o=t.data.nextUint8Array(h);return 1===i?new gT(e,o,s):new _T(e,o)}r(),r();var wT=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return _n(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.Qk},set:function(t){if(!oM(t,this.bitSize))throw new b("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.Qk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Lt),AT=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return _n(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(wT),vT=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return _n(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(wT);function mT(t){var i=t.data,e=Ea(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new AT(i.nextUint32(),n.raw):new vT(i.nextUint64(),n.raw)}r();var pT=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,h,o,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(h=e.sampleDuration)&&void 0!==h?h:0,a.defaultSampleSize=null!==(o=e.sampleSize)&&void 0!==o?o:0,a.defaultSampleFlags=e.sampleFlags,a}return _n(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.Fk},set:function(t){if(!oM(t,32))throw new b("Provided track id does not fit in 32 bits.");this.Fk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.Yk},set:function(t){if(!oM(t,32))throw new b("Provided default sample description index does not fit in 32 bits.");this.Yk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.Gk},set:function(t){if(!oM(t,32))throw new b("Provided default sample duration does not fit in 32 bits.");this.Gk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.Vk},set:function(t){if(!oM(t,32))throw new b("Provided default sample size does not fit in 32 bits.");this.Vk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.Wk},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!oM(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!oM(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this.Wk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),Ga(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(Lt);function yT(t){var i=t.data,e=Ea(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=i.nextUint32(),o=i.nextUint32(),a=i.nextUint32(),u=kM(new sM(Jr.from(i.nextUint8Array(4))));return new pT(r,{sampleDescriptionIndex:h,sampleDuration:o,sampleSize:a,sampleFlags:u},s,n.raw)}var MT=function(t){function i(){return t.call(this,"mvex")||this}return _n(i,t),i}(Dt);function TT(t){for(var i=new MT,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"mehd")?i.boxes.push(mT(n)):fo(n,"trex")?i.boxes.push(yT(n)):i.boxes.push(Uh(n))}return i}r();var NT=function(t){function i(e,s,n,r,h){void 0===h&&(h=0);var o,a,u,c=this;return(c=t.call(this,"mvhd",r,h)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(o=n.rate)&&void 0!==o?o:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:uT,c.Hk=s,c}return _n(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.xk},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.xk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Ok},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Ok=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.jk},set:function(t){if(!oM(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.jk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.zk},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.zk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"rate",{get:function(){return this.qk},set:function(t){if(!oM(E(t,16),32))throw new b("Provided rate does not fit in 32 bits (fixed 16.16).");this.qk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"volume",{get:function(){return this.Xk},set:function(t){if(!oM(E(t,8),16))throw new b("Provided volume does not fit in 16 bits (fixed 8.8).");this.Xk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"matrix",{get:function(){return this.Zk},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new b("(u, v, w) does not match the required (0, 0, 1)");this.Zk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.Hk},set:function(t){if(0===t)throw new b("NextTrackId cannot be 0.");if(!oM(t,32))throw new b("NextTrackId cannot exceed 32 bits.");this.Hk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(E(this.rate,16),32),i.writer.writeUInt(E(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),cT(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(Lt),DT=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return _n(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(NT),ST=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return _n(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(NT);function IT(t){var i=t.data,e=Ea(i.nextUint32()),s=e.version,n=e.flags,r=LM(i,s),h=Jc(i.nextUint32(),16),o=Jc(i.nextUint16(),8);i.skip(2),i.skip(8);var a=CM(i);i.skip(24);var u=i.nextUint32();return 0===s?new DT(r,u,{rate:h,volume:o,matrix:a},n.raw):new ST(r,u,{rate:h,volume:o,matrix:a},n.raw)}r(),r();var ET=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a,u,c,l=this;return l=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(o))||this,l.creationTime=e.creation,l.modificationTime=e.modification,l.trackId=s,l.duration=e.duration,l.volume=n,l.width=r,l.height=h,l.layer=null!==(a=o.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=o.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=o.matrix)&&void 0!==c?c:uT,l}return _n(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"creationTime",{get:function(){return this.xk},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.xk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"modificationTime",{get:function(){return this.Ok},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Ok=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"trackId",{get:function(){return this.Fk},set:function(t){if(0===t)throw new b("trackId cannot be 0.");if(!oM(t,32))throw new b("trackId cannot exceed 32 bits.");this.Fk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"duration",{get:function(){return this.zk},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.zk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"volume",{get:function(){return this.Xk},set:function(t){if(!oM(E(t,8),16))throw new b("Provided volume does not fit in 16 bits (fixed 8.8).");this.Xk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"width",{get:function(){return this.Kk},set:function(t){if(!oM(E(t,16),32))throw new b("Provided width does not fit in 32 bits (fixed 16.16).");this.Kk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"height",{get:function(){return this.Jk},set:function(t){if(!oM(E(t,16),32))throw new b("Provided height does not fit in 32 bits (fixed 16.16).");this.Jk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"layer",{get:function(){return this.$k},set:function(t){if(!oM(t,16))throw new b("Provided layer does not fit in 16 bits.");this.$k=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"alternateGroup",{get:function(){return this.tC},set:function(t){if(!oM(t,16))throw new b("Provided alternateGroup does not fit in 16 bits.");this.tC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"matrix",{get:function(){return this.Zk},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new b("(u, v, w) does not match the required (0, 0, 1)");this.Zk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(E(this.volume,8),16),i.writer.writeUInt(0,16),cT(this.matrix,i),i.writer.writeUInt(E(this.width,16),32),i.writer.writeUInt(E(this.height,16),32)},i}(Lt),bT=function(t){function i(i,e,s,n,r,h){return t.call(this,0,i,e,s,n,r,h)||this}return _n(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(ET),nu=function(t){function i(i,e,s,n,r,h){return t.call(this,1,i,e,s,n,r,h)||this}return _n(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(ET);function LT(t){var i,e,s,n,r=t.data,h=Ea(r.nextUint32()),o=h.version,a=h.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===o?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),g=Jc(r.nextInt16(),8);r.skip(2);var w=CM(r),A=Jc(r.nextUint32(),16),v=Jc(r.nextUint32(),16);return 0===o?new bT({creation:i,modification:e,duration:n},s,g,A,v,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new nu({creation:i,modification:e,duration:n},s,g,A,v,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var Fe=function(t){function i(){return t.call(this,"trak")||this}return _n(i,t),i}(Dt);function kT(t){for(var i=new Fe,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"tkhd")?i.boxes.push(LT(n)):fo(n,"mdia")?i.boxes.push(sT(n)):fo(n,"edts")?i.boxes.push(WM(n)):i.boxes.push(Uh(n))}return i}var ze=function(t){function i(){return t.call(this,"moov")||this}return _n(i,t),i}(Dt);function CT(t){for(var i=new ze,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"mvhd")?i.boxes.push(IT(n)):fo(n,"trak")?i.boxes.push(kT(n)):fo(n,"mvex")?i.boxes.push(TT(n)):fo(n,"pssh")?i.boxes.push(Be(n)):i.boxes.push(Uh(n))}return i}r(),r(),r();var xT=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return _n(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.iC},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.iC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Lt),cu=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return _n(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(xT),ru=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return _n(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(xT);function OT(t){var i=t.data,e=Ea(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new cu(i.nextUint32(),n.raw):new ru(i.nextUint64(),n.raw)}r();var nn=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return _n(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.Fk},set:function(t){if(!oM(t,32))throw new b("Provided track id does not fit in 32 bits.");this.Fk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.eC},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new b("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new b("The base data offset present flag is not set.");if(t&&!oM(t,64))throw new b("Provided baseDataOffset does not fit in 32 bits.");this.eC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.sC},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new b("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new b("The sample description index flag is not set.");if(t&&!oM(t,32))throw new b("Provided sampleDescriptionIndex does not fit in 32 bits.");this.sC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.Gk},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new b("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new b("The default sample duration present flag is not set.");if(t&&!oM(t,32))throw new b("Provided defaultSampleDuration does not fit in 32 bits.");this.Gk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.Vk},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new b("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new b("The default sample size present flag is not set.");if(t&&!oM(t,32))throw new b("Provided defaultSampleSize does not fit in 32 bits.");this.Vk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.Wk},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new b("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new b("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!oM(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!oM(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this.Wk=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Ga(this.defaultSampleFlags,i)},i}(Lt);function jT(t){var i=t.data,e=i.nextUint8(),s=new sM(Jr.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var h=Boolean(s.readBit()),o=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=i.nextUint32(),d=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,_=a?i.nextUint32():void 0,g=o?i.nextUint32():void 0,w=h?kM(new sM(Jr.from(i.nextUint8Array(4)))):void 0;return new nn({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:g,defaultSampleFlags:w},e)}r();var zT=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return _n(i,t),_.defineProperty(i.prototype,"dataOffset",{get:function(){return this.nC},set:function(t){if(t&&!oM(t,32))throw new b("Provided data offset does not fit in 32 bits.");this.nC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.rC},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!oM(t.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!oM(t.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");this.rC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"samples",{get:function(){return this.hC},set:function(t){var i,e;if(!oM(t.length,32))throw new b("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new b("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new b("The sample duration present flag is not set.");if(r.duration&&!oM(r.duration,32))throw new b("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new b("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new b("The sample size present flag is not set.");if(r.size&&!oM(r.size,32))throw new b("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new b("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new b("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!oM(r.flags.samplePaddingValue,3))throw new b("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!oM(r.flags.sampleDegradationPriority,16))throw new b("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new b("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new b("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!oM(r.compositionTimeOffset,32))throw new b("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.hC=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Ga(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Ga(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(Lt);function PT(t){var i=t.data,e=i.nextUint8(),s=new sM(Jr.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),h=Boolean(s.readBit()),o=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),l={sampleDurationPresent:o,sampleSizePresent:h,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=i.nextInt32()),a&&(l.firstSampleFlags=kM(new sM(Jr.from(i.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};o&&(_.duration=i.nextUint32()),h&&(_.size=i.nextUint32()),r&&(_.flags=kM(new sM(Jr.from(i.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),d.push(_)}return new zT(e,l,d)}var zs=function(t){function i(){return t.call(this,"traf")||this}return _n(i,t),i}(Dt);function BT(t){for(var i=new zs,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"tfhd")?i.boxes.push(jT(n)):fo(n,"tfdt")?i.boxes.push(OT(n)):fo(n,"trun")?i.boxes.push(PT(n)):i.boxes.push(Uh(n))}return i}var RT=function(t){function i(){return t.call(this,"moof")||this}return _n(i,t),i}(Dt);function UT(t){for(var i=new RT,e=0,s=Io(t.data);e<s.length;e++){var n=s[e];fo(n,"traf")?i.boxes.push(BT(n)):fo(n,"pssh")?i.boxes.push(Be(n)):i.boxes.push(Uh(n))}return i}r();!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}_n(i,t),_.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.oC},set:function(t){if(!oM(t,32))throw new b("Provided sequence number does not fit in 32 bits.");this.oC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(Lt);r();var QT=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return _n(i,t),_.defineProperty(i.prototype,"codingName",{get:function(){return this.aC},set:function(t){if(4!==t.length)throw new b("Provided coding name was not 4 characters long.");this.aC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(ro);r();!function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}_n(i,t),_.defineProperty(i.prototype,"hSpacing",{get:function(){return this.uC},set:function(t){if(!oM(t,32))throw new b("Provided hSpacing does not fit in 32 bits.");this.uC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"vSpacing",{get:function(){return this.cC},set:function(t){if(!oM(t,32))throw new b("Provided vSpacing does not fit in 32 bits.");this.cC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(ro);r();!function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}_n(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(Dt);r();!function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new QT(i),n}_n(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(ro);r();var FT=function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return _n(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"entries",{get:function(){return this.vk},set:function(t){var i=this;if(!oM(t.length,32))throw new b("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!oM(t,i.bitSize)})))throw new b("Not all provided entries fit in ".concat(this.bitSize," bits."));this.vk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.lC},set:function(t){if(void 0===t)this.flags=0;else{if(!oM(t.auxInfoType,32))throw new b("Provided auxInfoType does not fit in 32 bits.");if(!oM(t.auxInfoTypeParameter,32))throw new b("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.lC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(Lt);(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}_n(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}})(FT),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}_n(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(FT);r();!function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}_n(i,t),_.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.dC},set:function(t){if(!oM(t,8))throw new b("Provided defaultSampleInfoSize does not fit in a single byte.");this.dC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.fC},set:function(t){if(!oM(t.length,32))throw new b("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!oM(t,8)})))throw new b("Not all provided sampleInfoSizes fit in a byte.");this.fC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.lC},set:function(t){if(void 0===t)this.flags=0;else{if(!oM(t.auxInfoType,32))throw new b("Provided auxInfoType does not fit in 32 bits.");if(!oM(t.auxInfoTypeParameter,32))throw new b("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.lC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new b("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(Lt);r();!function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}_n(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){lT(s[e],i)}}}(Lt);r();!function(t){function i(i){return t.call(this,"stsd",i,0)||this}_n(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(UM);r();var YT=function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return _n(i,t),_.defineProperty(i.prototype,"groupingType",{get:function(){return this._C},set:function(t){if(4!==t.length)throw new b("The provided groupingType does not equal 4 characters.");this._C=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(Lt);(function(t){function i(i,e){return t.call(this,0,i,e)||this}_n(i,t),i.prototype.serializeVersionBoxContent=function(t){}})(YT),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}_n(i,t),_.defineProperty(i.prototype,"defaultLength",{get:function(){return this.gC},set:function(t){if(!oM(t,32))throw new b("The provided defaultLength does not fit in 32 bits.");this.gC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(YT),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new b("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}_n(i,t),_.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.Yk},set:function(t){if(!oM(t,32))throw new b("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.Yk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(YT);r();(function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}_n(i,t),_.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.wC},set:function(t){if(!oM(t.length,32))throw new b("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!oM(t,32)})))throw new b("Not all sampleSizes can be represented in 32 bits.");this.wC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}})(Lt),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}_n(i,t),_.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.Vk},set:function(t){if(!oM(t,32))throw new b("Provided defaultSampleSize does not fit in 32 bits.");this.Vk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"samples",{get:function(){return this.hC},set:function(t){if(!oM(t,32))throw new b("Number of allowed samples cannot fit in 32 bits.");this.hC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(Lt);r();!function(t){function i(){return t.call(this,"stbl")||this}_n(i,t)}(Dt);r();!function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}_n(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.vk},set:function(t){if(!oM(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oM(t.firstChunk,32)||!oM(t.sampleDescriptionIndex,32)||!oM(t.samplesPerChunk,32)})))throw new b("Not all entries can be represented in 96 bits.");this.vk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(Lt);r();!function(t){function i(){return t.call(this,"schi")||this}_n(i,t)}(Dt);r();!function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}_n(i,t),_.defineProperty(i.prototype,"schemeType",{get:function(){return this.AC},set:function(t){if(4!==t.length)throw new b("The provided schemeType does not have a length of 4.");this.AC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.vC},set:function(t){if(!oM(t,32))throw new b("The provided schemeVersion does not fit in 23 bits.");this.vC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"schemeUri",{get:function(){return this.mC},set:function(t){if(t&&4!==t.length)throw new b("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.mC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(Lt);r();var GT=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o=0);var a=t.call(this,"sidx",i,o)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=h,a}return _n(i,t),_.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"referenceId",{get:function(){return this.pC},set:function(t){if(!oM(t,32))throw new b("Provided referenceId does not fit in 32 bits.");this.pC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"timescale",{get:function(){return this.jk},set:function(t){if(!oM(t,32))throw new b("Provided timescale does not fit in 32 bits.");this.jk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.yC},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.yC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"firstOffset",{get:function(){return this.MC},set:function(t){if(!oM(t,this.bitSize))throw new b("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.MC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"references",{get:function(){return this.TC},set:function(t){if(!oM(t.length,16))throw new b("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!oM(s.referencedSize,31))throw new b("Provided referenced size does not fit in 31 bits.");if(!oM(s.subsegmentDuration,32))throw new b("Provided subsegment duration does not fit in 31 bits.");if(!oM(s.sapType,3))throw new b("Provided SAP type does not fit in 3 bits.");if(!oM(s.sapDeltaTime,28))throw new b("Provided SAP delta time does not fit in 28 bits.")}this.TC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(Lt),VT=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,0,i,e,s,n,r,h)||this}return _n(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(GT),WT=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,1,i,e,s,n,r,h)||this}return _n(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(GT);r();var HT=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return _n(i,t),i}(HM);function qT(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new HT(e,s,n)}r();!function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}_n(i,t),_.defineProperty(i.prototype,"balance",{get:function(){return this.NC},set:function(t){if(t<-1||t>1)throw new b("Provided balance does not fit in the allowed range [-1, 1].");if(!oM(E(t,8),16))throw new b("Provided balance does not fit in 16 bits (fixed 8.8).");this.NC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(E(this.balance,8),16),i.writer.writeUInt(0,16)}}(Lt);r();!function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}_n(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.vk},set:function(t){if(!oM(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oM(t,32)})))throw new b("Not all entries can be represented in 32 bits.");this.vk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Lt);r();!function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}_n(i,t),_.defineProperty(i.prototype,"entries",{get:function(){return this.vk},set:function(t){if(!oM(t.length,32))throw new b("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!oM(t.sampleCount,32)||!oM(t.sampleDelta,32)})))throw new b("Not all entries can be represented in 64 bits.");this.vk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(Lt);r();!function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}_n(i,t),_.defineProperty(i.prototype,"trackId",{get:function(){return this.Fk},set:function(t){if(!oM(t,32))throw new b("The provided trackId does not fit in 32 bits.");this.Fk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(UM);r();!function(t){function i(){return t.call(this,"udta")||this}_n(i,t)}(Dt);r();var XT={red:0,green:0,blue:0};!function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=XT);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}_n(i,t),_.defineProperty(i.prototype,"opColor",{get:function(){return this.DC},set:function(t){if(!oM(t.red,16)||!oM(t.green,16)||!oM(t.blue,16))throw new b("Not all colors could be represented in 16 bits.");this.DC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(Lt);r();var ZT=function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h,o,a,u,c,l=this;return(l=t.call(this,i,e)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(h=s.horizontal)&&void 0!==h?h:72,l.verticalResolution=null!==(o=s.vertical)&&void 0!==o?o:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return _n(i,t),_.defineProperty(i.prototype,"width",{get:function(){return this.Kk},set:function(t){if(!oM(t,16))throw new b("Provided width does not fit in 16 bits.");this.Kk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"height",{get:function(){return this.Jk},set:function(t){if(!oM(t,16))throw new b("Provided height does not fit in 16 bits.");this.Jk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.SC},set:function(t){if(!oM(E(t,16),32))throw new b("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.SC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.IC},set:function(t){if(!oM(E(t,16),32))throw new b("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.IC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"compressorName",{get:function(){return this.EC},set:function(t){if(t.length>31)throw new b("The provided compressorName should at most be 31 characters long.");this.EC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"frameCount",{get:function(){return this.bC},set:function(t){if(!oM(t,16))throw new b("Provided frameCount does not fit in 16 bits.");this.bC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"depth",{get:function(){return this.LC},set:function(t){if(!oM(t,16))throw new b("Provided depth does not fit in 16 bits.");this.LC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,h;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(h=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==h?h:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(E(this.horizontalResolution,16),32),i.writer.writeUInt(E(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&aM(i.writer,this.extra)},i}(BM);r(),r();!function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}_n(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof T?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof T?i.concat(Jr.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(Lt);r();!function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}_n(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(RM);r();!function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}_n(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(ZT);r();!function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}_n(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(BM);r(),r();!function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}_n(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(ro);r();!function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}_.defineProperty(t.prototype,"version",{get:function(){return this.kC},set:function(t){if(!oM(t,8))throw new b("Provided version does not fit in 8 bits.");this.kC=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"profileIndication",{get:function(){return this.xC},set:function(t){if(!oM(t,8))throw new b("Provided profileIndication does not fit in 8 bits.");this.xC=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.OC},set:function(t){if(!oM(t,8))throw new b("Provided profileCompatibility does not fit in 8 bits.");this.OC=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"levelIndication",{get:function(){return this.jC},set:function(t){if(!oM(t,8))throw new b("Provided levelIndication does not fit in 8 bits.");this.jC=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"spsSets",{get:function(){return this.zC},set:function(t){if(!oM(t.length,5))throw new b("Provided number of spsSets exceeds the max (32)");this.zC=t},enumerable:!1,configurable:!0}),_.defineProperty(t.prototype,"ppsSets",{get:function(){return this.BC},set:function(t){if(!oM(t.length,8))throw new b("Provided number of ppsSets exceeds the max (256)");this.BC=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,i){return t+i.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,i){return t+i.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(Jr.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var h=r[n];t.writer.writeUInt(h.length,16),t.concat(Jr.from(h))}}}();r();!function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h=t.call(this,"avc1",i,e,n)||this;return h.configurationBox=s,h.bitrateBox=r,h}_n(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(ZT);r();!function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}_n(i,t),_.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.nk},set:function(t){if(!oM(t,32))throw new b("Provided bufferSizeDb does not fit in 32 bits.");this.nk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"max",{get:function(){return this.RC},set:function(t){if(!oM(t,32))throw new b("Provided max does not fit in 32 bits.");this.RC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"avg",{get:function(){return this.UC},set:function(t){if(!oM(t,32))throw new b("Provided avg does not fit in 32 bits.");this.UC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(ro);r(),r(),r();var KT=function(t){function i(i,e){var s,n,r,h,o=this;if(o=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new b("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return o.kId=e.kId,o.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?o.perSampleIvSize=e.perSampleIvSize:o.constantIv=null!==(h=e.constantIv)&&void 0!==h?h:new T(0),o}return _n(i,t),_.defineProperty(i.prototype,"isProtected",{get:function(){return this.QC},set:function(t){if(!oM(t,8))throw new b("Provided isProtected does not fit in 1 byte.");this.QC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.FC},set:function(t){if(![8,16].includes(t))throw new b("Provided perSampleIvSize does not match any allowed value [8, 16].");this.FC=t,this.YC=new T(0)},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"kId",{get:function(){return this.GC},set:function(t){if(16!==t.length)throw new b("Provided kId length is not 16.");this.GC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"constantIv",{get:function(){return this.YC},set:function(t){if(![8,16].includes(t.length))throw new b("Provided constant IV length does not match any allowed value [8, 16].");this.YC=t,this.FC=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),aM(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),aM(t.writer,this.constantIv))},i}(Lt),JT=(function(t){function i(i){return t.call(this,0,i)||this}_n(i,t)}(KT),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return _n(i,t),_.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.VC},set:function(t){if(!oM(t,4))throw new b("Provided cryptByteBlocks does not fit in 4 bits.");this.VC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.WC},set:function(t){if(!oM(t,4))throw new b("Provided skipByteBlocks does not fit in 4 bits.");this.WC=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(KT));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new JT(i),e}_n(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(dT);function $T(t){return void 0!==t.iv}function tN(t){return void 0!==t.subsamples}r();!function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}_n(i,t),_.defineProperty(i.prototype,"samples",{get:function(){return this.hC},set:function(t){var i;if(!oM(t.length,32))throw new b("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if($T(n)&&![8,16].includes(n.iv.length))throw new b("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=tN(n)),!0===i&&!tN(n)||!1===i&&tN(n))throw new b("Mix of samples with and without subsamples detected.");if(tN(n)){if(!oM(n.subsamples.length,16))throw new b("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];if(!oM(o.clearData,16))throw new b("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!oM(o.protectedData,23))throw new b("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.hC=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];$T(n)&&(i+=n.iv.length),tN(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if($T(n)&&aM(i.writer,n.iv),tN(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];i.writer.writeUInt(o.clearData,16),i.writer.writeUInt(o.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}}(Lt);r(),r();!function(t){function i(i,e,s,n,r){var h=t.call(this,"emsg",0,0)||this;return h.schemeIdUri=i,h.value=e,h.data=r,h.id=s,h.timescale=n.timescale,h.presentationTimeDelta=n.presentationTimeDelta,h.eventDuration=n.eventDuration,h}_n(i,t),_.defineProperty(i.prototype,"timescale",{get:function(){return this.jk},set:function(t){if(!oM(t,32))throw new b("The provided timescale does not fit in 32 bits.");this.jk=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.HC},set:function(t){if(!oM(t,32))throw new b("The provided presentationTimeDelta does not fit in 32 bits.");this.HC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"eventDuration",{get:function(){return this.qC},set:function(t){if(!oM(t,32))throw new b("The provided eventDuration does not fit in 32 bits.");this.qC=t},enumerable:!1,configurable:!0}),_.defineProperty(i.prototype,"id",{get:function(){return this.NN},set:function(t){if(!oM(t,32))throw new b("The provided id does not fit in 32 bits.");this.NN=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(Jr.from(this.data))}}(Lt);r(),r(),r();var iN=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new hM,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function eN(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=bM(e,s);if(!n.complete)return;if(fo(n.box,i))return n.box}}(new IM(NM(e),new SM),t);if(!s)throw new b("".concat(t," box not found"));return i(s)}}var sN=eN("moov",CT),nN=eN("sidx",(function(t){var i,e,s=t.data,n=Ea(s.nextUint32()),r=n.version,h=n.flags,o=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new sM(Jr.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),g=d.readUInt(32),w=Boolean(d.readBit()),A=d.readUInt(3),v=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:g,startsWithSap:w,sapType:A,sapDeltaTime:v})}return 0===r?new VT(o,a,i,e,c,h.raw):new WT(o,a,i,e,c,h.raw)})),rN=eN("moof",UT),hN=eN("pssh",Be);function oN(t){return function(t){for(var i=new iN,e=0,s=Io(t);e<s.length;e++){var n=s[e];fo(n,"ftyp")?i.boxes.push(XM(n)):fo(n,"styp")?i.boxes.push(qT(n)):fo(n,"moov")?i.boxes.push(CT(n)):fo(n,"moof")?i.boxes.push(UT(n)):fo(n,"mdat")?i.boxes.push(rT(n)):i.boxes.push(Uh(n))}return i}(new IM(NM(t),new SM))}var aN=class extends i{get XC(){return this.Id}get ZC(){return this.KC.expiration}get JC(){return this.$C}get tx(){return this.KC.sessionId}Ws(){if(this.ix)return this.Id;const t=[];return t.push(Promise.resolve(this.KC.close())),t.push(be(1e3)),this.sx.l_(Promise.race(t).catch(uN)),this.ix=!0,this.Id}nx(t,i,e){if(li.KE){const t=hN(ts(i));if(1===t.version){i=new _T(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.KC.generateRequest(t,i)).catch(uN)}$n(t){return Promise.resolve(this.KC.load(t)).catch(uN)}pN(){return Promise.resolve(this.KC.remove()).catch(uN)}Qn(t){return Promise.resolve(this.KC.update(t)).catch(uN)}hx(){this.$C.kL(),this.KC.keyStatuses.forEach(((t,i)=>{this.ox(i,t)})),this.Co(new Ze(this))}ox(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=ts(t);if(this.fm===xw&&16===e.byteLength){let t=Ao(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.fm===xw&&"status-pending"===i&&(i="usable"),this.$C.LL(e,i)}constructor(t,i){super(),this.KC=t,this.fm=i,this.ix=!1,this.ux=()=>{this.hx()},this.lx=t=>{this.Co(new bs(this,t.messageType,Ky(this.fm,t.message)))},this._x=()=>{this.ix=!0,this.$C.ey>0&&(this.$C.kL(),this.Co(new Ze(this))),this.KC.removeEventListener("keystatuseschange",this.ux),this.KC.removeEventListener("message",this.lx)},this.KC.addEventListener("keystatuseschange",this.ux),this.KC.addEventListener("message",this.lx),this.$C=new Bs;const e=[];this.KC.closed&&e.push(Promise.resolve(this.KC.closed)),this.sx=new No,e.push(this.sx.OL),this.Id=Promise.race(e).then(this._x,this._x),this.hx()}};function uN(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|C(e[1],16))}throw new $t(t.message,void 0,i,t)}var cN=class{async gx(t){return new aN(this.wx.createSession(t),this.dm)}Ax(t){return Promise.resolve(this.wx.setServerCertificate(t))}bn(t){return Promise.resolve(t.setMediaKeys(this.wx))}vx(t){return Promise.resolve(t.setMediaKeys(null))}Zn(){return Promise.resolve()}constructor(t,i,e){this.wx=t,this.dm=i,this.wd=e}},lN=class{get dm(){return this.mx.keySystem}async yx(){const t=await this.mx.createMediaKeys();return new cN(t,this.fm,this.Mx)}Tx(){return this.Mx}constructor(t,i,e){this.mx=t,this.fm=i,this.Mx=e}};r();var dN=li.ob&&li.fb>=42||li.jb&&li.Pb>=38||li.Ib||li.kb||li.Yb&&li.Vb>=29;function fN(t,i){return Va(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[oe({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[oe({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function _N(){return void 0!==nd&&"function"==typeof nd.requestMediaKeySystemAccess}function wu(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var gN=class{Nx(){return this.Dx(Uy)}Sx(){return this.Dx(Yy)}Ix(){return this.Dx(Za)}Ex(){return this.Dx(Qy)}Dx(t){const i=t.wL,e=this.bx.get(i);if(e)return e;const s=this.Lx(t,'video/mp4; codecs="avc1.42000a"');return this.bx.set(i,s),s}async Lx(t,i){try{return await this.Cx.kx(t.fL,[fN(i,!0)]),!0}catch(e){try{return await this.Cx.kx(t.fL,[fN(i,!1)]),!0}catch(t){return!1}}}xx(){return this.Ox||(this.Ox=this.jx()),this.Ox}async jx(){return"https:"!==Py.protocol&&(!!dN&&!await this.Sx())}constructor(t){this.bx=Qt(),this.Ox=void 0,this.Cx=t}};function wN(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,zx:s.zx};let h=!1;if(s.audioCapabilities){const o=s.audioCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.audioCapabilities=o.filter((s=>AN(t,i,e,s))),h=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const o=s.videoCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.videoCapabilities=o.filter((s=>AN(t,i,e,s))),h=!0,r.videoCapabilities.length&&(n=!0))}return h||(n=t(e,"video/mp4")),n?r:void 0}function AN(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!na(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,Cp(s.contentType))}function vN(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function mN(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function pN(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(yN))||!(!t.videoCapabilities||!t.videoCapabilities.some(yN))}function yN(t){return!t.robustness}function MN(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(oe({},s,{robustness:i}));return e}r();var TN=class{async kx(t,i){i=i.filter((t=>!t.zx));for(const t of i)t.audioCapabilities&&(t.audioCapabilities=mN(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=mN(t.videoCapabilities));if(t===jw&&i.some(pN)){const e=i.map((t=>function(t,i){return oe({},t,{videoCapabilities:t.videoCapabilities?MN(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?MN(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO")));try{const i=await nd.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new lN(i,t,s)}catch(t){}}const e=await nd.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new lN(e,t,s)}static Px(){return _N()}};r(),r(),r(),r();var NN=class extends i{get tx(){return this.Bx&&this.Bx.sessionId||""}get ZC(){return NaN}get XC(){return this.Rx.OL}get JC(){return this.Ux}async nx(t,i,e){this.Qx(),this.Fx=new No,this.gx(ts(i),e),await this.Fx.OL}gx(t,i){if(!t)throw new k("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready.Yx;let s;return s=i?this.Gx.createSession(this.Vx,t,e):this.Gx.createSession(this.Vx,t),s.addEventListener("mskeyclose",this._x),s.addEventListener("mskeymessage",this.Wx),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.Hx),this.Bx=s,this.qx("status-pending"),s}async $n(t){return this.Qx(),!0}async Qn(t){if(this.Xx=new No,this.Qx(),!this.Bx)return Promise.resolve();const i=ts(t);if(0===i.byteLength)throw new k("Cannot call update with an empty response.");this.Bx.update(i),await this.Xx.OL}Ws(){return!this.ix&&this.Bx&&(this.ix=!0,this.Bx.close()),this.Rx.OL}async pN(){this.Qx()}Qx(){if(this.ix)throw new k("Already closing or closed.")}qx(t){this.Ux.kL(),this.Ux.LL(je,t),this.Co(new Ze(this))}constructor(t,i){super(),this.Gx=t,this.Vx=i,this.ix=!1,this.Xx=void 0,this.Fx=void 0,this.Bx=void 0,this._x=()=>{this.ix=!0,this.Rx.CL(void 0),this.Bx&&(this.Bx.removeEventListener("mskeyclose",this._x),this.Bx.removeEventListener("mskeymessage",this.Wx),this.Bx.removeEventListener("mskeyerror",this.Ss),this.Bx.removeEventListener("mskeyadded",this.Hx))},this.Wx=t=>{this.Fx&&(this.Fx.CL(void 0),this.Fx=void 0),this.Co(new bs(this,"license-request",Pe(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.Bx&&this.Bx.error;if(!t)return;const i=new $t("Unknown CDM error",t.code,t.systemCode);if(this.Fx)this.Fx.xL(i),this.Fx=void 0;else if(this.Xx)this.Xx.xL(i),this.Xx=void 0;else switch(i.jL){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.qx("output-not-allowed");break;default:this.qx("internal-error")}},this.Hx=()=>{this.Fx&&(this.qx("usable"),this.Fx.CL(void 0),this.Fx=void 0),this.Xx&&(this.qx("usable"),this.Xx.CL(void 0),this.Xx=void 0)},this.Rx=new No,this.Ux=new Bs}},DN=class{async gx(t){return new NN(this.Gx,this.Vx)}Ax(t){return Promise.resolve(!1)}bn(t){const i=()=>{t.msSetMediaKeys(this.Gx),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.Gx):t.addEventListener("loadedmetadata",i),Promise.resolve()}vx(t){return Promise.resolve()}Zn(){return Promise.resolve()}constructor(t,i,e){this.Gx=t,this.dm=i,this.wd=e;const s=vN(e)||"video/mp4";this.Vx=Cp(s)}},SN=class{get dm(){return this.fm}Tx(){return this.Zx}yx(){const t=new Ys.MSMediaKeys(this.fm);return Promise.resolve(new DN(t,this.fm,this.Zx))}constructor(t,i){this.fm=t,this.Zx=i}},IN=class{kx(t,i){try{return Promise.resolve(function(t,i){if(!EN())throw new k("Unsupported key system "+t);for(let e of i){let i=wN(bN,Wy,t,e);if(i)return new SN(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static Px(){return EN()}};function EN(){return void 0!==Ys.MSMediaKeys&&"function"==typeof Ys.MSMediaKeys.isTypeSupported}function bN(t,i){return Ys.MSMediaKeys.isTypeSupported(t,i)}r(),r(),r(),r();var LN=class extends i{get tx(){return this.Kx?this.Kx.sessionId:""}get ZC(){return NaN}get XC(){return this.Rx.OL}get JC(){return this.Ux}nx(t,i,e){const s=e&&e.fairplay&&e.fairplay.Jx;if(!s)throw new k("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=wa(t),n=2*s.length,r=2*i.length;let h=new ArrayBuffer(4+n+4+r+4+e.byteLength),o=new DataView(h),a=new Vr;return eu(o,a,n,!0),BA(o,a,s,!0),eu(o,a,r,!0),BA(o,a,i,!0),eu(o,a,e.byteLength,!0),DA(o,a,e),new T(h)}(ts(i),s,this.$x);return this.Kx=this.tO.createSession(this.Vx,n),this.Kx.addEventListener("webkitkeymessage",this.Wx,!1),this.Kx.addEventListener("webkitkeyadded",this.Hx,!1),this.Kx.addEventListener("webkitkeyerror",this.Ss,!1),this.qx("status-pending"),this.iO.CL(this.Kx),this.iO=new No,Promise.resolve()}$n(t){return Promise.resolve(!0)}async Qn(t){const i=ts(t);if(0===i.byteLength)throw new k("Cannot call update with an empty response.");this.eO=new No;(this.Kx||await this.iO.OL).update(i),await this.eO.OL}Ws(){var t;const i=this.Kx;return i&&(i.removeEventListener("webkitkeymessage",this.Wx,!1),i.removeEventListener("webkitkeyadded",this.Hx,!1),i.removeEventListener("webkitkeyerror",this.Ss,!1),i.close()),this.iO.c_(),null==(t=this.eO)||t.c_(),this.Rx.CL(void 0),this.Rx.OL}pN(){return Promise.resolve(void 0)}qx(t){this.Ux.kL(),this.Ux.LL(je,t),this.Co(new Ze(this))}constructor(t,i,e){super(),this.tO=t,this.Vx=i,this.$x=e,this.Rx=new No,this.eO=void 0,this.Ux=new Bs,this.Kx=void 0,this.iO=new No,this.Ss=()=>{const t=this.Kx&&this.Kx.error;if(!t)return;const i=new $t("Unknown CDM error",t.code,t.systemCode);this.eO?(this.eO.xL(i),this.eO=void 0):i.jL===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.qx("output-not-allowed"):this.qx("internal-error"),this.Co(new qy)},this.Wx=t=>{this.Co(new bs(this,"license-request",Pe(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.Hx=()=>{this.eO&&(this.eO.CL(void 0),this.eO=void 0),this.qx("usable")}}};var kN=class{getInternalMediaKeys(){return this.tO}async gx(t){if(!this.$x)throw new ce(le.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new LN(this.tO,this.Vx,this.$x)}Ax(t){return this.$x=ts(t),Promise.resolve(!0)}bn(t){return t.webkitSetMediaKeys(this.tO),Promise.resolve()}vx(t){return t.webkitSetMediaKeys(null),Promise.resolve()}Zn(){return Promise.resolve()}constructor(t,i,e){this.tO=t,this.dm=i,this.wd=e,this.$x=void 0;const s=vN(e)||"video/mp4";this.Vx=Cp(s)}},CN=class{get dm(){return this.fm}Tx(){return this.Zx}yx(){const t=new Ys.WebKitMediaKeys(this.fm);return Promise.resolve(new kN(t,this.fm,this.Zx))}constructor(t,i){this.fm=t,this.Zx=i}},xN=class{kx(t,i){try{return Promise.resolve(function(t,i){if(t!==Bw)throw new k(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!ON())throw new k("Unsupported key system "+t);for(let e of i){let i=wN(jN,Hy,t,e);if(i)return new CN(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static Px(){return ON()}};function ON(){return void 0!==Ys.WebKitMediaKeys&&"function"==typeof Ys.WebKitMediaKeys.isTypeSupported}function jN(t,i){return Ys.WebKitMediaKeys.isTypeSupported(t,i)}r();var zN=class{async kx(t,i){for(let e of this.sO)try{return await e.kx(t,i)}catch(t){}throw new k("Unsupported key system configuration for "+t)}constructor(t){this.sO=t}};r(),r(),r(),r(),r();var Vi=class{nO(t,i){return new Promise((e=>{const s=new Po;s.l_(this.rO.a_),i&&s.l_(i);const n=()=>{s.e_()};this.hO.push((()=>{const i=PN(t,s.a_);return e(i),i.then(n,n)})),this.oO||(this.oO=this.aO())}))}c_(){return this.uO(!0)}gn(){return this.cO=void 0,this.uO(!1)}uO(t){const i=this.oO;return this.rO.c_(),t&&(this.rO=new Po),Promise.resolve(i)}constructor(t){this.hO=[],this.oO=void 0,this.rO=new Po,this.aO=()=>{if(0===this.hO.length)return this.cO?PN(this.cO,this.rO.a_).then(this.lO,this.lO):this.lO();return this.hO.shift()().then(this.aO)},this.lO=()=>{if(0!==this.hO.length)return this.aO();this.oO=void 0},this.cO=t}};function PN(t,i){return new Promise((e=>e(t(i))))}var BN,RN=new Vi,UN=class extends i{dO(){this.eO&&(this.qx("usable"),this.eO.CL(void 0),this.eO=void 0)}fO(t){const i=new $t("Unknown CDM error",t.errorCode,t.systemCode);this.eO?(this.eO.xL(i),this.eO=void 0):this.Fx?(this.Fx.xL(i),this.Fx=void 0):i.jL===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.qx("output-restricted"):1===i.zL?this.qx("expired"):this.qx("internal-error")}_O(t){0!==t.message.byteLength&&(this.Fx&&(this.Fx.CL(void 0),this.Fx=void 0),this.Co(new bs(this,"license-request",Ky(this.fm,Pe(t.message).buffer),t.defaultURL||void 0)))}gO(t){this.wO||(this.wO=t,this.AO.CL(t))}get JC(){return this.vO}get tx(){return this.mO}set tx(t){this.mO=t}get XC(){return this.Rx.OL}get ZC(){return NaN}async Ws(){this.throwIfClosed(),this.eO&&(this.eO.xL(void 0),this.eO=void 0),this.WL=!0,this.Rx.CL(void 0)}async nx(t,i){this.throwIfClosed(),this.Fx=new No,this.pO=ts(i);(this.wO||await this.AO.OL).webkitGenerateKeyRequest(this.fm,this.pO),await this.Fx.OL}async $n(t){return this.throwIfClosed(),!1}async pN(){this.throwIfClosed()}async Qn(t){if(this.throwIfClosed(),this.eO=new No,li.Tb||li.mb)return RN.nO((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.eO)return;(this.wO||await this.AO.OL).webkitAddKey(this.fm,ts(t),this.pO,this.tx),await this.eO.OL}throwIfClosed(){if(this.WL)throw new k("Already closing or closed.")}qx(t){this.vO.kL(),this.vO.LL(je,t),this.Co(new Ze(this))}async yO(){const t=this.wO||await this.AO.OL;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.fm,this.mO)}catch(t){}finally{await be(500)}}constructor(t){super(),this.fm=t,this.Fx=void 0,this.eO=void 0,this.WL=!1,this.pO=void 0,this.wO=void 0,this.Rx=new No,this.mO="",this.AO=new No,this.vO=new Bs}},QN=class{bn(t){return this.wO=t,this.wO.addEventListener("webkitkeyadded",this.Hx),this.wO.addEventListener("webkitkeyerror",this.MO),this.wO.addEventListener("webkitkeymessage",this.TO),this.DO.forEach(((i,e)=>i.gO(t))),this.SO.forEach((i=>i.gO(t))),Promise.resolve()}vx(t){return t.removeEventListener("webkitkeyadded",this.Hx),t.removeEventListener("webkitkeyerror",this.MO),t.removeEventListener("webkitkeymessage",this.TO),this.wO=void 0,Promise.resolve()}async Zn(){let t=this.DO.entries(),i=t.next();for(;!i.done;)await i.value[1].yO(),i=t.next();this.DO.clear()}async gx(t,i,e){const s=new UN(this.dm);return this.wO&&s.gO(this.wO),this.SO.push(s),s}Ax(t){return Promise.resolve(!1)}IO(t){if(!t)return;let i=this.DO.get(t);return i||(i=this.SO.shift(),i?(i.tx=t,this.DO.set(t,i),i):void 0)}constructor(t,i){this.dm=t,this.wd=i,this.wO=void 0,this.DO=Qt(),this.SO=[],this.Hx=t=>{const i=this.IO(t.sessionId);i&&i.dO()},this.MO=t=>{const i=this.IO(t.sessionId);i&&i.fO(t)},this.TO=t=>{const i=this.IO(t.sessionId);i&&i._O(t)}}},FN=class{yx(){return Promise.resolve(new QN(this.dm,this.EO))}Tx(){return this.EO}constructor(t,i){this.dm=t,this.EO=i}};function ei(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function en(t){if(!t)return;let i;for(;j_(i=t.firstChild);)t.removeChild(i)}function YN(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function GN(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function VN(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+YN(t)+" ").indexOf(" "+i+" ")}function $u(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=YN(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&GN(t,(e+" "+i).trim())}}function WN(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+YN(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");GN(t,e.trim())}}function HN(t,i,e){void 0===e&&(e=!VN(t,i)),e?$u(t,i):WN(t,i)}function qN(t){t.stopPropagation()}function XN(t,i){li.mb&&li.yb<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function un(t,i){const e=i.style;if(e)for(const i of _.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function ia(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function ZN(t){t.removeAttribute("title")}function KN(t){t.addEventListener("mouseover",(t=>{ZN(t.target)}))}function JN(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}function an(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}function Fs(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function $N(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function tD(){return void 0!==h?h.createElement("video"):void 0}function Ue(){return BN||(BN=tD()),BN}r(),r();var iD,wt,eD=class{kx(t,i){try{return Promise.resolve(function(t,i){if(!eD.Px())throw new k("Unsupported key system "+t);for(let e of i){let i=wN(sD,Wy,t,e);if(i)return new FN(t,i)}throw new k("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static Px(){return wu()}};function sD(t,i){const e=Ue();return!(!e||!e.canPlayType||""===e.canPlayType(i,t))}function nD(){return iD||(iD=function(){const t=[];xN.Px()&&t.push(new xN);TN.Px()&&t.push(new TN);IN.Px()&&t.push(new IN);eD.Px()&&t.push(new eD);return new zN(t)}()),iD}r(),r(),function(t){t[t.bO=0]="bO",t[t.LO=1]="LO"}(wt||(wt={})),r(),r();var wc=class extends gg{constructor(t){super(qo.Mv),this.currentTime=t}};r();var Hr=class extends gg{constructor(t){super(qo.Tv),this.currentTime=t}},rD=[qo.Mw,qo.Tv,t.jh,t.Sh],Su=class extends i{kO(t){!this.CO&&t>=rv.Gn&&(this.CO=!0,this.Co(new ns(this.xO.j_,t)))}OO(t){!this.jO&&t>=rv.iN&&(this.jO=!0,this.Co(new ms(this.xO.j_,t)))}zO(t){this.PO||(t>=rv.eN&&this.BO<rv.eN&&!this.xO.hg||this.RO&&t>=rv.eN)&&this.Co(new Hr(this.xO.j_))}UO(t){!this.QO(t)||this.xO.R_||this.xO.lt||this.Co(new wc(this.xO.j_))}FO(t){this.BO<=rv.iN&&t>=rv.eN&&this.Co(new Ct(this.xO.j_,t))}maybeDispatchCanPlayThroughEvent(t){t===rv.sN&&this.Co(new cs(this.xO.j_,t))}QO(t){const i=!this.xO.hg&&t<=rv.iN,e=!this.YO&&this.BO<=rv.iN;return i&&!e}get RO(){return!this.xO.hg&&this.YO}Zn(){this.BO=rv.tN,this.YO=!0,this.jO=!1,this.CO=!1}gn(){this.Vo(),this.PO&&this.xO.fn(qo.Tv,this.GO),this.xO.fn(t.jh,this.VO),this.xO.fn(t.Sh,this.WO),this.xO.fn(qo.Mw,this.HO)}constructor(i,e=!1){super(),this.xO=i,this.PO=e,this.BO=rv.tN,this.YO=!0,this.jO=!1,this.CO=!1,this.HO=t=>{const i=this.xO.vg;i!==this.BO&&this.Co(new ds(t.currentTime,i)),i===rv.tN&&(this.jO=!1,this.CO=!1),this.kO(i),this.OO(i),this.FO(i),this.maybeDispatchCanPlayThroughEvent(i),this.zO(i),this.UO(i),this.BO=i},this.VO=()=>{this.UO(this.BO),this.zO(this.BO),this.YO=this.xO.hg},this.WO=()=>{this.YO=this.xO.hg},this.GO=t=>{this.Co(new Hr(t.currentTime))},this.xO.yn(qo.Mw,this.HO),this.xO.yn(t.jh,this.VO),this.xO.yn(t.Sh,this.WO),this.PO&&this.xO.yn(qo.Tv,this.GO)}},hD=class extends i{get j_(){return this.xO.j_}get R_(){return this.xO.R_}get lt(){return this.xO.lt}get hg(){return this.xO.hg}get vg(){return this.xO.vg}e_(){this.Vo(),this.xO.fn(rD,this.Ds)}constructor(t){super(),this.xO=t,this.xO.yn(rD,this.Ds)}};r(),r(),r(),r();var Is=class{qO(){return this.XO}ZO(t){this.XO=t}get KO(){return this.dE}get JO(){return!1}get $O(){const t=this.tj.certificate;if(t)return ae(t)?mi(t):ts(t)}ij(){return this.tj.licenseAcquisitionURL||this.qO()}get ej(){return!1}sj(t){return Promise.resolve()}nj(t,i){return Promise.resolve(void 0)}get hE(){return Boolean(this.tj.useCredentials)}async rj(t,i,e,s){const n=this.hj(t,i,e,s);if(""===n.zu)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.KO.mI(n);return await t.aj(i)}catch(t){return yo(t),void await this.uj(t,n.zu,s)}}hj(t,i,e,s){const n=this.cj().BI(),r=this.hE,h={zu:this.lj(),eE:i,tE:n,$I:t,hE:r,iE:Kc.POST,NI:0,a_:s,hA:zu.GI,nE:e};return new nc(h)}dj(t,i){return Promise.resolve(t)}_j(t,i,e,s){return Promise.resolve(t)}cj(){return new Ko(this.tj.headers||{})}async uj(t,i,e){throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}lj(t,i){let e=i;const s=this.tj.queryParameters;if(!e){const t=this.ij();if(!t)return"";e=t}if(s||t){const i=ag.Dh(e);t&&Gc(i,t),s&&Gc(i,s),e=i.href}return e}gj(t,i){return oD(t)}wj(t){return new T(t)}async Aj(t,i,e){const s=await this.gj(t,e),n=await this.rj(s,this.vj,i,e);return this.wj(n)}gn(){}constructor(t,i,e,s,n){this.XO=void 0,this.dm=t,this.mj=i,this.pj=e,this.dE=s,this.vj=n,this.tj=this.yj(i)}};function oD(t){return Promise.resolve(Pe(t).buffer)}var Wu,Zs=class extends Is{yj(t){return t.widevine||{}}async Mj(t,i){return this.$O?this.$O:this.Tj(new T(t),i)}Tj(t,i){return super.Aj(t,jo.qI,i)}constructor(t,i,e,s){super(Uy,t,i,e,s)}};r(),function(t){t.qv="Widevine",t.Nj="PlayreadyV2",t.Dj="PlayreadyV3",t.Hv="PlayreadyV2",t.Xv="Fairplay"}(Wu||(Wu={}));var aD={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function uD(t,i){var e,s,n,r;const h=aD[i],o=t.accountName;return{CustomerName:t.customerName,AccountName:o,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(e=ag.Sj)?void 0:e.Ys,OSVersion:null==(s=ag.Sj)?void 0:s.Ij,DRMProvider:h.DRMProvider,DRMVersion:h.DRMVersion,DRMType:h.DRMType,DeviceVendor:null==(n=ag.Sj)?void 0:n.Ej,DeviceModel:null==(r=ag.Sj)?void 0:r.bj}}}function cD(t,i){if(!t.accountName)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function lD(t,i,e){let s;if(dv(t))s={AuthToken:t.authToken,Payload:i};else{if(!fv(t))throw cD(t,e);s={LatensRegistration:uD(t,e),Payload:i}}return _a(JSON.stringify(s))}async function dD(t,i,e){const s=t.yI;if(!s)throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,h;try{r=await n.Lj(e),h=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){h=""}throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.mI.zu,n.TI,n.Cj,h)}r();var fD=class extends Zs{static xj(){return ag.Ys.Oj?"required":"optional"}uj(t,i,e){return dD(t,i,e)}sj(t){return this.jj?hl(this.jj.OL,t):(this.jj=new No,Promise.resolve())}async gj(t,i){const e=this.mj;if(!e)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return lD(e,Fh(t),Wu.qv)}wj(t){let i;if(!t.license)throw new Yr(le.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=mi(t.license),i}zj(t){return Promise.resolve(new T(t))}async Mj(t,i){this.Pj();const e=await this.gj(t,i),s=await this.rj(e,nr.OI,jo.XI,i);return await this.zj(s)}async Tj(t,i){const e=await super.Tj(t,i);return this.Pj(),e}Pj(){this.jj||(this.jj=new No),this.jj.CL()}gn(){this.jj&&this.jj.c_(),super.gn()}constructor(t,i,e){super(t,i,e,nr.jI),this.jj=void 0}};r();var _D=class extends Zs{get Bj(){if(Jh(this.mj))return this.mj.token}async gj(t,i){const e=await oD(t),s=this.pj,n=GA(new T(e)),r=this.Bj;if(!r)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,nr.OI),this.ZO("https://widevine-proxy.drm.technology/proxy")}};function gD(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=oe({},e,{SessionId:t.sessionId,Ticket:t.ticket})),oe({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}r(),r();var wD=class extends Zs{lj(t,i){let e=t;return cv(this.mj)&&(e=gD(this.mj,e)),super.lj(e,i)}constructor(t,i,e){super(t,i,e,nr.OI),this.ZO("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}};r(),r();var AD="Conax-Custom-Data";function vD(t,i,e){const s=t&&uv(t)&&t;if(s&&!e.has(AD)){const t=Nw(s)?s.token:void 0,n=Nw(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(AD,r)}return e}var mD=class extends Zs{cj(){const t=super.cj();return vD(this.mj,"Widevine",t)}constructor(t,i,e){super(t,i,e,nr.OI),this.ZO("https://connect.conax.com:8094/license")}};function pD(t){const i=Yi(new T(t));return mi(JSON.parse(i).license)}function yD(t){return"string"==typeof t.token?t.token:_a(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function MD(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}r(),r();var TD=class extends Zs{get Bj(){return yD(this.mj)}wj(t){return pD(t)}cj(){return MD(super.cj(),this.Bj,this.mj)}constructor(t,i,e){super(t,i,e,nr.OI),this.ZO("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}};r();var ND=class extends Zs{cj(){const t=super.cj(),i=this.mj.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,nr.OI)}};async function R(t,i,e,s){if(!_v(t))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new Ko;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const h=t.streamId;let o;o=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:o,streamId:h},u={zu:t.ticketAcquisitionURL,eE:nr.jI,tE:n,iE:Kc.POST,$I:JSON.stringify(a),a_:s},c=await e.mI(u);return await c.Lj()}r(),r();var DD=class extends Zs{cj(){const t=super.cj();return t.set("Content-Type","application/json"),t}async gj(t,i){const e=$w(t.buffer),s=this.mj,n=await R(s,"widevine_modular",this.KO,i);this.ZO(n.licenseServerUrl);const r=ba(JSON.stringify({payload:e,ticket:n.ticket}));return super.gj(r,i)}wj(t){return mi(t.license)}constructor(t,i,e){super(t,i,e,nr.jI)}};r();var SD=class extends Zs{cj(){if(!Uo(this.mj))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.cj();return t.set("X-AxDRM-Message",this.mj.token),t}constructor(t,i,e){super(t,i,e,nr.OI)}};function ID(t){const i=new T(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}r();var Dr=class extends Is{yj(t){return t.playready||{}}cj(){const t=new Ko(this.Rj);return t.UI(super.cj()),t}Uj(t){return t.length>=1&&t[0].lI.length>0}nj(t){const i=this.mj.playready.customData;if(i){const t=ID(i),e=ID('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Fh(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{Yx:e}})}return super.nj(t)}async gj(t,i){const e=await oD(t);return this.Qj(e)}async Qj(t){var i,e;let s=null;const n=Sa(new DataView(t),new Vr,!0);let r;try{r=ag.oI(n)}catch(t){return s}const h=null==(i=r.nI("PlayReadyKeyMessage")[0])?void 0:i.nI("LicenseAcquisition")[0];var o;const a=null!=(o=null==h?void 0:h.nI("Challenge"))?o:[];this.Uj(a)&&(s=Ta(a[0].Fj));const u=new Ko;var c;const l=null!=(c=null==(e=null==h?void 0:h.nI("HttpHeaders")[0])?void 0:e.nI("HttpHeader"))?c:[];for(const t of l){const i=t.nI("name")[0].Fj,e=t.nI("value")[0].Fj;u.append(i,e)}return this.Rj=u,s}Mj(t,i){return Promise.resolve(t)}Tj(t,i){return super.Aj(t,jo.ZI,i)}constructor(t,i,e){super(Za,t,i,e,nr.OI),this.Rj=void 0}};r(),r();var pt=class t{static Yj(t){return"3"===t.version?Wu.Dj:Wu.Nj}Gj(){const t={};if(this.kC===Wu.Dj){const i={LatensRegistration:uD(this.Vj,Wu.Dj)};t["X-TITANIUM-DRM-CDATA"]=_a(JSON.stringify(i))}return t}get Wj(){return this.kC}get zx(){return this.kC===Wu.Nj}constructor(i){this.Vj=i,this.kC=t.Yj(i)}};var ED=class extends Dr{nj(t){const i=this.mj;if(!this.mj)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(fv(i)){const t={};return t.playready={Yx:bD(i,this.Hj.Wj)},Promise.resolve(t)}return Promise.reject(cD(i,Wu.Hv))}cj(){const t=new Ko(this.Hj.Gj());return t.UI(super.cj()),t}async uj(t,i,e){const s=t.yI;if(!s)throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i);let n,r;try{const t=await s.qj(e),i=Yi(new T(t)),o=ag.oI(i);if(o){const t=function(t,i){return function(t,i){const e=t.m.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.m)}return s}(t,(t=>t.Xj===i))}(o,"CustomData");var h;if(t.length>0)n=JSON.parse(t[0].Fj),r=null==(h=n.DrmErr)?void 0:h.desc}}catch(t){}throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,i,s.TI,s.Cj,r)}Uj(t){if(1!==t.length)throw new Yr(le.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this.Hj=new pt(this.mj)}};function bD(t,i){const e=uD(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+_a('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=UA(n,!0);return UA('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Fh(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}r();var LD=class extends Dr{get Bj(){if(Jh(this.mj))return this.mj.token}Uj(t){if(1!==t.length)throw new Yr(le.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}lj(t,i){const e=oe({},t||{},{token:this.Bj});return super.lj(e,i)}constructor(t,i,e){super(t,i,e),this.ZO("https://playready-license.drm.technology/rightsmanager.asmx")}};r();var kD=class extends Dr{lj(t,i){let e=t;return cv(this.mj)&&(e=gD(this.mj,e)),super.lj(e,i)}constructor(t,i,e){super(t,i,e),this.ZO("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}};r();var CD=class extends Dr{cj(){const t=super.cj();return vD(this.mj,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.ZO("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}};r();var xD,OD=class extends Dr{get Bj(){return yD(this.mj)}wj(t){const i=function(t){const i=Yi(new T(t));return Kg(i,"<?xml")?0:1}(t);return 1===i?pD(t):super.wj(new T(t))}cj(){return MD(super.cj(),this.Bj,this.mj)}constructor(t,i,e){super(t,i,e),this.ZO("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};!function(t){t[t.Zj=0]="Zj",t[t.Lj=1]="Lj"}(xD||(xD={})),r();var jD=class extends Dr{cj(){const t=super.cj();return this.Kj&&t.set("Ticket",this.Kj),t.set("Content-Type","text/xml"),t}async gj(t,i){const e=this.mj,s=await R(e,"playready",this.KO,i);return this.ZO(s.licenseServerUrl),this.Kj=s.ticket,super.gj(t,i)}constructor(t,i,e){super(t,i,e)}};r();var Te,zD=class extends Dr{cj(){if(!Uo(this.mj))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.cj();return t.set("X-AxDRM-Message",this.mj.token),t}};r(),r(),function(t){t.jI="application/json",t.Jj="application/x-www-form-urlencoded",t.$j="application/octet-stream",t.Ru="text/plain;charset=UTF-8"}(Te||(Te={}));var Zo=class extends Is{get ej(){return!0}tz(){return this.tj.certificateURL||this.iz}ez(t){this.iz=t}gj(t){return Promise.resolve(this.sz(t,this.nz))}sz(t,i){return"spc="+encodeURIComponent(Fh(t))+"&assetId="+encodeURIComponent(i)}get rz(){return Te.Jj}yj(t){return t.fairplay||{}}oz(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async nj(t){var i;const e=null!=(i=this.cz)?i:wa(new T(t)),s=await this.oz(e);this.nz=s;const n={};return n.fairplay={Jx:s},n}cj(){const t=super.cj();return t.set("Content-Type",this.rz),t}async Mj(t,i){return this.$O?this.$O:await this.lz(i)}Tj(t,i){return super.Aj(t,jo.WI,i)}fz(t){const i=this.tz(),e=this.cj(),s={zu:i,eE:nr.OI,tE:e,iE:Kc.GET,hE:!1,$I:null,NI:0,a_:t,hA:zu.GI,nE:jo.HI};return new nc(s)}async lz(t){const i=this.fz(t),e=await this.KO.mI(i),s=await e.qj();return new T(s)}wj(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=mi(e)}else i=new T(t);return i}lj(t,i){let e=super.lj(t,i);return Kg(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.dm,i,e,s,n),this.nz="",this.iz=void 0,this.cz=t._z}};function PD(t){return!j(t.getTime())}function Yo(){return Date.now()||(new Date).getTime()}function BD(t){return t/1e3}function ge(t){return 1e3*t}r(),r();var Dc=1/6,RD=Se.fromNumber(Da);function B(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(RD))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var UD=class extends Zo{get rz(){return Te.$j}oz(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.oz(t)))}async gj(t){return t}wj(t){return new T(t)}lj(t,i){const e=t||{};return e.p1=Yo(),super.lj(e,i)}constructor(t,i,e,s){super(t,i,e,s,nr.OI)}};r();var QD=class extends Zo{get rz(){return Te.jI}get Bj(){if(!Jh(this.mj))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.mj.token}sz(t,i){const e={token:this.Bj,contentId:i,payload:Fh(t)};return JSON.stringify(e)}wj(t){return new T(t)}cj(){const t=super.cj();return t.set("x-vudrm-token",this.Bj),t}constructor(t,i,e,s){super(t,i,e,s,nr.OI),this.ZO("https://fairplay-license.drm.technology/license"),this.ez("https://fairplay-license.drm.technology/certificate")}};r();var FD="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",YD="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",GD=class extends Zo{wj(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new Yr(le.CONTENT_PROTECTION_LICENSE_INVALID,FD)}if(!i)throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,YD);return i}(Yi(new DataView(t)));return super.wj(i)}constructor(t,i,e,s){super(t,i,e,s,nr.OI)}};r();var VD=class extends Zo{get rz(){return Te.jI}async gj(t){const i=this.mj;if(!i)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return lD(i,Fh(t),Wu.Xv)}wj(t){try{let i;if(ae(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=Ta(i.license);return new T(t)}throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new Yr(le.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}uj(t,i,e){return dD(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,nr.jI)}};r();var WD=class extends Zo{tz(){const t=super.tz();if(!t)return t;const i=ag.Dh(t),e=this.mj;return cv(e)&&Gc(i,{accountId:e.accountId,applicationId:e.applicationId||""}),i.href}oz(t){return cv(this.mj)?Promise.resolve(this.mj.contentId):super.oz(t)}async gj(t){return t}wj(t){return new T(t)}get rz(){return Te.$j}lj(t,i){let e=t;return cv(this.mj)&&(e=function(t,i){return oe({},gD(t,i),{KeyId:t.keyId})}(this.mj,e)),super.lj(e,i)}constructor(t,i,e,s){super(t,i,e,s,nr.OI),this.ZO("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.ez("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}};r();var HD=class extends Zo{cj(){const t=super.cj();return vD(this.mj,"FairPlay",t)}async lz(t){const i={zu:this.tz(),eE:nr.OI,tE:{},iE:Kc.GET,hE:!1,$I:null,NI:0,a_:t,hA:zu.GI,nE:jo.HI},e=await this.KO.mI(i),s=await e.qj();return new T(s)}async gj(t){return t}oz(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return Yi(mi(t))}(e))}return Promise.resolve("unknown")}wj(t){try{const i=JSON.parse(t);return new T(Ta(i.CkcMessage))}catch(t){throw new b("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,nr.Ru),!uv(i))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.ZO("https://connect.conax.com:8097/license")}};r();var qD=class extends Zo{oz(t){return Kg(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new Yr(le.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}sz(t,i){return"spc="+Fh(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,nr.Ru),this.ZO(ZA[Ci.Xv])}};r();var XD=class extends Zo{get Bj(){return yD(this.mj)}sz(t,i){const e="spc="+encodeURIComponent(Fh(t))+"&"+encodeURI(i);return"persistent"===this.tj.licenseType?e+"&offline=true":e}cj(){return MD(super.cj(),this.Bj,this.mj)}constructor(t,i,e,s){super(t,i,e,s,nr.Ru),this.ZO("https://lic.drmtoday.com/license-server-fairplay/")}};r();var ZD=class extends Zo{oz(t){let i=t;return Kg(i,"skd:")&&(i="http:"+i.substring(4)),Kg(i,"http:")||Kg(i,"https:")?Promise.resolve(ag.Dh(i).hostname):Promise.reject(new b("Could not parse ExpressPlay FairPlay content ID."))}async gj(t){return t}wj(t){return new T(t)}get rz(){return Te.$j}constructor(t,i,e,s){super(t,i,e,s,nr.OI)}};r();var KD=class extends Zo{cj(){const t=super.cj(),i=this.mj.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,nr.Ru)}};r();var JD=class extends Zo{async lz(t){const i=this.tz(),e=this.cj(),s={zu:i,eE:nr.jI,tE:e,iE:Kc.POST,a_:t,hA:zu.GI,nE:jo.HI},n=await this.KO.mI(s),r=await n.Lj();return new T(mi(r.certificate))}get rz(){return Te.jI}async Tj(t,i,e){void 0===e&&(e=nr.Ru);const s=Fh(t),n=this.mj,r=await R(n,"fairplay",this.KO,i),h=ba(JSON.stringify({spc:s,ticket:r.ticket})),o={zu:this.ij(),eE:nr.jI,tE:this.cj(),iE:Kc.POST,$I:h,NI:0,a_:i,hA:zu.GI,nE:jo.WI},a=await this.KO.mI(o);return mi((await a.Lj()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,nr.jI),!_v(i))throw new b("Invalid Xstream DRM configuration")}};r();var $D=class extends Zo{sz(t,i){return Fh(t)}wj(t){if(0===t.length)throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.wj(t)}cj(){const t=super.cj();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,nr.Ru)}};r();var tS=class extends Zo{get rz(){return Te.jI}sz(t,i){return t}wj(t){return new T(t)}cj(){if(!Uo(this.mj))throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.cj();return t.set("X-AxDRM-Message",this.mj.token),t}constructor(t,i,e,s){super(t,i,e,s,nr.OI)}};r();var iS=class extends Zo{get rz(){return Te.Ru}sz(t,i){const e={spc:Fh(t)};return JSON.stringify(e)}oz(t){const i=ag.Dh(t);return this.gz=t,i.searchParams.has("b")?Promise.resolve(i.searchParams.get("b")):Promise.reject(new Yr(le.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}lj(t,i){let e=this.ij();return!e&&this.gz&&(e=this.gz),e&&(e=e.replace("skd://","https://")),super.lj(t,i||e)}wj(t){try{let i;if(i=ae(t)?JSON.parse(t.trim()):t,i.ckc)return mi(i.ckc)}catch(t){throw new Yr(le.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,nr.jI),this.gz=void 0}};r(),r(),r();var eS=class{wz(t){return this.Az(t)}vz(t,i){throw new k(i+" must be "+this.mz+". (Received: "+t+")")}constructor(t,i){this.Az=t,this.mz=i}},Ii=(new eS((function(t){return!0}),"any"),new eS(B_,"a number")),pi=new eS(ae,"a string"),sS=new eS(z_,"a boolean"),yh=(new eS(P_,"a date"),new eS(Wo,"undefined")),nS=new eS(lt,"an object"),rS=new eS((function(t){return null===t}),"null");new eS((function(t){return null==t}),"null or undefined");function hS(t,i){throw new k(i+" has an incorrect type")}function xr(t){return{wz(i){if(!lt(i))return!1;for(const e of _.keys(t)){if(!t[e].wz(i[e]))return!1}return!0},vz(i,e){if(!lt(i))throw new k(e+" must be an object.");for(const s of _.keys(t)){const n=t[s];if(!n.wz(i[s]))return n.vz(i[s],e+"."+String(s))}throw new k}}}function oS(t){return _.keys(t).map((i=>t[i]))}function si(t){return{wz:i=>na(t,i),vz:hS}}function Al(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return{wz:t=>i.some((i=>i.wz(t))),vz:hS}}function ki(t){return{wz:i=>Yn(i)&&i.every((i=>t.wz(i))),vz(i,e){if(!Yn(i))throw new k(e+" must be an array.");return i.forEach(((i,s)=>{if(!t.wz(i))return t.vz(i,e+"["+s+"]")})),hS(0,e)}}}function Bu(t){return{wz:i=>lt(i)&&_.keys(i).every((e=>t.wz(i[e]))),vz(i,e){if(!lt(i))throw new k(e+" must be an object.");for(const s of _.keys(i))if(!t.wz(i[s]))return t.vz(i[s],e+"."+s);return hS(0,e)}}}var aS=xr({responseCode:Ii,isException:sS,description:pi,title:pi,correlationId:pi});async function uS(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(ua(e,n)),h=new Ko({});h.append("Content-Type","application/json");const o=Fh(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:o}};return{zu:r,eE:nr.Ru,tE:h,iE:Kc.POST,$I:JSON.stringify(a),a_:s,hA:zu.GI,nE:jo.WI}}(t,i,e,n);return await async function(t,i){const e=await i.mI(t),s=await e.Lj();if(aS.wz(s))throw new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.zu,s.responseCode);return mi(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var cS=class extends Zo{oz(t){const i=t.replace("FairPlay",this.pz.releasePid);return super.oz(i)}async Tj(t,i){return await uS(t,this.pz,this.ij(),this.KO,i)}constructor(t,i,e,s){super(t,i,e,s,nr.OI),this.pz=i}};r();var lS=class extends Is{yj(t){return t.clearkey||{}}async rj(t,i,e,s){const n=this.tj;if(this.ij())return super.rj(t,this.vj,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let i=t;return i||(i={}),{kty:"oct",kid:i.id,k:i.value}}))};return FA(JSON.stringify(t)).buffer}throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}Mj(t,i){return Promise.resolve(new T(0))}async Tj(t,i){const e=await super.Aj(t,jo.KI,i),s=JSON.parse(wa(e));if(s.keys)for(const t of s.keys)t.k&&(t.k=qw(t.k)),t.kid&&(t.kid=qw(t.kid));return FA(JSON.stringify(s))}constructor(t,i,e){super(Yy,t,i,e,nr.OI)}};r();var Z=class extends Zs{};r(),r();var dS={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function fS(t,i,e){const s=AS(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await hl(Promise.resolve(n.call(t,s)),e);return YA(r)?ts(r):wS(oe({},dS,r))}async function _S(t,i,e,s,n){const r=t.onCertificateResponse,h=gS(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return ts(await hl(Promise.resolve(r.call(t,h)),n))}async function J(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=Y(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const h=await hl(Promise.resolve(n.call(t,r)),s);if(YA(h))return ts(h).buffer;return oe({fairplaySkdUrl:void 0},dS,h)}(t,i,e,s);return n instanceof ArrayBuffer?n:wS(n)}async function V(t,i,e,s,n,r){const h=Y(e,n),o=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,h=gS(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const o=await hl(Promise.resolve(r.call(t,h)),n);return ts(o)}(t,new T(i),h,s,r);return ts(o)}function Y(t,i){return oe({},AS(t),{fairplaySkdUrl:i})}function gS(t,i,e){return{url:e._E,status:e.TI,statusText:e.Cj,headers:e.tE.BI(),body:t,request:i}}function wS(t){return new nc({zu:t.url,iE:t.method,tE:t.headers,$I:t.body,hE:t.useCredentials})}function AS(t){var i;return{url:t.zu,body:null!=(i=vS(t.$I))?i:null,headers:t.tE.BI(),method:t.iE,useCredentials:t.hE}}function vS(t){if(t)return"string"==typeof t?FA(t):t instanceof ArrayBuffer?new T(t):ga(t)?xe(t):void 0}var mS=class extends Dr{Mj(t,i){return Promise.resolve(t)}async Tj(t,i){const e=await this.Qj(Pe(t).buffer),s=this.hj(e,nr.OI,jo.ZI,i),n=await J(this.yz,s,void 0,i);if(n instanceof ArrayBuffer)return new T(n);if(""===n.zu)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.KO.mI(n),e=await t.qj(i);return await V(this.yz,e,s,t,void 0,i)}catch(t){throw yo(t),new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.yz=s}};r();var pS=class extends Z{async Mj(t,i){if(this.$O)return this.$O;const e=this.hj(t,nr.OI,jo.XI,i),s=await fS(this.yz,e,i);if(s instanceof T)return s;if(""===s.zu)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.KO.mI(s),r=await n.qj(i)}catch(t){throw yo(t),new Yr(le.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const h=Y(e,void 0);return await _S(this.yz,new T(r),h,n,i)}async Tj(t,i){const e=this.hj(t,nr.OI,jo.qI,i),s=await J(this.yz,e,void 0,i);if(s instanceof ArrayBuffer)return new T(s);if(""===s.zu)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.KO.mI(s),n=await t.qj(i);return await V(this.yz,n,e,t,void 0,i)}catch(t){throw yo(t),new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,nr.OI),this.yz=s}};r();var yS=class extends Zo{async Mj(t,i){if(this.$O)return this.$O;const e=this.fz(i),s=await fS(this.yz,e,i);if(ga(s))return s;try{const t=await this.KO.mI(s),n=await t.qj(),r=Y(e,void 0);return await _S(this.yz,new T(n),r,t,i)}catch(t){throw yo(t),new Yr(le.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async Tj(t,i){const e=this.hj(t,nr.OI,jo.WI,i),s=await J(this.yz,e,this.Mz,i);if(s instanceof ArrayBuffer)return new T(s);if(""===s.zu)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.KO.mI(s),n=await t.qj(i);return await V(this.yz,n,e,t,this.Mz,i)}catch(t){throw yo(t),new Yr(le.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}oz(t){var i;return this.Mz=t,(null==(i=this.yz)?void 0:i.extractFairplayContentId)?Promise.resolve(this.yz.extractFairplayContentId(t)):super.oz(t)}constructor(t,i,e,s,n){super(t,i,e,s,nr.OI),this.yz=n}},G=class{Tz(t,i,e,s){switch(t.dm.hA){case Ci.qv:return this.Nz(i,e,s);case Ci.Hv:return this.Dz(i,e,s);case Ci.Xv:return this.Sz(t,i,e,s);case Ci.Zv:default:return this.Iz(i,e,s)}}Nz(t,i,e){const s=function(t){return t.integration===pw&&ae(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&Pu.Mm.vm(s,jt)){const n=Pu.Mm.ym(s,jt,t);return new pS(t,i,e,n)}switch(s){case dw:return new fD(t,i,e);case jh:return new _D(t,i,e);case Dh:return new wD(t,i,e);case Tl:return new mD(t,i,e);case Vh:return new TD(t,i,e);case gl:return new ND(t,i,e);case Ih:return new DD(t,i,e);case qh:return new SD(t,i,e);default:return new Z(t,i,e,nr.OI)}}Dz(t,i,e){const s=t.integration;if(s&&Pu.Mm.vm(s,Wi)){const n=Pu.Mm.ym(s,Wi,t);return new mS(t,i,e,n)}switch(s){case dw:return new ED(t,i,e);case jh:return new LD(t,i,e);case Dh:return new kD(t,i,e);case Tl:return new CD(t,i,e);case Vh:return new OD(t,i,e);case Ih:return new jD(t,i,e);case qh:return new zD(t,i,e);default:return new Dr(t,i,e)}}Sz(t,i,e,s){const n=i.integration;if(n&&Pu.Mm.vm(n,Wa)){const r=Pu.Mm.ym(n,Wa,i);return new yS(t,i,e,s,r)}switch(n){case fw:return new UD(t,i,e,s);case jh:return new QD(t,i,e,s);case _w:return new GD(t,i,e,s);case dw:return new VD(t,i,e,s);case Dh:return new WD(t,i,e,s);case Tl:return new HD(t,i,e,s);case gw:return new qD(t,i,e,s);case Vh:return new XD(t,i,e,s);case ww:return new ZD(t,i,e,s);case gl:return new KD(t,i,e,s);case Ih:return new JD(t,i,e,s);case Aw:return new $D(t,i,e,s);case qh:return new tS(t,i,e,s);case vw:return new iS(t,i,e,s);case mw:return new cS(t,i,e,s);default:return new Zo(t,i,e,s,nr.Ru)}}Iz(t,i,e){return new lS(t,i,e)}Ez(t){return t.hA===Ci.Hv||t.hA===Ci.qv||t.hA===Ci.Xv||t.hA===Ci.Zv}zx(t,i){var e;if(t.hA!==Ci.Hv)return!1;if(j_(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!Pu.Mm.vm(s,Wa))&&(s===dw&&new pt(i).zx)}xj(t,i){if(t.hA!==Ci.qv)return;const e=i.integration;return e&&Pu.Mm.vm(e,Wa)?void 0:e===dw?fD.xj():void 0}};r(),r(),r(),r();var Kt,MS="default",TS="theoplayer-stored-network-info-v2",NS=25e5,ca=class{bz(t){var i;const e=null==(i=ag.Lz)?void 0:i.EL(t);if(void 0===e)return;const s=JSON.parse(e);if(void 0!==s&&void 0!==s[this.kz]){if(!this.Cz(s))return s[this.kz].availableBandwidth;var n;null==(n=ag.Lz)||n.xz(t,JSON.stringify({}))}}Oz(){const t=this.bz(TS);if(void 0!==t)return t;const i=this.bz("theoplayer-stored-network-info");return i?8*i:void 0}Cz(t){const i=t[this.kz].storedTimestamp;return!!i&&Yo()-i>36e5}jz(t){this.zz=t,this.Pz()}Bz(){var t;return null!=this.zz||(this.zz=null!=(t=this.Oz())?t:NS),this.zz}constructor(){this.kz=MS,this.zz=void 0,this.Pz=oo((()=>{var t;const i={[this.kz]:{availableBandwidth:this.zz,storedTimestamp:Yo()}};null==(t=ag.Lz)||t.xz(TS,JSON.stringify(i))}),1e4)}};ca.dL=new ca,r(),function(t){t[t.Rz=0]="Rz",t[t.Uz=1]="Uz",t[t.Qz=2]="Qz",t[t.Fz=3]="Fz",t[t.Yz=4]="Yz",t[t.Fv=5]="Fv",t[t.Gz=6]="Gz",t[t.Vz=7]="Vz",t[t.Wv=8]="Wv",t[t.Wz=9]="Wz",t[t.qz=10]="qz"}(Kt||(Kt={})),r();var DS=class{get Xz(){return 0}get Zz(){return 0}Kz(t){}};r();var lu=class{Jz(t){this.Vj=t}xj(t){const i=this.Vj;if(void 0!==i)return this.$z.xj(t,i)}zx(t){const i=this.Vj;return void 0!==i&&this.$z.zx(t,i)}tP(t){const i={dm:t.dm,iP:t.iP||[],eP:t.eP,_z:t._z},e=this.$z.Tz(i,this.Vj||{},t.pj,this.dE);return i.eP&&e.ZO(i.eP),new SS(e)}constructor(t,i=new G){this.Vj=void 0,this.dE=t,this.$z=i}},SS=class{sj(t){return this.sP.sj(t)}nj(t,i,e){return this.sP.nj(i,e)}ej(){return this.sP.ej||void 0!==this.sP.$O}Mj(t,i){return this.sP.Mj(t,i)}Tj(t,i,e){return i&&this.sP.ZO(i),this.sP.Tj(t,e)}e_(){this.sP.gn()}constructor(t){this.sP=t}};r();var fh=class extends co{nP(t){this.rP.push(t);for(const i of t.xw)this.tt(i);this.hP(t)}oP(t){Et(this.rP,t),this.aP(t);for(const i of t.xw)this.uP(i)||this.it(i)}uP(t){for(const i of this.rP)if(i.zw(t))return!0;return!1}hP(t){t.yn(gt.ew,this.cP),t.yn(gt.hw,this.lP)}aP(t){t.fn(gt.ew,this.cP),t.fn(gt.hw,this.lP)}gn(){for(;this.rP.length>0;)this.oP(this.rP[0]);super.gn()}fa(){return Hc(this)}constructor(t){super(),this.rP=[],this.cP=t=>{this.tt(t.Lt)},this.lP=t=>{const i=t.Lt;this.uP(i)||this.it(i)};for(const i of t)this.nP(i)}};function IS(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=Ig(i)},get currentLatency(){return t.Iv},get streamConfiguration(){if(void 0!==t.dP)return function(t){return{get minimumOffset(){return t.aA},get maximumOffset(){return t.cA},get targetOffset(){return t.uA},get forceSeekOffset(){return t.lA},get minimumPlaybackRate(){return t.dA},get maximumPlaybackRate(){return t.fA}}}(t.dP)},get configuration(){return function(t){return{get minimumOffset(){return t.aA},set minimumOffset(i){t.aA=Ee(i)},get maximumOffset(){return t.cA},set maximumOffset(i){t.cA=Ee(i)},get targetOffset(){return t.uA},set targetOffset(i){t.uA=Ee(i)},get forceSeekOffset(){return t.lA},set forceSeekOffset(i){t.lA=Ee(i)},get minimumPlaybackRate(){return t.dA},set minimumPlaybackRate(i){t.dA=Ee(i)},get maximumPlaybackRate(){return t.fA},set maximumPlaybackRate(i){t.fA=Ee(i)},update(i){t.Qn(function(t){const i={};void 0!==t.minimumOffset&&(i.aA=Ee(t.minimumOffset));void 0!==t.maximumOffset&&(i.cA=Ee(t.maximumOffset));void 0!==t.targetOffset&&(i.uA=Ee(t.targetOffset));void 0!==t.forceSeekOffset&&(i.lA=Ee(t.forceSeekOffset));void 0!==t.minimumPlaybackRate&&(i.dA=Ee(t.minimumPlaybackRate));void 0!==t.maximumPlaybackRate&&(i.fA=Ee(t.maximumPlaybackRate));return i}(i))}}}(t.wd)}}}r(),r();var ES,Mu=class{get va(){return null!=this.Xa||(this.Xa=IS(this)),this.Xa}get Rt(){return!1}set Rt(t){}get Iv(){}get dP(){}get wd(){return this.fP}constructor(){this.fP={lA:0,cA:0,fA:0,aA:0,dA:0,uA:0,Qn:xs}}};function bS(){return ES||(ES=Ys&&Ys.document&&Ys.document.createElement("video")),ES}var LS=!(!Ys||!Ys.TextTrack),kS=class extends ha{get _P(){const t=this.gP.b_,i=this.j_;return t.gr(i,.01)}get ht(){return this.nN}get b_(){return this.gP.b_.ks()}get k_(){return this.gP.k_}set k_(t){t&&this.gP.wP(t)}get j_(){return void 0!==this.AP?this.AP:this.gP.j_}set j_(t){this.W_&&(this.AP=t),this.gP.Dp(t)}get ct(){return this.gP.ct}get R_(){return this.gP.R_}get lt(){return this.vP}get F_(){return this.mP}get G_(){}get W_(){return this.gP.W_}get q_(){return oe({},{aN:0,uN:0,cN:0,lN:0,dN:0,fN:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.gP.X_())}get Z_(){return this.gP.Z_}set Z_(t){this.gP.Z_=t}get eg(){return!0}get hg(){return this.gP.hg}get ag(){return this.gP.ag}set ag(t){this.gP.ag=t}get fg(){return this.gP.pP.played}get gg(){return this.yP}set gg(t){this.yP=t,this.MP&&(this.MP.gg=t)}get vg(){return this.gP.vg}get yg(){return this.gP.yg.ks()}get Tg(){return this.gP.Tg}get TP(){return this.gP.TP}get nt(){return this.Dl}get rt(){return this.hN}get Sg(){return this.gP.Sg}get Lg(){return this.gP.Lg}get xg(){return this.gP.xg}set xg(t){this.gP.xg=t}get zg(){return this.NP}get Bg(){return this.gP.Bg}set Bg(t){this.gP.Bg=t}get DP(){return this.SP}be(){this.gP.be()}ge(){this.gP.ge()}async ga(t,i,e){Pi(e);const s={hA:wt.bO,oA:t.src,IP:t.type,EP:this.bP(t),gg:this.yP,LP:t.crossOrigin,kP:i.metadata&&i.metadata.title};this.CP.Jz(t.contentProtection),this.MP=await this.gP.$n(s),Pi(e),i.textTracks&&this.xP(i.textTracks),qs(this.nt)}xP(t){for(let e of t)if(this.gP.OP()&&li.Ga&&LS&&!ly(e.kind,e.label)&&this.jP(e)){var i;const t=null!=(i=e.kind)?i:Pt.pp;this.gP.zP(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.PP.aE(e)}}jP(t){return!t.format||"webvtt"===t.format}async Vg(){try{await this.gP.Vg()}catch(t){}for(;!this._P;)await this.gP.D_(t.VA)}Gg(){this.gP.Gg()}Hg(){return void 0!==this.gP.pP.webkitShowPlaybackTargetPicker}qg(){this.gP.pP.webkitShowPlaybackTargetPicker&&this.gP.pP.webkitShowPlaybackTargetPicker()}Xg(){this.gP.pP.webkitShowPlaybackTargetPicker&&this.gP.pP.webkitShowPlaybackTargetPicker()}Ug(){return this.gP.pP}Rg(){return this.gP.ya}async Zn(){this.vP=void 0,this.mP=void 0,this.MP=void 0,await this.PP.Zn(),this.gP.BP(),await this.gP.Zn(),this.RP.Zn(),this.gg=this.yP,this.ht.Zn(),this.rt.Zn(),this.AP=void 0}async gn(){await this.Zn(),this.Vo(),this.UP(),this.QP(),this.RP.gn(),this.gP.FP=void 0,await this.GP.YP(this.gP),this.nN.gn(),this.hN.gn(),this.Dl.gn(),await this.PP.gn()}VP(){this.gP.yn(t.jh,this.Ds),this.gP.yn(t.Sh,this.Ds),this.gP.yn(t.ov,this.wc),this.gP.yn(t.VA,this.Ds),this.gP.yn(t.UA,this.Ds),this.gP.yn(t.ZA,this.Ds),this.gP.yn(t.XA,this.WP),this.gP.yn(t.kA,this.Ds),this.gP.yn(t.WA,this.Ds),this.gP.yn(t.uv,this.Ds),this.gP.yn(t.EA,this.Ds),this.gP.yn(t.qA,this.HP),this.gP.yn(qo.Tv,this.qP),this.gP.yn(Bi.ha,this.XP),this.gP.yn(t.DA,this.Ds),this.gP.yn(t.NA,this.ZP),this.gP.pP.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.KP)}UP(){this.gP.fn(t.jh,this.Ds),this.gP.fn(t.Sh,this.Ds),this.gP.fn(t.ov,this.wc),this.gP.fn(t.VA,this.Ds),this.gP.fn(t.UA,this.Ds),this.gP.fn(t.ZA,this.Ds),this.gP.fn(t.XA,this.WP),this.gP.fn(t.kA,this.Ds),this.gP.fn(t.WA,this.Ds),this.gP.fn(t.uv,this.Ds),this.gP.fn(t.EA,this.Ds),this.gP.fn(t.qA,this.HP),this.gP.fn(qo.Tv,this.qP),this.gP.fn(Bi.ha,this.XP),this.gP.fn(t.DA,this.Ds),this.gP.fn(t.NA,this.ZP),this.gP.pP.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.KP)}bP(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{dm:Qy,JP:[{initDataTypes:[Qy._L],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}$P(){let t=this.gP.pP.audioTracks,i=this.gP.pP.videoTracks;t&&(t.addEventListener("addtrack",this.tB),t.addEventListener("removetrack",this.iB),t.addEventListener("change",this.eB)),i&&(i.addEventListener("addtrack",this.sB),i.addEventListener("removetrack",this.nB),i.addEventListener("change",this.rB))}QP(){let t=this.gP.pP.audioTracks,i=this.gP.pP.videoTracks;t&&(t.removeEventListener("addtrack",this.tB),t.removeEventListener("removetrack",this.iB),t.removeEventListener("change",this.eB)),i&&(i.removeEventListener("addtrack",this.sB),i.removeEventListener("removetrack",this.nB),i.removeEventListener("change",this.rB))}nh(t){for(let i=0;i<t.U;i++){t.jw(i).bN()}}Zg(){this.gP.Zg()}Kg(){}hB(t,i){this.vP||(this.vP=i,this.mP=t,this.Co(new me(t)))}constructor(t,i,e,s,n,r=new G,h=nD()){super(),this.MP=void 0,this.vP=void 0,this.mP=void 0,this.SP=new DS,this.NP=new Mu,this.XP=t=>{const i=t.lt,e=i.code,s=new ce(im(e),"Something went wrong during native playback.",i),n=new lc(e,s.message,i.message);this.hB(s,n)},this.wc=()=>{this.Co(new Tc(this.j_,this.k_))},this.WP=t=>{this.hg||(this.AP=void 0),this.Co(t)},this.qP=t=>{this.AP=void 0},this.KP=()=>{this.Co(new _m(this.W_))},this.HP=()=>{this.Lg>0&&this.Sg>0&&this.Co(new Ry)},this.tB=t=>{this.nN.tt(new lm(t.track))},this.iB=t=>{const i=OS(this.nN,t.track);i&&this.nN.it(i)},this.eB=()=>{this.nh(this.nN)},this.sB=t=>{this.hN.tt(new fm(t.track))},this.nB=t=>{const i=OS(this.hN,t.track);i&&this.hN.it(i)},this.rB=()=>{this.nh(this.hN)},this.ZP=t=>{this.Co(t),this.hB(t.errorObject,ne(t.errorObject))},this.GP=i,this.dE=e,this.Cx=h,this.gP=this.GP.oB(iv.vp),this.yP=this.gP.pP.preload,this.RP=new Su(this.gP,!0),this.RP.yn(Wh,this.Ds),this.CP=new lu(e,r),this.gP.FP=this.CP,this.VP(),this.nN=new Tn,this.hN=new Tn,this.$P(),this.PP=new Cu(this.gP,this.dE),this.Dl=new fh([this.gP.nt]),this.ge()}};function CS(t){return!t.type||!(!bS().canPlayType||!bS().canPlayType(t.type))}var xS=class{_m(t,i,e,s,n,r){return new kS(t,i,e,s,n)}aB(t,i){return CS(t)}uB(){return!1}constructor(){this.cB=Kt.qz}};function OS(t,i){for(let e of t.xw)if(e.IN===i)return e}var Iu=class{static lB(){return this.dL}dB(t){this.fB.push(t)}get cB(){return this._B.cB}_m(t,i,e,s,n,r){let h=this._B._m(t,i,e,s,n,r);for(const t of this.fB)h=t(h,e,s);return h}aB(t,i){return this._B.aB(t,i)}uB(){return!1}constructor(){this._B=new xS,this.fB=[]}};function jS(t,i){return Xo(t.cB,i.cB)}Iu.dL=new Iu,r(),r();var zS=class{gB(t){this.wB.push(t),this.wB.sort(jS)}async AB(t,i){for(const e of this.wB){const s=e.aB(t,i);if(pu(s)?await s:Boolean(s))return e}}constructor(){this.wB=[]}};function bu(t){Je.dL.gB(t)}var Je=class extends zS{vB(t){this.mB=t}pB(){return this.mB}async yB(t,i){for(let e of t){let t=await this.AB(e,i);if(t)return{yc:e,t:t}}const e=this.mB;for(let s of t)if(e.aB(s,i))return{yc:s,t:e};return{yc:t[0],t:e}}constructor(...t){super(...t),this.mB=Iu.lB()}};Je.dL=new Je,r();var ii,PS=class{gn(){ei(this.Us)}constructor(t){this.Us=Ys&&Ys.document&&Ys.document.createElement("div"),ia(this.Us),t.appendChild(this.Us)}};r(),r(),function(t){t.qz="",t.MB="none",t.Mp="metadata",t.HT="auto"}(ii||(ii={}));var BS=[Bi.ha,t.bA,t.LA,t.Av,t.pA,t.CA,t.OA,t.YA,t.GA,t.JA,t.rv,qo.vv,qo.mv,qo.pv,qo.yv,qo.Mw,qo.Mv,qo.Tv,t.NA,t.DA,t.EA,t.kA,t.UA,t.QA,t.jh,t.VA,t.Sh,t.WA,t.qA,t.ZA,t.XA,t.ov,t.uv,t.HA,t.FA,t.KA],RS=class extends ha{get ht(){return this.nN}get b_(){return this.Qo.b_}get lt(){return this.Qo.lt}get F_(){return this.Qo.F_}get k_(){return this.Qo.k_}set k_(t){this.Qo.k_=t}get bt(){return this.TB}get j_(){return this.Qo.j_}set j_(t){this.Qo.j_=t}get ct(){return this.Qo.ct}get R_(){return this.Qo.R_}get G_(){return this.rN}get W_(){return this.Qo.W_}get q_(){return this.Qo.q_}get Z_(){return this.Qo.Z_}set Z_(t){this.Qo.Z_=t}get eg(){return this.Qo.eg}get hg(){return this.Qo.hg}get ag(){return this.Qo.ag}set ag(t){this.Qo.ag=t}get fg(){return this.Qo.fg}get gg(){return this.yP}set gg(t){this.yP=t,this.Qo&&(this.Qo.gg=this.yP)}get vg(){return this.Qo.vg}get yg(){return this.Qo.yg}get Tg(){return this.Qo.Tg}get nt(){return this.Dl}get Sg(){return this.Qo.Sg}get rt(){return this.hN}get Lg(){return this.Qo.Lg}get xg(){return this.Qo.xg}set xg(t){this.Qo.xg=t}get zg(){return this.Qo.zg}get DP(){return this.Qo.DP}Gg(){this.Qo.Gg()}Vg(){const t=this.Qo.Vg();pu(t)&&W(t)}Wg(){return this.ga(void 0)}Yg(){}NB(){this.nN.Pw=this.Qo.ht,this.hN.Pw=this.Qo.rt,this.Dl.Pw=this.Qo.nt,this.rN.Pw=this.Qo.G_,this.Qo.yn(BS,this.Ds)}DB(){this.Qo.fn(BS,this.Ds),this.nN.Pw=void 0,this.hN.Pw=void 0,this.Dl.Pw=void 0,this.rN.Pw=void 0}Wa(){return this.SB}async ga(t,i){if(Pi(i),this.SB=t,!t)return;const e=t.sources.filter(_s);if(zv(e))return;const s=await this.IB.yB(e,t);Pi(i);const n=s.yc,r=s.t,h=this.Rg(),o=Hv(this);(this.EB!==r||this.lt)&&(this.DB(),await this.Qo.gn(),Pi(i),this.EB=r,this.Qo=this.bB(r,n),function(t,i){t.Z_!==i.Z_&&(t.Z_=i.Z_);t.xg!==i.xg&&(t.xg=i.xg);t.ag!==i.ag&&(t.ag=i.ag)}(this.Qo,o),au(this,o,this),this.NB()),this.Qo.gg=this.gg,this.LB?this.Qo.ge():this.Qo.be(),await this.Qo.ga(n,t,i),Pi(i),this.kB(n),this.Rg()!==h&&this.Co(new M)}kB(t){this.TB!==t&&(this.TB=t,this.Co(new Wt(t)))}Hg(){return this.Qo.Hg()}qg(){this.Qo.qg()}Xg(){this.Qo.Xg()}Rg(){return this.Qo.Rg()}Zg(){this.Qo.Zg()}Kg(){this.Qo.Kg()}async Zn(){this.SB=void 0,this.kB(void 0),await this.Qo.Zn()}async gn(){this.Vo(),await this.Zn(),await this.Qo.gn(),this.nN.gn(),this.hN.gn(),this.Dl.gn(),this.rN.gn()}ge(){this.LB=!0,this.Qo.ge()}be(){this.LB=!1,this.Qo.be()}constructor(t,i){super(),this.EB=void 0,this.TB=void 0,this.yP=ii.MB,this.SB=void 0,this.LB=!0,this.nN=new _e,this.hN=new _e,this.Dl=new Ac,this.rN=new ra,this.IB=t,this.Qo=i,this.Qo.gg=this.gg,this.NB()}};function US(t,i,e){return e?t<=i:t<i}r(),r(),r();var Pc,Ki=class t{get CB(){return this.xB.slice()}Cn(t){return this.xB[2*t]}jn(t){return this.xB[2*t+1]}OB(t){return this.jB[2*t]}zB(t){return this.jB[2*t+1]}ks(){const t=this;return{get length(){return t.U},start(i){const e=0|i;return t.PB(e),t.Cn(e)},end(i){const e=0|i;return t.PB(e),t.jn(e)}}}BB(){const i=new Array(2*this.U),e=new Array(2*this.U);for(let t=0;t<this.U;t++)i[2*t]=this.Cn(t),i[2*t+1]=this.jn(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}PB(t){if(t<0)throw new b("The index provided ("+t+") must be non-negative");if(t>=this.U)throw new b("The index provided ("+t+") is greater than the maximum bound ("+this.U+")")}RB(t){if(0===this.U)return 0;if(this.gr(t))return t;if(t<=this.Cn(0))return this.Cn(0);if(t>=this.jn(this.U-1))return this.jn(this.U-1);{let i=0,e=1/0;for(let s=0;s<this.U;s++){const n=this.Cn(s),r=x.abs(n-t);r<e&&(i=n,e=r);const h=this.jn(s),o=x.abs(h-t);o<e&&(i=h,e=o)}return i}}Sn(i){let e=0,s=0;const n=[],r=[];for(;e<this.U&&s<i.U;){const t=this.Cn(e),h=this.jn(e),o=this.OB(e),a=this.zB(e),u=i.Cn(s),c=i.jn(s),l=i.OB(s),d=i.zB(s),f=x.max(t,u),_=x.min(h,c);let g,w;g=t===u?o&&l:f===t?o:l,w=h===c?a&&d:_===h?a:d,(f<_||g&&w&&f===_)&&(n.push(f,_),r.push(g,w)),h===c?(e+=1,s+=1):h<c?e+=1:s+=1}return new t(n,r)}UB(){const i=this.QB(),e=i.U;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.Cn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.OB(0)));for(let t=0;t<e-1;t++)s.push(i.jn(t),i.Cn(t+1)),n.push(!i.zB(t),!i.OB(t+1));const h=i.jn(e-1);return h!==1/0&&(s.push(h,1/0),n.push(!i.zB(e-1),!1)),new t(s,n)}FB(i){let e=0,s=0;const n=this.U,r=i.U,h=new Array(2*(n+r)),o=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.Cn(e),n=this.jn(e),r=i.Cn(s),u=i.jn(s);t<r||t===r&&n<u?(h[a]=t,h[a+1]=n,o[a]=this.OB(e),o[a+1]=this.zB(e),e++):(h[a]=r,h[a+1]=u,o[a]=i.OB(s),o[a+1]=i.zB(s),s++),a+=2}for(;e<n;)h[a]=this.Cn(e),h[a+1]=this.jn(e),o[a]=this.OB(e),o[a+1]=this.zB(e),e++,a+=2;for(;s<r;)h[a]=i.Cn(s),h[a+1]=i.jn(s),o[a]=i.OB(s),o[a+1]=i.zB(s),s++,a+=2;return new t(h,o)}YB(i){void 0===i&&(i=0);const e=this.U;if(e<2)return this;const s=[],n=[];let r=this.Cn(0),h=this.jn(0),o=this.OB(0),a=this.zB(0);for(let t=1;t<e;t++){const e=this.Cn(t),u=this.jn(t);let c=this.OB(t),l=this.zB(t);r<e&&h>u||(r===e&&(c=o||c,o=c),h===u&&(l=a||l,a=l),US(e,h+i,a||c)?(h=u,a=l):(s.push(r,h),n.push(o,a),r=e,h=u,o=c,a=l))}return s.push(r,h),n.push(o,a),new t(s,n).QB()}QB(){const i=[],e=[];for(let t=0;t<this.U;t++){const s=this.Cn(t),n=this.jn(t),r=this.OB(t),h=this.zB(t);s===n?(r||h)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,h))}return new t(i,e)}GB(t){if(0===this.U)return t;if(0===t.U)return this;return this.FB(t).YB()}VB(t){const i=this.QB(),e=t.QB(),s=i.UB(),n=e.UB(),r=s.Sn(e),h=n.Sn(i);return r.GB(h)}Np(i){if(0===this.U||0===i)return this;const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t)+i,r=this.jn(t)+i;e.push(n,r),s.push(this.OB(t),this.zB(t))}return new t(e,s)}WB(t){return 0===this.U||0===t.U?this:this.QB().Sn(t.QB().UB())}gr(t,i){return this.HB(t,i)>=0}qB(t,i,e,s,n){return this.XB(t,i,e,s,n)>=0}ZB(t,i,e,s,n){return this.KB(t,i,e,s,n)>=0}JB(t){if(t.U!==this.U)return!1;for(let i=0;i<this.U;i++)if(this.Cn(i)!==t.Cn(i)||this.jn(i)!==t.jn(i)||this.OB(i)!==t.OB(i)||this.zB(i)!==t.zB(i))return!1;return!0}$B(i){const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t),r=this.jn(t),h=this.OB(t),o=this.zB(t);i(n,r,h,o)&&(e.push(n,r),s.push(h,o))}return new t(e,s)}KB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,h=i+n;for(let t=0;t<this.U;t+=1)if(US(this.Cn(t),h,!s||this.OB(t))&&US(r,this.jn(t),!e||this.zB(t)))return t;return-1}XB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,h=i-n;for(let t=0;t<this.U;t+=1)if(US(this.Cn(t),r,!e||this.OB(t))&&US(h,this.jn(t),!s||this.zB(t)))return t;return-1}HB(t,i){return this.XB(t,t,!0,!0,i)}tR(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.U-1;t>=0;t-=1)if(US(this.Cn(t),e,this.OB(t)))return t;return-1}iR(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.U;t+=1)if(US(e,this.jn(t),this.zB(t)))return t;return-1}eR(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.U;t+=1)if(this.Cn(t)>e)return t;return-1}sR(i){return this.PB(i),new t([this.Cn(i),this.jn(i)],[this.OB(i),this.zB(i)])}nR(t,i){const e=this.HB(t,i);return e<0?void 0:this.sR(e)}get rR(){let t=0;for(let i=0;i<this.U;i++){t+=this.jn(i)-this.Cn(i)}return t}static xn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static hR(i){return new t([i,i],[!0,!0])}static oR(i,e){return i<=e?new t([i,e]):t.aR()}static aR(){return QS}constructor(t,i){this.U=t.length>>1,this.xB=t,this.jB=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.U)}},QS=new Ki([]);r(),r(),function(t){t.ra="fullscreenchange",t.ca="fullscreensupportchange",t.ha="fullscreenerror"}(Pc||(Pc={})),r();var Du=class extends gg{constructor(){super(Pc.ha)}},Ro=(Pc.ra,Pc.ca,Pc.ha,class extends i{get cs(){return!1}get ta(){return!1}mo(){this.Co(new Du)}So(){}gn(){this.Vo()}}),FS=class extends i{get k_(){}set k_(t){}get j_(){return this.uR}set j_(t){this.uR!==t&&(this.uR=t,this.cR=!0,this.Co(new Ot(this.j_)))}get q_(){return{aN:0,uN:0,cN:0,lN:0,dN:0,fN:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Z_(){return this.lR}set Z_(t){this.lR!==t&&(this.lR=t,this.Co(new Ve(this.j_,this.xg)))}get hg(){return this.dR}get ag(){return this.fR}set ag(t){this.fR!==t&&(this.fR=t,this.Co(new Qh(this.j_,this.ag)))}get Tg(){return this.cR}get xg(){return this.Xk}set xg(t){this.Xk!==t&&(this.Xk=t,this.Co(new Ve(this.j_,this.xg)))}get Bg(){return!1}set Bg(t){}get DP(){return this.SP}ge(){}be(){}Vg(){this.dR&&(this.dR=!1,this.Co(new vh(this.j_)),this.Co(new wc(this.j_)))}Gg(){this.dR||(this.dR=!0,this.Co(new Tc(this.j_,this.k_)),this.Co(new ws(this.j_)))}ga(t,i){return Promise.resolve()}Hg(){return!1}qg(){}Xg(){}Rg(){return this._R}Zg(){}Kg(){}async Zn(){this.uR=0,this.cR=!1,this.Gg(),this.Co(new Fv(this.uR))}async gn(){this.Vo(),this.ht.gn(),this.nt.gn(),this.rt.gn()}constructor(...t){super(...t),this.uR=0,this.lR=!1,this.dR=!0,this.fR=1,this.cR=!1,this.Xk=1,this.ht=new Tn,this.b_=Ki.aR().ks(),this.ct=NaN,this.R_=!1,this.lt=void 0,this.F_=void 0,this.G_=void 0,this.W_=!1,this.eg=!0,this.fg=Ki.aR().ks(),this.gg=ii.MB,this.vg=rv.tN,this.yg=Ki.aR().ks(),this.TP=void 0,this.nt=new sn,this.Sg=0,this.rt=new Tn,this.Lg=0,this.zg=new Mu,this.SP=new DS,this._R=new Ro}},YS=class extends FS{set gR(t){this.GP=t,this.gP=t.oB(iv.vp)}Ug(){var t;return null==(t=this.gP)?void 0:t.pP}async gn(){await super.gn(),this.gP&&(await this.GP.YP(this.gP),this.gP=void 0)}constructor(...t){super(...t),this.GP=void 0,this.gP=void 0}},et=class extends RS{get we(){return this.pu}get Bg(){return this.Qo.Bg}set Bg(t){this.Qo.Bg=t}Yg(){super.Yg(),this.AR.wR()}Qg(t){qv(this,t)}Fg(){}Jg(t){return!1}async ga(t,i){const e=this.Rg(),s=this.Ug();await super.ga(t,i),this.Rg()!==e&&this.Co(new M),this.Ug()!==s&&this.Co(new rs)}bB(t,i){return t._m(this.pu,this.AR,this.dE,this.Zx,this.vR,this.mR,i)}Ug(){return this.Qo.Ug()}E_(){return this.AR.pR.map((t=>t.pP))}async gn(){await super.gn(),this.AR.gn(),this.yR.gn()}constructor(t,i,e,s,n,r){const h=new YS;super(Je.dL,h),this.pu=t,this.Zx=i,this.dE=e,this.vR=s,this.mR=r,this.AR=new jy(n,this.mR),this.AR.MR(this.pu),h.gR=this.AR,this.yR=new PS(this.pu)}};r(),r();var GS=class extends ha{get ht(){return this.NR}get b_(){return Ki.aR().ks()}get k_(){return new Date(NaN)}set k_(t){}get bt(){}get j_(){return 0}set j_(t){}get ct(){return 0}get we(){return this.pu}get R_(){return!0}get lt(){return this.DR}get F_(){return this.SR}get G_(){}get q_(){return{aN:0,uN:0,cN:0,lN:0,dN:0,fN:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Z_(){return!1}set Z_(t){}get eg(){return!0}get hg(){return!0}get ag(){return 0}set ag(t){}get fg(){return Ki.aR().ks()}get gg(){return ii.MB}set gg(t){}get vg(){return rv.tN}get yg(){return Ki.aR().ks()}get Tg(){return!1}get nt(){return this.IR}get Sg(){return 0}get rt(){return this.NR}get Lg(){return 0}get xg(){return 1}set xg(t){}get zg(){return this.NP}get Bg(){return!1}set Bg(t){}Jg(t){return!0}be(){}Vg(){throw this.Co(new me(this.SR)),this.DR}Gg(){}Wa(){}async ga(t,i){throw Pi(i),this.Co(new me(this.SR)),this.DR}ge(){}Wg(){return Promise.resolve()}Ug(){}Rg(){return this._R}E_(){return[]}Yg(){}Qg(t){}Fg(){}get W_(){return!1}Hg(){return!1}qg(){}Xg(){}Zg(){}Kg(){}Zn(){return Promise.resolve()}gn(){return this.Vo(),this.NR.gn(),this.IR.gn(),Promise.resolve()}constructor(t,i,e){super(),this._R=new Ro,this.NP=new Mu,this.pu=t,this.DR=i,this.NR=new Tn,this.IR=new sn,this.SR=e}};function VS(t){if(t&&lt(t))return oe({},t,{integration:WS(t.integration),fairplay:JS(t.fairplay),widevine:HS(t.widevine),playready:qS(t.playready),clearkey:$S(t.clearkey),aes128:tI(t.aes128),integrationParameters:iI(t.integrationParameters),preferredKeySystems:eI(t.preferredKeySystems)})}function WS(t){if(ae(t))return t}function HS(t){if(t&&lt(t))return{persistentState:XS(t.persistentState),distinctiveIdentifier:XS(t.distinctiveIdentifier),audioRobustness:ZS(t.audioRobustness),videoRobustness:ZS(t.videoRobustness),licenseAcquisitionURL:ae(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:KS(t.licenseType),headers:t.headers,useCredentials:!!z_(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:ae(t.certificate)||YA(t.certificate)?t.certificate:void 0}}function qS(t){if(!t)return;const i=HS(t);if(!i)return;return oe({},i,{customData:ae(t.customData)?t.customData:void 0})}function XS(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function ZS(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function KS(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function JS(t){if(!t)return;const i=HS(t);if(!i)return;return oe({},i,{certificateURL:ae(t.certificateURL)?t.certificateURL:void 0})}function $S(t){if(!t)return;const i=HS(t);if(!i)return;const e=Yn(t.keys)?t.keys.map((t=>function(t){if(!t||!lt(t))return;const i=t.id,e=t.value;if(!ae(i)||!ae(e))return;return{id:i,value:e}}(t))).filter(j_):void 0;return oe({},i,{keys:e})}function tI(t){if(lt(t))return{useCredentials:z_(t.useCredentials)?t.useCredentials:void 0}}function iI(t){if(lt(t))return t}function eI(t){return t&&Yn(t)?t.map((t=>cl(t))).filter(j_):[jt,Wi,Wa]}r(),r(),r(),r(),r(),r(),r();var sI=class extends gg{constructor(t){super("presentationmodechange"),this.presentationMode=t}};function yi(t,i,e){return new Promise(((s,n)=>{if(e&&e.$f)return n(new sa);const r=t=>{o(),s(t)},h=()=>{o(),n(new sa)},o=()=>{t.removeEventListener(i,r),e&&e.r_(h)};t.addEventListener(i,r),e&&e.n_(h)}))}r(),r(),r();var nI,rI=class extends i{Qa(t){for(const i of this.ER)t.yn(i,this.bR);this.LR.push(t)}kR(t){for(const i of this.ER)t.fn(i,this.bR);this.LR.push(t)}gn(){this.Vo();for(const t of this.LR)this.kR(t);Ri(this.LR)}constructor(t,i=!1,e){super(e),this.LR=[],this.xR=t=>{yc((()=>{this.Ds(t)}))},this.ER=t,this.bR=i?this.xR:this.Ds}},hI=class extends ha{Qa(t){t.m_(this.OR),this.LR.push(t)}kR(t){t.N_(this.OR),Et(this.LR,t)}gn(){this.Vo();for(const t of this.LR)t.N_(this.OR);Ri(this.LR)}constructor(t,i=!1){super(t),this.LR=[],this.xR=t=>{yc((()=>{this.Ds(t)}))},this.OR=i?this.xR:this.Ds}};!function(t){t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture"}(nI||(nI={}));var oI,aI=class extends ha{get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return function(t){let i,e={get currentMode(){return t.qo()},requestMode(i){const e=cI(i);e&&t.Zo(e)},supportsMode(i){const e=cI(i);return!!e&&t.Go(e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new hI(e,!0),i.Qa(t),e}(this)}Zo(t){this.Xo(t,t)}Xo(t,i){this.jR!==i&&(this.zR=!0,this.PR=t,this.Jo(i,this.jR),"fullscreen"!==t&&(this.RR=t),this.zR=!1,this.Yr())}qo(){return this.UR?"fullscreen":"inline"}Go(t){switch(t){case"fullscreen":return this._R.ta;case"inline":return!0}return!1}Yr(){if(this.zR)return;const t=this.jR,i=this.qo();this.jR=i,"fullscreen"!==i&&(this.QR=i),t!==i&&this.Co(new sI(i))}Jo(t,i){const e="fullscreen"===t;this.UR=e,e!==this._R.cs&&(e?this._R.mo():this._R.So())}wi(){if(this.zR)return;const t=this._R.cs;this.UR=t,t?this.Xo("fullscreen","fullscreen"):t||"fullscreen"!==this.PR?this.Yr():this.Xo(this.RR,this.QR)}FR(){this.wi(),this.Co(new me(new ce(le.FULLSCREEN_ERROR,"Failed to enter fullscreen.")))}gn(){this._R.gn(),this.Vo()}constructor(t){super(),this.PR="inline",this.jR="inline",this.zR=!1,this.UR=!1,this.RR="inline",this.QR="inline",this.Xa=void 0,this.YR=()=>this.wi(),this.GR=()=>this.FR(),this._R=t,this._R.yn(Pc.ra,this.YR),this._R.yn(Pc.ha,this.GR),this.Yr()}},uI={j_:0,ct:NaN,R_:!1,lt:void 0,F_:void 0,Z_:!1,hg:!0,ag:1,vg:rv.tN,Tg:!1,Sg:0,Lg:0,xg:1};function cI(t){switch(t){case nI.INLINE:case nI.FULLSCREEN:case nI.PICTURE_IN_PICTURE:return t;default:return}}r(),function(t){t.DEFAULT="",t.THEO="theo",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor"}(oI||(oI={}));var al,ku,Go,lI,dI,ta=class{get WR(){return this.HR}qR(t){const i=this.WR.filter((i=>i.XR(t)));if(i.length>1)0;else if(0===i.length)throw b("Unknown ad integration: "+t.integration);return i[0]||null}ZR(t){this.HR.push(t)}constructor(){this.HR=[]}};ta.dL=new ta,r(),r(),r(),r(),function(t){t.Tv="PLAYING",t.Dv="PAUSED",t.KR="SEEK",t.JR="STALLED",t.$R="FAILED",t.tU="INITIAL_BUFFERING",t.iU="NO_ACCESS"}(al||(al={})),function(t){t.eU="HTTP_REQUEST_STATUS_CODE_1XX",t.sU="HTTP_REQUEST_STATUS_CODE_2XX",t.nU="HTTP_REQUEST_STATUS_CODE_3XX",t.rU="HTTP_REQUEST_STATUS_CODE_4XX",t.hU="HTTP_REQUEST_STATUS_CODE_5XX",t.oU="BUFFER_LENGTH",t.aU="BYTES_RECEIVED",t.uU="SEGMENT_READ_BITRATE",t.cU="SEGMENT_PROFILE_BITRATE",t.lU="VIDEO_PROFILE_BITRATE",t.dU="NUMBER_OF_FRAMES_DROPPED",t.fU="PLAYBACK_POSITION",t._U="NUMBER_OF_FRAMES_DECODED",t.gU="PLAYBACK_DELTA_TO_ORIGIN",t.wU="STREAM_DELTA_TO_ORIGIN",t.AU="ORIGIN_TIMESTAMP"}(ku||(ku={})),function(t){t.vU="MANIFEST_URI",t.mU="ASSET_DURATION",t.pU="NUMBER_OF_CONTENT_PROFILES",t.yU="CDN",t.MU="CONTENT_TITLE",t.TU="SERVICE_NAME",t.NU="CONTENT_TYPE",t.DU="CONTENT_DESCRIPTION"}(Go||(Go={})),(lI||(lI={})).SU="shutdown_normal_shutdown",function(t){t.IU="session/",t.EU="content/",t.bU="internalError/",t.LU="drmError/",t.kU="caError/",t.CU="networkError/"}(dI||(dI={}));var fI,_I=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=t,this.statusCode=i}};!function(t){t.xU="userAction",t.OU="endOfStreamReached"}(fI||(fI={}));var gI,wI=class extends i{};r(),r(),function(t){t.PAUSE="jU",t.RESUME="zU"}(gI||(gI={}));var AI=class extends gg{constructor(){super("PU")}},Tu=class extends i{BU(){this.RU=!0}UU(){}gn(){this.RU=!1,this.QU.fn(gI.PAUSE,this.FU),this.QU.fn(gI.RESUME,this.YU)}GU(){return isFinite(this.Qo.Td())}constructor(t,i){super(),this.Qo=t,this.QU=i,this.RU=!1,this.FU=()=>{this.UU(),this.RU=!1},this.YU=()=>{this.RU=!0},this.QU.yn(gI.PAUSE,this.FU),this.QU.yn(gI.RESUME,this.YU)}},vI=class extends Tu{BU(){super.BU(),this.VU()}gn(){this.WU(),super.gn()}VU(){this.Qo.yn("waiting",this.HU),this.Qo.yn("pause",this.qU),this.Qo.yn("playing",this.XU),this.Qo.yn("seeking",this.ZU),this.Qo.yn("seeked",this.KU)}WU(){this.Qo.fn("waiting",this.HU),this.Qo.fn("pause",this.qU),this.Qo.fn("playing",this.XU),this.Qo.fn("seeking",this.ZU),this.Qo.fn("seeked",this.KU)}JU(){this.$U=!0}tQ(){const t=this.Qo.Q_(),i=new _I(dI.bU,String(t.code));this.iQ(al.$R,i,t.message)}eQ(t){this.RU&&(this.QU.sQ(t),this.Co(new AI))}iQ(t,i,e){this.QU.nQ(t,i,e),this.Co(new AI)}rQ(t,i){this.QU.hQ(t,i)}constructor(...t){super(...t),this.$U=!1,this.oQ=!1,this.aQ=!1,this.HU=()=>{this.oQ&&!this.aQ&&this.eQ(al.JR)},this.XU=()=>{this.Qo.hg||(this.oQ||this.rQ(new _I(dI.EU,"firstFrameDisplayed"),"now"),this.oQ=!0,this.eQ(al.Tv))},this.qU=()=>{this.Qo.hg&&(this.oQ=!0,this.eQ(al.Dv))},this.ZU=()=>{this.$U&&(this.aQ=!0,this.$U=!1,this.eQ(al.KR))},this.KU=()=>{this.aQ=!1,this.Qo.hg&&this.eQ(al.Dv)}}};r();var mI=class extends Tu{BU(){super.BU(),this.uQ(),this.VU()}gn(){this.WU(),super.gn()}VU(){this.Qo.rt.yn("yw",this.uQ),this.Qo.lQ.cQ(this.dQ),this.Qo.yn(t.EA,this.fQ)}WU(){this.Qo.rt.fn("yw",this.uQ),this.Qo.lQ._Q(this.dQ),this.Qo.fn(t.EA,this.fQ)}gQ(t){t.serviceName&&this.wQ(Go.TU,t.serviceName),t.cdn&&this.wQ(Go.yU,t.cdn),t.contentTitle&&this.wQ(Go.MU,t.contentTitle),t.contentType&&this.wQ(Go.NU,t.contentType),t.contentDescription&&this.wQ(Go.DU,t.contentDescription)}wQ(t,i){this.RU&&this.QU.AQ(t,i)}constructor(...t){super(...t),this.fQ=()=>{this.GU()&&this.wQ(Go.mU,x.round(this.Qo.Td()))},this.dQ=t=>{"manifest"===t.request.type&&this.wQ(Go.vU,t.url)},this.uQ=()=>{const t=H_(this.Qo.rt.xw,(t=>t.Rt));t&&this.wQ(Go.pU,t.Hw.U)}}};r();var pI=class extends Tu{BU(){super.BU(),this.vQ=this.Qo.q_.aN,this.mQ=this.Qo.q_.cN,this.VU(),this.pQ.push(v(this.yQ,1e3))}UU(){super.UU(),this.MQ()}gn(){this.MQ(),this.WU(),this.pQ.forEach(m),Ri(this.pQ),super.gn()}VU(){this.Qo.lQ.cQ(this.TQ),this.Qo.yn(t.rv,this.NQ)}WU(){this.Qo.lQ._Q(this.TQ),this.Qo.fn(t.rv,this.NQ)}DQ(){this.MQ()}SQ(t){this.IQ+=t,this.EQ(ku.aU,this.IQ)}bQ(t,i){const e=this.LQ.get(i)||0;this.EQ(t,e)}kQ(){const t=this.Qo.q_.aN-this.vQ;this.EQ(ku.dU,t)}CQ(){const t=this.Qo.q_.cN-this.mQ;this.EQ(ku._U,t)}xQ(){const t=ca.dL.Bz();this.EQ(ku.uU,VA(t))}OQ(t){this.EQ(ku.cU,VA(t)),this.EQ(ku.lU,VA(t))}MQ(){if(!this.GU())return;const t=x.round(ge(this.Qo.z_()));this.EQ(ku.fU,t)}jQ(){const t=Ki.xn(this.Qo.L_()),i=this.Qo.z_(),e=t.nR(i),s=e?ge(e.jn(0)-i):0;this.EQ(ku.oU,s)}EQ(t,i){this.RU&&this.QU.zQ(t,i)}constructor(...t){super(...t),this.LQ=Qt(),this.IQ=0,this.vQ=0,this.mQ=0,this.pQ=[],this.yQ=()=>{this.kQ(),this.CQ(),this.jQ()},this.NQ=t=>{t.rE===iv.vp&&(this.SQ(t.dN),this.xQ(),this.OQ(t.BQ),this.MQ())},this.TQ=t=>{const i=t.status.toString()[0],e=this.LQ.get(i)||0;this.LQ.set(i,e+1),this.bQ(ku.eU,"1"),this.bQ(ku.sU,"2"),this.bQ(ku.nU,"3"),this.bQ(ku.rU,"4"),this.bQ(ku.hU,"5")}}};r(),r(),r();var bt=class{kL(t){this.RQ.delete(t)}UQ(){this.RQ.clear()}EL(t){return this.RQ.get(t)}xz(t,i){this.RQ.set(t,i)}constructor(){this.RQ=Qt()}},ci=class t{static QQ(){return t.dL||(t.dL=yI.Px()?new yI:new bt),t.dL}static kL(i){t.QQ().kL(i)}static UQ(){t.QQ().UQ()}static EL(i){return t.QQ().EL(i)}static xz(i,e){t.QQ().xz(i,e)}};ci.dL=void 0;var $r,yI=class extends ci{static Px(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}kL(t){self.sessionStorage.removeItem(t)}UQ(){self.sessionStorage.clear()}EL(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}xz(t,i){self.sessionStorage.setItem(t,i)}};function MI(t){return t&&t.integration===EI}function TI(t){if(!ae(t.asset))throw new k("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!ae(t)&&("live"===t||"vod"===t)}(t.streamType))throw new k("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!ae(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new k("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!ae(t.cdn))throw new k("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!ae(t.contentTitle))throw new k("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!ae(t.contentType))throw new k("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!ae(t.contentDescription))throw new k("Agama source configuration: expected 'contentDescription' to be a string");return t}function NI(t){if(!ae(t.config))throw new k("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!ae(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new k("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!ae(t.application))throw new k("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!ae(t.applicationVersion))throw new k("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!ae(t.userAccountID))throw new k("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!ae(t.deviceID))throw new k("Agama player configuration: expected 'deviceID' to be a string");return t}function DI(){let t="00000000-0000-0000-0000-000000000000",i=s.navigator,e=s.screen,n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=x.floor(1e3*x.random());let r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return x.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function SI(t,i,e){const s=i,n=function(t,i){return Fa(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}r(),function(t){t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected"}($r||($r={}));var Xa,sl,Pa,II=class{FQ(){this.Qo.fn("error",this.YQ),this.GQ(),this.VQ(),this.QU.WQ()}HQ(){this.Qo.qQ.va.chromecast&&this.Qo.qQ.va.chromecast.addEventListener("statechange",this.XQ)}VQ(){this.Qo.qQ.va.chromecast&&this.Qo.qQ.va.chromecast.removeEventListener("statechange",this.XQ)}ZQ(){return void 0!==this.Qo.qQ.va.chromecast&&this.Qo.qQ.va.chromecast.state===$r.CONNECTED}gn(){this.Qo.fn("sourcechange",this.do),this.Qo.fn("play",this.KQ),this.Qo.fn("ended",this.JQ),this.FQ(),this.QU.gn()}$Q(){this.tF||(this.tF=new vI(this.Qo,this.QU)),this.iF||(this.iF=new pI(this.Qo,this.QU)),this.eF||(this.eF=new mI(this.Qo,this.QU))}BU(){this.tF&&(this.tF.BU(),this.tF.yn("PU",this.sF)),this.iF&&this.iF.BU(),this.eF&&this.eF.BU()}GQ(){this.tF&&(this.tF.fn("PU",this.sF),this.tF.gn(),this.tF=void 0),this.iF&&(this.iF.gn(),this.iF=void 0),this.eF&&(this.eF.gn(),this.eF=void 0)}gQ(t){this.eF&&this.eF.gQ(t)}nF(){this.tF&&this.tF.tQ()}JU(){this.tF&&this.tF.JU()}constructor(t,i,e){this.Qo=t,this.QU=i,this.do=()=>{this.rF(),this.JQ()},this.rF=()=>{const t=this.Qo.Wa(),i=t&&t.analytics;this.hF=function(t){void 0===t&&(t=[]);for(let i of t)if(MI(i))return TI(i)}(i)},this.JQ=()=>{this.FQ(),this.Qo.fn("play",this.KQ),!this.ZQ()&&this.QU.oF()&&this.Qo.bt&&this.hF&&(this.$Q(),this.Qo.hg||this.Qo.R_?this.Qo.yn("play",this.KQ):this.KQ())},this.KQ=()=>{this.Qo.bt&&this.hF&&(this.QU.aF(this.Qo.bt,this.hF),this.BU(),this.gQ(this.hF),this.HQ(),this.Qo.yn("error",this.YQ),this.Qo.fn("play",this.KQ))},this.XQ=()=>{this.ZQ()&&this.FQ()},this.YQ=()=>{this.nF(),this.FQ()},this.sF=()=>{this.iF&&this.iF.DQ()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(MI(i))return NI(i)}(e.analytics);s&&this.QU.uF()&&(this.QU.Yg(s),this.QU.oF()?(this.QU.cF(),this.Qo.yn("sourcechange",this.do),this.Qo.yn("ended",this.JQ)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},EI="agama";function bI(t){switch(t){case"":return Xa.NONE;case"horizontal":return Xa.HORIZONTAL;case"vertical":return Xa.VERTICAL;default:throw new k}}function LI(t,i){if(i)return sl.PM360;if(null==t)return sl.NONE;switch(t){case"":return sl.NONE;case"360":return sl.PM360;case"180":return sl.PM180;default:throw new k("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}r(),r(),function(t){t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(Xa||(Xa={})),r(),function(t){t.NONE="",t.PM360="360",t.PM180="180"}(sl||(sl={})),r(),function(t){t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event"}(Pa||(Pa={})),r();var kI="https://content.uplynk.com";function Uu(t){if(!t)return!0;const i=!function(t){return Ra(t)||qe(t)&&Ra(t[0])}(t.sources)||zv(t.sources),e=!t.ads||CI(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function CI(t){return!t||Yn(t)&&0===t.length}function xI(t){if(t&&t.sources)return OI(t.sources)}function OI(t){return ae(t)?la(t):Ov(t)?t.type||t.src&&la(t.src):qe(t)&&t.length>0?OI(t[0]):void 0}function jI(t){if(t&&t.sources)return zI(t.sources)}function zI(t){return ae(t)?t:Ov(t)?t.src:qe(t)&&t.length>0?zI(t[0]):void 0}function PI(t,i,e){return kv(t)?function(t,i,e){let s=oe({},Pv(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:ev.VERIZON_MEDIA,id:"",prefix:kI,preplayParameters:{},playbackUrlParameters:{},assetType:Pa.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(ae(t))return t;if(qe(t)&&ae(t[0]))return t;if(function(t){return lt(t)&&ae(t.userId)&&(qe(t.externalId)||ae(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return Pa.CHANNEL;case"event":return Pa.EVENT;default:return Pa.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=Ig(t.contentProtected));t.assetInfo?s.assetInfo=Ig(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=P(t.prefix)||kI);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!z_(i.adImpressions)&&i.adImpressions,s=!!z_(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=z_(i.linearAdData)?i.linearAdData:t!==Pa.ASSET):t!==Pa.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=RI(s,t),s=QI(s,i,e),s=UI(s,t,e),s}(t,i,e):Cv(t)?function(t,i,e){var s;return oe({},BI(t,i,e),{integration:ev.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,i,e):BI(t,i,e)}function BI(t,i,e){let s=Bv();const n=i&&(i.contentProtection||i.drm);if(ae(t)){if(s.src=t,s.type=la(t),n){const t=VS(n);s.contentProtection=vv(t)}}else if(Ov(t)||Aa(t)){s.src=t.src,s.type=t.type||la(t.src),s.isAdvertisement=t.isAdvertisement;const i=jv(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);Cv(t)&&(s.integration=t.integration);const e=VS(t.contentProtection||t.drm||n);s.contentProtection=vv(e),t.ssai&&(s.ssai=lw(t.ssai)),s=RI(s,t)}return s=QI(s,i,e),s=UI(s,t,e),s}function RI(t,i){var e,s;i.useCredentials?t.crossOrigin=Ds.Uv:i.crossOrigin&&(t.crossOrigin=bv(i.crossOrigin)),ae(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=Ig(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=Ig(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=Ig(i.useManagedMediaSource)),i.dash&&(t.dash=mv(i.dash)),i.hls&&(t.hls=pv(i.hls)),i.lcevc&&(t.lcevc=Ig(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=Qv(i.ignoreEmbeddedTextTrackTypes)),t.seamlessSwitchStrategy=Sv(null!=(s=i.seamlessSwitchStrategy)?s:null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch);const n=dt(i.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=dt(i.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function UI(t,i,e){return t.abr=Mv(ae(i)?void 0:Ni(i.abr),null==e?void 0:e.abr),t}function QI(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!j_(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!j_(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===Ds.Bv&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=Ds.Rv),t.useCredentials=t.crossOrigin===Ds.Uv,ae(n)&&!t.timeServer&&(t.timeServer=n),t}function FI(t){const i={src:""};if(t&&t.src){if(i.src=P(t.src),"default"in t&&(i.default=Ig(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return iy(i)?i:i?"metadata":"subtitles"}(t.kind),Iv(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function YI(t,i){if(ui(t))try{return i.qR(t).lF(t)}catch(t){return}}function GI(t){return ae(t.sources)&&""!==t.sources||lt(t.sources)&&ae(t.sources.src)}function VI(t){return t.integration===oI.SPOTX&&!j(t.id)}function WI(t){return"freewheel"===t.integration}function rl(t,i,e){if(void 0===e&&(e=ta.dL),Uu(t))return{sources:[Bv()]};const s=se(t);if(s.sources=function(t,i,e){if(Ra(t))return[PI(t,i,e)];if(qe(t)&&Ra(t[0])){const s=[];for(const n of t)s.push(PI(n,i,e));return s}return[Bv()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!qe(t))return[];const e=[];for(let s of t)s=YI(s,i),s&&(GI(s)||VI(s)||WI(s))&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!zv(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!qe(t))return[];const i=[];for(let e of t)e=FI(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=P(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:LI(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?bI(i.stereoMode):Xa.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=Uv(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=se(t);for(const s of i){const i=!t.some((t=>t.integration===s.integration));i&&s.integration!==EI&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=Vv(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=Ee(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}r();var HI=!(li.bb&&!li.kb),qI=self.console;function XI(t){if(lt(t))try{return JSON.stringify(t)}catch(t){}return t}function ZI(t){return t.map(XI).join(" ")}function KI(t){const i=qI&&qI[t];return i?i.bind&&HI?i.bind(qI):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];qI[t](ZI(e))}:void 0}var JI=KI("log")||xs,ji=KI("warn")||JI.bind(void 0,"WARNING:"),Nu=KI("error")||JI.bind(void 0,"ERROR:"),$I=(()=>{const t=qI&&qI.assert;return t?t.bind&&HI?t.bind(qI):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];qI.assert(t,ZI(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||Nu("Assertion failed:",...e)}})();r(),r(),r();var tE=function(){function t(t){this.dF=t}return t.prototype.fF=function(t){var i,e,s,n,r,h,o,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.dF.charAt(64);for(i=0;i<t.length;i+=4)e=(o=this.dF.indexOf(t.charAt(i))<<18|this.dF.indexOf(t.charAt(i+1))<<12|(r=this.dF.indexOf(t.charAt(i+2)))<<6|(h=this.dF.indexOf(t.charAt(i+3))))>>>16&255,s=o>>>8&255,n=255&o,a[i/4]=String.fromCharCode(e,s,n),64===h&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype._F=function(t,i){var e,s,n,r,h,o,a,u=[],c="";if((o=t.length%3)>0)for(;o++<3;)c+=this.dF.charAt(64),t+="\0";for(o=0;o<t.length;o+=3)s=(e=t.charCodeAt(o)<<16|t.charCodeAt(o+1)<<8|t.charCodeAt(o+2))>>18&63,n=e>>12&63,r=e>>6&63,h=63&e,u[o/3]=this.dF.charAt(s)+this.dF.charAt(n)+this.dF.charAt(r)+this.dF.charAt(h);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.lh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.gF=new t(function(t){return t.fF("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.lh)),t}();function _c(t){return"string"==typeof t}function iE(t){return"number"==typeof t}r(),r(),r();var eE={}.toString;var oi,sE=Array.isArray||function(t){return"[object Array]"===eE.call(t)};function dc(t,i){return sE(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb"}(oi||(oi={}));var it,nE=_.keys(oi).map((function(t){return oi[t]}));function rE(t){return-1!==nE.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview"}(it||(it={}));var hE,oE=_.keys(it).map((function(t){return it[t]}));function aE(t){return-1!==oE.indexOf(t)}function uE(t){try{var i=tE.gF.fF(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=_c(t.key),r=_c(t.customer_id),h=iE(t.generation_date),o=iE(t.expiration_date),a=dc(t.domains_page,_c),u=dc(t.domains_source,_c),c=dc(t.sdks,i?rE:_c),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=dc(t.features,i?aE:_c):(e=!0,t.features=[]);if(!(s&&n&&r&&h&&o&&a&&u&&c&&l&&e))return!1;return!0}(e,!1))throw new b("The provided license could not be decoded correctly.");return e}catch(t){throw new b("The provided license could not be decoded correctly.")}}function cE(){return hE||(hE={zu:Py.href,wF:Ys.parent&&Ys.parent!==s,AF:dE()}),hE}var Js,lE=["http:","https:","ftp:","ws:","wss:"];function dE(){var t;try{if(null==Ys?void 0:Ys.top)return Ys.top.location.href}catch(t){}return null==Ys||null==(t=Ys.document)?void 0:t.referrer}!function(t){t[t.vF=0]="vF",t[t.mF=1]="mF",t[t.pF=2]="pF"}(Js||(Js={}));var fE,_E=class{constructor(t,i,e,s,n=[],r="",h=Date.now(),o=[],a=!0){this.yF=t,this.MF=i,this.TF=e,this.NF=s,this.DF=n,this.SF=r,this.IF=h,this.EF=o,this.bF=a}};!function(t){t.mF="expired",t.LF="invaliddomain",t.kF="invalidsource",t.CF="invalidfeature",t.ha="error"}(fE||(fE={}));var gE=class t{xF(t,i){let e=[];Ra(t.sources)?e=[t.sources]:qe(t.sources)&&(e=t.sources),this.OF(t,e,i),this.jF(e,i)}OF(t,i,e){if(Uu(t)||0===e.TF.length||vE(e.TF))return;if(!i.every((t=>this.zF(t,e)))){const t="invalidsource",i=Vt.PF(t);throw new ce(wE(t),i)}}jF(t,i){for(const e of t)Ov(e)&&jv(e)&&this.BF([it.HESP],i)}RF(i){return this.UF(i.EF)&&this.QF(i)?t.FF(i.NF)?0:1:2}BF(t,i){for(const e of t)if(!na(i.DF,e)){const t="invalidfeature",i=Vt.YF(t,e);throw new ce(wE(t),i)}}UF(t){return 0===t.length||t.some((t=>this.GF(t)))}GF(t){return"web"===function(t){switch(t){case oi.ANDROID:return my.pE;case oi.ANDROIDTV:case oi.FIRETV:return my.yE;case oi.IOS:return my.ME;case oi.TVOS:return my.TE;case oi.CHROMECAST:case oi.CHROMECASTCAF:return my.NE;case oi.THEOLIVEWEB:return my.DE;default:return my.mE}}(t)}static FF(t){const i=Number(new Date);return!!t&&i<=t}QF(t){return!(this.VF&&0!==t.MF.length&&!vE(t.MF))||!!(this.VF&&this.WF(t.MF)&&this.HF(t.MF))}WF(t){return mE(this.Ek.zu,t)}HF(t){if(!this.Ek.wF)return!0;if(this.qF)return!0;const i=this.XF();return!!i&&mE(i,t)}XF(){if(!this.Ek.wF)return;const t=sd.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.Ek.AF?this.Ek.AF:void 0}zF(i,e){return!!t.ZF(i,e.TF)}static ZF(t,i){return mE(this.KF(t),i)}static KF(t){return ae(t)?t:Ov(t)&&t.src||""}constructor(t,i,e){this.qF=t,this.JF=i,this.Ek=e,this.VF=yE(this.Ek)}};function wE(t){switch(t){case"invaliddomain":return le.LICENSE_INVALID_DOMAIN;case"invalidsource":return le.LICENSE_INVALID_SOURCE;case"expired":return le.LICENSE_EXPIRED;case"invalidfeature":return le.LICENSE_INVALID_FEATURE;case"error":return le.LICENSE_ERROR}}function AE(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;const n="\\.",r="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",h="(\\*|"+r+")",o=new RegExp("ip-range\\("+h+n+h+n+h+n+h+"\\)"),a=s.match(o),u=t=>"*"===t?"("+r+")":t;if(null!==a&&5===a.length){const t=new RegExp("^"+a[1]+n+u(a[2])+n+u(a[3])+n+u(a[4])+"$");return null!==e.match(t)}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function vE(t){return t.some((t=>"*"===t))}function mE(t,i){const e=ag.Dh(t);if(!pE(e))return!0;for(const s of i){if(AE(e.hostname,s))return!0;if(AE(rw(t),s))return!0}return!1}function pE(t){return-1!==lE.indexOf(t.protocol)}function yE(t){const i=ag.Dh(t.zu);return pE(i)&&!function(t){return AE(t.hostname,"localhost")}(i)&&!function(t){return AE(t.hostname,"theoplayer.doubleclick.net")}(i)}var re,Vt=class{static YF(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static PF(t){return"invaliddomain"===t?this.tY:"invalidsource"===t?this.iY:"expired"===t?this.eY:"invalidfeature"===t?this.sY:this.nY}};function ME(t){const i=[t.fT,t.rY,t.hY];switch(t.rY){case 1:i.push(t.oA);break;case 4:i.push(t.j_),i.push(t.lt);break;case 5:i.push(t.lt)}return i}Vt.nY="The license for this player is invalid.",Vt.eY="The usage license for this video player has expired.",Vt.tY="The current domain is incompatible with the license for this player.",Vt.iY="The provided video source is incompatible with the license for this player.",Vt.sY="The requested feature is not available with the license for this player.",r(),r(),function(t){t[t.oY=1]="oY",t[t.aY=4]="aY",t[t.uY=5]="uY"}(re||(re={})),r();var nl=new Array(256);for(let t=0;t<256;t+=1)nl[t]=(t<16?"0":"")+t.toString(16);function Rs(){const t=Yo(),i=(4294967296*x.random()|0)+t&3029421624,e=(4294967296*x.random()|0)+t&3595553209,s=(4294967296*x.random()|0)+t&1130486254,n=(4294967296*x.random()|0)+t&1284287105;return nl[255&i]+nl[i>>>8&255]+nl[i>>>16&255]+nl[i>>>24&255]+"-"+nl[255&e]+nl[e>>>8&255]+"-"+nl[e>>>16&15|64]+nl[e>>>24&255]+"-"+nl[63&s|128]+nl[s>>>8&255]+"-"+nl[s>>>16&255]+nl[s>>>24&255]+nl[255&n]+nl[n>>>8&255]+nl[n>>>16&255]+nl[n>>>24&255]}function TE(t){return go(t.replace(/-/g,""))}function Fu(){return ag.f_()}r(),r(),r();var NE,DE="theoplayer-session-id";function SE(){if(!NE){const t=ci.EL(DE);t?NE=t:(NE=Rs(),ci.xz(DE,NE))}return NE}r(),r();var IE=/[^\x00-\x7E]/g;function EE(t){return"\\u"+va(t.charCodeAt(0).toString(16),4,"0")}var bE="https://license.theoplayer.com";function LE(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(IE,EE)}(t,((t,e)=>{if(lt(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e}))}(function(t){return[t.cY,t.tx,t.yF,t._y,t.lY,t.dY,t.fY.map(ME)]}(t));return tE.gF._F(i)}var kE=class{get fY(){return this.ER}_Y(){return Boolean(this.lY)}get lY(){return this.gY}async wY(t){if(!(await this.vY.AY()).bF)return;const i={rY:re.oY,hY:Yo(),oA:t};await this.rQ(i)}async mY(t,i){const e={rY:re.aY,hY:Yo(),j_:i,lt:t};await this.rQ(e)}async pY(t){const i={rY:re.uY,hY:Yo(),lt:t};await this.rQ(i)}async rQ(t){const i=await this.vY.AY();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.yY._F(i.yF)&&t.rY!==re.uY||(t.rY===re.oY?this.MY():this._Y()||this.MY(),t.fT=this.oC++,this.ER.push(t),!function(t){return t===re.oY||t===re.uY}(t.rY)?this.ER.length>this.TY&&await this.NY():await this.DY())}async DY(t){for(void 0===t&&(t=!1);this.ER.length>0;)await this.NY(t)}async SY(t){const i=await this.vY.AY();return{cY:Yo(),tx:SE(),yF:this.yY._F(i.yF)||"dev",_y:this.kC,lY:this.gY,dY:this.IY,fY:t}}async NY(t){void 0===t&&(t=!1);const i=this.ER.splice(0,this.EY),e=await this.SY(i);t?this.bY(e):this.LY(e),this.kY=Fu()}async LY(t){const i=LE(t),e=new nc({zu:bE,$I:i,hE:!1,eE:nr.Ru,tE:{"Content-Type":Te.Jj},NI:4e3,iE:Kc.POST});try{const t=await this.dE.mI(e);await t.qj()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}bY(t){const i=LE(t);this.dE.bY({zu:bE,$I:i,IP:Te.Jj})}MY(){this._Y()&&this.DY(),this.gY=Rs(),this.oC=0}gn(){ps.CY(this.xY),m(this.OY),this.DY()}constructor(t,i,e,s=tE.lh,n=0,r=1){this.kC=t,this.dE=i,this.vY=e,this.yY=s,this.TY=n,this.EY=r,this.ER=[],this.gY=null,this.kY=0,this.IY="unknown",this.oC=0,this.jY=()=>{Fu()-this.kY>6e4&&this.DY()},this.xY=()=>{this.DY(!0)},ps.zY(this.xY),this.OY=v(this.jY,6e4)}};r(),r(),r();var CE=0;var xE=c,Vs=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,Gs=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;Vs&&Gs||(Vs=function(t){const i=Fu(),e=x.max(0,16-(i-CE)),s=u((()=>t(i+e)),e);return CE=i+e,s},Gs=xE),Vs=Vs.bind(self),Gs=Gs.bind(self);var OE=li.bb||li.Ga&&li.Qb<13;function jE(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var th,zE=class{get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.PY(i,...s)},texImage2D:(i,e,s,n,r,h)=>t.BY(i,e,s,n,r,h),requestVideoFrameCallback:i=>t.RY(i),cancelVideoFrameCallback:i=>t.UY(i)}}(this)}PY(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this.QY;return void 0!==n&&(t.drawImage(n,...e),!0)}BY(t,i,e,s,n,r){let h=this.QY;return void 0!==h&&(OE&&(h=this.FY(h)),t.texImage2D(i,e,s,n,r,h),!0)}RY(t){const i=this.YY++,e=this.GY(t,i);return this.VY.set(i,{WY:t,HY:e}),i}UY(t){const i=this.VY.get(t);void 0!==i&&(this.VY.delete(t),i.HY())}GY(t,i){const e=this.QY;if(void 0===e)return xs;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback(((e,s)=>{this.VY.delete(i),t(e,s)}));return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.qY()?(this.VY.delete(i),this.XY=!1,t(n,void 0)):e=Vs(s)};return e=Vs(s),()=>Gs(e)}}qY(){return(!this.t.hg||this.XY)&&!this.t.Tg&&this.t.vg>=rv.iN}FY(t){let i=this.ZY;void 0===i&&(i=h.createElement("canvas"),this.ZY=i);const e=i.getContext("2d"),s=this.t,n=s.Lg,r=s.Sg,o=i.width,a=i.height;e.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let u=!1;return n>0&&jE(e,n-1,0)&&(i.width=o,u=!0),r>0&&jE(e,0,r-1)&&(i.height=a,u=!0),u&&e.drawImage(t,0,0,n,r),i}gn(){this.VY.forEach((t=>t.HY())),this.VY.clear(),this.t.fn(t.OA,this.KY),this.t.fn(t.XA,this.JY),this.QY=void 0,this.ZY=void 0}constructor(i){this.QY=void 0,this.Xa=void 0,this.ZY=void 0,this.VY=Ye(),this.YY=1,this.XY=!0,this.JY=()=>{this.XY=!0},this.KY=()=>{this.QY=this.t.Ug(),this.VY.forEach(((t,i)=>{t.HY(),t.HY=this.GY(t.WY,i)}))},this.t=i,this.t.yn(t.OA,this.KY),this.t.yn(t.XA,this.JY),this.KY()}};r(),r(),r(),(th||(th={})).pn="dimensionchange";var PE=class extends gg{constructor(t,i){super(th.pn),this.width=t,this.height=i}};r(),r();var BE,RE=class{constructor(t,i){this.we=t,this.WY=i}},UE=class extends RE{get _u(){return this.$Y}get ku(){return this.tG}gn(){this.iG.disconnect()}constructor(t,i){super(t,i),this.$Y=0,this.tG=0,this.eG=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.tG=i.width,this.$Y=i.height,this.WY(this.tG,this.$Y)}},this.iG=new Ys.ResizeObserver(this.eG),this.iG.observe(this.we)}};r(),r();var QE=["Webkit","Moz","O","ms"],FE=(()=>{let t=!1;try{if(void 0!==Ys&&"function"==typeof Ys.addEventListener){const i=_.defineProperty({},"passive",{get(){t=!0}});Ys.addEventListener("testPassiveEventSupport",xs,i),Ys.removeEventListener("testPassiveEventSupport",xs,i)}}catch(t){}return t})(),YE=Qt();function GE(t){return YE.has(t)||YE.set(t,function(t){const i=(BE||(BE=Ys&&Ys.document&&Ys.document.createElement("span")),BE);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of QE){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),YE.get(t)}function VE(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function WE(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[GE("transition")]="0s"}var HE=class extends RE{gn(){Gs(this.sG),this.sG=0,this.nG.removeEventListener("scroll",this.rG),this.hG.removeEventListener("scroll",this.rG),ei(this.oG),s&&s.removeEventListener("resize",this.aG)}get _u(){return this.we.getBoundingClientRect().height||this.$Y||0}get ku(){return this.we.getBoundingClientRect().width||this.tG||0}constructor(t,i,e){super(t,i),this.sG=0,this.tG=NaN,this.$Y=NaN,this.uG=void 0,this.Zn=()=>{const t=1e5;this.cG.style.width=t+"px",this.cG.style.height=t+"px",this.nG.scrollLeft=t,this.nG.scrollTop=t,this.hG.scrollLeft=t,this.hG.scrollTop=t,0===this.hG.scrollTop&&Vs(this.Zn)},this.lG=()=>{const t=this.ku,i=this._u;this.WY(t,i),this.tG=t,this.$Y=i,this.Zn(),this.sG=0},this.rG=()=>{if(this.sG)return;const t=this.ku,i=this._u;t===this.tG&&i===this.$Y||(this.sG=Vs(this.lG))},this.aG=()=>{this.uG||(this.uG=u(this.dG,66))},this.dG=()=>{this.uG=void 0,this.fG()},this.fG=()=>{this.rG()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.oG=r,this.nG=h.createElement("div"),this.cG=h.createElement("div"),this.hG=h.createElement("div"),this._G=h.createElement("div"),VE(this.nG),VE(this.hG),WE(this.cG),function(t){WE(t),t.style.width="200%",t.style.height="200%"}(this._G),r.appendChild(this.nG),r.appendChild(this.hG),this.nG.appendChild(this.cG),this.hG.appendChild(this._G),t.appendChild(r),this.nG.addEventListener("scroll",this.rG),this.hG.addEventListener("scroll",this.rG),s&&s.addEventListener("resize",this.aG),this.rG()}},qE=class extends i{bn(t){this.iG||("function"==typeof Ys.ResizeObserver?this.iG=new UE(this.we,this.eG):this.iG=new HE(this.we,this.eG,t))}gn(){this.Vo(),this.iG&&(this.iG.gn(),this.iG=void 0)}get _u(){return this.iG?this.iG._u:0}get ku(){return this.iG?this.iG.ku:0}constructor(t){super(),this.iG=void 0,this.eG=(t,i)=>{this.Co(new PE(t,i))},this.we=t}};r(),r();var kc=class extends gg{constructor(){super(Pc.ra)}};r();var Cc=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let i of t)if(i[1]in h)return{gG:i[0],wG:i[1],AG:i[2],vG:i[3],Qe:i[4],mG:i[5]}}();r();var XE=class extends gg{constructor(){super(Pc.ca)}},ZE=class t extends i{static ia(t){return Boolean(Cc&&h[Cc.vG]&&Cc.gG in t)}mo(){const t=this.we[Cc.gG]();t&&t.then?t.then(this.pG,this.yG):(h.removeEventListener(Cc.mG,this.yG),h.addEventListener(Cc.mG,this.yG))}So(){const t=h[Cc.wG]();t&&t.then?t.then(this.pG,this.yG):(h.removeEventListener(Cc.mG,this.yG),h.addEventListener(Cc.mG,this.yG))}YR(){const t=this.cs,i=this.we===h[Cc.AG];this.cs=i,t!==i&&this.Co(new kc)}GR(){this.Co(new Du)}gn(){this.Vo(),h.removeEventListener(Cc.Qe,this.pG),h.removeEventListener(Cc.mG,this.yG)}constructor(i){super(),this.cs=!1,this.pG=()=>this.YR(),this.yG=()=>this.GR(),this.we=i,this.ta=t.ia(i),h.addEventListener(Cc.Qe,this.pG),this.YR()}},KE=class t extends i{static ia(t){return li.Ga&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}mo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?li.Ga?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}So(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}YR(){const t=this.cs;let i;i=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=i,t!==i&&this.Co(new kc)}gn(){this.Vo(),this.we.removeEventListener("webkitbeginfullscreen",this.pG),this.we.removeEventListener("webkitendfullscreen",this.pG),this.we.removeEventListener("webkitpresentationmodechanged",this.pG)}constructor(i){super(),this.cs=!1,this.pG=()=>this.YR(),this.we=i,this.ta=t.ia(i),this.we.addEventListener("webkitbeginfullscreen",this.pG),this.we.addEventListener("webkitendfullscreen",this.pG),this.we.addEventListener("webkitpresentationmodechanged",this.pG),this.YR()}},JE=class extends i{get ta(){return!!this.MG&&this.MG.ta}get cs(){return this.UR}mo(){this.MG?this.MG.mo():this.Co(new Du)}So(){for(const t of this.TG)t.cs&&t.So()}NG(t){this.MG=t}DG(t){this.TG.push(t),t.yn(Pc.ra,this.YR),t.yn(Pc.ha,this.Ds),this.YR()}SG(t){Et(this.TG,t),t.fn(Pc.ra,this.YR),t.fn(Pc.ha,this.Ds)}IG(){for(const t of this.TG)if(t.cs)return!0;return!1}Zn(){this.MG=void 0,this.UR=!1;const t=this.TG.slice();for(const i of t)this.SG(i),i.gn();this.YR()}gn(){this.Vo(),this.Zn()}constructor(...t){super(...t),this.TG=[],this.MG=void 0,this.UR=!1,this.YR=()=>{const t=this.UR,i=this.IG();t!==i&&(this.UR=i,this.Co(new kc))}}},$E=class extends i{get ta(){return!!this.EG&&this.bG.ta}get cs(){return this.bG.cs}mo(){this.EG&&this.bG.mo()}So(){this.bG.So()}LG(){this.bG.yn([Pc.ra,Pc.ca],this.YR),this.bG.yn(Pc.ha,this.Ds)}kG(){this.bG.fn([Pc.ra,Pc.ca],this.YR),this.bG.fn(Pc.ha,this.Ds)}Qn(){const t=this.bG,i=this.t.Rg();if(t===i)return;this.oa=!0;const e=this.cs,s=this.ta;e&&this.So(),this.kG(),this.bG=i,this.LG(),e&&!this.cs&&this.ta?this.mo():this.So(),this.oa=!1,s!==this.ta&&this.Co(new XE),e!==this.cs&&this.Co(new kc)}gn(){this.Vo(),this.kG(),this.t.fn(t.CA,this.CG)}constructor(i,e){super(),this.oa=!1,this.CG=()=>this.Qn(),this.YR=t=>{this.oa||this.Co(t)},this.t=i,this.EG=e,this.bG=new Ro,this.LG(),this.t.yn(t.CA,this.CG),this.Qn()}};r(),r(),r(),r(),r(),r(),r(),M_(),r();var tb,ib=class extends Jo{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}};function eb(t){return function(t){return new f({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function sb(t){return eb(function(t){return new T(t)}(t))}function qt(t,i){return function(t,i){let e=i;const s=t.getReader(),n=new No,r=()=>{h();const t=new sa;s.cancel(t).catch(xs),n.xL(t)},h=()=>{e&&(e.r_(r),e=void 0)};e&&(e.$f?r():e.n_(r));const o=[],a=t=>t.done?(h(),Promise.resolve(o)):(o.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{h(),n.CL(t)}),(t=>{h(),n.xL(t)})),n.OL}(t,i).then((t=>Lh(t).buffer))}function nb(t,i){let e=i;const{readable:s,writable:n}=new xh,r=n.getWriter(),h=()=>{e&&e.c_()};return r.closed.then(h,h),t.then((t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(xs))),(t=>(e=void 0,r.releaseLock(),n.abort(t).catch(xs)))),s}function rb(t){const{readable:i,writable:e}=new xh;return t.pipeTo(e,{preventCancel:!0}).catch((i=>{let e;e=Yn(i)?i[0]===i[1]||Oi(i[0])&&Oi(i[1])?i[0]:new ib(i):i,t.cancel(e).catch(xs)})),i.tee()}function hb(t){return wa(new T(t))}function ob(t){return FA(t).buffer}r(),function(t){t[t.zI=0]="zI",t[t.xG=1]="xG"}(tb||(tb={}));var ab="content-type",ub="text/plain;charset=UTF-8",Ru=class{Lj(t){return this.fE(t).then(JSON.parse)}aj(t,i){switch(t){case nr.OI:return this.qj(i);case nr.jI:return this.Lj(i);case nr.zI:return this.OG();case nr.Ru:return this.fE(i);default:throw new k}}};function cb(t,i,e){if(t instanceof Ru)return t;if(t instanceof f)return function(t,i){return new db({hA:0,OG:t,IP:lb(i)})}(t,e);const s=lb(e),n=Promise.resolve(t).then((t=>function(t,i){if(t){if("string"==typeof t)return{hA:nr.Ru,$I:t,IP:i||ub};if(t instanceof ArrayBuffer||ga(t))return{hA:nr.OI,$I:mb(t),IP:i};if(ui(t)||Yn(t))return{hA:nr.jI,$I:t,IP:i};throw new k("Unsupported BodyInit type")}return{hA:nr.Ru,$I:null,IP:i}}(t,s)));return new db({hA:1,OL:n,jG:i})}function lb(t){return(t.get(ab)||"").toLowerCase()}var db=class t extends Ru{get zG(){return this.BG}UG(){return this.QG.OL}fE(t){return this.FG(fb,t)}Lj(t){return this.FG(gb,t)}qj(t){return this.FG(Ab,t)}OG(){return this.YG(function(t){return 0===t.hA?t.OG:nb(t.OL.then(vb).then(sb),t.jG)}(this.GG))}FG(t,i){if(this.BG)return Promise.reject(new k("Already used"));this.BG=!0;const e=t(this.GG,i);return this.QG.l_(e.then(xs)),e}YG(t){if(this.BG)throw new k("Already used");if(t.locked)throw new k("Body stream is locked");this.BG=!0;const i=new xh,e=Promise.resolve(t.pipeTo(i.writable));return this.QG.l_(e),i.readable}VG(t){this.GG=t,1===t.hA&&t.OL.catch(xs)}WG(){if(this.BG)throw new k("Already used");const i=function(t){if(0===t.hA){const[i,e]=t.OG.tee();return[{hA:t.hA,OG:i,IP:t.IP},{hA:t.hA,OG:e,IP:t.IP}]}{const[i,e]=t.jG.d_();return[{hA:t.hA,OL:t.OL,jG:i},{hA:t.hA,OL:t.OL,jG:e}]}}(this.GG),e=i[0],s=i[1];return this.VG(e),new t(s)}constructor(t){super(),this.BG=!1,this.QG=new No,this.QG.OL.catch(xs),this.VG(t)}};function fb(t,i){return 0===t.hA?qt(t.OG,i).then(hb):(i&&t.jG.l_(i),H(t.OL.then(_b),t.jG))}function _b(t){switch(t.hA){case nr.Ru:return Promise.resolve(t.$I||"");case nr.OI:return Promise.resolve(t.$I).then(hb);case nr.jI:return Promise.resolve(t.$I).then(JSON.stringify)}}function gb(t,i){return 0===t.hA?fb(t,i).then(JSON.parse):(i&&t.jG.l_(i),H(t.OL.then(wb),t.jG))}function wb(t){return t.hA===nr.jI?Promise.resolve(t.$I):_b(t).then(JSON.parse)}function Ab(t,i){return 0===t.hA?qt(t.OG,i):(i&&t.jG.l_(i),H(t.OL.then(vb),t.jG))}function vb(t){switch(t.hA){case nr.OI:return Promise.resolve(t.$I);case nr.Ru:case nr.jI:return _b(t).then(ob)}}function mb(t){return t instanceof ArrayBuffer?t:Pe(xe(t)).buffer}var pb=class extends Ru{get zG(){return this.HG.zG}UG(){return this.HG.UG()}fE(t){return this.HG.fE(t)}Lj(t){return this.HG.Lj(t)}qj(t){return this.HG.qj(t)}OG(){return this.HG.OG()}WG(){return this.HG.WG()}constructor(t){super(),this.HG=t}};function mc(t){return t.TI>=200&&t.TI<=299||304===t.TI}var Hh=class t extends pb{Cp(t){return this.aj(this.eE,t)}Sp(){return new t({Cp:this.WG(),mI:this.mI},this)}constructor(t,i){let e,s,n,r,h;i?(e=i.tE,s=i.eE,n=i.TI,r=i.Cj,h=i.qG):(e=[],s=nr.Ru,n=200,r="OK",h=!1);const o=t.mI,a=new Ko(t.tE||e),u=t.eE||s,c=t._E||(i&&i.mI===o?i._E:o.zu),l=i?i.HG:null;super(cb(void 0!==t.Cp?t.Cp:l,t.jG||new Po,a)),this.tE=a,this.mI=o,this._E=c,this.eE=u,this.TI=void 0!==t.TI?t.TI:n,this.Cj=void 0!==t.Cj?String(t.Cj):r,this.qG=t.qG||h}},yb=class{mI(i){const e=function(i){return new Hh({Cp:null,tE:{},mI:i,_E:i.zu,eE:i.eE,TI:0,Cj:t.YA})}(new nc(i));return Promise.resolve(e)}bY(t){}gn(){}};var Mb=class t{static get XG(){return t.ZG||(t.ZG=new t(new yb)),t.ZG}mI(t){const i=this.KG(t);return this.JG.mI(i)}bY(t){return this.JG.bY(this.$G(t))}KG(i){let e=new nc(i);if(!this.tV){const i=t.iV(e.zu);e=new nc({zu:i},e)}return e}$G(i){let e=i.zu;return this.tV||(e=t.iV(e)),{zu:e,$I:i.$I}}static iV(t){return ag.eV&&Kg(t,"http://")?t.replace(":","s:"):t}gn(){this.JG.gn()}constructor(t,i=!0){this.JG=t,this.tV=i}};function Tb(t){let i;return{get url(){return t.zu},get method(){return t.iE},get headers(){return i||(i=t.tE.BI()),i},get body(){return t.$I},get useCredentials(){return t.hE},get type(){return t.hA},get subType(){return t.nE},get mediaType(){return t.rE},get responseType(){return t.eE}}}function Nb(t){switch(t.toLowerCase()){case"arraybuffer":return nr.OI;case"json":return nr.jI;case"stream":return nr.zI;default:return nr.Ru}}function Db(t){switch(t.toUpperCase()){case"POST":return Kc.POST;case"PUT":return Kc.PUT;case"DELETE":return Kc.DELETE;case"HEAD":return Kc.HEAD;case"OPTIONS":return Kc.OPTIONS;default:return Kc.GET}}function Sb(t){switch(t.toLowerCase()){case"manifest":return zu.QI;case"segment":return zu.FI;case"preload-hint":return zu.YI;case"content-protection":return zu.GI;default:return zu.KT}}function Ib(t){switch(t.toLowerCase()){case"initialization-segment":return jo.VI;case"fairplay-license":return jo.WI;case"fairplay-certificate":return jo.HI;case"widevine-license":return jo.qI;case"widevine-certificate":return jo.XI;case"playready-license":return jo.ZI;case"clearkey-license":return jo.KI;case"aes128-key":return jo.JI;default:return jo.KT}}function Eb(t){switch(t.toLowerCase()){case"audio":return rn.mp;case"video":return rn.vp;case"text":return rn.Ru;case"image":return rn.ZT;default:return rn.KT}}Mb.ZG=void 0,r(),r(),r();var bb=class{get sV(){return this.nV.OL}get va(){return this.Xa||(this.Xa=this.rV()),this.Xa}get hV(){return this.oV}get aV(){return!this.oV}get uV(){return this.cV>0}get yI(){return this.MI}qp(){this.oV=!0,this.nV.CL(null)}lV(){this.nV.xL(new ib(this.dV))}fV(t){if(!this.aV)throw new k("Cannot respond more than once");if(!lt(t))throw new k("Expected valid response");this.MI=this._V(t),this.qp()}gV(){try{const t=this.wV(this.va);t?this.AV(t):this.uV||this.hV||this.qp()}catch(t){this.dV.push(t),this.lV()}}AV(t){if(this.hV)throw new b("Request has been redirected or a response already exists");if(pu(t))this.vV(t);else{if("function"!=typeof t)throw new k("Expected promise or function");{const i=new No,e=t=>{t?i.xL(t):i.CL(void 0)};try{const s=t(e);pu(s)&&i.l_(s)}catch(t){i.xL(t)}this.vV(i.OL)}}}async vV(t){try{this.cV++,await t,this.cV--,this.uV||this.hV||(this.dV.length?this.lV():this.qp())}catch(t){this.cV--,this.dV.push(t),this.uV||this.hV||this.lV()}}constructor(t,i){this.mV=t,this.wV=i,this.nV=new No,this.dV=[],this.Xa=void 0,this.oV=!1,this.MI=void 0,this.cV=0}},Lb=class t extends bb{get $I(){return this.pV}get tE(){return this.mV.tE}get mI(){return this.mV.mI}get yI(){return this.MI}get TI(){return this.mV.TI}get Cj(){return this.mV.Cj}get zu(){return this.mV._E}static yV(t,i,e){const s=void 0===t.body?e:t.body;return new Hh({Cp:s,mI:i.mI,eE:i.mI.eE,tE:t.headers,TI:t.status,Cj:t.statusText,_E:t.url,qG:!0},i)}rV(){return function(t){let i;const e=Tb(t.mI);return{get closed(){return!t.aV},get request(){return e},get url(){return t.zu},get status(){return t.TI},get statusText(){return t.Cj},get headers(){return i||(i=t.tE.BI()),i},get body(){return t.$I},respondWith:i=>t.fV(i),waitUntil:i=>t.AV(i)}}(this)}_V(i){return t.yV(i,this.mV,this.pV)}constructor(t,i,e){super(t,i),this.pV=e,this.gV()}};r();var kb=class extends bb{get $I(){return this.mV.$I}get aV(){return this.MV&&!this.oV}get tE(){return this.mV.tE}get iE(){return this.mV.iE}get TV(){return this.NV}get yI(){return this.MI}get eE(){return this.mV.eE}get NI(){return this.mV.NI}get sE(){return this.mV.sE}get a_(){return this.mV.a_}get hA(){return this.mV.hA}get nE(){return this.mV.nE}get rE(){return this.mV.rE}get zu(){return this.mV.zu}get hE(){return this.mV.hE}get oE(){return this.mV.oE}rV(){return function(t){let i;return{get url(){return t.zu},get method(){return t.iE},get headers(){return i||(i=t.tE.BI()),i},get body(){return t.$I},get closed(){return!t.aV},get useCredentials(){return t.hE},get type(){return t.hA},get subType(){return t.nE},get mediaType(){return t.rE},get responseType(){return t.eE},redirect:i=>t.DV(i),respondWith:i=>t.fV(i),waitUntil:i=>t.AV(i)}}(this)}_V(t){const i=this.mV.$I,e=new Hh({Cp:i,tE:{},mI:this.mV,_E:this.mV.zu,eE:this.mV.eE,TI:200,Cj:"OK"});return Lb.yV(t,e,i)}DV(t){if(!this.aV)throw new k("Cannot redirect, already redirected or has a response");let i;i=ae(t)?{url:t}:t,this.NV=function(t,i){return new nc({zu:void 0===t.url?i.zu:t.url,iE:void 0!==t.method?Db(t.method):void 0,tE:t.headers,$I:t.body,hE:t.useCredentials,hA:void 0!==t.type?Sb(t.type):void 0,nE:void 0!==t.subType?Ib(t.subType):void 0,rE:void 0!==t.mediaType?Eb(t.mediaType):void 0,eE:void 0!==t.responseType?Nb(t.responseType):void 0},i)}(i,this.mV),this.qp()}constructor(t,i,e){super(t,i),this.NV=void 0,this.MV=e,this.gV()}};var Cb=class extends Mb{SV(t){this.EV.SV(t)}bV(t){this.EV.bV(t)}LV(t){this.EV.LV(t)}cQ(t){this.EV.cQ(t)}_Q(t){this.EV._Q(t)}constructor(t,i=!0){const e=new xb(t);super(e,i),this.EV=e}},xb=class{async mI(t){let i;try{i=await this.kV(t,t.a_)}catch(i){if(i instanceof ai)return await this.CV(i,t.a_);throw i}if(i=await this.xV(i,t.a_),mc(i))return i;throw new ve(i)}bY(t){return this.JG.bY(t)}async kV(t,i){Pi(i);let e,s=t;for(const t of this.OV.slice()){Pi(i);const n=new kb(s,t,!e);if(!n.hV)try{await n.sV}catch(t){0;continue}n.TV&&!e?s=n.TV:n.yI&&!e&&(e=n.yI)}return e||this.JG.mI(s)}async CV(t,i){let e;e=t instanceof ve?t.yI:new Hh({Cp:null,mI:t.mI,TI:0,Cj:""});const s=await this.xV(e,i);if(s===e)throw t;if(mc(s))return s;throw new ve(s)}async xV(t,i){let e=t;for(const t of this.jV.slice()){Pi(i);const s=await Promise.resolve(e.Sp().Cp(i)),n=new Lb(e,t,s);if(!n.hV)try{await n.sV}catch(t){0;continue}e=n.yI||e}return e}SV(t){this.OV.unshift(t)}bV(t){this.OV.push(t)}LV(t){Et(this.OV,t)}cQ(t){this.jV.unshift(t)}_Q(t){Et(this.jV,t)}gn(){this.JG.gn(),Ri(this.OV),Ri(this.jV)}constructor(t){this.OV=[],this.jV=[],this.JG=t}};r();var qa,Ob=class{get va(){return this.Xa||(this.Xa=function(t){return{addRequestInterceptor(i){t.SV(i)},removeRequestInterceptor(i){t.LV(i)},addResponseInterceptor(i){t.cQ(i)},removeResponseInterceptor(i){t._Q(i)}}}(this)),this.Xa}SV(t){this.dE.SV(t)}LV(t){this.dE.LV(t)}cQ(t){this.dE.cQ(t)}_Q(t){this.dE._Q(t)}constructor(t){this.dE=t}},jb=class extends i{get va(){return this.Xa||(this.Xa=function(t){return{get online(){return t.eg},get estimator(){return function(t){return{get bandwidth(){return t.Xz},get roundTripTime(){return t.Zz}}}(t.zV)},setEstimator(i){t.PV(function(t){if(!t)return;return{get Xz(){return Eg(t.bandwidth)},get Zz(){return Eg(t.roundTripTime)},Kz:i=>function(t){if(!t)return;return{BV(i){t.markRequestStart(i)},RV(i){t.markResponseStart(i)},QV(i,e){t.markResponseData(i,e)},FV(i){t.markResponseEnd(i)}}}(t.createMeasurer(Tb(i)))}}(i))},addRequestInterceptor(i){t.SV(i)},removeRequestInterceptor(i){t.LV(i)},addResponseInterceptor(i){t.cQ(i)},removeResponseInterceptor(i){t._Q(i)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}(this)),this.Xa}get eg(){return this.YV.eg}get zV(){return this.vR.zV}PV(t){this.vR.PV(t)}SV(t){this.dE.SV(t)}LV(t){this.dE.LV(t)}cQ(t){this.dE.cQ(t)}_Q(t){this.dE._Q(t)}gn(){this.Vo(),this.YV.fn(t.GA,this.GV),this.YV.fn(t.YA,this.VV)}constructor(i,e,s){super(e),this.YV=i,this.dE=e,this.vR=s,this.GV=t=>{this.Co(t)},this.VV=t=>{this.Co(t)},this.YV.yn(t.GA,this.GV),this.YV.yn(t.YA,this.VV)}};r(),r(),r(),function(t){t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth"}(qa||(qa={})),r();function zb(t,i,e,s,n,r){const h=[];let o=t-x.max(r,1),a=t+n;if(i&&e){const t=hi(e,1,5),s=i-t;o=x.min(o,s);const n=i+e+t;a=x.max(a,n)}0!==o&&s.ZB(0,o)&&h.push([0,o]);return s.ZB(a,1/0)&&h.push([a,1/0]),h}function fc(t){return t instanceof b&&"QuotaExceededError"===t.name}r();var Pb={type:qa.BANDWIDTH};function Bb(t){const i=se(Pb);return ae(t)?i.type=Rb(t):lt(t)&&function(t){switch(t){case qa.PERFORMANCE:case qa.QUALITY:case qa.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=Rb(t.type)),lt(t)&&lt(t.metadata)&&(i.metadata=function(t){const i={},e=Ee(t.bitrate);return j(e)||(i.bitrate=e),i}(t.metadata)),i}function Rb(t){switch(t){case"bandwidth":return qa.BANDWIDTH;case"performance":return qa.PERFORMANCE;case"quality":return qa.QUALITY}}r();var Ub=class extends gg{constructor(t){super("WV"),this.HV=t}};r();var Qb=class extends gg{constructor(t){super("qV"),this.XV=t}};r();var Fb=class extends gg{constructor(t){super("ZV"),this.KV=t}},Yb=class extends i{JV(t){this.$V=t}get tW(){switch(this.iW.type){case qa.PERFORMANCE:return 0;case qa.QUALITY:return 1/0;case qa.BANDWIDTH:return this.iW.metadata&&void 0!==this.iW.metadata.bitrate?this.iW.metadata.bitrate:ca.dL.Bz();default:return ca.dL.Bz()}}get va(){return this.Xa}get XV(){return this.iW}set XV(t){this.iW=t,this.Co(new Qb(t))}get HV(){return this.eW}set HV(t){this.eW=t,this.Co(new Ub(t))}get sW(){return x.min(this.eW,this.nW)}get KV(){return this.rW}set KV(t){this.rW=t,this.Co(new Fb(t))}get hW(){return this.nW}get zV(){var t;return null!=(t=this.oW)?t:this.$V.DP}PV(t){this.oW=t}aW(t){let i=x.min(t,.8*this.nW);if(i=x.max(10,i),this.nW===i)return!1;const e=this.sW;this.nW=i;const s=this.sW;return s!==e&&this.Co(new Ub(s)),!0}get uW(){return this.cW}set uW(t){this.cW=t}constructor(...t){super(...t),this.Xa=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.XV)},set strategy(i){t.XV=Bb(i)},get targetBuffer(){return t.HV},set targetBuffer(i){const e=Ee(i);j(e)||(t.HV=e)},get bufferLookbackWindow(){return t.KV},set bufferLookbackWindow(i){const e=Ee(i);j(e)||(t.KV=e<=0?30:e)},get maxBufferLength(){return t.hW},get clearBufferWhenSettingTargetQuality(){return t.uW},set clearBufferWhenSettingTargetQuality(i){t.uW=Ig(i)}}}(this),this.iW=Pb,this.eW=20,this.rW=30,this.nW=1/0,this.cW=!1,this.oW=void 0}};r(),r();var Gb=class extends Ha{fa(){return new Vb}constructor(){super("yw")}},Vb=class extends gg{constructor(){super("change")}};r(),r();var Lu=class extends i{gn(){this.Vo();for(const t of this.ER)this.lW.fn(t,this.dW)}constructor(t,i,e){super(e),this.dW=t=>{wg(t)&&yc((()=>{this.Co(t.va)}))},this.lW=t,this.ER=i;for(const t of this.ER)this.lW.yn(t,this.dW)}},ma=class extends ha{gn(){this.Vo(),this.lW.N_(this.dW)}constructor(t,i){super(i),this.dW=t=>{wg(t)&&yc((()=>{this.Co(t.va)}))},this.lW=t,this.lW.m_(this.dW)}};var Wb=class extends ha{get zN(){return this.WN}set zN(t){if(this.PN<=t)throw new b("Start time of a clip should be smaller than the end time.");this.WN!==t&&(this.WN=t,this.Co(new Gb))}get PN(){return this.XN}set PN(t){if(t<=this.zN)throw new b("End time of a clip should be larger than the start time.");this.XN!==t&&(this.XN=t,this.Co(new Gb))}get va(){return this.Xa||(this.Xa=function(t){let i,e={get startTime(){return t.zN},set startTime(i){t.zN=i},get endTime(){return t.PN},set endTime(i){t.PN=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new ma(t,e),e}(this)),this.Xa}Zn(){0===this.WN&&this.XN===1/0||(this.WN=0,this.XN=1/0,this.Co(new Gb))}fW(){return new Ki([this.zN,this.PN],[!0,!0])}constructor(...t){super(...t),this.WN=0,this.XN=1/0}};r();var Hb=class i extends _g{P_(t){const i=this._W.fW().RB(t);super.P_(i),this.gW()}U_(){return super.U_()||this.wW}get AW(){return this.Mg().length?this.Mg():this._W.fW().ks()}Mg(){return Ki.xn(super.Mg()).Sn(this._W.fW()).ks()}Vg(){this.U_()?this.P_(this.AW.start(0)):this.vW(),super.Vg(),this.gW()}async ga(t,i){Pi(i),this.wW=!1,this._W.Zn(),await super.ga(t,i)}gn(){return this._W.fn("yw",this.mW),this.I_.fn(t.ov,this.wc),this.pW(),super.gn()}$g(i){switch(i.type){case t.ZA:return this.Co(i),this.yW(),!0;case t.XA:case t.bA:return this.Co(i),this.MW(),!0;case t.kA:if(this.TW)return!0}return super.$g(i)}get TW(){return this._W.PN<this.ct}pW(){this.NW&&(Gs(this.NW),this.NW=void 0)}gW(){const t=this.j_,e=this.TW&&t>=this._W.PN-i.Zl;this.wW&&!e?(this.wW=!1,this.hg&&this.Vg()):this.wW||!e||this.Tg||this.DW||(this.wW=!0,this.Co(new ys(t)),this.Gg())}vW(){if(this.ct===1/0)return;const t=this.AW,e=Ki.xn(t).RB(this.j_);Ua(this.j_,e,i.Zl)||this.P_(e)}constructor(e,s){super(e),this.wW=!1,this.NW=void 0,this.DW=!1,this.mW=()=>{this.vW(),this.gW()},this.wc=()=>{this.pW(),this.gW();this.TW&&this.j_>=this._W.PN-i.SW&&!this.R_&&(this.NW=Vs(this.wc))},this.yW=()=>{this.DW=!0},this.MW=()=>{this.DW&&(this.DW=!1,this.gW())},this._W=s,this._W.yn("yw",this.mW),this.I_.yn(t.ov,this.wc)}};Hb.SW=1,Hb.Zl=.001,r();var qb=class{get IW(){return this.EW}set IW(t){this.EW=t}constructor(){this.EW=!1}};r();var Xb=class extends _g{U_(){return!this.EW.IW&&super.U_()}Gg(){this.bW=!0,super.Gg()}Vg(){this.bW=!1,super.Vg()}$g(i){if(this.EW.IW)switch(i.type){case t.kA:return this.j_=0,this.bW||(this.Tg?this.LW=!0:this.Vg()),!0;case t.XA:this.LW&&(this.LW=!1,this.Vg());break;case t.Sh:if(this.LW||super.U_())return!0}return super.$g(i)}constructor(t,i){super(t),this.LW=!1,this.bW=!1,this.EW=i}};r(),r();var Zb=class{get va(){return this.Xa}get uN(){return this.Qo.q_.uN}get lN(){return this.Qo.q_.lN}get aN(){return this.Qo.q_.aN}get kW(){throw new b("Not implemented")}get xW(){throw new b("Not implemented")}get dN(){return this.Qo.q_.dN}get cN(){return this.Qo.q_.cN}get fN(){return this.Qo.q_.fN}constructor(t){this.Qo=t,this.Xa=function(t){return{get currentBandwidthEstimate(){return t.lN},get corruptedVideoFrames(){return t.uN},get droppedVideoFrames(){return t.aN},get totalBytesLoaded(){return t.dN},get bufferedSegments(){return t.fN}}}(this)}};function Kb(t){if(!t||!Fs(t))return{aN:0,uN:0,cN:0,lN:0,dN:0,fN:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{aN:i.droppedVideoFrames,uN:i.corruptedVideoFrames||0,cN:i.totalVideoFrames}}return{aN:t.webkitDroppedFrameCount||0,uN:0,cN:t.webkitDecodedFrameCount||0}}r(),r();var Jb=class extends Ha{fa(){return new $b}constructor(){super("OW")}},$b=class extends gg{constructor(){super("castingchange")}};r();var tL=class extends i{get jW(){var t,i;return(null==(t=this.zW)?void 0:t.jW)||(null==(i=this.PW)?void 0:i.jW)||!1}get BW(){return this.zW}get RW(){return this.PW}UW(t){this.zW=t,this.QW(t)}FW(t){this.PW=t,this.QW(t)}QW(t){t.yn("statechange",this.YW)}GW(t){t.fn("statechange",this.YW)}get va(){return this.Xa||(this.Xa=function(t){let i;const e={get casting(){return t.jW},get airplay(){var i;return null==(i=t.BW)?void 0:i.va},get chromecast(){var i;return null==(i=t.RW)?void 0:i.va},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Lu(t,["OW"],e),e}(this)),this.Xa}gn(){this.Vo(),this.zW&&(this.GW(this.zW),this.zW=void 0),this.PW&&(this.GW(this.PW),this.PW=void 0)}constructor(...t){super(...t),this.zW=void 0,this.PW=void 0,this.VW=!1,this.Xa=void 0,this.YW=()=>{const t=this.VW,i=this.jW;t!==i&&(this.VW=i,this.Co(new Jb))}}};r(),r();var tn=class{static async WW(t,i){try{const e=new nc({zu:t,eE:nr.Ru,iE:Kc.GET}),s=await i.mI(e);return(await s.Cp()).trim()}catch(t){return void Oi(t)}}static HW(t){try{const i=uE(t);return new _E(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new ce(le.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static qW(t){void 0===t&&(t=tE.lh),ag.Pv("The baked-in license is used. Please update the configuration with your license.");const i=t.fF("F2b-iL'[FL[S"),e=JSON.parse('["F$(:_L50F|aY"]').map((i=>t.fF(i))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((i=>t.fF(i))),n=Number(new Date(Number(t.fF('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((i=>t.fF(i)));return new _E(i,e,s,n,r)}static convertLicenseToDummyLicense(t){return new _E(t.yF,t.MF,t.TF,864e13,t.DF,t.SF,Date.now(),t.EF,t.bF)}};r();var vt=class t{static QQ(){return t.dL||(t.dL=iL.Px()?new iL:new bt),t.dL}static kL(i){t.QQ().kL(i)}static UQ(){t.QQ().UQ()}static EL(i){return t.QQ().EL(i)}static xz(i,e){t.QQ().xz(i,e)}static XW(i){const e=t.EL(i);if(void 0!==e)return S(e)}static ZW(i){return"true"===t.EL(i)}};vt.dL=void 0;var iL=class extends vt{static Px(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}kL(t){self.localStorage.removeItem(t)}UQ(){self.localStorage.clear()}EL(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}xz(t,i){self.localStorage.setItem(t,i)}},eL="https://validate.theoplayer.com/1/",sL=72e5,nL=x.floor(14399999*x.random()-sL),rL="THEOplayer.license",hL=class{async KW(){const t=await this.JW(this.$W.license,this.$W.licenseUrl);this.vY.tH(t)}async JW(t,i){let e,s=i;t?e=tn.HW(t):s||(e=tn.qW()),s||(s=eL+e.yF);const n=this.iH();let r;if(e&&(r=this.eH.RF(e),r===Js.vF)){if(this.sH(e.NF)&&this.sH(null==n?void 0:n.NF)){const t=await this.nH(s);if(t)return t}return e}if(n){if(this.eH.RF(n)===Js.vF){if(this.sH(null==n?void 0:n.NF)){const t=await this.nH(s);if(t)return t}return n}vt.kL(rL)}const h=await tn.WW(s,this.dE);let o;if(h){o=tn.HW(h);if(this.eH.RF(o)===Js.vF)return vt.xz(rL,h),o;vt.kL(rL)}else if(!this.VF&&e&&r===Js.mF&&s===eL+e.yF)return tn.convertLicenseToDummyLicense(e);if(!e&&!o)throw new ce(le.LICENSE_ERROR,"The given license is invalid!");this.rH(null!=e?e:o,new ce(le.LICENSE_ERROR,"The given license is invalid!"))}async xF(t){let i=await this.vY.AY();if(this.sH(i.NF)){var e;const t=null!=(e=this.$W.licenseUrl)?e:eL+i.yF,s=await this.nH(t);s&&(this.vY.tH(s),i=s)}try{const e=this.eH.RF(i);if(e===Js.pF){const t=fE.LF;throw new ce(wE(t),Vt.PF(t))}if(e===Js.mF){const t=fE.mF;throw new ce(wE(t),Vt.PF(t))}this.eH.xF(t,i)}catch(t){this.hH(t)}}async BF(t){const i=await this.vY.AY();try{this.eH.BF(t,i)}catch(t){this.hH(t)}}async nH(t){try{const i=await tn.WW(t,this.dE);if(void 0===i)return;const e=tn.HW(i);return this.eH.RF(e)===Js.vF?(vt.xz(rL,i),e):void 0}catch(t){return}}sH(t){return!t||Number(new Date)+2592e5+nL>=t}iH(){const t=vt.EL(rL);if(t)return tn.HW(t)}rH(t,i){this.vY.tH(t),this.hH(i)}hH(t){throw Nu(t.message),this.oH.pY(t.message),t}constructor(t,i,e,s,n,r){this.dE=t,this.eH=i,this.oH=e,this.vY=s,this.$W=n,this.Ek=r,this.VF=yE(r)}};r();var oL=class{tH(t){this.aH=t,this.uH.CL()}get cH(){return this.aH}async AY(){return this.aH?Promise.resolve(this.aH):(await this.uH.OL,this.aH)}constructor(){this.uH=new No}};r(),r();var aL=class extends Ha{fa(){return new uL}constructor(){super("yw")}},uL=class extends gg{constructor(){super("change")}};function cL(t){let i;const e={get fontFamily(){return t.lH},set fontFamily(i){t.lH=i},get fontColor(){return t.dH},set fontColor(i){t.dH=i},get fontSize(){return t.fH},set fontSize(i){t.fH=i},get backgroundColor(){return t._H},set backgroundColor(i){t._H=i},get windowColor(){return t.gH},set windowColor(i){t.gH=i},get edgeStyle(){return t.wH},set edgeStyle(i){t.wH=i},get marginTop(){return t.AH},set marginTop(i){t.AH=i},get marginBottom(){return t.vH},set marginBottom(i){t.vH=i},get marginLeft(){return t.mH},set marginLeft(i){t.mH=i},get marginRight(){return t.pH},set marginRight(i){t.pH=i},addEventListener(t,e){const s=As(t,P);i.yn(s,e)},removeEventListener(t,e){const s=As(t,P);i.fn(s,e)}};return i=new nt(e),t.yn(["yw"],(t=>i.Co(t.va))),e}r();var lL={lH:void 0,dH:void 0,fH:void 0,_H:void 0,gH:void 0,wH:void 0,yH:void 0,AH:void 0,vH:void 0,mH:void 0,pH:void 0},_i="THEOplayer.textTrackStyle.",dL=class t extends i{get MH(){return this.TH}get lH(){return this.TH.lH}set lH(t){this.Qn({lH:t})}get dH(){return this.TH.dH}set dH(t){this.Qn({dH:t})}get fH(){return this.TH.fH}set fH(t){this.Qn({fH:t})}get _H(){return this.TH._H}set _H(t){this.Qn({_H:t})}get gH(){return this.TH.gH}set gH(t){this.Qn({gH:t})}get wH(){return this.TH.wH}set wH(t){this.Qn({wH:t})}get yH(){return this.TH.yH}get AH(){return this.TH.AH}set AH(t){this.Qn({AH:t})}get vH(){return this.TH.vH}set vH(t){this.Qn({vH:t})}get pH(){return this.TH.pH}set pH(t){this.Qn({pH:t})}get mH(){return this.TH.mH}set mH(t){this.Qn({mH:t})}get va(){return this.Xa||(this.Xa=cL(this)),this.Xa}Qn(i){this.TH=oe({},this.TH,i),t.NH(this.TH),this.Co(new aL)}static DH(){let t=oe({},lL);return t.lH=vt.EL(_i+"fontFamily")||t.lH,t.dH=vt.EL(_i+"fontColor")||t.dH,t.fH=vt.EL(_i+"fontSize")||t.fH,t._H=vt.EL(_i+"backgroundColor")||t._H,t.gH=vt.EL(_i+"windowColor")||t.gH,t.wH=vt.EL(_i+"edgeStyle")||t.wH,t}static NH(t){vt.xz(_i+"fontFamily",t.lH||""),vt.xz(_i+"fontColor",t.dH||""),vt.xz(_i+"fontSize",t.fH||""),vt.xz(_i+"backgroundColor",t._H||""),vt.xz(_i+"windowColor",t.gH||""),vt.xz(_i+"edgeStyle",t.wH||"")}constructor(){super(),this.Xa=void 0,this.TH=t.DH()}};function fL(t,i){var e,s;t.style.marginLeft=(null!=(e=i.mH)?e:0)+"px",t.style.marginRight=(null!=(s=i.pH)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}r(),r(),r(),r();var tt,_L=[t.jh,t.Sh,qo.Tv,t.ov,t.VA,t.UA,t.ZA,t.XA,t.kA,t.WA,t.uv,t.EA,qo.Mw,t.qA,Bi.ha,sr.LA,sr.NL,t.DA,t.NA,t.fv,t.zA,t.BA,t.OA,t.CA],gL={SH:!1};function wL(t){return t.wd.hA===wt.LO}r(),(tt||(tt={})).IH="EH";var at,on=["EH"];!function(t){t[t.bH=0]="bH",t[t.zI=1]="zI",t[t.LH=2]="LH"}(at||(at={})),r(),r();var AL,vL=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"];(AL||(AL={})).OU="kH";var mL=class extends i{get ht(){throw new b("Not implemented")}get wd(){return this.Zx}get pP(){return this.wO}get rt(){throw new b("Not implemented")}async CH(t,i){const e=await this.Cx.kx(t.fL,i),s=await e.yx();return await this.xH(s),s}OH(t){const i=this.wx;return i?0!==t.EP.length&&t.EP.some((t=>t.dm.fL===i.dm)):0!==this.Zx.EP.length?t.EP.some((t=>this.Zx.EP.some((i=>t.dm===i.dm)))):0===t.EP.length||!this.jH}zH(t){return this.PH.zH(t),this.Zx=t,Promise.resolve()}BH(t){return!1}async e_(){this.Vo(),this.wO.removeEventListener("loadedmetadata",this.RH);for(const t of vL)this.wO.removeEventListener(t,this.UH);await this.QH.gn(),this.FH(),await this.PH.Zn(),await this.YH(void 0)}GH(t){t!==this.VH&&(this.VH=t,t?this.WH.CL(void 0):this.WH=new No)}xH(t){return this.QH.nO((()=>this.YH(t)))}async YH(t){if(t&&!this.wO.src)throw new Yr(le.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.wO.src)throw new Yr(le.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.VH&&await this.WH.OL;const i=this.wx;i&&(await i.vx(this.wO),this.wx=void 0),t&&(await t.bn(this.wO),this.wx=t)}ga(t){return this.QH.nO((()=>this.HH(t)))}HH(t){this.GH(!1);const i=this.gP.ag;if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&li.Ga&&li.Qb>=17}(this.wO))try{this.wO.srcObject=t}catch(i){this.wO.src=URL.createObjectURL(t)}else this.wO.src=URL.createObjectURL(t);else this.wO.src=t;this.gP.ag=i}qH(t){return this.QH.nO((()=>this.XH(t)))}XH(t){this.HH(t),this.wO.load()}FH(){this.GH(!1),$N(this.wO)}async ZH(){this.wx&&await this.wx.Zn()}constructor(t,i,e,s){super(),this.VH=!1,this.WH=new No,this.jH=!1,this.QH=new Vi,this.wx=void 0,this.RH=()=>{this.jH=!0},this.UH=()=>{this.GH(!0)},this.Zx=t,this.gP=i,this.wO=i.pP,this.PH=e,this.Cx=s,this.wO.addEventListener("loadedmetadata",this.RH);for(const t of vL)this.wO.addEventListener(t,this.UH)}};var pL=class extends mL{get b_(){return Ki.xn(this.wO.buffered)}get ct(){return this.wO.duration}get KH(){const t=this.ct;if(!isFinite(t))return!1;const i=this.b_;if(0===i.U)return!1;return t-i.jn(i.U-1)<Dc}get gg(){return this.wO.preload}set gg(t){this.wO.preload=t}get yg(){return Ki.xn(this.wO.seekable)}get JH(){return this.b_}get $H(){if(Fs(this.wO)&&(this.wO.videoWidth>0||this.wO.videoHeight>0))return this.b_}async JV(){const t=this.wd;switch(t.LP){case Ds.Rv:case Ds.Uv:this.wO.setAttribute("crossorigin",t.LP);break;case Ds.Bv:default:this.wO.removeAttribute("crossorigin")}void 0!==t.gg?this.wO.preload=t.gg:this.wO.preload=ii.qz,void 0!==t.kP?this.wO.title=t.kP:ZN(this.wO),await this.ga(t.oA),this.PH.$n(this,t)}OH(t){return!1}zH(t){return Promise.resolve(void 0)}async e_(){ZN(this.wO),await super.e_()}static tq(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.IP))}};r();var N=class extends gg{constructor(i){super(t.VA),this.currentTime=i}};r();var yL,ie=class extends gg{constructor(){super(t.UA)}};r(),r(),(yL||(yL={})).iq="nq";var ML=class extends gg{constructor(t){super("nq"),this.rq=t}},TL=class extends i{get hq(){return this.oq}aq(t,i){const e=new Ki([t,i]);this.oq=this.oq.GB(e),this.Co(new ML(e))}uq(t,i){this.oq=this.oq.WB(new Ki([t,i]))}Zn(){this.oq=Ki.aR()}gn(){this.Vo()}constructor(...t){super(...t),this.oq=Ki.aR()}};r(),r(),r();var NL=class{start(t){this.uH=t,this.cq()&&this.lq()}pull(){this.Yd.length>0?this.dq():this.fq=!0,this.cq()&&this.lq()}cancel(t){return Ri(this.Yd),this.Gd=0,this.fq=!1,this.Nd.cancel(t)}dq(){if(0===this.Yd.length)return;const t=this.Yd;this.Yd=[],this.Gd=0,this.fq=!1,this.uH.enqueue(t)}cq(){if(this.fq)return!0;return this._q-this.Gd>0}lq(){if(this.gq)return;const t=this.Nd.read().then(this.wq).catch(this.Aq);this.gq=t;const i=()=>{this.gq===t&&(this.gq=void 0)};t.then(i,i)}constructor(t,{size:i=(()=>1),highWaterMark:e=1}){this.Yd=[],this.Gd=0,this.uH=void 0,this.fq=!1,this.gq=void 0,this.wq=t=>t.done?(this.dq(),void this.uH.close()):(this.Yd.push(t.value),this.Gd+=this.vq(t.value),this.fq&&this.dq(),this.cq()?this.Nd.read().then(this.wq):void 0),this.Aq=t=>{this.dq(),this.uH.error(t)},this.Nd=t.getReader(),this.vq=i,this._q=e}};r(),r(),r(),r();var DL,SL=class{mq(t){this.pq.push(t),this.ey+=t.byteLength}yq(t){if(this.ey<=t)return this.Mq();const i=this.pq;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(ml(i[s],0,r)),e+=r}return{pq:n,ey:e}}Tq(t){const i=this.yq(t);return 1===i.pq.length?i.pq[0]:Kw(i.pq,i.ey)}Mq(){return{pq:this.pq,ey:this.ey}}Nq(t){if(this.ey<=t)return this.Dq();const i=this.pq;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(ml(i[0],0,s)),i[0]=ml(i[0],s),e+=s}return this.ey-=e,{pq:n,ey:e}}Sq(t){const i=this.Nq(t);return 1===i.pq.length?i.pq[0]:Kw(i.pq,i.ey)}Dq(){const t=this.Mq();return this.pq=[],this.ey=0,t}Iq(){const t=1===this.pq.length?this.pq[0]:Kw(this.pq,this.ey);return this.pq=[],this.ey=0,t}constructor(){this.pq=[],this.ey=0}};!function(t){t[t.Eq=0]="Eq",t[t.bq=1]="bq",t[t.Lq=2]="Lq"}(DL||(DL={}));var Gu=class{kq(t,i){}Cq(){}xq(t){this.Yd.mq(t),this.Oq(!1)}jq(){this.Oq(!0)}zq(){return 0!==this.ja||0!==this.Yd.ey}Oq(t){for(;0!==this.Yd.ey;){if(!t&&this.Pq>this.Yd.ey)return;switch(this.ja){case 0:this.Bq(t);break;case 1:this.Rq(t);break;case 2:this.Uq(t)}}}Qq(){this.ja=0,this.Pq=8}Bq(t){const i=Ao(this.Yd.Tq(this.Pq)),e=new Vr,s=Mi.$p(i,e);if(!s.qp)return this.Pq=s.sy,void(t&&this.Pq>this.Yd.ey&&this.Fq(this.Yd.ey));const n=s.iy.hA;let r=s.iy.ey;0===r&&(r=1/0),this.kq(n,r),this.Yq(n)?this.Gq(r):this.Fq(r)}Gq(t){this.ja=1,this.Pq=t}Rq(t){const i=Ao(this.Yd.Sq(this.Pq)),e=new Vr,s=Mi.Xp(i,e,!t);if(!s.qp)throw new qA(e.Ku);this.Cq(),this.Vq(s.Zp),this.Qq()}Fq(t){this.ja=2,this.Pq=0,this.Wq=t}Uq(t){const i=this.Yd.Nq(this.Wq);this.Wq-=i.ey;for(const t of i.pq)this.Hq(t);(0===this.Wq||t&&this.Wq===1/0)&&(this.Cq(),this.Qq())}constructor(){this.Yd=new SL,this.ja=0,this.Pq=0,this.Wq=0,this.Qq()}};function IL(t){return t instanceof ze}function EL(t){return t instanceof Fe}function bL(t){return t instanceof bT||t instanceof nu}function LL(t){return t instanceof eT}function kL(t){return t instanceof xM}function CL(t){return t instanceof MT}function xL(t){return t instanceof pT}function OL(t){return t instanceof RT}function jL(t){return t instanceof zs}function zL(t){return t instanceof nn}function PL(t){return t instanceof zT}function BL(t,i){const e=H_(t.boxes,zL);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof zT&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}r();var RL=class extends Gu{start(t){this.uH=t}transform(t){this.xq(t)}flush(){this.jq()}Yq(t){return t===At.Tm||t===At.ep||t===At.fp}Vq(t){const i=this.qq(t);this.uH.enqueue(i)}Hq(t){this.uH.enqueue(t)}qq(t){const i=xe(t.Cp.Cp);switch(t.hA){case"moov":return this.Xq(i);case"sidx":return this.Zq(i);case"moof":return this.Kq(i)}return i}get Jq(){if(void 0===this.$q)throw new b("Expected to have found a movie header timescale.");return this.$q}tX(t){const i=this.iX.get(t);if(void 0===i)throw new b("Expected to have found a media header timescale for track ID "+t+".");return i}Xq(t){const i=sN(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof DT?i.boxes[t]=this.eX(e):e instanceof ST?i.boxes[t]=this.sX(e):e instanceof Fe&&this.nX(e)}for(const t of i.boxes)t instanceof MT&&this.rX(t);return i.serialize().join()}eX(t){this.$q=t.timescale;const i=tc(Se.fromNumber(t.duration,!0),this.Jq,this.hX);return 0!==i.getHighBits()?this.sX(function(t){return new ST({creation:Se.fromNumber(t.creationTime,!0),modification:Se.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Se.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.hX,t.duration=i.toInt(),t)}sX(t){return this.$q=t.timescale,t.timescale=this.hX,t.duration=tc(t.duration,this.Jq,this.hX),t}nX(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof bT?(i=s.trackId,t.boxes[e]=this.oX(s)):s instanceof nu?(i=s.trackId,t.boxes[e]=this.aX(s)):s instanceof eT?this.uX(s,i):s instanceof VM&&this.cX(s)}}oX(t){const i=tc(Se.fromNumber(t.duration,!0),this.Jq,this.hX);return 0!==i.getHighBits()?this.aX(function(t){return new nu({creation:Se.fromNumber(t.creationTime,!0),modification:Se.fromNumber(t.modificationTime,!0),duration:Se.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}aX(t){return t.duration=tc(t.duration,this.Jq,this.hX),t}uX(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof JM?t.boxes[e]=this.lX(s,i):s instanceof $M&&(t.boxes[e]=this.dX(s,i))}}lX(t,i){this.iX.set(i,t.timescale);const e=tc(Se.fromNumber(t.duration,!0),t.timescale,this.hX);return 0!==e.getHighBits()?this.dX(function(t){return new $M({creation:Se.fromNumber(t.creationTime,!0),modification:Se.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Se.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.hX,t.duration=e.toInt(),t)}dX(t,i){return this.iX.set(i,t.timescale),t.timescale=this.hX,t.duration=tc(t.duration,t.timescale,this.hX),t}cX(t){for(const i of t.boxes)i instanceof FM?this.fX(i):i instanceof YM&&this._X(i)}fX(t){for(const i of t.entries)i.mediaTime=xc(i.mediaTime,this.Jq,this.hX),i.segmentDuration=xc(i.segmentDuration,this.Jq,this.hX)}_X(t){for(const i of t.entries)i.mediaTime=tc(i.mediaTime,this.Jq,this.hX),i.segmentDuration=tc(i.segmentDuration,this.Jq,this.hX)}rX(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof pT?this.gX(e):e instanceof AT?t.boxes[i]=this.wX(e):e instanceof vT&&(t.boxes[i]=this.AX(e))}}gX(t){const i=this.tX(t.trackId);t.defaultSampleDuration=xc(t.defaultSampleDuration,i,this.hX)}wX(t){const i=tc(Se.fromNumber(t.fragmentDuration,!0),this.Jq,this.hX);return 0!==i.getHighBits()?this.AX(function(t){return new vT(Se.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}AX(t){return t.fragmentDuration=tc(t.fragmentDuration,this.Jq,this.hX),t}Zq(t){let i=nN(t);return i=i instanceof VT?this.vX(i):this.mX(i),i.serialize().join()}vX(t){const i=t.timescale,e=tc(Se.fromNumber(t.earliestPresentationTime,!0),i,this.hX);if(0!==e.getHighBits())return this.mX(function(t){return new WT(t.referenceId,t.timescale,Se.fromNumber(t.earliestPresentationTime,!0),Se.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.hX,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=xc(e.subsegmentDuration,i,this.hX);return t}mX(t){const i=t.timescale;t.timescale=this.hX,t.earliestPresentationTime=tc(t.earliestPresentationTime,i,this.hX);for(const e of t.references)e.subsegmentDuration=xc(e.subsegmentDuration,i,this.hX);return t}Kq(t){const i=rN(t),e=i.getSize();for(const t of i.boxes)t instanceof zs&&this.pX(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof zs&&BL(e,t)}return i.serialize().join()}pX(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof nn?(i=this.tX(s.trackId),this.yX(s,i)):s instanceof cu?t.boxes[e]=this.MX(s,i):s instanceof ru?t.boxes[e]=this.TX(s,i):s instanceof zT&&this.NX(s,i)}}yX(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=xc(t.defaultSampleDuration,i,this.hX))}MX(t,i){const e=tc(Se.fromNumber(t.baseMediaDecodeTime,!0),i,this.hX);return 0!==e.getHighBits()?this.TX(function(t){return new ru(Se.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}TX(t,i){return t.baseMediaDecodeTime=tc(t.baseMediaDecodeTime,i,this.hX),t}NX(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=xc(s,i,this.hX);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=UL(n.compositionTimeOffset,i,this.hX))}}constructor(t){super(),this.iX=Ye(),this.hX=t}};function UL(t,i,e){return Se.fromInt(t,!1).multiply(e).divide(i).toNumber()}function xc(t,i,e){return Se.fromInt(t,!0).multiply(e).divide(i).toNumber()}function tc(t,i,e){return is.SD(t).KD(is.ED(e,!0)).iS(is.ED(i,!0)).UD()}var QL,FL,YL,GL=class{DX(t){return t.pipeThrough(new xh(this.SX))}constructor(t){this.SX=new RL(t)}};function VL(t,i,e){const s=F(t,i);if(s!==e)throw new k("Expected descriptor with tag "+e+", but found "+s)}function WL(t,i){VL(t,i,3);const e=HL(t,i),s=i.Ku+e,n=bl(t,i),r=F(t,i),h=0!=(64&r),o=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=bl(t,i)),h){c=Vo(t,i,F(t,i))}o&&(l=Vo(t,i,2));const d=function(t,i){VL(t,i,4);const e=HL(t,i),s=i.Ku+e,n=F(t,i),r=F(t,i),h=r>>2,o=0!=(2&r),a=IA(t,i,3),u=Sn(t,i),c=Sn(t,i);let l;if(i.Ku<s){const e=function(t,i){return t.getUint8(i.Ku)}(t,i);5===e&&(l=function(t,i){VL(t,i,5);const e=HL(t,i),s=cc(t,i,e);return{IX:5,EX:s}}(t,i))}return i.Dp(s),{IX:4,bX:n,LX:h,kX:o,CX:a,xX:u,OX:c,jX:l}}(t,i);return i.Dp(s),{IX:3,o:n,zX:u,zu:c,PX:a,BX:l,RX:d}}function HL(t,i){let e=0;for(let s=0;s<4;s++){const s=F(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function qL(t,i){const e=F(t,i),s=F(t,i),n=F(t,i),r=F(t,i),h=3&F(t,i),o=31&F(t,i),a=[];for(let e=0;e<o;e++){const e=bl(t,i);a.push(cc(t,i,e))}const u=F(t,i),c=[];for(let e=0;e<u;e++){const e=bl(t,i);c.push(cc(t,i,e))}return{UX:e,QX:s,FX:n,YX:r,GX:h,VX:a,WX:c}}function fn(t,i,e){if(e&&i.byte>=e)return;const s=t.EL(i.byte);return i.byte+=1,s}function XL(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+fn(t,i);return s}(t,i,2)}r(),r(),function(t){t[t.HX=3]="HX",t[t.qX=4]="qX",t[t.XX=5]="XX"}(QL||(QL={})),function(t){t[t.ZX=64]="ZX",t[t.KX=103]="KX",t[t.JX=107]="JX"}(FL||(FL={})),r(),r(),function(t){t[t.$X=0]="$X",t[t.tZ=1]="tZ",t[t.KX=2]="KX",t[t.iZ=5]="iZ",t[t.eZ=34]="eZ"}(YL||(YL={})),r(),r(),r(),r();var ZL=class t{sZ(t){this.nZ=this.nZ.concat(t.nZ),this.rZ+=t.U}hZ(t,i,e){const s=this.rZ,n=e-i;n>0&&(this.nZ.push({oZ:i,aZ:e,uZ:n,cZ:s,lZ:t}),this.rZ+=n)}EL(t){for(const i of this.nZ)if(i.cZ<=t&&t<i.cZ+i.uZ)return i.lZ[t+i.oZ-i.cZ]}dZ(t,i){let e=i;for(const i of this.nZ){const s=i.aZ;for(let n=i.oZ;n<s;n+=1,e+=1)t[e]=i.lZ[n]}return e}get U(){return this.rZ}set U(t){const i=this.nZ;let e=this.rZ-t;if(!(t>=this.rZ))if(this.rZ=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.uZ)return s.aZ-=e,s.uZ-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.uZ}else i.length=0}get Cp(){const t=new Array(this.rZ);let i=0;for(const e of this.nZ){const s=e.aZ;for(let n=e.oZ;n<s;n+=1,i+=1)t[i]=e.lZ[n]}return t}fZ(){const t=new T(this.rZ);let i=0;for(const e of this.nZ){const s=e.aZ;for(let n=e.oZ;n<s;n+=1,i+=1)t[i]=e.lZ[n]}return t}Sp(i){const e=new t;for(const t of this.nZ)e.hZ(t.lZ,t.oZ,t.aZ);return e.FS=i||oe({},this.FS),e}constructor(){this.rZ=0,this.nZ=[],this.FS={}}};r();var KL,JL=[128,64,32,16,8,4,2,1];function $e(t,i){const e=x.floor(i.bit/8),s=0==(t.EL(e)&JL[i.bit%8])?0:1;return i.bit+=1,s}function he(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+$e(t,i);return s}function ac(t,i){let e=0;for(;0===$e(t,i)&&e<32;)e+=1;return he(t,i,e)+2**e-1}function $L(t,i){const e=ac(t,i);return 1&e?x.floor((e+1)/2):-x.floor(e/2)}function tk(t,i){const e=[],s={byte:1};let n;do{e.push(ek(t,i,s)),n=i.EL(s.byte)}while(void 0!==n&&128!==n);return e}function ik(t,i){let e,s=0;do{e=fn(t,i),s+=e}while(255===e);return s}function ek(t,i,e){const s=ik(i,e),n=ik(i,e),r=e.byte,h=r+n;return e.byte=h,{_Z:t,gZ:s,wZ:n,AZ:r,vZ:h,mZ:i}}!function(t){t[t.pZ=1]="pZ",t[t.yZ=2]="yZ",t[t.MZ=3]="MZ",t[t.TZ=4]="TZ",t[t.NZ=5]="NZ",t[t.DZ=6]="DZ",t[t.SZ=7]="SZ",t[t.IZ=8]="IZ",t[t.EZ=9]="EZ"}(KL||(KL={}));var sk=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function nk(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+$L(t,i)+256)%256}s=0===n?s:n}}var rk=class{bZ(){const t=this.LZ;let i=x.max(0,this.kZ+t.length-2);const e=this.CZ,s=e.U;let n=0;for(;i<s;i+=1){const s=e.EL(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this.kZ=i-t.length}xZ(t){const i=this.LZ;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}EL(t){if(!(t>this.CZ.U))return t>this.kZ&&this.bZ(),this.CZ.EL(this.xZ(t))}constructor(t){this.LZ=[],this.kZ=0,this.CZ=t}};function hk(t){const i=new rk(t);let e,s,n,r,h,o,a=0,u=0,c=0,l=0;const d=i.EL(1),f={bit:32};if(ac(i,f),100===d||110===d||122===d||144===d){const t=ac(i,f);3===t&&(e=$e(i,f)),ac(i,f),ac(i,f),$e(i,f);if(1===$e(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===$e(i,f)&&nk(i,f,e<6?16:64)}}const _=ac(i,f),g=ac(i,f);if(0===g)ac(i,f);else if(1===g){$e(i,f),$L(i,f),$L(i,f);const t=ac(i,f);for(let e=0;e<t;e+=1)$L(i,f)}ac(i,f),$e(i,f);const w=ac(i,f),A=ac(i,f),v=$e(i,f);0===v&&$e(i,f),$e(i,f);1===$e(i,f)&&(a=ac(i,f),u=ac(i,f),c=ac(i,f),l=ac(i,f));if(1===$e(i,f)){if(1===$e(i,f)){const t=he(i,f,8);if(255===t)s=he(i,f,16),n=he(i,f,16);else{const i=sk[t];i&&(s=i[0],n=i[1])}}1===$e(i,f)&&$e(i,f);if(1===$e(i,f)){he(i,f,3),$e(i,f);1===$e(i,f)&&(he(i,f,8),he(i,f,8),he(i,f,8))}1===$e(i,f)&&(ac(i,f),ac(i,f)),r=$e(i,f),1===r&&(h=he(i,f,32),o=he(i,f,32),$e(i,f))}return{width:x.floor(16*(w+1)-2*a-2*u),height:x.floor((2-v)*(A+1)*16-2*c-2*l),sT:s,nT:n,OZ:r?o/(2*h):void 0,jZ:e,zZ:_}}function ok(t){const i=HA(Qi.wy(t),At.Tm);if(!i)return;const e=i.iy.zy,s=[];for(const t of i.Z){const i=t.iy.Wy,e=t.Fy.iy.zy;let o,a,u;for(const i of t.Fy.$y.eM.nM.hM){const t=ak(i);var n,r,h;if(t)o=null!=(n=t.PZ)?n:o,a=null!=(r=t.BZ)?r:a,u=null!=(h=t.RZ)?h:u}s.push({Wy:i,zy:e,PZ:o,BZ:a,RZ:u})}return{zy:e,Z:s}}function ak(t){let i,e,s;if(t.hA===At.Bm){var n;const e=qL(Ao(t.OM.Cp),new Vr);i=function(t){return"avc1."+uk(t.QX,2)+uk(t.FX,2)+uk(t.YX,2)}(e),s=null==(n=function(t){if(0===t.VX.length)return;const i=t.VX[0],e=new ZL;return e.hZ(i,0,i.byteLength),hk(e)}(e))?void 0:n.OZ}else if(t.hA===At.Um||t.hA===At.Qm){const e=function(t,i){const e=i.Lp(),s=ls(t,e,8),n=ls(t,e,2),r=ls(t,e,1),h=ls(t,e,5),o=ls(t,e,32),a=[];for(let i=0;i<6;i++)a.push(ls(t,e,8));const u=ls(t,e,8);e.Np(4);const c=ls(t,e,12);e.Np(6);const l=ls(t,e,2);e.Np(6);const d=ls(t,e,2);e.Np(5);const f=ls(t,e,3);e.Np(5);const _=ls(t,e,3),g=ls(t,e,16),w=ls(t,e,2),A=ls(t,e,3),v=ls(t,e,1),m=ls(t,e,2),p=ls(t,e,8),y=[];for(let i=0;i<p;i++){const i=ls(t,e,1);e.Np(1);const s=ls(t,e,6),n=ls(t,e,16),r=[];for(let i=0;i<n;i++){const i=ls(t,e,16),s=cc(t,new Vr(e.Ku>>3),i);e.Np(8*i),r.push({UZ:i,QZ:s})}y.push({FZ:i,YZ:s,GZ:n,VZ:r})}return{UX:s,WZ:n,HZ:r,qZ:h,XZ:a,ZZ:u,KZ:c,JZ:l,$Z:o,tK:d,iK:f,eK:_,sK:g,nK:A,rK:v,hK:w,GX:m,oK:p,aK:y}}(Ao(t.BM.Cp),new Vr);i=function(t,i){let e=t.toString()+".";switch(i.WZ){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.qZ.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.$Z).toString(16)+".",i.HZ){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.ZZ.toString();const s=i.XZ.reduce(((t,i)=>0===t?i:i+1),0);for(let t=0;t<s;t++)e+="."+i.XZ[t].toString(16).toUpperCase();return e}(t.hA,e)}else if(t.hA===At.Ym){const e=function(t,i){const e=i.Lp(),s=ls(t,e,8);e.Np(24);const n=ls(t,e,8),r=ls(t,e,8),h=ls(t,e,4),o=ls(t,e,3),a=Ws(t,e),u=ls(t,e,8),c=ls(t,e,8),l=ls(t,e,8),d=ls(t,e,16),f=new Array(8);for(let i=0;i<d;i++)f[i]=ls(t,e,8);return{UX:s,uK:n,cK:r,lK:h,dK:o,fK:a,$M:u,tT:c,iT:l,_K:d,gK:f}}(Ao(t.UM.Cp),new Vr);i=function(t,i){let e=t.toString()+".";return e+="0"+i.uK+".",e+=va(""+i.cK,2,"0")+".",e+=va(""+i.lK,2,"0")+".",e+=va(""+i.dK,2,"0")+".",e+=va(""+i.$M,2,"0")+".",e+=va(""+i.tT,2,"0")+".",e+=va(""+i.iT,2,"0")+".",e+="0"+i.fK,e}(t.hA,e)}else if(t.hA===At.Vm){const e=function(t,i){const e=i.Lp();e.Np(1);const s=ls(t,e,7),n=ls(t,e,3),r=ls(t,e,5),h=Ws(t,e),o=Ws(t,e),a=Ws(t,e),u=Ws(t,e),c=Ws(t,e),l=Ws(t,e),d=ls(t,e,2);e.Np(3);const f=Ws(t,e);let _;return f?_=ls(t,e,4):e.Np(4),{_y:s,wK:n,AK:r,vK:h,mK:o,pK:a,yK:u,MK:c,TK:l,NK:d,DK:f,SK:_}}(Ao(t.YM.Cp),new Vr);i=function(t,i,e){let s=t.toString()+".";if(s+=i.wK+".",s+=""+va(""+i.AK,2,"0"),s+=(0===i.vK?"M":"H")+".",s+=(1===i.pK?12:10)+".",s+=(1===i.wK?0:i.yK)+".",s+=""+i.MK+i.TK+(1===i.MK&&1===i.TK?i.NK:"0"),e&&e.JM===pa.ON_SCREEN_COLOURS){const t=e;s+="."+va(""+t.$M,2,"0")+"."+va(""+t.tT,2,"0")+"."+va(""+t.iT,2,"0")+"."+(t.eT?1:0)}return s}(t.hA,e,t.GM)}else{if(t.hA!==At.Xm)return(t.hA===At.ip||t.hA===At.tp)&&t.HM?ak(t.HM):void 0;e=function(t){const i=t.RX;switch(i.bX){case FL.ZX:return function(t){var i;if(!(null==(i=t.jX)?void 0:i.EX))return"mp4a.40";const e=function(t,i){let e=ls(t,i,5);31===e&&(e=32+ls(t,i,6));const s=ls(t,i,4);let n;return 15===s&&(n=ls(t,i,24)),{IK:e,EK:s,bK:n,LK:ls(t,i,4)}}(Ao(t.jX.EX),new pl);return"mp4a.40."+e.IK}(i);case FL.KX:return"mp4a.40.2";case FL.JX:return"mp4a.40.34"}}(WL(Ao(t.EM.Cp),new Vr))}return{PZ:i,BZ:e,RZ:s}}function uk(t,i){const e=t.toString(16);return va(e,i,"0")}function ck(t,i){const e=Qi.wy(Ao(t)),s=function(t,i){let e;for(const n of t.Z){var s;const t=null==(s=n.vT)?void 0:s.vT;if(t){const s=n.iy.Wy,r=H_(i.Z,(t=>t.Wy===s)),h=aa.SD(t,r.zy);e&&!h.vD(e)||(e=h)}}return e}(HA(e,At.ep),i),n=HA(e,At.cp);return{zN:s.cD(),kK:n.Cp}}r();var lk=li.Rb,dk=class extends i{get HV(){return this.eW}set HV(t){this.eW=t}get KV(){return this.rW}set KV(t){this.rW=t}get oa(){return this.CK||this.xK.updating}jK(t,i,e){switch(t.hA){case at.bH:case at.zI:return this.zK((e=>this.PK(t,i,e)),e);case at.LH:throw new b("Opaque segments are not supported on web.")}}BK(t,i){switch(t.hA){case at.bH:return this.zK((i=>this.RK(t,i)),i);case at.zI:throw new b("Streaming initialization segments are not supported on web.");case at.LH:throw new b("Opaque initialization segments are not supported on web.")}}async RK(t,i){this.UK?this.QK=ok(Ao(t.Cp)):(await this.FK(t,void 0,i),lk&&(this.YK=!1,this.GK=t))}async PK(t,i,e){lk&&this.YK&&this.GK&&await this.RK(this.GK,e);try{if(Pi(e),this.UK&&this.QK){const n=await async function(t,i){switch(t.hA){case at.bH:return t;case at.zI:{const e=await qt(t.Cp,i);return Pi(i),{hA:at.bH,Cp:new T(e)}}case at.LH:throw new b("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=ck(n.Cp,this.QK);var s;t={hA:at.bH,Cp:r.kK},i=oe({},i,{CS:r.zN+(null!=(s=i.CS)?s:0)})}await this.FK(t,i,e),this.Co(new gg(tt.IH))}finally{t.hA===at.zI&&t.Cp.cancel(new sa).catch(xs)}}async FK(t,i,e){switch(Pi(e),i&&await this.VK(i),t.hA){case at.bH:if(this.WK){const i=this.WK.DX(eb(t.Cp));return await this.HK(i,e)}return await this.qK(t.Cp);case at.zI:if(this.WK){const i=this.WK.DX(t.Cp);return await this.HK(i,e)}return await this.HK(t.Cp,e)}}async HK(t,i){const e=this.XK.b_,s=function(t,i){return void 0===i&&(i=new id({highWaterMark:1/0})),new f(new NL(t,i),{highWaterMark:0})}(t),n=s.getReader();let r=!1;try{for(;;){const t=await hl(n.read(),i);if(t.done){r=!1;break}Pi(i);const e=Lh(t.value);r=!0,await this.qK(e)}}catch(t){if(n.cancel(t).catch(xs),r){await this.ZK();const t=this.XK.b_.Sn(e.UB());for(let i=0;i<t.U;i++)await this.KK(t.Cn(i),t.jn(i))}throw t}}JK(t,i){return this.zK((()=>this.$K(t,i)))}async $K(t,i){this.xK.appendWindowStart===t&&this.xK.appendWindowEnd===i||(await this.ZK(),this.xK.appendWindowStart=0,this.xK.appendWindowEnd=i,this.xK.appendWindowStart=t)}async VK(t){if(this.xK.timestampOffset!==t.CS)try{this.xK.timestampOffset=t.CS}catch(i){await this.ZK(),this.xK.timestampOffset=t.CS}}async qK(t){this.xK.appendBuffer(t),this.tJ=!0,await this.iJ()}eJ(t,i,e){return this.zK((e=>this.KK(t,i,e)),e)}async KK(t,i,e){Pi(e),this.xK.remove(t,i),await this.iJ()}iJ(){const t=this.XK.b_;return new Promise(((i,e)=>{let s,n=!1,r=()=>{n=!0},h=()=>{n=!1,s="error"},o=()=>{n=!1,s="aborted"},a=()=>{u(),n&&!s?(t.JB(this.XK.b_)||this.Co(new gg(tt.IH)),i()):e(new b(s))},u=()=>{this.xK.removeEventListener("update",r),this.xK.removeEventListener("error",h),this.xK.removeEventListener("abort",o),this.xK.removeEventListener("updateend",a)};this.xK.addEventListener("update",r),this.xK.addEventListener("error",h),this.xK.addEventListener("abort",o),this.xK.addEventListener("updateend",a)}))}sJ(){return this.zK((()=>this.ZK()))}async ZK(){if(this.nJ.vg===Pn.wI){lk&&(this.YK=!0),this.xK.updating&&(this.CK=!0);try{this.xK.abort()}catch(t){0,this.CK=!1}this.oa&&await this.iJ().catch(xs)}}rJ(){return"function"==typeof this.xK.changeType}zH(t){if(this.hJ(),this.nJ.vg===Pn.oJ)return;var i;this.aJ=t;const e=null!=(i=this.nJ.uJ(t.IP))?i:t.IP;this.UK=fk(t.IP,this.cJ),this.rJ()&&!Ei(this.cJ,e)&&(this.cJ=e,this.xK.changeType(this.cJ))}lJ(){this.nJ.vg!==Pn.kA||this.dJ||this.oa||(this.xK.timestampOffset=this.xK.timestampOffset,this.nJ.fJ())}async zK(t,i){this.hJ();const e=new Po;e.l_(this._J.a_),i&&e.l_(i);try{this.dJ=t(e.a_),await this.dJ,this.nJ.fJ(),this.oa&&await this.iJ()}finally{this.dJ=void 0,e.e_()}}hJ(){if(this.dJ)throw new b("Internal error")}async e_(){this.Vo(),this._J.c_(),this.dJ&&(await this.dJ.catch(xs),this.dJ=void 0),this.xK.removeEventListener("updateend",this.gJ),this.xK.removeEventListener("bufferedchange",this.wJ)}constructor(t,i,e,s,n){var r;if(super(),this.eW=20,this.rW=30,this.CK=!1,this.tJ=!1,this.dJ=void 0,this._J=new Po,this.YK=!1,this.GK=void 0,this.UK=!1,this.QK=void 0,this.gJ=()=>{this.CK=!1},this.wJ=t=>{t.removedRanges&&this.Co(new gg(tt.IH))},this.nJ=i,this.XK=t,this.xK=e,this.xK.addEventListener("updateend",this.gJ),this.xK.addEventListener("bufferedchange",this.wJ),this.aJ=s,this.cJ=n,this.UK=fk(s.IP,n),null==(r=i.wd)?void 0:r.AJ){var h;const t=null!=(h=i.wd.vJ)?h:1e5;this.WK=new GL(t)}}};function fk(t,i){return Kg(t,"audio/mp4")&&Kg(i,"audio/mpeg")}r();var _k=class{get b_(){if(this.mJ.vg===Pn.oJ)return Ki.aR();let t=Ki.xn(this.xK.buffered).Sn(new Ki([0,1/0]));const i=this.pJ;return void 0!==i&&t.U>0&&t.jn(t.U-1)===i&&(t=t.GB(Ki.hR(i))),t}KH(){return!!this.pJ&&this.b_.BB().gr(this.pJ)}yJ(){const t=this.b_;this.pJ=t.U>0?t.jn(t.U-1):0,this.mJ.MJ()}lJ(){this.pJ=void 0}constructor(t,i){this.pJ=void 0,this.mJ=i,this.xK=t}};function gk(t){const i=t.iI("codecs");return i?i.split(",").map((t=>t.trim())):[]}function wk(t,i){const e=Ak(t)||vk(t),s=Ak(i)||vk(i);return!e&&!s||t===i}function Ak(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function vk(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function Ut(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}function mk(t,i,e,s,n,r,h){const o=new _k(n,t),a=new dk(o,t,n,e,r);return new pk(t,i,e,s,o,a,h)}r();var pk=class extends i{get b_(){return this.XK.b_}get wd(){return this.Zx}get IP(){return this.Vx}get TJ(){return this.NJ}get DJ(){return this.SJ.hq}get HV(){return this.IJ.HV}set HV(t){this.IJ.HV=t}get KV(){return this.IJ.KV}set KV(t){this.IJ.KV=t}get oa(){return this.IJ.oa}KH(){return this.XK.KH()}yJ(){this.XK.yJ()}lJ(){this.XK.lJ(),this.IJ.lJ()}EJ(t,i){this.SJ.aq(t,i)}bJ(t,i){this.SJ.uq(t,i)}LJ(){return this.IJ.sJ()}jK(t,i,e){return this.IJ.jK(t,i,e)}BK(t,i,e){return this.IJ.BK(t,e)}JK(t,i){return li.mb&&li.yb<3?this.IJ.JK(t,1/0):this.IJ.JK(t,i)}async pN(t,i,e){this.bJ(t,i);const s=this.b_;await this.IJ.eJ(t,i,e);const n=0!==s.U&&0===this.b_.U;(li.Hb||li.Tb)&&n&&this.gP.Dp(this.gP.j_)}OH(t){const i=t.IP;if(this.Vx===i)return!0;const e=this.kJ.get(i);if(void 0!==e)return e;const s=this.CJ(t);return this.kJ.set(i,s),s}CJ(t){const i=this.nJ.uJ(t.IP);if(void 0===i)return!1;const e=Lp(this.Vx),s=Lp(i),n=gk(e),r=gk(s);if(this.IJ.rJ()){if(!function(t,i){return eg(t,i,wk)}(n,r))return!1}else{if(e.hA!==s.hA)return!1;if(!function(t,i){return eg(t,i,Ut)}(n,r))return!1}return!0}async zH(t){const i=t.IP;this.Vx!==i&&(this.kJ.clear(),this.IJ.zH(t),this.Vx=i),this.Zx=t,this.nJ.xJ()}async e_(){this.kJ.clear(),this.Vo(),this.SJ.gn();try{this.IJ.fn(tt.IH,this.Ds),await this.IJ.e_()}catch(t){}}constructor(t,i,e,s,n,r,h){super(),this.kJ=Qt(),this.nJ=t,this.Zx=e,this.Vx=e.IP,this.NJ=s,this.gP=i,this.XK=n,this.IJ=r,this.SJ=h,this.IJ.yn(tt.IH,this.Ds)}};r();var yk=class{OJ(){let t=this.Cn,i=this.jn;if(this.jJ||this.zJ){const e=.001*(ag.f_()-this.PJ);this.jJ&&(t+=e),this.zJ&&(i+=e)}return Ki.oR(t,i)}constructor(t,i,e=!1,s=!1){this.Cn=t,this.jn=i,this.jJ=e,this.zJ=s,this.PJ=ag.f_()}};r();var Mk=.5,Tk=[t.jh,t.Sh,t.ZA,t.XA,t.zA,t.BA,t.kA,t.WA,qo.Mw,Bi.ha],Nk=class{BJ(t){this.RJ.push(t),t.yn(yL.iq,this.UJ)}get hq(){return this.RJ.reduce(((t,i)=>t.GB(i.hq)),Ki.aR())}gn(){this.QJ(),this.FJ.fn(qo.Mw,this.YJ),this.gP.fn(t.VA,this.YJ),this.gP.fn(Tk,this.GJ),this.RJ.forEach((t=>t.fn(yL.iq,this.UJ))),0!==this.VJ&&(ag.__(this.VJ),this.VJ=0),this.WJ=!0}BH(t){if(this.gP.R_)return!1;if(0!==this.VJ)return!1;const i=this.XK.b_,e=i.HB(t);if(e>=0&&t+Mk<i.jn(e))return!1;const s=e>=0?e+1:i.eR(t);if(s<0||s>=i.U)return!1;const n=i.Cn(s);if(Ki.oR(t,n).WB(this.hq).rR>1)return!1;if(ag.HJ)return this.qJ=this.gP.j_,this.VJ=ag.g_((()=>{this.qJ===this.gP.j_&&this.XJ(n),this.VJ=0}),250),!0;return!(x.abs(n-t)<=.001)&&(this.XJ(n),!0)}XJ(t){this.gP.Dp(t,!1,!0)}ZJ(){0!==this.KJ&&(ag.__(this.KJ),this.KJ=0),this.gP.fn(t.ov,this.Jl)}JJ(){0===this.$J&&(this.ZJ(),this.$J=ag.t$(this.i$,250))}QJ(){0!==this.$J&&(ag.e$(this.$J),this.$J=0),this.ZJ(),this.gP.Tg||(this.s$=0)}n$(){return!this.gP.hg&&!this.gP.Tg&&0!==this.gP.ag&&!this.gP.R_&&!this.gP.lt&&(this.r$()||this.FJ.vg>=rv.eN)}r$(){const t=this.gP.j_,i=this.XK.b_,e=i.HB(t);return-1!==e&&i.jn(e)>t+Mk}h$(t,i){const e=i.HB(t);return e>-1?i.jn(e):t}constructor(i,e,s,n){this.XK=i,this.FJ=e,this.gP=s,this.WJ=!1,this.RJ=[],this.VJ=0,this.KJ=0,this.o$=0,this.qJ=0,this.s$=0,this.$J=0,this.a$=1,this.UJ=t=>{const i=this.gP.j_,e=t.rq.gr(i),s=t.rq.gr(i,Mk)&&this.gP.vg<=rv.iN;(e||s)&&this.BH(i)},this.YJ=Ml((t=>{if(this.WJ)return;if(this.FJ.vg<=rv.iN){const t=this.gP.j_;this.BH(t)||this.i$()}}),100),this.Jl=Ml((t=>{this.WJ||0===this.$J&&this.JJ()}),100),this.GJ=()=>{this.n$()?0===this.$J&&(this.gP.yn(t.ov,this.Jl),this.KJ=ag.g_((()=>{this.JJ()}),3500)):this.QJ()},this.i$=()=>{const t=this.o$,i=this.s$,e=this.gP.j_,s=ag.f_(),n=this.XK.b_;if(t!==e)return this.o$=e,this.s$=s,this.a$=1,void(this.u$=ag.c$?2e3:1e3);if(this.n$()&&0!==n.U&&i>0&&s>i+this.u$){let t;const i=this.hq.BB().WB(n),s=i.iR(e);if(-1!==s){const n=i.Cn(s);if(n-e<1){const e=i.jn(s);0,t=e}}var r;if(!t)t=null==(r=this.l$)?void 0:r.determineStallJumpTarget(),t||(t=e+.01*this.a$,n.gr(t)||(t=this.h$(e,n)));0,this.o$=t,this.a$++,this.u$=x.min(2*this.u$,1e4),this.XJ(t)}},this.FJ.yn(qo.Mw,this.YJ),this.gP.yn(t.VA,this.YJ),this.gP.yn(Tk,this.GJ),this.l$=n,this.u$=ag.c$?2e3:1e3}};function Dk(t){const i=[];if(t.d$&&i.push(t.d$.b_),t.f$&&i.push(t.f$.b_),0===i.length)return Ki.aR();let e=0;for(const t of i)t.U>0&&(e=x.max(e,t.jn(t.U-1)));const s=t.KH;let n=new Ki([0,e],[!0,s]);for(let t of i)s&&t.U>0&&(t=t.GB(new Ki([t.jn(t.U-1),e],[!0,!0]))),n=n.Sn(t);return n}function Sk(t,i,e){const s=t.b_;let n,r=s.HB(i);if(r>=0){if(!(r+1<s.U))return Promise.resolve();n=s.Cn(r+1)}else{if(r=s.eR(i),!(r>=0))return Promise.resolve();n=s.Cn(r)}return t.pN(n,1/0,e)}function Ik(t,i,e){if(!t.gr(i)){const s=t.HB(i,e);if(s>=0){const e=t.Cn(s);if(i<e)return e}}return i}r(),r();var Ek=class{_$(){return new this.g$}w$(t){return this.g$.isTypeSupported(t)}constructor(t){this.g$=bk(t)}};function bk(t){return t&&"function"==typeof Ys.ManagedMediaSource?Ys.ManagedMediaSource:"function"==typeof Ys.MediaSource?Ys.MediaSource:void 0}var Pn,Lk=li.Ib||li.bb,kk=li.jb||li.Rb&&li.Qb>=17;!function(t){t.oJ="closed",t.wI="open",t.kA="ended"}(Pn||(Pn={}));var Ck=class extends mL{get d$(){return this.A$}get f$(){return this.v$}get ct(){if(this.m$)return this.m$;const t=this.MP.duration;return t===Da?1/0:t}p$(t){if(j(t)||t<0)throw new b("Invalid duration");this.y$()?this.M$(t):this.m$=t}M$(t){const i=t===1/0;if(i&&this.MP.setLiveSeekableRange){const t=2**39;this.MP.setLiveSeekableRange(0,t)}this.MP.duration=i?kk?1/0:Da:t,this.m$=void 0}get b_(){return Lk?Dk(this):function(t,i){let e=i;return e.U>0&&t.KH&&(e=e.GB(Ki.hR(e.jn(e.U-1)))),e}(this,Ki.xn(this.wO.buffered))}get JH(){var t;return null==(t=this.A$)?void 0:t.b_}get $H(){var t;return null==(t=this.v$)?void 0:t.b_}get yg(){return this.T$.OJ().Sn(new Ki([0,this.ct],[!0,!0]))}N$(t,i,e,s){this.T$=new yk(t,i,!!e,!!s)}get KH(){return(!this.A$||this.A$.KH())&&(!this.v$||this.v$.KH())}get vg(){return this.MP.readyState}async JV(){const t=this.Zx,i=H_(t.D$,(t=>Kg(t.IP,"audio"))),e=H_(t.D$,(t=>Kg(t.IP,"video")));if(this.wO.disableRemotePlayback=!0,await this.S$(),i){const t=new TL;var s;this.I$.BJ(t);const e=null!=(s=this.uJ(i.IP))?s:i.IP;this.E$=this.MP.addSourceBuffer(e),this.A$=mk(this,this.gP,i,iv.mp,this.E$,e,t),this.A$.yn(tt.IH,this.wJ)}if(e){const t=new TL;var n;this.I$.BJ(t);const i=null!=(n=this.uJ(e.IP))?n:e.IP;this.b$=this.MP.addSourceBuffer(i),this.v$=mk(this,this.gP,e,iv.vp,this.b$,i,t),this.v$.yn(tt.IH,this.wJ)}this.PH.$n(this,t)}async S$(){await super.qH(this.MP),"open"!==this.vg&&await yi(this.MP,"sourceopen")}y$(){if("open"!==this.vg)return!1;const t=this.A$&&this.A$.oa,i=this.v$&&this.v$.oa;return!(t||i)}yJ(){this.L$=!0,this.A$&&this.A$.yJ(),this.v$&&this.v$.yJ(),this.L$=!1,this.k$()}lJ(){this.A$&&this.A$.lJ(),this.v$&&this.v$.lJ()}OH(t){const i=H_(t.D$,(t=>Kg(t.IP,"audio"))),e=H_(t.D$,(t=>Kg(t.IP,"video")));if(this.A$){if(!i)return!1;if(!this.A$.OH(i))return!1}else if(i)return!1;if(this.v$){if(!e)return!1;if(!this.v$.OH(e))return!1}else if(e)return!1;return!!super.OH(t)}async zH(t){const i=H_(t.D$,(t=>Kg(t.IP,"audio"))),e=H_(t.D$,(t=>Kg(t.IP,"video"))),s=[];this.A$&&s.push(this.A$.zH(i)),this.v$&&s.push(this.v$.zH(e)),await Promise.all(s),await super.zH(t)}async e_(){if(li.Tb&&await this.ZH(),this.A$){if(await this.A$.e_(),this.A$=void 0,wu()&&(li.Tb||li.mb))try{this.MP.removeSourceBuffer(this.E$)}catch(t){}this.E$=void 0}if(this.v$){if(await this.v$.e_(),this.v$=void 0,wu()&&(li.Tb||li.mb))try{this.MP.removeSourceBuffer(this.b$)}catch(t){}this.b$=void 0}this.wO.src&&URL.revokeObjectURL(this.wO.src),this.wO.disableRemotePlayback=!1,this.gP.fn([t.ZA,t.zA],this.C$),this.I$.gn(),li.mb&&await this.ZH(),await super.e_()}xJ(){const t=this.Zx,i=t.D$.map((t=>Kg(t.IP,"audio")&&this.A$?this.A$.wd:Kg(t.IP,"video")&&this.v$?this.v$.wd:t));this.Zx=oe({},t,{D$:i})}MJ(){this.L$||this.k$()}get x$(){if(!this.KH)return!1;const t=this.b_;return 0!==t.U&&t.Cn(t.U-1)<=this.gP.j_}k$(){this.x$&&this.y$()&&(this.MP.endOfStream(),this.m$=void 0,this.Co(new gg(AL.OU)),this.gP.wJ())}fJ(){this.y$()&&(this.KH?this.k$():void 0!==this.m$&&this.M$(this.m$))}BH(t){return this.I$.BH(t)}uJ(t){return xk(this.O$,t)}static tq(t){const i=bk(t.j$);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new Ek(t.j$);for(const i of t.D$)if(void 0===xk(e,i.IP))return!1;return!0}constructor(i,e,s,n,r,h=new Ek(i.j$),o){super(i,e,n,r),this.A$=void 0,this.E$=void 0,this.v$=void 0,this.b$=void 0,this.T$=new yk(0,1/0),this.m$=void 0,this.L$=!1,this.C$=()=>{this.k$()},this.wJ=()=>{this.gP.wJ()},this.O$=h,this.MP=this.O$._$(),this.gP.yn([t.ZA,t.zA],this.C$),this.I$=new Nk(this,s,this.gP,o)}};function xk(t,i){const e=Lp(i),s="audio/mp4"===e.hA&&function(t,i){return wl(t,i,((t,i)=>t===i))}(gk(e),["mp4a.40.34"]);if(t.w$(i)&&(!s||!li.Rb))return i;if(s){const i=H_(['audio/mp4; codecs="mp3"',"audio/mpeg"],(i=>t.w$(i)));return void 0!==i?i:void 0}}r(),r();var Ok=class extends gg{constructor(i){super(t.zA),this.currentTime=i}},jk=[t.uv,t.WA,t.ZA,t.zA,t.jh,t.Sh],zk=class extends i{get j_(){return this.uR}get z$(){return this.P$}get B$(){return this.R$}get ct(){return this.zk}get R_(){return this.U$}get hg(){return this.dR}get vg(){return this.Q$}get Tg(){return this.cR}get Z_(){return this.lR}set Z_(t){this.Z_!==t&&(this.lR=t,this.Co(new Ve(this.j_,this.xg)))}get ag(){return this.fR}set ag(t){this.ag!==t&&(this.fR=t,this.Co(new Qh(this.j_,this.ag)))}get xg(){return this.Xk}set xg(t){this.xg!==t&&(this.Xk=t,this.Co(new Ve(this.j_,this.xg)))}Dp(t,i,e){this.uR!==t&&(this.uR=t,this.P$=i,e&&!this.cR?(this.R$=!0,this.Co(new Ok(this.j_))):(this.R$=!1,this.cR=!0,this.Co(new Ot(this.j_))))}Gg(){this.dR||(this.dR=!0,this.Co(new ws(this.j_)))}Vg(){this.dR&&(this.dR=!1,this.Co(new vh(this.j_)))}e_(){this.Vo()}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.uR=t,this.zk=i,this.U$=e,this.dR=s,this.cR=n,this.lR=r,this.fR=h,this.Xk=o,this.Q$=a,this.P$=u,this.R$=c}};function Pk(t){return new zk(t.j_,t.ct,t.R_,t.hg,t.Tg,t.Z_,t.ag,t.xg,t.vg,!1,t.B$)}function Bk(t,i){i.ct===t.ct||j(i.ct)&&j(t.ct)||t.Co(new Mn(t.ct)),t.Z_=i.Z_,t.xg=i.xg,t.ag=i.ag,i.hg?t.Gg():t.Vg().catch(xs),i.j_!==t.j_||i.vg>rv.tN&&t.vg===rv.tN?t.Dp(i.j_,i.z$,i.B$):!i.Tg&&t.Tg?t.Co(new Ot(t.j_)):i.Tg&&!t.Tg&&t.vg>=rv.iN&&t.Co(new $s(t.j_)),!i.R_&&t.R_&&t.Co(new ys(t.j_))}r(),r();var Rk=class extends i{get vg(){return this.pg()}F$(t){this.BO!==t&&(this.BO=t,this.Co(new ds(this.gP.j_,t)))}Y$(){this.F$(this.pg())}Zn(){this.F$(rv.tN)}e_(){this.Vo()}constructor(t){super(),this.BO=rv.tN,this.G$=()=>{this.Y$()},this.gP=t}};r();var Uk=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],Qk=class extends Rk{pg(){let t=this.gP.pP.readyState;return t>rv.iN&&this.gP.V$?rv.iN:(this.gP.pP.seeking&&t>rv.Gn&&(t=rv.Gn),t)}e_(){for(const t of Uk)this.gP.pP.removeEventListener(t,this.G$);super.e_()}constructor(t){super(t);for(const t of Uk)this.gP.pP.addEventListener(t,this.G$)}};r();var Fk=class extends Rk{pg(){if(this.gP.pP.readyState===rv.tN)return rv.tN;const t=this.W$(),i=t?t.jn-t.Cn:0;if(!t)return rv.Gn;const e=this.gP.ag;return this.H$()||i>=3*e?rv.sN:i>=3?rv.eN:rv.iN}W$(){const t=this.gP.j_,i=this.gP.b_.YB(.04),e=i.HB(t);if(!(e<0))return{Cn:t,jn:i.jn(e)}}H$(){if(this.gP.R_)return!0;const t=this.gP.ct,i=this.W$();return!!i&&t-i.jn<=.16666666666666666}e_(){this.gP.fn([t.ZA,t.zA],this.G$);for(const t of Uk)this.gP.pP.removeEventListener(t,this.G$);super.e_()}constructor(i){super(i),this.gP.yn([t.ZA,t.zA],this.G$);for(const t of Uk)this.gP.pP.addEventListener(t,this.G$)}};r(),r();var Yk=[qo.Mw,t.jh,t.Sh,t.ZA,t.XA,t.zA,t.BA,t.kA,Bi.ha],Gk=class extends i{q$(){return(!this.xO.B$||!this.xO.X$)&&this.xO.vg<rv.eN}Z$(){return!this.xO.Tg&&!(this.xO.hg||this.xO.R_||this.xO.lt||this.q$())}Qn(){const t=this.K$;this.K$=this.Z$(),!t&&this.K$&&this.Co(new Hr(this.xO.j_))}Zn(){this.K$=!1}e_(){this.Vo(),this.xO.fn(Yk,this.CG)}constructor(t){super(),this.K$=!1,this.CG=()=>{this.Qn()},this.xO=t,this.xO.yn(Yk,this.CG)}},Vk=class extends Gk{Z$(){return this.J$&&super.Z$()}Qn(){this.J$&&(this.wO.paused||this.wO.ended||this.wO.error)&&(this.J$=!1),super.Qn()}Zn(){super.Zn(),this.J$=!1}e_(){this.wO.removeEventListener(qo.Tv,this.GO),super.e_()}constructor(t){super(t),this.J$=!1,this.GO=()=>{this.J$=!0,this.Qn()},this.wO=t.pP,this.wO.addEventListener(qo.Tv,this.GO)}};r();var Wk=class extends gg{constructor(t){super(Bi.ha),this.lt=t}};function Hk(t,i){return t.zN<=i&&t.PN>i}function qk(t,i){return function(t,i){return G_(t.zN,i.zN,Qa)}(t,i)||function(t,i){return G_(t.PN,i.PN,Qa)}(t,i)}function Xk(t,i){return function(t,i){return G_(t.GN,i.GN,Qa)}(t,i)||function(t,i){return G_(t.VN,i.VN,Qa)}(t,i)}function Zk(t,i,e){let s=function(t,i,e,s,n,r,h){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===h&&(h=t.length);let o=r,a=h-1;for(;o<=a;){const h=o+(a-o>>1),u=s(e(t[h]),i);if(u<0)o=h+1;else if(u>0)a=h-1;else{if(!(n&&h>r&&0===s(e(t[h-1]),i)))return h;a=h-1}}return~o}(t,i,cg,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===Ji.Zr;s++)if(t[s].$N(i))return s;return-(s+1)}function Kk(t,i,e){const s=Zk(t,i,e);return s>=0?s:-(s+1)}function Jk(t){const i=t.Lt;if(!i)return-1;if(t instanceof yn)return i.t0(t);const e=i.L;if(!e)return-1;const s=Zk(e.xw,t,qk);return s>=0?s:-1}function $k(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,h=0;const o=[],a=[];for(;r<s&&h<n;){const s=t[r],n=i[h];s===n?(r++,h++):e(n,s)<=0?(o.push(n),h++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;h<n;)o.push(i[h]),h++;return{i0:o,e0:a}}(t,i,qk);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}r(),r(),r(),r();var tC=class{get xw(){return this.s0}get U(){return this.s0.length}get va(){if(this.Xa){const t=this.s0;this.Xa.length=t.length;for(let i=0;i<t.length;i++)this.Xa[i]=t[i].va}else this.Xa=this.fa();return this.Xa}fa(){return function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.EL(e).va;return i.item=i=>{const e=0|i,s=t.EL(e);return s&&s.va||void 0},_.defineProperty(i,"constructor",{value:mm}),i}(this)}yN(t){const i=this.s0;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.$N(s))return!0}return!1}EL(t){return this.s0[t]}constructor(t){this.Xa=void 0,this.s0=t}};r();var iC=class extends bo{fa(){return new eC(this.Lt.va,this.vg)}constructor(t,i){super(Os.Mw),this.Lt=t,this.vg=i}},eC=class extends te{constructor(t,i){super("readystatechange"),this.track=t,this.readyState=i}};r();var sC=class extends bo{fa(){return new nC(this.Lt.va)}constructor(t){super(Os.Nw),this.Lt=t}},nC=class extends te{constructor(t){super("typechange"),this.track=t}};r();var rC=class extends bo{fa(){return new hC(this.jN.va)}constructor(t){super(Os.aw),this.jN=t}},hC=class extends te{constructor(t){super("addcue"),this.cue=t}};r();var oC=class extends bo{fa(){return new aC(this.jN.va)}constructor(t){super(Os.cw),this.jN=t}},aC=class extends te{constructor(t){super("removecue"),this.cue=t}},wn=class extends i{get q(){return this.n0}get L(){return this.r0}h0(t){return H_(this.r0.xw,(i=>i.o===t))}get vE(){return this.o0}set vE(t){this.o0=t}get rA(){return this.a0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Qo(this)}get o(){return this.NN}get Vw(){return this.DN}get iA(){return this.u0}set iA(t){this.u0=t}get zt(){return this.c0}get kh(){return this.SN}set kh(t){t!==this.SN&&(this.SN=t,this.Co(new Hn(this)))}get gs(){return this.Pk}get Ww(){return this.l0}get eA(){return this.PR}set eA(t){this.Xo(t)}Xo(t){const i=Ne(t);i!==this.eA&&(this.PR=i,i===Ht.Ch&&(this.d0.forEach((t=>{t.ro=!1})),Ri(this.d0),this.f0=0),this.Co(new Zr(this)))}get vg(){return this.Q$}set vg(t){this.Q$!==t&&(this.Q$=t,this.Co(new iC(this,this.Q$)))}get oA(){return this._0}set oA(t){this._0=t}get hA(){return this.g0}set hA(t){this.g0!==t&&(this.g0=t,this.Co(new sC(this)))}gE(t){if(!t||t.Lt)return;const i=Zk(this.w0,t,Xk);if(i>=0)return;const e=Zk(this.L.xw,t,qk);t.Lt=this;const s=-(i+1);this.w0.splice(s,0,t);const n=-(e+1);this.A0(t,n),this.Co(new rC(t))}A0(t,i){this.s0.splice(i,0,t),this.v0(i),t.eD=i,i<this.f0&&(this.f0=i)}DI(t){if(!t||t.Lt!==this)return;const i=this.t0(t);if(i<0)return;t.ro=!1;const e=this.d0,s=Zk(e,t,qk);s>=0&&jc(e,s);Zk(this.w0,t,Xk);s>=0&&jc(this.w0,s),this.m0(t,i),this.Co(new oC(t))}m0(t,i){jc(this.s0,i),this.v0(i),t.eD=-1,this.f0>i&&--this.f0}qN(t){if(!t||t.Lt!==this)return;const i=this.t0(t);if(i<0)return;this.m0(t,i);const e=Kk(this.L.xw,t,qk);this.A0(t,e);const s=Z_(this.d0,(i=>i===t));if(s>=0){jc(this.d0,s);const i=Kk(this.d0,t,qk);this.d0.splice(i,0,t)}}p0(t,i){const e=this.d0,s=this.s0;let n=this.f0,r=!1;i&&(n=0);for(let i=e.length-1;i>=0;i--){Hk(e[i],t)||(r=!0,jc(e,i))}for(;n<s.length&&s[n].zN<=t;){const i=s[n];if(0===t)break;Hk(i,t)&&!na(e,i)&&(r=!0,e.push(i)),n++}r&&Cl(e,qk),this.f0=n}t0(t){return(-1===t.eD||t.eD>=this.y0)&&this.M0(),t.eD}M0(){const t=this.s0;for(let i=this.y0;i<t.length;i++)t[i].eD=i;this.y0=t.length}v0(t){t<this.y0&&(this.y0=t)}nA(t){this.rA||(this.eA=t)}gn(){this.Vo();const t=this.s0.slice();for(const i of t)i.gn();Ri(this.s0),Ri(this.w0),Ri(this.d0)}constructor(t,i,e,s,n,r,h,o,a){super(),this.DN=Vu(),this.o0=!1,this.PR=Ht.Ch,this.Q$=ja.NONE,this._0=void 0,this.s0=[],this.w0=[],this.d0=[],this.y0=0,this.f0=0,this.NN=i||"",this.u0=o||"",this.c0=t,this.Pk=s||"",this.o0=Boolean(n),this.a0=Boolean(h),this.g0=r||Ks.DEFAULT,this.SN=e||"",this.l0=a||[],this.r0=new tC(this.s0),this.n0=new tC(this.d0)}};r(),r(),r();var uC=class extends za{fa(){return new cC(this.jN.va)}constructor(t,i){super(Sl.xN,t),this.sS=i}},cC=class extends yu{constructor(t){super("enter",t)}};r();var lC=class extends za{fa(){return new dC(this.jN.va)}constructor(t,i){super(Sl.ON,t),this.sS=i}},dC=class extends yu{constructor(t){super("exit",t)}};r();var fC=class extends bo{fa(){return new _C(this.jN.va)}constructor(t){super(Os._w),this.jN=t}},_C=class extends te{constructor(t){super("entercue"),this.cue=t}};r();var gC=class extends bo{fa(){return new wC(this.jN.va)}constructor(t){super(Os.ww),this.jN=t}},wC=class extends te{constructor(t){super("exitcue"),this.cue=t}},Qu=class extends ha{get Vw(){return this.DN}get zN(){return this.T0.startTime}set zN(t){this.T0.startTime=t}get PN(){return this.T0.endTime}set PN(t){this.T0.endTime=t}get O(){return this.ZN}set O(t){this.ZN=t}get KN(){return!!this.T0.pauseOnExit}set KN(t){this.T0.pauseOnExit=!!t}get Lt(){return this.HN}set Lt(t){this.HN=t}get o(){return this.T0.id||""}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Oh(this)}get ro(){return this.ho}set ro(t){this.ro!==t&&(this.ho=t,t?(this.Co(new uC(this,this.zN)),this.HN&&this.HN.Co(new fC(this))):(this.Co(new lC(this,this.PN)),this.HN&&this.HN.Co(new gC(this))))}$N(t){return this===t||Dg(this,t)&&Tm(this,t)&&this.tD(t)}tD(t){return Ph(this.O,t.O)}gn(){this.Vo(),this.T0.removeEventListener("enter",this.N0),this.T0.removeEventListener("exit",this.D0)}constructor(t){super(),this.ZN=void 0,this.HN=void 0,this.Xa=void 0,this.ho=!1,this.N0=()=>{this.ro=!0},this.D0=()=>{this.ro=!1},this.DN=um(),this.T0=t,this.GN=t.startTime,this.VN=t.endTime,this.T0.addEventListener("enter",this.N0),this.T0.addEventListener("exit",this.D0)}};r();var AC=class extends bo{fa(){return new vC(this.Lt.va)}constructor(t){super(Os.mw),this.Lt=t}},vC=class extends te{constructor(t){super("cuechange"),this.track=t}};function mC(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new pC(t),t.THEOplayerVTTRegion=i),i}r(),r();var pC=class{get S0(){return this.I0}get o(){return this.I0.id||""}get ji(){return+this.I0.width||0}set ji(t){this.I0.width=t||0}get sD(){return+this.I0.lines||0}set sD(t){this.I0.lines=t||0}get nD(){return+this.I0.regionAnchorX||0}set nD(t){this.I0.regionAnchorX=t||0}get rD(){return+this.I0.regionAnchorY||0}set rD(t){this.I0.regionAnchorY=t||0}get oD(){return+this.I0.viewportAnchorX||0}set oD(t){this.I0.viewportAnchorX=t||0}get aD(){return+this.I0.viewportAnchorY||0}set aD(t){this.I0.viewportAnchorY=t||0}get hD(){return this.I0.scroll||""}get va(){return this.Xa||(this.Xa=bm(this)),this.Xa}constructor(t){this.Xa=void 0,this.I0=t}};var yC=class extends Qu{get O(){return this.T0.text}set O(t){this.T0.text=t}get Pt(){return this.T0.vertical||""}set Pt(t){this.T0.vertical=t||""}get YN(){return this.T0.snapToLines}set YN(t){this.T0.snapToLines=t}get RN(){return this.T0.line}set RN(t){this.T0.line=t}get ey(){return+this.T0.size}set ey(t){this.T0.size=hi(t,0,100)}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return pm(this)}tD(t){return Nm(this,t)}constructor(t){super(t)}},MC=class extends yC{get FN(){return mC(this.T0.region)}get UN(){return this.T0.lineAlign||"start"}set UN(t){this.T0.lineAlign=t||"start"}get po(){return this.T0.position}set po(t){this.T0.position=t}get QN(){return this.T0.positionAlign||"auto"}set QN(t){this.T0.positionAlign=t||"auto"}get BN(){return this.T0.align||"center"}set BN(t){this.T0.align=t||"center"}constructor(t){super(t)}},TC=class extends yC{get FN(){return mC(this.S0)}get S0(){return function(t,i){if(void 0===i)return;let e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.T0.track,this.T0.regionId)}get UN(){return function(t){return"middle"===t?"center":t}(this.T0.lineAlign||"start")}set UN(t){this.T0.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get po(){return this.T0.position}set po(t){this.T0.position=function(t,i){return vm(t,i)}(t,this.BN)}get QN(){return function(t){return wm[t]}(this.T0.positionAlign||"middle")}set QN(t){this.T0.positionAlign=function(t,i){return gm[Am(t,i)]}(t||"center",this.BN)}get BN(){return function(t){return"middle"===t?"center":t}(this.T0.align||"middle")}set BN(t){this.T0.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function NC(t,i){return t.O===i.O}function DC(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].zN<t.zN)return void SC(i,e,t.zN);const s=i[0];if(s.zN>t.zN)return void(t.PN=s.zN);const n=Zk(i,t,qk);if(n>=0)return;const r=-(n+1),h=r-1;if(h>=0){i[h].zN<t.zN&&SC(i,h,t.zN)}if(r<i.length){const e=i[r];t.PN=e.zN}}function SC(t,i,e){const s=t[i].zN;for(let n=i;n>=0&&t[n].zN===s;n--)t[n].PN=e}function IC(t){return Oh(t)}r(),r(),r(),r();var EC,bC,LC=class extends Qu{get O(){return this.E0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return IC(this)}tD(t){return NC(this,t)}constructor(t,i){super(t),this.E0=i}};function $(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function I(t){switch(t){case 0:return CA;case 1:return zA;case 2:return Sa;case 3:return Fi}}function kC(t,i){const e=i.Ku,s=t.byteLength,n=xe(t);return i.Np(s-e),Th(n,e,s).buffer}function CC(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function xC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s);return{id:e,language:Vo(t,i,3),description:n(t,i),text:n(t,i)}}function OC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s);return{id:e,mimeType:CA(t,i),fileName:n(t,i),description:n(t,i),data:kC(t,i)}}function jC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s),r=[];for(;i.Ku<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function zC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s),r=Vo(t,i,3),h=F(t,i),o=F(t,i),a=n(t,i);let u=!1;const c=[];for(;i.Ku<t.byteLength;){let e;if(1===s){let s=jA(t,i);void 0===s?s=u:u=s,e=Sa(t,i,s)}else e=n(t,i);if(!e||i.Ku+4>t.byteLength)break;c.push({text:e,timestamp:Sn(t,i)})}return{id:e,language:r,format:h,contentType:o,description:a,entries:c}}function PC(t,i,e){return{id:e,ownerIdentifier:CA(t,i),identifier:kC(t,i)}}function BC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s);return{id:e,language:Vo(t,i,3),description:n(t,i),text:n(t,i)}}function RC(t,i,e){const s=F(t,i);if(!$(s))return;return{id:e,text:I(s)(t,i)}}function UC(t,i,e){return{id:e,url:CA(t,i)}}function QC(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s);return{id:e,description:n(t,i),text:n(t,i)}}function FC(t,i,e){const s=F(t,i);if(!$(s))return;return{id:e,description:I(s)(t,i),url:CA(t,i)}}function YC(t,i,e){switch(e){case"COM":return xC(t,i,e);case"GEO":return OC(t,i,e);case"IPL":return jC(t,i,e);case"PIC":return function(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s),r=Vo(t,i,3),h=F(t,i),o=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=CA(t,i)):(a="image/"+r.toLowerCase(),u=kC(t,i)),{id:e,mimeType:a,pictureType:h,description:o,data:u}}(t,i,e);case"SLT":return zC(t,i,e);case"TXX":return QC(t,i,e);case"UFI":return PC(t,i,e);case"ULT":return BC(t,i,e);case"WXX":return FC(t,i,e);default:if("T"===e.charAt(0))return RC(t,i,e);if("W"===e.charAt(0))return UC(t,i,e)}}function GC(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s),r=CA(t,i),h=F(t,i),o=n(t,i);let a;return a="--\x3e"===r?CA(t,i):kC(t,i),{id:e,mimeType:r,pictureType:h,description:o,data:a}}(t,i,e);case"COMM":return xC(t,i,e);case"COMR":return function(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s),r=CA(t,i),h=Vo(t,i,8),o=CA(t,i),a=F(t,i),u=n(t,i),c=n(t,i);let l,d;return i.Ku<t.byteLength&&(l=CA(t,i)||"image/",d=kC(t,i)),{id:e,price:r,validUntil:h,contactURL:o,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,i,e);case"GEOB":return OC(t,i,e);case"IPLS":return jC(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:CA(t,i),data:kC(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:F(t,i),position:Sn(t,i)}}(t,i,e);case"SYLT":return zC(t,i,e);case"TXXX":return QC(t,i,e);case"UFID":return PC(t,i,e);case"USER":return function(t,i,e){const s=F(t,i);if(!$(s))return;const n=I(s);return{id:e,language:Vo(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return BC(t,i,e);case"WXXX":return FC(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return RC(t,i,e);default:{const s=e.charAt(0);if("T"===s)return RC(t,i,e);if("W"===s)return UC(t,i,e)}}}r(),r(),function(t){t[t.ISO_8859_1=0]="ISO_8859_1",t[t.UTF16_BOM=1]="UTF16_BOM",t[t.UTF16=2]="UTF16",t[t.UTF8=3]="UTF8"}(EC||(EC={})),function(t){t[t.V22=2]="V22",t[t.V23=3]="V23",t[t.V24=4]="V24"}(bC||(bC={}));var VC=10;function WC(t,i){return(127&F(t,i))<<21|(127&F(t,i))<<14|(127&F(t,i))<<7|127&F(t,i)}function HC(t,i){switch(t){case 4:return{b0:_u(i,0),L0:_u(i,1),k0:_u(i,2),C0:_u(i,3)};case 3:return{b0:_u(i,0),L0:_u(i,1),k0:_u(i,2)};case 2:return{b0:_u(i,0),x0:_u(i,1)}}}function qC(t,i,e){switch(e._y){case 3:e.gy.L0&&function(t,i){const e=i.Ku,s=Sn(t,i)+4,n=32768&bl(t,i);i.Dp(e+s),n&&Sn(t,i)}(t,i);break;case 4:e.gy.L0&&function(t,i){const e=i.Ku,s=WC(t,i);i.Dp(e+s)}(t,i)}}function XC(t,i){if(t.byteLength-i.Ku<VC)return null;if(73!==F(t,i)||68!==F(t,i)||51!==F(t,i))return null;const e=F(t,i),s=F(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=F(t,i),r=WC(t,i);return{_y:e,O0:s,gy:HC(e,n),j0:r}}function ZC(t,i,e){switch(e){case 2:return function(t,i){if(i.Ku+6>t.byteLength)return;return{o:Vo(t,i,3),ey:IA(t,i,3)}}(t,i);case 3:return function(t,i){if(i.Ku+10>t.byteLength)return;const e=Vo(t,i,4),s=Sn(t,i);F(t,i);const n=F(t,i);return{o:e,ey:s,gy:{x0:_u(n,0),z0:_u(n,1),groupingIdentity:_u(n,2)}}}(t,i);case 4:return function(t,i){if(i.Ku+10>t.byteLength)return;const e=Vo(t,i,4),s=WC(t,i);F(t,i);const n=F(t,i);return{o:e,ey:s,gy:{groupingIdentity:_u(n,1),x0:_u(n,4),z0:_u(n,5),b0:_u(n,6),P0:_u(n,7)}}}(t,i)}}function KC(t){const i=xe(t),e=new T(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return Ao(Th(e,0,s))}function JC(t,i){const e=i||new Vr,s=XC(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.Ku;let r=ir(t,n,n+e.j0);const h=new Vr;switch(i.Np(e.j0),e._y){case 2:case 3:e.gy.b0&&(r=KC(r))}qC(t,i,e);for(;h.Ku<r.byteLength;){const t=$C(r,h,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{iy:s,B0:n}}function $C(t,i,e){const s=ZC(t,i,e._y);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.ey)return;const n=i.Ku;let r,h,o=ir(t,n,n+s.ey);switch(i.Np(s.ey),e._y){case 2:{const t=s;h=o,r=YC(h,new Vr,t.o);break}case 3:{const t=s,i=new Vr;!function(t,i,e){const s=e.gy;let n,r,h;s.x0&&(n=Sn(t,i)),s.z0&&(r=F(t,i)),s.groupingIdentity&&(h=F(t,i))}(o,i,t);h=ir(o,i.Ku,o.byteLength),r=GC(h,new Vr,t.o);break}case 4:{const t=s,i=new Vr;t.gy.b0&&(o=KC(o)),function(t,i,e){const s=e.gy;let n,r,h,o;s.groupingIdentity&&(n=F(t,i)),s.x0&&(r=Sn(t,i)),s.z0&&(h=F(t,i)),s.P0&&(o=WC(t,i))}(o,i,t);h=ir(o,i.Ku,o.byteLength),r=GC(h,new Vr,t.o);break}}if(!r){const t=Pe(xe(h));r=CC(s.o,t.buffer)}return r}function tx(t){return function(t,i,e){return RC(t,i,e)}(new DataView(t.data),new Vr,t.key)}function ix(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return tx(t);default:let i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return CC(t.key,t.data)}(t)}r(),r();var Us=class t extends i{get q(){return this.n0}get vE(){return this.R0?this.R0.default:void 0}get L(){return this.r0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Qo(this)}get o(){return this.TN.id||this.R0&&this.R0.id||""}get Vw(){return this.DN}get iA(){return this.TN.inBandMetadataTrackDispatchType||""}get zt(){return this.TN.kind||Pt.pp}get kh(){return this.SN}set kh(t){t!==this.SN&&(this.SN=t,void 0!==this.R0&&(this.R0.label=t),this.Co(new Hn(this)))}get gs(){return this.TN.language||""}get eA(){return this.PR}set eA(t){let i=this.eA;this.PR=Ne(t),this.U0();let e=this.eA;i!==e&&this.Co(new Zr(this)),e!==Ht.Ch&&this.Q0(ja.LOADING)}get F0(){return Ne(this.TN.mode)}set F0(t){this.TN.mode=t}get IN(){return this.TN}get vg(){return this.Q$}get Y0(){return this.R0?+this.R0.readyState||ja.NONE:ja.LOADED}get oA(){return this._0}get hA(){return this.g0}set hA(t){this.g0!==t&&(this.g0=t,this.Co(new sC(this)))}get G0(){return this.V0}set G0(t){this.V0=t,t&&(this.W0=!0,u((()=>{this.W0=!1}),50)),this.U0()}U0(){let t=this.eA;this.G0||t!==Ht.Xn?this.F0=t:this.F0=Ht.sA}H0(){let t=this.eA,i=this.F0;t!==i&&(this.G0||t!==Ht.Xn||i!==Ht.sA)&&("metadata"===this.zt&&i===Ht.Ch?this.eA=t:this.W0&&i===Ht.Ch&&t===Ht.Xn?this.F0=t:this.eA=i)}Y$(t){this.Q$!==t&&(this.Q$=t,this.Co(new iC(this,t)))}Q0(t){let i=x.max(this.Q$,this.Y0,t);this.Y$(i)}static q0(t){return t&&t.THEOplayerTextTrackCue||void 0}X0(i){let e=t.q0(i);if(e)return e;if(e=this.Z0(i),qe(e))for(let t of e)t.Lt=this;else e.Lt=this;return i.THEOplayerTextTrackCue=e,e}Z0(t){return function(t){return!(!t||"org.id3"!==t.type||!t.value)}(t)?(this.hA=Ks.ID3,function(t){let i;try{i=ix(t.value)}catch(t){i=CC("")}return new LC(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.hA=Ks.ID3,function(t){let i=[];try{let e=JC(new DataView(t.data));if(e)for(let s of e.B0)i.push(new LC(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.hA=Ks.WEBVTT,function(t){return"regionId"in t}(t)?new TC(t):new MC(t)):new Qu(t)}K0(t){let i=[];if(!t)return i;let e=t.length;for(let s=0;s<e;s++){let e=this.X0(t[s]||t.item(s));if(qe(e))for(let t of e)i.push(t);else i.push(e)}return i}J0(){let t=this.K0(this.TN.cues),i=$k(this.s0,t);for(let t of i.e0)t.fn(Sl.ON,this.$0),t.fn(Sl.xN,this.$0),this.Co(new oC(t));for(let t of i.i0)t.yn(Sl.xN,this.$0),t.yn(Sl.ON,this.$0),this.Co(new rC(t))}p0(){let t=this.K0(this.TN.activeCues),i=$k(this.d0,t);for(let t of i.e0)t.ro=!1;for(let t of i.i0)t.ro=!0;(i.i0.length||i.e0.length)&&this.Co(new AC(this))}nA(t){this.eA=t}gn(){this.Vo();const t=this.s0.slice();for(let i of t)i.gn();Ri(this.s0),Ri(this.d0),this.TN.removeEventListener("cuechange",this.t1),this.TN.removeEventListener("cuechange",this.$0),this.R0&&(this.R0.removeEventListener("load",this.i1),this.R0.removeEventListener("error",this.e1),ei(this.R0))}constructor(t,i,e=!0){super(),this.s0=[],this.d0=[],this.PR=Ht.Ch,this.Q$=ja.NONE,this._0=void 0,this.g0=Ks.DEFAULT,this.W0=!1,this.t1=()=>{this.U0(),this.TN.removeEventListener("cuechange",this.t1)},this.$0=()=>{this.eA!==Ht.Ch&&(this.J0(),this.p0(),this.s0.length&&this.Q0(ja.LOADING))},this.i1=()=>{this.Q0(ja.LOADED)},this.e1=()=>{this.Q0(ja.ERROR)},this.TN=t,this.V0=e,this.TN.addEventListener("cuechange",this.t1),this.TN.addEventListener("cuechange",this.$0),this.R0=i,this.R0&&(this._0=xa(this.R0.src),this.R0.addEventListener("load",this.i1),this.R0.addEventListener("error",this.e1)),this.DN=Vu(),this.SN=t.label||"",this.r0=new tC(this.s0),this.n0=new tC(this.d0),this.eA=this.F0,yc((()=>{this.$0(),this.Q0(ja.NONE)}))}};r(),r();function ex(t,i){return Li(t.sS,i.sS)||function(t,i){return t.Lt===i.Lt?Xo(Jk(t),Jk(i)):fy(t.Lt,i.Lt)}(t.jN,i.jN)||function(t,i){return t===i?Ji.Zr:t===Sl.xN?Ji.Hf:Ji.Wf}(t.type,i.type)}var sx=class{Zn(){Ri(this.s1);for(const t of this.Dl.slice())this.it(t);this.n1(),this.o1=0,this.An=0,this.a1=!1,this.u1=!1,this.c1=void 0}tt(t){if(!na(this.Dl,t)){if(this.Dl.push(t),t.yn(Os.aw,this.l1),t.yn(Os.cw,this.d1),t.yn(Os.dw,this.f1),t.yn(Os.ra,this._1),t.L.U>0){for(const i of t.L.xw)this.g1.push(i);this.w1()}this.A1()}}it(t){if(Et(this.Dl,t)){if(t.fn(Os.aw,this.l1),t.fn(Os.cw,this.d1),t.fn(Os.dw,this.f1),t.fn(Os.ra,this._1),t.L.U>0){for(const i of t.L.xw)Et(this.s1,i),Et(this.g1,i);this.w1()}this.A1()}}A1(){this.a1=this.Dl.some((t=>t.eA!==Ht.Ch))}v1(){this.Qo.Tg||this.Qo.hg?this.n1():this.w1()}w1(){this.a1&&(this.o1||(this.o1=this.M1.m1(this.T1)))}n1(){this.o1&&(this.M1.N1(this.o1),this.o1=0)}D1(){if(!this.a1)return;if(this.Qo.Tg)return;const t=this.Dl,i=this.An;var e;const s=null!=(e=this.c1)?e:this.Qo.j_,n=s-i<-.1;let r=this.u1||n;r&&s>i&&s-i<.1&&(r=!1),this.u1=!1,this.c1=void 0;const h=[];for(const i of t)if(i.eA!==Ht.Ch){i.p0(s,r);for(const t of i.q.xw)h.push(t)}const o=this.s1.slice();if(r);else for(const e of t)e.eA!==Ht.Ch&&dy(e,i-Dc,s,o);for(let t=o.length-1;t>=0;t--)na(h,o[t])&&jc(o,t);const a=[];if(!r)for(let t=o.length-1;t>=0;t--){const e=o[t];e.zN>i&&e.PN<=s&&(a.push(e),jc(o,t))}for(const t of this.g1)Et(a,t);Ri(this.g1);const u=[],c=[];for(const t of a)t.ro||u.push(new uC(t,t.zN)),u.push(new lC(t,x.max(t.zN,t.PN))),t.ro=!1;for(const t of o)t.ro&&(u.push(new lC(t,x.max(t.zN,t.PN))),t.ro=!1);for(const t of h)t.ro||(u.push(new uC(t,t.zN)),t.ro=!0);u.sort(ex);for(const t of u){const i=t.jN;i.Co(t);const e=i.Lt;e&&(t.type===Sl.xN?e.Co(new fC(i)):e.Co(new gC(i)),na(c,e)||c.push(e))}c.sort(fy);for(const t of c)t.Co(new AC(t));this.An=s,this.s1=h}gn(){this.Zn(),this.Qo.fn(t.ov,this.S1),this.Qo.fn(t.jh,this.S1),this.Qo.fn(qo.Tv,this.S1),this.Qo.fn(t.Sh,this.S1),this.Qo.fn(t.ZA,this.I1),this.Qo.fn(t.XA,this.E1)}constructor(i,e){this.Dl=[],this.o1=0,this.An=0,this.s1=[],this.g1=[],this.a1=!1,this.u1=!1,this.c1=void 0,this.T1=()=>{this.o1=0,this.D1(),this.v1()},this.S1=()=>{this.D1(),this.v1()},this.I1=()=>{this.u1=!0,this.c1=this.Qo.j_,this.n1()},this.E1=()=>{this.D1(),this.v1()},this._1=()=>{this.A1(),this.D1(),this.v1()},this.l1=t=>{const i=t.jN;na(this.g1,i)||this.g1.push(i),this.w1()},this.d1=t=>{const i=t.jN;Et(this.s1,i),Et(this.g1,i),this.w1()},this.f1=t=>{this.w1()},this.M1=e,this.Qo=i,i.yn(t.ov,this.S1),i.yn(t.jh,this.S1),i.yn(qo.Tv,this.S1),i.yn(t.Sh,this.S1),i.yn(t.ZA,this.I1),i.yn(t.XA,this.E1),this.w1()}};r();var nx=class{m1(t){return Vs(t)}N1(t){Gs(t)}},rx=new nx,hx=class extends sx{constructor(t,i=rx){super(t,i)}};r(),r();var ox=class extends yn{get va(){return this.Xa||(this.Xa=IC(this)),this.Xa}tD(t){return NC(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}};r(),r();var ax=class extends wn{constructor(t,i,e=Ks.DEFAULT){super(Pt.Mp,"",i||"","",!1,e,!1,t)}},ux=class extends ax{gE(t){DC(t,this.s0),super.gE(t)}fa(){return Qo(this)}constructor(t,i){super(t,i),this.hA=Ks.ID3}};function cx(t){const i=t&&t.THEOplayerTextTrackCue||void 0;if(i)return i;const e=t.startTime,s=ix(t.value);return t.THEOplayerTextTrackCue=new ox(e,s),t.THEOplayerTextTrackCue}var lx=class extends ux{get o(){return this.TN.id||""}get iA(){return this.TN.inBandMetadataTrackDispatchType||""}get gs(){return this.TN.language||""}Xo(t){super.Xo(t),this.F0=this.eA}get F0(){return Ne(this.TN.mode)}set F0(t){this.TN.mode=t}get IN(){return this.TN}Q0(t){this.vg=x.max(this.vg,t)}J0(){let t=this.TN.cues;if(!t)return;let i=function(t){const i=t.length,e=[];for(let s=0;s<i;s++)e.push(cx(t[s]||t.item(s)));return Cl(e,qk),e}(t),e=$k(this.L.xw.slice(),i);for(let t of e.e0)this.DI(t);for(let t of e.i0)this.gE(t)}gn(){this.TN.removeEventListener("cuechange",this.$0),super.gn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.$0=()=>{this.eA!==Ht.Ch&&(this.J0(),this.Q0(ja.LOADED))},this.TN=t,this.TN.addEventListener("cuechange",this.$0),this.eA=this.F0,yc((()=>{this.$0()}))}};r();var dx=class extends ni{b1(){this.L1.yn(gt.ew,this.cP),this.L1.yn(gt.hw,this.lP)}C1(){this.L1.fn(gt.ew,this.cP),this.L1.fn(gt.hw,this.lP)}O1(t){const i=t.L.xw[0];if(!fx(i))return;const e=function(t){const i=t.match(_x);if(!i)return;return{Lt:i[1],gs:i[2]}}(i.O.description),s=e.Lt,n=e.gs;if(this.j1(s,n))return;const r=this.cE.uE(Pt.pp,t.o,s,n,!1,Ks.TTML);this.tt(r),this.z1.set(t.Vw,r);for(let i of t.L.xw)fx(i)&&this.P1(i);t.yn(Os.aw,this.B1)}j1(t,i){return this.Z.xw.some((e=>e.kh===t&&e.gs===i))}P1(t){if(!t.Lt)return;const i=this.z1.get(t.Lt.Vw),e=Up(t.O.text,i,{LS:0,kS:1/0,CS:t.zN});for(let t of e)i.gE(t)}async Zn(){for(let t of this.L1.xw)t.fn(Os.aw,this.B1);for(let t of this.Z.xw)this.cE.AE(t);this.z1.clear(),await super.Zn()}async gn(){this.C1(),await super.gn()}constructor(t,i){super(),this.cE=t,this.L1=i,this.z1=Ye(),this.cP=async t=>{const i=t.Lt;if(i.hA||await i.D_(Os.Nw),i.hA===Ks.ID3){for(;0===i.L.U;)await i.D_(Os.aw);this.O1(i)}},this.lP=t=>{const i=t.Lt;if(i.hA!==Ks.ID3||!this.z1.has(i.Vw))return;const e=this.z1.get(i.Vw);this.it(e),this.cE.AE(e),i.fn(Os.aw,this.B1)},this.B1=t=>{fx(t.jN)&&this.P1(t.jN)},this.b1()}};function fx(t){return function(t){return function(t){return"TXXX"===t.id||"TXX"===t.id}(t)&&_x.test(t.description)}(t.O)}var _x=/^Track:(.+),Lang:(.+)$/;r(),r();var Le=class extends gg{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(i){super(t.NA),this.errorObject=i}};r(),r(),r();var gx=class extends gg{constructor(){super(t.DA)}};r();var wx=class extends gg{constructor(t){super("_v"),this.R1=t}},Ax=new Vi,vx=class extends gg{constructor(t){super("Ws"),this.session=t}},mx=class extends i{nx(){return this.U1=!0,Ax.nO((t=>this.Q1(t)),this.rO.a_)}async Q1(t){try{Pi(t),await this.F1.sj(t);const i=await this.F1.nj(this.Y1._L,this.Y1.SL,t);await this.G1.nx(this.Y1._L,this.Y1.SL,i)}catch(t){yo(t);const i=t instanceof $t?t.zL:void 0,e=new Yr(le.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ss(e),e}}async dj(t,i){let e;try{e=function(t){return Zw(t,Zy())}(t)?await this.F1.Mj(new T(t),this.rO.a_):await this.F1.Tj(new T(t),i,this.rO.a_)}catch(t){if(Oi(t))return;throw t}if(this.rO.a_.$f)return;const s=this.V1,n=new No;this.V1=n;try{await this.G1.Qn(e),await be(100)}catch(t){const i=t instanceof $t?t.zL:void 0;throw new Yr(le.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.OL,n.CL(),this.V1===n&&(this.V1=void 0)}}Ss(t){const i=t instanceof Yr?t:new Yr(le.CONTENT_PROTECTION_ERROR,t.message,t);this.Co(new Le(i)),this.Ws()}W1(){this.G1.fn("pL",this.lx),this.G1.fn("vL",this.H1),this.G1.fn("lt",this.q1),this.X1=!1,this.rO.c_(),this.Co(new vx(this))}async Ws(){let t;this.Vo();do{t=this.V1,void 0!==t&&await t.OL}while(this.V1!==t);this.W1(),await this.G1.Ws().catch(xs)}constructor(t,i,e){super(),this.G1=t,this.F1=i,this.Y1=e,this.U1=!1,this.X1=!1,this.rO=new Po,this.lx=t=>{if(!this.rO.a_.$f)switch(t.yL){case"license-request":case"license-renewal":this.dj(t.pL,t.ML).catch((t=>this.Ss(t)));break;default:this.Ss(new Yr(le.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.yL))}},this.H1=t=>{this.G1.JC.bL(((t,i)=>{switch(t){case"usable":ag.g_((()=>{this.X1=!0,this.Co(new gx)}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.Co(new wx(i))}}))},this.q1=t=>{this.Ss(new Yr(le.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.yn("pL",this.lx),t.yn("vL",this.H1),t.yn("lt",this.q1),t.XC.then((()=>this.W1()),(t=>this.Ss(t)))}};r();var px=[t.DA,t.NA,t.fv],yx=class extends i{get dm(){return this.fm}ej(){return this.Z1.ej()}K1(t){return this.J1||(this.J1=this.t4(t)),this.J1}async t4(t){Pi(t);const i=await this.Z1.Mj(new T(Zy()),t);if(Pi(t),!this.wx)throw new b("Invalid MediaKeys when setting ServerCertificate");await this.wx.Ax(i.buffer)}async i4(t){if(!this.wx)throw new b("Invalid MediaKeys when creating KeySession");try{this.e4.push(t);const i=await this.wx.gx("temporary"),e=new mx(i,this.Z1,t);return this.s4.push(e),e.yn(px,this.Ds),e.yn("Ws",this.n4),e}finally{Et(this.e4,t)}}r4(t){if(t.h4)return!1;for(const i of this.s4)if(Mx(i.Y1,t))return!0;for(const i of this.e4)if(Mx(i,t))return!0;return!1}async gn(){this.wx=void 0,this.Vo();const t=this.s4.slice();Ri(this.s4),await Promise.all(t.map((t=>t.Ws()))),this.Z1.e_()}constructor(t,i,e){super(),this.s4=[],this.J1=void 0,this.e4=[],this.n4=t=>{t.session.fn(px,this.Ds),t.session.fn("Ws",this.n4),Et(this.s4,t.session)},this.fm=t,this.wx=i,this.Z1=e}};function Mx(t,i){return!t.h4&&t._L===i._L&&Zw(t.SL,i.SL)}var Tx=class extends i{get o4(){var t;return null==(t=this.fm)?void 0:t.dm}get FP(){return this.Z1}set FP(t){this.Z1=t}$n(t,i){this.MP=t,this.zH(i)}zH(t){this.Zx=t,this.a4(this.rO.a_).catch(Ah)}async a4(t){if(!ag.Ys.u4||!await this.c4(t))return this.Zx&&this.Zx.l4?await this.d4(t):void 0}async c4(t){var i,e;if(!(null==(i=this.Zx)?void 0:i.EP))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.Zx)?void 0:e.EP)?n:[]){var r;for(const e of null!=(r=i.iP)?r:[])try{await this.f4(i.dm._L,e,t),s=!0}catch(t){yo(t)}if(s)return!0}return!1}async f4(t,i,e){if(Pi(e),!i.byteLength)return;if(!this.Zx||!this.Zx.EP.length)throw new Yr(le.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==Lw&&t!==Xh&&t!==kw)return void 0;const s=wv(t,i),n=this.Zx.EP;let r;for(const i of n){Pi(e);const n=s[i.dm.gL];if(n&&i.dm._L===t)try{const t=await this._4(i,e);t.ej()&&await t.K1();const s=this.gP.W_,r={_L:i.dm._L,SL:n,h4:s};if(this.g4(t,r)){const i=await t.i4(r);await i.nx()}return}catch(t){yo(t),r=t}}throw await ag.xx()?new Yr(le.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",r):new Yr(le.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",r)}async d4(t){var i;const e=null==(i=this.Zx)?void 0:i.EP;if(e)for(const i of e){Pi(t);try{const e=await this._4(i,t);return void(e.ej()&&await e.K1())}catch(t){yo(t)}}}g4(t,i){return ag.Ys.w4||this.gP.A4.SH||!t.r4(i)}_4(t,i){return this.QH.nO((i=>this.v4(t,i)),i)}async v4(i,e){if(Pi(e),!this.Zx||!this.Z1||!this.MP)throw new b("Not initialized");if(this.fm){if(this.fm.dm!==i.dm)throw new b("Internal key system error");return this.fm}const s=this.Z1;var n;const r=oe({},i,{JP:i.JP.map((t=>oe({},t,{persistentState:null!=(n=t.persistentState)?n:s.xj(i.dm),zx:t.zx||s.zx(i.dm)})))}),h=await this.MP.CH(r.dm,r.JP),o=s.tP(r),a=new yx(r.dm,h,o);return a.yn([t.DA,t.NA,t.fv],this.Ds),this.fm=a,a}Ss(t){if(Oi(t))return;const i=t instanceof Yr?t:new Yr(le.CONTENT_PROTECTION_ERROR,t.message,t);this.Co(new Le(i))}async Zn(){this.MP=void 0,this.Zx=void 0,this.rO.c_(),this.rO=new Po,await this.m4()}async m4(){await this.QH.c_();const i=this.fm;i&&(i.fn(t.fv,this.Ds),this.fm=void 0,await i.gn())}async e_(){this.Vo(),this.gP.fn(sr.LA,this.y4),await this.Zn(),await this.QH.gn()}constructor(t){super(),this.rO=new Po,this.QH=new Vi,this.Zx=void 0,this.Z1=void 0,this.MP=void 0,this.fm=void 0,this.y4=t=>{this.f4(t._L,t.SL,this.rO.a_).catch((t=>this.Ss(t)))},this.gP=t,this.gP.yn(sr.LA,this.y4)}};r();r();var Nx=class extends gg{constructor(i){super(t.BA),this.currentTime=i}};r();var Dx=class extends i{get vg(){return void 0!==this.M4?this.M4.vg:rv.tN}Y$(){var t;null==(t=this.M4)||t.Y$()}Zn(){var t;null==(t=this.M4)||t.Zn()}e_(){this.Vo(),void 0!==this.M4&&(this.M4.e_(),this.M4=void 0)}T4(t){if(this.M4===t)return;const i=this.vg;void 0!==this.M4&&this.M4.e_(),this.M4=t,void 0!==t&&(t.yn(qo.Mw,this.Ds),t.Y$());const e=this.vg;i!==e&&this.Co(new ds(this.N4.j_,e))}constructor(t){super(),this.N4=t}},Sx=li.Ib||li.bb,Ix=li.cL,Ex=li.Rb,bx=li.Rb&&li.Ga,Lx=class extends i{D4(){this.pP.ended||this.j_===this.ct||(this.S4=!1)}get V$(){return this.I4}get b_(){return this.MP?this.MP.b_:Ki.aR()}get k_(){const t=this.TP;if(!t||j(t.getTime()))return;const i=1e3*this.j_;return new Date(t.getTime()+i)}get TP(){if(this.pP.getStartDate)return this.cR&&this.E4||(this.E4=this.pP.getStartDate()),this.E4}get j_(){return this.b4?this.b4.j_:void 0!==this.L4?this.L4:this.wO.currentTime}get Iu(){return this.Wu}get ct(){return this.b4?this.b4.ct:this.MP?this.MP.ct:this.wO.duration}get R_(){return this.Tg?this.C4():this.b4?this.b4.R_:this.wO.ended||this.S4}C4(){return void 0!==this.L4&&this.ct===this.L4}get lt(){return this.vP}get pP(){return this.wO}get hg(){return this.x4?this.O4:this.b4?this.b4.hg:this.wO.paused}get fg(){return this.Uo.GB(Ki.xn(this.wO.played))}get Ti(){return this.wO.offsetHeight*ag.Ys.j4}get ji(){return this.wO.offsetWidth*ag.Ys.j4}get ya(){return this._R}get vg(){return this.z4.vg}get yg(){return this.MP?this.MP.yg:Ki.aR()}get Tg(){return this.b4?this.b4.Tg:this.cR}get B$(){return this.b4?this.b4.B$:this.R$}get X$(){return 0!==this.P4}get Z_(){return this.b4?this.b4.Z_:this.wO.muted}set Z_(t){this.b4?this.b4.Z_=t:(this.wO.muted=t,this.B4())}get ag(){return this.b4?this.b4.ag:void 0!==this.R4?this.R4:this.wO.playbackRate}set ag(t){this.b4?this.b4.ag=t:this.hg||this.I4?(this.R4=t,this.U4()):(this.R4=void 0,this.wO.playbackRate=t,this.U4())}U4(){const t=this.ag;this.Q4!==t&&(this.Q4=t,this.Co(new Qh(this.j_,t)))}get F4(){return this.LB}get xg(){return this.b4?this.b4.xg:this.wO.volume}set xg(t){this.b4?this.b4.xg=t:(this.wO.volume=t,this.B4())}B4(){const t=this.xg,i=this.Z_;this.Y4===t&&this.G4===i||(this.Y4=t,this.G4=i,this.Co(new Ve(this.j_,this.xg)))}X_(){return Kb(this.wO)}Vg(){this.V4||(this.V4=!0);const t=this.W4();return this.H4(),t}H4(){this.x4?this.O4&&(this.O4=!1,this.Co(new vh(this.j_))):this.q4()}q4(){if(this.b4)this.b4.Vg();else{li.Rb&&!li.Ga&&this.wO.preload===ii.MB&&(this.wO.preload=ii.Mp);const t=this.ag,i=this.wO.play();t!==this.pP.playbackRate&&(this.ag=t),pu(i)?i.then(this.X4,this.Z4):this.K4.Z$()&&this.J4()}}Gg(){this.x4?this.O4||(this.O4=!0,this.Co(new ws(this.j_))):this.t2()}t2(){this.b4?this.b4.Gg():(this.wO.pause(),this.K4.Qn()),this.i2(new sa)}W4(){const t=new No;return this.e2.push(t),t.OL}s2(){for(const t of this.e2)t.CL(void 0);Ri(this.e2)}i2(t){for(const i of this.e2)i.xL(t);Ri(this.e2)}J4(){this.x4||this.b4||this.s2()}n2(t){this.x4||this.b4||this.i2(t)}Dp(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.b4?this.b4.Dp(t,i,e):(this.h2.c_(),this.h2=new Po,this.o2=this.a2(t,i,e,this.o2,this.h2.a_).catch(xs))}wP(t){const i=this.TP;if(!i||j(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Dp(e)}async a2(i,e,s,n,r){try{for(this.L4=i,this.u2=i,this.c2=ag.f_(),s&&!this.cR?this.R$=!0:(this.cR=!0,this.R$=!1),this.S4&&!this.C4()&&(this.S4=!1),this.R$?this.Co(new Ok(this.j_)):this.Co(new Ot(i)),await n.catch(xs),Pi(r),this.l2&&this.d2(),this.z4.vg===rv.tN&&await this.z4.D_(qo.Mw,r);0===this.wO.seekable.length||bx&&!this.V4;)await Promise.race([yi(this.wO,"timeupdate",r),be(100,r)]),Pi(r);let h=Ik(this.b_,i,.05),o=this.yg,a=!0,u=!1;for(;;){if(o=this.yg,o.U>0&&!o.gr(h)&&(h=o.RB(h),a=!0),e&&!this.wO.fastSeek){const t=this.b_;if(!t.gr(h)){const i=Ik(t,h,1);i!==h&&(h=i,a=!0)}}if(Ex){const t=this.f2();void 0!==t&&h>t&&(h=t,a=!0)}if(!u){const t=this._2();void 0!==t&&h>t&&(u=!0,await this.g2(t,!1,r),await yi(this.wO,"seeked",r),Pi(r),a=!0)}if(a){a=!1,await this.g2(h,e,r),Pi(r);let t=this.j_;o=this.yg,h=o.RB(h);let i=1;for(;x.abs(h-t)>=Dc;)o=this.yg,h=Cx(h,o,i),await this.g2(h,e,r),Pi(r),t=this.j_,i++}if(!(this.wO.seeking||this.z4.vg<rv.iN))break;await hu((i=>{var e;return Promise.race([yi(this.wO,"seeked",i),this.D_([t.VA,t.EA],i),this.z4.D_(qo.Mw,i),null==(e=this.MP)?void 0:e.D_(AL.OU,i)].filter(j_))}),r),Pi(r)}this.w2()}catch(t){if(Oi(t))return;0}}async g2(i,e,s){Pi(s);let n=this.yg;if(i=n.RB(i),this.l2){let e=!0;for(;e||this.z4.vg<rv.eN;)n=this.yg,n.gr(i)||(i=n.RB(i),e=!0),e?(e=!1,this.L4=i,this.A2(this.j_)):await hu((i=>Promise.race([this.D_(t.EA,i),this.z4.D_(qo.Mw,i)])),s);Pi(s)}const r=yi(this.wO,"seeking",s);e&&this.wO.fastSeek?this.wO.fastSeek(i):this.wO.currentTime=i,this.L4=void 0,this.A2(this.j_),this.wO.seeking&&await r}f2(){if(!this.MP||!this.MP.KH)return;const t=this.MP.JH,i=this.MP.$H,e=t&&i?t.Sn(i):t||i;if(!e||0===e.U)return;const s=e.Cn(e.U-1),n=e.jn(e.U-1);return x.max(s,n-.001)}_2(){if(!this.MP||!this.MP.KH)return;const t=this.MP.$H;if(!t||0===t.U)return;const i=t.Cn(t.U-1);let e=t.jn(t.U-1)-.02;return e-=.001,x.max(i,e)}A2(t){this.u2!==t&&(this.u2=t,this.R$?this.Co(new Ok(t)):this.Co(new Ot(t)))}w2(){const t=this.R$;this.cR=!1,this.R$=!1,this.c2=0,this.u2=NaN,this.l2&&this.m2(),t?(this.Co(new Nx(this.j_)),this.M2()):this.Co(new $s(this.j_))}d2(){this.x4||(this.O4=this.hg,this.x4=!0,this.t2())}m2(){this.x4&&(this.x4=!1,this.O4||this.H4())}tq(t){for(const i of t){if(i.hA===wt.bO&&pL.tq(i,this.wO))return i;if(i.hA===wt.LO&&Ck.tq(i))return i}}be(){this.LB=!1,Fs(this.wO)&&(this.wO.style.display="none")}ge(){this.LB=!0,Fs(this.wO)&&(this.wO.style.display="block")}get nt(){return this.T2}get Ol(){return this.mR}uE(t,i,e,s,n,r,h,o,a){const u=new wn(t,i,e,s,n,r,h,a,o);return this.Dl.tt(u),this.N2.tt(u),u}OP(){return!0}zP(t,i,e,s,n){const r=h.createElement("track");r.src=xa(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=!!n,r.id=Rs(),this.wO.appendChild(r);const o=this.wO.textTracks.getTrackById(r.id),a=new Us(o,r);return this.D2.tt(a),this.S2.push(a),a}AE(t){this.Dl.it(t),this.N2.it(t)}BP(){for(const t of this.Dl.xw.slice())t.gn();this.Dl.Zn();for(const t of this.S2.slice())this.D2.it(t),t.gn();Ri(this.S2)}$P(){let t=this.wO.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.I2),t.addEventListener("removetrack",this.E2),t.addEventListener("change",this.b2))}QP(){let t=this.wO.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.I2),t.removeEventListener("removetrack",this.E2),t.removeEventListener("change",this.b2))}L2(t,i){if(li.Rb){if(t.kind===Pt.Mp)return void this.C2(t);if(t.kind===Pt.fI&&""===t.label&&""===t.language&&!Ox(t))return void this.O2(t,i)}xx(this.D2,t)||this.D2.tt(new Us(t,i))}C2(t){t.mode=Ht.sA;const i=new lx(t);this.D2.tt(i),this.N2.tt(i)}O2(t,i){const e=()=>{Ox(t)&&(t.removeEventListener("cuechange",e),this.D2.tt(new Us(t,i)))};t.addEventListener("cuechange",e),t.mode=Ht.sA}j2(t){let i=this.wO.getElementsByTagName("track");for(let e=0;e<i.length;e++){let s=i[e]||i.item(e);if(s.track===t)return s}}$n(i){return this.z2.nO((async e=>{if(Pi(e),this.MP)throw new b("Already loaded a media source");let s;if(i.hA===wt.bO)s=new pL(i,this,this.PH,this.Cx),this.l2=!1,this.z4.T4(new Qk(this));else{if(i.hA!==wt.LO)throw new b("Unsupported configuration");{const e=this.l2?new Fk(this):new Qk(this);s=new Ck(i,this,e,this.PH,this.Cx,void 0,this.l$),this.l2=Sx,this.z4.T4(e),Ix&&(this.yn(t.ov,this.P2),this.z4.yn(qo.Mw,this.B2))}}return this.MP=s,await s.JV(),s}))}R2(){if(this.I4)return;const t=this.ag;this.I4=!0,this.ag=t,this.wO.playbackRate=0,this.z4&&this.z4.Y$()}U2(){if(!this.I4)return;const t=this.ag;this.I4=!1,this.ag=t,this.Q2()}Q2(){this.wO.currentTime=this.wO.currentTime,this.z4&&this.z4.Y$()}async Zn(){this.cR=!1,this.R$=!1,ag.__(this.P4),this.P4=0,this.Uo=Ki.aR(),this.h2.c_(),this.L4=void 0,this.u2=NaN,this.E4=void 0,this.l2=!1,this.x4=!1,this.vP=void 0,this.S4=!1,this.F2=void 0,this.Y2=!1,this.V4=!1,this.G2&&(this.V2(),this.G2=!1),this.i2(new sa),this.z4.T4(new Qk(this)),this.K4.Zn(),this.D2.Zn(),this.U2(),Ix&&(Gs(this.W2),this.W2=0,this.fn(t.ov,this.P2)),await this.z2.c_(),await this.z2.nO((async()=>{this.MP&&(await this.MP.e_(),this.MP=void 0)}))}async e_(){this.G2=!1,this.H2(),this.QP(),await this.Zn(),await this.z2.gn(),this.K4.e_(),this.z4.e_(),await this.PH.e_(),this.BP(),this.Dl.gn(),this.D2.gn(),await this.q2.gn(),this.X2.gn(),this.T2.gn(),this.Vo()}V2(){this.pP.addEventListener("play",this.Z2),this.pP.addEventListener("pause",this.K2),this.pP.addEventListener("timeupdate",this.J2),this.pP.addEventListener("progress",this.t3),this.pP.addEventListener("loadstart",this.i3),this.pP.addEventListener("ended",this.e3),this.pP.addEventListener("ratechange",this.s3),this.pP.addEventListener("volumechange",this.n3),this.pP.addEventListener("durationchange",this.r3),this.pP.addEventListener("resize",this.h3),this.pP.addEventListener("loadedmetadata",this.h3),this.pP.addEventListener("error",this.o3),this.pP.addEventListener("emptied",this.a3),_N()?(this.wO.addEventListener("encrypted",this.u3),this.wO.addEventListener("waitingforkey",this.l3)):void 0!==Ys.WebKitMediaKeys&&"function"==typeof Ys.WebKitMediaKeys.isTypeSupported?this.wO.addEventListener("webkitneedkey",this.d3):wu()?this.wO.addEventListener("webkitneedkey",this.f3):void 0!==Ys.MSMediaKeys&&"function"==typeof Ys.MSMediaKeys.isTypeSupported&&this.wO.addEventListener("msneedkey",this._3)}H2(){this.pP.removeEventListener("play",this.Z2),this.pP.removeEventListener("pause",this.K2),this.pP.removeEventListener("timeupdate",this.J2),this.pP.removeEventListener("progress",this.t3),this.pP.removeEventListener("loadstart",this.i3),this.pP.removeEventListener("ended",this.e3),this.pP.removeEventListener("ratechange",this.s3),this.pP.removeEventListener("volumechange",this.n3),this.pP.removeEventListener("durationchange",this.r3),this.pP.removeEventListener("resize",this.h3),this.pP.removeEventListener("loadedmetadata",this.h3),this.pP.removeEventListener("error",this.o3),this.pP.removeEventListener("encrypted",this.u3),this.pP.removeEventListener("waitingforkey",this.l3),this.pP.removeEventListener("webkitneedkey",this.d3),this.pP.removeEventListener("webkitneedkey",this.f3),this.pP.removeEventListener("msneedkey",this._3),this.pP.removeEventListener("emptied",this.a3)}g3(){this.b4||(this.Uo=this.fg,this.b4=Pk(this),this.H2(),this.b4.yn(jk,this.Ds))}w3(){if(!this.b4)return;const t=this.b4;this.b4=void 0,this.z4.Y$(),Bk(this,t),t.e_(),this.V2()}M2(){const t=this.j_;this.Co(new Tc(t,void 0)),this.F2=t}hB(t){this.vP=t,this.i2(this.vP),this.Co(new Wk(this.vP))}get W_(){return!!this.wO.webkitCurrentPlaybackTargetIsWireless}get A3(){return this.v3}get A4(){return oe({},gL)}m3(){this.A3||(gj(this.wO,ag.Ys),this.v3=!0)}y3(t){t.appendChild(this.wO)}wJ(){Ix&&this.P2(),this.z4.Y$()}get FP(){return this.PH.FP}set FP(t){this.PH.FP=t}get M3(){return this.l$}set M3(t){this.l$=t}get o4(){return this.PH.o4}Zg(){this.PH.m4().catch(xs),this.D2.Zn()}get Bg(){return this.Y2}set Bg(t){this.Y2=t,this.G2&&!this.Y2&&(this.G2=!1,this.V2())}constructor(i,e,s,n){super(),this.vP=void 0,this.LB=!0,this.MP=void 0,this.z2=new Vi,this.b4=void 0,this._R=new Ro,this.S2=[],this.L4=void 0,this.c2=0,this.u2=NaN,this.E4=void 0,this.F2=void 0,this.cR=!1,this.R$=!1,this.T3=rv.tN,this.P4=0,this.o2=Promise.resolve(),this.h2=new Po,this.e2=[],this.Uo=Ki.aR(),this.R4=void 0,this.Q4=1,this.G4=!1,this.Y4=1,this.S4=!1,this.Y2=!1,this.G2=!1,this.l2=!1,this.x4=!1,this.O4=!1,this.I4=!1,this.v3=!1,this.W2=0,this.V4=!1,this.I2=t=>{const i=t.track,e=this.j2(i);this.L2(i,e)},this.E2=t=>{const i=xx(this.D2,t.track);i&&this.D2.it(i)},this.b2=()=>{for(let t=0;t<this.D2.U;t++){let i=this.D2.jw(t);i instanceof Us&&i.H0()}},this.P2=()=>{if(void 0===this.MP||!wL(this.MP))return;const t=this.MP,i=t.d$,e=t.f$;if(!i||!e)return;if(t.KH)return void this.U2();if(t.vg===Pn.oJ)return;const s=i.b_,n=e.b_;if(0===s.U&&0===n.U)return void this.U2();const r=this.j_;if(r<s.Cn(0)||r<n.Cn(0))return void this.U2();if(s.gr(r)!==n.gr(r)){if(t.BH(r))return;this.R2()}else if(this.U2(),!this.W2&&this.K4.Z$()){s.VB(n).ZB(r,r+.5)&&(this.W2=Vs(this.N3))}},this.N3=()=>{this.W2=0,this.P2()},this.B2=()=>{if(this.Tg||this.B$)return;if(this.z4.vg>=rv.eN)return;if(void 0===this.MP||!wL(this.MP))return;const t=this.MP,i=t.d$,e=t.f$;if(!i||!e)return;const s=this.j_,n=i.b_,r=e.b_;if(!n.gr(s)||!r.gr(s))return;n.VB(r).ZB(s-5,s)&&(this.I4?this.U2():this.Q2())},this.Z2=()=>{this.Co(new vh(this.j_))},this.K2=()=>{this.n2(new sa),this.Co(new ws(this.j_))},this.D3=()=>{this.J4(),this.Co(new Hr(this.j_))},this.s3=()=>{this.U4()},this.r3=()=>{this.Co(new Mn(this.ct))},this.t3=()=>{this.Co(new N(this.j_))},this.i3=()=>{this.Co(new ie)},this.J2=()=>{const t=this.j_,i=this.Tg,e=this.z4.vg<rv.eN&&!this.R_,s=void 0!==this.F2,n=s&&this.F2!==t;(i||!s||n&&!e)&&this.M2()},this.e3=()=>{!this.S4&&this.R_&&(this.S4=!0,this.Co(new ys(this.j_)))},this.o3=()=>{if(null!==this.wO.error){const i=this.wO.error;var t;this.hB(new lc(null!=(t=i.code)?t:Zv.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.a3=()=>{this.Y2&&(this.H2(),this.G2=!0)},this.S3=t=>{if(ag.__(this.P4),this.P4=0,t.readyState<=rv.iN)if(this.cR||this.R$){const i=ag.f_()-this.c2;if(i<250)return void(this.P4=ag.g_((()=>this.S3(t)),250-i))}else if(void 0!==this.MP&&this.MP.BH(this.j_))return void(this.P4=ag.g_((()=>this.S3(t)),250));this.T3!==t.readyState&&(this.T3=t.readyState,this.Co(t))},this.n3=()=>{this.B4()},this.h3=()=>{this.Lg>0&&this.Sg>0&&this.Co(new Ry)},this.u3=t=>{this.Co(new vs(t.initDataType,t.initData||new ArrayBuffer(0)))},this.l3=()=>{this.Co(new Xy)},this._3=t=>{const i=t.initData,e=i?Pe(i).buffer:new ArrayBuffer(0);this.Co(new vs(Lw,e))},this.d3=t=>{if(t.initData){const i=function(t){try{const i=Ao(t),e=new Vr,s=cc(i,e,Sn(i,e,!0));return ba(RA(s,!0))}catch(t){return}}(t.initData);if(!i)return;this.Co(new vs(Xh,i))}else this.Co(new vs(Xh,new ArrayBuffer(0)))},this.f3=t=>{const i=t.initData,e=i?Pe(i).buffer:new ArrayBuffer(0);this.Co(new vs(Lw,e))},this.X4=()=>{this.J4()},this.Z4=t=>{this.n2(t)},this.I3=i=>{this.Co(i),i.type===t.NA&&this.hB(ne(i.errorObject))},this.wO=i,this.Cx=e,this.Wu=s,this.mR=n,this.z4=new Dx(this),this.z4.yn(qo.Mw,this.S3),this.z4.T4(new Qk(this)),this.K4=new Vk(this),this.K4.yn(qo.Tv,this.D3),this.PH=new Tx(this),this.PH.yn([t.DA,t.NA,t.fv],this.I3),this.Dl=new sn,this.D2=new sn,this.X2=new fh([this.Dl,this.D2]),this.q2=new dx(this,this.X2),this.T2=new fh([this.X2,this.q2.Z]),this.N2=new hx(this),this.V2(),this.$P()}};var kx=.01;function Cx(t,i,e){if(void 0===e&&(e=0),!i.U)return 0;let s=i.RB(t);const n=kx*e;return s===i.Cn(0)?s+=n:s===i.jn(i.U-1)&&(s-=n),s}function xx(t,i){for(let e of t.xw)if(e.IN===i)return e}function Ox(t){return!!t.cues&&t.cues.length>0}r();var jx={lH:void 0,dH:void 0,fH:void 0,_H:void 0,gH:void 0,wH:void 0,yH:void 0,AH:void 0,vH:void 0,mH:void 0,pH:void 0},zx=class extends i{get va(){return this.Xa||(this.Xa=cL(this)),this.Xa}get lH(){}get dH(){}get fH(){}get _H(){}get gH(){}get wH(){}get yH(){}get AH(){}get vH(){}get mH(){}get pH(){}constructor(...t){super(...t),this.Xa=void 0}},Px=class extends Lx{Ug(){}get Sg(){return 0}get Lg(){return 0}constructor(t,i,e){super(t,i,e,new zx)}};r(),r();var Bx=class{get we(){return this.E3}be(){this.E3.style.display="none"}ge(){this.E3.style.display="block"}y3(t){t.appendChild(this.E3)}gn(){ei(this.E3)}constructor(t=5){let i=Ys.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.E3=i,this.ge()}};function Rx(t,i){return oe({},i,Sg(function(t){return{lH:t.lH,dH:t.dH,fH:t.fH,_H:t._H,gH:t.gH,wH:t.wH,yH:t.yH,AH:t.AH,vH:t.vH,mH:t.mH,pH:t.pH}}(t)))}function Ux(t){return t.fH&&Eh(t.fH,"%")?Number(t.fH.replace("%",""))/100:t.fH&&Eh(t.fH,"em")?Number(t.fH.replace("em","")):1}r(),r(),r(),r();var Qx,ao,Fx=class{b3(t){const i=this.L3(t);if(!i)return!1;for(const t of i)ei(t);return this.C3(t),!0}get Lt(){return this.HN}get pP(){return this.wO}get Iu(){return this.Wu}get x3(){return this.O3}get j3(){return this.z3}JV(){this.P3(),this.HN.L.xw.forEach((t=>this.gE(t))),this.Iu.yn(th.pn,this.B3),this.R3(this.Iu.ku,this.Iu._u)}U3(t){this.z3=t,this.O3=Rx(this.z3,this.Q3),this.O3.lH&&(this.pP.style.fontFamily=this.O3.lH),this.O3.yH&&(this.pP.style.visibility=this.O3.yH),this.R3(this.Iu.ku,this.Iu._u),this.F3(!0)}Y3(){return this.O3}G3(t){return this.V3.has(t.Vw)}P3(){this.HN.yn(Os.aw,this.W3),this.HN.yn(Os.cw,this.H3),this.HN.yn(Os.ra,this.q3)}X3(){this.HN.fn(Os.aw,this.W3),this.HN.fn(Os.cw,this.H3),this.HN.fn(Os.ra,this.q3)}Z3(t){t.yn(Sl.xN,this.K3),t.yn(Sl.ON,this.J3),t.yn(Sl.Sw,this.t5)}i5(t){t.fn(Sl.xN,this.K3),t.fn(Sl.ON,this.J3),t.fn(Sl.Sw,this.t5)}gE(t){this.Z3(t),t.ro&&this.e5(t)}DI(t){this.i5(t),this.s5(t)}n5(){this.HN.eA===Ht.Xn?this.r5():this.h5()}r5(){if(!this.o5)return;this.o5=!1;const t=this.Iu.ku,i=this.Iu._u;this.R3(t,i),this.F3(!1)}h5(){this.o5||(this.o5=!0,this.F3(!0))}e5(t){this.o5||t.ro&&!this.G3(t)&&this.F3(!1)}s5(t){this.G3(t)&&this.F3(!0)}a5(t){(t.ro||this.G3(t))&&this.F3(!0)}F3(t){const i=this.u5,e=this.o5?[]:this.HN.q.xw.slice();this.c5(e,i,t),this.u5=e}L3(t){return this.V3.get(t.Vw)}l5(t,i){this.V3.set(t.Vw,i)}C3(t){this.V3.delete(t.Vw)}d5(){return this.u5.slice()}gn(){ei(this.pP),this.V3.clear(),this.X3(),this.HN.L.xw.forEach((t=>this.i5(t))),this.Iu.fn(th.pn,this.B3)}constructor(t,i,e,s,n){this.V3=Ye(),this.o5=!0,this.z3=oe({},jx),this.u5=[],this.W3=t=>this.gE(t.jN),this.H3=t=>this.DI(t.jN),this.q3=()=>this.n5(),this.K3=t=>this.e5(t.jN),this.J3=t=>this.s5(t.jN),this.t5=t=>this.a5(t.jN),this.B3=t=>{this.R3(t.width,t.height)},this.HN=t,this.Q3=this.O3=n,this.wO=this.f5(e),this.Wu=s,i.appendChild(this.wO)}};function Yx(t,i){return t?{_5:t._5,g5:t.g5,w5:t.w5,Ml:i}:null}function Gx(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{_5:C(i[1],16),g5:C(i[2],16),w5:C(i[3],16)}:null}function Vx(t){return("0"+t.toString(16)).slice(-2)}function Wx(t){return"#"+Vx(t._5)+Vx(t.g5)+Vx(t.w5)}function Hx(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{_5:C(i[1],10),g5:C(i[2],10),w5:C(i[3],10),Ml:S(i[4])}:null}function qx(t,i){return function(t){return t?"rgba("+t._5+", "+t.g5+", "+t.w5+", "+t.Ml+")":void 0}(Yx(Gx(t),i/100))}function Xx(t){return Zx[t||"none"]}r(),function(t){t.qc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Wc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Gc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Xc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif'}(Qx||(Qx={})),function(t){t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent"}(ao||(ao={}));var Zx={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},Kx=sg({monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:"monospace, sans-serif",monospaceSerif:"monospace, serif",proportionalSansSerif:"Arial",proportionalSerif:"Times New Roman",default:"monospace, sans-serif"}),Jx={dH:ao.WHITE,lH:"Arial, Helvetica, Sans-Serif",fH:"100%",_H:ao.TRANSPARENT,gH:ao.TRANSPARENT,wH:"none",yH:"visible",AH:void 0,vH:void 0,mH:void 0,pH:void 0},$x=class extends Fx{f5(t){let i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",XN(e,"flex"),e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",i}R3(t,i){let e=x.min(t,i)/15;this.pP.style.fontSize=e+"px"}c5(t,i,e){for(const t of i)!e&&t.ro||this.b3(t);for(const i of t)this.A5(i)}A5(t){let i=this.L3(t);i||(i=this.v5(t),this.l5(t,i));for(const t of i)this.pP.appendChild(t)}v5(t){let i=[],e=t.RS,s=t.xS,n=t.O;if(0===_.keys(s).length){const s=h.createElement("div");uO(s),tO(n,e,t.FS,s,s),s.firstChild&&i.push(s)}else for(let r of _.keys(s)){let o=h.createElement("div");o.id=r,uO(o),sO(o,"region",s[r],e),tO(n,e,t.FS,o,o),o.firstChild&&i.push(o)}return i}U3(t){!function(t,i){var e,s;t.style.marginTop=(null!=(e=i.AH)?e:0)+"px",t.style.marginBottom=(null!=(s=i.vH)?s:0)+"px",t.style.height="calc(100% - "+t.style.marginTop+" - "+t.style.marginBottom+")"}(this.pP,t),fL(this.pP,t)}constructor(t,i,e,s){super(t,i,e,s,Jx)}};function tO(t,i,e,s,n){if(fs(t)&&function(t){return"SPAN"===t.hI.toUpperCase()||"P"===t.hI.toUpperCase()||"BR"===t.hI.toUpperCase()||"DIV"===t.hI.toUpperCase()||"BODY"===t.hI.toUpperCase()}(t)){let r=iO(t);if(!r||(null==n?void 0:n.id)===r){let r;if("BODY"===t.hI.toUpperCase())r=n;else{if(r=function(t){let i;switch(t.hI.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),eO(i,t);break;case"P":i=h.createElement("p"),function(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.textAlign="inherit",i.padding="0",i.margin="0",i.lineHeight="inherit"}(i),eO(i,t);break;case"DIV":i=h.createElement("div"),eO(i,t)}return i}(t),!r)return;s.appendChild(r)}!function(t,i,e,s){let n=i.cI("style");hO(t,i.hI,n,e,s),function(t,i,e){for(const s of i.rI)oO(t,i.hI,s.hI,s.IT,e)}(t,i,s)}(r,t,i,n),function(t,i,e){let s=null==i?void 0:i.cI("smpte:backgroundImage");if(s){s=s.replace("#","");let n=e&&nO(e,(t=>t.rI.some((t=>"id"===t.hI&&t.IT===s))));n&&rO(t,n,i,!0)}!function(t,i){const[e]=i.m;if(!e||"metadata"!==e.hI.toLowerCase())return;const[s]=e.m;rO(t,s,i)}(t,i)}(r,t,e);for(const s of t.lI)tO(s,i,e,r,n)}}else if(Sp(t)){const i=h.createTextNode(t.Cp);s.appendChild(i)}}function iO(t){const i=t.cI("region");if("p"===t.hI.toLowerCase())return i;const e=[];for(const i of t.m)e.push(iO(i));return Ic(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function eO(t,i){let e=i.uI(Op,"id");e&&(t.id=e)}function sO(t,i,e,s){hO(t,i,e.style,s,t);for(const s of _.keys(e))oO(t,i,s,e[s],t)}function nO(t,i){if(i(t))return t;for(let e of t.m){const t=nO(e,i);if(t)return t}return null}function rO(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.lI.length>0?t.lI[0]:null;return i&&Sp(i)?"data:image/png;base64,"+i.Cp:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;XN(e,"flex");let s=i.cI("smpte:backgroundImageVertical");if(s)switch(s.toLowerCase()){case"left":e.alignItems="flex-start";break;case"center":e.alignItems="center";break;case"right":e.alignItems="flex-end";break;case"inherit":e.alignItems="inherit"}else e.alignItems="center";let n=i.cI("smpte:backgroundImageHorizontal");if(n)switch(n.toLowerCase()){case"left":e.justifyContent="flex-start";break;case"center":e.justifyContent="center";break;case"right":e.justifyContent="flex-end";break;case"inherit":e.justifyContent="inherit"}else e.justifyContent="center"}(t,e),t.appendChild(n)}function hO(t,i,e,s,n){if(e)for(const r of e.split(" "))if(s[r])for(const e of _.keys(s[r]))"style"===e.toLowerCase()?hO(t,i,s[r][e],s,n):oO(t,i,e,s[r][e],n)}function oO(t,i,e,s,n){const r=t.style;switch(e){case"backgroundColor":r.backgroundColor=s;break;case"color":r.color=s;break;case"direction":r.direction=s;break;case"display":"none"===s&&(r.display="none");break;case"fontFamily":{const t=Kx.get(s);r.fontFamily=t||s;break}case"fontSize":Eh(s,"px")?s=C(s)/24+"em":Eh(s,"c")&&(s=s.replace("c","em")),r.fontSize=s;break;case"fontStyle":r.fontStyle=s;break;case"fontWeight":r.fontWeight=s;break;case"lineHeight":r.lineHeight=s;break;case"opacity":r.opacity=s;break;case"overflow":r.overflow=s;break;case"padding":r.padding=s;break;case"textAlign":"right"===s?(r.textAlign="right",r.justifyContent="flex-end"):"start"===s?(r.textAlign="start",r.justifyContent="flex-start"):"center"===s?(r.textAlign="center",r.justifyContent="center"):"end"===s?(r.textAlign="end",r.justifyContent="flex-end"):"left"===s&&(r.textAlign="left",r.justifyContent="flex-start");break;case"textDecoration":{let t=s;t=t.replace("lineThrough","line-through"),t=t.replace("noUnderline","none"),t=t.replace("noLineThrough","none"),t=t.replace("noOverline","none"),r.textDecoration=t;break}case"unicodeBidi":r.unicodeBidi=s.replace("bidiOverride","bidi-override");break;case"visibility":r.visibility=s;break;case"zIndex":r.zIndex=s;break;case"displayAlign":{let t;if("before"===s.toLowerCase())t="flex-start";else if("center"===s.toLowerCase())t="center";else{if("after"!==s.toLowerCase())return;t="flex-end"}r.alignItems=t;break}case"extent":{const e=aO(i.toLowerCase())?n:t;let r,h,o=s.split(" ");o.length>=2?(r=o[0],h=o[1]):r=h="100%",e&&(e.style.height=h,e.style.width=r);break}case"origin":{const e=aO(i.toLowerCase())?n:t,[r,h]=s.split(" ");e&&(r||h)&&(r&&(e.style.left=r),h&&(e.style.top=h));break}case"showBackground":case"textOutline":break;case"wrapOption":r.whiteSpace=s.replace("noWrap","nowrp").replace("wrap","normal").replace("nowrp","nowrap");break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}r.writingMode=t,r.setProperty("-webkit-writing-mode",t),i&&(r.direction=i),e&&(r.textOrientation=e,r.setProperty("-webkit-text-orientation",e)),n&&(r.unicodeBidi=n);break}case"linePadding":if(Eh(s,"c")){let t=s.replace("c","em");r.paddingLeft=r.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?r.textAlign="":r.textAlign=s}}function aO(t){return"div"===t||"p"===t||"span"===t}function uO(t){const i=t.style;XN(i,"flex"),i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.alignItems="flex-start",i.overflow="visible",i.position="absolute",i.fontFamily="Arial, Helvetica, Sans-Serif",i.color="white",i.textShadow="rgb(0, 0, 0) -1px -1px 0px, rgb(0, 0, 0) 1px -1px 0px, rgb(0, 0, 0) -1px 1px 0px, rgb(0, 0, 0) 1px 1px 0px",i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.lineHeight="1.3em"}r(),r();var cO,lO,dO=void 0;function fO(t){return dO||(dO=Ys.document.createElement("textarea")),dO.innerHTML=t,dO.value}function _O(t,i){let e="Data",s="",n=[],r=t.charAt(i.Ku),h="",o={hA:"starttag",Xj:"",m5:[]};for(;i.Ku<t.length+1;){switch(r=i.Ku<t.length?t.charAt(i.Ku):"EOF",e){case"Data":switch(r){case"&":let n=t.substring(i.Ku).match(/&#?[0-9a-zA-Z]+;/);n?(s+=fO(n[0]),i.Np(n[0].length-1)):s+="&";break;case"<":if(s)return{hA:"string",O:s};e="Tag";break;case"EOF":return{hA:"string",O:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.Np(1),o;case"EOF":return o;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":h=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.Np(1),{hA:"starttag",Xj:s,m5:[]};case"EOF":return{hA:"starttag",Xj:s,m5:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(h),h="",e="StartTagAnnotation";break;case"\n":n.push(h),h=r,e="StartTagAnnotation";break;case".":n.push(h),h="";break;case">":return i.Np(1),n.push(h),{hA:"starttag",Xj:s,m5:n};case"EOF":return n.push(h),{hA:"starttag",Xj:s,m5:n};default:h+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.Np(1);let t=h.trim();return t=t.replace(/\s/," "),{hA:"starttag",Xj:s,m5:n,p5:t};default:h+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.Ku;">"===t.charAt(e);e++)a+=t.charAt(e);h+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Np(1),{hA:"endtag",Xj:s};case"EOF":return{hA:"endtag",Xj:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.Np(1),{hA:"timestamp",y5:s};case"EOF":return{hA:"timestamp",y5:s};default:s+=r}}i.Np(1)}return o}function gO(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=i.top+c-u;return{left:x.round(a),top:x.round(l)}}function wO(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";let n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;let h=n[0],o=r[0],a=h.width/2+h.left;AO(t,o.width/2+o.left-a,e,s)}function AO(t,i,e,s){void 0===s&&(s=0),mO(t,i,"left","right",e,s)}function vO(t,i,e,s){void 0===s&&(s=0),mO(t,i,"top","bottom",e,s)}function mO(t,i,e,s,n,r){void 0===r&&(r=0);const h=t.getClientRects();if(n&&h.length>0){const t=h[0];i=hi(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function pO(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}!function(t){t.M5="Data",t.T5="Tag",t.N5="StartTag",t.D5="StartTagClass",t.S5="StartTagAnnotation",t.I5="CharRefInAnnotation",t.E5="EndTag",t.b5="TimestampTag"}(cO||(cO={})),function(t){t.L5="string",t.k5="starttag",t.C5="endtag",t.x5="timestamp"}(lO||(lO={})),r(),r();var yO,MO=class t{get O5(){return this.j5+this.ji}set O5(t){this.j5=t-this.ji}get z5(){return this.P5+this.Ti}set z5(t){this.P5=t-this.Ti}B5(t){return this.j5<t.O5&&this.O5>t.j5&&this.P5<t.z5&&this.z5>t.P5}yN(t){return this.j5<=t.j5&&t.O5<=this.O5&&this.P5<=t.P5&&t.z5<=this.z5}Sp(){return new t(this.j5,this.P5,this.ji,this.Ti)}R5(i){const e=this.j5+i,s=this.P5+i,n=x.max(0,this.ji-2*i),r=x.max(0,this.Ti-2*i);return new t(e,s,n,r)}constructor(t,i,e,s){this.j5=t,this.P5=i,this.ji=e,this.Ti=s}},TO={dH:ao.WHITE,lH:"sans-serif",fH:"100%",_H:"rgba(0,0,0,0.8)",gH:ao.TRANSPARENT,wH:"none",yH:"visible",AH:void 0,vH:void 0,mH:void 0,pH:void 0},NO="theoplayer-webvtt-region-",DO="theoplayer-webvtt-styling-",SO="theoplayer-webvtt-default-style",IO=5.23,EO=1.14,bO=class extends Fx{f5(t){let i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,ia(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.x3.lH;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",function(){if(h.getElementById(SO))return;const t=[];for(const[i,e]of GO)t.push("."+DO+i+" { color: "+e+" !important; }"),t.push("."+DO+"U5"+i+" { background-color: "+e+" !important; }"),t.push("video::cue(."+i+") { color: "+e+"; }"),t.push("Q5"+i+") { background-color: "+e+"; }");const i=h.createElement("style");i.id=SO,i.innerHTML=t.join("\n"),h.body.appendChild(i)}(),i}JV(){this.pP.appendChild(this.F5),super.JV()}R3(t,i){const e=x.min(t/100,i/100),s=Ux(this.x3);this.Y5.forEach((t=>{let{FN:i,G5:n}=t;this.V5(n,e,s,i)})),this.V5(this.F5,e,s)}U3(t){fL(this.pP,t),super.U3(t)}c5(t,i,e){const s=this.pP,n=this.Iu._u/100;let r=[];for(const i of t)void 0!==i.FN&&(na(r,i.FN)||r.push(i.FN));this.Y5.forEach(((t,i)=>{let{FN:s,G5:n}=t;!e&&na(r,s)||(ei(n),this.Y5.delete(i))}));for(const t of i)!e&&t.ro||this.b3(t);let h=[];const o=RO(this.F5.getBoundingClientRect());h.push(...this.W5(o));for(const t of r){let i;this.Y5.has(t.o)?i=this.Y5.get(t.o).G5:(i=zO(t,n),s.appendChild(i),this.Y5.set(t.o,{FN:t,G5:i})),h.push(RO(i.getBoundingClientRect()))}t.sort(VO);for(const i of t){const t=this.A5(i,h,o);void 0!==t&&h.push(t.R5(.1))}}W5(t){const i=[],e=this.x3;if(void 0!==e.AH){const s=t.Sp();s.Ti=e.AH,i.push(s)}if(void 0!==e.vH){const s=t.Sp();s.Ti=e.vH,s.z5=t.z5,i.push(s)}return i}A5(t,i,e){var s;let n;t.FN?(n=this.Y5.get(t.FN.o).G5,"up"===t.FN.hD&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.F5;let r=null==(s=this.L3(t))?void 0:s[0];if(r||(r=this.H5(t),this.l5(t,[r])),n.appendChild(r),t.FN||(LO(r,t),t.YN?function(t,i,e,s){const n=PO(t),r=n?e.Ti:e.ji;let h=S(getComputedStyle(i).lineHeight);if(0===h)return;let o=RO(i.getBoundingClientRect()),a=x.round(Dm(t));"rl"===t.Pt&&(a=-(a+1));let u=h*a;"rl"===t.Pt&&(u=u-o.ji+h);a<0&&(u+=r,h=-h);n?o.P5+=u:o.j5+=u;const c=o.Sp();let l=!1;for(;!e.yN(o)||BO(o,s);)if(n)if(h<0&&o.P5<e.P5||h>0&&o.z5>e.z5){if(o.P5=c.P5,l)break;h=-h,l=!0}else o.P5+=h;else if(h<0&&o.j5<e.j5||h>0&&o.O5>e.O5){if(o.j5=c.j5,l)break;h=-h,l=!0}else o.j5+=h;n?i.style.top=(o.P5-e.P5)/e.Ti*100+"%":i.style.left=(o.j5-e.j5)/e.ji*100+"%"}(t,r,e,i):function(t,i,e,s){let n=RO(i.getBoundingClientRect());if(0===n.ji||0===n.Ti)return;PO(t)?"center"===t.UN?n.P5-=n.Ti/2:"end"===t.UN&&(n.P5-=n.Ti):"center"===t.UN?n.j5-=n.ji/2:"end"===t.UN&&(n.j5-=n.ji);let r,h=n.Sp(),o=h,a=1,u=!1;r=""===t.Pt?[2,3,0,1]:"lr"===t.Pt?[0,1,2,3]:[1,0,2,3];const c=4,l=S(getComputedStyle(i).lineHeight)/c;if(l>0){for(let t=0;t<r.length&&!u;t++){for(;!QO(n,e,r[t],.01)&&(!e.yN(n)||BO(n,s));)UO(n,r[t],l);if(e.yN(n)){o=n.Sp(),u=!0;break}let i=FO(n,e);a>i&&(o=n.Sp(),a=i),n=h.Sp()}e.yN(n)||(o=h.Sp())}i.style.left=(o.j5-e.j5)/e.ji*100+"%",i.style.top=(o.P5-e.P5)/e.Ti*100+"%"}(t,r,e,i)),!t.FN)return RO(r.getBoundingClientRect())}H5(t){let i=new Vr,e=t.O,s=this.q5(t),n={X5:void 0,we:s},r=n,o="",a="",u=[n],c=[],l=[];for(;i.Ku<e.length;){let t=_O(e,i);if(t.hA===lO.L5){const i=h.createElement("span");pO(i,t.O),kO(i,u),""!==o&&(i.lang=o),this.Z5(i,a),r.we.appendChild(i)}else if(t.hA===lO.k5){const i=t.Xj.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{let e=h.createElement(i);r.we.appendChild(e),r={X5:t,we:e},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.X5)?void 0:d.Xj.toLowerCase())){let i=h.createElement("rt");r.we.appendChild(i),r={X5:t,we:i},u.push(r)}break;case"c":case"v":r={X5:t,we:r.we},u.push(r);break;case"font":{var f;const i=null==(f=t.p5)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],l.push(a),r={X5:t,we:r.we},u.push(r));break}case"lang":var _;o=null!=(_=t.p5)?_:"",c.push(o)}}else if(t.hA===lO.C5){var g;const i=t.Xj.toLowerCase(),e=null==(g=r.X5)?void 0:g.Xj.toLowerCase();e===i?(u.pop(),r=u[u.length-1],"font"===i&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===e&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.hA===lO.x5){let i=t.y5,e=new Vr;try{ju(i,e)}catch(t){Nu("ERROR collecting timestamp",t)}}}return s}Z5(t,i){const e=this.x3,s=this.j3;e._H&&(t.style.background=e._H);const n=s.dH||i||e.dH;n&&(t.style.color=n)}V5(t,i,e,s){if(s){let n=CO(s,i);t.style.height=n*e+"px",t.style.left=xO(s)+"%",t.style.top=OO(s,i)+"px"}t.style.fontSize=IO*i*e+"px"}q5(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.BN,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){let e=Em(i);PO(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),LO(i,t);const e=this.x3.gH;e&&(i.style.background=e);const s=this.x3.dH;return s&&(i.style.color=s),i.style.textShadow=Xx(this.x3.wH),i}constructor(t,i,e,s){super(t,i,e,s,TO),this.Y5=Qt(),this.F5=jO(3)}};function LO(t,i){let e,s,n=Im(i),r=Sm(i),h=Em(i);if(PO(i)){switch(n){case"line-left":e=r;break;case"center":e=r-h/2;break;case"line-right":e=r-h}s=i.YN?0:Dm(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-h/2;break;case"line-right":s=r-h}e=i.YN?0:Dm(i)}t.style.left=e+"%",t.style.top=s+"%"}function kO(t,i){for(const e of i)if(e.X5){for(const i of e.X5.m5)$u(t,DO+i);"v"===e.X5.Xj.toLowerCase()&&e.X5.p5&&$u(t,"theoplayer-webvtt-voice-"+e.X5.p5)}}function CO(t,i){return t.sD*(IO*i)*EO}function xO(t){return t.oD-t.nD*t.ji/100}function OO(t,i){let e=t.aD,s=t.rD*CO(t,i)/100;return x.max(0,e-s)}function jO(t){let i=h.createElement("div");return i.className=NO+"default",ia(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=IO*t+"px",i.style.lineHeight=EO+"em",i}function zO(t,i){let e=jO(i);e.className=NO+t.o;let s=t.ji,n=CO(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=xO(t)+"%",e.style.right="",e.style.top=OO(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function PO(t){return""===t.Pt}function BO(t,i){return i.some((i=>t.B5(i)))}function RO(t){return new MO(t.left,t.top,t.width,t.height)}function UO(t,i,e){switch(i){case 0:t.j5+=e;break;case 1:t.j5-=e;break;case 2:t.P5+=e;break;case 3:t.P5-=e}}function QO(t,i,e,s){switch(e){case 0:return t.O5>i.O5+s;case 1:return t.j5<i.j5-s;case 2:return t.z5>i.z5+s;case 3:return t.P5<i.P5-s}}function FO(t,i){return x.max(0,x.min(t.O5,i.O5)-x.max(t.j5,i.j5))*x.max(0,x.min(t.z5,i.z5)-x.max(t.P5,i.P5))/(t.ji*t.Ti)}!function(t){t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y"}(yO||(yO={}));var YO,GO=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function VO(t,i){const e=Dm(t),s=Dm(i),n=WO(e,t.YN),r=WO(s,i.YN);return n&&r?e-s||qk(i,t)||i.Vw-t.Vw:qk(t,i)||t.Vw-i.Vw}function WO(t,i){return i?t<0?t>-8:t>8:t>50}r(),r(),r(),function(t){t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics"}(YO||(YO={}));var HO={dH:ao.WHITE,lH:Qx.Gc,fH:"100%",_H:ao.BLACK,gH:"transparent",wH:"none",K5:"regular",yH:"visible",AH:void 0,vH:void 0,mH:void 0,pH:void 0},qO=[{J5:ao.WHITE,K5:"regular",t6:0},{J5:ao.WHITE,K5:"underline",t6:0},{J5:ao.GREEN,K5:"regular",t6:0},{J5:ao.GREEN,K5:"underline",t6:0},{J5:ao.BLUE,K5:"regular",t6:0},{J5:ao.BLUE,K5:"underline",t6:0},{J5:ao.CYAN,K5:"regular",t6:0},{J5:ao.CYAN,K5:"underline",t6:0},{J5:ao.RED,K5:"regular",t6:0},{J5:ao.RED,K5:"underline",t6:0},{J5:ao.YELLOW,K5:"regular",t6:0},{J5:ao.YELLOW,K5:"underline",t6:0},{J5:ao.MAGENTA,K5:"regular",t6:0},{J5:ao.MAGENTA,K5:"underline",t6:0},{J5:ao.WHITE,K5:"italics",t6:0},{J5:ao.WHITE,K5:"underline-italics",t6:0},{J5:ao.WHITE,K5:"regular",t6:0},{J5:ao.WHITE,K5:"underline",t6:0},{J5:ao.WHITE,K5:"regular",t6:4},{J5:ao.WHITE,K5:"underline",t6:4},{J5:ao.WHITE,K5:"regular",t6:8},{J5:ao.WHITE,K5:"underline",t6:8},{J5:ao.WHITE,K5:"regular",t6:12},{J5:ao.WHITE,K5:"underline",t6:12},{J5:ao.WHITE,K5:"regular",t6:16},{J5:ao.WHITE,K5:"underline",t6:16},{J5:ao.WHITE,K5:"regular",t6:20},{J5:ao.WHITE,K5:"underline",t6:20},{J5:ao.WHITE,K5:"regular",t6:24},{J5:ao.WHITE,K5:"underline",t6:24},{J5:ao.WHITE,K5:"regular",t6:28},{J5:ao.WHITE,K5:"underline",t6:28}],XO=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function ZO(t,i){return Pm(t.i6,i.i6)||Xo(t.fT,i.fT)}r();var el=32,KO=/CC([1-4])=(.*)/;function JO(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every((t=>t.match(KO))))for(const t of e){const[,e,s]=t.match(KO);i.push({e6:Number(e),s6:s})}else for(let t=0;t<e.length;t++)i.push({e6:t+1,s6:e[t]});return i}var $O=class t{get n6(){return this.h6.r6}get o6(){return this.h6.a6}get u6(){return this.h6.a6.t6-this.h6.r6.t6+1}get c6(){return this.h6.a6.l6-this.h6.r6.l6+1}pr(){return this.d6=this.f6(),this._6(),this.g6(),this.d6}f6(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.u6/el*this.A6.w6*100+"%",t.style.height=1.2*this.c6+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.A6.v6?"calc(1em - 1ch)":"";const i=this.O3.lH;i&&(t.style.fontFamily=i);const e=this.O3.gH;return e&&(t.style.backgroundColor=e),t}_6(){if(!this.d6)return;let t=this.n6.l6/15*100,i=this.n6.t6/el*100,e=(el-this.o6.t6-1)/el*100,s=(15-this.o6.l6-1)/15*100;this.A6.m6||(i=e=1,this.d6.style.width="98%"),s<t?this.d6.style.bottom=s*this.A6.w6+"%":this.d6.style.top=t*this.A6.w6+"%",e<i?this.d6.style.right=e+"%":this.d6.style.left=i+"%"}g6(){const t=this.h6.p6.sort(tj);for(let i=0;i<t.length;i++)this.y6(t[i-1],t[i]),this.M6(t[i]);this.y6(t[t.length-1],void 0)}M6(i){var e;const s=Rx(this.O3,i.T6),n=t.N6(s);pO(n,i.D6),null==(e=this.d6)||e.appendChild(n)}static N6(t){const i=h.createElement("span");i.style.display="inline-block",t.K5!==YO.FONT_ITALICS&&t.K5!==YO.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.K5!==YO.FONT_UNDERLINE&&t.K5!==YO.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.dH;e&&(i.style.color=e);const s=t._H;return s&&(i.style.backgroundColor=s),i.style.textShadow=Xx(t.wH),i.style.height="1.2em",i}y6(t,i){let e=t?t.a6.l6:this.h6.r6.l6;const s=i?i.r6.l6:this.h6.a6.l6;let n=t?t.a6.t6:this.h6.r6.t6;const r=i?i.r6.t6:this.h6.a6.t6;e<s&&(!i||t&&t.r6.l6!==i.r6.l6?this.S6():this.I6(this.h6.a6.t6-n),n=this.h6.r6.t6),n<r&&(i?this.I6(r-n):this.S6())}S6(){var t;const i=h.createElement("br");null==(t=this.d6)||t.appendChild(i)}I6(t){var i;if(t<=0)return;const e=h.createElement("span");e.style.display="inline-block",pO(e,Jg(" ",t)),null==(i=this.d6)||i.appendChild(e)}constructor(t,i,e){this.h6=t,this.A6=i,this.O3=e}};function tj(t,i){return function(t,i){if(t.l6!==i.l6)return t.l6-i.l6;return t.t6-i.t6}(t.r6,i.r6)}var ij=class extends Fx{f5(t){let i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.x3.lH&&(i.style.fontFamily=this.x3.lH),i}R3(t,i){this.ll()}ll(){let t=Ux(this.x3);this.E6=function(t){return{w6:t/100,v6:t<=100,m6:t<=150}}(100*t);const i=this.b6/el;this.L6=i*t,this.pP.style.fontSize=this.L6+"px"}get b6(){let t=this.pP.offsetWidth;return this.E6&&this.E6.m6||(t*=.8),t}c5(t,i,e){for(const t of i)!e&&t.ro||this.b3(t);for(const i of t)this.A5(i)}A5(t){this.E6&&this.E6.m6?this.k6(80):this.k6(100),this.ll();let i=this.L3(t);i||(i=this.v5(t),this.l5(t,i));for(const t of i)this.pP.appendChild(t)}v5(t){return t.O.map((t=>new $O(t,this.E6,this.x3).pr()))}k6(t){const i=(100-t)/2;this.pP.style.left=i+"%",this.pP.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,HO)}},ic=class t{C6(t){for(let i of this.x6)if(i.Lt===t)return i}static O6(t){switch(t.hA){case Ks.TTML:case Ks.SRT:case Ks.WEBVTT:case Ks.CEA608:return!0}return!1}j6(t){switch(t.hA){case Ks.TTML:return new $x(t,this.z6,t.kh,this.Wu);case Ks.SRT:case Ks.WEBVTT:return new bO(t,this.z6,t.kh,this.Wu);case Ks.CEA608:return new ij(t,this.z6,t.kh,this.Wu)}}P6(t){let i=this.C6(t);i||(i=this.j6(t),i&&(i.JV(),i.U3(this.mR),this.x6.push(i),t.eA===Ht.Xn&&i.r5()))}B6(t){let i=this.x6;for(let e=i.length-1;e>=0;e-=1){let s=i[e];s.Lt===t&&(s.gn(),jc(i,e))}}R6(i){hy(i.zt)&&t.O6(i)&&(i.vg===ja.ERROR?this.B6(i):this.P6(i))}get G0(){return this.U6.cs}Zn(){for(let t of this.x6)t.Lt.fn(Os.Mw,this.Q6),t.Lt.fn(Os.Nw,this.Q6),t.gn();Ri(this.x6)}gn(){this.Zn();for(let t of this.x6)t.gn();this.Dl.fn(gt.ew,this.F6),this.Dl.fn(gt.hw,this.Y6),this.Dl.fn(Os.ra,this.Q6),this.U6.fn(Pc.ra,this.G6),this.mR.fn("yw",this.V6)}constructor(t,i,e,s,n){this.x6=[],this.F6=t=>{let i=t.Lt;i.yn(Os.Mw,this.Q6),i.yn(Os.Nw,this.Q6),i instanceof Us&&(i.G0=this.G0),this.R6(i)},this.Q6=t=>{let i=t.Lt;this.R6(i)},this.Y6=t=>{let i=t.Lt;i.fn(Os.Mw,this.Q6),i.fn(Os.Nw,this.Q6),this.B6(i)},this.G6=()=>{let t=this.G0;for(let i of this.Dl.xw)i instanceof Us&&(i.G0=t)},this.V6=()=>{for(let t of this.x6)t.U3(this.mR)},this.W6=()=>{for(let t of this.x6)t.U3(oe({},t.Y3(),{yH:"hidden"}))},this.H6=()=>{for(let t of this.x6)t.U3(oe({},t.Y3(),{yH:"visible"}))},this.z6=t,this.Wu=i,this.Dl=e,this.U6=n,this.mR=s,this.Dl.yn(gt.ew,this.F6),this.Dl.yn(gt.hw,this.Y6),this.Dl.yn(Os.ra,this.Q6),this.U6.yn(Pc.ra,this.G6),this.mR.yn("yw",this.V6),this.G6()}};function ej(t){const i=new JE,e=function(t){const i=[];return ZE.ia(t)&&i.push(new ZE(t)),KE.ia(t)&&i.push(new KE(t)),i}(t);if(e.length>0){for(const t of e)i.DG(t);i.NG(e[0])}return i}var sj=class extends Lx{get pP(){return this.wO}get Sg(){return this.wO.videoHeight}get Lg(){return this.wO.videoWidth}get ya(){return this.q6}Ug(){return this.wO}async e_(){this.q6.gn(),this.X6.gn(),this.Z6.gn(),await super.e_()}be(){super.be(),this.X6.be()}ge(){super.ge(),this.X6.ge()}y3(t){super.y3(t),this.X6.y3(t)}constructor(t,i,e,s){super(t,i,e,s),this.q6=ej(t),this.X6=new Bx,this.Z6=new ic(this.X6.we,this.Iu,this.nt,this.Ol,this.ya)}};r(),r();r(),r();var nj;!function(t){t.K6="HELLO",t.J6="HI_THERE",t.t8="INITIALIZE",t.i8="APPEND_INIT",t.e8="APPEND_DATA",t.s8="ACK",t.n8="REMOVE",t.r8="DESTROY_SESSION"}(nj||(nj={}));var rj=class{h8(t){return this.QH.nO((async t=>{Pi(t);const i=new MessageChannel,e=i.port1,s=i.port2;nd.serviceWorker.controller||await yi(nd.serviceWorker,"install",t),"activated"!==nd.serviceWorker.controller.state&&await yi(nd.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};nd.serviceWorker.controller.postMessage(n,[s]),e.start(),this.o8=e;try{const i=await yi(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new b("Could not set up message channel");this.mO=s.sessionId}catch(t){throw Oi(t)&&this.a8(),t}}),t)}u8(t,i){return this.o8,this.QH.nO((async()=>{if(!this.o8)throw new b("MessageSession not set up yet or already closed.");i||(i=[]),this.o8.postMessage(t,i);const e=await yi(this.o8,"message");return e.data}))}c8(){return this.QH.nO((()=>this.a8()))}a8(){if(!nd.serviceWorker.controller)return;if("activated"!==nd.serviceWorker.controller.state)return;if(!this.o8)return;const t={kind:"DESTROY_SESSION"};this.o8.postMessage(t),this.o8.close(),this.o8=void 0}constructor(){this.QH=new Vi}};r();var hj,oj=class{get l8(){return this.d8}f8(t,i){const e=t-i;this.d8=e>this.l8?this.d8:e}_8(t){this.d8=t}constructor(){this.d8=1/0}};r(),r(),r(),function(t){t.mp="audio",t.vp="video",t.Mp="metadata"}(hj||(hj={}));var aj=class extends i{get b_(){return void 0===this.g8||void 0===this.w8?Ki.aR():new Ki([this.g8,this.w8])}get wd(){return{IP:this.IY}}get TJ(){return iv.KT}get dY(){return this.IY}get DJ(){return Ki.aR()}get HV(){return 30}set HV(t){}get KV(){return 30}set KV(t){}EJ(t,i){}bJ(t,i){}KH(){return this.A8}get oa(){return this.v8}get m8(){return this.g8}get PN(){return this.w8}async LJ(){}async JK(t,i){}async jK(t,i,e){if(t.hA!==at.bH)throw new b("Streaming or opaque segments are not supported yet.");const s=t.Cp,n=async()=>{const t=s.buffer,e={kind:nj.e8,mediaType:uj(this.IY),segment:s,startPts:i.p8,totalDuration:i.ct};if(await this.y8.u8(e,[t]),void 0===this.g8){const t=i.p8+i.CS;this.g8=t,this.w8=t}this.w8=this.w8+i.ct,this.Co(new gg(tt.IH))};return this.QH.nO((async t=>{Pi(t);try{this.v8=!0,await n()}finally{this.v8=!1}}),e)}async BK(t,i,e){if(t.hA!==at.bH)throw new b("Streaming or opaque initialization segments are not supported yet.");const s=t.Cp,n=async()=>{const t={kind:nj.i8,mediaType:uj(this.IY),segment:s};await this.y8.u8(t,[])};return this.QH.nO((async t=>{Pi(t);try{this.v8=!0,await n()}finally{this.v8=!1}}),e)}yJ(){this.A8=!0}lJ(){this.A8=!1}async pN(t,i,e){const s=async()=>{const t={kind:nj.n8,mediaType:uj(this.IY),endTime:i};await this.y8.u8(t),this.g8=void 0,this.w8=void 0,this.Co(new gg(tt.IH))};return this.QH.nO((async t=>{Pi(t);try{this.v8=!0,await s()}finally{this.v8=!1}}),e)}OH(t){return this.IY===t.IP}zH(t){return this.IY=t.IP,Promise.resolve()}async e_(){this.Vo(),await this.QH.gn()}constructor(t,i){super(),this.IY=t,this.y8=i,this.g8=void 0,this.w8=void 0,this.QH=new Vi,this.v8=!1,this.A8=!1}};function uj(t){return t.match(/video/)?hj.vp:hj.mp}var cj=class t{static M8(i,e,s,n){const r=[];for(let t=0;t<i.D$.length;t++){const s=i.D$[t].IP;r.push(new aj(s,e))}return new t(i,r,s,n)}T8(){}get N8(){return[this.A$,this.v$].filter(j_)}get d$(){return this.A$}get b_(){return Dk(this)}get wd(){return this.Zx}get ct(){return 0}get KH(){var t,i,e;const s=null==(e=null==(t=this.A$)?void 0:t.KH())||e;var n;const r=null==(n=null==(i=this.v$)?void 0:i.KH())||n;return s&&r}get yg(){return new Ki([0,1/0])}get f$(){return this.v$}get rt(){throw new b("Not implemented")}async e_(){await Promise.all([this.A$,this.v$].filter(j_).map((t=>t.e_())))}p$(t){}N$(t,i,e,s){}yJ(){var t,i;null==(t=this.A$)||t.yJ(),null==(i=this.v$)||i.yJ()}lJ(){var t,i;null==(t=this.A$)||t.lJ(),null==(i=this.v$)||i.lJ()}OH(t){return!0}zH(t){return this.Zx=t,Promise.resolve()}async CH(t,i){const e=await this.Cx.kx(t.fL,i),s=await e.yx();return await this.xH(s),s}async xH(t){if(t&&!this.wO.src)throw new Yr(le.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.wO.src)throw new Yr(le.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.wx;i&&(await i.vx(this.wO),this.wx=void 0),t&&(await t.bn(this.wO),this.wx=t)}constructor(t,i,e,s){this.wx=void 0,this.Zx=t,this.v$=H_(i,(t=>Boolean(t.dY.match(/video/)))),this.A$=H_(i,(t=>Boolean(t.dY.match(/audio/)))),this.Cx=e,this.wO=s,this.T8()}},lj=class extends i{D8(){this.S8.addEventListener("timeupdate",this.I8),this.S8.addEventListener("ended",this.E8),this.S8.addEventListener("timeupdate",this.b8),this.S8.addEventListener("ratechange",this.L8),this.S8.addEventListener("volumechange",this.k8),this.S8.addEventListener("durationchange",this.C8),this.S8.addEventListener("playing",this.x8),this.S8.addEventListener("seeking",this.O8),this.S8.addEventListener("play",this.j8),this.S8.addEventListener("pause",this.z8),this.S8.addEventListener("encrypted",this.u3)}P8(){this.S8.removeEventListener("timeupdate",this.I8),this.S8.removeEventListener("ended",this.E8),this.S8.removeEventListener("timeupdate",this.b8),this.S8.removeEventListener("ratechange",this.L8),this.S8.removeEventListener("volumechange",this.k8),this.S8.removeEventListener("durationchange",this.C8),this.S8.removeEventListener("playing",this.x8),this.S8.removeEventListener("seeking",this.O8),this.S8.removeEventListener("play",this.j8),this.S8.removeEventListener("pause",this.z8)}B8(){this.z4.yn(qo.Mw,this.Ds)}U8(){this.z4.fn(qo.Mw,this.Ds)}get pP(){return this.S8}get V$(){return!1}get j_(){return this.S8.currentTime+this.Q8.l8}get hg(){return this.S8.paused}get xg(){return this.S8.volume}set xg(t){this.S8.volume=t}get ag(){return this.S8.playbackRate}set ag(t){this.S8.playbackRate=t}get F8(){return this.S8.defaultPlaybackRate}get b_(){var t,i;return null!=(i=null==(t=this.MP)?void 0:t.b_)?i:Ki.aR()}get Y8(){return Ki.xn(this.S8.buffered)}get fg(){const t=this.G8;return this.Uo.GB(t.Np(this.Q8.l8))}get G8(){return Ki.xn(this.S8.played)}get Tg(){return this.cR}get B$(){return!1}get X$(){return!1}get ct(){return this.S8.duration}get Z_(){return this.S8.muted}set Z_(t){this.S8.muted=t}get T6(){return this.S8.style}get A4(){return oe({},gL,{SH:!0})}Dp(t,i,e){this.h2.c_(),this.h2=new Po,this.o2=this.a2(t,this.o2,this.h2.a_).catch(xs)}async a2(t,i,e){var s;this.Uo=this.fg;const n=null==(s=this.MP)?void 0:s.N8;if(!n)return;const r=x.max(...n.map((t=>t.m8?t.m8:1/0)));this.cR=!0,this.Co(new Ot(t)),await i.catch(xs),Pi(e);try{for(this.V8||this.W8(),this.S8.load(),this.H8||(this.q8=!1,await hl(this.S8.play(),e));this.vg<rv.iN;)await this.z4.D_(qo.Mw,e);this.X8.CL(),this.V8=!1,this.cR=!1,this.Co(new $s(this.j_))}catch(t){throw this.X8.xL(t),t}finally{this.Z8(),this.Q8._8(r)}}Gg(){this.H8=!0,this.S8.pause()}async Vg(){this.H8&&(this.S8.src||this.m3(),await this.X8.OL,await this.S8.play())}async e_(){this.y8&&this.y8.c8().catch(xs),this.h2.c_(),this.P8(),this.U8(),this.z4.e_(),this.Vo(),this.Dl.gn()}async Zn(){this.y8&&this.y8.c8().catch(xs),this.h2.c_(),this.S8.removeAttribute("src"),this.S8.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.S8.removeAttribute("x-airplay-deny"),this.S8.disableRemotePlayback=!1,this.S8.load(),this.z4.Zn(),this.Uo=Ki.aR()}m3(){this.A3||(gj(this.S8,ag.Ys),this.v3=!0)}get vg(){return this.z4.vg}W8(){const t=this.S8.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this.S8.videoWidth/this.S8.videoHeight,n=i.height;let r,h;e/n>s?(r=n*s,h=n):(h=e/s,r=e),this.S8.style.width=r+"px",this.S8.style.height=h+"px",this.S8.style.marginLeft=(e-r)/2+"px",this.S8.style.marginTop=(n-h)/2+"px",this.S8.style.backgroundColor="black"}Z8(){this.S8.style.width="100%",this.S8.style.height="100%",this.S8.style.marginLeft="",this.S8.style.marginTop="",this.S8.style.backgroundColor=""}get Sg(){return this.S8.videoHeight}get Lg(){return this.S8.videoWidth}get R_(){return this.S8.ended}get Ti(){return this.S8.offsetHeight*ag.Ys.j4}get ji(){return this.S8.offsetWidth*ag.Ys.j4}get W_(){return!1}get A3(){return this.v3}get k_(){}get Iu(){}get lt(){}get ya(){return this.q6}get yg(){return this.MP?this.MP.yg:Ki.aR()}get TP(){}get nt(){return this.Dl}get Ol(){}get Bg(){return!1}set Bg(t){}zP(t,i,e,s,n){}uE(t,i,e,s,n,r,h,o,a){const u=new wn(t,i,e,s,n,r,h,a,o);return this.Dl.tt(u),this.N2.tt(u),u}tq(t){}X_(){return Kb(this.S8)}get F4(){return"block"===this.S8.style.display}ge(){this.S8.style.display="block"}be(){this.S8.style.display="none"}g3(){}async $n(t){if(t.hA===wt.bO)throw new b("Not yet implemented");await this.y8.h8();const i=H_(t.EP,(t=>t.dm.hA===Ci.Xv)),e={kind:nj.t8,mediaBufferConfigs:t.D$.map((t=>t.IP)),fairPlaySdkUri:null==i?void 0:i._z};return await this.y8.u8(e),this.MP=cj.M8(t,this.y8,this.Cx,this.S8),this.PH.$n(this.MP,t),this.S8.setAttribute("x-webkit-airplay","deny"),this.S8.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.S8.disableRemotePlayback=!0,this.S8.preload="none",this.S8.src="https://theo.proxy/"+this.y8.mO+"/master.m3u8",this.MP}w3(){}AE(t){this.Dl.it(t),this.N2.it(t)}BP(){for(const t of this.Dl.xw.slice())t.gn();this.Dl.Zn()}wP(t){}OP(){return!1}y3(t){t.appendChild(this.S8)}Ug(){return this.S8}D4(){}get FP(){return this.PH.FP}set FP(t){this.PH.FP=t}get M3(){}set M3(t){}get o4(){}Zg(){}constructor(t,i){super(),this.V8=!0,this.y8=new rj,this.Q8=new oj,this.H8=!0,this.X8=new No,this.cR=!1,this.o2=Promise.resolve(),this.h2=new Po,this.q8=!0,this.Uo=Ki.aR(),this.v3=!1,this.I8=()=>{this.hg||this.Y8.U<=0||this.b_.U<=0||this.Q8.f8(this.b_.jn(this.b_.U-1),this.Y8.jn(this.Y8.U-1))},this.E8=()=>{this.Co(new ys(this.j_))},this.b8=()=>{this.Co(new Tc(this.j_,this.k_))},this.L8=()=>{this.Co(new Qh(this.j_,this.ag))},this.k8=()=>{this.Co(new Ve(this.j_,this.xg))},this.C8=()=>{this.Co(new Mn(this.ct))},this.x8=()=>{this.Co(new Hr(this.j_))},this.O8=()=>{this.Dp(this.j_)},this.j8=async()=>{this.q8&&this.Co(new vh(this.j_)),this.H8=!1,this.q8=!0},this.z8=()=>{this.H8=!0,this.Co(new ws(this.j_))},this.u3=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.Co(new vs(i,s))},this.S8=t,this.z4=new Qk(this),this.S8.playsInline=!0,this.S8.style.width="100%",this.S8.style.height="100%",this.D8(),this.B8(),this.q6=ej(this.S8),this.PH=new Tx(this),this.Cx=i,this.Dl=new sn,this.N2=new hx(this)}},dj=[iv.mp,iv.vp];function fj(t){const i=h.createElement(t);return Fs(i)&&function(t){t.addEventListener("contextmenu",(t=>{t.preventDefault()}))}(i),_j(i),i}function _j(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),en(t),$N(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=ii.HT,t.controls=!1,t.style.display="none",Fs(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function gj(t,i){if(i.K8){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();pu(i)&&W(i),t.pause()}}r(),r();var wj=class{mI(t){return this.dE.mI(t)}bY(t){this.dE.bY(t)}gn(){this.dE.gn()}constructor(t){this.dE=t}},Aj=class extends wj{async mI(t){const i=new nc(t),e=this.vR.zV.Kz(i);if(!e)return this.dE.mI(i);e.BV(ag.f_()/1e3);const s=await this.dE.mI(t);e.RV(ag.f_()/1e3);const n={Cp:s.OG().pipeThrough(new xh(new vj(e))),mI:s.mI};return new Hh(n,s)}constructor(t,i){super(t),this.vR=i}},vj=class{start(t){this.uH=t}transform(t){this.J8.QV(ag.f_()/1e3,t),this.uH.enqueue(t)}flush(){this.J8.FV(ag.f_()/1e3)}constructor(t){this.J8=t}};function mj(t){return{get ratio(){return t.Lo},get thresholds(){return t.t9.slice()}}}function pj(t){const i=[],e=x.floor(1/t);if(j(e))return[];for(let s=0;s<=e;s++){const e=hi(s*t,0,1);i.push(e)}return i}r(),r(),r();var yj=class{get Lo(){return this.i9}get t9(){return this.e9}s9(t){return i=>{const e=i[i.length-1];this.i9=e.intersectionRatio,t(e.intersectionRatio)}}get va(){return this.Xa||(this.Xa=mj(this)),this.Xa}Wg(){this.n9.disconnect()}constructor(t,i,e){this.i9=1,this.Xa=void 0,this.e9=pj(i);const n=this.s9(e);this.n9=new s.IntersectionObserver(n,{root:null,threshold:this.e9}),this.n9.observe(t)}},Mj=class{get Lo(){return this.i9}get t9(){return this.e9}get va(){return this.Xa||(this.Xa=mj(this)),this.Xa}r9(t){this.i9=t;const i=this.e9;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this.h9!==e&&(this.h9=e,this.o9(t))}constructor(t,i){this.i9=1,this.h9=-1,this.Xa=void 0,this.e9=pj(t),this.o9=i}},Tj=class extends Mj{a9(){const t=this.yo.getBoundingClientRect();return hi(x.max(0,x.min(s.innerWidth,t.right)-x.max(0,t.left))*x.max(0,x.min(s.innerHeight,t.bottom)-x.max(0,t.top))/(t.width*t.height),0,1)}Wg(){s.removeEventListener("scroll",this.u9)}constructor(t,i,e){super(i,e),this.u9=oo((()=>this.r9(this.a9())),50),this.yo=t,s.addEventListener("scroll",this.u9,!!FE&&{passive:!0}),yc((()=>this.r9(this.a9())))}},Nj=.1,Dj=class{get c9(){return this.l9}get zo(){return this.d9}set zo(t){if(j(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.d9=t}get va(){return this.Xa||(this.Xa=function(t){return{get ratio(){return t.c9},get visible(){return t.c9>t.zo},get visibleThreshold(){return t.zo},set visibleThreshold(i){i=Ee(i),t.zo=i},addObserver:(i,e)=>(i=Ee(i),t.Fo(i,e).va),removeObserver(i){let e=t.f9(i);e&&t.Ro(e)}}}(this)),this.Xa}_9(t){return i=>{this.l9=i,null==t||t(this.l9)}}Fo(t,i){if(j(t))throw new k("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new yj(this.yo,t,this._9(i)):new Tj(this.yo,t,this._9(i)),this.g9.push(e),e}Ro(t){t.Wg(),Et(this.g9,t)}f9(t){for(const i of this.g9)if(i.va===t)return i}gn(){for(const t of this.g9)t.Wg();Ri(this.g9)}constructor(t){this.l9=1,this.d9=0,this.g9=[],this.Xa=void 0,this.yo=t,this.Fo(.1,this._9())}};r();var Sj=class extends gg{constructor(){super(t.IA)}};r();var Ij=class{get w9(){return this.A9}set w9(t){this.A9=t}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get conviva(){var i;return null==(i=t.w9)?void 0:i.va}}}(this)}gn(){this.A9=void 0}};var Ej=class extends ha{get v9(){return this.vR}get AN(){return this.m9}set AN(t){this.m9=t,this.p9.AN=t}get y9(){return this.M9}get ht(){return this.p9.ht}get qQ(){return this.T9}get Iu(){return this.N9}get G_(){return this.p9.G_}get q_(){return this.D9}get lQ(){return this.S9}get nt(){return this.p9.nt}get Ol(){return this.mR}get rt(){return this.p9.rt}get b_(){return this.L_()}L_(){return this.p9.b_}get I9(){return this._W}get IW(){return this.EW}get j_(){return this.z_()}set j_(t){this.P_(t)}z_(){return this.p9.j_}P_(t){this.p9.j_=t}E9(){return this.z_()}get k_(){return this.p9.k_}set k_(t){this.p9.k_=t}get bt(){return this.p9.bt}get ct(){return this.Td()}Td(){return this.p9.ct}get we(){return this.p9.we}get R_(){return this.p9.R_}get lt(){return this.Q_()}Q_(){return this.p9.lt}get F_(){return this.Y_()}Y_(){return this.p9.F_}get ya(){return this.p9.Rg()}get Bg(){return this.p9.Bg}set Bg(t){this.p9.Bg=t}get Z_(){return this.p9.Z_}set Z_(t){const i=Boolean(t);this.J_(i)}J_(t){this.p9.Z_=t,t||this.hg||this.Yg()}get hg(){return this.p9.hg}get ag(){return this.p9.ag}set ag(t){this.p9.ag=t}get fg(){return this._g()}_g(){return this.p9.fg}get gg(){return this.p9.gg}set gg(t){this.p9.gg=t}get vg(){return this.p9.vg}get yg(){return this.Mg()}Mg(){return this.p9.yg}get Tg(){return this.p9.Tg}get Vw(){return this.DN}get Sg(){return this.p9.Sg}get Lg(){return this.p9.Lg}get xg(){return this.p9.xg}set xg(t){const i=hi(Number(t),0,1)||0;this.jg(i)}get zg(){return this.p9.zg}jg(t){this.p9.xg=t}ka(){au(this,uI,this)}Vg(){this.p9.Vg()}Gg(){this.p9.Gg()}Wa(){return this.SB}async ga(t,i){if(this.SB=t,t){this.b9.xF(t).catch(this.L9);const e=function(t){t.sources;const i=t.sources.filter((t=>Wo(t.integration)));0;return t.sources=i,t}(t);await this.p9.ga(e,i)}}Yg(){if(this.bo)return;this.p9.Yg(),this.M9.Yg();const t=this.we.getElementsByTagName("video");for(let i=0;i<t.length;i++){const e=t[i];"Advertisement"===e.title&&gj(e,ag.Ys)}this.bo=!0}cs(){return this.k9.qo()===nI.FULLSCREEN}ge(){this.p9.ge()}be(){this.p9.be()}Ug(){return this.p9.Ug()}Zg(){this.p9.Zg()}Kg(){this.p9.Kg()}async Wg(){this.SB=void 0,await this.p9.Wg(),await this.p9.Zn()}async gn(){this.Co(new Sj),this.Vo(),this.T9.gn(),this.KO.gn(),this.S9.gn(),this.C9.gn(),this.x9.gn(),this.k9.gn(),this.N9.gn(),this.O9.gn(),this.j9.gn(),this.M9.gn(),this.AR.gn(),await this.p9.gn()}constructor(i,e){super(),this.m9=!1,this.bo=!1,this.SB=void 0,this.z9=!1,this.O9=new Ij,this.ba=void 0,this.L9=t=>{if(this.z9)return;this.z9=!0;const i=this.P9,e=ne(t);this.p9.Pw=new GS(this.we,e,t),W(i.gn())},this.B9=i=>{i.type!==t.GA&&i.type!==t.YA&&this.Co(i)};const s=Ee(e.uid);j(s)?this.DN=rm++:this.DN=s,this.wd=e;const n=ag.KO,r=new oL;this.j9=new kE("6.10.1",n,r),this.vR=new Yb;const h=new Aj(n,this.vR);this.KO=new Cb(h,e.allowMixedContent),this.eH=new gE(e.isEmbeddable,"6.10.1",cE()),this.b9=new hL(n,this.eH,this.j9,r,e,cE()),this.b9.KW().catch(this.L9),this.N9=new qE(i),this.N9.yn(th.pn,this.Ds),this.mR=new dL,this._W=new Wb,this.EW=new qb;const o=new et(i,e,this.KO,this.vR,this.N9,this.mR);this.vR.JV(o);let a=o;a=new Hb(a,this.I9),a=new Xb(a,this.IW),this.P9=a,this.p9=new Kv(this.P9),this.p9.m_(this.B9),this.D9=new Zb(this.p9),this.S9=new jb(this.p9,this.KO,this.vR),this.C9=new zE(this),this.x9=new $E(this.p9,e.allowNativeFullscreen),this.k9=new aI(this.x9),this.N9.bn(),this.Bo=new Dj(i),this.AR=new jy(this.N9,this.mR,1,[iv.vp]),this.M9=new zy(this.AR),this.T9=new tL}};r(),r();var iu,O=class extends ha{get v9(){return this.Qo.v9}get Oc(){return this.R9()}R9(){return this.Qo.Oc}get O9(){return this.Qo.O9}get j9(){return this.Qo.j9}get y9(){return this.U9()}U9(){return this.Qo.y9}get AN(){return this.Qo.AN}set AN(t){this.Qo.AN=t}get C9(){return this.Qo.C9}get qQ(){return this.Qo.qQ}get I9(){return this.Qo.I9}get wd(){return this.Qo.wd}get Iu(){return this.Qo.Iu}get ya(){return this.Rg()}Rg(){return this.Qo.ya}get KO(){return this.Qo.KO}get zg(){return this.Qo.zg}get IW(){return this.Qo.IW}get lQ(){return this.Qo.lQ}get k9(){return this.Qo.k9}get N9(){return this.Qo.N9}get p9(){return this.Qo.p9}get Ol(){return this.Qo.Ol}get Vw(){return this.Qo.Vw}get Bo(){return this.Qo.Bo}get ht(){return this.S_()}S_(){return this.Qo.ht}L_(){return this.Qo.L_()}get k_(){return this.C_()}set k_(t){this.x_(t)}C_(){return this.Qo.k_}x_(t){this.Qo.k_=t}get bt(){return this.O_()}O_(){return this.Qo.bt}z_(){return this.Qo.z_()}P_(t){this.Qo.P_(t)}E9(){return this.Qo.E9()}Td(){return this.Qo.Td()}get we(){return this.Qo.we}get R_(){return this.U_()}U_(){return this.Qo.R_}Q_(){return this.Qo.Q_()}Y_(){return this.Qo.Y_()}get G_(){return this.V_()}V_(){return this.Qo.G_}get Bg(){return this.Qo.Bg}set Bg(t){this.Qo.Bg=t}get q_(){return this.X_()}X_(){return this.Qo.q_}get Z_(){return this.K_()}set Z_(t){this.J_(t)}K_(){return this.Qo.Z_}J_(t){this.Qo.J_(t)}get hg(){return this.og()}og(){return this.Qo.hg}get ag(){return this.cg()}set ag(t){this.dg(t)}cg(){return this.Qo.ag}dg(t){this.Qo.ag=t}_g(){return this.Qo._g()}get gg(){return this.wg()}set gg(t){this.Ag(t)}wg(){return this.Qo.gg}Ag(t){this.Qo.gg=t}get vg(){return this.pg()}pg(){return this.Qo.vg}get ba(){return this.Qo.ba}set ba(t){this.Qo.ba=t}Mg(){return this.Qo.Mg()}get Tg(){return this.Ng()}Ng(){return this.Qo.Tg}get nt(){return this.Dg()}Dg(){return this.Qo.nt}get Sg(){return this.Ig()}Ig(){return this.Qo.Sg}get rt(){return this.Eg()}Eg(){return this.Qo.rt}get Lg(){return this.Cg()}Cg(){return this.Qo.Lg}get xg(){return this.Og()}set xg(t){this.jg(t)}Og(){return this.Qo.xg}jg(t){this.Qo.jg(t)}Yg(){this.Qo.Yg()}Gg(){this.Qo.Gg()}Vg(){this.Qo.Vg()}ge(){this.Qo.ge()}be(){this.Qo.be()}cs(){return this.Qo.cs()}Ug(){return this.Qo.Ug()}Zg(){this.Qo.Zg()}Kg(){this.Qo.Kg()}ka(){this.Qo.ka()}Wa(){return this.Qo.Wa()}ga(t,i){return this.Qo.ga(t,i)}Wg(){return this.Qo.Wg()}$g(t){return!1}async gn(){this.Vo(),await this.Qo.gn()}constructor(t,i){super(),this.iw=t=>{this.$g(t)||this.Co(t)},this.Qo=t,this.Q9=!i,this.Q9&&t.m_(this.iw)}};!function(t){t[t.Za=0]="Za",t[t.F9=1]="F9",t[t.Y9=2]="Y9",t[t.G9=3]="G9"}(iu||(iu={}));var bj=[0,1,2,3],Lj={};function tr(t,i){(Lj[i]||(Lj[i]=[])).push(t)}var kj={};function Cj(t,i){(kj[i]||(kj[i]=[])).push(t)}var xj=[];function Oj(t){for(const i of xj)i(t)}r();var jj=self.CustomEvent;var zj=function(){try{const t=new jj("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=h.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};r();var Pj=new class{get U(){return this._N.length}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.jw(e).va;return i.getPlayerByUID=i=>{const e=t.V9(i);return e&&e.va},i}(this)}jw(t){return this._N[t]}mq(t){this._N.push(t),this.va.push(t.va)}pN(t){const i=this._N.indexOf(t);i<0||(jc(this._N,i),this.Xa&&jc(this.Xa,i))}V9(t){for(const i of this._N)if(i.Vw===t)return i}constructor(){this._N=[],this.Xa=void 0}};r(),r(),r();var Bj=class extends gg{constructor(i){super(t.lo),this.source=i}};r();var Rj=class extends ha{get k_(){}set k_(t){}get j_(){return this.z_()}set j_(t){this.P_(t)}z_(){return this.uR}E9(){return this.z_()}P_(t){this.cR&&this.uR===t||(this.uR=t,this.cR=!0,this.Co(new Ot(this.uR)))}get hg(){return this.dR}get ag(){return this.fR}set ag(t){this.fR!==t&&(this.fR=t,this.Co(new Qh(this.uR,this.ag)))}get vg(){return rv.tN}get Tg(){return this.cR}Vg(){this.dR&&(this.dR=!1,this.Co(new vh(this.uR)),this.Co(new wc(this.uR)))}Gg(){this.dR||(this.dR=!0,this.Co(new Tc(this.uR,this.k_)),this.Co(new ws(this.uR)))}Zn(){this.uR=0,this.cR=!1,this.fR=1,this.Gg()}gn(){this.Vo()}be(){}ge(){}constructor(){super(),this.uR=0,this.dR=!0,this.cR=!1,this.fR=1}};r();var ho,Uj={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},Qj={visibility:"hidden"},Fj={visibility:"visible"},Yj=class{get zu(){return void 0!==this.W9?this.W9:void 0!==this.H9?this.H9:void 0}set q9(t){this.H9=t,this.Qn()}Qn(){const t=this.Qo.hg,i=this.X9;this.zu?this.Us.style.backgroundImage='url("'+ew(this.zu)+'")':this.Us.style.backgroundImage="",t&&this.zu&&!i?this.ge():this.be()}ge(){un(Qj,this.Qo.we),un(Fj,this.Us)}be(){un(Qj,this.Us),un(Fj,this.Qo.we)}NB(){this.Qo.yn(t.lo,this.Z9),this.Qo.yn(t.jh,this.VO)}gn(){this.Qo.fn(t.lo,this.Z9),this.Qo.fn(t.jh,this.VO),ei(this.Us)}constructor(t){this.X9=!1,this.Z9=t=>{var i;this.X9=!this.Qo.hg,this.W9=null==(i=t.source)?void 0:i.poster,this.Qn()},this.VO=()=>{this.X9=!0,this.be()},this.Qo=t,this.NB(),this.Us=function(){let t=Ys&&Ys.document&&Ys.document.createElement("div");return t.className="theoplayer-poster",un(Uj,t),t}(),t.we.appendChild(this.Us)}};function qu(t){let i;const e={get playing(){return t.Fc},get currentAds(){return t.K9.map((t=>t.J9()))},get currentAdBreak(){var i,e;return null!=(e=null==(i=t.t7)?void 0:i.J9())?e:null},get scheduledAds(){return t.i7.map((t=>t.J9()))},get scheduledAdBreaks(){return t.e7.map((t=>t.J9()))},skip(){t.Yp()},schedule(i){let e=YI(i,ta.dL);e?t.m1(e,ho.s7,!1):console.error("Invalid ad description")},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new ma(t,e),e}r(),r(),r(),function(t){t[t.s7=0]="s7",t[t.n7=1]="n7"}(ho||(ho={})),r(),r();var pc=class extends Ha{constructor(t,i){super(t),this.Xl=i}},uc=class extends gg{get ad(){return this.adBreak}constructor(t,i){super(t),this.adBreak=i}},cn=class extends pc{fa(){return new Gj(this.Xl.J9())}constructor(t){super("r7",t)}},Gj=class extends uc{constructor(t){super("removeadbreak",t)}};r();var Vj=class extends pc{fa(){return new Wj(this.Xl.J9())}constructor(t){super("h7",t)}},Wj=class extends uc{constructor(t){super("addadbreak",t)}};r(),r();var Ts=class extends Ha{constructor(t,i){super(t),this.o7=i}},Xs=class extends gg{constructor(t,i){super(t),this.ad=i}},pn=class extends Ts{fa(){return new Hj(this.o7.J9())}constructor(t){super("a7",t)}},Hj=class extends Xs{constructor(t){super("addad",t)}};r();var Bh=class extends pc{fa(){return new qj(this.Xl.J9())}constructor(t){super("u7",t)}},qj=class extends uc{constructor(t){super("adbreakend",t)}};r();var ka=class extends pc{fa(){return new Xj(this.Xl.J9())}constructor(t){super("l7",t)}},Xj=class extends uc{constructor(t){super("adbreakbegin",t)}};r();var tu=class extends Ts{fa(){return new Zj(this.o7.J9(),this.currentTime)}constructor(t,i){super("d7",t),this.currentTime=i}},Zj=class extends Xs{constructor(t,i){super("adbegin",t),this.currentTime=i}};r();var fa=class extends Ts{fa(){return new Kj(this.o7.J9(),this.currentTime)}constructor(t,i){super("f7",t),this.currentTime=i}},Kj=class extends Xs{constructor(t,i){super("adend",t),this.currentTime=i}};r();var vn=class extends Ha{fa(){return new Jj}constructor(){super("_7")}},Jj=class extends gg{constructor(){super("adadded")}},mn=class extends ha{get Fc(){return!!this.Ic&&this.Ic.Fc}get K9(){return this.Ic?this.Ic.K9:[]}get t7(){return this.Ic?this.Ic.t7:null}get i7(){return this.Ic?this.Ic.i7:[]}get e7(){return this.Ic?this.Ic.e7:[]}m1(t,i,e){var s;null==(s=this.Ic)||s.m1(t,i,e)}g7(t){var i;null==(i=this.Ic)||i.g7(t)}Yp(){var t;null==(t=this.Ic)||t.Yp()}w7(t){var i;null==(i=this.Ic)||i.w7(t)}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=qu(this)}get Pw(){return this.Ic}set Pw(t){const i=this.Ic;if(i===t)return;const e=this.K9,s=this.t7,n=this.i7,r=this.e7;null==i||i.N_(this.Ds),this.Ic=t,null==t||t.m_(this.Ds);const h=this.K9,o=this.t7,a=this.i7,u=this.e7,c=[];let l=!1;for(const t of r)na(u,t)||c.push(new cn(t));for(const t of u)na(r,t)||c.push(new Vj(t));for(const t of a)na(n,t)||(c.push(new pn(t)),l=!0);l&&c.push(new vn),s!==o&&(s&&c.push(new Bh(s)),o&&c.push(new ka(o)));for(const t of e)na(h,t)||c.push(new fa(t,this.Qo.z_()));for(const t of h)na(e,t)||c.push(new tu(t,this.Qo.z_()));for(const t of c)this.Co(t)}gn(){var t;return this.Vo(),null==(t=this.Ic)||t.N_(this.Ds),this.Ic=void 0,Promise.resolve()}constructor(t){super(),this.Xa=void 0,this.Qo=t}};r();var $j,gn=class extends ha{get Fc(){return!1}get K9(){return[]}get t7(){return null}get i7(){return[]}get e7(){return[]}m1(t,i,e){this.A7.push({v7:t,m7:i,p7:e})}Yp(){}w7(t){}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=qu(this)}g7(t){const i=this.A7.slice();this.Zn();for(const e of i)t.m1(e.v7,e.m7,e.p7)}y7(){const t=this.A7.map((t=>t.v7));return this.Zn(),t}Zn(){Ri(this.A7)}gn(){return this.Vo(),this.Zn(),Promise.resolve()}constructor(...t){super(...t),this.Xa=void 0,this.A7=[]}};function tz(i){return class extends ha{get j9(){return this.M7.j9}get Oc(){return this.Ic}get O9(){return this.M7.O9}get C9(){return this.M7.C9}get wd(){return this.M7.wd}get KO(){return this.M7.KO}get ya(){return this.M7.ya}get k9(){return this.M7.k9}get N9(){return this.M7.N9}get p9(){return this.M7.p9}get v9(){return this.M7.v9}get AN(){return this.M7.AN}set AN(t){this.M7.AN=t,this.T7()}get y9(){return this.M7.y9}get ht(){return this.M7.ht}get qQ(){return this.M7.qQ}get Iu(){return this.M7.N9}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}get G_(){return this.M7.G_}get Bg(){return this.M7.Bg}set Bg(t){this.M7.Bg=t}get q_(){return this.M7.q_}get lQ(){return this.M7.lQ}get nt(){return this.M7.nt}get Ol(){return this.M7.Ol}get rt(){return this.M7.rt}get I9(){return this.M7.I9}get IW(){return this.M7.IW}get k_(){return this.Qo.k_}set k_(t){this.Qo.k_=t}get bt(){return this.M7.bt}get we(){return this.M7.we}get R_(){return this.M7.R_}get Z_(){return this.M7.Z_}set Z_(t){this.J_(t)}get hg(){return this.Qo.hg}get mi(){return this.N7.zu||""}set mi(t){this.N7.q9=t}get ag(){return this.M7.ag}set ag(t){this.Qo.ag=t}get gg(){return this.M7.gg}set gg(t){this.M7.gg=t}get vg(){return this.Qo.vg}get ba(){return this.M7.ba}set ba(t){this.M7.ba=t}get Tg(){return this.Qo.Tg}get Vw(){return this.M7.Vw}get Sg(){return this.M7.Sg}get Lg(){return this.M7.Lg}get xg(){return this.M7.xg}set xg(t){this.jg(t)}get zg(){return this.M7.zg}get Bo(){return this.M7.Bo}async nO(t,i){return this.QH.nO(t,i).catch(Ah)}async D7(t,i){Pi(i),this.M7.m_(this.S7);try{await this.M7.ga(t,i)}finally{this.M7.N_(this.S7)}}async T7(){const t=await this.I7();this.E7(t)}async I7(){const t=this.Wa();return t&&!Uu(t)&&this.AN&&this.hg?this.y9.b7(this.Z_):"none"}E7(t){var i;const e=(null==(i=this.Wa())?void 0:i.mutedAutoplay)||this.wd.mutedAutoplay;switch(t){case"all":this.L7();break;case"muted":(this.Z_||e===Yv.ALL)&&(this.Z_=!0,this.Vg())}}ga(t){Uu(this.SB)||this.Co(new Fv(0,rv.tN)),this.Zn(),this.SB=t,W(this.nO((async i=>{Pi(i);try{await this.D7(t,i)}catch(t){return this.SB=void 0,void this.hB(function(t,i){return t instanceof ce?t:t instanceof b?new ce(i,t.message,t):new ce(i,String(t))}(t,le.SOURCE_NOT_SUPPORTED))}finally{this.k7(this.M7)}const e=await this.I7();this.Co(new Bj(this.Wa())),this.E7(e)})))}P_(t){this.Qo.P_(t)}Q_(){var t;return null!=(t=this.DR)?t:this.M7.Q_()}Y_(){var t;return null!=(t=this.vP)?t:this.M7.Y_()}hB(t){void 0===this.Y_()&&(this.vP=t,this.DR=ne(t),this.Co(new me(t)))}Vg(){this.Qo.Vg()}L7(){this.Z_||this.Yg(),this.Vg()}Yg(){this.M7.Yg()}Gg(){this.Qo.Gg()}Wg(){this.ga(void 0)}ge(){this.LB=!0,this.Qo.ge()}be(){this.LB=!1,this.Qo.be()}ka(){this.M7.ka()}jg(t){this.M7.jg(t)}J_(t){this.M7.J_(t)}wa(t){this.C7=t,t.mq(this)}cs(){return this.M7.cs()}Wa(){return this.SB}Ug(){return this.M7.Ug()}z_(){return this.Qo.z_()}E9(){return this.Qo.E9()}Td(){return this.M7.Td()}L_(){return this.M7.L_()}_g(){return this.M7._g()}Mg(){return this.M7.Mg()}Zg(){this.M7.Zg()}Kg(){this.M7.Kg()}Zn(){this.SB=void 0,this.vP=void 0,this.DR=void 0,this.x7=!0,Ri(this.O7),this.j7.Zn(),this.k7(this.j7),this.QH.c_(),W(this.QH.nO((async t=>{Pi(t),await this.M7.Wg()})))}gn(){this.Co(new Sj),this.N7.gn(),this.DB(),this.Zn(),W(this.nO((async()=>{await this.M7.gn(),this.C7&&(this.C7.pN(this),this.C7=void 0),this.QH.gn()}))),this.Vo()}k7(t){if(this.Qo===t)return;const i=this.Qo.hg,e=this.Qo.z_(),s=this.Qo.ag,n=this.Qo.vg,r=this.Qo.Tg;this.z7=i,this.T3=n,this.DB(),t.m_(this.P7),t===this.M7?(void 0!==this.Ic&&(this.Ic.Pw=t.Oc,this.B7.g7(this.Ic)),(r||t.z_()!==e)&&t.P_(e),t.ag!==s&&(t.ag=s),i?t.Gg():t.Vg()):(void 0!==this.Ic&&(this.Ic.Pw=this.B7,this.B7.Zn()),this.wd.retainPlaybackRateOnSourceChange?t.ag=s:1!==s&&this.Co(new Qh(this.z_(),1))),t.N_(this.P7),this.Qo=t,this.NB();for(const t of this.O7)this.Co(t);Ri(this.O7),this.LB?t.ge():t.be()}NB(){this.Qo.m_(this.Jg)}DB(){this.Qo.N_(this.Jg)}fa(){return function(t){let i,e;const s=i=>{e=i;const s=rl(i,t.wd);t.ga(s)};let n={get abr(){return t.v9.va},get ads(){var i;return null==(i=t.Oc)?void 0:i.va},get analytics(){return t.O9.va},get audioTracks(){return t.ht.va},get autoplay(){return t.AN},set autoplay(i){t.AN=Boolean(i)},get buffered(){return t.L_()},get canvas(){return t.C9.va},get cast(){var i;return null==(i=t.qQ)?void 0:i.va},get clip(){return t.I9.va},get currentProgramDateTime(){var i;return null!=(i=t.k_)?i:null},set currentProgramDateTime(i){t.k_=null!=i?i:void 0},get currentTime(){return t.z_()},set currentTime(i){t.P_(Number(i))},get duration(){return t.Td()},get element(){return t.we},get ended(){return t.R_},get error(){return t.Q_()},get errorObject(){return t.Y_()},get loop(){return t.IW.IW},set loop(i){t.IW.IW=Boolean(i)},get metrics(){return t.q_.va},get muted(){return t.Z_},set muted(i){t.J_(i)},get network(){return t.lQ.va},get paused(){return t.hg},get playbackRate(){return t.ag},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.ag=e},get played(){return t._g()},get poster(){return t.mi},set poster(i){t.mi=P(i)},get preload(){return t.gg},set preload(i){t.gg=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.k9.va},get readyState(){return t.vg},get seekable(){return t.Mg()},get seeking(){return t.Tg},get source(){return e},set source(t){s(t)},get src(){return jI(t.Wa())},set src(t){s({sources:t})},get textTracks(){return t.nt.va},get textTrackStyle(){return t.Ol.va},get uid(){return t.Vw},get videoHeight(){return t.Sg},get videoTracks(){return t.rt.va},get videoWidth(){return t.Lg},get visibility(){return t.Bo.va},get volume(){return t.xg},set volume(i){t.jg(Number(i))},get latency(){return t.zg.va},destroy(){t.gn(),t=null,e=void 0},play(){t.L7()},pause(){t.Gg()},stop(){e=void 0,t.Wg()},prepareWithUserAction(){t.Yg()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},setSource(t){s(t)}};return i=new hI(n,!0),i.Qa(t),i.yn("destroy",(()=>{i.gn()})),n}(this)}constructor(e,s){super(),this.z7=!0,this.T3=rv.tN,this.x7=!1,this.SB=void 0,this.vP=void 0,this.DR=void 0,this.S7=i=>{i.type!==t.WA&&this.O7.push(i)},this.P7=i=>{(i.type!==t.jh||this.Qo.hg)&&(i.type===t.Sh&&this.Qo.hg||i.type===t.ZA&&this.Qo.Tg&&this.Qo.z_()===i.currentTime||i.type===t.WA&&this.Qo.ag===i.playbackRate||this.Co(i))},this.Jg=i=>{if(this.x7){if(i.type===qo.Mv)return;i.type!==qo.vv&&i.type!==qo.Tv||(this.x7=!1)}if(i.type===t.jh){if(!this.z7)return;this.z7=!1}else if(i.type===t.Sh){if(this.z7)return;this.z7=!0}else if(i.type===qo.Mw){if(this.T3===i.readyState)return;this.T3=i.readyState}else if(i.type===t.IA)return;this.Co(i)},this.M7=new i(e,s),this.j7=new Rj,this.Qo=this.M7,this.N7=new Yj(this),this.M7.Oc&&(this.Ic=new mn(this),this.Ic.Pw=this.M7.Oc,this.B7=new gn),this.QH=new Vi,this.O7=[],this.LB=!0,this.NB()}}}function iz(){if(!$j){let t=Ej;t=function(t){return class extends O{constructor(i,e){let s=new t(i,e);for(const t of bj)if(kj[t])for(const i of kj[t])s=i(s);super(s)}}}(t);let i=tz(t);i=function(t){let i=t;for(const t of bj)if(Lj[t])for(const e of Lj[t])i=e(i);return i}(i),$j=i}return $j}function ez(t,i){const e=Wv(i),s=new(iz())(t,e);s.ba=s;let n=s.va;return s.ka(),s.wa(Pj),_.defineProperty(n,"constructor",{value:ez}),n=Tg(n),Oj(s),n}yc((()=>{self.dispatchEvent&&self.dispatchEvent(zj("theoplayerready"))})),r();var sz={base64:new class{encode(t){return Fh(t)}decode(t){return mi(t)}}};r();var nz=JSON.parse('["dash","hls","chromecast","ads","airplay","yospace","spotx","vr","vr-webxr","conviva","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","verizonmedia","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');function rz(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}function hz(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){oz(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&oz(e,null,t.length,t),t}function oz(t,i,e,s){var n,r,h,o,a,u=t.length,c=0,l=2*e;for(n=0;n<u;n+=l)for(h=(r=n+e)+e,r>u&&(r=u),h>u&&(h=u),o=n,a=r;;)if(o<r&&a<h)i(t[o],t[a])<=0?s[c++]=t[o++]:s[c++]=t[a++];else if(o<r)s[c++]=t[o++];else{if(!(a<h))break;s[c++]=t[a++]}}r(),r(),r(),r();var az=/[a-zA-Z]/,uz=/[0-9]/,cz=/[0-9a-fA-F]/,lz=/^0x/i,dz=/^[0-9]+$/,fz=/^[0-9a-fA-F]+$/,_z=/^[0-7]+$/,gz=_.prototype.toString,wz=Array.isArray||function(t){return"[object Array]"===gz.call(t)},Az="undefined"!=typeof Symbol&&"symbol"==typeof Symbol.iterator;function vz(t){return wz(t)?t:Array.from(t)}function mz(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function pz(t){return t>=65&&t<=90}function yz(t){return pz(t)||function(t){return t>=97&&t<=122}(t)}function Mz(t){return t>=48&&t<=57}function Tz(t){return Mz(t)||yz(t)}function Nz(t){return Mz(t)||t>=65&&t<=70||t>=97&&t<=102}function Dz(t){return pz(t)?t+32:t}function Sz(t){return Mz(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function Iz(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var Ez=x.min,bz=String.fromCharCode,Lz=16384;function kz(t){for(var i=t.length,e=[],s=0;s<i;s+=Lz){var n=Ez(s+Lz,i);e.push(bz.apply(null,t.slice(s,n)))}return e.join("")}var Cz=2147483647,xz=/[^\0-\x7E]/,Oz=/[\x2E\u3002\uFF0E\uFF61]/g,jz={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},zz=x.floor,Pz=String.fromCharCode;function Bz(t){throw new RangeError(jz[t])}function Rz(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var Uz,Qz,Fz,Yz=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},Gz=function(t,i,e){var s=0;for(t=e?zz(t/700):t>>1,t+=zz(t/i);t>455;s+=36)t=zz(t/35);return zz(s+36*t/(t+38))},Vz=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(Oz,".")).split("."),i).join(".");return s+n}(t,(function(t){return xz.test(t)?"xn--"+function(t){for(var i=[],e=(t=Rz(t)).length,s=128,n=0,r=72,h=0,o=t;h<o.length;h++){var a=o[h];a<128&&i.push(Pz(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var l=Cz,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var g=c+1;l-s>zz((Cz-n)/g)&&Bz("overflow"),n+=(l-s)*g,s=l;for(var w=0,A=t;w<A.length;w++){var v=A[w];if(v<s&&++n>Cz&&Bz("overflow"),v==s){for(var m=n,p=36;;p+=36){var y=p<=r?1:p>=r+26?26:p-r;if(m<y)break;var M=m-y,T=36-y;i.push(Pz(Yz(y+M%T,0))),m=zz(M/T)}i.push(Pz(Yz(m,0))),r=Gz(n,g,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t}))};function Ft(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return kz(i)}function Wz(t){if(t>=55296&&t<=57343)throw new b("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Hz(t,i){return t>>i&63|128}function qz(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(Wz(t),i.push(t>>12&15|224),i.push(Hz(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(Hz(t,12)),i.push(Hz(t,6))),i.push(63&t|128)):i.push(t)}function Xz(t){for(var i=[],e=0;e<t.length;e++){qz(t[e],i)}return i}function Zz(){if(Fz>=Qz)throw new b("Invalid byte index");var t=255&Uz[Fz];if(Fz++,128==(192&t))return 63&t;throw new b("Invalid continuation byte")}function Kz(){var t,i;if(Fz>Qz)throw new b("Invalid byte index");if(Fz===Qz)return!1;if(t=255&Uz[Fz],Fz++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|Zz())>=128)return i;throw new b("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|Zz()<<6|Zz())>=2048)return Wz(i),i;throw new b("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|Zz()<<12|Zz()<<6|Zz())>=65536&&i<=1114111)return i;throw new b("Invalid UTF-8 detected")}function Jz(t){return[37,Iz(t>>4),Iz(15&t)]}function $z(t){return function(t){return t>=0&&t<=31}(t)||t>126}function tP(t){return $z(t)||32===t||34===t||60===t||62===t||96===t}function iP(t){return tP(t)||35===t||63===t||123===t||125===t}function eP(t){return iP(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function sP(t){return t<33||t>126||34===t||35===t||60===t||62===t}function nP(t){return sP(t)||39===t}function rP(t,i){if(!i(t))return[t];for(var e=Xz([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,Jz(r))}return s}function hP(t,i){for(var e=[],s=0,n=Rz(t);s<n.length;s++){var r=n[s];e.push.apply(e,rP(r,i))}return Ft(e)}function oP(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&Nz(t[s+1])&&Nz(t[s+2])){var r=Sz(t[s+1])<<4|Sz(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(Xz(t))}function aP(t){return Ft(function(t){Uz=t.slice(),Qz=Uz.length,Fz=0;for(var i,e=[];!1!==(i=Kz());)e.push(i);return e}(oP(Rz(t))))}function uP(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new k;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new k("Too many groups");if(":"!==t[r]){for(var h=0,o=0;o<4&&r<i&&cz.test(t[r]);)h=h<<4|C(t[r],16),r+=1,o+=1;if("."===t[r]){if(0===o)throw new k;if(r-=o,s>6)throw new k;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new k;r+=1}if(!uz.test(t[r]))throw new k;for(;r<i&&uz.test(t[r]);){var c=C(t[r],10);if(null===u)u=c;else{if(0===u)throw new k;if((u=10*u+c)>255)throw new k}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new k;break}if(":"===t[r]){if((r+=1)===i)throw new k}else if(r<i)throw new k;e[s]=h,s+=1}else{if(null!==n)throw new k("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)mz(e,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new k;return e}function cP(t){var i=10,e=dz;return lz.test(t)?(t=t.slice(2),i=16,e=fz):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=_z),""===t?0:e.test(t)?C(t,i):void 0}var lP={g0:4},dP=/[\0\t\n\r #%/:?@\[\\\]]/,fP=/[\0\t\n\r #/:?@\[\\\]]/;function _P(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new k("Invalid IPv6 address");return{g0:2,R7:uP(t.slice(1,-1))}}if(!i)return function(t){if(fP.test(t))throw new k("Invalid code point in opaque host");var i=hP(t,$z);return""===i?lP:{g0:3,Rk:i}}(t);var e=function(t){var i=function(t){return Vz(t.toLowerCase())}(t);return i}(aP(t));if(dP.test(e))throw new k("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=cP(n);if(void 0===r)return;e.push(r)}for(var h=0;h<e.length-1;h++)if(e[h]>255)throw new k;if(e[e.length-1]>=x.pow(256,5-e.length))throw new k;for(var o=e.pop(),a=0;a<e.length;a++)o+=e[a]*x.pow(256,3-a);return o}}(e);return void 0!==s?{g0:1,R7:s}:""===e?lP:{g0:0,U7:e}}function gP(t){switch(t.g0){case 0:return t.U7;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.R7);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.R7)+"]";case 3:return t.Rk;case 4:return""}}var wP=/\+/g;function AP(t){return 42===t||45===t||46===t||95===t||Tz(t)}function vP(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),h=void 0,o=void 0;-1!==r?(h=n.slice(0,r),o=n.slice(r+1)):(h=n,o=""),h=h.replace(wP," "),o=o.replace(wP," ");var a=aP(h),u=aP(o);e.push([a,u])}}return e}function mP(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=pP(Xz(Rz(s[0])))+"="+pP(Xz(Rz(s[1])))}return i}function pP(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):AP(s)?i.push(s):i.push.apply(i,Jz(s))}return kz(i)}var yP=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function Zu(t){var i=""+t,e=yP.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(TP(r))if(NP(r)||n===e-1)s.push(MP);else{var h=t.charCodeAt(n+1);NP(h)?(s.push(r,h),n++):s.push(MP)}else s.push(r)}return t.slice(0,i)+kz(s)}(i,e.index):i}var MP=65533,TP=function(t){return 55296==(63488&t)},NP=function(t){return 0!=(1024&t)};function DP(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function SP(t){t.Q7.length=0}function IP(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.Q7,vP(i))}function EP(t){if(t.Ju){var i=mP(t.Q7);""===i&&(i=null),t.Ju.Ju.F7=i}}var bP=function(){function t(t){if(void 0===t&&(t=void 0),this.Ju=null,null==t)this.Q7=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof bP&&!!wz(t.Q7)&&(!Az||t[Symbol.iterator]===LP)}(t))this.Q7=t.Q7.slice();else if(function(t){return null!=t&&(!!wz(t)||!!Az&&"function"==typeof t[Symbol.iterator])}(t)){this.Q7=[];for(var i=0,e=vz(t);i<e.length;i++){var s=vz(e[i]);if(2!==s.length)throw new k("Invalid name-value pair");this.Q7.push([Zu(s[0]),Zu(s[1])])}}else for(var n in this.Q7=[],t)_.prototype.hasOwnProperty.call(t,n)&&this.Q7.push([Zu(n),Zu(t[n])]);else(t=Zu(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.Q7=vP(t)}var i=t.prototype;return i.append=function(t,i){t=Zu(t),i=Zu(i),this.Q7.push([t,i]),EP(this)},i.delete=function(t){t=Zu(t);for(var i=this.Q7,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}EP(this)},i.get=function(t){t=Zu(t);for(var i=this.Q7,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=Zu(t);for(var i=this.Q7,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=Zu(t);for(var i=this.Q7,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=Zu(t),i=Zu(i);for(var e=this.Q7,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),EP(this)},i.sort=function(){hz(this.Q7,DP),EP(this)},i.toString=function(){return mP(this.Q7)},i.entries=function(){return new OP(this.Q7,kP)},i.keys=function(){return new OP(this.Q7,CP)},i.values=function(){return new OP(this.Q7,xP)},i.forEach=function(t){var i=this;this.Q7.forEach((function(e){return t(e[1],e[0],i)}))},t}(),LP=bP.prototype.entries;Az&&(bP.prototype[Symbol.iterator]=LP);var kP=function(t){return[t[0],t[1]]},CP=function(t){return t[0]},xP=function(t){return t[1]},OP=function(){function t(t,i){this.Y7=0,this.Q7=t,this.G7=i}return t.prototype.next=function(){return this.Y7<this.Q7.length?{done:!1,value:this.G7(this.Q7[this.Y7++])}:{done:!0,value:void 0}},t}(),jP="null";var En=_.create(null);En.ftp=21,En.file=0,En.gopher=70,En.http=80,En.https=443,En.ws=80,En.wss=443;var zP=/^(?:\.|%2e)$/i,PP=/^(?:\.|%2e){2}$/i;function BP(t){return zP.test(t)}function RP(t){return PP.test(t)}function UP(t){return void 0!==En[t]}function fl(t){return UP(t.V7)}function QP(t){return""!==t.W7||""!==t.H7}function FP(t){var i=t.length;if(!(i>=2))return!1;if(!GP(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function YP(t){return 2===t.length&&az.test(t[0])&&(":"===t[1]||"|"===t[1])}function GP(t){return 2===t.length&&YP(kz(t))}function VP(t){return YP(t)&&":"===t[1]}function WP(t){var i=t.q7;0!==i.length&&("file"===t.V7&&1===i.length&&VP(i[0])||i.pop())}function HP(t){return null===t.X7||lP===t.X7||t.Z7||"file"===t.V7}var A=-1,qP=/\t|\n|\r/g,XP=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function ZP(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new JP,t=t.replace(XP,""));var n=null!==s?s:0;i=i||null;for(var r=[],h=!1,o=!1,a=!1,u=Rz(t=t.replace(qP,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:A;switch(n){case 0:if(!yz(d)){if(null===s){r.length=0,n=2;continue}throw new k("Invalid scheme")}r.push(Dz(d)),n=1;break;case 1:if(Tz(d)||43===d||45===d||46===d)r.push(Dz(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new k("Invalid scheme")}var f=Ft(r);if(null!==s){if(UP(e.V7)&&!UP(f))return;if(!UP(e.V7)&&UP(f))return;if((QP(e)||null!==e.o8)&&"file"===f)return;if("file"===e.V7&&(e.X7===lP||null===e.X7))return}if(e.V7=f,null!==s)return void(fl(e)&&e.o8===En[e.V7]&&(e.o8=null));r.length=0,"file"===e.V7?n=13:fl(e)&&i&&i.V7===e.V7?n=3:fl(e)?n=7:47===u[l+1]?(n=4,l+=1):(e.Z7=!0,e.q7.push(""),n=18)}break;case 2:if(!i||i.Z7&&35!==d)throw new k("Invalid scheme");i.Z7&&35===d?(e.V7=i.V7,e.q7=i.q7.slice(),e.F7=i.F7,e.K7="",e.Z7=!0,n=20):"file"!==i.V7?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:e.V7=i.V7,A===d?(e.W7=i.W7,e.H7=i.H7,e.X7=i.X7,e.o8=i.o8,e.q7=i.q7.slice(),e.F7=i.F7):47===d?n=6:63===d?(e.W7=i.W7,e.H7=i.H7,e.X7=i.X7,e.o8=i.o8,e.q7=i.q7.slice(),e.F7="",n=19):35===d?(e.W7=i.W7,e.H7=i.H7,e.X7=i.X7,e.o8=i.o8,e.q7=i.q7.slice(),e.F7=i.F7,e.K7="",n=20):92===d&&fl(e)?n=6:(e.W7=i.W7,e.H7=i.H7,e.X7=i.X7,e.o8=i.o8,e.q7=i.q7.slice(),e.q7.pop(),n=17,l-=1);break;case 6:!fl(e)||47!==d&&92!==d?47===d?n=9:(e.W7=i.W7,e.H7=i.H7,e.X7=i.X7,e.o8=i.o8,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){h&&r.unshift(37,52,48),h=!0;for(var _=0;_<r.length;_++){var g=r[_];if(58!==g||a){var w=Ft(rP(g,eP));a?e.H7+=w:e.W7+=w}else a=!0}r.length=0}else if(A===d||47===d||63===d||35===d||fl(e)&&92===d){if(h&&0===r.length)throw new k("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===e.V7)l-=1,n=15;else if(58!==d||o)if(A===d||47===d||63===d||35===d||fl(e)&&92===d){if(l-=1,fl(e)&&0===r.length)throw new k("Invalid host");if(null!==s&&0===r.length&&(QP(e)||null!==e.o8))return;var v=_P(Ft(r),fl(e));if(e.X7=v,r.length=0,n=16,null!==s)return}else 91===d?o=!0:93===d&&(o=!1),r.push(d);else{if(0===r.length)throw new k("Invalid host");var m=_P(Ft(r),fl(e));if(e.X7=m,r.length=0,n=12,11===s)return}break;case 12:if(Mz(d))r.push(d);else{if(!(A===d||47===d||63===d||35===d||fl(e)&&92===d||null!==s))throw new k("Invalid port");if(0!==r.length){var p=C(Ft(r),10);if(p>65535)throw new k("Invalid port");e.o8=p===En[e.V7]?null:p,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:e.V7="file",47===d||92===d?n=14:i&&"file"===i.V7?A===d?(e.X7=i.X7,e.q7=i.q7.slice(),e.F7=i.F7):63===d?(e.X7=i.X7,e.q7=i.q7.slice(),e.F7="",n=19):35===d?(e.X7=i.X7,e.q7=i.q7.slice(),e.F7=i.F7,e.K7="",n=20):(FP(u.slice(l))||(e.X7=i.X7,e.q7=i.q7.slice(),WP(e)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(i&&"file"===i.V7&&!FP(u.slice(l))&&(VP(i.q7[0])?e.q7.push(i.q7[0]):e.X7=i.X7),n=17,l-=1);break;case 15:if(A===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&GP(r))n=17;else if(0===r.length){if(e.X7=lP,null!==s)return;n=16}else{var y=_P(Ft(r),fl(e));if(0===y.g0&&"localhost"===y.U7&&(y=lP),e.X7=y,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:fl(e)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(e.F7="",n=19):null===s&&35===d?(e.K7="",n=20):A!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(A===d||47===d||fl(e)&&92===d||null===s&&(63===d||35===d)){var M=Ft(r);if(RP(M)?(WP(e),47===d||fl(e)&&92===d||e.q7.push("")):!BP(M)||47===d||fl(e)&&92===d?BP(M)||("file"===e.V7&&0===e.q7.length&&GP(r)&&(lP!==e.X7&&null!==e.X7&&(e.X7=lP),r[1]=58,M=Ft(r)),e.q7.push(M)):e.q7.push(""),r.length=0,"file"===e.V7&&(A===d||63===d||35===d))for(;e.q7.length>1&&""===e.q7[0];)e.q7.shift();63===d?(e.F7="",n=19):35===d&&(e.K7="",n=20)}else r.push.apply(r,rP(d,iP));break;case 18:63===d?(e.F7="",n=19):35===d?(e.K7="",n=20):A!==d&&(e.q7[0]+=Ft(rP(d,$z)));break;case 19:null===s&&35===d?(e.K7="",n=20):A!==d&&(e.F7+=Ft(rP(d,fl(e)?nP:sP)));break;case 20:A===d||0===d||(e.K7+=Ft(rP(d,tP)))}l++}return e}function KP(t,i,e,s){try{ZP(t,i,e,s)}catch(t){}}var JP=function(){this.V7="",this.W7="",this.H7="",this.X7=null,this.o8=null,this.q7=[],this.F7=null,this.K7=null,this.Z7=!1};function $P(t){switch(t.V7){case"blob":var i;try{i=ZP(t.q7[0],null)}catch(t){return jP}return $P(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+gP(i)+(null===e?"":":"+e)}(t.V7,t.X7,t.o8);default:return jP}}var tB=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof tB&&"object"==typeof t.Ju}(i))s=i.Ju;else try{s=ZP(String(i),null)}catch(t){throw new k("Invalid base URL: "+t.message)}try{e=ZP(String(t),s)}catch(t){throw new k("Invalid URL: "+t.message)}var n=e.F7;this.Ju=e,this.F7=function(t){var i=new bP;return null!==t&&IP(i,t),i}(n),this.F7.Ju=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&rz(t.prototype,i),e&&rz(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.V7+":";if(null!==t.X7?(e+="//",QP(t)&&(e+=t.W7,""!==t.H7&&(e+=":"+t.H7),e+="@"),e+=gP(t.X7),null!==t.o8&&(e+=":"+t.o8)):null===t.X7&&"file"===t.V7&&(e+="//"),t.Z7)e+=t.q7[0];else for(var s=0,n=t.q7;s<n.length;s++)e+="/"+n[s];return null!==t.F7&&(e+="?"+t.F7),i||null===t.K7||(e+="#"+t.K7),e}(this.Ju)},set:function(t){var i;try{i=ZP(String(t),null)}catch(t){throw new k("Invalid URL: "+t.message)}this.Ju=i,SP(this.F7);var e=this.Ju.F7;null!==e&&IP(this.F7,e)}},{key:"origin",get:function(){return $P(this.Ju)}},{key:"protocol",get:function(){return this.Ju.V7+":"},set:function(t){KP(t+":",null,this.Ju,0)}},{key:"username",get:function(){return this.Ju.W7},set:function(t){HP(this.Ju)||(this.Ju.W7=hP(t,eP))}},{key:"password",get:function(){return this.Ju.H7},set:function(t){HP(this.Ju)||(this.Ju.H7=hP(t,eP))}},{key:"host",get:function(){var t=this.Ju,i=t.X7;if(null===i)return"";var e=t.o8,s=gP(i);return null!==e&&(s+=":"+e),s},set:function(t){this.Ju.Z7||KP(t,null,this.Ju,10)}},{key:"hostname",get:function(){var t=this.Ju.X7;return null===t?"":gP(t)},set:function(t){this.Ju.Z7||KP(t,null,this.Ju,11)}},{key:"port",get:function(){var t=this.Ju.o8;return null===t?"":""+t},set:function(t){HP(this.Ju)||(""===t?this.Ju.o8=null:KP(t,null,this.Ju,12))}},{key:"pathname",get:function(){var t=this.Ju.q7;return this.Ju.Z7?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.Ju.Z7||(this.Ju.q7.length=0,KP(t,null,this.Ju,16))}},{key:"search",get:function(){var t=this.Ju.F7;return null===t||""===t?"":"?"+t},set:function(t){t=Zu(t);var i=this.Ju;if(""===t)return i.F7=null,void SP(this.F7);"?"===t[0]&&(t=t.slice(1)),i.F7="",KP(t,null,i,19),IP(this.F7,t)}},{key:"searchParams",get:function(){return this.F7}},{key:"hash",get:function(){var t=this.Ju.K7;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.Ju.K7="",KP(t,null,this.Ju,20)):this.Ju.K7=null}}]),t}();function iB(t){return t.document&&t.document.baseURI||t.location.href||""}function eB(){let t=Ys,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}r(),r(),r(),r(),r();var sB=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!nd||!nd.msMaxTouchPoints),nB=Ue(),rB=!(!nB||!nB.webkitShowPlaybackTargetPicker),hB=class{get J7(){return void 0===this.ttt&&(this.ttt=this.itt()),this.ttt}itt(){return 0}get ett(){return!li.Xb}get stt(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get j4(){return s.devicePixelRatio||1}get ntt(){return rB}get w4(){return!1}get u4(){return!0}get _A(){return li.Rb||li.Ga}get htt(){return!li.Ga}get Oj(){return!0}get wA(){return!0}get gA(){return!1}get ott(){}get att(){return!0}get AJ(){return!1}get utt(){return!1}get ctt(){return li.Db}ltt(t,i){return!0}dtt(t){return t>=2*Dc}constructor(){this.ttt=void 0,this.ftt=!1,this.Je=sB,this.Qs=!1,this.K8=!0}};r();var oB=function(){const t=tD();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),aB=function(){if(li.GE)return!1;const t=tD();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var U=class extends hB{itt(){return this._tt?this._tt.J7:super.itt()}get ott(){var t;return null==(t=this._tt)?void 0:t.ott}get att(){var t,i;return null==(i=null==(t=this._tt)?void 0:t.att)||i}ltt(t,i){return this._tt?this._tt.ltt(t,i):super.ltt(t,i)}dtt(t){return this._tt?this._tt.dtt(t):super.dtt(t)}constructor(t){super(),this._tt=t,this._tt&&(this.ftt=this._tt.ftt,this.Je=this._tt.Je,this.K8=oB&&this._tt.K8)}},uB=class extends U{get gA(){return li.Ga}constructor(t){super(t),this.ftt=!0,this.Qs=!0}},cB=class extends uB{get gA(){return!0}itt(){return bk(!0)?super.itt():1}};r();var lB=class extends U{get w4(){return li.yb<3}get u4(){return li.yb>=3}get stt(){return s.tizen&&!this.gtt&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this.gtt={width:i,height:e})})),this.gtt}get AJ(){return li.yb<3}get utt(){return!0}ltt(t,i){return super.ltt(t,i)}};r();var L=class extends hB{constructor(){super()}};r();var dB=class extends L{get ott(){if(li.EE)return 4096}ltt(t,i){if(t&&t.wtt&&i&&i.wtt){let e=q(t.wtt,"mp4a.40.2")&&q(i.wtt,"mp4a.40.5"),s=q(t.wtt,"mp4a.40.5")&&q(i.wtt,"mp4a.40.2"),n=q(t.wtt,"mp4a.40.2")&&q(i.wtt,"mp4a.40.34"),r=q(t.wtt,"mp4a.40.34")&&q(i.wtt,"mp4a.40.2"),h=q(t.wtt,"mp4a.40.5")&&q(i.wtt,"mp4a.40.34"),o=q(t.wtt,"mp4a.40.34")&&q(i.wtt,"mp4a.40.5");return!(e||s||n||r||h||o)}return!0}};function q(t,i){return t.indexOf(i)>-1}r();var fB=class extends L{dtt(t){return t>=2}};r();var _B=class extends L{constructor(){super(),this.ftt=li.Qb>=11,this.K8=li.Rb&&!(li.Ga&&li.Qb<10)}};r();var gB=class extends U{get stt(){return s.webOS&&!this.gtt&&s.webOS.deviceInfo((t=>{this.gtt={width:t.screenWidth,height:t.screenHeight}})),this.gtt}get Oj(){return!1}get utt(){return!0}};r();var wB=class extends L{get att(){return!li.LE||(li.gb?92!==li.Ab:li.fb>=100)}};r();var AB=class extends U{get gA(){return!0}},vB=class{Att(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];JI(...i)}Pv(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];ji(...i)}mtt(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Nu(...i)}ptt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];$I(t,...e)}g_(t,i){return u(t,i)}t$(t,i){return v(t,i)}__(t){c(t)}e$(t){m(t)}xx(){return this.ytt.xx()}Sx(){return this.ytt.Sx()}Ex(){return this.ytt.Ex()}Ix(){return this.ytt.Ix()}Nx(){return this.ytt.Nx()}Lx(t,i){return this.ytt.Lx(t,i)}Dx(t){return this.ytt.Dx(t)}get Sj(){return this.Mtt}Dh(t,i){let e;return void 0===i&&(i=iB(Ys)),e="object"!=typeof i||i instanceof tB?i:i.href,new tB(t,e)}zv(t,i){if(void 0===i&&(i=iB(Ys)),this.Ttt){const e=ae(i)?i:i.toString();return new self.URL(t,e).href}return this.Dh(t,i).href}get Ys(){return this.Ntt}get vA(){return{AA:nd&&nd.userAgent.match(/Android /i)?"Android":"other",mA:Boolean(nd&&nd.userAgent.match(/Android 8.0.0/i))}}get eV(){return self&&self.location&&"https:"===self.location.protocol}get Dtt(){return"languages"in nd?nd.languages.slice():[nd.language]}constructor(){this.Mtt=new mB,this.Ntt=function(){const t=function(){if(li.jb)return new dB;if(li.Ib||li.bb)return new fB;if(li.Rb)return new _B;if(li.ob)return new wB;return new L}();return li.Ga?new cB(t):li.Qs?new uB(t):li.mb?new lB(t):li.Tb?new gB(t):li.EE?new AB(t):new U(t)}(),this.Ttt=function(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}(),self.performance&&self.performance.now?this.f_=()=>self.performance.now():this.f_=Yo}},mB=class{get Ij(){return nd.oscpu}get Ys(){return nd.platform}get Ej(){return nd.vendor}get bj(){return nd.vendorSub}};r(),r();var pB=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function yB(t,i,e){const s=pB([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}r(),r(),r();var MB=class extends ai{get name(){return us.wI}constructor(t,i){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.zu),i)}};r();var TB=function(t,i){return(TB=_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])})(t,i)};function NB(t,i){function e(){this.constructor=t}TB(t,i),t.prototype=null===i?_.create(i):(e.prototype=i.prototype,new e)}var ke="object"==typeof s?s:"object"==typeof self?self:"object"==typeof global?global:null;var DB=function(){var t=ke.Blob;if(t)try{return new t,function(t,i){return new ke.Blob(t,i)}}catch(t){}var i=ke.BlobBuilder||ke.WebKitBlobBuilder||ke.MozBlobBuilder||ke.MSBlobBuilder;return i?function(t){return function(i,e){var s=new t;if(i)for(var n=0,r=i;n<r.length;n++){var h=r[n];s.append(h)}return s.getBlob(e&&e.type||"")}}(i):null}(),Sr="function"==typeof f?f:void 0;function SB(t){return t&&"function"==typeof t.getReader}function IB(t){if("function"!=typeof t)return!1;try{var i=!1,e=new t({start:function(){i=!0}});return!!i&&SB(e)}catch(t){return!1}}var EB=function(){function t(t,i){this.Nd=t,this.Stt=i}return t.prototype.pull=function(t){var i=this;return this.Nd.read().then((function(e){i.Stt&&i.Stt(e),e.done?t.close():t.enqueue(e.value)}))},t.prototype.cancel=function(t){return this.Nd.cancel(t)},t}();function bB(t,i){return i.constructor===t?i:new t(new EB(i.getReader()),{highWaterMark:0})}var LB=function(){function t(t,i){this.Itt=t,this.Ett=i}return t.prototype.pull=function(t){return this.Itt().then((function(i){t.enqueue(new T(i)),t.close()}))},t.prototype.cancel=function(t){this.Ett&&this.Ett(t)},t}();function kB(t,i,e){return new t(new LB(i,e),{highWaterMark:0})}var bi={searchParams:"URLSearchParams"in ke,iterable:"Symbol"in ke&&"iterator"in Symbol,blob:"FileReader"in ke&&!!DB,formData:"FormData"in ke,arrayBuffer:"ArrayBuffer"in ke,stream:IB(Sr),streamRequest:"Request"in ke&&"body"in ke.Request.prototype,streamResponse:"Response"in ke&&"body"in ke.Response.prototype,abort:"AbortController"in ke&&"Request"in ke&&"signal"in ke.Request.prototype,encoding:"TextEncoder"in ke&&"TextDecoder"in ke,url:"URL"in ke&&function(t){try{return new ke.URL(t).toString()===t}catch(t){return!1}}("http://example.com/"),firefox:"navigator"in ke&&/Firefox\//.test(ke.navigator.userAgent)};function CB(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new k("Invalid character in header field name");return t}function xB(t){return"string"!=typeof t&&(t=String(t)),t}function OB(t){var i={next:function(){var i=t.shift();return{done:void 0===i,value:i}}};return bi.iterable&&(i[Symbol.iterator]=function(){return i}),i}var jB=function(){function t(t){var i=this;this.Kf={};var e=function(t,e){Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(e,t)};!function(t){return t&&"function"==typeof t.forEach}(t)?!function(t){return bi.iterable&&t&&t[Symbol.iterator]}(t)?t&&_.getOwnPropertyNames(t).forEach((function(e){i.append(e,t[e])})):Array.from(t).forEach(e):t.forEach(e)}return t.prototype.append=function(t,i){t=CB(t),i=xB(i);var e=t.toLowerCase();if(this.Kf.hasOwnProperty(e)){var s=this.Kf[e],n=s[1];s[1]=n?n+", "+i:i}else this.Kf[e]=[t,i]},t.prototype.delete=function(t){var i=CB(t).toLowerCase();delete this.Kf[i]},t.prototype.get=function(t){var i=CB(t).toLowerCase();return this.Kf.hasOwnProperty(i)?this.Kf[i][1]:null},t.prototype.has=function(t){var i=CB(t).toLowerCase();return this.Kf.hasOwnProperty(i)},t.prototype.set=function(t,i){var e=(t=CB(t)).toLowerCase();this.Kf[e]=[t,xB(i)]},t.prototype.forEach=function(t,i){for(var e in this.Kf)this.Kf.hasOwnProperty(e)&&t.call(i,this.Kf[e][1],e,this)},t.prototype.keys=function(){var t=[];return this.forEach((function(i,e){t.push(e)})),OB(t)},t.prototype.values=function(){var t=[];return this.forEach((function(i){t.push(i)})),OB(t)},t.prototype.entries=function(){var t=[];return this.forEach((function(i,e){t.push([e,i])})),OB(t)},t.prototype.asList=function(){var t=[];for(var i in this.Kf)if(this.Kf.hasOwnProperty(i)){var e=this.Kf[i],s=e[0],n=e[1];t.push([s,n])}return t},t}();function zB(){}bi.iterable&&(jB.prototype[Symbol.iterator]=jB.prototype.entries);var PB,BB,Fn,RB=x.min,UB=String.fromCharCode,QB=16384;function FB(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return function(t){for(var i=t.length,e=[],s=0;s<i;s+=QB){var n=RB(s+QB,i);e.push(UB.apply(null,t.slice(s,n)))}return e.join("")}(i)}function YB(t){if(t>=55296&&t<=57343)throw new b("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function GB(t,i){return t>>i&63|128}function VB(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(YB(t),i.push(t>>12&15|224),i.push(GB(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(GB(t,12)),i.push(GB(t,6))),i.push(63&t|128)):i.push(t)}function WB(){if(Fn>=BB)throw new b("Invalid byte index");var t=255&PB[Fn];if(Fn++,128==(192&t))return 63&t;throw new b("Invalid continuation byte")}function HB(){var t,i;if(Fn>BB)throw new b("Invalid byte index");if(Fn===BB)return!1;if(t=255&PB[Fn],Fn++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|WB())>=128)return i;throw new b("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|WB()<<6|WB())>=2048)return YB(i),i;throw new b("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|WB()<<12|WB()<<6|WB())>=65536&&i<=1114111)return i;throw new b("Invalid UTF-8 detected")}var qB=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];function XB(t){return t&&URLSearchParams.prototype.isPrototypeOf(t)}function ZB(t){return t&&ArrayBuffer.prototype.isPrototypeOf(t)}function KB(t){return t&&DataView.prototype.isPrototypeOf(t)}var ko,JB=ArrayBuffer.isView||function(t){return t&&(qB.indexOf(_.prototype.toString.call(t))>-1||KB(t))};function $B(t){if(t.bodyUsed)return Promise.reject(new k("Already used"));t.bodyUsed=!0}function tR(t){return new Promise((function(i,e){t.onload=function(){i(t.result)},t.onerror=function(){e(t.error)}}))}function iR(t){return bi.encoding?new ke.TextDecoder("utf-8").decode(new T(t)):FB(function(t){BB=(PB=t).length,Fn=0;for(var i,e=[];!1!==(i=HB());)e.push(i);return e}(new T(t)))}function eR(t){return bi.encoding?(new ke.TextEncoder).encode(t).buffer:new T(function(t){for(var i=[],e=0,s=t;e<s.length;e++)VB(s[e],i);return i}(function(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}(t))).buffer}function sR(t){var i=t.getReader(),e=[],s=function(t){var n=t.done,r=t.value;return n?Promise.resolve(e):(e.push(r),i.read().then(s))};return i.read().then(s)}function nR(t){return sR(t).then((function(t){return function(t){for(var i=0,e=0,s=t;e<s.length;e++)i+=(a=s[e]).byteLength;for(var n=new T(i),r=0,h=0,o=t;h<o.length;h++){var a=o[h];n.set(a,r),r+=a.byteLength}return n}(t).buffer}))}function rR(t){return t.slice?t.slice(0):hR(new T(t))}function hR(t){if(t.slice)return t.slice(0).buffer;var i=new T(t.byteLength);return i.set(new T(t.buffer,t.byteOffset,t.byteLength)),i.buffer}function oR(t){var i=new FormData;return t.trim().split("&").forEach((function(t){if(t){var e=t.split("="),s=e.shift().replace(/\+/g," "),n=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(s),decodeURIComponent(n))}})),i}function aR(t){var i=t;if(i.bodyUsed)throw new k("Already used");if(i.btt===ko.Ltt){if(!i.ktt.tee)throw new b("could not clone ReadableStream body");var e=i.ktt.tee(),s=e[0],n=e[1];return i.body=s,i.ktt=s,i.Ctt=s,n}return i.btt===ko.OI?rR(i.ktt):i.btt===ko.xG?i.ktt.then(aR):i.Ctt}!function(t){t[t.Ru=0]="Ru",t[t.xtt=1]="xtt",t[t.Ott=2]="Ott",t[t.OI=3]="OI",t[t.Ltt=4]="Ltt",t[t.xG=5]="xG"}(ko||(ko={}));var uR=function(){function t(i,e){this.bodyUsed=!1;var s=this;if(this.Ctt=i||null,i)if("string"==typeof i)this.btt=ko.Ru,this.ktt=i;else if(function(t){return t&&"function"==typeof t.then}(i))this.btt=ko.xG,this.ktt=Promise.resolve(i).then((function(i){return new t(i,e)})),this.ktt.catch(zB);else if(bi.blob&&function(t){return t&&Blob.prototype.isPrototypeOf(t)}(i))this.btt=ko.xtt,this.ktt=i;else if(bi.formData&&function(t){return t&&FormData.prototype.isPrototypeOf(t)}(i))this.btt=ko.Ott,this.ktt=i;else if(bi.searchParams&&XB(i))this.btt=ko.Ru,this.ktt=i.toString();else if(bi.arrayBuffer&&(ZB(i)||JB(i)))KB(i)&&(this.Ctt=function(t){return new T(t.buffer,t.byteOffset,t.byteLength)}(i)),this.btt=ko.OI,this.ktt=function(t){return ZB(t)?rR(t):hR(t)}(i);else{if(!bi.stream||!SB(i))throw new b("unsupported BodyInit type");i=bB(Sr,i),this.btt=ko.Ltt,this.ktt=i,this.Ctt=i}else this.btt=ko.Ru,this.ktt="";this.jtt="",e.has("content-type")?this.jtt=(e.get("content-type")||"").toLowerCase():("string"==typeof i?this.jtt="text/plain;charset=UTF-8":s.btt===ko.xtt&&s.ktt.type?this.jtt=s.ktt.type:bi.searchParams&&XB(i)&&(this.jtt="application/x-www-form-urlencoded;charset=UTF-8"),this.jtt&&e.set("content-type",this.jtt)),bi.stream&&(null==i?this.body=null:s.btt===ko.Ltt?this.body=s.ktt:this.body=kB(Sr,(function(){return s.arrayBuffer()}),(function(){s.bodyUsed=!0})))}return t.prototype.text=function(){var t=this,i=$B(t);return i||(t.btt===ko.xtt?function(t){var i=new FileReader,e=tR(i);return i.readAsText(t),e}(t.ktt):t.btt===ko.OI?Promise.resolve(t.ktt).then(iR):t.btt===ko.Ltt?function(t){return nR(t).then(iR)}(t.ktt):t.btt===ko.xG?t.ktt.then((function(t){return t.text()})):t.btt===ko.Ott?Promise.reject(new b("could not read FormData body as text")):Promise.resolve(t.ktt))},t.prototype.json=function(){return this.text().then(JSON.parse)},t}();bi.blob&&(uR.prototype.blob=function(){var t=this,i=$B(t);return i||(t.btt===ko.xtt?Promise.resolve(t.ktt):t.btt===ko.OI?Promise.resolve(DB([t.ktt],{type:t.jtt})):t.btt===ko.Ltt?function(t,i){return sR(t).then((function(t){return DB(t,{type:i||""})}))}(t.ktt,t.jtt):t.btt===ko.xG?t.ktt.then((function(t){return t.blob()})):t.btt===ko.Ott?Promise.reject(new b("could not read FormData body as Blob")):Promise.resolve(DB([t.ktt],{type:t.jtt})))}),bi.arrayBuffer&&(uR.prototype.arrayBuffer=function(){var t=this;return t.btt===ko.OI?$B(t)||Promise.resolve(t.ktt):t.btt===ko.xtt?$B(t)||function(t){var i=new FileReader,e=tR(i);return i.readAsArrayBuffer(t),e}(t.ktt):t.btt===ko.Ltt?nR(t.ktt):t.btt===ko.xG?$B(t)||t.ktt.then((function(t){return t.arrayBuffer()})):t.btt===ko.Ott?Promise.reject(new b("could not read FormData body as ArrayBuffer")):Promise.resolve(t.ktt).then(eR)}),bi.formData&&(uR.prototype.formData=function(){var t=this;return t.btt===ko.Ott?$B(t)||Promise.resolve(t.ktt):t.text().then(oR)});var cR=[301,302,303,307,308],lR=function(t){function i(i,e){var s=this,n=new jB((e=e||{}).headers);return(s=t.call(this,i||null,n)||this).type="default",s.status=void 0===e.status?200:e.status,s.ok=s.status>=200&&s.status<300,s.statusText=void 0!==e.statusText?String(e.statusText):"",s.headers=n,s.url=e.url||"",s}return NB(i,t),i.prototype.clone=function(){return new i(aR(this),{status:this.status,statusText:this.statusText,headers:new jB(this.headers),url:this.url})},i.error=function(){var t=new i(null,{status:0,statusText:""});return t.type="error",t},i.redirect=function(t,e){if(-1===cR.indexOf(e))throw new RangeError("Invalid status code");return new i(null,{status:e,headers:{location:t}})},i}(uR);var dR=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){function e(t,i){if(!(t instanceof i))throw new k("Cannot call a class as a function")}function s(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}function n(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}function r(t){return(r=_.setPrototypeOf?_.getPrototypeOf:function(t){return t.__proto__||_.getPrototypeOf(t)})(t)}function o(t,i){return(o=_.setPrototypeOf||function(t,i){return t.__proto__=i,t})(t,i)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,i,e){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,i,e){var s=function(t,i){for(;!_.prototype.hasOwnProperty.call(t,i)&&null!==(t=r(t)););return t}(t,i);if(s){var n=_.getOwnPropertyDescriptor(s,i);return n.get?n.get.call(e):n.value}},c(t,i,e||t)}_.defineProperty(i,"__esModule",{value:!0});var l=function(){function t(){e(this,t),_.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(t,i){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(i)}},{key:"removeEventListener",value:function(t,i){if(t in this.listeners)for(var e=this.listeners[t],s=0,n=e.length;s<n;s++)if(e[s]===i)return void e.splice(s,1)}},{key:"dispatchEvent",value:function(t){var i=this;if(t.type in this.listeners){for(var e=function(e){u((function(){return e.call(i,t)}))},s=this.listeners[t.type],n=0,r=s.length;n<r;n++)e(s[n]);return!t.defaultPrevented}}}]),t}(),d=function(t){function i(){var t;return e(this,i),t=function(t,i){return!i||"object"!=typeof i&&"function"!=typeof i?a(t):i}(this,r(i).call(this)),t.listeners||l.call(a(t)),_.defineProperty(a(t),"aborted",{value:!1,writable:!0,configurable:!0}),_.defineProperty(a(t),"onabort",{value:null,writable:!0,configurable:!0}),t}return function(t,i){if("function"!=typeof i&&null!==i)throw new k("Super expression must either be null or a function");t.prototype=_.create(i&&i.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),i&&o(t,i)}(i,t),n(i,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),c(r(i.prototype),"dispatchEvent",this).call(this,t)}}]),i}(l),f=function(){function t(){e(this,t),_.defineProperty(this,"signal",{value:new d,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(i){void 0!==h?h.createEvent?(t=h.createEvent("Event")).initEvent("abort",!1,!1):(t=h.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(f.prototype[Symbol.toStringTag]="AbortController",d.prototype[Symbol.toStringTag]="AbortSignal"),i.AbortSignal=d,i.AbortController=f,i.default=f}));!function(t){t&&t.__esModule&&_.prototype.hasOwnProperty.call(t,"default")&&t.default}(dR);dR.AbortSignal;var fR=dR.AbortController,_R=ke.DOMException;try{new _R}catch(g){(_R=function(t,i){b.call(this,t),this.name=i||"Error",b.captureStackTrace&&b.captureStackTrace(this,this.constructor)}).prototype=_.create(b.prototype),_R.prototype.constructor=_R}var gR=fR;function wR(t,i){if(!t.signal.aborted)if(i.aborted)t.abort();else{var e=function(){i.removeEventListener("abort",e),t.signal.removeEventListener("abort",e),t.abort()};i.addEventListener("abort",e),t.signal.addEventListener("abort",e)}}function AR(t,i,e){return new Promise((function(s,n){if(i.signal.aborted)return t.catch(zB),n(vR());var r=function(){i.signal.removeEventListener("abort",r),n(vR())};i.signal.addEventListener("abort",r),t.then((function(t){i.signal.removeEventListener("abort",r),s(t),e&&i.abort()}),(function(t){i.signal.removeEventListener("abort",r),n(t),e&&i.abort()}))}))}function vR(){return new _R("Aborted","AbortError")}var mR,pR="moz-chunked-arraybuffer";function yR(t){try{var i=new hd;return i.open("GET","https://test"),i.responseType=t,i.responseType===t}catch(t){}return!1}!function(t){t[t.UNSENT=0]="UNSENT",t[t.OPENED=1]="OPENED",t[t.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",t[t.LOADING=3]="LOADING",t[t.DONE=4]="DONE"}(mR||(mR={}));var MR=function(){function t(t,i){var e=this;this.ztt=!1,this.pI=t,this.Ptt=i,this.Btt=new hd,this.Rtt=new Promise((function(t,i){e.Utt=t,e.Qtt=i}))}return t.prototype.send=function(){var t=this;return this.Ftt().then((function(i){return t.Ytt(i,t.Ptt),t.Rtt}))},t.prototype.Ftt=function(){var t=this.pI;return t.btt===ko.Ltt?t.arrayBuffer():Promise.resolve(t.Ctt)},t.prototype.Gtt=function(t){this.pI.onprogress&&this.pI.onprogress(t.loaded,t.lengthComputable?t.total:void 0)},t.prototype.Vtt=function(t){this.Qtt(t)},t.prototype.Aq=function(){this.Vtt(new k("Network request failed"))},t.prototype.Wtt=function(){this.Vtt(new k("Network request failed"))},t.prototype.Htt=function(){this.Vtt(vR())},t.prototype.Ytt=function(t,i){var e=this,s=this.pI,n=this.Btt,r=function(){return e.qtt()};if(s.signal.aborted)return this.Htt();n.onreadystatechange=function(){if(n.readyState>=mR.HEADERS_RECEIVED&&!e.ztt){var t=function(t){var i=new jB;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var e=t.split(":"),s=e.shift().trim();if(s){var n=e.join(":").trim();i.append(s,n)}})),i}(n.getAllResponseHeaders()||""),i={status:n.status,statusText:n.statusText,headers:t,url:n.responseURL||t.get("X-Request-URL")};e.ztt=!0,e.Xtt(i)}},n.onprogress=function(t){return e.Gtt(t)},n.onload=function(){return e.Ztt()},n.onerror=function(){return e.Aq()},n.ontimeout=function(){return e.Wtt()},n.onabort=function(){return e.Htt()},n.open(s.method,s.url,!0),n.withCredentials="include"===s.credentials,"responseType"in n&&i&&(n.responseType=i),s.headers.forEach((function(t,i){n.setRequestHeader(i,t)})),s.signal.addEventListener("abort",r),n.onloadend=function(){s.signal.removeEventListener("abort",r)},t?n.send(t):n.send()},t.prototype.qtt=function(){this.Htt(),this.Btt.abort()},t}(),TR=function(t){function i(i,e){var s=t.call(this,i,e)||this;return s.Ktt=void 0,s.Jtt=void 0,s}return NB(i,t),i.prototype.Xtt=function(t){var i=this;this.Ktt=new Promise((function(t,e){i.Jtt=t,i.$tt=e})),this.Utt(new lR(this.Ktt,t))},i.prototype.Ztt=function(){var t=this.Btt.response;if(null==t){var i=this.Ptt;""===i||"text"===i?t=this.Btt.responseText:"document"===i?t=this.Btt.responseXML:"arraybuffer"===i?t=new ArrayBuffer(0):"blob"===i&&(t=DB([]))}this.Jtt(t)},i.prototype.Vtt=function(i){t.prototype.Vtt.call(this,i),this.$tt&&this.$tt(i)},i}(MR),NR=function(t){function i(i){var e=t.call(this,i,pR)||this;return e.tit=void 0,e.iit=void 0,e.eit=!1,e}return NB(i,t),i.prototype.Xtt=function(t){var i=this;this.tit=new Sr({start:function(t){i.iit=t},cancel:function(){i.eit=!0,i.qtt()}}),this.Utt(new lR(this.tit,t))},i.prototype.Gtt=function(i){this.eit||this.iit.enqueue(new T(this.Btt.response)),t.prototype.Gtt.call(this,i)},i.prototype.Ztt=function(){this.iit.close()},i.prototype.Vtt=function(i){t.prototype.Vtt.call(this,i),this.iit&&!this.eit&&(this.eit=!0,this.iit.error(i))},i}(MR),DR=function(){var t=bi.firefox&&yR(pR);return DR=function(){return t},t},SR=function(){var t;return t=bi.arrayBuffer&&yR("arraybuffer")?"arraybuffer":bi.blob&&yR("blob")?"blob":"",SR=function(){return t},t};function IR(t){return(bi.stream&&DR()?new NR(t):new TR(t,SR())).send()}var ER=ke.fetch,bR=ke.Request,LR=(ke.Response,ke.AbortController);var kR=["http:","https:"];var CR=function(){try{if(bi.streamRequest){var t=new bR("about:blank",{body:"",method:"POST"}).body;if(t&&IB(t.constructor))return t.constructor}}catch(t){}}();function xR(t){return(t instanceof jB?t:new jB(t)).asList()}function OR(t,i,e){var s;if(bi.stream){var n=void 0;if(bi.streamResponse){var r=t.body;n=r&&bB(Sr,r)}else n=kB(Sr,(function(){return AR(t.arrayBuffer(),i,!0)}),(function(){i.abort()}));n&&e&&(n=function(t,i,e){var s=0,n=function(t){var n=t.done,r=t.value;n?e=void 0===e?s:e:s+=r.byteLength,i(s,e)};return function(t,i,e){return new t(new EB(i.getReader(),e),{highWaterMark:0})}(Sr,t,n)}(n,e,jR(t.headers))),s=n}else{var h=AR(t.arrayBuffer(),i,!0);e&&(h=function(t,i,e){return Promise.resolve().then((function(){return i(0,e),t})).then((function(t){var s=t.byteLength;return i(s,e=void 0===e?s:e),t}))}(h,e,jR(t.headers))),s=h}return new lR(s,t)}function jR(t){return t.has("content-length")?Number(t.get("content-length")):void 0}function zR(t){var i=new gR;return t.signal&&wR(i,t.signal),function(t,i){var e,s,n=t;if(e=n.btt===ko.Ltt?bi.streamRequest&&CR?Promise.resolve(bB(CR,n.ktt)):AR(t.arrayBuffer(),i,!1):AR(Promise.resolve(t.Ctt),i,!1),bi.abort){var r=new LR;wR(r,i.signal),s=r.signal}return e.then((function(i){return new bR(t.url,{body:i||void 0,credentials:t.credentials,headers:xR(t.headers),method:t.method,mode:t.mode,referrer:t.referrer,referrerPolicy:t.referrerPolicy,signal:s})}))}(t,i).then((function(e){return ER(e).then((function(e){return OR(e,i,t.onprogress)}))}))}var PR=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];var BR=function(t){function i(e,s){var n,r,h,o,a,u,c,l,d,f=this,_=(s=s||{}).body||null;if(e instanceof i){if(e.bodyUsed)throw new k("Already used");n=e.url,r=e.credentials,s.headers||(h=new jB(e.headers)),o=e.method,a=e.mode,u=e.referrer,c=e.referrerPolicy,l=e.signal,d=e.onprogress,_||null==e.Ctt||(_=e.Ctt,e.bodyUsed=!0)}else n=String(e),r="same-origin",o="GET",a="cors",u="about:client",c="",l=null,d=null;if(!s.headers&&h||(h=new jB(s.headers)),s&&(u="about:client",c=""),(f=t.call(this,_,h)||this).url=n,f.headers=h,f.credentials=s.credentials||r,f.method=function(t){var i=t.toUpperCase();return PR.indexOf(i)>-1?i:t}(s.method||o),f.mode=s.mode||a,f.signal=s.signal||l||(new gR).signal,f.referrer=void 0!==s.referrer?s.referrer:u,f.referrerPolicy=void 0!==s.referrerPolicy?s.referrerPolicy:c,f.onprogress=s.onprogress||d,("GET"===f.method||"HEAD"===f.method)&&_)throw new k("Body not allowed for GET or HEAD requests");return f}return NB(i,t),i.prototype.clone=function(){return new i(this,{body:aR(this)})},i}(uR),RR="function"==typeof ER&&bi.stream&&bi.streamResponse&&bi.url;function UR(t,i){return new Promise((function(e){var s=new BR(t,i),n=RR&&function(t){try{return kR.indexOf(new ke.URL(t,ke.location.href).protocol)>=0}catch(t){return!1}}(s.url)?zR:IR;e(n(s))}))}UR.polyfill=!0;var QR=class{async sit(){const t=this.pI;let i,e;t.NI&&u((()=>{this.nit=!0,this.rO.c_()}),t.NI);try{i=UR(t.zu,{method:t.iE,headers:t.tE.BI(),body:t.$I,credentials:t.hE?"include":"same-origin",signal:GR(this.rO.a_),onprogress:t.oE})}catch(i){throw new MB(t,i)}try{e=await i}catch(t){const i=this.rit(t);throw Oi(i)&&this.rO.c_(),i}const s=e.url||t.zu,n=0===e.status&&"file:"===function(t){return ag.Dh(t).protocol}(s)?200:e.status,r=new FR(this,e,this.rO),h=new Hh({Cp:r,mI:t,eE:t.eE,tE:new Ko(e.headers.asList()),TI:n,Cj:e.statusText,_E:s});if(this.MI=h,mc(h))return h;throw new ve(h)}rit(t){return Oi(t)?this.nit?new ny(this.pI):new sa(t.message,t):this.MI?new ve(this.MI,t):new MB(this.pI,t)}constructor(t){this.rO=new Po,this.MI=void 0,this.nit=!1,this.pI=t,this.rO.l_(t.a_),this.yI=this.sit()}},FR=class t extends Ru{get zG(){return this.hit.bodyUsed}UG(){return this.QG.OL}fE(t){return this.FG(this.hit.text(),t)}qj(t){return this.FG(this.hit.arrayBuffer(),t)}OG(){const t=this.hit.body;return t?this.YG(t):nb(this.qj().then(sb),this.rO)}WG(){const i=this.hit.clone(),[e,s]=this.rO.d_();return this.rO=e,new t(this.oit,i,s)}FG(t,i){i&&this.rO.l_(i);let e=Promise.resolve(t).catch((t=>{throw this.oit.rit(t)}));return e=H(e,this.rO),this.QG.l_(e.then(xs)),e}YG(t){const i=new xh;let e=Promise.resolve(t.pipeTo(i.writable,{preventAbort:!0})).catch((t=>{const e=this.oit.rit(t);throw i.writable.abort(e).catch(xs),e}));return e=H(e,this.rO),this.QG.l_(e.then(xs)),i.readable}constructor(t,i,e){super(),this.QG=new No,this.oit=t,this.hit=i,this.rO=e,this.QG.OL.catch(xs)}},YR="abort";function GR(t){const i=new gR;if(t.$f)i.abort();else if(!t.t_){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(YR,e),t.r_(e),t.o_(s)};i.signal.addEventListener(YR,e),t.n_(e),t.h_(s)}return i.signal}var VR=class{mI(t){return new QR(t).yI}bY(t){if(By&&By.sendBeacon)By.sendBeacon(t.zu,pB([t.$I],{type:t.IP}));else{const i=t.IP?{"Content-type":t.IP}:void 0;W(this.mI(new nc({iE:Kc.POST,zu:t.zu,$I:t.$I,tE:i})))}}gn(){}};r(),r();var WR=class extends Jo{constructor(t){super("Invalid XML",t)}},HR=class{oI(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new WR(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new WR;return new tU(e)}},qR=class t{get VS(){return Np.HS}get hI(){var t;return null!=(t=this.ait.localName)?t:sU(this.ait.nodeName)}get l(){return this.ait.nodeName}get uit(){var t;return null!=(t=this.ait.namespaceURI)?t:void 0}get cit(){var t;return null!=(t=this.ait.prefix)?t:void 0}get IT(){return this.ait.nodeValue}GS(t){return this.ait.isEqualNode(t.ait)}KS(i){return new t(this.ait.cloneNode(i))}constructor(t){this.ait=t}},XR=class{get lI(){return void 0===this.dit&&(this.dit=function(t){const i=[];for(let e=0;e<t.length;e++){const s=eU(t.item(e));s&&i.push(s)}return i}(this.fit.childNodes)),this.dit}get m(){return this.lI.filter(iU)}nI(t){return this.lI.filter((i=>iU(i)&&i.Xj===t))}sI(t,i){return this.lI.filter((e=>iU(e)&&e.hI===i&&e.uit===t))}get PS(){return this.fit}dI(t){this.fit.appendChild(t.PS),this.dit&&this.dit.push(t)}GS(t){return this.fit.isEqualNode(t.PS)}constructor(t){this.dit=void 0,this.fit=t}},ZR=class t extends XR{get VS(){return Np.WS}get hI(){var t;return null!=(t=this.fit.localName)?t:sU(this.fit.nodeName)}get uit(){var t;return null!=(t=this.fit.namespaceURI)?t:void 0}get cit(){var t;return null!=(t=this.fit.prefix)?t:void 0}get Xj(){return this.fit.nodeName}get rI(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new qR(t.item(e)));return i}(this.fit.attributes)}get Fj(){return this.fit.textContent}cI(t){if(this.fit.hasAttribute(t))return this.fit.getAttribute(t)}uI(t,i){if(this.fit.hasAttributeNS(t,i))return this.fit.getAttributeNS(t,i)}tI(t){this.fit.removeAttribute(t)}_it(t,i){this.fit.removeAttributeNS(t,i)}git(t,i){this.fit.setAttribute(t,i)}wit(t,i,e){this.fit.setAttributeNS(t,i,e)}KS(i){return new t(this.fit.cloneNode(i))}constructor(t){super(t)}},KR=class{get Cp(){return this.fit.nodeValue}get PS(){return this.fit}GS(t){return this.Cp===t.Cp}constructor(t){this.fit=t}},JR=class t extends KR{get VS(){return Np.Ru}KS(i){return new t(this.fit.cloneNode(i))}constructor(t){super(t)}},$R=class t extends KR{get VS(){return Np.qS}KS(i){return new t(this.fit.cloneNode(i))}constructor(t){super(t)}},tU=class t extends XR{get VS(){return Np.XS}get aI(){return new ZR(this.fit.documentElement)}KS(i){return new t(this.fit.cloneNode(i))}constructor(t){super(t)}};function iU(t){return fs(t)}function eU(t){switch(t.nodeType){case Np.WS:return new ZR(t);case Np.Ru:return new JR(t);case Np.qS:return new $R(t)}}function sU(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){ag=t}(new class extends vB{get ytt(){return this.Ait||(this.Ait=new gN(nD())),this.Ait}get vit(){return this.mit}get HJ(){return this.pit}get c$(){return this.yit}get Mit(){return!1}get Lz(){return ci.QQ()}get Tit(){return{Nit:yB}}get Dit(){return nd.connection&&nd.connection.effectiveType||MS}get Sit(){return nd.connection&&nd.connection.type||"unknown"}get KO(){return this.Iit||(this.Iit=new Mb(new VR)),this.Iit}oI(t){return this.Eit.oI(t)}constructor(...t){super(...t),this.Ait=void 0,this.mit=function(){if(li.KE)return!1;try{return"body"in self.Response.prototype}catch(t){return!1}}(),this.pit=li.Kb||li.KE,this.yit=(li.Kb||li.KE)&&!(li.mb&&li.yb<3),this.Iit=void 0,this.Eit=new HR}}),r(),r();var nU=class{get j_(){const t=this.Qo.currentTime;return"number"==typeof t&&isFinite(t)?t:"now"}get Lit(){return this.Qo.src||""}Zn(){}constructor(t,i){this.kit=!1,this.Cit=t=>{this.xit.mY(t.error,this.j_)},this.Oit=()=>{this.xit.wY(this.Lit),this.Qo.removeEventListener("playing",this.Oit),this.kit=!1},this.js=()=>{this.kit||(this.Qo.addEventListener("playing",this.Oit),this.kit=!0)},this.xit=i,this.Qo=t,this.Qo.addEventListener("error",this.Cit),this.Qo.addEventListener("sourcechange",this.js),this.js()}};!function(t){xj.push(t)}((function(t){new nU(t.va,t.j9)})),r();var rU="theoplayer-stored-volume",hU="theoplayer-stored-mutedstate";tr((function(t){return class extends t{J_(t){this.wd.persistVolume&&vt.xz(hU,""+Boolean(t)),super.J_(t)}jg(t){this.wd.persistVolume&&vt.xz(rU,""+Number(t)),super.jg(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=vt.XW(rU);(void 0===t||j(t))&&(t=1);const i=vt.ZW(hU)||!1;this.xg=t,this.Z_=i}}}}),iu.Za);var oU="6.10.1",aU="2024.1.2",uU=Pj.va,cU=Pu.Mm.registerContentProtectionIntegration.bind(Pu.Mm);r(),r(),r();var lU={zY(t){Ys.addEventListener("beforeunload",t)},CY(t){Ys.removeEventListener("beforeunload",t)}};!function(t){jy=t.jit,zy=t.zit,ps=t.Pit,Ys=t.Bit,Py=Ys&&Ys.location,By=Ys&&Ys.navigator}({jit:class{get pR(){const t=[];for(const i of this.Rit){const e=this.Uit.get(i);if(e){const i=e.map((t=>t.Qit));t.push(...i)}}return this.Fit&&t.push(this.Fit),t}MR(t){for(const i of this.pR)i.y3(t)}oB(t){const i=H_(this.Uit.get(t),(t=>t.Yit));if(i)return i.Yit=!1,i.Qit}Git(t){if(!this.Fit){var i;const t=null==(i=this.Uit.get(iv.vp))?void 0:i[0].Qit.pP;if(!t)throw new b("Error creating iOS Safari MediaController");this.Fit=new lj(t,this.Cx)}return this.Fit}async YP(t){const i=t.pP,e=i.tagName.toLowerCase();await t.Zn(),_j(i);const s=H_(this.Uit.get(e)||[],(i=>t===i.Qit));s&&(s.Yit=!0)}wR(){for(const t of this.pR)t.m3()}gn(){for(const t of this.pR){const i=t.pP;t.e_(),_j(i),ei(i)}this.Uit.clear(),this.Fit=void 0}Vit(){for(const t of this.Rit){const i=[];this.Uit.set(t,i);for(let e=0;e<this.Wit;e++){const e=fj(t),s=t===iv.mp?new Px(e,this.Cx,this.Wu):new sj(e,this.Cx,this.Wu,this.mR);i.push({Qit:s,Yit:!0})}}}constructor(t,i,e=2,s=dj,n=nD()){this.Wit=e,this.Rit=[...s],this.Cx=n,this.Wu=t,this.mR=i,this.Uit=Qt(),this.Vit()}},zit:class t{b7(t){return this.Hit.nO((()=>this.qit(t)))}Yg(){this.AR.wR()}async qit(i){const e=this.AR.oB(iv.vp),s=e.pP,n=await t.Xit(s,i);return await this.AR.YP(e),n}static async Xit(i,e){return li.Tb||li.mb?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.Zit(),!e&&await t.Kit(i,!1)?"all":await t.Kit(i,!0)?"muted":"none")}static async Kit(t,i){t.muted=i;const e=t.play();try{if(!pu(e))return!li.Qs;const t=be(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static Zit(){return new Promise((t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)}))}gn(){this.Hit.gn()}constructor(t){this.AR=t,this.Hit=new Vi}},Pit:lU,Bit:s}),r(),r(),r(),r();var dU=class t{async aB(i){if(!Lv(i.type))return!1;const e=i.contentProtection;if(e&&!av(e)){if(!Ps(e))return!1;if(!await t.Jit(e))return!1}return!0}static async Jit(t){return!(!t.playready||!await ag.Ix())||(!(!t.widevine||!await ag.Nx())||(!(!t.clearkey||!await ag.Sx())||!!await ag.xx()))}},fU=class extends dU{async aB(t){return!!bk(t.useManagedMediaSource)&&super.aB(t)}};function Ti(t){return xa(t)}function _U(t,i){const e=xa(t);return i?""+e+i:""+e}r(),r();var St=class{async $it(t){return(await this.iet.tet(t.map(Ti))).shift()}eet(t,i){const e=_U(t,i);return this.net.IL(e)}async ret(t,i){var e;const s=_U(t,i);return null==(e=await this.het.EL(s))?void 0:e.data}iH(t){return this.oet.EL(t)}constructor(t,i,e,s){this.iet=t,this.net=i,this.het=e,this.oet=s}};r(),r(),r();var gU=class{aet(t){return Promise.resolve(!1)}uet(t){return Promise.reject(wU)}cet(t){return Promise.reject(wU)}IL(t){return Promise.resolve(!1)}EL(t){return Promise.resolve(void 0)}let(t,i){return Promise.resolve(void 0)}tet(t){return Promise.resolve([])}det(){return Promise.resolve([])}fet(t){return Promise.resolve([])}_et(t,i){return Promise.resolve([])}pN(t){return Promise.reject(wU)}wet(t){return Promise.reject(wU)}Aet(){return Promise.reject(wU)}},wU="Storage disabled",AU=class t{static M8(){return Promise.resolve(new t)}vet(t){return Promise.reject(vU)}constructor(){this.met=new gU,this.pet=new gU,this.yet=new gU,this.Met=new gU,this.Tet=new gU}},vU="Storage disabled";r(),r(),r();var ye,kn=class{get Net(){return this.u_.OL}async aet(t){return(this.Det||await this.Net).aet(t)}async uet(t,i){return(this.Det||await this.Net).uet(t,i)}async cet(t,i){return(this.Det||await this.Net).cet(t,i)}async IL(t){return(this.Det||await this.Net).IL(t)}async EL(t){return(this.Det||await this.Net).EL(t)}async let(t,i){return(this.Det||await this.Net).let(t,i)}async tet(t){return(this.Det||await this.Net).tet(t)}async det(){return(this.Det||await this.Net).det()}async fet(t){return(this.Det||await this.Net).fet(t)}async _et(t,i){return(this.Det||await this.Net)._et(t,i)}async pN(t){return(this.Det||await this.Net).pN(t)}async wet(t){return(this.Det||await this.Net).wet(t)}async Aet(){return(this.Det||await this.Net).Aet()}constructor(t){this.u_=new No,this.Det=void 0,this.u_.l_(t),this.u_.OL.then((t=>{this.Det=t}))}},mU=class{get Iet(){return this.u_.OL}async vet(t){const i=this.Eet||await this.Iet;return await i.vet(t)}constructor(t){this.u_=new No,this.Eet=void 0,this.u_.l_(t);const i=this.u_.OL;i.then((t=>{this.Eet=t})),this.pet=new kn(i.then((t=>t.pet))),this.met=new kn(i.then((t=>t.met))),this.yet=new kn(i.then((t=>t.yet))),this.Met=new kn(i.then((t=>t.Met))),this.Tet=new kn(i.then((t=>t.Tet)))}};function ft(t){return new b("This storage cannot handle persistency type "+t)}r(),r(),r(),function(t){t.bet="readonly",t.Let="readwrite"}(ye||(ye={}));var Hs=class{aet(t){return Promise.resolve("temporary"===t)}uet(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(ft(i)):(this.ket(t.key),this.vk.push(t),Promise.resolve())}cet(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(ft(i));for(const i of t)this.ket(i.key);for(const i of t)this.vk.push(i);return Promise.resolve()}IL(t){return Promise.resolve(Boolean(this.Cet(t)))}EL(t){return Promise.resolve(this.Cet(t))}let(t,i){return Promise.resolve(this.xet(t,i))}tet(t){const i=t?t.map((t=>this.Cet(t))):this.vk;return Promise.resolve(i.filter(j_))}det(){return Promise.resolve([...this.vk])}fet(t){return this._et(t,"key")}_et(t,i){const e=this.vk.filter((e=>e[i]===t));return Promise.resolve(e)}pN(t){return this.ket(t),Promise.resolve()}wet(t){for(const i of t)this.ket(i);return Promise.resolve()}Aet(){return Ri(this.vk),Promise.resolve()}Cet(t){return this.xet(t,"key")}xet(t,i){for(const e of this.vk)if(e[i]===t)return e}ket(t){const i=this.Cet(t);i&&Et(this.vk,i)}constructor(){this.vk=[]}},pU=class t{static M8(){return Promise.resolve(new t)}vet(t){return t(this)}constructor(){this.met=new Hs,this.pet=new Hs,this.yet=new Hs,this.Met=new Hs,this.Tet=new Hs}};r(),r();var yU=class{async aet(t){for(let i of this.Oet)if(await i.aet(t))return!0;return!1}async uet(t,i){void 0===i&&(i="persistent");for(let e of this.Oet)if(await e.aet(i))return e.uet(t);throw ft(i)}async cet(t,i){void 0===i&&(i="persistent");for(let e of this.Oet)if(await e.aet(i))return e.cet(t);throw ft(i)}async IL(t){for(let i of this.Oet)if(await i.IL(t))return!0;return!1}async EL(t){for(let i of this.Oet){const e=await i.EL(t);if(e)return e}}async let(t,i){for(let e of this.Oet){const s=await e.let(t,i);if(s)return s}}async tet(t){const i=[];for(let e of this.Oet)i.push(...await e.tet(t));return i}async det(){const t=[];for(let i of this.Oet)t.push(...await i.det());return t}async fet(t){const i=[];for(let e of this.Oet)i.push(...await e.fet(t));return i}async _et(t,i){const e=[];for(let s of this.Oet)e.push(...await s._et(t,i));return e}async pN(t){for(let i of this.Oet)await i.pN(t)}async wet(t){for(let i of this.Oet)await i.wet(t)}async Aet(){for(let t of this.Oet)await t.Aet()}constructor(t){this.Oet=t}};function MU(t){return async()=>{const i=await Promise.all(t.map((t=>t())));return TU.M8(i)}}var Q,TU=class t{static M8(i){return Promise.resolve(new t(i))}get Met(){return this.jet}get Tet(){return this.zet}get yet(){return this.Pet}get met(){return this.Bet}get pet(){return this.Ret}vet(i){if(0===this.Uet.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this.Uet.length?this.Uet[s].vet(n):i(new t(e)));return this.Uet[s].vet(n)}constructor(t){this.Uet=t,this.jet=new yU(t.map((t=>t.Met))),this.zet=new yU(t.map((t=>t.Tet))),this.Pet=new yU(t.map((t=>t.yet))),this.Bet=new yU(t.map((t=>t.met))),this.Ret=new yU(t.map((t=>t.pet)))}},NU=class{M8(){return new mU(this.Qet())}async Qet(){this.Fet&&(await Promise.resolve(),this.Fet=!1);for(const t of this.Yet)try{return await MU([pU.M8,t])()}catch(t){}return await MU([pU.M8,this.Get])()}wa(t){if(!this.Fet)throw new b("Registration overdue");this.Yet.push(t)}constructor(t){this.Yet=[],this.Fet=!0,this.Get=t}},ti=class t{static wa(i){t.$z.wa(i)}static get dL(){return t.Vet||(t.Vet=t.$z.M8()),t.Vet}};function DU(t){return void 0!==t.Sg}ti.$z=new NU(AU.M8),ti.Vet=void 0,r(),r(),r(),r(),r(),r(),function(t){t.bO="static",t.LO="dynamic"}(Q||(Q={})),r(),r();var SU,IU=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,EU=class t{static wy(i){const e=i.match(IU);if(!e)throw new b("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=Number(e[4])||0,o=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*h+60*o+a)}get Wet(){return aa.dS(this.Het,1e3)}qet(){return this.Het}Xet(){return 1e3*this.Het}constructor(t){this.Het=t}};r(),function(t){t.Zet="progressive",t.Ket="interlaced",t.KT="unknown"}(SU||(SU={})),r();var bU=class{cD(){return this.Jet/this.$et}constructor(t,i){this.Jet=t,this.$et=i}},LU=/^(?:true|false)$/i,kU=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function Re(t){if(void 0!==t)return EU.wy(t)}function CU(t){if(void 0===t)return;const i=t.match(kU);if(!i)throw new b("The given value could not be parsed as a valid Date");const[,e,s,n,r,h,o,a,u,c,l,d]=i,f=("-"===e?-1:1)*Number(s),_=Number(n)-1,g=Number(r),w=Number(h);let A=Number(o);const v=Number(a),m=Number("0."+(u||"")),p=x.round(1e3*m);if(c){A-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const y=new Date(Date.UTC(f,_,g,w,A,v,p));if(j(y.getTime()))throw new b("The given value could not be parsed as a valid Date");return y}function xU(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[D(i[1]),D(i[2])]:void 0}function OU(t){if(void 0!==t){if(!j(Number(t)))try{return Se.fromString(t,!0)}catch(t){}throw new b("The given value could not be parsed as a valid unsigned long")}}function D(t){if(void 0===t)return;const i=Number(t);if(!j(i))return i;throw new b("The given value could not be parsed as a valid Number")}function jU(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!j(e)&&!j(s))return new bU(e,s);throw new b("The given value could not be parsed as a valid frame rate")}function Oa(t){if(void 0!==t){if(LU.test(t))return"true"===t.toLowerCase();if(!j(C(t)))return Boolean(C(t));throw new b("The given value could not be parsed as a valid Boolean.")}}function zU(t){return{zu:t.Fj,tst:Oa(t.cI("availabilityTimeComplete")),ist:D(t.cI("availabilityTimeOffset"))}}function PU(t){return t.map(zU)}function BU(t){const i=qU(t),e=function(t,i,e,s){let n=t.uI(e,i);return void 0===n&&(n=t.cI(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=jp(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=Ta(n.Fj)),!s){const i=jp(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=mi(t.Fj),e=new T([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,n=12+e.length+4+s,r=new ArrayBuffer(n),h=new T(r),o=new DataView(r),a=new Vr;eu(o,a,n),eu(o,a,1886614376),eu(o,a,0),DA(o,a,e),eu(o,a,s),DA(o,a,i),!1;return h.buffer}(i))}return{pj:e,sst:s,nst:i.nst,IT:i.IT}}function RU(t){return{rst:t.cI("sourceURL"),hst:xU(t.cI("range"))}}function UU(t,i){const e=t.cI("d"),s=t.cI("t"),n=D(t.cI("r"));i.push({ct:e,zN:s,ost:n})}function QU(t){return{ast:t.cI("index"),ust:xU(t.cI("indexRange")),Fy:t.cI("media"),cst:xU(t.cI("mediaRange"))}}function FU(t){const i=GU(t),e=function(t){const i=t.map(QU);return i.length>0?i:void 0}(t.nI("SegmentURL"));return oe({},i,{lst:e,dst:t.cI("xlink:href"),fst:t.cI("xlink:actuate")})}function YU(t){const i=Oa(t.cI("availabilityTimeComplete")),e=D(t.cI("availabilityTimeOffset")),s=xU(t.cI("indexRange")),n=Oa(t.cI("indexRangeExact")),r=t.nI("Initialization");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.Xj+" element can not have more than one Initialization element.");const h=1===r.length?RU(r[0]):void 0,o=OU(t.cI("presentationTimeOffset")),a=t.nI("RepresentationIndex");if(a.length>1)throw new b("The provided MPEG-DASH document's "+t.Xj+" element can not have more than one RepresentationIndex element.");return{tst:i,ist:e,ust:s,_st:n,gst:h,wst:o,Ast:1===a.length?RU(a[0]):void 0,vst:Re(t.cI("timeShiftBufferDepth")),zy:D(t.cI("timescale"))}}function GU(t){const i=YU(t),e=t.nI("BitstreamSwitching"),s=e.length>0?RU(e[0]):void 0,n=D(t.cI("duration")),r=t.nI("SegmentTimeline");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.Xj+" element can not have more than one SegmentTimeline element.");const h=1===r.length?function(t){const i=[],e=t.nI("S");for(const t of e)UU(t,i);return i}(r[0]):void 0;return oe({},i,{mst:s,ct:n,pst:h,yst:D(t.cI("startNumber")),Mst:D(t.cI("endNumber"))})}function VU(t){return{Tst:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(D)):1===i.length?i.map(D)[0]:void 0}(t.cI("audioSamplingRate")),Nst:t.cI("codecs"),Dst:Oa(t.cI("codingDependency")),Sst:function(t){if(0!==t.length)return t.map(BU)}(t.nI("ContentProtection")),Ist:function(t){return t.map(XU)}(t.nI("EssentialProperty")),Est:jU(t.cI("frameRate")),Ti:D(t.cI("height")),bst:D(t.cI("maxPlayoutRate")),Lst:D(t.cI("maximumSAPPeriod")),dY:t.cI("mimeType"),kst:t.cI("profiles"),Cst:t.cI("sar"),xst:function(t){switch(t){case SU.Zet:case SU.Ket:case SU.KT:return t;default:return}}(t.cI("scanType")),Ost:t.cI("segmentProfiles"),jst:D(t.cI("startWithSAP")),ji:D(t.cI("width"))}}function WU(t){const i=PU(t.nI("BaseURL")),e=t.nI("SegmentBase");if(e.length>1)throw new b("The provided MPEG-DASH document's "+t.hI+" element can not have more than one SegmentBase element.");const s=1===e.length?YU(e[0]):void 0,n=function(t){const i=t.map(FU);return i.length>0?i:void 0}(t.nI("SegmentList")),r=t.nI("SegmentTemplate");if(r.length>1)throw new b("The provided MPEG-DASH document's "+t.hI+" element can not have more than one SegmentTemplate element.");const h=1===r.length?function(t){return oe({},GU(t),{zst:t.cI("bitstreamSwitching"),Pst:t.cI("index"),Bst:t.cI("initialization"),Rst:t.cI("media")})}(r[0]):void 0;return{Ust:i,Qst:s,Fst:n,Yst:h}}function HU(t){const i=VU(t),e=WU(t),s=D(t.cI("bandwidth")),n=t.cI("dependencyId"),r=t.cI("id"),h=t.cI("mediaStreamStructureId"),o=D(t.cI("qualityRanking"));if(t.nI("SegmentBase").length>1)throw new b("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return oe({},i,e,{Xz:s,Gst:n,o:r,Vst:h,Wst:o})}function qU(t){return{nst:t.cI("schemeIdUri"),IT:t.cI("value")}}function XU(t){return qU(t)}function ZU(t){return qU(t)}function KU(t){return qU(t)}function JU(t){var i;const e=VU(t),s=WU(t),n=function(t){return t.map(KU)}(t.nI("Accessibility")),r=Oa(t.cI("bitstreamSwitching")),h=t.cI("contentType"),o=D(t.cI("group")),a=D(t.cI("id")),u=(null==(i=t.nI("Label")[0])?void 0:i.Fj)||"",c=t.cI("lang"),l=D(t.cI("maxBandwidth")),d=jU(t.cI("maxFrameRate")),f=D(t.cI("maxHeight")),_=D(t.cI("maxWidth")),g=D(t.cI("minBandwidth")),w=jU(t.cI("minFrameRate")),A=D(t.cI("minHeight")),v=D(t.cI("minWidth")),m=t.cI("par"),p=function(t){return t.map(HU)}(t.nI("Representation"));if(0===p.length)throw new b("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const y=function(t){return t.map(ZU)}(t.nI("Role")),M=Oa(t.cI("segmentAlignment"))||!1,T=D(t.cI("selectionPriority")),N=T||1,S=Oa(t.cI("subsegmentAlignment"))||!1;let I;try{I=D(t.cI("subsegmentStartsWithSAP"))}catch(t){}return oe({},e,s,{Hst:n,mst:r,IP:h,qst:o,o:a,kh:u,gs:c,Xst:l,Zst:d,Kst:f,Jst:_,$st:g,tnt:w,int:A,ent:v,snt:m,nnt:p,rnt:y,hnt:M,cB:N,ont:S,ant:I,unt:t.cI("xlink:actuate")||"onRequest",cnt:t.cI("xlink:href")})}function $U(t){const i=OU(t.cI("presentationTime"))||Se.ZERO,e=OU(t.cI("duration")),s=D(t.cI("id")),n=function(t){const i=t.rI,e={};for(let t=0;t<i.length;t++)e[i[t].l]=i[t].IT;return e}(t),r=t.Fj;return{ET:i,ct:e,o:s,rI:n,Cp:""!==r.trim()?r:t.cI("messageData")||""}}function tQ(t){return{cnt:t.cI("xlink:href"),unt:t.cI("xlink:actuate"),nst:t.cI("schemeIdUri"),IT:t.cI("value"),zy:D(t.cI("timescale")),wst:OU(t.cI("presentationTimeOffset")),fY:t.nI("Event").map($U)}}function iQ(t){const i=WU(t),e=t.nI("AssetIdentifier");if(e.length>1)throw new b("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return qU(t)}(e[0]):void 0,n=function(t){return t.map(JU)}(t.nI("AdaptationSet")),r=Oa(t.cI("bitstreamSwitching")),h=Re(t.cI("duration")),o=function(t){return t.map(tQ)}(t.nI("EventStream")),a=t.cI("id"),u=Re(t.cI("start")),c=(t.nI("Subset"),t.cI("xlink:href"));return oe({},i,{lnt:n,dnt:s,mst:r,ct:h,fnt:o,o:a,Cn:u,unt:t.cI("xlink:actuate"),cnt:c})}function eQ(t){const i=t.cI("schemeIdUri");if(!i)return;return{nst:i,IT:t.cI("value")}}function sQ(t,i){const e=CU(t.cI("availabilityEndTime")),s=CU(t.cI("availabilityStartTime")),n=PU(t.nI("BaseURL")),r=t.cI("id"),h=function(t){return t.map((t=>""+t.Fj))}(t.nI("Location")),o=Re(t.cI("maxSegmentDuration")),a=Re(t.cI("maxSubsegmentDuration")),u=Re(t.cI("mediaPresentationDuration")),c=(t.nI("Metrics"),Re(t.cI("minBufferTime")));if(!c)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=Re(t.cI("minimumUpdatePeriod")),d=function(t){return t.map((t=>iQ(t)))}(t.nI("Period"));if(!d.length)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.cI("profiles");if(!f)throw new b("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=CU(t.cI("publishTime")),g=Re(t.cI("suggestedPresentationDelay")),w=Re(t.cI("timeShiftBufferDepth")),A=function(t){switch(t){case Q.bO:case Q.LO:return t;default:return}}(t.cI("type")),v=function(t){const i=[];for(const e of t){const t=eQ(e);t&&i.push(t)}return i}(t.nI("UTCTiming"));return{_nt:e,gnt:s,Ust:n,o:r,wnt:h,Ant:i,vnt:o,mnt:a,pnt:u,ynt:c,Mnt:l,Tnt:d,kst:f,Nnt:_,Dnt:g,vst:w,hA:A,Snt:v}}var nQ=class{Int(t,i){return function(t,i){if(!t)throw new b("The provided MPEG-DASH document does not contain a valid MPD root element.");return sQ(t,i)}(ag.oI(t).aI,i)}};function rQ(t){return{get bandwidth(){return t.Xz},get codecs(){return t.Nst},get id(){return t.o},get uid(){return t.Vw},get name(){return t.kh},get averageBandwidth(){return t.Ent},get label(){return t.kh},set label(i){t.kh=P(i)},get available(){return t.Yit},get score(){return t.bnt},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}function hQ(t){return Ou(rQ(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.Est},get firstFrame(){return t.Lnt}})}function oQ(t){return Ou(rQ(t),{get audioSamplingRate(){return t.Tst}})}r(),r(),r(),r(),r(),r(),r(),r();var aQ=class extends gg{constructor(t){super("update"),this.quality=t}},uQ=class extends i{get kh(){return this.SN}set kh(t){this.SN!==t&&(this.SN=t,this.Co(new aQ(this.va)))}get Ent(){}get Yit(){return this.knt}get bnt(){}CI(){this.knt=!1,this.Co(new aQ(this.va))}constructor(t,i,e,s,n){super(),this.o=t,this.Xz=i,this.Nst=e,this.Cnt=n,this.Vw=om(),this.SN=s||"",this.knt=!0}},cQ=class extends uQ{get va(){return this.Xa||(this.Xa=hQ(this)),this.Xa}constructor(t,i,e,s,n,r,h,o,a=0){super(t,i,e,s,n),this.Est=r,this.ji=h,this.Ti=o,this.Lnt=a,this.Xa=void 0}},lQ=class extends uQ{get va(){return this.Xa||(this.Xa=oQ(this)),this.Xa}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.Tst=r,this.Xa=void 0}};r(),r();var xl,bn=class extends i{get xnt(){const t=this.Ont();return null==t?void 0:t.Cn}get jnt(){const t=this.Ont();return null==t?void 0:t.jn}constructor(...t){super(...t),this.znt=t=>{this.Co(t)}}};function fi(t){return B_(t.Pnt)}function dQ(t){return fi(t)?t.Pnt:t.ast}r(),r(),function(t){t.Bnt="Rnt",t.Unt="Qnt"}(xl||(xl={}));var fQ=class extends bn{get Fnt(){return this.Ynt}get Tst(){var t;return null!=(t=this.Gnt.Cp.Tst)?t:this.Fnt.Tst}get Xz(){return this.Gnt.Cp.Xz||0}get Nst(){const t=this.Gnt.Cp;return t.Nst?[t.Nst]:this.Fnt.Nst}get Vnt(){const t=this.Gnt.Cp;return t.Nst?[t.Nst]:[]}get wtt(){return this.Gnt.Cp.Nst||this.Fnt.wtt}get Dst(){return this.Gnt.Cp.Dst||this.Fnt.Dst}get Sst(){return this.Gnt.Cp.Sst||this.Fnt.Sst}get IP(){return this.dY+'; codecs="'+this.wtt+'"'}get Ist(){const t=this.Gnt.Cp;return t.Ist.length?t.Ist:this.Fnt.Ist}get va(){return this.Xa||(this.Xa=function(t){return{get id(){return t.o},get type(){return t.hA},get bandwidth(){return t.Xz},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var i,e;return null!=(e=null==(i=t.Est)?void 0:i.cD())?e:NaN},get audioSamplingRate(){return t.Tst}}}(this))}get Est(){var t;return null!=(t=this.Gnt.Cp.Est)?t:this.Fnt.Est}get Ti(){return this.Gnt.Cp.Ti||this.Fnt.Ti}get o(){return this.Gnt.Cp.o||""}get Wnt(){return this.Hnt}set Wnt(t){this.Hnt=t}get qnt(){const t=this.Gnt.Xnt();if(t)return{zu:t.zu,hst:t.hst,hE:this.Znt.hE}}get bst(){return this.Gnt.Cp.bst||this.Fnt.bst||1}get Lst(){return this.Gnt.Cp.Lst||this.Fnt.Lst}get Znt(){return this.Knt.Znt}get dY(){return this.Gnt.Cp.dY||this.Fnt.dY}get Knt(){return this.Fnt.Knt}get kst(){return this.Gnt.Cp.kst||this.Fnt.kst}get Jnt(){return this.$nt}get Cst(){return this.Gnt.Cp.Cst||this.Fnt.Cst}get xst(){return this.Gnt.Cp.xst||this.Fnt.xst}get trt(){return this.Gnt.trt}get Ost(){return this.Gnt.Cp.Ost||this.Fnt.Ost}get pst(){return this.Gnt.pst}get jst(){return this.Gnt.Cp.jst||this.Fnt.jst}get hA(){const t=this.dY.split("/")[0];return"application"===t||"text"===t||Fo(this.dY,this.Nst)?iv.Ru:"video"===t?iv.vp:"audio"===t?iv.mp:"image"===t?iv.ZT:iv.KT}get ji(){return this.Gnt.Cp.ji||this.Fnt.ji}get irt(){return this.ert}set irt(t){this.ert=t}nrt(t){const i=fi(t)?this.Gnt.rrt(t):this.Gnt.nrt(t);return{zu:i.zu,hst:i.hst,hE:this.Znt.hE}}hrt(){return this.Gnt.hrt()}Ont(){return this.Gnt.Ont()}ort(){return this.Gnt.ort()}art(t){return this.Gnt.art(t)}urt(t,i,e){return this.Gnt.urt(t,this.Znt.hE,i,e)}crt(t){return fi(t)?this.pst.lrt(t,this.Gnt):this.pst.crt(t)}drt(t){return fi(t)?this.pst.frt(t,this.Gnt):this.pst.drt(t)}gn(){this.Gnt.fn(xl.Bnt,this.znt)}constructor(t,i){if(super(),this.Xa=void 0,this.Hnt=void 0,this.ert=!1,this.Ynt=t,this.Gnt=i,this.Gnt.yn(xl.Bnt,this.znt),this.hA===iv.vp){var e,s;const t=null!=(s=null==(e=this.Est)?void 0:e.cD())?s:NaN;this.$nt=new cQ(this.o,this.Xz,this.wtt,"","",t,this.ji,this.Ti)}else this.hA===iv.mp?this.$nt=new lQ(this.o,this.Xz,this.wtt,"","",this.Tst):this.$nt=void 0}},_Q=class extends bn{get Hst(){return this.Gnt.Cp.Hst}get Tst(){var t;return null!=(t=this.Gnt.Cp.Tst)?t:-1}get Nst(){if(this.Gnt.Cp.Nst)return[this.Gnt.Cp.Nst];{const t=[];for(const i of this.nnt)i.Vnt.length&&-1===t.indexOf(i.wtt)&&t.push(i.wtt);return t}}get wtt(){return this.Nst.join()}get Dst(){return this.Gnt.Cp.Dst}get Sst(){return this.Gnt.Cp.Sst}get IP(){return this.dY+'; codecs="'+this.wtt+'"'}get Ist(){return this._rt}get Est(){return this.Gnt.Cp.Est}get qst(){return this.Gnt.Cp.qst}get Ti(){return this.Gnt.Cp.Ti||0}get o(){return this.Gnt.Cp.o}get kh(){return this.Gnt.Cp.kh||""}get bst(){return this.Gnt.Cp.bst}get Lst(){return this.Gnt.Cp.Lst}get Znt(){return this.Knt.Znt}get dY(){return this.Gnt.Cp.dY||this.grt[0].dY}get Knt(){return this.wrt}get kst(){return this.Gnt.Cp.kst}get nnt(){return this.grt}get rnt(){return this.Gnt.Cp.rnt||[]}get Cst(){return this.Gnt.Cp.Cst}get xst(){return this.Gnt.Cp.xst}get Ost(){return this.Gnt.Cp.Ost}get cB(){return this.Gnt.Cp.cB}get jst(){return this.Gnt.Cp.jst}get hA(){const t=(this.Gnt.Cp.IP||this.dY).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||Fo(this.dY,this.Nst)?iv.Ru:"video"===t?iv.vp:"audio"===t?iv.mp:"image"===t?iv.ZT:iv.KT}get ji(){return this.Gnt.Cp.ji||0}get s6(){return this.Gnt.Cp.gs||""}get Art(){return this.xnt}get vrt(){const t=this.Art,i=this.jnt;if(void 0===t||void 0===i)return;const e=x.min(i,this.Znt.mrt);return x.max(t,e)}async Qn(t,i){if(0===this.grt.length){this.grt=[];const e=this.Gnt.nnt.map((e=>this.prt(e,t,i)));this.grt=(await Promise.all(e)).filter(j_)}this.yrt()}async prt(t,i,e){const s=new fQ(this,t),n=await i(s);if(Pi(e),n)return s}yrt(){if(!this.grt.length)throw new b("Detected an AdaptationSet without any supported Representations.")}Ont(){return this.Gnt.Ont()}ort(){return this.Gnt.ort()}gn(){this.Gnt.fn(xl.Bnt,this.znt);for(const t of this.grt)t.gn();Ri(this.grt)}constructor(t,i){super(),this._rt=[],this.grt=[],this.wrt=t,this.Gnt=i,this.Gnt.yn(xl.Bnt,this.znt)}};function gQ(t,i){const e=[];for(const s of i)for(const i of t)e.push(ag.Dh(i,s));return e}r(),r(),r(),r(),r(),r(),r();var Cn=class{Mrt(t){const i=t-this.wrt.Cn;if(i<0||i>=this.wrt.ct)return;const e=this.Trt();return void 0!==e&&Ua(e,i,1e-5)?this.Nrt():this.Drt(i)}Srt(t){const i=t-this.wrt.Cn;if(!(i<0))return this.Irt(x.min(i,this.wrt.ct))}Nrt(){return this.Ert(0)}brt(){const t=this.wrt.ct;if(isFinite(t))return this.Irt(t)}get Lrt(){return this.wrt.Crt.krt&&void 0!==this.xrt()}hrt(t){if(this.wrt.Crt.hA===Q.LO){if(this.Lrt){const i=this.Nrt(),e=this.xrt();if(void 0===i||void 0===e)return;return{Ort:t,jrt:i,zrt:e}}const i=this.Prt(t);if(!i)return;return{Ort:t,jrt:this.Brt(t),zrt:i}}{0;const i=this.Nrt();if(i)return{Ort:t,jrt:i,zrt:this.brt()}}}ort(t,i){if(i){let t=this.Rrt(i.jrt);const e=this.Urt(i.zrt);if(e){const i=this.Qrt(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.Nrt();if(i){const e=this.Qrt(i);if(t.getTime()<e.getTime())return e}const e=this.wrt.Crt.gnt;return t.getTime()<e.getTime()?e:void 0}}Prt(t){const i=(t.getTime()-this.wrt.Crt.gnt.getTime())/1e3-this.wrt.Cn+this.Frt;let e=this.Irt(hi(i,0,this.wrt.ct));if(!e)return;if(e=this.Yrt(e,t),!e)return;let s=this.Urt(e);for(;s&&this.Grt(s,t);)e=s,s=this.Urt(e);return e}Brt(t){let i;const e=this.Vrt.vst;if(e){const s=(t.getTime()-this.wrt.Crt.gnt.getTime())/1e3-this.wrt.Cn-e.qet();i=this.Irt(hi(s,0,this.wrt.ct)),i||(i=this.Nrt())}else i=this.Nrt();if(!i)return;if(i=this.Yrt(i,t),!i)return;let s=this.Wrt(i);for(;s&&this.Grt(s,t);)i=s,s=this.Wrt(i);return i}Yrt(t,i){let e=t;for(;e&&this.Qrt(e).getTime()>i.getTime();)e=this.Wrt(e);if(!e)return;const s=this.Rrt(e);if(s&&s.getTime()<=i.getTime()){const t=this.Wrt(e);for(t&&this.Grt(t,i)&&(e=t);e;){if(this.Qrt(e).getTime()>i.getTime())return;if(this.Grt(e,i))break;e=this.Urt(e)}if(!e)return}return e}Grt(t,i){if(this.Lrt)return!0;if(this.Qrt(t).getTime()>i.getTime())return!1;const e=this.Rrt(t);return!(e&&i.getTime()>=e.getTime())}Hrt(t,i){if(this.Lrt)return!0;if(this.qrt(t).getTime()>i.getTime())return!1;const e=this.Rrt(t);return!(e&&i.getTime()>=e.getTime())}Xrt(t,i,e){const s=B(i,this.jk)+this.wrt.Cn;return{ast:t,Zrt:i,zN:s,ct:e,PN:s+e}}qrt(t){return this.wrt.Crt.hA===Q.LO?new Date(this.wrt.Crt.gnt.getTime()+1e3*(t.zN+t.ct)):this.wrt.Crt.gnt}Qrt(t){const i=this.qrt(t);return this.wrt.Crt.hA===Q.LO?new Date(i.getTime()-1e3*this.Frt):i}Rrt(t){let i=1/0;if(this.wrt.Crt.hA===Q.LO){const e=this.Vrt.vst;e&&(i=this.qrt(t).getTime()+1e3*t.ct+e.Xet())}const e=this.wrt.Crt._nt;return e&&(i=x.min(i,e.getTime())),i===1/0?void 0:new Date(i)}Krt(t,i){return t.ast+i}get CS(){return this.wrt.Cn-B(this.Jrt,this.jk)}get wst(){return B(this.Jrt,this.jk)}art(t){return!1}urt(t,i,e,s,n){const r=this.$rt(t);if(!r)return Promise.reject(new b("Invalid segment"));const h=this.tht(r.ast,i);return h?Promise.resolve(h):hl(this.iht(r.ast,i,e,s),n)}tht(t,i){}iht(t,i,e,s){return Promise.reject(new b("Not supported"))}Wrt(t){const i=this.$rt(t);if(i)return this.Ert(i.ast-1)}Urt(t){const i=this.$rt(t);if(i)return this.Ert(i.ast+1)}$rt(t){const i=this.Ert(t.ast);if(i&&i.zN===t.zN)return i;const e=this.Mrt(t.zN);return e&&e.zN===t.zN?e:void 0}eht(t,i){const e=this.sht(t);if(!e||!this.art(e.ast))return;const s=this.tht(e.ast,i);return s?s.eht(t):void 0}sht(t){return this.Ert(t.nht)}crt(t){const i=this.$rt(t);return!!i&&0===i.ast}lrt(t,i){const e=this.eht(t,i);return!!e&&0===e.Pnt}drt(t){const i=this.$rt(t);if(!i)return!1;const e=this.brt();return!!e&&i.ast===e.ast}frt(t,i){const e=this.eht(t,i);if(!e)return!1;const s=this.brt();if(!s||e.nht!==s.ast)return!1;const n=this.tht(e.nht,i);return e.Pnt+1===n.U}e_(){}constructor(t,i){this.wrt=t,this.Vrt=i,this.jk=i.zy,this.Frt=i.ist,this.Jrt=i.wst}},wQ=class extends Cn{Ert(t){if(t<0)return;const i=this.rht.multiply(t),e=B(i,this.jk),s=this.wrt.ct;if(e>=s)return;const n=this.hht();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.Xrt(t,i,s-e)}return isFinite(s)&&e+this.oht>s?this.Xrt(t,i,s-e):this.Xrt(t,i,this.oht)}Trt(){return 0}Drt(t){const i=x.floor(t/this.oht),e=this.hht();return void 0!==e&&i>=e?this.Ert(e):this.Ert(i)}Irt(t){if(t>=this.wrt.ct){const t=x.ceil(this.wrt.ct/this.oht)-1,i=this.hht();return void 0!==i&&t>=i?this.Ert(i):this.Ert(t)}return this.Drt(t)}hht(){const t=this.Vrt.Mst;var i;if(void 0!==t)return t-(null!=(i=this.Vrt.yst)?i:1);const e=this.Vrt.aht;return void 0!==e&&e>0?e-1:void 0}xrt(){if(isFinite(this.wrt.ct))return this.brt()}uht(t,i){return this.rht.multiply(t.ast+(i-1))}Qn(){}constructor(t,i){super(i,t);const e=t.cht,s=t.ct;if(void 0===e||void 0===s)throw new b("MultipleSegmentBase does not have a segment duration specified.");this.rht=e,this.oht=s}};function AQ(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,h=t.dht(i[n]),o=t.fht(i[r]);for(;n<=r&&t._ht(h,e)<=0&&t._ht(e,o)<0;){const a=n+x.floor(t.ght(e,h,o)*(r-n)),u=i[a],c=t.dht(u),l=a+1<s?t.dht(i[a+1]):t.fht(u);if(t._ht(l,e)<=0)n=a+1,h=l;else{if(!(t._ht(e,c)<0))return a;r=a-1,o=c}}return-1}function vQ(t,i){return AQ(mQ.dL,t,i)}r(),r(),r();var mQ=class t{static get dL(){return null!=this.Vet||(this.Vet=new t),this.Vet}dht(t){return t.zN}fht(t){return t.PN}_ht(t,i){return t.compare(i)}ght(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}},pQ=class extends Cn{Ert(t){if(!(t<0))return t<this.wht.length?this.wht[t].Aht:this.vht(t-this.wht.length)}Trt(){if(this.wht.length>0)return B(this.wht[0].zN,this.jk)}Drt(t){if(this.mht&&B(this.mht.zN,this.jk)<=t){const i=B(this.mht.zN,this.jk),e=B(this.mht.ct,this.jk),s=x.floor((t-i)/e);return this.vht(s)}if(this.wht.length>0&&Ua(t,B(this.wht[0].zN,this.jk),1e-5))return this.wht[0].Aht;const i=vQ(this.wht,Se.fromNumber(t*this.jk));return i<0?void 0:this.wht[i].Aht}Irt(t){if(!this.mht&&this.wht.length>0){const i=this.wht[this.wht.length-1];if(function(t,i,e){return G_(t,i,e)>=0}(t,B(i.PN,this.jk),1e-5))return i.Aht}const i=this.Trt();return i&&t<i?this.wht[0].Aht:this.Drt(t)}xrt(){return isFinite(this.wrt.ct)?this.brt():this.Ert(this.wht.length-1)}uht(t){return this.pht(t)}vht(t){if(!this.mht)return;const i=this.mht.zN,e=this.mht.ct,s=i.add(e.multiply(t)),n=B(s,this.jk),r=this.wrt.ct;if(n>=r)return;const h=this.wht.length+t,o=x.min(B(e,this.jk),n+r);return this.Xrt(h,s,o)}pht(t){return t.Zrt.add(this.Jrt)}Qn(){const t=this.Vrt.Cp.pst;if(!t)throw new b("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.yht(t)}yht(t){const i=this.Jrt;this.Mht(t,i);const e=this.Tht(t);this.Nht(t,i,e.Dht,e.nht)}Mht(t,i){const e=this.wht;if(0===t.length)Ri(e);else{const s=t[0],n=s.zN?Se.fromString(s.zN,!1).subtract(i):Se.ZERO;let r=0;for(;r<e.length&&e[r].zN.lessThan(n);)r++;r>0&&e.splice(0,r)}}Tht(t){const i=this.wht,e=this.Sht;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].ost||0;if(r<0)break;const h=n+r;if(h>=i.length)break;if(i[h].zN.greaterThanOrEqual(e))break;if(i[n].Aht.ast===n)n=h+1;else for(;n<=h;)i[n].Aht.ast=n,n++;0,s++}return{Dht:s,nht:n}}Nht(t,i,e,s){const n=this.wht;let r,h=e,o=s;for(;h<t.length;){const e=t[h],s=Se.fromString(e.ct,!1),a=e.ost||0;let u;if(e.zN){if(u=Se.fromString(e.zN,!1).subtract(i),o>0){const t=n[o-1];t.PN.greaterThan(u)&&(t.ct=u.subtract(t.zN),t.PN=t.zN.add(t.ct))}}else u=o>0?n[o-1].PN:Se.ZERO;if(a<0){if(h+1===t.length){r={zN:u,ct:s};break}const e=Se.fromString(t[h+1].zN,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this.Iht(n,o,u,s,t),u=t,o++}}else{const t=o+a;for(;o<=t;){const t=u.add(s);this.Iht(n,o,u,s,t),u=t,o++}}h++}o<n.length&&n.splice(o),n.length>0&&(this.Sht=n[n.length-1].zN),this.mht=r}Iht(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.ct.equals(s)?r.Aht.ast=i:t[i]={zN:e,ct:s,PN:n,Aht:this.Xrt(i,e,B(s,this.jk))}}else t.push({zN:e,ct:s,PN:n,Aht:this.Xrt(i,e,B(s,this.jk))})}constructor(t,i){super(i,t),this.wht=[],this.mht=void 0,this.Sht=Se.ZERO,this.Qn()}};r();var yQ=class{get Cp(){return this.Rk}get ist(){return this.Rk&&void 0!==this.Rk.ist?this.Rk.ist:this.Eht?this.Eht.ist:0}get wst(){return this.Rk&&void 0!==this.Rk.wst?this.Rk.wst:this.Eht?this.Eht.wst:Se.ZERO}get vst(){return this.Rk&&void 0!==this.Rk.vst?this.Rk.vst:this.Eht?this.Eht.vst:this.Knt.Crt.vst}get zy(){return this.Rk&&void 0!==this.Rk.zy?this.Rk.zy:this.Eht&&this.Eht.zy?this.Eht.zy:1}get ust(){return this.Rk&&void 0!==this.Rk.ust?this.Rk.ust:this.Eht?this.Eht.ust:void 0}get gst(){return this.Rk&&void 0!==this.Rk.gst?this.Rk.gst:this.Eht?this.Eht.gst:void 0}get pst(){return this.bht||(this.bht=this.Lht()),this.bht}Lht(){if(this.kht=this.Cht(),this.kht)return this.kht;if(this.Eht)return this.Eht.pst;throw new b("Missing media segment information.")}Xnt(t){const i=this.gst;if(i){return{zu:(void 0!==i.rst?ag.Dh(i.rst,t.Ust[0]):t.Ust[0]).href,hst:i.hst}}const e=this.ust;if(e)return{zu:t.Ust[0].href,hst:[0,e[0]-1]}}Qn(t){this.Rk=t,this.kht&&this.kht.Qn()}e_(){this.kht&&(this.kht.e_(),this.kht=void 0)}constructor(t,i,e){this.bht=void 0,this.kht=void 0,this.Knt=t,this.Eht=i,this.Rk=e}},Pr=class extends yQ{get ct(){return void 0!==this.Rk.ct?this.Rk.ct/this.zy:this.Eht&&MQ(this.Eht)?this.Eht.ct:void 0}get cht(){return void 0!==this.Rk.ct?Se.fromNumber(this.Rk.ct):this.Eht&&MQ(this.Eht)?this.Eht.cht:void 0}get yst(){return void 0!==this.Rk.yst?this.Rk.yst:this.Eht&&MQ(this.Eht)?this.Eht.yst:void 0}get Mst(){return void 0!==this.Rk.Mst?this.Rk.Mst:this.Eht&&MQ(this.Eht)?this.Eht.Mst:void 0}Cht(){return void 0!==this.Rk.pst?new pQ(this,this.Knt):void 0!==this.Rk.ct?new wQ(this,this.Knt):void 0}};function MQ(t){return t instanceof Pr}r();var TQ=class{CL(t){return this.xht.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let h=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===h?i:(h=va(h,Number(s),"0"),h)}))}constructor(t){this.xht=t}};var NQ=class t extends Pr{get Bst(){return this.Oht?this.Oht:this.Eht&&this.Eht instanceof t?this.Eht.Bst:void 0}get Rst(){return this.jht?this.jht:this.Eht&&this.Eht instanceof t?this.Eht.Rst:void 0}Xnt(t){const i=this.Bst;if(!i)return super.Xnt(t);const e=i.CL({Bandwidth:t.Cp.Xz,RepresentationID:t.Cp.o});return{zu:ag.zv(e,t.Ust[0])}}nrt(t,i){var e;const s=null!=(e=i.trt.yst)?e:1,n=this.Rst.CL({Bandwidth:i.Cp.Xz,Number:i.pst.Krt(t,s),RepresentationID:i.Cp.o,Time:i.pst.uht(t,s)});return{zu:ag.zv(n,i.Ust[0])}}rrt(t,i){}get aht(){}constructor(t,i,e){super(t,i,e),this.Oht=e.Bst?new TQ(e.Bst):void 0,this.jht=e.Rst?new TQ(e.Rst):void 0}};r();var DQ=class t extends Pr{nrt(t,i){const e=this.lst[t.ast],s=i.Ust[0];let n;return n=e.Fy?ag.Dh(e.Fy,s):s,{zu:n.href,hst:e.cst}}rrt(t,i){}get lst(){return void 0!==this.Rk.lst?this.Rk.lst:this.Eht&&this.Eht instanceof t?this.Eht.lst:void 0}get aht(){var t;return null==(t=this.lst)?void 0:t.length}};r(),r(),r(),r();var SQ=class{eht(t){const i=this.zht(t.Pnt);if(i&&i.zN===t.zN)return i;const e=this.Pht(t.zN);return e&&e.zN===t.zN?e:void 0}},IQ=class extends SQ{get U(){return this.Bht.length}zht(t){if(t>=0&&t<this.U)return this.Rht(this.Bht[t])}Pht(t){const i=this.Uht(t);if(this.Bht.length>0){const t=this.Bht[0];if(i<=B(t.zN,this.zy))return this.Rht(t)}const e=vQ(this.Bht,Se.fromNumber(i*this.zy));if(!(e<0))return this.Rht(this.Bht[e])}Qht(t){const i=this.Uht(t);if(this.Bht.length>0){const t=this.Bht[this.Bht.length-1];if(i>=B(t.PN,this.zy))return this.Rht(t)}return this.Pht(t)}Rht(t){const i=B(t.zN,this.zy)-this.wst,e=i+this.Fht,s=B(t.ct,this.zy);return{nht:this.nht,Pnt:t.ast,zN:e,Zrt:Se.fromNumber(i*this.zy),ct:s,PN:e+s,Yht:[t.Ght,t.Vht]}}Uht(t){return t-this.Fht+this.wst}constructor(t,i,e,s,n){super(),this.nht=t,this.zy=i,this.Fht=e,this.wst=s,this.Bht=n}};r(),r(),r();var EQ=class t{Wht(){return this.xp.Ku<this.Cp.byteLength}Hht(){const i=this.qht(),e=this.Xht(),s=this.xp.Ku,n=this.Cp.byteLength;let r;r=t.Zht(e)?n-s:t.Kht(e);const h=s+r<=n?r:n-s,o=cc(this.Cp,this.xp,h);return new LQ(i,Ao(o))}qht(){const t=this.Xht();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}Xht(){const t=F(this.Cp,this.xp.Sp());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const i=8-(31-tA(t));return ag.ptt(i<=8&&i>=1,"Incorrect log2 value"),cc(this.Cp,this.xp,i)}static Kht(t){if(8===t.length&&224&t[1])throw new k("EBML variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static Zht(t){for(const i of bQ)if(Xi(t,new T(i)))return!0;return!1}constructor(t){this.Cp=t,this.xp=new Vr}},bQ=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],LQ=class{Jht(){return this.$ht.byteOffset}tot(){return new EQ(this.$ht)}iot(){const t=this.$ht.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.$ht.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.$ht.getUint8(e)}return i}XW(){if(4===this.$ht.byteLength)return this.$ht.getFloat32(0);if(8===this.$ht.byteLength)return this.$ht.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=t,this.$ht=i}};function kQ(t,i){const e=function(t){const i=new EQ(Ao(t)),e=i.Hht();if(e.id!==xQ)throw new k("Missing WebM EBML header");const s=i.Hht();if(s.id!==OQ)throw new k("Missing WebM SegmentElement");const n=s.Jht(),r=function(t){const i=t.tot();let e;for(;i.Wht();){const t=i.Hht();if(t.id===jQ){e=t;break}}if(!e)throw new k("Missing WebM InfoElement");return function(t){const i=t.tot();let e,s=1e6;for(;i.Wht();){const t=i.Hht();t.id===zQ?s=t.iot():t.id===PQ&&(e=t.XW())}if(void 0===e)throw new k("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new EQ(Ao(t)).Hht();if(s.id!==BQ)throw new k("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.tot();let h,o;for(;r.Wht();){const t=r.Hht();if(t.id!==RQ)continue;const e=CQ(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==h&&n.push({ast:n.length,zN:h,ct:s.subtract(h),PN:s,Ght:o,Vht:a-1}),h=s,o=a}if(void 0!==h){0;const t=Se.fromNumber(s/e);n.push({ast:n.length,zN:h,ct:t.subtract(h),PN:t,Ght:o,Vht:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{zy:x.round(1/e.timecodeScale),eot:n}}function CQ(t){const i=t.tot(),e=i.Hht();if(e.id!==UQ)throw new k("Missing CueTime in WebM CuePointElement");const s=Se.fromNumber(e.iot()),n=i.Hht();if(n.id!==QQ)throw new k("Missing CueTrackPositions in WebM CuePointElement");const r=n.tot();let h=0;for(;r.Wht();){const t=r.Hht();if(t.id===FQ){h=t.iot();break}}return{unscaledTime:s,relativeOffset:h}}var xQ=440786851,OQ=408125543,jQ=357149030,zQ=2807729,PQ=17545,BQ=475249515,RQ=187,UQ=179,QQ=183,FQ=241,YQ=class extends Cn{Ert(t){if(0===t)return this.rot}Trt(){return 0}Drt(t){return this.rot}Irt(t){return this.Drt(t)}xrt(){return this.rot}uht(t,i){return Se.ZERO}hrt(t){const i=this.hot(t);return i&&{Ort:t,jrt:i,zrt:i}}hot(t){const i=this.rot;return this.Grt(i,t)?i:void 0}Prt(t){return this.hot(t)}Brt(t){return this.hot(t)}Qn(){}art(t){return 0===t&&void 0!==this.oot}tht(t,i){const e=i.Ust[0].href;return this.aot.get(e)}iht(t,i,e,s){const n=i.Ust[0].href;let r=this.uot.get(n);if(void 0===r){const h=i.dY,o=this.cot.a_;if(ln(h))r=this.lot(t,n,e,s,o);else{if(!Ep(h))throw new ce(le.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+h);r=this.fot(t,n,i,e,s,o)}this.uot.set(n,r)}return r}async lot(t,i,e,s,n){const r=this.oot,h=await s._ot(i,r,e,n),o=this.got(t,h);return this.aot.set(i,o),o}got(t,i){const e=this.oot,s=Mi.Kp(new DataView(i),new Vr);if(s.hA!==At.fp)throw new b("Invalid segment index");const n=Qi.Iy(s.Cp),r=function(t,i){const e=[];let s=t.YT,n=i+t.GT.toNumber(),r=0;for(const i of t.WT){const t=i.BT,h=Se.fromNumber(i.ct),o=s.add(h);0===i.PT&&e.push({ast:r++,zN:s,ct:h,PN:o,Ght:n,Vht:n+t-1}),n+=t,s=o}return e}(n,e[1]+1);return new IQ(t,n.zy,this.wrt.Cn,B(this.Jrt,this.jk),r)}async fot(t,i,e,s,n,r){const h=e.Xnt(),o=this.oot,a=n._ot(h.zu,h.hst,s,r),u=n._ot(i,o,s,r),[c,l]=await Promise.all([a,u]),d=this.wot(t,l,c);return this.aot.set(i,d),d}wot(t,i,e){const s=kQ(new T(i),new T(e));return new IQ(t,s.zy,this.wrt.Cn,B(this.Jrt,this.jk),s.eot)}e_(){super.e_(),this.cot.c_()}constructor(t,i){super(i,t),this.aot=Qt(),this.uot=Qt(),this.cot=new Po,this.oot=t.ust,this.rot=this.Xrt(0,Se.ZERO,this.wrt.ct)}},GQ=class extends yQ{get yst(){}nrt(t,i){return{zu:i.Ust[0].href}}rrt(t,i){return{zu:i.Ust[0].href,hst:t.Yht}}Cht(){return new YQ(this,this.Knt)}};r();var VQ=class extends gg{constructor(){super(xl.Bnt)}};r();var Bn=class extends i{get Cp(){return this.Rk}get Ust(){return this.Aot}vot(){var t,i;return null!=(i=this.Vrt)?i:null==(t=this.oit)?void 0:t.vot()}mot(t){const i=this.Knt,e=this.oit&&this.oit.vot();this.Rk.Yst?this.Vrt=new NQ(i,e,this.Rk.Yst):this.Rk.Fst?this.Vrt=new DQ(i,e,this.Rk.Fst[0]):this.Rk.Qst?this.Vrt=new GQ(i,e,this.Rk.Qst):t&&!e&&(this.Vrt=new GQ(i,e,void 0))}pot(t,i){this.Rk=t,this.Aot=t.Ust&&t.Ust.length>0?gQ(t.Ust.map((t=>t.zu)),i):i.slice(),this.Vrt&&(t.Yst?this.Vrt.Qn(t.Yst):t.Fst?this.Vrt.Qn(t.Fst[0]):t.Qst&&this.Vrt.Qn(t.Qst))}Ont(){var t;return null==(t=this.yot)?void 0:t.Mot}ort(){var t;return null==(t=this.yot)?void 0:t.Tot}Not(t){const i=this.Dot,e=this.Knt.ct,s=this.yot,n=this.Sot(t);s&&Ua(e,i,1e-5)&&XQ(s,n)||(this.Dot=e,this.yot=n,this.Co(new VQ))}e_(){this.Vo(),this.Vrt&&(this.Vrt.e_(),this.Vrt=void 0)}constructor(t,i,e){super(),this.Vrt=void 0,this.Dot=1/0,this.yot=void 0,this.oit=i,this.pot(t,e)}};function WQ(t){let i,e;for(const e of t){const t=e.Ont();if(t){i=t.Cn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].Ont();if(s){e=s.jn;break}}return void 0!==e?{Cn:i,jn:e}:void 0}}function HQ(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.Ont();if(!t)return;if(i=x.max(i,t.Cn),e=x.min(e,t.jn),i>=e)return}return{Cn:i,jn:e}}function qQ(t){let i;for(const e of t){const t=e.ort();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function XQ(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.Tot,i.Tot)&&function(t,i){return t&&i?Ua(t.Cn,i.Cn,1e-5)&&Ua(t.jn,i.jn,1e-5):t===i}(t.Mot,i.Mot)}var ZQ=class extends bn{get lnt(){return this.Iot}get Nst(){return this.lnt.reduce(((t,i)=>{for(const e of i.Nst)na(t,e)||t.push(e);return t}),[])}get wtt(){return this.Nst.length>0?this.Nst[0]:""}get hA(){return this.Iot[0].hA}get o(){return this.NN}get Znt(){return this.wrt.Znt}get dY(){return this.Iot[0].dY}get Knt(){return this.wrt}get nnt(){return Nh(this.lnt,(t=>t.nnt))}Ont(){return HQ(this.Iot)}ort(){let t;for(const i of this.Iot){const e=i.ort();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}gn(){this.Vo();for(const t of this.Iot)t.fn(xl.Bnt,this.znt)}constructor(t,i,e){super(),this.wrt=t,this.NN=i,this.Iot=e.slice();for(const t of e)t.yn(xl.Bnt,this.znt)}};r();var KQ=class extends gg{constructor(){super(xl.Unt)}};function JQ(t){const i=[];for(const e of t){let t;const s=e.qst;void 0===s||(t=H_(i,(t=>t.o===s))),t||(t={o:s,lnt:[]},i.push(t)),t.lnt.push(e)}return i}r();var $Q=class extends bn{get lnt(){return this.Iot}get Eot(){return this.bot}get dnt(){return this.Gnt.Cp.dnt}get ct(){return this.Gnt.ct}get jn(){return this.Cn+this.ct}get fnt(){return this.Gnt.Cp.fnt||[]}get o(){return this.Gnt.o}get Qnt(){return this.Lot}get Znt(){return this.kot}get Cot(){return this.kot.xot(this)}get Knt(){return this}get Oot(){return this.kot.jot(this)}get zot(){return this.Pot(1/0,x.min)}get Bot(){return this.Pot(0,x.max)}Pot(t,i){if(0===this.bot.length)return;let e=t;for(const t of this.bot){const s=t.hA;if(s===iv.mp||s===iv.vp){const s=t.jnt;if(void 0===s)return;e=i(e,s)}}return e}get Cn(){return this.Gnt.Cn}get hE(){return this.Znt.hE}Rot(){this.Lot||(this.Lot=!0,this.Co(new KQ),this.gn())}async Qn(t,i){0===this.Iot.length?(await this.Uot(this.Gnt.lnt,t,i),this.Qot(this.Iot),Pi(i)):await this.Fot(t,i)}async Uot(t,i,e){for(const s of t){const t=new _Q(this,s);try{await t.Qn(i,e),this.Iot.push(t)}catch(t){yo(t)}}}Qot(t){const i=JQ(t);for(const t of i){const i=new ZQ(this,t.o,t.lnt);this.bot.push(i)}}async Fot(t,i){for(const e of this.Iot)await e.Qn(t,i)}Ont(){return this.Gnt.Ont()}ort(){return this.Gnt.ort()}gn(){this.Vo(),this.Gnt.fn(xl.Bnt,this.znt);for(const t of this.bot)t.gn();for(const t of this.Iot)t.gn();Ri(this.Iot),Ri(this.bot)}constructor(t,i){super(),this.Iot=[],this.bot=[],this.Lot=!1,this.kot=t,this.Gnt=i,this.Gnt.yn(xl.Bnt,this.znt)}};r();var Mr,tF=class extends gg{constructor(){super(t.QA)}};r(),r(),(Mr||(Mr={})).Yot="Got";var iF=class extends gg{constructor(){super(Mr.Yot)}};r(),r(),r(),r();var eF=class extends Bn{get Fnt(){return this.Ynt}get Knt(){return this.Ynt.Knt}get Crt(){return this.Ynt.Crt}get dY(){return this.Rk.dY||this.Ynt.dY}get trt(){return this.vot()}get pst(){return this.trt.pst}art(t){const i=this.dY;return!(!ln(i)&&!Ep(i))&&this.pst.art(t.ast)}urt(t,i,e,s){return this.pst.urt(t,this,i,e,s)}Xnt(){return this.trt.Xnt(this)}nrt(t){return this.trt.nrt(t,this)}rrt(t){return this.trt.rrt(t,this)}hrt(){return this.Vot}Sot(t){const i=this.pst,e=i.hrt(t),s=e&&function(t,i){const{jrt:e,zrt:s,Ort:n}=t,r=e.zN;let h;const o=i.qrt(s);if(o.getTime()<=n.getTime())h=s.PN;else{const t=(o.getTime()-n.getTime())/1e3,i=x.max(s.ct-t,0);h=s.zN+i}return{Cn:r,jn:h}}(e,i),n=this.pst.ort(t,e);return this.Vot=e,{Ort:t,Mot:s,Tot:n}}Qn(t){this.pot(t,this.Ynt.Ust)}constructor(t,i){super(t,i,i.Ust),this.Vot=void 0,this.Ynt=i,this.mot(!0)}},sF=class extends Bn{get nnt(){return this.grt}get Knt(){return this.wrt}get Crt(){return this.wrt.Crt}get qst(){return this.Rk.qst}get dY(){var t;return this.Rk.dY||(null==(t=this.grt[0])?void 0:t.Cp.dY)||""}Qn(t){this.pot(t,this.wrt.Ust);const i=t.nnt||[];if(this.grt.length!==i.length)throw new b("Expected "+this.grt.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.grt[t].Qn(i[t])}Not(t){for(const i of this.grt)i.Not(t);super.Not(t)}Sot(t){return{Ort:t,Mot:HQ(this.grt),Tot:qQ(this.grt)}}e_(){for(const t of this.grt)t.e_();super.e_()}constructor(t,i){super(t,i,i.Ust),this.wrt=i,this.mot(!1),this.grt=t.nnt.map((t=>new eF(t,this)))}},nF=class extends Bn{get lnt(){return this.Iot}get Eot(){return this.bot}get Knt(){return this}get Crt(){return this.Wot}get o(){return this.Rk.o}get Cn(){return this.JS}get ct(){return this.zk}Qn(t,i){this.pot(t,this.Wot.Ust),this.zk=i;const e=t.lnt||[];if(this.Iot.length!==e.length)throw new b("Expected "+this.Iot.length+' adaptation sets in period "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.Iot[t].Qn(e[t])}Not(t){for(const i of this.Iot)i.Not(t);super.Not(t)}Sot(t){return{Ort:t,Mot:HQ(this.Iot),Tot:qQ(this.Iot)}}e_(){for(const t of this.Iot)t.e_();super.e_()}constructor(t,i,e,s){super(i,void 0,t.Ust),this.bot=[],this.Wot=t,this.JS=e,this.zk=s,this.mot(!1),this.Iot=(i.lnt||[]).map((t=>new sF(t,this))),this.bot=JQ(this.Iot)}},rF=new Date("2000-01-01"),hF=class extends i{get Cp(){return this.Rk}get hA(){return this.Rk.hA||Q.bO}get gnt(){return this.Hot||this.Rk.gnt||this.Nnt}get _nt(){return this.Rk._nt}get krt(){var t,i;return null!=(i=null==(t=this.qot)?void 0:t.ignoreAvailabilityWindow)&&i}get pnt(){return this.Xot}get Ust(){return this.Aot}get wnt(){return this.Zot}get Tnt(){return this.Kot}get Nnt(){return this.Rk.Nnt||this.An}get vst(){return this.Rk.vst}get Jot(){return this.$ot}get iat(){return this.An}Ont(){var t;return null==(t=this.yot)?void 0:t.Mot}ort(){var t;return null==(t=this.yot)?void 0:t.Tot}Qn(t,i,e,s){var n;const r=void 0!==this.Rk&&this.Rk.hA===Q.LO;this.Rk=t,this.eat=i,this.$ot=null!=s?s:e,this.An=e;const h=[hw(i)];this.Aot=t.Ust&&t.Ust.length>0?gQ(t.Ust.map((t=>t.zu)),h):h,this.Zot=t.wnt&&t.wnt.length>0?gQ(t.wnt,this.Aot):[];const o=this.Zot.map((t=>t.href)),a=i.href;na(o,a)||(this.Zot.push(i),o.push(a));const u=this.sat.href;na(o,u)||(this.Zot.push(this.sat),o.push(u)),this.Xot=null==(n=t.pnt)?void 0:n.qet();const c=t.hA===Q.LO,l=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.Cn)r=n.Cn.qet();else if(e>0&&t[e-1].ct){r=s[e-1]+t[e-1].ct.qet()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({Cp:t[i],Cn:s[i],ct:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,h=t[r],o=s[r];let a=1/0;i||(a=h.ct?h.ct.qet():e-o),n.push({Cp:h,Cn:o,ct:a})}return n}(t.Tnt,c,this.Xot);this.nat(l,r,c),this.Not(e)}nat(t,i,e){const s=this.Kot;if(0===t.length)return void Ri(s);const n=t[0].Cp.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const h=s.splice(0,r);for(const t of h)t.e_();if(i&&!e&&s.length>0&&t.length>0){var o;const i=null!=(o=oF(s[0].Cp))?o:aa.LD;var a;const e=null!=(a=oF(t[0].Cp))?a:aa.LD;if(e.lD(i)){const n=e.MD(i);void 0!==this.Xot&&(this.Xot+=n.cD());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.Cn=t.Cn,dF(e.Cp,t.Cp)}i===t.length-1&&(e.ct+=n.cD())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.Qn(e.Cp,e.ct)}else s.push(new nF(this,e.Cp,e.Cn,e.ct))}}Not(t){for(const i of this.Kot)i.Not(t);const i=this.yot,e=this.Sot(t);i&&XQ(i,e)||(this.yot=e,this.Co(new VQ))}Sot(t){return{Ort:t,Mot:WQ(this.Kot),Tot:qQ(this.Kot)}}xrt(){if(0===this.Kot.length)return;const t=this.Kot[this.Kot.length-1];if(isFinite(t.ct))return;if(0===t.lnt.length)return;const i=t.lnt[0];if(0===i.nnt.length)return;const e=i.nnt[0].pst,s=e.xrt();return s?{Aht:s,_nt:e.Rrt(s)}:void 0}e_(){this.Vo();for(const t of this.Kot)t.e_()}constructor(t,i,e,s,n){if(super(),this.yot=void 0,this.Xot=void 0,this.Hot=void 0,this.Kot=[],this.sat=i,this.qot=n,this.Qn(t,e,s),t.hA===Q.LO){const t=this.xrt();t&&t._nt&&t._nt.getTime()<rF.getTime()&&(this.Hot=new Date(this.Nnt.getTime()-1e3*(t.Aht.zN+t.Aht.ct)),this.Not(s))}}};function oF(t){let i=cF(t);var e,s;for(const s of null!=(e=t.lnt)?e:[])i=Lo(i,aF(s));for(const e of null!=(s=t.fnt)?s:[])i=Lo(i,lF(e));return i}function aF(t){let i=cF(t);for(const e of t.nnt)i=Lo(i,uF(e));return i}function uF(t){return cF(t)}function cF(t){let i;if(void 0!==t.Yst&&(i=Lo(i,lF(t.Yst))),void 0!==t.Qst&&(i=Lo(i,lF(t.Qst))),void 0!==t.Fst)for(const e of t.Fst)i=Lo(i,lF(e));return i}function lF(t){var i,e;return aa.SD(null!=(i=t.wst)?i:Se.ZERO,null!=(e=t.zy)?e:1)}function dF(t,i){if(gF(t,i),t.Cn=i.Cn,void 0!==t.lnt&&void 0!==i.lnt&&t.lnt.length===i.lnt.length)for(let e=0;e<t.lnt.length;e++)fF(t.lnt[e],i.lnt[e]);if(void 0!==t.fnt&&void 0!==i.fnt&&t.fnt.length===i.fnt.length)for(let e=0;e<t.fnt.length;e++)wF(t.fnt[e],i.fnt[e])}function fF(t,i){if(gF(t,i),void 0!==t.nnt&&void 0!==i.nnt&&t.nnt.length===i.nnt.length)for(let e=0;e<t.nnt.length;e++)_F(t.nnt[e],i.nnt[e])}function _F(t,i){gF(t,i)}function gF(t,i){if(void 0!==t.Yst&&void 0!==i.Yst&&wF(t.Yst,i.Yst),void 0!==t.Qst&&void 0!==i.Qst&&wF(t.Qst,i.Qst),void 0!==t.Fst&&void 0!==i.Fst&&t.Fst.length===i.Fst.length)for(let e=0;e<t.Fst.length;e++)wF(t.Fst[e],i.Fst[e])}function wF(t,i){t.zy=i.zy,t.wst=i.wst}r();var AF=class{async JV(t){await this.rat(t,this.dE,this.oat,this.aat).catch(Ah)}uat(){return new Date(Yo()+this.dat)}async rat(t,i,e,s){let n;if(s&&(n=await this.fat(i,s,e)),void 0===n){Pi(e);for(const s of t)if(n=await this._at(i,s,e),void 0!==n)break}this.dat=void 0===n?0:n-Yo()}async _at(t,i,e){switch(i.nst){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.IT;if(s)return await this.fat(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.IT;if(t){const i=new Date(t).getTime();if(!j(i))return i}break}default:return}}async fat(t,i,e){try{const s=await t.mI({zu:i,iE:Kc.GET,eE:nr.Ru,a_:e}),n=await s.fE(),r=new Date(n).getTime();if(!j(r))return r}catch(t){yo(t)}}constructor(t,i,e){this.dE=t,this.oat=i,this.aat=e,this.dat=0}},vF=class extends i{get _nt(){return this.Gnt&&this.Gnt._nt}get gnt(){return this.Gnt&&this.Gnt.gnt}get krt(){return this.Gnt&&this.Gnt.krt}get o(){return this.Gnt&&this.Gnt.Cp.o}get Jot(){var t;return null==(t=this.Gnt)?void 0:t.Jot}get gat(){var t;return null==(t=this.Gnt)?void 0:t.iat}get wnt(){return this.Gnt?this.Gnt.wnt.map((t=>t.href)):[this.wat]}get wat(){return this.Aat.href}get vnt(){return this.Gnt&&this.Gnt.Cp.vnt}get mnt(){return this.Gnt&&this.Gnt.Cp.mnt}get pnt(){return this.Gnt&&this.Gnt.Cp.pnt}get ynt(){return this.Gnt&&this.Gnt.Cp.ynt}get Mnt(){var t,i;const e=(null==(t=null==(i=this.Gnt)?void 0:i.Cp.Mnt)?void 0:t.Xet())||0;return x.max(e,pF)}get eg(){return this.vat}mat(t){const i=this.eg;this.vat=t,i!==this.eg&&this.Co(new iF)}get Tnt(){return this.Kot}get pat(){return this.hA===Q.LO?this.mrt:this.yat}get Mat(){const t=this.pat;if(void 0!==t)for(const i of this.Tnt)if(i.Cn<=t&&i.jn>t)return i}get kst(){return this.Gnt&&this.Gnt.Cp.kst}get Nnt(){return this.Gnt&&this.Gnt.Nnt}get zot(){for(let t=this.Kot.length-1;t>=0;t-=1){const i=this.Kot[t].zot;if(i)return i}}get mrt(){const t=this.zot;if(void 0===t)return;const i=t-this.Tat;return x.max(i,this.yat)}get yat(){for(const t of this.Kot){const i=t.xnt;if(void 0!==i)return i}}get hE(){return Boolean(this.Nat.hE)}get Tat(){const t=this.Gnt&&this.Gnt.Cp.Dnt;return t?t.qet():this.hA===Q.LO?this.Dat:0}get Dat(){return this.Nat.Dat?this.Nat.Dat:1.5*this.ynt.qet()}get vst(){return this.Gnt&&this.Gnt.vst}get hA(){return this.Gnt?this.Gnt.hA:void 0}async Qn(t,i,e){const s=[],n=[],r=t.Ant?ag.Dh(t.Ant,this.Aat):this.Aat;void 0===this.Gnt?(await this.Sat.JV(t.Snt),this.Gnt=new hF(t,this.Aat,r,this.uat(),this.qot),this.Gnt.yn(xl.Bnt,this.Ds)):this.Gnt.Qn(t,r,this.uat(),i);const h=this.Gnt.Tnt;let o;if(0===h.length)o=this.Kot.slice(),Ri(this.Kot);else{const t=h[0].o;let i=0;for(;i<this.Kot.length&&this.Kot[i].o!==t;)i++;o=this.Kot.splice(0,i);for(let t=0;t<h.length;t++){const i=h[t];let r;t<this.Kot.length?r=this.Kot[t]:(r=new $Q(this,i),s.push(r)),n.push(r.Qn(this.Iat,e))}}await Promise.all(n),this.Kot.push(...s);for(const t of o)t.Rot();this.Co(new tF)}uat(){return this.Sat.uat()}jot(t){const i=this.Kot.indexOf(t);if(i>0)return this.Kot[i-1]}xot(t){const i=this.Kot.indexOf(t);if(i>=0&&i+1<this.Kot.length)return this.Kot[i+1]}Ont(){return this.Gnt?this.Gnt.Ont():void 0}ort(){return this.Gnt&&this.Gnt.ort()}Not(t){this.Gnt&&this.Gnt.Not(t)}gn(){this.Vo(),this.Eat=void 0,this.mat(!1);for(const t of this.Kot)t.gn();Ri(this.Kot),this.Gnt&&this.Gnt.e_()}constructor(t,i,e,s,n){super(),this.Gnt=void 0,this.vat=!0,this.Kot=[],this.Eat=void 0,this.Nat=t,this.Aat=t.oA,this.Iat=i,this.dE=e,this.bat=s,this.Sat=new AF(this.dE,this.bat,this.Nat.Lat),this.qot=n}},mF=class{get Znt(){return this.kot}constructor(t,i,e,s,n){this.kot=new vF(t,i,e,s,n)}},pF=1e3,yF=class{get Tr(){return this.Gnt}get W(){return this.Cat||(this.Cat=this.sit(this.xat.a_),W(this.Cat)),this.Cat}async sit(t){this.Gnt.Znt.Co(new ie);try{await this.Oat(t),this.Gnt.Znt.mat(!0)}catch(t){throw yo(t),this.Cat=void 0,this.Gnt.Znt.mat(!1),new b("The provided MPEG-DASH document could not be loaded - "+t.message)}this.jat=this.zat(this.xat.a_)}async zat(t){try{for(;this.Gnt.Znt.hA===Q.LO;)await hl(this.Pat,t)}catch(t){}}get Pat(){return this.Gnt.Znt.gat&&this.Gnt.Znt.hA===Q.LO?this.Bat(this.xat.a_):this.W}async Rat(t){Pi(t);const i=this.Uat();if(i>0){const e=x.min(i,2147483647);await be(e,t)}try{await this.Oat(t),this.Gnt.Znt.mat(!0)}catch(t){throw new b("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.Qat=void 0}}Uat(){const t=this.Gnt.Znt.uat().getTime()-this.Gnt.Znt.Jot.getTime();return this.Gnt.Znt.Mnt-t}Fat(t){const i=this.Gnt.Znt.ort();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.Gnt.Znt.Not(t);const e=this.Gnt.Znt.ort();return e?e.getTime()-t.getTime():NaN}async Bat(t){this.Qat||(this.Qat=this.Rat(t));const i=new Po;i.l_(t);try{await Promise.race([this.Qat,this.Yat(i.a_)].filter(j_))}catch(t){Ah(t)}finally{i.c_()}}Yat(t){const i=this.Gnt.Znt.uat(),e=this.Fat(i);if(!j(e)&&!this.Tr.Znt.krt)return this.Gat(e,t)}async Gat(t,i){await be(t,i);const e=this.Gnt.Znt.uat();this.Gnt.Znt.Not(e)}async Vat(t,i){const e=await this.Hat.Wat(t,{},i);return(new nQ).Int(e.qat,e._E)}gn(){return this.xat.c_(),this.jat=void 0,this.Cat=void 0,this.Qat=void 0,this.Gnt.Znt.gn(),Promise.resolve()}constructor(t,i,e,s,n){this.xat=new Po,this.Oat=async t=>{try{const i=this.Gnt.Znt.uat(),e=await this.Vat(this.Gnt.Znt.wnt,t);await this.Gnt.Znt.Qn(e,i,t)}catch(t){throw Xt(t)&&this.Gnt.Znt.mat(!1),t}},this.Hat=s,this.Gnt=new mF(t,i,e,this.xat.a_,n)}};r(),r();var MF=class extends gg{constructor(t,i){super("Xat"),this.Zat=t,this.Kat=i}},TF=class extends i{get Kat(){return this.Jat}get hA(){return this.g0}get Z(){return this.Ow.slice()}kI(t){t&&this.Jat!==t&&this.$at(t)}CI(t){this.Jat===t&&this.$at(void 0)}$at(t){this.Jat=t,this.Co(new MF(this,this.Jat))}gn(){this.Vo();for(const t of this.Ow)t.qst=void 0;Ri(this.Ow)}constructor(t,i){super(),this.Jat=void 0,this.g0=t,this.Ow=i;for(const t of this.Ow)t.qst=this}};r(),r();var NF=class extends Ha{fa(){return new DF(this.Hw.map((t=>t.va)))}constructor(t,i){super(Os.Lw),this.Hw=t||[],this.Lt=i}},DF=class extends gg{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}};r();var SF=class extends bo{fa(){return new IF(this.quality.va)}constructor(t){super(Os.QUALITY_UNAVAILABLE),this.quality=t}},IF=class extends te{constructor(t){super("qualityunavailable"),this.quality=t}};r();var EF=class extends gg{constructor(){super(Os.NO_QUALITY)}};function bF(t){return{Xz:t.Xz,wtt:t.Nst,Ti:LF(t)?t.Ti:0,hA:LF(t)?iv.vp:iv.mp,ji:LF(t)?t.ji:0}}function LF(t){const i=t;return void 0!==i.Ti&&void 0!==i.ji}r();var Eu,kF=0,CF=class extends i{get Ww(){return this.Ynt.Hst.map(xF).filter(j_)}tut(t){if(!this.vN.yN(t))return;t.CI();const i=this.iut();if(this.eut&&na(this.eut,t)){const t=this.eut.filter((t=>t.Yit));0===t.length&&i.length>0?this.qw=i:this.qw=t}else this.qw=i;this.Co(new SF(t))}iut(){const t=[];for(const i of this.vN.xw)i.Yit&&t.push(i);return t}get Gw(){return this.sut}nut(t){this.sut=t.Jnt,this.Co(t)}get Fnt(){return this.Ynt}get Rt(){return this.Le}set Rt(t){this.EN(t)}get va(){return this.Xa||(this.Xa=Di(this)),this.Xa}get qst(){return this.rut}set qst(t){this.rut=t}get o(){return this.NN}get Vw(){return this.DN}get zt(){return this.c0}get gs(){return this.Pk}get kh(){return this.SN}set kh(t){t!==this.SN&&(this.SN=t,this.Co(new Hn(this)))}get eA(){return this.Rt?"enabled":"disabled"}get qw(){return this.eut}set qw(t){let i=[];if(t){const e=(null!=t?t:[]).filter((t=>{const i=this.Gw?bF(this.Gw):void 0;return ag.Ys.ltt(i,bF(t))}));if(0===e.length)return;i=e.filter((t=>t.Yit))}else i=this.iut();0===i.length&&this.Co(new EF),this.eut=t&&this.vN.yN(t)?t:void 0,this.hut=this.out(this.eut),this.Co(new NF(t,this))}get aut(){return this.hut}out(t){if(!t||0===t.length)return;const i=[];for(const e of this.nnt)for(const s of t)s===e.Jnt&&s.Yit&&i.push(e);return i}get Hw(){return this.vN}get nnt(){return this.Fnt&&this.Fnt.nnt}get uut(){return this.cut}EN(t){this.Le=t,this.rut&&(t?this.rut.kI(this):this.rut.CI(this))}lut(t){this.Le=t,this.fut!==t&&(this.fut=t,this.Co(new Zr(this)))}gn(){for(const t of this.vN.xw)t.fn("update",this._ut);this.vN.Zn()}constructor(t,i,e="alternative"){super(),this.sut=void 0,this.Le=!1,this.Xa=void 0,this.rut=void 0,this.NN="",this.fut=!1,this.vN=new em,this.eut=void 0,this.hut=void 0,this._ut=()=>this.Co(new Hn(this)),this.Ynt=t,this.NN=String(kF++),this.DN=Vu(),this.c0=e,this.Pk=t.s6,this.SN=t.kh,this.cut=t.hA;for(const t of i)t.yn("update",this._ut),this.Hw.mN(t)}};function xF(t){if("urn:mpeg:dash:role:2011"===t.nst)return OF(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.nst){if("1"===t.IT)return Ku.Zw;if("2"===t.IT)return Ku.Jw}}function OF(t){if(void 0!==(null==t?void 0:t.IT))switch(t.IT){case"caption":return Ku.Xw;case"sign":return Ku.Kw;case"description":return Ku.Zw;case"enhanced-audio-intelligibility":return Ku.Jw;default:return}}r(),function(t){t[t.$R=0]="$R",t[t.gut=1]="gut",t[t.wut=10]="wut",t[t.Aut=11]="Aut",t[t.vut=12]="vut",t[t.mut=13]="mut",t[t.yut=14]="yut",t[t.Mut=15]="Mut",t[t.Tut=20]="Tut",t[t.Nut=21]="Nut",t[t.Dut=22]="Dut",t[t.Sut=23]="Sut",t[t.Iut=24]="Iut",t[t.Eut=30]="Eut",t[t.but=31]="but",t[t.Lut=32]="Lut",t[t.kut=33]="kut",t[t.Cut=34]="Cut",t[t.xut=35]="xut",t[t.Out=40]="Out",t[t.jut=41]="jut",t[t.zut=42]="zut",t[t.Put=43]="Put",t[t.But=44]="But",t[t.Rut=50]="Rut",t[t.Uut=51]="Uut",t[t.Qut=60]="Qut",t[t.Fut=61]="Fut",t[t.Yut=62]="Yut",t[t.Gut=63]="Gut",t[t.Vut=70]="Vut",t[t.Wut=71]="Wut",t[t.Hut=72]="Hut",t[t.qut=73]="qut",t[t.Xut=74]="Xut",t[t.Zut=75]="Zut",t[t.Kut=76]="Kut",t[t.Jut=77]="Jut",t[t.$ut=90]="$ut",t[t.tct=91]="tct"}(Eu||(Eu={})),r(),r();var jF,Ar,zF=class extends gg{constructor(i,e,s){super(t.LA),this.currentTime=i,this.initDataType=e,this.initData=s}};function jr(t,i,e,s,n){let r=[],h=[];for(const t of i)t.hA===iv.mp?r=r.concat(t.Z):t.hA===iv.vp&&(h=h.concat(t.Z));return[PF(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),BF(t,h,e,s,null==n?void 0:n.preferredVideoCodecs)].filter(j_)}function PF(t,i,e,s,n){const r=H_(s||[],(t=>t.uut===iv.mp&&t.Rt)),h=[UF(r,e,t),QF(r),FF(r,n),YF(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return RF(i,h)}function BF(t,i,e,s,n){const r=H_(s||[],(t=>t.uut===iv.vp&&t.Rt)),h=[UF(r,e,t),FF(r,n),YF(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return RF(i,h)}function RF(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function UF(t,i,e){return s=>{const n=t?t.Fnt.o:void 0;if(!j_(n))return s;const r=null==i?void 0:i.dnt,h=e.dnt,o=r&&h&&r.IT===h.IT,a=H_(s,(t=>t.Fnt.o===n));return o&&a?[a]:s}}function QF(t){return i=>{const e=t?t.gs:"",s=i.some((t=>""!==t.gs))?i.filter((t=>""!==t.gs)):i;if(""===e)return s;const n=H_(s,(t=>t.gs===e));return n?[n]:s}}function FF(t,i){return e=>{if(void 0===t&&i&&i.length>0)for(const t of i){const i=e.filter((i=>i.Hw.xw.some((i=>Ut(i.Nst,t)))));if(i.length>0)return i}return e}}function YF(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.Fnt.cB;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}r(),r(),function(t){t.ict="api",t.ect="start"}(jF||(jF={})),r(),(Ar||(Ar={})).sct="nct",r();var GF=class extends gg{constructor(i){super(t.FA),this.error=i}};function VF(t){return void 0!==t.ag}function WF(t,i){const e=t.ji&&i.ji,s=t.Ti&&i.Ti;if(e||s){if(e&&s)return t.ji*t.Ti-i.ji*i.Ti;if(e)return t.ji-i.ji;if(s)return t.Ti-i.Ti;return(t.ji||1)*(t.Ti||1)-(i.ji||1)*(i.Ti||1)}return 0}function HF(t,i){return WF(t,i)||function(t,i){return t.Xz-i.Xz}(t,i)}r(),r();var qF=class t{rct(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.hct&&void 0===e&&i.length>1){const i=t.act(r,this.hct);i&&(r=i)}const h=this.uct(r,e,s,n);return h.length?h[h.length-1]:r[0]}uct(i,e,s,n){var r;const h=t.sortByQuality(i),o={cct:void 0===n||this.dct.lct?this.dct.cct:n,ag:VF(s)&&s.ag?s.ag:1,fct:s.ji,_ct:s.Ti,gct:null==(r=this.wct)?void 0:r.restrictToPlayerSize};let a=h;for(const t of this.Act)a=t(a,e,o,this.Ntt,this.vct);return a}static mct(i){return t.sortByQuality(i)[0]}static pct(i,e){var s;return e?t.mct(null!=(s=t.act(i,e))?s:i):t.mct(i)}static act(t,i){for(const e of i){const i=t.filter((t=>Ut(t.wtt,e)));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(HF),i}constructor(t,i,e,s,n,r){this.Act=t,this.dct=i,this.Ntt=e,this.wct=s,this.hct=n,this.vct=r}};r();var XF={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},ZF=class{yct(t,i,e){const s=this.Mct.maxRetries===1/0?XF:this.Mct;return mu((()=>this.Tct(t,i,e)),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async Tct(t,i,e){let s;for(const n of t)try{const t=new nc({zu:n,eE:nr.Ru,tE:i,hE:this.Nct,iE:Kc.GET,hA:zu.QI,nE:jo.KT,a_:e,NI:3e4,sE:5e3}),s=await this.dE.mI(t),r=await s.fE(e);return{qat:r,Dct:n,_E:s._E}}catch(t){s=t}throw s}constructor(t,i,e=XF){this.dE=t,this.Nct=i,this.Mct=e}};r();var KF=class{async Wat(t,i,e){let s;for(const n of this.Sct)try{return await n.Wat(t,i,e)}catch(t){yo(t),s=t}throw s}constructor(t){this.Sct=t}},JF=class{async Wat(t,i,e){const s=await this.Ict.$it(t);if(s)return{qat:s.data,Dct:s.locationURL,_E:s.responseURL};throw new b("Manifest fetch from cache unsuccesful")}constructor(t){this.Ict=t}},$F=class{async Wat(t,i,e){return await this.Ect.yct(t,i,e)}constructor(t){this.Ect=t}};function tY(t,i){return new KF([new JF(i),new $F(t)])}var iY=class{async Wat(t,i,e){const s=await this.Hat.Wat(t,i,e);return await this.bct(s),s}async bct(t){await this.Lct.uet({key:Ti(t.Dct),locationURL:xa(t.Dct),responseURL:xa(t._E),data:t.qat,references:[this.kct.o]})}constructor(t,i,e){this.Hat=t,this.Lct=i,this.kct=e}};r();var eY=class extends gg{constructor(){super(t.GA)}};r();var sY=class extends gg{constructor(){super(t.YA)}};r(),r();var $n=class extends ni{Cct(t){return t.vg=ja.LOADED,this.tt(t),t}xct(t){for(const i of this.Z.xw)if(i.iA===t)return i}constructor(){super()}};function nY(t,i){return""===i?t:t+" "+i}r(),r(),r();var rY=class extends yn{get va(){return this.Xa||(this.Xa=function(t){return Ou(Oh(t),{get attributes(){return t.rI},get eventID(){var i;return""+(null!=(i=t.Oct)?i:"")}})}(this)),this.Xa}tD(t){return this.O===t.O}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.rI=s,this.Oct=n}},hY=class extends $n{jct(t){const i=this.cE.uE(Pt.Mp,"","","",void 0,Ks.EVENT_STREAM);return i.iA=t,this.Cct(i),i}zct(t,i,e){const s=t.nst;var n;const r=null!=(n=t.IT)?n:"";var h;const o=null!=(h=t.zy)?h:1;var a;const u=null!=(a=t.wst)?a:Se.ZERO,c=nY(s,r);let l=this.xct(c);l||(l=this.jct(c));for(const s of t.fY)if(!oY(s,l)){const t=aY(s,o,u,i);t.PN>e&&l.gE(t)}}async $n(i){await this.Zn(),this.Wot=i,this.Wot.yn(t.QA,this.Pct),this.Pct()}async Zn(){this.Wot&&(this.Wot.fn(t.QA,this.Pct),this.Wot=void 0);for(const t of this.Z.xw)this.cE.AE(t);await super.Zn()}constructor(t){super(),this.Wot=void 0,this.Pct=()=>{var t,i;const e=null!=(i=null==(t=this.Wot.Ont())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.xw)gy(t,e);for(const t of this.Wot.Tnt)if(t.jn>e)for(const i of t.fnt)this.zct(i,t,e)},this.cE=t}};function oY(t,i){const e=t.o;if(void 0!==e){if(H_(i.L.xw,(i=>i.Oct===e&&i.O===t.Cp)))return!0}return!1}function aY(t,i,e,s){const n=t.o,r=t.ET.toSigned().subtract(e),h=t.ct,o=t.Cp,a=t.rI,u=r.toNumber()/i+s.Cn,c=h?h.toNumber()/i:void 0,l=void 0!==c?u+c:s.Bot;return new rY(u,l,o,a,n)}function uY(t,i,e,s){const n=[],r=H_(e,(t=>t.nst===bw));if(void 0===r)return;const h=r.IT?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(r.IT.toLowerCase()):"cenc";if(void 0!==h){for(const t of e)if(t.nst!==bw)for(const i of Vy(t.nst))n.push({dm:i,iP:t.sst?[t.sst]:[],eP:void 0,_z:void 0});if(n.length)return{mj:t,Bct:{Rct:h,pj:r.pj},Uct:n,Qct:i===iv.mp?s.slice():[],Fct:i===iv.vp?s.slice():[],l4:!1}}}function cY(t,i){if(!t)return i;if(!i)return t;const e=[],s=Qt();var n;return lY(e,s,t.Uct),lY(e,s,i.Uct),{mj:t.mj,Bct:{Rct:t.Bct.Rct,pj:null!=(n=t.Bct.pj)?n:i.Bct.pj},Uct:e,Qct:dY(t.Qct,i.Qct,na),Fct:dY(t.Fct,i.Fct,na),l4:t.l4||i.l4||!1}}function lY(t,i,e){for(const s of e){const e=s.dm.wL;let n;i.has(e)?(n=i.get(e),n.iP=dY(n.iP,s.iP,fY)):(n=oe({},s),t.push(n),i.set(e,n))}}function dY(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function fY(t,i){for(const e of t)if(Zw(e,i))return!0;return!1}function _Y(t,i){let e;const s=t.Sst;if(s){const n=t.dY,r=[];for(const i of t.Nst)r.push(n+'; codecs="'+i+'"');e=uY(i||{},t.hA,s,r)}for(const s of t.nnt)e=cY(e,gY(s,i));return e}function gY(t,i){return uY(i||{},t.hA,t.Sst||[],[t.IP])}function wY(t){return t?t.Uct.map((i=>{const e=AY(t.mj,i.dm),s=t.Bct.Rct;return{dm:i.dm,iP:i.iP,_z:i._z,JP:[{initDataTypes:[i.dm._L],audioCapabilities:vY(t.Qct,s,null==e?void 0:e.audioRobustness),videoCapabilities:vY(t.Fct,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]}})):[]}function AY(t,i){switch(i.hA){case Ci.qv:return t.widevine;case Ci.Hv:return t.playready;case Ci.Xv:return t.fairplay;case Ci.Zv:return t.clearkey}}function vY(t,i,e){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:i,robustness:e})))}r(),r();var mY=class extends $n{jct(t){const i=this.cE.uE(Pt.Mp,t.o,"thumbnails","",!1,Ks.DEFAULT);return i.eA=Ht.Xn,this.Cct(i),i}async $n(i){await this.Zn(),this.Wot=i,this.Wot.yn(t.QA,this.Qn),this.Qn()}Yct(t){this.Gct(t),this.Vct()}Vct(){const t=[];for(const i of this.Z.xw)this.Wct(i)||t.push(i);for(const i of t)this.it(i)}Gct(t){const i=[];for(const e of this.grt)-1===t.indexOf(e)&&i.push(e);for(const t of i)Et(this.grt,t)}async Zn(){this.Wot&&(this.Wot.fn(t.QA,this.Qn),this.Wot=void 0);for(const t of this.grt)t.fn(xl.Bnt,this.Hct);this.grt.length=0;for(const t of this.Z.xw)this.cE.AE(t);await super.Zn()}gn(){return this.Hct=void 0,super.gn()}qct(){var t,i;const e=null!=(i=null==(t=this.Wot.Ont())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.xw)gy(t,e)}Xct(t){return this.Z.xw.some((i=>i.o===t.o))}Zct(t){return H_(this.Z.xw,(i=>i.o===t.o))}Wct(t){return this.grt.some((i=>t.o===i.o))}constructor(t){super(),this.grt=[],this.Qn=()=>{const t=[];for(const i of this.Wot.Tnt)for(const e of i.lnt)if(e.hA===iv.ZT&&e.nnt.length>0){const i=e.nnt[0];t.push(i),this.Xct(i)||this.jct(i),-1===this.grt.indexOf(i)&&(this.grt.push(i),i.yn(xl.Bnt,this.Hct)),this.Kct(i)}this.Yct(t)},this.Kct=t=>{const i=this.Zct(t);i&&t&&i.eA!==Ht.Ch&&(this.qct(),function(t,i){const e=t.pst,s=t.hrt();if(!s)return;const n=s.jrt,r=s.zrt,h=t.ji,o=t.Ti,[a,u]=function(t){for(const i of t)if(Ei(i.nst,yY)||Ei(i.nst,MY)){const t=i.IT.match(pY);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.Ist);let c=n;for(;c&&c.ast<=r.ast;){const s=t.trt.ct||c.ct,n=TY(i,c,t.nrt(c).zu,h,o,a,u,s);for(const t of n)i.gE(t);c=e.Urt(c)}}(t,i))},this.cE=t;const i=this;this.Hct=function(){i.Kct(this)}}},pY=/^(\d+)x(\d+)$/,yY="http://dashif.org/guidelines/thumbnail_tile",MY="http://dashif.org/thumbnail_tile";function TY(t,i,e,s,n,r,h,o){const a=[],u=i.zN,c=r*h,l=s/r,d=n/h,f=x.round(l),_=x.round(d),g=o/c;if(1===c){const i=u+g;return NY(t,u,i,e)?a:[new yn(u,i,e,!1)]}for(let s=0;s<h;s++)for(let n=0;n<r;n++){const h=u+(s*r+n)*g,o=h+g,c=e+"#xywh="+x.round(n*l)+","+x.round(s*d)+","+f+","+_;if(NY(t,h,o,c)||a.push(new yn(h,o,c,!1)),o>=i.PN)return a}return a}function NY(t,i,e,s){return t.L.xw.some((t=>t.zN===i&&t.PN===e&&t.O===s))}r(),r(),r(),r();var DY=class extends yn{get ST(){return this.Jct}get IT(){return this.$ct}get tlt(){return this.ilt}get va(){return this.Xa||(this.Xa=function(t){return Ou(Oh(t),{get schemeIDURI(){return t.ST},get value(){return t.IT},get emsgID(){return t.tlt}})}(this)),this.Xa}tD(t){return Xi(this.O,t.O)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.Jct=e,this.$ct=s,this.ilt=n}},SY=class t extends $n{elt(i,e,s){const n=Qi.wy(Ao(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)WA(s,i)&&e.push(s);return e}(n,At.dp);if(r.length){const i=t.slt(n,e,s);this.nlt(r,i,s)}}nlt(t,i,e){for(const s of t){let t;t=1===s._y?s.ET.toNumber()/s.zy+e:i+s.kT/s.zy;const n=t+s.bT/s.zy;"https://aomedia.org/emsg/ID3"===s.ST?this.rlt(s,t):this.hlt(s,t,n)}}hlt(t,i,e){const s=nY(t.ST,t.IT);let n=this.xct(s);n||(n=this.olt(s),this.Cct(n)),n.gE(new DY(i,e,t.ST,t.IT,t.o,t.LT))}rlt(t,i){const e=JC(Ao(t.LT));if(!e)return;const s=nY(t.ST,t.IT);let n=this.xct(s);n||(n=this.ult(s),this.Cct(n));for(const t of e.B0){const e=new ox(i,t);DC(e,n.L.xw),n.gE(e)}}static slt(t,i,e){const s=HA(t,At.fp);return s?B(s.YT,s.zy)+e:i}olt(t){const i=this.cE.uE(Pt.Mp,"","","",void 0,Ks.EMSG);return i.iA=t,i.eA=Ht.sA,i}ult(t){const i=this.cE.uE(Pt.Mp,"","","",void 0,Ks.ID3);return i.iA=t,i.eA=Ht.sA,i}async Zn(){for(const t of this.Z.xw)this.cE.AE(t);await super.Zn()}constructor(t){super(),this.cE=t}},IY=class extends SY{async $n(i){await this.Zn(),this.Wot=i,this.Wot.yn(t.QA,this.Pct),this.Pct()}async Zn(){this.Wot&&(this.Wot.fn(t.QA,this.Pct),this.Wot=void 0),await super.Zn()}constructor(...t){super(...t),this.Pct=()=>{var t,i;const e=null!=(i=null==(t=this.Wot.Ont())?void 0:t.Cn)?i:0;this.SI(e)}}};r(),r();var EY=class{eet(t,i){return this.clt?this.Ict.eet(t,i):Promise.resolve(!1)}ret(t,i){return this.clt?this.Ict.ret(t,i):Promise.resolve(void 0)}async $it(t){const i=await this.Ict.$it(t);return this.clt=void 0!==i,i}iH(t){return this.Ict.iH(t)}constructor(t){this.clt=!1,this.Ict=t}},bY=[t.VA,t.HA,t.KA,t.FA,t.JA],LY=[t.WA,t.uv,t.OA,t.CA],kY=class e extends i{async llt(i,e,s,n){const r=this.dlt(this.dE,this.vR,this.Ict,this.bc,i,n);return r.yn(xl.Unt,this.flt),r.yn(t.FA,this.Ds),await r.JV(e,s),r}_lt(t){void 0===t&&(t=!1),this.glt.c_(),this.h2.c_(),this.wlt.c_(),this.wlt=new Po,this.Alt=this.vlt(this.plt,this.o2,this.Alt,t,this.wlt.a_).catch(this.ylt)}async vlt(t,i,e,s,n){await Promise.all([t,i,e]),Pi(n),await hl(this.Mlt.OL,n);const r=this.Tlt;await r.Nlt(),this.lJ(),Pi(n);const h=r.yc,o=r.Dlt,a=r.Slt;let u=this.Ilt(h,a,h,o,!1),c=this.Elt(a,u);!s&&this.blt(c)?await this.Llt(a,u,c):(u=this.Ilt(h,a,h,o,!0),c=this.Elt(a,u),await this.klt(a,u,c,n)),Pi(n),this.Tg?this.Dp(this.j_):this.Clt(),this.xlt()}async Llt(t,i,e){const s=this.Tlt;await this.Olt(e),this.jlt=e,await this.zlt(s,t,i),await s.Plt(Eu.Aut)}async klt(t,i,e,s){const n=this.Tlt;this.d2(),this.Blt();const r=this.Rlt;await this.Ult(),await this._$(e),this.jlt=e,await this.zlt(n,t,i);try{const t=this.Qlt(r,!1,!0,s);await n.Plt(Eu.Aut),await t}finally{this.m2(),this.Flt()}}get ht(){return this.nN}get _P(){const t=this.Rlt,i=this.Ylt,e=i.HB(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get Ylt(){var t,i,e;const s=null!=(e=null==(t=this.Tlt)?void 0:t.b_)?e:Ki.aR();var n;const r=null!=(n=null==(i=this.Glt)?void 0:i.b_)?n:Ki.aR();return s.GB(r)}get b_(){return this.Ylt.ks()}get k_(){var t;const i=null==(t=this.Gnt)?void 0:t.Znt,e=null==i?void 0:i.gnt;if(!i||!e)return;const s=e.getTime(),n=1e3*this.j_;return new Date(n+s)}set k_(t){var i;const e=null==(i=this.Gnt)?void 0:i.Znt,s=null==e?void 0:e.gnt;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Dp(r-n)}get Rlt(){return void 0!==this.L4?this.L4:void 0!==this.Vlt?this.Vlt:this.gP.j_}get j_(){return this.Rlt}set j_(t){this.Dp(t,t===1/0)}get ct(){let t=NaN;return this.Tlt&&this.Tlt.Wlt?t=this.Tlt.jn:this.Gnt&&void 0!==this.Gnt.Znt.hA&&(t=this.Gnt.Znt.pnt?this.Gnt.Znt.pnt.qet():1/0),t}get jn(){return this.ct}get R_(){return!(!this.Tlt||!this.Tlt.Wlt)&&(this.Tg?this.Rlt===this.Tlt.jn:this.gP.R_)}get lt(){return this.vP}get F_(){return this.mP}get G_(){}Hlt(){var t;const i=this.qlt;if(0===i.U)return!0;var e;return(null!=(e=null==(t=this._P)?void 0:t.jn)?e:this.Rlt)>=i.Cn(0)}Xlt(){var t;if(!this.Gnt)return!1;if(this.Gnt.Znt.hA!==Q.LO)return!1;const i=null==(t=this.Tlt)?void 0:t.yc;if(i&&i.Qnt)return!0;const e=[];for(const t of this.Gnt.Znt.Tnt){const i=t.xnt,s=t.Bot;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new Ki(e).YB();return function(t,i,e){if(!i.U||!e.U)return Ki.aR();const s=i.Cn(0),n=i.jn(i.U-1),r=t.Sn(e).UB().Sn(t).GB(i);return Ki.oR(r.Cn(0),r.jn(r.U-1)).VB(r).$B(((t,i)=>t<s&&i<=n&&i-t>Dc))}(this.Ylt,this.qlt,s).U>0}get q_(){return oe({},this.Zlt,{lN:ca.dL.Bz(),dN:this.Klt,fN:{amountOfBufferedAudioSegments:this.Jlt,amountOfBufferedVideoSegments:this.$lt}})}get hg(){return this.x4?this.tdt:this.Tlt&&this.Tlt.Wlt?this.idt:this.tdt}get fg(){let t=this.Uo;return this.Tlt&&(t=t.GB(this.edt)),t.YB(.1).ks()}sdt(t){this.Uo=this.Uo.GB(t)}get gg(){return this.yP}set gg(t){this.yP=t,this.ndt()}get vg(){let t=this.gP.vg;return this.rdt&&(t=x.max(rv.Gn,t)),t}get qlt(){return this.hdt(!1)}get odt(){return this.hdt(!0)}get yg(){return this.qlt.ks()}get Tg(){return this.cR||this.adt}get TP(){}get udt(){var t,i;return null!=(i=null==(t=this.Gnt)?void 0:t.Znt.hA)?i:Q.bO}get nt(){return this.Dl}get rt(){return this.hN}get Sg(){var t;return this.cdt||(null==(t=this.ldt())?void 0:t.Ti)||0}get Lg(){var t;return this.ddt||(null==(t=this.ldt())?void 0:t.ji)||0}get zg(){return this.NP}get Bg(){return!1}set Bg(t){}get DP(){return this.SP}fdt(i){i.yn(bY,this.Ds),i.yn(t.rv,this._dt),i.yn(t.MA,this.gdt),i.yn(Bi.ha,this.wdt),i.yn(t.NA,this.Adt),i.yn(t.HA,this.vdt),i.yn("Xat",this.mdt),i.yn("pdt",this.mdt)}ydt(i){i.fn(bY,this.Ds),i.fn(t.rv,this._dt),i.fn(t.MA,this.gdt),i.fn(Bi.ha,this.wdt),i.fn(t.NA,this.Adt),i.fn(t.HA,this.vdt),i.fn("Xat",this.mdt),i.fn("pdt",this.mdt)}Mdt(i){i.yn(t.VA,this.Ds)}Tdt(i){i.fn(t.VA,this.Ds)}ldt(){if(!this.Tlt)return;const t=H_(this.Tlt.Slt,(t=>t.uut===iv.vp));return t?t.Gw:void 0}hdt(t){var i;const e=null==(i=this.Gnt)?void 0:i.Znt;if(!e)return Ki.aR();const s=e.yat;let n=t?e.zot:e.mrt;if(void 0===s||void 0===n)return Ki.aR();if(!t){const t=this.edt;t.U>0&&t.jn(t.U-1)>n&&(n=x.min(t.jn(t.U-1),e.zot))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),Ki.oR(s,n).BB()}async $n(t,i){let e,s;Pi(i);try{e=this.Gnt.Znt.Mat,s=this.Gnt.Znt.pat}catch(t){throw new b("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new b("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new b("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.Ndt(t.textTracks),this.d2();const n=this.Ddt(e),r=jr(e,n,void 0,void 0,this.Sdt),h=this.Ilt(e,r,e,r,!0);r.forEach((t=>t.Rt=!0));const o=this.Elt(r,h);await this._$(o),this.jlt=o,Pi(i);const a=await this.llt(e,n,r,h);Pi(i),this.Idt(a),this.m2(),Pi(i),await a.Plt(),Pi(i),this.Edt||this.Dp(s,!0,jF.ect)}Clt(){this.glt.c_(),this.glt=new Po,this.plt=this.bdt(this.plt,this.Alt,this.glt.a_).catch(this.ylt)}Ldt(){this.glt.c_()}async bdt(t,i,e){for(await Promise.all([t,i]),Pi(e);;){var s;const t=null==(s=this.Tlt)?void 0:s.yc;if(!t){0;break}if(!await this.kdt(t,e)){0;break}}}async kdt(t,i){var e;Pi(i);const s=this.Tlt;for(0;this.Gnt.Znt.hA===Q.LO&&void 0===(null==(e=this.xot(t))?void 0:e.xnt);)await hl(this.Cdt.Pat,i),await this.xdt();for(Pi(i),await this.xdt(),Pi(i);!s.Odt();)await s.D_(Ar.sct,i),await this.xdt();Pi(i),await this.xdt(),Pi(i);const n=this.xot(t);return n?(this.jdt(n)?await this.zdt(n,i):await this.Pdt(n,i),!0):(this.yJ(),!1)}jdt(t){var i,e,s,n,r;const h=null!=(r=null==(i=this.bc)?void 0:i.seamlessSwitchStrategy)?r:wo.HT;if(h===wo.JT)return!0;if(h===wo.$T)return!1;const o=this.Tlt,a=null==o?void 0:o.yc,u=null==o?void 0:o.Slt,c=jr(t,this.Ddt(t),a,u,this.Sdt),l=this.Ilt(t,c,a,u,!1);if(h===wo.CLEAR_ONLY&&((null==(e=this.Tlt)?void 0:e.Bdt)||l)||h===wo.SAME_DRM_ONLY&&!((null==(s=this.Tlt)?void 0:s.Bdt)&&l||!(null==(n=this.Tlt)?void 0:n.Bdt)&&!l))return!1;const d=this.Elt(c,l);return this.blt(d)}Rdt(){return!1}Udt(t){const i=this.Qdt();for(const e of i)e!==t&&(e.eA=Ht.Ch)}xlt(){if(void 0!==this.Fdt){if(this.Fdt.rA){const t=H_(this.ht.xw,(t=>t.Rt));void 0!==t&&this.Fdt.gs===t.gs||(this.Fdt.eA=Ht.Ch)}}else this.Ydt()}Ydt(){if(this.Qdt().length)return;const t=H_(this.ht.xw,(t=>t.Rt));if(void 0===t)return;const i=this.nt.xw.filter((t=>t.rA));for(const e of i)if(e.gs===t.gs)return e.eA=Ht.Xn,void(this.Fdt=e)}Qdt(){return this.nt.xw.filter((t=>t.eA===Ht.Xn&&(t.zt===Pt.fI||t.zt===Pt.pp)))}Gdt(t){if(t&&this.Fdt){const i=function(t,i){if(""===t.gs)return;return i.filter((i=>i.gs===t.gs))[0]}(this.Fdt,t.nt.xw);i&&(i.eA=Ht.Xn)}}async zdt(i,e){var s,n;const r=this.Tlt;let h=this.Glt;const o=this.jlt;try{Pi(e);const s=r.yc,n=r.Slt,o=this.Ddt(i),a=jr(i,o,s,n,this.Sdt),u=this.Ilt(i,a,s,n,!1);a.forEach((t=>t.Rt=!0));const c=this.Elt(a,u);for(0,await r.Nlt(),this.lJ(),Pi(e),h&&h.yc===i?(this.blt(c)&&await this.Olt(c),this.jlt=c):(h&&await h.gn(!0),this.blt(c)&&await this.Olt(c),this.jlt=c,h=await this.llt(i,o,a,u),this.Glt=h,this.Mdt(h),this.Vdt.Pw=h.nt),await h.Plt(),Pi(e);this.Rlt<i.Cn;)await this.gP.D_(t.ov,e);Pi(e),this.Idt(h)}catch(t){throw Oi(t)&&(h&&await h.Nlt(),o&&this.jlt!==o&&(this.blt(o)&&await this.Olt(o),this.jlt=o)),t}(null==(s=this.bc)||null==(n=s.dash)?void 0:n.forceSeekToSynchronize)&&await this.Wdt(i,e)}async Wdt(t,i){const e=Date.now()/1e3;if(void 0===this.Hdt)this.Hdt=e;else if(e-this.Hdt>900){this.Hdt=e,this.Blt();const s=x.max(this.Rlt,t.Cn);try{await this.Qlt(s,!1,!0,i)}finally{this.Flt()}}}async Pdt(i,e){for(Pi(e),await this.Tlt.Nlt(),this.lJ(),await this.qdt(i.Cn),Pi(e),this.yJ();!this.gP.R_&&this.Rlt<i.Cn;)await this.gP.D_([t.ov,t.kA],e);Pi(e);const s=this.Tlt.yc,n=this.Tlt.Slt,r=this.Ddt(i),h=jr(i,r,s,n,this.Sdt),o=this.Ilt(i,h,s,n,!0);h.forEach((t=>t.Rt=!0));const a=this.Elt(h,o);this.Tlt&&(this.Xdt.fn(Os.ra,this.Zdt),await this.Tlt.gn(),this.Xdt.yn(Os.ra,this.Zdt),this.Tlt=void 0),this.Glt&&(await this.Glt.gn(),this.Glt=void 0),this.Blt(),this.d2();const u=x.max(this.Rlt,i.Cn);await this.Ult(),await this._$(a),this.jlt=a;const c=await this.llt(i,r,h,o);this.Idt(c);try{const t=this.Qlt(u,!1,!0,e);await c.Plt(),await hu((i=>Promise.race([t,c.D_([Ar.sct],i)])),e)}finally{this.m2(),this.Flt()}}async xdt(){const t=this.Glt;t&&t.yc.Qnt&&(await t.gn(!0),this.Glt=void 0)}static Kdt(t,i){const e=i.some((t=>t.rnt.some((t=>"main"===t.IT)))),s=i.map(((t,i)=>{const s=function(t,i){const e=t.filter((t=>"urn:mpeg:dash:role:2011"===t.nst)).map((t=>t.IT)).filter(j_);if(i||na(e,"main"))return na(e,"caption")?"captions":na(e,"subtitle")?"subtitles":na(e,"dub")?"translation":"main";if(na(e,"sign"))return"sign";if(na(e,"description"))return"descriptions";if(na(e,"commentary"))return"commentary";return"alternative"}(t.Hst.concat(t.rnt),!e&&0===i),n=t.nnt.map((t=>t.Jnt));return new CF(t,n,s)}));return new TF(t,s)}Ddt(t){const i=[],s=[];for(const e of t.Eot)e.hA!==iv.mp&&e.hA!==iv.vp||(0===e.nnt.length?this.Co(new GF("No supported representation found in the AdaptationSet with mimetype : "+e.hA)):e.hA===iv.mp?i.push(...e.lnt):s.push(...e.lnt));const n=[];return i.length>0&&n.push(e.Kdt(iv.mp,i)),s.length>0&&n.push(e.Kdt(iv.vp,s)),n}Elt(t,i){var e,s,n,r,h,o,a,u,c;const l=t.map((t=>qF.pct(null!=(c=t.aut)?c:t.nnt,Dv(t.uut,this.Sdt)))).map((t=>({IP:t.IP}))),d=null==(e=this.bc)||null==(s=e.dash)?void 0:s.desiredTimescale;var f;const _=(null==(n=this.bc)?void 0:n.seamlessSwitchStrategy)!==wo.$T&&(null==(r=this.bc)?void 0:r.seamlessSwitchStrategy)!==wo.CLEAR_ONLY&&(null==(h=this.bc)?void 0:h.seamlessSwitchStrategy)!==wo.SAME_DRM_ONLY&&(null!=(f=null==(o=this.bc)||null==(a=o.dash)?void 0:a.needsTimescaleShifting)?f:ag.Ys.AJ),g=null==(u=this.bc)?void 0:u.useManagedMediaSource;return{hA:wt.LO,D$:l,EP:wY(i),l4:null==i?void 0:i.l4,AJ:_,vJ:d,j$:g}}static Jdt(t,i){if(!t.length)return;let e;for(const s of t)e=cY(e,_Y(s.Fnt,i));return(null==i?void 0:i.preferredKeySystems)&&e&&(e.Uct=function(t,i){const e=t=>{const e=i.indexOf(t.dm.wL);return e>=0?e:i.length};return Xc(t,((t,i)=>e(t)-e(i)))}(e.Uct,i.preferredKeySystems)),e}Ilt(t,i,s,n,r){var h,o;const a=this.bc.contentProtection;let u=e.Jdt(i,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(h=this.bc)?void 0:h.seamlessSwitchStrategy)?c:wo.HT;if(l===wo.$T||l===wo.CLEAR_ONLY||l===wo.SAME_DRM_ONLY)return;const d=null==(o=this.Tlt)?void 0:o.Bdt;if(!r&&void 0!==d){const t=!d.l4;if(l===wo.HT&&t&&!this.Rdt())return;return d}const f=!r&&l===wo.HT;return u=this.$dt(t,a,s,n,f),void 0!==u?(u.l4=!0,u):void 0}$dt(t,i,s,n,r){let h=t,o=!1;for(;;){if(h=o?this.jot(h):this.xot(h),void 0===h){if(o)return;o=!0,h=t;continue}const a=jr(h,this.Ddt(h),s,n,this.Sdt),u=e.Jdt(a,i);if(r){const t=this.Elt(a,u);if(!this.blt(t))return}if(void 0!==u)return u}}Gg(){this.hg||(this.tdt=!0,this.x4||(this.tft(new sa),this.ift()),this.eft())}Vg(){this.sft||(this.sft=new No),this.nft();const t=this.sft.OL;return W(t),t}nft(){if(this.tdt=!1,this.V4=!0,this.ndt(),this.R_){const t=this.qlt;t.U>0&&this.Dp(t.Cn(0))}this.x4||this.H4().then(this.rft,this.tft),this.flt(),this.eft()}d2(){this.x4||(this.tdt=this.hg,this.x4=!0,this.ift())}m2(){this.x4&&(this.x4=!1,this.tdt||this.H4().then(this.rft,this.tft),this.flt(),this.eft())}eft(){const t=this.YO,i=this.hg;t!==i&&(this.YO=i,i?this.Co(new ws(this.j_)):this.Co(new vh(this.j_)))}Dp(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=jF.ict),this.Edt=!0,this.glt.c_(),this.h2.c_(),this.cR=!0,this.L4=t,this.sdt(this.edt),this.hft(new Ot(this.j_)),this.h2=new Po,this.o2=this.a2(t,this.plt,this.o2,this.Alt,this.h2.a_,i,e).catch(this.ylt),this.o2}oft(){this.h2.c_()}async a2(t,i,e,s,n,r,h,o){void 0===r&&(r=!1),void 0===h&&(h=jF.ict),void 0===o&&(o=!1);try{var a,u;0,await Promise.all([i,e,s]),Pi(n),await hl(this.Mlt.OL,n);const c=this.qlt.RB(t);this.L4=c;const l=o||(null==(a=this.bc)||null==(u=a.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&c<=this.j_,d=this.aft(c),f=this.Tlt;if(l||!f||!f.yg.gr(c)&&h!==jF.ect&&f.yc!==d){if(d){let t=this.Glt;if(this.d2(),f&&await f.Nlt(),t&&t.yc===d&&!l){const i=this.Elt(t.Dlt,t.Bdt);this.lJ(),this.blt(i)&&await this.Olt(i),this.jlt=i}else{t&&await t.gn(!0);const i=this.Ddt(d),e=null==f?void 0:f.yc,s=null==f?void 0:f.Slt,n=jr(d,i,e,s,this.Sdt);let r=this.Ilt(d,n,e,s,!1);n.forEach((t=>t.Rt=!0));let h=this.Elt(n,r);this.jdt(d)&&!l?(this.lJ(),this.blt(h)&&await this.Olt(h)):(r=this.Ilt(d,n,e,s,!0),h=this.Elt(n,r),f&&(this.Xdt.fn(Os.ra,this.Zdt),await f.gn(),this.Xdt.yn(Os.ra,this.Zdt),this.Tlt=void 0),await this.Ult(),await this._$(h)),this.jlt=h,t=await this.llt(d,i,n,r),this.Glt=t,this.Vdt.Pw=t.nt,this.Mdt(t)}await t.Plt(Eu.mut),this.Idt(t)}}else{0;const t=this.Glt;if(t&&!t.uft){await t.Nlt(),this.lJ();const i=this.Elt(f.Dlt,f.Bdt);this.blt(i)&&await this.Olt(i),this.jlt=i}}0;const _=this.Qlt(c,r,!1,n);this.L4=void 0,await this.Tlt.Plt(Eu.mut),Pi(n),this.Clt(),await _,Pi(n),this.m2(),this.cR=!1,this.cft(new $s(this.j_))}catch(t){if(Oi(t))return void 0;0}}async Qlt(i,e,s,n){let r,h,o=!0,a=i;for(;;){const u=this.odt;if(u.U>0){const t=u.RB(i);a!==t&&(u.gr(a)&&this.Gnt.Znt.hA===Q.LO||(a=t,o=!0))}if(o)o=!1,r&&W(r),null==h||h.c_(),h=new Po,h.l_(n),r=this.lft(a,e,s,h.a_);else if(!this.adt&&!this.B$)break;await hu((i=>Promise.race([r,this.D_([t.KA,t.EA],i),this.Gnt.Znt.D_(xl.Bnt,i)])),n)}}Blt(){void 0===this.Vlt&&(this.Vlt=this.Rlt,this.gP.fn(t.ZA,this.hft),this.gP.fn(t.XA,this.cft))}Flt(){if(void 0===this.Vlt)return;const i=this.Rlt;this.Vlt=void 0,this.gP.yn(t.ZA,this.hft),this.gP.yn(t.XA,this.cft),this.Rlt!==i&&this.wc()}dft(t){this.Uo=this.Uo.GB(t)}aft(t){const i=this.Gnt.Znt;let e=i.Tnt;if(ag.Ys.utt&&(e=e.filter((t=>t.ct>=.2))),0===e.length)return;const s=e[0];if(t<=s.Cn)return s;for(const i of e)if(i.jn>t)return i;return i.hA!==Q.LO?e[e.length-1]:void 0}jot(t){let i=t.Oot;if(ag.Ys.utt)for(;i&&i.ct<.2;)i=i.Oot;return i}xot(t){let i=t.Cot;if(ag.Ys.utt)for(;i&&i.ct<.2;)i=i.Cot;return i}async ga(i,e,s){if(this.fft(),this.bc&&!zv(this.bc)&&await this.Zn(),!i||zv(i))return;this.wE=new Po,s&&this.wE.l_(s),this.bc=i,this._ft=e,this.Sdt=i.abr,this.gft=i.ignoreEmbeddedTextTrackTypes;const n=tY(new ZF(this.dE,Boolean(this.bc.useCredentials),this.Mct),this.Ict);this.mat(!0),this.Cdt=new yF({oA:ag.Dh(this.bc.src),Dat:this.bc.liveOffset,Lat:this.bc.timeServer,hE:this.bc.useCredentials},this.wft(this.Sdt),this.dE,n,this.bc.dash),this.Gnt=this.Cdt.Tr,this.Gnt.Znt.yn(t.UA,this.Aft),this.Gnt.Znt.yn(t.QA,this.vft),this.Gnt.Znt.yn(Mr.Yot,this.mft),this.Gnt.Znt.yn(xl.Bnt,this.flt),await this.pft.$n(this.Gnt.Znt),await this.yft.$n(this.Gnt.Znt),na(this.gft,Ks.EMSG)||(this.Mft=new IY(this.cE),this.Dl.nP(this.Mft.Z),await this.Mft.$n(this.Gnt.Znt)),this.ndt()}async Tft(){const t=this.Gnt.Znt.eg;var i,e;(this.mat(t),t)?this.mdt():(await Promise.all([null==(i=this.Tlt)?void 0:i.Nlt(Eu.jut),null==(e=this.Glt)?void 0:e.Nlt(Eu.jut)].filter(j_)),this.Ldt(),this.oft(),this.wlt.c_())}get eg(){return this.vat}mat(t){this.vat!==t&&(this.vat=t,this.Co(t?new eY:new sY))}ndt(){return this.Gnt?(this.Nft=this.Dft(this.Nft,this.wE.a_),this.Nft.catch(this.ylt)):Promise.resolve()}async Dft(t,i){t&&(await t,Pi(i));try{this.gg===ii.HT||this.V4?await this.Sft(i):this.gg===ii.Mp&&await this.Ift(i)}catch(t){throw yo(t),this.hB(new ce(le.MANIFEST_LOAD_ERROR,t.message,t)),t}}async Sft(t){await this.Ift(t),this.Eft||(this.Eft=!0,this.Mlt.l_(this.$n(this._ft,t)));try{await this.Mlt.OL}catch(t){yo(t),this.hB(new ce(le.MEDIA_DECODE_ERROR,t.message,t))}}async Ift(t){await hl(this.Cdt.W,t)}Idt(t){const i=this.Tlt;t!==i&&(this.Tlt&&this.ydt(this.Tlt),this.Glt&&this.Tdt(this.Glt),i&&this.sdt(this.edt),this.Tlt=t,this.Glt=i,this.fdt(this.Tlt),this.Glt&&this.Mdt(this.Glt),this.nN.Pw=t.ht,this.hN.Pw=t.rt,this.Gdt(t),this.Xdt.fn(Os.ra,this.Zdt),e.bft(this.Xdt),this.Xdt.yn(Os.ra,this.Zdt),this.Xdt.Pw=t.nt,this.Vdt.Pw=void 0,this.Ydt())}static bft(t){for(const i of t.xw)i.eA=Ht.Ch}ge(){this.LB=!0}be(){this.LB=!1}hB(t){this.vP||(W(this.Zn()),this.vP=ne(t),this.mP=t,this.Co(new me(t)))}fft(){this.vP=void 0,this.mP=void 0}async Zn(){this.ag=1,this.wE.c_(),this.oft(),this.Ldt(),this.wlt.c_(),this.Mlt.c_(),this.Edt=!1,this.Gg(),this.V4=!1,this.nN.Pw=void 0,this.hN.Pw=void 0,this.Xdt.Pw=void 0,this.Vdt.Pw=void 0,this.Nft&&(await this.Nft.catch(xs),this.Nft=void 0),await Promise.all([this.plt,this.o2,this.Alt,this.Mlt.OL.catch(xs)]),this.Tlt&&(await this.Tlt.gn(),this.Tlt=void 0),this.Glt&&(await this.Glt.gn(),this.Glt=void 0),await this.Ult(),this.jlt=void 0,this.Fdt=void 0,this.RP.Zn(),await this.pft.Zn(),await this.yft.Zn(),void 0!==this.Mft&&(this.Dl.oP(this.Mft.Z),await this.Mft.gn(),this.Mft=void 0),this.cE.Zn(),this.Gnt&&(this.Gnt.Znt.fn(t.UA,this.Aft),this.Gnt.Znt.fn(t.QA,this.vft),this.Gnt.Znt.fn(Mr.Yot,this.mft),await this.Cdt.gn(),this.Gnt=void 0),this.rdt=!1,this.Lft=NaN,this.kft=0,this.Cft=0,this.Vlt=void 0,this.x4=!1,this.Uo=Ki.aR(),this.YO=!0,this.L4=void 0,this.xft=!1,this.cR=!1,this.Eft=!1,this.Mlt=new No,this.Klt=0,this.Jlt=0,this.$lt=0,this.bc=void 0,this._ft=void 0,this.gft=[],this.Hdt=void 0}async gn(){this.Vo(),this.fft(),await this.Zn(),this.Vo(),this.nN.gn(),this.hN.gn(),this.Tlt&&await this.Tlt.gn(),this.Glt&&(this.Tdt(this.Glt),await this.Glt.gn()),this.Xdt.gn(),this.Vdt.gn(),this.Dl.gn(),this.RP.gn(),this.Oft.e_(),await this.pft.gn(),await this.yft.gn(),this.cE.gn(),this.gP.fn(t.EA,this.r3),this.gP.fn(sr.LA,this.y4),this.gP.fn(t.kA,this.e3),this.gP.fn(t.ZA,this.hft),this.gP.fn(t.XA,this.cft),this.gP.fn(t.qA,this.vdt),this.gP.fn(t.ov,this.wc),this.gP.fn([t.jh,t.Sh],this.jft),this.gP.fn(LY,this.Ds)}Rg(){return this.gP.ya}get W_(){return!1}Hg(){return!1}qg(){}Xg(){}Zg(){}Kg(){this._lt(!0)}constructor(i,e,s,n,r){super(),this.Tlt=void 0,this.Glt=void 0,this.V4=!1,this.Lft=NaN,this.vP=void 0,this.mP=void 0,this.x4=!1,this.Vlt=void 0,this.L4=void 0,this.xft=!1,this.kft=0,this.Cft=0,this.rdt=!1,this.wE=new Po,this.Mlt=new No,this.Eft=!1,this.Gnt=void 0,this.Cdt=void 0,this.vat=!0,this.tdt=!0,this.sft=void 0,this.Uo=Ki.aR(),this.yP=ii.MB,this.Nft=void 0,this.YO=!0,this.bc=void 0,this._ft=void 0,this.Sdt=void 0,this.gft=[],this.cR=!1,this.LB=!0,this.NP=new Mu,this.glt=new Po,this.plt=Promise.resolve(),this.h2=new Po,this.o2=Promise.resolve(),this.Edt=!1,this.wlt=new Po,this.Alt=Promise.resolve(),this.jlt=void 0,this.Mft=void 0,this.Klt=0,this.Jlt=0,this.$lt=0,this.SP=new DS,this._R=new Ro,this.Hdt=void 0,this.mdt=()=>{this._lt()},this.wc=()=>{this.Co(new Tc(this.j_,this.k_))},this.y4=t=>{this.Co(new zF(this.j_,t._L,t.SL))},this._dt=t=>{this.Klt+=t.dN,this.Co(t)},this.gdt=t=>{const i=t.segments.filter((t=>t.zft));t.track===iv.mp?this.Jlt=i.length:t.track===iv.vp&&(this.$lt=i.length)},this.r3=()=>{const t=this.ct;j(t)||t===this.Lft||(this.Lft=t,this.Co(new Mn(this.Lft)))},this.jft=()=>{this.flt(),this.eft()},this.e3=t=>{this.R_&&this.Co(t)},this.vft=t=>{this.Ds(t),this.rdt||(this.rdt=!0,this.Oft.Pft())},this.Aft=()=>{this.Gnt.Znt.fn(t.UA,this.Aft),this.Co(new ie)},this.Adt=t=>{this.hB(t.errorObject),this.Co(t)},this.wdt=t=>{this.hB(t.errorObject)},this.ylt=t=>{Oi(t)||this.hB(new ce(le.MEDIA_DECODE_ERROR,t.message,t))},this.flt=()=>{if(!this.hg)if(this.Hlt())if(this.Xlt()){const t=this.Gnt.Znt.pat;this.Dp(t,!0)}else;else{const t=this.Gnt.Znt.pat;this.Dp(t,!0)}},this.hft=t=>{this.xft=this.Tg,this.Co(t)},this.cft=t=>{const i=this.xft,e=this.Tg;this.xft=e,i&&!e&&this.Co(t)},this.vdt=()=>{const t=this.Lg,i=this.Sg;this.kft===t&&this.Cft===i||(this.kft=t,this.Cft=i,this.Co(new Ry))},this.Zdt=t=>{const i=t.Lt;i.eA===Ht.Xn?(this.Udt(i),this.Fdt=i):i===this.Fdt&&i.eA===Ht.Ch&&(this.Fdt=void 0,this.Ydt())},this.rft=()=>{this.x4||this.sft&&(this.sft.CL(),this.sft=void 0)},this.tft=t=>{this.x4||this.sft&&(this.sft.xL(t),this.sft=void 0)},this.mft=()=>{this.Tft().catch(this.ylt)},this.dE=i,this.vR=s,this.Ict=new EY(n),this.gP=r,this.nN=new _e,this.hN=new _e,this.gP.yn(t.EA,this.r3),this.gP.yn(sr.LA,this.y4),this.gP.yn(t.kA,this.e3),this.gP.yn(t.ZA,this.hft),this.gP.yn(t.XA,this.cft),this.gP.yn(t.qA,this.vdt),this.gP.yn(t.ov,this.wc),this.gP.yn([t.jh,t.Sh],this.jft),this.gP.yn(LY,this.Ds),this.Oft=new CY(this,this.gP),this.RP=new Su(this.Oft,!0),this.RP.yn(qo.Mv,this.flt),this.RP.yn(Wh,this.Ds),this.Xdt=new Ac,this.Xdt.yn(Os.ra,this.Zdt),this.Vdt=new Ac,this.cE=this.Bft(),this.pft=new hY(this.cE),this.yft=new mY(this.cE),this.Dl=new fh([this.Xdt,this.pft.Z,this.yft.Z]),this.Mct=e.retryConfiguration}},CY=class extends hD{get vg(){return this.Qo.vg}Pft(){this.Co(new ds(this.j_,this.vg))}constructor(t,i){super(i),this.Qo=t}};r(),r(),r(),r(),r(),r();var dn,xY=class{Rft(t,i,e){return Promise.resolve()}Uft(t,i,e,s){let n=[];if(s){const r={LS:i.zN,kS:i.PN,CS:e.pst.CS};s.hA===Ks.TTML?n=Rp(t,s,r,e.dY):s.hA===Ks.WEBVTT&&(n=Xm(t,r).L)}return n}Zn(){}};r(),r(),r(),function(t){t.Jm="vttc",t.Qft="vsid",t.Fft="iden",t.Yft="ctim",t.Gft="sttg",t.Vft="payl",t.Wft="vtte",t.Hft="vtta"}(dn||(dn={}));var OY=class t{static qft(i){return Boolean(t.Xft[i])}static wy(i){const e=[],s=Mi.Wp(new Rh(i,new Vr));for(const i of s)t.qft(i.hA)&&e.push(t.Xft[i.hA](i.Cp));return e}static Zft(i){const e=Mi.Wp(i),s=XA(e,dn.Qft),n=XA(e,dn.Fft),r=XA(e,dn.Yft),h=XA(e,dn.Gft),o=XA(e,dn.Vft);return{hA:dn.Jm,Kft:s?t.Jft(s):void 0,$ft:n?t.t_t(n):void 0,i_t:r?t.e_t(r):void 0,s_t:h?t.n_t(h):void 0,r_t:o?t.h_t(o):void 0}}static Jft(t){return{hA:dn.Qft,o_t:t.Pp()}}static t_t(t){return{hA:dn.Fft,$ft:t.Fp()}}static e_t(t){return{hA:dn.Yft,a_t:t.Fp()}}static n_t(t){return{hA:dn.Gft,u_t:t.Fp()}}static h_t(t){return{hA:dn.Vft,c_t:t.Fp()}}static l_t(t){return{hA:dn.Wft}}static d_t(t){return{hA:dn.Hft,f_t:t.Fp()}}};OY.Xft={[dn.Jm]:OY.Zft,[dn.Wft]:OY.l_t,[dn.Hft]:OY.d_t};var jY=class{Rft(t,i,e){const s=new DataView(t.__t),n=Qi.wy(s),r=H_(n,(t=>t.hA===At.Tm));return r&&(this.g_t=r.Z[0].Fy.iy.zy),Promise.resolve()}Uft(t,i,e){if(j(this.g_t))return[];const s=Ao(t),n=Qi.wy(s),r=HA(n,At.ep),h=HA(n,At.cp);if(!r||0===r.Z.length||!h)return[];const o=function(t,i,e){const s=t.Z[0],n=s.vT?s.vT.vT.toNumber()/e:i.zN,r=[];for(const t of s.AT)r.push(...t.NT);return{w_t:n,NT:r}}(r,i,this.g_t),a=e.pst.CS;return function(t,i,e,s){const n=OY.wy(Ao(i.Cp)),r=t.NT,h=t.w_t+s,o=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.ct)?u:0)/e;let l;s.hA===dn.Jm&&(l=zY(s,a,c,h)),l&&o.push(l),a+=c}return o}(o,h,this.g_t,a)}Zn(){this.g_t=NaN}constructor(){this.g_t=NaN}};function zY(t,i,e,s){if(!t.r_t)return void 0;const n=t.i_t?function(t){return ju(t.a_t,new Vr(0))}(t.i_t):i,r=s+n,h=r+e,o=t.r_t.c_t;return new Qs(r,h,o,!1)}r(),r(),r();var PY=class t extends ni{get Kat(){return this.Jat}set Kat(t){this.Jat=t}get Rt(){for(const t of this.Z.xw)if(t.eA!==Ht.Ch)return!0;return!1}async $n(t){await this.Zn(),this.A_t=t,this.Ddt(t)}Ddt(t){for(const i of t.lnt){const t=this.v_t(i);this.m_t(t,i),t.vg=ja.LOADED,this.tt(t)}}it(t){this.p_t(t),super.it(t)}kI(t){const i=this.y_t(t);if(i&&this.Kat!==i){this.Kat=i;for(const t of this.Z.xw)t!==i&&(t.eA=Ht.Ch)}}CI(t){const i=this.y_t(t);i&&this.Kat===i&&(this.Kat=void 0)}y_t(t){return H_(this.Z.xw,(i=>t.Vw===i.Vw))}m_t(t,i){this.M_t.set(t.Vw,i)}T_t(t){return this.M_t.get(t.Vw)}p_t(t){this.M_t.delete(t.Vw)}N_t(){if(!this.Kat)return;const i=this.T_t(this.Kat);return i?t.D_t(i):void 0}static D_t(t){return t.nnt&&t.nnt.length>0?t.nnt[0]:void 0}constructor(...t){super(...t),this.M_t=Ye()}};function BY(t,i){const e=i.$B(((i,e)=>t.ZB(i,e,!1,!1)));return t.GB(e)}function RY(t,i){const e=i.Sn(t.UB()).$B(((i,e)=>t.gr(e)));return t.GB(e)}r(),r(),r(),r();var UY,xn=class extends Jo{constructor(t,i,e){super("S_t"),this.Cn=t,this.jn=i,this.Jnt=e}},QY=class extends gg{constructor(){super("I_t")}};!function(t){t.E_t="b_t",t.L_t="k_t",t.C_t="x_t",t.$R="O_t"}(UY||(UY={}));var FY=[t.JA,t.rv,t.KA,t.MA],YY=class extends i{get j_t(){var t,i;return(null==(t=this.P_t.z_t)?void 0:t.Jnt)||(null==(i=this.P_t.B_t)?void 0:i.Jnt)}get R_t(){return this.U_t}set Q_t(t){this.P_t.Q_t=t}get Q_t(){return this.P_t.Q_t}get TI(){return this.F_t}Y_t(t){this.F_t!==t&&(this.F_t=t,this.Co(new QY))}get uut(){return this.U_t.Lt.uut}get lt(){return this.vP}async Cn(t){if(!this.G_t&&!this.V_t)return;const i=this.D_("I_t");this.G_t?(this.W_t.c_(),this.W_t=new Po,this.H_t(this.W_t.a_)):(this.q_t.CL(void 0),this.q_t=new No),await i}get G_t(){return"b_t"===this.F_t}get V_t(){return"k_t"===this.F_t}get X_t(){return"x_t"===this.F_t}get Z_t(){return"O_t"===this.F_t}async Wg(t){if(this.X_t||this.V_t)for(0,this.W_t.c_();!this.G_t&&!this.Z_t;)await this.D_("I_t")}async Zn(t){this.Z_t?(this.vP=void 0,this.Y_t("b_t")):await this.Wg(t),this.P_t.Zn(),this.U_t.Zn()}hB(t){this.vP=t,this.Y_t("O_t"),this.Co(new me(t))}K_t(){this.N4.yn(t.ov,this.od),this.N4.yn([t.ZA,t.zA],this.We),this.P_t.yn(FY,this.Ds),this.Ynt.yn(xl.Bnt,this.od)}J_t(){this.N4.fn(t.ov,this.od),this.N4.fn([t.ZA,t.zA],this.We),this.P_t.fn(FY,this.Ds),this.Ynt.fn(xl.Bnt,this.od)}async Nlt(t){this.J_t(),this.$_t.c_(),await this.Wg(null!=t?t:Eu.Put),this.P_t.Zn()}async Plt(t){this.K_t(),await this.Cn(null!=t?t:Eu.Mut)}async gn(){this.Vo(),this.J_t(),this.$_t.c_(),await this.Wg(Eu.But),this.P_t.gn()}async H_t(t){for(;;)try{Pi(t),this.Y_t("x_t"),await this.P_t.tgt(t),Pi(t),this.Y_t("k_t"),await hl(this.q_t.OL,t)}catch(t){if(Oi(t))this.Y_t("b_t");else{const i=t instanceof ce?t:new ce(le.MEDIA_LOAD_ERROR,t.message,t);this.hB(i)}break}}async igt(t){Pi(t),await this.Wg(Eu.zut),this.P_t.Zn(),Pi(t),await this.Cn(Eu.mut)}constructor(t,i,e,s,n){super(),this.egt=t,this.Ynt=i,this.U_t=e,this.P_t=s,this.N4=n,this.F_t="b_t",this.vP=void 0,this.q_t=new No,this.$_t=new Po,this.W_t=new Po,this.We=t=>{this.G_t||this.Z_t||!ag.Mit&&this.P_t.sgt(t.currentTime)||(this.$_t.c_(),this.$_t=new Po,this.igt(this.$_t.a_).catch(Ah))},this.od=oo((()=>{if(this.V_t){try{this.P_t.ngt();if(this.P_t.rgt())return}catch(t){if(!(t instanceof xn))throw t}this.Cn(Eu.yut)}}),250),this.K_t()}};r(),r();var GY=class t{hgt(t,i,e,s,n){return this.ogt(t,i,!1,e,n,s)}agt(t,i,e,s,n){return this.ogt(t,i,!0,e,n,s)}async ogt(i,e,s,n,r,h){Pi(h);const o=await this.ugt(i,s,n,r,h);return e?t.cgt(o):this.lgt(o)}lgt(t){return t}static cgt(t){return t}ugt(t,i,e,s,n){var r;const h=new nc({zu:t.zu,eE:nr.OI,tE:t.hst?{Range:"bytes="+t.hst[0]+"-"+(null!=(r=t.hst[1])?r:"")}:void 0,hE:t.hE,iE:Kc.GET,hA:zu.FI,nE:i?jo.VI:jo.KT,rE:this.dgt,NI:e,sE:s,a_:n});return this.dE.mI(h)}constructor(t,i){this.dE=t,this.dgt=i}};r(),r();var VY=class{fgt(t,i){const e=this._gt**t,s=i*(1-e)+e*this.f8;j(s)||(this.f8=s,this.ggt+=t)}wgt(){const t=1-this._gt**this.ggt;return this.f8/t}constructor(t){this.f8=0,this.ggt=0,this._gt=x.exp(x.log(.5)/t)}},WY=class{fgt(t,i){const e=8e3*i/t,s=t/1e3;this.Agt+=i,this.vgt.fgt(s,e),this.mgt.fgt(s,e)}wgt(){return this.lct()?x.min(this.vgt.wgt(),this.mgt.wgt()):this.pgt}lct(){return this.Agt>=this.ygt}constructor(t=2,i=5,e=128e3){this.Agt=0,this.pgt=NS,this.vgt=new VY(t),this.mgt=new VY(i),this.ygt=e}},HY=class{get cct(){return this.Mgt.wgt()}get lct(){return this.Mgt.lct()}Tgt(t){const i=t.Ngt,e=this.Dgt?t.Sgt-t.Igt:t.Sgt-t.Egt,s=t.bgt;!s&&i<this.Lgt||(s?this.Mgt.fgt(2*e,i):this.Mgt.fgt(e,i))}constructor(t,i){this.Dgt=i,!i||t!==iv.vp&&t!==iv.mp?(this.Lgt=16e3,this.Mgt=new WY):t===iv.vp?(this.Lgt=5e3,this.Mgt=new WY(.05,1,0)):(this.Lgt=0,this.Mgt=new WY(.005,.1,0))}};r(),r();var qY=["$A","hv"],XY=class extends i{async kgt(t,i){let e;for(const s of this.Cgt)try{return await s.kgt(t,i)}catch(t){yo(t),e=t}throw e}async xgt(t,i){let e;for(const s of this.Cgt)try{return await s.xgt(t,i)}catch(t){yo(t),e=t}throw e}gn(){for(const t of this.Cgt)t.fn(qY,this.Ds),t.gn()}constructor(t){super(),this.Cgt=t;for(const t of this.Cgt)t.yn(qY,this.Ds)}};r(),r(),r();var ZY=class{transform(t,i){this.Vd.write(t).catch(xs),i.enqueue(t)}flush(){this.Vd.close().catch(xs)}constructor(t){this.Vd=t}},KY=class{Ogt(){return new JY(sb(this.__t),this.jgt,this.zgt)}constructor(t,i,e){this.__t=t,this.jgt=i,this.zgt=e}},JY=class t{get OG(){return this.Pgt}qj(t){return qt(this.Pgt,t)}Sp(){const[i,e]=rb(this.Pgt);return this.Pgt=i,new t(e,this.jgt,this.zgt)}Bgt(){const[i,e]=function(t){const i=new xh,e=i.writable.getWriter(),s=new xh(new ZY(e));return t.pipeTo(s.writable).catch((t=>{e.abort(t).catch(xs)})),[s.readable,i.readable]}(this.Pgt);return this.Pgt=i,new t(e,this.jgt,this.zgt)}Rgt(t){return this.qj(t).then((t=>new KY(t,this.jgt,this.zgt)))}constructor(t,i,e){this.Pgt=t,this.jgt=i,this.zgt=e}};r();var $Y=class extends Jo{constructor(t,i,e){super(i,e),this.Aht=t}},tG="Cache lookup failed.",iG=class extends i{async kgt(t,i){Pi(i);const e=await this.Ict.ret(t.zu.zu,t.zu.hst);if(Pi(i),!e)throw new $Y(t,tG);const s=new KY(e.buffer,e.byteLength,e.reference);return{Aht:t.Aht,Ugt:{hA:at.bH,Cp:s},Jnt:t.Jnt,zu:t.zu}}async xgt(t,i){Pi(i);const e=await this.Ict.ret(t.zu,t.hst);if(Pi(i),!e)throw new $Y(t,tG);const s=new KY(e.buffer,e.byteLength,e.reference);return{hA:at.bH,Cp:s}}gn(){this.Vo()}constructor(t){super(),this.Ict=t}};r(),r(),r();var eG=class extends gg{constructor(t,i,e,s,n,r){super(t),this.Qgt=i,this.BQ=e,this.fT=s,this.Wy=n,this.rE=r}},sG=class extends eG{constructor(i,e,s,n,r){super(t.JA,i,e,s,n,r)}};r(),r();var nG=class{constructor(t,i){this.Fgt=t,this.Ygt=i}},rG=class extends nG{get Ngt(){return this.Ggt}start(){}transform(t,i){this.Ggt+=t.byteLength,i.enqueue(t)}flush(){this.Vgt(!1)}c_(){this.Vgt(!0)}Vgt(t){this.Fgt(this.Ygt,ag.f_(),this.Ngt,t)}constructor(...t){super(...t),this.Ggt=0}},hG=class extends nG{get Ngt(){return this.Ggt}start(){this.Ygt=ag.f_()}transform(t,i){this.Ggt+=t.byteLength,this.Wgt||this.Hgt(t)&&this.Vgt(!1),i.enqueue(t)}flush(){}c_(){this.Vgt(!0)}Hgt(t){const i=this.qgt(t),e=this.Xgt(i);return Boolean(H_(e,oG))}qgt(t){return this.Zgt&&void 0!==this.Kgt?(this.Zgt=Lh([this.Zgt,t]),new Rh(Ao(this.Zgt),new Vr(this.Kgt))):(this.Zgt=t,new Rh(Ao(t),new Vr))}Xgt(t){const i=Mi.Hp(t.Cp,t.xp,!0);return i.qp?(this.Zgt=void 0,this.Kgt=void 0):this.Kgt=t.xp.Ku,i.m}Vgt(t){this.Wgt||(this.Fgt(this.Ygt,ag.f_(),this.Ngt,t),this.Wgt=!0)}constructor(...t){super(...t),this.Ggt=0,this.Wgt=!1}};function oG(t){return t.hA===At.cp}var aG=class{Jgt(t){const i=t.qG?this.$gt:ag.f_(),e=this.twt(i),s=new xh(e),n=t.OG().pipeTo(s.writable).then((()=>({q_:{Ngt:e.Ngt}})),(t=>{throw e.c_(),t}));return this.iwt.l_(n),s.readable}ewt(t){const i=t.qG?this.$gt:ag.f_(),e=t.qj(),s=e.then((t=>{const e=ag.f_();return this.Tgt(i,e,t.byteLength,!1),{q_:{Ngt:t.byteLength}}}),(t=>{const e=ag.f_();throw this.Tgt(i,e,0,!0),t}));return this.iwt.l_(s),e}get swt(){return this.iwt.OL}constructor(t){this.nwt=t,this.iwt=new No,this.Tgt=(t,i,e,s)=>{const n={Egt:this.$gt,Igt:t,Sgt:i,Ngt:e,bgt:s};this.nwt.Tgt(n),this.nwt.lct&&ca.dL.jz(this.nwt.cct)},this.iwt.OL.catch(xs),this.$gt=ag.f_()}},uG=class extends aG{twt(t){return new rG(this.Tgt,t)}},cG=class extends aG{twt(t){return new hG(this.Tgt,t)}};r();var lG=class extends eG{constructor(i,e,s,n,r,h,o){super(t.rv,i,e,s,n,r),this.rwt=h,this.dN=o}};r();var Rn=class extends Jo{constructor(t,i,e){super("Error downloading segment "+dQ(i),t),this.hwt=i.zN,this.owt=i.PN,this.awt=e}},dG=class extends i{uwt(){return ag.vit}cwt(){return this.Dgt?new cG(this.nwt):new uG(this.nwt)}async kgt(t,i){Pi(i);const e=t.Jnt,s=t.zu,n=t.Aht,r=dQ(n),h=e.Jnt?e.Jnt.Vw:-1,o=function(t){return t.nnt.reduce(((t,i)=>t.Xz<i.Xz?t:i))}(e.Fnt)===e,a=n.ct*(o?3:1.2),u=1e3*x.max(a,1);this.Co(new sG(s,e.Xz,r,h,e.hA));try{const t=this.cwt(),o=await this.lwt.hgt(s,this.uwt(),u,i),a=await this.dwt(o,this.uwt(),i,t);return W(this.fwt(t.swt,e,s,r,h,o)),{Ugt:a,Jnt:e,Aht:n,zu:s}}catch(t){throw yo(t),new Rn(t,n,e)}}async xgt(t,i){Pi(i);const e=await this.lwt.agt(t,false,1e4,i);return await this.dwt(e,false,i)}async dwt(t,i,e,s){if(i){const i=s?s.Jgt(t):t.OG();return{hA:at.zI,Cp:new JY(i)}}{const i=s?await s.ewt(t):await t.qj(e);return{hA:at.bH,Cp:new KY(i)}}}async fwt(t,i,e,s,n,r){try{const h=await t;this.Co(new lG(e,i.Xz,s,n,i.hA,r.TI,h.q_.Ngt))}catch(t){}}gn(){this.Vo()}constructor(t,i,e){super(),this.lwt=t,this.nwt=i,this.Dgt=e}};var fG=class{_wt(t,i,e,s,n){const r=new iG(n),h=this.gwt(t,e,s);return new XY([r,h])}gwt(t,i,e){return new dG(t,i,e)}};r();var _G=.001,gG=class{get b_(){return this.wwt.b_}get Awt(){return this.wwt.Awt}get hq(){return this.wwt.hq}get vwt(){if(this.FJ.vg<rv.Gn)return!1;if(this.wwt.jn<=this.mwt&&this.wwt.pwt())return!0;const t=this.wwt._P;if(!t||0===t.U)return!1;const i=Ki.oR(this.N4.j_,1/0);return t.Sn(i).WB(this.wwt.hq).rR>=this.vR.sW}get mwt(){const t=this.wwt._P;let i;if(t&&t.U>0)i=t.jn(0);else{i=this.N4.j_;const t=this.wwt.hq,e=t.HB(i);e>=0&&(i=t.jn(e))}const e=this.wwt.yg.Cn(0);if(e>i){if(this.wwt.Cn<=i&&this.wwt.jn>=i&&e>i+_G)throw new xn(i,e);i=e}return i=this.wwt.ywt.RB(i),i}constructor(t,i,e,s){this.wwt=t,this.N4=i,this.FJ=e,this.vR=s}};r();var wG=class{get Mwt(){if(0===this.Kf.size)return Ki.aR();let t=Ki.oR(0,1/0);return this.Kf.forEach((i=>{t=t.Sn(i)})),t}Twt(){let t=Ki.aR();return this.Kf.forEach((i=>{t=t.GB(i)})),t}Nwt(t){let i=!1;return this.Kf.forEach((e=>{i=i||e.gr(t)})),i}Dwt(t,i){const e=this.Kf.get(i.o);return!!e&&e.gr(t)}qB(t,i){let e=!1;return this.Kf.forEach((s=>{e=e||s.qB(t,i)})),e}Swt(t,i){const e=this.Kf.get(i.o).GB(t);this.Kf.set(i.o,e)}Iwt(t){this.Kf.forEach(((i,e)=>{const s=i.GB(t);this.Kf.set(e,s)}))}Ewt(t){this.Kf.forEach(((i,e)=>{this.Kf.set(e,i.Sn(t))}))}Zn(){this.Kf.forEach(((t,i)=>{this.Kf.set(i,Ki.aR())}))}constructor(t){this.Kf=function(t){const i=Qt();for(const e of t)i.set(e.o,Ki.aR());return i}(t)}},AG=class{get bwt(){return this.Lwt}get hq(){return this.oq}kwt(t){for(const i of this.pet){if(i.Cwt>t)break;if(i.xwt>t)return i}}Owt(t){for(const i of this.pet){if(i.jwt>t)break;if(i.zwt>=t)return i}}Pwt(t,i){const e=[];for(const s of this.pet){if(s.Cwt>t)break;s.xwt>=i&&e.push(s)}return e}Bwt(){return this.pet}Rwt(t,i){const e=Ki.oR(t.jwt,t.zwt),s=e.UB();this.Lwt.Ewt(s),this.Lwt.Swt(e,i),this.Uwt(s);const n=Z_(this.pet,(i=>t.Cwt<=i.Cwt));if(n<0)this.pet.push(t);else{this.pet[n].xwt<=t.xwt?this.pet.splice(n,1,t):this.pet.splice(n,0,t)}}aq(t,i){this.oq.Swt(t,i)}Qwt(t){this.oq.Iwt(t)}Ewt(t){this.Lwt.Ewt(t),this.oq.Ewt(t);const i=this.Lwt.Twt();this.Uwt(i)}Uwt(t){this.pet=this.pet.filter((i=>t.ZB(i.jwt,i.zwt))).map((i=>i.zft&&!t.qB(i.jwt,i.zwt)?function(t,i){return{Cwt:t.Cwt,xwt:t.xwt,jwt:t.jwt,zwt:t.zwt,zft:i}}(i,!1):i))}Zn(){this.Lwt.Zn(),this.oq.Zn(),this.pet=[]}gn(){this.Zn()}constructor(t){this.pet=[],this.Lt=t,this.Lwt=new wG(t.nnt),this.oq=new wG(t.nnt)}};r(),r();var vG=class{get Q_t(){return this.Fwt}set Q_t(t){this.Fwt=t}get uut(){return this.U_t.Lt.uut}async Ywt(t,i,e){let s;Pi(e);const n=this.U_t.Owt(t);s=n&&Ua(n.zwt,t,1e-5)?x.max(n.xwt,t):t;const r=this.Gwt(s),h=function(t){return mG.bind(void 0,t)}(s);let o=await this.G7.Vwt(h,r,i,e);for(Pi(e);o&&this.Wwt(o.Aht);){const t=TG(o.Aht),s=o.Jnt;o=await this.G7.Vwt(t,[s],i,e),Pi(e)}if(!o)return void 0;if(!this.Hwt(o.Aht))return o;const a=this.qwt(o.Aht);if(t<a.Cn)return await this.findFirstNonAppendedSegmentBeforeSegment(o,i,e,a);if(t>=a.jn)return await this.findFirstNonAppendedSegmentAfterSegment(o,i,e);if(!o.Jnt.drt(o.Aht))throw new b("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=TG(s.Aht),r=t.Jnt;s=await this.G7.Vwt(n,[r],i,e),Pi(e)}while(s&&this.Hwt(s.Aht));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=MG(n.Aht),r=t.Jnt;n=await this.G7.Vwt(s,[r],i,e),Pi(e)}while(n&&this.Hwt(n.Aht));if(!n){0;const i=t.Jnt.Knt.Cn;throw new xn(i,s.Cn,t.Jnt)}return n}Xwt(t){return this.U_t.bwt.Nwt(t)}Zwt(t){return this.U_t.Pwt(t.zN,t.PN)}Hwt(t){const i=this.Zwt(t);return i.length>0&&function(t,i){return function(t){let i=Ki.aR();for(const e of t)i=i.GB(Ki.oR(e.Cwt,e.xwt));return i}(t).qB(i.zN,i.PN)}(i,t)&&i.every(NG)}Wwt(t){return this.U_t.hq.qB(t.zN,t.PN)}qwt(t){const i=this.Zwt(t);return{Cn:i[0].jwt,jn:i[i.length-1].zwt}}Gwt(t){const i=this.Kwt(t);if(0===i.length)return i;const e=i.filter((t=>!t.irt));return e.length>0?e:[i[i.length-1]]}Kwt(t){return(this.Fwt?this.Fwt:this.U_t.Lt.nnt).filter((i=>!this.U_t.hq.Dwt(t,i)))}constructor(t,i,e){this.egt=t,this.U_t=i,this.G7=e}};async function mG(t,i,e,s){const n=i.pst.Srt(t);if(n){if(i.art(n)){return(await i.urt(n,e,s)).Qht(t)}return n}}async function pG(t,i,e,s){if(fi(t)){if(0===t.Pnt)return;const n=i.pst.sht(t);if(!n)return;return(await i.urt(n,e,s)).zht(t.Pnt-1)}return i.pst.Wrt(t)}async function yG(t,i,e,s){if(fi(t)){const n=i.pst.sht(t);if(!n)return;const r=await i.urt(n,e,s);if(t.Pnt+1===r.U)return;return r.zht(t.Pnt+1)}return i.pst.Urt(t)}function MG(t){return pG.bind(void 0,t)}function TG(t){return yG.bind(void 0,t)}function NG(t){return t.zft}r();var DG=class{async Vwt(t,i,e,s){Pi(s);const n=this.Jwt(i,e);if(!n)return;const r=await t(n,this.$wt,s);if(!r)return;const h=n.nrt(r);return{Jnt:n,Aht:r,zu:h}}Jwt(t,i){if(0===t.length)return;const e=this.tAt.rct(t,this.iAt?i:void 0,this.wwt,this.vR.tW);return this.iAt||(this.iAt=!0),e}constructor(t,i,e,s){this.tAt=t,this.wwt=i,this.vR=e,this.$wt=s,this.iAt=!1}};r();var SG=class{async Vwt(t,i,e,s){Pi(s);const n=this.tAt.uct(i,e,this.wwt);if(!n.length)return;let r;for(const i of n)try{Pi(s);const e=await t(i,this.$wt,s);if(e){const t=i.nrt(e);if(await this.Ict.eet(t.zu,t.hst))return{Aht:e,Jnt:i,zu:t}}}catch(t){yo(t),r=t}if(r)throw r}constructor(t,i,e,s){this.tAt=t,this.wwt=i,this.Ict=e,this.$wt=s}};r();var IG=(t,i,e,s,n)=>t.filter((t=>n.OH(t)&&s.ltt(i,t)));r();var EG=(t,i,e)=>t.filter((t=>function(t,i,e){const s=e.cct;if(s<=0)return!1;return.8*s>t.Xz*e.ag}(t,0,e)));r();var bG=(t,i,e,s,n)=>{const r=e.gct;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].hA!==iv.vp)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Ti===e._ct&&s.ji===e.fct)return t.slice(0,i+1);if(s.Ti<e._ct||s.ji<e.fct)return t.slice(0,i+2)}return[]};r();var LG=class{async Vwt(t,i,e,s){let n;for(const r of this.eAt)try{const n=await r.Vwt(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.eAt=t}};r(),r();var kG=class{async _ot(t,i,e,s){let n;for(const r of this.sAt)try{return await r._ot(t,i,e,s)}catch(t){yo(t),n=t}throw n}constructor(t){this.sAt=t}};r();var CG=class{async _ot(t,i,e,s){var n;const r=await this.dE.mI({zu:t,eE:nr.OI,tE:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,hE:e,iE:Kc.GET,hA:zu.KT,a_:s});return await r.qj()}constructor(t){this.dE=t}};r();var xG=class{async _ot(t,i,e,s){const n=await this.Ict.ret(t,i);if(n)return n.buffer;if(i){const e=await this.Ict.ret(t);if(e)return Th(new T(e.buffer),i[0],i[1])}throw new $Y({zu:t,hst:i,hE:!1})}constructor(t){this.Ict=t}};r();var OG=1.05,jG=(t,i,e,s)=>{if(!1===e.gct)return t;if(s.ett)return t;const n=s.stt;var r;const h=(null!=(r=null==n?void 0:n.width)?r:e.fct)*OG;var o;const a=(null!=(o=null==n?void 0:n.height)?o:e._ct)*OG;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Ti<=a&&e.ji<=h)return t.slice(0,i+1)}return[]},zG=class{static M8(t,i,e,s,n,r,h,o,a,u){const c=function(t,i){return new kG([new xG(i),new CG(t)])}(r,h),l=new qF([IG],n,ag.Ys,o,a,u),d=new SG(l,i,h,c),f=new qF([EG,IG,bG,jG],n,ag.Ys,o,a,u),_=new DG(f,i,s,c),g=new LG([d,_]);return new vG(t,e,g)}};r();var PG=class{elt(t,i,e,s){return this.wwt.elt(t,i,e,s)}nAt(t,i,e){return this.wwt.Rft(t,i,e)}rAt(t,i,e){return this.wwt.rAt(t,i,e)}aq(t,i){this.wwt.aq(t,i)}uq(t,i){this.wwt.uq(t,i)}yJ(){this.wwt.yJ()}aW(){return this.wwt.aW()}constructor(t){this.wwt=t}};r(),r();var BG=class extends gg{constructor(i,e,s,n,r,h=0){super(t.KA),this.segmentStartTime=i,this.error=e,this.trackType=s,this.track=n,this.quality=r,this.retryCount=h}};r();var RG=class extends gg{constructor(i,e){super(t.MA),this.track=i,this.segments=e}},UG=class extends Jo{constructor(t,i){super(i),this.hAt=t}},QG=[t.JA,t.rv],FG=class extends i{get z_t(){return this.oAt}get B_t(){return this.aAt}set Q_t(t){this.uAt.Q_t=t}get Q_t(){return this.uAt.Q_t}get uut(){return this.U_t.Lt.uut}cAt(t){return!this.GK||!t||!Zw(this.GK.__t,t.__t)}sgt(t){if(!this.oAt)return!1;const i=this.oAt.Aht,e=Ki.oR(i.zN,i.PN),s=this.lAt.Awt,n=s.HB(t);return n<0?e.gr(t,_G):e.ZB(t,s.jn(n),!0,!0,_G)}async tgt(t){const i=this.U_t.Lt.nnt;for(;;)try{Pi(t),this.ngt();if(this.rgt())break;const e=this.dAt(),s=await this.Vwt(e,t);if(void 0===s)break;if(this.oAt=s,!YG(this.oAt)){await this.fAt(this.oAt,t);continue}this.aAt&&!Ut(this.aAt.Jnt.IP,this.oAt.Jnt.IP)&&await this.vct.zH(this.oAt.Jnt),await this._At(e,this.oAt.Aht,t),this.GK=await this.gAt(this.oAt.Jnt,t);const n=await this.kgt(this.oAt,t),r=this.lAt.b_,h=this.aAt;this.aAt=await this.wAt(n,t);const o=this.lAt.b_;this.AAt(h,this.oAt,r,o),i.forEach((t=>t.irt=!1))}catch(e){if(e instanceof xn){this.EJ(e.Cn,e.jn,e.Jnt);continue}if(e instanceof UG){let s;if(i.every((t=>t.irt))){if(this.vAt===this.Mct.maxRetries)throw new ce(le.MEDIA_LOAD_ERROR,e.message,e);this.vAt++,s=x.min(this.Mct.minimumBackoff*2**(this.vAt-1),this.Mct.maximumBackoff)}await be(null!=s?s:500,t);continue}throw this.mAt=Ki.aR(),e}finally{this.oAt=void 0}}AAt(t,i,e,s){const n=s.WB(e),r=i.Jnt.crt(i.Aht),h=i.Jnt.drt(i.Aht);let o=i.Aht.zN,a=i.Aht.PN;r&&(o=x.min(o,x.max(0,i.Jnt.Knt.Cn-.05))),h&&(a=x.max(a,i.Jnt.Knt.jn));const u=Ki.oR(o,a).WB(s);if(0===n.U)return 0===this.mAt.U&&this.mAt.GB(Ki.oR(e.jn(e.U-1),o)),this.mAt=this.mAt.GB(u),void this.U_t.Qwt(this.mAt);if(r||this.mAt.U>0){const t=u.Sn(Ki.oR(o,n.Cn(0)));this.pAt(t)}const c=n.UB().Sn(Ki.oR(n.Cn(0),n.jn(n.U-1)));if(this.pAt(c),h){const t=u.Sn(Ki.oR(n.jn(n.U-1),a));this.pAt(t)}if(this.mAt.U>0){const t=this.mAt.WB(n);this.pAt(t),this.mAt=Ki.aR()}const l=i.Jnt.pst,d=fi(i.Aht)?void 0:l.Wrt(i.Aht);var f;const _=null!=(f=null==t?void 0:t.Aht)?f:this.yAt(d)?d:void 0;if(_){const t=this.U_t.Pwt(_.zN,_.PN);if(t.length>0){const i=Ki.oR(t[t.length-1].zwt,n.Cn(0));this.pAt(i)}}const g=fi(i.Aht)?void 0:l.Urt(i.Aht);if(g&&this.yAt(g)){const t=this.U_t.Pwt(g.zN,g.PN);if(t.length>0){const i=Ki.oR(n.jn(n.U-1),t[0].jwt);this.pAt(i)}}}yAt(t){return!!t&&this.U_t.Pwt(t.zN,t.PN).length>0}pAt(t){const i=t.WB(this.lAt.b_);for(let t=0;t<i.U;t++)i.Cn(t)!==i.jn(t)&&this.MAt.aq(i.Cn(t),i.jn(t))}TAt(t,i){throw new UG(t,i)}ngt(){if(this.mAt.U>0)return;var t;const i=this.lAt.Awt.GB(null!=(t=this.lAt.hq.BB().nR(this.lAt.mwt))?t:Ki.aR());this.U_t.Ewt(i),this.NAt&&!this.DAt(this.NAt)&&(this.NAt=void 0),this.Co(new RG(this.U_t.Lt.uut,this.U_t.Bwt()))}rgt(){return this.aAt&&this.aAt.Jnt.drt(this.aAt.Aht)?(this.MAt.yJ(),!0):(this.NAt&&this.NAt.Jnt.drt(this.NAt.Aht)&&this.DAt(this.NAt)&&this.MAt.yJ(),!!this.lAt.vwt)}DAt(t){return this.U_t.bwt.qB(t.SAt,t.IAt)}EAt(t,i,e){(!this.NAt||this.NAt.Aht.PN<t.Aht.PN)&&(this.NAt=oe({},t,{SAt:i,IAt:e}))}dAt(){const t=this.lAt.mwt;return t}async Vwt(t,i){Pi(i);const e=this.aAt?this.aAt.Jnt:void 0,s=await this.uAt.Ywt(t,e,i);if(s)return s}async fAt(t,i){const e=t.Jnt,s=e.pst,n=fi(t.Aht)?s.sht(t.Aht):t.Aht,r=e.Znt.uat(),h=s.Rrt(n);if(h&&h.getTime()<=r.getTime())return this.TAt(Eu.Dut,"Segment is not available.");const o=s.Qrt(n).getTime()-r.getTime();await hu((t=>Promise.race([be(o,t),e.D_(xl.Bnt,t)])),i)}async gAt(t,i,e){void 0===e&&(e=0),Pi(i);const s=t.qnt;if(!s)return this.GK;try{if(!t.Wnt){const e=await this.bAt.xgt(s,i);t.Wnt=e.Cp}}catch(s){if(yo(s),Xt(s)){if(2===e)return t.irt=!0,this.TAt(Eu.xut,"Could not fetch the initializer.");const s=x.min(this.Mct.minimumBackoff*2**e,this.Mct.maximumBackoff);return await be(s,i),this.gAt(t,i,e+1)}throw new ce(le.MEDIA_LOAD_ERROR,s.message,s)}Pi(i);try{this.cAt(t.Wnt)&&await this.MAt.nAt(t.Wnt,t,i)}catch(t){if(yo(t),Xt(t))return this.TAt(Eu.xut,"Could not append the initializer.");throw new ce(le.MEDIA_DECODE_ERROR,t.message,t)}return t.Wnt}async kgt(t,i,e){void 0===e&&(e=0);try{return Pi(i),await this.bAt.kgt(t,i)}catch(s){if(yo(s),s instanceof Rn){if(ry(s.cause))return this.LAt(new Rn(s,t.Aht,t.Jnt),e),this.TAt(Eu.Dut,"Could not append the segment.");if(2===e)return t.Jnt.irt=!0,this.LAt(s,e),this.kAt(t,s),this.TAt(Eu.Dut,"Could not fetch the segment.");const n=x.min(this.Mct.minimumBackoff*2**e,this.Mct.maximumBackoff);return await be(n,i),await this.kgt(t,i,e+1)}throw new ce(le.MEDIA_LOAD_ERROR,s.message,s)}}async _At(t,i,e){const s=this.U_t.Pwt(i.zN,i.PN),n=this.lAt.Awt.nR(t);let r=Ki.aR();for(const t of s){Pi(e);const i=t.jwt,s=t.zwt,h=n&&n.ZB(i,s)?x.max(i,n.jn(0)):i,o=s;h<o&&(r=r.GB(Ki.oR(h,o)))}for(let t=0;t<r.U;t++)await this.MAt.rAt(r.Cn(t),r.jn(t),e);this.ngt()}async wAt(t,i){try{Pi(i);const e=await this.MAt.elt(t.Ugt,t.Aht,t.Jnt,i);return this.CAt(t,e.SAt,e.IAt),this.EAt(t,e.SAt,e.IAt),t}catch(i){if(yo(i),Xt(i))return this.LAt(new Rn(i,t.Aht,t.Jnt),0),this.TAt(Eu.Dut,"Could not append the segment.");if(fc(i)&&this.MAt.aW())return this.TAt(Eu.Iut,"Buffer is full. Could not reduce the buffer.");throw new ce(le.MEDIA_DECODE_ERROR,i.message,i)}}CAt(t,i,e){const s=t.Jnt,n=t.Aht;this.Rwt(n,s,i,e)}Rwt(t,i,e,s){this.U_t.Rwt({Cwt:t.zN,xwt:t.PN,jwt:e,zwt:s,zft:!0},i),this.MAt.uq(e,s)}EJ(t,i,e){const s=Ki.oR(t,i);e?this.U_t.aq(s,e):this.U_t.Qwt(s),this.MAt.aq(t,i)}kAt(t,i){if(!i||!i.cause)return;const e=i.cause;if(ry(e)||Ya(e)&&e.yI.TI>=400&&e.yI.TI<500){const i=Ki.oR(t.Aht.zN,t.Aht.PN);t.Jnt?this.U_t.aq(i,t.Jnt):this.U_t.Qwt(i);const e=this.lAt.b_;this.AAt(this.aAt,t,e,e)}}LAt(t,i){const e=t.hwt,s=this.U_t.Lt.uut,n=this.U_t.Lt.va,r=t.awt.Jnt&&t.awt.Jnt.va,h=new BG(e,t.message,s,n,r,i);this.Co(h)}Zn(){this.GK=void 0,this.aAt=void 0}gn(){this.Zn(),this.NAt=void 0,this.bAt.fn(QG,this.Ds),this.bAt.gn()}constructor(t,i,e,s,n,r,h,o){super(),this.egt=t,this.U_t=i,this.lAt=e,this.uAt=s,this.bAt=n,this.MAt=r,this.vct=h,this.Mct=o,this.oAt=void 0,this.GK=void 0,this.aAt=void 0,this.NAt=void 0,this.vAt=0,this.mAt=Ki.aR(),this.bAt.yn(QG,this.Ds)}};function YG(t){const i=t.Jnt,e=i.pst,s=fi(t.Aht)?e.sht(t.Aht):t.Aht;return e.Grt(s,i.Znt.uat())}var GG=0,VG=class{M8(t){const i=GG++,e=this.wwt.TJ,s=new AG(t),n=new HY(e,this.xAt),r=new gG(this.wwt,this.N4,this.FJ,this.vR),h=zG.M8(i,this.wwt,s,this.vR,n,this.dE,this.Ict,this.wct,this.hct,this.vct),o=function(t){switch(t){case iv.mp:return rn.mp;case iv.vp:return rn.vp;case iv.Ru:return rn.Ru;case iv.ZT:return rn.ZT;default:return rn.KT}}(e),a=new GY(this.dE,o),u=this._wt(a,n,this.xAt),c=new PG(this.wwt),l=new FG(i,s,r,h,u,c,this.vct,this.Mct);return new YY(i,t.Fnt,s,l,this.N4)}constructor(t,i,e,s,n,r,h,o,a,u,c){this.wwt=t,this.N4=i,this.FJ=e,this.dE=s,this.vR=n,this.xAt=r,this.Ict=h,this.wct=o,this.hct=a,this.vct=u,this.Mct=c}},WG=class extends VG{_wt(t,i,e){return(new fG)._wt(t,this.wwt,i,e,this.Ict)}},HG=class extends VG{OAt(t,i){const e={uut:iv.Ru,Fnt:i,nnt:i.nnt,va:t.va};return super.M8(e)}_wt(t,i){return(new fG)._wt(t,this.wwt,i,!1,this.Ict)}};r();var qG=class{OH(t){return this.jAt.OH(t)}zH(t){return this.jAt.zH(t)}constructor(t){this.jAt=t}},XG=class{OH(t){return!0}zH(t){return Promise.resolve(void 0)}},ZG=class extends PY{get _P(){const t=this.N4.j_;return this.Awt.nR(t,.01)}get zAt(){return this.Kat&&this.PAt[this.Kat.Vw]?this.PAt[this.Kat.Vw]:Ki.aR()}get BAt(){return this.Kat&&this.RAt[this.Kat.Vw]?this.RAt[this.Kat.Vw]:Ki.aR()}get ywt(){return new Ki([0,1/0])}get b_(){return this.zAt}get hq(){return this.UAt?this.UAt.R_t.hq.Mwt:Ki.aR()}get Awt(){return BY(this.b_,this.hq).YB(2*this.QAt)}get Cn(){return this.A_t?this.A_t.Knt.Cn:NaN}get jn(){return this.A_t?this.A_t.Knt.jn:NaN}get R_(){const t=this.jn;return!!t&&this.N4.j_>=t}get QAt(){var t;const i=this.N_t();if(!i)return.04;var e;return 1/(null!=(e=this.Kat&&(null==i||null==(t=i.Est)?void 0:t.cD()))?e:25)}get Ti(){return this.Jk}get TJ(){return iv.Ru}get ag(){return this.fR}set ag(t){this.fR=t}get fg(){return this.BAt}get yg(){if(!this.Kat)return Ki.hR(0);const t=this.T_t(this.Kat),i=null==t?void 0:t.vrt,e=null==t?void 0:t.Art;if(void 0===e||void 0===i)return Ki.hR(0);const s=x.max(i,this.N4.j_);return new Ki([e,s]).BB()}get ji(){return this.Kk}yJ(){}pwt(){return this.Awt.gr(this.jn)}async elt(t,i,e,s){const n=t.hA===at.bH?t.Cp.__t:await t.Cp.qj(s),r=this.findTrackForRepresentation(e),h=this.PAt[r.Vw],o=i.zN,a=i.PN,u=new Ki([o,a]);h||(this.PAt[r.Vw]=Ki.aR(),this.RAt[r.Vw]=Ki.aR()),this.FAt(s);const c=this.Uft(new T(n),i,e,r);for(const t of c)r.gE(t);return this.PAt[r.Vw]=this.PAt[r.Vw].GB(u),{SAt:o,IAt:a}}FAt(t){const i=zb(this.N4.j_,void 0,void 0,this.b_,this.vR.sW,this.vR.KV);for(const[e,s]of i)W(this.rAt(e,s,t))}Rft(t,i,e){return this.YAt.Rft(t,i,e)}Uft(t,i,e,s){return this.YAt.Uft(t,i,e,s)}rAt(t,i,e){const s=t,n=i;let r=new Ki([t,i]);for(const t of this.Z.xw){const i=[];for(const e of t.L.xw)e.zN>=s&&e.PN<=n?i.push(e):r=r.WB(new Ki([e.zN,e.PN]));for(const e of i)t.DI(e);const e=this.PAt[t.Vw];e&&(this.PAt[t.Vw]=e.WB(r))}return Promise.resolve()}aq(t,i){}uq(t,i){}aW(){return!1}kI(t){if(super.kI(t),this.YAt.Zn(),this.UAt&&(this.UAt.gn(),this.UAt=void 0),this.Kat){const t=this.T_t(this.Kat);this.UAt=new HG(this,this.N4,this.N4,this.dE,this.vR,!1,this.Ict,void 0,void 0,new XG,Gv).OAt(this.Kat,t),this.UAt.yn(Bi.ha,this.GAt),this.UAt.Cn(Eu.Aut)}}CI(t){this.Kat===t&&(super.CI(t),this.UAt&&(this.UAt.gn(),this.UAt=void 0))}v_t(t){const i=function(t){const i=t.nnt&&t.nnt.length>0&&t.nnt[0],e=i&&oy(i.Nst),s=oy(t.Nst),n=t.dY===K.APPLICATION_TTML_XML;return e||s||n?Ks.TTML:t.dY===K.TEXT_VTT||Fo(t.dY,t.Nst)?Ks.WEBVTT:Ks.DEFAULT}(t);if(!i)throw new b("Unknown TextTrack type for Representation");const e=t.rnt.concat(t.Hst);return this.VAt(function(t){return na(t.filter((t=>"urn:mpeg:dash:role:2011"===t.nst)).map((t=>t.IT)).filter(j_),"caption")?Pt.fI:Pt.pp}(e),t.kh,t.s6,!1,i,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.nst)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.IT)))}(t.rnt),t.Hst.map(OF).filter(j_))}async Zn(){await super.Zn(),this.UAt&&(await this.UAt.Zn(Eu.Uut),this.UAt.fn(Bi.ha,this.GAt),this.UAt=void 0),this.A_t=void 0,this.PAt={},this.RAt={}}WAt(){this.PAt={},this.RAt={}}findTrackForRepresentation(t){for(const i of this.Z.xw){const e=this.T_t(i);if(e&&PY.D_t(e)===t)return i}}constructor(t,i,e,s,n){super(),this.Jk=0,this.fR=1,this.UAt=void 0,this.PAt={},this.RAt={},this.Kk=0,this.GAt=t=>{0},this.N4=t,this.dE=i,this.vR=e,this.YAt=s,this.Ict=n}},KG=class extends ZG{VAt(t,i,e,s,n,r,h,o){var a;const u=r.nnt.reduce(((t,i)=>t||i.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.cE.uE(t,l,i,e,s,n,h,o)}gn(){for(const t of this.Z.xw)this.cE.AE(t);return super.gn()}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.cE=r}},JG=class{get nt(){return this.Dl}async lE(t){if(t.hA!==iv.Ru)return;const i=function(t,i){return oy(i)||t===K.APPLICATION_TTML_XML||t===K.TEXT_VTT?new xY:Fo(t,i)?new jY:void 0}(t.dY,t.Nst);if(i){const e=this.HAt(i);return this.qAt(e),await e.$n(t),e}}HAt(t){return new KG(this.N4,this.dE,this.vR,t,this.Ict,this.cE)}qAt(t){this.XAt.push(t),this.Dl.nP(t.Z)}async Zn(){for(const t of this.XAt.slice())await t.Zn();Ri(this.XAt),this.Dl.Zn()}async gn(){for(const t of this.XAt)await t.gn();Ri(this.XAt),this.Dl.gn()}constructor(t,i,e,s,n){this.XAt=[],this.Dl=new fh([]),this.N4=t,this.dE=i,this.vR=e,this.Ict=s,this.cE=n}};r();var $G=class extends gg{constructor(){super(Ar.sct)}},tV=class extends i{JV(t,i){return this.ZAt(t,i)}async ZAt(t,i){for(const i of t)this.KAt(i);await this.$n(i);for(const t of this.wrt.Eot)t.hA===iv.Ru&&(t.nnt&&0!==t.nnt.length?await this.JAt.lE(t):this.Co(new GF("No supported representation found in the AdaptationSet with mimetype : "+t.hA)))}get Vw(){return this.DN}X_t(){return this.XAt.some((t=>t.X_t()))}pwt(){return 0!==this.XAt.length&&this.XAt.every((t=>t.pwt()))}$At(){this.Odt()&&this.Co(new $G)}tvt(i){i.yn([Bi.ha,t.HA,t.KA,t.JA,t.rv,t.MA],this.Ds),i.yn(tt.IH,this.ivt),i.yn("pdt",this.Ds)}get Rt(){return this.XAt.some((t=>t.Rt))}async evt(t){await Promise.all(this.XAt.map((i=>i.gn(t)))),Ri(this.XAt)}get ht(){return this.nN}get b_(){if(0===this.XAt.length)return Ki.aR();const t=this.XAt.map((t=>t.b_));let i=Ki.oR(0,1/0);for(const e of t)i=i.Sn(e);if(0===i.U)return i;if(this.pwt()){const t=i.Sn(this.ywt);if(0===t.U)return i;const e=t.jn(t.U-1);let s=0;for(const t of this.XAt)s=x.max(s,t.svt);e<=s&&(i=i.GB(new Ki([e,s],[!0,!0])))}return i}get j_(){return this.gP.j_}get Bdt(){return this.nvt}get jn(){if(this.Wlt){const t=this.ct;if(!j(t)&&t!==Da)return t}if(!this.XAt.length)return NaN;let t=0;for(const i of this.XAt)t=x.max(t,i.jn);return t}get Wlt(){const t=this.wrt.Znt;if(t.hA===Q.LO)return!1;const i=t.Tnt;return 0!==i.length&&this.wrt===i[i.length-1]}get yg(){if(!this.XAt.length)return Ki.aR();let t=new Ki([0,1/0]);for(const i of this.XAt)t=t.Sn(i.yg);if(t.U>0&&this.Wlt&&isFinite(this.ct)){const i=this.ct,e=t.jn(t.U-1);i>e&&(t=t.GB(Ki.oR(e,i).BB()))}return t}get yc(){return this.wrt}get nt(){return this.Dl}get rt(){return this.hN}get _P(){const t=this.j_,i=this.b_,e=i.HB(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get ywt(){const t=this.wrt.Cn,i=this.Wlt?1/0:this.wrt.jn;return Ki.oR(t,i)}Odt(){if(this.X_t())return!1;if(!this.pwt())return!1;const t=this.b_;if(0===t.U)return!1;const i=this.j_;if(this.Wlt)return t.Cn(t.U-1)<=i;{const e=t.Sn(this.ywt);if(0===e.U)return!0;const s=e.Cn(e.U-1),n=e.jn(e.U-1)+.1;return s<=i&&i<=n}}get uft(){return this.rvt}async Nlt(t){this.rvt||(this.rvt=!0,await Promise.all(this.XAt.map((i=>i.Nlt(t)))))}async Plt(t){this.rvt&&(this.rvt=!1,await Promise.all(this.XAt.map((i=>i.Plt(t)))))}async gn(t){this.Vo(),this.wrt.fn(xl.Unt,this.Ds),this.ovt.c_(),this.avt&&(await this.avt.catch(xs),this.avt=void 0),await this.evt(t),await this.JAt.gn(),this.nN.gn(),this.hN.gn(),this.Dl.gn(),this.uvt()}KAt(t){this.cvt.push(t),t.yn("Xat",this.lvt);const i=t.hA===iv.mp?this.nN:this.hN;for(const e of t.Z)i.tt(e)}dvt(t){const i=t.hA===iv.mp?this.nN:this.hN;for(const e of t.Z)i.it(e),e.gn();t.gn(),Et(this.cvt,t)}uvt(){for(let t=this.cvt.length-1;t>=0;t--)this.dvt(this.cvt[t])}get Slt(){return this.cvt.map((t=>t.Kat)).filter(j_)}get Dlt(){return this.XAt.map((t=>t.Kat)).filter(j_)}$n(t,i){return this.ovt.c_(),this.ovt=new Po,i&&this.ovt.l_(i),this.avt=H(this.sit(t,this.avt,this.ovt.a_),this.ovt).catch(this.ylt),this.avt}async sit(t,i,e){i&&await i.catch(xs),Pi(e);const s=[],n=this.XAt.slice(),r=t.slice();Ri(this.XAt);for(const t of n){const i=t.Kat;i&&na(r,i)?(this.XAt.push(t),s.push(t.$n(i,e)),Et(r,i)):(this.Dl.oP(t.nt),await t.gn(),Pi(e))}for(const t of r){const i=this.fvt(t.uut);this.Dl.nP(i.nt),this.XAt.push(i),this.tvt(i),s.push(i.$n(t,e))}await Promise.all(s),this._vt()}async gvt(t,i){await this.$n(t),this.nvt=i}constructor(t,i,e,s,n,r,h,o,a,u){super(),this.nN=new Tn,this.hN=new Tn,this.cvt=[],this.ovt=new Po,this.rvt=!0,this.XAt=[],this.avt=void 0,this.ivt=oo((()=>{this.Co(new N(this.j_))}),350),this.lvt=t=>{const i=t.Zat.Kat;if(i)for(const t of this.cvt){var e;t.Kat&&t.Kat!==i&&t.hA===(null==(e=i.qst)?void 0:e.hA)&&(t.fn("Xat",this.lvt),t.Kat.Rt=!1,t.yn("Xat",this.lvt))}this.Ds(t)},this.ylt=t=>{Oi(t)||this.Co(new me(new ce(le.MEDIA_LOAD_ERROR,t.message,t)))},this.wvt=t=>{const i=t.R1;if(i)for(const t of this.Dlt){if((t.Fnt.Sst||[]).some((t=>t.pj&&Xi(ts(i),TE(t.pj)))))return void this.Co(new Le(new Yr(le.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions")))}},this.dE=t,this.vR=i,this.Ict=e,this.gP=s,this.bc=n,this.DN=Vu(),this.cvt=[],this.wrt=r,this.nvt=h,this.cE=o,this.JAt=new JG(s,t,i,e,o),this.Dl=new fh([this.JAt.nt]),this.Mct=a,this.gft=u,this.wrt.yn(xl.Unt,this.Ds)}};r(),r(),r();var iV=[Bi.ha,t.KA,t.JA,t.rv,t.MA];r();var eV=0;r();var ot,wi,sV,nV=class extends gg{constructor(i,e){super(t.HA),this.representation=i,this.previousRepresentation=e}};function rV(t,i,e){return e===ot.Avt?e:i!==wi.vvt&&i!==wi.mvt||e!==ot.pvt&&e!==ot.yvt?t?i===wi.Mvt?ot.Tvt:i===wi.Nvt?ot.Dvt:ot.Avt:ot.Svt:ot.yvt}function hV(t,i,e,s){const n={byte:e};let r=ot.pvt;const h=[],o=31&fn(i,n,s);n.byte+=1;for(let e=0;e<o;e+=1){const o=fn(i,n,s),a=4&o,u=3&o;r=rV(Boolean(a),u,r);const c=fn(i,n,s),l=fn(i,n,s);h.push({Ivt:t,fT:-1,Evt:!e,bvt:Boolean(a),hA:u,Lvt:r,kvt:c,Cvt:l})}return h}function oV(t,i,e){const s=fn(t,i,e);if(!j(s))return String.fromCharCode(s)}function aV(t){const i=t.mZ,e={byte:t.AZ},s=t.vZ,n=fn(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=XL(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=oV(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==fn(i,e,s))return;47===r&&(e.byte+=1);const h=t;return h.xvt=e.byte,h}function uV(t){return 4===t.gZ}function cV(t){const i=t.filter(uV).map(aV).filter(j_),e=[];for(const t of i)e.push(...hV(t._Z,t.mZ,t.xvt,t.vZ));return e}r(),r(),r(),function(t){t[t.Avt=0]="Avt",t[t.pvt=1]="pvt",t[t.yvt=2]="yvt",t[t.Dvt=3]="Dvt",t[t.Tvt=4]="Tvt",t[t.Svt=5]="Svt"}(ot||(ot={})),function(t){t[t.vvt=0]="vvt",t[t.mvt=1]="mvt",t[t.Mvt=2]="Mvt",t[t.Nvt=3]="Nvt"}(wi||(wi={})),function(t){t[t.Ovt=47]="Ovt",t[t.jvt=49]="jvt"}(sV||(sV={})),r();var lV="und";function dV(t){if(t===lV)return;const i=t.toLowerCase();for(const t of fV)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var fV=[{l:"Abkhaz",lh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",lh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",lh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",lh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",lh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",lh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",lh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",lh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",lh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",lh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",lh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",lh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",lh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",lh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",lh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",lh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",lh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",lh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",lh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",lh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",lh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",lh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",lh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",lh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",lh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",lh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",lh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",lh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",lh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",lh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",lh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",lh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",lh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",lh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",lh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",lh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",lh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",lh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",lh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",lh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",lh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",lh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",lh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",lh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",lh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",lh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",lh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",lh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",lh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",lh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",lh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",lh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",lh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",lh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",lh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",lh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",lh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",lh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",lh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",lh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",lh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",lh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",lh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",lh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",lh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",lh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",lh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",lh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",lh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",lh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",lh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",lh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",lh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",lh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",lh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",lh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",lh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",lh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",lh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",lh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",lh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",lh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",lh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",lh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",lh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",lh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",lh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",lh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",lh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",lh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",lh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",lh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",lh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",lh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",lh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",lh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",lh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",lh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",lh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",lh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",lh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",lh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",lh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",lh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",lh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",lh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",lh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",lh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",lh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",lh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",lh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",lh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",lh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",lh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",lh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",lh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",lh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",lh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",lh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",lh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",lh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",lh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",lh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",lh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",lh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",lh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",lh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",lh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",lh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",lh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",lh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",lh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",lh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",lh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",lh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",lh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",lh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",lh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",lh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",lh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",lh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",lh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",lh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",lh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",lh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",lh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",lh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",lh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",lh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",lh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",lh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",lh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",lh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",lh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",lh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",lh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",lh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",lh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",lh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",lh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",lh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",lh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",lh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",lh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",lh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",lh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",lh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",lh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",lh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",lh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",lh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",lh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",lh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",lh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",lh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",lh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",lh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",lh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",lh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",lh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",lh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",lh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",lh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",lh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];r();function _V(t){var i;const e=null!=(i=function(t){const i=t.VX,e=new ZL;return e.hZ(i,0,i.byteLength),hk(e).OZ}(t))?i:24;return t.zvt/e}function gV(t){return t.hA===At.ep}var wV;function AV(t,i,e,s,n){const r=function(t,i,e,s){const n=e.zvt,r=Se.fromNumber(t.DT||0),h=s.mN(aa.SD(r,n));return{Wet:s.cD(),Pvt:s,Bvt:h,Rvt:s}}(t,0,e,s),h=aa.ED(t.ct||0,e.zvt),o=t.gy||0,a=!(65536&o)&&1!==(o>>24&3);let u;const c=Ao(n),l=new Vr;for(;l.Ku<c.byteLength;){const t=Sn(c,l);if((31&IA(c,l,1))===KL.DZ){const i=new ZL;i.hZ(n,l.Ku-1,l.Ku+t-1);const e=new rk(i),s=tk(r.Bvt,e);u=u||[],u.push(...cV(s))}l.Np(t-1)}return oe({},r,{ct:h.cD(),Uvt:h,Qvt:r.Bvt.cD(),Fvt:r.Wet,Yvt:a,Gvt:u,Vvt:!1,Wvt:!1})}function vV(t){return{Wy:t.iy.Wy,zvt:t.Fy.iy.zy}}function mV(t){return t.hA===At.Tm}!function(t){t[t.SAMPLE_DEPENDS_ON_UNKNOWN=0]="SAMPLE_DEPENDS_ON_UNKNOWN",t[t.SAMPLE_DEPENDS_ON_OTHERS=1]="SAMPLE_DEPENDS_ON_OTHERS",t[t.SAMPLE_DEPENDS_ON_NO_OTHER=2]="SAMPLE_DEPENDS_ON_NO_OTHER",t[t.SAMPLE_DEPENDS_ON_RESERVED=3]="SAMPLE_DEPENDS_ON_RESERVED"}(wV||(wV={})),r(),r(),r(),r(),r(),r(),r(),r();var pV=class{$N(t){return this.l6===t.l6&&this.t6===t.t6}constructor(t,i){this.l6=t,this.t6=i}};r();var yV=class{get D6(){return this.Hvt}get p6(){return[this]}get T6(){return this.TH}get r6(){return this.qvt}get a6(){return new pV(this.r6.l6,this.r6.t6+this.D6.length-1)}Xvt(t){this.Hvt+=t}Zvt(t){for(const i of t)this.Xvt(i)}constructor(t,i){this.TH=t,this.qvt=i,this.Hvt=""}};function MV(t,i){return t===i||t.D6===i.D6&&t.r6.$N(i.r6)&&Ph(t.T6,i.T6)}function TV(t,i){return t===i||t.r6.$N(i.r6)&&t.a6.$N(i.a6)&&wl(t.p6,i.p6,MV)}var NV=class extends yn{tD(t){return wl(this.O,t.O,TV)}constructor(t,i,e){super(t,i,e,!1)}};r();var DV=class{Kvt(t){return t.NS(this)}Jvt(t){return Nh(t,((t,i)=>t.NS(this,i)))}$vt(t,i){return new SV(t,i).tmt()}},SV=class{tmt(){if(this.imt)return[];for(let t=0;t<this.l6.length;t++)this.emt(t);return this.smt(),this.nmt}hmt(t){this.omt=new yV(HO,new pV(this.amt,t))}smt(){this.omt&&(this.nmt.push(this.omt),this.omt=null)}emt(t){const i=this.l6[t];IV(i)?this.omt&&this.smt():(this.omt||this.hmt(t),this.omt.Xvt(i))}get imt(){return this.l6.every(IV)}constructor(t,i){this.l6=t,this.amt=i,this.nmt=[],this.omt=null}};function IV(t){return null==t}var EV=class{static umt(t,i,e){if(i>=e)return;const s=Nh(t,((t,i)=>new SV(t.map((t=>t?t.cmt():null)),i).tmt()));return 0!==s.length?new NV(i,e,s):void 0}},qn="black",bV="white";r(),r();var LV=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,i)=>(t[i[0]]=i[1],t)),{}),kV=class{lmt(t){for(let i=0;i<el;i++)t&&(this.dmt[i]=t.dmt[i])}$N(t){for(let i=0;i<el;i++)if(this.dmt[i]!==t.dmt[i])return!1;return!0}fmt(){for(let t=0;t<el;t++)if(null!==this.dmt[t])return!1;return!0}_mt(t){this.gmt!==t&&(this.gmt=t),this.gmt<0?this.gmt=0:this.gmt>el&&(this.gmt=31)}wmt(t){const i=this.gmt+t;this._mt(i)}Amt(){this.wmt(-1),this.dmt[this.gmt]=null}Xvt(t){t>=144&&this.Amt();const i=function(t){return LV[t]?String.fromCharCode(LV[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.gmt>=el||(32===Number(t)?(this.dmt[this.gmt]=this.vmt?"</i>":"<i>",this.vmt=!this.vmt):this.dmt[this.gmt]=t,this.wmt(1))}mmt(t){for(let i=t;i<el;i++)this.dmt[i]=null}kL(){this.mmt(0),this.gmt=0}pmt(){this.mmt(this.gmt)}ymt(t,i){const e=this.dmt;let s=null;for(let n=0;n<el;n++){const r=e[n];null===r?s=null:(s||(s={Gh:n,Xh:t,ji:0,Ti:1,dmt:[[]]},i.push(s)),s.dmt[0].push(r),s.ji++)}}NS(t,i){return t.$vt(this.dmt,i)}constructor(){this.dmt=[],this.gmt=0;for(let t=0;t<el;t++)this.dmt.push(null);this.vmt=!1}};var Un,CV=class{Mmt(t,i){const e="CC"+(this.Tmt<<1|this.Nmt+1);if(t>=i)return null;const s=(new DV).Jvt(this.Dmt.slice(1));return 0===s.length?null:{jN:new NV(t,i,s),OG:e,Smt:this.Tmt<<1|this.Nmt+1}}Zn(){this.Imt(),this.Emt=1}bmt(){return this.Emt}Lmt(t){this.Emt=t}_mt(t){this.Dmt[this.Emt]._mt(t)}wmt(t){this.Dmt[this.Emt].wmt(t)}kmt(){return this.Cmt}xmt(t){this.Cmt=t}Xvt(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==jV[i]?jV[i]:String.fromCharCode(i);break;case 1:e=zV[i];break;case 2:this.Omt(),e=PV[i];break;case 3:this.Omt(),e=BV[i]}e&&this.Dmt[this.Emt].addParsedChar(e)}Omt(){this.Dmt[this.Emt].Amt()}jmt(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.Dmt[t+s]=this.Dmt[i+s];else for(let s=0;s<e;s++)this.Dmt[t+s]=this.Dmt[i+s]}zmt(t,i){for(let e=0;e<=i;e++)this.Dmt[t+e]=new kV}Imt(){this.zmt(0,xV)}Pmt(){this.Emt=this.Cmt>0?this.Cmt:0,this.Imt()}Bmt(t){this.Rmt=t}Umt(t){this.Qmt=t}Fmt(t){this.Ymt=t}Gmt(t){this.Vmt=t}constructor(t,i){this.Dmt=new Array(xV+1);for(let t=0;t<=xV;t++)this.Dmt[t]=new kV;this.Emt=1,this.Cmt=0,this.Tmt=t,this.Nmt=i,this.Rmt=!1,this.Qmt=!1,this.Ymt=bV,this.Vmt=qn,this.Zn()}},xV=15;!function(t){t[t.Wmt=0]="Wmt",t[t.Hmt=1]="Hmt",t[t.qmt=2]="qmt",t[t.Xmt=3]="Xmt"}(Un||(Un={}));var OV,jV={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},zV={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},PV={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},BV={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},RV=class{Zn(){this.Zmt=!0,this.Kmt=0,this.g0=0,this.Jmt=this.$mt,this.tpt=void 0,this.$mt.Zn(),this.ipt.Zn(),this.ept.Zn()}spt(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}npt(t,i){const e=this.spt(t,i),s=(30&i)>>1;let n=bV,r=!1;s<7?n=FV[s]:7===s&&(r=!0);const h=1==(1&i);if(4===this.g0)return;const o=this.Jmt;if(3===this.g0&&e!==o.bmt()){const t=1+o.bmt()-o.kmt(),i=1+e-o.kmt();o.jmt(i,t,o.kmt()),o.zmt(0,i-1),o.zmt(e+1,xV-e)}o.Lmt(e);const a=XO[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{J5:qO[e].J5,K5:qO[e].K5,t6:qO[e].t6,l6:t}}(a,i);o._mt(u.t6),this.Jmt.Bmt(h),this.Jmt.Umt(r),this.Jmt.Fmt(n),this.Jmt.Gmt(qn)}rpt(t,i){this.Jmt.Bmt(!1),this.Jmt.Umt(!1),this.Jmt.Fmt(bV);const e=this.hpt(t,Un.Wmt," ".charCodeAt(0));let s=bV,n=!1;const r=1==(1&i);return s=FV[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.Jmt.Bmt(r),this.Jmt.Umt(n),this.Jmt.Fmt(s),e}hpt(t,i,e){if(this.Jmt.Xvt(i,e),2===this.g0||3===this.g0){const i=this.opt(this.Jmt,this.Kmt,t);return this.Kmt=t,i}return null}opt(t,i,e){return this.Zmt?null:2===this.g0||3===this.g0?t.Mmt(e,e+10):t.Mmt(i,e)}apt(t,i){let e=qn;0==(7&t)&&(e=QV[(14&i)>>1]),this.Jmt.Gmt(e)}upt(t){const i=UV,e=t.cpt,s=t.lpt;let n=null;switch(e){case i.RCL:this.dpt();break;case i.BS:this.fpt();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this._pt(2,s);break;case i.RU3:n=this._pt(3,s);break;case i.RU4:n=this._pt(4,s);break;case i.FON:n=this.gpt(s);break;case i.RDC:this.wpt(s);break;case i.TR:this.Apt();break;case i.RTD:this.vpt();break;case i.EDM:n=this.mpt(s);break;case i.CR:n=this.ppt(s);break;case i.ENM:this.ypt();break;case i.EOC:n=this.Mpt(s)}return n}ppt(t){const i=this.Jmt;if(3!==this.g0)return null;const e=this.opt(i,this.Kmt,t),s=i.bmt()-i.kmt()+1;return i.jmt(s-1,s,i.kmt()),i.zmt(0,s-1),i.zmt(i.bmt(),xV-i.bmt()),this.Kmt=t,e}_pt(t,i){this.Jmt=this.$mt;const e=this.Jmt;let s=null;return 3!==this.g0&&4!==this.g0&&(s=this.opt(e,this.Kmt,i),this.$mt.Pmt(),this.ipt.Pmt(),this.Zmt=!1,e.Lmt(xV)),this.g0=3,e.xmt(t),s}gpt(t){return this.hpt(t,Un.Wmt," ".charCodeAt(0))}mpt(t){const i=this.$mt;let e=null;return 4!==this.g0&&(e=this.opt(i,this.Kmt,t)),i.Imt(),this.Zmt=!1,e}wpt(t){this.g0=2,this.Jmt=this.$mt,this.Jmt.xmt(0),this.Kmt=t}ypt(){this.ipt.Imt()}Mpt(t){let i=null;4!==this.g0&&(i=this.opt(this.$mt,this.Kmt,t));const e=this.ipt;return this.ipt=this.$mt,this.$mt=e,this.dpt(),this.Kmt=t,i}dpt(){this.g0=1,this.Jmt=this.ipt,this.Jmt.xmt(0)}fpt(){this.Jmt.Omt()}Apt(){this.ept.Zn(),this.Zmt=!1,this.vpt()}vpt(){this.Jmt=this.ept,this.g0=4}Tpt(t,i,e){return this.Jmt.Xvt(Un.Wmt,i),this.hpt(t,Un.Wmt,e)}Npt(t,i,e){const s=1&i?Un.Xmt:Un.qmt;return this.hpt(t,s,e)}Dpt(t){const i=t.Spt,e=t.cpt,s=t.lpt;if(this.tpt===(i<<8|e))return this.tpt=void 0,null;if(this.tpt=i<<8|e,this.Ipt(i,e))this.npt(i,e);else{if(this.Ept(i,e))return this.rpt(s,e);if(this.bpt(i,e))this.apt(i,e);else{if(this.Lpt(i,e))return this.hpt(s,Un.Hmt,e);if(this.kpt(i,e))return this.Npt(s,i,e);if(this.Cpt(i,e))return this.upt(t);this.isTabOffset(i)&&this.Jmt.wmt(e-32)}}return null}isTabOffset(t){return 23===t||31===t}Cpt(t,i){return 20==(246&t)&&32==(240&i)}Ipt(t,i){return 16==(240&t)&&64==(192&i)}Ept(t,i){return 17==(247&t)&&32==(240&i)}bpt(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}Lpt(t,i){return 17==(247&t)&&48==(240&i)}kpt(t,i){return 18==(246&t)&&32==(224&i)}static xpt(t){return 16==(112&t)}constructor(t,i){this.g0=0,this.ept=new CV(t,i),this.$mt=new CV(t,i),this.ipt=new CV(t,i),this.Jmt=this.$mt,this.Kmt=0,this.tpt=void 0,this.Zmt=!1}},UV={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47};!function(t){t[t.MB=0]="MB",t[t.Opt=1]="Opt",t[t.jpt=2]="jpt",t[t.zpt=3]="zpt",t[t.Ru=4]="Ru"}(OV||(OV={}));var QV=["black","green","blue","cyan","red","yellow","magenta","black"],FV=["white","green","blue","cyan","red","yellow","magenta","white_italics"];r(),r(),r();var YV,GV=class{cmt(){return this.Ppt}Bpt(){return this.Rmt}Rpt(){return this.Qmt}Upt(){return this.Vmt}Qpt(){return this.Ymt}constructor(t,i,e,s,n){this.Ppt=t,this.Rmt=i,this.Qmt=e,this.Vmt=s,this.Ymt=n}},VV=class{Fpt(t,i,e,s,n,r,h){this.LB=t,this.Ypt=i,this.Gpt=e,this.Vpt=s,this.Wpt=n,this.Hpt=r,this.qpt=h}Xpt(){this.Zpt=[];for(let t=0;t<HV;t++)this.Zpt.push(this.Kpt())}Kpt(){const t=[];for(let i=0;i<WV;i++)t.push(null);return t}Jpt(t){this.$pt()&&(this.Zpt[this.Emt][this.tyt]=new GV(t,this.Rmt,this.Qmt,this.Vmt,this.Ymt),this.tyt++)}iyt(){this.$pt()&&(this.tyt<=0&&this.Emt<=0||(this.tyt<=0?(this.tyt=this.qpt-1,this.Emt--):this.tyt--,this.Zpt[this.Emt][this.tyt]=null))}$pt(){const t=this.Emt<this.Hpt&&this.Emt>=0,i=this.tyt<this.qpt&&this.tyt>=0;return t&&i}eyt(){return this.LB}syt(t){let i=0;for(let e=t;e<HV;e++,i++)this.Zpt[i]=this.Zpt[e];for(let e=0;e<t;e++,i++)this.Zpt[i]=this.Kpt()}nyt(){if(this.Emt+1>=this.Hpt)return this.syt(1),void(this.tyt=0);this.Emt++,this.tyt=0}ryt(){this.Zpt[this.Emt]=this.Kpt(),this.tyt=0}Mmt(t,i){if(this.WN>=t)return null;const e=EV.umt(this.Zpt,this.WN,t);return e?(this.hyt(t),{jN:e,OG:"svc"+i,Smt:i}):null}oyt(t,i){this.Emt=t,this.tyt=i}ayt(t){this.Vmt=t}uyt(t){this.Ymt=t}cyt(t){this.Rmt=t}lyt(t){this.Qmt=t}dyt(){this.Emt=0,this.tyt=0,this.Rmt=!1,this.Qmt=!1,this.Ymt=bV,this.Vmt=qn}fyt(t){this._yt=t}gyt(){this.LB=!0}be(){this.LB=!1}wh(){this.LB=!this.LB}hyt(t){this.WN=t}constructor(t){this.wyt=t,this.LB=!1,this.Wpt=!1,this.Gpt=0,this.Ypt=0,this.Vpt=0,this.Hpt=0,this.qpt=0,this._yt=2,this.Zpt=[],this.WN=0,this.Emt=0,this.tyt=0,this.Qmt=!1,this.Rmt=!1,this.Ymt=bV,this.Vmt=qn,this.Xpt()}};!function(t){t[t.Ayt=0]="Ayt",t[t.vyt=1]="vyt",t[t.myt=2]="myt",t[t.pyt=3]="pyt"}(YV||(YV={}));var WV=42,HV=15,qV=class{yyt(t){const i=t.Myt();let e=i.IT;const s=i.lpt;if(e===$V){e=e<<16|t.Myt().IT}return e>=0&&e<=31?this.Tyt(e,s):e>=128&&e<=159?this.Nyt(t,e,s):(e>=4096&&e<=4127?this.Dyt(t,255&e):e>=4224&&e<=4255?this.Syt(t,255&e):e>=32&&e<=127?this.Iyt(e):e>=160&&e<=255?this.Eyt(e):e>=4128&&e<=4223?this.byt(255&e):e>=4256&&e<=4351&&this.Lyt(255&e),null)}Iyt(t){this.kyt&&(127!==t?this.kyt.Jpt(String.fromCharCode(t)):this.kyt.Jpt("\u266a"))}Eyt(t){this.kyt&&this.kyt.Jpt(String.fromCharCode(t))}byt(t){if(!this.kyt)return;if(void 0===tW[t])return void this.kyt.Jpt("_");const i=tW[t];this.kyt.Jpt(i)}Lyt(t){this.kyt&&(160===t?this.kyt.Jpt("[CC]"):this.kyt.Jpt("_"))}Tyt(t,i){if(!this.kyt)return null;const e=this.kyt;let s=null;switch(t){case XV:e.iyt();break;case KV:e.eyt()&&(s=e.Mmt(i,this.Cyt)),e.nyt();break;case JV:e.eyt()&&(s=e.Mmt(i,this.Cyt)),e.ryt();break;case ZV:e.eyt()&&(s=e.Mmt(i,this.Cyt)),e.Xpt(),e.oyt(0,0)}return s}Nyt(t,i,e){if(i>=128&&i<=135){const t=7&i;this.xyt(t)}else{if(136===i){const i=t.Myt().IT;return this.Oyt(i,e)}if(137===i){const i=t.Myt().IT;this.jyt(i,e)}else{if(138===i){const i=t.Myt().IT;return this.zyt(i,e)}if(139===i){const i=t.Myt().IT;return this.Pyt(i,e)}if(140===i){const i=t.Myt().IT;return this.Byt(i,e)}if(143===i)return this.Zn(e);if(144===i)this.Ryt(t);else if(145===i)this.Uyt(t);else if(146===i)this.oyt(t);else if(151===i)this.Qyt(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.Fpt(t,s,e)}}}return null}Dyt(t,i){i>=8&&i<=15?t.Yp(1):i>=16&&i<=23?t.Yp(2):i>=24&&i<=31&&t.Yp(3)}Syt(t,i){i>=128&&i<=135?t.Yp(4):i>=136&&i<=143&&t.Yp(5)}xyt(t){this.Fyt[t]&&(this.kyt=this.Fyt[t])}*Yyt(t){for(let i=0;i<8;i++){1==(1&t)&&this.Fyt[i]&&(yield i),t>>=1}}Oyt(t,i){let e=null;for(const s of this.Yyt(t)){const t=this.Fyt[s];t.eyt()&&(e=t.Mmt(i,this.Cyt)),t.Xpt()}return e}jyt(t,i){for(const e of this.Yyt(t)){const t=this.Fyt[e];t.eyt()||t.hyt(i),t.gyt()}}zyt(t,i){let e=null;for(const s of this.Yyt(t)){const t=this.Fyt[s];t.eyt()&&(e=t.Mmt(i,this.Cyt)),t.be()}return e}Pyt(t,i){let e=null;for(const s of this.Yyt(t)){const t=this.Fyt[s];t.eyt()?e=t.Mmt(i,this.Cyt):t.hyt(i),t.wh()}return e}Byt(t,i){let e=null;for(const s of this.Yyt(t)){const t=this.Fyt[s];t.eyt()&&(e=t.Mmt(i,this.Cyt)),this.Fyt[s]=void 0}return e}Zn(t){const i=this.Byt(255,t);return this.kL(),i}kL(){this.kyt=void 0,this.Fyt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}Ryt(t){t.Yp(1);const i=t.Myt().IT;if(!this.kyt)return;const e=(128&i)>0,s=(64&i)>0;this.kyt.lyt(e),this.kyt.cyt(s)}Uyt(t){const i=t.Myt().IT,e=t.Myt().IT;if(t.Yp(1),!this.kyt)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,h=3&e,o=(12&e)>>2,a=(48&e)>>4,u=this.Gyt(r,n,s),c=this.Gyt(a,o,h);this.kyt.uyt(u),this.kyt.ayt(c)}oyt(t){const i=t.Myt().IT,e=t.Myt().IT;if(!this.kyt)return;const s=15&i,n=63&e;this.kyt.oyt(s,n)}Qyt(t){t.Yp(1),t.Yp(1);const i=t.Myt().IT;if(t.Yp(1),!this.kyt)return;const e=3&i;this.kyt.fyt(e)}Fpt(t,i,e){const s=void 0!==this.Fyt[i];if(!s){const t=new VV(i);t.hyt(e),this.Fyt[i]=t}const n=t.Myt().IT,r=t.Myt().IT,h=t.Myt().IT,o=t.Myt().IT,a=t.Myt().IT,u=t.Myt().IT,c=(32&n)>0,l=127&r,d=(128&r)>0,f=h,_=1+(15&o),g=(240&o)>>4,w=1+(63&a);s&&0===(7&u)||this.Fyt[i].dyt(),this.Fyt[i].Fpt(c,l,f,g,d,_,w),this.kyt=this.Fyt[i]}Gyt(t,i,e){const s={0:0,1:0,2:1,3:1};return iW[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.Cyt=t,this.Fyt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.kyt=void 0}},XV=8,ZV=12,KV=13,JV=14,$V=16,tW={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},iW=["black","blue","green","cyan","red","magenta","yellow","white"];r();var eW=class{Vyt(t){if(t.hA===wi.Nvt){const i=63&t.IT;return this.Wyt=2*i-1,void(this.Hyt=[])}if(this.Hyt&&(this.Wyt>0&&(this.Hyt.push(t),this.Wyt--),0===this.Wyt)){const t=new sW(this.Hyt);this.qyt.push(t),this.Hyt=null,this.Wyt=0}}Xyt(){return this.qyt}Zyt(){this.qyt=[]}kL(){this.qyt=[],this.Hyt=[],this.Wyt=0}constructor(){this.qyt=[],this.Hyt=null,this.Wyt=0}},sW=class{Wht(){return this.Kyt<this.Jyt.length}$yt(){return this.Kyt}Myt(){if(!this.Wht())throw new ce(le.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.Jyt[this.Kyt++]}Yp(t){if(this.Kyt+t>this.Jyt.length)throw new ce(le.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.Kyt+=t}constructor(t){this.Kyt=0,this.Jyt=t}},nW=class{kL(){this.tMt=0,this.iMt=[],this.eMt=[],this.sMt.kL(),this.Zn(),this.nMt.forEach((t=>{t.kL()}))}Zn(){this.rMt=0,this.hMt=0,this.oMt.forEach((t=>{t.Zn()}))}aMt(t,i){if(t.bvt){const e=t.kvt,s=t.Cvt,n=t.hA;n===wi.vvt||n===wi.mvt?this.iMt.push({lpt:i,hA:n,Spt:e,cpt:s,uMt:this.iMt.length}):this.cMt&&(this.eMt.push({lpt:i,hA:n,IT:e,uMt:this.eMt.length}),this.eMt.push({lpt:i,hA:wi.Mvt,IT:s,uMt:this.eMt.length}))}}fF(){const t=[];this.iMt.sort(((t,i)=>t.lpt-i.lpt||t.uMt-i.uMt)),this.eMt.sort(((t,i)=>t.lpt-i.lpt||t.uMt-i.uMt));for(const i of this.iMt){const e=this.lMt(i);e&&t.push(e)}for(const t of this.eMt)this.sMt.Vyt(t);const i=this.sMt.Xyt();for(const e of i){const i=this.dMt(e);t.push(...i)}return this.sMt.Zyt(),this.iMt=[],this.eMt=[],t}lMt(t){const i=t.hA;if(RV.xpt(t.Spt)){const e=t.Spt>>3&1;0===i?this.rMt=e:this.hMt=e}const e="CC"+(i<<1|(i?this.hMt:this.rMt)+1),s=this.oMt.get(e);return 255===t.Spt&&255===t.cpt||!t.Spt&&!t.cpt||!this.fMt(t.Spt)||!this.fMt(t.cpt)?(++this.tMt>=45&&this.Zn(),null):(this.tMt=0,t.Spt&=127,t.cpt&=127,t.Spt||t.cpt?RV.xpt(t.Spt)?s.Dpt(t):s.Tpt(t.lpt,t.Spt,t.cpt):null)}dMt(t){const i=[];try{for(;t.Wht();){const e=t.Myt().IT;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t.Myt().IT}if(0!==s){if(!this.nMt.has(s)){const t=new qV(s);this.nMt.set(s,t)}const e=this.nMt.get(s),r=t.$yt();for(;t.$yt()-r<n;){const s=e.yyt(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof ce&&t.code===le.SUBTITLE_PARSE_ERROR))throw t}return i}fMt(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.cMt=!1,this.iMt=[],this.eMt=[],this.sMt=new eW,this.tMt=0,this.oMt=sg({CC1:new RV(0,0),CC2:new RV(0,1),CC3:new RV(1,0),CC4:new RV(1,1)}),this.rMt=0,this.hMt=0,this.nMt=Ye(),this.Zn()}};r();var rW=class extends gg{constructor(t,i){super("_Mt"),this.Smt=t,this.jN=i}},hW=aa.dS(.1),oW=class extends i{gMt(t,i){this.wMt.aMt(t,i)}fF(){const t=this.wMt.fF();for(const i of t)this.Co(new rW(i.Smt,i.jN))}Zn(){this.wMt.kL()}gn(){this.Vo(),this.wMt.kL()}constructor(){super(),this.wMt=new nW}},aW=class extends oW{AMt(t,i,e,s){const n=this.vMt(t,s);this.mMt(n,i,e),this.fF()}vMt(t,i){const e=t.slice().sort(ZO),s=this.pMt;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].i6,h=s[s.length-1].i6,o=e[0].i6,a=s[0].Jnt===e[0].Jnt;if(h.MD(o).mD().vD(aa.dS(2.5*i))&&a)n=s.concat(e).sort(ZO);else if(o.fD(r)){let t=0;for(;t<s.length&&s[t].i6.vD(o);)t++;let i=!1,r=!1;for(let n=t,h=0;n<s.length&&h<e.length;n++,h++)uW(s[n],e[h])?i=!0:r=!0;const h=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(ZO):h?n=s.slice(0,t).concat(e):(n=e,a&&this.Zn())}else n=e,this.Zn();return n}mMt(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.i6.cD();if(!e&&i-r<hW.cD())return void(this.pMt=t.slice(s));this.gMt(n,r)}this.pMt=[]}constructor(...t){super(...t),this.pMt=[]}};function uW(t,i){return t.i6.$N(i.i6)&&t.hA===i.hA&&t.kvt===i.kvt&&t.Cvt===i.Cvt}var cW=class extends ni{yMt(t){return this.MMt.get(t)}TMt(t){let i=this.MMt.get(t.e6);return i||(i=this.NMt(t),this.MMt.set(t.e6,i)),i}NMt(t){const i=[Ku.Xw],e=dV(t.s6);let s,n=e?e.l:"";t.DMt&&(n="easy "+n,i.push(Ku.$w)),s=t.kh?"CC "+t.kh:n?"CC "+n:"CC"+t.e6;const r=this.cE.uE(Pt.fI,s,s,t.s6,!1,Ks.CEA608,void 0,i);return this.tt(r),r}Rft(t){const i=Qi.wy(Ao(t));this.SMt=function(t){for(const i of t.Z){const t=vV(i),e=i.Fy.$y.eM.nM.hM;let s=H_(e,(t=>t.hA===At.Bm));if(!s){const t=e.filter((t=>t.hA===At.ip)),i=H_(t,(t=>{var i;return(null==(i=t.HM)?void 0:i.hA)===At.Bm}));i&&(s=i.HM)}if(!s)continue;const n=qL(Ao(s.OM.Cp),new Vr),r=s.zM;return oe({},t,{Wy:i.iy.Wy,OM:GA(s.OM.Cp),ji:s.ji,Ti:s.Ti,nT:r&&r.nT,sT:r&&r.sT,uK:n.QX,IMt:n.FX,cK:n.YX,VX:n.VX[0],WX:n.WX[0]})}}(H_(i,mV))}elt(t,i,e,s,n,r){var h;if(!this.SMt)return;if(!j(this.Sht)&&Ua(this.Sht,i,1e-5))return;j(this.EMt)||Ua(this.EMt,i,.1)||this.bMt.Zn();const o=function(t,i,e,s,n){const r=[],h=i.filter(gV),o=s(e);for(const i of h){const s=H_(i.Z,(t=>t.iy.Wy===e.Wy));if(!s)continue;const h=s.iy.oT||0,u=s.iy.aT||0;let c=s.vT?s.vT.vT:Se.ZERO;var a;const l=i.dT+(null!=(a=s.iy.mT)?a:Se.ZERO).toNumber();for(const a of s.AT){let s=l+(a.dT||0);for(const l of a.NT){const a=l.ey||u,d=new ZL;d.hZ(t,s,s+a);const f=aa.SD(c,e.zvt);d.FS=n(l,i,e,f,Th(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||h||o)}}}return r}(t,Qi.wy(Ao(t)),this.SMt,_V,AV);var a;const u=null!=(a=null==(h=tg(o,(t=>t.FS.ct)))?void 0:h.FS.ct)?a:0,c=function(t){const i=[];for(const e of t)e.FS.Gvt&&i.push(...e.FS.Gvt),delete e.FS.Gvt;for(let t=0;t<i.length;t+=1)i[t].fT=t;return i}(o),l=aa.dS(s),d=[];for(const t of c)d.push(oe({},t,{Jnt:n,i6:t.Ivt.mN(l)}));this.bMt.AMt(d,e,r,u),this.Sht=i,this.EMt=e}Zn(){return this.bMt.Zn(),this.MMt.forEach((t=>{t.gn(),this.it(t),this.cE.AE(t)})),this.MMt.clear(),this.SMt=void 0,this.Sht=NaN,this.EMt=NaN,super.Zn()}gn(){return this.bMt.fn("_Mt",this.LMt),this.bMt.gn(),super.gn()}constructor(t){super(),this.SMt=void 0,this.Sht=NaN,this.EMt=NaN,this.LMt=t=>{const i=this.TMt({e6:t.Smt,s6:""}),e=t.jN;for(const t of i.L.xw)e.zN<t.zN&&e.PN>t.zN?e.PN=t.zN:e.zN>t.zN&&t.PN>e.zN?t.PN=e.zN:e.zN===t.zN&&(e.PN=t.PN);i.gE(e)},this.cE=t,this.MMt=Ye(),this.bMt=new aW,this.bMt.yn("_Mt",this.LMt)}};r(),r();var lW=/(.*)=(.*)/,dW=/(.*):(.*)/;function fW(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(lW);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(dW)){const[,i,e]=t.match(dW);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({e6:Number(t),s6:n,DMt:r})}}return i}var _W={1:1,2:3,3:2,4:4},gW="urn:scte:dash:cc:cea-608:2015",wW="urn:scte:dash:cc:cea-708:2015";r(),r();var AW=class extends Ha{fa(){return new vW(this.Jnt&&this.Jnt.va)}constructor(t,i,e){super(Os.Iw),this.Jnt=t,this.awt=i,this.kMt=e}},vW=class extends gg{constructor(t){super("activequalitychanged"),this.quality=t}},mW=[t.jh,qo.Mw,t.ov],pW=class extends i{CMt(t){const i=this.UAt.R_t;for(const e of i.Lt.nnt)if(i.bwt.Dwt(t,e))return e}gn(){this.Vo(),this.gP.fn(mW,this.xMt)}constructor(t,i){super(),this.xMt=t=>{const i=this.OMt,e=this.CMt(t.currentTime)||this.UAt.j_t;e&&i!==e&&(this.OMt=e,e.Jnt&&this.Co(new AW(e.Jnt,null==e?void 0:e.va,null==i?void 0:i.va)))},this.gP=t,this.gP.yn(mW,this.xMt),this.UAt=i}},yW=class extends i{get Kat(){return this.Jat}get o(){return this.NN}get TJ(){return this.NJ}get nt(){return this.jMt}get Est(){return function(t){const i=29.97,e=1024,s=44100;return t===iv.mp?s/e:i}(this.NJ)}get QAt(){return 1/this.Est}get Rt(){return Boolean(this.Jat&&this.Jat.Rt)}get hq(){const t=this.UAt?this.UAt.R_t.hq.Mwt:Ki.aR();return this.zMt().GB(t)}get b_(){let t=this.PMt();const i=this.BMt;return void 0!==i&&t.BB().gr(i)&&(t=t.GB(Ki.hR(i))),t}get Awt(){return BY(this.PMt(),this.hq.GB(this.RMt)).YB(2*this.QAt)}get RMt(){const t=this.BMt;if(t&&isFinite(t)){const i=this.UMt.jn;if(isFinite(i)&&t<i)return new Ki([t,i],[!1,!0])}return Ki.aR()}get yg(){const t=this.Jat;if(!t)return Ki.hR(0);const i=t.Fnt.vrt,e=t.Fnt.Art;if(void 0===e||void 0===i)return Ki.hR(0);const s=e;let n=i>=t.Fnt.Knt.jn?x.max(i,this.jn):i;return n=x.max(s,n),Ki.oR(s,n).BB()}get _P(){return this.Awt.nR(this.j_)}get ywt(){return this.UMt.ywt}get j_(){return this.gP.j_}get Cn(){return this.Jat?this.Jat.Fnt.Knt.Cn:NaN}get jn(){const t=this.QMt(),i=this.BMt;return void 0===t?NaN:void 0!==i?i:t}QMt(){var t;return null==(t=this.Jat)?void 0:t.Fnt.Knt.jn}get Ti(){return this.UMt.Ti}get ji(){return this.UMt.ji}get svt(){return this.BMt}X_t(){return void 0!==this.UAt&&this.UAt.X_t}pwt(){if(void 0===this.BMt)return!1;const t=this.PMt().BB(),i=t.HB(this.BMt);return!(i<0)&&t.Cn(i)!==this.BMt}yJ(){const t=this.UMt.ywt,i=this.PMt().Sn(t);this.BMt=i.U>0?i.jn(i.U-1):0;const e=t.jn(0);isFinite(e)&&this.BMt<e&&this.aq(this.BMt,e),this.$At()}async elt(t,i,e,s){const n=e.pst.CS,r=this.FMt(t,i,e,n,s),h=this.YMt(t,i,e,n,s),[o]=await il([h,r]);return o}async FMt(t,i,e,s,n){if(!ln(e.dY))return;let r;if(t.hA===at.zI){const i=t.Cp.Bgt(),e=await i.qj(n);r=new T(e)}else r=new T(t.Cp.__t);const h=[];if(void 0!==this.Mft&&(this.Mft.elt(r,i.zN,s),h.push(this.Mft)),void 0!==this.GMt){const t=e.drt(i);this.GMt.elt(r,i.zN,i.PN,s,e.Jnt,t),h.push(this.GMt)}wy(this.b_,h)}Rft(t,i,e){return Pi(e),this.GMt&&this.GMt.Rft(new T(t.__t)),Promise.resolve()}$n(t,i){const e=new Po;i&&e.l_(i),this.wE.c_(),this.wE=e;const s=this.VMt(t,this.avt,e.a_);return this.avt=s,s}WMt(t){if(na(this.gft,Ks.CEA608))return;const i=t.Fnt.Hst;if(function(t){return t.some((t=>t.nst===gW||t.nst===wW))}(i)){this.GMt=new cW(this.cE);const t=function(t){const i=[];for(const e of t)if(e.nst===gW){const t=JO(e.IT);for(const e of t)i.push(e)}else if(e.nst===wW){const t=fW(e.IT);for(const e of t)if(e.e6<=4){const t=_W[e.e6];i.push(oe({},e,{e6:t}))}}return i}(i);for(const i of t)this.GMt.TMt(i);this.jMt.nP(this.GMt.Z)}}async VMt(t,i,e){Pi(e),i&&await i.catch(xs),this.Jat===t&&this.HMt||(await this.qMt(),Pi(e),await this.XMt(),Pi(e),t&&await this.lE(t))}async qMt(){const t=this.Jat;this.Jat=void 0,this.HMt=!1,this.BMt=void 0,t&&(t.fn(Os.Lw,this.ZMt),t.lut(!1),t.fn(Os.NO_QUALITY,this.Ds)),this.KMt&&(this.KMt.gn(),this.KMt=void 0),this.UAt&&(await this.UAt.gn(),this.UAt=void 0),this.GMt&&(this.jMt.oP(this.GMt.Z),await this.GMt.gn())}async lE(t){this.Jat=t,this.WMt(t),t.yn(Os.Lw,this.ZMt),t.yn(Os.NO_QUALITY,this.Ds),await this.JMt(t),this.UAt=this.$Mt(t),this.UAt.yn(iV,this.Ds),this.UAt.yn("I_t",this.$At),this.UAt.Q_t=t.aut,this.KMt=new pW(this.gP,this.UAt),this.KMt.yn(Os.Iw,this.nut),t.lut(!0),this.HMt=!0}async Zn(t){this.wE.c_(),this.avt&&(await this.avt.catch(xs),this.avt=void 0),await this.qMt(),t||await this.XMt(),await this.tTt()}async iTt(){await this.qMt()}eTt(t){this.UAt&&this.Jat&&this.Jat===t.Lt&&(this.UAt.Q_t=this.Jat.aut)}async Nlt(t){this.UAt&&await this.UAt.Nlt(t)}async Plt(t){this.UAt&&await this.UAt.Plt(t)}aW(){const t=this.b_.rR;return this.vR.aW(t)}async gn(t){this.Vo();try{await this.Zn(t),await this.iTt()}catch(t){}}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.Jat=void 0,this.UAt=void 0,this.HMt=!1,this.wE=new Po,this.avt=void 0,this.BMt=void 0,this.GMt=void 0,this.jMt=new fh([]),this.$At=()=>{!this.X_t()&&this.pwt()&&this.UMt.$At()},this.nut=t=>{this.Jat.nut(t),this.Co(new nV(t.awt,t.kMt))},this.ZMt=t=>{this.eTt(t)},this.NN=function(){const t=eV;return eV+=1,t}(),this.NJ=t,this.dE=s,this.vR=n,this.UMt=i,this.gP=e,this.Ict=r,this.cE=h,this.Mft=o,this.wct=a,this.hct=a?Dv(t,a):void 0,this.Mct=u,this.gft=c}};function MW(t,i,e){const s=new Rh(Ao(t),new Vr),n=Mi.Jp(s,At.Tm);if(!n)return;const r=Mi.Wp(n.Cp),h=H_(r,(t=>t.hA===At.Dm)),o=H_(r,(t=>t.hA===At.lp));if(!h)return;const a=Mi.Jp(h.Cp,At.Im);if(!a)return;const u=Mi.Jp(a.Cp,At.Cm);if(!u)return;const c=Mi.Jp(u.Cp,At.xm);if(!c)return;const l=Mi.Wp(c.Cp),d=H_(l,(t=>t.hA===At.Om));if(!d)return;const f=Mi.ly(d.Cp,At.Om,!1),_=new Rh(Ao(f.Cp),new Vr);_.Yp(4);const g=Mi.Wp(_),w=[];for(const t of g){if(t.hA===At.tp||t.hA===At.ip)return;t.hA===At.Bm?w.push({sTt:t,nTt:At.ip}):t.hA===At.Xm&&w.push({sTt:t,nTt:At.tp})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(o,i)&&0===w.length)return;let A=Pe(t);const v=H_(r,(t=>t.hA===At.zm)),m=v?Mi.Jp(v.Cp,At.Pm):void 0,p=m?function(t){const i=t.Cp.Sp();return i.Yp(4),i.Yp(4),i.zp()}(m):1,y=H_(l,(t=>t.hA===At.jm));y&&function(t,i,e){const s=DW(Ao(t),i),n=Mi.Kp(s,new Vr),r=n.Cp;r.Yp(4);const h=r.zp();for(let t=0;t<h;t++){r.Yp(4),r.Yp(4);const t=r.xp.Sp(),i=r.zp();eu(r.Cp,t,i+e)}}(A,y,w.length),m&&function(t,i,e){const s=DW(Ao(t),i),n=Mi.Kp(s,new Vr),r=n.Cp;r.Yp(4),r.Yp(4),eu(r.Cp,r.xp,e)}(A,m,1),A=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=TW(n,i,new T(t));return n}(A,n,o,i);const M=[n,h,a,u,c,d];for(let t=w.length-1;t>=0;t--){const i=w[t];A=NW(A,i.sTt,d,M,i.nTt,e)}return{rTt:A,hTt:{oTt:w.length,hT:p}}}function TW(t,i,e){const s=Jw(t,e,i.Cp.Cp.byteOffset+i.Cp.Cp.byteLength);return SW(DW(Ao(s),i),e.byteLength),s}function NW(t,i,e,s,n,r){const h=function(t,i,e){0;const s=t.Cp.Cp,n=kW(),r=new T(s.byteLength+n.byteLength),h=Ao(r);r.set(xe(s),0),SW(h,n.byteLength),OA(h,new Vr(OW),i),r.set(n,s.byteLength),OA(h,new Vr(s.byteLength+CW),t.hA),e&&DA(h,new Vr(s.byteLength+xW),e);return r}(i,n,r),o=Jw(t,h,i.Cp.Cp.byteOffset),a=Ao(o);!function(t,i){const e=Mi.Kp(t,new Vr),s=Mi.ly(e.Cp,At.Om,!1),n=Ao(s.Cp),r=n.getUint32(0);n.setUint32(0,r+i)}(DW(a,e),1);for(const t of s)SW(DW(a,t),h.byteLength);return o}function DW(t,i){const e=i.Cp.Cp.byteOffset;return ir(t,e,e+i.Cp.Cp.byteLength)}function SW(t,i){const e=new Vr,s=Sn(t,e);if(0===s);else if(1===s){e.Np(4);const s=We(t,e.Sp());bA(t,e,s.add(i))}else e.Dp(0),eu(t,e,s+i)}r();var IW=class extends Gu{start(t){this.uH=t}transform(t){this.xq(t),this.aTt()}flush(){this.jq(),this.aTt()}Yq(t){return t===At.ep}Vq(t){let i=Pe(xe(t.Cp.Cp));const e=Mi.Kp(Ao(i),new Vr);i=EW(i,e,this.uTt),this.cTt.push(i)}Hq(t){this.cTt.push(t)}aTt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const h=t[r];e===h.buffer&&s+n===h.byteOffset?n+=h.byteLength:(i.push(new T(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=h))}return i.push(new T(e,s,n)),i}(this.cTt))this.uH.enqueue(t);Ri(this.cTt)}constructor(t){super(),this.cTt=[],this.uTt=t}};function EW(t,i,e){let s=t;const n=Mi.Wp(i.Cp);for(let t=n.length-1;t>=0;t--){const r=n[t];r.hA===At.np&&(s=bW(s,r,i,e))}return s}function bW(t,i,e,s){const n=DW(Ao(t),i),r=Mi.Kp(n,new Vr),h=Mi.Wp(r.Cp),o=H_(h,(t=>t.hA===At.rp));if(!o)return t;const a=o.Cp,u=a.xp.Sp(),c=a.zp(),{flags:l}=sc(c);a.Yp(4),l.Ep(mt.BASE_DATA_OFFSET_PRESENT)&&a.Yp(8);const d=a.xp.Sp();if(l.Ep(mt.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=Sn(a.Cp,d);return eu(a.Cp,a.xp,i+s.oTt),t}{eu(a.Cp,u,c|mt.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new T(4);Ao(n).setUint32(0,s.hT+s.oTt);const r=a.Cp.byteOffset+d.Ku;for(const t of h.filter((t=>t.hA===At.hp)))LW(t,n.byteLength);for(const s of[o,i,e])SW(DW(Ao(t),s),n.byteLength);return Jw(t,n,r)}}function LW(t,i){const e=t.Cp,s=e.zp(),{flags:n}=sc(s);if(e.Yp(4),n.Ep(hn.DATA_OFFSET_PRESENT)){const t=e.Sp().zp();eu(e.Cp,e.xp,t+i)}}var kW=jl((()=>new T([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),CW=16,xW=64,OW=4,jW=class extends yW{PMt(){return this.jAt?this.jAt.b_:Ki.aR()}zMt(){return this.jAt?this.jAt.DJ:Ki.aR()}get ji(){return this.UMt.ji}async YMt(t,i,e,s,n){var r;let h;if(Pi(n),t.hA===at.zI){let i=t.Cp.OG;this.lTt&&(i=function(t,i){return t.pipeThrough(new xh(new IW(i)))}(i,this.lTt)),h={hA:at.zI,Cp:i}}else{let i=new T(t.Cp.__t);this.lTt&&(i=function(t,i){let e=Pe(t);const s=new Rh(Ao(e),new Vr),n=Mi.Wp(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.hA===At.ep&&(e=EW(e,s,i))}return e}(i,this.lTt)),h={hA:at.bH,Cp:i}}const o={p8:i.zN,ct:i.ct,CS:s,cK:null==(r=e.Jnt)?void 0:r.Vw},a=this.jAt.b_;await this.dTt(),await this.jAt.jK(h,o,n);return function(t,i,e,s){let n,r,h=i.WB(t.BB());return h=h.WB(e.WB(i)),0===h.U?(n=s.PN,r=n):(n=h.Cn(0),r=h.jn(0)),{SAt:n,IAt:r}}(a,this.jAt.b_,this.jAt.DJ,i)}async Rft(t,i,e){var s;await super.Rft(t,i,e);let n=new T(t.__t);if(this.fTt(i)){const t=this.UMt.Bdt;let i,e=[];t&&(e=Nh(t.Uct,(t=>t.iP)),i=t.Bct.pj?TE(t.Bct.pj):void 0);const s=MW(n,e,i);s?(this.lTt=s.hTt,n=s.rTt):this.lTt=void 0}const r={hA:at.bH,Cp:n};await this.dTt(),await this.jAt.BK(r,{cK:null==(s=i.Jnt)?void 0:s.Vw},e)}rAt(t,i,e){return this.jAt.pN(t,i,e)}aq(t,i){this.jAt.EJ(t,i)}uq(t,i){this.jAt.bJ(t,i)}async JMt(t){var i;const e=qF.pct(null!=(i=t.aut)?i:t.nnt,this.hct).dY;this.jAt||(this.jAt=await this.UMt._Tt(e),this.jAt.yn(tt.IH,this.Ds),this.vct=new qG(this.jAt)),await this.dTt()}eTt(t){const i=t.Lt.aut;if(void 0===i)return super.eTt(t);if(i.some((t=>this.vct.OH(t))))return super.eTt(t);this.Co(new gg("pdt"))}tTt(){return this.jAt&&(this.jAt.fn(tt.IH,this.Ds),this.jAt=void 0),Promise.resolve()}XMt(){return this.jAt?this.jAt.pN(0,1/0):Promise.resolve()}$Mt(t){return new WG(this,this.gP,this.gP,this.dE,this.vR,this.xAt,this.Ict,this.wct,this.hct,this.vct,this.Mct).M8(t)}dTt(){const t=this.UMt.ywt,i=x.max(0,t.Cn(0)-.1),e=t.jn(0)+.01;return this.jAt.JK(i,e)}fTt(t){if(!ln(t.dY))return!1;if(this.UMt.o4)return!0;return void 0!==this.UMt.Bdt}constructor(t,i,e,s,n,r,h,o,a,u,c,l){super(t,i,e,s,n,h,o,a,u,c,l),this.jAt=void 0,this.vct=new XG,this.lTt=void 0,this.xAt=r}},zW=class extends tV{get ji(){return this.vu.ji}get Ti(){return this.vu.Ti}get ct(){return this.gP.ct}get o4(){return this.gP.o4}async zH(t,i,e){this.nJ!==e&&(this.nJ=e,await this.evt(!1)),await super.gvt(t,i)}fvt(t){return new jW(t,this,this.gP,this.dE,this.vR,this.xAt,this.Ict,this.cE,this.Mft,this.Sdt,this.Mct,this.gft)}_vt(){}_Tt(t){if(Kg(t,"audio")){if(this.nJ.d$)return Promise.resolve(this.nJ.d$)}else if(Kg(t,"video")&&this.nJ.f$)return Promise.resolve(this.nJ.f$);throw new b("Cannot allocate source buffer for mime type "+t)}gn(i){return this.gP.fn(t.fv,this.wvt),super.gn(i)}constructor(i,e,s,n,r,h,o,a,u,c,l,d,f){super(s,n,r,i,h,o,a,c,d,f),this.vu=u,this.nJ=e,this.xAt=h.lowLatency,this.Mft=l,this.Sdt=h.abr,this.gP.yn(t.fv,this.wvt)}},PW=class extends kY{dlt(t,i,e,s,n,r){const h=this.gP,o=this.MP;return new zW(h,o,t,i,e,s,n,r,this.gTt,h,this.Mft,this.Mct,this.gft)}zlt(t,i,e){return t.zH(i,e,this.MP)}blt(t){return!!this.MP&&this.MP.OH(t)}async _$(t){this.MP=await this.gP.$n(t),this.wTt(),this.ATt(),this.MP.p$(this.ct)}async Ult(){this.vTt=this.Zlt,this.MP&&(await this.gP.Zn(),this.MP=void 0)}yJ(){this.MP.yJ()}lJ(){const t=this.ct;this.MP.ct<t&&this.MP.p$(t),this.MP.lJ()}async qdt(t){const i=this.MP,e=[];i.d$&&e.push(Sk(i.d$,t)),i.f$&&e.push(Sk(i.f$,t)),await Promise.all(e)}Olt(t){return this.MP.zH(t)}Rdt(){return!0}get idt(){return this.gP.hg}H4(){return this.gP.Vg()}ift(){this.gP.Gg()}get ag(){return this.gP.ag}set ag(t){this.gP.ag=t}get edt(){return this.gP.fg}ge(){super.ge(),this.gP.ge()}be(){super.be(),this.gP.be()}get nt(){return this.Dl}get Z_(){return this.gP.Z_}set Z_(t){this.gP.Z_=t}get xg(){return this.gP.xg}set xg(t){this.gP.xg=hi(t,0,1)}Ndt(t){for(const i of t)i.src&&this.PP.aE(i);qs(this.PP.Z)}async lft(i,e,s,n){for(this.gP.Dp(i,e,s);this.adt||this.B$;)await this.gP.D_([t.XA,t.BA],n)}get adt(){return this.gP.Tg}get B$(){return this.gP.B$}get Zlt(){return function(t,i){return{aN:t.aN+i.aN,uN:t.uN+i.uN,cN:t.cN+i.cN}}(this.vTt,this.gP.X_())}wTt(){const t=this.MP;t&&(t.f$&&(t.f$.HV=this.vR.sW),t.d$&&(t.d$.HV=this.vR.sW))}ATt(){const t=this.MP;t&&(t.f$&&(t.f$.KV=this.vR.KV),t.d$&&(t.d$.KV=this.vR.KV))}ga(t,i,e){return this.CP.Jz(t.contentProtection),super.ga(t,i,e)}determineStallJumpTarget(){if(this.Tlt)return this.Tlt.Odt()&&this.j_>this.Tlt.jn-Mk&&!this.Tlt.Wlt?this.Tlt.jn:void 0}async Zn(){await super.Zn(),this.vTt={aN:0,uN:0,cN:0},await this.PP.Zn(),this.gP.BP()}async gn(){await super.gn(),await this.PP.gn(),this.Dl.gn(),this.vR.fn("WV",this.mTt),this.vR.fn("ZV",this.pTt),this.gP.fn(Bi.ha,this.yTt),this.gP.fn([t.DA,t.NA],this.Ds),this.gP.FP=void 0,this.gP.M3=void 0}constructor(i,e,s,n,r,h){super(i,e,s,n,r),this.MP=void 0,this.vTt={aN:0,uN:0,cN:0},this.yTt=t=>{this.hB(tm(t.lt))},this.mTt=()=>{this.wTt()},this.pTt=()=>{this.ATt()},this.gP.yn(Bi.ha,this.yTt),this.vR.yn("WV",this.mTt),this.vR.yn("ZV",this.pTt),this.gTt=h,this.PP=new Cu(this.gP,this.dE),this.Dl.nP(this.PP.Z),this.CP=new lu(i),this.gP.FP=this.CP,this.gP.M3=this,this.gP.yn([t.DA,t.NA],this.Ds)}};function BW(t){const i=li.Tb||li.mb,e=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=i&&!e,n=new Ek(!0);return async t=>{const i=t.IP;if(!n.w$(i)&&!function(t,i){return!!t&&(ln(t)?oy(i)||uy(i):Va(t,K.APPLICATION_TTML_XML)||Va(t,K.TEXT_VTT)||Va(t,K.IMAGE_JPEG))}(t.dY,t.Nst))return!1;const e=t.Nst.some((t=>"ac-3"===t||"ec-3"===t));if(s&&e)return!1;if(t.Sst){const e=t.Sst,s=Nh(e,(t=>Vy(t.nst))).filter(j_),n=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(s,(t=>ag.Lx(t,i)));if(!n)return!1}return!0}}r(),r();var RW=class{get Ti(){return this.MTt.offsetHeight*ag.Ys.j4}get ji(){return this.MTt.offsetWidth*ag.Ys.j4}constructor(t){this.MTt=t}};r();var Dn=class{get nt(){return this.Dl}uE(t,i,e,s,n,r,h,o){const a=new wn(t,i,e,s,n,r,h,void 0,o);return this.Dl.tt(a),this.N2.tt(a),a}AE(t){this.Dl.it(t),this.N2.it(t),t.gn()}Zn(){for(const t of this.Dl.xw.slice())t.gn();this.Dl.Zn(),this.N2.Zn()}gn(){this.Zn(),this.Dl.gn(),this.N2.gn()}constructor(t,i){this.Dl=new sn,this.N2=new sx(t,i)}};r(),r();var xt=class{oB(t){return this.$z.oB(t)}Git(t){return this.$z.Git(t)}YP(t){return this.$z.YP(t)}constructor(t){this.$z=t}};r(),r(),r();var UW=class extends i{get TTt(){return this.gP}get b_(){return this.L_()}L_(){return this.gP.b_}get k_(){return this.C_()}C_(){return this.gP.k_}get j_(){return this.z_()}z_(){return this.gP.j_}get Iu(){return this.gP.Iu}get ct(){return this.Td()}Td(){return this.gP.ct}get TP(){return this.NTt()}NTt(){return this.gP.TP}get R_(){return this.DTt()}DTt(){return this.gP.R_}get lt(){return this.gP.lt}get Ti(){return this.gP.Ti}get ji(){return this.gP.ji}get ya(){return this.Rg()}Rg(){return this.gP.ya}get Z_(){return this.gP.Z_}set Z_(t){this.gP.Z_=t}get hg(){return this.STt()}STt(){return this.gP.hg}get ag(){return this.gP.ag}set ag(t){this.gP.ag=t}get fg(){return this._g()}_g(){return this.gP.fg}get vg(){return this.pg()}pg(){return this.gP.vg}get yg(){return this.Mg()}Mg(){return this.gP.yg}get Tg(){return this.Ng()}Ng(){return this.gP.Tg}get B$(){return this.ITt()}ITt(){return this.gP.B$}get X$(){return this.ETt()}ETt(){return this.gP.X$}get nt(){return this.Dg()}Dg(){return this.bTt}get Ol(){return this.Y3()}Y3(){return this.gP.Ol}get F4(){return this.gP.F4}get xg(){return this.gP.xg}set xg(t){this.gP.xg=t}get A3(){return this.gP.A3}get W_(){return this.gP.W_}get A4(){return this.gP.A4}get FP(){return this.LTt()}set FP(t){this.kTt(t)}LTt(){return this.gP.FP}kTt(t){this.gP.FP=t}get M3(){return this.gP.M3}set M3(t){this.CTt(t)}CTt(t){this.gP.M3=t}get o4(){return this.xTt()}xTt(){return this.gP.o4}X_(){return this.gP.X_()}Vg(){return this.gP.Vg()}Gg(){this.gP.Gg()}Dp(t,i,e){this.gP.Dp(t,i,e)}wP(t){this.gP.wP(t)}ge(){this.gP.ge()}be(){this.gP.be()}uE(t,i,e,s,n,r,h,o){return this.gP.uE(t,i,e,s,n,r,h,o)}OP(){return this.gP.OP()}zP(t,i,e,s,n){return this.gP.zP(t,i,e,s,n)}AE(t){this.gP.AE(t)}BP(){this.gP.BP()}tq(t){return this.gP.tq(t)}async $n(t){const i=await this.gP.$n(t);let e;return e=t.hA===wt.bO?this.OTt(i):this.jTt(i),this.MP=e,e}async Zn(){this.MP&&(await this.MP.e_(),this.MP=void 0),await this.gP.Zn()}g3(){this.gP.g3()}w3(){this.gP.w3()}async e_(){this.Vo(),this.gP.fn(_L,this.zTt),this.bTt.Pw=void 0,this.bTt.gn(),this.MP&&(await this.MP.e_(),this.MP=void 0)}m3(){this.gP.m3()}PTt(t){this.gP.fn(_L,this.zTt),this.gP=t,this.bTt.Pw=t.nt,this.gP.yn(_L,this.zTt)}Jg(t){this.Co(t)}constructor(t){super(),this.MP=void 0,this.bTt=new Ac,this.zTt=t=>this.Jg(t),this.gP=t,this.bTt.Pw=t.nt,this.gP.yn(_L,this.zTt)}},QW=class extends UW{get pP(){return this.gP.pP}get V$(){return this.gP.V$}get Bg(){return this.gP.Bg}set Bg(t){this.gP.Bg=t}y3(t){this.gP.y3(t)}D4(){this.gP.D4()}Zg(){this.gP.Zg()}constructor(t){super(t)}};r(),r(),r();var FW=class{get wd(){return this.Tx()}Tx(){return this.MP.wd}get yg(){return this.Mg()}Mg(){return this.MP.yg}get rt(){return this.MP.rt}OH(t){return this.MP.OH(t)}zH(t){return this.MP.zH(t)}e_(){return Promise.resolve()}constructor(t){this.MP=t}},ut=class extends FW{get d$(){return this.A$}get f$(){return this.v$}get b_(){return this.L_()}L_(){return this.MP.b_}get ct(){return this.Td()}Td(){return this.MP.ct}get KH(){return this.BTt()}BTt(){return this.MP.KH}p$(t){this.MP.p$(t)}N$(t,i,e,s){this.MP.N$(t,i,e,s)}yJ(){this.MP.yJ()}lJ(){this.MP.lJ()}e_(){return this.A$&&(this.A$.e_(),this.A$=void 0),this.v$&&(this.v$.e_(),this.v$=void 0),super.e_()}RTt(t){this.MP=t,this.A$?t.d$?this.A$.UTt(t.d$):(this.A$.e_(),this.A$=void 0):t.d$&&(this.A$=this.QTt(t.d$),this.A$.yn(on,this.FTt)),this.v$?t.f$?this.v$.UTt(t.f$):(this.v$.e_(),this.v$=void 0):t.f$&&(this.v$=this.QTt(t.f$),this.v$.yn(on,this.FTt))}YTt(t){}constructor(t){super(t),this.A$=void 0,this.v$=void 0,this.FTt=t=>this.YTt(t)}};r(),r(),r();var YW=class extends i{get KV(){return this.rW}set KV(t){this.rW=t}get b_(){return Ki.aR()}get wd(){return this.Zx}get TJ(){return iv.KT}get DJ(){return Ki.aR()}get GTt(){return!1}get HV(){return this.eW}set HV(t){this.eW=t}jK(t,i,e){return Promise.reject(new b("Invalid media buffer"))}LJ(){return Promise.reject(new b("Invalid media buffer"))}BK(t,i,e){return Promise.reject(new b("Invalid media buffer"))}KH(){return!1}yJ(){}EJ(t,i){}bJ(t,i){}pN(t,i,e){return Promise.resolve()}JK(t,i){return Promise.reject(new b("Invalid media buffer"))}EN(t,i){return Promise.reject(new b("Invalid media buffer"))}OH(t){return!1}zH(t){return Promise.reject(new b("Invalid media buffer"))}e_(){this.Vo()}constructor(t){super(),this.eW=0,this.rW=0,this.Zx=t}},GW=class extends i{get KV(){return this.VTt()}set KV(t){this.WTt(t)}VTt(){return this.jAt.KV}WTt(t){this.jAt.KV=t}get b_(){return this.L_()}L_(){return this.jAt.b_}get wd(){return this.Tx()}Tx(){return this.jAt.wd}get TJ(){return this.jAt.TJ}get DJ(){return this.HTt()}HTt(){return this.jAt.DJ}get HV(){return this.qTt()}set HV(t){this.XTt(t)}qTt(){return this.jAt.HV}XTt(t){this.jAt.HV=t}jK(t,i,e){return this.jAt.jK(t,i,e)}LJ(){return this.jAt.LJ()}BK(t,i,e){return this.jAt.BK(t,i,e)}KH(){return this.jAt.KH()}yJ(){this.jAt.yJ()}EJ(t,i){this.jAt.EJ(t,i)}bJ(t,i){this.jAt.bJ(t,i)}pN(t,i,e){return this.jAt.pN(t,i,e)}JK(t,i){return this.jAt.JK(t,i)}OH(t){return this.jAt.OH(t)}zH(t){return this.jAt.zH(t)}Jg(t){this.Co(t)}e_(){this.Vo(),this.UTt(new YW(this.wd))}UTt(t){this.jAt.fn(on,this.ZTt),this.jAt=t,this.jAt.yn(on,this.ZTt)}constructor(t){super(),this.ZTt=t=>this.Jg(t),this.jAt=t,this.jAt.yn(on,this.ZTt)}},VW=class extends GW{get Qit(){return this.gP}set Qit(t){this.gP=t}async jK(t,i,e){return Pi(e),await this.FAt(this.gP.j_,null==i?void 0:i.p8,null==i?void 0:i.ct),Pi(e),t.hA===at.zI?await this.KTt(t,i,e):await this.JTt(t,i,e)}async KTt(t,i,e){let s=t;for(;;){const[t,n]=rb(s.Cp);s={hA:at.zI,Cp:t};try{return await this.$Tt(s,i,e),void n.cancel(new sa).catch(xs)}catch(t){if(fc(t)){if(await this.FAt(this.gP.j_,i.p8,i.ct,e)){s={hA:at.zI,Cp:n};continue}}throw n.cancel(t).catch(xs),t}}}async JTt(t,i,e){for(;;)try{return Pi(e),await this.$Tt(t,i,e)}catch(t){if(fc(t)){if(await this.FAt(this.gP.j_,i.p8,i.ct,e))continue}throw t}}async FAt(t,i,e,s){const n=zb(t,i,e,this.b_,this.HV,this.KV);for(const[t,i]of n)await this.tNt(t,i,s);return n.length>0}$Tt(t,i,e){return super.jK(t,i,e)}tNt(t,i,e){return super.pN(t,i,e)}constructor(t){super(t),this.gP=void 0}},WW=class extends ut{get Qit(){return this.gP}set Qit(t){this.gP=t,this.A$&&(this.A$.Qit=t),this.v$&&(this.v$.Qit=t)}QTt(t){const i=new VW(t);return i.Qit=this.gP,i}constructor(t){super(t),this.gP=void 0,this.RTt(t)}};r();var Jt=class extends FW{get gg(){return this.MP.gg}set gg(t){this.MP.gg=t}};r();var An=class extends UW{get pP(){return this.gP.pP}get V$(){return this.gP.V$}get Lg(){return this.gP.Lg}get Sg(){return this.gP.Sg}get Bg(){return this.gP.Bg}set Bg(t){this.gP.Bg=t}y3(t){this.gP.y3(t)}D4(){this.gP.D4()}Zg(){this.gP.Zg()}Ug(){return this.gP.Ug()}constructor(t){super(t)}},HW=class extends QW{get TTt(){return this.gP}jTt(t){const i=new WW(t);return i.Qit=this,i}OTt(t){return new Jt(t)}},qW=class extends An{get TTt(){return this.gP}jTt(t){const i=new WW(t);return i.Qit=this,i}OTt(t){return new Jt(t)}},Oc=class extends xt{oB(t){return t===iv.vp?new qW(super.oB(t)):t===iv.mp?new HW(super.oB(t)):void 0}async YP(t){const i=t;await i.e_(),await super.YP(i.TTt)}};r();var XW=class{iNt(){this.Qo.Kg()}gn(){s.removeEventListener("pageshow",this.eNt)}constructor(t){this.eNt=t=>{t.persisted&&this.iNt()},this.Qo=t,s.addEventListener("pageshow",this.eNt)}},ZW=class extends PW{Ug(){if(DU(this.gP))return this.gP.Ug()}get cdt(){return DU(this.gP)?this.gP.Sg:0}get ddt(){return DU(this.gP)?this.gP.Lg:0}async gn(){var t;await super.gn(),null==(t=this.sNt)||t.gn()}jdt(t){var i,e;return((null!=(e=null==(i=this.bc)?void 0:i.seamlessSwitchStrategy)?e:wo.HT)!==wo.HT||!li.Jb)&&super.jdt(t)}Rdt(){return!(li.mb&&li.yb<3)&&super.Rdt()}Bft(){return new Dn(this,new nx)}wft(t){return BW(t)}constructor(t,i,e,s,n,r){super(t,i,e,s,n,new RW(r)),this.MTt=r,li.Rb&&(this.sNt=new XW(this))}},KW=class extends ZW{async gn(){await super.gn(),await this.GP.YP(this.gP)}constructor(t,i,e,s,n,r,h){const o=new Oc(n);super(t,i,e,s,o.oB(r),h),this.GP=o}};r(),r(),r(),r(),r();var JW=class extends GW{get nNt(){return this.oit.nNt}L_(){return super.L_().Np(this.nNt)}HTt(){return super.HTt().Np(this.nNt)}jK(t,i,e){const s=this.nNt;return super.jK(t,{p8:i.p8-s,ct:i.ct,CS:i.CS-s},e)}JK(t,i){const e=this.nNt;return super.JK(x.max(0,t-e),x.max(0,i-e))}pN(t,i,e){const s=this.nNt;return super.pN(x.max(0,t-s),x.max(0,i-s),e)}EJ(t,i){const e=this.nNt;super.EJ(x.max(0,t-e),x.max(0,i-e))}bJ(t,i){const e=this.nNt;super.bJ(x.max(0,t-e),x.max(0,i-e))}constructor(t,i){super(i),this.oit=t}},$W=class extends ut{get nNt(){return this.oit.nNt}Td(){return super.Td()+this.nNt}p$(t){super.p$(t-this.nNt)}Mg(){return super.Mg().Np(this.nNt)}N$(t,i,e,s){const n=this.nNt;super.N$(t-n,i-n,e,s)}QTt(t){return new JW(this,t)}constructor(t,i){super(i),this.RTt(i),this.oit=t}},tH=class extends An{get TTt(){return this.gP}get nNt(){return this.rNt}set nNt(t){this.rNt=t}L_(){return super.L_().Np(this.rNt)}C_(){return iH(super.C_(),this.rNt)}z_(){return super.z_()+this.rNt}Td(){return super.Td()+this.rNt}_g(){return super._g().Np(this.rNt)}Mg(){return super.Mg().Np(this.rNt)}Dp(t,i,e){const s=x.max(0,t-this.rNt);super.Dp(s,i,e)}wP(t){super.wP(iH(t,-this.rNt))}Dg(){return this.Dl}uE(t,i,e,s,n,r,h,o){return this.cE.uE(t,i,e,s,n,r,h,o)}AE(t){this.cE.AE(t)}BP(){this.cE.Zn(),super.BP()}OP(){return!1}zP(t,i,e,s,n){throw new b("Not supported")}e_(){return this.Z6.gn(),this.X6.gn(),this.cE.gn(),this.Dl.gn(),super.e_()}jTt(t){return new $W(this,t)}OTt(t){return new Jt(t)}Jg(i){let e;switch(i.type){case t.jh:e=new vh(i.currentTime+this.rNt);break;case t.Sh:e=new ws(i.currentTime+this.rNt);break;case qo.Tv:e=new Hr(i.currentTime+this.rNt);break;case t.ov:e=new Tc(i.currentTime+this.rNt,iH(i.currentProgramDateTime,this.rNt));break;case t.VA:e=new N(i.currentTime+this.rNt);break;case t.ZA:e=new Ot(i.currentTime+this.rNt);break;case t.XA:e=new $s(i.currentTime+this.rNt);break;case t.zA:e=new Ok(i.currentTime+this.rNt);break;case t.BA:e=new Nx(i.currentTime+this.rNt);break;case t.kA:e=new ys(i.currentTime+this.rNt);break;case t.WA:e=new Qh(i.currentTime+this.rNt,i.playbackRate);break;case t.uv:e=new Ve(i.currentTime+this.rNt,i.volume);break;case t.EA:e=new Mn(i.duration+this.rNt);break;case qo.Mw:e=new ds(i.currentTime+this.rNt,i.readyState);break;default:e=i}super.Jg(e)}be(){super.be(),this.X6.be()}ge(){super.ge(),this.X6.ge()}constructor(t){super(t),this.rNt=0,this.cE=new Dn(this,new nx),this.Dl=new fh([this.cE.nt,super.Dg()]),this.X6=new Bx,this.X6.y3(this.pP.parentElement),this.Z6=new ic(this.X6.we,this.Iu,this.Dl,this.Ol,this.ya)}};function iH(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var eH=class extends xt{oB(t){if(t===iv.vp)return new tH(super.oB(t))}async YP(t){const i=t;await i.e_(),await super.YP(i.TTt)}},sH=class extends ZW{async _$(t){await super._$(t),void 0===this.hNt&&(this.hNt=this.oNt(),this.gP.nNt=this.hNt)}oNt(){if(this.ct===1/0){const t=this.qlt;if(t.U>0)return x.max(0,t.Cn(0)-300)}return 0}a2(t,i,e,s,n,r,h,o){return void 0===r&&(r=!1),void 0===h&&(h=jF.ict),void 0===o&&(o=!1),o||(o=this.ct===1/0&&li.mb&&li.yb<3&&t<=this.j_),super.a2(t,i,e,s,n,r,h,o)}async Zn(){await super.Zn(),this.hNt=void 0,this.gP.nNt=0}async gn(){await super.gn(),await this.gP.e_(),await this.GP.YP(this.gP)}static Px(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(li.mb&&li.yb<4)}constructor(t,i,e,s,n,r,h){const o=new eH(new Oc(n));super(t,i,e,s,o.oB(r),h),this.GP=o,this.hNt=void 0}};r(),r(),r(),r(),r();var nH=class extends UW{get TTt(){return this.gP}get Sg(){return this.gP.Sg}get Lg(){return this.gP.Lg}constructor(t){super(t)}};r(),r(),r();var rH=class extends GW{VTt(){return this.aNt?this.rW:super.VTt()}WTt(t){this.aNt?this.rW=t:super.WTt(t)}L_(){return this.aNt?this.uNt:super.L_()}Tx(){return this.aNt?this.Zx:super.Tx()}HTt(){return this.aNt?this.cNt:super.HTt()}qTt(){return this.aNt?this.eW:super.qTt()}XTt(t){this.aNt?this.eW=t:super.XTt(t)}jK(t,i,e){return this.zK((e=>this.lNt(t,i,e)),e)}lNt(t,i,e){return super.jK(t,i,e)}LJ(){return this.zK((()=>this.dNt()))}dNt(){return super.LJ()}BK(t,i,e){return this.zK((e=>this.fNt(t,i,e)),e)}fNt(t,i,e){return super.BK(t,i,e)}KH(){return this.aNt?this.A8:super.KH()}yJ(){this.aNt?this._Nt=!0:super.yJ()}EJ(t,i){this.hJ(),this.aNt?(this.cNt=this.cNt.GB(new Ki([t,i])),this.gNt.push({hA:"Swt",zN:t,PN:i})):this.wNt(t,i)}wNt(t,i){super.EJ(t,i)}JK(t,i){return this.zK((()=>this.ANt(t,i)))}ANt(t,i){return super.JK(t,i)}bJ(t,i){this.hJ(),this.aNt?(this.cNt=this.cNt.WB(new Ki([t,i])),this.gNt.push({hA:"pN",zN:t,PN:i})):this.vNt(t,i)}vNt(t,i){super.bJ(t,i)}pN(t,i,e){return this.zK((e=>this.mNt(t,i,e)),e)}mNt(t,i,e){return super.pN(t,i,e)}zH(t){return this.zK((()=>this.pNt(t)))}pNt(t){return super.zH(t)}async zK(t,i){this.hJ(),this.aNt&&(await hl(this.aNt.OL,i),this.hJ()),Pi(i);try{this.dJ=t(i),await this.dJ}finally{this.dJ=void 0}}hJ(){if(this.dJ)throw new b("Internal error")}async yNt(){if(this.aNt)throw new k("Already locked");this.aNt=new No,this.MNt(),this.dJ&&(await this.dJ.catch(xs),this.MNt())}TNt(){var t;null==(t=this.aNt)||t.CL(),this.aNt=void 0,this.NNt()}MNt(){this.Zx=super.Tx(),this.rW=super.VTt(),this.eW=super.qTt(),this.uNt=super.L_(),this.cNt=super.HTt(),this.A8=super.KH(),this._Nt=!1}NNt(){this.hJ(),super.WTt(this.rW),super.XTt(this.eW);const t=this.gNt.slice();Ri(this.gNt);for(const i of t)"Swt"===i.hA?this.wNt(i.zN,i.PN):this.vNt(i.zN,i.PN);this._Nt&&super.yJ(),this.uNt.JB(super.L_())||this.Co(new gg(tt.IH))}e_(){var t;null==(t=this.aNt)||t.c_(),this.aNt=void 0,super.e_()}constructor(t){super(t),this.dJ=void 0,this.aNt=void 0,this.rW=0,this.uNt=Ki.aR(),this.cNt=Ki.aR(),this.gNt=[],this.A8=!1,this._Nt=!1,this.eW=0,this.Zx=t.wd}},hH=class extends rH{L_(){var t,i;return super.L_().GB(null!=(i=null==(t=this.DNt)?void 0:t.b_)?i:Ki.aR())}HTt(){var t,i;return super.HTt().GB(null!=(i=null==(t=this.DNt)?void 0:t.DJ)?i:Ki.aR())}WTt(t){super.WTt(t),this.DNt&&(this.DNt.KV=t)}XTt(t){super.XTt(t),this.DNt&&(this.DNt.HV=t)}wNt(t,i){super.wNt(t,i),this.DNt&&this.DNt.EJ(t,i)}vNt(t,i){super.vNt(t,i),this.DNt&&this.DNt.bJ(t,i)}async mNt(t,i,e){Pi(e);const s=[];s.push(super.mNt(t,i,e)),this.DNt&&s.push(this.DNt.pN(t,i,e)),await Promise.all(s)}OH(t){return!!super.OH(t)||this.oit.SNt(t)}pNt(t){return super.OH(t)?super.pNt(t):this.oit.INt(t)}ENt(t){var i,e;null==(i=this.DNt)||i.fn(on,this.ZTt),this.DNt=t,null==(e=this.DNt)||e.yn(on,this.ZTt)}constructor(t,i){super(i),this.DNt=void 0,this.oit=t}},oH=class extends ut{OH(t){const i=void 0!==this.A$,e=void 0!==this.v$,s=t.D$.some((t=>Kg(t.IP,"audio"))),n=t.D$.some((t=>Kg(t.IP,"video")));return i===s&&e===n&&(!!super.OH(t)||(!(!this.bNt||!this.bNt.OH(t))||this.oit.LNt(t)))}async zH(t){return super.OH(t)?await super.zH(t):this.bNt&&this.bNt.OH(t)?(this.kNt(),await this.zH(t)):(await this.oit.CNt(t),await this.zH(t))}SNt(t){return this.OH(this.xNt(t))}INt(t){return this.zH(this.xNt(t))}xNt(t){const i=this.wd,e=i.D$.map((i=>Kg(t.IP,"audio")&&Kg(i.IP,"audio")||Kg(t.IP,"video")&&Kg(i.IP,"video")?t:i));return oe({},i,{D$:e})}N$(t,i,e,s){super.N$(t,i,e,s),this.bNt&&this.bNt.N$(t,i,e,s)}ONt(){return!this.jNt&&this.zNt}Td(){return void 0!==this.PNt?this.PNt:this.ONt()?this.zk:super.Td()}p$(t){this.zk=t,this.PNt=void 0,this.ONt()||super.p$(t)}BTt(){return!this.ONt()&&super.BTt()}yJ(){this.PNt=x.max(aH(this.MP.d$),aH(this.MP.f$)),this.ONt()||super.yJ()}lJ(){this.PNt=void 0,this.ONt()||super.lJ()}QTt(t){return new hH(this,t)}BNt(){this.jNt=!this.jNt}kNt(){const t=this.MP,i=this.bNt;i&&(this.jNt=!this.jNt,this.RTt(i),this.RNt(t),this.ONt()&&this.UNt())}RNt(t){var i,e;this.bNt=t,null==(i=this.A$)||i.ENt(null==t?void 0:t.d$),null==(e=this.v$)||e.ENt(null==t?void 0:t.f$)}QNt(t){const i=this.MP,e=this.bNt;if(!e)return;const s=this.jNt,n=s?i:e,r=(s?e:i).b_.nR(t);if(!r)return;const h=RY(n.b_,this.HTt()).nR(r.jn(0),Dc);return!h||r.jn(0)+Dc>=h.jn(0)?void 0:x.max(r.jn(0),h.Cn(0))}FNt(t,i){if(this.zNt)return Promise.resolve();const e=this.jNt?this.bNt:this.MP;return e?(this.zNt=!0,this.YNt((i=>{if(Pi(i),this.zNt)return async function(t,i,e){Pi(e);const s=[];t.d$&&s.push(Sk(t.d$,i,e));t.f$&&s.push(Sk(t.f$,i,e));await Promise.all(s),t.yJ()}(e,t,i)}),i)):Promise.resolve()}UNt(){if(!this.zNt)return;const t=this.jNt?this.bNt:this.MP;if(!t)return;var i;this.zNt=!1;const e=null!=(i=this.PNt)?i:this.zk;t.ct<e&&t.p$(e),t.lJ()}GNt(t){var i;const e=null!=(i=this.PNt)?i:this.zk;t.p$(e),this.jNt?this.RTt(t):this.RNt(t)}HTt(){var t,i,e;const s=null!=(e=null==(t=this.A$)?void 0:t.DJ)?e:Ki.aR();var n;const r=null!=(n=null==(i=this.v$)?void 0:i.DJ)?n:Ki.aR();return s.GB(r)}async YNt(t,i){const e=[];this.A$&&e.push(this.A$.yNt()),this.v$&&e.push(this.v$.yNt());try{await Promise.all(e),await t(i)}finally{this.A$&&this.A$.TNt(),this.v$&&this.v$.TNt()}}YTt(t){t.type===tt.IH&&this.oit.wJ(),super.YTt(t)}constructor(t,i){super(i),this.bNt=void 0,this.zk=NaN,this.jNt=!1,this.zNt=!1,this.PNt=void 0,this.RTt(i),this.oit=t}};function aH(t){if(!t)return 0;const i=t.b_;return i.U>0?i.jn(i.U-1):0}function Rr(t){return t.wd.hA===wt.LO}r();var uH=class extends nH{get VNt(){return this.WNt}L_(){return super.L_().GB(this.WNt.b_)}Td(){if(!this.HNt){const t=this.MP;if(t&&Rr(t))return t.ct}return super.Td()}DTt(){return!!super.DTt()&&!(!this.HNt&&!this.KH())}STt(){return!!super.STt()&&!(!this.HNt&&super.DTt()&&!this.KH())}KH(){const t=this.MP;return!(!t||!Rr(t))&&t.KH}_g(){return this.Uo.GB(this.gP.fg)}Mg(){return super.Mg().GB(this.WNt.yg)}pg(){return super.pg()}NTt(){var t;return null!=(t=super.NTt())?t:this.WNt.TP}Vg(){return this.dR=!1,super.Vg()}Gg(){this.dR=!0,super.Gg()}g3(){this.HNt=!0,super.g3(),this.WNt.g3()}w3(){this.HNt=!1,super.w3(),this.WNt.g3()}z_(){var t;return null!=(t=this.L4)?t:super.z_()}Ng(){return void 0!==this.L4||super.Ng()}Dp(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.qNt.c_(),this.h2.c_(),this.h2=new Po,this.XNt=this.a2(t,i,e,this.XNt,this.h2.a_).catch(xs)}async a2(t,i,e,s,n){this.L4=t,this.u2=t,this.Co(new Ot(t)),s&&await s.catch(xs),Pi(n),this.MP&&Rr(this.MP)&&this.MP.UNt(),this.L4=void 0,super.Dp(t,i,e),this.WNt.Dp(t,i,e),this.ZNt()}wP(t){const i=this.TP;if(!i||j(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Dp(e)}m3(){super.m3(),this.WNt.m3()}get Sg(){return this.KNt.Sg}get Lg(){return this.KNt.Lg}be(){this.LB&&(this.LB=!1,this.KNt.be())}ge(){this.LB||(this.LB=!0,this.KNt.ge())}async JNt(){var t;this.L4=void 0,this.u2=NaN,this.Uo=Ki.aR(),null==(t=this.$Nt)||t.c_(),this.qNt.c_(),this.h2.c_(),this.XNt&&(await this.XNt.catch(xs),this.XNt=void 0)}kTt(t){super.kTt(t),this.WNt.FP=t}CTt(t){super.CTt(t),this.WNt.M3=t}Dg(){return this.Dl}uE(t,i,e,s,n,r,h,o){return this.cE.uE(t,i,e,s,n,r,h,o)}AE(t){this.cE.AE(t)}BP(){this.cE.Zn(),super.BP()}async $n(t){const i=await super.$n(t);return Rr(i)&&this.ZNt(),i}async Zn(){await this.JNt(),await super.Zn(),await this.WNt.Zn()}async e_(){await this.JNt(),this.cE.gn(),this.Dl.gn(),await super.e_()}jTt(t){return new oH(this,t)}OTt(t){return new Jt(t)}ZNt(){this.qNt.c_(),this.qNt=new Po,this.XNt=this.tDt(this.XNt,this.qNt.a_).catch(xs)}async tDt(i,e){if(i&&await i.catch(xs),this.MP&&Rr(this.MP))for(;;){let i;for(Pi(e),this.iDt()&&this.BNt(),this.MP.UNt(),Pi(e);Pi(e),!this.iDt();){if(i=this.MP.QNt(this.z_()),void 0!==i){0,this.eDt(),await this.MP.FNt(i,e),Pi(e),this.WNt.Dp(i);break}await hu((i=>Promise.race([this.D_(t.ov,i),this.sDt(i)])),e)}for(Pi(e);!this.iDt();)await this.gP.D_([t.ov,t.kA,qo.Mw],e)}}iDt(){const t=this.MP;if(void 0===t||!Rr(t))return!1;const i=this.z_(),e=this.gP.b_;if(!this.gP.R_&&e.gr(i))return!1;return!!RY(this.WNt.b_,t.HTt()).ZB(i,i+Dc)}BNt(){if(this.nDt)return;this.nDt=!0,this.Uo=this._g();const t=Pk(this),i=this.Ng(),e=this.pg(),s=this.gP,n=this.WNt,r=this.MP;r.UNt(),r.BNt(),Bk(n,t),this.PTt(n),this.WNt=s,s.Gg(),s.Z_=!0,this.nDt=!1;const h=this.Ng();i!==h&&(h?this.Co(new Ot(this.j_)):this.Co(new $s(this.j_)));const o=this.pg();e!==o&&this.Co(new ds(this.j_,o)),h||this.eDt()}eDt(){const t=this.gP,i=this.KNt;if(i===t)return;const e=this.Lg,s=this.Sg;this.KNt=t,this.LB&&(i.be(),t.ge());const n=this.Lg,r=this.Sg;n>0&&r>0&&(e!==n||s!==r)&&this.Co(new Ry)}LNt(t){return void 0!==this.WNt.tq([t])}async CNt(t){this.eDt();const i=this.MP,e=this.WNt;await e.Zn();const s=await e.$n(t);i.GNt(s)}sDt(t){return this.$Nt=new No,hl(this.$Nt.OL,t)}wJ(){var t;null==(t=this.$Nt)||t.CL()}Jg(i){i.type===t.ZA&&this.u2===i.currentTime||(i.type===t.XA&&(this.u2=NaN,this.eDt()),i.type!==qo.Mw&&i.type!==t.Sh&&i.type!==t.kA||this.nDt||!this.iDt()?(i.type!==t.kA||this.R_)&&super.Jg(i):this.ZNt())}constructor(t,i,e){super(t),this.HNt=!1,this.L4=void 0,this.u2=NaN,this.Uo=Ki.aR(),this.dR=!0,this.nDt=!1,this.LB=!0,this.$Nt=void 0,this.XNt=void 0,this.qNt=new Po,this.h2=new Po,this.WNt=i,this.KNt=t,this.gP.ge(),this.WNt.be(),this.cE=new Dn(this,e),this.Dl=new fh([this.cE.nt,super.Dg()])}},cH=class extends uH{get TTt(){return this.gP}get VNt(){return this.WNt}be(){super.be(),this.X6.be()}ge(){super.ge(),this.X6.ge()}get pP(){return this.gP.pP}get V$(){return this.gP.V$}get Bg(){return this.gP.Bg}set Bg(t){this.gP.Bg=t}y3(t){this.gP.y3(t),this.WNt.y3(t)}D4(){this.gP.D4()}Zg(){this.gP.Zg(),this.WNt.Zg()}Ug(){return this.gP.Ug()}PTt(t){const i=this.Rg(),e=this.Ug();super.PTt(t),this.Rg()!==i&&this.Co(new M),this.Ug()!==e&&this.Co(new rs)}e_(){return this.Z6.gn(),this.X6.gn(),super.e_()}constructor(t,i){super(t,i,new nx),this.X6=new Bx,this.X6.y3(t.pP.parentElement),this.Z6=new ic(this.X6.we,this.Iu,this.nt,this.Ol,this.ya)}},lH=class extends xt{oB(t){if(t===iv.vp){const i=super.oB(t),e=super.oB(t);return new cH(i,e)}return super.oB(t)}async YP(t){t instanceof cH?(await t.e_(),await super.YP(t.TTt),await super.YP(t.VNt)):await super.YP(t)}},dH=class extends ZW{async gn(){await super.gn(),await this.GP.YP(this.gP)}static Px(t){var i;return!li.Qs&&!li.Xb&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,h){const o=new Oc(new lH(n));super(t,i,e,s,o.oB(r),h),this.GP=o}};r(),r(),r();var Au,fH=class extends ut{QTt(t){return new rH(t)}Tx(){return this.rDt?this.Zx:super.Tx()}L_(){return this.rDt?this.uNt:super.L_()}Td(){return this.rDt?this.zk:super.Td()}p$(t){this.rDt?(this.zk=t,this.hDt=!0):super.p$(t)}Mg(){return this.rDt?this.oDt?this.oDt.OJ():this.T$:super.Mg()}N$(t,i,e,s){this.rDt?this.oDt=new yk(t,i,e,s):super.N$(t,i,e,s)}BTt(){return this.rDt?this.A8&&!1!==this._Nt:super.BTt()}yJ(){this.rDt?this._Nt=!0:super.yJ()}lJ(){this.rDt?this._Nt=!1:super.lJ()}OH(t){return!this.rDt&&super.OH(t)}zH(t){return this.rDt?Promise.reject(new k("Not supported")):super.zH(t)}async yNt(){if(this.rDt)throw new k("Already locked");this.rDt=!0,this.MNt();const t=[];this.A$&&t.push(this.A$.yNt()),this.v$&&t.push(this.v$.yNt()),await Promise.all(t)}TNt(){this.rDt=!1,this.A$&&this.A$.TNt(),this.v$&&this.v$.TNt(),this.NNt()}MNt(){this.Zx=super.Tx(),this.uNt=super.L_(),this.zk=super.Td(),this.T$=super.Mg(),this.hDt=!1,this._Nt=void 0,this.oDt=void 0}NNt(){if(this.hDt&&(super.p$(this.zk),this.hDt=!1),void 0!==this.oDt){const t=this.oDt;super.N$(t.Cn,t.jn,t.jJ,t.zJ),this.oDt=void 0}void 0!==this._Nt&&(this._Nt?super.yJ():super.lJ(),this._Nt=void 0)}constructor(t){super(t),this.rDt=!1,this.uNt=Ki.aR(),this.zk=0,this.hDt=!1,this.A8=!1,this._Nt=void 0,this.T$=Ki.aR(),this.oDt=void 0,this.RTt(t),this.Zx=t.wd}},_H=class extends An{get TTt(){return this.gP}Vg(){return void 0!==this.MP&&Rr(this.MP)&&this.R_&&this.Dp(0),super.Vg()}Dp(t,i,e){void 0!==this.MP&&Rr(this.MP)&&this.R_&&t<this.ct&&this.aDt(),super.Dp(t,i,e)}g3(){this.uDt=!0,super.g3()}w3(){this.uDt=!1,this.cDt()||super.w3()}cDt(){return this.uDt||this.lDt}dDt(){this.lDt||(this.lDt=!0,super.g3())}fDt(){this.lDt&&(this.lDt=!1,this.cDt()||super.w3())}$n(t){this._Dt.c_();const i=this.sit(t,this.gDt);return this.wDt=i,i}async sit(t,i){return i&&await i.catch(xs),this.fDt(),await super.$n(t)}jTt(t){return new fH(t)}OTt(t){return new Jt(t)}Zn(){this._Dt.c_();const t=this.ADt(this.gDt);return this.wDt=t,t}async ADt(t){return t&&await t.catch(xs),this.fDt(),await super.Zn()}aDt(){this.dDt(),this._Dt.c_(),this._Dt=new Po,this.gDt=H(this.vDt(this.wDt,this.gDt,this._Dt.a_),this._Dt).catch(Ah)}async vDt(t,i,e){t&&await t.catch(xs),i&&await i.catch(xs),Pi(e);const s=this.MP;if(!s||!Rr(s))return;const n=s.wd;await s.yNt(),await this.gP.Zn();const r=await this.gP.$n(n);r.p$(s.ct),s.RTt(r),s.TNt(),this.fDt()}async e_(){this._Dt.c_(),this.gDt&&(await this.gDt.catch(xs),this.gDt=void 0),this.cDt()&&super.w3(),await super.e_()}constructor(...t){super(...t),this.uDt=!1,this.lDt=!1,this.wDt=void 0,this.gDt=void 0,this._Dt=new Po}},Ln=class extends xt{oB(t){if(t===iv.vp)return new _H(super.oB(t))}async YP(t){const i=t;await i.e_(),await super.YP(i.TTt)}static Px(){return li.Kb}};bu(new class extends fU{_m(t,i,e,s,n,r,h){const o=new St(ti.dL.yet,ti.dL.met,ti.dL.pet,ti.dL.Tet);let a;a=sH.Px(h)?sH:dH.Px(h)?dH:KW;let u=i;return Ln.Px()&&(u=new Ln(u)),new a(e,s,n,o,u,iv.vp,t)}uB(){return!0}constructor(...t){super(...t),this.cB=Kt.Fz}}),r(),r(),r(),r(),function(t){t.mDt="currentbufferingrenditionchange",t.pDt="yDt",t.MDt="TDt",t.NDt="DDt"}(Au||(Au={})),r(),r();var gH,wH,AH=class{constructor(t,i){var e,s;this.Vw=om(),this.SDt=i,this.hA=t.hA,this.IDt=t.IDt,this.EDt=t.EDt,this.bDt=t.bDt,this.l=t.l,this.gs=t.gs,this.LDt=t.LDt,this.kDt=t.kDt,this.CDt=void 0===t.Cnt,this.xDt=null!=(s=null==(e=t.xDt)?void 0:e.split(","))?s:[]}};function vH(t,i){return t.hA===i.hA&&(t.l===i.l||!(!t.IDt||!i.IDt))}function mH(t,i){return t.SDt===i.SDt&&t.LDt===i.LDt}function pH(t,i){for(const e of t)if(mH(e,i))return!0;return!1}r(),function(t){t.ODt="alternative",t.jDt="main",t.zDt="commentary",t.PDt="",t._I="descriptions",t.BDt="main-desc",t.RDt="translation"}(gH||(gH={})),function(t){t.ODt="alternative",t.jDt="main",t.zDt="commentary",t.PDt="",t.fI="captions",t.Kw="sign",t.pp="subtitles"}(wH||(wH={}));var yH,MH=class extends i{get Ww(){return this.UDt}get Rt(){const t=this.QDt();if(!t)return!1;for(const i of this.Hw.xw)if(i.FDt===t)return!0;return!1}set Rt(t){if(t!==this.Rt&&t){let t=this.Hw.jw(0).FDt;const i=this.Qo.YDt;for(const e of this.Hw.xw)if(e.GDt===i){t=e.FDt;break}this.VDt(t)}}get Gw(){if(!this.Rt)return;const t=this.Qo.WDt;for(const i of this.Hw.xw)if(pH(t,i.FDt))return i}get va(){return this.Xa||(this.Xa=Di(this)),this.Xa}get o(){return this.DN.toString()}get Vw(){return this.DN}get kh(){return this.SN}set kh(t){t!==this.SN&&(this.SN=t,this.Co(new Hn(this)))}get gs(){return this.Pk}get eA(){return this.Rt?"enabled":"disabled"}get qw(){return this.Fwt}set qw(t){let i=[];if(t){i=t.filter((t=>{const i=this.Gw?bF(this.Gw):void 0;return ag.Ys.ltt(i,bF(t))})).filter((i=>this.Hw.yN(t)&&i.Yit))}else i=this.Hw.xw.filter((t=>t.Yit));if(0!==i.length){if(!(t===this.Fwt||this.Fwt&&zo(this.Fwt,i))){if(this.Fwt=t?i:void 0,this.Qo.HDt(i.map((t=>t.GDt))),1===i.length){const t=i[0].GDt,e=this.g0===iv.vp,s=this.vR.uW;W(this.Qo.qDt(t,{XDt:!0,ZDt:s&&e,KDt:s&&!e}))}this.Co(new NF(i,this))}}else this.Co(new EF)}EN(t){this.Rt=t}gn(){this.Vo(),this.Qo.fn(Au.mDt,this.JDt),this.Qo.fn(Au.pDt,this.$Dt);for(const t of this.Hw.xw)t.gn();this.Hw.Zn()}constructor(t,i,e,s,n){var r;super(),this.g0=t,this.Qo=i,this.vR=e,this.fh=s,this.Hw=n,this.Fwt=void 0,this.tSt=void 0,this.iSt=()=>this.Co(new Hn(this)),this.JDt=()=>{const t=this.Gw;t&&this.tSt!==t&&(this.tSt=t,this.Co(new AW(t)))},this.$Dt=()=>{const t=this.Rt;this.eSt!==t&&(this.eSt=t,this.fh.Co(new Zr(this)),this.Co(new Zr(this)))},this.tSt=this.Gw,this.eSt=this.Rt;const h=n.jw(0);var o,a;this.SN=null!=(o=null==h?void 0:h.FDt.l)?o:"",this.Pk=null!=(a=null==h?void 0:h.FDt.gs)?a:"",this.UDt=null==h||null==(r=h.FDt)?void 0:r.xDt.map(EH).filter(j_),this.DN=Vu(),this.Qo.yn(Au.mDt,this.JDt),this.Qo.yn(Au.pDt,this.$Dt);for(let t=0;t<this.Hw.U;t++){this.Hw.jw(t).yn("update",this.iSt)}}},TH=class extends MH{get zt(){return gH.jDt}QDt(){return this.Qo.sSt}VDt(t){W(this.Qo.nSt(t))}constructor(t,i,e,s){super(iv.mp,t,i,e,s)}},NH=class extends MH{get zt(){return wH.jDt}QDt(){return this.Qo.rSt}VDt(t){W(this.Qo.hSt(t))}constructor(t,i,e,s){super(iv.vp,t,i,e,s)}},DH=class extends i{get o(){return String(this.GDt.o)}get Vw(){return this.GDt.o}get Xz(){return this.GDt.Xz}get Ent(){return this.GDt.Ent}get kh(){var t;return null!=(t=this.SN)?t:this.FDt.l}set kh(t){this.kh!==t&&(this.SN=t,this.Co(new aQ(this.va)))}get Cnt(){return this.FDt.SDt.oSt()}get bnt(){return this.GDt.bnt}CI(){}gn(){this.Vo()}constructor(t,i){super(),this.GDt=t,this.FDt=i,this.SN="",this.Yit=!0}},SH=class extends DH{get Tst(){return 0}get Nst(){var t;return(null==(t=this.GDt.Nst)?void 0:t.aSt)||""}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return oQ(this)}constructor(t,i){super(t,i),this.Xa=void 0}},IH=class extends DH{get Nst(){var t;return(null==(t=this.GDt.Nst)?void 0:t.uSt)||""}get Lnt(){return this.cSt}set Lnt(t){this.cSt!==t&&(this.cSt=t,this.Co(new aQ(this.va)))}get Est(){var t,i;return null!=(i=null!=(t=this.lSt)?t:this.GDt.Est)?i:0}set Est(t){this.Est!==t&&(this.lSt=t,this.Co(new aQ(this.va)))}get Ti(){var t,i;return null!=(i=null==(t=this.GDt.dSt)?void 0:t.Ti)?i:0}get ji(){var t,i;return null!=(i=null==(t=this.GDt.dSt)?void 0:t.ji)?i:0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return hQ(this)}constructor(t,i){super(t,i),this.Xa=void 0,this.cSt=0,this.lSt=void 0}};function EH(t){return"public.accessibility.describes-video"===t?Ku.tA:"public.accessibility.transcribes-spoken-dialog"===t?Ku.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?Ku.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?Ku.$w:void 0}r(),r(),function(t){t.fSt="FATAL",t.ha="ERROR",t._St="WARNING",t.gSt="INFO",t.wSt="DEBUG"}(yH||(yH={}));var p=new class{ASt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some((i=>i.toLowerCase()===t.toLowerCase()))}vSt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.ASt(t)&&ag.Att("DEBUG "+t+" -",...e)}$y(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.ASt(t)&&ag.Att("INFO "+t+" -",...e)}mSt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.ASt(t)&&ag.Pv("WARNING "+t+" -",...e)}lt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.ASt(t)&&ag.mtt("ERROR "+t+" -",...e)}pSt(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];this.ASt(t)&&ag.mtt("FATAL "+t+" -",...e)}constructor(){this.Rt=()=>!1}},ss="HLSPlaylistParser",bH="Discontinuity",rr="Buffering",LH=class{Ddt(){var t;const i=null==(t=this.Qo.Tr)?void 0:t.ySt;if(!i||0===i.length)return void p.mSt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var e;const s=null!=(e=H_(i,(t=>0!==t.MSt.length&&0!==t.TSt.length)))?e:i[0],n=i.filter((t=>t!==s));for(const t of s.MSt){const i=new em,e=[];i.mN(new SH(s,t)),e.push(t);for(const s of n)for(const n of s.MSt)if(vH(n,t)&&!pH(e,n)){i.mN(new SH(s,n)),e.push(n);break}this.NSt.tt(new TH(this.Qo,this.vR,this.NSt,i))}for(const t of s.TSt){const i=new em,e=[];i.mN(new IH(s,t)),e.push(t);for(const s of n)for(const n of s.TSt)if(vH(n,t)&&!pH(e,n)){i.mN(new IH(s,n)),e.push(n);break}this.DSt.tt(new NH(this.Qo,this.vR,this.DSt,i))}}SSt(){this.ISt(this.NSt),this.ISt(this.DSt)}ISt(t){const i=[];for(const e of t.xw){const t=[];for(const i of e.Hw.xw)na(i.GDt.ESt,i.FDt)||t.push(i);for(const i of t)e.Hw.pN(i),i.gn();0===e.Hw.U&&i.push(e)}for(const e of i)t.it(e),e.gn()}bSt(t,i){const e=this.LSt(t);void 0!==e&&(e.Est=i)}kSt(t,i){const e=this.LSt(t);void 0!==e&&(e.Lnt=i)}LSt(t){for(const i of this.DSt.xw){const e=H_(i.Hw.xw,(i=>i.FDt===t));if(void 0!==e)return e}}constructor(t,i,e,s){this.Qo=t,this.vR=i,this.NSt=e,this.DSt=s}};r(),r(),r();var ur=class{get f8(){const t=1-this.CSt**this.xSt;return this.OSt/t}fgt(t,i){const e=this.CSt**t,s=i*(1-e)+e*this.OSt;j(s)||(this.OSt=s,this.xSt+=t)}zH(t){const i=x.exp(x.log(.5)/t);if(i===this.CSt)return;if(0===this.xSt)return void(this.CSt=i);const e=this.f8,s=1-i**this.xSt;this.OSt=e*s,this.CSt=i}constructor(t){this.OSt=0,this.xSt=0,this.CSt=x.exp(x.log(.5)/t)}},Nn=class t{get f8(){return this.lct()?x.max(this.jSt.f8,this.zSt.f8):this.PSt}fgt(t){const i=ag.f_(),e=t;this.BSt&&void 0!==this.RSt&&i-this.RSt>=this.USt&&this.Zn(),this.QSt+=1,this.jSt.fgt(1,e),this.zSt.fgt(1,e),this.FSt.push(e),this.FSt.length>this.YSt&&this.FSt.shift(),this.RSt=i}lct(){return void 0!==this.RSt&&ag.f_()-this.RSt<=this.USt}Zn(){this.jSt=new ur(this.GSt),this.zSt=new ur(this.VSt),this.QSt=0,this.FSt=[],this.RSt=void 0}constructor(i=t.WSt,e=t.HSt,s=t.pgt,n=!1){this.QSt=0,this.FSt=[],this.RSt=void 0,this.USt=6e4,this.YSt=10,this.GSt=i,this.VSt=e,this.PSt=s,this.BSt=n,this.jSt=new ur(i),this.zSt=new ur(e)}};Nn.WSt=2,Nn.HSt=5,Nn.pgt=.1,r();var kH=class{BV(t){for(const i of this.qSt)i.BV(t)}RV(t){for(const i of this.qSt)i.RV(t)}QV(t,i){for(const e of this.qSt)e.QV(t,i)}FV(t){for(const i of this.qSt)i.FV(t)}constructor(t){this.qSt=t}};r();var CH=class{BV(t){this.XSt=t}RV(t){this.ZSt.fgt(t-this.XSt)}QV(t){}FV(t){}constructor(t){this.XSt=0,this.ZSt=t}};r();var xH=class{RV(t){this.KSt=t}QV(t,i){this.Mgt.fgt(t-this.KSt,i.byteLength),this.KSt=t}FV(t){}BV(t){}constructor(t){this.KSt=0,this.Mgt=t}};r();var OH,jH=class{BV(t){}QV(t,i){const e=i.byteLength,s=this.JSt;this.JSt=e;const n=t-this.An;this.An=t,this.$St.xq(i);const r=!this.$St.tIt(),h=e>=this.iIt;s!==ag.Ys.ott&&r&&h&&this.Mgt.fgt(n,e)}RV(t){this.An=t}FV(t){}constructor(t,i=0){this.$St=new zH,this.An=0,this.JSt=0,this.Mgt=t,this.iIt=i}},zH=class extends Gu{tIt(){return this.eIt}xq(t){this.eIt=!1,super.xq(t)}kq(t,i){this.sIt&&this.sIt!==At.cp||(this.eIt=!0),super.kq(t,i),this.sIt=t}Yq(t){return!1}Vq(t){}Hq(t){}constructor(...t){super(...t),this.sIt=void 0,this.eIt=!1}};r(),r(),(OH||(OH={})).nIt="sample";var PH=class extends i{jz(){if(!this.lct())return;const t=ag.f_();t-this.rIt>1e3&&(this.rIt=t,ca.dL.jz(this.f8))}constructor(...t){super(...t),this.rIt=0}},$c=class t extends PH{fgt(t,i){const e=8*i/t;this.jSt.fgt(t,e),this.zSt.fgt(t,e),this.hIt+=i,this.jz(),this.Co(new gg(OH.nIt))}get f8(){return this.lct()?x.min(this.jSt.f8,this.zSt.f8):this.PSt}lct(){return this.hIt>=this.oIt}constructor(i=t.WSt,e=t.HSt,s=t.aIt,n=t.pgt){super(),this.hIt=0,this.oIt=s,this.jSt=new ur(i),this.zSt=new ur(e),this.PSt=n}};$c.aIt=128e3,$c.pgt=NS,$c.WSt=.5,$c.HSt=5;var BH=class{get Xz(){return this.Mgt.f8}get Zz(){return this.uIt.f8}Kz(t){if("segment"!==t.hA&&"preload-hint"!==t.hA)return;const i=[new CH(this.uIt)];return"stream"!==t.eE||!function(t){return"segment"===t.hA&&"initialization-segment"!==t.nE}(t)&&"preload-hint"!==t.hA?i.push(new xH(this.Mgt)):i.push(new jH(this.Mgt,1e3)),new kH(i)}cIt(t){this.Mgt=new $c($c.WSt,$c.HSt,1,t)}constructor(t){const i=t.Xz>0?t.Xz:$c.pgt,e=t.Zz>0?t.Zz:Nn.pgt;this.Mgt=new $c($c.WSt,$c.HSt,1,i),this.uIt=new Nn(Nn.WSt,Nn.HSt,e)}};r();var RH=class extends gg{constructor(t){super(Au.NDt),this.lt=t}};r();var UH=class{tq(t,i){const e={hA:wt.LO,EP:[],D$:t.map((t=>({IP:t}))),j$:i};return Promise.resolve(void 0!==this.Qit.tq([e]))}constructor(t){this.Qit=t}};r(),r();var QH=(t,i,e,s,n)=>t.filter((t=>!!na(s,t)||1.1*t.Xz<=e.Xz)),FH=(t,i,e,s,n)=>t.filter((t=>{if(na(s,t))return!0;let r=1/0;for(const i of t.ESt){var h,o;r=x.min(r,null!=(o=null!=(h=i.SDt.lIt)?h:i.SDt.dIt)?o:1/0)}r===1/0&&(r=1);const a=2*e.Zz+t.Xz*r/e.Xz;return t.Xz<=i.Xz||n.fIt>a})),YH=(t,i,e,s,n)=>Xc(t,((t,i)=>i.Xz-t.Xz)),GH=(t,i,e,s,n)=>t.every((t=>t.bnt&&!j(t.bnt)))?Xc(t,((t,i)=>i.bnt-t.bnt)):t,VH=(t,i,e,s,n)=>0===s.length?t:Xc(t,((t,i)=>{const e=na(s,t)?1:0;return(na(s,i)?1:0)-e})),WH=(t,i,e,s,n,r)=>t.filter((t=>!t.Nst||!i.Nst||!(void 0!==i.Nst.uSt&&void 0!==t.Nst.uSt&&!Ut(i.Nst.uSt,t.Nst.uSt)&&!r._It({IP:'video/mp4; codecs="'+t.Nst.uSt}))&&!(void 0!==i.Nst.aSt&&void 0!==t.Nst.aSt&&!Ut(i.Nst.aSt,t.Nst.aSt)&&!r.gIt({IP:'audio/mp4; codecs="'+t.Nst.aSt})))),HH=(t,i,e,s,n)=>{if(!1===n.gct)return t;if(ag.Ys.ett)return t;const r=ag.Ys.stt;var h;const o=(null!=(h=null==r?void 0:r.width)?h:n.ji)*OG;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ti)*OG;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.dSt)return t;const s=e.dSt.Ti,n=e.dSt.ji;if(s<=u&&n<=o)return t.slice(i,t.length)}return[]},qH=(t,i,e,s,n)=>function(t,i){const e=i.gct;if(void 0===e&&!ag.Ys.Qs)return t;if(!1===e)return t;for(let e=0;e<t.length;e++){const s=t[e];if(void 0===s.dSt)return t;const n=s.dSt.Ti,r=s.dSt.ji;if(n===i.Ti&&r===i.ji)return t.slice(e,t.length);if(n<i.Ti||r<i.ji)return t.slice(0===e?e:e-1,t.length)}return[]}(t,n);var Eo,X,da,XH,ZH="AbrEvaluator",KH=class{get wIt(){return this.vR.zV}AIt(t){this.Act=t}async vIt(t,i,e,s,n){return(await this.mIt(t,i,e,s,n))[0]}async mIt(t,i,e,s,n){if(0===t.length)throw new b("AbrEvaluator - Unable to select optimal variant stream from an empty list.");p.vSt(ZH,"Performing optimal variant stream selection.");const r=this.wIt;let h=t;for(const t of this.Act){const o=t(h,i,r,e,s,n);h=Yn(o)?o:await o}if(0===h.length){p.mSt(ZH,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[Oo(t,(t=>t.Xz))]}return h}constructor(t){this.vR=t,this.Act=[WH,QH,FH,YH,HH,qH,GH,VH]}};function JH(t,i){return[t,void 0!==i?t+i-1:Da]}function $H(t){return Boolean(t.Fy)}function tq(t){return Boolean(t.pet)}function Nt(t){return t?t.Yht?t.IT+"@"+t.Yht.Cn+"-"+(null!=(i=t.Yht.U)?i:""):""+t.IT:"";var i}function iq(t,i){if(i===t)return!0;if(i.IT!==t.IT)return!1;if(!t.Yht)return!0;if(i.Yht){const e=JH(t.Yht.Cn,t.Yht.U),s=JH(i.Yht.Cn,i.Yht.U);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function eq(t,i){return t===i||t.IT===i.IT&&(t.Yht&&i.Yht?t.Yht.Cn===i.Yht.Cn&&t.Yht.U===i.Yht.U:t.Yht===i.Yht)}function sq(t){const i=!!t.pIt||void 0;return{o:t.o,yIt:t.yIt,TP:t.TP,MIt:t.MIt,ct:t.ct,TIt:t.TIt,pIt:i,NIt:t.DIt,SIt:t.IIt,EIt:t.EIt,bIt:t.bIt}}function nq(t,i){var e,s,n;return{aSt:null!=(e=i.aSt)?e:null==t?void 0:t.aSt,uSt:null!=(s=i.uSt)?s:null==t?void 0:t.uSt,LIt:null!=(n=i.LIt)?n:null==t?void 0:t.LIt}}async function rq(t,i,e,s,n){const r=i.filter((t=>Va(t,"audio"))),h=i.filter((t=>Va(t,"video"))),o=[],a=e.map((t=>async function(t,i,e){if(!t.Cnt)return;if(!t.kIt)return;if(t.iE!==da.CIt)return;const s=hq(t.kIt);if(!s)return;if(s.wL===Wa)return{dm:s,iP:[],eP:void 0,_z:t.Cnt};if(s.wL===Pw&&t.kIt===Uw)return{dm:s,iP:[],eP:t.Cnt,_z:void 0};{p.$y("HLSDrmUtils","Fetching key uri "+t.Cnt+".");const n=await i.mI({zu:t.Cnt,hE:e});return{dm:s,iP:[await n.qj()],eP:void 0,_z:void 0}}}(t,s,n)));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.dm.wL);return e>=0?e:i.length};return Xc(t,((t,i)=>e(t)-e(i)))}((await Promise.all(a)).filter(j_),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=AY(null!=t?t:{},i.dm),s="cbcs";o.push({dm:i.dm,iP:i.iP,eP:i.eP,_z:i._z,JP:[{initDataTypes:[i.dm._L],audioCapabilities:vY(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:vY(h,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]})}return o}function hq(t){return t===jt?Uy:t===xw?Za:t===Rw?Fy:t===Uw?Yy:void 0}function oq(t){if("#"!==t[0])throw new b("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function aq(t){return"#"!==t[0]?t:t.split(":",1)[0]}function uq(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new b("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function cq(t){const i=Ls(uq(t));if(void 0===i)throw new b("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function gi(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:p.mSt(ss,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function lq(t,i){const e=gi(t);let s,n;try{s=e.URI?ag.zv(e.URI,i):void 0,n=function(t){switch(t){case"AUDIO":return Eo.mp;case"VIDEO":return Eo.vp;case"SUBTITLES":return Eo.pp;case"CLOSED-CAPTIONS":return Eo.xIt}throw new b("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(e.TYPE)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=e["GROUP-ID"],h=e.LANGUAGE,o=e["ASSOC-LANGUAGE"],a=e.NAME,u="YES"===e.DEFAULT;let c="YES"===e.AUTOSELECT;const l="YES"===e.FORCED,d=e["INSTREAM-ID"],f=e.CHARACTERISTICS,_=e.CHANNELS;if(r||p.mSt(ss,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),h||p.mSt(ss,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||p.mSt(ss,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===Eo.xIt?(s&&p.mSt(ss,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||p.mSt(ss,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):p.mSt(ss,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&p.mSt(ss,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,e.AUTOSELECT&&p.mSt(ss,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),e.FORCED&&n!==Eo.pp&&p.mSt(ss,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new b("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{OIt:o,jIt:_,xDt:f,LDt:r,EDt:c,IDt:u,bDt:l,kDt:d,gs:h,l:a,hA:n,Cnt:s}}function dq(t,i,e){const s=gi(t);let n,r,h;try{n=ag.zv(e,i),h=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(j(e)||j(s))throw new b("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:e,Ti:s}}(s.RESOLUTION),r=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();Kg(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n?i=n:Kg(n,"avc")||Kg(n,"hvc1")||Kg(n,"hev1")||Kg(n,"dvh")||Kg(n,"vp09")||Kg(n,"av01")?e=t:s=s?s+","+n:n}return{aSt:i,uSt:e,LIt:s}}(s.CODECS)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const o=Ls(s.BANDWIDTH),a=Ls(s["AVERAGE-BANDWIDTH"]),u=Ls(s.SCORE),c=Ls(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}})))}const f=s["VIDEO-RANGE"],_=s.AUDIO,g=s.VIDEO,w=s.SUBTITLES,A=s["CLOSED-CAPTIONS"];if(void 0===o?p.mSt(ss,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>o&&p.mSt(ss,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||p.$y(ss,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.uSt&&void 0===h&&p.$y(ss,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||na(["TYPE-0","TYPE-1","NONE"],l)||p.mSt(ss,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||na(["SDR","PQ","HLG"],f)||p.mSt(ss,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===o)throw new b("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{zIt:d,PIt:_,Ent:a,Xz:o,BIt:A,Nst:r,Est:c,RIt:l,dSt:h,bnt:u,UIt:w,Cnt:n,QIt:g,FIt:f}}function fq(t,i){const e=gi(t);if(!e.URI)throw new b("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return dq(t,i,e.URI)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function Ls(t){const i=Number(t);return j(i)?void 0:i}function _q(t,i){const e=gi(t);let s,n;try{s=function(t){switch(t){case"NONE":return da.MB;case"AES-128":return da.YIt;case"SAMPLE-AES":return da.CIt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new b("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?Mq(e.URI,i):void 0}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,h=e.IV,o=e.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==da.MB){if(c=r||Uw,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(hq(c)!==Uy)throw new b("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=da.CIt}else a=s;u=n,l=h?go(h):void 0,d=o?o.split("/").map((t=>Number(t))):[1]}else a=da.MB,(n||r||o||h)&&p.mSt(ss,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{iE:a,Cnt:u,GIt:l,kIt:c,VIt:d}}function gq(t){const i=uq(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[Ls(e),s]}function wq(t,i){const e=t.split("@"),s=Ls(e[0]),n=e.length>1?Ls(e[1]):i;if(void 0===s||void 0===n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Cn:n,U:s}}function Aq(t){if(void 0!==t)return wq(t,void 0)}function vq(t,i){return wq(uq(t),i)}function mq(t,i){const e=gi(t);try{const t=Mq(e.URI,i);return{IT:t,Yht:Aq(e.BYTERANGE)}}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function pq(t){const i=uq(t);if(!i)throw new b("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i);if(!PD(e))throw new b("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function yq(t){const i=gi(t),e=i["START-DATE"],s=i["END-DATE"],n=Ls(i["PLANNED-DURATION"]);let r,h,o,a=Ls(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=go(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(h=go(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(o=go(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of _.keys(t)){const s=t[e];void 0!==s&&Kg(e,"X-")&&(i[e]=s)}return i}(i),l=i.ID,d=i.CLASS;let f,g;if(void 0===e)p.mSt(ss,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),g=void 0!==s?new Date(s):void 0,PD(f)||p.mSt(ss,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);g?g.getTime()!==i.getTime()&&(p.mSt(ss,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),g=i):g=i}else g&&(a=(f.getTime()-g.getTime())/1e3);if(u&&(i.CLASS||p.mSt(ss,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&p.mSt(ss,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),g&&p.mSt(ss,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&p.mSt(ss,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new b("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,yIt:d,TP:f,MIt:g,ct:a,TIt:n,IIt:r,bIt:h,EIt:o,pIt:u,DIt:c}}function Mq(t,i){if(void 0===t)throw new b("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return ag.zv(t,i)}function Tq(t,i){const e=gi(t),s=Ls(e.DURATION),n=Mq(e.URI,i),r=Aq(e.BYTERANGE),h="YES"===e.INDEPENDENT,o="YES"===e.GAP;if(void 0===s)throw new b("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,Cnt:{IT:n,Yht:r},WIt:h,HIt:o}}function Nq(t){const i=gi(t);return{qIt:"YES"===i["CAN-BLOCK-RELOAD"],XIt:Ls(i["CAN-SKIP-UNTIL"]),ZIt:"YES"===i["CAN-SKIP-DATERANGES"],KIt:Ls(i["HOLD-BACK"]),JIt:Ls(i["PART-HOLD-BACK"])}}function Dq(t,i){const e=gi(t);if(void 0===e.URI)throw new b("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=Mq(e.URI,i),n=Ls(e["LAST-MSN"]),r=Ls(e["LAST-PART"]);if(void 0===n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{Cnt:s,$It:n,tEt:r}}function Sq(t,i){var e;const s=gi(t),n=Ls(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(!n)throw new b("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{iEt:n,eEt:r,sEt:i}}function Iq(t){const i=Ls(gi(t)["PART-TARGET"]);if(void 0===i)throw new b("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function Eq(t){switch(uq(t)){case"VOD":return XH.nEt;case"EVENT":return XH.rEt;default:return p.mSt(ss,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),XH.KT}}function bq(t,i){const e=gi(t);let s,n;try{s=function(t){if(void 0===t)throw new b("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return X.hEt;if("PART"===t)return X.oEt;throw new b("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=Mq(e.URI,i)}catch(i){throw new b("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=Ls(e["BYTERANGE-START"]),h=Ls(e["BYTERANGE-LENGTH"]);let o;return void 0===r&&void 0===h||(o={Cn:r||0,U:h}),{hA:s,Cnt:{IT:n,Yht:o}}}r(),r(),r(),r(),r(),function(t){t[t.mp=0]="mp",t[t.vp=1]="vp",t[t.pp=2]="pp",t[t.xIt=3]="xIt"}(Eo||(Eo={})),function(t){t[t.hEt=0]="hEt",t[t.oEt=1]="oEt"}(X||(X={})),function(t){t[t.MB=0]="MB",t[t.YIt=1]="YIt",t[t.CIt=2]="CIt"}(da||(da={})),function(t){t[t.KT=0]="KT",t[t.nEt=1]="nEt",t[t.rEt=2]="rEt"}(XH||(XH={})),r(),r(),r();var Lq=class t{aEt(){const t=this.uEt[this.cEt];return this.cEt+=1,t}lEt(){return this.uEt[this.cEt]}Sp(){const i=new t("");return i.cEt=0,i.uEt=this.uEt.slice(this.cEt),i}static dEt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(i){this.cEt=0,this.uEt=t.dEt(i)}};function kq(t,i,e){const s=t.Cnt;let n=t._y,r=t.fEt,h=t.Cn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=cq(t);return j(i)?(p.mSt(ss,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":h=function(t){const i=gi(t),e=Ls(i["TIME-OFFSET"]);if(void 0===e)throw new b("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{_Et:e,gEt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":p.mSt(ss,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:p.$y(ss,"Ignoring unrecognized line or comment: "+i+".")}return{Cnt:s,_y:n,fEt:r,Cn:h}}function Cq(t,i){return t.map((t=>t.iE===da.MB||t.GIt?t:oe({},t,{GIt:xq(i)})))}function xq(t){const i=new DataView(new ArrayBuffer(16)),e=new Vr;return e.Np(8),bA(i,e,Se.fromNumber(t)),new T(i.buffer)}function Oq(t,i,e){p.$y(ss,"Parsing M3U8 playlist at "+t+".");const s=new Lq(e);if("#EXTM3U"!==s.aEt())throw new b("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(e)?function(t,i){let e;try{e=ag.zv(t)}catch(i){throw p.mSt(ss,"The master playlist has no valid base URI: "+t+"."),new b("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={Cnt:e,fEt:void 0,Cn:void 0,_y:void 0};const n=[],r=[],h=[],o=[];for(;;){const t=i.aEt();if(!t)break;try{const a=oq(t);switch(a){case"#EXT-X-MEDIA":{const i=lq(t,e);n.push(i);break}case"#EXT-X-STREAM-INF":{const s=dq(t,e,i.aEt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=fq(t,e);h.push(i);break}case"#EXT-X-SESSION-DATA":p.mSt(ss,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=_q(t,e);o.push(i);break}default:s=kq(s,t,a)}}catch(i){p.mSt(ss,"Ignoring unparsable line: "+t,i)}}let a=s._y;var u;const c=null!=(u=s.fEt)&&u,l=s.Cn;return void 0===a&&(p.mSt(ss,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.bnt))||h.some((t=>void 0!==t.bnt)))&&(r.some((t=>void 0===t.bnt))||h.some((t=>void 0===t.bnt)))&&p.mSt(ss,"If one master playlist variant stream has a SCORE, all variants should have it."),{Cnt:e,_y:a,fEt:c,Cn:l,wEt:h,AEt:o,Fy:n,vEt:r}}(t,s):function(t,i,e){let s={Cnt:t,fEt:void 0,Cn:void 0,_y:void 0};const n=[];let r,h,o,a,u=!1,c=!1;const l=[],d=Qt();let f,_,g,w,A,v,m,y,M,T=[],N=[],D=!1,S=!1;const I=[],E=[];let L,k,C,x,O,j=0,z=!1,P=XH.KT,B=!1,R=0;try{O=ag.zv(t)}catch(i){throw p.mSt(ss,"The media playlist has no valid base URI: "+t+".",i),new b("HLSPlaylistParser - Could not parse HLS media playlist.")}const U=e.Sp();for(;void 0===k||void 0===C;){const t=U.aEt();if(!t)break;try{switch(aq(t)){case"#EXT-X-MEDIA-SEQUENCE":k=cq(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":C=cq(t)}}catch(i){p.mSt(ss,"Ignoring unparsable line: "+t,i)}}void 0===k&&(p.$y(ss,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),k=0),void 0===C&&(p.$y(ss,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),C=0);let Q=k,F=C;for(;;){const t=e.aEt();if(!t)break;let i=!1;try{const e=aq(t);switch(e){case"#EXTINF":i=!0,[f,_]=gq(t);break;case"#EXT-X-BYTERANGE":i=!0,g=vq(t,j),g&&(j=g.Cn+g.U);break;case"#EXT-X-DISCONTINUITY":i=!0,D=!0,F++;break;case"#EXT-X-KEY":{var Y;i=!0;const e=_q(t,O);if(e.iE===da.MB){d.clear(),M=void 0;break}var G;const s=null!=(G=null==(Y=e.kIt)?void 0:Y.toString())?G:"identity";d.set(s,e),e.iE===da.YIt&&(M=e);break}case"#EXT-X-MAP":i=!0,A=mq(t,O),v=M;break;case"#EXT-X-PROGRAM-DATE-TIME":i=!0,m=pq(t);break;case"#EXT-X-GAP":i=!0,S=!0;break;case"#EXT-X-BITRATE":i=!0,y=cq(t);break;case"#EXT-X-TARGETDURATION":r=cq(t);break;case"#EXT-X-DATERANGE":{const i=yq(t);n.push(i);break}case"#EXT-X-PART":{i=!0;const e=Tq(t,O);N.push(e);break}case"#EXT-X-PRELOAD-HINT":{const i=bq(t,O);I.push(i);break}case"#EXT-X-SKIP":{l.length>0&&p.mSt(ss,"#EXT-X-SKIP must appear before any #EXTINF tags."),i=!0;const e=Sq(t,Q);R=e.iEt,x=e.eEt,Q+=e.iEt;break}case"#EXT-X-SERVER-CONTROL":{const i=Nq(t);u=i.qIt,h=i.XIt,c=i.ZIt,o=i.KIt,a=i.JIt;break}case"#EXT-X-RENDITION-REPORT":{const i=Dq(t,O);E.push(i);break}case"#EXT-X-PART-INF":L=Iq(t);break;case"#EXT-X-MEDIA-SEQUENCE":i&&p.mSt(ss,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":i&&p.mSt(ss,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":z=!0;break;case"#EXT-X-PLAYLIST-TYPE":P=Eq(t);break;case"#EXT-X-I-FRAMES-ONLY":B=!0;break;default:if(Kg(e,"#"))s=kq(s,t,e);else{w=ag.zv(t,O);const i=A?{Cnt:A,mEt:v}:void 0,e={AEt:Cq(ng(d),Q),FS:T,pEt:N,ct:f,kP:_,yEt:D,Cnt:{Yht:g,IT:w},MEt:i,TEt:m,HIt:S,NEt:y,sEt:Q,DEt:F};l.push(e),Q++,T=[],N=[],f=void 0,_=void 0,D=!1,g=void 0,w=void 0,m=void 0,S=!1,y=void 0}}}catch(i){p.mSt(ss,"Ignoring unparsable line: "+t,i)}}if(N.length){const t=A?{Cnt:A,mEt:M}:void 0,i={AEt:Cq(ng(d),Q),FS:T,pEt:N,ct:f,kP:_,yEt:D,Cnt:void 0,MEt:t,TEt:m,HIt:S,NEt:y,sEt:Q,DEt:F};l.push(i)}let V=s._y;var W;const H=null!=(W=s.fEt)&&W,q=s.Cn;void 0===V&&(p.mSt(ss,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),V=2),void 0===r&&p.mSt(ss,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const X=l.length,Z=X>0;Z||p.mSt(ss,"The HLS media playlist contains no segments.");const K=Z&&l[X-1].pEt.length>0;return K&&void 0===L&&p.mSt(ss,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),K&&void 0===a&&p.mSt(ss,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{qIt:u,XIt:h,ZIt:c,SEt:n,DEt:C,IEt:z,fEt:H,KIt:o,EEt:B,sEt:k,iEt:R,JIt:a,lIt:L,bEt:P,LEt:I,eEt:x,kEt:E,CEt:r,pet:l,Cn:q,Cnt:O,xEt:i,_y:V}}(t,i,s)}r(),r();var jq=class{get Cnt(){return this.SDt.Cnt}get Nst(){return this.OEt}set Nst(t){this.OEt=t?Pq(t):void 0,this.jEt=!0}get zEt(){return this.jEt}get PEt(){if(!this.BEt.length)return Ki.aR();var t,i;const e=null!=(i=$_(this.BEt,(i=>null!=(t=i.SDt.REt)?t:0)))?i:this.ESt[0],s=e.SDt.pet;if(!s.length||s.length<2)return Ki.aR();const n=e.SDt.IEt?s[0].zN:s[1].zN;var r,h;const o=s[s.length-1].PN-this.ESt.reduce(((t,i)=>x.max(null!=(h=null!=(r=i.SDt.JIt)?r:i.SDt.KIt)?h:0,t)),0);return o<n?Ki.aR():new Ki([n,o])}get ESt(){return this.BEt}get MSt(){return this.BEt.filter((t=>t.hA===Eo.mp))}get TSt(){return this.BEt.filter((t=>t.hA===Eo.vp))}get UEt(){return this.BEt.filter((t=>t.hA===Eo.pp))}get QEt(){return this.BEt.filter((t=>t.hA===Eo.xIt))}FEt(t){for(const i of this.BEt){const e=i.SDt.FEt(t);if(void 0!==e)return e}}YEt(t){for(const i of this.BEt){const e=i.SDt.YEt(t);if(void 0!==e)return e}}GEt(t){Et(this.BEt,t)}constructor(t,i,e){var s,n,r,h;this.o=zq++,this.bnt=void 0,this.dSt=void 0,this.Ent=void 0,this.jEt=!1,this.BEt=[],this.SDt=i,this.Xz=t.Xz,this.Ent=t.Ent,this.bnt=t.bnt,this.OEt=t.Nst?Pq(t.Nst):void 0,this.dSt=t.dSt,this.Est=t.Est,this.PIt=null!=(s=t.PIt)?s:"VEt"+this.o,this.QIt=null!=(n=t.QIt)?n:"WEt"+this.o,this.UIt=null!=(r=t.UIt)?r:"HEt"+this.o,this.BIt=null!=(h=t.BIt)?h:"qEt"+this.o,this.BEt=e}},zq=0;function Pq(t){return oe({},t,{uSt:t.uSt?xp(t.uSt):void 0})}r(),r(),r();var Qr,Bq=class{get zN(){var t;return this.WN+(null!=(t=this.XEt)?t:0)}get ZEt(){return this.KEt}get AEt(){return this.JEt.AEt}$Et(t,i){this.WN=t,this.KEt=i}constructor(t,i,e,s,n){this.p8=void 0,this.JEt=t,this.tbt=i,this.WN=e,this.KEt=s,this.ct=n.ct,this.Cnt=n.Cnt,this.WIt=n.WIt,this.HIt=n.HIt}},Rq=class{get zN(){var t;return this.WN+(null!=(t=this.ibt)?t:0)}get ebt(){return this.WN}get ct(){return this.zk}get Cnt(){return this.sbt}get nbt(){return this.rbt}get ZEt(){return this.KEt}get pEt(){return this.hbt}get obt(){return this.abt}get PN(){var t;return this.zN+(null!=(t=this.zk)?t:this.abt)}set XEt(t){this.ibt=t;for(const i of this.hbt)i.XEt=t}get XEt(){return this.ibt}ubt(t){return this.hbt[t]}cbt(t){for(let i=0;i<this.hbt.length;i++){const e=this.hbt[i],s=e.zN,n=s+e.ct;if(s<=t&&t<=n)return t===n&&i+1<this.hbt.length?this.hbt[i+1]:e}}lbt(t){for(let i=this.hbt.length-1;i>=0;i--){const e=this.hbt[i];if(e.zN<=t)return e}}dbt(t){let i=this.lbt(t);for(;i&&!i.WIt&&i.tbt>0;)i=this.ubt(i.tbt-1);return i}$Et(t,i,e){const s=t.pEt.length!==this.hbt.length||e!==this.KEt;this.rbt=i,this.KEt=e,this.zk=t.ct,null!=this.TEt||(this.TEt=t.TEt),void 0===this.sbt&&(this.sbt=t.Cnt),s&&this.fbt(t.pEt)}fbt(t){this.hbt.length>t.length&&(this.hbt.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.KEt&&e===t.length-1,r=this.WN+i;if(e<this.hbt.length)this.hbt[e].$Et(r,n);else{const t=new Bq(this,e,r,n,s);this.hbt.push(t)}i+=s.ct}this.abt=i}_bt(){Ri(this.hbt),this.abt=0}constructor(t,i,e,s,n){this.p8=void 0,this.hbt=[],this.abt=0,this.WN=t,this.MEt=n.MEt,this.rbt=e,this.KEt=s,this.zk=n.ct,this.TEt=n.TEt,this.sbt=n.Cnt,this.HIt=n.HIt,this.sEt=n.sEt,this.yEt=n.yEt,this.DEt=i,this.AEt=n.AEt,this.fbt(n.pEt)}};r(),function(t){t.gbt="YES",t.wbt="v2"}(Qr||(Qr={})),r();var Or=class extends Jo{};r(),r(),r();var Uq=class extends yn{get va(){return this.Xa||(this.Xa=function(t){return Ou(Oh(t),{get content(){return t.O},get class(){return t.yIt},get startDate(){return t.TP},get endDate(){return t.MIt},get duration(){return t.ct},get plannedDuration(){return t.TIt},get endOnNext(){return t.pIt},get scte35Cmd(){return t.SIt},get scte35Out(){return t.EIt},get scte35In(){return t.bIt},get customAttributes(){return t.NIt}})}(this)),this.Xa}get yIt(){return this.Abt}get TP(){return this.vbt}get MIt(){return this.mbt}get ct(){return this.zk}get TIt(){return this.pbt}get pIt(){return this.ybt}get SIt(){return this.Mbt}get EIt(){return this.Tbt}get bIt(){return this.Nbt}get NIt(){return this.Dbt}Qn(t){let i=!1;var e;(void 0===this.Abt&&void 0!==t.yIt&&(i=!0,this.Abt=t.yIt),void 0===this.mbt&&void 0!==t.MIt&&(i=!0,this.mbt=t.MIt),void 0===this.zk&&void 0!==t.ct&&(i=!0,this.zk=t.ct),void 0===this.pbt&&void 0!==t.TIt&&(i=!0,this.pbt=t.TIt),!this.ybt&&t.pIt&&(i=!0,this.ybt=t.pIt),i=this.updateCustomAttributes(t,i),void 0===this.Mbt&&void 0!==t.SIt&&(i=!0,this.Mbt=t.SIt),void 0===this.Tbt&&void 0!==t.EIt&&(i=!0,this.Tbt=t.EIt),void 0===this.Nbt&&void 0!==t.bIt&&(i=!0,this.Nbt=t.bIt),this.Sbt(),this.Ibt(),this.Ebt(),i)&&(this.Co(new $a(this)),null==(e=this.HN)||e.Co(new fu(this)))}updateCustomAttributes(t,i){let e=i;if(t.NIt)for(const i of _.keys(t.NIt))void 0===this.Dbt[i]&&(e=!0,this.Dbt[i]=t.NIt[i]);return e}Sbt(){this.zk&&!this.mbt&&(this.mbt=new Date(this.vbt.getTime()+ge(this.zk)))}Ibt(){this.mbt&&!this.zk&&(this.zk=BD(this.mbt.getTime()-this.vbt.getTime()))}Ebt(){this.XN===1/0&&(this.mbt||this.zk)&&(this.XN=Qq(this.WN,this.zk,this.vbt,this.mbt))}constructor(t,i){super(i,Qq(i,t.ct,t.TP,t.MIt),void 0,!1,t.o),this.Abt=t.yIt,this.vbt=t.TP,this.mbt=t.MIt,this.zk=t.ct,this.pbt=t.TIt,this.ybt=Boolean(t.pIt),this.Dbt=t.NIt||{},this.Mbt=t.SIt,this.Tbt=t.EIt,this.Nbt=t.bIt,this.Sbt(),this.Ibt()}};function Qq(t,i,e,s){return j_(i)?t+i:s?t+(BD(s.getTime())-BD(e.getTime())):1/0}var Fq=class extends ax{Qn(t,i){Yq(this,Gq(t),i)}gE(t){Vq(this.L.xw,t),super.gE(t)}constructor(){super(void 0,void 0,Ks.DATE_RANGE)}};function Yq(t,i,e){const s=t.L.xw;for(let e=s.length-1;e>=0;e--){const n=s[e],r=H_(i,(t=>t.o===n.o));r?n.Qn(r):t.DI(n)}for(const s of i){const i=s.TP;if(void 0!==i&&!t.h0(s.o)){const n=e(i),r=new Uq(s,n);Vq(t.L.xw,r),t.gE(r)}}}function Gq(t){const i=Qt(),e=[];for(const s of t)if(i.has(s.o)){const t=i.get(s.o),e=oe({},t,Sg(s),{NIt:oe({},t.NIt,s.NIt)});i.set(s.o,e)}else i.set(s.o,s),e.push(s.o);return e.map((t=>i.get(t)))}function Vq(t,i){const e=X_(t,(t=>t.yIt===i.yIt));e&&e.pIt&&e.Qn({o:e.o,MIt:i.TP})}var Wq=String.fromCharCode(95),Hq=Wq+"HLS_msn",qq=Wq+"HLS_part",Xq=Wq+"HLS_skip",Zq="HLSMediaPlaylist",Kq=class{get IEt(){return Boolean(H_(this.wht,(t=>t.ZEt)))}get ct(){return this.zk}get yg(){return this.T$}get bbt(){return this.Lbt}get dIt(){return this.kbt}get lIt(){return this.Cbt}get KIt(){return this.IEt?0:this.xbt?this.xbt:this.kbt?3*this.kbt:void 0}get JIt(){var t;return null!=(t=this.Obt)?t:this.Cbt?3*this.Cbt:void 0}get jbt(){if(this.IEt)return;if(0===this.wht.length)return;const t=this.wht[this.wht.length-1];var i,e;const s=null!=(e=null!=(i=this.JIt)?i:this.KIt)?e:0;return t.PN-s}get qIt(){return this.zbt}get XIt(){return this.Pbt}get ZIt(){return this.Bbt}get bEt(){return this.Rbt}get Ubt(){return void 0!==this.lIt}get Qbt(){if(this.IEt)return!0;const t=ag.f_()/1e3,i=this.REt,e=this.Fbt;return void 0!==i&&t-i<e}get REt(){return this.Ybt}get XEt(){return this.ibt}get Fbt(){var t;return null!=(t=this.kbt)?t:void 0===this.Ybt?5:1}get pet(){return this.wht}get SEt(){return this.Gbt}get Vbt(){return this.Wbt}set Vbt(t){this.Wbt=t}get Cn(){return this.JS}get Hbt(){return this.qbt}oSt(t){if(!t)return this.Cnt;const i=ag.Dh(this.Cnt);return void 0!==t.sEt&&i.searchParams.append(Hq,String(t.sEt)),void 0!==t.Xbt&&i.searchParams.append(qq,String(t.Xbt)),void 0!==t.Yp&&i.searchParams.append(Xq,t.Yp),i.href}ogt(t){const i=this.wht;if(0===i.length)return;const e=t-i[0].sEt;return e<0||e>=i.length?void 0:i[e]}Zbt(t){if(0===this.wht.length)return;const i=AQ(Jq.dL,this.wht,t);if(!(i<0)){const e=this.wht[i];return t===e.PN&&i+1<this.wht.length?this.wht[i+1]:e}{const i=this.wht[this.wht.length-1];if(t===i.PN)return i}}Kbt(t){if(0===this.wht.length)return;const i=this.wht[0];if(t<i.PN)return i;const e=this.wht[this.wht.length-1];return t>=e.zN?e:this.Zbt(t)}FEt(t){const i=this.Kbt(t);if(void 0===i)return;for(let e=i.sEt-this.wht[0].sEt;e>=0;e--){const i=this.wht[e];if(void 0!==i.TEt)return new Date(i.TEt.getTime()+1e3*(t-i.zN))}}YEt(t){let i;for(const e of this.wht)if($q(e))if(void 0===i)i=e;else{if(!(e.TEt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.zN+(t.getTime()-i.TEt.getTime())/1e3}Jbt(t){switch(t){case X.hEt:return this.$bt;case X.oEt:return this.tLt;default:return}}$Et(t){var i;void 0===this.kbt&&(this.kbt=null!=(i=t.CEt)?i:this.iLt(t));void 0===this.xbt&&void 0!==t.KIt&&(this.xbt=t.KIt),void 0===this.Cbt&&void 0!==t.lIt&&(this.Cbt=t.lIt),void 0===this.Obt&&void 0!==t.JIt&&(this.Obt=t.JIt),this.zbt=t.qIt,this.Pbt=t.XIt,this.Bbt=t.ZIt,this.Rbt=t.bEt,this.yht(t),this.eLt(t);const e=H_(t.LEt,(t=>t.hA===X.hEt)),s=H_(t.LEt,(t=>t.hA===X.oEt));this.$bt=e?{Cnt:e.Cnt,hA:e.hA,DEt:t.DEt}:void 0,this.tLt=s?{Cnt:s.Cnt,hA:s.hA,DEt:t.DEt}:void 0,this.Ybt=ag.f_()/1e3,this.sLt(),null!=this.JS||(this.JS=t.Cn)}sLt(){this.Lbt=this.nLt(),this.T$=this.rLt(this.Lbt),this.zk=this.hLt()}nLt(){const t=this.pet;if(0===t.length)return Ki.aR();const i=t[0].zN,e=t[t.length-1].PN;return new Ki([i,e])}rLt(t){if(0===t.U||this.IEt)return t;const i=t.Cn(0);var e,s;const n=t.jn(0)-(null!=(s=null!=(e=this.JIt)?e:this.KIt)?s:0);return n<i?Ki.hR(i):new Ki([i,n])}hLt(){return 0===this.wht.length?0:this.IEt?So(this.wht,(i=>null!=(t=i.ct)?t:i.obt)):1/0;var t}iLt(t){let i;for(const e of t.pet)if(void 0!==e.ct){const t=x.max(1,x.round(e.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new b("HLSModel - Could not determine required segment target duration.");return i}yht(t){if(0===t.pet.length)return Ri(this.wht),void this.oLt();const i=this.aLt(t);if(!i)return;let e,s,n;i.uLt>0&&this.wht.splice(0,i.uLt);const r=t.iEt;if(r>0){if(r>this.wht.length)throw new Or("New playlist skips over missing segments.");const i=this.wht[r-1];if(void 0===i.ct)throw new Or("New playlist skips over an incomplete segment.");e=i.ebt+i.ct,n=i.DEt-t.DEt,s=r;for(let t=0;t<r;t++)this.wht[t]._bt()}else e=i.cLt,n=0,s=0;for(let i=0;i<t.pet.length;i++,s++){const r=t.pet[i],h=0===i,o=t.IEt&&i===t.pet.length-1,a=r.ct,u=r.DEt+n;if(s<this.wht.length){const t=this.wht[s];0,t.$Et(r,h,o)}else{let t=r;if(this.wht.length>0&&void 0===t.MEt){t=oe({},t,{MEt:this.wht[this.wht.length-1].MEt})}const i=new Rq(e,u,h,o,t);i.XEt=this.ibt,this.wht.push(i)}void 0!==a&&(e+=a)}}aLt(t){if(0===this.wht.length)return{uLt:0,cLt:0};const i=this.wht[0].sEt,e=this.wht[this.wht.length-1].sEt,s=t.pet[0].sEt-t.iEt,n=t.pet[t.pet.length-1].sEt;let r=0,h=0;if(s<i){const e=this.pet[0].TEt,n=t.pet[0].TEt;if(!(e&&n&&e<n))return void p.mSt(Zq,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this.wht.length,this.oLt()}else{if(n<e)return void p.mSt(Zq,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var o;h=null!=(o=function(t,i){const e=X_(t,(t=>void 0!==t.TEt));if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.yEt)return;if(s.TEt)return[s,i];var e;i+=null!=(e=s.ct)?e:0}return}(i.pet);if(void 0===s)return;const[n,r]=s;if(e.DEt!==n.DEt)return;const h=(n.TEt.getTime()-e.TEt.getTime())/1e3;return e.ebt+h-r}(this.wht,t))?o:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:x.max(e,s.obt),h=e*(i-s.sEt-1);return s.ebt+r+h}(this.wht,s,this.kbt),p.vSt(Zq,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+h+"s"),r=this.wht.length,this.oLt()}else{0;const t=Z_(this.wht,(t=>t.sEt===s));0,h=this.wht[t].ebt,t>0&&(r=t)}}return{uLt:r,cLt:h}}eLt(t){let i=t.SEt.map(sq);if(t.ZIt&&t.xEt.Yp===Qr.wbt&&(i=this.Gbt.concat(i)),this.Gbt=Gq(i),t.eEt)for(const i of t.eEt){const t=Z_(this.Gbt,(t=>t.o===i));t>=0&&jc(this.Gbt,t)}}lLt(t,i){if(this.ibt!==t){this.ibt=t;for(const t of this.wht)t.XEt=this.ibt;this.sLt()}this.qbt=i}oLt(){this.ibt=void 0,this.qbt=void 0}constructor(t,i){this.Ybt=void 0,this.$bt=void 0,this.tLt=void 0,this.kbt=void 0,this.Cbt=void 0,this.xbt=void 0,this.Obt=void 0,this.wht=[],this.Gbt=[],this.zbt=!1,this.Pbt=void 0,this.Bbt=!1,this.Rbt=XH.KT,this.T$=Ki.aR(),this.Lbt=Ki.aR(),this.zk=void 0,this.Wbt=-1/0,this.qbt=void 0,this.Cnt=t,this.JS=i}},Jq=class t{static get dL(){return null!=this.Vet||(this.Vet=new t),this.Vet}dht(t){return t.zN}fht(t){return t.PN}_ht(t,i){return Li(t,i)}ght(t,i,e){return(t-i)/(e-i)}};function $q(t){return void 0!==t.TEt}function hr(t){return void 0!==t.pEt}function tX(t){return hr(t)?t.nbt:0===t.tbt&&t.JEt.nbt}function iX(t,i){return hr(t)?hr(i)?t.sEt+1===i.sEt:0===i.tbt&&iX(t,i.JEt):t.tbt===t.JEt.pEt.length-1?iX(t.JEt,i):!hr(i)&&t.JEt===i.JEt&&t.tbt+1===i.tbt}r(),r();var eX=class{dLt(t){const i=this.fLt.get(t);return void 0!==i&&sX(i)}_Lt(t){return this.wLt(t).gLt.OL}ALt(t){const i=this.fLt.get(t);if(!i||!sX(i))throw new b("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}vLt(t){return this.ALt(t).CS}mLt(t,i){const e=hr(i)?i:i.JEt,s=this.ALt(e.DEt);let n=t.mN(s.CS);if(s.pLt){const t=aa.dS(i.zN).MD(n);if(t.mD().lD(Rm())){const i=x.round(t.cD()/Ia().cD());n=n.mN(Ia().KD(i))}}return n}yLt(t,i){return this.mLt(t,i).MD(t)}MLt(t,i,e,s,n){const r=this.wLt(t);void 0===r.CS&&(r.TLt.some((t=>t.uut===i))||(r.TLt.push({uut:i,NLt:e,DLt:s.aS(e.zy),pLt:n}),this.SLt(r)))}SLt(t){if(t.CS||!this.ILt(t))return;const i=kh(t.TLt,nX);Ri(t.TLt),t.CS=i.DLt.MD(i.NLt),t.pLt=i.pLt,t.gLt.CL()}ILt(t){return this.ELt.length>0&&this.ELt.every((i=>t.TLt.some((t=>t.uut===i))))}wLt(t){if(this.fLt.has(t))return this.fLt.get(t);{const i={CS:void 0,pLt:!1,gLt:new No,TLt:[]};return this.fLt.set(t,i),i}}bLt(t){this.ELt=t,this.fLt.forEach((t=>this.SLt(t)))}e_(){this.fLt.forEach((t=>t.gLt.c_())),this.fLt.clear()}constructor(){this.ELt=[],this.fLt=Ye()}};function sX(t){return void 0!==t.CS}function nX(t,i){return t.pLt||i.pLt?function(t,i){let e=t.MD(i);return t.ND()||i.ND()||(e.fD(Rm())?e=e.MD(Ia()):e.vD(Rm().yD())&&(e=e.mN(Ia()))),e}(t.NLt,i.NLt).dD(aa.LD):t.NLt.dD(i.NLt)}var rX=class{get LLt(){return this.kLt}get ySt(){return this.CLt}get WT(){return this.xLt}$Et(t,i){if(tq(t))if(0===this.CLt.length)this.OLt(t);else{if(!i)return void p.mSt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.SDt.$Et(t)}else{if(0!==this.CLt.length)return void p.mSt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.jLt(t)}}OLt(t){const i=this.zLt(t.Cnt);i.$Et(t);const e=this.PLt(Eo.mp,i),s=this.PLt(Eo.vp,i),n=new jq({Cnt:i.Cnt,Xz:0,Ent:0,bnt:NaN,Nst:void 0,dSt:void 0,Est:0,zIt:[],RIt:void 0,FIt:void 0,PIt:void 0,QIt:void 0,UIt:void 0,BIt:void 0},i,[e,s]);this.CLt.push(n)}jLt(t){this.kLt.push(...t.AEt);const i=this.BLt(t);for(const e of t.vEt){const s=i.filter((t=>oX(t,e)));this.RLt(e,s);const n=new jq(e,this.zLt(e.Cnt,t.Cn),s);this.CLt.push(n)}}zLt(t,i){let e=this.ULt.get(t);return void 0===e&&(e=new Kq(t,i),this.ULt.set(t,e)),e}BLt(t){const i=[];for(const e of t.Fy)if(void 0===e.Cnt){for(const s of t.vEt)if(hX(e.hA,e.LDt,s)){const t=new AH(e,this.zLt(s.Cnt));i.push(t)}}else{const t=new AH(e,this.zLt(e.Cnt));i.push(t)}return i}PLt(t,i){return new AH({hA:t,Cnt:void 0,LDt:"",gs:void 0,OIt:void 0,l:"",IDt:!0,EDt:!1,bDt:!1,xDt:void 0,kDt:void 0,jIt:void 0},i)}RLt(t,i){const e=i.filter((t=>t.hA===Eo.mp)),s=i.filter((t=>t.hA===Eo.vp)),n=t.Nst&&(t.Nst.uSt||t.Nst.aSt);if((!n||t.Nst.uSt)&&0===s.length){const e=this.PLt(Eo.vp,this.zLt(t.Cnt));i.push(e)}if((!n||t.Nst.aSt)&&0===e.length){const e=this.PLt(Eo.mp,this.zLt(t.Cnt));i.push(e)}t.Nst&&t.Nst.LIt}QLt(t){for(const i of this.CLt)for(const e of i.ESt)if(e===t)return e}FLt(t){for(const i of this.CLt)if(i===t)return i}YLt(t){for(const i of this.CLt)if(na(i.ESt,t))return i}e_(){Ri(this.CLt),Ri(this.kLt),this.ULt.clear(),this.xLt.e_()}constructor(t){this.GLt=t,this.CLt=[],this.kLt=[],this.ULt=Qt(),this.xLt=new eX}};function hX(t,i,e){switch(t){case Eo.mp:return e.PIt===i;case Eo.vp:return e.QIt===i;case Eo.pp:return e.UIt===i;case Eo.xIt:return e.BIt===i}return!1}function oX(t,i){return hX(t.hA,t.LDt,i)&&(!t.CDt||t.SDt.Cnt===i.Cnt)}r();var aX=class extends gg{constructor(t){super(Yh.VLt),this.FDt=t}};r();var Yh,uX=class extends gg{constructor(t){super(Yh.WLt),this.FDt=t}},cX="HlsModelUpdater";!function(t){t.VLt="HLt",t.WLt="qLt"}(Yh||(Yh={}));var lX=class extends i{get XLt(){return this.ZLt}get KLt(){return this.JLt}get Tr(){return this.Gnt}get $Lt(){return this.tkt}async ikt(t){const i=this.Gnt.GLt;if(!i)throw new b("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.Co(new ie);const e=await this.ekt(i,{},2,!0,t),s=e.SDt;if(!$H(s)&&!tq(s))throw new b("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");$H(s)||p.$y(cX,"Detected media playlist only HLS stream."),this.skt(s),e.nkt&&(this.JLt=!0,await this.rkt(t)),this.ZLt=!0}async hkt(t,i,e,s){const n=this.Gnt.QLt(t);if(!n)throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={sEt:i,Xbt:e,Yp:gX(n)},h=ge(x.max(1,3*t.SDt.Fbt));try{await this.okt(n,r,s,h)}catch(t){throw yo(t),this.akt(n),t}}ukt(t,i){const e=this.Gnt.QLt(t);if(!e)throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={sEt:void 0,Xbt:void 0,Yp:gX(e)},n=ge(x.max(1,3*t.SDt.Fbt));return this.okt(e,s,i,n)}ckt(t,i){return this.lkt.has(t.Vw)||this.lkt.set(t.Vw,new No),hl(this.lkt.get(t.Vw).OL,i)}akt(t){this.Co(new uX(t))}async okt(t,i,e,s){const n=t.SDt.oSt(i);let r;try{r=(await this.ekt(n,i,0,this.JLt,e,s)).SDt}catch(i){throw yo(i),t.SDt.Vbt=ag.f_(),i}if(!tq(r))throw new b("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");try{this.skt(r,t)}catch(n){if(n instanceof Or&&void 0!==i.Yp){const n=oe({},i,{Yp:void 0});return this.okt(t,n,e,s)}throw n}if(this.dkt&&t!==this.dkt&&!this.dkt.SDt.Qbt)try{await this.ukt(this.dkt,e)}catch(i){yo(i),this.dkt=t,this.fkt()}this._kt(t),this.dkt=t}async ekt(t,i,e,s,n,r){if(p.$y(cX,"Loading HLS playlist at "+t+"."),s){const i=await this.gkt(t,n);if(void 0!==i)return{SDt:i,nkt:!0}}return{SDt:await this.wkt(t,i,e,n,r),nkt:!1}}async gkt(t,i){try{const e=await this.Ict.$it([t]);if(Pi(i),void 0!==e)return Oq(e.responseURL,{},e.data)}catch(t){yo(t)}}async wkt(t,i,e,s,n){const r={zu:t,eE:nr.Ru,hE:this.Nct,iE:Kc.GET,hA:zu.QI,a_:s,NI:n},h=await mu((()=>this.Akt(r)),s,e);return Oq(h._E,i,h.Cp)}async Akt(t){const i=await this.dE.mI(t);return{Cp:await i.fE(),_E:i._E}}async rkt(t){Pi(t);const i=[];for(const e of this.Gnt.ySt)for(const s of e.ESt)i.push(this.vkt(s,t));await Promise.all(i)}async vkt(t,i){try{const e=await this.Ict.$it([t.SDt.Cnt]);Pi(i),void 0===e||t.SDt.Qbt||await this.ukt(t,i)}catch(t){yo(t)}}fkt(){for(const t of this.Gnt.ySt)for(const i of t.ESt)i!==this.dkt&&void 0!==i.SDt.XEt&&(i.SDt.Qbt?this._kt(i):i.SDt.oLt())}_kt(t){if(0!==t.SDt.pet.length){if(!this.dkt)return this.dkt=t,void this.dkt.SDt.lLt(0,void 0);if(this.mkt(this.dkt),!this.mkt(t)&&void 0===t.SDt.XEt){const i=this.pkt(t,this.dkt);p.vSt(cX,"Assuming global timeline offset of "+i+"s for rendition "+t.SDt.Cnt+"."),t.SDt.lLt(i,void 0)}}}pkt(t,i){if(dX(t)){const e=t.SDt.pet[0],s=i.SDt.pet[0];return p.vSt(cX,"Synchronizing by start of VOD: "+s.zN+" vs "+e.zN),s.zN-e.ebt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n.DEt>r.DEt)e--;else if(n.DEt<r.DEt)s--;else if(n.yEt){if(r.yEt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.SDt.pet,i.SDt.pet);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return p.vSt(cX,"Synchronizing by start of discontinuity #"+i.DEt+": "+i.zN+" vs "+t.zN),i.zN-t.ebt}const s=_X(t.SDt.pet);if(void 0!==s){const t=_X(i.SDt.pet);if(void 0!==t){p.vSt(cX,"Synchronizing by PDT:",t.TEt.toISOString()+" vs "+s.TEt.getTime());return t.zN-s.ebt-(t.TEt.getTime()-s.TEt.getTime())/1e3}}const n=fX(i),r=fX(t);var h;const o=null!=(h=t.SDt.XEt)?h:0;return p.vSt(cX,"Synchronizing by last segment:",n+" vs "+r),n-r+o}mkt(t){const i=this.Gnt.QLt(t);if(!i)return!1;if(dX(i))return!1;const e=function(t,i){return X_(t,(t=>void 0!==t.p8&&i.dLt(t.DEt)))}(i.SDt.pet,this.Gnt.WT);if(void 0===e)return!1;if(i.SDt.Hbt===e.DEt)return!0;const s=this.Gnt.WT.mLt(e.p8,e).cD()-e.ebt;return p.vSt(cX,"Synchronize by media timestamp: "+s+"s for rendition "+t.SDt.Cnt+"."),i.SDt.lLt(s,e.DEt),(void 0===this.dkt||void 0===this.dkt.SDt.Hbt||this.dkt.SDt.Hbt<e.DEt)&&(this.dkt=i),!0}skt(t,i){var e;(this.Gnt.$Et(t,i),tq(t)&&i)&&(this.tkt=i,this.Co(new aX(i)),null==(e=this.lkt.get(i.Vw))||e.CL(),this.lkt.delete(i.Vw));this.Co(new tF)}ykt(t,i){for(const e of this.Gnt.ySt){const s=H_(e.TSt,(t=>t.SDt===i));void 0!==s&&void 0===t.uSt&&e.GEt(s);const n=H_(e.MSt,(t=>t.SDt===i));void 0!==n&&void 0===t.aSt&&e.GEt(n),void 0===s&&void 0===n||(e.Nst=nq(e.Nst,t))}}e_(){this.Vo(),this.Gnt.e_(),this.lkt.forEach((t=>t.c_())),this.lkt.clear()}constructor(t,i,e,s){super(),this.dE=t,this.Ict=i,this.Nct=e,this.ZLt=!1,this.JLt=!1,this.dkt=void 0,this.tkt=void 0,this.lkt=Ye(),this.Gnt=new rX(s)}};function dX(t){return t.SDt.IEt||t.SDt.bEt===XH.rEt}function fX(t){const i=t.SDt.pet;return i[i.length-1].PN}function _X(t){return X_(t,(t=>void 0!==t.TEt))}function gX(t){if(void 0!==t.SDt.XIt&&!t.SDt.IEt&&!(void 0===t.SDt.REt||ag.f_()/1e3-t.SDt.REt>=t.SDt.XIt/2))return t.SDt.ZIt?Qr.wbt:Qr.gbt}var wX=class{get nt(){return this.jMt}eLt(t){if(0===t.SDt.SEt.length)return;var i;this.Mkt||(this.Mkt=this.gP.uE(Pt.Mp,void 0,void 0,void 0,void 0,Ks.DATE_RANGE),this.jMt.tt(this.Mkt));Yq(this.Mkt,t.SDt.SEt,(e=>null!=(i=t.SDt.YEt(e))?i:NaN))}constructor(t,i,e){this.Tkt=t=>{this.Nkt.hlsDateRange&&this.eLt(t.FDt)},this.Nkt=t,this.Cdt=i,this.gP=e,this.jMt=new sn,this.Cdt.yn(Yh.VLt,this.Tkt)}};r();var AX=class extends gg{constructor(){super(Au.mDt)}};r(),r(),r();var vX=class{get Dkt(){return this.GK}get b_(){return BY(this.jAt.b_,this.jAt.DJ)}get pet(){return this.wht}get svt(){return this.BMt}Skt(t){var i;return null==(i=this.Ikt(t))?void 0:i.FDt}nAt(t){this.GK=t,this.Ekt()}elt(t,i,e,s,n,r){this.wht.push({FDt:t,Aht:i,bkt:Ki.oR(n,r),Lkt:Ki.oR(e,s)}),this.Ekt()}Ikt(t){return H_(this.wht,(i=>i.Lkt.gr(t)))}ogt(t){return H_(this.wht,(i=>i.Aht===t))}Wrt(t,i){return H_(this.wht,(e=>e.FDt===t&&iX(e.Aht,i)))}yJ(){const t=this.b_;t.U>0&&(this.BMt=t.jn(t.U-1))}Ekt(){const t=this.jAt.b_;this.wht=this.wht.filter((i=>0!==t.Sn(i.Lkt).U))}constructor(t){this.jAt=t,this.wht=[],this.GK=void 0,this.BMt=void 0}},mX=class{get hA(){return this.g0}get kkt(){return this.g0===iv.mp||this.g0===iv.vp}get Ckt(){return this.U_t}get xkt(){return this.Okt}get jkt(){return void 0!==this.zkt}Pkt(){if(this.jkt)throw new b("Cannot perform new operation while BufferAppender is still busy")}UTt(t){this.jAt!==t&&(this.Pkt(),this.jAt=t,this.U_t=new vX(t))}Bkt(){return this.zkt?this.zkt.OL:Promise.resolve()}Rkt(t){var i;const e=this.U_t.svt,s=this.U_t.b_;if(void 0===e)return!1;const n=x.min(t,e);var r;return null!=(r=null==(i=s.BB().WB(this.xkt).nR(n))?void 0:i.gr(e))&&r}Ukt(t){return this.U_t.Skt(t)}c_(){this.rO.c_(),this.rO=new Po}BK(t){this.Pkt(),this.zkt=new No;const i=i=>{this.Fkt.Qkt(t),this.Ykt(i)};this.RK(t,this.rO.a_).then(i,i)}async RK(t,i){p.vSt(rr,"Appending initializer",Nt(t.Gkt.Cnt)),await this.jAt.BK(t,i),p.vSt(rr,"Appended initializer",Nt(t.Gkt.Cnt)),this.U_t.nAt(t)}wAt(t){this.Pkt(),this.zkt=new No;const i=i=>{this.Fkt.Qkt(t),this.Ykt(i)};this.Vkt(t,this.rO.a_).then(i,i)}async Vkt(t,i){const e=t.FDt;if(void 0===e.SDt.dIt)throw new b("MediaBufferWrapper - Cannot append HLSAsset to "+this.g0+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.U_t.b_.CB,n=this.jAt.b_;p.vSt(rr,"Appending",Nt(t.Gkt.Cnt)),await this.jAt.jK(t,i),p.vSt(rr,"Appended",Nt(t.Gkt.Cnt),s,this.U_t.b_.CB);const r=t.zN,h=r+t.ct,o=t.Gkt,a=o.zN;var u;const c=o.zN+(null!=(u=o.ct)?u:0);this.U_t.elt(e,o,r,h,a,c);const l=this.jAt.b_.WB(n),d=this.U_t.Wrt(e,o);if(this.hA===iv.vp)if(d)if(this.Wkt(d))if(0===l.U){if(void 0===this.U_t.ogt(o)){const t=this.jAt.DJ.Sn(new Ki([r,h]));this.Okt=this.Okt.GB(t)}}else{const t=l.Cn(0),i=new Ki([t,h]);if(this.Okt=this.Okt.WB(i),t>r){const i=this.jAt.DJ.Sn(new Ki([r,t]));this.Okt=this.Okt.GB(i)}}else{const t=l.U>0&&l.Cn(0)<r?l.Cn(0):r;this.Okt=this.Okt.WB(new Ki([t,h]))}else if(0===l.U){const t=this.jAt.DJ.Sn(new Ki([r,h]));this.Okt=this.Okt.GB(t)}else{var f;const t=l.Cn(0),i=null==(f=n.nR(r))?void 0:f.jn(0),e=i&&i>r?i:r;if(t>e){const t=this.jAt.DJ.Sn(new Ki([e,l.Cn(0)]));this.Okt=this.Okt.GB(t)}}t.Gkt.ZEt&&this.U_t.yJ()}Wkt(t){const i=t.Lkt,e=i.Cn(0),s=i.jn(i.U-1),n=i.OB(0),r=i.zB(i.U-1);return this.Okt.qB(e,s,n,r)}constructor(t,i,e,s,n){this.zkt=void 0,this.rO=new Po,this.Okt=Ki.aR(),this.Ykt=t=>{this.zkt&&(t?fc(t)&&this.kkt?this.Hkt.aW(this.jAt.b_.rR)?this.zkt.CL():this.zkt.xL(t):Oi(t)?this.zkt.CL():this.zkt.xL(t):this.zkt.CL(),this.zkt=void 0)},this.g0=t,this.Fkt=e,this.jAt=i,this.U_t=s,this.Hkt=n}};r(),r();var pX=class{async qkt(t,i,e,s){const n=await this.Xkt(i,s);return await this.Zkt.qkt(t,n,e)}async Xkt(t,i){var e;if((null==(e=this.Kkt)?void 0:e.zu)!==t){p.vSt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.dE.mI({zu:t,eE:nr.OI,iE:Kc.GET,a_:i,hA:zu.GI,nE:jo.JI,hE:this.Nct}),s=await e.qj(),n=new T(s);this.Kkt={zu:t,Cp:n}}return this.Kkt.Cp}constructor(t,i,e){this.Zkt=t,this.dE=i,this.Nct=e,this.Kkt=void 0}};r();var yX=class{async mI(t,i,e,s,n){const r=await this.Jkt(t,i,e,nr.OI,s,n),h=await r.qj(n);return{httpStatusCode:r.TI,response:new T(h)}}async $kt(t,i,e,s,n){return(await this.Jkt(t,i,e,nr.zI,s,n)).OG(n)}async Jkt(t,i,e,s,n,r){let h;t.Yht&&(h=JH(t.Yht.Cn,t.Yht.U),0===h[0]&&h[1]===Da&&(h=void 0));const o=h?{Range:"bytes="+h[0]+"-"+h[1]}:void 0,a=new nc({zu:t.IT,eE:s,tE:o,hE:this.Nct,iE:Kc.GET,hA:i,nE:e,rE:this.dgt,oE:n,a_:r});try{const i=await this.Ict.ret(t.IT,h);if(Pi(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new Hh({mI:a,Cp:i.buffer})}catch(t){yo(t)}return await mu((()=>hl(this.dE.mI(a),a.a_)),r,this.tCt)}constructor(t,i,e,s,n=2){this.dE=t,this.Ict=i,this.dgt=e,this.Nct=s,this.tCt=n}};r();var MX,uh=class{iCt(){return this.eCt.SDt.qIt}async sCt(t,i,e){if(!this.iCt())throw new b("Could not perform blocking playlist update.");try{await this.nCt(),Pi(e),await this.Cdt.hkt(this.eCt,t,i,e),this.An=ag.f_()}catch(t){throw Oi(t)&&this.rCt(),t}this.rCt()}hCt(t){return this.Cdt.ckt(this.eCt,t)}rCt(){if(!this.oCt&&!this.aCt){const t=()=>{this.oCt=void 0};this.oCt=this.uCt(this.cCt.a_).then(t,t)}}async nCt(){this.oCt&&(this.cCt.c_(),this.cCt=new Po,await this.oCt.catch(xs),this.oCt=void 0)}async uCt(t){for(;;){if(this.eCt.SDt.IEt&&this.eCt.SDt.Qbt)return;const i=ag.f_()-this.An,e=1e3*this.eCt.SDt.Fbt;i<e&&await be(e-i,t);try{await this.Cdt.ukt(this.eCt,t)}catch(t){throw yo(t),this.Cdt.akt(this.eCt),t}this.An=ag.f_()}}e_(){this.aCt=!0,W(this.nCt())}constructor(t,i){this.oCt=void 0,this.cCt=new Po,this.An=-1/0,this.aCt=!1,this.Cdt=t,this.eCt=i,this.rCt()}};r(),function(t){t[t.hEt=0]="hEt",t[t.oEt=1]="oEt",t[t.FI=2]="FI",t[t.YI=3]="YI"}(MX||(MX={})),r(),r();var oa="AssetExtractor",TX=class{lCt(t,i,e){let s=i;for(const i of this.dCt){if(s>=t)return!0;if(s<i.Cn)return!1;if(s<i.jn){if(e<=i.jn)return!0;s=i.jn}}return s>=t}fCt(t,i){const e=[];for(let s=0;s<this.dCt.length;s+=1){const n=this.dCt[s],r=t-n.Cn,h=n.Cp.length,o=x.min(h,x.max(r,0)),a=x.max(0,i+r),u=Th(n.Cp,o,a);u.length&&(s=this._Ct(s,n,t,o,a),e.push(u))}return e}gCt(t,i){this.dCt.push({Cn:t,jn:t+i.length,Cp:i})}_Ct(t,i,e,s,n){let r=t;this.dCt.splice(r,1),r-=1,i.Cn<e&&(r+=1,this.dCt.splice(r,0,{Cn:i.Cn,jn:e,Cp:Th(i.Cp,0,s)}));const h=e+n-s;return h<i.jn&&(r+=1,this.dCt.splice(r,0,{Cn:h,jn:i.jn,Cp:Th(i.Cp,n)})),r}constructor(){this.dCt=[]}},NX=class{get wCt(){return this.ACt}async vCt(){const t=await this.Nd.read();if(t.done)throw this.ACt=1/0,new b("No more data can be read from the given stream.");return this.ACt+=t.value.length,t.value}async mCt(t){await this.Nd.cancel(t)}constructor(t,i){this.ACt=i,this.Nd=t.getReader()}},DX=class{pCt(){this.yCt.CL(),this.yCt=new No}MCt(t){const{Ght:i,Vht:e}=IX(this.sbt.Yht),s=this.TCt.fCt(i,e-i);p.vSt(oa,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.NCt.OL;const{Ght:i,Vht:e}=IX(this.sbt.Yht);try{for(;;){const s=this.Nd.wCt,n=await this.Nd.vCt(),r=n.length;p.vSt(oa,"Read "+r+" at "+s+" for extraction of "+Nt(this.sbt));const h=x.min(s+r,i)-s;if(!(h>0)){if(s+r<=e)return p.vSt(oa,"Extracting the read data range for extraction of "+Nt(this.sbt)),t.enqueue(n),this.pCt(),W(this.readAndSliceOutAssetBytes(t));{const i=e-s,h=Th(n,0,i),o=Th(n,i);return h.length>0&&(p.vSt(oa,"Extracting "+h.length+" bytes for extraction of "+Nt(this.sbt)),t.enqueue(h)),p.vSt(oa,"Of the read "+r+" bytes, the last "+o.length+" will be stored locally for extraction of "+Nt(this.sbt)),this.TCt.gCt(s+i,o),p.vSt(oa,"Extraction of "+Nt(this.sbt)+" completed as the entire request has been fulfilled."),this.DCt(t),void(this.SCt&&(p.vSt(oa,"Aborting stream upstream as no more bytes are needed from "+Nt(this.sbt)+"."),await this.Nd.mCt("AssetExtraction - AbortOnEnd")))}}{const i=Th(n,0,h),e=Th(n,h);if(p.vSt(oa,"Of the read "+r+" bytes, the first "+h+" will be stored locally for extraction of "+Nt(this.sbt)),this.TCt.gCt(s,i),e.length>0)return p.vSt(oa,"Extracting "+e.length+" bytes for extraction of "+Nt(this.sbt)),t.enqueue(e),this.pCt(),W(this.readAndSliceOutAssetBytes(t))}}}catch(i){p.vSt(oa,"Extraction of "+Nt(this.sbt)+" completed as the entire source stream has been read."),this.DCt(t)}}DCt(t){t.close(),this.pCt(),this.ICt.CL()}start(t){p.vSt(oa,"Preparing to push all collected data to controller for extraction of "+Nt(this.sbt)),this.MCt(t),p.vSt(oa,"Collected data pushed to controller for extraction of "+Nt(this.sbt));const{Vht:i}=IX(this.sbt.Yht);this.Nd.wCt>=i?(p.vSt(oa,"Extraction of "+Nt(this.sbt)+" completed as the entire request has been fulfilled."),this.DCt(t)):(p.vSt(oa,"Continuing read from original stream for extraction of "+Nt(this.sbt)),W(this.readAndSliceOutAssetBytes(t)))}get ECt(){return this.ICt.OL}pull(){return this.NCt.CL(),this.NCt=new No,this.yCt.OL}constructor(t,i,e,s){this.ICt=new No,this.sbt=t,this.Nd=i,this.TCt=e,this.SCt=s,this.NCt=new No,this.yCt=new No}},SX=class{yN(t){if(!iq(this.sbt,t))return!1;const{Ght:i,Vht:e}=IX(t.Yht);return this.TCt.lCt(this.bCt.wCt,i,e)}async aMt(t,i){void 0===i&&(i=!1);const e=this.bCt,s=this.TCt;if(p.$y(oa,"Extracting data from "+Nt(t)+" out of "+Nt(this.sbt)),this.LCt&&(p.vSt(oa,"Awaiting previous extraction before extracting "+Nt(t)+" out of "+Nt(this.sbt)),await this.LCt),!this.yN(t))throw new b("The extractor does not contain the data requested");const n=new DX(t,e,s,i);return this.LCt=n.ECt,new f(n)}constructor(t,i){this.sbt=i;const{Ght:e}=IX(this.sbt.Yht);this.bCt=new NX(t,e),this.TCt=new TX}};function IX(t){if(t){const i=t.Cn;return{Ght:i,Vht:void 0!==t.U?i+t.U:Da}}return{Ght:0,Vht:Da}}var EX=class{async $n(){const t=await this.kCt.$kt(this.sbt,zu.YI,jo.KT,void 0,this.rO.a_);return new SX(t,this.sbt)}yN(t){return iq(this.sbt,t)}async aMt(t,i){void 0===i&&(i=!1);const e=await this.avt;return await hl(e.aMt(t,i),this.rO.a_)}c_(){this.avt.catch(xs),this.rO.c_()}constructor(t,i){this.sbt=t,this.kCt=i,this.rO=new Po,this.avt=this.$n()}};r();var bX=class extends gg{constructor(t){super(On.CCt),this.rE=t}};r();var LX=class extends gg{constructor(t,i,e,s,n,r,h){super(On.xCt),this.uri=t,this.OCt=i,this.rE=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.jCt=r,this.httpStatusCode=h}};function kX(t,i,e){const s=hr(e)?e:e.JEt;if(i.dLt(s.DEt)){if(void 0!==e.p8)return i.mLt(e.p8,e).cD();if(e!==s&&void 0!==s.p8){const t=i.mLt(s.p8,s).cD();return e.zN+(t-s.zN)}}const n=t.SDt.ogt(s.sEt-1);if(void 0!==n&&i.dLt(n.DEt)){if(n.pEt.length>0){const t=n.ubt(n.pEt.length-1);if(void 0!==t.p8){const s=i.mLt(t.p8,t).cD();return e.zN+(s-t.zN)}}if(void 0!==n.p8){const t=i.mLt(n.p8,n).cD();return e.zN+(t-n.zN)}}const r=t.SDt.ogt(s.sEt+1);if(void 0!==r&&i.dLt(r.DEt)){if(r.pEt.length>0){const t=r.ubt(0);if(void 0!==t.p8){const s=i.mLt(t.p8,t).cD();return e.zN+(s-t.zN)}}if(void 0!==r.p8){const t=i.mLt(r.p8,r).cD();return e.zN+(t-r.zN)}}return e.zN}r();var On,CX="HlsPlaylistDownloader";!function(t){t.CCt="segmentdownloadprogress",t.xCt="segmentdownloaded"}(On||(On={}));var xX=class extends i{zCt(t){this.PCt.e_(),this.PCt=new uh(this.Cdt,t),this.jkt?this.BCt=t:(this.eCt=t,this.RCt=0,this.UCt=void 0,this.QCt=void 0)}get jkt(){return void 0!==this.FCt}Bkt(){return this.FCt?this.FCt.OL:Promise.resolve()}YCt(){return this.Fkt.YCt()}GCt(t){this.Fkt.GCt(t)}c_(){var t,i,e;this.VCt.c_(),this.VCt=new Po,null==(t=this.WCt)||t.c_(),this.WCt=void 0,null==(i=this.HCt)||i.c_(),null==(e=this.qCt)||e.c_(),this.HCt=void 0,this.qCt=void 0,this.RCt=0,this.UCt=void 0,this.QCt=void 0}e_(){this.PCt.e_()}get FDt(){var t;return null!=(t=this.BCt)?t:this.eCt}get XCt(){if(!this.eCt.SDt.IEt||void 0===this.UCt)return!1;const t=this.eCt.SDt.ogt(this.UCt);if(!t.ZEt)return!1;if(void 0!==this.QCt){if(!t.ubt(this.QCt).ZEt)return!1}return!0}ZCt(t){const i=this.eCt.SDt.Zbt(t);if(!i)return!1;if(void 0!==this.UCt){const e=i.sEt===this.UCt;return void 0!==this.QCt?i.cbt(t)===i.ubt(this.QCt)&&e:e}return!1}KCt(t){let i;if(void 0===this.UCt||t<this.RCt)i=this.JCt(t);else if(i=this.$Ct(this.UCt,this.QCt),void 0!==i){const[e,s]=i,n=(null!=s?s:e).zN,r=3*this.eCt.SDt.dIt;x.abs(n-t)>=r&&(i=this.JCt(t))}else if(this.eCt.SDt.IEt){if(this.eCt.SDt.ogt(this.UCt).ZEt&&(i=this.JCt(t),void 0!==i&&i[0].sEt===this.UCt))return}if(i){this.RCt=t;const[e,s]=i;return 0===(null==s?void 0:s.tbt)&&void 0!==e.ct?[e,void 0]:[e,s]}}JCt(t){let i,e;const s=this.eCt.SDt.pet;if(0===s.length)return;const n=this.Cdt.Tr.WT,r=aa.dS(t),[h,o]=function(t,i,e){const s=t.SDt.pet;if(0===s.length)return[void 0,void 0];const n=t.SDt.Kbt(e.cD());if(!i.dLt(n.DEt))return[void 0,void 0];const r=n.sEt-s[0].sEt;let h,o,a,u=0;for(let t=r;t>=0;t--){const i=s[t];if(i.DEt!==n.DEt)break;if(void 0!==i.p8){h=i,u=t;break}}if(void 0===h){for(let t=r+1;t<s.length;t++){const i=s[t];if(i.DEt!==n.DEt)break;if(void 0!==i.p8){h=i,u=t;break}}if(void 0===h)return[void 0,void 0]}if(i.mLt(h.p8,h).gD(e)){o=h;for(let t=u+1;t<s.length;t++){const r=s[t];if(r.DEt!==n.DEt)break;if(void 0!==r.p8){if(!i.mLt(r.p8,r).gD(e)){a=r;break}o=r}}}else{a=h;for(let t=u-1;t>=0;t--){const r=s[t];if(r.DEt!==n.DEt)break;if(void 0!==r.p8){if(i.mLt(r.p8,r).gD(e)){o=r;break}a=r}}}return[o,a]}(this.eCt,n,r);let a;if(void 0!==h&&void 0!==o){const t=n.mLt(h.p8,h),i=n.mLt(o.p8,o),e=r.MD(t).cD()/i.MD(t).cD()*(o.zN-h.zN);a=h.zN+e}else a=t;const u=s[s.length-1];return u.PN<=a?(i=u,e=u.dbt(a)):s[0].zN>a?(i=s[0],e=i.ubt(0)):(i=this.eCt.SDt.Zbt(a),e=null==i?void 0:i.dbt(a)),i?[i,e]:void 0}$Ct(t,i){let e,s;if(e=this.eCt.SDt.ogt(t),e&&void 0!==i){if(0===e.pEt.length)return[e,void 0];s=e.ubt(i+1)}return void 0!==e&&void 0!==s||(e=this.eCt.SDt.ogt(t+1),s=null==e?void 0:e.ubt(0)),e?[e,s]:void 0}Pkt(){if(this.jkt)throw new b("Cannot perform new operation while PlaylistDownloader is still busy")}txt(t){this.Pkt(),this.FCt=new No,this.ixt(t,this.VCt.a_).then(this.ext,this.ext)}sxt(){this.PCt.rCt()}async ixt(t,i){if(this.eCt.SDt.IEt)return;let e=this.KCt(t);for(!e&&this.PCt.iCt()&&void 0!==this.UCt&&(await this.PCt.sCt(void 0===this.QCt?this.UCt+1:this.UCt,void 0!==this.QCt?this.QCt+1:void 0,i),e=this.KCt(t)),!e&&this.PCt.iCt()&&void 0!==this.UCt&&(await this.PCt.sCt(this.UCt+1,0,i),e=this.KCt(t));!e;){p.$y(CX,"No next segment / part available, need to update playlist before continuing."),await this.PCt.hCt(i);const s=this.FDt.SDt.pet;s[0].zN>t&&(this.QCt=void 0,this.UCt=void 0);s[s.length-1].sEt<this.UCt&&(this.QCt=void 0,this.UCt=void 0),e=this.KCt(t)}}nxt(){return this.Fkt.rxt()}hxt(){this.Pkt();try{const t=this.eCt.SDt.Jbt(X.hEt);t&&this.oxt(t);const i=this.eCt.SDt.Jbt(X.oEt);i&&this.axt(i)}catch(t){throw yo(t),this.eCt.SDt.Vbt=ag.f_(),this.Cdt.akt(this.eCt),t}}oxt(t){this.qCt&&!this.qCt.yN(t.Cnt)&&(this.qCt.c_(),this.qCt=void 0),this.qCt||(this.qCt=new EX(t.Cnt,this.kCt))}axt(t){this.HCt&&!this.HCt.yN(t.Cnt)&&(this.HCt.c_(),this.HCt=void 0),this.HCt||(this.HCt=new EX(t.Cnt,this.kCt))}hgt(t,i,e){this.Pkt(),p.$y(CX,"Starting download of segment "+Nt(t.Cnt)+" and part "+(null==i?void 0:i.tbt)),this.FCt=new No,this.uxt(t,i,e,this.VCt.a_).catch((t=>{throw yo(t),this.eCt.SDt.Vbt=ag.f_(),this.Cdt.akt(this.eCt),t})).then(this.ext,this.ext)}async uxt(t,i,e,s){let n;if(t.MEt){var r,h;if(!e||!eq(e.Gkt.Cnt,null==(r=t.MEt)?void 0:r.Cnt)||t.DEt!==e.DEt){var o;null==(o=this.WCt)||o.c_(),this.WCt=new No;const i=this.cxt(t.MEt,t,s).then((()=>{this.WCt=void 0}));this.WCt.l_(i)}n=null==(h=this.WCt)?void 0:h.OL}await this.lxt(t,i,n,s)}async cxt(t,i,e){const s=await this.dxt(t,i,e),n=s.MEt.Cp.Cp.byteLength;this.Fkt.fxt(s),this.Co(new LX(s.MEt.Gkt.Cnt,s.hA,this.g0,i.sEt,s.FDt.Vw,n,s.MEt.rwt)),p.vSt(rr,"Download initializer complete",Nt(t.Cnt))}async lxt(t,i,e,s){const n=await this._xt(t,i,s),r=n.Aht.Cp.Cp.byteLength;var h;e&&await hl(e,s),this.Fkt.fxt(n),this.Co(new LX(n.Aht.Gkt.Cnt,n.hA,this.g0,t.sEt,n.FDt.Vw,r,n.Aht.rwt)),p.vSt(rr,"Download complete",Nt(null!=(h=null==i?void 0:i.Cnt)?h:t.Cnt))}async _xt(t,i,e){let s;if(i){if(this.HCt)if(this.HCt.yN(i.Cnt)){const t=await this.HCt.aMt(i.Cnt),n=await qt(t,e),r=new T(n);s=jX(i,await this.qkt(r,i.AEt,e),200)}else this.HCt.c_(),this.HCt=void 0;s||(p.vSt(rr,"Start download",Nt(i.Cnt)),s=await this.gxt(i,e))}else p.vSt(rr,"Start download",Nt(t.Cnt)),s=await this.ugt(t,e);return this.UCt=t.sEt,this.QCt=null==i?void 0:i.tbt,{hA:"Aht",Aht:s,FDt:this.eCt,DEt:t.DEt}}async dxt(t,i,e){let s;if(this.qCt){var n;if(this.qCt.yN(t.Cnt)){const n=await hl(this.qCt.aMt(t.Cnt),e),r=await qt(n,e),h=new T(r);s=OX(t,i,await this.qkt(h,t.mEt?[t.mEt]:[],e),200)}p.$y(CX,"MAP is required for segment, downloading MAP data."),null==(n=this.qCt)||n.c_(),this.qCt=void 0}return s||(p.vSt(rr,"Start download",Nt(t.Cnt)),s=await this.wxt(t,i,e)),{hA:"MEt",MEt:s,FDt:this.eCt,zN:i.zN,DEt:i.DEt,AEt:i.AEt}}async wxt(t,i,e){const{response:s,httpStatusCode:n}=await this.kCt.mI(t.Cnt,zu.FI,jo.VI,void 0,e),r=t.mEt?[t.mEt]:[];return OX(t,i,await this.qkt(s,r,e),n)}async ugt(t,i){if(!t.Cnt)throw new b("Internal error: attempted to download an incomplete segment");let e,s;try{this.Axt(t);const n=await this.kCt.mI(t.Cnt,zu.FI,jo.KT,this.vxt,i);e=n.response,s=n.httpStatusCode}finally{this.mxt()}return function(t,i,e){return{Cp:{Cp:i,hA:at.bH},hA:MX.FI,rwt:e,Gkt:t,DEt:t.DEt}}(t,await this.qkt(e,t.AEt,i),s)}async gxt(t,i){let e,s;try{this.Axt(t);const n=await this.kCt.mI(t.Cnt,zu.FI,jo.KT,this.vxt,i);e=n.response,s=n.httpStatusCode}finally{this.mxt()}return jX(t,await this.qkt(e,t.AEt,i),s)}async qkt(t,i,e){const s=H_(i,(t=>t.iE===da.YIt));return s?s.Cnt&&s.GIt?await this.pxt.qkt(t,s.Cnt,s.GIt,e):(p.lt(CX,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}Axt(t){var i,e,s;this.yxt=t,this.Mxt=0,this.Txt=0,this.Nxt=null!=(s=null==(i=t.Cnt)||null==(e=i.Yht)?void 0:e.U)?s:0}mxt(){this.yxt=void 0,this.Mxt=0,this.Txt=0,this.Nxt=0}Dxt(){if(void 0!==this.yxt)return{Aht:this.yxt,Sxt:this.Txt,Ixt:this.Nxt}}Ext(t){return void 0!==this.yxt&&(0!==this.Mxt&&(0!==this.Nxt&&(!(this.Txt>=this.Nxt)&&!(t-this.Mxt<500))))}constructor(t,i,e,s,n,r,h,o){super(),this.BCt=void 0,this.FCt=void 0,this.yxt=void 0,this.Mxt=0,this.Txt=0,this.Nxt=0,this.VCt=new Po,this.WCt=void 0,this.RCt=0,this.UCt=void 0,this.QCt=void 0,this.qCt=void 0,this.HCt=void 0,this.ext=t=>{this.BCt&&(this.eCt=this.BCt,this.BCt=void 0,this.RCt=0,this.UCt=void 0,this.QCt=void 0),this.FCt&&(t&&!Oi(t)?this.FCt.xL(t):this.FCt.CL(),this.FCt=void 0)},this.vxt=(t,i)=>{this.Txt=t,t>0&&0===this.Mxt&&(this.Mxt=ag.f_()),void 0!==i&&(this.Nxt=i),this.Co(new bX(this.g0))},this.g0=t,this.Cdt=e,this.Fkt=s,this.eCt=i,this.PCt=new uh(e,i),this.pxt=new pX(h,n,o),this.kCt=new yX(n,r,function(t){switch(t){case Eo.vp:return rn.vp;case Eo.mp:return rn.mp;case Eo.pp:case Eo.xIt:return rn.Ru;default:return rn.KT}}(i.hA),o)}};function OX(t,i,e,s){return{Cp:{Cp:e,hA:at.bH},hA:MX.hEt,rwt:s,Gkt:t,DEt:i.DEt}}function jX(t,i,e){return{Cp:{Cp:i,hA:at.bH},rwt:e,hA:MX.oEt,Gkt:t,DEt:t.JEt.DEt}}r();var zX=class{get Dkt(){return this.bxt}get Lxt(){const t=[];for(const e of this.kxt)if("Aht"===e.hA){const s=e.Aht.Gkt,n=kX(e.FDt,this.xLt,s);var i;t.push({Aht:s,FDt:e.FDt,zN:n,PN:n+(null!=(i=s.ct)?i:0)})}return t}get Cxt(){const t=[];return this.xxt.forEach((i=>{for(const e of i.Oxt)"Aht"===e.hA&&t.push({Aht:e.Gkt,FDt:e.FDt,zN:e.zN,PN:e.zN+e.ct})})),t}fxt(t){"MEt"===t.hA&&(this.bxt=t.MEt),this.kxt.push(t),this.jxt&&(this.jxt.CL(),this.jxt=void 0)}YCt(){return this.kxt[0]}GCt(t){Et(this.kxt,t)}rxt(){return null!=this.jxt||(this.jxt=new No),this.jxt.OL}zxt(t){this.Pxt(t.uut).zxt(t)}Bxt(t){return this.Pxt(t).Bxt()}Qkt(t){this.Pxt(t.uut).Qkt(t)}Rxt(t){var i;null==(i=this.xxt.get(t))||i.e_()}Uxt(t){return this.Pxt(t).Uxt()}Pxt(t){if(this.xxt.has(t))return this.xxt.get(t);{const i=new PX;return this.xxt.set(t,i),i}}kL(){this.Qxt(),this.Fxt()}Qxt(){this.bxt=void 0,Ri(this.kxt)}Fxt(){this.xxt.forEach((t=>t.kL()))}e_(){this.xxt.forEach((t=>t.e_())),this.xxt.clear(),this.kL(),this.jxt&&(this.jxt.c_(),this.jxt=void 0)}constructor(t){this.kxt=[],this.xxt=Qt(),this.jxt=void 0,this.bxt=void 0,this.xLt=t}},PX=class{get Oxt(){return this.Yxt}zxt(t){this.Yxt.push(t),this.Gxt&&(this.Gxt.CL(),this.Gxt=void 0)}Bxt(){return this.Yxt[0]}Qkt(t){Et(this.Yxt,t)}Uxt(){return null!=this.Gxt||(this.Gxt=new No),this.Gxt.OL}kL(){Ri(this.Yxt)}e_(){this.kL(),this.Gxt&&(this.Gxt.c_(),this.Gxt=void 0)}constructor(){this.Yxt=[],this.Gxt=void 0}};r();var BX=1e-6,RX=class{get b_(){return this.uNt}get DJ(){return this.cNt}async BK(t,i){const e=t.Cp.Cp;if(this.Vxt(e),this.Wxt.hA===Ks.TTML){this.xLt.dLt(t.DEt)||await hl(this.xLt._Lt(t.DEt),i);const s=this.Hxt(e,t.DEt);for(const t of s)this.Wxt.gE(t)}}async jK(t,i){if(void 0===t.Cp)return;const e=t.zN,s=e+t.ct;this.uNt=this.uNt.GB(Ki.oR(e,s)).YB(BX),this.EJ(t.qxt,t.Xxt),this.bJ(e,s),this.xLt.dLt(t.DEt)||await hl(this.xLt._Lt(t.DEt),i),this.PK(t.Cp.Cp,t.DEt,t.Gkt)}PK(t,i,e){let s;this.Vxt(t),s=this.Wxt.hA===Ks.WEBVTT?this.Zxt(t,e):this.Hxt(t,i);for(const t of s)this.Wxt.gE(t)}Zxt(t,i){const e=Xm(t),s=e.L;var n;const r=null!=(n=e.jS)?n:{zS:aa.LD,lh:aa.LD};for(const t of s){const e=aa.dS(t.zN).MD(r.lh).mN(r.zS),s=this.xLt.mLt(e,i).cD(),n=s+(t.PN-t.zN);t.iD(s,n)}return s}Hxt(t,i){const e=this.xLt.vLt(i).cD();return Rp(t,this.Wxt,{LS:0,kS:1/0,CS:e},K.APPLICATION_MP4)}Vxt(t){this.Wxt.hA===Ks.DEFAULT&&(this.Wxt.hA=this.Kxt(t)?Ks.WEBVTT:Ks.TTML)}Kxt(t){return hp(Hi(ir(Ao(t),0,x.min(t.byteLength,16)),new Vr))}EJ(t,i){this.cNt=this.cNt.GB(Ki.oR(t,i)).YB(BX)}bJ(t,i){this.cNt=this.cNt.WB(Ki.oR(t,i))}constructor(t,i){this.uNt=Ki.aR(),this.cNt=Ki.aR(),this.Wxt=t,this.xLt=i}};r(),r(),r();var UX=class extends gg{constructor(t,i){super(Hu.Jxt),this.FDt=t,this.Nst=i}};r();var QX=class extends gg{constructor(t){super(Hu.$xt),this.FDt=t}};r();var FX=class extends gg{constructor(t,i){super(Hu.tOt),this.FDt=t,this.Est=i}};r();var Hu,YX=class extends gg{constructor(t,i){super(Hu.iOt),this.FDt=t,this.eOt=i}};!function(t){t.Jxt="sOt",t.tOt="nOt",t.iOt="rOt",t.$xt="hOt"}(Hu||(Hu={}));var ec=class extends i{get oOt(){return this.aOt}uOt(t){for(const i of this.aOt)na(t,i)||this.Fkt.Rxt(i);this.aOt=t}get jkt(){return void 0!==this.cOt}Bkt(){var t,i;return null!=(i=null==(t=this.cOt)?void 0:t.OL)?i:Promise.resolve()}Pkt(){if(this.jkt)throw new b("Cannot perform new operation while transmuxer is still busy")}lOt(t,i){}dOt(t){this.Pkt(),this.cOt=new No;const i=i=>{this.fOt(t,i)};this._Ot(t,this.rO.a_).then(i,i)}gOt(t){this.Pkt(),this.cOt=new No;const i=i=>{this.fOt(t,i)};this.wOt(t,this.rO.a_).then(i,i)}fOt(t,i){this.cOt&&(!i||Oi(i)?(i||this.Fkt.GCt(t),this.cOt.CL(),this.cOt=void 0):this.cOt.xL(i))}AOt(t,i){this.Co(new UX(t,i))}vOt(t,i){this.Co(new FX(t,i))}mOt(t,i,e){tX(i)&&this.Co(new YX(t,e))}pOt(t){this.Co(new QX(t))}zxt(t){na(this.aOt,t.uut)&&this.Fkt.zxt(t)}yOt(t){return this.Fkt.Bxt(t)}Qkt(t){this.Fkt.Qkt(t)}MOt(t){return this.Fkt.Uxt(t)}c_(){this.rO.c_(),this.rO=new Po}constructor(t,i,e){super(),this.cOt=void 0,this.rO=new Po,this.Fkt=t,this.xLt=i,this.aOt=e}};function GX(t,i){return tX(t)?0:x.min(t.zN,i)}function VX(t,i){var e;return x.max(t.zN,i)+(null!=(e=t.ct)?e:0)}var WX=class extends ec{_Ot(t,i){Pi(i);const e={hA:"TOt",Cp:t.MEt.Cp,uut:this.oOt[0],DEt:t.DEt,NOt:{Nst:"",AEt:t.AEt},zN:t.zN,FDt:t.FDt,Gkt:t.MEt.Gkt};return this.zxt(e),Promise.resolve()}async wOt(t,i){Pi(i);const e=t.Aht.Gkt;let s;void 0!==e.p8?(this.xLt.dLt(t.DEt)||await hl(this.xLt._Lt(t.DEt),i),s=this.xLt.mLt(e.p8,e).cD()):s=e.zN;const n=GX(e,s),r=VX(e,n);var h;const o={hA:"Aht",Cp:t.Aht.Cp,uut:this.oOt[0],qxt:n,Xxt:r,zN:s,ct:null!=(h=e.ct)?h:0,CS:0,DEt:t.DEt,FDt:t.FDt,Gkt:t.Aht.Gkt};this.zxt(o)}constructor(t,i,e){super(t,i,[e])}};function HX(t,i){let e=Ki.aR();for(const s of t){let n=s.zN;if(s.FDt.SDt.IEt&&tX(s.Aht))n=0;else{const e=t=>s.FDt===t.FDt&&iX(t.Aht,s.Aht),r=H_(t,e);if(void 0!==r)n=x.min(n,r.PN);else{const t=H_(i,e);void 0!==t&&(n=x.min(n,t.Lkt.jn(0)))}}e=e.GB(Ki.oR(n,s.PN))}return e}r();var qX=.001,XX=class{get DOt(){return this.SOt}get IOt(){return this.EOt}get bOt(){return this.LOt}get kOt(){return this.Fkt}get FDt(){return this.EOt.FDt}zCt(t){this.EOt.zCt(t)}COt(t){const i=t.slice();for(let t=this.SOt.length-1;t>=0;t--){const e=this.SOt[t];if(!e.kkt)throw new b("Invalid state");const s=Z_(i,(t=>t.hA===e.hA));s>=0?(e.UTt(i[s]),jc(i,s)):jc(this.SOt,t)}for(const t of i){const i=new vX(t);this.SOt.push(new mX(t.hA,t,this.Fkt,i,this))}i.length>0&&this.Fkt.kL();const e=t.map((t=>t.hA));this.LOt.uOt(e)}aW(t){var i;const e=(null==(i=this.vR)?void 0:i.aW(t))||!1;return e&&(this.c_(),this.kOt.kL()),e}xOt(t){for(const t of this.SOt)if(t.hA!==iv.Ru||t.jkt)throw new b("Invalid state");const i=new vX(t),e=new mX(iv.Ru,t,this.Fkt,i,this);this.SOt=[e]}get Dkt(){const t=this.Fkt.Dkt;if(t)return t;if(this.SOt.length>0){const t=this.SOt[0].Ckt.Dkt;if(t&&this.SOt.every((i=>i.Ckt.Dkt===t)))return t}}ngt(){for(const t of this.SOt)t.Ckt.Ekt()}get OOt(){if(0===this.SOt.length)return Ki.aR();const t=HX(this.Fkt.Lxt.concat(this.Fkt.Cxt),Nh(this.SOt,(t=>t.Ckt.pet))).BB();let i=new Ki([0,1/0]);for(const t of this.SOt)i=i.Sn(t.Ckt.b_);for(const t of this.SOt)i=i.WB(t.xkt);return i=i.GB(t),i}get jOt(){if(0===this.SOt.length)return Ki.aR();const t=HX(this.Fkt.Cxt,Nh(this.SOt,(t=>t.Ckt.pet))).BB();let i=new Ki([0,1/0]);for(const t of this.SOt)i=i.Sn(t.Ckt.b_);return i=i.GB(t),i}dAt(t){const i=this.OOt.nR(t,qX);return i?i.jn(i.U-1):t}ZCt(t){return!!this.OOt.nR(t,qX)||this.EOt.ZCt(t)}zOt(t){return this.jOt.gr(t,qX)}POt(t,i,e){for(const t of this.SOt){const e=t.Ckt,s=e.svt;if(void 0!==s&&i>=s&&!e.b_.BB().gr(s))return!0}return i-t<e}c_(){this.BOt(),this.ROt()}BOt(){this.IOt.c_()}ROt(){this.bOt.c_(),this.DOt.forEach((t=>t.c_()))}e_(){this.c_(),this.IOt.e_()}constructor(t,i,e,s){this.EOt=t,this.Fkt=i,this.LOt=e,this.vR=s,this.SOt=[]}};r();var ZX=class extends gg{constructor(){super(Au.MDt)}};r();var KX=class extends gg{constructor(){super(Au.pDt)}};r(),r();var JX="LazyMediaBuffer",$X=class extends i{get IP(){return this.Vx}get TJ(){return this.g0}get wd(){if(!this.jAt)throw new ce(le.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.jAt.wd}get HV(){return this.eW}set HV(t){this.eW=t,this.jAt&&(this.jAt.HV=t)}KH(){return this.jAt?this.jAt.KH():this.UOt}get b_(){return this.jAt?this.jAt.b_:Ki.aR()}get DJ(){return this.jAt?this.jAt.DJ:this.SJ.hq}get KV(){return this.rW}set KV(t){this.rW=t,this.jAt&&(this.jAt.KV=t)}EJ(t,i){p.vSt(JX,"Marking gap from "+t+" to "+i+"."),this.SJ.aq(t,i),this.jAt&&this.jAt.EJ(t,i)}bJ(t,i){p.vSt(JX,"Removing gap from "+t+" to "+i+"."),this.SJ.uq(t,i),this.jAt&&this.jAt.bJ(t,i)}QOt(t){this.jAt=t,this.jAt.KV=this.rW,this.jAt.HV=this.eW;const i=this.SJ.hq;for(let t=0;t<i.U;t++)this.jAt.EJ(i.Cn(t),i.jn(t));var e;this.UOt&&(p.vSt(JX,"End of stream"),null==(e=this.jAt)||e.yJ());this.jAt.yn(tt.IH,this.Ds),this.FOt.CL(t)}YOt(t){return hl(this.FOt.OL,t)}async jK(t,i,e){const s=await this.YOt(e);await s.jK(t,i,e)}async LJ(){const t=await this.YOt();await t.LJ()}async BK(t,i,e){const s=await this.YOt(e);await s.BK(t,i,e)}async pN(t,i,e){const s=await this.YOt(e);await s.pN(t,i,e)}async JK(t,i){const e=await this.YOt();await e.JK(t,i)}yJ(){this.UOt=!0,this.jAt&&this.jAt.yJ()}OH(t){return!!this.jAt&&this.jAt.OH(t)}async zH(t){const i=await this.YOt();await i.zH(t)}async gn(){var t;this.Vo(),null==(t=this.jAt)||t.fn(tt.IH,this.Ds)}constructor(t,i){super(),this.g0=t,this.GOt=i,this.Vx=void 0,this.jAt=void 0,this.FOt=new No,this.eW=20,this.UOt=!1,this.rW=30,this.SJ=new TL}},tZ="LazyMediaSource",iZ=class{get wd(){return{hA:wt.LO,D$:[],EP:[]}}get rt(){throw new b("Not implemented")}get d$(){return this.VOt}get f$(){return this.WOt}get b_(){return this.MP?this.MP.b_:Ki.aR()}get ct(){return this.MP?this.MP.ct:this.zk}get KH(){return!!this.MP&&this.MP.KH}get yg(){return this.MP?this.MP.yg:new Ki([0,1/0])}p$(t){this.zk=t,this.MP&&this.MP.p$(t)}yJ(){this.A8=!0,this.MP&&this.MP.yJ()}lJ(){this.A8=!1,this.MP&&this.MP.lJ()}N$(t,i,e,s){this.HOt=t,this.qOt=i,this.XOt=Boolean(e),this.ZOt=Boolean(s),this.MP&&this.MP.N$(t,i,e,s)}OH(t){return!this.MP||this.MP.OH(t)}async zH(t){if(!this.OH(t))throw new b("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.MP)await this.MP.zH(t);else{var i,e;this.gP.g3();const s=await this.gP.$n(t);j(this.zk)||s.p$(this.zk),this.A8&&s.yJ(),s.N$(this.HOt,this.qOt,this.XOt,this.ZOt),p.vSt(tZ,"The MediaSource has been loaded."),this.KOt=!0,this.MP=s,null==(i=this.VOt)||i.QOt(this.MP.d$),null==(e=this.WOt)||e.QOt(this.MP.f$),this.JOt.CL(s),this.gP.w3()}}async e_(){this.MP&&await this.MP.e_()}constructor(t,i,e){this.gP=t,this.VOt=void 0,this.WOt=void 0,this.JOt=new No,this.MP=void 0,this.KOt=!1,this.zk=NaN,this.A8=!1,this.HOt=0,this.qOt=1/0,this.XOt=!1,this.ZOt=!1,i&&(p.vSt(tZ,"Created lazy media buffer for audio."),this.VOt=new $X(iv.mp,this)),e&&(p.vSt(tZ,"Created lazy media buffer for video."),this.WOt=new $X(iv.vp,this))}};function eZ(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=nZ(e,"tag");const r=nZ(null==s?"*":s,"range"),h=[];let o,a,u,c=-1;for(;++c<r.length;)if(o=r[c].toLowerCase(),i||"*"!==o){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),o)){if(!i)return n[a];h.push(n[a])}else u.push(n[a]);n=u}return i?h:void 0}}r();eZ(((t,i)=>"*"===i||t===i||Va(t,i+"-")),!0),eZ(((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var sZ=eZ(((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}}));function nZ(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new b("Invalid "+i+" `"+e+"`, expected non-empty string");return e}r(),r();var rZ,hZ=16384,oZ=71,aZ=188,uZ=2,cZ=3;function lZ(t){return dZ(t)?1:function(t){return function(t){if(t.length<uZ*aZ)return-1;const i=t.length<cZ*aZ?uZ:cZ,e=x.min(1e3,t.length-i*aZ);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(t[s+n*aZ]!==oZ){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==XC(Ao(t),new Vr)}(t)?3:0}function dZ(t){const i=ml(t,0,x.min(t.length,hZ));return Qi.vy(Ao(i))}!function(t){t[t.KT=0]="KT",t[t.Gv=1]="Gv",t[t.$Ot=2]="$Ot",t[t.tjt=3]="tjt"}(rZ||(rZ={}));var fZ=class{get hA(){return this.g0}get b_(){return this.jAt.b_}get DJ(){return this.jAt.DJ}ijt(t){return this.jAt===t}async BK(t,i){await this.jAt.BK(t.Cp,{cK:t.FDt.Vw},i),void 0!==this.ejt&&this.g0===iv.vp&&dZ(t.Cp.Cp)&&this.ejt.Rft(t.Cp.Cp)}async jK(t,i){Pi(i),p.$y("HlsMediaBuffer","Got media data, appending to "+this.g0+" MediaBuffer: "+Nt(t.Gkt.Cnt));const e=t.qxt,s=t.Xxt,n={p8:t.zN,ct:t.ct,CS:t.CS,cK:t.FDt.Vw};void 0!==t.Cp&&(await this.jAt.jK(t.Cp,n,i),this.sjt(t.Cp,t)),this.njt(e,s)}sjt(t,i){var e;if(!dZ(t.Cp))return;const s=i.zN,n=s+i.ct,r=i.CS;if(null==(e=this.Mft)||e.elt(t.Cp,s,r),void 0!==this.ejt&&this.g0===iv.vp){const e=i.Gkt.ZEt;this.ejt.elt(t.Cp,s,n,r,i.FDt,e)}const h=[];void 0!==this.Mft&&h.push(this.Mft),void 0!==this.ejt&&h.push(this.ejt),wy(this.b_,h)}njt(t,i){const e=this.jAt.b_,s=new Ki([t,i]).WB(e);for(let t=0;t<s.U;t++)this.jAt.EJ(s.Cn(t),s.jn(t));for(let t=0;t<e.U;t++)this.jAt.bJ(e.Cn(t),e.jn(t))}EJ(t,i){this.jAt.EJ(t,i)}bJ(t,i){this.jAt.bJ(t,i)}constructor(t,i,e,s){this.g0=t,this.jAt=i,this.Mft=e,this.ejt=s}};r();function _Z(t){if(t.hA!==Eo.xIt||void 0===t.kDt)return;const i=t.kDt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.kDt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}r(),r(),r();var gZ=class{_It(t){var i,e,s;return null==(s=null==(i=this.MP)||null==(e=i.f$)?void 0:e.OH(t))||s}gIt(t){var i,e,s;return null==(s=null==(i=this.MP)||null==(e=i.d$)?void 0:e.OH(t))||s}constructor(t){this.MP=t}},pe="LLHLSPlayer",wZ=[qo.mv,qo.pv,qo.yv,qo.Mw],AZ=[t.WA,t.DA,t.OA,t.CA],vZ=2e3,mZ=class extends i{rjt(){if(void 0===this.hjt)return!1;const t=ag.f_();if(!this.hjt.IOt.Ext(t))return!1;const i=this.hjt.IOt.Dxt();if(void 0===i||void 0===i.Aht.ct)return!1;const e=this.j_,s=this.ag,n=this.hjt.OOt.nR(e);if((void 0!==n?n.jn(0)-e:0)>=2*i.Aht.ct*s)return!1;return 8*i.Ixt/this.vR.zV.Xz>=1.8*i.Aht.ct}async ojt(){var t;const i=await this.vIt();if(void 0===i)return;const e=null==(t=this.hjt)?void 0:t.IOt.Dxt();if(void 0===e)return;const s=this.ajt;if(x.max(0,e.Ixt-e.Sxt)<=e.Ixt*(i.Xz/s.Xz))return;const n=i.Xz<s.Xz;await this.qDt(i,{XDt:n})}ujt(t){return Oo(t,(t=>t.Xz))}async cjt(){let t=await this.ljt();if(0===t.length)return;const i=await this.djt(t);i.length>0&&(t=i);const e=this.ujt(t);void 0!==e&&(await this.qDt(e,{XDt:!0}),this.SP.cIt(e.Xz))}get fjt(){const t=[this._jt,this.gjt].filter(j_);for(const i of t){if(!i.SDt.IEt)return!1;const t=i.SDt.pet,e=t[t.length-1];if(e&&e.DEt!==this.wjt)return!1}return!0}get YDt(){return this.ajt}get sSt(){return this._jt}get rSt(){return this.gjt}get Ajt(){return this.vjt}get ht(){return this.nN}get b_(){return this.gP.b_.ks()}get WDt(){const t=[];if(this.ajt){const i=this.gP.j_;for(const e of this.mjt)for(const s of e.DOt){const e=s.Ukt(i);e&&!na(t,e)&&t.push(e)}}return t}get k_(){if(this.ajt){const t=this.gP.j_;return this.ajt.FEt(t)}}set k_(t){if(!t||!this.ajt)return;const i=this.ajt.YEt(t);void 0!==i&&this.Dp(i,!1,!0)}get j_(){var t;return null!=(t=this.pjt)?t:this.gP.j_}set j_(t){this.Dp(t,t===1/0,!0)}Dp(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),p.$y(pe,"Seeking to "+t+" s."),this.pjt=t,this.yjt=i,this.Mjt=!0,this.Edt=!0,this.Co(new Ot(t)),this.h2.c_(),this.Tjt&&(ag.__(this.Njt),e?this.Njt=ag.g_((()=>this.Djt(t,i)),50):this.Djt(t,i))}Djt(t,i){ag.__(this.Njt);const e=[this.avt,this.Sjt,this.o2].filter(j_);this.h2=new Po,this.o2=this.a2(e,t,i,this.h2.a_).catch(this.Ijt)}get ct(){var t,i,e,s,n,r,h;if(!this.fjt)return null!=(h=null!=(r=null!=(n=null==(t=this._jt)?void 0:t.SDt.ct)?n:null==(i=this.gjt)?void 0:i.SDt.ct)?r:null==(e=this.Cdt)||null==(s=e.$Lt)?void 0:s.SDt.ct)?h:1/0;const o=this.gP.ct;if(j(o)){var a,u,c;const t=null!=(c=null==(a=this.Ejt)?void 0:a.SDt.ct)?c:null==(u=this.bjt)?void 0:u.SDt.ct;if(void 0!==t)return t}return o}get R_(){if(!this.fjt)return!1;if(this.Tg&&this.Tjt){var t,i;const e=this.j_,s=null==(t=this._jt)?void 0:t.SDt.ct,n=null==(i=this.gjt)?void 0:i.SDt.ct;return!(void 0!==s&&e<s)&&!(void 0!==n&&e<n)}return this.gP.R_}get lt(){return this.vP}get F_(){return this.mP}get G_(){}get W_(){return!1}get q_(){return oe({},{aN:0,uN:0,cN:0,lN:0,dN:0,fN:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.gP.X_(),{dN:this.Klt,lN:this.vR.zV.Xz})}get Tr(){var t;return null==(t=this.Cdt)?void 0:t.Tr}get Z_(){return this.gP.Z_}set Z_(t){this.gP.Z_=t}get eg(){return this.vat}set eg(t){this.vat!==t&&(this.vat=t,this.Co(t?new eY:new sY))}get hg(){return this.gP.hg}get ag(){return this.gP.ag}set ag(t){p.$y(pe,"Setting playback rate to "+t+"."),this.gP.ag=t}get fg(){return this.edt.ks()}get edt(){return this.gP.fg}get gg(){return this.yP}set gg(t){this.yP!==t&&(this.yP=t,this.Ljt())}get vg(){let t=this.gP.vg;return this.rdt&&(t=x.max(rv.Gn,t)),t}get yg(){return this.qlt.ks()}get qlt(){let t=this.T$;const i=[this._jt,this.gjt].filter(j_);if(t.U>0&&i.some((t=>!t.SDt.IEt))){const e=this.edt,s=t.jn(t.U-1);if(e.U>0&&e.jn(e.U-1)>s){let n=e.jn(e.U-1);const r=function(t){return t.reduce(((t,i)=>t.Sn(i.SDt.bbt)),new Ki([0,1/0]))}(i);r.U>0&&(n=x.min(n,r.jn(r.U-1))),t=t.GB(new Ki([s,n]))}}return t}sLt(){let t=function(t){if(0===t.length)return Ki.aR();let i=new Ki([0,1/0]),e=0;for(const s of t){const t=s.SDt.yg;t.U>0&&(i=i.Sn(t),e=x.max(e,t.Cn(0)))}if(i.U>0)return i;return Ki.hR(e)}([this._jt,this.gjt].filter(j_));0!==t.U&&(this.MP&&this.fjt&&this.MP.ct!==1/0&&(t=new Ki([t.Cn(0),this.MP.ct])),this.T$=t,this.kjt&&this.Mft.SI(t.Cn(0)),this.Cjt&&this.ejt.SI(t.Cn(0)))}get Tg(){var t;return null!=(t=this.Mjt)?t:this.gP.Tg}get TP(){}get nt(){return this.Dl}get rt(){return this.hN}get Sg(){var t,i;return this.gP.Sg||(null==(t=this.ajt)||null==(i=t.dSt)?void 0:i.Ti)||0}get Lg(){var t,i;return this.gP.Lg||(null==(t=this.ajt)||null==(i=t.dSt)?void 0:i.ji)||0}get xg(){return this.gP.xg}set xg(t){p.$y(pe,"Setting volume to "+t+"."),this.gP.xg=t}get zg(){return this.NP}get Bg(){return!1}set Bg(t){}get DP(){return this.SP}Hg(){return!1}Rg(){return this.gP.ya}be(){p.$y(pe,"Hiding the player."),this.gP.be()}Gg(){p.$y(pe,"Pausing the player."),this.gP.Gg()}async Vg(){this.V4=!0;const t=this.gP.Vg();if(this.R_){const t=this.qlt;t.U>0&&this.Dp(t.Cn(0))}this.Tjt||await this.Ljt(),this.flt(),await t}flt(){var t;if(!this.Hlt())if(null==(t=this.YDt)?void 0:t.SDt.IEt){var i;let t=!0,e=0;const s=null==(i=this.ajt)?void 0:i.SDt.Cn;if(!this.Edt&&s&&(t=!s.gEt,e=s._Et,e<0)){const t=this.YDt.SDt.bbt;e+=t.jn(t.U-1)}this.Djt(e,t)}else this.Djt(1/0,!0);this.xjt()&&this.Djt(1/0,!0)}Hlt(){var t;const i=this.qlt;if(0===i.U)return!0;const e=null==(t=this.Ojt)?void 0:t.HB(this.j_);return(e&&e>0?this.Ojt.jn(e):this.j_)>=i.Cn(0)}get Ojt(){var t,i;const e=null==(t=this.jjt)?void 0:t.OOt,s=null==(i=this.hjt)?void 0:i.OOt;return e?s?s.Sn(e):e:s}xjt(){return IZ(this.j_,this._jt)||IZ(this.j_,this.gjt)}fft(){this.vP=void 0,this.mP=void 0}hB(t){this.vP||(W(this.Zn()),this.vP=ne(t),this.mP=t,this.Co(new me(t)))}ge(){p.$y(pe,"Showing the player."),this.gP.ge()}qg(){throw new b("Not implemented")}Xg(){throw new b("Not implemented")}Zg(){}Kg(){this.Tjt&&W(this.zjt(this._jt,this.gjt,this.vjt,{Kg:!0}))}async ga(i,e,s){(p.$y(pe,"Setting the player source to "+i.src+"."),this.fft(),this.Nkt&&!zv(this.Nkt)&&(await this.Zn(),Pi(s)),i.src&&!zv(i))&&(this.CP.Jz(i.contentProtection),this.Nkt=i,this.Pjt=i.seamlessSwitchStrategy,this.Cjt=!na(i.ignoreEmbeddedTextTrackTypes,Ks.CEA608),this.kjt=!na(i.ignoreEmbeddedTextTrackTypes,Ks.EMSG),this.yn(Au.NDt,this.handleBufferingErrorEvent),this.Cdt=new lX(this.dE,this.Ict,i.useCredentials,ag.zv(i.src)),this.Cdt.yn(Yh.VLt,this.Tkt),this.Cdt.yn(Yh.WLt,this.Bjt),this.Cdt.yn(t.UA,this.Ds),this.Cdt.yn(t.QA,this.Ds),this.Rjt=new wX(i,this.Cdt,this.gP),this.Dl.nP(this.Rjt.nt),null!=this.LOt||(this.LOt=this.Ujt.M8()),e.textTracks&&this.xP(e.textTracks),qs(this.Dl),this.Ljt())}Ljt(){return this.avt=this.Qjt(this.avt,this.wE.a_).catch(this.ylt),this.avt}async Qjt(t,i){if(t&&(await t,Pi(i)),!this.Cdt)return;const e=this.yP;e===ii.HT||this.V4?await this.sit(i):e===ii.Mp&&await this.Fjt(i)}async Fjt(t){if(void 0===this.Cdt||this.rdt)return;if(!this.Cdt.XLt){try{await this.Cdt.ikt(t)}catch(t){throw yo(t),this.eg=!1,new ce(le.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.Yjt.Ddt()}const i=await this.Gjt();this.Vjt(i),await this.Wjt(i,t),this.rdt=!0,this.Oft.Pft()}async Gjt(){if(this.Hjt=this.Cdt.Tr.ySt,!this.Hjt.length)throw new ce(le.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.qjt(this.Hjt);if(0===t.length)throw new ce(le.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.djt(t);return i.length>0&&(t=i),p.$y(pe,"Selecting initial active variant stream."),function(t,i,e,s){void 0===s&&(s=Gv.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter((t=>t.Nst&&t.Nst.uSt&&Ut(t.Nst.uSt,n)));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=TZ(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=TZ(t,s);if(void 0!==i)return i}return t}(t,i),r=DZ(n,s);switch(e.XV.type){case qa.BANDWIDTH:{const t=e.tW,i=r.filter((i=>i.Xz<=t));if(i.length>0)return $_(i,(t=>t.Xz))}case qa.PERFORMANCE:return Oo(r,(t=>t.Xz));case qa.QUALITY:return $_(r,(t=>t.Xz))}}(t,this.Nkt.abr,this.vR,this.Mct.maximumBackoff)}async Wjt(t,i){const e=[],s=NZ(t.MSt);s&&this.bjt!==s&&(p.$y(pe,"Detected initial audio rendition."),this.bjt=s,e.push(this.Xjt(s,i)));const n=MZ(t.UEt);let r;n&&this.Zjt!==n&&(p.$y(pe,"Detected initial subtitle rendition."),this.Zjt=n,e.push(this.Xjt(n,i))),n||(r=MZ(t.QEt),r&&(p.$y(pe,"Detected initial closed caption rendition."),this.Kjt(t,r)));const h=NZ(t.TSt);if(h&&this.Ejt!==h){p.$y(pe,"Detected initial video rendition."),this.Ejt=h;s&&mH(h,s)||e.push(this.Xjt(h,i))}await Promise.all(e)}async Xjt(t,i){try{await this.Cdt.ukt(t,i)}catch(e){yo(e),(Xt(e)||Ya(e))&&await this.Jjt(t,i)}}async Jjt(t,i){if(!this.$jt)if(t.hA!==Eo.vp)await this.tzt(t,i);else if(this.Hjt&&this.Hjt.length<=1)await this.tzt(t,i);else{const t=await this.Gjt();this.Vjt(t),await this.Wjt(t,i)}}async sit(t){await this.Fjt(t),this.zjt(this.bjt,this.Ejt,this.Zjt).catch(xs),this.Tjt=!0}xP(t){for(const i of t)i.src&&this.PP.aE(i)}Kjt(t,i){if(!this.Cjt)return;const e=function(t){const i=[];for(const e of t){const t=_Z(e);void 0!==t&&i.push({e6:t,s6:e.gs||"",kh:e.l})}return i}(t.QEt);for(const t of e)this.ejt.TMt(t);if(void 0!==i){const t=_Z(i);this.ejt.yMt(t).eA=Ht.Xn}}get mjt(){return[this.jjt,this.hjt,this.izt].filter(j_)}HDt(t){for(const i of t)if(!this.ezt(i))throw new b("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.Hjt=t}ezt(t){const i=this.Tr;return!!i&&na(i.ySt,t)}szt(t){if(this.ajt)return H_(this.ajt.ESt,(i=>i===t))}Vjt(t){if(p.$y(pe,"Setting active variant stream."),this.ajt!==t){var i;if((null==(i=this.ajt)?void 0:i.UIt)!==(null==t?void 0:t.UIt)){if(this.ajt)for(const t of this.ajt.UEt)this.AE(t);if(t)for(const i of t.UEt)this.nzt(i)}this.ajt=t,this.Co(new ZX),this.vdt()}}nzt(t){const i=this.gP.uE(Pt.pp,void 0,t.l,t.gs,t.IDt,void 0,void 0,t.xDt.map(EH).filter(j_));this.rzt.tt(i),this.hzt.set(t.Vw,i),i.yn(Os.ra,this.onTextTrackChange)}AE(t){const i=this.hzt.get(t.Vw);i&&(i.fn(Os.ra,this.onTextTrackChange),this.rzt.it(i),this.hzt.delete(t.Vw),this.gP.AE(i))}async ljt(){var t;const i=null!=(t=this.Hjt)?t:this.Tr.ySt;if(0===i.length&&!this.Hjt)return p.$y(pe,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.Hjt)return p.$y(pe,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.qjt(i);if(0===e.length)return p.mSt(pe,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=DZ(e,this.Mct.maximumBackoff);return 0===s.length?(this.$jt||(p.mSt(pe,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.ozt++,await this.azt(e)),[]):s}async uzt(){const t=await this.vIt();if(void 0===t)return;const i=!!this.ajt&&t.Xz<this.ajt.Xz;await this.qDt(t,{XDt:i})}async vIt(){var t,i;const e=await this.ljt();if(0===e.length)return;const s=function(t){const i=t.j_,e=t.b_.nR(i);return e?e.jn(0)-i:0}(this.gP),n=await this.djt(e),r={ji:this.gP.ji,Ti:this.gP.Ti,fIt:s,gct:null==(t=this.Nkt)||null==(i=t.abr)?void 0:i.restrictToPlayerSize},h=await this.czt.vIt(e,this.ajt,n,r,new gZ(this.MP));return!!this.ajt&&h.Xz<this.ajt.Xz||this.lzt(h,s)?h:void 0}lzt(t,i){var e;if(t===this.YDt)return!1;const s=this.YDt&&SZ(this.YDt,this.Mct.maximumBackoff),n=SZ(t,this.Mct.maximumBackoff);if(!s&&n)return!0;(!this.dzt||this.dzt.GDt.Xz>t.Xz)&&(this.dzt={GDt:t,Wet:ag.f_()});const r=ag.f_()-this.dzt.Wet;var h;const o=null!=(h=null==(e=this.rSt)?void 0:e.SDt.dIt)?h:1/0;return i>=x.max(o-1,5)||r>1e3}async azt(t){this.$jt=!0;let i=!1;for(const e of t)try{const t=this.gjt?H_(e.TSt,(t=>vH(t,this.gjt))):void 0;if(void 0===t)continue;await this.ukt(t),t.SDt.Vbt=-1/0,i=!0}catch(t){}if(i)this.ozt=0,await this.fzt();else{if(this.ozt>=this.Mct.maxRetries)return void this.hB(new ce(le.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=x.min(this.Mct.minimumBackoff*2**(this.ozt-1),this.Mct.maximumBackoff);await be(t)}this.$jt=!1,await this.uzt()}async qjt(t){let i=await ig(t,(async t=>{var i,e,s;const n=[(null==(i=t.Nst)?void 0:i.aSt)?'audio/mp4; codecs="'+t.Nst.aSt+'"':void 0,(null==(e=t.Nst)?void 0:e.uSt)?'video/mp4; codecs="'+t.Nst.uSt+'"':void 0].filter(j_);return 0===n.length||await this._zt.tq(n,null==(s=this.Nkt)?void 0:s.useManagedMediaSource)}));return i.some((t=>{var i;return null==(i=t.Nst)?void 0:i.uSt}))&&(i=i.filter((t=>!t.Nst||t.Nst.uSt||0!==t.TSt.length))),i.some((t=>{var i;return null==(i=t.Nst)?void 0:i.aSt}))&&(i=i.filter((t=>!t.Nst||t.Nst.aSt||0!==t.MSt.length))),i}djt(t){return this.Cdt.KLt?ig(t,(t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([NZ(t.MSt),NZ(t.TSt),MZ(t.UEt),MZ(t.QEt)].filter(j_),(t=>this.gzt(t))))):Promise.resolve([])}async gzt(t){if(0===t.SDt.pet.length)return!1;const i=t.SDt.pet[0];if(!i.Cnt)return!1;const e=i.Cnt,s=e.Yht?JH(e.Yht.Cn,e.Yht.U):void 0;try{return await this.Ict.eet(e.IT,s)}catch(t){return!1}}async qDt(t,i){if(!this.Tjt)throw new b("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.ezt(t))throw new b("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.ajt)return void p.$y(pe,"Trying to set the already active variant stream, ignoring.");const e=this._jt?H_(t.MSt,(t=>vH(t,this._jt))):void 0,s=this.gjt?H_(t.TSt,(t=>vH(t,this.gjt))):void 0,n=this.vjt?H_(t.UEt,(t=>vH(t,this.vjt))):void 0;this.Vjt(t),this.dzt=void 0,await this.zjt(e,s,n,i)}async nSt(t){if(!this.Tjt)throw new b("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.ajt)throw new b("LLHLSPlayer - Cannot set the active audio rendition when there is no active variant stream.");if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active audio rendition to undefined.");const i=this.szt(t);if(!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");p.$y(pe,"Switching audio rendition"),await this.zjt(i,this.gjt,this.vjt,{KDt:!0})}async hSt(t){if(!this.Tjt)throw new b("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.ajt)throw new b("LLHLSPlayer - Cannot set the active video rendition when there is no active variant stream.");if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active video rendition to undefined.");const i=this.szt(t);if(!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");p.$y(pe,"Switching video rendition"),await this.zjt(this._jt,i,this.vjt,{ZDt:!0})}async wzt(t){if(!this.Tjt)throw new b("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.ajt)throw new b("LLHLSPlayer - Cannot set the active subtitle rendition when there is no active variant stream.");if(!t)throw new b("LLHLSPlayer - Cannot explicitly set the active video rendition to undefined.");const i=this.szt(t);if(!i)throw new b("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");p.$y(pe,"Switching subtitle rendition"),await this.zjt(this._jt,this.gjt,i)}async Azt(t,i){this.$jt||(t.hA!==Eo.vp?await this.tzt(t,i):this.Hjt&&this.Hjt.length<=1?(this.gjt!==t&&await this.zjt(this._jt,t,this.vjt),await this.tzt(t,i)):await this.uzt())}async ukt(t,i){try{await this.Cdt.ukt(t,i)}catch(e){throw yo(e),(Xt(e)||Ya(e))&&await this.Azt(t,i),e}}async tzt(t,i){if(!na(this.vzt,t)){this.vzt.push(t);try{const e=t.hA===Eo.pp||t.hA===Eo.xIt?1/0:this.Mct.maxRetries;await mu((()=>this.retryOfflineRenditionsCallback(t,i)),i,e,this.Mct.minimumBackoff,this.Mct.maximumBackoff)}catch(t){this.hB(new ce(le.MEDIA_LOAD_ERROR,t.message,t))}finally{Et(this.vzt,t),t.SDt.Vbt===-1/0&&await this.fzt()}}}zjt(t,i,e,s){void 0===s&&(s={});const n={XDt:s.XDt||!1,KDt:s.KDt||!1,ZDt:s.ZDt||!1,Kg:s.Kg||!1};return n.Kg||this._jt!==t||this.gjt!==i||this.vjt!==e?void 0===t&&void 0===i?Promise.reject(new b("Trying to buffer no media renditions.")):(this._jt=t,this.gjt=i,this.vjt=e,this.sLt(),this.Co(new KX),this.h2.c_(),this.h2=new Po,this.mzt.c_(),this.mzt=new Po,this.Sjt=this.pzt([this.Sjt,this.o2].filter(j_),t,i,e,n,this.mzt.a_).catch(this.Ijt),this.Sjt):Promise.resolve()}async pzt(t,i,e,s,n,r){var h;await Promise.all(t.map((t=>t.catch(xs)))),this.yzt(),await this.Mzt();const o=[];n.KDt&&this.MP&&this.MP.d$&&o.push(this.MP.d$.pN(0,1/0)),n.ZDt&&this.MP&&this.MP.f$&&o.push(this.MP.f$.pN(0,1/0)),await Promise.all(o),Pi(r);const a=await this.Tzt(i,e,n.Kg,r);this.Nzt(i,e,n.XDt||a),this.Dzt(s,n.XDt),Pi(r);const u=[e,i&&e&&mH(i,e)?void 0:i,s].filter(j_);try{await Promise.all(u.filter((t=>!t.SDt.Qbt)).map((t=>{var i;return null==(i=this.Cdt)?void 0:i.ckt(t,r)})))}catch(t){yo(t)}if(Pi(r),this.M$(),this.sLt(),void 0!==this.pjt)this.Djt(this.pjt,this.yjt);else if(!this.Edt&&(null==(h=this.ajt)?void 0:h.SDt.Cn)){const t=this.ajt.SDt,i=t.Cn;let e=i._Et;if(i._Et<0){const i=t.bbt;e+=i.jn(i.U-1)}this.Djt(e,!i.gEt)}else!this.Edt&&u.every((t=>!t.SDt.IEt))?this.Djt(1/0,!0):this.mjt.length>0&&this.Szt()}async Tzt(t,i,e,s){var n,r;const h=void 0!==t&&t!==i,o=void 0!==i,a=await this.Izt(t,i,this.ajt);if(Pi(s),!e&&this.MP&&!a)return!1;const u=void 0!==(null==(n=this.MP)?void 0:n.d$),c=void 0!==(null==(r=this.MP)?void 0:r.f$);if(!e&&!(h!==u||o!==c)&&a&&this.MP&&this.MP.OH(a))return await this.Ezt(s),await this.MP.zH(a),!0;for(const t of this.mjt)t.DOt.forEach((t=>t.c_()));this.gP.g3();try{this.MP&&await this.gP.Zn(),this.MP=await this.bzt(a,h,o)}finally{this.gP.w3()}return!0}async Izt(t,i,e){var s,n;const r=e.Nst,h=[];if(void 0!==t){if(!r||!r.aSt)return;{const t='audio/mp4; codecs="'+r.aSt+'"';p.$y(pe,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),h.push(t)}}if(void 0!==i){if(!r||!r.uSt)return;{const t='video/mp4; codecs="'+r.uSt+'"';p.$y(pe,"Configuring MediaSource for initial video rendition with codec: "+t+"."),h.push(t)}}if(0===h.length)return void p.mSt(pe,"No codecs found on the active variant stream.");var o;const a=null!=(o=null==(s=null==i?void 0:i.SDt.pet[0])?void 0:s.AEt)?o:[];var u;const c=null!=(u=null==(n=null==t?void 0:t.SDt.pet[0])?void 0:n.AEt)?u:[],l=this.Cdt.Tr,d=await rq(this.Nkt.contentProtection,h,l.LLt.concat(c).concat(a),this.dE,this.Nkt.useCredentials);return{hA:wt.LO,D$:h.map((t=>({IP:t}))),EP:d,j$:this.Nkt.useManagedMediaSource}}async bzt(t,i,e){let s;return s=t?await this.gP.$n(t):new iZ(this.gP,i,e),this.MP=s,this.M$(),this.wTt(),this.ATt(),s}M$(){const t=this.MP;if(t&&j(t.ct)){var i,e,s;const n=null!=(s=null==(i=this._jt)?void 0:i.SDt.ct)?s:null==(e=this.gjt)?void 0:e.SDt.ct;void 0!==n&&n>0&&t.p$(n)}this.sLt()}wTt(){const t=this.MP;t&&(t.f$&&(t.f$.HV=this.vR.sW),t.d$&&(t.d$.HV=this.vR.sW))}ATt(){const t=this.MP;t&&(t.f$&&(t.f$.KV=this.vR.KV),t.d$&&(t.d$.KV=this.vR.KV))}Nzt(t,i,e){if(!this.MP)throw new b("Invalid state");this.MP.d$?this.A$&&this.A$.ijt(this.MP.d$)||(this.A$=new fZ(iv.mp,this.MP.d$,this.kjt?this.Mft:void 0,this.Cjt?this.ejt:void 0)):this.A$=void 0,this.MP.f$?this.v$&&this.v$.ijt(this.MP.f$)||(this.v$=new fZ(iv.vp,this.MP.f$,this.kjt?this.Mft:void 0,this.Cjt?this.ejt:void 0)):this.v$=void 0;const s=t&&i&&mH(t,i);if(this.v$&&i){const t=s&&this.A$?[this.v$,this.A$]:[this.v$];this.hjt?this.hjt.FDt!==i&&(e&&(this.hjt.c_(),this.hjt.kOt.kL()),this.hjt.zCt(i)):(this.hjt=function(t,i,e,s,n,r,h,o,a,u){const c=s.Tr.WT,l=new zX(c),d=new xX(iv.vp,t,s,l,n,r,h,u),f=i.map((t=>t.hA)),_=o.jct(l,s.Tr.WT,f),g=new XX(d,l,_,a);return g.COt(i),g}(i,t,this.gP,this.Cdt,this.dE,this.Ict,this.Zkt,this.LOt,this.vR,this.Nkt.useCredentials),this.hjt.IOt.yn(On.CCt,this.Lzt),this.hjt.IOt.yn(On.xCt,this.kzt),this.hjt.bOt.yn(Hu.Jxt,this.Czt),this.hjt.bOt.yn(Hu.tOt,this.xzt),this.hjt.bOt.yn(Hu.iOt,this.Ozt),this.hjt.bOt.yn(Hu.$xt,this.jzt)),this.hjt.COt(t)}else{var n;null==(n=this.hjt)||n.e_(),this.hjt=void 0}var r;this.A$&&t&&!s?(this.jjt?this.jjt.FDt!==t&&(e&&(this.jjt.c_(),this.jjt.kOt.kL()),this.jjt.zCt(t)):(this.jjt=function(t,i,e,s,n,r,h,o,a,u){const c=s.Tr.WT,l=new zX(c),d=new xX(iv.mp,t,s,l,n,r,h,u),f=o.jct(l,s.Tr.WT,[i.hA]),_=new XX(d,l,f,a);return _.COt([i]),_}(t,this.A$,this.gP,this.Cdt,this.dE,this.Ict,this.Zkt,this.LOt,this.vR,this.Nkt.useCredentials),this.jjt.IOt.yn(On.xCt,this.kzt),this.jjt.bOt.yn(Hu.Jxt,this.Czt),this.jjt.bOt.yn(Hu.$xt,this.jzt)),this.jjt.COt([this.A$])):(null==(r=this.jjt)||r.e_(),this.jjt=void 0);this.zzt()}Dzt(t,i){if(this.izt){this.izt.IOt.FDt===t?i&&(this.izt.c_(),this.izt.kOt.kL()):(this.izt.e_(),this.izt=void 0)}if(!this.izt&&t){const i=this.hzt.get(t.Vw);i.eA=Ht.Xn,this.izt=function(t,i,e,s,n,r,h){const o=e.Tr.WT,a=new RX(i,o),u=new zX(o),c=new xX(iv.Ru,t,e,u,s,n,r,h),l=new WX(u,o,iv.Ru),d=new XX(c,u,l);return d.xOt(a),d}(t,i,this.Cdt,this.dE,this.Ict,this.Zkt,this.Nkt.useCredentials)}}zzt(){const t=[this.A$,this.v$].filter(j_).map((t=>t.hA));this.Cdt.Tr.WT.bLt(t)}async a2(t,i,e,s){await Promise.all(t.map((t=>t.catch(xs)))),Pi(s),await this.Mzt(),Pi(s),this.pjt=void 0,this.Mjt=void 0,this.Edt=!0;const n=this.qlt.RB(i);this.gP.Dp(n,e),this.Tjt&&this.mjt.length>0&&(this.Pzt(this.gP.j_),this.Szt())}Pzt(t){for(const i of this.mjt)i.ZCt(t)||(i.BOt(),i.kOt.Qxt()),i.zOt(t)||(i.ROt(),i.kOt.Fxt())}yzt(){for(const t of this.mjt)t.c_()}Mzt(){return Promise.all([this.Bzt(),this.Rzt(),this.Uzt()])}Szt(){this.Qzt(),this.Fzt(),this.Yzt()}async fzt(){this.Tjt&&this.mjt.length>0&&(this.mjt.forEach((t=>t.BOt())),await this.Bzt(),this.Qzt(),this.mjt.forEach((t=>t.IOt.sxt())))}Qzt(){if(this.Gzt)return;const t=()=>{this.Gzt=void 0};this.Vzt=new Po,this.Gzt=this.Wzt(this.Vzt.a_).catch(this.Ijt).then(t,t)}async Bzt(){var t;null==(t=this.Vzt)||t.c_();const i=this.Gzt;this.Gzt=void 0,i&&await i}async Wzt(i){Pi(i);const e=this.mjt;for(;;){const s=[],n=this.gP.j_;for(const t of e){const i=t.IOt,e=t.dAt(n);if(i.jkt)s.push(i.Bkt());else if(t.POt(n,e,this.vR.sW)){const n=i.KCt(e);if(void 0===n){if(i.FDt.SDt.IEt)continue;const t=i.FDt.SDt.pet;t.length&&t[0].zN>e&&(this.j_=1/0),i.hxt(),i.txt(e)}else{const[e,s]=n;i.hgt(e,s,t.Dkt),t.bOt.lOt(e,s)}s.push(i.Bkt())}}await hu((i=>{if(0===s.length){e.every((t=>t.IOt.XCt))||s.push(this.gP.D_(t.ov,i));for(const t of e)s.push(t.bOt.D_(Hu.$xt,i))}return hl(Promise.race(s),i)}),i)}}Fzt(){if(this.Hzt)return;const t=()=>{this.Hzt=void 0};this.qzt=new Po,this.Hzt=this.Xzt(this.qzt.a_).catch(this.Ijt).then(t,t)}async Rzt(){var t;null==(t=this.qzt)||t.c_();const i=this.Hzt;this.Hzt=void 0,i&&await i}async Xzt(t){Pi(t);const i=this.mjt;for(;;){const e=[];for(const t of i){const i=t.IOt,s=t.bOt;if(s.jkt)e.push(s.Bkt());else{const t=i.YCt();t?"Aht"===t.hA?(s.gOt(t),e.push(s.Bkt())):"MEt"===t.hA&&(s.dOt(t),e.push(s.Bkt())):e.push(i.nxt())}}if(0===e.length)break;await hl(Promise.race(e),t)}}Yzt(){if(this.Zzt)return;this.Kzt=new Po;const t=()=>{this.Zzt=void 0};this.Zzt=this.Jzt(this.Kzt.a_).catch(this.Ijt).then(t,t)}async Uzt(){var t;null==(t=this.Kzt)||t.c_();const i=this.Zzt;this.Zzt=void 0,i&&await i}async Jzt(t){for(;;){const i=this.mjt;i.forEach((t=>t.ngt()));const e=[],s=[],n=[];for(const t of i){const i=t.bOt;for(const r of t.DOt){const t=r.kkt?e:s;if(r.jkt)t.push(r.Bkt());else if(!r.Rkt(this.gP.j_)){const e=i.yOt(r.hA);e?"Aht"===e.hA&&e.DEt===this.wjt?(r.wAt(e),t.push(r.Bkt())):"TOt"===e.hA&&e.DEt===this.wjt&&(r.BK(e),t.push(r.Bkt())):n.push(i.MOt(r.hA))}}}if(0===e.length){const e=Nh(i,(t=>t.DOt.filter((t=>t.kkt)).map((i=>t.bOt.yOt(i.hA)))));if(e.length>0&&e.every((t=>void 0!==t&&"TOt"===t.hA&&t.DEt!==this.wjt))){const s=e,n=$_(s,(t=>t.DEt)).DEt;if(s.every((t=>t.DEt===n))){const i=Oo(s,(t=>t.zN)).zN,e=await this.$zt(s);this.tPt(e)?(p.vSt(bH,"Seamless switch from",this.MP.wd,"to",e),await this.MP.zH(e),p.vSt(bH,"Seamless switch complete.")):await this.iPt(i,e,t),this.wjt=s[0].DEt}else for(const t of i)for(const i of t.DOt){let e=t.bOt.yOt(i.hA);for(;e&&e.DEt!==n;)t.bOt.Qkt(e),e=t.bOt.yOt(i.hA)}continue}}if(0===e.length&&0===s.length&&0===n.length){i.every((t=>t.DOt.length>0&&t.DOt.every((t=>t.Rkt(this.gP.j_)))))&&this.MP.yJ();break}await hl(Promise.race([...e,...s,...n]),t)}}tPt(t){return this.Pjt===wo.JT||this.Pjt!==wo.$T&&this.MP.OH(t)}async $zt(t){const i=t.map((t=>t.NOt.Nst)),e=i.map((t=>({IP:t}))),s=Nh(t,(t=>t.NOt.AEt));s.push(...this.Cdt.Tr.LLt);let n=await rq(this.Nkt.contentProtection,i,s,this.dE,this.Nkt.useCredentials);return 0===n.length&&this.MP&&this.MP.wd.EP.length>0&&(n=this.MP.wd.EP),{hA:wt.LO,D$:e,EP:n,j$:this.Nkt.useManagedMediaSource}}async iPt(i,e,s){var n;const r=this.MP,h=r.ct,o=this.b_.length>0&&this.j_<i;if(o)try{for(p.vSt(bH,"Marking end of stream and waiting for ended to switch discontinuity."),r.yJ();!this.gP.R_&&this.gP.j_<i;)await this.gP.D_([t.ov,t.kA],s)}catch(t){throw r.lJ(),r.p$(h),t}p.vSt(bH,"Perform hard switch from",null==(n=this.MP)?void 0:n.wd,"to",e);try{this.gP.g3(),this.j_<i&&this.gP.Dp(i,!0,!0),this.v$=void 0,this.A$=void 0,this.zzt(),await this.gP.Zn(),this.MP=await this.gP.$n(e),this.M$(),this.wTt(),this.ATt(),this.MP.f$&&(this.v$=new fZ(iv.vp,this.MP.f$,this.kjt?this.Mft:void 0,this.Cjt?this.ejt:void 0)),this.MP.d$&&(this.A$=new fZ(iv.mp,this.MP.d$,this.kjt?this.Mft:void 0,this.Cjt?this.ejt:void 0)),this.zzt()}finally{o&&W(this.gP.Vg()),this.gP.w3()}if(this.hjt){const t=void 0!==this.A$&&void 0===this.jjt?[this.v$,this.A$]:[this.v$];this.hjt.COt(t)}this.jjt&&this.jjt.COt([this.A$]),p.vSt(bH,"Hard switch complete.")}Ezt(t){return hl(il(Nh(this.mjt,(t=>t.DOt.map((t=>t.Bkt()))))),t)}vdt(){const t=this.Lg,i=this.Sg;this.kft===t&&this.Cft===i||(this.kft=t,this.Cft=i,this.Co(new Ry))}async gn(){p.$y(pe,"Unloading the player."),this.ePt(),this.fft(),await this.Zn(),this.gP.FP=void 0,this.rzt.gn(),await this.PP.gn(),await this.Mft.gn(),await this.ejt.gn(),this.nN.gn(),this.hN.gn(),this.Dl.gn(),this.sPt.gn(),this.Oft.e_(),this.Zkt.e_(),this.LOt&&(this.LOt.e_(),this.LOt=void 0)}async Zn(){p.$y(pe,"Resetting the player."),this.fn(Au.NDt,this.handleBufferingErrorEvent),this.wjt=-1,this.wE.c_(),this.wE=new Po,this.h2.c_(),this.h2=new Po,this.mzt.c_(),this.mzt=new Po;const t=[this.avt,this.o2,this.Sjt].filter(j_);await Promise.all(t.map((t=>t.catch(xs)))),this.avt=void 0,this.o2=void 0,this.Sjt=void 0,this._jt=void 0,this.gjt=void 0,this.vjt=void 0,this.Hjt=void 0,this.bjt=void 0,this.Ejt=void 0,this.Zjt=void 0,this.vzt=[],this.Vjt(void 0),this.yzt(),await this.Mzt(),this.jjt&&(this.jjt.e_(),this.jjt=void 0),this.hjt&&(this.hjt.e_(),this.hjt=void 0),this.izt&&(this.izt.e_(),this.izt=void 0),this.A$=void 0,this.v$=void 0,this.MP=void 0,this.Cdt&&(this.Cdt.e_(),this.Cdt=void 0),this.Rjt&&(this.Dl.oP(this.Rjt.nt),this.Rjt=void 0),await this.PP.Zn(),await this.Mft.Zn(),await this.ejt.Zn(),this.gP.BP(),await this.gP.Zn(),this.Nkt=void 0,this.Tjt=!1,this.T$=Ki.aR(),this.pjt=void 0,this.Lft=void 0,this.kft=0,this.Cft=0,this.Mjt=void 0,this.Edt=!1,this.V4=!1,ag.__(this.Njt),this.rdt=!1,this.nPt=!1,this.Klt=0,this.Pjt=wo.HT,this.sPt.Zn(),this.rPt(),this.Co(new Fv(this.j_,this.vg))}rPt(){for(const t of this.nN.xw)t.gn();for(const t of this.hN.xw)t.gn();for(const t of this.Dl.xw)t.gn();this.nN.Zn(),this.hN.Zn(),this.Dl.Zn(),this.hzt.clear()}hPt(){this.sPt.yn(wZ,this.Ds),this.sPt.yn(qo.Tv,this.qP),this.sPt.yn(qo.Mv,this.oPt),this.sPt.yn(qo.vv,this.aPt),this.vR.yn("WV",this.mTt),this.vR.yn("ZV",this.pTt),this.gP.yn(AZ,this.Ds),this.gP.yn(t.NA,this.handleContentProtectionErrorEvent),this.gP.yn(t.EA,this.uPt),this.gP.yn(t.kA,this.Mh),this.gP.yn(t.Sh,this.cPt),this.gP.yn(t.jh,this.lPt),this.gP.yn(t.VA,this.dPt),this.gP.yn(qo.Mw,this.HO),this.gP.yn(t.ov,this.S1),this.gP.yn(t.ZA,this.We),this.gP.yn(t.XA,this.WP),this.gP.yn(t.qA,this.fPt),this.gP.yn(t.uv,this._Pt)}ePt(){this.sPt.fn(wZ,this.Ds),this.sPt.fn(qo.Tv,this.qP),this.sPt.fn(qo.Mv,this.oPt),this.sPt.fn(qo.vv,this.aPt),this.vR.fn("WV",this.mTt),this.vR.fn("ZV",this.pTt),this.gP.fn(AZ,this.Ds),this.gP.fn(t.NA,this.handleContentProtectionErrorEvent),this.gP.fn(t.EA,this.uPt),this.gP.fn(t.kA,this.Mh),this.gP.fn(t.Sh,this.cPt),this.gP.fn(t.jh,this.lPt),this.gP.fn(t.VA,this.dPt),this.gP.fn(qo.Mw,this.HO),this.gP.fn(t.ov,this.S1),this.gP.fn(t.ZA,this.We),this.gP.fn(t.XA,this.WP),this.gP.fn(t.qA,this.fPt),this.gP.fn(t.uv,this._Pt)}constructor(t,i,e,s,n,r,h){super(),this.vR=e,this.Zkt=s,this.Ujt=n,this.hzt=Ye(),this.Cjt=!0,this.kjt=!0,this.Tjt=!1,this.Nkt=void 0,this.MP=void 0,this.avt=void 0,this.wE=new Po,this.Cdt=void 0,this.bjt=void 0,this.Ejt=void 0,this.Zjt=void 0,this.ajt=void 0,this._jt=void 0,this.gjt=void 0,this.vjt=void 0,this.Hjt=void 0,this.vzt=[],this.A$=void 0,this.v$=void 0,this.jjt=void 0,this.hjt=void 0,this.izt=void 0,this.LOt=void 0,this.mzt=new Po,this.Sjt=void 0,this.h2=new Po,this.o2=void 0,this.wjt=-1,this.Vzt=void 0,this.qzt=void 0,this.Kzt=void 0,this.Gzt=void 0,this.Hzt=void 0,this.Zzt=void 0,this.vat=!0,this.ozt=0,this.$jt=!1,this.yP=ii.MB,this.vP=void 0,this.mP=void 0,this.T$=Ki.aR(),this.gPt=[],this.pjt=void 0,this.yjt=!1,this.Edt=!1,this.V4=!1,this.Lft=void 0,this.kft=0,this.Cft=0,this.Mjt=void 0,this.Njt=0,this.rdt=!1,this.nPt=!1,this.Pjt=wo.HT,this.dzt=void 0,this.wPt=void 0,this.NP=new Mu,this.Klt=0,this.handleContentProtectionErrorEvent=t=>{this.vP=ne(t.errorObject),this.mP=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.hB(new ce(le.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.uPt=()=>{this.sLt();const t=this.ct;t!==this.Lft&&(this.Lft=t,this.Co(new Mn(this.Lft)))},this.Mh=()=>{this.R_&&this.Co(new ys(this.j_))},this.cPt=()=>{this.Co(new ws(this.j_))},this.lPt=()=>{this.flt(),this.Co(new vh(this.j_))},this.qP=()=>{void 0!==this.wPt&&ag.__(this.wPt),this.Co(new Hr(this.j_))},this.dPt=()=>{this.Co(new N(this.j_))},this.HO=()=>{this.Co(new ds(this.j_,this.vg))},this.S1=()=>{const t=this.WDt;zo(this.gPt,t)||(this.Co(new AX),this.gPt=t),this.Co(new Tc(this.j_,this.k_))},this.Lzt=oo((t=>{t.rE===iv.vp&&this.rjt()&&W(this.ojt())}),200),this.kzt=t=>{var i;this.Klt+=t.jCt,"Aht"===t.OCt&&t.rE===iv.vp&&W(this.uzt()),this.Co(new lG(function(t){if(t){if(void 0!==t.Yht){var i,e;const s=t.Yht.Cn+(null!=(e=t.Yht.U)?e:0);return{zu:t.IT,hst:[null==(i=t.Yht)?void 0:i.Cn,s],hE:!0}}return{zu:t.IT.toString()||"",hE:!0}}return{zu:"",hE:!0}}(t.uri),(null==(i=this.YDt)?void 0:i.Xz)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.rE,t.httpStatusCode,t.jCt))},this.We=()=>{this.Co(new Ot(this.j_))},this.WP=()=>{this.Co(new $s(this.j_))},this.fPt=()=>{this.vdt()},this._Pt=()=>{this.Co(new Ve(this.j_,this.xg))},this.oPt=()=>{this.gP.Tg?this.Co(new wc(this.j_)):(null!=this.wPt||(this.wPt=ag.g_((()=>{this.nPt&&(this.dzt=void 0,W(this.cjt()))}),2500)),this.flt(),this.Co(new wc(this.j_)))},this.aPt=()=>{this.nPt=!0,this.Co(new Ct(this.j_,this.vg))},this.Ijt=t=>{Oi(t)||Xt(t)||Ya(t)||(this.yzt(),W(this.Mzt()),this.Co(new RH(t)))},this.Tkt=()=>{this.sLt()},this.Bjt=t=>{W(this.Azt(t.FDt))},this.ylt=t=>{if(Oi(t))return;const i=t instanceof ce?t:new ce(le.MEDIA_DECODE_ERROR,t.message,t);this.hB(i)},this.onTextTrackChange=t=>{if(!this.ajt)return;const i=t.Lt,e=H_(this.ajt.UEt,(t=>i===this.hzt.get(t.Vw)));e&&(i.eA===Ht.sA||i.eA===Ht.Xn?(W(this.wzt(e)),this.hzt.forEach((t=>{t!==i&&(t.eA=Ht.Ch)}))):this.vjt&&this.vjt===e&&W(this.zjt(this._jt,this.gjt,void 0)))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.Ajt!==t&&this.sSt!==t&&this.rSt!==t||(await this.Cdt.ukt(t,i),t.SDt.Vbt=-1/0)},this.mTt=()=>{this.wTt()},this.pTt=()=>{this.ATt()},this.Czt=t=>{const i=this.ajt;if(!(null==i?void 0:i.zEt)&&(this.Cdt.ykt(t.Nst,t.FDt.SDt),this.Yjt.SSt(),i)){const t=void 0!==this._jt&&!na(i.MSt,this._jt),e=void 0!==this.gjt&&!na(i.TSt,this.gjt);(t||e)&&this.zjt(t?void 0:this._jt,e?void 0:this.gjt,this.vjt).catch(xs)}},this.xzt=t=>{this.Yjt.bSt(t.FDt,t.Est)},this.Ozt=t=>{this.Yjt.kSt(t.FDt,t.eOt.cD())},this.jzt=t=>{this.Cdt.mkt(t.FDt)},this.Ict=new EY(r),this.gP=t,this.dE=i,this.SP=new BH(this.vR.zV),this._zt=new UH(this.gP),this.czt=new KH(this.vR),this.Mct=h.retryConfiguration,this.nN=new Tn,this.hN=new Tn,this.Yjt=new LH(this,this.vR,this.nN,this.hN),this.rzt=new sn,this.PP=new Cu(this.gP,this.dE),this.Mft=new SY(this.gP),this.ejt=new cW(this.gP),this.Dl=new fh([this.rzt,this.PP.Z,this.Mft.Z,this.ejt.Z]),this.CP=new lu(this.dE),this.gP.FP=this.CP,this.Oft=new yZ(this,this.gP),this.sPt=new Su(this.Oft,!0),this.hPt()}},pZ=class{async aB(t,i){if(!Fa(t.type))return!1;if(t.useNativePlayback)return!1;const e=t.contentProtection;if(e&&!av(e)){if(!Ps(e))return!1;if(!await this.Jit(e))return!1}return!0}async Jit(t){return!!t.aes128||(!(!t.playready||!await ag.Ix())||(!(!t.widevine||!await ag.Nx())||(!(!t.clearkey||!await ag.Sx())||!t.fairplay&&await ag.xx())))}},yZ=class extends hD{get vg(){return this.Qo.vg}Pft(){this.Co(new ds(this.j_,this.vg))}constructor(t,i){super(i),this.Qo=t}};function MZ(t){const i=H_(t,(t=>t.IDt)),e=t.filter((t=>t.EDt)),s=ag.Dtt,n=e.map((t=>t.gs)).filter(j_),r=sZ(n,s);return r?H_(e,(t=>t.gs===r)):i}function TZ(t,i){for(const e of i){const i=t.filter((t=>t.Nst&&t.Nst.aSt&&Ut(t.Nst.aSt,e)));if(0!==i.length)return i}}function NZ(t){var i;return null!=(i=MZ(t))?i:t[0]}function DZ(t,i){return t.filter((t=>SZ(t,i)))}function SZ(t,i){const e=i+vZ;return 0===t.TSt.length||t.TSt.some((t=>t.SDt.Vbt<ag.f_()-e))}function IZ(t,i){if(!i||i.SDt.IEt)return!1;const e=i.SDt.pet;return 0!==e.length&&e[0].zN>t}r(),r();var EZ=class{async qkt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new T(n)}catch(t){throw new ce(le.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}e_(){}static Px(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}};r(),r(),r(),r();var ih=class extends gg{constructor(t,i){super(t),this.data=i}},bZ=["message","messageerror","error"];r();var yr=class extends gg{constructor(t){super(Bi.ha),this.error=t}},LZ=class extends i{get APt(){return this.vPt.a_.$f}mPt(t,i){this.APt||(void 0!==this.pPt?this.pPt.mPt(t,i):this.yPt.push({pL:t,MPt:i}))}TPt(){this.APt||(this.vPt.c_(),Ri(this.yPt),void 0!==this.pPt&&this.pPt.TPt())}constructor(t){super(),this.pPt=void 0,this.yPt=[],this.NPt=t=>{if(this.APt)t.TPt();else{this.pPt=t,this.pPt.yn(bZ,this.Ds);for(const i of this.yPt)t.mPt(i.pL,i.MPt);Ri(this.yPt)}},this.DPt=t=>{if(this.APt)return;const i=t instanceof b?t:new b("Could not create Worker.");this.Co(new yr(i)),this.TPt()},this.vPt=new Po,t(this.vPt.a_).then(this.NPt,this.DPt)}};r(),r();var kZ=class extends i{mPt(t,i){i?this.pPt.postMessage(t,i):this.pPt.postMessage(t)}TPt(){this.Vo(),this.pPt.removeEventListener("message",this.SPt),this.pPt.removeEventListener("messageerror",this.IPt),this.pPt.removeEventListener("error",this.o3),this.pPt.terminate()}constructor(t,i){super(),this.SPt=t=>{this.Co(new ih("message",t.data))},this.IPt=t=>{this.Co(new ih("messageerror",t.data))},this.o3=t=>{null==t.preventDefault||t.preventDefault();const i=t.error instanceof b?t.error:new b(t.message);this.Co(new yr(i)),this.TPt()},this.pPt=new rd(t,i),this.pPt.addEventListener("message",this.SPt),this.pPt.addEventListener("messageerror",this.IPt),this.pPt.addEventListener("error",this.o3)}};r();var CZ=0,xZ=class extends i{mPt(t,i){i?this.EPt.contentWindow.postMessage({type:"message",data:t},"*",i):this.EPt.contentWindow.postMessage({type:"message",data:t},"*")}TPt(){var t;this.EPt.removeEventListener("load",this.bPt),self.removeEventListener("message",this.LPt),null==(t=this.EPt.contentWindow)||t.postMessage({type:"terminate"},"*"),ei(this.EPt)}constructor(t,i){super(),this.bPt=()=>{this.EPt.removeEventListener("load",this.bPt),this.EPt.contentWindow.postMessage({type:"initialize",id:this.NN,script:this.kPt},"*")},this.LPt=t=>{t.origin===this.CPt&&t.data.id===this.NN&&("initialized"===t.data.type||("error"===t.data.type?(this.Co(new yr(new b(t.data.data.message))),this.TPt()):this.Co(new ih("message",t.data.data))))},this.NN=CZ++,this.kPt=t;const e=ag.Dh("iframe.html",i);this.EPt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.src=t,h.body.appendChild(i),i}(e.href),this.CPt=e.origin,this.EPt.addEventListener("load",this.bPt),self.addEventListener("message",this.LPt)}};function OZ(t,i,e){const s=ag.zv(t,i);return new LZ((t=>async function(t,i,e,s){let n;try{return n=new kZ(t,e),await BZ(n,s),n}catch(t){null==n||n.TPt(),yo(t)}if(PZ&&pB){let i;try{const e=await ag.KO.mI({zu:t,iE:Kc.GET,eE:nr.Ru,a_:s});i=await e.fE(s)}catch(t){yo(t)}if(i){let t;try{const r=pB([i],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new kZ(t,e),await BZ(n,s),n}catch(t){null==n||n.TPt(),yo(t),PZ=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new xZ(t,i),await BZ(n,s),n}catch(t){throw null==n||n.TPt(),t}}(s,i,e,t)))}var jZ,zZ,PZ=!0;async function BZ(t,i){const e=await t.D_(["message","error"],i);if("error"===e.type)throw function(t){return new ce(le.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return ui(t)&&"6.10.1"===t.xPt}(e.data))throw new ce(le.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (6.10.1).");return e}r(),function(t){t.OPt="qkt",t.jPt="mCt"}(jZ||(jZ={})),function(t){t.zPt="PPt",t.BPt="RPt"}(zZ||(zZ={}));var RZ=class{UPt(){const t=OZ(this.QPt,this.FPt,{name:"THEOplayer decrypt worker"});return t.yn("message",this.YPt),t.yn("error",this.Vtt),t}qkt(t,i,e){const s=""+ ++this.GPt,n={VPt:jZ.OPt,WPt:s,HPt:t,qPt:i,XPt:e},r=new No;return this.ZPt.set(s,r),null!=this.pPt||(this.pPt=this.UPt()),this.pPt.mPt(n),r.OL}e_(t){void 0===t&&(t=new sa),this.ZPt.forEach((i=>i.xL(t))),this.ZPt.clear(),this.pPt&&(this.pPt.TPt(),this.pPt=void 0)}constructor(t){this.pPt=void 0,this.GPt=0,this.ZPt=Qt(),this.YPt=t=>{const i=t.data,e=i.KPt,s=this.ZPt.get(e);s&&(this.ZPt.delete(e),i.JPt===zZ.zPt?s.CL(i.$Pt):i.JPt===zZ.BPt&&s.xL(new ce(le.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")))},this.Vtt=t=>{const i=new ce(le.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.e_(i)},this.FPt=t;try{this.QPt=ag.zv("theoplayer.d.js",t)}catch(t){throw new ce(le.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function UZ(t){return EZ.Px()?new EZ:new RZ(t)}function QZ(t){const i=H_(t.boxes,LL);if(!i)return;const e=H_(i.boxes,kL);return e?e.handlerType:void 0}function FZ(t){const i=new iN;return i.boxes.push(...t.boxes),i}function YZ(t){const i=new MT;return i.boxes.push(...t.boxes),i}r(),r(),r(),r();var GZ=8;function VZ(t,i){const e=function(t){const i=new ze;return i.boxes.push(...t.boxes),i}(t),s=HZ(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new ZM(new T(i.getSize()-GZ));else if(CL(n)){const i=n,r=Z_(i.boxes,(t=>t instanceof pT&&t.trackId===s));if(r>=0){const s=i.boxes[r],n=YZ(i);n.boxes[r]=new ZM(new T(s.getSize()-GZ)),e.boxes[t]=n}}}return e}function WZ(t,i){const e=function(t){const i=new RT;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(jL(s)){const n=H_(s.boxes,zL);n&&n.trackId===i&&(e.boxes[t]=new ZM(new T(s.getSize()-GZ)))}}return e}function HZ(t){return H_(t.boxes,bL).trackId}function qZ(t,i,e,s){const n=H_(t.boxes,zL),r=e.aS(i).UD();let h=Se.ZERO;for(const i of t.boxes){if(i instanceof ru){h=gA(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(h);break}if(i instanceof cu){h=gA(Se.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=h.toNumber();break}}if(h.isZero())return;const o=H_(t.boxes,PL);if(void 0!==o&&o.samples.length>0){const t=o.samples;if(!o.flags.sampleDurationPresent){o.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=h.toNumber(),o.samples=t}}r();var XZ="Mp4Transmuxer",ZZ=class extends ec{_Ot(t,i){Pi(i);const e=t.FDt,s=ok(Ao(t.MEt.Cp.Cp));if(!s)throw new b("Mp4Transmuxer - Unable to parse "+e.hA+" MP4 initializer.");this.QK=s;const n=function(t){let i,e;for(const s of t.Z)i||(i=s.BZ),e||(e=s.PZ);if(i||e)return{aSt:i,uSt:e,LIt:void 0};return}(s);n&&this.AOt(e,n);const r=function(t){for(const i of t.Z)if(void 0!==i.RZ)return i.RZ;return}(s);void 0!==r&&this.vOt(e,r);const h=function(t){var i;const e=oN(t),s=H_(e.boxes,IL),n=s.boxes.filter(EL),r=H_(n,(t=>QZ(t)===hT.AUDIO)),h=H_(n,(t=>QZ(t)===hT.VIDEO)),o={aSt:{Wy:r?HZ(r):void 0},uSt:{Wy:h?HZ(h):void 0}},a=null==(i=H_(s.boxes,CL))?void 0:i.boxes.filter(xL);var u,c;const l=a?{aSt:null!=(u=H_(a,(t=>t.trackId===o.aSt.Wy)))?u:void 0,uSt:null!=(c=H_(a,(t=>t.trackId===o.uSt.Wy)))?c:void 0}:void 0;var d,f;if(l&&(o.aSt.oT=null==(d=l.aSt)?void 0:d.defaultSampleDuration,o.uSt.oT=null==(f=l.uSt)?void 0:f.defaultSampleDuration),!r||!h)return{aSt:r?t:void 0,uSt:h?t:void 0,FS:o};const _=FZ(e),g=FZ(e),w=e.boxes.indexOf(s);_.boxes[w]=VZ(s,h),g.boxes[w]=VZ(s,r);const A=_.serialize().join(),v=g.serialize().join();return{aSt:A,uSt:v,FS:o}}(t.MEt.Cp.Cp);if(this.tBt=h.FS,h.uSt){const i=H_(s.Z,(t=>t.Wy===h.FS.uSt.Wy)),e={hA:"TOt",Cp:{hA:at.bH,Cp:h.uSt},uut:iv.vp,DEt:t.DEt,NOt:{Nst:'video/mp4; codecs="'+i.PZ+'"',AEt:t.AEt},zN:t.zN,FDt:t.FDt,Gkt:t.MEt.Gkt};this.zxt(e)}if(h.aSt){const i=H_(s.Z,(t=>t.Wy===h.FS.aSt.Wy)),e={hA:"TOt",Cp:{hA:at.bH,Cp:h.aSt},uut:iv.mp,DEt:t.DEt,NOt:{Nst:'audio/mp4; codecs="'+i.BZ+'"',AEt:t.AEt},zN:t.zN,FDt:t.FDt,Gkt:t.MEt.Gkt};this.zxt(e)}return Promise.resolve()}async wOt(t,i){Pi(i);const e=t.Aht.Gkt;p.$y(XZ,"Transmuxing fMP4: "+Nt(e.Cnt));const s=t.Aht.Cp,n=KZ(s.Cp,this.QK),r=kh(n.map((t=>t.m8)),Pm);if(void 0!==r&&(e.p8=r,this.pOt(t.FDt)),!this.xLt.dLt(t.DEt)){const s=aa.dS(e.zN);if(n.length>0){const i=kh(n.map((t=>t.iBt)),Pm);for(const e of this.oOt)this.xLt.MLt(t.DEt,e,i,s,!1);this.pOt(t.FDt)}this.xLt.dLt(t.DEt)||await hl(this.xLt._Lt(t.DEt),i)}const h=this.xLt.vLt(t.DEt),o=e.p8?this.xLt.mLt(e.p8,e).cD():e.zN,a=GX(e,o);var u;const c={qxt:a,Xxt:VX(e,a),zN:o,ct:null!=(u=e.ct)?u:0,CS:h.cD(),DEt:t.DEt,FDt:t.FDt,Gkt:t.Aht.Gkt},l=function(t,i){if(void 0===i.aSt.Wy)return{aSt:void 0,uSt:t};if(void 0===i.uSt.Wy)return{aSt:t,uSt:void 0};const e=oN(t),s=FZ(e),n=FZ(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];OL(r)&&(s.boxes[t]=WZ(r,i.uSt.Wy),n.boxes[t]=WZ(r,i.aSt.Wy))}const r=s.serialize().join(),h=n.serialize().join();return{aSt:r,uSt:h}}(s.Cp,this.tBt);if(l.uSt){var d;const i=this.tBt.uSt.Wy,s=H_(this.QK.Z,(t=>t.Wy===i)),h=H_(n,(t=>t.Wy===i)),o=this.eBt(l.uSt,s,h,null==(d=this.tBt)?void 0:d.uSt.oT,e);this.sBt=s,this.mOt(t.FDt,e,h.m8.MD(r));const a=oe({hA:"Aht",Cp:{hA:at.bH,Cp:o},uut:iv.vp},c);this.zxt(a)}if(l.aSt){const t=oe({hA:"Aht",Cp:{hA:at.bH,Cp:l.aSt},uut:iv.mp},c);this.zxt(t)}this.nBt=e,this.rBt=n}eBt(t,i,e,s,n){if(!function(t){return hr(t)?t.yEt:0===t.tbt&&t.JEt.yEt}(n))return t;if(!this.nBt||!this.sBt||!this.rBt)return t;const r=this.sBt.Wy,h=H_(this.rBt,(t=>t.Wy===r)),o=this.xLt.mLt(h.hBt,this.nBt),a=this.xLt.mLt(e.m8,n).MD(o).aS(i.zy);if(a.gD(aa.LD))return t;if(a.lD(aa.dS(.5)))return t;const u=hr(n)?n:n.JEt;return p.vSt(XZ,"Stretching first video frame of segment #"+u.sEt+" to fill gap of "+a.cD()+"s"),function(t,i,e,s){const n=oN(t),r=H_(n.boxes,OL);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof zs&&qZ(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof zs&&BL(t,i)}}return n.serialize().join()}(t,i.zy,a,s)}constructor(...t){super(...t),this.QK=void 0,this.tBt=void 0,this.nBt=void 0,this.rBt=void 0,this.sBt=void 0}};function KZ(t,i){const e=HA(Qi.wy(Ao(t)),At.ep);if(!e)throw new b("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.Z){if(!n.vT||0===n.AT.length||0===n.AT[0].NT.length)continue;const t=n.iy.Wy,r=H_(i.Z,(i=>i.Wy===t));let h=0,o=1/0,a=0;const u=n.iy.oT||0;for(const t of n.AT)for(const i of t.NT){const t=i.DT||0,e=h+t;var s;h+=null!=(s=i.ct)?s:u;const n=h+t;e<o&&(o=e),n>a&&(a=n)}const c=aa.SD(n.vT.vT,r.zy);e.push({Wy:t,iBt:c,m8:c.mN(aa.ED(o,r.zy)),oBt:c.mN(aa.ED(h,r.zy)),hBt:c.mN(aa.ED(a,r.zy))})}return e}(e,i)}var JZ,$Z="MpegtsTransmuxer",tK=class extends ZZ{_Ot(t,i){return super._Ot(t,i)}lOt(t,i){if(super.lOt(t,i),this.oit.aBt())return;var e;const s=null!=(e=null==i?void 0:i.Cnt)?e:t.Cnt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.IT)&&this.oit.uBt()}cBt(t){let i;return this.lBt.has(t.DEt)?i=this.lBt.get(t.DEt):(i=lZ(t.Aht.Cp.Cp),this.lBt.set(t.DEt,i)),i}async wOt(t,i){Pi(i);const e=this.cBt(t),s=t.Aht;if(e!==rZ.$Ot&&e!==rZ.tjt)return super.wOt(t,i);if(s.Gkt.AEt.some(eK))throw new ce(le.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.oit.uBt();let r;e===rZ.$Ot?(p.$y($Z,"Transmuxing MPEG-TS: "+Nt(s.Gkt.Cnt)),r=await n.dBt({data:s.Cp.Cp,metadata:this.fBt})):(p.$y($Z,"Transmuxing raw audio: "+Nt(s.Gkt.Cnt)),r=await n._Bt({data:s.Cp.Cp,metadata:this.fBt})),Pi(i),this.AOt(t.FDt,{aSt:r.metadata.audio_codec,uSt:r.metadata.video_codec,LIt:void 0}),r.metadata.video_frame_rate&&this.vOt(t.FDt,r.metadata.video_frame_rate);const h=sK(r.metadata.first_decode_timestamp),o=sK(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?sK(r.metadata.first_video_presentation_timestamp):void 0;if(s.Gkt.p8=o,this.pOt(t.FDt),void 0!==a&&this.mOt(t.FDt,s.Gkt,function(t,i){let e=t.MD(i);return e.vD(aa.LD)&&(e=e.mN(Ia())),e}(a,o)),!this.xLt.dLt(t.DEt)){const e=aa.dS(s.Gkt.zN);for(const i of this.oOt)this.xLt.MLt(t.DEt,i,h,e,!0);this.pOt(t.FDt),this.xLt.dLt(t.DEt)||await hl(this.xLt._Lt(t.DEt),i)}const u=this.xLt.yLt(h,s.Gkt);this.fBt=r.metadata;const c=this.xLt.mLt(o,s.Gkt).cD(),l=GX(s.Gkt,c);var d;const f={qxt:l,Xxt:VX(s.Gkt,l),zN:c,ct:null!=(d=s.Gkt.ct)?d:0,CS:u.cD(),DEt:t.DEt,FDt:t.FDt,Gkt:s.Gkt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.oOt){const i=oe({hA:"Aht",Cp:void 0,uut:t},f);this.zxt(i)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.gBt||this.wBt!==t.DEt||!Xi(this.gBt,r.data.audio_init))){const i=this.xLt.mLt(s.Gkt.p8,s.Gkt).cD(),e={hA:"TOt",Cp:{hA:at.bH,Cp:r.data.audio_init},uut:iv.mp,DEt:t.DEt,NOt:{Nst:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',AEt:s.Gkt.AEt},zN:i,FDt:t.FDt,Gkt:s.Gkt};this.gBt=r.data.audio_init,this.wBt=t.DEt,this.zxt(e)}const i=oe({hA:"Aht",Cp:{hA:at.bH,Cp:r.data.audio_media},uut:iv.mp},f);this.zxt(i)}else if(t.Aht.Gkt.ZEt&&na(this.oOt,iv.mp)){const t=oe({hA:"Aht",Cp:void 0,uut:iv.mp},f);this.zxt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.ABt||this.vBt!==t.DEt||!Xi(this.ABt,r.data.video_init))){const i=this.xLt.mLt(s.Gkt.p8,s.Gkt).cD(),e={hA:"TOt",Cp:{hA:at.bH,Cp:r.data.video_init},uut:iv.vp,DEt:t.DEt,NOt:{Nst:'video/mp4; codecs="'+r.metadata.video_codec+'"',AEt:s.Gkt.AEt},zN:i,FDt:t.FDt,Gkt:s.Gkt};this.ABt=r.data.video_init,this.vBt=t.DEt,this.mBt=ok(Ao(r.data.video_init)),this.zxt(e)}const i=this.mBt.Z[0],e=KZ(r.data.video_media,this.mBt)[0],n=this.eBt(r.data.video_media,i,e,void 0,s.Gkt);this.sBt=i;const h=oe({hA:"Aht",Cp:{hA:at.bH,Cp:n},uut:iv.vp},f);this.zxt(h),_.push(e)}else if(t.Aht.Gkt.ZEt&&na(this.oOt,iv.vp)){const t=oe({hA:"Aht",Cp:void 0,uut:iv.vp},f);this.zxt(t)}this.nBt=s.Gkt,this.rBt=_}c_(){this.gBt=void 0,this.ABt=void 0,super.c_()}constructor(t,i,e,s){super(i,e,s),this.fBt=void 0,this.gBt=void 0,this.ABt=void 0,this.mBt=void 0,this.wBt=0,this.vBt=0,this.lBt=Ye(),this.oit=t}},iK=class{jct(t,i,e){return new tK(this,t,i,e)}};function eK(t){return t.iE===da.CIt}function sK(t){return aa.SD(Se.fromBits(t.low,t.high),t.base)}r(),r(),function(t){t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4"}(JZ||(JZ={}));var nK=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=li.fb;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(mi("AGFzbQEAAAA="))}catch(t){return!1}}();return nK=()=>t,t};var rK=class{dBt(t){return this.pBt(JZ.MPEGTS_TO_FMP4,t)}_Bt(t){return this.pBt(JZ.RAW_AUDIO_TO_FMP4,t)}UPt(){const t=OZ(this.QPt,this.FPt,{name:"THEOplayer transmux worker"});return t.yn("message",this.YPt),t.yn("error",this.Vtt),t}pBt(t,i){const e=++this.GPt,s={type:t,id:e,input:i},n=new No;return this.ZPt.set(e,n),this.pPt.mPt(s),n.OL}e_(t){void 0===t&&(t=new sa),this.ZPt.forEach((i=>i.xL(t))),this.ZPt.clear(),this.pPt.TPt()}constructor(t){this.GPt=0,this.ZPt=Ye(),this.YPt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this.ZPt.get(i.requestId);if(!t)return;this.ZPt.delete(i.requestId),i.success?t.CL(i.output):t.xL(new ce(i.errorCode,i.error))}else i.success||this.e_(new ce(i.errorCode,i.error))},this.Vtt=t=>{const i=new ce(le.MEDIA_DECODE_ERROR,t.error.message,t.error);this.e_(i)},this.FPt=t;const i=nK()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.QPt=ag.zv(i,t)}catch(t){throw new ce(le.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.pPt=this.UPt()}},hK=class extends iK{aBt(){return void 0!==this.pPt}uBt(){var t;return null!=(t=this.pPt)?t:this.pPt=new rK(this.yBt)}e_(){this.pPt&&(this.pPt.e_(),this.pPt=void 0)}constructor(t){super(),this.yBt=t,this.pPt=void 0}},oK=class{M8(){return new hK(this.yBt)}constructor(t){this.yBt=t}},aK=class extends mZ{Ug(){if(DU(this.gP))return this.gP.Ug()}get Bg(){return!1}set Bg(t){}async gn(){var t;await super.gn(),null==(t=this.sNt)||t.gn()}constructor(t,i,e,s,n,r,h){super(t,i,e,s,n,r,h),li.Rb&&(this.sNt=new XW(this))}},uK=class extends aK{async gn(){await super.gn(),await this.GP.YP(this.gP)}constructor(t,i,e,s,n,r,h){const o=new Oc(t);super(o.oB(iv.vp),i,e,s,n,r,h),this.GP=o}},cK=class extends pZ{async aB(t,i){return!!bk(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(li.Ga||li.nL))&&(!i.manifestMetadataTrack&&super.aB(t,i)))}async Jit(t){return(!t.clearkey||!li.Rb)&&super.Jit(t)}};bu(new class extends cK{_m(t,i,e,s,n,r){return new uK(i,e,n,UZ(s.libraryLocation),new oK(s.libraryLocation),new St(ti.dL.yet,ti.dL.met,ti.dL.pet,ti.dL.Tet),s)}uB(){return!0}constructor(...t){super(...t),this.cB=Kt.Fv}}),p.Rt=()=>Boolean(null==s?void 0:s.THEOplayerDebugLogsEnabled),r(),r(),r(),r();var lK=class{eet(t,i){return Promise.resolve(!1)}ret(t,i){return Promise.resolve(void 0)}$it(t){return Promise.resolve(void 0)}iH(t){return Promise.resolve(void 0)}},dK=class extends i{MBt(){var t;return null==(t=this.TBt)?void 0:t.SDt}Cn(t){W(mu((()=>this.NBt(t)),t))}async NBt(t){await this.Cdt.ikt(t),this.DBt&&(this.SBt(this.DBt.ji,this.DBt.Ti),this.DBt=void 0),this.U1=!0}IBt(t,i){this.U1?this.SBt(t,i):this.DBt={ji:t,Ti:i}}SBt(t,i){const e=this.EBt(t,i),s=null==e?void 0:e.TSt[0];s!==this.TBt&&(this.bBt(),void 0!==s&&(this.TBt=s,this.LBt=new uh(this.Cdt,s),this.LBt.rCt()))}bBt(){this.TBt=void 0,this.LBt&&(this.LBt.e_(),this.LBt=void 0)}EBt(t,i){const e=H_(this.Cdt.Tr.ySt,(e=>void 0!==e.dSt&&e.dSt.ji===t&&e.dSt.Ti===i));return null!=e?e:this.Cdt.Tr.ySt[0]}gn(){this.Vo(),this.bBt(),this.Cdt.e_()}constructor(i,e,s){super(),this.TBt=void 0,this.LBt=void 0,this.DBt=void 0,this.kBt=()=>{this.Co(new tF)},this.bc=i,this.Cdt=new lX(s,new lK,i.useCredentials,i.src),this.Cdt.yn(t.QA,this.Ds),this.U1=!1}};r();var fK=class extends ha{get ht(){return this.M4.ht}get b_(){return this.M4.b_}get k_(){return this.M4.k_}set k_(t){this.M4.k_=t}get j_(){return this.M4.j_}set j_(t){this.M4.j_=t}get ct(){return this.M4.ct}get R_(){return this.M4.R_}get F_(){return this.M4.F_}get G_(){return this.M4.G_}get lt(){return this.M4.lt}get W_(){return this.M4.W_}get q_(){return this.M4.q_}get Z_(){return this.M4.Z_}set Z_(t){this.M4.Z_=t}get eg(){return this.M4.eg}get hg(){return this.M4.hg}get ag(){return this.M4.ag}set ag(t){this.M4.ag=t}get fg(){return this.M4.fg}get gg(){return this.M4.gg}set gg(t){this.M4.gg=t}get vg(){return this.M4.vg}get yg(){return this.M4.yg}get Tg(){return this.M4.Tg}get TP(){return this.M4.TP}get nt(){return this.M4.nt}get Sg(){return this.M4.Sg}get rt(){return this.M4.rt}get Lg(){return this.M4.Lg}get xg(){return this.M4.xg}set xg(t){this.M4.xg=t}get zg(){return this.M4.zg}get Bg(){return this.M4.Bg}set Bg(t){this.M4.Bg=t}get DP(){return this.M4.DP}Hg(){return this.M4.Hg()}Rg(){return this.M4.Rg()}Ug(){return this.M4.Ug()}be(){return this.M4.be()}Zg(){return this.M4.Zg()}Kg(){return this.M4.Kg()}Gg(){return this.M4.Gg()}Vg(){return this.M4.Vg()}Zn(){return this.M4.Zn()}ga(t,i,e){return this.M4.ga(t,i,e)}ge(){return this.M4.ge()}qg(){return this.M4.qg()}Xg(){return this.M4.Xg()}gn(){this.Vo();for(const t of BS)this.M4.fn(t,this.Ds);return this.M4.gn()}constructor(t){super(),this.M4=t;for(const t of BS)this.M4.yn(t,this.Ds)}},_K=class extends fK{async ga(t,i,e){await super.ga(t,i,e),t.hlsDateRange&&this.Int(t,i,e)}Int(i,e,s){this.CBt=new dK(i,e,this.xBt),this.CBt.yn(t.QA,this.handleManifestUpdate),this.CBt.Cn(s)}Zn(){return this.Mkt&&(this.nt.it(this.Mkt),this.N2.it(this.Mkt),this.Mkt.gn(),this.Mkt=void 0,this.OBt=!1),this.CBt&&(this.CBt.gn(),this.CBt=void 0),this.N2.Zn(),super.Zn()}gn(){return this.fn(t.qA,this.fPt),this.CBt&&(this.CBt.gn(),this.CBt=void 0),this.N2.gn(),super.gn()}constructor(i,e,s){super(i),this.CBt=void 0,this.OBt=!1,this.Mkt=void 0,this.handleManifestUpdate=()=>{const t=this.CBt.MBt();if(t){const i=this.TP;if(i){const e=i.getTime();let s=this.Mkt;s||(s=new Fq,this.Mkt=s),s.Qn(t.SEt,(t=>(t.getTime()-e)/1e3)),!this.OBt&&s.L.U>0&&(this.nt.tt(s),this.N2.tt(s),this.OBt=!0)}}},this.fPt=()=>{this.CBt&&this.CBt.IBt(this.Lg,this.Sg)},this.xBt=e,this.$W=s,this.N2=new hx(this),this.yn(t.qA,this.fPt)}};!function(t){Iu.lB().dB(t)}((function(t,i,e){return new _K(t,i,e)})),r(),r(),r(),r();var gK,Ca=class extends Jo{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=t,this.description=i}},wK="//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js";function AK(){return gK||(gK=async function(){mK()||await async function(){const t=new No,i=s.__onGCastApiAvailable;return s.__onGCastApiAvailable=(e,n)=>{e?t.CL():t.xL(new b(n)),s.__onGCastApiAvailable=i,i&&i(e,n)},t.OL}();vK()||await be(100);vK()||(ag.Pv('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await function(t){return new Promise(((i,e)=>{const s=h.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}(wK));return}().catch((()=>{throw new Ca("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))),gK}function vK(){return Boolean("undefined"!=typeof cast&&cast.framework)}function mK(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function pK(t,i,e,s){if(j_(i))for(const e of _.keys(i)){if("type"===e||"images"===e)continue;const s=i[e];j_(s)&&(t[e]=s)}!function(t,i,e,s){if(!j_(e)&&!j_(null==i?void 0:i.images))return;t.images=[],e&&t.images.push(new s.Image(e));if(null==i?void 0:i.images)if(ae(i.images))t.images.push(new s.Image(i.images));else if(Yn(i.images))for(const e of i.images){let i;var n,r;if(ae(e))i=new s.Image(e);else i=new s.Image(e.src),i.height=null!=(n=e.height)?n:null,i.width=null!=(r=e.width)?r:null;t.images.push(i)}}(t,i,e,s)}function yK(t,i,e){return void 0===e&&(e=chrome),function(t,i,e){switch(null==t?void 0:t.type){case"movie":{const s=new e.MovieMediaMetadata;return pK(s,t,i,e),s}case"audio":{const s=new e.MusicTrackMediaMetadata;return pK(s,t,i,e),!j_(s.artist)&&j_(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new e.TvShowMediaMetadata;return pK(s,t,i,e),!j_(s.title)&&j_(t.episodeTitle)&&(s.title=t.episodeTitle),!j_(s.season)&&j_(t.seasonNumber)&&(s.season=t.seasonNumber),!j_(s.episode)&&j_(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new e.GenericMediaMetadata;return pK(s,t,i,e),s}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(e))}function Wn(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function MK(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return H_(t.items,(i=>i.itemId===t.currentItemId))}r(),r(),r(),r(),r();var TK,mr="urn:x-cast:com.theoplayer.cast";r(),r(),function(t){t.jBt="theoplayer_receiver_info",t.zBt="theoplayer_trackpropertychange",t.PBt="theoplayer_propertychange"}(TK||(TK={})),r();var NK;(NK||(NK={})).SKIP_AD="SKIP_AD",r();function Ir(t){h.createElement("img").src=t}r(),r(),r();var DK=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function rc(t){if(!ae(t))return;const i=t.match(DK);return i?3600*C(i[1],10)+60*C(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function hc(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?C(i[1])/100:void 0}function SK(t,i){return"vmap"===t.type||!j_(t.type)&&!j_(i)}function IK(t,i){return"vast"===t.type||!j_(t.type)&&j_(i)}r(),r(),r();var oc=class{},EK=class extends oc{get BBt(){return this.Ic}RBt(){return null!=this.UBt||(this.UBt=Nh(this.Ic,(t=>t.RBt()))),this.UBt}constructor(t){super(),this.Ic=t.sort(((t,i)=>t.fT-i.fT))}};r(),r();var bc=class extends oc{get o(){return this.QBt}get fT(){return this.FBt}get YBt(){return this.GBt}constructor(t,i){super(),this.QBt=t,this.FBt=i,this.GBt=!1}},bK=class extends bc{get VBt(){return this.WBt}get HBt(){return this.qBt}get XBt(){return this.ZBt}get KBt(){return this.JBt}get lt(){return this.vP}RBt(){if(void 0===this.$Bt){let t,i,e,s=[];for(const n of this.WBt)n.tRt&&(t=n.tRt),n.iRt&&(i=n.iRt),n.eRt&&(e=n.eRt),s=s.concat(n.universalAdIds);this.$Bt={KBt:this.KBt,tRt:t,sRt:i,eRt:e,lt:this.lt,nRt:s}}return[this.$Bt]}constructor(t,i,e,s,n,r,h){super(t,i),this.qBt=e,this.ZBt=s,this.JBt=n,this.WBt=r,this.vP=h}};r(),r();var LK,kK=class{get rRt(){return this.hRt}get oRt(){return this.aRt}constructor(t,i){this.hRt=t,this.aRt=i}},CK=class{get uRt(){return this.cRt}get lRt(){return this.dRt}get fRt(){return this._Rt}get gRt(){return this.wRt}get Xl(){return this.ARt}set Xl(t){this.ARt=t}get vRt(){return this.mRt}get pRt(){return this.yRt}MRt(){this.yRt=!0}get HBt(){return this.qBt}constructor(t,i,e,s,n,r){this.cRt=t,this.dRt=i,this._Rt=e,this.wRt=s,this.yRt=!1,this.mRt=n,this.qBt=r}};r(),function(t){t.TRt="all",t.NRt="any",t.MB="none"}(LK||(LK={}));var xK=class{get DRt(){return this.SRt}get IRt(){return this.ERt}constructor(t,i){this.SRt=t,this.ERt=i}},OK=class{get o(){return this.NN}get ji(){return this.Kk}get Ti(){return this.Jk}get bRt(){return this.LRt}get kRt(){return this.CRt}get xRt(){return this.ORt}get jRt(){return this.zRt}get PRt(){return this.BRt}get RRt(){return this.URt}get QRt(){return this.FRt}get uRt(){return this.cRt}get lRt(){return this.dRt}get fRt(){return this._Rt}get YRt(){return this.GRt}get oRt(){return this.VRt}get WRt(){return this.HRt}constructor(t,i,e,s,n,r,h,o,a,u,c,l,d,f,_,g){this.Kk=t,this.Jk=i,this.NN=e,this.LRt=s,this.CRt=n,this.ORt=r,this.zRt=h,this.BRt=o,this.URt=a,this.FRt=u,this.cRt=c,this.dRt=l,this._Rt=d,this.GRt=f,this.VRt=_,this.HRt=g}};r();var jK=class{get id(){return this.NN}get uri(){return this.sbt}constructor(t,i){this.NN=t,this.sbt=i}},_r=class{get qRt(){return this.XRt}get ZRt(){return this.KRt}get JRt(){return this.$Rt}get tUt(){return this.iUt}constructor(t,i,e,s){this.XRt=t,this.KRt=i,this.$Rt=e,this.iUt=s}},zK=class extends bc{get KBt(){return this.JBt}get eUt(){return this.sUt}get nUt(){return this.rUt}get VBt(){return this.WBt}get hUt(){return this.oUt}get aUt(){return this.uUt}get lt(){return this.vP}RBt(){return void 0===this.sUt?[]:(null!=this.UBt||(this.UBt=this.sUt.RBt().map((t=>this.cUt(t)))),this.UBt)}cUt(t){let i,e,s;for(const t of this.VBt)t.tRt&&(i=t.tRt),t.iRt&&(e=t.iRt),t.eRt&&(s=t.eRt);const n=t.KBt.concat(this.KBt);let r=t.tRt;if(i&&t.tRt){const e=new _r(t.tRt.lUt.qRt,t.tRt.lUt.ZRt,t.tRt.lUt.JRt.concat(i.lUt.JRt),t.tRt.lUt.tUt.concat(i.lUt.tUt));r=t.tRt,r.lUt=e,r.oRt=r.oRt.concat(i.oRt)}let h=t.sRt;if(e&&e.rRt){var o,a;const s=[];for(const t of e.rRt)s.concat(t.gRt.JRt);const n=[];var u,c;for(const e of null!=(u=null==(o=t.sRt)?void 0:o.rRt)?u:[]){var l,d,f;const r=new _r(e.gRt.qRt,e.gRt.ZRt,e.gRt.JRt.concat(s),(null!=(d=null==(l=t.tRt)?void 0:l.lUt.tUt)?d:[]).concat(null!=(f=null==i?void 0:i.lUt.tUt)?f:[]));n.push(new CK(e.uRt,e.lRt,e.fRt,r,e.vRt,e.HBt))}h=new kK(n,(null!=(c=null==(a=t.sRt)?void 0:a.oRt)?c:[]).concat(e.oRt))}let _=t.eRt;if(_){var g;let i=_.DRt;var w,A;s&&s.DRt&&(i=s.DRt),_=new xK(i,(null!=(w=null==(g=t.eRt)?void 0:g.IRt)?w:[]).concat(null!=(A=null==s?void 0:s.IRt)?A:[]))}let v=t.lt;return this.lt&&(v=this.lt),{KBt:n,tRt:r,sRt:h,eRt:_,lt:v,nRt:t.nRt}}constructor(t,i,e,s,n,r,h,o,a){super(t,i),this.JBt=e,this.sUt=s,this.rUt=n,this.WBt=r,this.oUt=h,this.uUt=o,this.vP=a}};r();var PK=class{get o(){return this.NN}get dUt(){return this.fUt}get _Ut(){return this.gUt}get PRt(){return this.BRt}get tRt(){return this.wUt}get iRt(){return this.AUt}get eRt(){return this.vUt}get universalAdIds(){return this.mUt}constructor(t,i,e,s,n,r,h,o){this.NN=t,this.fUt=i,this.gUt=e,this.BRt=s,this.wUt=n,this.AUt=r,this.vUt=h,this.mUt=o}};r();var Jn,BK=class{get ct(){return this.pUt}get yUt(){return this.MUt}get oRt(){return this.aRt}set oRt(t){this.aRt=t}set lUt(t){this.TUt=t}get lUt(){return this.TUt}get NUt(){return this.DUt}set NUt(t){this.DUt=t}get SUt(){return this.yRt}get Xl(){return this.ARt}set Xl(t){this.ARt=t}get vRt(){return this.mRt}get HBt(){return this.qBt}MRt(){this.yRt=!0}constructor(t,i,e,s,n,r,h){this.pUt=t,this.MUt=i,this.aRt=e,this.TUt=s,this.DUt=n,this.yRt=!1,this.mRt=r,this.qBt=h}};function we(t,i){return QK(t)&&t.getAttribute(i)||void 0}function RK(t,i){return UK(t,i,void 0,!1)}function UK(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function Ho(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);QK(n)&&RK(n,i)&&e.push(n)}return e}function QK(t){return t&&1===t.nodeType}function FK(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new b('Invalid document for MIME type "'+i+'"');return e}function YK(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function GK(t){return"data:application/xml,"+encodeURIComponent(t)}function VK(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}r(),r(),function(t){t.IUt="mute",t.EUt="unmute",t.Sh="pause",t.bUt="resume",t.LUt="rewind",t.kUt="skip",t.CUt="playerExpand",t.xUt="playerCollapse",t.Ah="fullscreen",t.OUt="exitFullscreen",t.jUt="expand",t.COLLAPSE="collapse",t.ect="start",t.zUt="firstQuartile",t.PUt="thirdQuartile",t.BUt="midpoint",t.RUt="complete",t.UUt="acceptInvitationLinear",t.QUt="acceptInvitation",t.FUt="timeSpentViewing",t.YUt="otherAdInteraction",t.VA="progress",t.GUt="creativeView",t.VUt="adExpand",t.WUt="adCollapse",t.HUt="minimize",t.qUt="close",t.XUt="closeLinear",t.ZUt="overlayViewDuration",t.KUt="breakStart",t.JUt="breakEnd",t.ha="error"}(Jn||(Jn={}));var WK=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function HK(t){return void 0!==t&&-1!==WK.indexOf(t)}var qK=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function XK(t){return void 0!==t&&-1!==qK.indexOf(t)}var ZK=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function KK(t){return void 0!==t&&-1!==ZK.indexOf(t)}function JK(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?S(e[1]||"0")+60*S(e[2]||"0")+S(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?S(e[1]||"0")*i/100:void 0)}var $K=class{get hQ(){return this.$Ut}get Ku(){return this.tQt}get eventURL(){return this.iQt}constructor(t,i,e){this.$Ut=t,this.tQt=i,this.iQt=e}};r();var tJ=class{get eQt(){return this.sQt}constructor(t){this.sQt=t}},iJ=class extends tJ{get qRt(){return this.XRt}get WRt(){return this.HRt}get nQt(){return this.rQt}constructor(t,i,e,s){super(t),this.rQt=i,this.XRt=e,this.HRt=s}},eJ=class extends tJ{constructor(t){super(t)}},sJ=class extends tJ{constructor(t){super(t)}};r();var Si={hQt:{jL:100,pL:"XML parsing error."},oQt:{jL:303,pL:"Empty or invalid VAST error."},aQt:{jL:400,pL:"General linear error"},uQt:{jL:403,pL:"Unsupported MIME-type or missing mediafiles error"},cQt:{jL:500,pL:"General nonlinear error"},CU:{jL:900,pL:"Network error"}},rh=class{get lQt(){return this.dQt}fQt(t){if(!this.lQt)return;const i=this.lQt.replace(/\[ERRORCODE]/,""+t.jL);Ir(i)}constructor(t){this.dQt=t}};r();var Qe,zr,It=class extends Jo{get _Qt(){return this.gQt}get wQt(){var t;return null!=(t=this.AQt)?t:900}constructor(t,i,e,s){super(e||i&&nJ[i]||t,s),this.gQt=t,this.AQt=i,this.vQt=e}};!function(t){t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general"}(Qe||(Qe={})),function(t){t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED"}(zr||(zr={}));var nJ={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function rJ(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case vi.Fv:case vi.Yv:case vi.Qv:return!0;default:return!1}}function hJ(t){const i=Ue();return!!(rJ(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(Nr("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function vc(t,i){for(const e of i){new rh(e).fQt(t)}}function Nr(t){0}r(),r();var oJ,aJ=class{get mQt(){return this.pQt}get yQt(){return this.MQt}constructor(t,i){this.pQt=t,this.MQt=i}};!function(t){t.TQt="linear",t.NQt="nonlinear",t.DQt="companion",t.SQt="vmap"}(oJ||(oJ={}));var uJ,gc=class t{async IQt(i,e){if(SK(i.sources,i.timeOffset)){const s=await t.EQt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new It(Qe.NETWORK,zr.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(RK(n,"VMAP"))return await this.bQt(n,i,e);if(RK(n,"VAST")){const t=await this.LQt(n,e,!1);if(t){const e=new fJ("",!0,!0,t);return[new lJ("start",e,uJ.TQt,"",[],!1,!0,i)]}return[]}throw new It(Qe.GENERAL,zr.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(IK(i.sources,i.timeOffset))return[new dJ(String(i.timeOffset),i,e)];throw new It(Qe.GENERAL,zr.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async kQt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.EQt(i,e)}catch(t){throw vc(t instanceof It&&t.wQt===zr.VAST_MALFORMED_RESPONSE?Si.oQt:Si.CU,n),t}const h=r&&r.documentElement;if(h&&RK(h,"VAST"))return await this.LQt(h,e,s,n)}async CQt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new It(Qe.GENERAL,zr.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.kQt(t.sources.src,s,!1),h=new fJ("",!0,!0,r),o=new lJ(i,h,uJ.TQt,"",[],!1,!0,t);return o.xQt=e,o}static async requestSuccessOnly(t,i){let e;try{e=await i.mI(t)}catch(t){throw new It(Qe.NETWORK,zr.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!mc(e))throw new It(Qe.NETWORK,zr.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async EQt(t,i){const e=new nc({zu:t,eE:nr.Ru,iE:Kc.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return FK(t,"text/xml")}(await s.Cp())}catch(t){throw new It(Qe.NETWORK,zr.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async LQt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],h=[];if(t&&RK(t,"VAST")){if(0!==Ho(t,"Ad").length){for(const e of Ho(t,"Ad"))try{const t=await this.OQt(e,i,s);0===t.fT?n.push(t):r.push(t)}catch(t){h.push(t)}if(0===n.length&&0===r.length&&h.length>0)throw h[0];return 1===n.length&&0===r.length?n[0]:0===n.length&&0!==r.length?new EK(r):n.length>0||r.length>0?new EK(r.concat(n)):void 0}if(0!==Ho(t,"Error").length){for(const i of Ho(t,"Error")){Nr(Si.hQt.pL);const t=i.textContent;t&&s.push(t),vc(Si.hQt,s)}throw new It(Qe.GENERAL,zr.VAST_MALFORMED_RESPONSE,"The Ad Server responded with a VAST Error")}if(e)throw vc(Si.oQt,s),new It(Qe.PARSING,zr.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}else if(e)throw vc(Si.oQt,s),new It(Qe.PARSING,zr.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}async bQt(t,i,e){const s=[],n=Ho(t,"AdBreak");for(const t of n)try{const n=await this.jQt(t,i,e);n&&s.push(n)}catch(t){ag.Att(t)}return s}async OQt(i,e,s){const n=we(i,"id")||"";let r=D(we(i,"sequence"));r||(r=0);const h=Ho(i,"InLine"),o=Ho(i,"Wrapper");if(0!==o.length)return await this.zQt(o[0],n,r,e,s);if(0!==h.length)return t.PQt(h[0],n,r,s);throw new It(Qe.PARSING,zr.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static PQt(i,e,s,n){const r=Ho(i,"Error")[0];let h;r&&r.textContent&&(h=r.textContent,n.push(h));const o=Ho(i,"AdSystem")[0];let a,u="";o&&(u=o.textContent||u);const c=Ho(i,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of Ho(i,"Impression"))t.textContent&&l.push(t.textContent);const d=t.BQt(Ho(i,"Creatives")[0],u,n);return new bK(e,s,u,a,l,d,new rh(h))}async zQt(i,e,s,n,r){const h=Ho(i,"Error")[0];let o="";h&&h.textContent&&(o=h.textContent,r.push(o));const a=Ho(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of Ho(i,"Impression"))t.textContent&&c.push(t.textContent);const l=Ho(i,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.kQt(d,n,!0,r),_=Ho(i,"Creatives")[0];let g=[];_&&(g=t.RQt(_,u,r));let w=Oa(we(i,"followAdditionalWrappers"));w||(w=!0);let A=Oa(we(i,"allowMultipleAds"));A||(A=!0);let v=Oa(we(i,"fallbackOnNoAd"));return v||(v=!1),new zK(e,s,c,f,w,g,A,v,new rh(o))}static RQt(i,e,s){const n=[];for(const r of Ho(i,"Creative")){let i=we(r,"id");i||(i="");let h=D(we(r,"sequence"));h||(h=0);let o=we(r,"adId");o||(o="");const a=Ho(r,"Linear")[0];let u;a&&(u=t.UQt(a,"wrapper",i,e,s));const c=Ho(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.QQt(c,i,e),l=d}catch(t){}const f=Ho(r,"CompanionAds")[0];let _;f&&(_=t.FQt(f)),n.push(new PK(i,o,h,"",u,l,_,[]))}return n}static BQt(i,e,s){const n=[];for(const r of Ho(i,"Creative")){let i=we(r,"id");i||(i="");let h=D(we(r,"sequence"));h||(h=0);let o=we(r,"adId");o||(o="");let a=we(r,"apiFramework");a||(a="");const u=Ho(r,"Linear")[0];let c;if(u)try{c=t.UQt(u,"inline",i,e,s)}catch(t){}const l=Ho(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.QQt(l,i,e),d=f}catch(t){}const _=Ho(r,"CompanionAds")[0];let g;_&&(g=t.FQt(_));const w=Ho(r,"UniversalAdId"),A=t.parseUniversalAdIds(w);n.push(new PK(i,o,h,a,c,d,g,A))}return n}static UQt(i,e,s,n,r){const h=Ho(i,"Duration")[0];let o=0;if(h)o=rc(h.textContent)||0;else if(!h&&"inline"===e)throw new It(Qe.PARSING,zr.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=we(i,"skipoffset");let u=-1;if(a){let t=rc(a);if(void 0===t&&a.indexOf("%")>-1){const i=x.abs(Number(a.replace(/(?![0-9])./g,"")))/100;j(i)||(t=o*i)}void 0!==t&&(u=t)}const c=Ho(i,"MediaFiles")[0];let l=[];if(c&&(l=function(t,i){const e=[];for(const s of Ho(t,"MediaFile")){const t=we(s,"delivery"),n=we(s,"type");if(!n){Nr();continue}if(!i(n))continue;let r=D(we(s,"width")),h=D(we(s,"height"));r||(Nr(),r=0),h||(Nr(),h=0);const o={delivery:t,type:n,width:r,height:h,contentURL:""+s.textContent};e.push(o)}return e}(c,hJ)),"inline"===e&&(!c||0===l.length))throw vc(Si.uQt,r),new It(Qe.PARSING,zr.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const d=Ho(i,"TrackingEvents")[0];let f=[];d&&(f=t.YQt(d,HK,"linear"));const _=Ho(i,"VideoClicks")[0],g=t.GQt(_);return new BK(o,l,f,g,u,s,n)}static GQt(i){if(!i)return new _r("","",[],[]);const e=Ho(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=we(e,"id")||"");const r=t.VQt(Ho(i,"ClickTracking")),h=t.VQt(Ho(i,"CustomClick"));return new _r(s,n,r,h)}static VQt(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=we(e,"id")||"";i.push(new jK(s,t))}return i}static YQt(t,i,e){const s=[];for(const n of Ho(t,"Tracking")){const r=we(n,"event");if(!i(r)){Nr();continue}let h="";"linear"===e&&(h=we(t,"offset")||"0");const o=n.textContent;o&&s.push(new $K(r,h,o))}return s}static QQt(i,e,s){const n=[];for(const r of Ho(i,"NonLinear")){const i=Ho(r,"NonLinearClickThrough")[0];let h;i&&(h=i.textContent||void 0);const o=t.VQt(Ho(r,"NonLinearClickTracking")),a=Ho(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=we(a,"creativeType"),i=a.textContent||"",e=Ho(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new iJ(i,t,s,"")}const c=t.WQt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){Nr();continue}const d=new _r(h,"",o,[]);n.push(new CK(u,c,l,d,e,s))}if(0===n.length)throw new It(Qe.PARSING,zr.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=Ho(i,"TrackingEvents")[0];let h=[];return r&&(h=t.YQt(r,XK,"nonlinear")),new kK(n,h)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=we(r,"idRegistry"))?e:"";var s,n;const h=null!=(n=null!=(s=we(r,"idValue"))?s:r.textContent)?n:"";i.push(new aJ(t,h))}return i}static FQt(i){let e=we(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=LK.MB);const s=[];for(const e of Ho(i,"Companion")){let i=D(we(e,"width")),n=D(we(e,"height")),r=we(e,"id"),h=D(we(e,"assetWidth")),o=D(we(e,"assetHeight")),a=D(we(e,"expandedWidth")),u=D(we(e,"rxpandedHeight")),c=we(e,"apiFramework"),l=we(e,"adSlotId"),d=D(we(e,"pxratio"));const f=Ho(e,"AltText")[0];let _=f?f.textContent:"";i||(Nr(),i=0),n||(Nr(),n=0),r||(r=""),h||(h=0),o||(o=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const g=t.HQt(e),w=t.WQt(e),A=t.parseHtmlResource(e),v=Ho(e,"TrackingEvents")[0];let m=[];v&&(m=t.YQt(v,KK,"companion"));const p=Ho(e,"CompanionClickThrough")[0];let y;p&&(y=p.textContent||void 0);const M=t.VQt(Ho(e,"CompanionClickTracking"));(g||w||A)&&s.push(new OK(i,n,r,h,o,a,u,c,l,d,g,w,A,new _r(y,"",M,[]),m,_))}return new xK(e,s)}static HQt(t){const i=Ho(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=we(i,"creativeType");t||(t="");const s=i.textContent,n=Ho(i.parentNode,"AltText")[0],r=Ho(i.parentNode,"CompanionClickThrough")[0];let h,o="";n&&(o=n.textContent||""),r&&(h=r.textContent||void 0),s&&(e=new iJ(s,t,h,o))}return e}static WQt(t){const i=Ho(t,"IFrameResource")[0];let e;if(i){const t=i.textContent||"";e=new eJ(t)}return e}static parseHtmlResource(t){const i=Ho(t,"HTMLResource")[0];let e;if(i){const t=i.textContent||"";e=new sJ(t)}return e}async jQt(i,e,s){const n=we(i,"timeOffset")||"0",r=we(i,"breakType")||uJ.KT;let h=we(i,"breakId"),o=Oa(we(i,"repeatAfter"));if(void 0===h&&(h=""),void 0===o&&(o=!1),!(void 0!==js.qQt(n)))throw new It(Qe.PARSING,zr.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=Ho(i,"AdSource")[0],u=Ho(i,"TrackingEvents")[0];let c=[];u&&(c=t.YQt(u,VK,"vmap"));let l=we(a,"id");l||(l="");let d=Oa(we(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=Oa(we(a,"followRedirects"));f||(f=!0);const _=Ho(a,"AdTagURI")[0];let g="";const w=Ho(a,"VASTAdData")[0];if(!_||!_.textContent){if(w){if(w.firstElementChild&&UK(w.firstElementChild,"VAST")){const t=await this.LQt(w.firstElementChild,s,!1);if(t){const i=new fJ(l,d,f,t);return new lJ(n,i,r,h,c,o,!1,e)}return}throw new It(Qe.PARSING,zr.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new It(Qe.PARSING,zr.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{g=_.textContent;const t=se(e);return t.sources.src=g,new dJ(n,t,s)}catch(t){return}}};!function(t){t.KT="",t.TQt="linear",t.XQt="nonlinear",t.ZQt="display"}(uJ||(uJ={}));var cJ,js=class{static KQt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static JQt(t){}static $Qt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static tFt(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static iFt(t){if(t<=0)return"00:00:00.000";const i=x.floor(t),e=t-i;return this.eFt(i/3600,2)+":"+this.eFt(i/60%60,2)+":"+this.eFt(i%60,2)+"."+this.eFt(1e3*e,3)}static eFt(t,i){return("00"+x.floor(t)).slice(-i)}static sFt(t,i){const e=this.qQt(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return hc(t)*i;if(1===e)return rc(t);if(3===e)return this.$Qt(t);if(4===e){const i=Number(t);if(!j(i)&&i>=-1)return i}}}static qQt(t){return"start"===t||"end"===t?0:void 0!==rc(t.toString())?1:void 0!==hc(t.toString())?2:void 0!==this.JQt(t.toString())?3:j(Number(t))?void 0:4}};!function(t){t[t.L5=0]="L5",t[t.nFt=1]="nFt",t[t.rFt=2]="rFt",t[t.hFt=3]="hFt",t[t.oFt=4]="oFt"}(cJ||(cJ={}));var Er,lJ=class{get aFt(){return this.uFt}get _Et(){return this.cFt}get NUt(){return this.DUt}set NUt(t){this.DUt=t}get oRt(){return this.VRt}get lFt(){return this.dFt}get fFt(){return this._Ft}get v7(){return this.gFt}get wFt(){return this.xQt.Kl}get W(){return!0}$n(){return Promise.resolve()}get xQt(){return this.AFt}set xQt(t){this.AFt=t}constructor(t,i,e,s,n,r,h,o){this.DUt=-1,this.uFt=i,this.cFt=t,this.vFt=e,this.dFt=s,this._Ft=r,this.VRt=n,this.mFt=h,this.gFt=o}},dJ=class{get aFt(){return this.ARt.aFt}get _Et(){return this.ARt._Et}get NUt(){return this.ARt.NUt}set NUt(t){this.ARt.NUt=t}get oRt(){return this.ARt.oRt}get lFt(){return this.ARt.lFt}get fFt(){return this.ARt.fFt}get v7(){return this.ARt.v7}get wFt(){return this.ARt.wFt}get W(){return this.pFt}$n(){var t;return null!=(t=this.yFt)?t:this.yFt=this.sit()}async sit(){const t=new gc;this.ARt=await t.CQt(this.v7,this._Et,this.xQt,this.dE),this.pFt=!0}get xQt(){return this.ARt.xQt}set xQt(t){this.ARt.xQt=t}constructor(t,i,e){this.pFt=!1,this.dE=e,this.ARt=new lJ(t,void 0,"","",[],!1,!1,i)}},fJ=class{get o(){return this.NN}get hUt(){return this.MFt}get TFt(){return this.NFt}get BBt(){return this.DFt}constructor(t,i,e,s){this.NN=t,this.MFt=i,this.DFt=s,this.NFt=e}};function _J(t,i){let e;if(t.vastAdsRequest&&(e=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return GK(t.adsResponse);return}(t.vastAdsRequest)),!e){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const e=t.contentType||"video/mp4",s=Ev(e)||Fa(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+js.iFt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+js.iFt(t.whenSkippable)+'"':"",h='<MediaFile delivery="'+s+'" type="'+e+'">'+YK(i)+"</MediaFile>",o=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+YK(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+h+"</MediaFiles>"+o+"</Linear>",u=t.title?"<AdTitle>"+YK(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(e=GK(i))}const s=t.customData;if(e){const n={integration:null==s?void 0:s.integration,sources:{src:e,type:"vast"},timeOffset:i};return n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}!function(t){t.SFt="error",t.IFt="sourceupdate"}(Er||(Er={}));var gJ=class extends gg{constructor(t){super("error"),this.lt=t}},wJ=class extends gg{constructor(t,i){super("sourceupdate"),this.bt=t,this.yc=i}},AJ=class extends i{get Fy(){return this.EFt}bFt(t){this.LFt.bFt(t)}kFt(t){this.LFt.kFt(t)}CFt(t){this.LFt.CFt(t)}xFt(t){this.LFt.xFt(t)}OFt(t){this.EFt.addUpdateListener(t)}jFt(t){this.EFt.removeUpdateListener(t)}zFt(){const t=new No,i=new chrome.cast.media.GetStatusRequest;return this.EFt.getStatus(i,(()=>{t.CL({bt:this.O_(),yc:this.Wa()})}),(i=>t.xL(i))),t.OL}O_(){var t;return null==(t=this.EFt.customData)?void 0:t.currentSource}Wa(){var t;let i;if(null==(t=this.BFt.PFt())?void 0:t.version){var e;i=null==(e=this.EFt.customData)?void 0:e.sourceDescription}else{var s;const t=null==(s=MK(this.EFt))?void 0:s.customData;(function(t){return lt(t)&&t.theoplayer_version>=1&&j_(t.streamStart)&&j_(t.isLive)&&j_(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:vJ(t)}}(this.EFt.media))}return i}Gg(){const t=new chrome.cast.media.PauseRequest;this.EFt.pause(t,xs,this.RFt)}Wg(){const t=new chrome.cast.media.StopRequest;this.EFt.stop(t,xs,this.RFt)}Vg(){const t=new chrome.cast.media.PlayRequest;this.EFt.play(t,xs,this.RFt)}Dp(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,i)=>{this.EFt.seek(e,t,(t=>{var e;i(new Ca(Wn(t.code),null!=(e=t.description)?e:void 0))}))}))}dg(t){this.LFt.u8(mr,function(t){return{type:TK.PBt,properties:{playbackRate:t}}}(t)).catch(this.UFt)}QFt(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.EFt.editTracksInfo(i,xs,this.RFt)}FFt(){return this.EFt.getEstimatedTime()}YFt(){return this.EFt.getEstimatedBreakClipTime()}GFt(){return this.EFt.getEstimatedBreakTime()}VFt(){this.LFt.u8("urn:x-cast:com.google.cast.media",{type:NK.SKIP_AD,requestId:this.WFt++,mediaSessionId:this.EFt.mediaSessionId}).catch(this.UFt)}gn(){this.Vo()}constructor(t,i,e){super(i),this.WFt=0,this.UFt=t=>{this.Co(new gJ(t))},this.RFt=t=>{var i;const e=new Ca(Wn(t.code),null!=(i=t.description)?i:void 0);this.UFt(e)},this.BFt=t,this.LFt=i,this.EFt=e}};function vJ(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?Nh(t.breaks,(i=>function(t,i){const e=[];if(t.isWatched)return e;for(const s of t.breakClipIds){const n=H_(i,(t=>t.id===s));if(n){const i=_J(n,t.position);i&&e.push(i)}}return e}(i,t.breakClips))):[]}r();var er,mJ=class{HFt(t,i){this.BFt.addMessageListener(t,i)}qFt(t,i){this.BFt.removeMessageListener(t,i)}u8(t,i){return new Promise(((e,s)=>{this.BFt.sendMessage(t,i,e,(t=>{var i;s(new Ca(Wn(t.code),null!=(i=t.description)?i:void 0))}))}))}gn(){}constructor(t){this.BFt=t}};function pJ(t){return"vmap"===t||"adrule"===t}function yJ(t){if(t)return ae(t)?{src:P(t),type:void 0}:function(t){return lt(t)&&Boolean(t.src)}(t)?{src:P(t.src),type:MJ(t.type)}:void 0}function MJ(t){if(ae(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void ji("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||ji("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function lh(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return DK.test(t)}(t))return js.tFt(t);if(TJ(t))return t}return Number(t)>=0?Number(t):void 0}}function TJ(t){return new RegExp(/^\d{1,2}%$/).test(t)}function NJ(t){const i=[],e=(t,s)=>{if(Yn(s))for(let i=0,n=s.length;i<n;i++){const n=lt(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if(lt(s))for(const i of _.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of _.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}r(),r(),r(),function(t){t.jBt="receiver_info",t.rEt="event",t.XFt="propertychange",t.zBt="trackevent"}(er||(er={}));var xi,DJ=class{ZFt(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}bFt(t){this.KFt.push(t)}kFt(t){Et(this.KFt,t)}CFt(t){this.JFt.push(t)}xFt(t){Et(this.JFt,t)}$Ft(t){this.tYt=t}u8(t,i){return this.iYt.u8(t,i)}gn(){this.iYt.qFt(mr,this.eYt),Ri(this.JFt),Ri(this.KFt),this.tYt=void 0}constructor(t){this.KFt=[],this.JFt=[],this.eYt=(t,i)=>{const e=this.ZFt(i);if(e)if(e.type===er.XFt)for(const t of this.KFt)for(const i of _.keys(e.properties))t(i,e.properties[i]);else if(e.type===er.rEt)for(const t of this.JFt)t(e.event);else e.type===er.zBt&&this.tYt&&e.event.trackState&&this.tYt(e.event.trackId,e.event.trackState.targetQualityIds)},this.iYt=t,this.iYt.HFt(mr,this.eYt)}};r(),r(),function(t){t.sYt="medialoadedchange",t.uv="volumechange",t.SFt="casterror",t.nYt="playererror",t.rYt="targetqualitychanged",t.hYt="receiverinfochanged"}(xi||(xi={}));var SJ,IJ=class extends gg{constructor(){super("medialoadedchange")}},EJ=class extends gg{constructor(t,i){super("volumechange"),this.xg=t,this.Z_=i}},bJ=class extends gg{constructor(t){super("casterror"),this.lt=t}},LJ=class extends gg{constructor(t){super("playererror"),this.lt=t}},kJ=class extends gg{constructor(t,i){super("targetqualitychanged"),this.Wy=t,this.oYt=i}},CJ=class extends gg{constructor(){super("receiverinfochanged")}},xJ=class extends i{aYt(t,i,e){this.LFt.u8(mr,function(t,i,e){return{type:TK.zBt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e)).catch(this.UFt)}uYt(){this.iYt.HFt(mr,this.cYt),this.LFt.u8(mr,{type:TK.jBt}).catch(xs)}PFt(){return this.lYt}dYt(){return this.BFt.getSessionObj()}fYt(t){!this._Yt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this._Yt=new AJ(this,this.LFt,t),this.gYt(),this.Co(new IJ),this._Yt.OFt(this.wYt))}AYt(){return this._Yt}async vYt(t){const i=function(t){const i=function(t,i,e,s){const n=jI(t)||"",r=xI(t)||"",h=new chrome.cast.media.MediaInfo(n,r);return h.metadata=yK(t.metadata,t.poster),h.streamType=s,function(t,i,e){const s=[],n=[];let r,h=0,o=0;for(const t of i){const i=yJ(t.sources);if(i)if(SK(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(IK(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=js.sFt(r,e))?u:0,d=void 0!==c?js.sFt(c,e):void 0,f=new chrome.cast.media.BreakClip("bc"+o++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=H_(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+h++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(h,i,e),h}(t.mYt,t.Oc,t.ct,t.LX),e=new chrome.cast.media.LoadRequest(i);return e.autoplay=!0,e.currentTime=t.j_,e.customData=t.pYt,e}(t);let e;try{e=await this.BFt.loadMedia(i)}catch(t){e=t}if(e)throw new Ca(Wn(e))}J_(t){this.dYt().setReceiverMuted(t,xs,this.yYt)}jg(t){this.dYt().setReceiverVolumeLevel(t,xs,this.yYt)}MYt(){return this.dYt().receiver.friendlyName}gn(){this.Vo(),this.BFt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.TYt),this.dYt().removeUpdateListener(this.gYt),this.iYt.qFt(mr,this.cYt),this.LFt.gn(),this.iYt.gn()}constructor(t){super(),this.lYt=void 0,this.UFt=t=>{this.Co(new bJ(t))},this.NYt=(t,i)=>{"error"===t&&this.Co(new LJ(i))},this.DYt=(t,i)=>{this.Co(new kJ(t,i))},this.cYt=(t,i)=>{const e=JSON.parse(i);e.type===er.jBt&&(this.lYt=e.info,this.Co(new CJ))},this.gYt=()=>{const t=this.dYt(),{level:i,muted:e}=t.receiver.volume;this.Co(new EJ(null!=i?i:void 0,null!=e?e:void 0))},this.TYt=()=>this.fYt(this.BFt.getMediaSession()),this.wYt=t=>{var i;t||(null==(i=this._Yt)||i.jFt(this.wYt),this._Yt=void 0,this.Co(new IJ))},this.yYt=t=>{var i;const e=new Ca(Wn(t.code),null!=(i=t.description)?i:void 0);this.UFt(e)},this.BFt=t,this.BFt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.TYt),this.iYt=new mJ(t.getSessionObj()),this.LFt=new DJ(this.iYt),this.LFt.bFt(this.NYt),this.LFt.$Ft(this.DYt),this.dYt().addUpdateListener(this.gYt),this.gYt(),this.uYt();const i=this.BFt.getMediaSession();i&&this.fYt(i)}};(SJ||(SJ={})).SYt="statechange";var OJ=class extends gg{constructor(t){super("statechange"),this.Lvt=t}};r(),r(),r(),r();var jJ,zJ=class extends i{R9(){return this.Ic}L_(){return Ki.aR()}z_(){return this.uR+this.IYt}E9(){return this.z_()}C_(){}Td(){return this.zk}U_(){return this.U$}Q_(){}og(){return this.dR}EYt(){}cg(){return this.fR}dg(t){this.fR!==t&&(this.fR=t,this.Co(new Qh(this.Qo.j_,t)))}pg(){return rv.tN}_g(){return Ki.aR()}Mg(){return Ki.aR()}Ng(){return!1}S_(){return this.nN}Eg(){return this.hN}Dg(){return this.Dl}QFt(t){}Cg(){return this.bYt}Ig(){return this.LYt}Vg(){this.dR=!1}Gg(){this.dR=!0}Dp(t){this.uR=t-this.IYt}kYt(){return this.IYt}CYt(t){this.IYt=t}g7(t){this.Ic.g7(t)}Wg(){}gn(){this.Vo(),this.nN.gn(),this.hN.gn(),this.Dl.gn(),this.Ic.gn()}constructor(t,i,e,s,n,r,h,o,a){super(),this.Qo=t,this.IYt=0,this.nN=new Tn,this.hN=new Tn,this.Dl=new sn,this.Ic=new gn,this.IYt=i,this.uR=e-i,this.zk=s,this.U$=n,this.dR=r,this.fR=h,this.bYt=o,this.LYt=a}};r(),r(),r(),r(),function(t){t.xYt="ccmodechangerequest",t.OYt="cctargetqualitychangerequest",t.jYt="cctrackchangerequest"}(jJ||(jJ={}));var PJ,Vn,BJ=class extends gg{constructor(t,i,e){super(jJ.xYt),this.track=t,this.trackId=i,this.mode=e}};function RJ(t){return"AUDIO"===t.type}function UJ(t){return"VIDEO"===t.type}function QJ(t){return"TEXT"===t.type}r(),function(t){t.Ru="TEXT",t.mp="AUDIO",t.vp="VIDEO"}(PJ||(PJ={})),function(t){t.pp="SUBTITLES",t.fI="CAPTIONS",t._I="DESCRIPTIONS",t.Fn="CHAPTERS",t.Mp="METADATA"}(Vn||(Vn={}));var FJ=class extends i{get va(){return this.Xa||(this.Xa=Qo(this)),this.Xa}get kh(){return this.SN}set kh(t){t!==this.SN&&(this.SN=t,this.Co(new Hn(this)))}get q(){return this.n0}get L(){return this.r0}get eA(){return this.PR}set eA(t){const i=Ne(t);this.PR!==i&&(this.PR=i,this.zYt!==i&&this.Co(new BJ(this,this.Vw,i)),this.Co(new Zr(this)))}get PYt(){return this.zYt}set PYt(t){const i=Ne(t),e=this.PR!==i;this.PR=i,this.zYt=i,e&&this.Co(new Zr(this))}nA(t){this.eA=t}BYt(t){}gn(){}Zn(){}constructor(t){super(),this.Xa=void 0;const i=t.customData;this.Vw=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Vw),this.SN=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.iA=i&&i.inBandMetadataTrackDispatchType||"",this.zt=i&&i.kind||function(t){switch(t){case Vn.pp:return Pt.pp;case Vn.fI:return Pt.fI;case Vn._I:return Pt._I;case Vn.Fn:return Pt.Fn;case Vn.Mp:return Pt.Mp}return}(t.subtype)||"subtitles",this.vg=ja.NONE,this.hA=i&&void 0!==i.type?function(t){return Iv(t)?t:Ks.DEFAULT}(i.type):Ks.WEBVTT,this.s0=[],this.r0=new tC(this.s0),this.d0=[],this.n0=new tC(this.d0),this.PR=Ne(i&&i.mode||Ht.Ch),this.zYt=this.PR}};r(),r();var YJ=class extends gg{constructor(t,i){super(jJ.jYt),this.trackId=t,this.enabled=i}};r();var GJ,VJ=class extends gg{constructor(t,i){super(jJ.OYt),this.track=t,this.targetQuality=i}};r(),function(t){t.mp="audio",t.vp="video",t.Ru="text"}(GJ||(GJ={}));var WJ,eh,HJ=class extends i{get Gw(){return this.sut}get qw(){return this.eut}set qw(t){this.RYt(t),this.Co(new VJ(this,t))}get Hw(){return this.vN}get kh(){return this.SN}set kh(t){t!==this.SN&&(this.SN=t,this.Co(new Hn(this)))}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.UYt!==t&&this.Co(new YJ(this.Vw,t)),this.Co(new Zr(this)))}get QYt(){return this.UYt}set QYt(t){const i=this.Le!==t;this.Le=t,this.UYt=t,i&&this.Co(new Zr(this))}get va(){return this.Xa||(this.Xa=Di(this)),this.Xa}get eA(){return this.Rt?"enabled":"disabled"}EN(t){this.Rt=t}BYt(t){if(t.targetQualityIds){const i=[];for(let e=0;e<this.vN.U;e++){const s=this.vN.jw(e);t.targetQualityIds.indexOf(s.o)>-1&&i.push(s)}const e=i.length?i:void 0;this.RYt(e)}}RYt(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!zo(t,i)})(this.eut,t)&&(this.eut=t&&this.vN.yN(t)?t:void 0,this.Co(new NF(this.eut,this)))}unload(){for(const t of this.vN.xw)t.fn("update",this.iSt);this.vN.Zn()}constructor(t){super(),this.sut=void 0,this.vN=new em,this.eut=void 0,this.Xa=void 0,this.iSt=()=>this.Co(new Hn(this));const i=t.customData;if(this.Vw=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Vw),this.SN=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.zt=i&&i.kind||"main",this.Le=i&&i.enabled,this.UYt=this.Le,RJ(t)){this.TJ=GJ.mp;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new lQ(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.yn("update",this.iSt),this.vN.mN(i)}}else{this.TJ=GJ.vp;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new cQ(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.yn("update",this.iSt),this.vN.mN(i)}}}};r(),function(t){t.FYt="legacy",t.YYt="caf"}(WJ||(WJ={})),r(),r(),r(),function(t){t.GYt="theo",t.VYt="google-ima",t.so="google-dai",t.WYt="freewheel",t.HYt="mediatailor",t.NE="chromecast"}(eh||(eh={})),r(),r();var qJ=class{Mc(){if(this.qYt>=this.Ic.length)return;const t=this.Ic[this.qYt];return this.qYt+=1,t}lt(){return this.Mc()}constructor(t){this.qYt=0,this.Ic=t}};function Tr(t){var i,e,s;return null!=(s=null==(i=t.aFt)||null==(e=i.BBt)?void 0:e.RBt())?s:[]}var XJ=class{},sh=class{J9(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get ads(){return t.Oc.map((t=>t.J9()))},get integration(){return t.XYt},get maxDuration(){return t.ZYt},get maxRemainingDuration(){return t.KYt},get timeOffset(){return t._Et}}}(this)}constructor(){this.Xa=void 0}},Mc=class{get JYt(){return this.$Yt}get t(){return this.Qo}constructor(t,i){this.$Yt=t,this.Qo=i}},ZJ=class extends sh{get xQt(){return this.AFt}get Oc(){const t=[];for(const s of this.AFt.tGt)for(const n of Tr(s)){var i,e;const r=null!=(e=null==(i=n.eRt)?void 0:i.IRt)?e:[];if(n.tRt&&t.push(this.iGt(n.tRt,r,n.nRt,s.v7)),n.sRt)for(const i of n.sRt.rRt)t.push(this.eGt(i,r,n.sRt,n.nRt,s.v7))}return t}iGt(t,i,e,s){const n=H_(this.sGt,(i=>i.tRt===t));if(void 0!==n)return n;const r=new t$(t,i,this,this.nGt,e,s);return this.sGt.push(r),r}eGt(t,i,e,s,n){const r=H_(this.rGt,(i=>i.sRt===t));if(void 0!==r)return r;const h=new $J(t,i,e,this,this.nGt,s,n);return this.rGt.push(h),h}get XYt(){return eh.GYt}get _Et(){const t=this.AFt.Kl;return t>=0?t:this.nGt.t.Td()}get KYt(){let t=0;for(const i of this.AFt.tGt)for(const e of Tr(i))e.tRt&&!e.tRt.SUt&&(t+=e.tRt.ct);return this.nGt&&this.nGt.JYt&&(t+=this.nGt.JYt.ct-this.nGt.JYt.j_),t}get ZYt(){let t=0;for(const i of this.AFt.tGt)for(const e of Tr(i))e.tRt&&(t+=e.tRt.ct);return t}constructor(t,i){super(),this.sGt=[],this.rGt=[],this.AFt=t,this.nGt=i}},KJ={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},JJ=class extends XJ{get Xl(){return this.ARt}get v7(){return this.gFt}get nRt(){return this.mUt}hGt(){return this.oGt}aGt(){this.oGt=!0}uGt(t){return oe({},KJ,{resourceURI:t.eQt||""})}cGt(t){return oe({},KJ,{contentHTML:t.eQt.trim(),type:"HTMLResource"})}lGt(t){var i,e;return oe({},KJ,{clickThrough:(null==(i=t.qRt)?void 0:i.trim())||"",resourceURI:(null==(e=t.eQt)?void 0:e.trim())||"",altText:t.WRt||"",type:"StaticResource"})}dGt(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}eRt(t){return t?t.map((t=>{let i;const e={adSlotId:t.RRt||"",height:t.Ti||0,width:t.ji||0};if(t.uRt){var s;const e=this.lGt(t.uRt),n=e.clickThrough||(null==(s=t.YRt)?void 0:s.qRt);i=oe({},e,{contentHTML:this.dGt(e.resourceURI,n,e.altText)||""})}else if(t.fRt)i=this.cGt(t.fRt);else{if(!t.lRt)return;i=this.uGt(t.lRt)}return Ou(i,e)})).filter((t=>void 0!==t)):[]}fGt(){return this._Gt.HBt}constructor(t,i,e,s,n,r){super(),this.oGt=!1,this._Gt=t,this.ERt=i,this.ARt=e,this.nGt=s,this.mUt=n,this.gFt=r}},$J=class extends JJ{get sRt(){return this._Gt}get iRt(){return this.gGt}fa(){const t=this.ARt,i={companions:this.eRt(this.ERt),type:"nonlinear",id:this._Gt.vRt,skipOffset:this.NUt,integration:eh.GYt,adSystem:this._Gt.HBt,get adBreak(){return t.J9()},creativeId:this._Gt.vRt,universalAdIds:this.mUt.map((t=>({adIdRegistry:t.mQt,adIdValue:t.yQt})))};return this._Gt.lRt?Ou(this.uGt(this._Gt.lRt),i):this._Gt.fRt?Ou(this.cGt(this._Gt.fRt),i):this._Gt.uRt?Ou(this.lGt(this._Gt.uRt),i):i}J9(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}wGt(){var t,i;return null!=(i=null==(t=this._Gt.uRt)?void 0:t.eQt)?i:""}AGt(){var t,i,e;return null!=(e=null==(t=this._Gt)||null==(i=t.uRt)?void 0:i.nQt)?e:""}get NUt(){const t=this._Gt.Xl;return t&&t.v7&&void 0!==t.v7.skipOffset?js.sFt(t.v7.skipOffset,this.nGt.JYt.ct):(null==(i=this._Gt.Xl)?void 0:i.NUt)||-1;var i}constructor(t,i,e,s,n,r,h){super(t,i,s,n,r,h),this.gGt=e}},t$=class extends JJ{get tRt(){return this._Gt}fa(){var t;const i=this.ARt;return{companions:this.eRt(this.ERt),duration:this._Gt.ct,id:this._Gt.vRt,mediaFiles:this._Gt.yUt,skipOffset:this.NUt,type:"linear",integration:eh.GYt,adSystem:this._Gt.HBt,width:void 0,height:void 0,get adBreak(){return i.J9()},clickThrough:null==(t=this._Gt.lUt)?void 0:t.qRt,creativeId:this._Gt.vRt,universalAdIds:this.mUt.map((t=>({adIdRegistry:t.mQt,adIdValue:t.yQt})))}}J9(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}wGt(){return this._Gt.yUt.length>0?this._Gt.yUt[0].contentURL:""}AGt(){return this._Gt.yUt.length>0?this._Gt.yUt[0].type:""}get NUt(){const t=this._Gt.Xl;return t&&t.v7&&void 0!==t.v7.skipOffset?js.sFt(t.v7.skipOffset,this.nGt.JYt.ct):this._Gt.NUt||-1}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r)}};function i$(t){return t instanceof t$}r();var ah=class extends Ts{fa(){return new e$(this.o7.J9())}constructor(t){super("vGt",t)}},e$=class extends Xs{constructor(t){super("updatead",t)}};r();var s$=class extends Ts{fa(){return new n$(this.o7.J9())}constructor(t){super("mGt",t)}},n$=class extends Xs{constructor(t){super("adloaded",t)}},r$=class extends ha{get Fc(){return void 0!==this.pGt}get K9(){return this._Gt?[this._Gt]:[]}get t7(){var t;return null!=(t=this.pGt)?t:null}get i7(){return Nh(this.yGt,(t=>{const i=t.Oc;if(t===this.pGt&&void 0!==this._Gt){const t=i.indexOf(this._Gt);if(t>=0)return i.slice(t+1)}return t.MGt()?[]:i}))}get e7(){return this.yGt.filter((t=>t===this.pGt||!t.MGt()))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=qu(this)}m1(t,i,e){throw new k("Scheduling ads while casting is not supported.")}Yp(){this.EFt.VFt()}w7(t){}TGt(t){return H_(this.yGt,(i=>i.o===t))}NGt(t,i,e,s){const n=this.yGt,r=[];let h=!1;for(const n of t){let t=this.TGt(n.id);void 0===t&&(t=new h$(n),s.push(new Vj(t))),!j_(t.DGt)&&j_(e)&&(t.DGt=this.SGt(t.IGt,e));const o=t.Oc;t.Qn(n,i,e,s);const a=t.Oc;for(const t of a)na(o,t)||(s.push(new pn(t)),h=!0);r.push(t)}this.yGt=r,h&&s.push(new vn);for(const t of n)na(r,t)||s.push(new cn(t))}EGt(t,i){const e=this.pGt,s=this._Gt;let n,r;if(t){var h;const{breakId:i,breakClipId:e}=t;n=i?this.TGt(i):void 0,r=e?null==(h=this.pGt)?void 0:h.bGt(e):void 0}if(this.pGt=n,this._Gt=r,n!==e&&(void 0!==e&&(e.LGt=void 0,i.push(new Bh(e))),void 0!==n&&(n.LGt=this.EFt,i.push(new ka(n)))),r!==s){const t=this.Qo.z_();void 0!==s&&i.push(new fa(s,t)),void 0!==r&&i.push(new tu(r,t))}}SGt(t,i){if(!i||!i.breaks)return;const e=H_(i.breaks,(i=>i.id===t.id));return e}g7(t){const i=[];for(const t of this.yGt){let e=t.Oc;if(t===this.pGt&&void 0!==this._Gt){const t=e.indexOf(this._Gt);t>=0&&(e=e.slice(t))}else if(t.MGt())continue;for(const t of e){const e=t.kGt();e&&i.push(e)}}for(const e of i)t.m1(e,ho.s7,!1)}gn(){return this.Vo(),this.EFt.jFt(this.Yr),void 0!==this.pGt&&(this.pGt.LGt=void 0,this.pGt=void 0),this._Gt=void 0,Ri(this.yGt),Promise.resolve(void 0)}constructor(t,i){super(),this.yGt=[],this.pGt=void 0,this._Gt=void 0,this.Xa=void 0,this.Yr=t=>{var i;if(!t)return;const e=this.EFt.Fy,{breakStatus:s}=e,{breakClips:n,breaks:r}=e.media,h=null==(i=MK(e))?void 0:i.media,o=[];r&&n&&this.NGt(r,n,h,o),this.EGt(s,o);for(const t of o)this.Co(t)},this.Qo=t,this.EFt=i,this.EFt.OFt(this.Yr)}},h$=class extends sh{get IGt(){return this.CGt}get o(){return this.CGt.id}get Oc(){return this.Ic}get XYt(){return eh.NE}get ZYt(){let t=this.CGt.duration;return void 0===t&&this.Ic.length>0&&(t=So(this.Ic,(t=>t.ct)),j(t)&&(t=void 0)),t}get KYt(){const t=this.ZYt;if(void 0!==t&&void 0!==this.LGt){const i=this.LGt.GFt();if(void 0!==i)return x.max(0,t-i)}return t}get _Et(){return this.CGt.position}MGt(){return this.CGt.isWatched}bGt(t){return H_(this.Ic,(i=>i.o===t))}Qn(t,i,e,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const h=t.breakClipIds[r],o=H_(i,(t=>t.id===h));if(void 0===o)continue;const a=r<this.Ic.length?this.Ic[r]:new o$(o,this);!j_(a.xGt)&&j_(e)&&(a.xGt=this.OGt(e,h,r)),a.Qn(o,s),n.push(a)}this.CGt=t,this.Ic=n}OGt(t,i,e){if(!t||!t.breakClips)return;let s=H_(t.breakClips,(t=>t.id===i));if(!s){var n;const i=null==(n=this.DGt)?void 0:n.breakClipIds[e];i&&(s=H_(t.breakClips,(t=>t.id===i)))}return s}constructor(t){super(),this.DGt=void 0,this.Ic=[],this.LGt=void 0,this.CGt=t}},o$=class{get jGt(){return this.zGt}get o(){return this.zGt.id}get IRt(){return[]}get ct(){var t;return null!=(t=this.zGt.duration)?t:NaN}get yUt(){const t=this.wGt();return t?[{contentURL:t,delivery:"progressive",type:this.AGt(),width:0,height:0}]:[]}get NUt(){const{whenSkippable:t}=this.zGt;return void 0===t?void 0:t<0?-1:t}get qRt(){return this.zGt.clickThroughUrl}get vRt(){}get nRt(){return[]}fGt(){return""}AGt(){var t;return null!=(t=this.zGt.contentType)?t:""}wGt(){var t,i;return null!=(i=null!=(t=this.zGt.contentUrl)?t:this.zGt.contentId)?i:""}Qn(t,i){const e=this.o,s=this.ct,n=this.zGt.contentUrl;this.zGt=t;const r=this.o,h=this.ct,o=this.zGt.contentUrl;e===r&&(s===h||j(s)&&j(h))&&n===o||i.push(new ah(this)),j(s)&&!j(h)&&i.push(new s$(this))}kGt(){let t;return this.xGt&&(t=_J(this.xGt,this.Xl._Et)),t||(t=_J(this.zGt,this.Xl._Et)),t}J9(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}fa(){const t=this;return{get companions(){return t.IRt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.yUt},get skipOffset(){return t.NUt},type:"linear",integration:eh.NE,get adSystem(){return t.fGt()},width:void 0,height:void 0,get adBreak(){return t.Xl.J9()},get clickThrough(){return t.qRt},get creativeId(){return t.vRt},get universalAdIds(){return t.nRt.map((t=>({adIdRegistry:t.mQt,adIdValue:t.yQt})))}}}constructor(t,i){this.Xa=void 0,this.zGt=t,this.Xl=i}};r();var a$,Qn=class extends i{get PGt(){return this.BGt}set PGt(t){this.BGt!==t&&(this.BGt=t,this.Us.href=null!=t?t:"",t?this.kI():this.CI())}kI(){if(this.Le)return;this.Le=!0,this.Us.style.display="",this.RGt||(this.oit.style.cursor="pointer");const t=this.RGt?this.Us:this.oit;ag.Ys.Je?(t.addEventListener("touchstart",this.UGt),t.addEventListener("touchend",this.QGt)):(t.addEventListener("mousedown",this.UGt),t.addEventListener("click",this.QGt))}CI(){if(!this.Le)return;this.Le=!1,this.Us.style.display="none",this.RGt||(this.oit.style.cursor="");const t=this.RGt?this.Us:this.oit;ag.Ys.Je?(t.removeEventListener("touchstart",this.UGt),t.removeEventListener("touchend",this.QGt)):(t.removeEventListener("mousedown",this.UGt),t.removeEventListener("click",this.QGt))}e_(){this.Vo(),this.CI(),this.oit.removeChild(this.Us)}constructor(t,i=ag.Ys.Je){super(),this.Le=!1,this.UGt=t=>{t.stopPropagation(),this.Co(new gg("clickstart"))},this.QGt=t=>{t.stopPropagation(),this.Co(new gg("click"))},this.oit=t,this.RGt=i,this.Us=h.createElement("a"),this.Us.style.position="absolute",this.Us.style.zIndex="11",this.Us.target="Du",this.RGt?(pO(this.Us,"learn more"),this.Us.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Us.setAttribute("rel","noopener")):ia(this.Us),this.oit.appendChild(this.Us),this.CI()}};r(),r(),function(t){t.FGt="theo-size-xs",t.YGt="theo-size-s",t.GGt="theo-size-m",t.VGt="theo-size-l",t.WGt="theo-size-xl"}(a$||(a$={}));var u$=[1200,992,768,576],c$={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},l$=class{HGt(t){let i=d$(t);i!==this.qGt&&($u(this.Us,i),WN(this.Us,this.qGt),this.qGt=i)}gn(){this.Wu.fn(th.pn,this.mn)}constructor(t,i){this.Us=t,this.Wu=i,this.mn=t=>{this.HGt(t.width)},this.qGt=d$(i.ku),$u(this.Us,this.qGt),i.yn(th.pn,this.mn)}};function d$(t){for(let i of u$)if(t>i)return c$[i];return"theo-size-xs"}var f$=class extends i{get we(){return this.Us}get eA(){return this.PR}get fE(){return this.Ql.textContent||""}set fE(t){pO(this.Ql,t)}XGt(t){"countdown"!==this.PR&&(this.PR="countdown",this.ZGt(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.fE="You can skip in "+x.round(t)+" seconds"}KGt(){"skip"!==this.PR&&(this.PR="skip",this.fE="Skip Ad",this.JGt(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}JGt(){this.we.addEventListener("mouseup",this.$Gt),this.we.addEventListener("touchend",this.$Gt)}ZGt(){this.we.removeEventListener("mouseup",this.$Gt),this.we.removeEventListener("touchend",this.$Gt)}gn(){this.Vo(),this.ZGt(),this.qu.gn(),ei(this.Us),ei(this.Ql),this.tVt&&ei(this.tVt)}constructor(t,i){super(),this.$Gt=()=>{this.Co(new gg("Yp"))},this.Us=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.Ql=h.createElement("span"),this.we.appendChild(this.Ql),i&&(this.tVt=h.createElement("div"),this.tVt.className="theoplayer-ad-skip-poster",this.tVt.style.backgroundImage='url("'+ew(i)+'")',this.we.appendChild(this.tVt)),this.PR="countdown",this.qu=new l$(this.we,t)}},_$=class extends i{iVt(){const t=this.EFt.Fy.activeTrackIds;if(t){if(this.eVt()){const i=this.hN.xw.map((t=>t.o)),e=this.nN.xw.map((t=>t.o));na(i.concat(e),"0")&&t.push(0)}m$(t,this.nN),m$(t,this.hN),function(t,i){const e=!1;for(const e of i.xw)e.PYt=na(t,e.Vw)?Ht.Xn:Ht.Ch}(t,this.Dl)}}sVt(){var t;const i=null==(t=this.EFt.Fy.media)?void 0:t.tracks;if(!i)return;const e=i.filter(RJ),s=i.filter(UJ),n=i.filter(QJ);if(A$(this.nN,e.map((t=>t.trackId))),A$(this.hN,s.map((t=>t.trackId))),A$(this.Dl,n.map((t=>t.trackId))),this.eVt()&&0===s.length&&0!==this.Cg()){const t=this.nVt();s.push(t)}if(this.eVt()&&0===e.length){const t=this.rVt();e.push(t)}v$(e,this.nN),v$(s,this.hN),function(t,i){let e=!1;for(const s of t){let t=w$(i,s.trackId);t||(t=new FJ(s),i.tt(t),e=!0)}}(n,this.Dl)}hVt(){this.dR||(this.oVt=v(this.od,250))}aVt(){m(this.oVt)}uVt(){this.aVt(),this.hVt()}cVt(){var t;const i=this.EFt.Fy,e=i.media;var s;const n=null!=(s=null==e?void 0:e.duration)?s:NaN,r=(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE||n<0,h=r?1/0:n;this.zk=h,this.lVt();const o=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if(j_(o)){const{start:t,end:i,isMovingWindow:e=r,isLiveDone:s=!1}=o;this.sLt(t,i,e,s)}else if(j_(a)){const[t,i]=a.seekable;this.sLt(t,i,r,!1)}else r?this.sLt(void 0,void 0,!0,!1):this.sLt(0,h,!1,!1)}dVt(){const t=this.EFt.Fy,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||g$(t);this.fVt=i,this.dR!==i&&(this.dR=i,this.dR?this.Co(new ws(this.z_())):this.Co(new vh(this.z_())))}th(){const{playbackRate:t}=this.EFt.Fy;this._Vt!==t&&(this._Vt=void 0,this.fR!==t&&(this.fR=t,this.Co(new Qh(this.z_(),t))))}gVt(){const{playerState:t}=this.EFt.Fy;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=rv.tN;break;case chrome.cast.media.PlayerState.BUFFERING:i=rv.Gn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=rv.eN}this.Y$(i),this.wVt()}sLt(t,i,e,s){j_(t)&&j_(i)?this.T$=new yk(t,i,e,e&&!s):this.T$=void 0}AVt(t,i){this.LYt=null!=i?i:this.LYt,this.bYt=null!=t?t:this.bYt,this.Co(new Ry)}We(t){this.vVt!==t?(this.cR=!0,this.Co(new Ot(this.z_()))):this.vVt=void 0}WP(){if(!this.cR)return;this.cR=!1;const t=this.z_();this.Co(new Tc(t,this.C_())),this.Co(new $s(t))}Mh(){this.U$=!0,this.U_()&&this.Co(new ys(this.z_()))}lVt(){const t=this.Lft,i=this.Td();t===i||j(t)&&j(i)||(this.Lft=i,this.Co(new Mn(i)))}mVt(){const t=this.z_();this.cR||this.pVt===t||(this.pVt=t,this.Co(new Tc(t,this.C_())))}EYt(){this.dR&&(this.dR=!1,this.Co(new vh(this.z_())),this.Y$(rv.tN))}R9(){return this.Ic}L_(){return this.uNt.Np(this.IYt)}z_(){if(this.Ic.Fc){const t=this.EFt.YFt();if(void 0!==t)return t}return this.E9()}E9(){return void 0!==this.yVt?this.IYt+this.yVt:this.U$?this.Td():this.IYt+this.EFt.FFt()}C_(){if(this.MVt)return new Date(this.E9()+this.MVt)}Td(){if(this.Ic.Fc){var t;const i=null==(t=this.Ic.K9[0])?void 0:t.ct;if(void 0!==i&&!j(i))return i}return this.IYt+this.zk}Q_(){return this.vP}U_(){return!this.Ic.Fc&&this.U$}og(){return this.dR}cg(){return this.fR}dg(t){this.fR!==t&&(this._Vt=this.fR,this.fR=t,this.Co(new Qh(this.z_(),t)),this.EFt.dg(t))}pg(){return this.Q$}_g(){return this.Ic.Fc?Ki.oR(0,this.z_()):this.Uo.Np(this.IYt)}Mg(){var t,i;if(this.Ic.Fc)return Ki.aR();let e=null!=(i=null==(t=this.T$)?void 0:t.OJ().Np(this.IYt))?i:Ki.aR();if(e.U>0){const t=e.jn(e.U-1);e=e.GB(Ki.oR(t,this.z_()))}return e}Ng(){return this.cR}S_(){return this.nN}Eg(){return this.hN}Dg(){return this.Dl}nVt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.Ig(),id:"0",name:"",width:this.Cg()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:PJ.vp}}rVt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:PJ.mp}}eVt(){var t,i;return!(void 0!==(null==(t=this.BFt.PFt())?void 0:t.version))||(null==(i=this.BFt.PFt())?void 0:i.sdkType)===WJ.YYt}QFt(t){this.eVt()&&Et(t,0),this.EFt.QFt(t)}Cg(){return this.bYt}Ig(){return this.LYt}Vg(){this.dR&&(this.dR=!1,this.fVt=!1,this.Co(new vh(this.z_()))),this.EFt.Vg()}Gg(){this.dR||(this.dR=!0,this.fVt=!0,this.Co(new ws(this.z_()))),this.EFt.Gg()}Dp(t){if(this.Ic.Fc)return;let i=x.max(0,t-this.IYt);i=x.round(1e6*i)/1e6;const e=this.yVt;this.yVt=i,this.fVt=this.og(),this.vVt=i,this.cR=!0,this.Co(new Ot(this.z_())),void 0===e&&this.a2(i)}a2(t){this.EFt.Dp(t,this.fVt).then(this.TVt(t)).catch(this.UFt)}TVt(t){return()=>{void 0!==this.yVt&&(this.yVt===t?this.yVt=void 0:this.a2(this.yVt))}}Y$(t){this.Q$!==t&&(this.Q$=t,this.Co(new ds(this.z_(),t))),void 0===this.yVt&&this.cR&&t>=rv.iN&&this.WP(),this.wVt()}wVt(){if(this.dR)return void(this.NVt=!1);const t=this.Q$>=rv.eN;this.NVt!==t&&(this.NVt=t,t?this.Co(new Hr(this.z_())):this.Co(new wc(this.z_())))}DVt(){this.SVt||(this.SVt=h.createElement("div"),this.Qo.we.appendChild(this.SVt),this.SVt.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.SVt.style.zIndex="10",ia(this.SVt)),this.SVt.style.display=this.Ic.Fc?"":"none"}IVt(){var t;const i=null==(t=this.Ic.K9[0])?void 0:t.qRt;i&&!this.EVt?(this.EVt=new Qn(this.SVt,!0),this.EVt.PGt=i,this.EVt.yn("clickstart",this.bVt)):this.EVt&&(this.EVt.PGt=i)}LVt(){var t;const i=null==(t=this.Ic.K9[0])?void 0:t.NUt;if(void 0===i||i<0)return void(this.kVt&&(this.kVt.gn(),this.kVt=void 0));if(!this.kVt){var e;const t=null==(e=this.Qo.ba)?void 0:e.mi;this.kVt=new f$(this.Qo.Iu,t),this.SVt.appendChild(this.kVt.we),this.kVt.yn("Yp",this.CVt)}const s=this.EFt.YFt();void 0!==s&&(s<i?this.kVt.XGt(i-s):this.kVt.KGt())}kYt(){return this.IYt}CYt(t){this.IYt=t}g7(t){}Wg(){this.EFt.Wg()}gn(){this.Vo(),this.Ic.gn(),this.EVt&&(this.EVt.e_(),this.EVt=void 0),this.kVt&&(this.kVt.gn(),this.kVt=void 0),this.SVt&&(ei(this.SVt),this.SVt=void 0),this.EFt.xFt(this.YJ),this.EFt.kFt(this.xVt),this.EFt.jFt(this.wYt),this.EFt.fn(Er.SFt,this.OVt),this.EFt.gn()}constructor(i,e,s,n){super(),this.uNt=Ki.aR(),this.MVt=void 0,this.U$=!1,this.vP=void 0,this._Vt=void 0,this.Q$=rv.tN,this.NVt=!1,this.Uo=Ki.aR(),this.T$=void 0,this.cR=!1,this.nN=new Tn,this.hN=new Tn,this.Dl=new sn,this.Lft=NaN,this.yVt=void 0,this.fVt=!1,this.pVt=NaN,this.vVt=void 0,this.oVt=0,this.xVt=(t,i)=>{switch(t){case"buffered":this.uNt=new Ki(i),this.Co(new N(this.z_()));break;case"currentProgramDateTime":this.MVt=new Date(i).getTime()-this.z_();break;case"played":this.Uo=new Ki(i);break;case"seekable":this.cVt();break;case"videoHeight":this.AVt(void 0,i);break;case"videoWidth":this.AVt(i,void 0)}},this.YJ=i=>{switch(i.type){case t.ZA:this.We(i.currentTime);break;case t.XA:this.WP();break;case t.HA:this.Co(new nV(i.representation,i.previousRepresentation));break;case t.KA:this.Co(new BG(i.segmentStartTime,i.error,i.trackType,i.track,i.quality,i.retryCount));break;case t.LA:this.Co(new zF(i.currentTime,i.initDataType,i.initData));break;case t.NA:this.Co(new Le(new Yr(le.CONTENT_PROTECTION_ERROR,i.error,void 0,i.licenseAcquisitionURL,i.status,i.statusText,i.licenseAcquisitionMessage,i.systemCode)));break;case t.DA:this.Co(new gx)}},this.wYt=t=>{this.cVt(),this.dVt(),this.th(),this.gVt(),this.mVt(),this.uVt(),this.sVt(),this.iVt(),this.DVt(),this.IVt(),this.LVt(),t||g$(this.EFt.Fy)&&this.Mh()},this.od=()=>{this.mVt(),this.LVt()},this.OVt=t=>{this.Co(t)},this.UFt=t=>{this.yVt=void 0,this.Co(new gJ(t))},this.bVt=()=>{this.Gg()},this.CVt=()=>{this.Ic.Yp()},this.Qo=i,this.BFt=e,this.EFt=s,this.Ic=new r$(i,s),this.IYt=n.kYt(),this.zk=n.Td()-this.IYt,this.dR=n.og(),this.fR=n.cg(),this.bYt=n.Cg(),this.LYt=n.Ig(),this.EFt.CFt(this.YJ),this.EFt.bFt(this.xVt),this.EFt.OFt(this.wYt),this.EFt.yn(Er.SFt,this.OVt),this.EFt.zFt().then((t=>{this.Co(new wJ(t.bt,t.yc))}),this.UFt)}};function g$(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function w$(t,i){for(const e of t.xw)if(e.Vw===i)return e}function A$(t,i){let e=!1;for(let s=0;s<t.U;s++){const n=t.jw(s);-1===i.indexOf(n.Vw)&&(t.it(n),s--,e=!0)}return e}function v$(t,i){let e=!1;for(const s of t){let t=w$(i,s.trackId);t||(t=new HJ(s),i.tt(t),e=!0)}return e}function m$(t,i){for(const e of i.xw)e.QYt=na(t,e.Vw);return!1}r();var p$=class{b7(t){return Promise.resolve("all")}Yg(){}gn(){}};r();function y$(t,i,e){if(j(t))return e;if(t===1/0){if("live"===e||"dvr"===e)return e;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var M$=[t.kA,t.EA,t.WA,t.qA,t.Sh,t.jh,t.VA,t.ov,t.ZA,t.XA,qo.Mv,qo.Tv,t.HA,t.KA,t.LA,t.NA,t.DA],T$=class extends O{kB(t){if(!t)return;Ph(this.TB&&wh(this.TB),t&&wh(t))||(this.TB=t,this.Co(new Wt(t)))}jVt(t){if(!t)return;const i=rl(t,this.Qo.wd);Ph(this.bc&&wh(this.bc),i&&wh(i))||(this.ja.CYt(0),this.bc=i,this.Co(new Bj(i)),this.ja.EYt())}zVt(t){for(const i of this.rt.xw)if(i.Vw===t)return i;for(const i of this.ht.xw)if(i.Vw===t)return i}get Lvt(){return this.ja}set Lvt(t){const i=this.ja;i&&(i.fn(Er.SFt,this.OVt),i.fn(Er.IFt,this.PVt),i.fn(M$,this.Ds),i.fn(qo.Mw,this.HO),t.CYt(i.kYt()),i.g7(t.R9())),this.ja=t,this.nN.Pw=t.S_(),this.hN.Pw=t.Eg(),this.Dl.Pw=t.Dg(),this.Ic.Pw=t.R9(),i&&i.gn(),t.yn(Er.SFt,this.OVt),t.yn(Er.IFt,this.PVt),t.yn(M$,this.Ds),t.yn(qo.Mw,this.HO)}get ro(){return this.ho}get Oc(){return this.R9()}R9(){return this.Ic}U9(){return this.M9}S_(){return this.nN}L_(){return this.ja.L_().ks()}get BVt(){return this.RVt||this.bc}set BVt(t){this.RVt=t}async $n(t,i){var e;t&&await this.vYt(t,null!=(e=t.ads)?e:[],t.streamType,NaN,0,null!=i?i:0)}async UVt(t){var i;const e=null!=(i=this.RVt)?i:this.bc;if(!e)return;var s;const n=this.RVt?null!=(s=this.RVt.ads)?s:[]:this.y7(),r=this.Qo.Td(),h=this.Qo.Mg(),o=y$(r,h,e.streamType),a=h.length>0?h.start(0):0,u=null!=t?t:this.E9();await this.vYt(e,n,o,r,a,u)}y7(){const t=new gn;return this.Ic.g7(t),t.y7()}C_(){return this.ja.C_()}O_(){return this.TB}get j_(){return this.z_()}set j_(t){this.P_(t)}z_(){return this.ja.z_()}E9(){return this.ja.E9()}P_(t){this.QVt||(this.BFt.AYt()||this.QVt||!this.bc?this.ja.Dp(t):this.$n(this.bc,t))}Td(){return this.ja.Td()}U_(){return this.ja.U_()}Q_(){return this.vP}Y_(){return this.mP}V_(){return this.rN}X_(){return this.Qo.q_}K_(){return this.lR}J_(t){this.lR=t,this.Co(new Ve(this.j_,this.xg)),this.BFt.J_(t)}og(){return this.ja.og()}cg(){return this.ja.cg()}dg(t){this.ja.dg(t)}_g(){return this.ja._g().ks()}wg(){return ii.HT}Ag(t){}pg(){return this.ja.pg()}Mg(){return this.ja.Mg().ks()}Ng(){return this.ja.Ng()}Wa(){return this.bc}async ga(t){this.bc=t,await this.$n(t),this.RVt=void 0,this.ja.EYt()}Dg(){return this.Dl}Ig(){return this.ja.Ig()}Cg(){return this.ja.Cg()}Eg(){return this.hN}Og(){return this.Xk}jg(t){this.Xk=t,this.Co(new Ve(this.j_,this.xg)),this.BFt.jg(t)}get Bg(){return!1}set Bg(t){}Ug(){}Rg(){return this._R}Yg(){}Vg(){this.BFt.AYt()||this.QVt||!this.bc?this.ja.Vg():this.$n(this.bc)}Gg(){this.ja.Gg()}Qg(){this.ho=!0}Fg(){this.TB=void 0,this.ho=!1}ge(){}be(){}async vYt(t,i,e,s,n,r){this.QVt=!0,this.FVt(),this.ja.CYt(n);const h="live"===e||"dvr"===e,o=function(t,i,e){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e}}(n,h,t),a={mYt:t,Oc:i,j_:x.max(0,r-n),ct:s,LX:h?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,pYt:o};try{await this.BFt.vYt(a)}catch(t){this.YVt(t)}finally{this.QVt=!1}}GVt(){this.VVt(this.nN),this.VVt(this.hN),this.WVt(this.Dl)}VVt(t){for(const i of t.xw)this.HVt(i);t.yn(gt.ew,(t=>{this.HVt(t.Lt)}))}WVt(t){for(const i of t.xw)this.qVt(i);t.yn(gt.ew,(t=>{this.qVt(t.Lt)}))}HVt(t){t.yn(jJ.OYt,this.ZMt),t.yn(jJ.jYt,this.XVt),t.yn(jJ.jYt,this.iVt)}qVt(t){t.yn(jJ.xYt,this.ZVt),t.yn(jJ.xYt,this.iVt)}KVt(){const t=[];for(const i of this.rt.xw)i.Rt&&t.push(i.Vw);for(const i of this.ht.xw)i.Rt&&t.push(i.Vw);for(const i of this.nt.xw)i.eA===Ht.Xn&&t.push(i.Vw);this.ja.QFt(t)}JVt(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.BFt.PFt())?void 0:i.version)?e:-1)>=2?t.map((t=>t.o)):[t[0].o]}$Vt(t){this.tWt=t}Zg(){}Kg(){}async Wg(){this.ja.Wg(),this.FVt()}FVt(){this.BO=rv.tN,this.CO=!1,this.jO=!1,this.vP=void 0,this.mP=void 0}async gn(){this.FVt(),this.Vo(),this.Lvt=this.iWt(),this.BFt.fn(xi.SFt,this.OVt),this.BFt.fn(xi.nYt,this.eWt),this.BFt.fn(xi.uv,this.sWt),this.BFt.fn(xi.sYt,this.nWt),this.BFt.fn(xi.rYt,this.rWt),this.BFt.gn()}iWt(){return new zJ(this,this.ja.kYt(),this.ja.z_(),this.ja.Td(),this.ja.U_(),this.ja.og(),this.ja.cg(),this.ja.Cg(),this.ja.Ig())}constructor(t,i){super(t,!0),this.ho=!1,this.tWt=xs,this.BO=rv.tN,this.CO=!1,this.jO=!1,this.QVt=!1,this.RVt=void 0,this.vP=void 0,this.mP=void 0,this.nN=new _e,this.hN=new _e,this.Dl=new Ac,this._R=new Ro,this.rN=new Wc,this.M9=new p$,this.sWt=t=>{var i,e;(j_(t.xg)&&!Ua(t.xg,this.Xk,1e-5)||j_(t.Z_)&&t.Z_!==this.lR)&&(this.Xk=null!=(i=t.xg)?i:this.Xk,this.lR=null!=(e=t.Z_)?e:this.lR,this.Co(new Ve(this.j_,this.Xk)))},this.nWt=()=>{const t=this.BFt.AYt();this.Lvt=t?new _$(this,this.BFt,t,this.ja):this.iWt()},this.PVt=t=>{this.kB(t.bt),this.jVt(t.yc)},this.rWt=t=>{const i=this.zVt(t.Wy);if(!i)return void 0;const e={targetQualityIds:t.oYt};i.BYt(e)},this.OVt=t=>{this.YVt(t.lt)},this.YVt=t=>{this.tWt&&this.tWt(t)},this.eWt=t=>{this.vP=t.lt,this.mP=tm(this.vP),this.Co(new me(this.mP))},this.XVt=t=>{if(!t.enabled)return;const i=this.rt.xw.some((i=>i.Vw===t.trackId))?this.rt:this.ht;for(const e of i.xw)e.Rt&&e.Vw!==t.trackId&&(e.Rt=!1)},this.ZVt=t=>{if(t.mode===Ht.Xn)for(const i of this.nt.xw)i.eA===Ht.Xn&&i.Vw!==t.trackId&&ey(i.zt,t.track.zt)&&(i.eA=Ht.Ch)},this.iVt=Ml((()=>{this.KVt()}),50),this.ZMt=t=>{const i=this.JVt(t.targetQuality),e=t.track;this.BFt.aYt(e.Vw,e.TJ,i)},this.HO=t=>{this.Co(t);const i=t.readyState;!this.CO&&this.BO===rv.tN&&i>=rv.Gn&&(this.CO=!0,this.Co(new ns(t.currentTime))),!this.jO&&this.BO<=rv.Gn&&i>=rv.iN&&(this.jO=!0,this.Co(new ms(t.currentTime))),this.BO<=rv.iN&&i>=rv.eN&&this.Co(new Ct(t.currentTime)),this.BO<=rv.eN&&i===rv.sN&&this.Co(new cs(t.currentTime)),this.BO=i},this.Xk=this.Qo.xg,this.lR=this.Qo.Z_,this.BFt=i,this.BFt.yn(xi.SFt,this.OVt),this.BFt.yn(xi.nYt,this.eWt),this.BFt.yn(xi.uv,this.sWt),this.BFt.yn(xi.sYt,this.nWt),this.BFt.yn(xi.rYt,this.rWt),this.Ic=new mn(this),this.TB=this.Qo.bt,this.bc=this.Qo.Wa(),this.Lvt=new zJ(this,0,this.Qo.E9(),this.Qo.Td(),this.Qo.R_,this.Qo.hg,this.Qo.ag,this.Qo.Lg,this.Qo.Sg),this.GVt()}};r();var N$=class extends Ha{fa(){return new D$(this.lt)}constructor(t){super("error"),this.lt=t}},D$=class extends gg{constructor(t){super("error"),this.error=t}};r();var S$=class extends gg{constructor(t){super("statechange"),this.state=t}};function I$(t,i){let e;return{get casting(){return t.jW},get error(){return t.lt},get receiverName(){return t.hWt},get state(){return t.Lvt},start(){t.Cn()},stop(){t.Wg()},join(){t.oWt()},leave(){t.aWt()},set connectionCallback(t){null==i||i.uWt(t)},get connectionCallback(){return null==i?void 0:i.cWt()},get source(){return e||t.yc},set source(i){e=i,t.yc=i},addEventListener(i,e){const s=As(i,P);t.yn(s,e)},removeEventListener(i,e){const s=As(i,P);t.fn(s,e)}}}r();var E$=class extends ha{get jW(){return this.Lvt===$r.CONNECTING||this.Lvt===$r.CONNECTED}get lt(){return this.vP}get va(){return this.Xa||(this.Xa=I$(this,this.lWt)),this.Xa}get hWt(){var t;return null==(t=this.lWt.dWt())?void 0:t.MYt()}get yc(){return this.Qo?this.Qo.BVt:this.RVt}set yc(t){this.RVt=t?rl(t,this.fWt.wd):void 0,this.Qo&&(this.Qo.BVt=this.RVt,this.RVt&&this.Qo.$n(this.RVt))}get Lvt(){return this.ja}set Lvt(t){let i=t;this._Wt||i!==$r.CONNECTING&&i!==$r.CONNECTED||(i=$r.AVAILABLE),this.ja!==i&&(this.ja=i,this.Co(new S$(this.Lvt)))}async gWt(){if(!this.wWt)throw new b("Chromecast must be initialized before starting a session");await this.wWt,this.lWt.dWt()||await this.lWt.AWt()}async Cn(){this._Wt=!0;try{if(this.Lvt=$r.CONNECTING,await this.gWt(),await this.vWt(),this.Qo){const t=this.fWt.Wa(),i=this.lWt.mWt(t);this.Qo.BVt=i?rl(i,this.fWt.wd):this.RVt,this.Qo.UVt()}this.Lvt=$r.CONNECTED,await this.fWt.Wg()}catch(t){this.pWt(!1).catch(xs),this.Lvt=$r.AVAILABLE,Oi(t)||this.q1(t)}}async oWt(){this._Wt=!0;try{if(this.Lvt=$r.CONNECTING,await this.gWt(),await this.vWt(),this.Qo){const t=this.fWt.Wa(),i=this.lWt.yWt(t);i&&(this.Qo.BVt=rl(i,this.fWt.wd))}this.Lvt=$r.CONNECTED,await this.fWt.Wg()}catch(t){await this.pWt(!0).catch(xs),this.Lvt=$r.AVAILABLE,Oi(t)||this.q1(t)}}async MWt(){this.lWt.dWt()&&await this.Cn()}async vWt(){null!=this.Qo||(this.Qo=this.TWt()),this.vP=void 0,this.fWt.Gg(),await this.YV.NWt(this.Qo)}TWt(){const t=new T$(this.fWt,this.lWt.dWt());return t.$Vt(this.q1),t}DWt(){this.Qo&&(this.Qo.gn(),this.Qo=void 0)}async pWt(t){if(this._Wt=!1,!this.Qo)return;const i=this.Qo.ro,e=this.Qo.Wa(),s=this.Qo.E9();try{if(i){let i;i=t?this.lWt.SWt(e):this.lWt.IWt(e),null!=i||(i=e),await this.YV.EWt(i,i===e),this.fWt.P_(s),this.fWt.Vg()}}finally{this.DWt()}}aWt(){this.jW&&(this.lWt.bWt(!1),this.pWt(!0).catch(this.q1))}Wg(){this.jW&&(this.lWt.bWt(!0),this.pWt(!1).catch(this.q1))}gn(){this.lWt.fn(SJ.SYt,this.LWt),this.Vo(),this.DWt()}constructor(t,i,e,s){super(),this.vP=void 0,this.Xa=void 0,this.Qo=void 0,this.ja=$r.UNAVAILABLE,this._Wt=!1,this.kWt=()=>{this.lWt.yn(SJ.SYt,this.LWt),this.Lvt=this.lWt.CWt()},this.LWt=t=>{const i=t.Lvt;this.Lvt=i,i!==$r.UNAVAILABLE&&i!==$r.AVAILABLE||this.pWt(!1).catch(this.q1)},this.RVt=void 0,this.q1=t=>{t instanceof Ca&&(this.vP=t,this.Co(new N$(t).va))},this.YV=t,this.fWt=i,this.lWt=s,this.Zx=e.chromecast,this.wWt=this.lWt.JV(this.Zx),this.wWt.then(this.kWt).catch(this.q1)}};r();var b$=class extends ha{get jW(){return!1}get lt(){}get hWt(){}get yc(){}set yc(t){}get Lvt(){return $r.UNAVAILABLE}get va(){return this.Xa||(this.Xa=I$(this)),this.Xa}oWt(){ag.Pv("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}aWt(){ag.Pv("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Cn(){ag.Pv("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}Wg(){ag.Pv("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}MWt(){return Promise.resolve()}gn(){}};function L$(t){return{j_:t.z_(),ct:t.Td(),R_:t.R_,lt:t.Q_(),F_:t.Y_(),Z_:t.Z_,hg:t.hg,ag:t.ag,vg:t.vg,Tg:t.Tg,Sg:t.Sg,Lg:t.Lg,xg:t.xg}}r(),r();var k$=class extends O{R9(){return this.Ic}S_(){return this.nN}get G_(){return this.V_()}V_(){return this.rN}Dg(){return this.Dl}Eg(){return this.hN}oN(t){const i=this.Qo;if(i===t)return;let e;this.Q9&&(i.N_(this.iw),e=L$(this));const s=this.O_(),n=this.Rg(),r=this.Ug();if(this.Qo=t,this.nN.Pw=t.ht,this.hN.Pw=t.rt,this.Dl.Pw=t.nt,this.rN.Pw=t.G_,this.Ic.Pw=t.Oc,void 0!==e){au(this,e,L$(this))}const h=this.O_();h!==s&&this.Co(new Wt(h)),this.Rg()!==n&&this.Co(new M),this.Ug()!==r&&this.Co(new rs),this.Q9&&t.m_(this.iw)}async gn(){await super.gn(),this.nN.gn(),this.hN.gn(),this.Dl.gn(),this.rN.gn(),await this.Ic.gn()}constructor(t,i){super(t,i),this.nN=new _e,this.hN=new _e,this.Dl=new Ac,this.rN=new ra,this.nN.Pw=t.ht,this.hN.Pw=t.rt,this.Dl.Pw=t.nt,this.rN.Pw=t.G_,this.Ic=new mn(this),this.Ic.Pw=t.Oc}},C$=class extends k${Wa(){const t=super.Wa();return!t&&this.xWt.jW&&this.xWt.yc?this.xWt.yc:t}ga(t,i){return this.QH.nO((i=>(this.OWt=new Po,this.OWt.l_(i),super.ga(t,this.OWt.a_))),i)}Vg(){super.Vg(),this.wd.cast.strategy!==ow.AUTO||this.xWt.jW||this.xWt.MWt()}NWt(t){return this.QH.nO((i=>this.jWt(t,i)))}EWt(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.QH.nO((e=>this.zWt(t,i,e)))}jWt(t,i){Pi(i),this.PWt.Oc&&this.PWt.Oc.g7(t.Oc),this.BWt=t,this.oN(t),this.BWt.Qg()}async zWt(t,i,e){Pi(e);const s=this.BWt;if(void 0!==s)try{if(t){await this.PWt.Wg(),Pi(e);const s=rl(t,this.PWt.wd);i&&(s.ads=void 0),this.OWt=new Po,this.OWt.l_(e),await this.PWt.ga(s,this.OWt.a_)}i&&this.PWt.Oc&&s.Oc.g7(this.PWt.Oc)}catch(t){Ah(t)}finally{s.Fg(),this.oN(this.PWt),this.BWt===s&&(this.BWt=void 0)}}Wg(){var t;return null==(t=this.OWt)||t.c_(),this.QH.nO((()=>super.Wg()))}async gn(){var t;null==(t=this.OWt)||t.c_(),this.xWt.gn(),await this.EWt(),await this.QH.gn(),await super.gn()}constructor(t,i){super(t),this.QH=new Vi,this.PWt=t,this.wd.cast.strategy!==ow.DISABLED?this.xWt=new E$(this,t,this.wd.cast,i):this.xWt=new b$,this.qQ.FW(this.xWt)}};r();var x$=new class extends i{uWt(t){this.RWt=t}cWt(){return this.RWt}dWt(){return this.UWt}CWt(){switch(this.QWt.getCastState()){case cast.framework.CastState.CONNECTED:return $r.CONNECTED;case cast.framework.CastState.CONNECTING:return $r.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return $r.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return $r.UNAVAILABLE}}async JV(t){await AK(),this.QWt=cast.framework.CastContext.getInstance(),this.QWt.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.YW),this.QWt.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async AWt(){try{const t=await this.QWt.requestSession();if(t)throw t}catch(t){throw new Ca(Wn(t))}}mWt(t){var i;return null==(i=this.RWt)?void 0:i.onStart(t)}IWt(t){var i;return null==(i=this.RWt)?void 0:i.onStop(t)}yWt(t){var i;return null==(i=this.RWt)?void 0:i.onJoin(t)}SWt(t){var i;return null==(i=this.RWt)?void 0:i.onLeave(t)}bWt(t){this.QWt.endCurrentSession(t)}constructor(...t){super(...t),this.UWt=void 0,this.RWt=void 0,this.YW=()=>{const t=this.CWt();this.UWt=t===$r.CONNECTED?new xJ(this.QWt.getCurrentSession()):void 0,this.Co(new OJ(t))}}},O$=new class{get va(){return this.Xa||(this.Xa=function(t){return{initialize(i){const e=t.JV(uw(i));return e.catch(xs),e},startSession(){const i=t.AWt();return i.catch(xs),i},endSession(){t.FWt()}}}(this)),this.Xa}async JV(t){this.wWt||(this.wWt=this.YWt(t)),await this.wWt}async YWt(t){await this.lWt.JV(t)}async AWt(){if(!this.wWt)throw new b("Chromecast must be initialized before starting a session");await this.wWt,this.lWt.dWt()||await this.lWt.AWt()}GWt(){this.lWt.bWt(!1)}FWt(){this.lWt.bWt(!0)}constructor(t){this.wWt=void 0,this.Xa=void 0,this.lWt=t}}(x$),j$={get chromecast(){return O$.va}};Cj((t=>new C$(t,x$)),iu.Y9),r(),r(),r(),r(),r(),r(),r();var z$=class{VWt(t,i,e,s){t.WR.forEach((t=>{if(!this.WWt(t.HWt)){const n=t.qWt(i,e,s);n&&this.XWt(n)}}))}WWt(t){return this.ZWt.get(t)}XWt(t){this.ZWt.set(t.KWt,t),this.JWt.set(t.KWt,t.$Wt),this.tHt.Qa(t.iHt)}w7(t){this.ZWt.has(t.KWt)||(this.JWt.set(t.KWt,t),this.tHt.Qa(t.iHt))}eHt(t){return this.JWt.forEach(t)}sHt(t){return this.ZWt.forEach(t)}nHt(t){let i=!1;return this.ZWt.forEach((e=>{i=e.nHt(t)||i})),i}async gn(){const t=[];this.ZWt.forEach((i=>t.push(i.gn()))),this.JWt.forEach((i=>t.push(i.gn()))),await Promise.all(t),this.ZWt.clear(),this.JWt.clear()}constructor(t){this.tHt=t,this.ZWt=Qt(),this.JWt=Qt()}};r();var Ba=class t extends Ha{fa(){return new P$(this._Qt,this.pL,this.jL,this.yc)}static rHt(i){return new t(Qe.GENERAL,i.pL,i.wQt)}static hHt(i,e){return new t(i._Qt,i.message,i.wQt,e)}constructor(t,i,e,s){super("oHt"),this._Qt=t,this.pL=i,this.jL=e,this.yc=s}},P$=class extends gg{constructor(t,i,e,s){super("aderror"),this.problemType=t,this.message=i,this.errorCode=e,this.source=s}},B$=class extends hI{get aHt(){return this.uHt}get Fc(){let t=!1;return this.cHt((i=>{t=t||i.lHt})),t}get K9(){const t=[];return this.cHt((i=>{const e=i.K9;e.length&&t.push(...e)})),t}get t7(){let t=null;return this.cHt((i=>{null!=t||(t=i.t7)})),t}get i7(){const t=[];return this.cHt((i=>{t.push(...i.i7)})),t}get e7(){const t=[];return this.cHt((i=>{t.push(...i.e7)})),t}g7(t){this.cHt((i=>{i.g7(t)}))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=qu(this)}m1(t,i,e){try{this.dHt=e;const s=ta.dL.qR(t),n=this.uHt.WWt(s.HWt);if(!n)throw new It(Qe.ADBLOCK,void 0,"Ads could not be loaded.");i!==ho.n7&&this.V4||this._Ht.fHt(n),s.m1(t,i,n,this.dHt)}catch(i){0,this.Co(Ba.hHt(i,t.sources))}}Yp(){this.cHt((t=>{t.Yp()}))}w7(t){this.uHt.w7(t)}gHt(t){this.uHt.sHt((i=>{i.gHt(t)}))}nHt(t){return this.uHt.nHt(t)}cHt(t){return this.uHt.eHt(t)}Yg(){this.uHt.sHt((t=>t.Yg()))}async Zn(){this.V4=!1;const t=[];this.uHt.sHt((i=>t.push(i.Wg()))),await Promise.all(t)}async gn(){this.Vo(),this._Ht.fn(t.jh,this.j8),this.fn("oHt",this.wHt),await this.uHt.gn()}constructor(i){super(),this._Ht=i,this.dHt=!1,this.V4=!1,this.Xa=void 0,this.wHt=t=>{if(!this.dHt)return;const i=new lc(Zv.ADVERTISEMENT_ERROR,t.pL),e=new ce(le.AD_BLOCKER_DETECTED,t.pL+" Turn off your AdBlocker and try again.",i);this._Ht.hB(e)},this.j8=()=>{this.V4=!0},i.yn(t.jh,this.j8),this.uHt=new z$(this),this.yn("oHt",this.wHt)}},R$=class extends k${R9(){return this.AHt}get vHt(){return this.mHt}Yg(){this.PWt.Yg(),this.AHt.Yg()}Vg(){void 0===this.vP?(void 0!==this.pHt&&this.yHt(this.pHt),super.Vg()):this.Co(new me(this.vP))}async ga(t,i){if(Pi(i),await super.ga(t,i),Pi(i),!t||!t.ads)return;const e=Boolean(t.blockContentIfAdError);this.AHt.gHt(t.playAdsAfterTime);for(const i of t.ads)this.AHt.m1(i,ho.n7,e)}async Wg(){this.vP=void 0,this.DR=void 0,await this.AHt.Zn(),this.EWt(),await super.Wg()}yHt(t){this.MHt=this.Qo.ag;const i=this.Qo.xg,e=this.Qo.Z_;t.jg(i),t.J_(e),this.LB&&(this.PWt.be(),t.ge()),this.mHt=t,this.pHt=void 0,this.oN(t)}fHt(t){void 0===this.mHt&&(this.pHt=t)}EWt(){this.pHt=void 0,void 0!==this.mHt&&(this.PWt.ag=this.MHt,this.PWt.xg=this.xg,this.PWt.Z_=this.Z_,this.LB&&(this.mHt.be(),this.PWt.ge()),this.oN(this.PWt),this.mHt=void 0)}Q_(){var t;return null!=(t=this.DR)?t:super.Q_()}Y_(){var t;return null!=(t=this.vP)?t:super.Y_()}hB(t){void 0===this.Y_()&&(this.vP=t,this.DR=ne(t),this.Co(new me(t)))}ge(){this.LB=!0,super.ge()}be(){this.LB=!1,super.be()}$g(t){return void 0===this.mHt&&this.AHt.nHt(t)}async gn(){await this.AHt.gn(),this.EWt(),await super.gn()}constructor(t,i){super(t),this.vP=void 0,this.DR=void 0,this.LB=!0,this.MHt=1,this.PWt=t,this.AHt=new B$(this),this.AHt.aHt.VWt(i,t,this,t.wd)}};Cj((t=>new R$(t,ta.dL)),iu.F9),r(),r(),r();var U$=0!==li.Qb?li.Qb:li.XE,Q$=li.Ga&&U$<12,F$=class extends O{get j_(){return this.z_()}set j_(t){this.P_(t)}E9(){return this.Qo.E9()}get ct(){return this.Td()}get G_(){return this.rN}get yg(){return this.Mg()}get zg(){return this.NP}get iHt(){return this.THt}get ht(){return this.nN}get lHt(){return this._Ht.vHt===this}L_(){return Ki.aR().ks()}C_(){}x_(t){}cg(){return 1}dg(t){}_g(){return new Ki([0,this.j_]).ks()}Ng(){return!1}Dg(){return this.Dl}Eg(){return this.hN}cs(){return this.Rg().cs}Rg(){return this._R}ka(){}async gn(){this.Vo(),this.nN.gn(),this.hN.gn(),this.Dl.gn(),this.THt.gn(),this.Qo.fn(t.SA,this.Ds)}NHt(){Q$&&this.DHt(),this.lHt||this._Ht.yHt(this)}EWt(){this.lHt&&(Q$&&this.SHt(),li.nL&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),ag.Ys.ctt&&this.Qo.Kg(),this._Ht.EWt())}DHt(){this.IHt||(Ys.addEventListener("blur",this.EHt),Ys.addEventListener("focus",this.bHt),this.IHt=!0)}SHt(){Ys.removeEventListener("blur",this.EHt),Ys.removeEventListener("focus",this.bHt),this.IHt=!1}LHt(){requestAnimationFrame((()=>this.Qo.be()))}constructor(i,e){super(i,!0),this._Ht=e,this.IHt=!1,this.hN=new Tn,this.nN=new Tn,this.Dl=new sn,this.rN=new Wc,this.THt=new hI,this._R=new Ro,this.NP=new Mu,this.EHt=()=>{this.Qo.ge()},this.bHt=()=>{this.LHt()},this.Qo.yn(t.SA,this.Ds)}};r(),r();var Y$=0,G$="theoplayer-wrapper",V$=class t{get kHt(){return this.CHt}get xHt(){return this.OHt}get jHt(){return this.zHt}PHt(t){const i=this.BHt===t.timeOffset;return!this.RHt&&i}get UHt(){return this.QHt}get FHt(){return TJ(this.YHt)&&!this.RHt}get BHt(){return this.YHt}get Kl(){return this.GHt}VHt(){if(j(this.GHt)){let t=this.BHt;if(void 0===t)return void(this.GHt=0);if("string"==typeof t&&TJ(t)){const i=this.Qo.Td();j(i)||i===1/0||(t=hc(t)*i)}j(t)||(this.GHt=t)}}get WHt(){return this.HHt}set WHt(t){this.HHt=t}get qHt(){return this.XHt}set qHt(t){this.XHt=t,this.ZHt=!1}get KHt(){return this.JHt}$Ht(t){this.JHt.push(t)}tqt(){if(!this.RHt){let t,i;const e=this.CHt===ho.n7&&void 0===this.iqt&&1===this.OHt.length,s=this.OHt[0];pJ(s.sources.type)||e?t=s.sources.src:i=this.eqt(),this.RHt={sqt:this.Qo.we.offsetWidth,nqt:this.Qo.we.offsetHeight,rqt:this.Qo.we.offsetWidth,hqt:this.Qo.we.offsetHeight,oqt:this.m9,aqt:this.lR,uqt:t,cqt:i,lqt:s.omidAccessModeRules}}return this.RHt}eqt(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.OHt.map(((t,i)=>this.dqt(t.sources,i))).join("\n")+"</vmap:VMAP>"}dqt(t,i){const e=this.fqt(),s=t.src;return'<vmap:AdBreak timeOffset="'+e+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.Vw+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+G$+"-"+this.Vw+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}fqt(){if(0===this.BHt)return"start";if(this.BHt===1/0)return"end";const t=this.BHt;if("string"==typeof t&&TJ(t)){const i=hc(t)*this.Qo.Td();return js.iFt(i)}return js.iFt(this.BHt||0)}_qt(t){this.OHt.push(t)}gqt(t){const i=G$+"-"+this.Vw+"-";for(const e of t)if(Kg(e,i)){const t=Number(e.slice(i.length));if(!j(t)&&t>=0&&t<this.OHt.length)return t}return-1}static wqt(t){if(void 0!==t)return-1===t?1/0:t}Aqt(){this.QHt=!0}get AN(){return this.m9}set AN(t){this.m9=t}get Z_(){return this.lR}set Z_(t){this.lR=t}constructor(i,e,s,n){this.CHt=e,this.Qo=s,this.zHt=n,this.GHt=NaN,this.HHt=!1,this.XHt=!1,this.QHt=!1,this.JHt=[],this.m9=!1,this.lR=!1,this.OHt=[],this.Vw=++Y$,this.iqt=i.timeOffset,this.YHt=t.wqt(this.iqt),this.VHt(),this.OHt.push(i)}};r();var W$,H$=class{get vqt(){return this.mqt.vqt}get pqt(){return this.mqt.pqt}get i7(){return this.mqt.i7}get t(){return this.mqt.t}gHt(t){this.yqt=t}Mqt(t){return!(this.vqt&&!this.vqt.UHt&&"nonlinear"!==this.pqt.Tqt)||this.vqt.Kl>t.Kl&&this.vqt.Kl!==t.Kl}Nqt(t){if(t.length)return t.sort(((t,i)=>t.Kl-i.Kl))[0]}Dqt(){if(this.i7.length)return this.Nqt(this.Sqt(this.t.z_()))}Iqt(){if(!(void 0!==this.yqt&&this.yqt>=0))return this.i7.filter((t=>!t.WHt&&0===t.Kl&&t!==this.vqt))[0]}Sqt(t){if(!this.Eqt&&(this.Eqt=!this.i7.some((t=>j(t.Kl))),!this.Eqt))return[];const i=this.i7.filter((i=>!i.WHt&&!j(i.Kl)&&t<=i.Kl));return void 0===this.yqt?i:i.filter((t=>void 0===t.BHt||t.Kl>this.yqt))}constructor(t){this.Eqt=!1,this.mqt=t,this.yqt=void 0}};!function(t){t[t.bqt=0]="bqt",t[t.Lqt=1]="Lqt",t[t.kqt=2]="kqt"}(W$||(W$={}));var Mo,Nc,zn,Gn,q$=class{Yg(){this.bo=!0,this.Cqt&&this.xqt()}Oqt(t,i){this.jqt(t,i);const e=H_(this.i7,(i=>i.PHt(t)));if(e)e._qt(t);else{var s;const e=new V$(t,i,this.Qo,null==(s=t.replaceContent)||s);this.zqt.push(e),2===this.Pqt&&this.Rqt.Bqt(e.Kl,e,e.BHt),this.Uqt(i,e)}}get pqt(){return this.Qqt}get i7(){return this.zqt}get t(){return this.Qo}get Fqt(){return Boolean(this.avt)}get Pqt(){return this.Yqt}Gqt(){if(Et(this.i7,this.vqt),this.vqt){for(const t of this.vqt.KHt)this.Rqt.Vqt();this.vqt=void 0}}Wqt(){for(const t of this.zqt)for(const i of t.KHt)this.Rqt.Hqt(i,!0);Ri(this.zqt)}async qqt(t){this.Gqt(),this.Xqt=!0,this.vqt=t,this.Zqt=t.Kl,this.avt=this.Kqt(t),await this.avt,this.avt=void 0}async Kqt(t){this.Jqt(t);const i=t.tqt(),e=this.Qqt.$qt(i);t.WHt=!0;try{await e,t.kHt===ho.s7&&this.Qqt.tXt()}catch(t){0,this.vqt=void 0,await this.xqt()}}Jqt(t){this.bo?t.AN=!0:t.AN=this._Ht.AN,t.Z_=this._Ht.Z_}iXt(){var t;return null!=(t=this.eXt.Iqt())?t:this.eXt.Dqt()}async xqt(){if(this.vqt&&!this.vqt.UHt)return this.avt;const t=this.iXt();t&&await this.qqt(t)}get vqt(){return this.sXt}set vqt(t){this.sXt=t}get Xqt(){return this.nXt}set Xqt(t){this.nXt=t}Zn(){this.Gqt(),Ri(this.zqt),this.Zqt=0,this.vqt=void 0,this.avt=void 0,this.Xqt=!1}qHt(){this.Xqt=!1,this.vqt&&(this.vqt.qHt=!0)}async Uqt(t,i){t===ho.s7&&this.bo&&this.eXt.Mqt(i)&&!this.Fqt&&"linear"!==this.Qqt.Tqt&&(!this.vqt||this.vqt&&this.vqt.WHt)&&(await Promise.resolve(),await this.qqt(i))}Aqt(){this.vqt&&this.vqt.Aqt()}get rXt(){if(this.Fqt||this.Xqt)return!1;if(this.vqt&&!this.vqt.UHt)return!1;return!!this.zqt.filter((t=>this.vqt!==t)).length&&Boolean(this.iXt())}async hXt(){if(!this.rXt)return void 0;const t=this.iXt();t&&await this.qqt(t)}jqt(t,i){const e=t.sources.type,s=i===ho.n7&&void 0===t.timeOffset,n=pJ(e)||s?1:2;n!==this.Yqt&&(this.Yqt=n,this.Wqt(),this.Qqt.JYt&&!this.Fqt&&"linear"!==this.Qqt.Tqt&&(this.Qqt.JYt.e_(),this.vqt=void 0,this.avt=void 0),this.Zqt=0,this.Cqt=!0)}gHt(t){this.eXt.gHt(t)}gn(){this.Qo.fn(t.EA,this.fQ)}constructor(i,e,s,n,r){this.Yqt=0,this.avt=void 0,this.nXt=!1,this.fQ=()=>{const t=this.zqt.filter((t=>t.FHt));for(const i of t){i.VHt();const t=i.BHt;this.Rqt.oXt(t,i.Kl)}this.bo&&this.rXt&&this.xqt()},this.zqt=[],this.Qqt=i,this.bo=!1,this.Cqt=!1,this.Qo=e,this._Ht=s,this.vqt=void 0,this.Zqt=0,this.eXt=new H$(this),this.M9=n,this.Rqt=r,this.Qo.yn(t.EA,this.fQ)}};function X$(t,i){if(t===Mo.aXt){const t=i;return{uXt:t.adBreakDuration,cXt:t.adPosition,j_:t.currentTime,ct:t.duration,lXt:t.totalAds}}return i}function Z$(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return Gn.dXt;case google.ima.AdError.Type.AD_PLAY:return Gn.fXt}}function K$(t){return lt(t)&&function(t){return"function"==typeof t}(t.getVastErrorCode)}function J$(t){const i=t.getInnerError(),e=i&&K$(i)?J$(i):void 0;return{pL:t.getMessage(),wQt:t.getErrorCode(),_Xt:t.getVastErrorCode(),hA:Z$(t.getType()),gXt:e}}function $$(t){if(j_(t))return t}r(),r(),function(t){t.wXt="contentResumeRequested",t.AXt="contentPauseRequested",t.vXt="click",t.EA="durationChange",t.mXt="expandedChanged",t.pXt="start",t.yXt="impression",t.Dv="pause",t.MXt="resume",t.aXt="adProgress",t.TXt="adBuffering",t.NXt="firstQuartile",t.BUt="midpoint",t.DXt="thirdQuartile",t.RUt="complete",t.SXt="userClose",t.IXt="linearChanged",t.EXt="loaded",t.bXt="adCanPlay",t.LXt="adMetadata",t.kXt="adBreakReady",t.CXt="interaction",t.xXt="allAdsCompleted",t.OXt="skip",t.jXt="skippableStateChanged",t.zXt="log",t.PXt="viewableImpression",t.BXt="volumeChange",t.RXt="mute"}(Mo||(Mo={})),r(),(Nc||(Nc={})).UXt="adError",r(),function(t){t[t.QXt=-1]="QXt",t[t.FXt=-1]="FXt",t[t.YXt=-1]="YXt",t[t.GXt=101]="GXt",t[t.VXt=102]="VXt",t[t.WXt=200]="WXt",t[t.HXt=201]="HXt",t[t.qXt=202]="qXt",t[t.XXt=300]="XXt",t[t.ZXt=301]="ZXt",t[t.KXt=302]="KXt",t[t.JXt=303]="JXt",t[t.$Xt=400]="$Xt",t[t.tZt=402]="tZt",t[t.iZt=403]="iZt",t[t.eZt=405]="eZt",t[t.sZt=500]="sZt",t[t.nZt=501]="nZt",t[t.rZt=-1]="rZt",t[t.hZt=503]="hZt",t[t.oZt=602]="oZt",t[t.aZt=900]="aZt",t[t.uZt=901]="uZt",t[t.cZt=1005]="cZt",t[t.lZt=1007]="lZt",t[t.dZt=1009]="dZt",t[t.fZt=1010]="fZt",t[t._Zt=1011]="_Zt",t[t.gZt=1012]="gZt",t[t.wZt=1013]="wZt",t[t.AZt=1020]="AZt",t[t.vZt=1021]="vZt",t[t.mZt=1101]="mZt",t[t.pZt=1204]="pZt",t[t.yZt=1205]="yZt",t[t.MZt=1300]="MZt",t[t.TZt=-1]="TZt",t[t.NZt=-1]="NZt",t[t.DZt=-1]="DZt",t[t.SZt=-1]="SZt"}(zn||(zn={})),function(t){t.dXt="adLoadError",t.fXt="adPlayError"}(Gn||(Gn={})),r(),r();var t0=class extends i{IZt(t){this.Qqt.Co(t)}EZt(t){this.$Yt=t,this.$Yt.yn(Nc.UXt,this.bZt),this.$Yt.yn(Mo.AXt,this.LZt),this.$Yt.yn(Mo.wXt,this.kZt),this.$Yt.yn(Mo.xXt,this.CZt),this.$Yt.yn(Mo.pXt,this.xZt),this.$Yt.yn(Mo.RUt,this.OZt),this.$Yt.yn(Mo.OXt,this.jZt),this.$Yt.yn(Mo.SXt,this.zZt),this.$Yt.yn(Mo.vXt,this.PZt),this.$Yt.yn(Mo.bXt,this.BZt),this.$Yt.yn(Mo.Dv,(()=>{this.Qqt.hg||(this.Qqt.RZt(!0),this.Qqt.Co(new ws(this.Qqt.j_))),this.UZt(!0)})),this.$Yt.yn(Mo.MXt,(()=>{this.Qqt.hg&&(this.Qqt.RZt(!1),this.Qqt.Co(new vh(this.Qqt.j_)))})),this.$Yt.yn(Mo.RXt,(()=>{const i=t.Og();i>=0&&this.QZt(i)})),this.$Yt.yn(Mo.BXt,(()=>{const i=t.Og();i>=0&&this.QZt(i)})),this.$Yt.yn(Mo.LXt,(t=>{this.YZt.FZt(t.type)})),this.$Yt.yn(Mo.EA,(t=>{t.o7&&this.GZt(t.o7.ct)})),this.$Yt.yn(Mo.zXt,(async t=>{const i=t.VZt.adError,e=K$(i)?J$(i):void 0;e&&(this.WZt(e)?await this.HZt(t):this.qZt(e)?await this.XZt(e):this.ZZt(e)&&this.KZt(e))})),this.$Yt.yn(Mo.EXt,(t=>{if(t.o7&&(this.Qqt.qHt(),this.YZt.JZt(t.o7),this.$Zt=0,t.o7.tKt)){var i;const t=this.Qqt.vg,e=rv.tN;this.Qqt.F$(e);const s=this.Qqt.j_,n=this.Qqt.vg;n!==t&&this.IZt(new Fv(s,n)),null==(i=this.$Yt)||i.jg(this.Qqt.iKt()),this.IZt(new ns(s,e))}})),this.$Yt.yn([Mo.TXt,Mo.yXt,Mo.NXt,Mo.BUt,Mo.DXt],(t=>{t.o7&&this.YZt.eKt(t.o7,t.type,this.Qqt.j_)})),this.$Yt.yn(Mo.NXt,this.sKt),this.$Yt.yn(Mo.aXt,this.nKt)}async switchToPlayerIfNoNextAd(){if(this.$Yt){const t=this.$Yt.rKt();t&&this.hKt(t)||(this.Qqt.rXt()?await this.Qqt.hXt():(this.Qqt.oKt(),this.Qo.hg&&!this.Qo.R_&&this.Qo.Vg()))}else if(this.Qqt.rXt())await this.Qqt.hXt();else{const t=this.Qqt.hg;this.Qqt.oKt(),t||this.Qo.Vg()}}hKt(t){const i=t.aKt,e=null==i?void 0:i.lXt;return(null==i?void 0:i.cXt)!==e}e$(){this.Qqt.jc&&(m(this.Qqt.jc),this.Qqt.jc=null)}ZZt(t){return t.hA===Gn.dXt}qZt(t){return t.hA===Gn.fXt}WZt(t){return t.wQt===zn.dZt}async XZt(t){var i;this.KZt(t);const e=[zn.$Xt,zn.uZt,zn.vZt,zn.yZt];var s;this.Qqt.p7||na(e,t.wQt)||na(e,null==(i=t.gXt)?void 0:i.wQt)||(this.Qqt.uKt.Xqt=!1,null==(s=this.Qqt.uKt.vqt)||s.Aqt(),await this.switchToPlayerIfNoNextAd())}KZt(t){this.Qqt.cKt(t)}async lKt(){this.YZt.Vqt(),this.Qqt.Aqt(),"nonlinear"===this.Qqt.Tqt&&(this.YZt.dKt(-1,!1),this.Qqt.fKt(void 0)),"nonlinear"!==this.Qqt.Tqt&&"none"!==this.Qqt.Tqt||this.Qqt.rXt()&&await this.Qqt.hXt(),this.Qqt._Kt(),this.Qqt.lHt?this.Qqt.EWt():this.gKt()&&this.Qo.Co(new ys(this.Qo.z_()))}gKt(){return this.Qqt.wKt&&!this.Qqt.AKt&&this.Qo.R_}setCountdownTimer(){this.e$(),this.Qqt.jc=v((()=>this.UZt()),250)}async HZt(t){void 0!==t.o7&&(this.Qqt.uKt.Xqt=!1,this.Qqt.Aqt(),this.Qqt.rXt()?await this.Qqt.hXt():this.Qqt.RZt(!0))}GZt(t){this.Qqt.ct!==t&&t>=0&&(this.Qqt.p$(t),this.IZt(new Mn(this.Qqt.ct)))}QZt(t){this.Qqt.iKt()!==t&&(0===t?this.Qqt.vKt(t,!0,!1):this.Qqt.vKt(t,!1,!1))}async mKt(){this.Qqt.pKt&&void 0!==this.Qo.Q_()&&(this.yKt=new Po,await this.Qo.ga(this.Qo.Wa(),this.yKt.a_),this.MKt&&this.Qo.P_(this.MKt),this.MKt=void 0)}UZt(t){if(this.$Yt){const t=this.$Yt.TKt();t>this.Qqt.ct&&this.GZt(x.round(t))}const i=this.Qqt.j_;(t||!this.Qqt.hg&&i!==this.Qqt.NKt)&&(this.Qqt.Co(new Tc(i,void 0)),this.Qqt.NKt=i)}Zn(){this.yKt&&(this.yKt.c_(),this.yKt=void 0),this.DKt=!1,this.$Zt=0}gn(){this.Zn(),this.Vo()}constructor(t,i,e){super(),this.Qqt=t,this.Qo=i,this.YZt=e,this.DKt=!1,this.yKt=void 0,this.MKt=void 0,this.$Zt=0,this.sKt=t=>{if(!t.o7||!t.o7.aKt)return;const i=t.o7.aKt;this.YZt.SKt(i._Et,i.lXt,i.ZYt)},this.nKt=t=>{var i,e,s;if(this.$Zt>=5)return;this.$Zt++;const n=t.VZt;if(!function(t){return lt(t)&&void 0!==t.uXt&&void 0!==t.lXt}(n))return;const r=null==(i=null==(e=this.$Yt)?void 0:e.rKt())||null==(s=i.aKt)?void 0:s._Et;void 0!==r&&this.YZt.SKt(r,n.lXt,n.uXt)},this.bZt=async t=>{t.VZt.IKt&&await this.XZt(t.VZt.IKt)},this.CZt=async()=>{this.DKt=!0,this.Qqt.Aqt(),await this.kZt()},this.xZt=t=>{if(!t.o7)return;const i=t.o7;this.Qqt.fKt(i),this.Qqt.ge(),this.Qqt.EKt(),this.YZt.bKt(i);const e=i.ct;if(this.GZt(e),i.tKt){const t=this.Qqt.j_,i=this.Qqt.vg;this.Qqt.F$(rv.eN),this.IZt(new ms(t,i)),this.IZt(new Ct(t,i)),this.IZt(new cs(t,i)),this.Qqt.hg||this.IZt(new Hr(this.Qqt.j_)),this.setCountdownTimer(),this.UZt(!0)}else this.Qqt.EWt(),this.Qo.ge(),this.Qqt.hg||this.Qo.Vg()},this.OZt=t=>{var i;if(!t.o7)return;const e=t.o7;if(this.e$(),this.YZt.dKt(this.Qqt.ct,e.tKt),this.Qqt.vg!==rv.tN){const t=rv.tN;this.Qqt.F$(t);const i=this.Qqt.j_;this.IZt(new Fv(i,t))}this.GZt(NaN),this.Qqt.LKt=!1,null==(i=this.$Yt)||i.jg(this.Qqt.iKt())},this.jZt=t=>{t.o7&&(this.OZt(t),this.YZt.jZt(t.o7,this.Qqt.j_,this.Qqt.ct))},this.zZt=t=>{t.o7&&(this.YZt.dKt(-1,t.o7.tKt),this.Qqt.Aqt(),!t.o7.tKt&&this.Qqt.rXt()&&this.Qqt.hXt())},this.PZt=t=>{t.o7&&(t.o7.tKt?this.Qqt.Gg():this.Qo.Gg())},this.BZt=()=>{var t;(this.Qqt.LKt=!0,this.Qqt.kKt)&&(null==(t=this.$Yt)||t.Gg(),this.Qqt.kKt=!1)},this.LZt=t=>{var i;if(!t.o7)return;this.Qqt.pKt&&(this.MKt=this.Qo.z_(),this.Qo.Zg(),this.Qo.Bg=!0),this.Qqt.CKt=!0;const e=t.o7;this.YZt.Md(e);const s=e.ct;this.Qqt.fKt(e),this.GZt(s),this.Qqt.RZt(!1),this.Qqt.ge(),this.Qqt.NHt(),this.Qqt.pKt||this.Qo.be(),this.Qo.Gg(),this.Qqt.xKt(e);0===(null==(i=e.aKt)?void 0:i._Et)||this.Qqt.Co(new wc(this.Qqt.j_))},this.kZt=async t=>{const i=null==t?void 0:t.o7;this.Qqt.CKt=!1,"linear"===this.Qqt.Tqt&&this.YZt.Pd(),i&&i.ct>=0&&this.GZt(i.ct),this.Qo.Td()===1/0&&this.Qqt.OKt(),this.Qqt.LKt=!1,this.DKt&&await this.lKt(),this.Qqt.RZt(!0);try{await this.mKt()}catch(t){return void(Oi(t)||this.Co(new yr(t)))}if(this.Qqt.EWt(),this.Qqt.be(),this.Qo.R_||this.Qo.Vg(),i&&this.Qqt.fKt(i),this.Qqt.wKt){if(this.Qqt.pKt){var e;const t=this.Qo.Ug(),i=null==(e=this.Qo.bt)?void 0:e.src;t&&i&&(t.src=i)}this.Qqt.AKt=!0}this.Qo.Bg=!1,this.Qqt.rXt()&&await this.Qqt.hXt()}}};r(),r(),r();var Ur,i0,e0=class extends sh{get Oc(){return this.Ic}get ZYt(){return this.jKt}set ZYt(t){this.jKt=t}get KYt(){return this.zKt}set KYt(t){this.zKt=t}set _Et(t){this.cFt=t}get _Et(){return this.cFt}PKt(){this.BKt=!0}RKt(t){this.Ic.push(t)}get fg(){return this.BKt}constructor(t,i,e){super(),this.jKt=t,this.zKt=i,this.cFt=e,this.Ic=[],this.BKt=!1}},s0=class extends e0{get XYt(){return eh.VYt}constructor(t,i,e){super(-1,-1,t),this.UKt=i,this.QKt=e}};r(),r(),function(t){t.TQt="linear",t.NQt="nonlinear",t.KT="unknown"}(Ur||(Ur={})),function(t){t.NONE="none",t.READY="ready"}(i0||(i0={}));var n0=class extends XJ{FKt(t,i,e,s,n,r){this.NN=t,this.Kk=i,this.Jk=e,this.zk=s,this.ERt=n,this.DUt=r,this.YKt="ready"}get GKt(){return this.YKt}get IRt(){return this.ERt}get ct(){return this.zk}J9(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}get Ti(){return this.Jk}get o(){return this.NN}get NUt(){return this.DUt}get ji(){return this.Kk}get Tqt(){return this.VKt}get qRt(){}fGt(){return""}AGt(){return""}wGt(){return""}constructor(t,i){super(),this.VKt=i,this.NN=void 0,this.DUt=void 0,this.Kk=void 0,this.Jk=void 0,this.zk=void 0,this.ERt=[],this.YKt="none",this.Xl=t}};function Kn(t){return{adSystem:void 0,creativeId:void 0,universalAdIds:[],get readyState(){return t.GKt},get adBreak(){return t.Xl.J9()},get duration(){return t.ct},get companions(){return t.IRt.map((t=>t.J9()))},get clickThrough(){return t.qRt},get width(){return t.ji},get type(){return t.Tqt},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.NUt},get integration(){return t.XYt}}}r(),r();var r0=class{get RRt(){return this.URt}get WRt(){return""}get WKt(){return this.HKt}get qRt(){return this.XRt}get Ti(){return this.Jk}get eQt(){return this.qKt}get ji(){return this.Kk}J9(){return this.Xa||(this.Xa=function(t){return{get adSlotId(){return t.RRt},get altText(){return t.WRt},get contentHTML(){return t.WKt},get clickThrough(){return t.qRt},get height(){return t.Ti},get resourceURI(){return t.eQt},get width(){return t.ji}}}(this)),this.Xa}XKt(t){const i=function(t){try{return FK(t,"text/html")}catch(t){return}}(t.O);i&&(this.XRt=h0(i,"a","href"),this.qKt=h0(i,"img","src"))}constructor(t){this.Xa=void 0,this.XRt=void 0,this.qKt=void 0,this.Kk=t.ji,this.Jk=t.Ti,this.HKt=t.O,this.URt=t.RRt,this.XKt(t)}};function h0(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}r();var o0=class extends n0{set ZKt(t){this.KKt=t}get ZKt(){return this.KKt}get XYt(){return eh.so}get HBt(){var t;return null==(t=this.JKt)?void 0:t.HBt}get $Kt(){var t;return null==(t=this.JKt)?void 0:t.PRt}get vRt(){var t;return null==(t=this.JKt)?void 0:t.vRt}get kP(){var t;return null==(t=this.JKt)?void 0:t.kP}get tJt(){var t,i;return null!=(i=null==(t=this.JKt)?void 0:t.tJt)?i:[]}get iJt(){var t,i;return null!=(i=null==(t=this.JKt)?void 0:t.iJt)?i:[]}get eJt(){var t,i;return null!=(i=null==(t=this.JKt)?void 0:t.eJt)?i:[]}fa(){return function(t,i){return Ou(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get adSystem(){return i.HBt},get apiFramework(){return i.$Kt},get creativeId(){return i.vRt},get title(){return i.kP},get wrapperAdIds(){return i.tJt},get wrapperAdSystems(){return i.iJt},get wrapperCreativeIds(){return i.eJt}})}(Kn(this),this)}sJt(t){this.JKt=t;const i=a0(t);this.FKt(t.dUt,t.nJt,t.rJt,t.ct,i,-1)}constructor(t,i){super(t,i),this.KKt=0,this.JKt=void 0}};function a0(t){return t.eRt.map((t=>new r0(t)))}var u0=class extends n0{fa(){return function(t,i){return Ou(t,{get adSystem(){return i.HBt},get apiFramework(){return i.$Kt},get bitrate(){return i.hJt},get contentType(){return i.IP},get creativeId(){return i.vRt},get mediaUrl(){return i.oJt},get title(){return i.kP},get traffickingParameters(){return i.aJt},get traffickingParametersString(){return i.uJt},get wrapperAdIds(){return i.tJt},get wrapperAdSystems(){return i.iJt},get wrapperCreativeIds(){return i.eJt},get universalAdIds(){return i.nRt}})}(Kn(this),this)}sJt(t){this.JKt=t,this.FKt(t.dUt,t.nJt,t.rJt,t.ct,a0(t),t.cJt),this.VKt=t.tKt?Ur.TQt:Ur.NQt}get XYt(){return eh.VYt}get HBt(){return this.JKt?_h(this.JKt.HBt):void 0}get $Kt(){return this.JKt?_h(this.JKt.PRt):void 0}get hJt(){return this.JKt?this.JKt.lJt:0}get IP(){return this.JKt?_h(this.JKt.IP):void 0}get vRt(){return this.JKt?_h(this.JKt.vRt):void 0}get dJt(){return this.JKt?_h(this.JKt.dJt):void 0}get oJt(){var t;const i=null==(t=this.JKt)?void 0:t.oJt;return j_(i)?i:this.fJt}set oJt(t){this.fJt=t}get kP(){var t;return null==(t=this.JKt)?void 0:t.kP}get aJt(){return this.JKt?_h(this.JKt.aJt):void 0}get uJt(){return this.JKt?_h(this.JKt.uJt):void 0}get tJt(){var t,i;return null!=(i=null==(t=this.JKt)?void 0:t.tJt)?i:[]}get iJt(){var t,i;return null!=(i=null==(t=this.JKt)?void 0:t.iJt)?i:[]}get eJt(){var t,i;return null!=(i=null==(t=this.JKt)?void 0:t.eJt)?i:[]}get nRt(){var t,i;return null!=(i=null==(t=this.JKt)?void 0:t.nRt.map((t=>({adIdRegistry:t._Jt,adIdValue:t.gJt}))))?i:[]}constructor(t){super(t,Ur.KT),this.JKt=void 0,this.fJt=void 0}};function _h(t){return null===t?void 0:t}r(),r();var c0=class{get iHt(){return this.YZt.iHt}get KWt(){return this.wJt}get lHt(){return this.YZt.lHt}get t7(){var t;return null!=(t=this.YZt.t7)?t:null}get K9(){const t=this.YZt.AJt;return t?[t]:[]}get i7(){return this.YZt.i7}get e7(){return this.YZt.e7}g7(t){this.YZt.g7(t)}Yp(){this.YZt.Yp()}gn(){return Promise.resolve()}constructor(t,i){this.YZt=t,this.wJt=i}},l0=class{get vJt(){return this.mJt}get iHt(){return this.THt}get lHt(){return this.pJt}get AJt(){return this._Gt}get t7(){return this.pGt}get i7(){return Nh(this.yGt,(t=>{if(t.fg)return[];const i=t.Oc;if(t===this.pGt&&void 0!==this._Gt){const t=i.indexOf(this._Gt);if(t>=0)return i.slice(t+1)}return i}))}get e7(){return this.yGt.filter((t=>!t.fg))}constructor(t,i){this.THt=t,this.yGt=[],this.pJt=!1,this.mJt=new c0(this,i)}};r();var d0=class extends Ts{fa(){return new f0(this.o7.J9())}constructor(t){super("yJt",t)}},f0=class extends Xs{constructor(t){super("adimpression",t)}};r();var _0=class extends Ts{fa(){return new g0(this.o7.J9(),this.currentTime)}constructor(t,i){super("MJt",t),this.currentTime=i}},g0=class extends Xs{constructor(t,i){super("adfirstquartile",t),this.currentTime=i}};r();var ar=class extends Ts{fa(){return new w0(this.o7.J9(),this.currentTime)}constructor(t,i){super("TJt",t),this.currentTime=i}},w0=class extends Xs{constructor(t,i){super("admidpoint",t),this.currentTime=i}};r();var A0=class extends Ts{fa(){return new v0(this.o7.J9(),this.currentTime)}constructor(t,i){super("NJt",t),this.currentTime=i}},v0=class extends Xs{constructor(t,i){super("adthirdquartile",t),this.ad=t,this.currentTime=i}};r();var lr=class extends Ts{fa(){return new m0(this.o7.J9(),this.DJt)}get DJt(){return this.SJt}constructor(t,i){super("IJt",t),this.SJt=i}},m0=class extends Xs{constructor(t,i){super("adskip",t),this.playedPercentage=i}};r();var p0=class extends pc{fa(){return new y0(this.Xl.J9())}constructor(t){super("EJt",t)}},y0=class extends uc{constructor(t){super("updateadbreak",t)}};r();var M0=class extends Ha{fa(){return new T0(this.o7.J9())}constructor(t){super("bJt"),this.o7=t}},T0=class extends gg{constructor(t){super("adbuffering"),this.ad=t}};r();var N0=class extends Ha{fa(){return new D0}constructor(){super("LJt")}},D0=class extends gg{constructor(){super("admetadata")}},S0=class t extends l0{kJt(t,i){for(let e=0;e<t;e++){const t=new u0(i);i.RKt(t),this.iHt.Co(new pn(t))}}Bqt(t,i,e){let s=t;s===1/0&&(s=-1);const n=new s0(s,e,i);this.yGt.push(n),i.$Ht(n),this.iHt.Co(new Vj(n))}oXt(t,i){for(const e of this.yGt)j(e._Et)&&e.UKt===t&&(e._Et=i,this.iHt.Co(new p0(e)))}Hqt(t,i){void 0===i&&(i=!1),i&&Et(this.yGt,t),this.iHt.Co(new cn(t))}Vqt(){if(this.t7){this.Hqt(this.t7,!0);const t=Boolean(this._Gt&&this._Gt.Tqt===Ur.TQt);this.CJt(void 0,t)}}xJt(t,i){const e=i.aKt;if(!e)return;const s=e.cXt-1,n=t.Oc[s];return n.sJt(i),this.iHt.Co(new ah(n)),n.Xl.ZYt=e.ZYt,n}get lHt(){return this.OJt.lHt}jJt(t){if(!na(this.zJt,t)){if(t){if(this._Gt===t)return;this._Gt=t;for(const i of this.PJt)this.FZt(i,t,this.OJt.j_)}else{if(!this._Gt)return;const t=new fa(this._Gt,this._Gt.Xl._Et);this.zJt.push(this._Gt),this._Gt=void 0,this.THt.Co(t)}Ri(this.PJt)}}CJt(t,i){if(t){var e;if((null==(e=this.t7)?void 0:e._Et)===t._Et)return;this.pGt=t,i&&this.iHt.Co(new ka(this.pGt))}else{if(!this.pGt)return;const t=new Bh(this.pGt);this.pGt=void 0,Ri(this.zJt),i&&this.THt.Co(t)}}BJt(t){return this.yGt.filter((i=>Ua(i._Et,t,.01)))[0]}static RJt(t,i){if(i.aKt)return t.Oc[i.aKt.cXt-1]}Md(t){if(!t.aKt)return;const i=t.aKt,e=this.BJt(i._Et);e&&(Ri(this.PJt),this.CJt(e,t.tKt))}Pd(){this.t7&&this.iHt.Co(new Bh(this.t7)),Ri(this.PJt),this.Vqt()}bKt(i){if(!this.pGt&&i.aKt){const t=this.BJt(i.aKt._Et);this.CJt(t,i.tKt)}if(this.pGt){const e=t.RJt(this.pGt,i);if(!e)return;this.xJt(this.pGt,i);const s=i.oJt;j_(s)&&!j_(e.oJt)&&(e.oJt=s,this.iHt.Co(new ah(e))),this.jJt(e),this.iHt.Co(new tu(this._Gt,e.Xl._Et))}else 0}dKt(t,i){if(this.jJt(void 0),!i&&this.t7){const t=this.t7;this.CJt(void 0,!1),this.Hqt(t)}}JZt(t){const i=t.aKt;if(!i)return;const e=this.BJt(i._Et);if(!e)return;this.SKt(i._Et,i.lXt,i.ZYt);const s=this.xJt(e,t);s&&this.iHt.Co(new s$(s))}SKt(t,i,e){const s=this.BJt(t);if(!s)return;const n=s.Oc.length;if(i>n){const t=i-n;this.kJt(t,s),s.ZYt=e,this.iHt.Co(new p0(s))}}jZt(i,e,s){if(!this.pGt)return;const n=t.RJt(this.pGt,i);if(n){const t=e/s;this.iHt.Co(new lr(n,t))}}eKt(i,e,s){if(!this.pGt)return;let n=this._Gt;if(!n){const s=t.RJt(this.pGt,i);if(!s||na(this.zJt,s))return void this.PJt.push(e);n=s,this.xJt(this.pGt,i),this.jJt(n)}this.FZt(e,n,s)}FZt(t,i,e){t===Mo.LXt?this.iHt.Co(new N0):t===Mo.yXt&&i?this.iHt.Co(new d0(i)):t===Mo.TXt&&i?this.iHt.Co(new M0(i)):t===Mo.NXt&&i&&e?this.iHt.Co(new _0(i,e)):t===Mo.BUt&&i&&e?this.iHt.Co(new ar(i,e)):t===Mo.DXt&&i&&e&&this.iHt.Co(new A0(i,e))}Yp(){this.OJt.Yp()}g7(t){this.OJt.g7(t)}Zn(){const t=Boolean(this._Gt&&this._Gt.Tqt===Ur.TQt);this.jJt(void 0),this.CJt(void 0,t);for(const t of this.yGt)this.Hqt(t);Ri(this.yGt),Ri(this.PJt),Ri(this.zJt)}gn(){this.Zn()}constructor(t,i){super(t,eh.VYt),this.OJt=i,this.PJt=[],this.zJt=[]}};function I0(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case sv.ENABLED:return i.ENABLED;case sv.INSECURE:return i.INSECURE;case sv.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("6.10.1"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!E0(t));const e=function(t){const i=t.ui&&t.ui.language;return"string"==typeof i?i:void 0}(t);e&&i.setLocale(e)}function E0(t){return li.Ga&&t.allowNativeFullscreen}r();var b0=class i extends F${get $Wt(){return this.Rqt.vJt}get UJt(){return this.Rqt}get uKt(){return this.mqt}get pKt(){return E0(this.$W)}QJt(t,i,e){i===ho.n7&&void 0!==e&&(this.dHt=e),this.mqt.Oqt(t,i)}static get KWt(){return eh.VYt}get KWt(){return i.KWt}get FJt(){return this.$W.ads.preload===nv.MIDROLL_AND_POSTROLL}g7(t){const i=this.YJt();for(const e of i)SK(e.sources,e.timeOffset)||t.m1(e,ho.s7,!1)}YJt(){const t=[],{K9:i,i7:e}=this.$Wt,s=[];for(const n of i.concat(e)){const i=n.Xl.QKt;if(na(s,i.Vw))continue;const e=i.gqt(n.tJt);e>=0?t.push(...i.xHt.slice(e)):t.push(...i.xHt),s.push(i.Vw)}for(const i of this.mqt.i7)i.WHt||t.push(...i.xHt);return Ic(t)}set Tqt(t){this.VKt=t}get Tqt(){return this.VKt}get JYt(){return this.$Yt}set JYt(t){this.$Yt=t,this.GJt=!1}z_(){if(!this.JYt)return 0;const t=this.JYt.TKt();return j(this.ct)||t<0?0:this.ct-t}P_(t){}Td(){return this.zk||NaN}p$(t){this.zk=t}K_(){return this.Qo.Z_}J_(t){this.vKt(this.xg,t,!0)}og(){return this.dR}RZt(t){this.dR=t}get LKt(){return this.VJt}set LKt(t){this.VJt=t}get p7(){return this.dHt}get wKt(){return this.WJt}get kKt(){return this.HJt}set kKt(t){this.HJt=t}get AKt(){return this.qJt}set AKt(t){this.qJt=t}Ig(){var t,i,e;return null!=(e=null==(t=null==(i=this.JYt)?void 0:i.rKt())?void 0:t.rJt)?e:0}Cg(){var t,i,e;return null!=(e=null==(t=null==(i=this.JYt)?void 0:i.rKt())?void 0:t.nJt)?e:0}E_(){return[]}gHt(t){this.yqt=t,this.mqt.gHt(t)}tXt(){!this.GJt&&this.JYt&&(this.JYt.Cn(),this.GJt=!0)}fKt(t){this.Tqt=t?t.tKt?"linear":"nonlinear":"none"}Mg(){return Ki.aR().ks()}Og(){return this.Qo.xg}jg(t){this.vKt(t,this.Z_,!0)}iKt(){return this.Qo.Z_?0:this.Qo.xg}vKt(t,i,e){const s=this.Qo.xg!==t||this.Qo.Z_!==i;s&&(this.Qo.xg=t,this.Qo.Z_=i),this.JYt&&e&&this.JYt.jg(this.iKt()),s&&this.Co(new Ve(this.j_,this.xg))}U_(){return!1}Q_(){if(this.XJt&&this.dHt)return this.XJt}Y_(){if(this.ZJt&&this.dHt)return this.ZJt}pg(){return this.Q$}F$(t){this.Q$=t,this.Co(new ds(this.j_,t))}get CKt(){return this.KJt}set CKt(t){this.KJt=t}Yg(){this.Qo.fn(t.jh,this.JJt),this.bo||(this.bo=!0,this.mqt.Yg(),this.EKt())}async Vg(){if(this.$Jt)return;this.t$t.c_(),this.t$t=new Po;const t=this.hg;this.RZt(!1),this.Co(new vh(this.j_)),this.i$t()||(this.pKt||this.Qo.be(),this.Co(new wc(this.j_))),this.LKt||(this.kKt=!1);const i=Boolean(this.JYt);this.$Jt=this.mqt.xqt();try{await this.$Jt}finally{this.$Jt=void 0}try{Pi(this.t$t.a_)}catch(t){return}if(this.bo||this.JJt(),!this.XJt||!this.dHt)if(this.JYt){if(t)if(i)try{Pi(this.t$t.a_),this.JYt.e$t(),this.Co(new Hr(this.j_))}catch(t){return}else this.tXt()}else this.dHt||(this.EWt(),this._Ht.Vg())}Gg(){var t;this.hg||(this.RZt(!0),this.Co(new ws(this.j_))),this.t$t.c_(),this.LKt?null==(t=this.JYt)||t.Gg():this.kKt=!0}Yp(){var t;null==(t=this.JYt)||t.Yp()}_Kt(){this.JYt&&(this.n$t.s$t(),this.JYt.Wg(),this.JYt.e_(),this.JYt=void 0,this.Tqt="none",this.GJt=!1)}async Wg(){var t;this.NKt=0,this.mqt.Zn(),this.t$t.c_(),this.RZt(!0),this.WJt=!1,this.qJt=!1,this.LKt=!1,this.Rqt.Zn(),this._Kt(),this.oKt(),null==(t=this.r$t)||t.Zn(),this.kKt=!1,this.n$t.e_()}ge(){this.h$t.ge(),this.pKt&&this.Qo.ge()}be(){this.h$t.be()}o$t(){return Boolean(this.JYt)&&na(this.JYt.a$t(),-1)&&!this.WJt}qHt(){this.mqt.qHt()}rXt(){return this.mqt.rXt}Aqt(){this.mqt.Aqt()}hXt(){return this.mqt.hXt()}nHt(i){if(this.o$t()){if(i.type===t.Sh&&this.Qo.R_)return!0;if(i.type===t.kA)return this.WJt=!0,this.n$t.s$t(),!0}return!1}i$t(){return Boolean(this.JYt&&this.JYt.rKt())}async $qt(t){try{this._Kt();const i=this.u$t();this.h$t.JV(),this.JYt=await this.n$t.$qt(t,this.r$t,i),this.c$t(this.JYt)}catch(t){this.l$t.XZt(t)}}c$t(t){if(t.jg(this.iKt()),this.mqt.Pqt===W$.Lqt){const i=t.a$t();if(i.length)for(const t of i)this.Rqt.Bqt(t,this.mqt.vqt);else this.Rqt.Bqt(this.mqt.vqt.Kl,this.mqt.vqt)}this.l$t.Zn(),this.l$t.EZt(t)}Ug(){if(this.$Yt&&this.pKt&&this.i$t())return this.Qo.Ug()}Rg(){return this.pKt&&this.lHt?this.Qo.ya:super.Rg()}u$t(){const t=this.mqt.Pqt===W$.Lqt,i=!(!this.d$t||!t)&&this.FJt;let e,s;this.$W.ads.showCountdown||(e=[]),void 0!==this.$W.ads.allowedMimeTypes&&(s=this.$W.ads.allowedMimeTypes);return{f$t:s,_$t:e,g$t:i,hJt:this.$W.ads.googleIma.bitrate,w$t:void 0,A$t:this.yqt}}EKt(){if(!this.d$t&&!this.Z_&&(this.d$t=!0,this.$Yt)){const t=this.u$t();this.$Yt.v$t(t)}}cKt(t){this.XJt=new lc(Zv.ADVERTISEMENT_ERROR,t.pL),this.ZJt=new ce(le.AD_ERROR,"There was a problem playing ads.",this.XJt),this.iHt.Co(Ba.rHt(t))}oKt(){this.lHt&&(this.Qo.ge(),this.EWt(),this.be())}OKt(){var t;if(this.Qo.z_()===1/0||0===this.Qo.Mg().length)return;(null==(t=this.mqt.vqt)?void 0:t.jHt)&&-1!==this.m$t&&(this.Qo.P_(this.Qo.z_()+this.m$t),this.m$t=-1)}xKt(t){var i,e;this.m$t=null!=(e=null==(i=t.aKt)?void 0:i.ZYt)?e:-1}EWt(){super.EWt(),this.Qo.ge(),this.pKt&&!this.Qo.R_&&this.Qo.Vg()}LHt(){this.pKt||super.LHt()}async gn(){this.l$t.fn(Bi.ha,this.p$t),await super.gn(),this._Kt(),this.n$t.fn("y$t",this.M$t),this.n$t.e_(),this.h$t.e_(),this.mqt.gn(),this.l$t.gn()}constructor(i,e,s,n,r,h,o){super(i,e),this.bo=!1,this.dHt=!1,this.XJt=void 0,this.ZJt=void 0,this.m$t=-1,this.VKt="none",this.KJt=!1,this.d$t=!1,this.GJt=!1,this.t$t=new Po,this.VJt=!1,this.HJt=!1,this.M$t=t=>{this.iHt.Co(t)},this.p$t=t=>{this.XJt=new lc(Zv.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.ZJt=tm(this.XJt)},this.NKt=NaN,this.JJt=()=>{this.bo||this.Yg()},this.$W=s,this.dR=!0,this.zk=NaN,this.Q$=rv.tN,this.WJt=!1,this.qJt=!1,this.Rqt=new S0(this.iHt,this),this.l$t=new t0(this,this.Qo,this.Rqt),this.l$t.yn(Bi.ha,this.p$t),this.Qo.yn(t.jh,this.JJt),this.mqt=new q$(this,this.Qo,this._Ht,n,this.Rqt),this.r$t=o,this.n$t=h,this.h$t=r,this.be(),this.n$t.yn("y$t",this.M$t)}};r();var dr=class{registerWebImaAdPlayerConstructor(t){this.T$t=t}createAdPlayer(t,i,e){return L0()&&this.T$t?this.T$t(t,i,e):void 0}};function L0(){if(Boolean(Ys.google&&Ys.google.ima)){return!(1===_.keys(Ys.google.ima).length&&Ys.google.ima.dai)}return!1}dr.dL=new dr;var k0=class{get HWt(){return b0.KWt}XR(t){return t&&t.integration===oI.GOOGLE_IMA}qWt(t,i,e){return dr.dL.createAdPlayer(t,i,e)}m1(t,i,e,s){e.QJt(t,i,s)}lF(t){const i=yJ(t.sources);if(!i)return;const e={integration:oI.GOOGLE_IMA,sources:i,omidAccessModeRules:$$(t.omidAccessModeRules)},s=lh(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};ta.dL.ZR(new k0),r(),r(),r(),r();var C0=class extends Ha{fa(){return new x0}constructor(){super("mGt")}},x0=class extends gg{constructor(){super("adloaded")}},mh=-1,O0=class{get tGt(){return this.yGt}get N$t(){return this.D$t}get ast(){return this.Y7}get S$t(){return this.YHt}get I$t(){return this.E$t}get Kl(){if(j(this.b$t)){const t=js.sFt(this.YHt,this.nGt.t.Td());void 0===t||j(t)||(this.b$t=t)}return this.b$t}L$t(){return this.Y7<this.yGt.length}Mc(){let t;return this.Y7<this.yGt.length&&(t=this.yGt[this.Y7],this.Y7++),t}k$t(t){t.xQt=this,this.yGt.push(t)}async C$t(t){let i=!1;for(const e of this.yGt)try{await e.$n(),i=!0}catch(i){0,Et(this.yGt,e);const s=e.v7.sources,n="string"==typeof s?s:s.src;t.Co(Ba.hHt(i,n))}return this.E$t=!0,i}aGt(){this.oGt=!0}hGt(){return this.oGt}x$t(){return this.yGt.some((t=>Tr(t).some((t=>t.tRt))))}constructor(t,i){this.yGt=[],this.oGt=!1,this.YHt=t,this.Y7=0,this.nGt=i,this.b$t=NaN,this.E$t=!1,this.D$t=new ZJ(this,this.nGt)}},j0=class i extends ha{get O$t(){let t=0;for(const i of this.j$t)i.hGt()||(t+=1);return t}z$t(){this.B$t.P$t()}Cn(){this.Po(),this.R$t.yn("f7",this.B$t.U$t)}jn(){this.$o(),this.R$t.fn("f7",this.B$t.U$t),this.o$=this.WN,this.B$t.Zn();for(const t of this.j$t)t.aGt();Ri(this.j$t)}Po(){this.Q$t||(this.Qo.yn(t.ov,this.F$t),this.Q$t=!0)}$o(){this.Q$t&&(this.Qo.fn(t.ov,this.F$t),this.Q$t=!1)}get i7(){return this.j$t}Y$t(){return this.G$t(new Tc(mh,void 0))}V$t(t){return this.W$t(t,0,0).length>0}H$t(t,i){let e,s=0;for(const n of this.j$t){if(n.hGt())continue;const r=n.Kl;r>=t&&r<=i&&r>=s&&!j(r)&&(e=n,s=e.Kl)}return e}q$t(t){return this.G$t(new Tc(t,void 0))}X$t(){if(!this.Z$t&&void 0!==this.yqt){this.Z$t=!this.j$t.some((t=>j(t.Kl)));for(const t of this.j$t)t.Kl!==mh&&t.Kl<=this.yqt&&!t.hGt()&&t.aGt()}}K$t(t){for(const i of t)i.aGt();this.mHt.J$t(t),0===this.O$t&&this.$o()}W$t(t,i,e){return this.j$t.filter((s=>{if(s.hGt())return!1;const n=s.Kl;return this.$$t(n,t)||this.t0t(n,t,i,e)}))}$$t(t,i){switch(i){case 0:return 0===t;case mh:return t===mh;default:return!1}}t0t(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}i0t(t){if(t&&t.length>0){for(const e of t){const t=i.wqt(e._Et);let s=this.$yt(e);-1===s&&(this.Z$t=void 0===this.yqt,this.j$t.push(new O0(t,this.e0t)),s=this.j$t.length-1);this.j$t[s].k$t(e)}this.Po()}}static wqt(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}$yt(t){const e=i.wqt(t._Et);return Z_(this.j$t,(t=>e===i.wqt(t.S$t)))}s0t(t){Et(this.j$t,t)}gHt(t){this.yqt=t,this.Z$t=void 0===t}constructor(t,i,e,s){super(),this.Z$t=!1,this.F$t=t=>W(this.G$t(t)),this.G$t=async t=>{this.X$t();const i=t.currentTime,e=t.currentTime!==mh?this.H$t(this.o$,t.currentTime):this.W$t(t.currentTime,0,0)[0];let s,n;const r=this.Qo.Td()-10;if(n=this.V$t(mh)&&x.ceil(i)===x.ceil(r)?this.W$t(mh,10,0).filter((t=>!t.I$t)):this.W$t(i,10,0).filter((t=>!t.I$t)),n.length){const t=(await Promise.all(n.map((t=>t.C$t(this.R$t))))).some((t=>!0===t));t&&this.Co(new C0),(!t||!this.B$t.n0t||n[0].Kl<this.B$t.n0t.Kl)&&(s=n[0])}e&&(e!==this.B$t.n0t&&(s=e),this.K$t([e])),s&&(this.B$t.U$t(),this.B$t.n0t=s,await this.B$t.P$t()),j(this.Qo.Td())||(this.o$=t.currentTime)},this.Qo=t,this.mHt=i,this.e0t=new Mc(this.mHt,this.Qo),this.yqt=void 0,this.Z$t=!1,t.Td()!==1/0?this.WN=0:this.WN=t.z_(),this.o$=this.WN,this.j$t=[],this.R$t=e,this.B$t=s,this.Q$t=!1}};r(),r();var z0=class extends ha{get r0t(){return this.SVt}get iHt(){return this.THt}h0t(){this.o0t(),this.a0t(),this.vP=void 0}u0t(t){this.c0t=this.c0t.concat(t)}l0t(t){this.d0t=this.d0t.concat(t)}a0t(){this.c0t=[]}o0t(){this.d0t=[]}f0t(t){for(const i of this.c0t)i.hQ===t&&Ir(i.eventURL)}ge(){this.r0t.style.display=""}be(){this.r0t.style.display="none"}gn(){this.Vo(),this.THt.Vo(),ei(this.SVt)}constructor(t,i){super(),this.d0t=[],this.c0t=[],this.vP=void 0,this.THt=new ha,this._0t=t=>{t.stopPropagation(),this.g0t()},this.g0t=()=>{for(const t of this.d0t)for(const i of t.JRt)Ir(i.uri)},this.SVt=h.createElement("div"),this.SVt.style.display="none",this.w0t=t,this.A0t=i}};function P0(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(ae(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}r(),r();var B0={[vi.Qv]:1,[vi.Fv]:2,[vi.Yv]:2};function R0(t,i){const e=i?i.map((t=>t.toLowerCase())):i;return Xc(t.filter((t=>{const i=t.type.toLowerCase();return!!Yn(e)&&-1!==e.indexOf(i)&&rJ(i)})),((t,i)=>B0[t.type]-B0[i.type])).map(U0)}function U0(t){return Av({src:t.contentURL,type:t.type,isAdvertisement:!0})}function Q0(t,i){return WF(F0(t),F0(i))}function F0(t){return{Ti:t.height,ji:t.width}}function Y0(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const h=t.filter((t=>!rJ(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(h.length){for(const t of h){const s=(x.abs(t.width/i-1)+x.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return U0(n||h.sort(Q0)[0])}}(t,i.width,i.height,e),r=R0(t,e);return n&&r.push(n),rl({sources:r},s)}var G0=class extends z0{get v0t(){return this.m0t}get j_(){return this.p0t.j_}get ct(){let t=this.p0t.ct;return j(t)&&this.wUt&&(t=this.wUt.ct||0),t}get R_(){return this.p0t.R_}get Z_(){return this.p0t.Z_}set Z_(t){this.p0t.Z_=t,t?this.f0t(Jn.IUt):this.f0t(Jn.EUt)}get hg(){return this.p0t.hg}get vg(){return this.p0t.vg}get xg(){return this.p0t.xg}set xg(t){this.p0t.xg=t}get Sg(){return this.p0t.Sg}get Lg(){return this.p0t.Lg}get y0t(){return this.M0t}Vg(){this.p0t.hg&&(this.p0t.Vg(),this.Co(new vh(this.j_)),this.m0t&&this.f0t(Jn.bUt),this.m0t=!0)}Gg(){this.p0t.hg||(this.p0t.Gg(),this.Co(new ws(this.j_)),this.f0t(Jn.Sh))}async Wg(){var t;null==(t=this.rO)||t.c_(),this.rO=void 0,this.be(),this.m0t=!1,this.T0t=!0,this.N0t(),this.D0t(),await this.S0t()}I0t(t){void 0===t&&(t=!0),this.m0t=!1,t&&this.f0t(Jn.RUt),this.be(),this.A0t()}E0t(){var t;const i=null==(t=this.mHt.ba)?void 0:t.mi,e=new f$(this.Wu,i);return this.r0t.appendChild(e.we),e.yn("Yp",this.b0t),e}L0t(){this.wUt&&this.wUt.lUt.qRt&&(this.EVt=new Qn(this.r0t),this.EVt.PGt=this.wUt.lUt.qRt,this.EVt.yn("clickstart",this.k0t),this.EVt.yn("click",this.g0t))}C0t(t,i){for(const e of this.c0t)if(e.hQ===Jn.VA){const s=JK(e.Ku,i);void 0!==s&&this.o$<s&&s<=t&&Ir(e.eventURL)}}async x0t(){if(!this.wUt||!this.O0t)return;const t=Y0(this.wUt.yUt,this.O0t,this.Zx.ads.allowedMimeTypes,this.Zx);if(!t.sources.length)return await this.p0t.Zn(),this.w0t(""),void this.wUt.MRt();this.rO=new Po,this.T0t=!0,await this.p0t.ga(t,this.rO.a_),this.p0t.ge(),this.wUt.MRt(),this.L0t()}async j0t(i,e,s){this.M0t=i,this.wUt=i.tRt,this.p0t.yn(t.ov,this.z0t),this.p0t.yn(t.EA,this.P0t),this.p0t.yn(t.uv,this.B0t),this.p0t.yn(Wh,this.Ds),this.wUt.oRt&&0!==this.wUt.oRt.length&&this.u0t(this.wUt.oRt),this.wUt.lUt&&this.l0t(this.wUt.lUt),this.vP=e,this.O0t=s,0!==this.wUt.yUt.length&&(this.p0t.yn(Bi.ha,this.R0t),await this.x0t(),this.p0t.yn(t.kA,this.U0t),this.p0t.yn(t.ov,this.Q0t),this.p0t.yn(qo.Tv,this.F0t),this.p0t.yn(t.qA,this.Ds))}VFt(){this.v0t&&this.Y0t&&this.b0t()}get Y0t(){return this.wUt&&-1!==this.wUt.NUt&&this.p0t.j_>=this.wUt.NUt}G0t(){this.f0t(Jn.ect),this.M0t&&this.iHt.Co(new tu(this.M0t,this.j_))}async S0t(){this.p0t.fn(Bi.ha,this.R0t),this.p0t.fn(t.kA,this.U0t),this.p0t.fn(t.ov,this.Q0t),this.p0t.fn(qo.Tv,this.Ds),this.p0t.fn(qo.Tv,this.F0t),this.p0t.fn(t.qA,this.Ds),this.p0t.fn(t.ov,this.z0t),this.p0t.fn(t.EA,this.P0t),this.p0t.fn(t.uv,this.B0t),this.p0t.fn(Wh,this.Ds),this.M0t&&(this.M0t.aGt(),this.iHt.Co(new fa(this.M0t,this.j_))),this.V0t(),this.h0t(),this.N0t(),this.D0t(),this.M0t=void 0,this.wUt=void 0,this.O0t=void 0,await this.p0t.Zn(),this.p0t.be(),this.r0t.style.cursor="",this.W0t=0,this.o$=-1,this.H0t&&(this.q0t.S0t(),this.H0t=!1)}V0t(){this.EVt&&(this.EVt.e_(),this.EVt=void 0)}D0t(){this.X0t&&(ei(this.X0t),this.X0t=void 0)}N0t(){this.kVt&&(this.kVt.gn(),this.kVt=void 0)}Z0t(){this.H0t=!0}K0t(){var t;this.X0t||(this.X0t=h.createElement("div"),this.X0t.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.r0t.appendChild(this.X0t));const i=null==(t=this.M0t)?void 0:t.Xl;if(!i)return;const e=i.Oc.filter(i$);let s=P0(this.Zx,"The content will play in")+" "+x.round(i.KYt)+" "+P0(this.Zx,"seconds");if(e.length>1){const t=e.filter((t=>t.hGt())).length;s+=". "+P0(this.Zx,"Ad")+" "+(t+1)+"/"+e.length}pO(this.X0t,s)}constructor(t,i,e,s,n,r,h){super(t,i),this.q0t=e,this.Zx=s,this.mHt=n,this.Wu=r,this.p0t=h,this.m0t=!1,this.W0t=0,this.o$=-1,this.rO=new Po,this.T0t=!0,this.U0t=()=>{this.I0t()},this.F0t=()=>{this.rO=void 0,this.m0t||(this.G0t(),this.m0t=!0),this.T0t&&(this.T0t=!1,this.mHt.z$t()),this.r0t.style.display="block",this.p0t.fn(qo.Tv,this.F0t),this.m0t=!0},this.Q0t=()=>{const t=this.j_,i=this.ct,e=t/i;(0===this.W0t&&e>=.25?(this.f0t(Jn.zUt),this.W0t=1):1===this.W0t&&e>=.5?(this.f0t(Jn.BUt),this.W0t=2):2===this.W0t&&e>=.75&&(this.f0t(Jn.PUt),this.W0t=3),this.C0t(t,i),this.K0t(),this.o$=t,this.wUt)&&(-1!==this.wUt.NUt&&this.wUt.NUt<this.wUt.ct&&(null!=this.kVt||(this.kVt=this.E0t()),this.j_<this.wUt.NUt?this.kVt.XGt(this.wUt.NUt-this.j_):this.kVt.KGt()))},this.R0t=()=>{var t,i;this.rO=void 0,this.p0t.fn(Bi.ha,this.R0t),this.T0t=!0,null==(t=this.vP)||t.fQt(Si.aQt),this.m0t=!1,this.p0t.be();const e=(null==(i=this.p0t.bt)?void 0:i.src)||"";this.w0t(e)},this.z0t=()=>{this.Ds(new Tc(this.j_,void 0))},this.P0t=()=>{this.Ds(new Mn(this.ct))},this.B0t=()=>{this.Ds(new Ve(this.j_,this.xg))},this.k0t=()=>{this.mHt.Gg()},this.b0t=()=>{this.M0t&&(this.f0t(Jn.kUt),this.iHt.Co(new lr(this.M0t,this.j_/this.ct)),this.I0t(!1))},this.r0t.className="theoplayer-ad-linear",this.r0t.style.zIndex="10",ia(this.r0t),this.p0t.be(),this.H0t=!1}};r(),r();var V0=class t extends i{get we(){return this.Us}JGt(){this.we.addEventListener("mouseup",this.$Gt),this.we.addEventListener("touchend",this.$Gt),this.we.addEventListener("mousedown",this.J0t)}ZGt(){this.we.removeEventListener("mouseup",this.$Gt),this.we.removeEventListener("touchend",this.$Gt),this.we.removeEventListener("mousedown",this.J0t)}static ur(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}gn(){this.ZGt(),ei(this.Us)}constructor(){super(),this.$Gt=t=>{this.Co(new gg("Yp")),this.J0t(t)},this.J0t=t=>{t.stopPropagation()},this.Us=t.ur(),this.JGt()}},W0=class extends z0{get $0t(){return this.t1t}get i1t(){return this.hu}h0t(){super.h0t(),this.r0t&&en(this.r0t)}async j0t(t,i,e){this.gGt&&this.S0t(),this.t1t=t,this.gGt=t.iRt,0!==this.gGt.oRt.length&&this.u0t(this.gGt.oRt),this.vP=i,0!==this.gGt.rRt.length&&(this.l0t(this.gGt.rRt[0].gRt),this.r0t.addEventListener("error",this.e1t),this.r0t.addEventListener("load",this.s1t),await this.x0t(),this.n1t())}VFt(){var t;if(void 0!==this.r1t)return;const i=null==(t=this.gGt)?void 0:t.rRt[0];i&&i.Xl&&-1!==i.Xl.NUt&&(this.f0t(Jn.kUt),this.iHt.Co(new lr(this.t1t,0)),this.h1t())}G0t(){void 0!==this.t1t&&this.iHt.Co(new tu(this.t1t,this.mHt.j_))}Wg(){this.S0t(),this.t1t=void 0,this.gGt=void 0}S0t(){this.o1t(),void 0!==this.t1t&&(this.t1t.aGt(),this.iHt.Co(new fa(this.t1t,this.mHt.j_))),this.h0t(),this.a1t(),void 0!==this.r1t&&(c(this.r1t),this.r1t=void 0)}o1t(){this.r0t.removeEventListener("load",this.s1t),this.r0t.removeEventListener("error",this.e1t)}async x0t(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.gGt.rRt[0],e=h.createElement("a");if(i.gRt.qRt&&(e.href=i.gRt.qRt,e.target="Du",e.setAttribute("rel","noopener")),i.lRt){const t=i.lRt,s=h.createElement("iframe");s.src=t.eQt,e.appendChild(s)}else if(i.uRt){const t=i.uRt,s=h.createElement("img");s.src=t.eQt,e.appendChild(s)}else if(i.fRt){const t=i.fRt,s=h.createElement("iframe");s.src=t.eQt,e.appendChild(s)}i.MRt(),e.addEventListener("mousedown",this._0t),e.addEventListener("touchend",this._0t),this.r0t.firstChild&&(en(this.r0t),this.S0t()),t.appendChild(e),this.r0t.appendChild(t),this.ge()}n1t(){var t;if(!this.gGt)return;const i=null==(t=this.gGt.rRt[0].Xl)?void 0:t.NUt;void 0!==i&&-1!==i&&(this.r1t=Ys.setTimeout(this.u1t,1e3*i))}a1t(){this.hu&&(this.hu.fn("Yp",this.c1t),this.hu.gn()),this.hu=void 0}get l1t(){return this.mHt.d1t()}constructor(t,i,e){super(t,i),this.s1t=()=>{this.o1t(),this.f0t(Jn.GUt),this.A0t()},this.e1t=t=>{var i,e;this.o1t(),null==(i=this.vP)||i.fQt(Si.cQt);const s=null==(e=this.gGt)?void 0:e.rRt[0];var n,r;const h=null!=(r=null!=(n=null==s?void 0:s.lRt)?n:null==s?void 0:s.uRt)?r:null==s?void 0:s.fRt;var o;this.w0t(null!=(o=null==h?void 0:h.eQt)?o:"")},this.h1t=()=>{this.be(),en(this.r0t),this.A0t(),this.t1t=void 0,this.gGt=void 0},this.u1t=()=>{this.hu||(this.r1t=void 0,this.hu=new V0,this.r0t.children[0].appendChild(this.hu.we),this.hu.yn("Yp",this.c1t))},this.c1t=()=>{this.f0t(Jn.kUt),this.VFt()},this.r0t.className="theoplayer-ad-nonlinear",this.r0t.style.position="absolute",this.r0t.style.width="100%",this.r0t.style.bottom="3em",this.r0t.style.zIndex="10",this.r0t.style.textAlign="center",this.mHt=e}};r();var H0=class extends pc{fa(){return new q0(this.Xl.J9())}constructor(t){super("f1t",t)}},q0=class extends uc{constructor(t){super("adbreakchange",t)}};r();var X0=class{static async _1t(t,i,e){let s=[],n=t.shift();for(;n;){try{const t=await(new gc).IQt(n,i);s=s.concat(t)}catch(t){0;const i=Ba.hHt(t,n.sources.src);e.Co(i)}n=t.shift()}return s}};r(),r(),r();var xu,ll=class extends Ha{fa(){return new Z0}constructor(){super("I_t")}},Z0=class extends gg{constructor(){super("statechange")}};r(),function(t){t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted"}(xu||(xu={})),r(),r();var K0=class{get Gu(){return this.Xu}get U(){return this.Xu.length}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}jw(t){return this.Xu[t]}mN(t){this.Xu.push(t),this.Xa&&this.Xa.push(t.va),this.g1t(t)}w1t(t){for(const i of t)this.mN(i)}A1t(t,i){i>=0&&i<=this.Xu.length&&(this.Xu.splice(i,0,t),this.Xa&&this.Xa.splice(i,0,t.va),this.g1t(t))}yN(t){return na(this.Xu,t)}pN(t){this.v1t(this.Xu.indexOf(t))}v1t(t){if(!(t>=0&&t<this.Xu.length))return;const i=this.Xu[t];jc(this.Xu,t),this.Xa&&jc(this.Xa,t),this.m1t(i)}kL(){const t=this.Xu.slice();Ri(this.Xu),this.Xa&&Ri(this.Xa);for(const i of t)this.m1t(i)}constructor(){this.Xu=[],this.Xa=void 0}},J0=class extends K0{fa(){return function(t){const i=function(t){const i=t.Gu.map((t=>t.va));return i.item=i=>{const e=0|i,s=t.jw(e);return s&&s.va||void 0},i}(t),e=new ma(t,i);return i.addEventListener=(t,i)=>{e.yn(t,i)},i.removeEventListener=(t,i)=>{e.fn(t,i)},i}(this)}yn(t,i){this.p1t.yn(t,i)}m_(t){this.p1t.m_(t)}Vo(){this.p1t.Vo()}Co(t){this.p1t.Co(t)}fn(t,i){this.p1t.fn(t,i)}T_(t){this.p1t.T_(t)}N_(t){this.p1t.N_(t)}D_(t,i){return this.p1t.D_(t,i)}constructor(...t){super(...t),this.p1t=new ha,this.Ds=t=>{this.Co(t)}}};r();var $0=class extends gg{constructor(t){super("addtask"),this.task=t}},t1=class extends Ha{fa(){return new $0(this.y1t.va)}constructor(t){super("M1t"),this.y1t=t}};r();var i1,e1=class extends gg{constructor(t){super("removetask"),this.task=t}},s1=class extends Ha{fa(){return new e1(this.task.va)}constructor(t){super("T1t"),this.task=t}},n1=class extends J0{g1t(t){this.Co(new t1(t))}m1t(t){this.Co(new s1(t))}constructor(){super()}};!function(t){t.UNINITIALISED="uninitialised",t.INITIALISED="initialised"}(i1||(i1={}));var r1=class extends i{async Yg(){await this.N1t(),this.Y_t("initialised")}async N1t(){try{await this.D1t()}catch(t){0}}async D1t(){const t=await this.Lct.det();for(const i of t){const t=this.I1t.S1t(i.id,i.sourceDescription,i.parameters,this.E1t);this.b1t(t),this.hO.mN(t),await t.L1t}}get TI(){return this.F_t}Y_t(t){this.F_t=t,this.Co(new ll)}get k1t(){return this.hO}S1t(t,i,e){void 0===e&&(e="persistent");const s=this.I1t.C1t(t,i,e);return this.x1t(s,e),this.hO.mN(s),this.b1t(s),s}async x1t(t,i){try{await this.O1t(t,i)}catch(t){throw b("Unable to persist task - "+t)}}async O1t(t,i){await this.Lct.uet({key:t.o,id:t.o,sourceDescription:t.yc,parameters:t.eI},i)}b1t(t){t.yn("I_t",(()=>{t.TI===xu.EVICTED&&this.hO.pN(t)}))}constructor(t,i,e){super(),this.F_t="uninitialised",this.hO=new n1,this.I1t=i,this.E1t=e,this.Lct=t,this.Yg()}};r(),r(),r(),r();var Ma=class{get rR(){return this.j1t}get z1t(){return this.P1t}get B1t(){return this.R1t.rR}get U1t(){let t=0,i=0;return this.vN.forEach((e=>{t+=e.timeRanges.rR,i+=e.totalQualityDurationToCache})),0===i?0:x.min(1,t/i)}get R1t(){return this.Q1t}$N(t){return!!Ph(this.vN,t.vN)&&(!!F_(this.P1t,t.P1t)&&(!!F_(this.rR,t.rR)&&(!!F_(this.B1t,t.B1t)&&this.R1t.JB(t.R1t))))}constructor(t,i,e){if(this.P1t=t,this.vN=i,this.j1t=e,0===this.vN.size)this.Q1t=Ki.aR();else{let t=new Ki([-1/0,1/0]);this.vN.forEach((i=>{t=t.Sn(i.timeRanges)})),this.Q1t=t}}};Ma.QUALITY_TIME_RANGES_NULL_OBJECT=Qt(),Ma.CACHE_PROGRESSION_NULL_OBJECT=new Ma(0,Ma.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),Ma.F1t=Ma.CACHE_PROGRESSION_NULL_OBJECT,r(),r(),r(),r();var h1=class extends gg{constructor(){super("progress")}},o1=class extends Ha{fa(){return new h1}constructor(){super("Y1t")}};r(),r();var a1,u1=class extends Jo{get name(){return"G1t"}constructor(t,i){super(t,i)}};async function c1(t,i,e){const s=[];for(const n of t.Eot)s.push(l1(n,i,e));return{V1t:await Promise.all(s)}}async function l1(t,i,e){const s=[];for(const n of t.lnt)d1(n)||s.push(g1(n,i,e));return{Z:await Promise.all(s),hA:t.hA}}function d1(t){return t.nnt.every(_1)}r(),r(),r(),function(t){t[t.Qv=0]="Qv",t[t.Fv=1]="Fv"}(a1||(a1={}));var f1=1;function _1(t){return t.bst!==f1&&Boolean(t.bst)}async function g1(t,i,e){const s=[];for(const i of t.nnt)_1(i)||s.push(w1(i,e));const n=await Promise.all(s),r=t.Nst[0],h=t.Sst,o=h?function(t,i){const e=[],s=function(t){return t?Va(t,"avc")?K.VIDEO_H264:Va(t,"hev")||Va(t,"hvc")||Va(t,"hvt")||Va(t,"lhv")||Va(t,"lhe")||Va(t,"lht")?K.VIDEO_H265:Va(t,"mp4")?K.VIDEO_MP4:Va(t,"mpeg2")?K.VIDEO_MPEG2:Va(t,"mpeg")?K.VIDEO_MPEG:K.VIDEO_UNKNOWN:K.VIDEO_UNKNOWN}(t);for(const t of i){const i=t.nst.split(":").pop(),n=t.sst;e.push({mimeType:s,uuid:i,data:n})}const n=a1.Qv,r=Lw;return{type:n,schemeType:r,schemeDatas:e}}(r,h):void 0,a=_Y(t,i);return{Hw:n,gs:t.s6,hA:t.hA,EP:o,Bdt:a}}async function w1(t,i){const e=await async function(t,i){const e=[],s=t.pst;t.qnt&&e.push({zN:0,ct:0,W1t:t.qnt});const n=s.Nrt();let r=n;for(;r;){if(t.art(r)){const s=await t.urt(r,i,(new Po).a_);for(let i=0;i<s.U;i++)e.push(A1(s.zht(i),t))}else e.push(A1(r,t));r=s.Urt(r)}const h=s.brt(),o=h.PN-n.zN;return{ct:o,pet:e}}(t,i),s={o:v1(t),WT:e,Xz:t.Xz,wtt:t.wtt,Ti:t.Ti,hA:t.hA,ji:t.ji};switch(t.hA){case iv.Ru:break;case iv.vp:var n,r;s.Est=null!=(r=null==(n=t.Est)?void 0:n.cD())?r:NaN;break;case iv.mp:s.audioSamplingRate=t.Tst}return s}function A1(t,i){return{zN:t.zN,ct:t.ct,W1t:i.nrt(t)}}function v1(t){return t.Knt.Cn+"-"+(""+t.o)}function m1(t,i){const e=function(t){const i=function(t){const i=Qt();for(const e of t){let t=i.get(e.LDt);t||(t={hA:e.hA,Fy:[]},i.set(e.LDt,t)),t.Fy.push(e)}return i}(t),e=Ye();return i.forEach((t=>{for(const i of t.Fy){let s=e.get(t.hA);s||(s=Qt(),e.set(t.hA,s));let n=s.get(i.l);n||(n=[],s.set(i.l,n)),n.push(i)}})),e}(t);return function(t,i){const e=Ye();return t.forEach(((t,s)=>{const n=Qt();t.forEach(((t,e)=>{const r=[];for(const e of t){const t=p1(e,s,i);r.push(t)}n.set(e,r)})),e.set(s,n)})),e}(e,i)}function p1(t,i,e){const s=t.LDt,n={FDt:t,ySt:[]};for(const t of e)hX(i,s,t)&&n.ySt.push(t);return n}async function y1(t,i){const e=await i.Wat([t],{});return Oq(e._E,{},e.qat)}async function M1(t,i){return $H(t)?async function(t,i){const e=m1(t.Fy,t.vEt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await D1(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const o of t){var s,n;const t=await b1(o.Cnt,i);var r,h;t.Xz=o.Xz,t.wtt=o.Nst?N1(o.Nst):"",t.Ti=null!=(r=null==(s=o.dSt)?void 0:s.Ti)?r:0,t.ji=null!=(h=null==(n=o.dSt)?void 0:n.ji)?h:0,e.push(t)}return{hA:iv.KT,Z:[{gs:lV,hA:iv.KT,Hw:e}]}}(t.vEt,i);return s.push(n),{ct:T1(s),H1t:[t.Cnt],Tnt:[{V1t:s}]}}(t,i):function(t){const i=L1(t);return{ct:i.ct,H1t:[t.Cnt],Tnt:[{V1t:[{hA:iv.KT,Z:[{hA:iv.KT,gs:lV,Hw:[{o:t.Cnt,WT:i,Xz:0,wtt:"",Ti:0,hA:iv.KT,ji:0}]}]}]}]}}(t)}function T1(t){let i=-1/0;for(const e of t)for(const t of e.Z)i=x.max(i,...t.Hw.map((t=>t.WT.ct)));return i}function N1(t){return[t.aSt,t.uSt,t.LIt].filter(j_).join(",")}async function D1(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await S1(i,e);s.push(n)}return{hA:I1(i),Z:s}}async function S1(t,i){const e=[],s=t[0].FDt;for(const s of t){const t=await E1(s,i);e.push(t)}return{gs:s.gs||lV,hA:I1(s.hA),Hw:e}}function I1(t){switch(t){case Eo.mp:return iv.mp;case Eo.vp:return iv.vp;case Eo.pp:case Eo.xIt:return iv.Ru;default:return iv.KT}}function E1(t,i){const e=function(t){const i=t.FDt.Cnt,e=t.ySt.map((t=>t.Cnt));return i||(e.length?e[0]:void 0)}(t);return b1(e,i)}async function b1(t,i){let e={ct:0,pet:[]};if(t){const s=await y1(t,i);tq(s)&&(e=L1(s))}return{o:t||"default",q1t:t,WT:e,Xz:0,wtt:"",Ti:0,hA:iv.KT,ji:0}}function L1(t){const i=[];let e,s=0;for(const n of t.pet){const t=s;!n.MEt||void 0!==e&&eq(n.MEt.Cnt,e)||(i.push(k1(n.MEt,t)),e=n.MEt.Cnt),i.push(C1(n,t)),s+=n.ct}return{ct:s,pet:i}}function k1(t,i){return{zN:i,ct:0,W1t:x1(t.Cnt)}}function C1(t,i){return{zN:i,ct:t.ct,W1t:x1(t.Cnt)}}function x1(t){return{zu:t.IT,hst:t.Yht?[t.Yht.Cn,t.Yht.Cn+t.Yht.U]:void 0,hE:!1}}r(),r();var O1=class{async X1t(t){if(!t.src)throw new b("Invalid typed source");const i=t.type;if(Fa(i))return await this.Z1t(t);if(Lv(i))return await this.K1t(t);throw new b("Unexpected source type")}async Z1t(t){try{const i=await y1(t.src,this.Hat);return await M1(i,this.Hat)}catch(t){throw new b("Unable to fetch HLS manifest")}}async K1t(t){try{const i=new yF({oA:ag.Dh(t.src),Dat:t.liveOffset,Lat:t.timeServer,hE:t.useCredentials},this.J1t,Mb.XG,this.Hat,t.dash);return await i.W,await async function(t,i,e){const s=[];for(const n of t.Tnt)s.push(c1(n,i,e));const n=await Promise.all(s);return{ct:t.pnt.qet(),H1t:[t.wat],Tnt:n}}(i.Tr.Znt,t.contentProtection,this.$wt)}catch(t){throw new b("Unable to fetch DASH manifest")}}constructor(t,i,e){this.Hat=t,this.$wt=i,this.J1t=e}};r();var j1=class{$1t(){const t=new No;return this.t4t.push(t),this.i4t(),t.OL}async e4t(t,i){try{await t}finally{this.s4t-=1,this.i4t(),0===this.t4t.length&&0===this.s4t&&i.CL(!0)}}i4t(){if(this.t4t.length>0&&this.s4t<this.n4t){this.t4t.shift().CL(),this.s4t+=1}}constructor(t){this.t4t=[],this.s4t=0,this.n4t=t}};var z1=class extends i{get L1t(){return this.Yg()}async Yg(){const t=new O1(this.Hat,this.$wt,this.J1t);this.r4t=await t.X1t(this.h4t);const i=function(t,i){if(ae(t)){if(Va(t,"%"))return S(t)/100*i;throw new b("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.kct.eI.amount,this.r4t.ct);let e;this.j1t=i;const s=Ti(this.r4t.H1t[0]),n=(await this.Eet.met._et(s,"manifestURL")).filter((t=>na(t.references,this.kct.o))),r=[],h=this.kct.eI.bandwidth;for(const t of this.r4t.Tnt)for(const i of t.V1t)for(const t of B1(i,this.kct.eI.preferredTrackSelection))for(const i of U1(t.Hw,h))r.push(i);this.o4t=x.ceil(r.map((t=>t.Xz*function(t,i){let e=0;for(const s of t.WT.pet.map((t=>t.ct)))if(e+=s,e>=i)return e;return e}(t,i)/8)).reduce(((t,i)=>t+i),0));const o=Qt();if(n&&0!==n.length){const t=n.reduce(((t,i)=>t+i.byteSize),0);for(const t of n){const i=t.qualityId,e=new Ki(t.startsAndEnds);if(o.has(i))o.get(i).timeRanges=o.get(i).timeRanges.GB(e).YB(5e-4);else{const t=H_(r,(t=>t.o===i));var a;const s=x.min(this.j1t,null!=(a=null==t?void 0:t.WT.ct)?a:1/0);o.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new Ma(t,o,this.j1t)}else{for(const t of r)o.set(t.o,{timeRanges:Ki.aR(),totalQualityDurationToCache:x.min(t.WT.ct,this.j1t)});e=new Ma(0,o,this.j1t)}this.a4t=e}get u4t(){return this.o4t}get a4t(){return this.c4t}set a4t(t){this.c4t.$N(t)||(this.c4t=t,t.$N(Ma.F1t)||this.Co(new o1))}async pi(t){await this.bo,await this.l4t(this.r4t,t)}async l4t(t,i){if(!t.H1t)throw new b("Unexpected - manifest is missing locations");await this.d4t();const e=[];for(const s of t.Tnt)e.push(this.f4t(s,t.H1t[0],i));return il(e)}async d4t(){const t=await this._4t.det();for(const i of t){const t=await this.Eet.yet.EL(i.key);if(t)await P1(t,this.kct.o,this.Eet.yet,this.E1t);else try{await this.Eet.yet.uet(i,this.E1t)}catch(t){throw new u1("Unable to store manifest with url: "+i.locationURL,t)}}await this._4t.Aet()}f4t(t,i,e){const s=[];for(const n of t.V1t){const t=B1(n,this.kct.eI.preferredTrackSelection);for(const n of t)s.push(this.g4t(n,i,e))}return il(s)}async g4t(t,i,e){const s=this.kct.eI.bandwidth,n=U1(t.Hw,s);t.hA===iv.vp&&t.Bdt&&t.Bdt.mj.widevine&&"persistent"===t.Bdt.mj.widevine.licenseType&&(await this.w4t(t.Bdt),Pi(e));const r=[];for(const t of n)r.push(this.A4t(t,i,e));return il(r)}async A4t(t,i,e){Pi(e);const s=t.WT.pet[0].zN+this.j1t,n=[];let r=!1;for(const h of t.WT.pet){if(h.zN>=s||this.stopIfFailed(r))break;await this.v4t(e),await this.m4t.$1t(),n.push(this.m4t.e4t(this.p4t(h,t,i),this.y4t).catch((t=>(r=!0,Promise.reject(t)))))}return il(n)}async v4t(t){if(null==t?void 0:t.$f)throw await this.y4t.OL,new sa}async M4t(){return await this.bo.catch(xs),this.r4t}w4t(t){return Promise.resolve()}T4t(){return ag.Pv("License renewal unsupported in this SDK."),Promise.resolve()}async p4t(t,i,e){const s=this.Eet.met,n=_U(t.W1t.zu,t.W1t.hst),r=await s.EL(n);if(r)await P1(r,this.kct.o,s,this.E1t),this.N4t(r,!1);else try{const s=await this.D4t(t.W1t),{segmentMetadataEntry:n,segmentEntry:r}=this.S4t(t,i,e,s);await this.Eet.vet((async t=>{await t.met.uet(n,this.E1t),await t.pet.uet(r,this.E1t)})),this.N4t(n,!0)}catch(i){throw new u1("Unable to store segment with url: "+t.W1t.zu,i)}}async D4t(t){const i=await this.lwt.hgt(t,!1,this.DEFAULT_CACHING_SEGMENT_TIMEOUT,void 0,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT);return await this.dwt(i)}async dwt(t){return{buffer:await t.qj()}}S4t(t,i,e,s){const n=_U(t.W1t.zu,t.W1t.hst),r=t.zN,h=t.ct,o=this.I4t(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:Ti(e),qualityId:i.o,byteSize:o,startsAndEnds:new Ki([r,r+h]).CB,references:[this.kct.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:Ti(e),data:s,references:[this.kct.o]}}}I4t(t){return t.buffer.byteLength}N4t(t,i){const e=t.qualityId,s=this.c4t,n=s.vN;n.get(e).timeRanges=n.get(e).timeRanges.GB(new Ki(t.startsAndEnds)).YB(5e-4),this.a4t=new Ma(i?s.z1t+t.byteSize:s.z1t,n,this.j1t)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,h,o){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.y4t=new No,this.c4t=Ma.F1t,this.kct=t,this.Eet=i,this.Hat=e,this._4t=s,this.lwt=n,this.$wt=r,this.J1t=o,this.E1t=h,this.o4t=-1;const a=this.kct.yc.sources[0];this.h4t=a,this.bo=this.Yg(),this.m4t=new j1(this.kct.eI.parallelTasksThreshold)}};async function P1(t,i,e,s){na(t.references,i)||(t.references.push(i),await e.uet(t,s))}function B1(t,i){switch(t.hA){case iv.mp:return R1(t.Z,i.audioTrackSelection);case iv.Ru:return R1(t.Z,i.textTrackSelection);default:return R1(t.Z,[])}}function R1(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.gs)>-1&&e.push(s);return e}function U1(t,i){if(!t.length)return[];const e=[...t].sort(HF),s=e.filter((t=>t.Xz<=i));return s.length>0?[s.pop()]:[e.shift()]}var Q1=class{async E4t(){await this.Eet.vet((async t=>{await this.b4t(t),await this.L4t(t),await this.k4t(t),await this.C4t(t)}))}async b4t(t){const i=t.Met,e=this.kct.o;await i.pN(e)}async L4t(t){const i=t.met,e=t.pet,s=this.kct.yc.sources[0];if(!Ov(s))return;const n=Ti(s.src),r=(await i._et(n,"manifestURL")).filter((t=>na(t.references,this.kct.o)));for(const t of r)Et(t.references,this.kct.o),0===t.references.length?(await i.pN(t.key),await e.pN(t.key)):await i.uet(t)}async k4t(t){const i=t.yet,e=this.x4t(),s=(await i.tet(e)).filter((t=>na(t.references,this.kct.o)));for(const t of s)Et(t.references,this.kct.o),0===t.references.length?await i.pN(t.key):await i.uet(t)}x4t(){if(!this.r4t)return[];const t=this.kct.yc.sources[0];if(!Ov(t))return[];const i=Ti(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.Tnt)for(const t of e.V1t)for(const e of t.Z)for(const t of e.Hw)t.q1t&&i.push(t.q1t);return function(t){return t.reduce(((t,i)=>(t.indexOf(i)<0&&t.push(i),t)),[])}(i)}(this.r4t).map((t=>({src:t}))).map((t=>Ti(t.src)));return[i,...e]}async C4t(t){const i=t.Tet,e=(await i.det()).filter((t=>na(t.references,this.kct.o)));for(const t of e)Et(t.references,this.kct.o),0===t.references.length?(await i.pN(t.key),this.O4t(t)):await i.uet(t)}O4t(t){}constructor(t,i,e){this.kct=t,this.Eet=i,this.r4t=e}},F1=new class{M8(t,i,e){return new Q1(t,i,e)}};r(),r();var Y1=class{get va(){return this.Xa||(this.Xa=function(t){return{renew(i){t.j4t(i)}}}(this)),this.Xa}j4t(t){this.z4t(t)}async z4t(t){try{await this.P4t.T4t(t)}catch(t){0,this.oit.Y_t(xu.ERROR)}}constructor(t,i){this.oit=t,this.P4t=i}},G1=class extends ha{get L1t(){return this.P4t.L1t}get va(){return this.Xa||(this.Xa=function(t){let i,e={get id(){return t.o},get status(){return t.TI},get source(){return t.yc},get parameters(){return t.eI},get duration(){return t.ct},get cached(){return t.B4t.ks()},get secondsCached(){return t.R4t},get percentageCached(){return t.U4t},get bytes(){return t.Q4t},get bytesCached(){return t.F4t},get license(){return t.AY.va},start(){t.Cn()},pause(){t.Gg()},remove(){t.pN()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Lu(t,["Y1t","I_t"],e),e}(this)),this.Xa}get o(){return this.NN}get AY(){return this.Y4t}get TI(){return this.F_t}Y_t(t){this.F_t!==t&&(this.F_t=t,this.Co(new ll))}get yc(){return this.bc}get eI(){return this.G4t}get ct(){return this.P4t.a4t.rR}get B4t(){return this.P4t.a4t.R1t}get R4t(){return this.P4t.a4t.B1t}get U4t(){return this.P4t.a4t.U1t}get Q4t(){return this.P4t.u4t}get F4t(){return this.P4t.a4t.z1t}Cn(){this.F_t===xu.EVICTED||this.F_t===xu.DONE||this.V4t()}async V4t(){try{this.Y_t(xu.LOADING);const t=new Po;this.W4t=t,await this.P4t.pi(t.a_),this.Y_t(xu.DONE)}catch(t){Oi(t)?this.Y_t(xu.IDLE):this.Y_t(xu.ERROR)}finally{this.W4t.e_()}}Gg(){this.W4t.c_()}pN(){this.TI===xu.LOADING?(this.yn("I_t",this.evictOnLoading),this.Gg()):this.H4t()}async H4t(){try{const t=await this.P4t.M4t();await F1.M8(this,this.Eet,t).E4t(),this.P4t.a4t=Ma.F1t,this.Y_t(xu.EVICTED)}catch(t){0,this.Y_t(xu.ERROR)}}constructor(t,i,e,s,n,r){super(),this.W4t=new Po,this.evictOnLoading=()=>{this.fn("I_t",this.evictOnLoading),this.H4t()},this.NN=t,this.bc=i,this.G4t=e,this.Eet=s,this.P4t=n.M8(this,this.Eet,r),this.Y4t=new Y1(this,this.P4t),this.F_t=1===this.P4t.a4t.U1t?xu.DONE:xu.IDLE,this.P4t.yn("Y1t",(t=>{this.Ds(t),1===this.U4t&&this.Y_t(xu.DONE)}));const h=new Date,o=this.G4t.expirationDate.getTime()-h.getTime();(function(t){return t<2147483647})(o)&&u((()=>this.H4t()),o)}};var V1=class{C1t(t,i,e){const s=Rs();return this.S1t(s,t,i,e)}S1t(t,i,e,s){return new G1(t,i,e,this.Eet,this.q4t,s)}constructor(t,i){this.Eet=t,this.q4t=i}};r();var W1=30,H1=5;function q1(t){if(!t)throw new b("Unexpected - The cache parameters are undefined");const i=function(t){if(ae(t)&&!Va(t,"%"))return C(t);return t}(t.amount);!function(t){if(function(t){return ae(t)&&Va(t,"%")}(t)){const i=S(t);if(j(i)||i<0||i>100)throw new b("The amount as percentage must be between 0 and 100 percent.")}if(!ae(t)&&j(t))throw new b("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+W1),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||P_(t)&&t>new Date}(t))throw new b("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(j(t)||t<0)throw new b("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return H1;if(j(t))throw new b("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var X1=class{set n0t(t){this.X4t=t,this.Z4t=0,this.K4t=0,this.J4t=void 0}get n0t(){return this.X4t}iXt(){if(!this.X4t)return;const t=this.X4t.tGt;for(;this.Z4t<t.length;){const i=t[this.Z4t];for(void 0===this.J4t&&(this.J4t=Tr(i),this.K4t=0);this.K4t<this.J4t.length;){const t=this.J4t[this.K4t];if(this.K4t++,void 0!==t.tRt)return t.tRt}this.Z4t++,this.J4t=void 0}}Zn(){for(this.n0t=void 0,this.rO.c_(),this.rO=new Po;this.$4t.length;)this.U$t()}t2t(t){return new r1(this.Eet.Met,t,"temporary")}async Qjt(t){const i=R0(t.yUt,this.$W.ads.allowedMimeTypes);if(!i.length)return;const e=await Je.dL.yB(i,rl({sources:i}));if(!e.t.uB())return;this.P4t||(this.P4t=new this.q4t(this.dE));const s=this.Eet,n=new V1(s,this.P4t),r=this.t2t(n).S1t(rl({sources:e.yc}),q1({amount:10,bandwidth:ca.dL.Bz()||this.vR.tW}),"temporary");this.$4t.push(r);const h=this.P4t.M8(r,s,"temporary");this.rO.c_(),this.rO=new Po,h.pi(this.rO.a_).then(xs),this.i2t(h,t)}constructor(t,i,e,s){this.$4t=[],this.Z4t=0,this.K4t=0,this.P$t=async()=>{const t=this.iXt();t&&await this.Qjt(t)},this.U$t=()=>{const t=this.$4t.shift();null==t||t.pN()},this.i2t=async(t,i)=>{let e=!1;for(;!e;)await t.D_("Y1t"),e=1===t.a4t.U1t;i.ct<5&&this.P$t()},this.$W=t,this.dE=i,this.rO=new Po,this.q4t=e,this.vR=s,this.Eet=new pU}};r(),r();var Z1={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new Ki([0,0]).CB,references:[]},K1={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},J1=class t extends xG{async _ot(t,i,e,s){try{return await super._ot(t,i,e,s)}catch(t){yo(t)}const n=await this.e2t._ot(t,i,e,s);return await this.s2t(t,i,n),n}async s2t(i,e,s){if(void 0===this.n2t)return;const n=this.Eet.met,r=_U(i,e),h=await n.EL(r);if(h)await P1(h,this.n2t,n,this.E1t);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t.S4t(r,i,this.n2t);await this.Eet.vet((async t=>{await t.met.uet(e,this.E1t),await t.pet.uet(n,this.E1t)}))}catch(t){throw new u1("Unable to store segment with url: "+i,t)}}static S4t(t,i,e){return{segmentMetadataEntry:oe({},Z1,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:oe({},K1,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.e2t=new CG(i),this.Eet=e,this.n2t=s,this.E1t=n}};var $1,t4=class{M8(t,i,e){void 0===e&&(e="persistent");const s=Boolean(t.yc.sources[0].useCredentials),n=new GY(this.dE,rn.KT),r=new ZF(this.dE,s),h=new St(i.yet,i.met,i.pet,i.Tet),o=function(t,i,e,s,n){return new J1(i,t,e,s,n)}(this.dE,h,i,t.o,e),a=new Hs,u=new iY(tY(r,h),a,t);return this.r2t(t,i,u,a,n,o,e)}constructor(t){this.dE=t}},i4=class extends t4{r2t(t,i,e,s,n,r,h){return new z1(t,i,e,s,n,r,h,BW())}},e4=i4;!function(t){t[t.NOT_INITIALISED=0]="NOT_INITIALISED",t[t.h2t=1]="h2t",t[t.o2t=2]="o2t",t[t.Tv=3]="Tv",t[t.Dv=4]="Dv",t[t.a2t=5]="a2t"}($1||($1={}));var s4=class i extends F${get $Wt(){return this}static get KWt(){return eh.GYt}get KWt(){return i.KWt}QJt(t,i,e){i===ho.s7&&this.V4?W(this.$qt([t])):this.u2t.push(t)}z_(){return this.c2t.v0t?this.c2t.j_:this.E9()}P_(t){}Td(){return this.c2t.ct}U_(){return this.c2t.R_}Q_(){}Y_(){}K_(){return this.c2t.Z_}J_(t){this.Z_!==t&&(this.c2t.Z_=t,this.Co(new Ve(this.j_,this.xg)))}og(){return this.c2t.hg}pg(){return this.c2t.vg}Mg(){return Ki.aR().ks()}Ig(){return this.c2t.Sg}Cg(){return this.c2t.Lg}Og(){return this.c2t.xg}jg(t){this.xg!==t&&(this.c2t.xg=t,this.Co(new Ve(this.j_,this.xg)))}async Vg(){if(this.l2t)return;this.Co(new vh(this.j_)),this.d2t(),this.u2t.length&&(this.l2t=this.$qt(this.u2t),await this.l2t,this.l2t=void 0),await this.f2t.q$t(this.Qo.z_());const t=this._2t;4!==t&&1!==t&&5!==t||(!this.pGt&&this.g2t.length?this.w2t():this.pGt?(this.A2t=!0,this.c2t.Vg()):(this.EWt(),this.Qo.Vg()),this._2t=3)}Gg(){3===this._2t&&(this.c2t.Gg(),this._2t=4)}z$t(){this.f2t.z$t()}Cn(){this._2t=1,this.f2t.Cn()}async Wg(){this.f2t&&(this.f2t.jn(),this.v2t(!1),this.q0t.Wg(),this._2t=5,this.pGt&&(this.f2t.s0t(this.pGt.xQt),this.pGt=void 0)),this.V4=!1,this.A2t=!1,Ri(this.g2t),this.lHt&&(this.EWt(),this.Qo.ge()),Ri(this.u2t),await this.c2t.Wg(),await this.p0t.Zn()}Yp(){this.c2t.VFt(),this.q0t.VFt()}Yg(){this.p0t.Yg(),this.d2t()}nHt(i){return!(i.type!==t.kA||!this.f2t||!this.f2t.V$t(-1))&&(this.f2t.Y$t().then(xs),!0)}ge(){void 0!==this.c2t.y0t&&(this.p0t.ge(),this.c2t.ge()),void 0!==this.q0t.$0t&&this.q0t.ge()}be(){this.p0t.be(),this.c2t.be(),this.q0t.be()}async $qt(t){const i=await X0._1t(t,this.dE,this.iHt);if(!i.length){const t="Ads could not be loaded.";return this.iHt.Co(Ba.hHt(new It(Qe.ADBLOCK,zr.FILE_NOT_FOUND),t)),void(this.V4&&!this.pGt&&0===this.g2t.length&&this.m2t())}this.f2t.i0t(i),this.iHt.Co(new vn),this.lHt||this.Qo.hg||this.f2t.q$t(this.Qo.z_()),0!==this._2t&&5!==this._2t||this.Cn()}J$t(t){this.g2t.push(...t);for(const i of t)this.V4&&!this.lHt&&this.w2t()}async w2t(){if(2!==this._2t&&!this.p2t){0,this.p2t=!0,this._2t=2;const t=this.pGt;this.y2t(),this.pGt?(await this.pGt.xQt.C$t(this.iHt),this.M2t()||(this.p2t=!1),this.iHt.Co(new H0(this.T2t(this.pGt))),await this.N2t()):((null==t?void 0:t.xQt.x$t())&&this.iHt.Co(new Bh(this.T2t(t))),this.p2t=!1,this._2t=1,this.m2t())}}m2t(){this.EWt(),this.Qo.ge(),this.Qo.R_?this.Qo.Co(new ys(this.Qo.z_())):this.Qo.Vg()}y2t(){let t;if(this.pGt&&this.M2t())t=this.pGt.xQt;else{if(0===this.g2t.length)return;t=this.g2t.shift()}if(!t)return;const i=t.Mc();i?this.pGt=i:(this.pGt&&(this.f2t.s0t(this.pGt.xQt),this.pGt=void 0),this.pGt=void 0)}async N2t(){const t=this.pGt?function(t){var i,e;const s=null==(i=t.aFt)||null==(e=i.BBt)?void 0:e.RBt();return void 0===s?void 0:new qJ(s)}(this.pGt):void 0;if(t){if(!this.pGt)return;this.D2t=t,this.S2t(this.pGt.oRt),this.I2t(Jn.KUt);const i=this.D2t.Mc();this.pGt.xQt.x$t()&&(this.q0t.S0t(),1===this.pGt.xQt.ast&&this.iHt.Co(new ka(this.T2t(this.pGt)))),await this.j0t(i)}else this._2t=1,this.p2t=!1,this.pGt=void 0,this.w2t()}async j0t(t){if(t){var i;let s=j_(t.tRt),n=j_(t.sRt);var e;const r=null!=(e=null==(i=t.eRt)?void 0:i.IRt)?e:[],h=r.length>0,o=this.pGt,a=this.T2t(o);if(t.tRt){if(t.tRt.Xl=o,void 0!==o.v7.skipOffset){const i=js.sFt(o.v7.skipOffset,t.tRt.ct);i&&i<t.tRt.ct&&(t.tRt.NUt=i)}const i=a.iGt(t.tRt,r,t.nRt,o.v7);this.q0t.S0t(),this.NHt(),await this.c2t.j0t(i,t.lt,{width:this.Qo.we.offsetWidth,height:this.Qo.we.offsetHeight}),s=!0}if(t.sRt){const i=t.sRt.rRt[0];if(i.Xl=o,void 0!==o.v7.skipOffset){const t=js.sFt(o.v7.skipOffset,this.Qo.Td());t&&(i.Xl.NUt=t)}const e=s?[]:r,h=a.eGt(i,e,t.sRt,t.nRt,o.v7);s&&this.c2t.Z0t(),await this.q0t.j0t(h,t.lt,{width:this.Qo.we.offsetWidth,height:this.Qo.we.offsetHeight}),n=!0}if(s){this._2t=3,this.c2t.ge();const t=0===a._Et;this.A2t=t,this.p0t.Gg(),this.c2t.Vg(),this.Qo.Gg(),this.Qo.be(),this.NHt(),this.c2t.G0t()}n&&(this._2t=3,this.q0t.ge(),this.q0t.G0t()),(s||n||h)&&this.E2t(t.KBt),s||n||await this.b2t(),!s&&n&&(this.M2t()||this.g2t.length>0?this.w2t():(this.m2t(),this.pGt=o))}else null===t?await this.b2t():this.v2t(!0)}b2t(){const t=this.D2t;return this.j0t(t&&t.Mc())}v2t(t){this.I2t(Jn.JUt),this.L2t(),this._2t=1;const i=void 0!==this.pGt&&this.pGt.xQt.L$t();if(this.p2t=!1,i)t&&(this._2t=1,this.w2t());else{if(!this.lHt)return;this.Qo.ge(),!this.Qo.R_&&t&&this.Qo.Vg(),this.EWt()}}EWt(){this.k2t(),super.EWt()}k2t(){this.Qo.R_&&(this._2t=5),this.pGt&&(this.pGt.xQt.x$t()&&this.iHt.Co(new Bh(this.T2t(this.pGt))),this.f2t.s0t(this.pGt.xQt),this.pGt=void 0)}S2t(t){this.C2t=this.C2t.concat(t)}L2t(){this.C2t=[]}x2t(t){this.Qo.we.appendChild(t)}I2t(t){for(const i of this.C2t)i.hQ===t&&Ir(i.eventURL)}E2t(t){this.c2t.f0t(Jn.GUt);for(const i of t)Ir(i)}get t7(){return this.pGt?this.T2t(this.pGt):null}get K9(){return this.pGt?[this.c2t.y0t,this.q0t.$0t].filter(j_):[]}get i7(){const t=this.g2t.concat(this.f2t.i7.filter((t=>!t.hGt())));return Nh(t,(t=>t.N$t.Oc.filter((t=>!t.hGt()))))}get e7(){return this.f2t.i7.map((t=>t.N$t))}g7(t){const i=this.YJt();for(const e of i)SK(e.sources,e.timeOffset)||t.m1(e,ho.s7,!1)}YJt(){const t=[];for(const i of this.K9.concat(this.i7))t.push(i.v7);const i=this.g2t.concat(this.f2t.i7.filter((t=>!t.hGt())));for(const e of i)for(const i of e.tGt)i.W||t.push(i.v7);return t.push(...this.u2t),Ic(t)}M2t(){return!!this.pGt&&Tr(this.pGt).some((t=>t.tRt))}T2t(t){return t.xQt.N$t}d1t(){return this.O2t}Ug(){return this.p0t.Ug()}E_(){return this.p0t.E_()}gHt(t){this.f2t.gHt(t)}async gn(){await super.gn(),this.Qo.fn(t.jh,this.d2t),this.iHt.kR(this.c2t.iHt),this.iHt.kR(this.q0t.iHt),this.iHt.kR(this.f2t),this.c2t.gn(),this.q0t.gn(),await this.p0t.gn()}constructor(i,e,s,n,r,h){super(i,e),this.g2t=[],this._2t=0,this.C2t=[],this.p2t=!1,this.V4=!1,this.A2t=!0,this.u2t=[],this.j2t=i=>{i.type===t.jh&&this.A2t?this.A2t=!1:this.Co(i)},this.d2t=()=>{this.V4=!0},this.z2t=async()=>(this._2t=1,await this.c2t.S0t(),this.j0t(this.D2t.Mc())),this.P2t=async t=>{const i=new It(Qe.PLAYBACK,zr.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.iHt.Co(Ba.hHt(i,t)),await this.c2t.S0t(),this.j0t(this.D2t.Mc())},this.B2t=()=>(this.q0t.S0t(),this.j0t(this.D2t.Mc())),this.R2t=t=>{const i=new It(Qe.PLAYBACK,zr.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.iHt.Co(Ba.hHt(i,t)),this.q0t.S0t(),this.j0t(this.D2t.Mc())},this.dE=h,this.p0t=s,this.q0t=new W0(this.R2t,this.B2t,this),this.c2t=new G0(this.P2t,this.z2t,this.q0t,n,this,i.Iu,s),this.x2t(this.q0t.r0t),this.x2t(this.c2t.r0t);const o=new X1(n,h,i4,r);this.f2t=new j0(this.Qo,this,this.iHt,o),this.c2t.m_(this.j2t),this.q0t.m_(this.Ds),this.iHt.Qa(this.c2t.iHt),this.iHt.Qa(this.q0t.iHt),this.iHt.Qa(this.f2t),this.O2t=new Mc(this,this.Qo),this.Iu.yn(th.pn,this.Ds),this.Qo.yn(t.jh,this.d2t)}};ta.dL.ZR(new class{get HWt(){return s4.KWt}XR(t){return t&&("string"!=typeof t.integration||t.integration===oI.DEFAULT||t.integration===oI.THEO)}qWt(t,i,e){const s=new et(t.we,e,t.KO,t.v9,t.N9,t.Ol);return new s4(t,i,s,e,t.v9,t.KO)}m1(t,i,e,s){e.QJt(t,i,s)}lF(t){const i=yJ(t.sources);if(!i)return;const e={integration:oI.THEO,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&ji("property timeOffset will be ignored for vmap ad sources");const s=lh(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=lh(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}}),r(),r();var n4=class{JV(){var t;this.U1||(null==(t=this.h$t)||t.initialize(),this.U1=!0)}get r0t(){return this.SVt}get U2t(){return this.Q2t.offsetHeight}get F2t(){return this.Q2t.offsetWidth}get Y2t(){return this.h$t}G2t(t){"linear"===t?this.SVt.style.marginTop="0px":"nonlinear"===t&&(this.SVt.style.marginTop="-45px")}ge(){this.SVt.style.opacity="1",this.SVt.style.pointerEvents=""}be(){this.SVt.style.opacity="0",this.SVt.style.pointerEvents="none"}e_(){var t;null==(t=this.h$t)||t.destroy(),this.h$t=void 0}constructor(t,i){this.h$t=void 0,this.U1=!1,this.S8=t;const e=h.createElement("div");e.className="theoplayer-ima-wrapper",ia(e),e.style.zIndex="10",li.Qs&&function(t,i){t.addEventListener(i,qN)}(e,"mousedown"),i.appendChild(e);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.Q2t=s,e.appendChild(s),this.SVt=e,this.h$t=new google.ima.AdDisplayContainer(this.Q2t,this.S8)}};r(),r(),r();var r4=class{get dUt(){return this.V2t.getAdId()}get aKt(){const t=this.V2t.getAdPodInfo();if(void 0!==t)try{return{cXt:t.getAdPosition(),ZYt:t.getMaxDuration(),W2t:t.getPodIndex(),_Et:t.getTimeOffset(),lXt:t.getTotalAds(),H2t:t.getIsBumper()}}catch(t){return}}get HBt(){return this.V2t.getAdSystem()}get q2t(){return this.V2t.getAdvertiserName()}get PRt(){var t;return null!=(t=this.V2t.getApiFramework())?t:void 0}get eRt(){return this.ERt.map((t=>({RRt:t.getAdSlotId(),IP:t.getContentType(),O:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get IP(){var t;return null!=(t=this.V2t.getContentType())?t:void 0}get vRt(){return this.V2t.getCreativeId()}get dJt(){return this.V2t.getCreativeAdId()}get X2t(){return this.V2t.getDealId()}get nM(){return this.V2t.getDescription()}get ct(){return this.V2t.getDuration()}get ji(){return this.V2t.getWidth()}get Ti(){return this.V2t.getHeight()}get oJt(){var t;return null!=(t=this.V2t.getMediaUrl())?t:void 0}get Z2t(){return this.V2t.getMinSuggestedDuration()}get cJt(){return this.V2t.getSkipTimeOffset()}get K2t(){return this.V2t.getSurveyUrl()}get kP(){return this.V2t.getTitle()}get aJt(){return this.V2t.getTraffickingParameters()}get uJt(){return this.V2t.getTraffickingParametersString()}get nRt(){return this.V2t.getUniversalAdIds().map((t=>({_Jt:t.getAdIdRegistry(),gJt:t.getAdIdValue()})))}get _$t(){return this.V2t.getUiElements()}get lJt(){return this.V2t.getVastMediaBitrate()}get rJt(){return this.V2t.getVastMediaHeight()}get nJt(){return this.V2t.getVastMediaWidth()}get tJt(){return this.V2t.getWrapperAdIds()}get iJt(){return this.V2t.getWrapperAdSystems()}get eJt(){return this.V2t.getWrapperCreativeIds()}get tKt(){return this.V2t.isLinear()}constructor(t){this.V2t=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.ERt=t.getCompanionAds(0,0,i)}};function h4(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var o4=class extends i{jg(t){var i;null==(i=this.$Yt)||i.setVolume(t)}Og(){return this.$Yt.getVolume()}TKt(){return this.$Yt.getRemainingTime()}e_(){Ri(this.Ic),this.Wu.fn(th.pn,this.J2t),this.$Yt.removeEventListener(google.ima.AdEvent.Type.LOADED,this.$2t),this.$Yt.removeEventListener(h4(),this.forwardAdEventListener),this.$Yt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.$Yt.destroy()}Cn(){this.$Yt.start()}e$t(){this.$Yt.resume()}Gg(){this.$Yt.pause()}Yp(){this.$Yt.skip()}Wg(){this.$Yt.stop()}rKt(){const t=this.$Yt.getCurrentAd();if(t)return this.t3t(t)}a$t(){return this.$Yt.getCuePoints()}t3t(t){let i=H_(this.Ic,(i=>i.V2t===t));return i||(i=new r4(t),this.Ic.push(i)),i}v$t(t){this.$Yt.updateAdsRenderingSettings(c4(t))}constructor(t,i,e){super(),this.Ic=[],this.$2t=t=>{t.getAd().isLinear()?this.h$t.G2t("linear"):this.h$t.G2t("nonlinear")},this.J2t=()=>{this.$Yt.resize(this.h$t.F2t,this.h$t.U2t,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:Mo.wXt,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:Mo.AXt,[google.ima.AdEvent.Type.CLICK]:Mo.vXt,[google.ima.AdEvent.Type.DURATION_CHANGE]:Mo.EA,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:Mo.mXt,[google.ima.AdEvent.Type.STARTED]:Mo.pXt,[google.ima.AdEvent.Type.IMPRESSION]:Mo.yXt,[google.ima.AdEvent.Type.PAUSED]:Mo.Dv,[google.ima.AdEvent.Type.RESUMED]:Mo.MXt,[google.ima.AdEvent.Type.AD_PROGRESS]:Mo.aXt,[google.ima.AdEvent.Type.AD_BUFFERING]:Mo.TXt,[google.ima.AdEvent.Type.FIRST_QUARTILE]:Mo.NXt,[google.ima.AdEvent.Type.MIDPOINT]:Mo.BUt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:Mo.DXt,[google.ima.AdEvent.Type.COMPLETE]:Mo.RUt,[google.ima.AdEvent.Type.USER_CLOSE]:Mo.SXt,[google.ima.AdEvent.Type.LINEAR_CHANGED]:Mo.IXt,[google.ima.AdEvent.Type.LOADED]:Mo.EXt,[google.ima.AdEvent.Type.AD_CAN_PLAY]:Mo.bXt,[google.ima.AdEvent.Type.AD_METADATA]:Mo.LXt,[google.ima.AdEvent.Type.AD_BREAK_READY]:Mo.kXt,[google.ima.AdEvent.Type.INTERACTION]:Mo.CXt,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:Mo.xXt,[google.ima.AdEvent.Type.SKIPPED]:Mo.OXt,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:Mo.jXt,[google.ima.AdEvent.Type.LOG]:Mo.zXt,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:Mo.PXt,[google.ima.AdEvent.Type.VOLUME_CHANGED]:Mo.BXt,[google.ima.AdEvent.Type.VOLUME_MUTED]:Mo.RXt}[t]}(t.type),s={type:e,date:new Date,o7:i?this.t3t(i):void 0,VZt:X$(e,t.getAdData())};this.Co(s)},this.forwardAdErrorEventListener=t=>{this.Co({date:new Date,o7:void 0,type:Nc.UXt,VZt:{IKt:J$(t.getError())}})},this.$Yt=t,this.h$t=i,this.Wu=e,this.Wu.yn(th.pn,this.J2t),this.$Yt.init(this.h$t.F2t,this.h$t.U2t,google.ima.ViewMode.NORMAL),this.$Yt.addEventListener(google.ima.AdEvent.Type.LOADED,this.$2t),this.$Yt.addEventListener(h4(),this.forwardAdEventListener),this.$Yt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}};r();var a4=class extends Ha{get i3t(){return this.e3t}get r0t(){return this.SVt}fa(){return this}constructor(t,i){super("y$t"),this.e3t=t,this.SVt=i}},u4=class extends i{s$t(){var t;null==(t=this.n$t)||t.contentComplete()}async $qt(t,i,e){if(this.s3t)throw new b("Only one ImaAdsRequest can be made at a time.");if(!this.n3t.Y2t)throw new b("AdDisplayContainer is not initialized.");this.n$t=new google.ima.AdsLoader(this.n3t.Y2t),this.n$t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.n$t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.s3t=new No,this.r3t=i,this.h3t=e;const s=new google.ima.AdsRequest;return t.uqt?s.adTagUrl=t.uqt:t.cqt&&(s.adsResponse=t.cqt),s.linearAdSlotWidth=t.sqt,s.linearAdSlotHeight=t.nqt,s.nonLinearAdSlotWidth=t.rqt,s.nonLinearAdSlotHeight=t.hqt,s.setAdWillAutoPlay(t.oqt),s.setAdWillPlayMuted(t.aqt),t.lqt&&(s.omidAccessModeRules=t.lqt),this.n$t.requestAds(s),this.s3t.OL}e_(){var t;void 0!==this.n$t&&(this.n$t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.n$t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.n$t.destroy(),this.n$t=void 0),null==(t=this.s3t)||t.xL("AdsLoader destroyed"),this.s3t=void 0}constructor(t,i){super(),this.onAdsManagerLoadedListener=t=>{if(this.r3t&&this.h3t&&this.s3t){var i;const e=c4(this.h3t),s=this.r3t,n=t.getAdsManager({get currentTime(){return s.j_},get duration(){return s.ct}},e),r=new o4(n,this.n3t,this.Wu);this.Co(new a4(n,this.n3t.r0t)),null==(i=this.s3t)||i.CL(r),this.s3t=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={pL:t.getError().getMessage(),_Xt:t.getError().getVastErrorCode(),wQt:t.getError().getErrorCode(),hA:Z$(t.getError().getType()),gXt:void 0};null==(i=this.s3t)||i.xL(e),this.s3t=void 0},this.Wu=i,this.n3t=t}};function c4(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.g$t,t._$t&&(i.uiElements=t._$t),i.mimeTypes=t.f$t,void 0!==t.A$t&&(i.playAdsAfterTime=t.A$t),void 0!==t.w$t&&(i.loadVideoTimeout=t.w$t),void 0!==t.hJt&&(i.bitrate=t.hJt),void 0!==t.A$t&&(i.playAdsAfterTime=t.A$t),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}r();var l4=class extends i{get j_(){return this.Qo.Tg?this.o3t:this.Qo.z_()}get ct(){return this.Qo.Td()}get Z_(){return this.Qo.Z_}get xg(){return this.Qo.xg}Zn(){this.o3t=0}constructor(i){super(),this.Qo=i,this.o3t=this.Qo.z_(),this.Qo.yn(t.ov,(()=>{this.Qo.Tg||(this.o3t=this.Qo.z_()),this.Co(new Tc(this.j_,void 0))}))}};dr.dL.registerWebImaAdPlayerConstructor((function(t,i,e){I0(e);const s=E0(e)?t.Ug():void 0,n=new n4(s,t.we),r=new u4(n,t.Iu),h=new l4(t);return new b0(t,i,e,t.y9,n,r,h)})),r(),r(),r(),r(),r();var d4=class extends i{get jW(){return this.Lvt===$r.CONNECTED}get Lvt(){return this.ja}get va(){return this.Xa||(this.Xa=function(t){return{get casting(){return t.jW},get state(){return t.Lvt},start(){t.qg()},stop(){t.Xg()},addEventListener(i,e){const s=As(i,P);t.yn(s,e)},removeEventListener(i,e){const s=As(i,P);t.fn(s,e)}}}(this)),this.Xa}a3t(){this.u3t(),this.UMt.yn(t.lo,this.c3t),ag.Ys.ntt&&this.Ta($r.AVAILABLE)}preloadPlayer(t){if(Pi(t),this.Qo.vg<rv.Gn){const i=this.Qo.D_(qo.yv,t);return this.Qo.gg=ii.Mp,i}return Promise.resolve()}Ta(t){t!==this.ja&&(this.ja=t,this.Co(new S$(this.ja)))}async l3t(t){await this.preloadPlayer(t),this.YV.qg()}Xg(){ag.Ys.ntt&&this.Qo.Xg()}gn(){this.Vo(),this.UMt.fn(t.lo,this.c3t),this.d3t.c_()}constructor(t,i){super(),this.Xa=void 0,this.ja=$r.UNAVAILABLE,this.d3t=new Po,this.handleAirplayChangedEvent=()=>{this.Qo&&this.Qo.W_?this.f3t():this.Lvt===$r.CONNECTED&&this._3t()},this.UMt=t,this.YV=i}},f4=class extends d4{u3t(){this.Qo&&this.Qo.fn(t.pA,this.handleAirplayChangedEvent),this.g3t?this.Qo=this.YV:this.Qo=this.w3t,this.Qo.yn(t.pA,this.handleAirplayChangedEvent)}get g3t(){return this.YV.Hg()}async f3t(){if(this.Qo){if(this.g3t){if(!this.Qo.hg){const i=new Promise((t=>u(t,800))),e=this.Qo.D_(t.Sh,this.d3t.a_);await Promise.race([e,i])}this.Qo.Vg()}else{this.A3t=this.YV.j_,this.v3t=this.YV.k_,this.w3t.yn(t.ov,this.handleAirplayPlayerTimeUpdate),this.m3t=this.YV.Pw,this.YV.Pw=this.w3t,this.m3t.Gg(),this.m3t.be(),this.w3t.ge(),this.w3t.Z_=this.m3t.Z_,this.w3t.ag=this.m3t.ag,this.w3t.xg=this.m3t.xg;const i=this.w3t.D_(t.XA);this.w3t.j_=this.m3t.j_,await i,this.w3t.Vg(),this.w3t.Z_=this.m3t.Z_,this.w3t.ag=this.m3t.ag,this.w3t.xg=this.m3t.xg}this.Ta($r.CONNECTED)}}_3t(){if(this.m3t){this.w3t.fn(t.ov,this.handleAirplayPlayerTimeUpdate),this.m3t.Z_=this.w3t.Z_,this.m3t.ag=this.w3t.ag,this.m3t.xg=this.w3t.xg;li.Rb&&!li.Ga&&this.YV.ct===1/0?this.v3t?this.m3t.k_=this.v3t:this.m3t.j_=1/0:this.m3t.j_=this.A3t,this.v3t=void 0,this.A3t=void 0,this.m3t.ge(),this.w3t.be(),this.w3t.hg||this.m3t.Vg(),this.YV.Pw=this.m3t,this.w3t.Zn(),this.m3t=void 0}else this.Qo&&(this.Qo.j_=this.Qo.j_+1e-4);this.Ta($r.AVAILABLE)}qg(){ag.Ys.ntt&&(this.UMt.Yg(),this.d3t.c_(),this.d3t=new Po,this.g3t?W(this.l3t(this.d3t.a_)):W(this.p3t(this.d3t.a_)))}async p3t(t){try{await this.w3t.Zn();const i=this.YV.Wa();if(void 0===i)throw new b("Not possible to start Airplay without a source");await this.w3t.ga(i,t);const e=this.w3t.D_(qo.Tv,t);this.w3t.Vg(),await function(t,i){return hu((e=>Promise.race([t,be(i,e).then((()=>{throw new b("Timeout")}))])))}(e,3e3),this.w3t.Gg(),Pi(t),this.w3t.qg()}catch(t){if(Oi(t))return;0}}gn(){var t;super.gn(),this.YV.wN(this.w3t),null==(t=this.w3t)||t.gn()}constructor(t,i,e){super(t,i),this.c3t=()=>{var t;const i=null==(t=this.YV.Wa())?void 0:t.sources.filter(_s);ag.Ys.ntt&&(null==i?void 0:i.some(CS))?this.Ta($r.AVAILABLE):this.Ta($r.UNAVAILABLE)},this.handleAirplayPlayerTimeUpdate=t=>{this.A3t=t.currentTime,this.v3t=this.YV.k_},this.w3t=e,this.w3t.be(),i.gN(e),this.a3t()}};r();var Es,_4=class extends ha{Kg(){this.y3t.Kg()}get ht(){return this.y3t.ht}get b_(){return this.y3t.b_}get bt(){return this.TB}get j_(){return this.y3t.j_}set j_(t){this.y3t.j_=t}get k_(){return this.y3t.k_}get ct(){return this.y3t.ct}get we(){return this.Us}get R_(){return this.y3t.R_}get lt(){return this.y3t.lt}get F_(){return this.y3t.F_}get G_(){return this.y3t.G_}get W_(){return this.y3t.W_}get Bg(){return this.y3t.Bg}get zg(){return this.y3t.zg}get q_(){return this.y3t.q_}get Z_(){return this.y3t.Z_}set Z_(t){this.y3t.Z_=t}get eg(){return this.y3t.eg}get hg(){return this.y3t.hg}get ag(){return this.y3t.ag}set ag(t){this.y3t.ag=t}get fg(){return this.y3t.fg}get gg(){return this.y3t.gg}set gg(t){this.y3t.gg=t}get vg(){return this.y3t.vg}get yg(){return this.y3t.yg}get Tg(){return this.y3t.Tg}Hg(){return this.y3t.Hg()}qg(){this.y3t.qg()}Xg(){this.y3t.Xg()}get nt(){return this.y3t.nt}get Sg(){return this.y3t.Sg}get Lg(){return this.y3t.Lg}get rt(){return this.y3t.rt}get xg(){return this.y3t.xg}set xg(t){this.y3t.xg=t}Vg(){W(this.y3t.Vg())}Gg(){this.y3t.Gg()}async Wg(){}Wa(){return this.bc}async ga(t,i){let e;if(Pi(i),this.bc=t,zv(t.sources))e=Av({src:""});else{const i=t.sources.filter(_s);for(const t of i)if(CS(t)){e=t;break}}if(!e)throw new b("Unsupported source.");await this.y3t.ga(e,t,i),this.kB(e)}kB(t){this.TB!==t&&(this.TB=t,this.Co(new Wt(t)))}Ug(){return this.y3t.Ug()}E_(){return[]}Yg(){this.M3t.wR()}Qg(t){qv(this,t)}Fg(){}Jg(t){return!1}Zg(){this.y3t.Zg()}async Zn(){this.TB=void 0,this.bc=void 0,await this.y3t.Zn()}ge(){this.y3t.ge()}be(){this.y3t.be()}Rg(){return this.y3t.Rg()}async gn(){this.Vo(),this.M3t.gn(),await this.y3t.gn(),this.nN.gn(),this.hN.gn(),this.Dl.gn()}constructor(t,i,e,s,n,r){super(),this.TB=void 0,this.bc=void 0,this.nN=new _e,this.hN=new _e,this.Dl=new Ac,this.Us=t,this.M3t=new jy(n,r,1,[iv.vp]),this.M3t.MR(t),this.y3t=new kS(t,this.M3t,i,e,s),this.y3t.m_(this.Ds),this.nN.Pw=this.y3t.ht,this.hN.Pw=this.y3t.rt,this.Dl.Pw=this.y3t.nt}},g4=class extends O{async gn(){this.T3t.gn(),await super.gn()}constructor(i){super(i);const e=new _4(this.p9.we,this.KO,this.wd,this.v9,this.N9,this.Ol);this.T3t=new f4(this,this.p9,e),this.qQ.UW(this.T3t),this.yn(t.SA,(()=>{this.T3t.u3t()}))}};Cj((t=>new g4(t)),iu.Y9),r(),r(),r(),r(),function(t){t.vXt="click",t.N3t="continue",t.D3t="end",t.ha="error",t.Ah="fullscreen",t.Mp="metadata",t.IUt="mute",t.XQt="nonlinear",t.Sh="pause",t.hFt="position",t.S3t="ready",t.bUt="resume",t.I3t="seek_end",t.E3t="seek_start",t.b3t="stall",t.ect="start",t.Ru="text",t.L3t="linear_event"}(Es||(Es={}));var w4=class{k3t(t){this.C3t=t}x3t(t,i){let e;switch(t){case Es.vXt:e=this.O3t.CLICK;break;case Es.N3t:e=this.O3t.CONTINUE;break;case Es.D3t:e=this.O3t.END;break;case Es.ha:e=this.O3t.ERROR;break;case Es.Ah:e=this.O3t.FULLSCREEN;break;case Es.Mp:e=this.O3t.METADATA;break;case Es.IUt:e=this.O3t.MUTE;break;case Es.XQt:e=this.O3t.NONLINEAR;break;case Es.Sh:e=this.O3t.PAUSE;break;case Es.hFt:e=this.O3t.POSITION;break;case Es.S3t:e=this.O3t.READY;break;case Es.bUt:e=this.O3t.RESUME;break;case Es.I3t:e=this.O3t.SEEK_END;break;case Es.E3t:e=this.O3t.SEEK_START;break;case Es.b3t:e=this.O3t.STALL;break;case Es.ect:e=this.O3t.START;break;case Es.Ru:e=this.O3t.TEXT;break;case Es.L3t:e=this.O3t.LINEAR_EVENT}this.C3t.reportPlayerEvent(e,i)}constructor(t){this.O3t=t}};r(),r();var A4,v4=class{gE(t){t.yn(Sl.xN,this.j3t)}gn(){for(let t of this.z3t)this.it(t);this.jMt.fn(gt.ew,this.cP)}it(t){if(t.zt===Pt.Mp){for(let i of t.L.xw)i.fn(Sl.xN,this.j3t);t.fn(Os.aw,this.B1),t.fn(Os.cw,this.P3t)}}constructor(t,i){this.jMt=t,this.xit=i,this.z3t=[],this.cP=t=>{const i=t.Lt;if(i.zt===Pt.Mp){for(let t of i.L.xw)this.B3t(t)&&this.gE(t);i.yn(Os.aw,this.B1),i.yn(Os.cw,this.P3t),this.z3t.push(i)}},this.B1=t=>{this.B3t(t.jN)&&this.gE(t.jN)},this.P3t=t=>{t.jN.fn(Sl.xN,this.j3t)},this.jMt.yn(gt.ew,this.cP)}},m4=class extends v4{R3t(t){return na(this.U3t,t)}SY(t){var i;const e=function(t,i){if(!t||!i||i.U<=0)return[];const e=t.zN,s=i.xw,n=[];for(let i=Jk(t)+1,r=s.length;i<r;i++){const r=s[i],h=r.O;if(e===r.zN&&p4(h)){if(r.O.id===t.O.id)break;n.push(r)}}return n}(t,null==(i=t.Lt)?void 0:i.L);this.Q3t(e);const s=[t].concat(e);this.F3t(s)}Q3t(t){this.U3t=this.U3t.concat(t)}F3t(t){let i={};for(let e of t){let t=e.O;i[t.id]=t.text}this.xit.x3t(Es.Mp,i)}Y3t(t){Et(this.U3t,t)}constructor(t,i){super(t,i),this.U3t=[],this.j3t=t=>{let i=t.jN;this.R3t(i)?this.Y3t(i):this.SY(i)},this.B3t=t=>t.O.id&&p4(t.O)}};function p4(t){switch(t.id){case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return!0}return!1}r(),r(),function(t){t.TQt="linear",t.NQt="nonlinear"}(A4||(A4={}));var y4=class{constructor(t,i){this.hA=t,this.PGt=i}},M4=class extends y4{get G3t(){return this.V3t}get ast(){return this.Y7}constructor(t,i,e){super("nonlinear",t),this.V3t=i,this.Y7=e}},T4=class extends y4{constructor(t){super("linear",t)}};r();var N4,D4="yospace",S4="urn:yospace:a:id3:2016";function I4(t){return Boolean(Ov(t)&&Ng(t,["ssai"])&&function(t){return Boolean(Ng(t,["integration"])&&t.integration===D4)}(t.ssai))}!function(t){t.S="S",t.M="M",t.E="E"}(N4||(N4={}));var E4=class{W3t(t){this.H3t=t}q3t(){let t={AdBreakStart:()=>{this.H3t&&this.H3t.AdBreakStart&&this.H3t.AdBreakStart()},AdvertStart:t=>{this.X3t(),this.H3t&&this.H3t.AdvertStart&&this.H3t.AdvertStart(t)},AdvertEnd:t=>{this.K3t.Z3t(),this.H3t&&this.H3t.AdvertEnd&&this.H3t.AdvertEnd(t)},AdBreakEnd:()=>{this.K3t.Z3t(),this.H3t&&this.H3t.AdBreakEnd&&this.H3t.AdBreakEnd()},UpdateTimeline:t=>{this.H3t&&this.H3t.UpdateTimeline&&this.H3t.UpdateTimeline(t)},InjectVast:()=>{this.H3t&&this.H3t.InjectVast&&this.H3t.InjectVast()}};this.C3t.registerPlayer(t)}gn(){this.K3t.gn(),this.C3t=void 0,this.J3t&&(m(this.J3t),this.J3t=void 0)}constructor(t,i){this.C3t=t,this.K3t=i,this.X3t=()=>{if(this.J3t&&(m(this.J3t),this.J3t=void 0),this.C3t.session.currentAdvert){let t=this.C3t.session.currentAdvert.advert,i=t.getLinear(),e=t.getNonLinears();const s=[];i&&i.clickThrough&&s.push(new T4(i.clickThrough));const n=e.filter((t=>{const i=t.resources.images||{};return 0!==_.keys(i).length}));if(n.length){const t=function(t){const i=_.keys(t.resources.images);return t.resources.images[i[0]]}(n[0]);t&&s.push(new M4(n[0].clickThrough,t,String(e.indexOf(n[0]))))}this.K3t.$3t(s)}else this.J3t=v(this.X3t,250)},this.q3t()}};r();var b4=class t{$3t(t){for(let i of t)i.hA===A4.TQt?this.t5t(i):this.i5t(i)}i5t(i){let e=h.createElement("img");e.src=i.G3t,e.className="theoplayer-yospace-non-linear-image",e.style.maxWidth="100%";const s=t.L0t(i.PGt,"theoplayer-yospace-advert"),n=ag.Ys.Je?"touchend":"click";s.addEventListener(n,this.e5t),s.setAttribute("data-advertindex",i.ast),s.appendChild(e),s.style.zIndex="10",s.style.position="absolute",this.Us.appendChild(s),this.s5t.push(s)}n5t(){ei(this.r5t),this.r5t=void 0}Z3t(){this.n5t(),this.h5t()}t5t(i){this.n5t();let e=t.L0t(i.PGt,"theoplayer-yospace-ad-clickthrough");e.style.zIndex="10";const s=ag.Ys.Je?"touchend":"click";e.addEventListener(s,this.o5t),ia(e),this.Us.appendChild(e),this.r5t=e}static L0t(t,i){const e=h.createElement("a");return e.setAttribute("href",t),e.setAttribute("target","Du"),i&&(e.className=i),e.setAttribute("rel","noopener"),e}gn(){this.Z3t(),this.Us=void 0}constructor(t,i){this.Us=t,this.xit=i,this.s5t=[],this.o5t=t=>{this.xit.x3t(Es.vXt),t.stopPropagation()},this.e5t=t=>{const i=t.currentTarget.getAttribute("data-advertindex");i&&(this.xit.x3t(Es.XQt,i),t.stopPropagation())},this.h5t=()=>{for(let t of this.s5t)t&&t.parentElement&&t.parentElement.removeChild(t);Ri(this.s5t)}}};r();var L4,k4,C4=class extends v4{F3t(t){this.xit.x3t(Es.Mp,t)}constructor(t,i){super(t,i),this.j3t=t=>{const i=function(t){const i=zh(t),e=i.split(","),s={};for(const t of e){const[i,e]=t.split("=");s[i]=e}return s}(t.jN.O);if(i.YTYP===N4.E){if(j_(this.a5t)&&i.YMID!==this.a5t)return;this.a5t=void 0}else i.YTYP===N4.S&&(this.a5t=i.YMID);this.F3t(i)},this.B3t=t=>{const i=t;return j_(i.ST)&&function(t){return t===S4}(i.ST)}}};!function(t){t[t.u5t=-1]="u5t",t[t.c5t=-2]="c5t",t[t.l5t=-3]="l5t",t[t.d5t=-10]="d5t",t[t.f5t=-11]="f5t"}(L4||(L4={})),function(t){t._5t="ready",t.g5t="error",t.w5t="no-analytics"}(k4||(k4={}));var x4,O4=class extends i{get va(){return this.Xa}k3t(t,i){this.C3t=t,this.A5t=i,this.A5t.W3t(this.v5t),this.Co(new gg("sessionavailable"))}fa(){let t=this;return{get session(){return t.C3t&&t.C3t.session},registerPlayer(i){t.v5t=i,t.A5t&&t.A5t.W3t(t.v5t)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}gn(){this.Vo()}constructor(){super(),this.Xa=this.fa()}};!function(t){t[t.jh=0]="jh",t[t.Sh=1]="Sh"}(x4||(x4={}));var j4=class{Gg(){this.m5t?this.p5t=1:this.Qo.y5t()}Vg(){this.m5t?this.p5t=0:this.Qo.M5t()}get T5t(){return this.N5t}D5t(t){-11===t&&ji("A connection has been established with the CSM, but the stream cannot be paused. This is only valid for Linear playback"),this.Qo.S5t(oe({},this.SB,{sources:[oe({},this.I5t,{src:this.C3t&&this.C3t.masterPlaylist(),type:this.I5t&&this.I5t.type})]})),this.E5t(),0===this.p5t&&this.Qo.M5t()}b5t(t){let i;i=-11===t?"Yospace: A connection has been established with the CSM, but the stream cannot be paused. This is only valid for Linear playback":-2===t?"Yospace: The primary URL is not a valid SSAI stream":-10===t?"Yospace: The stream URL is not correctly formatted":-1===t?"Yospace: Connection error":-3===t?"Yospace: Connection timeout":"Yospace: Session could not be initialised",this.C3t&&(this.C3t.shutdown(),this.C3t=void 0),this.Qo.L5t(new ce(le.SOURCE_INVALID,i))}ga(t){this.SB=t,this.k5t(),this.I5t=t?H_(t.sources,I4):void 0;let i=!!Ys.YSSessionManager;if(this.I5t,this.I5t&&this.I5t.src&&i){this.m5t=!0;const t=Ys.YSSessionManager;let i;switch(this.I5t.ssai.streamType){case"vod":i=t.createForVoD;break;case"livepause":i=t.createForLivePause;break;case"nonlinear":i=t.createForNonLinear;break;default:i=t.createForLive}const e=i(this.I5t.src,{},this.C5t);if(this.x5t(e),!this.A5t)throw new b("An error occured while instantiating a YospaceSessionManager");this.N5t.k3t(e,this.A5t),this.O5t=this.startPositionPoller(),this.j5t=this.Qo.Z_}else this.m5t=!1,this.Qo.S5t(t)}x5t(t){this.C3t=t,this.xit.k3t(this.C3t),this.z5t&&this.z5t.gn(),this.z5t=new m4(this.Qo.nt,this.xit),this.P5t&&this.P5t.gn(),this.P5t=new C4(this.Qo.nt,this.xit),this.A5t&&this.A5t.gn();const i=new b4(this.Qo.we,this.xit);this.A5t=new E4(this.C3t,i)}k5t(){var i;this.Qo.fn("presentationmodechange",this.B5t),this.Qo.fn(t.uv,this.sWt),this.Qo.fn(t.jh,this.R5t),this.Qo.fn(t.jh,this.U5t),this.Qo.fn(t.kA,this.Mh),this.Qo.fn(t.Sh,this.cPt),this.Qo.fn(t.ZA,this.We),this.Qo.fn(t.XA,this.WP),this.Qo.fn(qo.Mv,this.Q5t),this.Qo.fn(qo.Tv,this.qP),m(this.O5t),this.O5t=null,this.p5t=1,this.m5t=!1,null==(i=this.C3t)||i.shutdown(),this.C3t=void 0}gn(){this.k5t(),this.T5t.gn()}constructor(i){this.xit=new w4(Ys.YSPlayerEvents),this.m5t=!1,this.p5t=1,this.N5t=new O4,this.F5t=!1,this.j5t=!1,this.C5t=(t,i)=>{if(!this.C3t)throw new b("An error occured while instantiating a YospaceSessionManager");if(this.m5t=!1,"ready"===t)this.D5t(i);else this.b5t(i)},this.E5t=()=>{this.Qo.yn("presentationmodechange",this.B5t),this.Qo.yn(t.uv,this.sWt),this.Qo.yn(t.jh,this.R5t),this.Qo.yn(t.kA,this.Mh),this.Qo.yn(t.Sh,this.cPt),this.Qo.yn(t.ZA,this.We),this.Qo.yn(t.XA,this.WP),this.Qo.yn(qo.Mv,this.Q5t),this.Qo.yn(qo.Tv,this.qP)},this.B5t=()=>{this.xit.x3t(Es.Ah,this.Qo.cs())},this.sWt=()=>{const t=this.Qo.Z_;t!==this.j5t&&(this.j5t=t,this.xit.x3t(Es.IUt,t))},this.R5t=()=>{this.Qo.fn(t.jh,this.R5t),this.Qo.yn(t.jh,this.U5t),this.xit.x3t(Es.ect)},this.U5t=()=>{this.xit.x3t(Es.bUt)},this.Mh=()=>{this.xit.x3t(Es.D3t)},this.cPt=()=>{this.xit.x3t(Es.Sh)},this.We=()=>{this.xit.x3t(Es.E3t)},this.WP=()=>{this.xit.x3t(Es.I3t)},this.Q5t=()=>{this.F5t=!0,this.xit.x3t(Es.b3t)},this.qP=()=>{this.F5t&&(this.xit.x3t(Es.N3t),this.F5t=!1)},this.startPositionPoller=()=>{let t=-1;return v((()=>{let i=this.Qo.z_();i!==t&&(t=i,this.xit.x3t(Es.hFt,i))}),250)},this.Qo=i}};tr((function(t){return class extends t{ga(t){this.fft(),this.Y5t.ga(t)}Vg(){this.Y5t.Vg()}Gg(){this.Y5t.Gg()}Y_(){var t;return null!=(t=this.mP)?t:super.Y_()}Q_(){var t;return null!=(t=this.vP)?t:super.Q_()}S5t(t){super.ga(t)}M5t(){super.Vg()}y5t(){super.Gg()}L5t(t){this.mP=t,this.vP=ne(this.mP),this.Co(new me(this.mP))}fa(){let t=this.Y5t.T5t;return Ou(super.fa(),{get yospace(){return t.va}})}fft(){this.vP=void 0,this.mP=void 0}gn(){this.Y5t.gn(),super.gn()}constructor(t,i){super(t,i),this.vP=void 0,this.mP=void 0,this.Y5t=new j4(this)}}}),iu.F9),r(),r();var z4="VPAID";function P4(t){return"spotx"===t.integration}ta.dL.ZR(new class t{get HWt(){return this.G5t.HWt}XR(t){return P4(t)}qWt(i,e,s){return s.ads||(s.ads=Rv({})),s.ads.vpaidMode=s.ads.vpaidMode||t.V5t(),this.G5t.qWt(i,e,s)}m1(i,e,s,n){!function(t){if(!P4(t))throw new b("Unknown ad integration: "+t.integration)}(i);const r=t.W5t(i,s.we);this.G5t.m1(r,e,s,n)}lF(t){const i=se(t);return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?ji('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?ji('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?ji('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?ji('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?ji('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?ji('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static W5t(i,e){return{integration:oI.SPOTX,sources:{src:t.H5t(i,Ys.location.href,e.offsetWidth,e.offsetHeight,li.nL)}}}static H5t(i,e,s,n,r){if(i.sources)return i.sources;let h=n,o=s;r&&0===o&&(o=320,h=180);const a={custom_skin:1,player_width:o,player_height:h};i.cacheBuster&&(a.cb=x.random()),t.q5t(e)&&(a.content_page_url=e);const u=oe({},a,i.queryParameters);return u[z4]||u.VPI||(u[z4]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.X5t(u)}static q5t(t){return Kg(t,"http://")||Kg(t,"https://")}static X5t(t){return NJ(t)}static V5t(){return li.Ib?sv.ENABLED:sv.INSECURE}constructor(){this.G5t=new k0}}),r(),r(),r(),r();var B4=void 0!==s?s:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},R4=function(){return/Android/i.test(nd.userAgent)||/iPhone|iPad|iPod/i.test(nd.userAgent)},U4=function(t,i){for(var e=0,s=t.length;e<s;e++)i[e]=t[e]},Q4=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},F4=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),Y4=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in _(t))return function(t,i){var e=[],s=!0,n=!1,r=void 0;try{for(var h,o=t[Symbol.iterator]();!(s=(h=o.next()).done)&&(e.push(h.value),!i||e.length!==i);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw r}}return e}(t,i);throw new k("Invalid attempt to destructure non-iterable instance")},G4=function(t,i,e){return t+(i-t)*e},Bc=function(){var t=/iPad|iPhone|iPod/.test(nd.platform);return function(){return t}}(),V4=function(){var t=-1!==nd.userAgent.indexOf("Version")&&-1!==nd.userAgent.indexOf("Android")&&-1!==nd.userAgent.indexOf("Chrome");return function(){return t}}(),W4=(function(){var t=/^((?!chrome|android).)*safari/i.test(nd.userAgent)}(),function(){var t=-1!==nd.userAgent.indexOf("Firefox")&&-1!==nd.userAgent.indexOf("Android");return function(){return t}}()),H4=function(){var t=nd.userAgent.match(/.*Chrome\/([0-9]+)/),i=t?C(t[1],10):null;return function(){return i}}(),q4=function(){var t=!1;if(65===H4()){var i=nd.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(i){var e=i[1].split("."),s=Y4(e,4),n=(s[0],s[1],s[2]),r=s[3];t=3325===C(n,10)&&C(r,10)<148}}return function(){return t}}(),X4=function(){var t=-1!==nd.userAgent.indexOf("R7 Build");return function(){return t}}(),Z4=function(){var t=90==s.orientation||-90==s.orientation;return X4()?!t:t},K4=function(){return x.max(s.screen.width,s.screen.height)*s.devicePixelRatio},J4=function(){return x.min(s.screen.width,s.screen.height)*s.devicePixelRatio},$4=function(){if(h.exitFullscreen)h.exitFullscreen();else if(h.webkitExitFullscreen)h.webkitExitFullscreen();else if(h.mozCancelFullScreen)h.mozCancelFullScreen();else{if(!h.msExitFullscreen)return!1;h.msExitFullscreen()}return!0},t2=function(t,i,e,s){var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,i),t.compileShader(n);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e),t.compileShader(r);var h=t.createProgram();for(var o in t.attachShader(h,n),t.attachShader(h,r),s)t.bindAttribLocation(h,s[o],o);return t.linkProgram(h),t.deleteShader(n),t.deleteShader(r),h},i2=function(t,i){for(var e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS),n="",r=0;r<s;r++){e[n=t.getActiveUniform(i,r).name.replace("[0]","")]=t.getUniformLocation(i,n)}return e},e2=function(){var t,i=!1;return t=nd.userAgent||nd.vendor||s.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},s2=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},dh=[],n2=function(t){if(Bc()){r2(t);var i,e,n=t.style.width,r=t.style.height,h=t.offsetWidth+1,o=t.offsetHeight;t.style.width=h+"px",t.style.height=o+"px";var a=function(){s.cancelAnimationFrame(e);for(var h=0;h<dh.length;h++)if(dh[h]===i){t.style.width=n,t.style.height=r,dh.splice(h,1);break}};i={C9:t,Z5t:a},dh.push(i),e=s.requestAnimationFrame(a)}},r2=function(t){if(Bc())for(var i=0;i<dh.length;i++)if(dh[i].C9===t){dh[i].Z5t();break}},h2=function(){var t=x.PI/180,i=.25*x.PI;var e=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);function n(n,r,h,o,a,u){!function(e,s,n,r){var h=x.tan(s?s.upDegrees*t:i),o=x.tan(s?s.downDegrees*t:i),a=x.tan(s?s.leftDegrees*t:i),u=x.tan(s?s.rightDegrees*t:i),c=2/(a+u),l=2/(h+o);e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*c*.5,e[9]=(h-o)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0}(n,o||null,u.depthNear,u.depthFar),function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=s+s,a=n+n,u=r+r,c=s*o,l=s*a,d=s*u,f=n*a,_=n*u,g=r*u,w=h*o,A=h*a,v=h*u;t[0]=1-(f+g),t[1]=l+v,t[2]=d-A,t[3]=0,t[4]=l-v,t[5]=1-(c+g),t[6]=_+w,t[7]=0,t[8]=d+A,t[9]=_-w,t[10]=1-(c+f),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1}(r,h.orientation||e,h.position||s),a&&function(t,i,e){var s,n,r,h,o,a,u,c,l,d,f,_,g=e[0],w=e[1],A=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*A+i[12],t[13]=i[1]*g+i[5]*w+i[9]*A+i[13],t[14]=i[2]*g+i[6]*w+i[10]*A+i[14],t[15]=i[3]*g+i[7]*w+i[11]*A+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+o*w+l*A+i[12],t[13]=n*g+a*w+d*A+i[13],t[14]=r*g+u*w+f*A+i[14],t[15]=h*g+c*w+_*A+i[15])}(r,r,a),function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],A=i[15],v=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-l*_,D=c*w-d*_,S=c*A-f*_,I=l*w-d*g,E=l*A-f*g,b=d*A-f*w,L=v*b-m*E+p*I+y*S-M*D+T*N;L&&(L=1/L,t[0]=(o*b-a*E+u*I)*L,t[1]=(n*E-s*b-r*I)*L,t[2]=(g*T-w*M+A*y)*L,t[3]=(d*M-l*T-f*y)*L,t[4]=(a*S-h*b-u*D)*L,t[5]=(e*b-n*S+r*D)*L,t[6]=(w*p-_*T-A*m)*L,t[7]=(c*T-d*p+f*m)*L,t[8]=(h*E-o*S+u*N)*L,t[9]=(s*S-e*E-r*N)*L,t[10]=(_*M-g*p+A*v)*L,t[11]=(l*p-c*M-f*v)*L,t[12]=(o*D-h*I-a*N)*L,t[13]=(e*I-s*D+n*N)*L,t[14]=(g*m-_*y-w*v)*L,t[15]=(c*y-l*m+d*v)*L)}(r,r)}return function(t,i,e){return!(!t||!i)&&(t.pose=i,t.timestamp=i.timestamp,n(t.leftProjectionMatrix,t.leftViewMatrix,i,e.K5t("left"),e.J5t("left"),e),n(t.rightProjectionMatrix,t.rightViewMatrix,i,e.K5t("right"),e.J5t("right"),e),!0)}}(),o2=function(t){var i,e=t.indexOf("://");i=-1!==e?e+3:0;var s=t.indexOf("/",i);return-1===s&&(s=t.length),t.substring(0,s)},a2=function(){var t={};return function(i,e){void 0===t[i]&&(console.warn("webvr-polyfill: "+e),t[i]=!0)}}(),Kr=function(t,i){a2(t,t+" has been deprecated. This may not work on native WebVR displays. "+(i?"Please use "+i+" instead.":""))};var u2=function(t,i,e){if(i){for(var s=[],n=null,r=0;r<i.length;++r){switch(h=i[r]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),s.push(null,null);break}n||(n=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(a),s.push(t.getParameter(h),null);break;case t.ACTIVE_TEXTURE:n=t.getParameter(t.ACTIVE_TEXTURE),s.push(null);break;default:s.push(t.getParameter(h))}}e(t);for(r=0;r<i.length;++r){var h=i[r],o=s[r];switch(h){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,o);break;case t.COLOR_CLEAR_VALUE:t.clearColor(o[0],o[1],o[2],o[3]);break;case t.COLOR_WRITEMASK:t.colorMask(o[0],o[1],o[2],o[3]);break;case t.CURRENT_PROGRAM:t.useProgram(o);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,o);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,o);break;case t.TEXTURE_BINDING_2D:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_2D,o);break;case t.TEXTURE_BINDING_CUBE_MAP:var a;if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_CUBE_MAP,o);break;case t.VIEWPORT:t.viewport(o[0],o[1],o[2],o[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:o?t.enable(h):t.disable(h);break;default:console.log("No GL restore behavior for 0x"+h.toString(16))}n&&t.activeTexture(n)}}else e(t)},c2=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),l2=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function Fr(t,i,e,s){this.gl=t,this.cardboardUI=i,this.bufferScale=e,this.dirtySubmitFrameBindings=s,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,Bc()||(this.realCanvasWidth=_.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=_.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=t2(t,c2,l2,this.attribs),this.uniforms=i2(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}Fr.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},Fr.prototype.onResize=function(){var t=this.gl,i=this,e=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];u2(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.framebuffer),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.texImage2D(t.TEXTURE_2D,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,i.bufferWidth,i.bufferHeight,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.renderTarget,0),i.ctxAttribs.depth&&i.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.depthStencilBuffer)):i.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i.depthBuffer)):i.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),i.realClearColor.apply(t,i.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},Fr.prototype.patch=function(){if(!this.isPatched){var t=this,i=this.gl.canvas,e=this.gl;Bc()||(i.width=K4()*this.bufferScale,i.height=J4()*this.bufferScale,_.defineProperty(i,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(e){t.bufferWidth=e,t.realCanvasWidth.set.call(i,e),t.onResize()}}),_.defineProperty(i,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(e){t.bufferHeight=e,t.realCanvasHeight.set.call(i,e),t.onResize()}})),this.lastBoundFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(i,s){t.lastBoundFramebuffer=s||t.framebuffer,t.realBindFramebuffer.call(e,i,t.lastBoundFramebuffer)},this.cullFace=e.getParameter(e.CULL_FACE),this.depthTest=e.getParameter(e.DEPTH_TEST),this.blend=e.getParameter(e.BLEND),this.scissorTest=e.getParameter(e.SCISSOR_TEST),this.stencilTest=e.getParameter(e.STENCIL_TEST),e.enable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!0;break;case e.DEPTH_TEST:t.depthTest=!0;break;case e.BLEND:t.blend=!0;break;case e.SCISSOR_TEST:t.scissorTest=!0;break;case e.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(e,i)},e.disable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!1;break;case e.DEPTH_TEST:t.depthTest=!1;break;case e.BLEND:t.blend=!1;break;case e.SCISSOR_TEST:t.scissorTest=!1;break;case e.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(e,i)},this.colorMask=e.getParameter(e.COLOR_WRITEMASK),e.colorMask=function(i,s,n,r){t.colorMask[0]=i,t.colorMask[1]=s,t.colorMask[2]=n,t.colorMask[3]=r,t.realColorMask.call(e,i,s,n,r)},this.clearColor=e.getParameter(e.COLOR_CLEAR_VALUE),e.clearColor=function(i,s,n,r){t.clearColor[0]=i,t.clearColor[1]=s,t.clearColor[2]=n,t.clearColor[3]=r,t.realClearColor.call(e,i,s,n,r)},this.viewport=e.getParameter(e.VIEWPORT),e.viewport=function(i,s,n,r){t.viewport[0]=i,t.viewport[1]=s,t.viewport[2]=n,t.viewport[3]=r,t.realViewport.call(e,i,s,n,r)},this.isPatched=!0,n2(i)}},Fr.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,i=this.gl.canvas;Bc()||(_.defineProperty(i,"width",this.realCanvasWidth),_.defineProperty(i,"height",this.realCanvasHeight)),i.width=this.bufferWidth,i.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,u((function(){n2(i)}),1)}},Fr.prototype.setTextureBounds=function(t,i){t||(t=[0,0,.5,1]),i||(i=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=i[0],this.viewportOffsetScale[5]=i[1],this.viewportOffsetScale[6]=i[2],this.viewportOffsetScale[7]=i[3]},Fr.prototype.submitFrame=function(){var t=this.gl,i=this,e=[];if(this.dirtySubmitFrameBindings||e.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),u2(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.cullFace&&i.realDisable.call(t,t.CULL_FACE),i.depthTest&&i.realDisable.call(t,t.DEPTH_TEST),i.blend&&i.realDisable.call(t,t.BLEND),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realDisable.call(t,t.STENCIL_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(i.ctxAttribs.alpha||Bc())&&(i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(i.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.enableVertexAttribArray(i.attribs.position),t.enableVertexAttribArray(i.attribs.texCoord),t.vertexAttribPointer(i.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(i.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(i.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.uniform4fv(i.uniforms.viewportOffsetScale,i.viewportOffsetScale),t.drawElements(t.TRIANGLES,i.indexCount,t.UNSIGNED_SHORT,0),i.cardboardUI&&i.cardboardUI.renderNoState(),i.realBindFramebuffer.call(i.gl,t.FRAMEBUFFER,i.framebuffer),i.ctxAttribs.preserveDrawingBuffer||(i.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),i.dirtySubmitFrameBindings||i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.cullFace&&i.realEnable.call(t,t.CULL_FACE),i.depthTest&&i.realEnable.call(t,t.DEPTH_TEST),i.blend&&i.realEnable.call(t,t.BLEND),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realEnable.call(t,t.STENCIL_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),!i.ctxAttribs.alpha&&i.ctxAttribs.preserveDrawingBuffer||i.realClearColor.apply(t,i.clearColor)})),Bc()){var s=t.canvas;s.width==i.bufferWidth&&s.height==i.bufferHeight||(i.bufferWidth=s.width,i.bufferHeight=s.height,i.onResize())}},Fr.prototype.updateDeviceInfo=function(t){var i=this.gl,e=this,s=[i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING];u2(i,s,(function(i){var s=e.$5t(e.meshWidth,e.meshHeight,t);if(i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,s,i.STATIC_DRAW),!e.indexCount){var n=e.t6t(e.meshWidth,e.meshHeight);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n,i.STATIC_DRAW),e.indexCount=n.length}}))},Fr.prototype.$5t=function(t,i,e){for(var s=new Float32Array(2*t*i*5),n=e.getLeftEyeVisibleTanAngles(),r=e.getLeftEyeNoLensTanAngles(),h=e.getLeftEyeVisibleScreenRect(r),o=0,a=0;a<2;a++){for(var u=0;u<i;u++)for(var c=0;c<t;c++,o++){var l=c/(t-1),d=u/(i-1),f=l,_=d,g=G4(n[0],n[2],l),w=G4(n[3],n[1],d),A=x.sqrt(g*g+w*w),v=e.distortion.distortInverse(A),m=w*v/A;l=(g*v/A-r[0])/(r[2]-r[0]),d=(m-r[3])/(r[1]-r[3]),l=2*(h.x+l*h.width-.5),d=2*(h.y+d*h.height-.5),s[5*o+0]=l,s[5*o+1]=d,s[5*o+2]=f,s[5*o+3]=_,s[5*o+4]=a}var p=n[2]-n[0];n[0]=-(p+n[0]),n[2]=p-n[2],p=r[2]-r[0],r[0]=-(p+r[0]),r[2]=p-r[2],h.x=1-(h.x+h.width)}return s},Fr.prototype.t6t=function(t,i){for(var e=new Uint16Array(2*(t-1)*(i-1)*6),s=t/2,n=i/2,r=0,h=0,o=0;o<2;o++)for(var a=0;a<i;a++)for(var u=0;u<t;u++,r++)0!=u&&0!=a&&(u<=s==a<=n?(e[h++]=r,e[h++]=r-t-1,e[h++]=r-t,e[h++]=r-t-1,e[h++]=r,e[h++]=r-1):(e[h++]=r-1,e[h++]=r-t,e[h++]=r,e[h++]=r-t,e[h++]=r-1,e[h++]=r-t-1));return e},Fr.prototype.i6t=function(t,i){var e=_.getOwnPropertyDescriptor(t,i);return void 0!==e.get&&void 0!==e.set||(e.configurable=!0,e.enumerable=!0,e.get=function(){return this.getAttribute(i)},e.set=function(t){this.setAttribute(i,t)}),e};var d2=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),f2=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),_2=x.PI/180,g2=.3125,Xr=28;function Gh(t){this.gl=t,this.attribs={position:0},this.program=t2(t,d2,f2,this.attribs),this.uniforms=i2(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function w2(t){this.coefficients=t}Gh.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},Gh.prototype.listen=function(t,i){var e=this.gl.canvas,s="undefined"!=typeof TouchEvent;this.listener=function(n){var r=e.clientWidth/2,h=s&&n instanceof TouchEvent?(n.preventDefault(),n.changedTouches[0]):n;h.clientX>r-42&&h.clientX<r+42&&h.clientY>e.clientHeight-42?(n.preventDefault(),n.stopImmediatePropagation(),t(n)):h.clientX<42&&h.clientY<42&&(n.preventDefault(),n.stopImmediatePropagation(),i(n))},e.addEventListener("click",this.listener,!1),e.addEventListener("touchstart",this.listener,!1)},Gh.prototype.onResize=function(){var t=this.gl,i=this,e=[t.ARRAY_BUFFER_BINDING];u2(t,e,(function(t){var e=[],n=t.drawingBufferWidth/2,r=x.max(screen.width,screen.height)*s.devicePixelRatio,h=t.drawingBufferWidth/r*s.devicePixelRatio,o=4*h/2,a=42*h,u=Xr*h/2,c=14*h;function l(t,i){var s=(90-t)*_2,r=x.cos(s),h=x.sin(s);e.push(g2*r*u+n,g2*h*u+u),e.push(i*r*u+n,i*h*u+u)}e.push(n-o,a),e.push(n-o,t.drawingBufferHeight),e.push(n+o,a),e.push(n+o,t.drawingBufferHeight),i.gearOffset=e.length/2;for(var d=0;d<=6;d++){var f=60*d;l(f,1),l(f+12,1),l(f+20,.75),l(f+40,.75),l(f+48,1)}function _(i,s){e.push(c+i,t.drawingBufferHeight-c-s)}i.gearVertexCount=e.length/2-i.gearOffset,i.arrowOffset=e.length/2;var g=o/x.sin(45*_2);_(0,u),_(u,0),_(u+g,g),_(g,u+g),_(g,u-g),_(0,u),_(u,2*u),_(u+g,2*u-g),_(g,u-g),_(0,u),_(g,u-o),_(Xr*h,u-o),_(g,u+o),_(Xr*h,u+o),i.arrowVertexCount=e.length/2-i.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}))},Gh.prototype.render=function(){var t=this.gl,i=this,e=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];u2(t,e,(function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.renderNoState()}))},Gh.prototype.renderNoState=function(){var t,i,e,s,n,r,h,o,a,u,c=this.gl;c.useProgram(this.program),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.enableVertexAttribArray(this.attribs.position),c.vertexAttribPointer(this.attribs.position,2,c.FLOAT,!1,8,0),c.uniform4f(this.uniforms.color,1,1,1,1),t=this.projMat,i=0,e=c.drawingBufferWidth,s=0,n=c.drawingBufferHeight,o=1/(i-e),a=1/(s-n),u=1/((r=.1)-(h=1024)),t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+e)*o,t[13]=(n+s)*a,t[14]=(h+r)*u,t[15]=1,c.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.drawArrays(c.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),c.drawArrays(c.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},w2.prototype.distortInverse=function(t){for(var i=0,e=1,s=t-this.distort(i);x.abs(e-i)>1e-4;){var n=t-this.distort(e),r=e-n*((e-i)/(n-s));i=e,e=r,s=n}return e},w2.prototype.distort=function(t){for(var i=t*t,e=0,s=0;s<this.coefficients.length;s++)e=i*(e+this.coefficients[s]);return(e+1)*t};var A2=x.PI/180,v2=180/x.PI,Oe=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0};Oe.prototype={constructor:Oe,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var i=1/t;this.multiplyScalar(i)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,l=-n*i-r*e-h*s;return this.x=a*o+l*-n+u*-h-c*-r,this.y=u*o+l*-r+c*-n-a*-h,this.z=c*o+l*-h+a*-r-u*-n,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,i){var e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}};var as=function(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1};function m2(t){this.width=t.width||K4(),this.height=t.height||J4(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}as.prototype={constructor:as,set:function(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,i,e){var s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),h=x.sin(t/2),o=x.sin(i/2),a=x.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a+h*o*r,this.w=s*n*r-h*o*a,this},setFromEulerYXZ:function(t,i,e){var s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),h=x.sin(t/2),o=x.sin(i/2),a=x.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a-h*o*r,this.w=s*n*r+h*o*a,this},setFromAxisAngle:function(t,i){var e=i/2,s=x.sin(e);return this.x=t.x*s,this.y=t.y*s,this.z=t.z*s,this.w=x.cos(e),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var e=this.x,s=this.y,n=this.z,r=this.w,h=r*t.w+e*t.x+s*t.y+n*t.z;if(h<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,h=-h):this.copy(t),h>=1)return this.w=r,this.x=e,this.y=s,this.z=n,this;var o=x.acos(h),a=x.sqrt(1-h*h);if(x.abs(a)<.001)return this.w=.5*(r+this.w),this.x=.5*(e+this.x),this.y=.5*(s+this.y),this.z=.5*(n+this.z),this;var u=x.sin((1-i)*o)/a,c=x.sin(i*o)/a;return this.w=r*u+this.w*c,this.x=e*u+this.x*c,this.y=s*u+this.y*c,this.z=n*u+this.z*c,this},setFromUnitVectors:function(){var t,i;return function(e,s){return void 0===t&&(t=new Oe),(i=e.dot(s)+1)<1e-6?(i=0,x.abs(e.x)>x.abs(e.z)?t.set(-e.y,e.x,0):t.set(0,-e.z,e.y)):t.crossVectors(e,s),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()};var p2=new m2({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),y2=new m2({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),M2={CardboardV1:new T2({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new T2({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function ea(t){this.viewer=M2.CardboardV2,this.updateDeviceParams(t),this.distortion=new w2(this.viewer.distortionCoefficients)}function T2(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}ea.prototype.updateDeviceParams=function(t){this.device=this.e6t(t)||this.device},ea.prototype.getDevice=function(){return this.device},ea.prototype.setViewer=function(t){this.viewer=t,this.distortion=new w2(this.viewer.distortionCoefficients)},ea.prototype.e6t=function(t){if(!t)return Bc()?(console.warn("Using fallback iOS device measurements."),y2):(console.warn("Using fallback Android device measurements."),p2);var i=.0254,e=i/t.xdpi,s=i/t.ydpi;return new m2({widthMeters:e*K4(),heightMeters:s*J4(),bevelMeters:.001*t.bevelMm})},ea.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=(i.widthMeters-t.interLensDistance)/2,r=t.interLensDistance/2,h=t.baselineLensDistance-i.bevelMeters,o=i.heightMeters-h,a=v2*x.atan(e.distort(n/s)),u=v2*x.atan(e.distort(r/s)),c=v2*x.atan(e.distort(h/s)),l=v2*x.atan(e.distort(o/s));return{leftDegrees:x.min(a,t.fov),rightDegrees:x.min(u,t.fov),downDegrees:x.min(c,t.fov),upDegrees:x.min(l,t.fov)}},ea.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=x.tan(-A2*t.fov),n=x.tan(A2*t.fov),r=x.tan(A2*t.fov),h=x.tan(-A2*t.fov),o=i.widthMeters/4,a=i.heightMeters/2,u=t.baselineLensDistance-i.bevelMeters-a,c=t.interLensDistance/2-o,l=-u,d=t.screenLensDistance,f=e.distort((c-o)/d),_=e.distort((l+a)/d),g=e.distort((c+o)/d),w=e.distort((l-a)/d),A=new Float32Array(4);return A[0]=x.max(s,f),A[1]=x.min(n,_),A[2]=x.min(r,g),A[3]=x.max(h,w),A},ea.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=new Float32Array(4),n=e.distortInverse(x.tan(-A2*t.fov)),r=e.distortInverse(x.tan(A2*t.fov)),h=e.distortInverse(x.tan(A2*t.fov)),o=e.distortInverse(x.tan(-A2*t.fov)),a=i.widthMeters/4,u=i.heightMeters/2,c=t.baselineLensDistance-i.bevelMeters-u,l=t.interLensDistance/2-a,d=-c,f=t.screenLensDistance,_=(l-a)/f,g=(d+u)/f,w=(l+a)/f,A=(d-u)/f;return s[0]=x.max(n,_),s[1]=x.min(r,g),s[2]=x.min(h,w),s[3]=x.max(o,A),s},ea.prototype.getLeftEyeVisibleScreenRect=function(t){var i=this.viewer,e=this.device,s=i.screenLensDistance,n=(e.widthMeters-i.interLensDistance)/2,r=i.baselineLensDistance-e.bevelMeters,h=(t[0]*s+n)/e.widthMeters,o=(t[1]*s+r)/e.heightMeters,a=(t[2]*s+n)/e.widthMeters,u=(t[3]*s+r)/e.heightMeters;return{x:h,y:u,width:a-h,height:o-u}},ea.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},ea.prototype.getFieldOfViewRightEye=function(t){var i=this.getFieldOfViewLeftEye(t);return{leftDegrees:i.rightDegrees,rightDegrees:i.leftDegrees,upDegrees:i.upDegrees,downDegrees:i.downDegrees}},ea.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.s6t();return{leftDegrees:v2*x.atan(t.outerDist),rightDegrees:v2*x.atan(t.innerDist),downDegrees:v2*x.atan(t.bottomDist),upDegrees:v2*x.atan(t.topDist)}},ea.prototype.getUndistortedViewportLeftEye=function(){var t=this.s6t(),i=this.viewer,e=this.device,s=i.screenLensDistance,n=e.widthMeters/s,r=e.heightMeters/s,h=e.width/n,o=e.height/r,a=x.round((t.eyePosX-t.outerDist)*h),u=x.round((t.eyePosY-t.bottomDist)*o);return{x:a,y:u,width:x.round((t.eyePosX+t.innerDist)*h)-a,height:x.round((t.eyePosY+t.topDist)*o)-u}},ea.prototype.s6t=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=t.interLensDistance/2/s,r=i.widthMeters/s,h=i.heightMeters/s,o=r/2-n,a=(t.baselineLensDistance-i.bevelMeters)/s,u=t.fov,c=e.distortInverse(x.tan(A2*u)),l=x.min(o,c),d=x.min(n,c),f=x.min(a,c);return{outerDist:l,innerDist:d,topDist:x.min(h-a,c),bottomDist:f,eyePosX:o,eyePosY:a}},ea.Viewers=M2;var N2={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function D2(t,i){if(this.dpdb=N2,this.n6t(),t){this.onDeviceParamsUpdated=i;var e=new hd,s=this;e.open("GET",t,!0),e.addEventListener("load",(function(){s.loading=!1,e.status>=200&&e.status<=299?(s.dpdb=JSON.parse(e.response),s.n6t()):console.error("Error loading online DPDB!")})),e.send()}}function S2(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function I2(t,i){this.set(t,i)}function ch(t,i){this.kFilter=t,this.isDebug=i,this.currentAccelMeasurement=new I2,this.currentGyroMeasurement=new I2,this.previousGyroMeasurement=new I2,Bc()?this.filterQ=new as(-1,0,0,1):this.filterQ=new as(1,0,0,1),this.previousFilterQ=new as,this.previousFilterQ.copy(this.filterQ),this.accelQ=new as,this.isOrientationInitialized=!1,this.estimatedGravity=new Oe,this.measuredGravity=new Oe,this.gyroIntegralQ=new as}function E2(t,i){this.predictionTimeS=t,this.isDebug=i,this.previousQ=new as,this.previousTimestampS=null,this.deltaQ=new as,this.outQ=new as}function qi(t,i,e,n){this.yawOnly=e,this.accelerometer=new Oe,this.gyroscope=new Oe,this.filter=new ch(t,n),this.posePredictor=new E2(i,n),this.isFirefoxAndroid=W4(),this.isIOS=Bc();var r=H4();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=q4(),this.filterToWorldQ=new as,Bc()?this.filterToWorldQ.setFromAxisAngle(new Oe(1,0,0),x.PI/2):this.filterToWorldQ.setFromAxisAngle(new Oe(1,0,0),-x.PI/2),this.inverseWorldToScreenQ=new as,this.worldToScreenQ=new as,this.originalPoseAdjustQ=new as,this.originalPoseAdjustQ.setFromAxisAngle(new Oe(0,0,1),-s.orientation*x.PI/180),this.r6t(),Z4()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new as,this.h6t=new Float32Array(4),this.start()}D2.prototype.getDeviceParams=function(){return this.deviceParams},D2.prototype.n6t=function(){var t=this.o6t();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},D2.prototype.o6t=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var i=nd.userAgent||nd.vendor||s.opera,e=K4(),n=J4();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=null,h=1/0,o=0;o<t.devices.length;o++){var a=t.devices[o];if(a.rules)if("ios"==a.type||"android"==a.type){if(Bc()==("ios"==a.type)){for(var u=!1,c=0;c<a.rules.length;c++){var l=a.rules[c],d=this.a6t(l,i,e,n);if(!0===d){h=d,r=a,u=!0;break}!1!==d&&d<h&&(h=d,r=a)}if(u)break}}else console.warn("Device["+o+"] has invalid type.");else console.warn("Device["+o+"] has no rules section.")}return r?new S2({xdpi:r.dpi[0]||r.dpi,ydpi:r.dpi[1]||r.dpi,bevelMm:r.bw}):(console.warn("No DPDB device match."),null)},D2.prototype.a6t=function(t,i,e,s){if(!t.ua&&!t.res)return!1;if(t.ua&&i.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var n=t.res[0],r=t.res[1],h=x.min(e,s)-x.min(n,r),o=x.max(e,s)-x.max(n,r),a=x.abs(h)+x.abs(o);if(a>0)return a}return!0},I2.prototype.set=function(t,i){this.sample=t,this.timestampS=i},I2.prototype.copy=function(t){this.set(t.sample,t.timestampS)},ch.prototype.addAccelMeasurement=function(t,i){this.currentAccelMeasurement.set(t,i)},ch.prototype.addGyroMeasurement=function(t,i){this.currentGyroMeasurement.set(t,i),function(t){return!(j(t)||t<=.001||t>1)}(i-this.previousGyroMeasurement.timestampS)&&this.u6t(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},ch.prototype.u6t=function(){if(!this.isOrientationInitialized)return this.accelQ=this.c6t(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,i=this.l6t(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(i),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(i);var e=new as;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var s=new as;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",v2*function(t){return t.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*x.acos(t.w)}(s),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var n=new as;n.copy(this.filterQ),n.multiply(s),this.filterQ.slerp(n,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},ch.prototype.getOrientation=function(){return this.filterQ},ch.prototype.c6t=function(t){var i=new Oe;i.copy(t),i.normalize();var e=new as;return e.setFromUnitVectors(new Oe(0,0,-1),i),e.inverse(),e},ch.prototype.l6t=function(t,i){var e=new as,s=new Oe;return s.copy(t),s.normalize(),e.setFromAxisAngle(s,t.length()*i),e},E2.prototype.getPrediction=function(t,i,e){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=e,t;var s=new Oe;s.copy(i),s.normalize();var n=i.length();if(n<20*A2)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(v2*n).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var r=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(s,r),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=e,this.outQ},qi.prototype.getPosition=function(){return null},qi.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this.d6t)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(i=(new as).setFromAxisAngle(new Oe(0,0,-1),0),e=new as,-90===s.orientation?e.setFromAxisAngle(new Oe(0,1,0),x.PI/-2):e.setFromAxisAngle(new Oe(0,1,0),x.PI/2),i.multiply(e)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var t=new as;return t.setFromAxisAngle(new Oe(1,0,0),-x.PI/2),t}(),t=this.d6t,(n=new as).copy(t),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.h6t[0]=n.x,this.h6t[1]=n.y,this.h6t[2]=n.z,this.h6t[3]=n.w,this.h6t;var i,e,n,r=this.filter.getOrientation();return t=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS),(n=new as).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(t),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.h6t[0]=n.x,this.h6t[1]=n.y,this.h6t[2]=n.z,this.h6t[3]=n.w,this.h6t},qi.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),Z4()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},qi.prototype.f6t=function(t){this.d6t=this.d6t||new as;var i=t.alpha,e=t.beta,s=t.gamma;i=(i||0)*x.PI/180,e=(e||0)*x.PI/180,s=(s||0)*x.PI/180,this.d6t.setFromEulerYXZ(e,i,-s)},qi.prototype._6t=function(t){this.g6t(t)},qi.prototype.g6t=function(t){var i=t.accelerationIncludingGravity,e=t.rotationRate,s=t.timeStamp/1e3,n=s-this.previousTimestampS;return n<0?(a2("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=s)):n<=.001||n>1?(a2("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=s)):(this.accelerometer.set(-i.x,-i.y,-i.z),X4()?this.gyroscope.set(-e.beta,e.alpha,e.gamma):this.gyroscope.set(e.alpha,e.beta,e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(x.PI/180),this.filter.addAccelMeasurement(this.accelerometer,s),this.filter.addGyroMeasurement(this.gyroscope,s),void(this.previousTimestampS=s))},qi.prototype.w6t=function(t){this.r6t()},qi.prototype.lx=function(t){var i=t.data;i&&i.type&&("devicemotion"===i.type.toLowerCase()&&this.g6t(i.deviceMotionEvent))},qi.prototype.r6t=function(){switch(this.worldToScreenQ.set(0,0,0,1),s.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Oe(0,0,1),-x.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Oe(0,0,1),x.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},qi.prototype.start=function(){var t,i,e;this.A6t=this._6t.bind(this),this.v6t=this.w6t.bind(this),this.m6t=this.lx.bind(this),this.p6t=this.f6t.bind(this),Bc()&&(t=s.self!==s.top,i=o2(h.referrer),e=o2(s.location.href),t&&i!==e)&&s.addEventListener("message",this.m6t),s.addEventListener("orientationchange",this.v6t),this.isWithoutDeviceMotion?s.addEventListener("deviceorientation",this.p6t):s.addEventListener("devicemotion",this.A6t)},qi.prototype.stop=function(){s.removeEventListener("devicemotion",this.A6t),s.removeEventListener("deviceorientation",this.p6t),s.removeEventListener("orientationchange",this.v6t),s.removeEventListener("message",this.m6t)};var b2=new Oe(1,0,0),L2=new Oe(0,0,1),k2={};screen.orientation?k2=screen.orientation:screen.msOrientation?k2=screen.msOrientation:_.defineProperty(k2,"angle",{get:function(){return s.orientation||0}});var C2=new as;C2.setFromAxisAngle(b2,-x.PI/2),C2.multiply((new as).setFromAxisAngle(L2,x.PI/2));var x2=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new k("Cannot call a class as a function")}(this,t),this.config=i,this.sensor=null,this.fusionSensor=null,this.y6t=new Float32Array(4),this.api=null,this.errors=[],this.M6t=new as,this.T6t=new as,this.N6t=new as,this.D6t=this.D6t.bind(this),this.S6t=this.S6t.bind(this),this.I6t=this.I6t.bind(this),this.I6t(),this.init()}return F4(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this.S6t)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this.D6t),this.sensor.start()),s.addEventListener("orientationchange",this.I6t)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new qi(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this.y6t[0]=this.y6t[1]=this.y6t[2]=0,this.y6t[3]=1,this.y6t;var t=this.sensor.quaternion;this.M6t.set(t[0],t[1],t[2],t[3]);var i=this.N6t;return i.copy(C2),i.multiply(this.M6t),i.multiply(this.T6t),this.config.YAW_ONLY&&(i.x=i.z=0,i.normalize()),this.y6t[0]=i.x,this.y6t[1]=i.y,this.y6t[2]=i.z,this.y6t[3]=i.w,this.y6t}},{key:"S6t",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error)}},{key:"D6t",value:function(){}},{key:"I6t",value:function(){var t=-k2.angle*x.PI/180;this.T6t.setFromAxisAngle(L2,t)}}]),t}();function ph(){this.E6t();var t=h.createElement("div");(r=t.style).position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var i=h.createElement("img");i.src=this.icon,(r=i.style).marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(i);var e=h.createElement("div");(r=e.style).textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",e.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(e);var s=h.createElement("div");(r=s.style).backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(s);var n=h.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var r,o=h.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="Du",(r=o.style).float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",s.appendChild(n),s.appendChild(o),this.overlay=t,this.text=e,this.hide()}ph.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):h.body.appendChild(this.overlay),this.overlay.style.display="block";var i=this.overlay.querySelector("img").style;Z4()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},ph.prototype.hide=function(){this.overlay.style.display="none"},ph.prototype.showTemporarily=function(t,i){this.show(i),this.timer=u(this.hide.bind(this),t)},ph.prototype.disableShowTemporarily=function(){c(this.timer)},ph.prototype.update=function(){this.disableShowTemporarily(),!Z4()&&e2()?this.show():this.hide()},ph.prototype.E6t=function(){this.icon="data:"+"image/svg+xml"+";base64,"+"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var O2="CardboardV1",j2="WEBVR_CARDBOARD_VIEWER";function Ce(){try{this.selectedKey=localStorage.getItem(j2)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=O2),this.dialog=this.b6t(ea.Viewers),this.root=null,this.L6t=[]}Ce.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},Ce.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Ce.prototype.getCurrentViewer=function(){return ea.Viewers[this.selectedKey]},Ce.prototype.k6t=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},Ce.prototype.onChange=function(t){this.L6t.push(t)},Ce.prototype.C6t=function(t){for(var i=0;i<this.L6t.length;i++)this.L6t[i](t)},Ce.prototype.x6t=function(){if(this.selectedKey=this.k6t(),this.selectedKey&&ea.Viewers[this.selectedKey]){this.C6t(ea.Viewers[this.selectedKey]);try{localStorage.setItem(j2,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},Ce.prototype.b6t=function(t){var i=h.createElement("div");i.classList.add("webvr-polyfill-viewer-selector"),i.style.display="none";var e=h.createElement("div");(n=e.style).position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",e.addEventListener("click",this.hide.bind(this));var s=h.createElement("div"),n=s.style;for(var r in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",s.appendChild(this.O6t("Select your viewer")),t)s.appendChild(this.j6t(r,t[r].label));return s.appendChild(this.z6t("Save",this.x6t.bind(this))),i.appendChild(e),i.appendChild(s),i},Ce.prototype.O6t=function(t){var i=h.createElement("h1"),e=i.style;return e.color="black",e.fontSize="20px",e.fontWeight="bold",e.marginTop=0,e.marginBottom="24px",i.innerHTML=t,i},Ce.prototype.j6t=function(t,i){var e=h.createElement("div");e.style.marginTop="8px",e.style.color="black";var s=h.createElement("input");s.style.fontSize="30px",s.setAttribute("id",t),s.setAttribute("type","radio"),s.setAttribute("value",t),s.setAttribute("name","field");var n=h.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",t),n.innerHTML=i,e.appendChild(s),e.appendChild(n),e},Ce.prototype.z6t=function(t,i){var e=h.createElement("button");e.innerHTML=t;var s=e.style;return s.float="right",s.textTransform="uppercase",s.color="#1094f7",s.fontSize="14px",s.letterSpacing=0,s.border=0,s.background="none",s.marginTop="16px",e.addEventListener("click",i),e};void 0!==s||("undefined"!=typeof global?global:"undefined"!=typeof self&&self);var z2=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){var e;e=function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||_.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return _.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),_.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),r=e(1),o=void 0!==nd&&S((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(nd.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!s.MSStream,a=function(){function t(){!function(t,i){if(!(t instanceof i))throw new k("Cannot call a class as a function")}(this,t),o?this.noSleepTimer=null:(this.noSleepVideo=h.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=x.random())}.bind(this)))}return n(t,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=s.setInterval((function(){s.location.href="/",s.setTimeout(s.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(s.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=a},function(t,i,e){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},t.exports=e()})),P2=function(t){return t&&t.__esModule?t.default:t}(z2),B2=1e3,R2=[0,0,.5,1],U2=[.5,0,.5,1],Q2=s.requestAnimationFrame,F2=s.cancelAnimationFrame;function Y2(t){_.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return Kr("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function Zi(t){var i=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=B2++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,_.defineProperty(this,"isConnected",{get:function(){return Kr("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new Y2({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.P6t=!1,this.Hy=null,this.B6t=null,this.AG=null,this.x9=null,this.R6t=null,this.U6t=null,this.Q6t=null,this.F6t=null,i&&e2()&&(this.Y6t=new P2)}Zi.prototype.getFrameData=function(t){return h2(t,this.G6t(),this)},Zi.prototype.getPose=function(){return Kr("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this.G6t()},Zi.prototype.resetPose=function(){return Kr("VRDisplay.prototype.resetPose"),this.V6t()},Zi.prototype.getImmediatePose=function(){return Kr("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this.G6t()},Zi.prototype.requestAnimationFrame=function(t){return Q2(t)},Zi.prototype.cancelAnimationFrame=function(t){return F2(t)},Zi.prototype.wrapForFullscreen=function(t){if(Bc())return t;if(!this.x9){this.x9=h.createElement("div");var i=["height: "+x.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.x9.setAttribute("style",i.join("; ")+";"),this.x9.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.AG==t)return this.x9;if(this.AG&&(this.B6t?this.B6t.appendChild(this.AG):this.AG.parentElement.removeChild(this.AG)),this.AG=t,this.B6t=t.parentElement,this.B6t||h.body.appendChild(t),!this.x9.parentElement){var e=this.AG.parentElement;e.insertBefore(this.x9,this.AG),e.removeChild(this.AG)}this.x9.insertBefore(this.AG,this.x9.firstChild),this.R6t=this.AG.getAttribute("style");var s=this;return function(){if(s.AG){var t=["position: absolute","top: 0","left: 0","width: "+x.max(screen.width,screen.height)+"px","height: "+x.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];s.AG.setAttribute("style",t.join("; ")+";")}}(),this.x9},Zi.prototype.removeFullscreenWrapper=function(){if(this.AG){var t=this.AG;this.R6t?t.setAttribute("style",this.R6t):t.removeAttribute("style"),this.AG=null,this.R6t=null;var i=this.x9.parentElement;return this.x9.removeChild(t),this.B6t===i?i.insertBefore(t,this.x9):this.B6t&&this.B6t.appendChild(t),i.removeChild(this.x9),t}},Zi.prototype.requestPresent=function(t){var i=this.isPresenting,e=this;return t instanceof Array||(Kr("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise((function(s,n){if(e.capabilities.canPresent)if(0==t.length||t.length>e.capabilities.maxLayers)n(new b("Invalid number of layers."));else{var r=t[0];if(r.source){var o=r.leftBounds||R2,a=r.rightBounds||U2;if(i){var u=e.Hy;u.source!==r.source&&(u.source=r.source);for(var c=0;c<4;c++)u.leftBounds[c]=o[c],u.rightBounds[c]=a[c];return e.wrapForFullscreen(e.Hy.source),e.W6t(),void s()}if(e.Hy={predistorted:r.predistorted,source:r.source,leftBounds:o.slice(0),rightBounds:a.slice(0)},e.P6t=!1,e.Hy&&e.Hy.source){var l=e.wrapForFullscreen(e.Hy.source);e.H6t(l,(function(){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;e.isPresenting=l===t,e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(t){console.error("screen.orientation.lock() failed due to",t.message)})),e.P6t=!1,e.q6t(),s()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.disableWakeLock(),e.X6t(),e.removeFullscreenWrapper(),e.Z6t()),e.K6t()}),(function(){e.P6t&&(e.removeFullscreenWrapper(),e.Z6t(),e.disableWakeLock(),e.P6t=!1,e.isPresenting=!1,n(new b("Unable to present.")))})),!function(t){if(h.fullscreenEnabled&&t.requestFullscreen)t.requestFullscreen();else if(h.webkitFullscreenEnabled&&t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(h.mozFullScreenEnabled&&t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!h.msFullscreenEnabled||!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(l)?(Bc()||V4())&&(e.enableWakeLock(),e.isPresenting=!0,e.q6t(),e.K6t(),s()):(e.enableWakeLock(),e.P6t=!0)}e.P6t||Bc()||($4(),n(new b("Unable to present.")))}else s()}else n(new b("VRDisplay is not capable of presenting."))}))},Zi.prototype.exitPresent=function(){var t=this.isPresenting,i=this;return this.isPresenting=!1,this.Hy=null,this.disableWakeLock(),new Promise((function(e,s){t?($4(),i.X6t(),i.removeFullscreenWrapper(),i.Z6t(),i.K6t(),e()):s(new b("Was not presenting to VRDisplay."))}))},Zi.prototype.getLayers=function(){return this.Hy?[this.Hy]:[]},Zi.prototype.K6t=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});s.dispatchEvent(t)},Zi.prototype.J6t=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});s.dispatchEvent(t)},Zi.prototype.H6t=function(t,i,e){this.Z6t(),this.U6t=t,this.Q6t=i,this.F6t=e,i&&(h.fullscreenEnabled?t.addEventListener("fullscreenchange",i,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",i,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenchange",i,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",i,!1)),e&&(h.fullscreenEnabled?t.addEventListener("fullscreenerror",e,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",e,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenerror",e,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",e,!1))},Zi.prototype.Z6t=function(){if(this.U6t){var t=this.U6t;if(this.Q6t){var i=this.Q6t;t.removeEventListener("fullscreenchange",i,!1),t.removeEventListener("webkitfullscreenchange",i,!1),h.removeEventListener("mozfullscreenchange",i,!1),t.removeEventListener("msfullscreenchange",i,!1)}if(this.F6t){var e=this.F6t;t.removeEventListener("fullscreenerror",e,!1),t.removeEventListener("webkitfullscreenerror",e,!1),h.removeEventListener("mozfullscreenerror",e,!1),t.removeEventListener("msfullscreenerror",e,!1)}this.U6t=null,this.Q6t=null,this.F6t=null}},Zi.prototype.enableWakeLock=function(){this.Y6t&&this.Y6t.enable()},Zi.prototype.disableWakeLock=function(){this.Y6t&&this.Y6t.disable()},Zi.prototype.q6t=function(){},Zi.prototype.X6t=function(){},Zi.prototype.submitFrame=function(t){},Zi.prototype.getEyeParameters=function(t){return null};var G2={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},V2="left",W2="right";function vo(t){var i=s2({},G2);t=s2(i,t||{}),Zi.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new Y2({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.$6t=this.config.BUFFER_SCALE,this.t8t=new x2(this.config),this.i8t=null,this.e8t=null,this.C9=null,this.s8t=null,this.n8t=new D2(this.config.DPDB_URL,this.r8t.bind(this)),this.h8t=new ea(this.n8t.getDeviceParams()),this.o8t=new Ce,this.o8t.onChange(this.a8t.bind(this)),this.h8t.setViewer(this.o8t.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.u8t=new ph),Bc()&&s.addEventListener("resize",this.eG.bind(this))}vo.prototype=_.create(Zi.prototype),vo.prototype.G6t=function(){return{position:null,orientation:this.t8t.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},vo.prototype.V6t=function(){this.t8t.resetPose&&this.t8t.resetPose()},vo.prototype.K5t=function(t){var i;if(t==V2)i=this.h8t.getFieldOfViewLeftEye();else{if(t!=W2)return console.error("Invalid eye provided: %s",t),null;i=this.h8t.getFieldOfViewRightEye()}return i},vo.prototype.J5t=function(t){var i;if(t==V2)i=[.5*-this.h8t.viewer.interLensDistance,0,0];else{if(t!=W2)return console.error("Invalid eye provided: %s",t),null;i=[.5*this.h8t.viewer.interLensDistance,0,0]}return i},vo.prototype.getEyeParameters=function(t){var i=this.J5t(t),e=this.K5t(t),s={offset:i,renderWidth:.5*this.h8t.device.width*this.$6t,renderHeight:this.h8t.device.height*this.$6t};return _.defineProperty(s,"fieldOfView",{enumerable:!0,get:function(){return Kr("VRFieldOfView","VRFrameData's projection matrices"),e}}),s},vo.prototype.r8t=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.h8t.updateDeviceParams(t),this.i8t&&this.i8t.updateDeviceInfo(this.h8t)},vo.prototype.c8t=function(){this.Hy&&this.i8t&&(this.Hy.leftBounds||this.Hy.rightBounds)&&this.i8t.setTextureBounds(this.Hy.leftBounds,this.Hy.rightBounds)},vo.prototype.q6t=function(){var t=this.Hy.source.getContext("webgl");if(t||(t=this.Hy.source.getContext("experimental-webgl")),t||(t=this.Hy.source.getContext("webgl2")),t){if(this.C9=t.canvas,this.s8t=t.canvas.getAttribute("style"),this.Hy.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=K4()*this.$6t,t.canvas.height=J4()*this.$6t,this.e8t=new Gh(t)):(this.config.CARDBOARD_UI_DISABLED||(this.e8t=new Gh(t)),this.i8t=new Fr(t,this.e8t,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.i8t.updateDeviceInfo(this.h8t)),this.e8t&&this.e8t.listen(function(t){this.o8t.show(this.Hy.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.u8t){var i=this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT;Z4()&&e2()&&i?this.u8t.showTemporarily(i,this.Hy.source.parentElement):this.u8t.update()}this.orientationHandler=this.w6t.bind(this),s.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.c8t.bind(this),s.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.eG(),this.l8t()}},vo.prototype.X6t=function(){this.i8t&&(this.i8t.destroy(),this.i8t=null),this.e8t&&(this.e8t.destroy(),this.e8t=null),this.u8t&&this.u8t.hide(),this.o8t.hide(),this.C9&&(r2(this.C9),this.s8t?this.C9.setAttribute("style",this.s8t):this.C9.removeAttribute("style"),n2(this.C9),this.C9=null,this.s8t=null),s.removeEventListener("orientationchange",this.orientationHandler),s.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},vo.prototype.W6t=function(){this.X6t(),this.q6t()},vo.prototype.submitFrame=function(t){if(this.i8t)this.c8t(),this.i8t.submitFrame();else if(this.e8t&&this.Hy){var i=this.Hy.source.getContext("webgl").canvas;i.width==this.lastWidth&&i.height==this.lastHeight||this.e8t.onResize(),this.lastWidth=i.width,this.lastHeight=i.height,this.e8t.render()}},vo.prototype.w6t=function(t){this.o8t.hide(),this.u8t&&this.u8t.update(),this.eG()},vo.prototype.eG=function(t){if(this.Hy){var i=this.Hy.source.getContext("webgl");r2(i.canvas);i.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),n2(i.canvas)}},vo.prototype.a8t=function(t){this.h8t.setViewer(t),this.i8t&&this.i8t.updateDeviceInfo(this.h8t),this.l8t()},vo.prototype.l8t=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.h8t}});s.dispatchEvent(t)},vo.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},vo.VRDisplay=Zi;var H2={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function or(t){this.config=Q4(Q4({},H2),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in nd,this.native={},this.native.getVRDisplays=nd.getVRDisplays,this.native.VRFrameData=s.VRFrameData,this.native.VRDisplay=s.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&R4())&&(this.enable(),this.getVRDisplays().then((function(t){t&&t[0]&&t[0].J6t&&t[0].J6t()})))}or.prototype.getPolyfillDisplays=function(){if(this.d8t)return this.polyfillDisplays;if(R4()){var t=new vo({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this.d8t=!0,this.polyfillDisplays},or.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,e=this.native.VRDisplay.prototype.getFrameData;s.VRDisplay.prototype.getFrameData=function(s){s instanceof t?e.call(this,s):(e.call(this,i),s.pose=i.pose,U4(i.leftProjectionMatrix,s.leftProjectionMatrix),U4(i.rightProjectionMatrix,s.rightProjectionMatrix),U4(i.leftViewMatrix,s.leftViewMatrix),U4(i.rightViewMatrix,s.rightViewMatrix))}}nd.getVRDisplays=this.getVRDisplays.bind(this),s.VRDisplay=vo.VRDisplay,s.VRFrameData=vo.VRFrameData},or.prototype.getVRDisplays=function(){var t,i=this,e=this.config;return this.hasNative?function(t){return Promise.race?Promise.race(t):new Promise((function(i,e){for(var s=0;s<t.length;s++)t[s].then(i,e)}))}([this.native.getVRDisplays.call(nd),new Promise((function(i){t=u((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),i([])}),e.GET_VR_DISPLAYS_TIMEOUT)}))]).then((function(e){return c(t),e.length>0?e:i.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},or.version="0.10.5-opentelly.3",or.VRFrameData=vo.VRFrameData,or.VRDisplay=vo.VRDisplay;var q2=_.freeze({default:or}),X2=q2&&or||q2;void 0!==B4&&B4.window&&(B4.document||(B4.document=B4.window.document),B4.navigator||(B4.navigator=B4.window.navigator));new X2({TOUCH_PANNER_DISABLED:!0,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:0,MOBILE_WAKE_LOCK:!li.nL&&!li.Ga,DPDB_URL:void 0});r(),r(),r();var Z2=class{f8t(t,i){const e=this._8t;let s;switch(i){case e.VERTEX_SHADER:s=e.createShader(i),this.g8t=s;break;case e.FRAGMENT_SHADER:s=e.createShader(i),this.w8t=s;break;default:return void console.error("Invalid Shader Type:",i)}e.attachShader(this.A8t,s),e.shaderSource(s,t),e.compileShader(s)}v8t(t){const i=this._8t;if(t){this.m8t={};for(const e in t)i.bindAttribLocation(this.A8t,t[e],e),this.m8t[e]=t[e]}}p8t(){this._8t.linkProgram(this.A8t)}y8t(){const t=this._8t;if(this.M8t){if(t.getProgramParameter(this.A8t,t.LINK_STATUS)){if(!this.m8t){this.m8t={};const i=t.getProgramParameter(this.A8t,t.ACTIVE_ATTRIBUTES);for(let e=0;e<i;e++){const i=t.getActiveAttrib(this.A8t,e);this.m8t[i.name]=t.getAttribLocation(this.A8t,i.name)}}this.T8t={};const i=t.getProgramParameter(this.A8t,t.ACTIVE_UNIFORMS);let e="";for(let s=0;s<i;s++){e=t.getActiveUniform(this.A8t,s).name.replace("[0]",""),this.T8t[e]=t.getUniformLocation(this.A8t,e)}}else this.g8t&&!t.getShaderParameter(this.g8t,t.COMPILE_STATUS)?console.error("Vertex shader compile error:",t.getShaderInfoLog(this.g8t)):this.w8t&&!t.getShaderParameter(this.w8t,t.COMPILE_STATUS)?console.error("Fragment shader compile error:",t.getShaderInfoLog(this.w8t)):console.error("Program link error:",t.getProgramInfoLog(this.A8t)),t.deleteProgram(this.A8t),this.A8t=null;t.deleteShader(this.g8t),t.deleteShader(this.w8t),this.M8t=!1}t.useProgram(this.A8t)}constructor(t){this.m8t=null,this.T8t=null,this.M8t=!0,this.g8t=null,this.w8t=null,this._8t=t,this.A8t=t.createProgram()}},K2=class{pr(t,i,e){let s=this._8t;this.N8t(t,i,s,e),this.t.hg||this.t.C9.BY(s,s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE),s.drawElements(s.TRIANGLES,this.D8t,s.UNSIGNED_SHORT,0)}S8t(t){this.I8t||(t.bindTexture(t.TEXTURE_2D,this.E8t),this.t.C9.BY(t,t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.I8t=!0)}N8t(t,i,e,s){const n=this.A8t;n.y8t(),this.S8t(e);const r=n.T8t,h=n.m8t;let o;e.uniformMatrix4fv(r.projectionMat,!1,t),e.uniformMatrix4fv(r.modelViewMat,!1,i),o="right"===s?this.b8t:this.L8t,e.bindBuffer(e.ARRAY_BUFFER,o),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.k8t),e.enableVertexAttribArray(h.position),e.enableVertexAttribArray(h.texCoord),e.vertexAttribPointer(h.position,3,e.FLOAT,!1,20,0),e.vertexAttribPointer(h.texCoord,2,e.FLOAT,!1,20,12),e.activeTexture(e.TEXTURE0),e.uniform1i(r.diffuse,0),e.bindTexture(e.TEXTURE_2D,this.E8t)}constructor(t,i,e){this.I8t=!1,this._8t=t,this.E8t=t.createTexture();let s=["uniform mat4 projectionMat;","uniform mat4 modelViewMat;","attribute vec3 position;","attribute vec2 texCoord;","varying vec2 vTexCoord;","void main() {","  vTexCoord = texCoord;","  gl_Position = projectionMat * modelViewMat * vec4( position, 1.0 );","}"].join("\n"),n=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");this.A8t=new Z2(t),this.A8t.f8t(s,t.VERTEX_SHADER),this.A8t.f8t(n,t.FRAGMENT_SHADER),this.A8t.v8t({position:0,texCoord:1}),this.A8t.p8t();const r=[],h=[],o=[],a=40;for(let t=0;t<=40;++t){const i=t*x.PI/40,s=x.sin(i),n=x.cos(i);for(let i=0;i<=a;++i){const o=2*i*x.PI/a-x.PI,u=x.sin(o)*s,c=n,l=-x.cos(o)*s,d=i/a,f=t/40;switch(e){case"horizontal":r.push(2*u,2*c,2*l,d/2,f),h.push(2*u,2*c,2*l,d/2+.5,f);break;case"vertical":r.push(2*u,2*c,2*l,d,f/2),h.push(2*u,2*c,2*l,d,f/2+.5);break;default:r.push(2*u,2*c,2*l,d,f)}}}for(let t=0;t<40;++t){let i=41*t,e=41*(t+1);for(let t=0;t<a;++t){let s=i+t,n=e+t;o.push(s,n,s+1,n,n+1,s+1)}}switch(this.L8t=t.createBuffer(),this.b8t=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.L8t),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.b8t),e){case"horizontal":case"vertical":t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW);break;default:t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)}this.k8t=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.k8t),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),t.STATIC_DRAW),this.D8t=o.length,this.t=i}};r();var J2=class extends Ha{fa(){return new $2}constructor(){super("C8t")}},$2=class extends gg{constructor(){super("stereochange")}};r();var Uc=class extends Ha{fa(){return new t3}constructor(){super("x8t")}},t3=class extends gg{constructor(){super("directionchange")}};r(),r();var so=x.PI/180,cr=180/x.PI,Mh=class{xz(t,i){return this.x=t,this.y=i,this}lmt(t){return this.x=t.x,this.y=t.y,this}O8t(t){return this.xz(t[0],t[1])}j8t(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}z8t(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=t||0,this.y=i||0}},i3=class{xz(t,i,e){return this.x=t,this.y=i,this.z=e,this}lmt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}O8t(t){return this.xz(t[0],t[1],t[2])}j8t(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}U(){return x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}P8t(){const t=this.U();if(0!==t){const i=1/t;this.B8t(i)}else this.x=0,this.y=0,this.z=0;return this}B8t(t){this.x*=t,this.y*=t,this.z*=t}R8t(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,l=-n*i-r*e-h*s;return this.x=a*o+l*-n+u*-h-c*-r,this.y=u*o+l*-r+c*-n-a*-h,this.z=c*o+l*-h+a*-r-u*-n,this}U8t(t){return this.x*t.x+this.y*t.y+this.z*t.z}Q8t(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}constructor(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0}},Ka=class{xz(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}lmt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}O8t(t){return this.xz(t[0],t[1],t[2],t[3])}j8t(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}U8t(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}KD(t){return this.F8t(this,t)}F8t(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this}Y8t(){return this.x*=-1,this.y*=-1,this.z*=-1,this.P8t(),this}G8t(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,h,o;if(n>.499)r=2*x.atan2(t,s),h=x.PI/2,o=0;else if(n<-.499)r=-2*x.atan2(t,s),h=-x.PI/2,o=0;else{const a=t*t,u=i*i,c=e*e;r=x.atan2(2*i*s-2*t*e,1-2*u-2*c),h=x.asin(2*n),o=x.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new zc(r,o,h)}P8t(){let t=x.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},zc=class{xz(t,i,e){return this.V8t=t,this.W8t=i,this.H8t=e,this}lmt(t){return this.xz(t.V8t,t.W8t,t.H8t)}mN(t){return this.V8t+=t.V8t,this.W8t+=t.W8t,this.H8t+=t.H8t,this}q8t(){const t=this.V8t,i=this.H8t,e=this.W8t,s=x.cos(t/2),n=x.cos(i/2),r=x.cos(e/2),h=x.sin(t/2),o=x.sin(i/2),a=x.sin(e/2),u=s*n,c=h*o;return new Ka(u*a+c*r,h*n*r+s*o*a,s*o*r-h*n*a,u*r-c*a)}constructor(t,i,e){this.V8t=t||0,this.W8t=i||0,this.H8t=e||0}},e3=.15,s3=class{kI(){this.Rt||(this.Rt=!0,this.we.addEventListener("keydown",this.X8t),this.we.addEventListener("mousedown",this.Z8t),this.we.addEventListener("touchstart",this.K8t),s.addEventListener("mousemove",this.ir),s.addEventListener("mouseup",this.J8t),this.$8t(s),s.addEventListener("touchmove",this.t9t),s.addEventListener("touchend",this.i9t))}$8t(t){if(JN(t));else if(an(t))try{t.parent.addEventListener("mouseup",this.J8t),this.$8t(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.e9t)}}CI(){this.Rt&&(this.Rt=!1,this.s9t=!1,this.n9t&&(Gs(this.n9t),this.n9t=null),this.we.removeEventListener("keydown",this.X8t),this.we.removeEventListener("mousedown",this.Z8t),this.we.removeEventListener("touchstart",this.K8t),s.removeEventListener("mousemove",this.ir),s.removeEventListener("mouseup",this.J8t),this.r9t(s),s.removeEventListener("touchmove",this.t9t),s.removeEventListener("touchend",this.i9t))}r9t(t){if(t.document.documentElement.removeEventListener("mouseleave",this.e9t),an(t))try{t.parent.removeEventListener("mouseup",this.J8t),this.r9t(t.parent)}catch(t){}}get h9t(){return new zc(this.o9t,this.a9t,this.u9t)}set h9t(t){this.o9t=t.V8t,this.a9t=t.W8t,this.u9t=t.H8t}c9t(t){this.l9t("o9t",t)}d9t(t){t=hi(t,-x.PI/2,x.PI/2),this.l9t("a9t",t)}l9t(t,i){this.n9t&&Gs(this.n9t);let e=this[t],s=Fu(),n=()=>{let r=Fu()-s;if(r>=80)return this[t]=i,Gs(this.n9t),void(this.n9t=null);this.n9t=Vs(n);let h=r/80;this[t]=e+(i-e)*h};this.n9t=Vs(n)}f9t(){this.a9t+=2*x.PI*this._9t.y/this.we.clientHeight*.3,this.o9t+=2*x.PI*this._9t.x/this.we.clientWidth*.5,this.a9t=hi(this.a9t,-x.PI/2,x.PI/2)}g9t(){this.s9t=!1}w9t(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.we}resetPose(){this.a9t=0,this.o9t=0}gn(){this.CI()}constructor(t){this.Rt=!1,this.a9t=0,this.o9t=0,this.u9t=0,this.n9t=null,this.A9t=new Mh,this.v9t=new Mh,this._9t=new Mh,this.s9t=!1,this.X8t=t=>{38===t.keyCode?this.d9t(this.a9t+e3):39===t.keyCode?this.c9t(this.o9t-e3):40===t.keyCode?this.d9t(this.a9t-e3):37===t.keyCode&&this.c9t(this.o9t+e3)},this.Z8t=t=>{this.A9t.xz(t.clientX,t.clientY),this.s9t=!0,t.preventDefault()},this.K8t=t=>{t.touches&&1===t.touches.length&&(this.A9t.xz(t.touches[0].pageX,t.touches[0].pageY),this.s9t=!0,t.preventDefault())},this.ir=t=>{if(this.s9t||this.w9t()){if(this.w9t()){let i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.v9t.xz(this.A9t.x-i,this.A9t.y-e)}else this.v9t.xz(t.clientX,t.clientY);this._9t.z8t(this.v9t,this.A9t),this.A9t.lmt(this.v9t),this.f9t()}},this.t9t=t=>{this.s9t&&(this.v9t.xz(t.touches[0].pageX,t.touches[0].pageY),this._9t.z8t(this.v9t,this.A9t),this.A9t.lmt(this.v9t),this.f9t())},this.J8t=t=>{this.g9t()},this.i9t=t=>{this.g9t()},this.e9t=t=>{this.g9t()},this.we=t}};r();var Kh=Zh(T_()),n3=Zh(N_()),r3=(Zh(D_()),Zh(S_())),h3=(Zh(I_()),Zh(E_())),o3=Zh(b_()),a3=Zh(L_()),u3=Zh(k_()),c3=Zh(C_());r();var yt,l3=["x8t","I_t","C8t","error"];function d3(t){let i,e={get stereo(){return t.m9t},set stereo(i){t.m9t=i},get useDeviceMotionControls(){return t.p9t},set useDeviceMotionControls(i){t.p9t=i},get direction(){return t.y9t},set direction(i){t.y9t=i},get verticalFOV(){return t.M9t},set verticalFOV(i){t.M9t=i},get canPresentVR(){return t.T9t},get state(){return t.Lvt},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Lu(t,l3,e),e}r(),function(t){t.Rs="unavailable",t.N9t="available",t.Oa="presenting"}(yt||(yt={}));var f3=new zc(0*so,0,0);function _3(t){return _l(t+180,360)-180}function g3(t,i){let e=t.U8t(i);return 1-e*e<1e-4}var w3=class extends i{ko(){nd.getVRDisplays?(this.D9t=new VRFrameData,this.S9t(),s.addEventListener("vrdisplayconnect",this.S9t,!1),s.addEventListener("vrdisplaydisconnect",this.S9t,!1),s.addEventListener("vrdisplayactivate",this.I9t,!1),s.addEventListener("vrdisplaydeactivate",this.E9t,!1),s.addEventListener("vrdisplaypresentchange",this.b9t,!1)):nd.getVRDevices?this.L9t("Your browser supports WebVR but not the latest version.",le.VR_PLATFORM_UNSUPPORTED):this.L9t("Your browser does not support WebVR.",le.VR_PLATFORM_UNSUPPORTED),this.t.yn(t.lo,this.do),this.do()}k9t(){let t={alpha:!1,antialias:!1,preserveDrawingBuffer:!0};if(!this.C9t){const t=h.createElement("canvas");t.className="theoplayer-vr",ia(t),t.style.zIndex="2",this.t.we.appendChild(t),this.C9t=t}this._8t=this.C9t.getContext("webgl",t),this._8t||(this._8t=this.C9t.getContext("experimental-webgl",t),this._8t)?(this._8t.enable(this._8t.DEPTH_TEST),this._8t.enable(this._8t.CULL_FACE)):this.L9t("Your browser does not support WebGL.",le.VR_PLATFORM_UNSUPPORTED)}x9t(){let t=this.y9t;this.O9t||(this.k9t(),this.O9t=!0),this._8t&&(this.j9t(new K2(this._8t,this.t,this.z9t)),this.C9t.style.display="",this.gi||(this.gi=new s3(this.C9t)),this.gi.kI(),this.t.ya.yn(Pc.ra,this.eG),this.t.yn(th.pn,this.eG),this.y9t=t,this.eG(),this.P9t=Vs(this.B9t))}R9t(){let t=this.y9t;this.j9t(void 0),this.gi&&this.gi.CI(),this.C9t&&(this.C9t.style.display="none"),this.t.ya.fn(Pc.ra,this.eG),this.t.fn(th.pn,this.eG),this.P9t&&Gs(this.P9t),this.y9t=t}U9t(){var t;return null==(t=this.t.Wa())?void 0:t.vr}Q9t(t){let i=this.Lvt,e=this.m9t;this.F9t&&(this.Y9t=void 0,this.E9t()),this.F9t=t,this.F9t&&(this.F9t.depthNear=.1,this.F9t.depthFar=1024),this.m9t=e,this.Lvt!==i&&this.Co(new ll),this.m9t!==e&&this.Co(new J2)}G9t(t){let i=this.Lvt;this.V9t=t,this.Lvt!==i&&this.Co(new ll)}j9t(t){let i=this.Lvt;this.W9t=t,this.Lvt!==i&&this.Co(new ll)}H9t(t){let i=this.Lvt,e=this.m9t;this.q9t=t,this.gi&&(t?this.gi.CI():this.gi.kI()),this.Lvt!==i&&this.Co(new ll),this.m9t!==e&&this.Co(new J2)}X9t(t){let i=this.m9t;this.Z9t=t,this.m9t!==i&&this.Co(new J2)}K9t(){let t=this.C9t;this.J9t===t.width&&this.$9t===t.height||(t.width=this.J9t,t.height=this.$9t,this.t7t())}i7t(t,i){(0,n3.default)(t,i.j8t()),(0,h3.default)(t,t)}useDeviceOrientation(){return!!this.q9t||this.e7t}s7t(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().catch(xs)}L9t(t,i){Nu(t),this.Co(new me(new ce(i,t)))}n7t(){this.Co(new Uc)}get m9t(){return this.T9t?this.q9t:this.Z9t}set m9t(t){this.T9t?t?this.I9t():this.E9t():this.X9t(t)}get p9t(){return this.e7t}set p9t(t){this.m9t||(this.e7t=t,t&&li.Ga&&this.s7t())}get y9t(){let t=this.h9t;return{yaw:_3(t.V8t*cr),pitch:t.W8t*cr,roll:x.round(t.H8t*cr)}}set y9t(t){let i=_3(t&&+t.yaw||0),e=_3(t&&+t.pitch||0),s=_3(t&&+t.roll||0);this.h9t=new zc(i*so,e*so,s*so)}get h9t(){if(this.Lvt===yt.Rs)return this.r7t.G8t();let t=this.h7t,i=this.o7t,e=new zc;return t&&e.mN(t),i&&e.mN(i),e}set h9t(t){const i=this.h9t.q8t();if(this.Lvt===yt.Rs)this.r7t=t.q8t();else{let i=this.F9t;i&&i.resetPose&&i.resetPose(),this.gi&&(this.gi.h9t=t),this.r7t=this.h9t.q8t()}g3(i,this.r7t)||this.n7t()}get h7t(){let t=this.Y9t&&this.Y9t.orientation;if(t)return(new Ka).O8t(t).G8t()}get o7t(){return this.gi&&this.gi.h9t}get M9t(){return 180*this.a7t}set M9t(t){t&&t>=0&&t<=180&&(this.a7t=+t/180)}get T9t(){return!(!this.F9t||!this.F9t.capabilities.canPresent)}get Lvt(){var t;return this.V9t&&((null==(t=this.U9t())?void 0:t.nativeVR)||this.W9t)?this.q9t?yt.Oa:yt.N9t:yt.Rs}gn(){this.Vo(),this.R9t(),this.E9t(),this.t.fn(t.lo,this.do),nd.getVRDisplays&&(s.removeEventListener("vrdisplayconnect",this.S9t,!1),s.removeEventListener("vrdisplaydisconnect",this.S9t,!1),s.removeEventListener("vrdisplayactivate",this.I9t,!1),s.removeEventListener("vrdisplaydeactivate",this.E9t,!1),s.removeEventListener("vrdisplaypresentchange",this.b9t,!1))}constructor(t){super(),this.r7t=new Ka,this.a7t=.4,this.Z9t=!1,this.e7t=!1,this.V9t=!1,this.wd=void 0,this.z9t=Xa.NONE,this.gi=void 0,this.u7t=[],this.F9t=void 0,this.q9t=!1,this.O9t=!1,this.C9t=void 0,this.W9t=void 0,this._8t=null,this.P9t=0,this.D9t=void 0,this.Y9t=void 0,this.c7t=(0,Kh.default)(),this.l7t=(0,Kh.default)(),this.J9t=0,this.$9t=0,this.d7t=!0,this.f7t=0,this._7t=()=>{this.t.fn(qo.Tv,this._7t);let t=this.U9t();t&&!t.nativeVR&&this.x9t()},this.do=()=>{this.R9t();let t=this.U9t();this.wd=t,t&&t.panoramaMode!==sl.NONE?(t.panoramaMode===sl.PM180&&ji("PanoramaMode is set to '180' while the VR API only supports '360', consider using the WebXR API if you need to play 180 degree content."),this.G9t(!0),t.nativeVR?this.Co(new ll):(this.z9t=t.stereoMode,this.t.yn(qo.Tv,this._7t))):this.G9t(!1)},this.I9t=async()=>{if(this.Lvt!==yt.Rs&&this.T9t){this.d7t=!1,this.g7t();try{await this.F9t.requestPresent([{source:this.C9t}])}catch(t){this.L9t("Failed to present VR content.",le.VR_PRESENTATION_ERROR)}finally{this.b9t()}}},this.E9t=async()=>{if(this.F9t)try{await this.F9t.exitPresent()}catch(t){}finally{this.b9t()}},this.S9t=async()=>{try{this.u7t=await nd.getVRDisplays(),this.F9t&&na(this.u7t,this.F9t)||this.Q9t(this.u7t[0])}catch(t){this.u7t=[],this.Q9t(void 0)}},this.b9t=()=>{this.H9t(!!this.F9t&&this.F9t.isPresenting),this.eG(),this.d7t=!this.q9t,this.d7t?Vs(this.t7t):this.g7t()},this.eG=()=>{if(!this.C9t)return;const t=this.t.we.offsetWidth,i=this.t.we.offsetHeight;let e=this.F9t;if(e&&this.m9t){let t=e.getEyeParameters("left"),i=e.getEyeParameters("right");t&&i&&(this.J9t=2*x.max(t.renderWidth,i.renderWidth),this.$9t=x.max(t.renderHeight,i.renderHeight))}else{let e=ag.Ys.j4;this.J9t=t*e,this.$9t=i*e}},this.t7t=()=>{if(!li.Ga||!this.C9t||!this.d7t)return;this.g7t();let t=this.C9t,i=t.offsetWidth+1,e=t.offsetHeight;t.style.width=i+"px",t.style.height=e+"px",this.f7t=Vs(this.g7t)},this.g7t=()=>{if(!this.f7t)return;let t=this.C9t;t.style.width="100%",t.style.height="100%",Gs(this.f7t),this.f7t=0},this.B9t=()=>{let t=this.F9t,i=this.a7t,e=this.C9t,s=this.W9t,n=this._8t,r=this.D9t,h=this.c7t,o=this.l7t;this.K9t(),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t&&this.useDeviceOrientation()&&(t.getFrameData(r),this.Y9t=r.pose);let a=this.h9t.q8t();this.i7t(o,a),t&&t.isPresenting?(this.P9t=t.requestAnimationFrame(this.B9t),n.viewport(0,0,.5*e.width,e.height),s.pr(r.leftProjectionMatrix,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(r.rightProjectionMatrix,o,"right"),t.submitFrame()):(this.P9t=Vs(this.B9t),(0,a3.default)(h,x.PI*i,e.width/e.height,.1,1024),this.m9t?(n.viewport(0,0,.5*e.width,e.height),s.pr(h,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(h,o,"right")):(n.viewport(0,0,e.width,e.height),s.pr(h,o))),g3(a,this.r7t)||(this.r7t.lmt(a),this.n7t())},this.t=t,this.h9t=f3,this.va=d3(this),this.ko()}};r(),tr((function(t){return class extends t{fa(){if(null!==this.w7t){const t=this.w7t.va;return Ou(super.fa(),{vr:t})}return super.fa()}gn(){var t;null==(t=this.w7t)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.w7t=null,i.vr.useWebXR||(this.w7t=new w3(this))}}}),iu.Za),r(),r(),r(),r();var A3=class{kI(){this.Le||(this.Le=!0,this.Us.addEventListener("mousedown",this.Z8t),this.Us.addEventListener("touchstart",this.K8t),s.addEventListener("mousemove",this.ir),s.addEventListener("touchmove",this.t9t),s.addEventListener("mouseup",this.J8t),s.addEventListener("touchend",this.i9t),this.$8t(s))}CI(){this.Le&&(this.Le=!1,this.Us.removeEventListener("mousedown",this.Z8t),this.Us.removeEventListener("touchstart",this.K8t),s.removeEventListener("mousemove",this.ir),s.removeEventListener("touchmove",this.t9t),s.removeEventListener("mouseup",this.J8t),s.removeEventListener("touchend",this.i9t),this.r9t(s))}$8t(t){if(JN(t));else if(an(t))try{t.parent.addEventListener("mouseup",this.J8t),this.$8t(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.e9t)}}r9t(t){if(t.document.documentElement.removeEventListener("mouseleave",this.e9t),an(t))try{t.parent.removeEventListener("mouseup",this.J8t),this.r9t(t.parent)}catch(t){}}g9t(){this.A7t=!1}f9t(){const t=this.m7t.v7t;t.yaw+=2*x.PI*this.p7t.x*.4/this.Us.clientWidth,t.pitch+=2*x.PI*this.p7t.y*.5/this.Us.clientHeight,t.pitch=hi(t.pitch,-x.PI/2,x.PI/2),this.m7t.v7t=t}w9t(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Us}gn(){this.CI()}constructor(t,i){this.Le=!1,this.y7t=new Mh,this.M7t=new Mh,this.p7t=new Mh,this.A7t=!1,this.Z8t=t=>{this.y7t.xz(t.clientX,t.clientY),this.A7t=!0,t.preventDefault(),t.stopPropagation()},this.K8t=t=>{t.touches&&1===t.touches.length&&(this.y7t.xz(t.touches[0].pageX,t.touches[0].pageY),this.A7t=!0,t.preventDefault())},this.ir=t=>{if(this.A7t||this.w9t()){if(this.w9t()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.M7t.xz(this.y7t.x-i,this.y7t.y-e)}else this.M7t.xz(t.clientX,t.clientY);this.p7t.z8t(this.M7t,this.y7t),this.y7t.lmt(this.M7t),this.f9t()}},this.t9t=t=>{this.A7t&&(this.M7t.xz(t.touches[0].pageX,t.touches[0].pageY),this.p7t.z8t(this.M7t,this.y7t),this.y7t.lmt(this.M7t),this.f9t())},this.J8t=()=>{this.g9t()},this.i9t=()=>{this.g9t()},this.e9t=()=>{this.g9t()},this.m7t=t,this.Us=i}};r();var v3=class{T7t(t){t.clearColor(...this._H),t.clear(t.COLOR_BUFFER_BIT)}N7t(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.D7t.forEach((e=>{e.N7t(t,i)}))}S7t(t){this.D7t.push(t)}I7t(){this.D7t=[]}constructor(){this._H=[0,0,0,1],this.D7t=[]}};r(),r(),r();var m3=class{E7t(t,i,e){const s=t.createBuffer();return null===s?(ji("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.b7t=t,this.RL=this.E7t(t,i,e),this.L7t=s,this.g0=n,this.k7t=!1,this.C7t=0,this.Zu=0}},p3=class extends m3{kI(t){if(null===this.RL)return void ji("Attempted to enable buffer that failed to initialize.");if(null===t)return void ji("Attempted to enable attribute without location.");const i=this.b7t;i.bindBuffer(i.ARRAY_BUFFER,this.RL),i.vertexAttribPointer(t,this.L7t,this.g0,this.k7t,this.C7t,this.Zu),i.enableVertexAttribArray(t)}CI(t){t&&this.b7t.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var y3,qc,gh,M3=class extends m3{x7t(){const t=this.b7t;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.RL),t.drawElements(t.TRIANGLES,this.O7t,this.g0,this.Zu)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this.O7t=i.length}};r(),function(t){t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor"}(y3||(y3={})),function(t){t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture"}(qc||(qc={})),function(t){t.Normal="vNormal",t.Color="vColor",t.UV="vUV"}(gh||(gh={}));var T3=class{j7t(t,i,e){const s=this.z7t(t,t.VERTEX_SHADER,i),n=this.z7t(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return ji("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?(ji("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:(ji("Failed to initialize shader program"),null))}z7t(t,i,e){const s=t.createShader(i);if(null===s)return ji("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return ji("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}P7t(){return this.B7t}R7t(t){const i=this.B7t;if(null===i)return ji("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.b7t.getAttribLocation(i,t);return-1===e?null:e}U7t(t){const i=this.B7t;if(null===i)return ji("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.b7t.getUniformLocation(i,t);return null===e&&Nu("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.b7t=t,this.B7t=this.j7t(this.b7t,i,e)}},lo=class{Q7t(){const t=this.F7t.length,i=x.max(...this.Y7t);return i>=t?(Nu("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&ji("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.G7t||this.G7t.length===t||(Nu("Created geometry where position ("+t+") and uv ("+this.G7t.length+") buffers have different length."),!1))}V7t(t,i){if(!this.Q7t())throw new b("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y,t.z)})),new p3(t,new Float32Array(e),3)}(t,this.F7t),s=function(t,i){return new M3(t,new Uint16Array(i))}(t,this.Y7t),n=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y)})),new p3(t,new Float32Array(e),2)}(t,this.G7t);return new N3(e,s,n,i)}constructor(t,i,e){this.F7t=t,this.Y7t=i,this.G7t=e}},N3=class{W7t(){this.F7t.kI(this.H7t),null!==this.q7t&&this.G7t.kI(this.q7t)}X7t(){this.F7t.CI(this.H7t),null!==this.q7t&&this.G7t.CI(this.q7t)}N7t(){this.Y7t.x7t()}constructor(t,i,e,s){this.F7t=t;const n=s.R7t(y3.VertexPos);if(null===n)throw new b("Failed to get position attribute location.");this.H7t=n,this.G7t=e,this.q7t=s.R7t(y3.VertexUV),this.Y7t=i}},D3=class extends lo{constructor(t=1,i=32,e=16,s=0,n=2*x.PI,r=0,h=x.PI){let o=0;const a=x.min(r+h,x.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=e;u++){const f=[],_=u/e;let g=0;0===u&&0===r?g=.5/i:u===e&&a===x.PI&&(g=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*x.cos(s+a*n)*x.sin(r+_*h),d=t*x.cos(r+_*h),w=t*x.sin(s+a*n)*x.sin(r+_*h);c.push(new i3(u,d,w)),l.push(new Mh(a+g,1-_)),f.push(o++)}d.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=d[t][s+1],n=d[t][s],h=d[t+1][s],o=d[t+1][s+1];(0!==t||r>0)&&u.push(i,n,o),(t!==e-1||a<x.PI)&&u.push(n,h,o)}super(c,u,l)}};r(),r();var S3=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],I3=class{Z7t(){const t=this.b7t;t.activeTexture(this.K7t),t.bindTexture(t.TEXTURE_2D,this.J7t)}Qg(){const t=this.b7t;t.activeTexture(this.K7t),t.bindTexture(t.TEXTURE_2D,this.J7t),t.uniform1i(this.$7t,0)}tti(t){const i=this.b7t;i.bindTexture(i.TEXTURE_2D,this.J7t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.cK,this.iti,this.eti,this.sti,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}nti(t){const i=this.b7t;i.bindTexture(i.TEXTURE_2D,this.J7t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.C9.BY(i,i.TEXTURE_2D,this.cK,this.iti,this.eti,this.sti),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.b7t=t,this.J7t=t.createTexture(),null===this.J7t)throw new b("Failed to create texture");const e=i.U7t(qc.Texture);if(null===e)throw new b("Failed to get texture location.");this.$7t=e,t.bindTexture(t.TEXTURE_2D,this.J7t),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.K7t=t.TEXTURE0,this.cK=0,this.iti=t.RGBA,this.eti=t.RGBA,this.sti=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.cK,this.iti,2,2,0,this.eti,this.sti,new T(S3))}},E3="\n    attribute vec4 "+y3.VertexPos+";\n    attribute vec2 "+y3.VertexUV+";\n\n    uniform mat4 "+qc.ModelViewMat+";\n    uniform mat4 "+qc.ProjectionMat+";\n    \n    varying mediump vec2 "+gh.UV+";\n    \n    void main() {\n      gl_Position = "+qc.ProjectionMat+" * "+qc.ModelViewMat+" * "+y3.VertexPos+";\n      "+gh.UV+" = "+y3.VertexUV+";\n    }\n",b3="\n    varying mediump vec2 "+gh.UV+";\n    \n    uniform sampler2D "+qc.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+qc.Texture+", "+gh.UV+");\n    }\n",L3=class{P7t(){return this.B7t}kI(){this.b7t.useProgram(this.B7t.P7t()),this.J7t.Qg()}rti(t){this.J7t.tti(t)}hti(t){this.J7t.nti(t)}constructor(t){this.b7t=t,this.B7t=new T3(t,E3,b3),this.J7t=new I3(t,this.B7t)}};r();var k3=class{N7t(t,i){if(this.oti(i.ati)){this.uti.W7t(),this.cti.kI();const e=this.lti,s=i.dti,n=(0,o3.default)(s,s,e);t.uniformMatrix4fv(this.fti,!1,n);const r=i._ti;t.uniformMatrix4fv(this.gti,!1,r),this.uti.N7t(),this.uti.X7t()}}oti(t){return"none"===this.ati||"right"!==t&&"left"===this.ati||"right"===t&&"right"===this.ati}get lti(){const t=(0,Kh.default)(),i=this.po;return(0,c3.default)(t,t,i.j8t()),(0,u3.default)(t,t,this.wti.x,new Float32Array([1,0,0])),(0,u3.default)(t,t,this.wti.y,new Float32Array([0,1,0])),(0,u3.default)(t,t,this.wti.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.po=new i3,this.wti=new i3,this.ati="none",this.cti=e;const n=e.P7t();this.uti=i.V7t(t,n),s&&(this.ati=s);const r=n.U7t(qc.ModelViewMat);if(null===r)throw new b("Failed to get model view matrix location.");this.fti=r;const h=n.U7t(qc.ProjectionMat);if(null===h)throw new b("Failed to get projection matrix location.");this.gti=h}};r();var C3=class{Ati(){const t=(0,Kh.default)();return(0,a3.default)(t,this.vti,this.mti,this.pti,this.yti)}Mti(){this.Tti=this.Ati()}get _ti(){return new Float32Array(this.Tti)}set _ti(t){this.Tti=t}Nti(){const t=(0,Kh.default)(),i=(0,r3.default)((0,Kh.default)(),this.Dti.j8t()),e=(0,n3.default)((0,Kh.default)(),this.Sti.j8t());return(0,o3.default)(t,i,e),(0,h3.default)(t,t),t}Iti(){this.Eti=this.Nti()}get dti(){return new Float32Array(this.Eti)}bti(){this.Iti(),this.Mti()}Zn(){this.Dti=new i3,this.wti=new Ka,this.bti()}Lti(t){const i=this.Sti.G8t();i.mN(t),this.wti=i.q8t()}kti(t){this.wti=t.q8t()}get Cti(){return this.vti}set Cti(t){this.vti=t,this.Mti()}get xti(){return this.mti}set xti(t){this.mti=t,this.Mti()}get po(){return(new i3).lmt(this.Dti)}set po(t){this.Dti=t,this.Iti()}get wti(){return(new Ka).lmt(this.Sti)}set wti(t){this.Sti=t,this.Iti()}constructor(t){this.vti=72*x.PI/180,this.mti=1.77,this.pti=.1,this.yti=100,this.ati="none",this.Dti=new i3,this.Sti=new Ka,this.Tti=this.Ati(),this.Eti=this.Nti(),t&&(this.ati=t)}},x3=1e-4,O3=class extends i{ko(){this.Oti(),this.b7t?nd.xr?(nd.xr.addEventListener("devicechange",this.jti),this.zti().then((()=>{this.Pti?(this.Bti(),this.Rti(),this.Uti()):this.L9t("XR: Inline session not available. Panorama functionality will not work.",le.VR_PRESENTATION_ERROR)}))):this.L9t("Your browser does not support WebXR",le.VR_PLATFORM_UNSUPPORTED):this.L9t("Your browser does not support webGL",le.VR_PLATFORM_UNSUPPORTED)}Uti(){this.Qo.ya.yn(Pc.ra,this.mn),this.Qo.yn(th.pn,this.mn),this.Qo.yn(t.lo,this.do),this.Qo.yn(t.XA,this.KU)}Oti(){this.Qti=h.createElement("canvas"),this.Qti.className="theoplayer-vr",this.Qti.style.zIndex="2",this.Qti.style.background="black",this.Qti.style.display="none",this.Qo.we.appendChild(this.Qti),ia(this.Qti);let t=this.Qti.getContext("webgl2");t||(t=this.Qti.getContext("webgl")),t&&(this.b7t=t,this.Fti=new A3(this,this.Qti))}async zti(){nd.xr?await Promise.all([nd.xr.isSessionSupported("inline").then((t=>{this.Pti=t})).catch((t=>{this.Pti=!1,this.L9t("exception when calling xr.isSessionSupported for inline session: "+t,le.VR_PRESENTATION_ERROR)})),nd.xr.isSessionSupported("immersive-vr").then((t=>{this.Yti=t})).catch((t=>{this.Yti=!1,this.L9t("exception when calling xr.isSessionSupported for immersive-vr session: "+t,le.VR_PRESENTATION_ERROR)}))]):(this.Pti=!1,this.Yti=!1)}Bti(){const t=this.U9t();this.Zx=t,this.V9t=Boolean(t),this.V9t&&(this.Gti=(null==t?void 0:t.stereoMode)||Xa.NONE,this.Vti=(null==t?void 0:t.panoramaMode)||sl.NONE,this.Wti&&(this.Hti(this.Vti,this.Gti),this.x9t()))}Hti(t,i){if(!this.b7t||t===sl.NONE)return;const e=this.b7t;let s,n;this.qti.I7t(),t===sl.PM360?(s=2*x.PI,n=-x.PI/2):(s=x.PI,n=-x.PI);const r=new D3(16,60,40,0,s),h=[],o=[];for(let t=0;t<r.G7t.length;t++){const e=r.G7t[t];switch(i){case Xa.NONE:h.push(e),o.push(e);break;case Xa.VERTICAL:h.push(new Mh(e.x,.5*e.y)),o.push(new Mh(e.x,.5*e.y+.5));break;case Xa.HORIZONTAL:h.push(new Mh(.5*e.x,e.y)),o.push(new Mh(.5*e.x+.5,e.y))}}r.F7t.forEach((t=>{t.x*=-1}));const a=new lo(r.F7t,r.Y7t,h),u=new lo(r.F7t,r.Y7t,o);this.Xti=new L3(e);const c=new k3(e,a,this.Xti,"left");c.wti.y=n,this.qti.S7t(c);const l=new k3(e,u,this.Xti,"right");l.wti.y=n,this.qti.S7t(l)}x9t(){this.Qti.style.display="block",this.Pti&&this.Qo.yn(t.jh,this.Zti)}R9t(){this.Kti(),this.Qo.fn(t.jh,this.Zti),this.Qti.style.display="none"}Jti(){this.$ti(),this.tii()}async eii(){if(this.sii||!this.Pti)return;const t={optionalFeatures:["local"]};try{const i=await nd.xr.requestSession("inline",t);let e;e=li.Qs?li.ob?"viewer":"local":"viewer";const s=await i.requestReferenceSpace(e);i.addEventListener("end",this.$ti),this.nii=s,this.sii=i,this.Fti.kI(),this.rii(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,this.b7t),inlineVerticalFieldOfView:this.vti*so})}catch(t){this.$ti(),this.L9t(t,le.VR_PRESENTATION_ERROR)}}$ti(){this.sii&&(this.Kti(),this.Fti.CI(),this.sii.removeEventListener("end",this.tii),this.sii.end(),this.sii=null,this.Rti())}async hii(){if(!this.oii&&this.Yti){this.Kti();try{const t=await nd.xr.requestSession("immersive-vr"),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.tii),this.aii=i,this.oii=t,await this.uii(),this.rii()}catch(t){this.tii(),this.L9t(t,le.VR_PRESENTATION_ERROR)}}}async uii(){const t=this.b7t,i=this.oii;this.Qti&&t&&i&&!this.cii&&(this.Qti.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.Qti.addEventListener("webglcontextrestored",(()=>{this.Hti(this.Vti,this.Gti)})),this.cii=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}Rti(){if(!this.oii&&this.b7t){const t=this.b7t,i=this.Qti.clientWidth,e=this.Qti.clientHeight,s=ag.Ys.j4;this.Qti.width=i*s,this.Qti.height=e*s,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}rii(){null===this.lii&&(this.dii(),this.fii?this.lii=this.fii.requestAnimationFrame(this._ii):(this.gii(),ji("XR: Attempted to start animation loop without inline or immersive session.")))}Kti(){null!==this.lii&&(this.gii(),this.fii?this.fii.cancelAnimationFrame(this.lii):ji("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.lii=null)}dii(){if(null!==this.wii)return;const t=this.Qo.Ug();if(void 0===t||!(t instanceof HTMLVideoElement))return void ji("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.Xti.hti(this.Qo),this.wii=t.requestVideoFrameCallback(i)};this.Aii=t,this.wii=t.requestVideoFrameCallback(i)}gii(){var t;null!==this.wii&&(null==(t=this.Aii)||null==t.cancelVideoFrameCallback||t.cancelVideoFrameCallback(this.wii),this.Aii=null,this.wii=null)}vii(){return!!this.mii||(li.Ga?this.pii&&this.yii:this.pii)}s7t(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.yii="granted"===t}))}Mii(){return(!this.hg()||Boolean(this.Tii))&&this.Nii()}hg(){return this.Qo.hg}Nii(){return this.Qo.vg>=2}get V9t(){return this.Dii}set V9t(t){const i=this.Lvt;this.Dii=t,this.Lvt!==i&&this.Co(new ll)}get Wti(){return this.Vti!==sl.NONE}get Vti(){return this.Sii}set Vti(t){const i=this.Lvt;this.Sii=t,this.Lvt!==i&&this.Co(new ll)}get Yti(){return this.Iii}set Yti(t){const i=this.Lvt;this.Iii=t,this.Lvt!==i&&this.Co(new ll)}get T9t(){return this.Yti}get fii(){return this.oii||this.sii}get oii(){return this.mii}set oii(t){const i=this.Lvt;this.mii=t,this.Lvt!==i&&this.Co(new ll)}get Eii(){return this.aii||this.nii}get y9t(){const t=this.bii.G8t();return{yaw:t.V8t*cr,pitch:t.W8t*cr,roll:t.H8t*cr}}set y9t(t){const i=j3(t&&t.pitch||0)*so,e=j3(t&&t.roll||0)*so,s=j3(t&&t.yaw||0)*so,n=new zc(s,i,e);this.bii=n.q8t()}get v7t(){const t=this.Lii.G8t();return{yaw:t.V8t,pitch:t.W8t,roll:t.H8t}}set v7t(t){const i=z3(t&&t.pitch||0),e=z3(t&&t.roll||0),s=z3(t&&t.yaw||0),n=new zc(s,i,e);this.Lii=n.q8t()}get Lvt(){return this.V9t?this.oii?yt.Oa:yt.N9t:yt.Rs}get m9t(){return null!==this.oii}set m9t(t){const i=this.m9t;t&&this.Yti?this.hii():this.tii(),this.m9t!==i&&this.Co(new J2)}get p9t(){return this.pii}set p9t(t){null===this.mii&&(this.pii=t,t&&li.Ga&&this.s7t())}get M9t(){return this.vti}set M9t(t){t&&t>=0&&t<=180&&(this.vti=t,null!==this.sii&&this.sii.updateRenderState({inlineVerticalFieldOfView:this.vti*so}))}L9t(t,i){Nu(t),this.Co(new me(new ce(i,t)))}U9t(){const t=this.Qo.Wa();return t&&t.vr}gn(){this.Jti(),this.Vo()}constructor(t){super(),this.Pti=!1,this.Iii=!1,this.bii=new Ka,this.kii=new Ka,this.Lii=new Ka,this.vti=74,this.pii=!1,this.Zx=void 0,this.Gti=Xa.NONE,this.Dii=!1,this.Sii=sl.NONE,this.qti=new v3,this.sii=null,this.mii=null,this.nii=null,this.aii=null,this.cii=!1,this.lii=null,this.Aii=null,this.wii=null,this.Tii=0,this.yii=!1,this.jti=()=>{this.zti()},this.do=()=>{this.R9t(),this.Jti(),this.Bti()},this.Zti=()=>{this.eii()},this.tii=()=>{this.oii&&(JI("Ending immersive session"),this.Kti(),this.oii.removeEventListener("end",this.tii),this.oii.end(),this.oii=null,this.aii=null,this.cii=!1,this.sii?this.rii():this.eii())},this.mn=()=>{this.Rti()},this._ii=(t,i)=>{if(!this.b7t)return;const e=this.b7t,s=this.fii;if(null===this.wii&&this.Mii()&&(this.Xti.hti(this.Qo),this.Tii>0&&(this.Tii-=1)),null===s||void 0===i)return void ji("Attempted to run webXR animation loop without session or xrFrame.");this.lii=s.requestAnimationFrame(this._ii);const n=s.renderState.baseLayer,r=i.getViewerPose(this.Eii);if(void 0===n||void 0===r)return void ji("Attempted to run webXR animation loop without glLayer or viewerPose.");e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let h=new zc,o=0;for(const t of r.views){const i=new C3(t.eye);if(i._ti=t.projectionMatrix,this.vii()){let e;if(li.Qs&&li.ob&&null===this.mii){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i.wti=new Ka(e.x,e.y,e.z,e.w)}this.sii&&i.Lti(this.Lii.G8t()),h=h.mN(i.wti.G8t()),o+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.qti.N7t(e,i)}const a=new zc(h.V8t/o,h.W8t/o,h.H8t);this.bii=a.q8t(),function(t,i){const e=t.U8t(i);return 1-e*e<x3}(this.bii,this.kii)||(this.kii.lmt(this.bii),this.Co(new Uc))},this.KU=()=>{this.Tii=5},this.Qo=t,this.va=d3(this),this.ko()}};function j3(t){return _l(t+180,360)-180}function z3(t){return _l(t+x.PI,2*x.PI)-x.PI}function P3(t,i){let e=i;for(let i in t)ui(t[i])?(e[i]=e[i]||{},P3(t[i],e[i])):tl.call(e,i)||(e[i]=t[i]);return e}r(),tr((function(t){return class extends t{fa(){return null!==this.m7t?Ou(super.fa(),{vr:this.m7t.va}):super.fa()}gn(){var t;null==(t=this.m7t)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.m7t=null,i.vr.useWebXR&&(this.m7t=new O3(this))}}}),iu.Za),r(),r(),r();var B3=class{getEpochTimeMs(){return Yo()}release(){}};r();var R3=class{createTimer(t,i,e){let s=v(t,i);return()=>m(s)}release(){}};r();var U3=class{makeRequest(t,i,e,s,n,r){const h=function(t){switch(t.toLowerCase()){case"get":return Kc.GET;case"post":return Kc.POST;case"put":return Kc.PUT;case"delete":return Kc.DELETE;case"head":return Kc.HEAD;case"options":return Kc.OPTIONS;default:throw new b("Request method unknown.")}}(t);if(this.Cii){if(h===Kc.GET)(new Image).src=i+"?"+e;else{const t=e||new ArrayBuffer(0),n=s||void 0;this.dE.bY({zu:i,$I:t,IP:n})}return()=>{}}const o=new Po,a=s?{"Content-Type":s}:void 0,u=new nc({zu:i,$I:e,hE:!1,eE:nr.Ru,NI:n,iE:h,a_:o.a_,tE:a});return this.xii(u,r),()=>o.c_()}async xii(t,i){if(i)try{const e=await this.dE.mI(t);if(e.TI>=200&&e.TI<300){i(!0,await e.fE())}else i(!1,"HTTP"+e.TI)}catch(t){i(!1,String(t))}}release(){s.removeEventListener("beforeunload",this.Oii)}constructor(t){this.Cii=!1,this.Oii=()=>{this.Cii=!0},this.dE=t,s.addEventListener("beforeunload",this.Oii)}};r();var Q3=class{saveData(t,i,e,s){try{return localStorage.setItem(t+"/"+i,e),s(!0,null)}catch(t){return s(!1,t.toString())}}loadData(t,i,e){try{return e(!0,localStorage.getItem(t+"/"+i))}catch(t){return e(!1,t.toString())}}release(){}};r();var F3=()=>null,Y3=class{getDeviceBrand(){return this.jii?this.jii.brand:null}getDeviceCategory(){return li.Jb||li.tL?this.zii.Client.DeviceCategory.ANDROID_DEVICE:li.nL||li.hL?this.zii.Client.DeviceCategory.APPLE_DEVICE:li.aL?this.zii.Client.DeviceCategory.CHROMECAST:this.zii.Client.DeviceCategory.WEB}getDeviceManufacturer(){return this.jii?this.jii.manufacturer:null}getDeviceModel(){return this.jii?this.jii.model:null}getDeviceVersion(){return this.jii?this.jii.version:null}getDeviceType(){return null}getFrameworkName(){return li.Jb?"THEOplayer AndroidTV SDK":li.tL?"THEOplayer Android SDK":li.nL?"THEOplayer IOS SDK":li.hL?"THEOplayer tvOS SDK":li.aL?"THEOplayer Chromecast SDK":"THEOplayer Web SDK"}release(){}constructor(t,i){this.zii=t,this.jii=i,this.getBrowserName=F3,this.getBrowserVersion=F3,this.getFrameworkVersion=F3,this.getOperatingSystemName=F3,this.getOperatingSystemVersion=F3}};r();var G3=class{consoleLog(t,i){switch(i){case Conviva.SystemSettings.LogLevel.ERROR:return Nu(t);case Conviva.SystemSettings.LogLevel.WARNING:return ji(t);default:return JI(t)}}release(){}};r();var Sc=self.theoplayerDeviceMetadata;r();var V3,W3=class{getPHT(){return-1}getBufferLength(){const t=Ki.xn(this.Qo.L_()),i=this.Qo.z_(),e=t.HB(i);if(e<0)return 0;return ge(t.jn(e)-i)}getSignalStrength(){return 1e3}getRenderedFrameRate(){return-1}constructor(t){this.Qo=t}},H3="conviva";function q3(t){return t&&t.integration===H3}function X3(t){if(t)for(let i of t)if(q3(i))return i}function Z3(t,i){if(!i)return t;if(!t)return i;return P3(i,se(t))}var K3=["emptied","play","pause","playing","waiting","ended","error","readystatechange"],J3=class{get va(){return this.Xa||(this.Xa=function(t){return{get client(){return t.Pii},get contentSessionKey(){return t.Bii},createSession:()=>t.gx(),cleanupSession:()=>t.Rii()}}(this)),this.Xa}get Pii(){return this.Uii}get Bii(){return this.Qii}Fii(){return this.t.hg?this.Yii.PlayerStateManager.PlayerState.PAUSED:this.Gii||this.t.vg<rv.eN?this.Yii.PlayerStateManager.PlayerState.BUFFERING:this.Yii.PlayerStateManager.PlayerState.PLAYING}p$(t){let i=this.Vii;i&&i.getDuration()!==t&&i.setDuration(t)}Wii(t){let i=this.Vii;i&&i.getPlayerState()!==t&&i.setPlayerState(t)}Hii(){this.Gii="none"===this.t.gg||this.t.vg<rv.iN,this.gVt(),this.t.Tg&&this.ZU(),this.qii&&this.Xii()}AWt(){this.Zii&&!this.Zii.manualSessionControl&&(this.gx(),this.t.lQ.eg||this.Kii())}bWt(){this.Vii&&this.Wii(this.Yii.PlayerStateManager.PlayerState.STOPPED),this.Zii&&!this.Zii.manualSessionControl&&this.Rii()}gx(){if(this.Jii&&void 0===this.Qii){let t=this.Uii.getPlayerStateManager();this.Vii=t,t.setPlayerVersion&&t.setPlayerVersion("6.10.1"),this.Qii=this.Uii.createSession(this.Jii),this.Hii(),this.Uii.attachPlayer(this.Qii,this.Vii);const i=new W3(this.t);t.setClientMeasureInterface(i)}}Rii(){this.aQ=!1,this.Gii=!1,this.Vii&&(this.Uii.releasePlayerStateManager(this.Vii),this.Vii=void 0),void 0!==this.Qii&&(this.Uii.cleanupSession(this.Qii),this.Qii=void 0)}$ii(){this.t.yn("durationchange",this.tei),this.t.yn("seeking",this.ZU),this.t.yn("seeked",this.KU),this.t.yn("ended",this.iei),this.t.yn("error",this.q1),this.t.yn("segmentnotfound",this.eei),this.t.yn(["loadstart","waiting"],this.sei),this.t.yn(["emptied","playing"],this.nei),this.t.yn(K3,this.gVt),this.t.Oc&&(this.t.Oc.yn("l7",this.rei),this.t.Oc.yn("u7",this.hei)),s.addEventListener("beforeunload",this.iei),this.oei()}aei(){this.t.fn("durationchange",this.tei),this.t.fn("seeking",this.ZU),this.t.fn("seeked",this.KU),this.t.fn("ended",this.iei),this.t.fn("error",this.q1),this.t.fn("segmentnotfound",this.eei),this.t.fn(["loadstart","waiting"],this.sei),this.t.fn(["emptied","playing"],this.nei),this.t.fn(K3,this.gVt),this.t.Oc&&(this.t.Oc.fn("l7",this.rei),this.t.Oc.fn("u7",this.hei)),this.t.rt.fn(gt.ew,this.oei),this.qii&&(this.qii.fn(Os.Iw,this.Xii),this.qii=void 0),s.removeEventListener("beforeunload",this.iei)}gn(){this.aei(),this.bWt(),this.Rii()}constructor(i,e,s,n){this.t=i,this.Yii=e,this.Uii=s,this.uei=n,this.aQ=!1,this.Gii=!1,this.Jii=void 0,this.Zii=void 0,this.Vii=void 0,this.Qii=void 0,this.qii=void 0,this.rei=t=>{void 0!==this.Bii&&(this.Uii.adStart(this.Bii,function(t){const i=t.Xl.J9().integration;return"theo"===i||"google-ima"===i||"freewheel"===i?Conviva.Client.AdStream.SEPARATE:Conviva.Client.AdStream.CONTENT}(t),this.Yii.Client.AdPlayer.CONTENT,function(t,i){const e=t.Xl.J9().timeOffset;return 0===e?Conviva.Client.AdPosition.PREROLL:-1===e||Ua(e,i,.001)?Conviva.Client.AdPosition.POSTROLL:Conviva.Client.AdPosition.MIDROLL}(t,this.t.Td())),this.Uii.detachPlayer(this.Bii))},this.hei=()=>{void 0!==this.Bii&&void 0!==this.Vii&&(this.Uii.attachPlayer(this.Bii,this.Vii),this.Uii.adEnd(this.Bii))},this.sei=()=>{this.Gii=!0},this.nei=()=>{this.Gii=!1},this.tei=()=>{let t=this.t.Td();j(t)||t===1/0||this.p$(t)},this.iei=()=>{this.bWt()},this.q1=()=>{let t=this.t.Q_();t&&this.Vii&&this.Vii.sendError(t.code+": "+t.message,this.Yii.Client.ErrorSeverity.FATAL),this.bWt()},this.cei=()=>{!this.t.lQ.eg&&this.Vii&&this.Kii()},this.Kii=()=>{var t;null==(t=this.Vii)||t.sendError("A Video Playback Failure has occurred: Waiting for the manifest to come back online",this.Yii.Client.ErrorSeverity.FATAL)},this.eei=()=>{var t;null==(t=this.Vii)||t.sendError("A Video Playback Failure has occurred: Segment not found",this.Yii.Client.ErrorSeverity.FATAL)},this.KU=()=>{var t;this.aQ&&(this.aQ=!1,(null==(t=this.Vii)?void 0:t.setPlayerSeekEnd)&&this.Vii.setPlayerSeekEnd())},this.ZU=()=>{var t;this.aQ||(this.aQ=!0,(null==(t=this.Vii)?void 0:t.setPlayerSeekStart)&&this.Vii.setPlayerSeekStart(-1))},this.do=()=>{this.bWt(),this.Zii=void 0,this.Jii=void 0,this.lei()},this.lei=()=>{if(this.Jii)return;let t=this.t.Wa();if(!t)return;let i=this.t.bt;if(!i)return;let e=function(t){return X3(t.analytics)}(t),s=Z3(e,this.uei);if(!s)return;let n=s.contentMetadata;if(n&&this.Yii){let t=i.src;this.Uii||(this.Uii=function(t,i,e){if(!V3){let s=new i.SystemSettings,n=new i.SystemInterface(new B3,new R3,new U3(e),new Q3,new Y3(i,Sc),new G3),r=new i.SystemFactory(n,s),h=new i.ClientSettings(t.customerKey),o=Ee(t.heartbeatInterval);o>0?h.heartbeatInterval=o:void 0===h.heartbeatInterval&&(h.heartbeatInterval=10);let a=P(t.gatewayUrl);a&&(h.gatewayUrl=a),V3=new i.Client(h,r)}return V3}(s,this.Yii,this.t.KO)),this.Zii=s,this.Jii=function(t,i,e){let s=new e.ContentMetadata;return s.assetName=t.assetName,s.streamUrl=i,s.streamType=function(t,i){return t?i.ContentMetadata.StreamType.LIVE:!1===t?i.ContentMetadata.StreamType.VOD:i.ContentMetadata.StreamType.UNKNOWN}(t.live,e),s.defaultBitrateKbps=t.defaultBitrateKbps,s.defaultResource=t.defaultResource,s.duration=t.duration,s.encodedFrameRate=t.encodedFrameRate,s.applicationName=t.applicationName||"THEOplayer",s.viewerId=t.viewerId||Rs(),s.custom=t.custom,s}(n,t,this.Yii),this.t.hg||this.Zti()}},this.Zti=()=>{this.AWt()},this.Xii=()=>{if(!this.qii||!this.Vii)return;let t=this.qii.Gw;if(t){let i=this.Vii;i.setBitrateKbps(t.Xz/1e3),i.setEncodedFrameRate&&t.Est&&i.setEncodedFrameRate(t.Est),i.setVideoResolutionWidth&&t.ji&&i.setVideoResolutionWidth(t.ji),i.setVideoResolutionHeight&&t.Ti&&i.setVideoResolutionHeight(t.Ti)}},this.oei=()=>{let t=this.t.rt;t&&t.fn(gt.ew,this.oei),t.U?(this.qii=t.jw(0),this.qii.fn(Os.Iw,this.Xii),this.qii.yn(Os.Iw,this.Xii)):t.yn(gt.ew,this.oei)},this.gVt=()=>{this.Wii(this.Fii())},this.t.yn("sourcechange",this.do),this.t.yn("currentsourcechange",this.lei),this.t.yn("play",this.Zti),this.$ii(),this.t.lQ.yn(t.YA,this.cei),this.t.lQ.yn(t.GA,this.cei)}};tr((function(t){return class extends t{gn(){this.A9&&this.A9.gn(),super.gn()}constructor(t,i){super(t,i);const e=s.Conviva;if(e){const t=function(t){return X3(Wv(t).analytics)}(i);this.A9=new J3(this,e,V3,t),this.O9.w9=this.A9}}}}),iu.G9),r(),r();var $3=class extends ha{get va(){return this.Xa||(this.Xa=function(t){let i,e={get status(){return t.TI},get tasks(){return t.k1t},get network(){return t.lQ.va},createTask:(i,e)=>t.dei(i,e),addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new ma(t,e),e}(this)),this.Xa}get TI(){return this.fei.TI}get k1t(){return this.fei.k1t.va}get lQ(){return this.S9}dei(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new b("Unexpected - The source description is undefined");if(s=rl(t),n=q1(i),Uu(s))throw new b("Invalid source description");return this.fei.S1t(s,n).va}constructor(t,i){super(),this.fei=t,this.S9=i,this.fei.yn("I_t",this.Ds)}};var t5=function(){const t=new Cb(ag.KO,!1),i=ti.dL,e=new e4(t),s=new V1(i,e),n=new Ob(t),r=new r1(i.Met,s,"persistent");return new $3(r,n)}().va;function i5(t,i){if("function"==typeof t.getAll){return e5(void 0===i?t.getAll():t.getAll(i))}return function(t){let i=new No,e=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.CL(e),xs()},t.onerror=()=>{i.xL(t.error),xs()},i.OL}(void 0===i?t.openCursor():t.openCursor(i))}function e5(t){return new Promise(((i,e)=>{t.onsuccess=()=>{i(t.result),xs()},t.onerror=()=>{e(t.error),xs()}}))}r(),r(),r(),r(),r(),r(),r();var s5=class{c_(){if(this.ro)try{this.vet.abort(),this.ro=!1}catch(t){}}constructor(t){this.vet=t,this.ro=!0,this.OL=new Promise(((t,i)=>{this.vet.oncomplete=()=>{this.ro=!1,t(),xs()},this.vet.onerror=()=>{this.ro&&(this.ro=!1,i(this.vet.error||new b("Transaction error")),xs())},this.vet.onabort=()=>{this.ro=!1,i(new b("Transaction aborted")),xs()}}))}};async function Rc(t,i,e){const s=new s5(t);try{const[t]=await Promise.all([i(e),s.OL]);return t}catch(t){if(!s.ro)throw new u1("IDBTransaction committed prematurely",t);throw t}finally{s.c_()}}var n5=class{get l(){return this.oit.l}aet(t){return Promise.resolve("persistent"===t)}uet(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(ft(i));return e5(this._ei(ye.Let).put(t))}async cet(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(ft(i));for(const e of t)await this.uet(e,i)}async IL(t){return Boolean(await this.EL(t))}EL(t){return e5(this._ei(ye.bet).get(t))}let(t,i){return e5(this._ei(ye.bet).index(i).get(t))}async tet(t){const i=[];for(let e of t){const t=await this.EL(e);t&&i.push(t)}return i}det(){return i5(this._ei(ye.bet))}fet(t){return i5(this._ei(ye.bet),t)}_et(t,i){return i5(this._ei(ye.bet).index(i),t)}pN(t){return e5(this._ei(ye.Let).delete(t))}async wet(t){for(const i of t)await this.pN(i)}Aet(){return e5(this._ei(ye.Let).clear())}_ei(t){if(!this.gei)throw new b("Lock was released");if(!function(t,i){return t===ye.bet&&i===ye.bet||i===ye.Let}(t,this.gei.mode))throw new b("Incompatible transaction mode: "+this.gei.mode+", expected "+t);return this.gei.objectStore(this.l)}wei(){this.oit.Aei(this),this.gei=void 0}constructor(t,i){this.oit=t,this.gei=i}};var r5=class{aet(t){return Promise.resolve("persistent"===t)}uet(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(ft(i)):this.vet(ye.Let,(i=>i.uet(t)))}cet(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(ft(i)):this.vet(ye.Let,(i=>i.cet(t)))}IL(t){return this.vet(ye.bet,(i=>i.IL(t)))}EL(t){return this.vet(ye.bet,(i=>i.EL(t)))}let(t,i){return this.vet(ye.bet,(e=>e.let(t,i)))}tet(t){return this.vet(ye.bet,(i=>i.tet(t)))}det(){return this.vet(ye.bet,(t=>t.det()))}fet(t){return this.vet(ye.bet,(i=>i.fet(t)))}_et(t,i){return this.vet(ye.bet,(e=>e._et(t,i)))}pN(t){return this.vet(ye.Let,(i=>i.pN(t)))}wet(t){return this.vet(ye.Let,(i=>i.wet(t)))}Aet(){return this.vet(ye.Let,(t=>t.Aet()))}yNt(t){return this.vei(),this.aNt=new n5(this,t),this.aNt}vei(){if(void 0!==this.aNt)throw new b("Already locked")}Aei(t){if(this.aNt!==t)throw new b("Incorrect lock");this.aNt=void 0}nO(t){return this.QH.nO(t)}vet(t,i){return this.nO((()=>this.mei(t,i)))}async mei(t,i){this.vei();const e=this.pei.transaction(this.l,t),s=this.yNt(e);try{return await Rc(e,i,s)}finally{s.wei()}}yei(t){this.vei();const i=this.pei.transaction(this.l,t);return this.yNt(i)}static Mei(t,i){let e;const s=new Promise((t=>{e=t})),n=t.reduce(((t,i)=>t.then((()=>{let t;const e=new Promise((i=>{t=i}));return i.nO((()=>(t(),s))).catch(xs),e}))),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.aNt=void 0,this.QH=new Vi,this.pei=t,this.l=i}};r(),r(),r(),r(),r();var h5={_y:17,Tei:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(l5,{keyPath:"id"}),e.createObjectStore(d5,{keyPath:"key"}),e.createObjectStore(f5,{keyPath:"key"});e.createObjectStore(_5,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(g5,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},o5=class{async Nei(t){for(const i of this.Dei)this.Sei<i._y&&await i.Tei(t)}constructor(t){this.Sei=t}},a5=class extends o5{get Dei(){return[h5]}},u5=new class{Iei(t){this.Eei=t}M8(t){return this.Eei(t)}constructor(){this.Eei=t=>new a5(t)}},c5=18,l5="cachingTask",d5="licences",f5="manifest",_5="segment",g5="segmentMetadata";async function w5(){!function(){if("undefined"==typeof indexedDB)throw new b("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",c5);return t.addEventListener("upgradeneeded",A5),await e5(t)}async function A5(t){const i=t.oldVersion<=c5?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=u5.M8(i),h={database:s,transaction:n};await Rc(n,(t=>r.Nei(t)),h)}var v5=class{static get dL(){return this.Vet||(this.Vet=w5()),this.Vet}};v5.Vet=void 0,r();var m5=class{vet(t){return t(this)}wei(){this.met.wei(),this.pet.wei(),this.yet.wei(),this.Met.wei(),this.Tet.wei()}constructor(t,i){this.met=t.met.yNt(i),this.pet=t.pet.yNt(i),this.yet=t.yet.yNt(i),this.Met=t.Met.yNt(i),this.Tet=t.Tet.yNt(i)}};ti.wa(class t{static async M8(){const i=await v5.dL;return new t(i)}vet(t){const i=this.allCollections;return r5.Mei(i,(()=>this.mei(i,t)))}async mei(t,i){const e=t.map((t=>t.l)),s=this.pei.transaction(e,ye.Let),n=new m5(this,s);try{return await Rc(s,i,n)}finally{n.wei()}}get allCollections(){return[this.pet,this.met,this.yet,this.Met,this.Tet]}constructor(t){this.pei=t,this.met=new r5(t,g5),this.pet=new r5(t,_5),this.yet=new r5(t,f5),this.Met=new r5(t,l5),this.Tet=new r5(t,d5)}}.M8),r(),r(),r();var p5=class{bei(t){const i=this.YV.E_(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){const t=this;return{createAudioSourceNode:i=>t.bei(i)}}constructor(t){this.Xa=void 0,this.YV=t}};tr((function(t){return class extends t{fa(){const t=this.Lei.va;return Ou(super.fa(),{get audio(){return t}})}constructor(t,i){super(t,i),this.Lei=new p5(this.p9)}}}),iu.Za),r(),r();tr((function(t){return class i extends t{ga(t){const e=i.kei(this.wd.analytics),s=i.kei(t?t.analytics:void 0);e||s?this.Cei(oe({},e,s)):this.xei&&this.xei.disable(),super.ga(t)}Cei(t){if(this.xei)this.xei.enable(),this.xei.setOptions(t);else{const i=s.youbora;if(!i)throw new b("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new b("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.va)),this.Oc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.va)),this.xei=e}}static kei(t){if(t){const i=t.filter((t=>"youbora"===t.integration));if(0===i.length)return;if(i.length>1)throw new b("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return yw(e,["integration"])}}gn(){this.xei&&this.xei.disable(),super.gn()}constructor(t,i){super(t,i)}}}),iu.G9),r(),r(),r();var y5=1,M5=0,T5=1e3,N5=class i extends fg{Oei(){const t=this.ct===1/0,i=t?y5:M5,e=t?-1:this.ct,s=Nh(this.Qo.rt.xw,this.jei);this.zei.setPresentationInformation(new this.Pei(i,e,s))}jei(t){const i=[];for(const e of t.Hw.va){const t=e;t.width&&t.height&&i.push({trackIdx:e.id,bitrate:t.bandwidth,width:t.width,height:t.height,codecIdentifier:t.codecs})}return i}Bei(){return this.Qo.z_()*T5}get ct(){return this.Qo.Td()*T5}get Rei(){return this.Uei}get Qei(){return this.Fei}set Qei(t){this.Fei=t,t&&this.zei.reportPlayerState(t)}set Yei(t){this.Gei=t}Vei(){return v((()=>{this.Wei(),this.Hei()}),i.qei)}Xei(){this.Qo.Oc&&(this.Qo.Oc.yn("d7",this.Zei),this.Qo.Oc.yn("f7",this.Kei),this.Qo.Oc.yn("oHt",this.Jei),this.Qo.Oc.yn("IJt",this.$ei)),this.Qo.yn(t.kA,this.iei),this.Qo.yn(Bi.ha,this.q1),this.Qo.yn(t.Sh,this.tsi),this.Qo.yn(t.jh,this.Zti),this.Qo.yn(qo.Tv,this.XU),this.Qo.yn(t.qA,this.eG),this.Qo.yn(t.XA,this.KU),this.Qo.yn(qo.Mv,this.HU),this.Qo.yn(t.JA,this.isi)}esi(){this.Qo.Oc&&(this.Qo.Oc.fn("d7",this.Zei),this.Qo.Oc.fn("f7",this.Kei),this.Qo.Oc.fn("oHt",this.Jei),this.Qo.Oc.fn("IJt",this.$ei)),this.Qo.fn(t.kA,this.iei),this.Qo.fn(Bi.ha,this.q1),this.Qo.fn(t.Sh,this.tsi),this.Qo.fn(t.jh,this.Zti),this.Qo.fn(qo.Tv,this.XU),this.Qo.fn(t.qA,this.eG),this.Qo.fn(t.XA,this.KU),this.Qo.fn(qo.Mv,this.HU),this.Qo.fn(t.JA,this.isi)}gn(){m(this.ssi),this.esi()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.Qo=t,this.Zx=i,this.zei=e,this.nsi=s,this.rsi=n,this.Pei=r,this.hsi=!0,this.Uei=!1,this.Gei=void 0,this.Fei=void 0,this.osi=void 0,this.Zei=t=>{const i=t.o7;i.wGt();var e;e=i.J9().duration;const s="linear"===i.J9().type;i.AGt(),i.fGt();s&&(this.Uei=!0),this.Yei=this.rsi.AD_IMPRESSION,this.Yei=this.rsi.AD_STARTED},this.Kei=t=>{this.Uei=!1,this.Yei=this.rsi.AD_COMPLETED},this.Jei=t=>{t._Qt===Qe.ADBLOCK?this.Yei=this.rsi.AD_BLOCKED:this.Yei=this.rsi.AD_ERROR},this.$ei=()=>{this.Yei=this.rsi.AD_SKIPPED},this.isi=t=>{var i,e,s,n;t.rE===iv.vp&&(this.osi&&t.BQ!==this.osi&&this.zei.reportABRSwitch(this.osi,t.BQ),this.osi=t.BQ,this.zei.reportChunkRequest(new MMChunkInformation(t.Wy,t.BQ,t.fT,t.Qgt.zu,void 0,void 0,null!=(s=null==(i=t.Qgt.hst)?void 0:i[0])?s:0,null!=(n=null==(e=t.Qgt.hst)?void 0:e[1])?n:-1)))},this.iei=t=>{this.Qei=this.nsi.STOPPED,this.Co(t)},this.q1=t=>{this.Qei=this.nsi.ERROR,this.zei.reportError(t.error,this.Bei())},this.tsi=()=>{this.Rei?this.Yei=this.rsi.AD_PAUSED:this.Qei=this.nsi.PAUSED},this.Zti=()=>{this.Rei&&(this.Yei=this.rsi.AD_PLAY)},this.XU=()=>{this.Rei?(this.Gei===this.rsi.AD_PAUSED&&(this.Yei=this.rsi.AD_RESUMED),this.Yei=this.rsi.AD_PLAYING):(this.hsi&&(this.hsi=!1,this.Oei(),this.Qei=this.nsi.STARTED),this.Qei!==this.nsi.PAUSED&&this.Qei!==this.nsi.BUFFERING||(this.Qei=this.nsi.RESUMED))},this.eG=()=>{this.zei.reportPresentationSize(this.Qo.Lg,this.Qo.Sg)},this.KU=t=>{this.Rei||this.Qei!==this.nsi.PAUSED||this.zei.reportPlayerSeekCompleted(t.currentTime*T5)},this.HU=()=>{this.Rei||(this.Qei=this.nsi.BUFFERING)},this.Hei=()=>{this.zei.reportDownloadRate(x.floor(ca.dL.Bz()))},this.Wei=()=>{this.Rei||this.zei.reportPlaybackPosition(this.Bei())},this.Qei=this.nsi.INITIALIZED,this.Xei(),this.ssi=this.Vei()}};N5.qei=2e3,tr((function(i){return class extends i{gn(){super.gn(),this.asi()}constructor(i,e){super(i,e),this.usi=void 0,this.lsi=void 0,this.dsi=()=>{this.lsi=void 0,this.asi();const t=super.Wa();t&&(this.lsi=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.wd)),this.fsi()},this.fsi=()=>{if(!this.usi&&this.lsi&&this.bt&&this.bt.src&&!this.hg){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","6.10.1"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.lsi),this.usi=new N5(this,this.lsi,t),this.usi.yn("ended",this.asi)}},this.asi=()=>{this.usi&&(this.usi.gn(),this.usi=void 0)},this.yn(t.lo,this.dsi),this.yn(t.SA,this.fsi),this.yn(t.jh,this.fsi)}}}),iu.G9),r(),r();var D5=String.fromCharCode(95);var S5=class t{get va(){return this.Xa||(this.Xa=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.Xa}get id(){return this.NN}get adsManager(){return this.e3t}get ids(){return this._si}get adContainer(){return this.SVt}get sendEvent(){return this.gsi}set sendEvent(t){for(let t of this.wsi)this.e3t.removeEventListener(t.type,t.listener);this.wsi=[],this.gsi=t,this.Asi()}get imaSDK(){return!0}vsi(){for(let t in google.ima.AdEvent.Type)this.e3t.addEventListener(google.ima.AdEvent.Type[t],this.msi),this.wsi.push({type:google.ima.AdEvent.Type[t],listener:this.msi})}psi(){Ri(this.wsi);for(let t in google.ima.AdEvent.Type)this.e3t.removeEventListener(google.ima.AdEvent.Type[t],this.msi)}ysi(t){this.ER.push({type:t.type,adVolume:this.adsManager.getVolume()})}Asi(){this.gsi(this.ER),this.ER=[]}static Msi(i){return t.Tsi[i]||i}constructor(i,e,s,n){this.msi=i=>{this.ysi({type:t.Msi(i.type)})},this.NN=i,this.e3t=e,this._si=s,this.SVt=n,this.wsi=[],this.ER=[]}};S5.Tsi={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstquartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdquartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var I5=class{Nsi(t,i){this.Dsi=h.createElement("script"),this.Dsi.id=t.id,this.Dsi.type="text/javascript",t.adContainer.appendChild(this.Dsi),this.Dsi.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.Ssi=t.id,s[this.Ssi]=t.va}Isi(){this.Dsi&&ei(this.Dsi),this.Ssi&&(s[this.Ssi]=void 0)}constructor(){this.Dsi=void 0,this.Ssi=void 0}};tr((function(t){return class i extends t{ga(t){var e,s,n;this.Esi(),null==(e=this.bsi)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Lsi),null==(s=this.bsi)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Esi),null==(n=this.bsi)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.ksi),this.bsi=void 0,this.SVt=void 0,super.ga(t);const r=t&&t.analytics;this.Csi=i.xsi(r);this.Oc&&this.Csi&&L0()&&this.Osi()}gn(){var t,i,e;this.Esi(),null==(t=this.bsi)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Lsi),null==(i=this.bsi)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Esi),null==(e=this.bsi)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.ksi),this.bsi=void 0,this.SVt=void 0,this.Oc&&this.Oc.fn("y$t",this.M$t),super.gn()}Osi(){this.Oc&&this.Oc.yn("y$t",this.M$t)}jsi(t,i,e){const s=D5+"moatApi"+x.floor(1e8*x.random());this.zsi=new S5(s,t,i,e),this.zsi.vsi(),this.Psi.Nsi(this.zsi,this.Csi.partnerCode)}static xsi(t){if(t){const i=t.filter((t=>"moat"===t.integration));if(0===i.length)return;if(i.length>1)throw new b("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.Csi=void 0,this.zsi=void 0,this.bsi=void 0,this.SVt=void 0,this.ksi=()=>{this.jsi(this.bsi,{partnerCode:this.Csi.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.SVt)},this.M$t=t=>{this.bsi=t.i3t,this.SVt=t.r0t,this.Esi(),this.bsi.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.Lsi),this.bsi.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Esi),this.bsi.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.ksi)},this.Lsi=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.Esi(),this.ksi())},this.Esi=()=>{this.zsi&&(this.zsi.psi(),this.zsi=void 0),this.Psi.Isi()},this.Psi=new I5}}}),iu.G9),r(),r(),r();var ct,vu=class extends gg{constructor(t,i,e){super(t,new Date),this.Bsi=i,this.o7=e}};!function(t){t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete"}(ct||(ct={}));var E5=class extends vu{constructor(t,i){super("DAILoaded",t,i)}},b5=class extends vu{constructor(t,i){super("DAIAdBreakStarted",t,i)}},L5=class extends vu{constructor(t,i){super("DAIAdBreakEnded",t,i)}},k5=class extends vu{constructor(t,i){super("DAIAdProgress",t,i)}},C5=class extends vu{constructor(t,i){super("DAICuePointsChanged",t,i)}},x5=class extends vu{constructor(t,i){super("DAIClick",t,i)}},O5=class extends vu{constructor(t,i){super("DAIError",t,i)}},j5=class extends vu{constructor(t,i){super("DAIStarted",t,i)}},z5=class extends vu{constructor(t,i){super("DAIFirstQuartile",t,i)}},P5=class extends vu{constructor(t,i){super("DAIMidpoint",t,i)}},B5=class extends vu{constructor(t,i){super("DAIStreamInitialized",t,i)}},R5=class extends vu{constructor(t,i){super("DAIThirdQuartile",t,i)}},U5=class extends vu{constructor(t,i){super("DAIComplete",t,i)}};var Q5=class extends i{replaceAdTagParameters(t){return this.Rsi.replaceAdTagParameters(null!=t?t:null)}Usi(t){return this.Rsi.contentTimeForStreamTime(t)}Qsi(t){return this.Rsi.streamTimeForContentTime(t)}$kt(t,i){const e=function(t){let i;"vod"===t.availabilityType?(i=new s.google.ima.dai.api.VODStreamRequest,i.contentSourceId=t.contentSourceID,i.videoId=t.videoID):"live"===t.availabilityType&&(i=new s.google.ima.dai.api.LiveStreamRequest,i.assetKey=t.assetKey);const e=google.ima.dai.api.StreamRequest.StreamFormat;var n;return i.format="dash"===t.format?e.DASH:e.HLS,i.apiKey=t.apiKey,i.adTagParameters=t.adTagParameters,i.omidAccessModeRules=null!=(n=$$(t.omidAccessModeRules))?n:{},i}(t);this.Rsi.requestStream(e)}Zn(){this.Fsi(!1),this.Rsi.reset()}gn(){this.Vo();const t=google.ima.dai.api.StreamEvent.Type;this.Rsi.removeEventListener(t.AD_BREAK_STARTED,this.Ysi),this.Rsi.removeEventListener(t.AD_PROGRESS,this.Gsi),this.Rsi.removeEventListener(t.CLICK,this.$Gt),this.Rsi.removeEventListener(t.COMPLETE,this.Vsi),this.Rsi.removeEventListener(t.CUEPOINTS_CHANGED,this.Wsi),this.Rsi.removeEventListener(t.ERROR,this.Ss),this.Rsi.removeEventListener(t.FIRST_QUARTILE,this.Hsi),this.Rsi.removeEventListener(t.LOADED,this.qsi),this.Rsi.removeEventListener(t.MIDPOINT,this.Xsi),this.Rsi.removeEventListener(t.STARTED,this.Zsi),this.Rsi.removeEventListener(t.STREAM_INITIALIZED,this.Ksi),this.Rsi.removeEventListener(t.THIRD_QUARTILE,this.Jsi),this.Rsi.removeEventListener(t.AD_BREAK_ENDED,this.$si),this.Zn()}tni(t){this.Rsi.onTimedMetadata(t)}ini(t,i,e){this.Rsi.processMetadata(t,i,e)}eni(t){const i=this.Rsi.previousCuePointForStreamTime(t);if(i)return{PN:i.end,zN:i.start,fg:i.played}}sni(t){const i=this.eni(t),e=i&&!i.fg?i.zN:void 0;return Promise.resolve(e)}Fsi(t){this.EVt.style.display=t?"block":"none"}constructor(t,i){super(),this.Rsi=t,this.EVt=i,this.Ysi=t=>{this.Fsi(!0);const i=ht(t),e=ri(t);this.Co(new b5(i,e))},this.$si=t=>{this.Fsi(!1);const i=ht(t),e=ri(t);this.Co(new L5(i,e))},this.Gsi=t=>{const i=ht(t),e=ri(t);this.Co(new k5(i,e))},this.$Gt=t=>{const i=ht(t),e=ri(t);this.Co(new x5(i,e))},this.Vsi=t=>{const i=ht(t),e=ri(t);this.Co(new U5(i,e))},this.Wsi=t=>{const i=ht(t),e=ri(t);this.Co(new C5(i,e))},this.Ss=t=>{const i=ht(t),e=ri(t);this.Co(new O5(i,e))},this.Hsi=t=>{const i=ht(t),e=ri(t);this.Co(new z5(i,e))},this.qsi=t=>{const i=ht(t),e=ri(t);this.Co(new E5(i,e))},this.Xsi=t=>{const i=ht(t),e=ri(t);this.Co(new P5(i,e))},this.Zsi=t=>{const i=ht(t),e=ri(t);this.Co(new j5(i,e))},this.Ksi=t=>{const i=ht(t),e=ri(t);this.Co(new B5(i,e))},this.Jsi=t=>{const i=ht(t),e=ri(t);this.Co(new R5(i,e))},this.EVt.style.display="none",this.Rsi.setClickElement(this.EVt);const e=google.ima.dai.api.StreamEvent.Type;this.Rsi.addEventListener(e.AD_BREAK_STARTED,this.Ysi),this.Rsi.addEventListener(e.AD_PROGRESS,this.Gsi),this.Rsi.addEventListener(e.CLICK,this.$Gt),this.Rsi.addEventListener(e.COMPLETE,this.Vsi),this.Rsi.addEventListener(e.CUEPOINTS_CHANGED,this.Wsi),this.Rsi.addEventListener(e.ERROR,this.Ss),this.Rsi.addEventListener(e.FIRST_QUARTILE,this.Hsi),this.Rsi.addEventListener(e.LOADED,this.qsi),this.Rsi.addEventListener(e.MIDPOINT,this.Xsi),this.Rsi.addEventListener(e.STARTED,this.Zsi),this.Rsi.addEventListener(e.STREAM_INITIALIZED,this.Ksi),this.Rsi.addEventListener(e.THIRD_QUARTILE,this.Jsi),this.Rsi.addEventListener(e.AD_BREAK_ENDED,this.$si)}};function ht(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={uXt:e.adBreakDuration,nni:e.duration,cXt:e.adPosition,j_:e.currentTime,ct:e.duration,lXt:e.totalAds});return{rni:s,hni:(i.cuepoints||[]).map((t=>({zN:t.start,PN:t.end,fg:t.played}))),oni:i.errorMessage||void 0,ani:i.manifestFormat||void 0,uni:i.streamId||void 0,cni:(i.subtitles||[]).map((t=>({lni:t.webvtt,dni:t.ttml,gs:t.language}))),zu:i.url}}function F5(t){return{RRt:t.getAdSlotId(),O:t.getContent(),IP:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function ri(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(F5);return{dUt:i.getAdId(),aKt:{cXt:e.getAdPosition(),ZYt:e.getMaxDuration(),W2t:e.getPodIndex(),_Et:e.getTimeOffset(),lXt:e.getTotalAds()},HBt:i.getAdSystem(),q2t:i.getAdvertiserName(),PRt:i.getApiFramework(),eRt:s,vRt:i.getCreativeId(),dJt:i.getCreativeAdId(),X2t:i.getDealId(),nM:i.getDescription(),ct:i.getDuration(),kP:i.getTitle(),fni:i.getUniversalAdIdRegistry(),_ni:i.getUniversalAdIdValue(),rJt:i.getVastMediaHeight(),nJt:i.getVastMediaWidth(),tJt:i.getWrapperAdIds(),iJt:i.getWrapperAdSystems(),eJt:i.getWrapperCreativeIds()}}r(),r(),r();var Y5="theo-dai-clickthrough",G5="urn:google:dai:2018",V5=class{get va(){const t=this,i=this.gni;return{contentTimeForStreamTime:i=>t.Rsi?t.Rsi.Usi(i):i,streamTimeForContentTime:i=>t.Rsi?t.Rsi.Qsi(i):i,replaceAdTagParameters(i){t.Rsi&&t.Rsi.replaceAdTagParameters(i)},get snapback(){return t.wni},set snapback(i){t.wni=i},get sourceTransformer(){return i.Ani},set sourceTransformer(t){i.Ani=t}}}P_(t){this.h2.c_(),this.h2=new Po,W(this.vni(t,this.h2.a_))}async vni(t,i){if(Pi(i),!this.mni||!this.Rsi)return this.Qo.pni(t);if(this.mni.t7)return;if(t>this.Qo.z_()&&this.wni){const e=await hl(this.Rsi.sni(t),i);if(e){this.Qo.pni(e),await this.Rsi.D_(ct.AD_BREAK_ENDED,i);if(this.Rsi.eni(t).PN>t)return}}this.Qo.pni(t)}Mg(){const t=this.mni&&this.mni.t7;if(t){const i=Ki.xn(this.Qo.yni()),e=t._Et,s=e+t.ZYt,n=new Ki([e,s]);return i.Sn(n).ks()}return this.Qo.yni()}async D7(t,i){if(!t)return this.Qo.Mni(t,i);try{this.Qo.nt.yn(gt.ew,this.Tni);const e=await this.gni.Nni(t,i);this.mni&&this.Rsi&&(this.Dni=!0),await this.Qo.Mni(e,i)}catch(t){if(yo(t),t.code===Zv.LICENSE_INVALID)return;const i=new ce(le.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.vP=ne(i),this.mP=i,this.Qo.Co(new me(i)),i}}Zn(){if(this.Dni){if(this.Qo.nt.fn(gt.ew,this.Tni),this.Sni){this.Sni.fn(Os.aw,this.Ini);for(const t of this.Sni.L.xw)t.fn(Sl.xN,this.j3t);this.Sni=void 0}this.vP=void 0,this.mP=void 0,this.h2.c_(),this.mni&&this.mni.Zn(),this.Rsi&&this.Rsi.Zn(),this.Dni=!1}}get lt(){return this.vP||this.Qo.Eni()}get F_(){return this.mP||this.Qo.bni()}gn(){this.Zn(),this.Qo.Lni(),this.Rsi&&this.Rsi.gn()}constructor(t,i,e,s){this.Sni=void 0,this.vP=void 0,this.mP=void 0,this.h2=new Po,this.Dni=!1,this.wni=!0,this.Tni=t=>{const i=t.Lt;i.zt===Pt.Mp&&(i.hA===Ks.ID3||i.hA===Ks.EVENT_STREAM&&i.iA===G5)&&(i.eA=Ht.sA,this.Sni=i,i.yn(Os.aw,this.Ini))},this.Ini=t=>{t.jN.yn(Sl.xN,this.j3t)},this.j3t=t=>{var i,e;if(this.Rsi)if((null==(i=this.Sni)?void 0:i.hA)===Ks.ID3){const i=t.jN.O;"TXXX"===i.id&&this.Rsi.tni({TXXX:i.text})}else if((null==(e=this.Sni)?void 0:e.hA)===Ks.EVENT_STREAM){const i=t.jN.O;this.Rsi.ini(G5,i,t.sS)}},this.Qo=t,this.Rsi=i,this.mni=e,this.gni=s,e&&i&&this.Qo.Oc&&this.Qo.Oc.w7(e.vJt)}};r(),r();var W5=class extends e0{get kni(){return this.Cni}get XYt(){return eh.so}constructor(t,i,e,s=!0){super(t,i,e),this.Cni=s}},H5=class extends l0{xni(){const t=[ct.STARTED,ct.FIRST_QUARTILE,ct.MIDPOINT,ct.THIRD_QUARTILE,ct.COMPLETE];this.Rsi.yn(t,this.Oni),this.Rsi.yn(ct.AD_BREAK_ENDED,this.$si),this.Rsi.yn(ct.AD_PROGRESS,this.Gsi),this.Rsi.yn(ct.CUEPOINTS_CHANGED,this.Wsi)}get lHt(){return this.pJt}get iHt(){return this.THt}jni(t){let i=t.aKt._Et,e=this.pGt||this.findAdBreakWithPredicate(i,(t=>!t.fg));if(!e){const s=t.aKt.ZYt;i=this.Qo.z_(),e=new W5(s,s,i,!1),e.PKt(),this.yGt.push(e)}return e}zni(t){switch(t){case ct.STARTED:this.pJt=!0;break;case ct.AD_BREAK_ENDED:this.pJt=!1}}Pni(t,i,e){if(i)switch(t){case ct.STARTED:case ct.FIRST_QUARTILE:case ct.MIDPOINT:case ct.THIRD_QUARTILE:case ct.COMPLETE:this.iHt.Co(new ka(this.pGt))}if(e)switch(t){case ct.STARTED:case ct.FIRST_QUARTILE:case ct.MIDPOINT:case ct.THIRD_QUARTILE:case ct.COMPLETE:this.iHt.Co(new tu(this._Gt,this._Gt.ZKt))}switch(t){case ct.COMPLETE:this.iHt.Co(new fa(this._Gt,this.AJt.ZKt));break;case ct.AD_BREAK_ENDED:this.iHt.Co(new Bh(this.t7))}switch(t){case ct.FIRST_QUARTILE:this.iHt.Co(new _0(this._Gt,this.AJt.ZKt));break;case ct.MIDPOINT:this.iHt.Co(new ar(this._Gt,this.AJt.ZKt));break;case ct.THIRD_QUARTILE:this.iHt.Co(new A0(this._Gt,this.AJt.ZKt))}}Bni(t){const i=t.o7,e=this.jni(i),s=function(t,i){if(t.Oc.length)return!1;for(let e=0;e<i;e++){const i=new o0(t,Ur.TQt);t.RKt(i)}return!0}(e,i.aKt.lXt),n=function(t,i){const e=i.aKt.cXt-1;return t.Oc[e]}(e,i),r=function(t,i){return t.GKt!==i0.READY&&(t.sJt(i),!0)}(n,i);this._Gt=n,this.pGt=e,e.PKt(),this.Pni(t.type,s,r)}Rni(t){for(const i of this.yGt)if(U_(t,i._Et))return i}findAdBreakWithPredicate(t,i){for(const e of this.yGt)if(U_(e._Et,t)&&i(e))return e}get Uni(){const t=this.findAdBreakWithPredicate(0,(t=>t.kni));let i=0;return t&&(i=t.ZYt),i}Qni(t,i){let e;for(const s of this.yGt)s._Et>=t&&s._Et<=i&&!s.fg&&(!e||s._Et>=e._Et)&&(e=s);return e}Yp(){}g7(t){}Zn(){this._Gt&&(this.iHt.Co(new fa(this._Gt,this._Gt.ZKt)),this._Gt=void 0),this.pGt&&(this.iHt.Co(new Bh(this.pGt)),this.pGt=void 0),this.pJt=!1,Ri(this.yGt)}gn(){this.Zn(),this.iHt.gn()}constructor(t,i){super(new hI,eh.so),this.Rsi=t,this.Qo=i,this.Gsi=t=>{const i=this.pGt;if(!i||!this._Gt)return;const e=t.Bsi.rni;this._Gt.ZKt=e.j_,function(t,i){const e=i.cXt,s=i.uXt,n=i.j_;var r;const h=So(t.Oc.slice(0,e-1),(t=>null!=(r=t.ct)?r:0));t.KYt=s-n-h}(i,e)},this.Wsi=t=>{const i=t.Bsi.hni;if(i)for(const t of i)if(!this.Rni(t.zN)){const i=t.PN-t.zN,e=new W5(i,i,t.zN,!0);this.yGt.push(e)}},this.Oni=t=>{this.zni(t.type),this.Bni(t)},this.$si=t=>{this.pJt=!1,this._Gt=void 0;const i=this.t7;i&&(i.KYt=0,this.Pni(t.type,!1,!1),this.pGt=void 0)},this.xni()}};function q5(t){if(t.sources)if(Yn(t.sources)){for(const i of t.sources)if(Aa(i))return!0}else if(lt(t.sources))return Aa(t.sources);return!1}r();var X5=class{async Nni(t,i){const e=[],s=[];for(const i of t.sources)if(Aa(i)){if(!this.Rsi)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{yc:h}=await Je.dL.yB(e,t),o=h;Pi(i);try{n=await this.Fni(o,i),s.push(n)}catch(t){yo(t),r=t,Et(e,o)}}if(0!==t.sources.length&&0===s.length)throw new b("Fatal: unable to play DAI streams.");return r&&ji(r.message),oe({},t,{sources:s})}async Fni(t,i){if(!this.Rsi)throw new b("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.Rsi.D_(ct.LOADED,i),s=this.Rsi.D_(ct.ERROR,i),n=t.type===vi.Qv?"dash":"hls";this.Rsi.$kt(oe({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===ct.LOADED){const i=t.type===vi.Qv?vi.Qv:vi.Yv;return Av(oe({},t,{src:this.Ani?await this.Ani(r.Bsi.zu||""):r.Bsi.zu,type:i}))}throw b(r.Bsi.oni)}constructor(t){this.Rsi=t,this.Ani=t=>t}};tr(function(t){return i=>class extends i{fa(){const t=super.fa(),i=t.ads;if(i){const t=this.Yni.va;Ou(i,{get dai(){return t}})}return t}get Ul(){return this.Gni}pni(t){super.P_(t)}P_(t){this.Yni.P_(t)}yni(){return super.Mg()}Mg(){return this.Yni.Mg()}ga(t){return this.Yni.Zn(),super.ga(t)}async Mni(t,i){return super.D7(t,i)}async D7(t,i){return this.Yni.D7(t,i)}Eni(){return super.Q_()}bni(){return super.Y_()}Q_(){return this.Yni.lt}Y_(){return this.Yni.F_}Lni(){super.gn()}gn(){this.Yni.gn()}constructor(i,e){super(i,e),this.Gni=!1,this.Vni=t=>{13===t.which&&this.EVt.click(),this.Gg()};const s=this.Ug();let n,r;try{this.EVt=h.createElement("button"),this.EVt.className=Y5,this.EVt.addEventListener("keydown",this.Vni),this.EVt.addEventListener("click",this.Vni),n=t(s,this.EVt),r=new H5(n,this),this.we.appendChild(this.EVt),this.Gni=!0}catch(t){}const o=new X5(n);this.Yni=new V5(this,n,r,o)}}}((function(t,i){if(!(s.google&&s.google.ima&&lt(s.google.ima.dai)))throw new b("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=new google.ima.dai.api.StreamManager(t);return new Q5(e,i)})),iu.F9),r(),r(),r();var Z5=class{get Wni(){return void 0===this.Hni?0:(performance.now()-this.Hni)/1e3}qni(t){this.Xni=t,this.Kni.Zni(t),this.Qo.yn("play",this.Zti),this.Qo.yn("ended",this.iei),this.Qo.yn("timeupdate",this.Jni),this.Qo.yn("error",this.q1),this.Qo.yn("waiting",this.sei),this.Qo.yn(["canplay","canplaythrough","playing"],this.nei),this.Qo.yn("durationchange",this.tei),ps.zY(this.$ni)}tri(){this.Qo.fn("play",this.Zti),this.Qo.fn("ended",this.iei),this.Qo.fn("timeupdate",this.Jni),this.Qo.fn("error",this.q1),this.Qo.fn("waiting",this.sei),this.Qo.fn(["canplay","canplaythrough","playing"],this.nei),this.Qo.fn("durationchange",this.tei),ps.CY(this.$ni),this.iri||(this.Kni.eri(this.sri),this.Kni.nri()),this.rri&&this.hri(),this.Xni=void 0,this.ari=!1,this.iri=!1,this.sri=-1/0,Ri(this.cri)}lri(){this.ari&&this.Kni.dri(),this.Hni=performance.now(),this.fri=v(this._ri,6e4)}hri(){this.Kni.gri(this.Wni),this.rri=!1,this.Hni=void 0,this.fri&&(m(this.fri),this.fri=void 0)}wri(){if(j(this.Qo.Td()))return;const t=10*function(t,i){return x.floor(t/i)}(this.Qo.z_()/this.Qo.Td()*100,10);na(this.cri,t)||(this.cri.push(t),this.Kni.Ari(t))}constructor(t,i){this.Qo=t,this.Kni=i,this.ari=!1,this.iri=!1,this.cri=[],this.sri=-1/0,this.rri=!1,this.Zti=()=>{this.ari||(this.Kni.vri(),this.rri&&this.Kni.dri(),this.ari=!0)},this.iei=()=>{this.Kni.pri(),this.iri=!0},this.Jni=()=>{this.sri<this.Qo.z_()&&(this.sri=this.Qo.z_()),this.wri()},this.sei=()=>{this.ari&&(this.yri=performance.now(),this.Kni.Mri(this.Qo.z_()))},this.nei=()=>{this.yri&&(this.Kni.Tri((performance.now()-this.yri)/1e3),this.yri=void 0)},this.q1=()=>{this.sri<this.Qo.z_()&&(this.sri=this.Qo.z_()),this.Kni.Cit(this.Qo.lt.message)},this.tei=()=>{const t=this.Qo.Td()===1/0;t&&!this.rri&&(this.rri=t,this.lri())},this.$ni=()=>{this.Kni.eri(this.sri),this.Kni.Nri()},this._ri=()=>{void 0!==this.Hni&&this.Kni.Dri(this.Wni)}}};r();var K5=class{Zni(t){this.Sri(["setDocumentTitle",t.itemTitle]),this.Sri(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.Sri(["trackPageView"])}vri(){this.Iri("item first play","viewing","1")}nri(){this.Iri("item skipped","skipped","1")}Ari(t){this.Iri("item progress","percent",""+t)}Nri(){this.Iri("item abandoned","window closed","1")}eri(t){this.Iri("item time","watched",""+t)}pri(){this.Iri("item finished","ended","1")}Mri(t){this.Iri("buffering started","timestamp",""+t)}Tri(t){this.Iri("buffering ended","duration",""+t)}Cit(t){this.Iri("error","message",""+t)}dri(){this.Iri("livestream first play","viewing","1")}Dri(t){this.Iri("livestream progress","duration",""+t)}gri(t){this.Iri("livestream time","watched",""+t)}Iri(t,i,e){this.Sri(["trackEvent","Video",t,i,e])}Sri(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}};r();var J5=class{get Eri(){if(!this.bri)return;const t=this.Qo.z_()/this.bri;return x.floor(4*t)+1}get Lri(){return void 0!==this.bri}qni(){this.Ic.yn("d7",this.Zei),this.Ic.yn("f7",this.Kei),this.Ic.yn("IJt",this.$ei),this.Ic.yn("oHt",this.Jei),this.Qo.yn("timeupdate",this.Jni),ps.zY(this.$ni)}tri(){this.Ic.fn("d7",this.Zei),this.Ic.fn("f7",this.Kei),this.Ic.fn("IJt",this.$ei),this.Ic.fn("oHt",this.Jei),this.Qo.fn("timeupdate",this.Jni),Ri(this.kri),ps.CY(this.$ni),this.bri=void 0}constructor(t,i,e){this.Qo=t,this.Ic=i,this.Kni=e,this.kri=[],this.Zei=()=>{this.bri=this.Qo.Td(),this.Kni.Cri(this.bri)},this.Kei=()=>{this.bri&&(this.Kni.xri(this.bri),Ri(this.kri),this.bri=void 0)},this.$ei=t=>{if(!this.bri)return;const i=this.bri-this.bri*t.DJt;this.Kni.Ori(i),this.bri=void 0},this.Jei=()=>{this.bri=this.Qo.Td(),this.Kni.jri()},this.Jni=()=>{const t=this.Eri;if(this.Lri&&t&&!na(this.kri,t)){switch(t){case 1:this.Kni.zri();break;case 2:this.Kni.Pri();break;case 3:this.Kni.Bri();break;case 4:this.Kni.Rri()}this.kri.push(t)}},this.$ni=()=>{this.Kni.Uri()}}};r();var $5=class{Cri(t){this.Kni.Iri("ad start","duration",""+t)}xri(t){this.Kni.Iri("ad finished","duration",""+t)}Ori(t){this.Kni.Iri("ad skipped","remaining time",""+t)}jri(){this.Kni.Iri("ad blocker","detected","1")}zri(){this.Kni.Iri("ad progress","firstQuartile","")}Pri(){this.Kni.Iri("ad progress","secondQuartile","")}Bri(){this.Kni.Iri("ad progress","thirdQuartile","")}Rri(){this.Kni.Iri("ad progress","fourthQuartile","")}Uri(){this.Kni.Iri("ad abandoned","window closed","1")}constructor(t){this.Kni=t}};function t6(t){return t&&"streamone"===t.integration}tr((function(t){return class extends t{gn(){this.fn("sourcechange",this.do),this.Qri&&(this.Fri&&this.Fri.tri(),this.Yri&&this.Yri.tri(),this.Qri=!1),super.gn()}constructor(t,i){super(t,i),this.Qri=!1,this.do=()=>{this.Qri&&(this.Fri.tri(),this.Yri&&this.Yri.tri());const t=this.Wa();if(this.Qri=!1,!t)return;const i=function(t){if(t.analytics)for(let i of t.analytics)if(t6(i))return i}(t);i&&(this.Qri=!0,this.Fri.qni(i),this.Yri&&this.Yri.qni())};const e=new K5;if(this.Fri=new Z5(this,e),this.Oc){const t=new $5(e);this.Yri=new J5(this,this.Oc,t)}this.yn("sourcechange",this.do)}}}),iu.G9),r(),r(),r(),r(),r(),r();var i6=class extends GW{async BK(t,i,e){const s=await e6(t);await super.BK(s,i,e),this.Gri(s,i)}async jK(t,i,e){const s=await e6(t);await super.jK(s,i,e),this.Gri(s,i)}Gri(t,i){const e=this.Wri.Vri;if(void 0===e)return;const s=i.cK;let n;if(this.Hri!==s&&(this.Hri=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return tl.call(t,"p8")}(i)){const t=i.p8,r=i.p8+i.ct;n=i.CS,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.Cp,"video",s,n)}async pN(t,i,e){var s;await super.pN(t,i,e),null==(s=this.Wri.Vri)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.Wri=i,this.Hri=void 0}};async function e6(t){switch(t.hA){case at.bH:return t;case at.zI:{const i=await qt(t.Cp);return{hA:at.bH,Cp:new T(i)}}case at.LH:throw new b("Opaque initialization segments are not supported on web.")}}var s6=class extends ut{QTt(t){return t.TJ===iv.vp?new i6(t,this.Wri):new GW(t)}constructor(t,i){super(t),this.Wri=i,this.RTt(t)}},n6=class extends An{get Vri(){return this.qri}Xri(){this.qri=new LcevcDil.LcevcDil(this.gP.pP,this.Zri,{})}ge(){super.ge(),this.Kri()}be(){super.be(),this.Zri.style.display="none"}Zn(){return this.Zri.style.display="none",void 0!==this.qri&&(this.qri.close(),this.Xri()),super.Zn()}e_(){return this.Jri=!0,void 0!==this.qri&&(this.qri.close(),this.qri=void 0),this.pu.removeChild(this.Zri),super.e_()}hB(t){this.Co(new Wk(new lc(Zv.ABORTED,t)))}Kri(){this.gP.pP.style.display="none",this.Zri.style.display="block"}get TTt(){return this.gP}jTt(t){return new s6(t,this)}OTt(t){return new Jt(t)}constructor(t,i){super(t),this.Jri=!1,this.$ri=t=>{this.Jri||(t||this.hB("LCEVC SDK failed to initialize."),this.Xri())},this.thi=()=>{this.Jri||this.hB("LCEVC SDK failed to initialize.")},this.pu=i,this.Zri=h.createElement("canvas"),this.Zri.style.width="100%",this.Zri.style.height="100%",this.Zri.style.position="absolute",this.Zri.style.top="50%",this.Zri.style.left="50%",this.Zri.style.transform="translate(-50%, -50%)",this.Zri.style.display="none",this.pu.appendChild(this.Zri),LcevcDil.ready.then(this.$ri,this.thi)}},r6=class extends xt{oB(t){if(t===iv.vp)return this.ihi=new n6(super.oB(t),this.pu),this.ihi}async YP(t){this.ihi=void 0;const i=t;await i.e_(),await super.YP(i.TTt)}get ehi(){return this.ihi}constructor(t,i){super(t),this.pu=i}},h6=class extends ZW{async gn(){for(const t of this.hN.xw)t.fn(Os.Iw,this.shi);this.rt.fn(gt.ew,this.nhi),this.rt.fn(gt.hw,this.rhi),await super.gn(),await this.gP.e_(),await this.GP.YP(this.gP)}constructor(t,i,e,s,n,r,h){const o=new r6(n,h),a=new Oc(o);super(t,i,e,s,a.oB(r),h),this.nhi=t=>{t.Lt.yn(Os.Iw,this.shi)},this.rhi=t=>{t.Lt.fn(Os.Iw,this.shi)},this.shi=t=>{var i;const e=null==(i=this.hhi.ehi)?void 0:i.Vri,s=t.Jnt.Vw;null==e||e.setCurrentLevel(s)},this.GP=a,this.hhi=o,this.hN.yn(gt.ew,this.nhi),this.hN.yn(gt.hw,this.rhi)}};bu(new class extends fU{_m(t,i,e,s,n,r){const h=new St(ti.dL.yet,ti.dL.met,ti.dL.pet,ti.dL.Tet);let o=i;return Ln.Px()&&(o=new Ln(o)),new h6(e,s,n,h,o,iv.vp,t)}async aB(t){if(!t.lcevc)return!1;if(!await super.aB(t))return!1;if(void 0===s.LcevcDil)throw new ce(le.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}uB(){return!1}constructor(...t){super(...t),this.cB=Kt.Rz}}),r();var o6,a6=class extends aK{async gn(){for(const t of this.hN.xw)t.fn(Os.Iw,this.shi);this.rt.fn(gt.ew,this.nhi),this.rt.fn(gt.hw,this.rhi),await super.gn(),await this.GP.YP(this.gP)}constructor(t,i,e,s,n,r,h,o){const a=new r6(i,t),u=new Oc(a);super(u.oB(iv.vp),e,s,n,r,h,o),this.nhi=t=>{t.Lt.yn(Os.Iw,this.shi)},this.rhi=t=>{t.Lt.fn(Os.Iw,this.shi)},this.shi=t=>{var i;const e=null==(i=this.hhi.ehi)?void 0:i.Vri,s=t.Jnt.FDt.Vw;null==e||e.setCurrentLevel(s)},this.GP=u,this.hhi=a,this.hN.yn(gt.ew,this.nhi),this.hN.yn(gt.hw,this.rhi)}};bu(new class extends cK{_m(t,i,e,s,n,r){return new a6(t,i,e,n,UZ(s.libraryLocation),new oK(s.libraryLocation),new St(ti.dL.yet,ti.dL.met,ti.dL.pet,ti.dL.Tet),s)}async aB(t,i){if(!t.lcevc)return!1;if(!await super.aB(t,i))return!1;if(void 0===s.LcevcDil)throw new ce(le.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}uB(){return!1}constructor(...t){super(...t),this.cB=Kt.Yz}}),r(),r(),r(),r(),function(t){t.ohi="Zn",t.ahi="uhi"}(o6||(o6={}));var u6="freewheel-nonlinear-ad",c6=[t.EA,t.ov,t.uv,t.Sh,qo.Tv,t.jh],l6=class i extends F${Yg(){this.GP.wR()}lhi(){this.dhi.yn("l7",this.fhi),this.dhi.yn(["d7","f7"],this._hi),this.dhi.yn("u7",this.m2t)}ghi(){this.dhi.fn("l7",this.fhi),this.dhi.fn(["d7","f7"],this._hi),this.dhi.fn("u7",this.m2t)}whi(){this.iHt.Qa(this.dhi.Ahi)}vhi(){this.dhi.mhi.yn(c6,this.Ds)}phi(){this.dhi.mhi.fn(c6,this.Ds)}get $Wt(){return this}static get KWt(){return eh.WYt}get KWt(){return i.KWt}get t7(){var t;return null!=(t=this.dhi.Ahi.t7)?t:null}get K9(){const t=this.dhi.Ahi.AJt;return t?[t]:[]}g7(t){}z_(){return this.dhi.mhi.j_}P_(t){}Td(){return this.dhi.mhi.ct}U_(){return this.dhi.mhi.R_}Q_(){return this.vP}Y_(){return this.mP}Ig(){return 0}Cg(){return 0}Og(){return this.dhi.mhi.xg}jg(t){this.dhi.mhi.xg=t}K_(){return this.dhi.mhi.Z_}J_(t){this.dhi.mhi.Z_=t}pg(){return this.dhi.mhi.vg}get i7(){return this.dhi.Ahi.i7}get e7(){return this.dhi.Ahi.e7}Mg(){return this.dhi.mhi.yg}og(){return this.dhi.mhi.hg}nHt(i){if(this.lHt||this.dhi.nHt(i),this.dhi.yhi){if(i.type===t.Sh&&this.Qo.R_)return!0;if(i.type===t.kA)return this.dhi.Thi.Mhi(),!0}return!1}be(){this.dhi.be()}Gg(){this.hg||this.dhi.mhi.Gg()}async Nhi(){if(!this.dhi.Dhi)try{await this.dhi.$qt()}catch(t){this.Shi(t,Qe.GENERAL)}}async Ihi(){if(this.dhi.mhi.Ehi)return this.dhi.mhi.Vg(),!1;if(this.dhi.bhi)try{await this.dhi.Thi.Lhi()}catch(t){this.Shi(t,Qe.PLAYBACK)}return!0}get khi(){return j_(this.Q_())}Shi(t,i){t.name!==o6.ohi&&this.iHt.Co(new Ba(i,"Ads could not be loaded."))}async Vg(){if(this.hg&&this.Co(new vh(this.j_)),await this.Nhi(),this.khi)return;const t=await this.Ihi();!this.khi&&t&&this.m2t()}QJt(t,i,e){i===ho.n7&&this.dhi.QJt(t)}ge(){this.dhi.ge()}Yp(){this.dhi.mhi.Yp()}Ug(){return this.S8}E_(){return this.GP.pR.map((t=>t.pP))}gHt(t){}async gn(){await this.Wg(),this.dhi.gn(),await this.GP.YP(this.gP),this.ghi(),this.phi(),this.iHt.kR(this.dhi.Ahi)}async Wg(){this.dhi.Zn(),this.lHt&&(this.Qo.ge(),this.EWt(),this.be())}constructor(t,i,e,s,n){super(t,i),this.vP=void 0,this.mP=void 0,this._hi=t=>{const i=t.o7,e="d7"===t.type;if(i.Tqt===Ur.NQt){const t=this.Qo.we.classList;e?t.add(u6):t.remove(u6)}e?this.ge():this.be()},this.fhi=()=>{this.NHt(),this.Qo.Gg(),this.Qo.be()},this.m2t=()=>{this.dhi.Dhi&&(this.Qo.R_||this.Qo.Vg(),this.be(),this.Qo.ge(),this.EWt())},this.dhi=s,this.GP=e,this.gP=n,this.S8=n.pP,this.S8.controls=!1,this.lhi(),this.whi(),this.vhi()}};r(),r(),r();var d6=class extends e0{get Chi(){return this.xhi}get Ohi(){return this.Oc[this.jhi]}set zhi(t){this.jhi=t}get zhi(){return this.jhi}get Tqt(){return this.VKt}get XYt(){return eh.WYt}constructor(t,i,e,s){super(t,i,e),this.xhi=s,this.jhi=0,this.VKt=_6(s)}};r();var f6=class extends n0{get Phi(){return this.Bhi}set Phi(t){this.Bhi!==t&&(this.Bhi=t)}get Ti(){return this.Xl.Chi.getHeight()}get ji(){return this.Xl.Chi.getWidth()}get qRt(){return this.Phi.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get XYt(){return eh.WYt}fa(){return Kn(this)}constructor(t,i,e){super(t,i),this.Bhi=e}};function _6(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?Ur.NQt:Ur.TQt}var g6=class t extends ha{async Rhi(t,i){this.Uhi=t,this.Qhi=i,this.Fhi(t),await i,this.Yhi()}get Ghi(){return this.Vhi}get Whi(){return this.Hhi}get qhi(){return this.Xhi}get t7(){return this.pGt}get AJt(){return this._Gt}get i7(){const t=[];if(this.pGt){const i=this.pGt.zhi;i>=0&&t.push(...this.pGt.Oc.slice(i+1))}for(const i of this.Zhi)t.push(...i.Oc);return t}get e7(){return this.Zhi}Yhi(){this.Khi()}Fhi(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Jhi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.$hi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.toi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.ioi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.eoi)}soi(){this.Uhi&&(this.Uhi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Jhi),this.Uhi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.$hi),this.Uhi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.toi),this.Uhi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.ioi),this.Uhi.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.eoi))}Khi(){this.Vhi=this.noi(this.roi),this.Hhi=this.noi(this.hoi).concat(this.noi(this.ooi)),this.Xhi=this.noi(this.aoi),this.Zhi=this.Vhi.concat(this.Hhi).concat(this.Xhi)}noi(t){if(!this.Uhi)return[];const i=this.Uhi.getSlotsByTimePositionClass(t);return this.uoi(i)}coi(t){if(!this.pGt)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.pGt.zhi=i);const e=this.pGt.Ohi;return e&&(e.Phi=t),e}loi(t){return H_(this.Zhi,(i=>i.Chi===t))}uoi(i){return i.map((i=>{const e=i.getTotalDuration(),s=t.doi(i);return new d6(e,e,s,i)}))}static foi(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=_6(t.getSlot()),n=new f6(i,e,t),r=[];n.FKt(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.RKt(n),s.push(n)}return s}CVt(){const t=this.AJt;t&&this.Co(new lr(t,this._oi()))}goi(){const t=this.AJt;t&&(this.Co(new fa(t,t.Phi.getPlayheadTime())),this._Gt=void 0)}woi(t){const i=this.t7;i&&(i.KYt=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Oc.length;for(let r=i;r<n;r++){const n=t.Oc[r],h=n.ct;if(n){let t=h;r===i&&(t=hi(h-e,0,h)),s+=t}}return s}(i,i.zhi,t))}static doi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}_oi(){const t=this.AJt;if(!t)return 0;const i=t.Phi;return i.getPlayheadTime()/i.getDuration()}Aoi(t){Et(this.Zhi,t),Et(this.Vhi,t),Et(this.Hhi,t),Et(this.Xhi,t)}Zn(){this.soi(),this.Vhi.length=0,this.Hhi.length=0,this.Xhi.length=0,this.Zhi.length=0,this._Gt=void 0,this.pGt=void 0,this.Uhi=void 0,this.Qhi=void 0}gn(){this.Zn(),this.Vo()}constructor(i,e){super(),this.Us=i,this.wO=e,this.roi=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.hoi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.aoi=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.ooi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.Vhi=[],this.Hhi=[],this.Xhi=[],this.Zhi=[],this.Jhi=i=>{const e=i.slot,s=this.loi(e);s&&(t.foi(e,s),this.pGt=s,s.PKt(),this.Aoi(s),s.Tqt===Ur.TQt&&this.Co(new ka(s)))},this.$hi=()=>{const t=this.t7;t&&t.Tqt===Ur.TQt&&(this.Co(new Bh(t)),this.wO.src=""),this.pGt=void 0},this.toi=t=>{const i=this.coi(t.adInstance);i&&(this.Co(new tu(i,i.Phi.getPlayheadTime())),this._Gt=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Us.style.cursor="pointer",this.Us.addEventListener("click",this.voi))},this.ioi=()=>{this.Us.style.cursor="",this.Us.removeEventListener("click",this.voi)},this.voi=()=>{this.AJt&&this.AJt.Phi.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.eoi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.goi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.CVt(),this.goi()}}}};r();var w6=class t extends ha{moi(){if(this.uTt){this.uTt.setAdVolume(A6(this.Z_,this.xg))}}poi(t){this.uTt=t,this.Fhi(t)}Fhi(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.yoi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Moi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Toi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Noi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Doi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Soi)}Ioi(){const t=this.uTt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.yoi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Moi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Toi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Noi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.Doi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.Soi))}Vg(){this.Gnt.t7&&(this.Gnt.t7.Chi.resume(),this.hg=!1)}Gg(){this.Gnt.t7&&(this.Gnt.t7.Chi.pause(),this.hg=!0)}get j_(){const t=this.Gnt.AJt;return t&&(this.j_=t.Phi.getPlayheadTime()),this.uR}set j_(t){this.uR=t}get ct(){return this.zk}get Ehi(){return!!this.Gnt&&void 0!==this.Gnt.t7}get hg(){return this.dR}set hg(t){this.dR=t}get xg(){return this.Xk}set xg(t){this.uTt&&this.uTt.setAdVolume(t),this.Xk=t}get Z_(){return this.uTt&&(this.Eoi=0===this.uTt.getAdVolume()),this.Eoi}set Z_(t){this.uTt&&this.uTt.setAdVolume(A6(t,this.xg)),this.Eoi=t}get yg(){return this.T$}get R_(){return this.U$}set R_(t){this.U$=t}get vg(){return this.Q$}static boi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}Loi(i){const e=t.boi(i);this.uTt&&e&&this.uTt.setVideoState(e)}Yp(){const t=this.Gnt.AJt;t&&t.Phi.skip()}Zn(){if(this.Ioi(),this.uTt){this.Loi("stop"),this.uTt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.uTt.getTemporalSlots();for(const i of t)i.stop();this.uTt.dispose(),this.uTt=void 0}this.zk=NaN,this.R_=!1,this.Q$=rv.tN,this.j_=0,this.koi=0,this.hg=!0,void 0!==this.Coi&&(m(this.Coi),this.Coi=void 0)}gn(){this.Zn(),this.Vo(),this.Gnt.fn("l7",this.Md),this.Wu.fn(th.pn,this.Moi),this.SVt.removeEventListener("click",this.xoi)}constructor(t,i,e,s){super(),this.Qo=t,this.Wu=i,this.Gnt=e,this.SVt=s,this.T$=Ki.aR().ks(),this.dR=!0,this.zk=NaN,this.Eoi=!1,this.U$=!1,this.Q$=rv.tN,this.uR=0,this.koi=0,this.yoi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.Phi,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||U_(s,e)})(this.Gnt.AJt)||(this.hg=!0,this.Co(new ws(this.j_)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.hg=!1,this.Co(new Hr(this.j_));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.uTt){const t=this.uTt.getAdVolume();0===t?this.Eoi=!0:this.Xk=t,this.Co(new Ve(this.j_,this.xg))}}},this.Toi=()=>{this.R_=!1;const t=this.hg;if(this.hg=!1,t&&(this.Co(new vh(this.j_)),this.Co(new Hr(this.j_))),this.Q$=rv.eN,this.j_=0,!this.Gnt.AJt)return;const i=this.Gnt.AJt.Phi;this.zk=i.getDuration(),this.Co(new Mn(this.zk)),this.Coi=v((()=>{if(!this.Ehi)return void this.e$();this.Gnt.woi(this.j_);const t=i.getPlayheadTime();Ua(t,this.koi,.001)||this.Co(new Tc(t,void 0)),this.koi=t}),250),this.uTt&&this.uTt.setAdVolume(A6(this.Z_,this.xg))},this.xoi=()=>{const t=this.Gnt.AJt;t&&(t.Tqt===Ur.NQt?this.Qo.Gg():this.hg||this.Gg())},this.e$=()=>{m(this.Coi),this.Coi=void 0},this.Noi=()=>{this.e$(),this.R_=!0},this.Doi=()=>{this.Loi("pause")},this.Soi=()=>{this.Loi("playing")},this.Md=t=>{t.Xl.Tqt===Ur.TQt&&(this.hg=!1)},this.Moi=()=>{this.uTt&&this.uTt.resize(this.Wu.ku,this.Wu._u)},this.Xk=t.xg,e.yn("l7",this.Md),this.Wu.yn(th.pn,this.Moi),this.SVt.addEventListener("click",this.xoi)}};function A6(t,i){return t?0:i}r(),r();var Ec=class extends Jo{get name(){return o6.ahi}constructor(){super("A FreeWheel Ad Error occurred")}};r();var v6=class extends Jo{get name(){return o6.ohi}constructor(){super("A FreeWheel Reset Error Occurred")}},m6=0;var p6=class{Ooi(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.uTt;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot("cue-"+ ++m6,t.adUnit,t.timeOffset);const n=i.customData;if(lt(n)){const t=_.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async joi(){this.uTt.submitRequest(),await this.zoi.OL}Zn(){this.uTt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Poi),this.zoi.xL(new v6)}constructor(t,i,e,s){this.uTt=i,this.Poi=t=>{this.uTt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Poi),t.success?this.zoi.CL(void 0):this.zoi.xL(new Ec)},this.Ooi(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.Poi),this.zoi=new No}};r(),r();var y6=class{Boi(){this.Uhi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.$hi),this.Uhi.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.$hi)}get Roi(){return this.u_.OL}mCt(){this.Boi(),this.u_.xL(new v6)}constructor(t){this.Uhi=t,this.$hi=t=>{this.Boi(),this.u_.CL(void 0)},this.XZt=t=>{this.Boi(),this.u_.xL(new Ec)},this.u_=new No,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.$hi),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.XZt)}},M6=class{gN(t){this.Uhi=t}Lhi(){return this.Uoi(this.Qoi.Ghi)}Mhi(){this.Uoi(this.Qoi.qhi)}async Uoi(t){if(this.Uhi)for(;t.length>0;){this.Foi=new y6(this.Uhi);const i=this.Foi.Roi,e=this.Qoi.t7;e&&e.Tqt===Ur.NQt&&e.Chi.stop();t.shift().Chi.play();try{await i}finally{this.Foi=void 0}}}Zn(){this.Foi&&(this.Foi.mCt(),this.Foi=void 0),this.Yoi=0}gn(){this.Qo.fn(t.ov,this.Goi)}constructor(i,e){this.Qo=i,this.Qoi=e,this.Yoi=0,this.Goi=()=>{const t=this.Qo.z_();for(const i of this.Qoi.Whi){const e=new Ki([this.Yoi,t],[!0,!0]),s=i.Chi.getTimePosition();if(e.gr(s))switch(i.Chi.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.Uoi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.Chi.play(),i.Chi.setVisible(!0)}}this.Yoi=t},i.yn(t.ov,this.Goi)}},T6=0,N6=class t extends hI{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++T6}get yhi(){return 0!==this.Ahi.qhi.length}get bhi(){return 0!==this.Ahi.Ghi.length}async $qt(){if(!this.gFt)throw new b("Invalid state");const t=this.Voi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new p6(t,i,this.gFt,this.Woi),s=this.Ahi.Rhi(i,e.joi());this.Hoi.gN(i),this.mhi.poi(i),this.qoi=e;try{await s}finally{this.mhi.moi(),this.Xoi=!0}}get mhi(){return this.YZt}get Ahi(){return this.Zoi}get Dhi(){return this.Xoi}static Koi(t,i,e){const s=h.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get Thi(){return this.Hoi}nHt(t){this.mhi.Loi(t.type)}ge(){this.SVt.style.display="block",this.wO.style.display="block"}be(){this.SVt.style.display="none",this.wO.style.display="none"}QJt(t){this.gFt=t}Zn(){this.Xoi=!1,this.gFt=void 0,this.Ahi.Zn(),this.Hoi.Zn(),this.qoi&&(this.qoi.Zn(),this.qoi=void 0),this.mhi.Zn(),this.wO.src=""}gn(){this.Zn(),this.YZt.gn(),this.Hoi.gn(),this.Ahi.gn(),this.SVt.remove(),this.Qo.we.removeChild(this.SVt)}constructor(i,e,n){super(),this.Qo=i,this.wO=e,this.Xoi=!1,this.Woi=t.createUniqueDisplayBaseId(),this.SVt=t.Koi(i.we,e,this.Woi),this.Voi=new s.tv.freewheel.SDK.AdManager,this.Zoi=new g6(this.SVt,this.wO),this.Hoi=new M6(this.Qo,this.Ahi),this.Qa(this.Ahi),this.YZt=new w6(i,n,this.Ahi,this.SVt)}};function D6(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function S6(t,i,e){if(void 0!==i&&j(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return lh(i)}var I6;function Cs(t){return t.navigator&&t.navigator.userAgent||""}ta.dL.ZR(new class{get HWt(){return eh.WYt}XR(t){return t.integration===oI.FREEWHEEL}qWt(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new jy(t.Iu,t.Ol,1,[iv.vp]);n.MR(t.we);const r=n.oB(iv.vp),h=new N6(t,r.pP,t.Iu);return new l6(t,i,n,h,r)}lF(t){const i=se(t);Yn(i.cuePoints)||(i.cuePoints=[]);const e=[],s=t.assetDuration||0;for(const t of i.cuePoints){const i=S6(t.adUnit,t.timeOffset,s),n=D6(t.adUnit);!j(i)&&ae(n)?(t.adUnit=n,t.timeOffset=i,e.push(t)):ag.Pv("Invalid adUnit/timeOffset combination. Cue was removed.")}return i.cuePoints=e,i}m1(t,i,e,s){e.QJt(t,i,s)}}),r(),r(),r(),r(),r(),r(),r(),r(),function(t){t.Joi="Windows 10",t.$oi="Windows 8.1",t.tai="Windows 8",t.iai="Windows 7",t.eai="Windows Vista",t.sai="Windows Server 2003",t.nai="Windows XP",t.rai="Windows Phone",t.hai="Mac OS X",t.oai="Mac OS",t.pE="Android",t.ME="iOS",t.aai="Ubuntu",t.uai="Linux",t.cai="Chrome OS"}(I6||(I6={}));var E6={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function uu(t,i){const e=E6[i];return!!e&&Boolean(Cs(t).match(e))}function b6(t){return uu(t,"Android")}function L6(t){return uu(t,"Windows Phone")}function k6(t){return uu(t,"iOS")&&!L6(t)}function C6(t){return uu(t,"Ubuntu")}var x6,bh=/Windows (NT|Phone) ([0-9.]+)/i,O6=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,j6={"Windows 10":bh,"Windows 8.1":bh,"Windows 8":bh,"Windows 7":bh,"Windows Vista":bh,"Windows Server 2003":bh,"Windows XP":bh,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":O6,"Mac OS":O6,"Chrome OS":void 0};function z6(t,i){const e=j6[i];return e?Cs(t).match(e):null}function P6(t){return t.split(/[_.]/).map((t=>C(t,10)))}function B6(t){if(function(t){return Boolean(Cs(t).match(/Windows/i))}(t)){if(function(t){return uu(t,"Windows 10")}(t))return"Windows 10";if(L6(t))return"Windows Phone";if(function(t){return uu(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return uu(t,"Windows 8")}(t))return"Windows 8";if(function(t){return uu(t,"Windows 7")}(t))return"Windows 7";if(function(t){return uu(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return uu(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return uu(t,"Windows XP")}(t))return"Windows XP"}else{if(b6(t))return"Android";if(k6(t))return"iOS";if(function(t){return uu(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return uu(t,"Mac OS")}(t))return"Mac OS";if(C6(t))return"Ubuntu";if(function(t){return uu(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return uu(t,"Linux")&&!C6(t)}(t))return"Linux"}}function R6(t,i){const e=function(t){const i=z6(t,"Windows 10");return i&&i.length>2?P6(i[2]):void 0}(t),s=function(t){const i=z6(t,"Mac OS X");return i&&i.length>2?P6(i[2]):void 0}(t),n=function(t){const i=z6(t,"Android");return i&&i.length>1?P6(i[1]):void 0}(t),r=function(t){const i=z6(t,"iOS");return i&&i.length>3?P6(i[3]):void 0}(t),h=function(t){const i=z6(t,"Chrome OS");return i&&i.length>0?P6(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:h&&h.length>i?h[i]:void 0}function U6(t){const i=function(t){return R6(t,0)}(t),e=function(t){return R6(t,1)}(t),s=function(t){return R6(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}!function(t){t.lai="Chrome",t.fai="Chrome Mobile",t._ai="Chrome iOS",t.gai="Chromium",t.wai="Firefox",t.Aai="Seamonkey",t.vai="Firefox iOS",t.mai="Firefox Mobile",t.pai="Safari",t.yai="Safari Mobile",t.Mai="Edge",t.Tai="Edge Chromium",t.Nai="Edge Mobile",t.Dai="IE",t.Sai="Opera",t.Iai="Opera Mobile",t.Eai="Vivaldi",t.bai="HeadlessChrome",t.Lai="Android Browser"}(x6||(x6={}));var Q6={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function st(t,i){const e=Q6[i];return!!e&&Boolean(Cs(t).match(e))}function F6(t){return Boolean(Cs(t).match(/Mobi/i))}function Y6(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||G6(t)}function G6(t){return st(t,"Chrome iOS")}function V6(t){return st(t,"Firefox")&&!H6(t)}function W6(t){return st(t,"Firefox Mobile")&&!H6(t)&&F6(t)}function H6(t){return st(t,"Seamonkey")}function q6(t){return st(t,"Firefox iOS")&&!H6(t)}function X6(t){return st(t,"Safari")&&!st(t,"Chrome")&&!li.BE}function Z6(t){return Boolean(n8(t))}function K6(t){return st(t,"Edge")}function J6(t){return st(t,"Edge Chromium")}function $6(t){return st(t,"IE")}function t8(t){return st(t,"Vivaldi")}var i8,e8=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,s8={Chrome:e8,"Chrome Mobile":e8,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:e8,HeadlessChrome:e8,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function kr(t,i){const e=s8[i];return e?Cs(t).match(e):null}function n8(t){return kr(t,"Opera")}function r8(t){const i=function(t){return kr(t,"Firefox")}(t);return i?S(i[1]):0}function h8(t){const i=function(t){return kr(t,"Firefox iOS")}(t);return i?S(i[1].split(".")[0]):0}function o8(t){const i=function(t){return kr(t,"Safari")}(t);return i?S(i[2].split(".")[0]):0}function a8(t){const i=function(t){return kr(t,"Edge")}(t);return i?S(i[1]):0}function u8(t){const i=function(t){return kr(t,"Edge Chromium")}(t);return i?S(i[1]):0}function c8(t){const i=function(t){return kr(t,"IE")}(t);return i?S(i[2]):0}function l8(t){const i=function(t){return kr(t,"Vivaldi")}(t);return i?S(i[1]):0}function d8(t){if(b6(t))return Y6(t)?"Chrome Mobile":V6(t)||W6(t)?"Firefox Mobile":K6(t)?"Edge Mobile":Z6(t)?"Opera Mobile":"Android Browser";if(k6(t)){if(Y6(t)||G6(t))return"Chrome iOS";if(V6(t)||q6(t))return"Firefox iOS";if(K6(t))return"Edge Mobile";if(X6(t)||function(t){return X6(t)&&F6(t)}(t))return"Safari Mobile";if(Z6(t))return"Opera Mobile"}return function(t){return st(t,"Chromium")}(t)?"Chromium":function(t){return st(t,"HeadlessChrome")}(t)?"HeadlessChrome":Y6(t)?"Chrome":V6(t)?"Firefox":X6(t)?"Safari":K6(t)?"Edge":J6(t)?"Edge Chromium":$6(t)?"IE":Z6(t)?"Opera":t8(t)?"Vivaldi":void 0}function f8(t){return t8(t)?l8(t):G6(t)?Number(function(t){const i=s8["Chrome iOS"];return i&&i.exec(Cs(t))||[]}(t)[1]):Y6(t)?Number(function(t){const i=s8.Chrome;return i&&i.exec(Cs(t))||[]}(t)[1]):V6(t)||W6(t)?r8(t):q6(t)?h8(t):X6(t)?o8(t):K6(t)?a8(t):J6(t)?u8(t):$6(t)?c8(t):Z6(t)?function(t){const i=n8(t);return i&&i[0].indexOf("Opera")>-1?S(i[5]):i?S(i[2].split(".")[0]):0}(t):void 0}function _8(t){const i=Cs(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(d8(t))}(t)?"pc":void 0}!function(t){t.kai="pc",t.Cai="console",t.xai="settop",t.Oai="mobile",t.jai="tablet",t.zai="smarttv",t.Pai="searchbot"}(i8||(i8={}));var g8=class{cF(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=ci.EL("deviceId");if(t)return t;let i=DI();return ci.xz("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"6.10.1"),this.Bai(t),this.Rai(),this.Uai(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this.Qai(),nd.connection&&nd.connection.addEventListener&&nd.connection.addEventListener("change",this.Qai))}Bai(t){this.Fai(t);const i=t.deviceManufacturer||Sc&&Sc.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||Sc&&Sc.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}Fai(t){const i=t.deviceType||function(){const t=_8(self);switch(t){case i8.Cai:return"game-console";case i8.zai:return"tv";case i8.xai:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}Rai(){const t=d8(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=f8(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}Uai(t){const i=t.deviceOs||B6(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||U6(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}gn(){nd.connection&&nd.connection.removeEventListener&&nd.connection.removeEventListener("change",this.Qai)}constructor(t,i){this.empClient=t,this.agama=i,this.Qai=()=>{const t=ag.Sit;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const i=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(ag.Dit);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i)}}}};var w8,io;tr(function(t){return i=>class extends i{P_(t){this.Yai&&this.Yai.JU(),super.P_(t)}gn(){this.Yai&&this.Yai.gn(),super.gn()}constructor(i,e){super(i,e),this.QU=new t,this.Yai=new II(this,this.QU,e)}}}(class extends wI{Yg(t){this.Gai=t,this.Vai&&(this.QU=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.Vai),this.QU&&(this.Wai=new g8(this.QU,this.Vai),this.bo=!0))}uF(){return this.Vai||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.Vai}oF(){return this.bo}zQ(t,i){if(this.QU&&this.Vai)switch(t){case ku.oU:this.QU.setMeasurement(this.Vai.Measurement.BUFFER_LENGTH,i);break;case ku.aU:this.QU.setMeasurement(this.Vai.Measurement.BYTES_RECEIVED,i);break;case ku.cU:this.QU.setMeasurement(this.Vai.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case ku.lU:this.QU.setMeasurement(this.Vai.Measurement.VIDEO_PROFILE_BITRATE,i);break;case ku.uU:this.QU.setMeasurement(this.Vai.Measurement.SEGMENT_READ_BITRATE,i);break;case ku.eU:this.QU.setMeasurement(this.Vai.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case ku.sU:this.QU.setMeasurement(this.Vai.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case ku.nU:this.QU.setMeasurement(this.Vai.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case ku.rU:this.QU.setMeasurement(this.Vai.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case ku.hU:this.QU.setMeasurement(this.Vai.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case ku.fU:this.QU.setMeasurement(this.Vai.Measurement.PLAYBACK_POSITION,i);break;case ku._U:this.QU.setMeasurement(this.Vai.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case ku.dU:this.QU.setMeasurement(this.Vai.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}AQ(t,i){if(this.QU&&this.Vai)switch(t){case Go.mU:this.QU.setSessionMetadata(this.Vai.SessionMetadata.ASSET_DURATION,i);break;case Go.vU:this.QU.setSessionMetadata(this.Vai.SessionMetadata.MANIFEST_URI,i);break;case Go.pU:this.QU.setSessionMetadata(this.Vai.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case Go.TU:this.QU.setSessionMetadata(this.Vai.SessionMetadata.SERVICE_NAME,i);break;case Go.yU:this.QU.setSessionMetadata(this.Vai.SessionMetadata.CDN,i);break;case Go.MU:this.QU.setSessionMetadata(this.Vai.SessionMetadata.CONTENT_TITLE,i);break;case Go.NU:this.QU.setSessionMetadata(this.Vai.SessionMetadata.CONTENT_TYPE,i);break;case Go.DU:this.QU.setSessionMetadata(this.Vai.SessionMetadata.CONTENT_DESCRIPTION,i)}}cF(){this.Wai&&this.Gai&&this.Wai.cF(this.Gai)}aF(t,i){this.Vai&&this.QU&&(this.WQ(),function(t,i,e,s){const n=SI(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.Vai,this.QU,t,i),this.Hai=!0)}gn(){this.Wai&&this.Wai.gn(),this.qai(lI.SU),this.QU=void 0}sQ(t){this.Xai(t)}hQ(t,i){this.QU&&this.QU.event(t.code,i)}WQ(){this.QU&&this.Hai&&(this.QU.exitSession(),this.Hai=!1)}qai(t){if(this.QU&&this.Vai&&(this.WQ(),t===lI.SU))this.QU.shutdown(this.Vai.ShutdownType.NORMAL_SHUTDOWN)}nQ(t,i,e){this.Xai(t,i,e)}Xai(t,i,e){if(this.QU&&this.Vai)switch(t){case al.Tv:this.Zai(this.Vai.ViewState.PLAYING,i,e);break;case al.$R:this.Zai(this.Vai.ViewState.FAILED,i,e);break;case al.tU:this.Zai(this.Vai.ViewState.INITIAL_BUFFERING,i,e);break;case al.Dv:this.Zai(this.Vai.ViewState.PAUSED,i,e);break;case al.KR:this.Zai(this.Vai.ViewState.SEEK,i,e);break;case al.JR:this.Zai(this.Vai.ViewState.STALLED,i,e);break;case al.iU:this.Zai(this.Vai.ViewState.NO_ACCESS,i,e)}}Zai(t,i,e){if(this.QU)if(i){const s=function(t){return t||""}(e);this.QU.viewStateExtended(t,i.code,s)}else this.QU.viewStateChanged(t)}constructor(){super(),this.bo=!1,this.Hai=!1,this.Vai=Ys.Agama}}),iu.G9),r(),r(),r(),r(),r(),function(t){t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last"}(w8||(w8={})),r(),function(t){t.VOD="vod",t.LIVE="live"}(io||(io={}));var A8=class{get va(){return this.Kai.va}get lt(){return this.vP}get F_(){return this.mP}Jai(t){this.vP=ne(t),this.mP=t,this.Qo.Co(new me(t))}ga(t){this.$ai.Zn(),this.tui.kL(),this.iui=!1,this.Qo.eui(t)}async D7(t,i){if(this.sui.Zn(),this.iui=!1,!t||!function(t){return t.sources.some((t=>t.integration===ev.VERIZON_MEDIA))}(t))return await this.Qo.nui(t,i);try{this.rui=await this.hui.Nni(t),await this.Qo.nui(this.rui,i)}catch(t){this.Jai(new ce(le.MANIFEST_LOAD_ERROR,t.message,t))}}gn(){this.h2.c_(),this.oui.c_(),this.Qo.fn("currentsourcechange",this.lei),this.Qo.fn("timeupdate",this.Jni),this.Qo.fn("ended",this.iei),this.Qo.fn("loadeddata",this.jd);for(const t of this.$ai.tGt.Gu)t.fn("aui",this.uui),t.fn("l7",this.rei),t.fn("u7",this.hei);this.$ai.tGt.fn("h7",this.cui),this.$ai.tGt.fn("r7",this.lui),this.$ai.gn(),this.EVt&&(this.EVt.e_(),this.EVt=void 0),this.iui=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.dui.Wat(t.integrationData.source.prefix,t.integrationData.source.id,this.oui.a_,t.integrationData.preplayResponse.sid);this.Kai.fui(i),this.tui._ui(i,this.$ai.tGt.Gu)}catch(t){0}}gui(t){this.$ai.wui(t),this.$ai.K9.forEach((i=>i.Aui(t))),this.$ai.vui(this.Qo.Mg()),this.IVt()}P_(t){this.$ai.t7||(this.h2.c_(),this.h2=new Po,W(this.vni(t,this.h2.a_)))}async vni(t,i){if(Pi(i),t<this.Qo.z_())return void this.mui(t);let e=[];switch(this.$ai.pui){case w8.PLAY_ALL:e=this.$ai.yui(this.Qo.z_(),t),await this.Mui(t,e,i);break;case w8.PLAY_LAST:const s=this.$ai.yui(this.Qo.z_(),t).pop();e=s?[s]:[],await this.Mui(t,e,i);break;case w8.PLAY_NONE:this.Tui(t)}}mui(t){const i=H_(this.$ai.tGt.Gu,(i=>i.hst.gr(t)));i?this.Qo.Nui(i.zN):this.Qo.Nui(t)}Tui(t){const i=this.$ai.yui(this.Qo.z_(),t).pop();i&&i.hst.gr(t)?this.Qo.Nui(i.PN):this.Qo.Nui(t)}async Mui(t,i,e){for(const t of i)await this.Dui(t,e);const s=i[i.length-1];s&&s.hst.gr(t)?this.Qo.z_()<t&&this.Qo.Nui(s.PN):this.Qo.Nui(t)}async Dui(t,i){t.fn("aui",this.uui);const e=Promise.race([t.D_("u7",i),t.D_("aui",i)]);this.gui(this.Qo.z_()),t.ro||this.Qo.Nui(t.zN),await e,t.yn("aui",this.uui)}IVt(){const t=H_(this.$ai.K9,(t=>t.Sui.length>0));if(t){const i=t.Sui[0];this.EVt||(this.EVt=new Qn(this.Qo.we),this.EVt.yn("clickstart",this.Iui)),this.EVt.PGt=i}else this.EVt&&(this.EVt.e_(),this.EVt=void 0)}constructor(t,i,e,s,n,r,h){this.Qo=t,this.sui=i,this.hui=e,this.$ai=s,this.Kai=n,this.dui=r,this.tui=h,this.vP=void 0,this.mP=void 0,this.h2=new Po,this.oui=new Po,this.Eui=void 0,this.iui=!1,this.EVt=void 0,this.lei=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.Kai.bui(e),e&&e.type===io.VOD&&e.ads&&this.$ai._ui(e.ads),this.sui.Lui=i.integrationData,s.assetInfo&&W(this.fetchAssetInfo(i))},this.Zti=()=>{this.iui=!0},this.Jni=()=>{this.iui&&this.gui(this.Qo.z_())},this.iei=()=>{this.iui&&(this.gui(1/0),this.iui=!1)},this.jd=()=>{W(this.sui.Cn())},this.uui=t=>{this.h2.c_(),this.h2=new Po,W(this.vni(t.Xl.PN,this.h2.a_))},this.rei=()=>{1!==this.Qo.ag&&(this.Eui=this.Qo.ag,this.Qo.ag=1)},this.hei=()=>{void 0!==this.Eui&&(this.Qo.ag=this.Eui,this.Eui=void 0)},this.cui=t=>{t.Xl.yn("aui",this.uui),t.Xl.yn("l7",this.rei),t.Xl.yn("u7",this.hei)},this.lui=t=>{t.Xl.fn("aui",this.uui),t.Xl.fn("l7",this.rei),t.Xl.fn("u7",this.hei)},this.Iui=()=>{this.Qo.Gg()},this.Qo.yn("currentsourcechange",this.lei),this.Qo.yn("play",this.Zti),this.Qo.yn("timeupdate",this.Jni),this.Qo.yn("ended",this.iei),this.Qo.yn("loadeddata",this.jd),this.$ai.tGt.yn("h7",this.cui),this.$ai.tGt.yn("r7",this.lui)}};r(),r();var v8=xr({breaksIndex:Ii,adsIndex:Ii,startTime:Ii,endTime:Ii}),m8=xr({index:Ii,timeOffset:Ii}),p8=xr({duration:Ii,apiFramework:Al(pi,rS),creative:pi,mimeType:pi,width:Ii,height:Ii,companions:ki(nS),extensions:Al(yh,ki(nS)),fw_parameters:Al(yh,Bu(pi)),events:Bu(ki(pi))}),y8=xr({type:si(["linear","nonlinear"]),position:si(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Ii,duration:Ii,ads:ki(p8),events:Bu(ki(pi))}),M8=xr({breaks:ki(y8),breakOffsets:ki(m8),placeholderOffsets:ki(v8)}),T8=xr({fairplayCertificateURL:Al(yh,pi),widevineLicenseURL:Al(yh,pi),playreadyLicenseURL:Al(yh,pi)}),N8={type:si(oS(io)),playURL:pi,prefix:pi,sid:pi,drm:Al(yh,T8)},D8=xr(oe({},N8,{type:si([io.VOD]),ads:M8,interstitialURL:Al(pi,rS,yh)})),S8=Al(D8,xr(oe({},N8,{type:si([io.LIVE])})));r();var I8,E8=pi,b8=xr({userId:pi,externalId:Al(pi,ki(pi))});!function(t){t[t.AD_IMPRESSIONS=1]="AD_IMPRESSIONS",t[t.FW_VIDEO_VIEWS=2]="FW_VIDEO_VIEWS",t[t.LINEAR_AD_DATA=4]="LINEAR_AD_DATA"}(I8||(I8={}));var L8=class{async Wat(t){try{return this.kui(t)}catch(t){throw t}}async kui(t){const i=await async function(t){const i=t.prefix,e=k8[t.assetType],s=function(t){if(ki(E8).wz(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(E8.wz(t))return t;if(b8.wz(t)&&Yn(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(b8.wz(t))return"ext/"+t.userId+"/"+t.externalId;throw new k("Invalid asset id")}(t.id),n=await async function(t){if(t&&await ag.Ex())return{rmt:"fps",manifest:"m3u8"};if(t&&await ag.Nx())return{rmt:"wv",manifest:"mpd"};if(t&&await ag.Ix())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),r=function(t,i){const e=C8(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let h={};Yn(t.preplayParameters)?t.preplayParameters.forEach((t=>{h[t[0]]=t[1]})):h=t.preplayParameters;const o=i+"/preplay/"+e+s+".json";return ua(o,oe({v:"2"},h,n,r,h))}(t),e=this.dE.mI({iE:Kc.GET,zu:i,eE:nr.jI}),s=await e,n=oe({},await s.Cp(),{type:t.assetType===Pa.ASSET?io.VOD:io.LIVE});return S8.wz(n)||S8.vz(n,"PreplayResponse"),n}constructor(t){this.dE=t}},k8={[Pa.ASSET]:"",[Pa.CHANNEL]:"channel/",[Pa.EVENT]:"event/"};function C8(t,i){const e=t!==Pa.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}r(),r();var vr,x8=xr({ad_id:pi,apiFramework:Al(rS,pi),companions:ki(nS),creative:pi,duration:Ii,mimeType:pi,height:Ii,width:Ii,extensions:Al(yh,ki(nS)),fw_parameters:Al(yh,Bu(pi))}),O8=xr({breakId:pi,ads:ki(x8),type:si(["linear","nonlinear"]),position:si(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:Ii,duration:Ii,height:Al(yh,Ii),width:Al(yh,Ii),events:Bu(ki(pi))}),j8=xr({breaks:ki(O8)}),z8=xr({next_time:Ii,ads:Al(yh,j8),extensions:Al(yh,ki(nS)),error:Al(yh,pi),currentBreakEnd:Al(yh,Ii)});!function(t){t.ect="start",t.KR="seek"}(vr||(vr={}));var P8=class{async Wat(t,i){try{return this.kui(t,i)}catch(t){throw t}}async kui(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return ua(t.zonePrefix+"/session/ping/"+t.sessionId+".json",oe({},i))}(t),s=this.dE.mI({iE:Kc.GET,zu:e,eE:nr.jI,a_:i}),n=await s,r=await n.Cp();return z8.wz(r)||z8.vz(r,"PingResponse"),r}constructor(t){this.dE=t}};r(),r();var B8=class extends Ha{get yI(){return this.MI}fa(){return new R8(this.MI)}constructor(t){super("Cui"),this.MI=t}},R8=class extends gg{constructor(t){super("pingresponse"),this.response=t}};r();var U8=class extends Ha{get lt(){return this.vP}fa(){return new Q8(this.vP)}constructor(t){super("xui"),this.vP=t}},Q8=class extends gg{constructor(t){super("pingerror"),this.error=t}},F8=class extends i{set Lui(t){this.Oui=t}get jui(){return this.zui}async Cn(){const t=this.Oui;if(!t)return;0!==C8(t.source.assetType,t.source.ping)&&(this.zui=this.Qo.Mg().start(0),await this.Pui(vr.ect),this.Qo.yn("timeupdate",this.Bui),this.Qo.yn("seeking",this.Rui))}async Pui(t,i){const e=this.Oui.preplayResponse,s={};if(j(this.zui))return void 0;if(j_(this.Uui)&&U_(this.Uui,this.Qo.z_()-this.zui))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.Qo.z_()-this.zui;t===vr.ect?r=0:t!==vr.KR&&this.Qui&&(r=x.min(r,this.Qui)),this.Uui=r;try{var h;const t=await this.Fui.Wat(oe({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(h=this.Oui)?void 0:h.source.ping.freeWheelVideoViews},s),this.rO.a_);this.Co(new B8(t)),this.Qui=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){Oi(t)||(n=t.message)}finally{n&&this.Co(new U8(n))}}Zn(){this.Qui=void 0,this.Oui=void 0,this.zui=NaN,this.Yui=!1,this.Gui=NaN,this.Uui=void 0,this.Qo.fn("seeking",this.Rui),this.Qo.fn("timeupdate",this.Bui),this.Vui()}Vui(){this.rO.c_(),this.rO=new Po}gn(){this.Zn()}constructor(t,i){super(),this.Fui=t,this.Qo=i,this.zui=NaN,this.Qui=void 0,this.Yui=!1,this.Gui=NaN,this.rO=new Po,this.Uui=void 0,this.Bui=async()=>{const t=this.Qo.z_();if(this.Gui=t,this.Yui||Wo(this.Qui)||j(this.zui))return;this.zui+this.Qui<=t&&(this.Yui=!0,await this.Pui(),this.Yui=!1)},this.Rui=()=>{if(this.Qo.z_()===this.zui)return;this.Yui&&this.Vui(),this.Gui=this.Qo.z_();const t=this.Gui-(this.zui||0);j(t)?W(this.Pui(vr.KR,0)):W(this.Pui(vr.KR,t))}}};r();var Y8=class{async Nni(t){const i=[];for(const e of t.sources)if(G8(e))try{const s=W8({source:e,preplayResponse:await this.Wui.Wat(e)},t,this.$W);s.src&&(s.src=ua(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new b("Fatal: unable to play VerizonMediaSources.");return oe({},t,{sources:i})}constructor(t,i){this.Wui=t,this.$W=i}};function G8(t){return"verizon-media"===t.integration}function V8(t){if(t.sources)if(Yn(t.sources)){for(const i of t.sources)if(!ae(i)&&"verizon-media"===i.integration)return!0}else if(!ae(t.sources))return"verizon-media"===t.sources.integration;return!1}function W8(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=Av({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},i,e);return r.integrationData=t,r}r(),r(),r();var H8=class extends Ha{fa(){return new q8(this.Xl.va)}constructor(t,i){super("l7"),this.Xl=t,this.sS=i}},q8=class extends gg{constructor(t){super("adbreakbegin"),this.adBreak=t}};r();var X8=class extends Ha{fa(){return new Z8(this.Xl.va)}constructor(t,i){super("u7"),this.Xl=t,this.sS=i}},Z8=class extends gg{constructor(t){super("adbreakend"),this.adBreak=t}};r();var K8=class extends Ha{fa(){return new J8(this.Xl.va)}constructor(t){super("aui"),this.Xl=t}},J8=class extends gg{constructor(t){super("adbreakskip"),this.adBreak=t}};r(),r();var $8=class extends Ha{fa(){return new t9(this.Xl.va)}constructor(t){super("EJt"),this.Xl=t}},t9=class extends gg{constructor(t){super("updateadbreak"),this.adBreak=t}},i9=class extends ha{get va(){return this.Xa||(this.Xa=function(t){let i;const e={get startTime(){return t.zN},get endTime(){return t.PN},get duration(){return t.ct},get ads(){return t.Oc.va},get skipOffset(){return t.NUt},set skipOffset(i){t.NUt=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new ma(t,e),e}(this)),this.Xa}get zN(){return this.WN}get PN(){return this.zk?this.WN+this.zk:void 0}Hui(t){this.zk=t-this.zN;for(const i of this.Oc.Gu)i.zN>t&&this.Oc.pN(i);this.Co(new $8(this))}get ct(){return this.zk}get hst(){const t=this.PN;return j_(t)?new Ki([this.zN,t]):Ki.aR()}get Oc(){return this.Ic}get qui(){return this.Xui}get ro(){return this.ho}get NUt(){return this.rri?-1:this.DUt}set NUt(t){this.rri||(this.DUt=t)}Nwt(t){return t>=this.zN&&(Wo(this.ct)||t<=this.zN+this.ct)}Zui(t){return-1!==this.NUt&&(!!j_(this.PN)&&t-this.zN>=this.NUt)}Yp(){this.Ic.Gu.forEach((t=>t.Yp())),this.Co(new K8(this))}Kui(t){const i=j_(this.PN)&&t>=this.PN,e=this.zN<=t&&!i&&!this.ro,s=this.ro&&this.PN&&t>=this.PN;e&&(this.ho=!0,this.Co(new H8(this,this.zN))),this.Ic.Gu.forEach((i=>i.Kui(t))),s&&(this.Xui=!0,this.ho=!1,this.Co(new X8(this,this.PN)))}constructor(t,i,e,s,n){super(),this.WN=t,this.zk=i,this.Ic=e,this.rri=s,this.ho=!1,this.Xui=!1,this.DUt=n}};r(),r();var e9=class extends Ha{fa(){return new s9(this.o7.va)}constructor(t,i){super("d7"),this.o7=t,this.sS=i}},s9=class extends gg{constructor(t){super("adbegin"),this.ad=t}};r();var n9=class extends Ha{fa(){return new r9(this.o7.va)}constructor(t,i){super("f7"),this.o7=t,this.sS=i}},r9=class extends gg{constructor(t){super("adend"),this.ad=t}};r(),r();var h9=class extends Ha{fa(){return new o9(this.o7.va)}constructor(t){super("Jui"),this.o7=t}},o9=class extends gg{constructor(t){super("removead"),this.ad=t}},mo=class extends J0{g1t(t){}m1t(t){this.Co(new h9(t))}constructor(){super()}};r();var a9=class extends Ha{fa(){return new u9(this.o7.va)}constructor(t){super("MJt"),this.o7=t}},u9=class extends gg{constructor(t){super("adfirstquartile"),this.ad=t}},c9=class extends Ha{fa(){return new l9(this.o7.va)}constructor(t){super("TJt"),this.o7=t}},l9=class extends gg{constructor(t){super("admidpoint"),this.ad=t}},d9=class extends Ha{fa(){return new f9(this.o7.va)}constructor(t){super("NJt"),this.o7=t}},f9=class extends gg{constructor(t){super("adthirdquartile"),this.ad=t}},_9=class extends Ha{fa(){return new g9(this.o7.va)}constructor(t){super("$ui"),this.o7=t}},g9=class extends gg{constructor(t){super("adcomplete"),this.ad=t}};r();var w9=class t extends ha{static tci(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.tci(i,e))),e.extensions,e.fw_parameters,e.events,void 0)}static ici(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.ici(i,e))),e.extensions,e.fw_parameters,void 0,e.ad_id)}get va(){return this.Xa||(this.Xa=function(t){let i;const e={get apiFramework(){return t.PRt},get companions(){return t.IRt.va},get creative(){return t.eci},get duration(){return t.ct},get endTime(){return t.PN},get events(){return t.fY},get extensions(){return t.sci},get freeWheelParameters(){return t.nci},get height(){return t.Ti},get mimeType(){return t.dY},get startTime(){return t.zN},get width(){return t.ji},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new ma(t,e),e}(this)),this.Xa}get zN(){return this.WN}get PN(){return this.WN+this.zk}get ct(){return this.zk}get PRt(){return this.BRt}get eci(){return this.rci}get dY(){return this.IY}get ji(){return this.Kk}get Ti(){return this.Jk}get fY(){return this.ER}get IRt(){return this.ERt}get sci(){return this.hci}get nci(){return this.aci}get ro(){return this.ho}get Sui(){var t;return null!=(t=this.ER.clickthroughs)?t:[]}Kui(t){const i=this.zN<=t&&t<this.PN,e=i&&!this.ro,s=!i&&this.ro;e&&(this.uci=!1,this.cci=!1,this.lci=!1,this.dci=!1,this.ho=!0,this.Co(new e9(this,this.zN))),s&&(this.ho=!1,this.Co(new n9(this,this.PN)))}Aui(t){const i=(t-this.zN)/this.ct;!this.uci&&i>=.25&&(this.uci=!0,this.Co(new a9(this))),!this.cci&&i>=.5&&(this.cci=!0,this.Co(new c9(this))),!this.lci&&i>=.75&&(this.lci=!0,this.Co(new d9(this))),!this.dci&&i>=.9999&&(this.dci=!0,this.Co(new _9(this)))}Yp(){this.uci=!0,this.cci=!0,this.lci=!0,this.dci=!0}gn(){this.fn("d7",this.fci),this.fn("f7",this._ci)}constructor(t,i,e,s,n,r,h,o,a=[],u={},c={},l){super(),this.WN=t,this.zk=i,this.BRt=e,this.rci=s,this.IY=n,this.Kk=r,this.Jk=h,this.hci=a,this.aci=u,this.ER=c,this.fUt=l,this.ERt=new mo,this.ho=!1,this.uci=!1,this.cci=!1,this.lci=!1,this.dci=!1,this.fci=()=>this.Aui(this.WN),this._ci=()=>this.Aui(this.PN),this.ERt.w1t(o),this.yn("d7",this.fci),this.yn("f7",this._ci)}};r(),r();var A9=class extends Ha{fa(){return new v9(this.Xl.va)}constructor(t){super("h7"),this.Xl=t}},v9=class extends gg{constructor(t){super("addadbreak"),this.adBreak=t}};r();var m9,p9,y9,M9=class extends Ha{fa(){return new T9(this.Xl.va)}constructor(t){super("r7"),this.Xl=t}},T9=class extends gg{constructor(t){super("removeadbreak"),this.adBreak=t}},N9=class extends J0{g1t(t){this.Co(new A9(t))}m1t(t){this.Co(new M9(t))}constructor(){super()}},D9=class{get va(){return this.Xa||(this.Xa=function(t){return{get adBreaks(){return t.tGt.va},get currentAdBreak(){if(t.t7)return t.t7.va},get currentAds(){return t.t7?t.t7.Oc.va:(new mo).va},skip(){t.Yp()}}}(this)),this.Xa}get tGt(){return this.yGt}get t7(){return H_(this.yGt.Gu,(t=>t.ro))}get K9(){return this.t7?this.t7.Oc.Gu.filter((t=>t.ro)):[]}get gci(){if(0===this.tGt.U||0===this.wci.Mg().length)return;const t=this.wci.Mg().end(this.wci.Mg().length-1);return H_(this.tGt.Gu,(i=>i.Nwt(t)))}get pui(){return this.Aci}vui(t){if(0===t.length)return;const i=Ki.xn(t);for(const t of this.yGt.Gu.slice())j_(t.PN)&&i.Cn(0)>t.PN&&this.yGt.pN(t)}_ui(t){const i=!function(t){return j_(t.breakOffsets)}(t),e=i?this.sui.jui:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new mo;let r=0;for(const e of s.ads){const s=i?w9.ici(t,e):w9.tci(t,e);n.mN(s),t+=s.ct,r+=s.ct}const h=s.timeOffset+e,o=i?void 0:s.duration,a=new i9(h,o,n,i,this.vci);i&&this.mci.push({ARt:a,OSt:h+r}),this.yGt.mN(a)}}pci(t){const i=this.gci;i&&i.Hui(t+this.sui.jui)}wui(t){this.yci=t,this.yGt.Gu.forEach((i=>i.Kui(t)))}Yp(){const t=this.yci,i=this.t7;t&&i&&i.Zui(t)&&i.Yp()}yui(t,i){let e=[];for(const s of this.tGt.Gu)!s.qui&&s.zN>=t&&s.zN<i&&e.push(s);return e}gn(){this.wci.fn("timeupdate",this.Mci),this.sui.fn("Cui",this.Tci)}Zn(){for(const t of this.tGt.Gu){for(const i of t.Oc.Gu)i.Vo();t.Vo()}this.tGt.kL(),this.yci=void 0,this.mci=[]}constructor(t,i,e,s){this.mci=[],this.Tci=t=>{t.yI.ads&&this._ui(t.yI.ads),t.yI.currentBreakEnd&&this.pci(t.yI.currentBreakEnd)},this.Mci=t=>{if(0===this.mci.length||0===this.wci.Mg().length)return;const i=this.wci.Mg().end(this.wci.Mg().length-1);for(const t of this.mci.slice())j_(t.ARt.ct)?Et(this.mci,t):t.OSt<i&&(t.ARt.Hui(t.OSt),Et(this.mci,t))},this.wci=t,this.sui=i,this.yGt=new N9,this.vci=e,this.Aci=s,t.yn("timeupdate",this.Mci),this.sui.yn("Cui",this.Tci)}};r(),r(),r(),function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED"}(m9||(m9={})),function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED"}(p9||(p9={})),function(t){t[t.ADULT_LANGUAGE=1]="ADULT_LANGUAGE",t[t.SEXUAL_SITUATIONS=2]="SEXUAL_SITUATIONS",t[t.VIOLENCE=4]="VIOLENCE",t[t.DRUGS=8]="DRUGS"}(y9||(y9={}));var S9=class t{static Nci(i,e,s){const n=new yl(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.Ep(1),n.Ep(2),n.Ep(4),n.Ep(8),i.external_id,Boolean(i.is_ad),i.asset)}get va(){return this.Xa||(this.Xa=function(t){return{startTime:t.zN,endTime:t.PN,duration:t.ct,audioOnly:t.Dci,boundaryDetails:t.Sci,error:t.lt,tvRating:t.Ici,maxSlice:t.Eci,thumbPrefix:t.bci,sliceDuration:t.Lci,movieRating:t.kci,ownerId:t.Cci,metadata:t.FS,rates:t.xci,thumbnailResolutions:t.Oci,posterUrl:t.jci,defaultPosterUrl:t.zci,description:t.nM,hasAdultLanguage:t.Pci,hasSexualSituations:t.Bci,hasViolence:t.Rci,hasDrugSituations:t.Uci,externalId:t.Qci,isAd:t.Fci,assetId:t.Yci}}(this)),this.Xa}constructor(t,i,e,s,n,r,h,o,a,u,c,l,d,f,_,g,w,A,v,m,p,y,M,T,N){this.zN=t,this.PN=i,this.ct=e,this.Dci=s,this.Sci=n,this.lt=r,this.Ici=h,this.Eci=o,this.bci=a,this.Lci=u,this.kci=c,this.Cci=l,this.FS=d,this.xci=f,this.Oci=_,this.jci=g,this.zci=w,this.nM=A,this.Pci=v,this.Bci=m,this.Rci=p,this.Uci=y,this.Qci=M,this.Fci=T,this.Yci=N}};var I9=xr({duration:Ii,offset:Ii}),E9=xr({c3:I9}),b9=xr({c7:I9}),L9=xr({halftime:I9}),k9=si(oS(p9)),C9=si(oS(m9)),x9=xr({width:Al(yh,Ii),prefix:pi,bw:Ii,bh:Ii,height:Al(yh,Ii)}),O9=xr({audio_only:Ii,boundary_details:Al(yh,ki(Al(E9,b9,L9))),error:Ii,tv_rating:k9,max_slice:Ii,thumb_prefix:pi,slice_dur:Ii,movie_rating:C9,owner:pi,meta:nS,rates:ki(Ii),thumbs:ki(x9),poster_url:pi,duration:Ii,default_poster_url:pi,desc:pi,rating_flags:Ii,external_id:pi,is_ad:Ii,asset:pi}),j9=class{async Wat(t,i,e,s){const n=function(t,i,e){if(E8.wz(i))return[z9(t,i,e)];if(ki(E8).wz(i))return i.map((i=>z9(t,i,e)));if(b8.wz(i)){return(Yn(i.externalId)?i.externalId:[i.externalId]).map((s=>z9(t,"ext/"+i.userId+"/"+s,e)))}throw new k("Invalid asset id")}(t,i,s),r=n.map((t=>mu((()=>this.kui(t)),e)));return(await Promise.all(r)).filter(j_)}async kui(t){const i=this.dE.mI({iE:Kc.GET,zu:t,eE:nr.jI}),e=await i,s=await e.Cp();return O9.wz(s)||O9.vz(s,"AssetInfoResponse"),s}constructor(t){this.dE=t}};function z9(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}r(),r();var P9=class extends Ha{fa(){return new B9(this.sd.va)}constructor(t){super("Gci"),this.sd=t}},B9=class extends gg{constructor(t){super("removeasset"),this.asset=t}};r();var R9=class extends Ha{fa(){return new U9(this.sd.va)}constructor(t){super("Vci"),this.sd=t}},U9=class extends gg{constructor(t){super("addasset"),this.asset=t}},Q9=class extends J0{_ui(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.zN&&t.zN<e&&(e+=t.ct||0);this.mN(S9.Nci(n,s,e)),s=e}}g1t(t){this.Co(new R9(t))}m1t(t){this.Co(new P9(t))}constructor(){super()}};r(),r();var F9=class extends Ha{fa(){return new Y9(this.yI)}constructor(t){super("Wci"),this.yI=t}},Y9=class extends gg{constructor(t){super("preplayresponse"),this.response=t}};r();var Ui,G9=class extends Ha{fa(){return new V9(this.yI)}constructor(t){super("Hci"),this.yI=t}},V9=class extends gg{constructor(t){super("assetinforesponse"),this.response=t}},W9=class extends ha{bui(t){t&&this.Co(new F9(se(t)))}fui(t){t.forEach((t=>this.Co(new G9(t))))}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){let t;const i=this,e={get ads(){return i.$ai.va},get assets(){return i.tui.va},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}};return t=new ma(i,e),e}constructor(t,i,e){super(),this.$ai=t,this.tui=i,this.sui=e,e.yn("Cui",this.Ds),e.yn("xui",this.Ds)}},H9=class{qci(t,i){const e=new L8(t.KO),s=new P8(t.KO),n=function(t){if(t.verizonMedia&&j_(t.verizonMedia.defaultSkipOffset)){const i=t.verizonMedia.defaultSkipOffset;return B_(i)?i:-1}return-1}(i),r=function(t){const i=t.verizonMedia?t.verizonMedia.onSeekOverAd:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(i)}(i),h=new F8(s,t),o=new Y8(e,i),a=new D9(t,h,n,r),u=new j9(t.KO),c=new Q9,l=new W9(a,c,h);return new A8(t,h,o,a,l,u,c)}};tr((function(t){return class extends t{eui(t){super.ga(t)}nui(t,i){return super.D7(t,i)}Nui(t){super.P_(t)}Q_(){var t;return null!=(t=this.Xci.lt)?t:super.Q_()}Y_(){var t;return null!=(t=this.Xci.F_)?t:super.Y_()}P_(t){this.Xci.P_(t)}ga(t){this.Xci.ga(t)}D7(t,i){return this.Xci.D7(t,i)}fa(){const t=this.Xci.va;return Ou(super.fa(),{get verizonMedia(){return t}})}gn(){this.Xci.gn(),super.gn()}constructor(t,i){super(t,i),this.Xci=(new H9).qci(this,i)}}}),iu.F9),r(),r(),r(),r(),function(t){t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error"}(Ui||(Ui={})),r();var q9=class extends n0{fa(){return Kn(this)}get XYt(){return eh.HYt}get zN(){return this.WN}get oRt(){return this.VRt}constructor(t,i,e,s){super(t,i),this.VRt=s,this.WN=e}};r();var X9=class extends e0{get TEt(){return this.Zci}get XYt(){return eh.HYt}constructor(t,i,e){if(super(t,t,i),e){const t=new Date(e);PD(t)&&(this.Zci=t)}}},Z9=class{Qw(){this.Qo.yn(qo.Tv,this.qP),this.Qo.yn(t.Sh,this.cPt),this.Qo.yn(t.jh,this.lPt),this.Qo.yn(t.ZA,this.We),this.Qo.yn(t.kA,this.Mh),this.Qo.yn(t.ov,this.od),this.Qo.yn(t.uv,this.sWt),this.Qo.yn("presentationmodechange",this.Kci)}Rw(){this.Qo.fn(qo.Tv,this.qP),this.Qo.fn(t.Sh,this.cPt),this.Qo.fn(t.jh,this.lPt),this.Qo.fn(t.ZA,this.We),this.Qo.fn(t.kA,this.Mh),this.Qo.fn(t.ov,this.od),this.Qo.fn(t.uv,this.sWt),this.Qo.fn("presentationmodechange",this.Kci)}get Jci(){return this.$ci}get K9(){const t=this.Jci;if(!t)return[];const i=[],e=this.tli();for(const s of t.Oc)e>=s.zN&&this.Yoi<=s.zN+s.ct&&i.push(s);return i}tli(){return this.Qo.z_()-this.ili}eli(){if(this.sli)return;if(this.Qo.Td()!==1/0)return void(0===this.nli.length&&(this.sli=this.rli()));const t=()=>{var t;null==(t=this.hli)||t.e_(),this.hli=void 0,this.sli=void 0};this.hli=new Po,this.sli=this.oli(this.hli.a_).catch(this.q1).then(t,t)}async ali(){const t=x.min(1e3*2**this.uli,3e4);try{var i;await be(t,null==(i=this.hli)?void 0:i.a_),this.uli++}catch(t){if(Oi(t))return void(this.uli=0)}this.eli()}async oli(t){for(;Pi(t),!this.Qo.hg;){const i=ag.f_()-this.cli;if(i>1e4)await this.rli(t),this.cli=ag.f_(),this.uli=0;else{const e=1e4-i;await be(e,t)}}}lli(t){const i=t.TEt;if(i&&this.Qo.k_&&0===this.ili&&!this.dli&&0!==x.floor(this.Qo.Mg().start(0))){const e=(this.Qo.k_.getTime()-i.getTime())/1e3,s=this.Qo.z_()-t._Et;this.ili=s-e}}async rli(t){try{const i=await this.Qo.KO.mI({zu:this.fli}),e=await i.Lj(t);if(0===e.avails.length)return void(0!==this.nli.length&&(this.nli=[]));if(e.avails.length===this.nli.length&&e.avails[0].startTimeInSeconds===this.nli[0]._Et)return void this.lli(this.nli[0]);const s=[];for(const t of e.avails){const i=new X9(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new q9(i,Ur.TQt,e.startTimeInSeconds,e.trackingEvents);t.FKt(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.RKt(t)}s.push(i),this.lli(i)}this.nli=Xc(s,((t,i)=>t._Et-i._Et))}catch(t){throw yo(t),new b("Failed to poll MediaTailor tracking events")}}_li(){var t;null==(t=this.hli)||t.c_(),this.hli=void 0,this.sli=void 0,this.cli=-1/0}gli(){if(0===this.nli.length)return;const t=this.nli[this.nli.length-1],i=this.tli();if(t._Et+t.ZYt<this.Yoi){var e;this.$ci&&(null==(e=this.Qo.Oc)||e.Co(new Bh(this.$ci)),this.$ci=void 0)}else{for(const t of this.nli){const e=t._Et;if(!(e+t.ZYt<this.Yoi)&&(e<=i&&e+t.ZYt>this.Yoi)){var s;if(this.Jci===t)return;return this.$ci=t,void(null==(s=this.Qo.Oc)||s.Co(new ka(this.$ci)))}}var n;if(this.$ci)null==(n=this.Qo.Oc)||n.Co(new Bh(this.$ci)),this.$ci=void 0}}wli(){const t=this.K9;if(0===t.length)return;let i=[];for(const e of t){const t=e.oRt.filter((t=>na(this.Ali,t.eventType)));i=i.concat(t)}for(const t of i)this.vli(t.startTimeInSeconds)&&(t.eventType===Ui.COMPLETE&&this.mli(Ui.ENGAGED_VIEW),this.yli(t))}Mli(t,i){return i.oRt.filter((i=>Ei(i.eventType,t)))[0]}mli(t){const i=this.K9;if(0===i.length)return;const e=this.Mli(t,i[0]);e&&this.yli(e)}yli(t){this.Pni(t.eventType);for(const i of t.beaconUrls){const t={iE:Kc.GET,zu:i,$I:"",eE:nr.jI};0,W(this.Tli(t))}}Pni(t){let i;const e=this.K9;switch(t){case Ui.START:i=new tu(e[e.length-1],this.Qo.z_());break;case Ui.COMPLETE:i=new fa(e[0],this.Qo.z_());break;case Ui.FIRST_QUARTILE:i=new _0(e[0],this.Qo.z_());break;case Ui.MID_POINT:i=new ar(e[0],this.Qo.z_());break;case Ui.THIRD_QUARTILE:i=new A0(e[0],this.Qo.z_())}var s;void 0!==i&&(null==(s=this.Qo.Oc)||s.Co(i))}async Tli(t){const i=await this.Qo.KO.mI(t);i.TI}vli(t){const i=this.tli();return t>=this.Yoi&&t<i}gn(){this.Rw(),this._li(),this.Yoi=-1}constructor(t,i,e){this.cli=-1/0,this.$ci=void 0,this.ili=0,this.nli=[],this.Eoi=!1,this.UR=!1,this.Yoi=-1,this.hli=void 0,this.sli=void 0,this.uli=0,this.qP=()=>{this.eli()},this.lPt=()=>{this.mli(Ui.RESUME)},this.cPt=()=>{this._li(),this.mli(Ui.PAUSE)},this.We=()=>{this._li(),this.Yoi=-1},this.Mh=()=>{this._li()},this.od=()=>{-1===this.Yoi&&(this.Yoi=this.tli()),this.gli(),this.wli(),this.Yoi=this.tli()},this.sWt=()=>{if(this.Eoi!==this.Qo.Z_){this.Eoi=this.Qo.Z_;const t=this.Eoi?Ui.MUTE:Ui.UNMUTE;this.mli(t)}},this.Kci=()=>{if(this.UR!==this.Qo.cs()){this.UR=this.Qo.cs();const t=this.UR?Ui.FULL_SCREEN:Ui.EXIT_FULL_SCREEN;this.mli(t)}},this.q1=t=>{Oi(t)||(this.mli(Ui.ERROR),W(this.ali()))},this.Ali=[Ui.START,Ui.FIRST_QUARTILE,Ui.MID_POINT,Ui.THIRD_QUARTILE,Ui.COMPLETE,Ui.IMPRESSION,Ui.CREATIVE_VIEW],this.Qo=t,this.fli=i,this.dli=e,this.Qw()}};tr((function(t){return class extends t{ga(t){return this.Nli&&(this.Nli.gn(),this.Nli=void 0,this.fft()),super.ga(t)}async D7(t,i){if(!t||!function(t){return t.sources.some((t=>t.integration===ev.MEDIATAILOR))}(t))return super.D7(t,i);try{const e=await this.Dli(t,i);await super.D7(e,i)}catch(t){this.hB(new ce(le.MANIFEST_LOAD_ERROR,t.message,t))}}P_(t){var i;(null==(i=this.Nli)?void 0:i.Jci)||super.P_(t)}Q_(){var t;return null!=(t=this.vP)?t:super.Q_()}Y_(){var t;return null!=(t=this.mP)?t:super.Y_()}hB(t){this.vP=ne(t),this.mP=t,this.Co(new me(t))}fft(){this.vP=void 0,this.mP=void 0}async Dli(t,i){let e=[];for(const s of t.sources){if(!Cv(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.Sli(t,i);Pi(i);const r=oe({},t,{integration:void 0,src:n});e.push(r)}const s=se(t);return s.sources=e,s}async Sli(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new b("Could not find MediaTailor session initialization url");const n=s[0],r=Va(e,"?ads."),h=r?{zu:e,eE:nr.jI}:{zu:e,iE:Kc.POST,$I:JSON.stringify({adParams:t.adParams}),eE:nr.jI},o=await mu((()=>this.Ili(h,i)),i);let a;try{if(a=n+o.manifestUrl,!r){const t=n+o.trackingUrl,i=Ev(a);this.Nli=new Z9(this,t,i)}}catch(t){throw new b("Something went wrong parsing the MediaTailor session initialization response")}return a}async Ili(t,i){try{const e=await this.KO.mI(t);return await e.Lj(i)}catch(t){throw yo(t),new b("Failed to initialize MediaTailor session manifest")}}gn(){this.Nli&&(this.Nli.gn(),this.Nli=void 0),this.fft(),super.gn()}constructor(t,i){super(t,i),this.Nli=void 0,this.vP=void 0,this.mP=void 0}}}),iu.G9);export{r as a,ag as b,li as c,j_ as d,Yn as e,lt as f,ae as g,oo as h,hi as i,eB as j,ei as k,VN as l,$u as m,WN as n,HN as o,ZN as p,KN as q,oB as r,aB as s,oe as t,Va as u,ew as v,Xc as w,Ji as x,Li as y,H_ as z,Et as A,na as B,Ri as C,i as D,gg as E,le as F,Yu as G,t as H,Tg as I,Ou as J,Ph as K,Ng as L,Ig as M,Ee as N,$v as O,ja as P,Bt as Q,Ht as R,Pt as S,ey as T,hy as U,rv as V,wc as W,iu as X,tr as Y,Oj as Z,Fv as _,Mn as $,Wv as aa,Ki as ba,Pc as ca,sI as da,rI as ea,nI as fa,aI as ga,cI as ha,$r as ia,CI as ja,Vs as ka,th as la,PE as ma,GE as na,qE as oa,kc as pa,Cc as qa,ZE as ra,ie as sa,Qx as ta,Yx as ua,Gx as va,Wx as wa,Hx as xa,qx as ya,gO as za,wO as Aa,AO as Ba,vO as Ca,pO as Da,Nj as Ea,Dj as Fa,Pj as Ga,iz as Ha,ez as Ia,sz as Ja,nz as Ka,oU as La,aU as Ma,uU as Na,cU as Oa,lV as Pa,dV as Qa,eh as Ra,l$ as Sa,y$ as Ta,j$ as Ua,yt as Va,t5 as Wa,Y5 as Xa,q5 as Ya,V8 as Za};