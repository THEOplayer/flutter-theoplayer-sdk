/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 8.2.0
 Created: 2024-10-10T09:11:44.266Z
 */
var Ui,r,Rh,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==s?s:"undefined"!=typeof global?global:this,s=a.window,h=a.document,Nl=a.location,Dl=a.navigator,u=a.setTimeout,c=a.clearTimeout,v=a.setInterval,m=a.clearInterval,g=a.Error,b=a.TypeError,w=(a.SyntaxError,a.Object),_=a.Math,x=a.parseInt,C=a.parseFloat,S=a.isNaN,j=a.Uint8Array,Il=a.Worker,El=(a.WorkerGlobalScope,a.XMLHttpRequest),Ll=w.create,Ol=w.defineProperty,Pl=w.getOwnPropertyDescriptor,zl=w.getOwnPropertyNames,Bl=w.getPrototypeOf,Rl=w.prototype.hasOwnProperty,re=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),Vs=(t,i,e)=>(e=null!=t?Ll(Bl(t)):{},((t,i,e,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let n of zl(i))Rl.call(t,n)||n===e||Ol(t,n,{get:()=>i[n],enumerable:!(s=Pl(i,n))||s.enumerable});return t})(!i&&t&&t.__esModule?e:Ol(e,"default",{value:t,enumerable:!0}),t)),Ul=re(((t,i)=>{i.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Ql=re(((t,i)=>{i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=e+e,o=s+s,a=n+n,u=e*h,c=s*h,l=s*o,d=n*h,f=n*o,_=n*a,g=r*h,w=r*o,v=r*a;return t[0]=1-l-_,t[1]=c+v,t[2]=d-w,t[3]=0,t[4]=c-v,t[5]=1-u-_,t[6]=f+g,t[7]=0,t[8]=d+w,t[9]=f-g,t[10]=1-u-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Fl=re(((t,i)=>{i.exports=function(t,i,e){var s,n,r,h=e[0],o=e[1],a=e[2],u=_.sqrt(h*h+o*o+a*a);if(_.abs(u)<1e-6)return null;return h*=u=1/u,o*=u,a*=u,s=_.sin(i),n=_.cos(i),r=1-n,t[0]=h*h*r+n,t[1]=o*h*r+a*s,t[2]=a*h*r-o*s,t[3]=0,t[4]=h*o*r-a*s,t[5]=o*o*r+n,t[6]=a*o*r+h*s,t[7]=0,t[8]=h*a*r+o*s,t[9]=o*a*r-h*s,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Yl=re(((t,i)=>{i.exports=function(t,i){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}})),Gl=re(((t,i)=>{i.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}})),Vl=re(((t,i)=>{i.exports=function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],v=i[15],A=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-l*_,D=c*w-d*_,S=c*v-f*_,I=l*w-d*g,E=l*v-f*g,b=d*v-f*w,L=A*b-m*E+p*I+y*S-M*D+T*N;if(!L)return null;return L=1/L,t[0]=(o*b-a*E+u*I)*L,t[1]=(n*E-s*b-r*I)*L,t[2]=(g*T-w*M+v*y)*L,t[3]=(d*M-l*T-f*y)*L,t[4]=(a*S-h*b-u*D)*L,t[5]=(e*b-n*S+r*D)*L,t[6]=(w*p-_*T-v*m)*L,t[7]=(c*T-d*p+f*m)*L,t[8]=(h*E-o*S+u*N)*L,t[9]=(s*S-e*E-r*N)*L,t[10]=(_*M-g*p+v*A)*L,t[11]=(l*p-c*M-f*A)*L,t[12]=(o*D-h*I-a*N)*L,t[13]=(e*I-s*D+n*N)*L,t[14]=(g*m-_*y-w*A)*L,t[15]=(c*y-l*m+d*A)*L,t}})),Wl=re(((t,i)=>{i.exports=function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],g=i[12],w=i[13],v=i[14],A=i[15],m=e[0],p=e[1],y=e[2],M=e[3];return t[0]=m*s+p*o+y*l+M*g,t[1]=m*n+p*a+y*d+M*w,t[2]=m*r+p*u+y*f+M*v,t[3]=m*h+p*c+y*_+M*A,m=e[4],p=e[5],y=e[6],M=e[7],t[4]=m*s+p*o+y*l+M*g,t[5]=m*n+p*a+y*d+M*w,t[6]=m*r+p*u+y*f+M*v,t[7]=m*h+p*c+y*_+M*A,m=e[8],p=e[9],y=e[10],M=e[11],t[8]=m*s+p*o+y*l+M*g,t[9]=m*n+p*a+y*d+M*w,t[10]=m*r+p*u+y*f+M*v,t[11]=m*h+p*c+y*_+M*A,m=e[12],p=e[13],y=e[14],M=e[15],t[12]=m*s+p*o+y*l+M*g,t[13]=m*n+p*a+y*d+M*w,t[14]=m*r+p*u+y*f+M*v,t[15]=m*h+p*c+y*_+M*A,t}})),Hl=re(((t,i)=>{i.exports=function(t,i,e,s,n){var r=1/_.tan(i/2),h=1/(s-n);return t[0]=r/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*s*h,t[15]=0,t}})),ql=re(((t,i)=>{i.exports=function(t,i,e,s){var n,r,h,o,a,u,c,l,d,f,g,w,v,A,m,p,y,M,T,N,D,S,I,E,b=s[0],L=s[1],k=s[2],x=_.sqrt(b*b+L*L+k*k);if(_.abs(x)<1e-6)return null;b*=x=1/x,L*=x,k*=x,n=_.sin(e),r=_.cos(e),h=1-r,o=i[0],a=i[1],u=i[2],c=i[3],l=i[4],d=i[5],f=i[6],g=i[7],w=i[8],v=i[9],A=i[10],m=i[11],p=b*b*h+r,y=L*b*h+k*n,M=k*b*h-L*n,T=b*L*h-k*n,N=L*L*h+r,D=k*L*h+b*n,S=b*k*h+L*n,I=L*k*h-b*n,E=k*k*h+r,t[0]=o*p+l*y+w*M,t[1]=a*p+d*y+v*M,t[2]=u*p+f*y+A*M,t[3]=c*p+g*y+m*M,t[4]=o*T+l*N+w*D,t[5]=a*T+d*N+v*D,t[6]=u*T+f*N+A*D,t[7]=c*T+g*N+m*D,t[8]=o*S+l*I+w*E,t[9]=a*S+d*I+v*E,t[10]=u*S+f*I+A*E,t[11]=c*S+g*I+m*E,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]);return t}})),Xl=re(((t,i)=>{i.exports=function(t,i,e){var s,n,r,h,o,a,u,c,l,d,f,_,g=e[0],w=e[1],v=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*v+i[12],t[13]=i[1]*g+i[5]*w+i[9]*v+i[13],t[14]=i[2]*g+i[6]*w+i[10]*v+i[14],t[15]=i[3]*g+i[7]*w+i[11]*v+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+o*w+l*v+i[12],t[13]=n*g+a*w+d*v+i[13],t[14]=r*g+u*w+f*v+i[14],t[15]=h*g+c*w+_*v+i[15]);return t}}));function Ot(t,i){return Kl(t.slice(),i)}function Zl(t,i){const e=Kl(t,i);return e!==t&&Jl(e,void 0,t.length,t),t}function Kl(t,i){let e=t;const s=e.length;if(s<=1)return e;let n=new Array(s);for(let t=1;t<s;t*=2){Jl(e,i,t,n);const s=e;e=n,n=s}return e}function Jl(t,i,e,s){const n=t.length;let r=0;const h=2*e;let o,a,u,c,l;for(a=0;a<n;a+=h)for(u=a+e,o=u+e,u>n&&(u=n),o>n&&(o=n),c=a,l=u;;)if(c<u&&l<o)i&&i(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<o))break;s[r++]=t[l++]}}(r=Ui||(Ui={}))[r.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",r[r.LICENSE_ERROR=2e3]="LICENSE_ERROR",r[r.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",r[r.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",r[r.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",r[r.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",r[r.SOURCE_INVALID=3e3]="SOURCE_INVALID",r[r.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",r[r.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",r[r.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",r[r.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",r[r.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",r[r.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",r[r.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",r[r.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",r[r.MEDIA_ABORTED=5004]="MEDIA_ABORTED",r[r.NETWORK_ERROR=6e3]="NETWORK_ERROR",r[r.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",r[r.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",r[r.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",r[r.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",r[r.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",r[r.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",r[r.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",r[r.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",r[r.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",r[r.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",r[r.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",r[r.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",r[r.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",r[r.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",r[r.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",r[r.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",r[r.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",r[r.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",r[r.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",r[r.AD_ERROR=1e4]="AD_ERROR",r[r.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",r[r.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",r[r.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",r[r.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR",r[r.THEO_LIVE_UNKNOWN_ERROR=13e3]="THEO_LIVE_UNKNOWN_ERROR",r[r.THEO_LIVE_CHANNEL_NOT_FOUND=13001]="THEO_LIVE_CHANNEL_NOT_FOUND",r[r.THEO_LIVE_END_OF_DEMO=13002]="THEO_LIVE_END_OF_DEMO",r[r.THEO_LIVE_ANALYTICS_ERROR=13003]="THEO_LIVE_ANALYTICS_ERROR",function(t){t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE",t[t.THEOLIVE=13]="THEOLIVE"}(Rh||(Rh={})),function(t){t.fromCode=function(i){const e=_.floor(i/1e3);if(e in t)return e;throw new b("Invalid error code: "+i)}}(Rh||(Rh={}));var Qh={}.hasOwnProperty,Se={}.toString;function Po(t){return null!=t}function $l(t){return void 0===t}var fh=Array.isArray||function(t){return"[object Array]"===Se.call(t)};function Tn(t){return Ut(t)&&Qh.call(t,"length")&&ci(t.length)}function Ut(t){return"object"==typeof t&&null!==t}function td(t){return Ut(t)&&t.constructor&&t.constructor===w}function Qs(t){return"string"==typeof t}function id(t){return"boolean"==typeof t}function ya(t){return Po(t)&&"function"==typeof t.then}function ed(t){return"[object Date]"===Se.call(t)}function ci(t){return"number"==typeof t}function sd(t){return"function"==typeof t}function kn(t){return sd(t)||Ut(t)}var Ri,jh=9007199254740991,nd=2**-52;function os(t,i,e){return _.min(_.max(t,i),e)}function M(t,i,e){return t===i||_.abs(t-i)<=e}function rd(t,i){if(t===i)return!0;const e=_.abs(t-i);if(e<nd)return!0;return e<_.max(_.abs(t),_.abs(i))*nd}function hd(t,i){return t%i+(t<0?i:0)}function od(t){return t!=t}function ad(t,i){return t===i||od(t)&&od(i)}function ud(t,i){let e=t,s=i;for(;0!==s;){const t=e%s;e=s,s=t}return e<0?-e:e}function cd(t,i){return t.reduce(((t,e)=>t+i(e)),0)}!function(t){t[t.Zr=0]="Zr",t[t.ul=1]="ul",t[t.hd=-1]="hd"}(Ri||(Ri={}));var ru=(t,i)=>(0|t)-(0|i),rr=(t,i)=>t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1;function ld(t,i,e){return M(t,i,e)?0:rr(t,i)}var dd=(t,i)=>rd(t,i)?0:rr(t,i);var fd="function"==typeof Array.prototype.find?(t,i)=>t.find(i):(t,i)=>{const e=tc(t,i);return-1===e?void 0:t[e]},Vt=fd,_d="function"==typeof Array.prototype.findLast?(t,i)=>t.findLast(i):(t,i)=>{const e=wd(t,i);return-1===e?void 0:t[e]},gd=_d,tc="function"==typeof Array.prototype.findIndex?(t,i)=>t.findIndex(i):(t,i)=>{for(let e=0;e<t.length;e+=1){if(i(t[e],e,t))return e}return-1},wd="function"==typeof Array.prototype.findLastIndex?(t,i)=>t.findLastIndex(i):(t,i)=>{for(let e=t.length-1;e>=0;e-=1){if(i(t[e],e,t))return e}return-1};function Qr(t,i){const e=t.indexOf(i);return-1!==e&&(Kn(t,e),!0)}function Kn(t,i){0===i?t.shift():t.splice(i,1)}function vd(t,i){const e=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===i){n++,e.length-=1;break}e[s++]=t[n++]}for(;n<t.length;)e[s++]=t[n++];return e}function qo(t,i){return-1!==t.indexOf(i)}function Ad(t,i,e){if(t===i)return!0;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s+=1)if(!e(t[s],i[s]))return!1;return!0}function No(t){t.length=0}function se(t,i){if(t.length!==i.length)return!1;for(const e of t)if(!qo(i,e))return!1;return!0}Array.prototype.flat;var A="function"==typeof Array.prototype.flatMap?(t,i)=>t.flatMap(i):(t,i)=>{const e=[];for(let s=0;s<t.length;s++)e.push(...i(t[s],s));return e};function md(t,i){return yd(t,((t,e)=>rr(i(t),i(e))))}function pd(t,i){return Md(t,((t,e)=>rr(i(t),i(e))))}function yd(t,i){if(0!==t.length)return t.reduce(((t,e)=>i(t,e)<=0?t:e))}function Md(t,i){return yd(t,((t,e)=>i(e,t)))}function Td(t){return t.filter(((i,e)=>t.indexOf(i)===e))}function Nd(t,i){return Promise.all(t.map(i)).then((i=>t.filter(((t,e)=>i[e]))))}function Dd(t,i,e){if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(!e(t[s],i[s]))return!1;return!0}function Sd(){const t=w.create(null);return t.Nd=void 0,delete t.Nd,t}function ke(){return new Ld}function I(){return new kd}function Id(t){const i=ke();for(const e in t)Qh.call(t,e)&&i.set(e,t[e]);return i}function Ed(t){const i=[];return t.forEach((t=>i.push(t))),i}var bd="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,Ld=bd||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,i){this.index=0,this.data=t,this.selector=i,this.keys=w.keys(t)}}return class{get(t){return this.data[t]}set(t,i){return this.has(t)||this.size++,this.data[t]=i,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=Sd(),this.size=0}keys(){return new t(this.data,((t,i)=>i))}values(){return new t(this.data,((t,i)=>t[i]))}entries(){return new t(this.data,((t,i)=>[i,t[i]]))}forEach(t){for(const i in this.data)t(this.data[i],i)}constructor(){this.data=Sd(),this.size=0}}}();var kd=bd||function(){class t{next(){const t=this.Dd.next();return t.done?t:{value:this.Id(t.value),done:!1}}constructor(t,i){this.Dd=t,this.Id=i}}return class{get size(){return this.Ld.size}get(t){return this.Ld.get(""+t)}set(t,i){return this.Ld.set(""+t,i),this}has(t){return this.Ld.has(""+t)}delete(t){return this.Ld.delete(""+t)}clear(){this.Ld.clear()}keys(){return new t(this.Ld.keys(),(t=>Number(t)))}values(){return this.Ld.values()}entries(){return new t(this.Ld.entries(),(t=>{let[i,e]=t;return[Number(i),e]}))}forEach(t){this.Ld.forEach(((i,e)=>{t(i,Number(e))}))}constructor(){this.Ld=ke()}}}();var xd=function(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];g.apply(this,i)};(xd.prototype=w.create(g.prototype)).constructor=xd;var i,Jo=class extends xd{get name(){return"BaseError"}constructor(t,i){super(),this.message=t||"Unknown error",this.cause=i,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}},Cd=class{Od(){if(!this.zd&&!this.Bd){this.zd=!0;for(const t of this.Rd.slice())t();this.Ud()}}Ud(){if(!this.Bd){this.Bd=!0;for(const t of this.Qd.slice())t();No(this.Rd),No(this.Qd)}}Fd(t){this.Bd||this.Rd.push(t)}Yd(t){this.Bd||Qr(this.Rd,t)}Gd(t){this.Bd||this.Qd.push(t)}Vd(t){this.Bd||Qr(this.Qd,t)}constructor(){this.zd=!1,this.Bd=!1,this.Rd=[],this.Qd=[]}},Wr=class t{get Wd(){return this.Hd}qd(){this.Hd.Od()}Ud(){this.Hd.Ud()}Xd(t){const i=this.Hd;if(i.zd)return;if(t.zd)return void i.Od();if(i.Bd||t.Bd)return;const e=()=>{s(),i.Od()},s=()=>{t.Yd(e),t.Vd(s),i.Yd(e),i.Vd(s)};t.Fd(e),t.Gd(s),i.Fd(e),i.Gd(s)}Zd(){const i=new t,e=new t,s=i.Wd,n=e.Wd,r=this.Hd,h=()=>{s.zd&&n.Bd||n.zd&&s.Bd?r.Od():s.Bd&&n.Bd&&r.Ud()};s.Fd(h),n.Fd(h),s.Gd(h),n.Gd(h),i.Xd(r),e.Xd(r);return r.Gd((()=>{s.Yd(h),n.Yd(h),s.Vd(h),n.Vd(h)})),[i,e]}constructor(){this.Hd=new Cd}};var na=()=>{},Od=t=>t;function ze(t,e){let s=-1/0;return function(){for(var n=arguments.length,r=new Array(n),h=0;h<n;h++)r[h]=arguments[h];const o=i.Kd();o-s>=e&&(t.apply(this,r),s=o)}}function jd(t,e){let s=0;return function(){for(var n=arguments.length,r=new Array(n),h=0;h<n;h++)r[h]=arguments[h];const o=this;0!==s&&i.Jd(s),s=i.$d((()=>{s=0,t.apply(o,r)}),e)}}function Oa(t){let i;return()=>(void 0!==t&&(i=t(),t=void 0),i)}var Sn=class extends Jo{get name(){return"AbortError"}constructor(t,i){super(t||"Aborted",i)}};function ut(t){return t instanceof g&&"AbortError"===t.name}function fo(t){if(t&&t.zd)throw new Sn}function yo(t){if(ut(t))throw t}function Pd(t){if(!ut(t))throw t}function Ys(t,i){return i?new Promise(((e,s)=>{if(i.zd)return t.catch(na),s(new Sn);const n=()=>{i.Yd(n),s(new Sn)};i.Fd(n),t.then((t=>{i.Yd(n),e(t)}),(t=>{i.Yd(n),s(t)}))})):t}function Ir(t,i){return t.then((t=>(i.qd(),t)),(t=>{throw i.qd(),t}))}function Vh(t,i){const e=new Wr;return i&&e.Xd(i),Ir(t(e.Wd),e)}var zd=Promise.resolve(),wc="function"==typeof queueMicrotask?queueMicrotask:t=>{zd.then(t)};function ha(t){t.then(na,na)}async function P(t){try{return await Promise.all(t)}catch(i){throw await Promise.all(t.map((t=>t.catch(na)))),i}}function N(t,e){return new Promise(((s,n)=>{if(void 0!==e&&e.zd)return void n(new Sn);const r=i.$d((()=>{void 0!==e&&e.Yd(h),s()}),t),h=()=>{i.Jd(r),n(new Sn)};void 0!==e&&e.Fd(h)}))}function Bd(t,i){return Vh((e=>Promise.race([t,N(i,e).then((()=>{throw new g("Timeout")}))])))}function Rd(t,i,e){if("function"==typeof e)e.call(t,i);else for(const s of e)s.call(t,i)}var Ud,Bo=class{yn(t,i){if("function"==typeof i)if("string"==typeof t)this.tf(t,i);else for(const e of t)this.tf(e,i)}tf(t,i){const e=this.if[t];void 0===e?this.if[t]=i:"function"==typeof e?this.if[t]=[e,i]:0===this.ef?e.push(i):this.if[t]=e.concat(i)}sf(t){if("function"!=typeof t)return;const i=this.nf;void 0===i?this.nf=t:"function"==typeof i?this.nf=[i,t]:0===this.ef?i.push(t):this.nf=i.concat(t)}Vo(){this.if=Sd(),this.nf=void 0}Co(t){this.ef++;const i=this.if[t.type],e=this.nf;void 0!==i&&Rd(this.rf,t,i),void 0!==e&&Rd(this.rf,t,e),this.ef--}fn(t,i){if("function"==typeof i)if("string"==typeof t)this.hf(t,i);else for(const e of t)this.hf(e,i)}hf(t,i){const e=this.if[t];void 0!==e&&("function"==typeof e?e===i&&(this.if[t]=void 0):0===this.ef?Qr(e,i):this.if[t]=vd(e,i))}uf(t){if("string"==typeof t)this.if[t]=void 0;else for(const i of t)this.if[i]=void 0}cf(t){const i=this.nf;void 0!==i&&("function"==typeof i?i===t&&(this.nf=void 0):0===this.ef?Qr(i,t):this.nf=vd(i,t))}lf(t,i){return new Promise(((e,s)=>{if(i&&i.zd)return s(new Sn);const n=t=>{h(),e(t)},r=()=>{h(),s(new Sn)},h=()=>{this.fn(t,n),i&&i.Yd(r)};this.yn(t,n),i&&i.Fd(r)}))}constructor(t){this.if=Sd(),this.nf=void 0,this.ef=0,this.Ds=t=>{this.Co(t)},this.rf=null!=t?t:this}},hi=class extends Bo{Co(t){wc((()=>{super.Co(t)}))}},dt=class extends Bo{sf(t){super.sf(t)}cf(t){super.cf(t)}},Qd=class extends dt{},Fd=class extends dt{get ht(){return this.df()}df(){return this._f.ht}gf(){return this._f.gf()}get wf(){return this.vf()}vf(){return this._f.wf}get Af(){return this.mf()}set Af(t){this.pf(t)}mf(){return this._f.Af}pf(t){this._f.Af=t}get bt(){return this.yf()}yf(){return this._f.bt}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this._f.Mf}Nf(t,i){this._f.Nf(t,i)}get ct(){return this.Td()}Td(){return this._f.ct}get we(){return this.Df()}Df(){return this._f.we}get Sf(){return this.If()}If(){return this._f.Sf}get lt(){return this.Ef()}get bf(){return this.Lf()}Ef(){return this._f.lt}Lf(){return this._f.bf}get kf(){return this.xf()}xf(){return this._f.kf}get Cf(){return this.Of()}Of(){return this._f.Cf}get jf(){return this.Pf()}Pf(){return this._f.jf}get zf(){return this.Bf()}set zf(t){this.Rf(t)}Bf(){return this._f.zf}Rf(t){this._f.zf=t}get Uf(){return this.Qf()}Qf(){return this._f.Uf}get Ff(){return this.Yf()}Yf(){return this._f.Ff}get Gf(){return this.Vf()}set Gf(t){this.Wf(t)}Vf(){return this._f.Gf}Wf(t){this._f.Gf=t}get Hf(){return this.qf()}qf(){return this._f.Hf}get Xf(){return this.Zf()}set Xf(t){this.Kf(t)}Zf(){return this._f.Xf}Kf(t){this._f.Xf=t}get Jf(){return this.$f()}$f(){return this._f.Jf}get t_(){return this.i_()}i_(){return this._f.t_}get e_(){return this.s_()}s_(){return this._f.e_}Wa(){return this._f.Wa()}ga(t,i){return this._f.ga(t,i)}get nt(){return this.n_()}n_(){return this._f.nt}get r_(){return this.h_()}h_(){return this._f.r_}get rt(){return this.o_()}o_(){return this._f.rt}get a_(){return this.u_()}u_(){return this._f.a_}get c_(){return this.l_()}set c_(t){this.d_(t)}get f_(){return this.__()}__(){return this._f.f_}l_(){return this._f.c_}d_(t){this._f.c_=t}get g_(){return this._f.g_}set g_(t){this._f.g_=t}w_(){return this._f.w_()}v_(){return this._f.v_()}ur(t){this._f.ur(t)}ar(){this._f.ar()}be(){this._f.be()}A_(){this._f.A_()}m_(){this._f.m_()}p_(){this._f.p_()}ge(){this._f.ge()}y_(){return this._f.y_()}M_(){return this._f.M_()}T_(){this._f.T_()}N_(){this._f.N_()}tr(){return this._f.tr()}D_(){this._f.D_()}S_(){this._f.S_()}I_(t){return this._f.I_(t)}E_(t){return!1}async gn(){this.Vo(),await this._f.gn()}constructor(t){super(),this.b_=t=>{this.E_(t)||this.Co(t)},this._f=t,t.sf(this.b_)}};!function(t){t.L_="k_",t.x_="C_"}(Ud||(Ud={}));var wn=class{constructor(t,i=new Date){this.type=t,this.date=i}},hl=class extends wn{get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}constructor(t,i){super(t,i),this.Xa=void 0}};function Yd(t){return Boolean(t&&t.va)}var qt,ja=class extends hl{constructor(t){super(t)}},Y=class extends wn{constructor(t){super(t)}},Gd=class extends ja{fa(){return new Vd(this.Lt.va)}constructor(t){super(Ud.L_),this.Lt=t}},Vd=class extends Y{constructor(t){super("addtrack"),this.track=t}},Wd=class extends ja{fa(){return new Hd(this.Lt.va)}constructor(t){super(Ud.x_),this.Lt=t}},Hd=class extends Y{constructor(t){super("removetrack"),this.track=t}};!function(t){t.O_="j_",t.P_="z_",t.B_="R_",t.U_="Q_",t.F_="Y_",t.G_="V_",t.ra="W_",t.H_="q_",t.X_="Z_",t.K_="Yn",t.J_="eg",t.rg="hg",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality"}(qt||(qt={}));var Pn=class extends Bo{get og(){return this.ag}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}get U(){return this.ag.length}cg(t){return this.ag[t]}tt(t){return!(!t||qo(this.ag,t))&&(this.ag.push(t),this.Xa&&this.Xa.push(t.va),t.yn(qt.ra,this.Ds),this.Co(new Gd(t)),!0)}it(t){if(!t)return!1;const i=this.ag.indexOf(t);return!(i<0)&&(Kn(this.ag,i),this.Xa&&Kn(this.Xa,i),t.fn(qt.ra,this.Ds),this.Co(new Wd(t)),!0)}dg(t){return qo(this.ag,t)}tr(){const t=this.ag;for(let i=t.length-1;i>=0;i-=1)this.it(t[i])}gn(){this.tr(),this.Vo()}constructor(){super(),this.ag=[],this.Xa=void 0}},no=class extends ja{fa(){return new qd(this.Lt.va)}constructor(t){super(qt.ra),this.Lt=t}},qd=class extends Y{constructor(t){super("change"),this.track=t}},Ie=class extends Pn{get fg(){return this._g}set fg(t){const i=this._g;if(t!==i){if(i){this.gg(i);for(const e of i.og)t&&t.dg(e)||this.it(e)}if(this._g=t,t){const i=[];for(const e of t.og)this.tt(e),this.wg(e)&&i.push(e);this.vg(t);for(const t of i)t.Co(new no(t))}}}vg(t){t.yn(Ud.L_,this.Ag),t.yn(Ud.x_,this.pg)}gg(t){t.fn(Ud.L_,this.Ag),t.fn(Ud.x_,this.pg)}gn(t){!t&&this._g&&this._g.gn(),super.gn()}constructor(){super(),this._g=void 0,this.Ag=t=>{const i=t.Lt;this.tt(i)},this.pg=t=>{const i=t.Lt;this.it(i)}}},Xd=w.freeze||Od;function Zd(t,i,e){w.defineProperty(t,i,{writable:!1,enumerable:!0,value:e})}function Kd(t){return Xd(t)}function lt(t,i){for(const e of w.getOwnPropertyNames(i))w.defineProperty(t,e,w.getOwnPropertyDescriptor(i,e));return t}function Ms(t){if(td(t)){const i={};for(const e in t)Qh.call(t,e)&&(i[e]=Ms(t[e]));return i}if(fh(t)){const i=new Array(t.length);for(let e=0;e<i.length;e++)e in t&&(i[e]=Ms(t[e]));return i}return t}function Dc(t,i){return t===i||!(!t||!i)&&(!(!Ut(t)||!Ut(i))&&(Tn(t)?!!Tn(i)&&function(t,i){const e=t.length,s=i.length;if(e!==s)return!1;for(let s=0;s<e;s+=1)if(!Dc(t[s],i[s]))return!1;return!0}(t,i):!Tn(i)&&function(t,i){const e=w.keys(t),s=w.keys(i);if(!e||!s||e.length!==s.length)return!1;for(const s of e)if(!Qh.call(i,s)||!Dc(t[s],i[s]))return!1;return!0}(t,i)))}function Jd(t,i){if(!Ut(t))return!1;for(const e of i)if(!(e in t))return!1;return!0}function $d(t,i){return t.constructor===i.constructor}function tf(t){const i={};for(const e of w.keys(t)){const s=t[e];null!=s&&(i[e]=s)}return i}function ur(t){const i={};for(const e of w.keys(t)){const s=t[e];if(Tn(s)){const t=[];for(let i=0;i<s.length;i+=1){const e=s[i];if(null!=e){const i=Ut(e)?ur(e):e;t.push(i)}}i[e]=t}else null!=s&&(i[e]=Ut(s)?ur(s):s)}return i}function we(t){let i=t;if("string"==typeof i){if(i=i.toLowerCase(),"true"===i)return!0;if("false"===i)return!1}return Boolean(i)}function Cc(t){return Po(t)?we(t):void 0}function pc(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function ef(t){const i=pc(t);if(S(i))throw new g("Expected a valid number.");return i}function cs(t){return"string"==typeof t?t:""}function sf(t,i){if(!Tn(t))return[];const e=0|t.length,s=new Array(e);for(let n=0;n<e;n++)s[n]=i(t[n]);return s}function Ko(t,i){let e;return e=Tn(t)?sf(t,i):i(t),e}var sl,nf=[Ud.L_,Ud.x_,qt.ra];function rf(t){let i;const e=t.og.map((t=>t.va));return e.item=i=>{const e=0|i,s=t.cg(e);return s&&s.va||void 0},e.addEventListener=(t,e)=>{i.yn(t,e)},e.removeEventListener=(t,e)=>{i.fn(t,e)},i=new hi(e),t.yn(nf,(t=>i.Co(t.va))),e}function hf(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function of(){}function ni(t){const i=[qt.K_,qt.ra,qt.J_,qt.rg,qt.QUALITY_UNAVAILABLE];let e;const s={get activeQuality(){return t.yg&&t.yg.va},get enabled(){return t.Rt},set enabled(i){t.Rt=we(i)},get id(){return t.o},get uid(){return t.Mg},get kind(){return t.zt},get label(){return t.kh},set label(i){t.kh=cs(i)},get accessibility(){var i,e;return null!=(e=null==(i=t.Tg)?void 0:i.map(hf))?e:[]},get language(){return t.gs},get qualities(){return t.Ng.va},set targetQuality(i){let e;e=i?function(t,i){const e=[];for(const s of t.Ng.og)for(const t of i)s.va===t&&e.push(s);return e}(t,fh(i)?i:[i]):[],e.length>0?t.Dg=e:t.Dg=void 0},get targetQuality(){if(t.Dg)return 1===t.Dg.length?t.Dg[0].va:t.Dg.map((t=>t.va))},addEventListener(t,i){const s=Ko(t,cs);e.yn(s,i)},removeEventListener(t,i){const s=Ko(t,cs);e.fn(s,i)}};return e=new hi(s),t.yn(i,(t=>e.Co(t.va))),w.defineProperty(s,"constructor",{value:of}),s}function af(){}function uf(t){const i=rf(t);return w.defineProperty(i,"constructor",{value:af}),i}!function(t){t[t.Sg=0]="Sg",t[t.Ig=1]="Ig",t[t.Eg=2]="Eg",t[t.Lg=3]="Lg",t[t.xg=4]="xg",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.Cg=7]="Cg"}(sl||(sl={}));var Or,Nt,vo=class extends Ie{fa(){return uf(this)}wg(t){return t.Rt}};function cf(t){if("string"==typeof t){const i=t.toLowerCase();switch(i){case"disabled":case"hidden":case"showing":return i}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}function lf(){}function Su(t){const i=[qt.ra,qt.K_,qt.O_,qt.P_,qt.U_,qt.F_,qt.B_,qt.G_,qt.H_,qt.X_],e=[Nt.ha];let s;const n={get kind(){return t.zt},get label(){return t.kh},set label(i){t.kh=cs(i)},get language(){return t.gs},get id(){return t.o},get uid(){return t.Mg},get inBandMetadataTrackDispatchType(){return t.Og},get mode(){return t.jg},set mode(i){i!==Or.Jn&&i!==Or.Pg&&i!==Or.Ch||t.zg(i)},get forced(){return Boolean(t.Bg)},get accessibility(){var i,e;return null!=(e=null==(i=t.Tg)?void 0:i.map(hf))?e:[]},get type(){return t.Rg},get readyState(){return t.Jf},get cues(){return t.jg===Or.Ch?null:t.L.va},get activeCues(){return t.jg===Or.Ch?null:t.q.va},get src(){return t.Ug||""},addEventListener(t,i){const e=Ko(t,cs);s.yn(e,i)},removeEventListener(t,i){const e=Ko(t,cs);s.fn(e,i)}};return s=new hi(t),t.yn(i,(t=>s.Co(t.va))),t.yn(e,(t=>s.Co(t))),w.defineProperty(n,"constructor",{value:lf}),n}function df(){}function Ve(t){const i=rf(t);return w.defineProperty(i,"constructor",{value:df}),i}!function(t){t.Ch="disabled",t.Pg="hidden",t.Jn="showing"}(Or||(Or={})),(Nt||(Nt={})).ha="error";var Co,Zt,al=class extends Ie{fa(){return Ve(this)}wg(t){return t.jg===Or.Jn}};!function(t){t.Qg="Fg",t.Yg="Gg",t.Vg="contentprotectionerror",t.Wg="contentprotectionsuccess",t.Hg="currentsourcechange",t.qg="destroy",t.Xg="durationchange",t.Zg="emptied",t.Kg="encrypted",t.Jg="ended",t.$g="iw",t.ew="nw",t.hw="ow",t.aw="uw",t.cw="loadstart",t.lw="manifestupdate",t.dw="nosupportedrepresentationfound",t.fw="offline",t._w="online",t.Sh="pause",t.jh="play",t.gw="progress",t.ww="ratechange",t.Aw="representationchange",t.mw="resize",t.pw="seeked",t.yw="seeking",t.Mw="segmentnotfound",t.Tw="Nw",t.Dw="Sw",t.lo="sourcechange",t.Iw="timeupdate",t.Ew="volumechange",t.Lw="xw",t.Cw="metricschange"}(Co||(Co={})),function(t){t.Ow="canplay",t.jw="canplaythrough",t.Pw="loadeddata",t.zw="loadedmetadata",t.H_="readystatechange",t.Bw="waiting",t.Rw="playing"}(Zt||(Zt={}));var Ls=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"],vu=.92,Ka=1.08,ff=.25,Ne=class extends Bo{Uw(){this.Qw(),this.Fw=i.$d((()=>this.Yw()),500)}Qw(){void 0!==this.Fw&&(i.Jd(this.Fw),this.Fw=void 0)}get Gw(){return this.Le&&this.ho}get Vw(){return this.Ww}get Hw(){return this.qw}set Hw(t){this.qw=t,this.Xw()}get Rt(){return this.Le}set Rt(t){this.Le=t,t?this.Cn():this.y_()}Zw(t){this.Kw.push(t),this.Xw()}Jw(t){Qr(this.Kw,t),this.Xw()}Xw(){this.Ww=this.$w(),this.ho&&this.Yw()}Cn(){this.Le&&this.rv&&(this.ho||this.hv.yn(Co.Iw,this.Yw),this.Uw(),this.ho=!0)}y_(){this.ho&&(this.Qw(),this.hv.fn(Co.Iw,this.Yw),this.ov(1),this.ho=!1)}Ud(){this.y_(),this.Qo.fn(Zt.Bw,this.uv),this.Qo.fn(Zt.Rw,this.fv),this.Vo()}ov(t){this.hv.vv._v||this.Qo.Gf!==t&&(this.Qo.Gf=t)}$w(){const t=this.Av;var i;const e=[null!=(i=this.qw)?i:this.mv,...this.Kw],s=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.minimumOffset)?e:0)}),t),n=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.targetOffset)?e:0)}),s+ff),r=e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.maximumOffset)?e:0)}),n+ff);return{minimumOffset:s,targetOffset:n,maximumOffset:r,forceSeekOffset:e.reduce(((t,i)=>{var e;return _.max(t,null!=(e=null==i?void 0:i.forceSeekOffset)?e:0)}),r+ff),minimumPlaybackRate:vu,maximumPlaybackRate:Ka}}get pv(){return this.Qo.yv}constructor(t,e,s){super(),this.ho=!1,this.Le=!1,this.rv=!1,this.Av=0,this.Fw=void 0,this.Kw=[],this.qw=void 0,this.uv=()=>{const t=this.hv.wf,i=this.hv.Mf,e=t.Mv(i);e&&(this.Av=os(e.jn(0)-i,this.Av,.5),this.Xw())},this.fv=()=>{this.rv=!0,this.Qo.fn(Zt.Rw,this.fv),this.Le&&this.Cn()},this.Yw=()=>{this.Qw(),this.Uw();const t=this.pv;if(!t)return;const e=this.Tv();if(t>this.Ww.forceSeekOffset)return this.Co(new wn("latencyrecoveryseek")),void this.Nv();const{minimumOffset:s,targetOffset:n,maximumOffset:r}=this.Ww,h=this.hv.Gf;e>r?this.ov(this.Ww.maximumPlaybackRate):e<s&&!i.Ys.Dv?this.ov(this.Ww.minimumPlaybackRate):(h>1&&e<n||h<1&&e>n)&&this.ov(1)},this.Qo=t,this.hv=e,this.mv=s,this.Ww=s,this.Qo.yn(Zt.Bw,this.uv),this.Qo.yn(Zt.Rw,this.fv)}},_f=.25,gf=400,wf={minimumOffset:.2,targetOffset:.45,maximumOffset:.7,forceSeekOffset:3,minimumPlaybackRate:vu,maximumPlaybackRate:Ka},vf={minimumOffset:.4,targetOffset:.65,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:vu,maximumPlaybackRate:Ka},Af={minimumOffset:.4,targetOffset:.7,maximumOffset:.9,forceSeekOffset:3,minimumPlaybackRate:vu,maximumPlaybackRate:Ka},mf={minimumOffset:.2,targetOffset:.45,maximumOffset:1,forceSeekOffset:3,minimumPlaybackRate:vu,maximumPlaybackRate:Ka},pf={minimumOffset:.5,targetOffset:1.125,maximumOffset:1.75,forceSeekOffset:2.55,minimumPlaybackRate:vu,maximumPlaybackRate:Ka};function yf(t){if(i.Iv.Sv){const i=(gf+250)/1e3,e=_.max(i,t.minimumOffset),s=_.max(e+_f,t.targetOffset),n=_.max(s+_f,t.maximumOffset);return{minimumOffset:e,targetOffset:s,maximumOffset:n,forceSeekOffset:_.max(n+_f,t.forceSeekOffset),minimumPlaybackRate:vu,maximumPlaybackRate:Ka}}return t}function dr(){let t;return t=i.Ys.Dv?mf:i.Ys.Ev?vf:i.Ys.bv?"Android"===i.Iv.Lv?Af:wf:pf,i.Iv.Sv?yf(t):t}function Mf(t){return{minimumOffset:t.windowStart,maximumOffset:t.windowEnd,targetOffset:t.target,forceSeekOffset:t.maxOffset,minimumPlaybackRate:vu,maximumPlaybackRate:Ka}}function lu(t){return{windowStart:t.minimumOffset,windowEnd:t.maximumOffset,target:t.targetOffset,maxOffset:t.forceSeekOffset}}var Tf=class extends Ne{Tv(){const t=this.hv.wf;return 0===t.U?0:t.jn(t.U-1)-this.hv.Mf}Nv(){this.Qo.Nv()}$w(){return yf(super.$w())}constructor(t,i,e){super(t,i,e)}},Nf=class extends Bo{get xv(){return lu(dr())}get Cv(){}get yv(){}get Ov(){}get Pv(){return!1}get zv(){}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=Df(this)}Nv(){}constructor(...t){super(...t),this.Bv=void 0}};function Df(t){return{goLive:()=>t.Nv(),get isLive(){return t.Pv},get currentServerLiveTime(){return t.Cv},get currentLatency(){return t.yv},get latencies(){return t.Ov},get latency(){return t.xv},set latency(i){if(!function(t){if(!Ut(t))return!1;const i=t;return"number"==typeof i.target&&"number"==typeof i.windowEnd&&"number"==typeof i.windowStart&&"number"==typeof i.maxOffset&&(i.windowStart>=0&&i.windowStart<=i.target&&i.target<=i.windowEnd&&i.maxOffset>=i.windowEnd)}(i))throw new g("Invalid latency configuration");t.Bv=i},get manifest(){return t.zv},addEventListener(i,e){t.yn(If(i),e)},removeEventListener(i,e){t.fn(If(i),e)}}}var Sf=["golive","latencyrecoveryseek"];function If(t){const i=Ko(t,cs);return(Qs(i)?[i]:i).filter((t=>qo(Sf,t)))}var Cu=class extends Bo{set fg(t){const i=this._g;t!==i&&(i&&this.gg(i),t&&this.vg(t),this._g=t,this._g&&(this._g.Bv=this.Rv))}get fg(){return this._g}get va(){return this.Xa||(this.Xa=Df(this)),this.Xa}vg(t){t.yn(Sf,this.Ds)}gg(t){t.fn(Sf,this.Ds)}Nv(){var t;null==(t=this._g)||t.Nv()}get Cv(){var t;return null==(t=this._g)?void 0:t.Cv}get yv(){var t;return null==(t=this._g)?void 0:t.yv}get Ov(){var t;return null==(t=this._g)?void 0:t.Ov}get Pv(){return!!this._g&&this._g.Pv}get xv(){return this._g?this._g.xv:null!=(t=this.Rv)?t:lu(dr());var t}get Bv(){return this._g?this._g.Bv:this.Rv}set Bv(t){this._g&&(this._g.Bv=t),this.Rv=t}get zv(){var t;return null==(t=this._g)?void 0:t.zv}gn(){this.Vo(),this._g&&this.gg(this._g),this._g=void 0}constructor(){super(),this._g=void 0,this.Xa=void 0,this.Rv=void 0,this._g=void 0}};function Yt(){return Yt=w.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)w.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Yt.apply(this,arguments)}var hn="function"==typeof String.prototype.replaceAll?(t,i,e)=>t.replaceAll(i,e):(t,i,e)=>t.split(i).join(e);function Xi(t,i){return Po(t)&&-1!==t.indexOf(i)}var D="function"==typeof String.prototype.startsWith?(t,i)=>Po(t)&&t.startsWith(i):(t,i)=>Po(t)&&t.substr(0,i.length)===i,Ss="function"==typeof String.prototype.endsWith?(t,i)=>Po(t)&&t.endsWith(i):(t,i)=>Po(t)&&t.substr(t.length-i.length,i.length)===i;function yn(t,i){return t.length===i.length&&t.toUpperCase()===i.toUpperCase()}var Ef="function"==typeof String.prototype.repeat?(t,i)=>t.repeat(i):(t,i)=>{let e=0|i;if(0===t.length||0===e)return"";let s=t,n="";for(;1==(1&e)&&(n+=s),e>>>=1,0!==e;)s+=s;return n},Es="function"==typeof String.prototype.padStart?(t,i,e)=>(void 0===e&&(e=" "),t.padStart(i,e)):(t,i,e)=>{void 0===e&&(e=" ");let s=e;const n=(0|i)-t.length;return n<=0?t:(n>s.length&&(s+=Ef(s,n/s.length)),s.slice(0,n)+t)},bf=(String.prototype.padEnd,16384),Lf="function"==typeof String.fromCodePoint?t=>t.length<=bf?String.fromCodePoint(...t):xf(t,String.fromCodePoint):t=>{const i=[];for(let e of t)e>65535&&(e-=65536,i.push(e>>>10&1023|55296),e=56320|1023&e),i.push(e);return kf(i)};function kf(t){return t.length<=bf?String.fromCharCode(...t):xf(t,String.fromCharCode)}function xf(t,i){const e=[];for(let s=0;s<t.length;s+=bf)e.push(i(...t.slice(s,s+bf)));return e.join("")}function Cf(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}function Of(t,e){const s=i.Dh(t);return Be(s,e),s.toString()}function Be(t,i){for(const e of w.keys(i))t.searchParams.set(e,i[e])}function Na(t,e){let s=i.Uv(t);return e&&!Ss(s,"/")&&(s+="/"),s}var jf=/cache:(.+)?(?=&|$)/,Pf="http://webcache.googleusercontent.com/search?q=cache:";function zf(t){if(!D(t,Pf))return"";const e=i.Dh(t).search.match(jf);return e&&e.length>1?e[1]:""}function Bf(t){return i.Dh(".",t)}var Rf,Ln,rs,Uf="8E80B9CE";function Qf(t){return{appID:t&&t.appID?cs(t.appID):Uf}}function Ff(t){if(null!==t)return t}function Yf(t){const e={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:Ff(t.streamActivityMonitorID),adTagParameters:Ut(t.adTagParameters)?t.adTagParameters:{},authToken:Ff(t.authToken),omidAccessModeRules:Ff(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.videoID&&i.contentSourceID)}(t)){const s=t.videoID,n=t.contentSourceID;return s?n?Yt({},e,{availabilityType:"vod",videoID:s,contentSourceID:n}):void i.Qv("A VOD DAI configuration was provided without valid contentSourceID which is required."):void i.Qv("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const i=t;return Boolean(i.assetKey)}(t)){const s=t.assetKey;return s?Yt({},e,{availabilityType:"live",assetKey:s}):void i.Qv("A Live DAI configuration was provided without valid assetKey which is required.")}i.Qv("A DAI configuration was provided without a valid availabilityType which is required.")}function Gf(t){switch(t.integration){case"google-dai":return Yf(t);case"imagine":return function(t){return{integration:t.integration}}(t);default:return Yt({},t,{integration:String(t.integration)})}}!function(t){t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled"}(Rf||(Rf={})),function(t){t.Fv="",t.Yv="anonymous",t.Gv="use-credentials"}(Ln||(Ln={})),function(t){t.Vv="application/dash+xml",t.Wv="application/vnd.apple.mpegurl",t.Hv="application/x-mpegurl",t.qv="video/mp4",t.Xv="application/vnd.theoplayer.hesp+json",t.Zv="application/vnd.theo.hesp+json"}(rs||(rs={}));var be,ve,Vf="titanium",Wf="conax",Hf="ezdrm",hr="irdeto",fr="vudrm",qf="verimatrix",Xf="keyos",or="drmtoday",Zf="expressplay",sn="azure",lr="xstream",Kf="vimond",Jf="axinom",$f="uplynk",t_="comcast",i_="custom";function e_(t,i){if(null==t)return{};var e,s,n={},r=w.keys(t);for(s=0;s<r.length;s++)e=r[s],i.indexOf(e)>=0||(n[e]=t[e]);return n}function s_(t){return Po(t.token&&t.deviceId)}function n_(t){var i;const e=null==(i=t.fairplay)?void 0:i.headers;return void 0!==e&&Po(e.PreAuthorization)}function r_(t){const i=t;return s_(i)&&""!==i.token&&""!==i.deviceId&&!n_(i)}!function(t){t.Kv="playready",t.Jv="widevine",t.$v="fairplay",t.tA="clearkey",t.iA="aes128"}(be||(be={})),function(t){t.eA=!1,t.sA=!1,t.nA=!1,t.rA=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.hA=!1,t.oA=!1,t.LOG_LCEVC_DETAILS=!1}(ve||(ve={}));var Rs=class extends Jo{get name(){return"THEOplayerError"}get category(){return Rh.fromCode(this.code)}constructor(t,i,e){super(i,e),this.code=t}};function h_(t,i){return t instanceof Rs?t:t instanceof g?new Rs(i,t.message,t):new Rs(i,String(t))}var To=class extends Rs{get name(){return"ContentProtectionError"}constructor(t,i,e,s,n,r,h,o){super(t,i,e),this.url=s,this.status=n,this.statusText=r,this.response=h,this.systemCode=o}};var o_,a_=class{get aA(){return this.uA}get cA(){return this.lA}dA(t){return function(t){const i=t.onCertificateRequest;if(void 0!==i&&"function"!=typeof i)throw new b("ContentProtectionIntegration.onCertificateRequest is not a function.");const e=t.onCertificateResponse;if(void 0!==e&&"function"!=typeof e)throw new b("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new b("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new b("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new b("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.fA.build(t))}constructor(t,i,e){this.uA=t,this.lA=i,this.fA=e}};!function(t){t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED"}(o_||(o_={}));var u_,Nu=class{registerContentProtectionIntegration(t,e,s){switch(this._A(t,e,s)){case o_.FAILED:throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+e+".");case o_.OVERRIDDEN:{const s=on(e);i.Qv("Warning: Overwriting an earlier registered integration for "+t+" and "+s+".");break}case o_.SUCCEEDED:on(e);0;break}}_A(t,i,e){const s=on(i);if(!s)return o_.FAILED;let n=o_.SUCCEEDED;for(const i of this.gA.slice())i.aA===t&&i.cA===s&&(n=o_.OVERRIDDEN,Qr(this.gA,i));return this.gA.push(new a_(t,s,e)),n}wA(t,i){return void 0!==this.vA(t,i)}AA(t,i,e){const s=this.vA(t,i);if(!s)throw g("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+i);return s.dA(e)}vA(t,i){for(const e of this.gA)if(e.aA===t&&(!i||e.cA===i))return e}constructor(){this.gA=[]}};Nu.mA=new Nu,function(t){t.Kv="9a04f079-9840-4286-ab92-e65be0885f95",t.Jv="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.tA="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.$v="94ce86fb-07ff-4f43-adb8-93d2fa968ca2"}(u_||(u_={}));var he,c_,l_,ki,io,d_="urn:mpeg:dash:mp4protection:2011",Yh="cenc",f_="sinf",vr="skd",__="9a04f079-9840-4286-ab92-e65be0885f95",Mn="urn:uuid:"+__,g_="com.microsoft.playready",w_="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",ti="urn:uuid:"+w_,v_="com.widevine.alpha",A_="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",m_="urn:uuid:"+A_,en="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",uu="urn:uuid:"+en,p_="com.apple.fps.1_0",y_="com.apple.streamingkeydelivery",M_="identity";!function(t){t.pA="moov",t.yA="mvhd",t.MA="trak",t.TA="tkhd",t.NA="mdia",t.DA="mdhd",t.SA="hdlr",t.IA="minf",t.EA="stbl",t.bA="stsd",t.LA="stsc",t.kA="mvex",t.xA="trex",t.CA="avc1",t.OA="avcC",t.jA="hev1",t.PA="hvc1",t.zA="hvcC",t.BA="vp09",t.RA="vpcC",t.UA="av01",t.QA="av1C",t.FA="colr",t.YA="pasp",t.GA="mp4a",t.VA="esds",t.WA="fLaC",t.HA="dfLa",t.qA="wvtt",t.XA="vttC",t.ZA="vlab",t.KA="enca",t.JA="encv",t.$A="moof",t.tm="mfhd",t.im="traf",t.nm="tfhd",t.hm="trun",t.um="tfdt",t.lm="senc",t.dm="mdat",t.fm="pssh",t._m="emsg",t.gm="sidx",t.wm="styp",t.vm="ftyp",t.Am="sinf",t.pm="frma"}(he||(he={})),function(t){t.ym="vide",t.Mm="soun",t.Tm="subt",t.Nm="hint",t.Dm="meta",t.Sm="auxv"}(c_||(c_={})),function(t){t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof"}(l_||(l_={})),function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF"}(ki||(ki={})),function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT"}(io||(io={}));var Qo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),T_=16383,N_=/[\t\n\f\r ]/g;function Xo(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:D_()}function D_(){throw new g("Invalid base64 input")}function Bn(t){let i=t;N_.test(i)&&(i=i.replace(N_,""));let e=i.length;e%4==0&&e>=1&&"="===i[e-1]&&(e>=2&&"="===i[e-2]?e-=2:e-=1,i=i.substr(0,e));const s=e%4;if(1===s)return D_();const n=0===s?0:4-s,r=new j(function(t,i){return 3*(t+i)/4-i}(e,n)),h=n>0?e-4:e;let o,a=0,u=0;for(;a<h;a+=4)o=Xo(i.charCodeAt(a))<<18|Xo(i.charCodeAt(a+1))<<12|Xo(i.charCodeAt(a+2))<<6|Xo(i.charCodeAt(a+3)),r[u++]=o>>16&255,r[u++]=o>>8&255,r[u++]=255&o;return 2===n?(o=Xo(i.charCodeAt(a))<<2|Xo(i.charCodeAt(a+1))>>4,r[u++]=255&o):1===n&&(o=Xo(i.charCodeAt(a))<<10|Xo(i.charCodeAt(a+1))<<4|Xo(i.charCodeAt(a+2))>>2,r[u++]=o>>8&255,r[u++]=255&o),r}function S_(t,i,e){return Qo[t>>2]+Qo[(3&t)<<4|i>>4]+Qo[(15&i)<<2|e>>6]+Qo[63&e]}function I_(t,i,e){const s=[];for(let n=i;n<e;n+=3)s.push(S_(t[n],t[n+1],t[n+2]));return s.join("")}function pt(t){const i=t.length,e=i%3,s=[],n=i-e;for(let i=0;i<n;i+=T_)s.push(I_(t,i,_.min(n,i+T_)));if(1===e){const e=t[i-1];s.push(Qo[e>>2]+Qo[(3&e)<<4]+"==")}else if(2===e){const e=t[i-2],n=t[i-1];s.push(Qo[e>>2]+Qo[(3&e)<<4|n>>4]+Qo[(15&n)<<2]+"=")}return s.join("")}function E_(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}var b_=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],Uu=ArrayBuffer.isView||(t=>t&&qo(b_,Se.call(t)));function Tu(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;return to(new j(t),new j(i))}function to(t,i){if(t===i)return!0;if(t.byteLength!==i.byteLength)return!1;for(let e=0;e<t.length;e+=1)if(t[e]!==i[e])return!1;return!0}function uc(t){const i=t.reduce(((t,i)=>t+i.byteLength),0);return L_(t,i)}function L_(t,i){const e=new j(i);let s=0;for(const i of t)e.set(i,s),s+=i.byteLength;return e}function k_(t,i,e){const s=new j(t.byteLength+i.byteLength),n=Io(t,0,e),r=Io(t,e);return s.set(n),s.set(i,e),s.set(r,e+i.byteLength),s}function x_(t){return Bn(t).buffer}function C_(t){return pt(new j(t))}function Fu(t){return pt(Ju(t))}function Zh(t,i){const e=i.Ku,s=t.getUint8(e>>3),n=1<<7-(7&e);return i.Im(1),(s&n)===n?1:0}function Ni(t,i,e){let s=0;for(let n=0;n<e;n++)s=2*s+Zh(t,i);return s}var O_=class t{get Ku(){return this.Zu}Im(t){this.Zu+=t}Em(t){this.Zu=t}Lm(){return new t(this.Ku)}constructor(t=0){this.Zu=t}};var j_=_.clz32||function(t){let i=32,e=t>>16;return e&&(i-=16,t=e),e=t>>8,e&&(i-=8,t=e),e=t>>4,e&&(i-=4,t=e),e=t>>2,e&&(i-=2,t=e),e=t>>1,e?i-2:i-t},di=null;try{di=new WebAssembly.Instance(new WebAssembly.Module(new j([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(r){}function ht(t,i,e){this.low=0|t,this.high=0|i,this.unsigned=!!e}function Ro(t){return!0===(t&&t.xm)}function P_(t){var i=_.clz32(t&-t);return t?31-i:i}ht.prototype.xm,w.defineProperty(ht.prototype,"xm",{value:!0}),ht.isLong=Ro;var z_={},B_={};function kr(t,i){var e,s,n;return i?(n=0<=(t>>>=0)&&t<256)&&(s=B_[t])?s:(e=ts(t,0,!0),n&&(B_[t]=e),e):(n=-128<=(t|=0)&&t<128)&&(s=z_[t])?s:(e=ts(t,t<0?-1:0,!1),n&&(z_[t]=e),e)}function zt(t,i){if(S(t))return i?ra:Kh;if(i){if(t<0)return ra;if(t>=Q_)return q_}else{if(t<=-F_)return Zu;if(t+1>=F_)return H_}return t<0?zt(-t,i).neg():ts(t%un|0,t/un|0,i)}function ts(t,i,e){return new ht(t,i,e)}ht.fromInt=kr,ht.fromNumber=zt,ht.fromBits=ts;var R_=_.pow;function U_(t,i,e){if(0===t.length)throw g("empty string");if("number"==typeof i?(e=i,i=!1):i=!!i,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i?ra:Kh;if((e=e||10)<2||36<e)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw g("interior hyphen");if(0===s)return U_(t.substring(1),i,e).neg();for(var n=zt(R_(e,8)),r=Kh,h=0;h<t.length;h+=8){var o=_.min(8,t.length-h),a=x(t.substring(h,h+o),e);if(o<8){var u=zt(R_(e,o));r=r.mul(u).add(zt(a))}else r=(r=r.mul(n)).add(zt(a))}return r.unsigned=i,r}function eo(t,i){return"number"==typeof t?zt(t,i):"string"==typeof t?U_(t,i):ts(t.low,t.high,"boolean"==typeof i?i:t.unsigned)}ht.fromString=U_,ht.fromValue=eo;var un=4294967296,Q_=un*un,F_=Q_/2,Y_=kr(1<<24),Kh=kr(0);ht.ZERO=Kh;var ra=kr(0,!0);ht.UZERO=ra;var G_=kr(1);ht.ONE=G_;var V_=kr(1,!0);ht.UONE=V_;var W_=kr(-1);ht.NEG_ONE=W_;var H_=ts(-1,2147483647,!1);ht.MAX_VALUE=H_;var q_=ts(-1,-1,!0);ht.MAX_UNSIGNED_VALUE=q_;var Zu=ts(0,-2147483648,!1);ht.MIN_VALUE=Zu;var L=ht.prototype;L.toInt=function(){return this.unsigned?this.low>>>0:this.low},L.toNumber=function(){return this.unsigned?(this.high>>>0)*un+(this.low>>>0):this.high*un+(this.low>>>0)},L.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Zu)){var i=zt(t),e=this.div(i),s=e.mul(i).sub(this);return e.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=zt(R_(t,6),this.unsigned),r=this,h="";;){var o=r.div(n),a=(r.sub(o.mul(n)).toInt()>>>0).toString(t);if((r=o).isZero())return a+h;for(;a.length<6;)a="0"+a;h=""+a+h}},L.getHighBits=function(){return this.high},L.getHighBitsUnsigned=function(){return this.high>>>0},L.getLowBits=function(){return this.low},L.getLowBitsUnsigned=function(){return this.low>>>0},L.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Zu)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,i=31;i>0&&0==(t&1<<i);i--);return 0!=this.high?i+33:i+1},L.isZero=function(){return 0===this.high&&0===this.low},L.eqz=L.isZero,L.isNegative=function(){return!this.unsigned&&this.high<0},L.isPositive=function(){return this.unsigned||this.high>=0},L.isOdd=function(){return 1==(1&this.low)},L.isEven=function(){return 0==(1&this.low)},L.equals=function(t){return Ro(t)||(t=eo(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},L.eq=L.equals,L.notEquals=function(t){return!this.eq(t)},L.neq=L.notEquals,L.ne=L.notEquals,L.lessThan=function(t){return this.comp(t)<0},L.lt=L.lessThan,L.lessThanOrEqual=function(t){return this.comp(t)<=0},L.lte=L.lessThanOrEqual,L.le=L.lessThanOrEqual,L.greaterThan=function(t){return this.comp(t)>0},L.gt=L.greaterThan,L.greaterThanOrEqual=function(t){return this.comp(t)>=0},L.gte=L.greaterThanOrEqual,L.ge=L.greaterThanOrEqual,L.compare=function(t){if(Ro(t)||(t=eo(t)),this.eq(t))return 0;var i=this.isNegative(),e=t.isNegative();return i&&!e?-1:!i&&e?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},L.comp=L.compare,L.negate=function(){return!this.unsigned&&this.eq(Zu)?Zu:this.not().add(G_)},L.neg=L.negate,L.add=function(t){Ro(t)||(t=eo(t));var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+o)>>>16,a+=(u+=e+h)>>>16,a+=i+r,ts((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},L.subtract=function(t){return Ro(t)||(t=eo(t)),this.add(t.neg())},L.sub=L.subtract,L.multiply=function(t){if(this.isZero())return this;if(Ro(t)||(t=eo(t)),di)return ts(di.mul(this.low,this.high,t.low,t.high),di.get_high(),this.unsigned);if(t.isZero())return this.unsigned?ra:Kh;if(this.eq(Zu))return t.isOdd()?Zu:Kh;if(t.eq(Zu))return this.isOdd()?Zu:Kh;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Y_)&&t.lt(Y_))return zt(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,e=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*o)>>>16,u+=(c+=e*a)>>>16,c&=65535,u+=(c+=s*o)>>>16,c&=65535,u+=(c+=n*h)>>>16,u+=i*a+e*o+s*h+n*r,ts((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},L.mul=L.multiply,L.divide=function(t){if(Ro(t)||(t=eo(t)),t.isZero())throw g("division by zero");var i,e,s;if(di)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?ts((this.unsigned?di.div_u:di.div_s)(this.low,this.high,t.low,t.high),di.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?ra:Kh;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return ra;if(t.gt(this.shru(1)))return V_;s=ra}else{if(this.eq(Zu))return t.eq(G_)||t.eq(W_)?Zu:t.eq(Zu)?G_:(i=this.shr(1).div(t).shl(1)).eq(Kh)?t.isNegative()?G_:W_:(e=this.sub(t.mul(i)),s=i.add(e.div(t)));if(t.eq(Zu))return this.unsigned?ra:Kh;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=Kh}for(e=this;e.gte(t);){i=_.max(1,_.floor(e.toNumber()/t.toNumber()));for(var n=_.ceil(_.log(i)/_.LN2),r=n<=48?1:R_(2,n-48),h=zt(i),o=h.mul(t);o.isNegative()||o.gt(e);)o=(h=zt(i-=r,this.unsigned)).mul(t);h.isZero()&&(h=G_),s=s.add(h),e=e.sub(o)}return s},L.div=L.divide,L.modulo=function(t){return Ro(t)||(t=eo(t)),di?ts((this.unsigned?di.rem_u:di.rem_s)(this.low,this.high,t.low,t.high),di.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},L.mod=L.modulo,L.rem=L.modulo,L.not=function(){return ts(~this.low,~this.high,this.unsigned)},L.countLeadingZeros=function(){return this.high?_.clz32(this.high):_.clz32(this.low)+32},L.clz=L.countLeadingZeros,L.countTrailingZeros=function(){return this.low?P_(this.low):P_(this.high)+32},L.ctz=L.countTrailingZeros,L.and=function(t){return Ro(t)||(t=eo(t)),ts(this.low&t.low,this.high&t.high,this.unsigned)},L.or=function(t){return Ro(t)||(t=eo(t)),ts(this.low|t.low,this.high|t.high,this.unsigned)},L.xor=function(t){return Ro(t)||(t=eo(t)),ts(this.low^t.low,this.high^t.high,this.unsigned)},L.shiftLeft=function(t){return Ro(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ts(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):ts(0,this.low<<t-32,this.unsigned)},L.shl=L.shiftLeft,L.shiftRight=function(t){return Ro(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ts(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):ts(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},L.shr=L.shiftRight,L.shiftRightUnsigned=function(t){return Ro(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?ts(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):ts(32===t?this.high:this.high>>>t-32,0,this.unsigned)},L.shru=L.shiftRightUnsigned,L.shr_u=L.shiftRightUnsigned,L.rotateLeft=function(t){var i;return Ro(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?ts(this.high,this.low,this.unsigned):t<32?(i=32-t,ts(this.low<<t|this.high>>>i,this.high<<t|this.low>>>i,this.unsigned)):(i=32-(t-=32),ts(this.high<<t|this.low>>>i,this.low<<t|this.high>>>i,this.unsigned))},L.rotl=L.rotateLeft,L.rotateRight=function(t){var i;return Ro(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?ts(this.high,this.low,this.unsigned):t<32?(i=32-t,ts(this.high<<i|this.low>>>t,this.low<<i|this.high>>>t,this.unsigned)):(i=32-(t-=32),ts(this.low<<i|this.high>>>t,this.high<<i|this.low>>>t,this.unsigned))},L.rotr=L.rotateRight,L.toSigned=function(){return this.unsigned?ts(this.low,this.high,!1):this},L.toUnsigned=function(){return this.unsigned?this:ts(this.low,this.high,!0)},L.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},L.toBytesLE=function(){var t=this.high,i=this.low;return[255&i,i>>>8&255,i>>>16&255,i>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},L.toBytesBE=function(){var t=this.high,i=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,i>>>24,i>>>16&255,i>>>8&255,255&i]},ht.fromBytes=function(t,i,e){return e?ht.fromBytesLE(t,i):ht.fromBytesBE(t,i)},ht.fromBytesLE=function(t,i){return new ht(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},ht.fromBytesBE=function(t,i){return new ht(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)};var Ce=ht;function X_(t,i){return t.lessThan(i)?t:i}function Z_(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function K_(t,i){return t>>i&63|128}function J_(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(Z_(t),i.push(t>>12&15|224),i.push(K_(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(K_(t,12)),i.push(K_(t,6))),i.push(63&t|128)):i.push(t)}function an(t,i){if(i.Ku>=t.length)throw new g("Invalid byte index");const e=255&t[i.Ku];if(i.Im(1),128==(192&e))return 63&e;throw new g("Invalid continuation byte")}function $_(t,i){const e=i.Ku;if(e>t.length)throw new g("Invalid byte index");if(e===t.length)return!1;const s=255&t[e];if(i.Im(1),0==(128&s))return s;if(192==(224&s)){const e=(31&s)<<6|an(t,i);if(e>=128)return e;throw new g("Invalid continuation byte")}if(224==(240&s)){const e=(15&s)<<12|an(t,i)<<6|an(t,i);if(e>=2048)return Z_(e),e;throw new g("Invalid continuation byte")}if(240==(248&s)){const e=(7&s)<<18|an(t,i)<<12|an(t,i)<<6|an(t,i);if(e>=65536&&e<=1114111)return e}throw new g("Invalid UTF-8 detected")}var tg=65279;var ig=[128,64,32,16,8,4,2,1],Ue=class{Cm(t){return eg(this.Om,t)}constructor(t){this.Om=t}};function eg(t,i){return(t&i)===i}function tu(t,i){return eg(t,ig[i])}function Mo(t,i){const e=t.getUint8(i.Ku);return i.Im(1),e}function sg(t,i,e){t.setUint8(i.Ku,e),i.Im(1)}function rl(t,i,e){const s=Io(ks(t),i.Ku,i.Ku+e);return i.Im(s.byteLength),s}function br(t,i,e){ks(t).set(ks(e),i.Ku),i.Im(e.byteLength)}function ng(t,i,e){return i.Ku+e<=t.byteLength}function rg(t,i,e,s){return void 0===s&&(s=!1),s?function(t,i,e){let s=0,n=1;for(let r=0;r<e;r++)s+=Mo(t,i)*n,n*=256;return s}(t,i,e):function(t,i,e){let s=0;for(let n=0;n<e;n++)s=256*s+Mo(t,i);return s}(t,i,e)}function hg(t,i){const e=t.getUint8(i.Ku);return i.Im(1),e}function og(t,i,e){void 0===e&&(e=!1);const s=t.getUint16(i.Ku,e);return i.Im(2),s}function ag(t,i,e,s){void 0===s&&(s=!1),t.setUint16(i.Ku,e,s),i.Im(2)}function aa(t,i,e){void 0===e&&(e=!1);const s=t.getUint32(i.Ku,e);return i.Im(4),s}function ac(t,i,e,s){void 0===s&&(s=!1),t.setUint32(i.Ku,e,s),i.Im(4)}function Oc(t,i,e){void 0===e&&(e=!1);const s=aa(t,i,e),n=aa(t,i,e),r=e?n:s,h=e?s:n;return Ce.fromBits(h,r,!0)}function ug(t,i,e,s){void 0===s&&(s=!1);const n=e.getHighBitsUnsigned(),r=e.getLowBitsUnsigned(),h=s?n:r;ac(t,i,s?r:n,s),ac(t,i,h,s)}function cg(t,i){return $c(t,i)}function su(t,i,e){return kf(Ng(rl(t,i,e)))}function lg(t,i){const e=Mo(t,i);let s;return 0==(128&e)?s=e:192==(224&e)?s=64*(31&e)+(63&Mo(t,i)):224==(240&e)?s=4096*(15&e)+64*(63&Mo(t,i))+(63&Mo(t,i)):240==(248&e)&&(s=262144*(7&e)+4096*(63&Mo(t,i))+64*(63&Mo(t,i))+(63&Mo(t,i))),s}function $c(t,i){return dg(t,i,!0)}function dg(t,i,e){const s=[];for(;i.Ku<t.byteLength;){const n=Mo(t,i);if(e&&!n)break;s.push(n)}return kf(s)}function fg(t,i,e){const s=e.length;for(let n=0;n<s;n+=1){sg(t,i,e.charCodeAt(n))}}function _g(t,i){if(!(i.Ku+2<=t.byteLength))return;const e=t.getUint8(i.Ku),s=t.getUint8(i.Ku+1);return(254!==e||255!==s)&&(255===e&&254===s||void 0)}function gg(t,i){const e=_g(t,i);return void 0!==e&&i.Im(2),Ru(t,i,!0===e)}function Ru(t,i,e){return void 0===e&&(e=!1),wg(t,i,e,!0)}function wg(t,i,e,s){const n=[];for(;i.Ku+2<=t.byteLength;){const r=og(t,i,e);if(s&&!r)break;n.push(r)}return kf(n)}function vg(t,i,e,s){void 0===s&&(s=!1);const n=e.length;for(let r=0;r<n;r+=1){ag(t,i,e.charCodeAt(r),s)}}function Vn(t){return dg(Ao(t),new _s,!1)}function Ju(t){const i=new j(t.length);return fg(Ao(i),new _s,t),i}function Ag(t,i){return void 0===i&&(i=!1),wg(Ao(t),new _s,i,!1)}function mg(t,i){void 0===i&&(i=!1);const e=new j(2*t.length);return vg(Ao(e),new _s,t,i),e}function pg(t,i){return i.Ku+3<=t.byteLength&&(239===t.getUint8(i.Ku)&&187===t.getUint8(i.Ku+1)&&191===t.getUint8(i.Ku+2))}function so(t,i){return function(t,i,e){const s=[],n=pg(t,i);n&&i.Im(3);for(;i.Ku<t.byteLength;){const n=lg(t,i);if(void 0===n)break;if(e&&0===n)break;s.push(n)}return Lf(s)}(t,i,!0)}function _n(t){return function(t){return Lf(t)}(function(t,i){const e=[],s=new _s;let n;if(!i){if(n=$_(t,s),!1===n)return e;n===tg||e.push(n)}for(;!1!==(n=$_(t,s));)e.push(n);return e}(ks(t)))}function Lu(t){return new j(function(t){const i=[];for(const e of t)J_(e,i);return i}(function(t){const i=[];let e=0;const s=t.length;for(;e<s;){const n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){const s=t.charCodeAt(e++);56320==(64512&s)?i.push(((1023&n)<<10)+(1023&s)+65536):(i.push(n),e--)}else i.push(n)}return i}(t)))}function yg(t,i){if(pg(t,i))return so(t,i);if(void 0!==_g(t,i))return gg(t,i);if(i.Ku+4<=t.byteLength){if(0===t.getUint8(i.Ku)&&0===t.getUint8(i.Ku+2))return Ru(t,i,!1);if(0===t.getUint8(i.Ku+1)&&0===t.getUint8(i.Ku+3))return Ru(t,i,!0)}return so(t,i)}function Io(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function qr(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function Ao(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ks(t){return new j(t.buffer,t.byteOffset,t.byteLength)}function Mg(t){return t instanceof ArrayBuffer||Uu(t)}function Oi(t){return t instanceof ArrayBuffer?new j(t):ks(t)}function Tg(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),t.slice?t.slice(i,e):He(Io(t,i,e))}function He(t){if(t.slice)return t.slice(0);{const i=new j(t.byteLength);return i.set(t,0),i}}function Ng(t){return[].slice.call(t)}var _s=class t{get Ku(){return this.Zu}Im(t){this.Zu+=t}Em(t){this.Zu=t}Lm(){return new t(this.Ku)}jm(){return new O_(this.Ku<<3)}constructor(t=0){this.Zu=t}};function yr(t){let i=t.toLowerCase(),e=0,s=0;D(i,"0x")&&(i=i.substring(2));const n=new j(_.ceil(i.length/2));for(1==(1&i.length)&&(e=1,n[s++]=x(i[0],16));e<i.length;e+=2)n[s++]=x(i.substr(e,2),16);return n}function Dg(t){return.001*t}var ia=class t{Pm(){return Mo(this.zm,this.Bm)}Rm(){return og(this.zm,this.Bm)}Um(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt16(i.Ku,e);return i.Im(2),s}(this.zm,this.Bm)}Qm(){return aa(this.zm,this.Bm)}Fm(){return function(t,i,e){void 0===e&&(e=!1);const s=t.getInt32(i.Ku,e);return i.Im(4),s}(this.zm,this.Bm)}Ym(){return Oc(this.zm,this.Bm)}Gm(t){return rl(this.zm,this.Bm,t)}Vm(t){return function(t,i,e){const s=[];for(let n=0;n<e;n++)s.push(aa(t,i));return s}(this.zm,this.Bm,t)}Wm(t){return su(this.zm,this.Bm,t)}Hm(){return so(this.zm,this.Bm)}qm(t){this.Bm.Im(t)}Lm(){return new t(this.zm,this.Bm.Lm())}constructor(t,i){this.zm=t,this.Bm=i}};function Sg(t,i){return t.Rg===i}function Ig(t,i){for(const e of t)if(Sg(e,i))return e}var Eg=class extends Jo{get name(){return"DataIncompleteError"}constructor(t,i){super(),this.Xm=t,this.Zm=i}},At=class t{static Km(i){const e=i.zm,s=i.Bm,n=t.Jm(e,s,!1);if(!n.$m)throw new Eg(s.Ku,n.m);return n.m}static Jm(i,e,s){const n=[];for(;e.Ku<i.byteLength;){const r=t.tp(i,e,s);if(!r.$m)return{$m:!1,m:n};n.push(r.ip)}return{$m:!0,m:n}}static ep(i,e){const s=t.tp(i,e,!1);if(!s.$m)throw new Eg(e.Ku);return s.ip}static sp(i,e){const s=i.zm,n=i.Bm;for(;n.Ku<s.byteLength;){const i=t.tp(s,n,!1);if(!i.$m)return;if(i.ip.Rg===e)return i.ip}}static tp(i,e,s){const n=e.Ku,r=t.np(i,e);if(!r.$m)return r;const h=r.rp;let o=h.hp;if(0===o){if(s)return e.Em(n),{$m:!1,op:1/0};o=i.byteLength-n}const a=n+o;if(a>i.byteLength){const t=a;return e.Em(n),{$m:!1,op:t}}const u={Rg:h.Rg,Ku:n,zm:new ia(qr(i,n,a),new _s(h.ap))};return e.Em(a),{$m:!0,ip:u}}static np(t,i){const e=i.Ku;if(!ng(t,i,8)){return{$m:!1,op:i.Ku+8}}let s=aa(t,i),n=su(t,i,4);if(1===s){if(!ng(t,i,8)){const t=i.Ku+8;return i.Em(e),{$m:!1,op:t}}s=Oc(t,i).toNumber()}if("uuid"===n){if(!ng(t,i,16)){const t=i.Ku+16;return i.Em(e),{$m:!1,op:t}}n=su(t,i,16)}return{$m:!0,rp:{Rg:n,hp:s,ap:i.Ku-e}}}static cp(t,i,e){const s=t.zm,n=t.Bm;let r=Io(ks(s),n.Ku,s.byteLength);return e&&(r=He(r)),n.Im(r.byteLength),{Rg:i,zm:r}}static lp(i,e,s){const n=i.Qm(),{version:r,flags:h}=Eu(n);return{Rg:e,dp:r,fp:h,zm:t.cp(i,e,s).zm}}};function Ds(t,i){const e=Bt(t,i);if(!e)throw new g("Missing "+i+" atom");return e}function Bt(t,i){for(const e of t)if(e.Rg===i)return e.zm}function mr(t,i){const e=[];for(const s of t)s.Rg===i&&e.push(s.zm);return e}function Eu(t){return{version:t>>24,flags:new Ue(16777215&t)}}var iu=class t{static _p(i){const e=[],s=At.Km(new ia(i,new _s));for(const i of s){const s=t.gp(i);s&&e.push(s)}return e}static wp(t){return At.Jm(t,new _s,!1).m.some(this.vp)}static Ap(i){return mr(At.Km(new ia(i,new _s)),he.fm).map(t.mp)}static pp(i){return mr(At.Km(i.zm),he.fm).map(t.mp)}static vp(t){return t.Rg===he.vm||t.Rg===he.wm||t.Rg===he.pA||t.Rg===he.$A||t.Rg===he.dm||t.Rg===he.gm||t.Rg===he._m}static gp(i){switch(i.Rg){case he.pA:return t.yp(i.zm);case he.$A:return t.Mp(i.zm,i.Ku);case he.dm:return t.Tp(i.zm);case he.gm:return t.Np(i.zm);case he._m:return t.Dp(i.zm)}}static yp(i){const e=At.Km(i),s=Ds(e,he.yA),n=mr(e,he.MA),r=Bt(e,he.kA),h=t.Sp(s),o=n.map(t.Ip),a=r?t.Ep(r):void 0;return{Rg:he.pA,rp:h,Z:o,bp:a}}static Sp(t){const i=t.Qm(),{version:e,flags:s}=Eu(i),n=1===e?t.Ym():t.Qm(),r=1===e?t.Ym():t.Qm(),h=t.Qm(),o=1===e?t.Ym():t.Qm(),a=t.Qm(),u=t.Rm()>>8;t.qm(2),t.qm(8);const c=t.Vm(9);t.qm(24);const l=t.Qm();return{Rg:he.yA,dp:e,fp:s,Lp:n,kp:r,xp:h,ct:o,Cp:a,c_:u,Op:c,jp:l}}static Ip(i){const e=At.Km(i),s=Ds(e,he.TA),n=Ds(e,he.NA),r=t.Pp(s),h=t.zp(n);return{Rg:he.MA,rp:r,Bp:h}}static Pp(t){const i=t.Qm(),{version:e,flags:s}=Eu(i),n=1===e?t.Ym():t.Qm(),r=1===e?t.Ym():t.Qm(),h=t.Qm();t.qm(4);const o=1===e?t.Ym():t.Qm();t.qm(8);const a=t.Um(),u=t.Um(),c=t.Um()/256;t.qm(2);const l=t.Vm(9),d=t.Qm()/65536,f=t.Qm()/65536;return{Rg:he.TA,Rp:s.Cm(1),Up:s.Cm(2),Qp:s.Cm(4),Lp:n,kp:r,Fp:h,ct:o,Yp:a,Gp:u,c_:c,Op:l,ji:d,Ti:f}}static zp(i){const e=At.Km(i),s=Ds(e,he.DA),n=Ds(e,he.SA),r=Ds(e,he.IA),h=t.Vp(s),o=t.Wp(n),a=t.Hp(r);return{Rg:he.NA,rp:h,qp:o,Xp:a}}static Vp(t){const i=t.Qm(),{version:e,flags:s}=Eu(i),n=1===e?t.Ym():t.Qm(),r=1===e?t.Ym():t.Qm(),h=t.Qm(),o=1===e?t.Ym():t.Qm();t.Rm();return t.qm(2),{Rg:he.DA,dp:e,fp:s,Lp:n,kp:r,xp:h,ct:o}}static Wp(t){const i=t.Qm(),{version:e,flags:s}=Eu(i);t.qm(4);const n=t.Wm(4);t.qm(12);const r=t.Hm();return{Rg:he.SA,dp:e,fp:s,Zp:n,l:r}}static Hp(i){const e=Ds(At.Km(i),he.EA),s=t.Kp(e);return{Rg:he.IA,Jp:s}}static Kp(i){const e=Ds(At.Km(i),he.bA),s=t.$p(e);return{Rg:he.EA,iy:s}}static $p(i){const e=i.Qm(),{version:s,flags:n}=Eu(e),r=(i.Qm(),[]),h=At.Km(i);for(const i of h){const e=t.ey(i.zm,i.Rg);e&&r.push(e)}return{Rg:he.bA,dp:s,fp:n,sy:r}}static ey(i,e){let s=t.oy(i,e);return s||(s=t.uy(i,e),s||(e===he.qA?t.ly(i):void 0))}static oy(i,e){return e===he.GA?t._y(i):e===he.WA||e===he.WA.toLowerCase()||e===he.WA.toUpperCase()?t.gy(i):e===he.KA?t.wy(i):void 0}static uy(i,e){return e===he.CA?t.vy(i):e===he.jA||e===he.PA?t.Ay(i,e):e===he.BA?t.py(i,e):e===he.UA?t.yy(i,e):e===he.JA?t.My(i):void 0}static Ty(t,i){t.qm(6);return{Rg:i,Ny:t.Rm()}}static Dy(i,e){const s=t.Ty(i,e);i.qm(8);const n=i.Rm(),r=i.Rm();i.qm(2),i.qm(2);return Yt({},s,{Sy:n,Iy:r,Ey:i.Qm()>>>16})}static by(i,e){const s=t.Ty(i,e);i.qm(2),i.qm(2),i.qm(12);const n=i.Rm(),r=i.Rm(),h=i.Qm(),o=i.Qm();i.qm(4);const a=i.Rm();i.qm(32);const u=i.Rm();return i.qm(2),Yt({},s,{ji:n,Ti:r,Ly:h,xy:o,Cy:a,Oy:u})}static _y(i){const e=t.Dy(i,he.GA),s=Ds(At.Km(i),he.VA);return Yt({},e,{jy:t.Py(s)})}static gy(i){const e=t.Dy(i,he.WA),s=Ds(At.Km(i),he.HA);return Yt({},e,{zy:t.By(s)})}static ly(i){const e=t.Ty(i,he.qA),s=At.Km(i),n=Ds(s,he.XA),r=t.Ry(n),h=Bt(s,he.ZA);return Yt({},e,{Uy:r,Qy:h?t.Fy(h):void 0})}static Ry(t){return{Rg:he.XA,wd:t.Hm()}}static Fy(t){return{Rg:he.ZA,kh:t.Hm()}}static Py(t){return At.lp(t,he.VA,!0)}static By(t){return At.lp(t,he.HA,!0)}static vy(i){const e=t.by(i,he.CA),s=At.Km(i),n=Ds(s,he.OA),r=Bt(s,he.YA);return Yt({},e,{Yy:t.Gy(n),Vy:r?t.Wy(r):void 0})}static Ay(i,e){const s=t.by(i,e),n=Ds(At.Km(i),he.zA);return Yt({},s,{Hy:t.qy(n)})}static py(i,e){const s=t.by(i,e),n=Ds(At.Km(i),he.RA);return Yt({},s,{Xy:t.Zy(n)})}static yy(i,e){const s=t.by(i,e),n=At.Km(i),r=Ds(n,he.QA),h=t.Ky(r),o=Bt(n,he.FA);return Yt({},s,{Jy:h,$y:o?t.tM(o):void 0})}static My(i){const e=i.Lm(),s=t.by(i,he.JA),n=Ds(At.Km(i),he.Am),r=t.iM(n);return Yt({},s,{eM:t.uy(e,r.nM.sM),rM:r})}static wy(i){const e=i.Lm(),s=t.Dy(i,he.KA),n=Ds(At.Km(i),he.Am),r=t.iM(n);return Yt({},s,{eM:t.oy(e,r.nM.sM),rM:r})}static iM(i){const e=Ds(At.Km(i),he.pm),s=t.hM(e);return{Rg:he.Am,nM:s}}static hM(t){const i=t.Wm(4);return{Rg:he.pm,sM:i}}static Gy(t){return At.cp(t,he.OA,!0)}static qy(t){return At.cp(t,he.zA,!0)}static Zy(t){return At.cp(t,he.RA,!0)}static Ky(t){return At.cp(t,he.QA,!0)}static tM(t){const i=t.Wm(4);switch(i){case"nclx":return{oM:l_.ON_SCREEN_COLOURS,aM:t.Rm(),uM:t.Rm(),cM:t.Rm(),lM:0!=(128&t.Pm())};case"rICC":return{oM:l_.RESTRICTED_ICC_PROFILE};case"prof":return{oM:l_.UNRESTRICED_ICC_PROFILE};default:throw g("Could not parse ColourInformationBox: unknown type '"+i+"'.")}}static Wy(t){const i=t.Qm(),e=t.Qm();return{Rg:he.YA,dM:i,fM:e}}static Ep(i){const e=mr(At.Km(i),he.xA).map(t._M);return{Rg:he.kA,Z:e}}static _M(t){const i=t.Qm(),{version:e,flags:s}=Eu(i),n=t.Qm(),r=t.Qm(),h=t.Qm(),o=t.Qm(),a=t.Qm();return{Rg:he.xA,dp:e,fp:s,Fp:n,gM:r,wM:h,vM:o,AM:a}}static Mp(i,e){const s=At.Km(i),n=Ds(s,he.tm),r=mr(s,he.im),h=t.mM(n),o=r.map(t.pM);return{Rg:he.$A,yM:e,rp:h,Z:o}}static mM(t){const i=t.Qm(),{version:e,flags:s}=Eu(i),n=t.Qm();return{Rg:he.tm,dp:e,fp:s,MM:n}}static pM(i){const e=At.Km(i),s=Ds(e,he.nm),n=mr(e,he.hm),r=Bt(e,he.um),h=t.TM(s),o=n.map((i=>t.NM(i,h))),a=r?t.DM(r):void 0;return{Rg:he.im,rp:h,SM:o,IM:a}}static TM(t){const i=t.Qm(),{version:e,flags:s}=Eu(i),n=t.Qm(),r=s.Cm(ki.BASE_DATA_OFFSET_PRESENT)?t.Ym():void 0,h=s.Cm(ki.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.Qm():void 0,o=s.Cm(ki.DEFAULT_SAMPLE_DURATION_PRESENT)?t.Qm():void 0,a=s.Cm(ki.DEFAULT_SAMPLE_SIZE_PRESENT)?t.Qm():void 0,u=s.Cm(ki.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.Qm():void 0;return{Rg:he.nm,dp:e,fp:s,Fp:n,EM:r,bM:h,wM:o,vM:a,AM:u}}static NM(i,e){const s=i.Qm(),{version:n,flags:r}=Eu(s),h=i.Qm(),o=r.Cm(io.DATA_OFFSET_PRESENT)?i.Fm():void 0,a=r.Cm(io.FIRST_SAMPLE_FLAGS_PRESENT)?i.Qm():void 0,u=[];for(let s=0;s<h;s++){const h=t.LM(i,r,n,e);0===s&&void 0!==a&&(h.fp=a),u.push(h)}return{Rg:he.hm,dp:n,fp:r,kM:h,yM:o,xM:a,CM:u}}static LM(t,i,e,s){return{ct:i.Cm(io.SAMPLE_DURATION_PRESENT)?t.Qm():s.wM,hp:i.Cm(io.SAMPLE_SIZE_PRESENT)?t.Qm():s.vM,fp:i.Cm(io.SAMPLE_FLAGS_PRESENT)?t.Qm():s.AM,OM:i.Cm(io.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===e?t.Qm():t.Fm():void 0}}static Dp(t){const i=t.zm,e=t.Bm,s=aa(i,e),{version:n,flags:r}=Eu(s);if(1===n){const t=aa(i,e),s=Oc(i,e),h=aa(i,e),o=aa(i,e),a=cg(i,e),u=cg(i,e),c=Tg(ks(i),e.Ku,i.byteLength);return e.Im(c.byteLength),{Rg:he._m,dp:n,fp:r,jM:a,PM:u,xp:t,zM:s,BM:h,o:o,RM:c}}{const t=cg(i,e),s=cg(i,e),h=aa(i,e),o=aa(i,e),a=aa(i,e),u=aa(i,e),c=Tg(ks(i),e.Ku,i.byteLength);return e.Im(c.byteLength),{Rg:he._m,fp:r,dp:n,jM:t,PM:s,xp:h,UM:o,BM:a,o:u,RM:c}}}static Tp(t){return At.cp(t,he.dm,!1)}static mp(i){const e=i.zm,s=i.Bm,n=He(ks(e)).buffer,r=aa(e,s),{version:h,flags:o}=Eu(r),a=t.QM(e,s),u=[];if(h>0){const t=aa(e,s);for(let i=0;i<t;i++){const t=rl(e,s,16);u.push(t)}}const c=aa(e,s),l=new j(n,s.Ku,c);return s.Im(e.byteLength),{Rg:he.fm,dp:h,fp:o,FM:a,YM:u,GM:c,zm:l,VM:n}}static QM(t,i){let e="";for(let s=0;s<4;s++){const s=Mo(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=Mo(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=Mo(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<2;s++){const s=Mo(t,i).toString(16);e+=1===s.length?"0"+s:s}e+="-";for(let s=0;s<6;s++){const s=Mo(t,i).toString(16);e+=1===s.length?"0"+s:s}return e.toLowerCase()}static Np(t){const i=t.zm,e=t.Bm,s=aa(i,e),{version:n,flags:r}=Eu(s),h=aa(i,e),o=aa(i,e);let a,u;0===n?(a=Ce.fromBits(aa(i,e),0,!0),u=Ce.fromBits(aa(i,e),0,!0)):(a=Oc(i,e),u=Oc(i,e)),e.Im(2);const c=og(i,e),l=[];for(let t=0;t<c;t+=1){const t=aa(i,e),s=t>>31&1,n=2147483647&t,r=aa(i,e),h=aa(i,e),o=h>>31&1,a=h>>28&7,u=268435455&h;l.push({WM:s,HM:n,ct:r,qM:o,XM:a,ZM:u})}return{Rg:he.gm,dp:n,fp:r,KM:h,xp:o,JM:a,$M:u,tT:c,iT:l}}static DM(t){const i=t.zm,e=t.Bm,s=aa(i,e),{version:n,flags:r}=Eu(s);let h;return h=0===n?Ce.fromBits(aa(i,e),0,!0):Oc(i,e),{Rg:he.um,dp:n,fp:r,IM:h}}},bg={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function Lg(t){if(!t)return!0;const i=t.licenseAcquisitionURL,e=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,h=t.queryParameters;return!(i||e||s||n||r||h)}function kg(t){return t&&void 0!==t.licenseAcquisitionURL}var xg,fi,Cg=kg,Og=kg;function jg(t){if(!t)return!0;if(Bg(t))return!1;const i=t.fairplay,e=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return Lg(i)&&Lg(e)&&Lg(s)&&void 0===n&&Lg(r)}function Pg(t){const i=r_(t),e=function(t){var i;const e=t;return n_(e)&&""!==(null==(i=e.fairplay)?void 0:i.headers.PreAuthorization)&&!s_(e)}(t);return(!i||!e)&&(i||e)}function zg(t){return t.integration===hr}function Gu(t){const i=t;if(!i)return!1;if(jg(i))return!1;const e=i.fairplay,s=i.playready,n=i.widevine,r=i.clearkey;if(Bg(t))return!0;if(e&&!function(t){const i=t;return i&&(void 0!==i.certificateURL||void 0!==i.certificate)}(e))return!1;if(s&&!Cg(s))return!1;if(n&&!Og(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(i.integration){if(Nu.mA.wA(i.integration))return!0;switch(i.integration){case Vf:if(!function(t){const i=t,e=i.integration===Vf;return e&&(Rg(t)||Ug(t))}(t))return!1;break;case fr:if(!Qg(t))return!1;break;case qf:if(!function(t){const i=t;return i.integration===qf}(t))return!1;break;case hr:if(!zg(t))return!1;break;case Wf:if(!Pg(t))return!1;break;case Hf:if(!function(t){const i=t;return i.integration===Hf}(t))return!1;break;case Xf:if(!Bg(t))return!1;break;case or:if(!function(t){const i=t;return i.integration===or&&(void 0!==i.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(i))}(t))return!1;break;case Zf:if(!function(t){const i=t;return i.integration===Zf}(t))return!1;break;case lr:if(!Fg(t))return!1;break;case Kf:if(!function(t){return t.integration===Kf}(t))return!1;break;case Jf:if(!Yg(t))return!1;break;case sn:if(!function(t){const i=t;return i.integration===sn&&void 0!==i.token}(t))return!1;break;case $f:if(!function(t){const i=t;return i.integration===$f}(t))return!1;break;case t_:if(!function(t){const i=t;return i&&Po(i.releasePid)&&Po(i.accountId)&&Po(i.token)}(t))return!1;break;case i_:return!0;default:return!1}}return!0}function Bg(t){return t.integration===Xf}function Rg(t){return void 0!==t.authToken}function Ug(t){const i=t;return void 0!==i.accountName&&void 0!==i.customerName&&void 0!==i.portalId}function Qg(t){const i=t;return i.integration===fr&&void 0!==i.token}function Fg(t){const i=t;return i&&i.integration===lr&&Qs(i.ticketAcquisitionURL)&&Qs(i.streamId)}function Yg(t){const i=t;return i.integration===Jf&&void 0!==i.token}function Gg(t,i){const e=i[t];var s;const n=null!=(s=null==e?void 0:e.licenseAcquisitionURL)?s:bg[t];var r;const h=null!=(r=null==e?void 0:e.customdata)?r:i.customdata,o=h?{customData:h}:{};var a;const u=Yt({},null!=(a=null==e?void 0:e.headers)?a:{},o),c=null!=e?e:{},{customdata:l}=c;return Yt({},e_(c,["customdata"]),{licenseAcquisitionURL:n,headers:u})}function on(t){switch(t.toLowerCase()){case"widevine":case ti:return ti;case"playready":case Mn:return Mn;case"fairplay":case uu:return uu}}function Vg(t,i){switch(t){case Yh:return function(t){const i={},e=iu.Ap(new DataView(t));for(const t of e)i[t.FM]=t.VM;return i}(i);case f_:case vr:return function(t){return{[en]:t}}(i);default:throw new Rs(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}function Qu(t,i,e){const s=function(t,i,e){var s;const{useCredentials:n,crossOrigin:r}=function(t,i){let e=Ln.Fv;return t.useCredentials?e=Ln.Gv:t.crossOrigin&&(e=cw(t.crossOrigin)),e===Ln.Fv&&i&&i.vr&&i.vr[360]&&(e=Ln.Yv),{useCredentials:e===Ln.Gv,crossOrigin:e}}(t,i);let h=t.liveOffset;Po(h)||(h=e&&Po(e.liveOffset)?e.liveOffset:void 0);let o=t.timeServer;Po(o)||(o=i&&Po(i.timeServer)?i.timeServer:void 0);let a=t.hlsDateRange;Po(a)||(a=e&&Po(e.hlsDateRange)?Boolean(e.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=Po(t.dash)?Hg(t.dash):void 0,g=Po(t.hls)?qg(t.hls):void 0,w=Kg(Zg(t.abr),null==e?void 0:e.abr),v=Cc(t.lcevc),A=Po(t.ignoreEmbeddedTextTrackTypes)?Iw(t.ignoreEmbeddedTextTrackTypes):[];var m;const p=hw(null!=(m=t.seamlessSwitchStrategy)?m:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch),y=rw(t.latencyConfiguration);return{crossOrigin:r,useCredentials:n,liveOffset:h,timeServer:o,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:_,hls:g,abr:w,lcevc:v,ignoreEmbeddedTextTrackTypes:A,seamlessSwitchStrategy:p,latencyConfiguration:y}}(t,i,e),n=Ff(t.src);let r=t.type;r||(r=t.src?uw(t.src):void 0);const h=function(t,i){let e;e=Po(t.contentProtection)?t.contentProtection:Po(t.drm)?t.drm:Po(i)&&Po(i.contentProtection)?i.contentProtection:Po(i)&&Po(i.drm)?i.drm:void 0;return Wg(e)}(t,i);return Yt({},s,{src:n,type:r,contentProtection:h,ssai:Po(t.ssai)?Gf(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function Wg(t){return Gu(t)&&t.integration&&t.integration===Xf?function(t){const i=Gg(be.Jv,t),e=Gg(be.Kv,t),s=t[be.$v]&&Gg(be.$v,t);return Yt({integration:"keyos",widevine:i,playready:e},s?{fairplay:s}:{})}(t):t}function Hg(t){return{useSeamlessPeriodSwitch:hw(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:Cc(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?pc(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:Cc(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:Cc(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:Cc(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards)}}function qg(t){return{discontinuityAlignment:Xg(null==t?void 0:t.discontinuityAlignment),delaySubtitlePreload:we(null==t?void 0:t.delaySubtitlePreload)}}function Xg(t){if(!t||!Qs(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}function Zg(t){if(!Po(t))return;return Jg(sf(null==t?void 0:t.preferredAudioCodecs,cs),sf(null==t?void 0:t.preferredVideoCodecs,cs),Cc(null==t?void 0:t.restrictToPlayerSize))}function Kg(t,i){if(!Po(t)&&!Po(i))return;var e;return Jg($g(null==t?void 0:t.preferredAudioCodecs,null==i?void 0:i.preferredAudioCodecs),$g(null==t?void 0:t.preferredVideoCodecs,null==i?void 0:i.preferredVideoCodecs),null!=(e=null==t?void 0:t.restrictToPlayerSize)?e:null==i?void 0:i.restrictToPlayerSize)}function Jg(t,i,e){if(0!==t.length||0!==i.length||void 0!==e)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===i.length?void 0:i,restrictToPlayerSize:e}}function $g(t,i){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=i?i:[]}function tw(t,i){if(void 0!==i)switch(t){case fi.ym:return i.preferredVideoCodecs;case fi.Mm:return i.preferredAudioCodecs;default:return}}!function(t){t.eT="auto",t.sT="playlist",t.nT="media"}(xg||(xg={})),function(t){t.Mm="audio",t.ym="video",t.Ru="text",t.rT="image",t.hT="unknown"}(fi||(fi={}));var mi,Ci,pu,iw,Wt,ew=.66,sw=1.5,nw=3;function rw(t){if(!Po(t))return;const i=t.targetOffset;var e;var s;var n;var r;var h;return{minimumOffset:null!=(e=t.minimumOffset)?e:i*ew,targetOffset:i,maximumOffset:null!=(s=t.maximumOffset)?s:i*sw,forceSeekOffset:null!=(n=t.forceSeekOffset)?n:i*nw,minimumPlaybackRate:null!=(r=t.minimumPlaybackRate)?r:vu,maximumPlaybackRate:null!=(h=t.maximumPlaybackRate)?h:Ka}}function hw(t){if(!t||!Qs(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}function ow(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":return!0;default:return!1}}function aw(t){return!!t&&Xi(t,"mpd")}function uw(t){let i=rs.qv;return aw(t)&&(i=rs.Vv),function(t){return!!t&&Xi(t,"m3u8")}(t)&&(i=rs.Wv),i}function cw(t){switch(t){case Ln.Yv:case Ln.Gv:return t;default:return Ln.Fv}}function lw(t){if(!t)return!1;const i=t.toLowerCase();return D(i,rs.Vv)}function dw(t){if(!t)return!1;const i=t.toLowerCase();return D(i,rs.Wv)||D(i,rs.Hv)}function fw(t){return Ut(t)&&Ut(t.ssai)&&"google-dai"===t.ssai.integration}function _w(t){return Ut(t)&&Qs(t.integration)&&"verizon-media"===t.integration}function gw(t){return Ut(t)&&Qs(t.integration)&&"theolive"===t.integration}function ww(t){return Ut(t)&&Qs(t.integration)&&"mediatailor"===t.integration}function vw(t){if(Qs(t))return!t;if(_w(t))return!t.id;if(fw(t)){const i=t.ssai,e="live"===i.availabilityType&&i.assetKey,s="vod"===i.availabilityType&&i.contentSourceID&&i.videoID;return Boolean(e&&s)}return!t.src}function ho(t){return Boolean(Ut(t)&&Qs(t.src))}function Aw(t){return t.type===rs.Xv||t.type===rs.Zv}function mw(t){return Qs(t)||ho(t)||fw(t)||_w(t)}function li(t){if(t){if(mw(t))return vw(t);for(const i of t)if(!vw(i))return!1;return!0}return!0}function pw(){return{crossOrigin:Ln.Fv,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:mi.eT,latencyConfiguration:void 0}}function yw(){return Yt({},pw(),{src:void 0,type:rs.qv,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}!function(t){t.eT="auto",t.oT="always",t.aT="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only"}(mi||(mi={})),function(t){t.VERIZON_MEDIA="verizon-media",t.MEDIATAILOR="mediatailor",t.THEOLIVE="theolive"}(Ci||(Ci={})),function(t){t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled"}(pu||(pu={})),function(t){t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll"}(iw||(iw={})),function(t){t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange"}(Wt||(Wt={}));var Mw,Tw=!1;function Nw(t){const i={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:pu.ENABLED,googleIma:{useNativeIma:!1,bitrate:-1,language:void 0,uiElements:void 0},theoads:!1};return void 0===t||(void 0!==t.preload&&(i.preload=function(t){return"none"===t?iw.NONE:iw.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(i.showCountdown=we(t.showCountdown)),void 0!==t.vpaidMode&&(i.vpaidMode=function(t){switch(t){case"insecure":return pu.INSECURE;case"disabled":return pu.DISABLED;default:return pu.ENABLED}}(t.vpaidMode)),fh(t.allowedMimeTypes)&&(i.allowedMimeTypes=t.allowedMimeTypes.filter(Qs)),void 0!==t.googleIma&&(i.googleIma=function(t){return void 0===t?{useNativeIma:!1,bitrate:-1,language:void 0,uiElements:void 0}:{useNativeIma:we(t.useNativeIma),bitrate:null!=(i=t.bitrate)?i:-1,language:Po(t.language)?cs(t.language):void 0,uiElements:t.uiElements};var i}(t.googleIma)),void 0!==t.theoads?i.theoads=we(t.theoads):i.theoads=Tw),i}function Dw(t){if(!Tn(t))return[];const i=[];for(const e of t)Ut(e)&&i.push(e);return i}function Sw(t){return Qs(t.src)}function Iw(t){return fh(t)?t.filter(ow):[]}!function(t){t[t.uT=0]="uT",t[t.Xn=1]="Xn",t[t.cT=2]="cT",t[t.lT=3]="lT",t[t.dT=4]="dT"}(Mw||(Mw={}));var Da=class extends wn{constructor(t,i=Mw.uT){super(Co.Zg),this.currentTime=t,this.readyState=i}},hs=class extends wn{constructor(t){super(Co.Sh),this.currentTime=t}},Gt=class extends wn{constructor(t){super(Co.jh),this.currentTime=t}},B=class extends wn{constructor(t,i=Mw.Xn){super(Zt.zw),this.currentTime=t,this.readyState=i}},ko=class extends wn{constructor(t){super(Co.Xg),this.duration=t}},Qe=class extends wn{constructor(t,i){super(Co.ww),this.currentTime=t,this.playbackRate=i}},Dr=class extends wn{constructor(t,i){super(Co.Iw),this.currentTime=t,this.currentProgramDateTime=i}},jn=class extends wn{constructor(t){super(Co.Jg),this.currentTime=t}},R=class extends wn{constructor(t,i=Mw.cT){super(Zt.Pw),this.currentTime=t,this.readyState=i}},ri=class extends wn{constructor(t){super(Co.yw),this.currentTime=t}},yi=class extends wn{constructor(t){super(Co.pw),this.currentTime=t}},Pc=class extends wn{constructor(t,i){super(Co.Ew),this.currentTime=t,this.volume=i}},zc=class extends wn{constructor(t,i=Mw.lT){super(Zt.Ow),this.currentTime=t,this.readyState=i}},F=class extends wn{constructor(t,i=Mw.dT){super(Zt.jw),this.currentTime=t,this.readyState=i}},_e=class extends wn{constructor(t,i){super(Zt.H_),this.currentTime=t,this.readyState=i}},Eo=class extends hl{get error(){return this.errorObject.message}fa(){return this}constructor(t){super(Nt.ha),this.errorObject=t}};async function qc(t,i,e,s,n){void 0===e&&(e=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(i)}catch(t){if(yo(t),r<e){const t=_.min(s*2**r,n);r++,await N(t,i);continue}throw t}}var Ew,bw={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};function Lw(t){switch(t){case"all":case"content":return t;default:return"none"}}function kw(t){const e=Ms(t||{});return e.libraryLocation&&(e.libraryLocation=Na(e.libraryLocation,!0)),e.isEmbeddable=Boolean(e.isEmbeddable),e.cast=function(t){const i=Qf(t?t.chromecast:void 0),e=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:i,strategy:e}}(e.cast),e.ads=Nw(e.ads),e.analytics=Dw(e.analytics),e.mutedAutoplay=Lw(e.mutedAutoplay),e.allowNativeFullscreen=Boolean(e.allowNativeFullscreen),e.allowMixedContent=Boolean(e.allowMixedContent),e.persistVolume=Boolean(e.persistVolume),e.liveOffset=function(t){return Number(t)||void 0}(e.liveOffset),e.hlsDateRange=function(t){return Boolean(t)}(e.hlsDateRange),e.retainPlaybackRateOnSourceChange=Boolean(e.retainPlaybackRateOnSourceChange),e.license=function(t){return Qs(t)?t:void 0}(e.license),e.licenseUrl=function(t){if(!t)return;try{return Na(t)}catch(t){return void i.Qv("Invalid 'licenseUrl', falling back to default URL")}}(e.licenseUrl),e.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(e.vr),e.abr=Zg(e.abr),e.retryConfiguration=function(t){const i=Yt({},bw);return void 0!==t&&(void 0!==t.maxRetries&&(i.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(i.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(i.maximumBackoff=Number(t.maximumBackoff))),i}(e.retryConfiguration),e.hideDeprecationWarnings=Boolean(e.hideDeprecationWarnings),e.theoLive=function(t){if(!t)return t;return Yt({},t,{externalSessionId:t.externalSessionId?cs(t.externalSessionId):void 0,fallbackEnabled:Cc(t.fallbackEnabled)})}(e.theoLive),e}function xw(t){return{bt:t.bt,Mf:t.Mf,ct:t.ct,Sf:t.Sf,lt:t.lt,bf:t.bf,zf:t.zf,Ff:t.Ff,Gf:t.Gf,Jf:t.Jf,e_:t.e_,r_:t.r_,a_:t.a_,c_:t.c_}}function Cw(t,i){const e=i.c_,s=i.zf;t.c_=e,t.zf=s}function ic(t,i,e){if(i===e)return;const s=i.bt!==e.bt,n=i.Mf,r=i.ct,h=i.zf,o=i.Ff,a=i.Gf,u=i.Jf,c=i.e_,l=(i.a_,i.r_,i.c_),d=e.Mf,f=e.ct,_=e.Sf,g=e.bf,w=e.zf,v=e.Ff,A=e.Gf,m=e.Jf,p=e.e_,y=(e.a_,e.r_,e.c_);(s||u>Mw.uT&&m===Mw.uT)&&t.Co(new Da(d,m)),v&&!o?t.Co(new hs(d)):!v&&o&&t.Co(new Gt(d)),m>=Mw.Xn&&(s||u<Mw.Xn)&&t.Co(new B(d,m)),f===r||S(f)&&S(r)||t.Co(new ko(f)),A!==a&&t.Co(new Qe(d,A)),d!==n&&t.Co(new Dr(d,void 0)),_&&t.Co(new jn(d)),m>=Mw.cT&&(s||u<Mw.cT)&&t.Co(new R(d,m)),p&&!c?t.Co(new ri(d)):!p&&c&&t.Co(new yi(d)),y===l&&w===h||t.Co(new Pc(d,y)),m>=Mw.lT&&(s||u<Mw.lT)&&t.Co(new zc(d,m)),m>=Mw.dT&&(s||u<Mw.dT)&&t.Co(new F(d,m)),m!==u&&t.Co(new _e(d,m)),g&&t.Co(new Eo(g))}!function(t){t.NONE="none",t.ALL="all",t.CONTENT="content"}(Ew||(Ew={}));var V=class extends wn{constructor(t){super(Co.Hg),this.currentSource=t}},Zc=class extends wn{constructor(){super(Co.$g)}},z=class extends wn{constructor(){super(Co.ew)}},Ow=class extends Fd{df(){return this.fT}get kf(){return this.xf()}xf(){return this._T}n_(){return this.Dl}o_(){return this.gT}wT(t){const i=this._f;if(i===t)return;i.cf(this.b_);const e=xw(this),s=this.yf(),n=this.w_(),r=this.v_();this._f=t,this.fT.fg=t.ht,this.gT.fg=t.rt,this.Dl.fg=t.nt,this._T.fg=t.kf,void 0!==e&&ic(this,e,this);const h=this.yf();h!==s&&this.Co(new V(h)),this.w_()!==n&&this.Co(new Zc),this.v_()!==r&&this.Co(new z),t.sf(this.b_)}async gn(){await super.gn(),this.fT.gn(),this.gT.gn(),this.Dl.gn(),this._T.gn()}constructor(t){super(t),this.fT=new vo,this.gT=new vo,this.Dl=new al,this._T=new Cu,this.fT.fg=t.ht,this.gT.fg=t.rt,this.Dl.fg=t.nt,this._T.fg=t.kf}};var bi,jw=class extends Ow{Pf(){return function(t){let i=0,e=0,s=0,n=0,r=0,h=0,o=0;for(const a of t)i+=a.vT,e+=a.AT,s+=a.mT,n+=a.pT,r+=a.yT,h+=a.MT.amountOfBufferedAudioSegments,o+=a.MT.amountOfBufferedVideoSegments;return{vT:i,AT:e,mT:s,pT:n,yT:r,MT:{amountOfBufferedAudioSegments:h,amountOfBufferedVideoSegments:o}}}(this.TT.map((t=>t.jf)))}y_(){return P(this.TT.map((t=>t.y_()))).then(na)}tr(){return P(this.TT.map((t=>t.tr()))).then(na)}A_(){if(!this.bo){for(const t of this.TT)t.A_();this.bo=!0}}gf(){const t=[];for(const i of this.TT)t.push(...i.gf());return t}I_(t){let i=!1;for(const e of this.TT)i=e.I_(t)||i;return i}Co(t){this.I_(t)||super.Co(t)}get fg(){return this._f}set fg(t){this.wT(t)}NT(t){this.TT.push(t)}DT(t){Qr(this.TT,t)}wT(t){if(t===this._f)return;const i=this._f;i.ar(),super.wT(t),t.ur(i)}D_(){for(const t of this.TT)t.D_()}async gn(){this.Vo(),this._f.ar();for(const t of this.TT)this._f!==t&&await t.gn();await super.gn()}constructor(t){super(t),this.TT=[],this.bo=!1,this.ST=!1,this.NT(t)}};!function(t){t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR"}(bi||(bi={}));var nl=class extends xd{get name(){return"MediaError"}constructor(t,i,e,s){super(i),this.code=t,this.message=null!=i?i:"Unknown error",this.cause=e,this.systemCode=s,g.captureStackTrace&&g.captureStackTrace(this,this.constructor)}};function Pw(t){Zd(t,"MEDIA_ERR_ABORTED",1),Zd(t,"MEDIA_ERR_NETWORK",2),Zd(t,"MEDIA_ERR_DECODE",3),Zd(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),Zd(t,"MEDIA_ERR_ENCRYPTED",5)}function tn(t){var i,e;return function(t){return t.category===Rh.CONTENT_PROTECTION}(t)?new nl(5,t.message,null==(i=t.cause)?void 0:i.message,t.systemCode):new nl(zw(t.code),t.message,null==(e=t.cause)?void 0:e.message)}function zw(t){if(t===Ui.MEDIA_ABORTED)return 1;if(t===Ui.MANIFEST_LOAD_ERROR||t===Ui.MEDIA_LOAD_ERROR||t===Ui.SUBTITLE_LOAD_ERROR)return 2;if(t===Ui.MEDIA_DECODE_ERROR)return 3;if(t===Ui.MEDIA_NOT_SUPPORTED)return 4;const i=Rh.fromCode(t);return i===Rh.NETWORK?2:i===Rh.SOURCE?4:i===Rh.LICENSE?6:i===Rh.CONTENT_PROTECTION?5:i===Rh.AD?7:3}function Bw(t){return new Rs(Rw(t.code),t.message,t)}function Rw(t){switch(t){case 1:return Ui.MEDIA_ABORTED;case 2:return Ui.NETWORK_ERROR;case 3:return Ui.MEDIA_DECODE_ERROR;case 4:return Ui.SOURCE_NOT_SUPPORTED;case 5:return Ui.CONTENT_PROTECTION_ERROR;case 6:return Ui.LICENSE_ERROR;case 7:return Ui.AD_ERROR}}Pw(nl),Pw(nl.prototype);var wo=class extends Pn{tt(t){return super.tt(t)}fa(){return uf(this)}};var Uw=class{get og(){return this.IT}get U(){return this.IT.length}get va(){return this.Xa||(this.Xa=function(t){const i=t.og.map((t=>t.va));return i.item=i=>{const e=0|i,s=t.cg(e);return s&&s.va||void 0},i}(this)),this.Xa}ET(t){this.IT.push(t),this.Xa&&this.Xa.push(t.va)}bT(t){Qr(this.IT,t),this.Xa&&Qr(this.Xa,t.va)}cg(t){return this.IT[t]}LT(t){return fh(t)?function(t,i){for(const e of i)if(!qo(t,e))return!1;return!0}(this.IT,t):qo(this.IT,t)}tr(){No(this.IT),this.Xa&&No(this.Xa)}constructor(){this.IT=[],this.Xa=void 0}},Ks=class extends ja{fa(){return new Qw(this.Lt.va)}constructor(t){super(qt.K_),this.Lt=t}},Qw=class extends Y{constructor(t){super("update"),this.track=t}},Fw=0;function Xc(){return Fw++}var Yw=0;var Gw=0;function Vw(){return Gw++}var Ww=0;function Hw(){return Ww++}var qw=0;var Xw=class extends Bo{get yg(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.kT=t,this.Co(new no(this)))}get kT(){return this.xT.enabled}set kT(t){this.xT.enabled=t}get va(){return this.Xa||(this.Xa=ni(this)),this.Xa}get o(){return this.CT}get Mg(){return this.OT}get zt(){return this.xT.kind}get kh(){return this.jT}set kh(t){t!==this.jT&&(this.jT=t,this.Co(new Ks(this)))}get gs(){return this.xT.language}get jg(){return this.Rt?"enabled":"disabled"}get PT(){return this.xT}get Ng(){return this.IT}get Dg(){}set Dg(t){}zT(t){this.Rt=t}BT(){this.Rt=this.kT}constructor(t){super(),this.Rg=fi.Mm,this.Le=!1,this.Xa=void 0,this.xT=t,this.OT=Xc(),this.CT=qw+++"",this.jT=t.label,this.IT=new Uw,this.BT()}},Zw=0;var si,qu,Kw=class extends Bo{get yg(){}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.kT=t,this.Co(new no(this)))}get kT(){return!!this.xT.selected}set kT(t){this.xT.selected=t}get va(){return this.Xa||(this.Xa=ni(this)),this.Xa}get o(){return this.CT}get Mg(){return this.OT}get zt(){return"main"}get kh(){return this.jT}set kh(t){t!==this.jT&&(this.jT=t,this.Co(new Ks(this)))}get gs(){return this.xT.language}get jg(){return this.Rt?"enabled":"disabled"}get PT(){return this.xT}get Ng(){return this.IT}get Dg(){}set Dg(t){}BT(){this.Rt=this.kT}zT(t){this.Rt=t}constructor(t){super(),this.Rg=fi.ym,this.Le=!1,this.Xa=void 0,this.xT=t,this.OT=Xc(),this.CT=Zw+++"",this.IT=new Uw,this.jT=t.label,this.BT()}},Jw=class extends wn{constructor(t){super(Co.Qg),this.Cf=t}};!function(t){t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(si||(si={})),function(t){t.RT="cue",t.UT="region",t.QT="stylesheet"}(qu||(qu={}));var Di,$w={"line-left":"start",center:"middle","line-right":"end"},iv={start:"line-left",middle:"center",end:"line-right"};function ev(t,i){if("auto"===t)switch(i){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function sv(t,i){if("auto"===t)switch(i){case"left":return 0;case"right":return 100;default:return 50}return function(t,i){const e="number"==typeof t?t:C(t);return S(e)?i:e}(t,50)}!function(t){t.FT="mo",t.YT="So",t.K_="Yn"}(Di||(Di={}));var zr=class extends ja{constructor(t,i){super(t),this.GT=i}},Hr=class extends Y{constructor(t,i){super(t),this.cue=i}};function Lh(t){const i=[Di.FT,Di.YT,Di.K_];let e;const s={get track(){return t.Lt.va},get id(){return t.o},get uid(){return t.Mg},get startTime(){return t.VT},set startTime(i){t.VT=i},get endTime(){return t.WT},set endTime(i){t.WT=i},get content(){return t.O},addEventListener(t,i){const s=Ko(t,cs);e.yn(s,i)},removeEventListener(t,i){const s=Ko(t,cs);e.fn(s,i)}};return e=new hi(s),t.yn(i,(t=>e.Co(t.va))),s}function nv(){}function rv(t){return lt(Lh(t),{get align(){return t.HT},get line(){return t.qT},get lineAlign(){return t.XT},get position(){return t.po},get positionAlign(){return t.ZT},get region(){return t.KT?t.KT.va:null},get size(){return t.hp},get snapToLines(){return t.JT},get text(){return t.O},get vertical(){return t.Pt}})}var rh=class extends zr{fa(){return new hv(this.GT.va)}constructor(t){super(Di.K_,t)}},hv=class extends Hr{constructor(t){super("update",t)}},eh=class extends ja{fa(){return new ov(this.GT.va)}constructor(t){super(qt.B_),this.GT=t}},ov=class extends Y{constructor(t){super("updatecue"),this.cue=t}},xr=.02;function av(t,i){return M(t.$T,i.$T,xr)&&M(t.tN,i.tN,xr)&&t.o===i.o}var je=class extends Bo{get VT(){return this.iN}set VT(t){var i,e;this.iN!==t&&(this.iN=t,null==(i=this.eN)||i.sN(this),this.Co(new rh(this)),null==(e=this.eN)||e.Co(new eh(this)))}get WT(){return this.nN}set WT(t){var i,e;this.nN!==t&&(this.nN=t,null==(i=this.eN)||i.sN(this),this.Co(new rh(this)),null==(e=this.eN)||e.Co(new eh(this)))}get o(){return this.CT}get Mg(){return this.OT}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Lh(this)}get ro(){return this.ho}set ro(t){this.ho=t}get Lt(){return this.eN}set Lt(t){this.eN=t}get O(){return this.rN}set O(t){var i;this.rN!==t&&(this.rN=t,this.Co(new rh(this)),null==(i=this.eN)||i.Co(new eh(this)))}get hN(){return this.oN}set hN(t){this.oN=t}aN(t){return this===t||$d(this,t)&&av(this,t)&&this.uN(t)}uN(t){return Dc(this.O,t.O)}cN(t,i){this.iN=t,this.nN=i,this.$T=t,this.tN=i}gn(){this.Vo()}constructor(t,i,e,s,n){super(),this.Xa=void 0,this.eN=void 0,this.ho=!1,this.lN=-1,this.OT=Hw(),this.iN=t,this.nN=i,this.$T=t,this.tN=i,this.rN=e,this.oN=Boolean(s),this.CT=null!=n?n:""}};function uv(t,i){return t.O===i.O&&t.qT===i.qT&&t.XT===i.XT&&t.po===i.po&&t.ZT===i.ZT&&t.KT===i.KT&&t.JT===i.JT&&t.hp===i.hp&&t.HT===i.HT&&t.Pt===i.Pt}var O=class extends je{get va(){return this.Xa||(this.Xa=rv(this)),this.Xa}get Rg(){return qu.RT}uN(t){return uv(this,t)}constructor(t,i,e,s,n){super(t,i,e,s,n),this.qT="auto",this.XT="start",this.po="auto",this.ZT="auto",this.KT=void 0,this.JT=!0,this.hp=100,this.HT="center",this.Pt=""}};function mt(t){const i=t.qT,e=ci(i);return e&&!t.JT&&(i<0||i>100)?100:e?Number(i):t.JT?-1:100}function cv(t){return sv(t.po,t.HT)}function lv(t){return ev(t.ZT,t.HT)}function dv(t){const i=lv(t),e=cv(t);let s;switch(i){case"line-left":s=100-e;break;case"line-right":s=e;break;case"center":s=e<=50?2*e:2*(100-e)}return _.min(t.hp,s)}function fv(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.dN},get regionAnchorX(){return t.fN},get regionAnchorY(){return t._N},get scrollValue(){return t.gN},get viewportAnchorX(){return t.wN},get viewportAnchorY(){return t.vN},get width(){return t.ji}}}var _v=class{get va(){return this.Xa||(this.Xa=fv(this)),this.Xa}get Rg(){return qu.UT}constructor(t,i,e,s,n,r,h,o){this.o=t,this.ji=i,this.dN=e,this.fN=s,this._N=n,this.wN=r,this.vN=h,this.gN=o}},ua=1e6,tt=class{AN(t){return this.mN()*t}pN(t){return this.yN(t)>0}MN(t){return this.yN(t)>=0}TN(t,i){return this.DN(t).NN(i)}aN(t){return 0===this.yN(t)}SN(t){return this.yN(t)<0}NN(t){return this.yN(t)<=0}IN(){return this.EN()?this.bN():this}LN(t){return this.ET(t.bN())}DN(t){return this.LN(t).IN()}};function gv(t,i){return t.kN()?i.kN()?Ri.Zr:Ri.ul:i.kN()?Ri.hd:t.xN()?i.xN()&&t.EN()===i.EN()?Ri.Zr:t.EN()?Ri.hd:Ri.ul:i.EN()?Ri.ul:Ri.hd}var wv=4294967296,vv=wv*wv,Av=vv*vv,mv=Av/2,Ih=class t{static CN(i,e,s){return s?new t(i.toUnsigned(),e.toUnsigned()):new t(i.toSigned(),e.toSigned())}static ON(i){return i.unsigned?new t(i,Ce.UZERO):new t(i,i.isNegative()?Ce.NEG_ONE:Ce.ZERO)}static jN(i,e){if(S(i))return e?t.PN:t.zN;if(e){if(i<0)return t.PN;if(i>=Av)return t.BN}else{if(i<=-mv)return t.RN;if(i+1>=mv)return t.UN}return i<0?t.jN(-i,e).bN():t.CN(Ce.fromNumber(i%vv),Ce.fromNumber(i/vv),e)}QN(){return this.FN.unsigned}YN(){return this.GN.isZero()&&this.FN.isZero()}EN(){return this.FN.isNegative()}VN(){return this.QN()?t.CN(this.GN,this.FN,!1):this}WN(){return this.QN()?this:t.CN(this.GN,this.FN,!0)}HN(){return this.GN}mN(){return this.EN()?-this.bN().mN():this.FN.toNumber()*vv+this.GN.toUnsigned().toNumber()}qN(){return this.GN.toInt()}aN(t){return(this.QN()===t.QN()||this.FN.getHighBits()>>>31!=1||t.FN.getHighBits()>>>31!=1)&&(this.FN.toUnsigned().eq(t.FN.toUnsigned())&&this.GN.toUnsigned().eq(t.GN.toUnsigned()))}yN(t){if(this.aN(t))return Ri.Zr;const i=this.EN(),e=t.EN();if(i&&!e)return Ri.hd;if(!i&&e)return Ri.ul;if(!this.QN())return this.LN(t).EN()?Ri.hd:Ri.ul;const s=this.WN(),n=t.WN(),r=n.FN.comp(s.FN);return r>0||0===r&&n.GN.gt(s.GN)?Ri.hd:Ri.ul}SN(t){return this.yN(t)<0}NN(t){return this.yN(t)<=0}XN(t){return this.yN(t)>0}ZN(t){return this.yN(t)>=0}KN(){return new t(this.GN.not(),this.FN.not())}JN(i){return new t(this.GN.and(i.GN),this.FN.and(i.FN))}$N(i){return new t(this.GN.or(i.GN),this.FN.or(i.FN))}tD(i){const e=127&i;return 0===e?this:e<64?t.CN(this.GN.shl(e),this.FN.shl(e).or(this.GN.shru(64-e)),this.QN()):t.CN(Ce.ZERO,this.GN.shl(e-64),this.QN())}iD(i){const e=127&i;return 0===e?this:e<64?t.CN(this.GN.shru(e).or(this.FN.shl(64-e)),this.FN.shr(e),this.QN()):t.CN(this.FN.shr(e-64),this.FN.isNegative()?Ce.NEG_ONE:Ce.ZERO,this.QN())}eD(i){const e=127&i;return 0===e?this:e<64?t.CN(this.GN.shru(e).or(this.FN.shl(64-e)),this.FN.shru(e),this.QN()):64===e?t.CN(this.FN,Ce.ZERO,this.QN()):t.CN(this.FN.shru(e-64),Ce.ZERO,this.QN())}ET(i){const e=this.FN.high>>>16,s=65535&this.FN.high,n=this.FN.low>>>16,r=65535&this.FN.low,h=this.GN.high>>>16,o=65535&this.GN.high,a=this.GN.low>>>16,u=65535&this.GN.low,c=i.FN.high>>>16,l=65535&i.FN.high,d=i.FN.low>>>16,f=65535&i.FN.low,_=i.GN.high>>>16,g=65535&i.GN.high,w=i.GN.low>>>16;let v=0,A=0,m=0,p=0,y=0,M=0,T=0,N=0;N+=u+(65535&i.GN.low),T+=N>>>16,N&=65535,T+=a+w,M+=T>>>16,T&=65535,M+=o+g,y+=M>>>16,M&=65535,y+=h+_,p+=y>>>16,y&=65535,p+=r+f,m+=p>>>16,p&=65535,m+=n+d,A+=m>>>16,m&=65535,A+=s+l,v+=A>>>16,A&=65535,v+=e+c,v&=65535;const D=this.QN(),S=Ce.fromBits(m<<16|p,v<<16|A,D),I=Ce.fromBits(T<<16|N,y<<16|M,D);return t.CN(I,S,D)}LN(t){return this.ET(t.bN())}bN(){return this.KN().ET(t.sD)}nD(i){if(this.YN()||i.YN())return this.QN()?t.PN:t.zN;if(this.EN())return i.EN()?this.bN().nD(i.bN()):this.bN().nD(i).bN();if(i.EN())return this.nD(i.bN()).bN();if(this.FN.isZero()&&0===this.GN.high&&i.FN.isZero()&&0===i.GN.high)return t.ON(this.GN.multiply(i.GN));const e=Ce.fromBits(4294967295,0,!0),s=this.GN.and(e),n=this.GN.shru(32),r=this.FN.and(e),h=this.FN.shru(32),o=i.GN.and(e),a=i.GN.shru(32),u=i.FN.and(e),c=i.FN.shru(32);let l=Ce.UZERO,d=Ce.UZERO,f=Ce.UZERO,_=Ce.UZERO;l=l.add(s.mul(o)),d=d.add(l.shru(32)),l=l.and(e),d=d.add(n.mul(o)),f=f.add(d.shru(32)),d=d.and(e),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(e),f=f.add(r.mul(o)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(e),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(e),_=_.add(h.mul(o)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(e);const g=Ce.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),w=Ce.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.CN(g,w,this.QN())}rD(i){let e,s,n=i;if(n.YN())throw new RangeError("division by zero");if(this.YN())return this.QN()?[t.PN,t.PN]:[t.zN,t.zN];if(this.QN()){if(n.QN()||(n=n.WN()),n.XN(this))return[t.PN,this];if(n.XN(this.eD(1)))return s=t.hD,e=this.LN(n),[s,e];s=t.PN}else{if(this.aN(t.RN)){if(n.aN(t.sD)||n.aN(t.oD))return[t.RN,t.zN];if(n.aN(t.RN))return[t.sD,t.zN];{const i=this.iD(1).aD(n).tD(1);return i.aN(t.zN)?s=n.EN()?t.sD:t.oD:(e=this.LN(n.nD(i)),s=i.ET(e.aD(n))),e=this.LN(n.nD(s)),[s,e]}}if(n.aN(t.RN))return this.QN()?[t.PN,this]:[t.zN,this];if(this.EN())return n.EN()?this.bN().rD(n.bN()):([s,e]=this.bN().rD(n),[s.bN(),e.bN()]);if(n.EN())return[s,e]=this.rD(n.bN()),[s.bN(),e.bN()];s=t.zN}for(e=this;e.ZN(n);){let i=_.max(1,_.floor(e.mN()/n.mN()));const r=_.ceil(_.log(i)/_.LN2),h=r<=48?1:2**(r-48);let o=t.jN(i),a=o.nD(n);for(;a.EN()||a.XN(e);)i-=h,o=t.jN(i,this.QN()),a=o.nD(n);o.YN()&&(o=t.sD),s=s.ET(o),e=e.LN(a)}return[s,e]}aD(t){return this.rD(t)[0]}uD(t){return this.rD(t)[1]}toString(i){const e=i||10;if(e<2||e>36)throw new RangeError("radix");if(this.YN())return"0";if(this.EN()){if(this.aN(t.RN)){const i=t.jN(e),s=this.aD(i),n=s.nD(i).LN(this);return s.toString(e)+n.qN().toString(e)}return"-"+this.bN().toString(e)}const s=t.jN(e**6,this.QN());let n=this,r="";for(;;){const t=n.aD(s);let i=(n.LN(t.nD(s)).qN()>>>0).toString(e);if(n=t,n.YN())return i+r;for(;i.length<6;)i="0"+i;r=String(i)+r}}constructor(t,i){this.GN=t,this.FN=i}};Ih.zN=Ih.ON(Ce.ZERO),Ih.PN=Ih.ON(Ce.UZERO),Ih.sD=Ih.ON(Ce.ONE),Ih.hD=Ih.ON(Ce.UONE),Ih.oD=Ih.ON(Ce.NEG_ONE),Ih.UN=Ih.CN(Ce.NEG_ONE,Ce.MAX_VALUE,!1),Ih.BN=Ih.CN(Ce.MAX_UNSIGNED_VALUE,Ce.MAX_UNSIGNED_VALUE,!0),Ih.RN=Ih.CN(Ce.ZERO,Ce.MIN_VALUE,!1);var Jt=class t{get xN(){return!isFinite(this.cD)}get Kl(){return this.cD/this.xp}static lD(i){return new t(_.ceil(i.cD),i.xp)}static dD(i){return new t(_.floor(i.cD),i.xp)}static fD(t,i){return t.MN(i)?t:i}static _D(t,i){return t.NN(i)?t:i}ET(i){return this.xp>=i.xp?new t(this.cD+i.gD(this.xp).cD,this.xp):new t(this.gD(i.xp).cD+i.cD,i.xp)}pN(t){return t.SN(this)}MN(t){return t.NN(this)}DN(i){if(this.xp>=i.xp){const e=_.abs(this.cD-i.gD(this.xp).cD),s=this.xp;return new t(e,s)}return i.DN(this)}TN(t,i){return this.DN(t).NN(i)}yN(t){return function(t,i){return t.xp>=i.xp?dd(t.cD,i.gD(t.xp).cD):dd(t.gD(i.xp).cD,i.cD)}(this,t)}aN(t){return 0===this.yN(t)}SN(t){return this.yN(t)<0}NN(t){return this.yN(t)<=0}gD(i){return new t(this.cD*(i/this.xp),i)}LN(i){return this.xp>=i.xp?new t(this.cD-i.gD(this.xp).cD,this.xp):new t(this.gD(i.xp).cD-i.cD,i.xp)}wD(i){return new t(this.cD*i,this.xp)}constructor(t,i=1){this.cD=t,this.xp=i}};Jt.Zl=new Jt(1/6,1),Jt.zN=new Jt(0),Jt.vD=new Jt(1/0),Jt.mD=1e6;var ma=class t extends tt{static pD(i,e){return void 0===e&&(e=ua),t.jN(i*e,e)}static jN(i,e){return S(i)?t.yD:i===1/0?t.MD:i===-1/0?t.TD:new t(Ce.fromNumber(i),e)}static ON(i,e){return new t(i,e)}static ND(i){return t.pD(i.Kl,ua)}static DD(i){return new t(Ce.fromNumber(i.getTime()),1e3)}static fD(t,i){return t.MN(i)?t:i}static _D(t,i){return t.NN(i)?t:i}static SD(i,e,s){return t.fD(e,t._D(s,i))}EN(){return this.PM.isNegative()}YN(){return 0!==this.xp&&this.PM.isZero()}xN(){return 0===this.xp&&!this.PM.isZero()}kN(){return 0===this.xp&&this.PM.isZero()}mN(){if(0===this.xp)return this.PM.isZero()?NaN:this.PM.isNegative()?-1/0:1/0;const t=this.PM.divide(this.xp),i=this.PM.subtract(t.multiply(this.xp));return t.toNumber()+i.toNumber()/this.xp}HN(){if(0===this.xp)throw new g("Failed to convert timestamp");return this.PM}ED(){return new Date(0===this.xp?NaN:this.gD(1e3).PM.toNumber())}bD(){return new Jt(0===this.xp?this.mN():this.PM.toNumber(),this.xp)}gD(i,e){void 0===e&&(e=Hu.LD);const s=this.xp;if(s===i)return this;if(0===s)return this;const n=ud(s,i),r=function(t,i,e){const[s,n]=t.rD(i);if(n.YN())return s;if(e===Hu.LD)return n.EN()?s.LN(Ih.sD):s;if(e===Hu.kD)return n.EN()?s:s.ET(Ih.sD);{const t=n.nD(Ih.jN(2));return t.EN()?t.bN().SN(i)?s:s.LN(Ih.sD):t.SN(i)?s:s.ET(Ih.sD)}}(Ih.ON(this.PM).nD(Ih.jN(i/n)),Ih.jN(s/n),e);return new t(r.HN(),i)}yN(t){if(this===t)return Ri.Zr;if(0===this.xp||0===t.xp)return gv(this,t);if(this.YN())return t.YN()?Ri.Zr:t.EN()?Ri.ul:Ri.hd;if(t.YN())return this.EN()?Ri.hd:Ri.ul;const i=_.min(this.xp,t.xp),e=this.gD(i,Hu.xD).PM,s=t.gD(i,Hu.xD).PM;return e.compare(s)}bN(){return 0===this.xp?function(t){0;return t.kN()?t:t.EN()?ma.MD:ma.TD}(this):new t(this.PM.negate(),this.xp)}ET(i){if(0===this.xp||0===i.xp)return function(t,i){0;if(t.kN()||i.kN())return ma.yD;if(t.xN()&&i.xN())return t.EN()===i.EN()?t:ma.yD;return t.xN()?t:i}(this,i);if(this.YN())return i;if(i.YN())return this;const e=_.max(this.xp,i.xp),s=this.gD(e,Hu.xD),n=i.gD(e,Hu.xD);return new t(s.PM.add(n.PM),e)}nD(i){if(this.kN()||S(i))return t.yD;if(this.xN()||!isFinite(i)){if(this.YN()||0===i)return t.yD;{const e=this.EN()?t.TD:t.MD;return i<0?e.bN():e}}return this.YN()?this:new t(0===i?Ce.ZERO:this.PM.multiply(i),this.xp)}aD(i){if(this.kN()||S(i))return t.yD;if(this.xN())return isFinite(i)?0===i?1/i<0?this.bN():this:i<0?this.bN():this:t.yD;if(!isFinite(i))return new t(Ce.ZERO,this.xp);if(this.YN())return 0===i?t.yD:new t(Ce.ZERO,this.xp);if(0===i){const e=this.EN()?t.TD:t.MD;return 1/i<0?e.bN():e}return new t(this.PM.divide(i),this.xp)}CD(){return[this.PM.low,this.PM.high,this.xp]}constructor(t,i){super(),this.PM=t.toSigned(),this.xp=i>>>0}};ma.zN=new ma(Ce.ZERO,ua),ma.yD=new ma(Ce.ZERO,0),ma.MD=new ma(Ce.ONE,0),ma.TD=new ma(Ce.NEG_ONE,0);var Hu,H=class t extends tt{static pD(i,e){return void 0===e&&(e=ua),t.jN(i*e,e)}static jN(i,e){return S(i)?t.yD:i===1/0?t.MD:i===-1/0?t.TD:new t(BigInt(_.floor(i)),e)}static ON(i,e){return new t(BigInt(i.high)<<BigInt(32)|BigInt(i.low>>>0),e)}static ND(i){return t.pD(i.Kl,ua)}static DD(i){return t.jN(i.getTime(),1e3)}static get zN(){return t.OD||(t.OD=new t(BigInt(0),ua)),t.OD}static get yD(){return t.jD||(t.jD=new t(BigInt(0),0)),t.jD}static get MD(){return t.PD||(t.PD=new t(BigInt(1),0)),t.PD}static get TD(){return t.zD||(t.zD=new t(BigInt(-1),0)),t.zD}static fD(t,i){return t.MN(i)?t:i}static _D(t,i){return t.NN(i)?t:i}static SD(i,e,s){return t.fD(e,t._D(s,i))}EN(){return this.PM<BigInt(0)}YN(){return 0!==this.xp&&this.PM===BigInt(0)}xN(){return 0===this.xp&&this.PM!==BigInt(0)}kN(){return 0===this.xp&&this.PM===BigInt(0)}mN(){if(0===this.xp)return this.PM===BigInt(0)?NaN:this.PM<BigInt(0)?-1/0:1/0;const t=this.PM/BigInt(this.xp),i=this.PM-t*BigInt(this.xp);return Number(t)+Number(i)/this.xp}HN(){if(0===this.xp)throw new g("Failed to convert timestamp");return this.BD()}BD(){const t=this.PM&BigInt(4294967295),i=this.PM>>BigInt(32)&BigInt(4294967295);return Ce.fromBits(Number(t),Number(i))}ED(){return new Date(0===this.xp?NaN:Number(this.gD(1e3).PM))}bD(){return new Jt(0===this.xp?this.mN():Number(this.PM),this.xp)}gD(i,e){void 0===e&&(e=Hu.LD);const s=this.xp;if(s===i)return this;if(0===s)return this;const n=ud(s,i),r=function(t,i,e){const s=t/i,n=t-s*i;if(n===BigInt(0))return s;if(e===Hu.LD)return n<BigInt(0)?s-BigInt(1):s;if(e===Hu.kD)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<i?s:s-BigInt(1):t<i?s:s+BigInt(1)}}(this.PM*BigInt(i/n),BigInt(s/n),e);return new t(r,i)}yN(t){if(this===t)return Ri.Zr;if(0===this.xp||0===t.xp)return gv(this,t);if(this.YN())return t.YN()?Ri.Zr:t.EN()?Ri.ul:Ri.hd;if(t.YN())return this.EN()?Ri.hd:Ri.ul;const i=_.min(this.xp,t.xp),e=this.gD(i,Hu.xD).PM,s=t.gD(i,Hu.xD).PM;return e>s?Ri.ul:e<s?Ri.hd:Ri.Zr}bN(){return 0===this.xp?function(t){0;return t.kN()?t:t.EN()?H.MD:H.TD}(this):new t(-this.PM,this.xp)}ET(i){if(0===this.xp||0===i.xp)return function(t,i){0;if(t.kN()||i.kN())return H.yD;if(t.xN()&&i.xN())return t.EN()===i.EN()?t:H.yD;return t.xN()?t:i}(this,i);if(this.YN())return i;if(i.YN())return this;const e=_.max(this.xp,i.xp),s=this.gD(e,Hu.xD),n=i.gD(e,Hu.xD);return new t(s.PM+n.PM,e)}nD(i){if(this.kN()||S(i))return t.yD;if(this.xN()||!isFinite(i)){if(this.YN()||0===i)return t.yD;{const e=this.EN()?t.TD:t.MD;return i<0?e.bN():e}}return this.YN()?this:new t(0===i?BigInt(0):this.PM*BigInt(i),this.xp)}aD(i){if(this.kN()||S(i))return t.yD;if(this.xN())return isFinite(i)?0===i?1/i<0?this.bN():this:i<0?this.bN():this:t.yD;if(!isFinite(i))return new t(BigInt(0),this.xp);if(this.YN())return 0===i?t.yD:new t(BigInt(0),this.xp);if(0===i){const e=this.EN()?t.TD:t.MD;return 1/i<0?e.bN():e}return new t(this.PM/BigInt(i),this.xp)}CD(){const t=this.BD();return[t.low,t.high,this.xp]}constructor(t,i){super(),this.PM=BigInt.asIntN(64,t),this.xp=i>>>0}};H.OD=void 0,H.jD=void 0,H.PD=void 0,H.zD=void 0,function(t){t[t.LD=0]="LD",t[t.kD=1]="kD",t[t.xD=2]="xD"}(Hu||(Hu={}));var is=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?H:ma;function pv(t,i){return t.yN(i)}function yv(t,i){return void 0!==t?void 0!==i?is._D(t,i):t:i}var Mv=9e4,Tv=Oa((()=>is.jN(8589934592,Mv))),Nv=Oa((()=>Tv().aD(2)));var U={RD:0,UD:1/0,QD:0},Dv=6,Sv=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],Iv=[" ","\t","\n","\f","\r"],Ev=/^\d*$/,bv=/.*[0-9]+.*/,Lv=/^[\d.-]+$/,kv=/(^\.|\.$)/,xv=/(\D\.|\.\D)/;function Cv(t,i){void 0===i&&(i=U);return Ov(yg(Ao(t),new _s),i)}function Ov(t,i){void 0===i&&(i=U);const e={L:[],FD:[],YD:[]},s=jv(t),n=new _s;if(Wv(s),bh(s,(t=>"\n"!==t),n),n.Ku>=s.length)return e;if(n.Im(1),"\n"!==s.charAt(n.Ku)){Uv(Pv(s,n,false,!0,e,i),e)}else n.Im(1);for(bh(s,(t=>"\n"===t),n);n.Ku<s.length;){Uv(Pv(s,n,false,!1,e,i),e),bh(s,(t=>"\n"===t),n)}return e}function jv(t){const i=hn(t,"\0"," "),e=hn(i,"\r\n","\n");return hn(e,"\r","\n")}function bh(t,i,e){const s=e.Ku;for(;e.Ku<t.length&&i(t.charAt(e.Ku));)e.Im(1);return t.substring(s,e.Ku)}function Pv(t,e,s,n,r,h){let o,a=0,u=e.Ku,c="",l=!1,d=!1,f=null,_=null,g=null;for(;!l;)if(o=bh(t,(t=>"\n"!==t),e),a++,e.Ku>=t.length?l=!0:e.Im(1),Xi(o,"--\x3e")){if(n||1!==a&&(2!==a||d)){e.Em(u);break}d=!0,u=e.Ku,f=new O(0,0,"",!1,c);try{Qv(o,r.FD,f,h),c=""}catch(t){i.Qv(t),f=null}}else{if(""===o)break;n&&D(o,"X-TIMESTAMP-MAP")&&(r.GD=zv(o)),n||2!==a||s||(yn("STYLE",c.replace(/ /g,""))?(_={Rg:qu.QT},c=""):yn("REGION",c.replace(/ /g,""))&&(g=new _v("",100,3,0,100,0,100,""),c="")),c&&(c+="\n"),c+=o,u=e.Ku}if(f)return f.O=c,f;if(_);else if(g)return function(t,i){const e=t.split(/\s/),s=":";for(const t of e)if(0!==t.length&&Xi(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const e=t.indexOf(s),n=t.substring(0,e),r=t.substring(e+1,t.length);switch(n.toUpperCase()){case"ID":sA(r,i);break;case"WIDTH":hA(r,i);break;case"LINES":rA(r,i);break;case"REGIONANCHOR":{const t=eA(r);t&&(i.fN=t[0],i._N=t[1]);break}case"VIEWPORTANCHOR":{const t=eA(r);t&&(i.wN=t[0],i.vN=t[1]);break}case"SCROLL":nA(r,i)}}}(c,g),g;return null}function zv(t){const i=t.split("=")[1].trim().split(","),e=Rv(i[0].trim(),"MPEGTS")?i[0]:i[1],s=Rv(i[0].trim(),"LOCAL")?i[0]:i[1];var n;return{VD:Bv(Number(e.split(/:(.*)/)[1].trim())||0),lh:is.pD(null!=(n=Gv(s.split(/:(.*)/)[1].trim(),new _s))?n:0)}}function Bv(t){return is.jN(t,Mv)}function Rv(t,i){return D(t,i)}function Uv(t,i){t&&function(t){return"cue"===t.Rg}(t)?i.L.push(t):t&&function(t){return"region"===t.Rg}(t)?i.FD.push(t):t&&function(t){return"stylesheet"===t.Rg}(t)&&i.YD.push(t)}function Qv(t,i,e,s){const n=new _s;qv(t,n);const r=Fv(Gv(t,n),s);if(qv(t,n),"--\x3e"!==t.substring(n.Ku,n.Ku+3))throw g("Something went wrong with parsing a WebVTT Cue");n.Im(3),qv(t,n);const h=Fv(Gv(t,n),s);e.cN(r,h);!function(t,i,e){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Xi(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),h=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":Jv(h,i,e);break;case"VERTICAL":tA(h,i);break;case"D":iA(h,i);break;case"LINE":case"L":Zv(h,i);break;case"POSITION":case"T":Kv(h,i);break;case"SIZE":case"S":$v(h,i);break;case"ALIGN":case"A":Xv(h,i)}}}(t.substring(n.Ku,t.length),e,i)}function Fv(t,i){return t+i.RD}function Yv(t){return/^[0-9]$/.test(t)}function Gv(t,i){const e=hn(t,",",".");let s,n,r,h=!1;if(i.Ku>=e.length||!Yv(e.charAt(i.Ku)))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const o=bh(e,Yv,i),a=x(o,10);if((o.length>2||a>59)&&(h=!0),i.Ku>=e.length||":"!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Im(1);const u=bh(e,Yv,i);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");const c=x(u,10);if(h||i.Ku<e.length&&":"===e.charAt(i.Ku)){if(i.Ku>=e.length||":"!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Im(1);const t=bh(e,Yv,i);if(2!==u.length)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=x(t,10)}else s=0,n=a,r=c;if(i.Ku>=e.length||"."!==e.charAt(i.Ku))throw new g("Something went wrong with parsing a WebVTT Cue timestamp");i.Im(1);const l=bh(e,Yv,i),d=x(l,10);if(c>59||r>59)throw new g("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function Vv(t){return Wv(jv(t))}function Wv(t){if(t.length<Dv)return!1;for(const i of Sv)if(D(t,i))return!0;return!1}function Hv(t){return qo(Iv,t)}function qv(t,i){for(;i.Ku<t.length&&Hv(t.charAt(i.Ku));)i.Im(1)}function Q(t){const i=t.lastIndexOf("%");if(i>-1){const e=C(t.substring(0,i));if(!S(e)&&e>=0&&e<=100)return e}return null}function Xv(t,i){const e=t.toLowerCase();switch(e){case"start":case"center":case"end":case"left":case"right":i.HT=e;break;case"middle":i.HT="center"}}function Zv(t,i){let e,s;const n=t.indexOf(",");if(n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s=""),!bv.test(e))return;let r,h;if(Ss(e,"%")){const t=Q(e);if(null===t)return;r=t,h=!1}else{if(!Lv.test(e)||e.lastIndexOf("-")>0)return;const t=e.indexOf(".");if(t>=0&&(t!==e.lastIndexOf(".")||!xv.test(e)||kv.test(e)))return;if(r=C(e),S(r))return;h=!0}switch(i.qT=r,i.JT=h,s=s.toLowerCase(),s){case"start":case"center":case"end":i.XT=s;break;case"middle":i.XT="center"}}function Kv(t,i){let e,s;const n=t.indexOf(",");n>=0?(e=t.substring(0,n),s=t.substring(n+1,t.length)):(e=t,s="");const r=Q(e);if(null!==r)switch(i.po=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":i.ZT=s;break;case"start":i.ZT="line-left";break;case"middle":i.ZT="center";break;case"end":i.ZT="line-right"}}function Jv(t,i,e){const s=gd(e,(i=>i.o===t));void 0!==s&&(i.KT=s)}function $v(t,i){const e=Q(t);null!==e&&(i.hp=e)}function tA(t,i){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":i.Pt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":i.Pt="lr";break;default:i.Pt=""}}function iA(t,i){"VERTICAL"===t.toUpperCase()?i.Pt="rl":"VERTICAL-LR"===t.toUpperCase()&&(i.Pt="lr")}function eA(t){if(t.indexOf(",")>=0){const i=Q(t.substring(0,t.indexOf(","))),e=Q(t.substring(t.indexOf(",")+1,t.length));return[os(i||0,0,100),os(e||100,0,100)]}return null}function sA(t,i){i.o=t}function nA(t,i){"up"===t.toLowerCase()&&(i.gN="up")}function rA(t,i){Ev.test(t)&&(i.dN=x(t))}function hA(t,i){const e=Q(t);null!==e&&(i.ji=e)}function oA(t){return t&&"WD"in t?t.WD:t}var q,aA=class extends je{get HD(){return this.qD}get XD(){return this.ZD}get FD(){return this.KD}get JD(){return this.$D}get va(){return this.Xa||(this.Xa=function(t){return lt(Lh(t),{get extent(){return t.HD},get styles(){return t.XD},get regions(){return t.FD},get metadata(){return oA(t.JD)},get content(){return oA(t.O)}})}(this)),this.Xa}uN(t){return!!Dc(this.HD,t.HD)&&(!!Dc(this.XD,t.XD)&&(!!Dc(this.FD,t.FD)&&(this.JD&&t.JD?!!this.JD.tS(t.JD)&&(this.O&&t.O?this.O.tS(t.O):this.O===t.O):this.JD===t.JD)))}constructor(t,i,e,s,n,r,h,o){super(t,i,e,s),this.qD=n,this.ZD=r,this.KD=h,this.$D=o||void 0}};function ar(t){return 1===t.iS}function uA(t){return 3===t.iS}!function(t){t[t.eS=1]="eS",t[t.sS=2]="sS",t[t.Ru=3]="Ru",t[t.nS=4]="nS",t[t.rS=9]="rS"}(q||(q={}));var cA=class{get hS(){return this.aS.oS(!0)}get VT(){return this.uS}get WT(){return this.cS}constructor(t,i,e){this.uS=t,this.cS=i,ar(e)?this.aS=function(t,i,e){for(const t of["begin","end","dur"])e.lS(t);return e}(0,0,e):this.aS=e}};var We={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function pi(t){return Xi(t,We.APPLICATION_MP4)||Xi(t,We.VIDEO_MP4)||Xi(t,We.AUDIO_MP4)}function lA(t){return Xi(t,We.VIDEO_WEBM)||Xi(t,We.AUDIO_WEBM)}var dA=class{dS(t){for(const[i,e]of this.fS)if(i.toLowerCase()===t.toLowerCase())return e}constructor(t,i){this.Rg=t,this.fS=i}};function En(t){const i=t.trim(),e=i.indexOf(";");if(e<0)return new dA(i,[]);const s=i.substr(0,e).trim(),n=i.substr(e+1).trim(),r=[];let h=0,o=!1;for(let t=0;t<n.length;t++){const i=n[t];if(o||";"!==i)'"'===i&&(o=!o);else{const i=fA(n.substr(h,t));i&&r.push(i),h=t+1}}if(h!==n.length){const t=fA(n.substr(h));t&&r.push(t)}return new dA(s,r)}function fA(t){const i=t.indexOf("=");if(i<0)return;const e=t.substr(0,i).trim();let s=t.substr(i+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[e,s]}function K(t){const i=t.trim(),e=i.indexOf(";");return e<0?i:i.substr(0,e).trim()}function _A(t){let i=t;const e=i.match(/^avc1\.(\d+)\.(\d+)$/);if(e){const t=Number(e[1]),s=Number(e[2]);i="avc1."+Es((t<<16|s).toString(16),6,"0")}return i}var gA="http://www.w3.org/XML/1998/namespace";function wA(t,i,e,s){let n=t._S(e,i);return 0===n.length&&(n=t.gS(s+":"+i)),n}function vA(t){const i={};for(const e of t.wS)i[e.vS]=e.PM;return i}var AA=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,mA=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,Cr="http://www.w3.org/ns/ttml";function pA(t,i,e,s){void 0===e&&(e=U),void 0===s&&(s=We.APPLICATION_TTML_XML);let n=[];const r=Ao(t);return s===We.APPLICATION_MP4?n=function(t,i,e){const s=iu._p(t),n=Ig(s,he.dm);if(!n)return[];return TA(Ao(n.zm),i,e)}(r,i,e):s===We.APPLICATION_TTML_XML&&(n=TA(r,i,e)),n}function yA(t,i,e){return void 0===e&&(e=U),NA(t,i,e)}function MA(t,i){const e=kA(i.hS),s={};for(const i of e)s[i]=t[i];return s}function TA(t,i,e){return NA(yg(t,new _s),i,e)}function NA(t,e,s){const n=[];let r;try{r=i.AS(t)}catch(t){return n}const h=r.mS;if("tt"!==h.vS)return n;const o=h._S(Cr,"head")[0],a=h._S(Cr,"body")[0];if(!a||!o)return n;const u=SA(h.pS("tts:extent")),c=u?{width:u[0],height:u[1]}:void 0,l=function(t){const i={},e=t._S(Cr,"styling")[0],s=e&&e._S(Cr,"style")||[];for(const t of s){i[t.yS(gA,"id")]=vA(t)}return i}(o),d=function(t){const i={},e=t._S(Cr,"layout")[0],s=e&&e._S(Cr,"region")||[];for(const t of s){const e=t.yS(gA,"id");if(!e)continue;i[e]=vA(t);const s=LA(t);for(const t in s)Qh.call(s,t)&&(i[e][t]=s[t])}return i}(o),f=u?function(t,i){const e=Ms(t);for(const t of w.keys(e)){const s=SA(e[t].extent);if(s){const n=DA(s[0],i[0]),r=DA(s[1],i[1]);e[t].extent=n+" "+r}const n=SA(e[t].origin);if(n){const s=DA(n[0],i[0]),r=DA(n[1],i[1]);e[t].origin=s+" "+r}}return e}(d,u):d,_=o._S(Cr,"metadata")[0],g=IA(a,s.RD,s.UD,s.QD);for(const t of g){const i=MA(f,t);n.push(new aA(t.VT,t.WT,t.hS,!1,c,l,i,_))}return n}function DA(t,i){return t/i*100+"%"}function SA(t){if(!t)return;const i=t.split(" ",2);if(2!==i.length)return;const[e,s]=i;if(!Ss(e,"px")||!Ss(s,"px"))return;return[Number(e.slice(0,-2)),Number(s.slice(0,-2))]}function IA(t,i,e,s){let n,r=i,h=e,o=[];const a=[];if(ar(t)){var u,c;r=null!=(u=bA(t.pS("begin"),s))?u:r,n=bA(t.pS("dur"),0),h=null!=(c=bA(t.pS("end"),s))?c:void 0!==n?r+n:h;const i=t.MS;for(let e=0;e<i.length;e++)("body"===t.vS||"div"===t.vS)&&i[e].iS>1||(o=o.concat(IA(i[e],r,h,s)))}const l=function(t,i,e){const s=[];s.push(t,i);for(const t of e)s.push(t.VT,t.WT);s.sort(rr);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(Kn(s,t+1),t--,n=s.length);return s}(r,h,o);for(let i=0;i<l.length-1;i++){const e=EA(l[i],l[i+1],o);if(e.length<=0&&xA(t)){const e=t.oS(!1);a.push(new cA(l[i],l[i+1],e))}else if(e.length>0){const s=t.oS(!1);e.forEach((t=>s.TS(t.hS))),a.push(new cA(l[i],l[i+1],s))}}return a}function EA(t,i,e){const s=[];for(let n=0;n<e.length;n++){const r=e[n].VT,h=e[n].WT;(r>=t&&h<=i||r<i&&h>=i||r<t&&h>t)&&s.push(e[n])}return s}function bA(t,i){if(t){if(AA.test(t)){const e=AA.exec(t);if(!e)return;const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=e[6];return 3600*s+60*n+r+(h?Number(h)*.1**h.length:0)+i}if(mA.test(t)){const e=mA.exec(t);if(!e)return;const s=Number(e[1]);let n;switch(e[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+i}}}function LA(t){const i={},e=t.gS("style")||[];for(const t of e){const e=vA(t);for(const t in e)Qh.call(e,t)&&(i[t]=e[t])}return i}function kA(t){let i,e=[];if(ar(t)){i=t.pS("region"),i&&e.push(i);const s=t.MS;for(let t=0;t<s.length;t++)e=e.concat(kA(s[t]))}return e}function xA(t){if(ar(t)){const i=t.vS.toUpperCase(),e=Boolean(t.pS("smpte:backgroundImage"));return"BR"===i||e}return t.iS===q.Ru}function CA(t){const e=function(t){try{return i.AS(t).mS}catch(t){}}(t);return"tt"===(null==e?void 0:e.vS)}var Mi,Lr=class extends Pn{tt(t){return super.tt(t)}it(t){const i=super.it(t);return i&&(t.jg=Or.Ch),i}fa(){return Ve(this)}};!function(t){t.Tm="subtitles",t.NS="captions",t.DS="descriptions",t.Fn="chapters",t.Dm="metadata",t.SS="thumbnails"}(Mi||(Mi={}));var OA=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function jA(t){return"string"==typeof t&&qo(OA,t)}function PA(t,i){return!(!jA(t)||!jA(i))&&(t===i||"subtitles"===t&&"captions"===i||"captions"===t&&"subtitles"===i)}var gr,X=class extends Rs{constructor(t,i,e,s,n){super(t,i,n),this.url=e,this.status=s}};!function(t){t.IS="HttpOpenError",t.ES="HttpResponseError",t.bS="HttpTimeoutError"}(gr||(gr={}));var W=class extends Jo{get LS(){return this.kS}constructor(t,i,e){super(i,e),this.kS=t}};var bt=class extends W{get name(){return gr.ES}get xS(){return this.CS}constructor(t,i,e){super(t.LS,null!=e?e:function(t){return"Error while loading "+t.LS.zu+", status code "+t.OS}(t),i),this.CS=t}};var zA,kh=class extends W{get name(){return gr.bS}constructor(t,i){super(t,function(t){return"Request for "+t.zu+" timed out after "+t.jS+" seconds."}(t),i)}};function tl(t){return t instanceof W}function nt(t){return t instanceof bt}function BA(t){return t===Mi.Tm||t===Mi.NS}function RA(t){return t.some(UA)}function UA(t){return Xi(t,"stpp")}function QA(t){return t.some(FA)}function FA(t){return Xi(t,"vtt")||Xi(t,"wvtt")}function Sr(t,i){return pi(t)&&QA(i)}function YA(t,i){return t===Mi.SS||t===Mi.Dm&&i===Mi.SS}function GA(t,i,e,s){for(const n of t.L.og){if(n.VT>e)break;i<=n.WT&&!qo(s,n)&&s.push(n)}}function VA(t,i){return ru(t.Mg,i.Mg)}function WA(t,i,e,s){const n=function(t){switch(t){case Wt.WEBVTT:return"WebVTT";case Wt.SRT:return"SRT";case Wt.TTML:return"TTML";default:return""}}(t);return new X(Ui.SUBTITLE_PARSE_ERROR,"Could not parse the "+(n?n+" ":"")+"subtitle file.",i,e,s)}function xh(t,i){const e=[];for(const s of t.L.og)if(s.WT<=i)e.push(s);else if(s.VT>=i)break;for(const i of e)t.PS(i)}function HA(t,i){if(t.U>0){const e=10,s=t.Cn(0),n=_.max(0,s-e);for(const t of i)t.zS(n)}}!function(t){t.RS="vtt",t.qA="wvtt",t.US="stpp"}(zA||(zA={}));var oe,Ti=class extends Bo{tt(t){t.yn(qt.ra,this.QS),this.Z.tt(t),this.FS(t)}it(t){t.fn(qt.ra,this.QS),t.jg=Or.Ch,this.Z.it(t)}YS(t){}GS(t){}FS(t){t.jg!==Or.Ch?this.YS(t):this.GS(t)}VS(){for(const t of this.Z.og)t.fn(qt.ra,this.QS),t.gn()}zS(t){if(t>0)for(const i of this.Z.og)xh(i,t)}tr(){return this.VS(),this.Z.tr(),Promise.resolve()}async gn(){this.Vo(),await this.tr(),this.Z.gn()}constructor(...t){super(...t),this.Z=new Lr,this.QS=t=>{const i=t.Lt;this.FS(i)}}};!function(t){t.WS="arraybuffer",t.HS="json",t.qS="stream",t.Ru="text"}(oe||(oe={}));var yt,sa,Kt,ls,kt,Z=class t{append(t,i){let e=t,s=i;e=qA(e),s=XA(s);const n=e.toLowerCase();if(this.Ld.hasOwnProperty(n)){const t=this.Ld[n],i=t[1];t[1]=i?i+", "+s:s}else this.Ld[n]=[e,s]}delete(t){const i=qA(t).toLowerCase();delete this.Ld[i]}get(t){const i=qA(t).toLowerCase();return this.Ld.hasOwnProperty(i)?this.Ld[i][1]:null}has(t){const i=qA(t).toLowerCase();return this.Ld.hasOwnProperty(i)}set(t,i){let e=t;e=qA(e);const s=e.toLowerCase();this.Ld[s]=[e,XA(i)]}forEach(t,i){for(const e in this.Ld)this.Ld.hasOwnProperty(e)&&t.call(i,this.Ld[e][1],e,this)}asList(){const t=[];for(const i in this.Ld)if(this.Ld.hasOwnProperty(i)){const[e,s]=this.Ld[i];t.push([e,s])}return t}XS(){const t={};return this.forEach(((i,e)=>{t[e]=i})),t}ZS(t){t.forEach(((t,i)=>{this.append(i,t)}))}KS(t){t.forEach(((t,i)=>{this.set(i,t)}))}constructor(i){this.Ld={},i instanceof t?i.asList().forEach((t=>{let[i,e]=t;this.append(i,e)})):Array.isArray(i)?i.forEach((t=>{let[i,e]=t;this.append(i,e)})):i&&w.getOwnPropertyNames(i).forEach((t=>{this.append(t,i[t])}))}};function qA(t){let i=t;if("string"!=typeof i&&(i=String(i)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(i))throw new b("Invalid character in header field name");return i}function XA(t){let i=t;return"string"!=typeof i&&(i=String(i)),i}!function(t){t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT"}(yt||(yt={})),function(t){t.hT="",t.JS="manifest",t.$S="segment",t.tI="preload-hint",t.iI="content-protection"}(sa||(sa={})),function(t){t.hT="",t.eI="initialization-segment",t.sI="fairplay-license",t.nI="fairplay-certificate",t.rI="widevine-license",t.hI="widevine-certificate",t.oI="playready-license",t.aI="clearkey-license",t.uI="aes128-key"}(Kt||(Kt={})),function(t){t.hT="",t.Mm="audio",t.ym="video",t.Ru="text",t.rT="image"}(ls||(ls={})),function(t){t.cI="same-origin",t.Fv="no-cors",t.lI="cors",t.dI="navigate"}(kt||(kt={}));var Ku,ss=class{constructor(t,i){const e=t.zu;let s,n,r,h,o,a,u,c,l,d,f,_,g,w,v;var A,m,p;i?(s=i.fI,n=i._I,r=i.gI,h=i.wI,o=i.jS,a=i.vI,u=i.Wd,c=i.Rg,l=i.AI,d=i.mI,f=i.pI,_=i.yI,g=i.jg,w=i.MI,v=i.TI):(s=null,n={},r="GET",h=oe.Ru,o=0,a=0,c="",l="",d="",f=!1,g=void 0,w=!1,v=void 0),this.zu=e,this.fI=t.fI||s,this._I=new Z(t._I||n),this.gI=t.gI||r,this.wI=t.wI||h,this.jS=void 0!==t.jS?Number(t.jS)||0:o,this.vI=void 0!==t.vI?Number(t.vI)||0:a,this.Wd=t.Wd||u||(new Wr).Wd,this.Rg=t.Rg||c,this.AI=t.AI||l,this.mI=t.mI||d,this.pI=void 0!==t.pI?Boolean(t.pI):f,this.yI=t.yI||_,this.jg=null!=(A=t.jg)?A:g,this.MI=null!=(m=t.MI)?m:w,this.TI=null!=(p=t.TI)?p:v}},ZA=class extends hl{get error(){return this.errorObject.message}fa(){return this}constructor(t){super(Nt.ha),this.errorObject=t}},Ch=class extends Ti{NI(t){if(!t.src)return;const i=t.kind||Mi.Tm,e=this.SI.DI(i,t.id,t.label,t.srclang,t.default);return e.Ug=Na(t.src),this.tt(e),e}async II(t,i){t.Jf=si.LOADING;const e=new ss({zu:t.Ug,wI:oe.Ru,gI:yt.GET,Wd:i});let s,n;try{const t=await this.EI.LS(e);n=t.OS,s=await t.bI()}catch(i){return yo(i),t.Jf=si.ERROR,void t.Co(new ZA(function(t,i){let e=i,s=0;if(tl(t)&&t.name===gr.IS)e=t.LS.zu;else if(nt(t)){const i=t.xS;if(e=i.LI,s=i.OS,0===s)return new X(Ui.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",e,s,t)}return new X(Ui.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",e,s,t)}(i,t.Ug)))}try{const i=function(t){return Vv(t)?Wt.WEBVTT:CA(t)?Wt.TTML:Wt.SRT}(s);t.Rg=i;let e=[];if(i===Wt.WEBVTT||i===Wt.SRT){e=Ov(s).L}else i===Wt.TTML&&(e=yA(s,t));for(const i of e)t.kI(i)}catch(i){return yo(i),t.Jf=si.ERROR,void t.Co(new ZA(WA(t.Rg,t.Ug,n,i)))}t.Jf=si.LOADED}YS(t){qo(this.Z.og,t)&&t.Jf===si.NONE&&this.II(t,this.xI.Wd).catch(Pd)}$n(){}async tr(){this.xI.qd(),this.xI=new Wr;for(const t of this.Z.og)this.SI.CI(t);await super.tr()}constructor(t,i){super(),this.xI=new Wr,this.SI=t,this.EI=i}};function KA(t,i){for(const e of t)if(e.zt===i&&e.OI)return e}function JA(t,i){$A(KA(t.og,i))}function $A(t){void 0!==t&&(t.jg=Or.Jn)}function tm(t,i){const e=KA(t.og,i)||function(t,i){for(const e of t)if(e.zt===i)return e}(t.og,i);$A(e)}function st(t){for(const i of OA)i===Mi.Fn?tm(t,i):JA(t,i)}!function(t){t.jI="web",t.zI="android",t.BI="android-tv",t.RI="ios",t.UI="tvos",t.QI="chromecast",t.FI="theoliveweb"}(Ku||(Ku={}));var xl=Dl?Dl.userAgent:"",im=xl.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),em=xl.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),sm=xl.match(/Android ([0-9\.]+)/i),nm=xl.match(/Windows NT ([0-9\.]+)/i),rm=xl.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),hm=xl.match(/Firefox\/([0-9\.]+)/i),om=xl.match(/OPR\/(\d+\.\d+)/i),am=xl.match(/Tizen ([0-9\.]+)/i),um=xl.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),cm=class{get Je(){return this.YI}get GI(){return this.VI}get WI(){return this.HI}get qI(){return this.XI}get ZI(){return this.KI}get JI(){return this.$I}get tE(){return this.iE}get eE(){return this.sE}get nE(){return this.rE}get hE(){return this.oE}get aE(){return this.uE}get Ga(){return this.cE}get lE(){return this.dE}get fE(){return this._E||this.gE}get td(){return this.wE}get Qs(){return this.vE}get AE(){return this.mE}get pE(){return this.yE}get ME(){var t;return null!=(t=this.TE)?t:this.NE}get DE(){return this.SE}get EE(){return this.bE}get LE(){return this.kE}get xE(){return this.CE}get OE(){return this.jE}get PE(){return this.zE}get BE(){return this.RE}get UE(){return this.QE}get FE(){return this.YE}get GE(){return this.VE}get WE(){return this.HE}get qE(){return this.XE}get ZE(){return this.KE}get JE(){return this.$E}get ib(){return this.eb}get sb(){return this.hb}get ob(){return this.ub}get fb(){return this._b}get gb(){return!(!this.OE&&!this.LE)&&this.ME<=56}get wb(){return this.vb}get Ab(){return this.mb}get pb(){return this.yb}get Mb(){return this.Tb}get Nb(){return this.Db}get Sb(){return this.Ib}get Eb(){return this.bb}constructor(){this.YI=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||Dl&&Dl.msMaxTouchPoints),this.VI=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(xl)||/(macintosh|mac(?=_powerpc)\s)/i.test(xl),this.HI=/Windows NT/i.test(xl),this.XI=nm?C(nm[1]):0,this.KI=/Android/i.test(xl),this.$I=sm?C(sm[1]):0,this.iE=/windows phone (8|8\.1)/i.test(xl),this.sE=/iPhone/i.test(xl),this.rE=/iPad/i.test(xl),this.oE=this.VI&&this.YI&&!this.rE,this.uE=/iPod/i.test(xl),this.wE=/Mobile Safari/i.test(xl),this._E=/EOS\d*STB/i.test(xl),this.gE=/APP\d*STB/i.test(xl),this.cE=(this.sE||this.rE||this.oE||this.uE)&&!this.iE,this.dE=um?C(um[2]):0,this.vE=this.iE||this.cE||this.KI||this.wE,this.mE=/CriOS/i.test(xl),this.yE=Boolean(self.chrome&&/google/i.test(Dl.vendor))||this.mE,this.SE=this.yE&&/Edg\//i.test(Dl.userAgent),this.bE=em?x(em[1],10):0,this.bb=Boolean(self.chrome||/Chrome/i.test(xl)||/CriOS/i.test(xl)),this.NE=im?x(im[1],10):0,this.kE=/SMART-TV.*Tizen/i.test(xl),this.CE=am?C(am[1]):0,this.TE=this.CE>0?function(t){return t>=8?108:t>=7?94:t>=6.5?85:t>=6?76:t>=5.5?69:t>=5?63:t>=4?56:t>=3?47:0}(this.CE):void 0,this.jE=/webos|web0s/i.test(xl),this.zE=/VIZIO/i.test(xl),this.RE=/Edge\/\d+/i.test(xl),this.QE=/Trident/i.test(xl),this.YE=this.QE&&!self.ActiveXObject&&"ActiveXObject"in self,this.VE=/Vivaldi/i.test(xl),this.HE=/Firefox/i.test(xl)&&!/Seamonkey/i.test(xl),this.XE=hm?C(hm[1]):0,this.KE=/Safari/i.test(xl)&&!/Chrome/i.test(xl)&&!this.iE&&!this.kE,this.$E=rm?C(rm[2]):0,this.eb=Boolean(om),this.hb=om?C(om[1]):0,this.ub=/CrKey/.test(xl),this._b=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(xl),this.vb="web"===Ku.BI,this.mb="web"===Ku.zI,this.yb=this.mb||this.vb,this.Tb="web"===Ku.RI,this.Db="web"===Ku.UI,this.Ib="web"===Ku.QI}};cm.Lb=new cm;var pa,lm,Rn,Ha,dm,fm,f=cm.Lb,il=class extends wn{constructor(){super(Co.mw)}};var qh={Rg:be.Kv,kb:g_,xb:"cenc",Cb:__,Ob:Mn,jb:"PlayReady"},qn={Rg:be.Jv,kb:v_,xb:"cenc",Cb:w_,Ob:ti,jb:"Widevine"},_m={Rg:be.$v,kb:p_,xb:"skd",Cb:en,Ob:uu,jb:"FairPlay"},gm={Rg:be.$v,kb:"com.apple.fps",xb:"sinf",Cb:en,Ob:uu,jb:"FairPlay"},Uh={Rg:be.tA,kb:"org.w3.clearkey",xb:"cenc",Cb:A_,Ob:m_,jb:"ClearKey"},wm=[qh,qn,_m,Uh],vm=[qh,qn,gm,Uh];function Am(t){return wm.filter((i=>i.Ob===t.toLowerCase()))}var Fi,mm=["cenc"],pm=["cbcs","cbcs-1-9"],uo=class extends wn{constructor(t){super("Pb"),this.zb=t}},pr=class extends wn{constructor(t,i,e,s){super("Bb"),this.zb=t,this.Rb=i,this.Bb=e,this.Ub=s}},ym=class extends wn{constructor(){super("lt")}};!function(t){t.Kg="Qb",t.Fb="Yb"}(Fi||(Fi={}));var jt=class extends wn{constructor(t,i){super("Qb"),this.xb=t,this.Gb=i}},Mm=class extends wn{constructor(){super("Yb")}},Tm=new j([0]).buffer,wr=class{get hp(){return this.Xu.length}Vb(t){for(const i of this.Xu)if(i[0]===t)return!0;return!1}Wb(t){for(const i of this.Xu)if(i[0]===t)return i[1]}Hb(t,i){this.Xu.forEach((i=>t(i[1],i[0])),i)}qb(t,i){this.Xu.push([t,i])}Xb(){No(this.Xu)}constructor(){this.Xu=[]}},ue=class{Zb(t){this.Kb&&(this.Kb(t),this.Ud())}Jb(t){this.$b&&(this.$b(t),this.Ud())}qd(){this.tL.catch(na),this.Jb(new Sn)}Xd(t){t.then((t=>this.Zb(t)),(t=>this.Jb(t)))}Ud(){this.Kb=void 0,this.$b=void 0}constructor(){this.tL=new Promise(((t,i)=>{this.Kb=t,this.$b=i}))}};function Nm(){return new j([8,4]).buffer}function Dm(t,i){return t===g_?function(t){if(t.byteLength<2*Sm.length)return t;const i=new DataView(t,0,2*Sm.length),e=Ag(i,!0);if(e===Sm)return t;return function(t){const i='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',e='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+i+C_(t)+e;return mg(s,!0).buffer}(t)}(i):i}var Sm="<PlayReady";var xi=class extends Jo{constructor(t,i,e,s){super(t,s),this.iL=i,this.eL=e}},Im=function(t,i){return(Im=w.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)w.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])})(t,i)};function Tt(t,i){if("function"!=typeof i&&null!==i)throw new b("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}Im(t,i),t.prototype=null===i?w.create(i):(e.prototype=i.prototype,new e)}function Em(t,i,e){return t.indexOf?t.indexOf(i,e):Array.prototype.indexOf.call(t,i,e)}(function(){function t(t,i){this.sL=t,this.nL=i}t.prototype.get=function(t){var i=this.sL.get(t);if(0===this.nL||void 0===i)return i;var e=this.sL.get(t+1)||0,s=i&(1<<8-this.nL)-1,n=e>>8-this.nL;return(s<<this.nL)+n},t.prototype.getBit=function(t){if(!(t<0)){var i=this.sL.get(_.floor((t+this.nL)/8));if(void 0!==i)return(i&1<<7-this.nL-t%8)>0?1:0}},w.defineProperty(t.prototype,"bitLength",{get:function(){return this.sL.bitLength-this.nL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"length",{get:function(){return this.sL.length},enumerable:!1,configurable:!0})})(),_.pow(2,-52);function bm(t,i,e){return _.min(_.max(t,i),e)}function Lm(t,i){return t>>8-i}function km(t,i){return t&(1<<i)-1}var ml=function(){function t(t){this.rL=t,this.hL=0,this.oL=0}return w.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.hL+this.oL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"done",{get:function(){return this.hL===this.rL.length&&0===this.oL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"location",{get:function(){return{byte:this.hL,bit:this.oL}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var i=new t(this.rL);return i.seek(this.hL,this.oL),i},t.prototype.canReadBits=function(t){return 8*this.hL+t+this.oL<=8*this.rL.length},t.prototype.canReadBytes=function(t){return 0===this.oL?this.hL+t<=this.rL.length:this.hL+t<this.rL.length},t.prototype.incBit=function(){this.oL++,this.oL>7&&(this.hL++,this.oL=0)},t.prototype.seek=function(t,i){this.hL=t,this.oL=i},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new g("Cannot read past end of buffer.");return this.rL.get(this.hL)>>7-this.oL&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new g("Cannot read past end of buffer.");if(0===this.oL)return this.rL.get(this.hL++);var t=km(this.rL.get(this.hL),8-this.oL),i=Lm(this.rL.get(this.hL+1),this.oL);return this.hL++,t<<this.oL|i},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readBit());return i},t.prototype.readUInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var i=0;if(0===this.oL&&t%8==0)for(var e=t-8;e>=0;e-=8)i|=this.readByte()<<e;else for(e=t-1;e>=0;e--)i|=this.readBit()<<e;return i},t.prototype.readInt=function(t){if(t>32)throw new g("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new g("Cannot read past end of buffer.");var i=this.readUInt(t);return 0===(i&1<<t-1)?i:i-_.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var i=1<<t;return i+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new g("Skipping over the buffer edge is not allowed.");var i=this.oL+t;this.hL+=i>>3,this.oL=7&i},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new g("Cannot read past end of buffer.");for(var i=[],e=0;e<t;e++)i.push(this.readByte());return String.fromCharCode.apply(String,i)},t}(),xm=function(t,i){return t===i?0:t<i?-1:t>i?1:S(t)?S(i)?0:1:-1},Ou=function(){function t(){this.aL=[],this.uL=[],this.cL=0}return t.from=function(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];for(var s=new t,n=0,r=i;n<r.length;n++){var h=r[n];s.pushRange(h)}return s},t.prototype.pushRange=function(t,i,e){if(void 0===i&&(i=0),void 0===e&&(e=t.length),e<0)throw new g("The buffer length must be positive.");if(0!==e){if(0===this.uL.length)this.uL.push(0);else{var s=this.uL[this.uL.length-1]+this.aL[this.aL.length-1].length;this.uL.push(s)}this.aL.push(t.subarray(i,i+e)),this.cL+=e}},t.prototype.concat=function(i){var e=new t;return e.pushRange(this.join()),e.pushRange(i.join()),e},t.prototype.copy=function(t,i,e,s){if(void 0===i&&(i=0),void 0===e&&(e=0),void 0===s&&(s=this.length),i<0||e<0||s<0)throw new RangeError;return this.slice(e,s).copyInternal(t,i)},t.prototype.copyInternal=function(t,i){for(var e=0,s=i,n=0,r=this.aL;n<r.length;n++){var h=r[n];t.set(h,s),e+=h.length,s+=h.length}return e},t.prototype.clear=function(){this.aL=[],this.uL=[],this.cL=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var i=this.findContainingBufferIndex(t),e=t-this.uL[i];return this.aL[i][e]}},w.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.aL.length<1)return-1;if(this.aL.length>1){var i=this.join();this.clear(),this.pushRange(i)}var e=this.aL[0];return"number"==typeof t?Em(e,t):"undefined"!=typeof Buffer?Buffer.from(e.buffer,e.byteOffset,e.byteLength).indexOf(t):function(t,i){if(0===i.length)return 0;for(var e=i[0],s=i.length,n=t.length-s,r=0;r<=n&&!((r=Em(t,e,r))<0||r>n);r++){for(var h=r+1,o=r+s,a=1;h<o&&t[h]===i[a];h++,a++);if(h===o)return r}return-1}(e,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,i,e){if(0!==t.length){var s=0,n=t.length-1;if(1!==e(t[s],i)){if(1===e(i,t[n]))return n;for(;s!==n;){var r=_.ceil((s+n)/2);e(t[r],i)<=0?s=r:n=r-1}return s}}}(this.uL,t,xm)},t.prototype.join=function(){if(1===this.aL.length)return this.aL[0];var t=new j(this.length);return this.copyInternal(t,0),t},w.defineProperty(t.prototype,"length",{get:function(){return this.cL},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,i){if(i<=0||i>4)throw new g("Expected byteLength to be between 0 and 4 but was "+i);if(t<0||t>this.length-i)throw new g("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-i)+")");if(1===i)return this.get(t);for(var e=0,s=0;s<i;s++)e+=this.get(t+s)*_.pow(2,8*(i-s-1));return e},t.prototype.slice=function(i,e){void 0===e&&(e=this.length);var s=bm(i,0,this.length),n=bm(e,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,h=this.findContainingBufferIndex(s),o=this.aL[h],a=s,u=a-this.uL[h];a+o.length-u<n;)r.pushRange(o,u,o.length-u),h+=1,u=(a+=o.length-u)-this.uL[h],o=this.aL[h];var c=n-a;return r.pushRange(o,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var i=this.length-1,e=this.aL.length-1,s=this.aL[e],n=s.length-1;i>=0&&e>=0;){if(0!==s[n])break;if(0===n){if(0===e)return new t;e-=1,n=(s=this.aL[e]).length-1}else n-=1;i-=1}return this.slice(0,i+1)},t}(),Cm=function(){function t(i){this.lL=i||t.BUFFER_CHUNK_SIZE,this.dL=!1,this.fL=new Ou,this.rL=new j(this.lL),this._L=0,this.gL=0,this.oL=7}return t.prototype.closeByte=function(){this.rL[this._L++]=this.gL,this._L>=this.lL&&this.closeBuffer(),this.gL=0,this.oL=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this._L&&(this.fL.pushRange(this.rL,0,this._L),t&&(this.rL=new j(this.lL)),this._L=0)},w.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.oL},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.dL)throw new g("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.dL=!0,this.fL},t.prototype.writeBit=function(t){if(this.dL)throw new g("Cannot write to a closed BitWriter.");this.gL|=t<<this.oL,0===this.oL?this.closeByte():this.oL--},t.prototype.writeByte=function(t){if(this.dL)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.gL=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var i=this.oL;this.gL|=Lm(t,i+1),this.closeByte(),this.gL=km(t,8-i)<<i+1,this.oL=i},t.prototype.writeBits=function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.dL)throw new g("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this._L+t.length<=this.lL?(this.rL.set(t,this._L),this._L+=t.length,this._L===this.lL&&this.closeBuffer()):(this.closeBuffer(),this.fL.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var i=this.oL;this.gL|=Lm(t[0],i+1),this.closeByte();for(var e=1;e<t.length;e++){var s=km(t[e-1],8-i),n=Lm(t[e],i+1);this.gL=s<<i+1|n,this.closeByte()}this.gL=km(t[t.length-1],8-i)<<i+1,this.oL=i}},t.prototype.writeUInt=function(t,i){if(t<0)throw new g("Received a negative number.");if(i>32)throw new g("The max bitlength that can be provided is 32.");if(t>=_.pow(2,i))throw new g("Uint "+t+" cannot be represented in "+i+" bit(s).");if(this.isWritingStartBit&&i%8==0)for(var e=i-8;e>=0;e-=8)this.writeByte(t>>e&255);else for(e=i-1;e>=0;e--)this.writeBool((t&1<<e)>0)},t.prototype.writeInt=function(t,i){if(i>32)throw new g("The max bitlength that can be provided is 32.");if(_.abs(t)>=_.pow(2,i-1))throw new g("Signed integer "+t+" cannot be represented in "+i+" bit(s).");t<0?this.writeUInt(t+_.pow(2,i),i):this.writeUInt(t,i)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new g("Received a negative number.");for(var i=_.floor(_.log2(t+1))+1,e=0;e<i-1;e++)this.writeBit(0);this.writeUInt(t+1,i)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var i=function(t){for(var i=new j(t.length),e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return i}(t),e=0;e<i.length;e++)this.writeByte(i[e])},t.BUFFER_CHUNK_SIZE=1024,t}(),Om=function(){function t(t){this.rb=new Ou,this.wL=t}return t.prototype.closeWriter=function(){void 0!==this.wL&&(this.rb=this.rb.concat(this.wL.close()),this.wL=void 0)},w.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.wL&&(this.wL=new Cm),this.wL},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),Ki=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new g("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(i){var e=this.getSize(),s=e>=t.LARGE_SIZE/8,n=16===this.boxType.length;i.writeUInt(s?1:e,32),i.writeString(n?"uuid":this.boxType),s&&(i.writeUInt(_.floor(e/t.LARGE_SIZE),32),i.writeUInt(e%t.LARGE_SIZE,32)),n&&i.writeString(this.boxType)},t.prototype.getSize=function(){var i=8+(this.boxType.length>4?16:0),e=this.getBoxContentSize()+i;return e>=t.LARGE_SIZE/8&&(e+=8),e},t.prototype.serialize=function(){var t=new Om;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=_.pow(2,32),t}();function jm(t,i){return t instanceof Ce?64===i:t<_.pow(2,i)}function bo(t,i){return _.round(t*_.pow(2,i))}function ga(t,i){for(var e=0;e<i.length;e++)t.writeByte(i[e])}function el(t,i){return t/_.pow(2,i)}var Nr=function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!jm(e,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Tt(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.vL},set:function(t){this.vL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(Ki),Pm=function(t){function i(i,e){var s=t.call(this,i)||this;return s.data=e,s}return Tt(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(Ou.from(this.data))},i}(Ki),zm=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();var Bm=16384;function Rm(t){var i=t.length;if(i<=Bm)return String.fromCharCode.apply(String,t);for(var e=[],s=0;s<i;s+=Bm)e.push(String.fromCharCode.apply(String,t.slice(s,s+Bm)));return e.join("")}var Um=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,i){return(t&i)===i}(this.raw,t)},t}();function ba(t,i){var e=t.getUint8(i.offset);return i.shift(1),e}function Qm(t,i,e){var s=qm(Km(t),i.offset,i.offset+e);return i.shift(s.byteLength),s}function Fm(t,i,e){return i.offset+e<=t.byteLength}function Ym(t,i,e){void 0===e&&(e=!1);var s=t.getUint32(i.offset,e);return i.shift(4),s}function Gm(t,i,e){void 0===e&&(e=!1);var s=Ym(t,i,e),n=Ym(t,i,e),r=e?n:s,h=e?s:n;return Ce.fromBits(h,r,!0)}function Vm(t,i,e){return Rm(function(t){return[].slice.call(t)}(Qm(t,i,e)))}function Wm(t,i){var e,s=ba(t,i);return 0==(128&s)?e=s:192==(224&s)?e=64*(31&s)+(63&ba(t,i)):224==(240&s)?e=4096*(15&s)+64*(63&ba(t,i))+(63&ba(t,i)):240==(248&s)&&(e=262144*(7&s)+4096*(63&ba(t,i))+64*(63&ba(t,i))+(63&ba(t,i))),e}function Hm(t,i){return function(t,i,e){var s=[],n=function(t,i){return i.offset+3<=t.byteLength&&239===t.getUint8(i.offset)&&187===t.getUint8(i.offset+1)&&191===t.getUint8(i.offset+2)}(t,i);n&&i.shift(3);for(;i.offset<t.byteLength;){var r=Wm(t,i);if(void 0===r)break;if(e&&0===r)break;s.push(r)}return function(t){for(var i=[],e=0,s=t;e<s.length;e++){var n=s[e];n>65535&&(n-=65536,i.push(n>>>10&1023|55296),n=56320|1023&n),i.push(n)}return Rm(i)}(s)}(t,i,!0)}function qm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new j(t.buffer,t.byteOffset+i,e-i)}function Xm(t,i,e){return void 0===i&&(i=0),void 0===e&&(e=t.byteLength),new DataView(t.buffer,t.byteOffset+i,e-i)}function Zm(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Km(t){return new j(t.buffer,t.byteOffset,t.byteLength)}var Jm=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new zm(this.offset<<3)},t}(),$m=function(){function t(t,i){this.data=t,this.cursor=i}return t.prototype.nextUint8=function(){return ba(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getUint16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt16(i.offset,e);return i.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return Ym(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,i,e){void 0===e&&(e=!1);var s=t.getInt32(i.offset,e);return i.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,i,e){void 0===e&&(e=!1);var s=Ym(t,i,e),n=Ym(t,i,e),r=e?n:s,h=e?s:n;return Ce.fromBits(h,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return Gm(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return Qm(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,i,e){for(var s=[],n=0;n<e;n++)s.push(Ym(t,i));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return Vm(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return Hm(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function Pe(t,i){return t.type===i}var tp=8;function ka(t){var i=function(t,i){var e=[];for(;i.offset<t.byteLength;){var s=ip(t,i);if(!s.complete)return{complete:!1,boxes:e};e.push(s.box)}return{complete:!0,boxes:e}}(t.data,t.cursor);if(!i.complete)throw new g("Data incomplete");return i.boxes}function ip(t,i){var e=i.offset,s=function(t,i){var e=i.offset;if(!Fm(t,i,tp)){return{complete:!1,neededOffset:r=i.offset+tp}}var s=Ym(t,i),n=Vm(t,i,4);if(1===s){if(!Fm(t,i,8)){var r=i.offset+8;return i.seek(e),{complete:!1,neededOffset:r}}s=Gm(t,i).toNumber()}if("uuid"===n){if(!Fm(t,i,16)){r=i.offset+16;return i.seek(e),{complete:!1,neededOffset:r}}n=Vm(t,i,16)}var h=i.offset,o={type:n,size:s,headerSize:h-e};return{complete:!0,header:o}}(t,i);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-e);var h=e+r;if(h>t.byteLength){var o=h;return i.seek(e),{complete:!1,neededOffset:o}}var a={type:n.type,offset:e,data:new $m(Xm(t,e,h),new Jm(n.headerSize))};return i.seek(h),{complete:!0,box:a}}function yc(t){return{version:t>>24,flags:new Um(16777215&t)}}function ep(t,i){var e,s,n,r;return 1===i?(e=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(e=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:e,modification:s,scale:n,duration:r}}function sp(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function np(t){var i=t.nextUint32Array(9);return{a:el(i[0],16),b:el(i[1],16),u:el(i[2],30),c:el(i[3],16),d:el(i[4],16),v:el(i[5],30),x:el(i[6],16),y:el(i[7],16),w:el(i[8],30)}}function oa(t){return new Pm(t.type,qm(Km(t.data.data),t.data.cursor.offset))}var rp=function(t){function i(i,e,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=e,r.handlerType=i,r}return Tt(i,t),w.defineProperty(i.prototype,"handlerType",{get:function(){return this.AL},set:function(t){this.AL=t},enumerable:!1,configurable:!0}),i.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(e=null===(i=this.name)||void 0===i?void 0:i.length)&&void 0!==e?e:0)+1},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeString(this.handlerType),this.serializeReserved(i),this.name&&i.writer.writeString(this.name),i.writer.writeByte(0)},i}(Nr);function hp(t){var i=t.data,e=yc(i.nextUint32()),s=e.version,n=e.flags;i.skip(4);var r=i.nextChars(4);i.skip(12);var h=i.nextUTF8String();return new rp(r,h,s,n.raw)}!function(t){function i(){return t.call(this,"mdir")||this}Tt(i,t),i.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(rp);var Sh=function(){function t(t,i){void 0===i&&(i=!1),this.fixed28BitMode=i,this.tag=t}return t.prototype.encodeSize=function(t){for(var i=[];t>0;)i.length>0&&(i[i.length-1]+=128),i.push(t%128),t>>=7;if(this.fixed28BitMode)for(;i.length<4;)i.push(128);return i.reverse()},w.defineProperty(t.prototype,"tag",{get:function(){return this.mL},set:function(t){if(!jm(t,8))throw new g("Provided tag does not fit in 8 bits.");this.mL=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var i=0,e=this.encodeSize(this.getDescriptorSize());i<e.length;i++){var s=e[i];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}(),op=(function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a=t.call(this,4,o.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=h,a.objectTypeIndication=i,a.streamType=e,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}Tt(i,t),w.defineProperty(i.prototype,"objectTypeIndication",{get:function(){return this.pL},set:function(t){if(!jm(t,8))throw new g("Provided objectTypeIndication does not fit in 8 bits.");this.pL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamType",{get:function(){return this.yL},set:function(t){if(!jm(t,6))throw new g("Provided streamType does not fit in 6 bits.");this.yL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.ML},set:function(t){if(!jm(t,24))throw new g("Provided bufferSizeDb does not fit in 24 bits.");this.ML=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"maxBitrate",{get:function(){return this.TL},set:function(t){if(!jm(t,32))throw new g("Provided maxBitrate does not fit in 32 bits.");this.TL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avgBitrate",{get:function(){return this.NL},set:function(t){if(!jm(t,32))throw new g("Provided avgBitrate does not fit in 32 bits.");this.NL=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var i=0,e=this.decoderSpecificInfo;i<e.length;i++){e[i].serialize(t)}}}(Sh),function(t){function i(i,e){void 0===e&&(e={});var s=t.call(this,5,e.fixed28BitMode)||this;return s.data=i,s}Tt(i,t),i.prototype.getDescriptorSize=function(){return this.data.length},i.prototype.serializeDescriptorContent=function(t){t.concat(Ou.from(this.data))}}(Sh),function(t){function i(i){void 0===i&&(i=!1);var e=t.call(this,6,i)||this;return e.predefined=2,e}return Tt(i,t),i.prototype.getDescriptorSize=function(){return 1},i.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},i}(Sh)),ap=(function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=i,r.streamPriority=e,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new op(n.fixed28BitMode),r}Tt(i,t),w.defineProperty(i.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"esId",{get:function(){return this.DL},set:function(t){if(!jm(t,16))throw new g("Provided esId does not fit in 16 bits.");this.DL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"streamPriority",{get:function(){return this.SL},set:function(t){if(!jm(t,5))throw new g("Provided streamPriority does not fit in 5 bits.");this.SL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"dependsOnEsId",{get:function(){return this.IL},set:function(t){if(t&&!jm(t,16))throw new g("Provided dependsOnEsId does not fit in 16 bits.");this.IL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"ocrEsId",{get:function(){return this.EL},set:function(t){if(t&&!jm(t,16))throw new g("Provided ocrEsId does not fit in 16 bits.");this.EL=t},enumerable:!1,configurable:!0}),i.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},i.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(Sh),function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.boxes=[],i}return Tt(i,t),i.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,i){return t+i.getSize()}),0)},i.prototype.serialize=function(){for(var i=t.prototype.serialize.call(this),e=0,s=this.boxes;e<s.length;e++){var n=s[e];i=i.concat(n.serialize())}return i},i}(Ki)),Al=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return Tt(i,t),i.prototype.serializeBoxContent=function(t){},i.prototype.getBoxContentSize=function(){return 0},i}(ap),up=function(t){function i(i,e){var s=t.call(this,i)||this;return s.dataReferenceIndex=e,s}return Tt(i,t),w.defineProperty(i.prototype,"dataReferenceIndex",{get:function(){return this.bL},set:function(t){if(!jm(t,16))throw new g("Provided dataReferenceIndex does not fit in 16 bits.");this.bL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){for(var i=0;i<6;i++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},i}(Al),cp=function(t){function i(i,e,s,n){var r,h,o=this;return(o=t.call(this,i,e)||this).extra=n,o.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,o.sampleSize=null!==(h=s.sampleSize)&&void 0!==h?h:16,o.sampleRate=s.sampleRate,o}return Tt(i,t),w.defineProperty(i.prototype,"channelCount",{get:function(){return this.LL},set:function(t){if(!jm(t,16))throw new g("Provided channelCount does not fit in 16 bits.");this.LL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleSize",{get:function(){return this.kL},set:function(t){if(!jm(t,16))throw new g("Provided sampleSize does not fit in 16 bits.");this.kL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleRate",{get:function(){return this.xL},set:function(t){if(!jm(bo(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.xL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(e=null===(i=this.extra)||void 0===i?void 0:i.length)&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.channelCount,16),i.writer.writeUInt(this.sampleSize,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(bo(this.sampleRate,16),32),this.extra&&ga(i.writer,this.extra)},i}(up),Fh=(function(t){function i(i){var e=t.call(this,"stco",0,0)||this;return e.entries=i,e}Tt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.CL},set:function(t){if(!jm(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!jm(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.CL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Nr),function(t){function i(i){var e=t.call(this,"clap")||this;return e.cleanApertureWidthN=i.cleanApertureWidthN,e.cleanApertureWidthD=i.cleanApertureWidthD,e.cleanApertureHeightN=i.cleanApertureHeightN,e.cleanApertureHeightD=i.cleanApertureHeightD,e.horizOffN=i.horizOffN,e.horizOffD=i.horizOffD,e.vertOffN=i.vertOffN,e.vertOffD=i.vertOffD,e}Tt(i,t),w.defineProperty(i.prototype,"cleanApertureWidthN",{get:function(){return this.OL},set:function(t){if(!jm(t,32))throw new g("Provided cleanApertureWidthN does not fit in 32 bits.");this.OL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureWidthD",{get:function(){return this.jL},set:function(t){if(!jm(t,32))throw new g("Provided cleanApertureWidthD does not fit in 32 bits.");this.jL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightN",{get:function(){return this.PL},set:function(t){if(!jm(t,32))throw new g("Provided cleanApertureHeightN does not fit in 32 bits.");this.PL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"cleanApertureHeightD",{get:function(){return this.zL},set:function(t){if(!jm(t,32))throw new g("Provided cleanApertureHeightD does not fit in 32 bits.");this.zL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffN",{get:function(){return this.BL},set:function(t){if(!jm(t,32))throw new g("Provided horizOffN does not fit in 32 bits.");this.BL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizOffD",{get:function(){return this.RL},set:function(t){if(!jm(t,32))throw new g("Provided horizOffD does not fit in 32 bits.");this.RL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffN",{get:function(){return this.UL},set:function(t){if(!jm(t,32))throw new g("Provided vertOffN does not fit in 32 bits.");this.UL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vertOffD",{get:function(){return this.QL},set:function(t){if(!jm(t,32))throw new g("Provided vertOffD does not fit in 32 bits.");this.QL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 32},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(Ki),function(t){function i(i,e){var s=t.call(this,"ctts",i,0)||this;return s.entries=e,s}Tt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.CL},set:function(t){if(!jm(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!jm(t.sampleCount,32)||!jm(t.sampleOffset,32)})))throw new g("Not all entries can be represented in 64 bits.");this.CL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),0===this.version?i.writer.writeUInt(n.sampleOffset,32):1===this.version&&i.writer.writeInt(n.sampleOffset,32)}}}(Nr),function(t){function i(i){var e=t.call(this,"url ",0,void 0===i?1:0)||this;return e.location=i,e}Tt(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.FL},set:function(t){this.flags=void 0===t?1:0,this.FL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this);return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Nr),function(t){function i(i,e,s){var n=t.call(this,"urn ",0,s)||this;return n.name=i,n.location=e,n}Tt(i,t),w.defineProperty(i.prototype,"location",{get:function(){return this.FL},set:function(t){if(1&this.flags)throw new g("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.FL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?i+this.location.length+1:i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.name),i.writer.writeByte(0),this.location&&(i.writer.writeString(this.location),i.writer.writeByte(0))}}(Nr),function(t){function i(){return t.call(this,"dinf")||this}Tt(i,t)}(Al),function(t){function i(i,e,s){var n=t.call(this,i)||this;if(n.version=e,!jm(e,8))throw new g("the provided version cannot fit in 8 bits.");return n.flags=s,n}return Tt(i,t),w.defineProperty(i.prototype,"flags",{get:function(){return this.vL},set:function(t){this.vL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new g("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},i.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},i}(ap)),lp=(function(t){function i(){return t.call(this,"dref",0,0)||this}Tt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(Fh),function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"elst",e,s)||this;return n.entries=i,n}return Tt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.CL},set:function(t){for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!jm(s.segmentDuration,this.bitSize))throw new g("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!jm(s.mediaTime,this.bitSize))throw new g("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!jm(s.mediaRateInteger,16))throw new g("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!jm(s.mediaRateFraction,16))throw new g("Provided mediaRateFraction does not fit in 16 bits.")}this.CL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(i)},i}(Nr)),dp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Tt(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(lp),fp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Tt(i,t),i.prototype.serializeElstBoxContent=function(t){for(var i,e=0,s=this.entries;e<s.length;e++){var n=s[e];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(i=n.mediaRateFraction)&&void 0!==i?i:0,16)}},i}(lp);function _p(t){for(var i=t.data,e=yc(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=[],o=0;o<r;o++){var a=void 0,u=void 0;0===s?(a=i.nextUint32(),u=i.nextInt32()):(a=i.nextUint64(),u=i.nextInt64());var c=i.nextInt16(),l=i.nextInt16();h.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new dp(h,n.raw):new fp(h,n.raw)}var gp=function(t){function i(){return t.call(this,"edts")||this}return Tt(i,t),i}(Al);function wp(t){for(var i=new gp,e=0,s=ka(t.data);e<s.length;e++){var n=s[e];Pe(n,"elst")?i.boxes.push(_p(n)):i.boxes.push(oa(n))}return i}var vp=function(t){function i(i,e,s,n){var r=t.call(this,i)||this;return r.majorBrand=e,r.minorVersion=s,r.compatibleBrands=n,r}return Tt(i,t),w.defineProperty(i.prototype,"majorBrand",{get:function(){return this.YL},set:function(t){if(4!==t.length)throw new g("the provided major brand does not conform to the 4 character requirement");this.YL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"minorVersion",{get:function(){return this.GL},set:function(t){if(!jm(t,32))throw new g("the provided minor version does not fit in 32 bits.");this.GL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compatibleBrands",{get:function(){return this.VL},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new g("Some of the compatible brands do not conform to the 4 character requirement");this.VL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var i=0,e=this.compatibleBrands;i<e.length;i++){var s=e[i];t.writer.writeString(s)}},i}(Ki),Ap=function(t){function i(i,e,s){return t.call(this,"ftyp",i,e,s)||this}return Tt(i,t),i}(vp);function mp(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new Ap(e,s,n)}var pp=function(t){function i(i,e){void 0===e&&(e="free");var s=t.call(this,e)||this;return s.data=i,s}return Tt(i,t),i.prototype.getBoxContentSize=function(){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==i?i:0},i.prototype.serializeBoxContent=function(t){this.data&&t.concat(Ou.from(this.data))},i}(Ki),yp=function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=i.creation,r.modificationTime=i.modification,r.timescale=i.scale,r.duration=i.duration,r.language=e,r}return Tt(i,t),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.WL},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.WL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.HL},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.HL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.qL},set:function(t){if(!jm(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.qL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.XL},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"language",{get:function(){return this.ZL},set:function(t){if(!Dp(t))throw new g("Expected an ISO-639-2/T language code");this.ZL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMdiaContent(i),i.writer.writeBit(0);for(var e=0,s=this.language;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.charCodeAt(0)-96,5)}i.writer.writeUInt(0,16)},i}(Nr),Mp=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,0,s)||this}return Tt(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(yp),Tp=function(t){function i(i,e,s){return void 0===s&&(s=0),t.call(this,i,e,1,s)||this}return Tt(i,t),i.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(yp);function Np(t){var i=t.data,e=yc(i.nextUint32()),s=e.version,n=e.flags,r=ep(i,s),h=new ml(Ou.from(i.nextUint8Array(2)));h.skipBits(1);for(var o=[],a=0;a<3;a++)o.push(h.readUInt(5));var u=o.map((function(t){return String.fromCharCode(t+96)})).join("");return Dp(u)||(u="und"),i.skip(2),0===s?new Mp(r,u,n.raw):new Tp(r,u,n.raw)}function Dp(t){return/^[a-z]{3}$/.test(t)}var Sp=function(t){function i(){return t.call(this,"mdia")||this}return Tt(i,t),i}(Al);function Ip(t){for(var i=new Sp,e=0,s=ka(t.data);e<s.length;e++){var n=s[e];Pe(n,"mdhd")?i.boxes.push(Np(n)):Pe(n,"hdlr")?i.boxes.push(hp(n)):i.boxes.push(oa(n))}return i}var Ep=function(t){function i(){var i=t.call(this,"mdat")||this;return i.data=new Ou,i}return Tt(i,t),i.prototype.getBoxContentSize=function(){return this.data.length},i.prototype.serializeBoxContent=function(t){t.concat(this.data)},i}(Ki);function bp(t){var i=t.data,e=i.nextUint8Array(i.data.byteLength-i.cursor.offset),s=new Ep;return s.data.pushRange(e),s}var Lp;(function(t){function i(){return t.call(this,"minf")||this}Tt(i,t)})(Al),function(t){function i(i){var e=t.call(this,"meta",0,0)||this;return e.handler=i,e}Tt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.handler.serialize())}}(Fh);!function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(Lp||(Lp={}));var kp,xp,Cp={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function Op(t,i){i.writer.writeUInt(bo(t.a,16),32),i.writer.writeUInt(bo(t.b,16),32),i.writer.writeUInt(bo(0,30),32),i.writer.writeUInt(bo(t.c,16),32),i.writer.writeUInt(bo(t.d,16),32),i.writer.writeUInt(bo(0,30),32),i.writer.writeUInt(bo(t.x,16),32),i.writer.writeUInt(bo(t.y,16),32),i.writer.writeUInt(bo(1,30),32)}function jp(t,i){var e,s,n,r;i.writer.writeUInt(null!==(e=t.isLeading)&&void 0!==e?e:kp.UNKNOWN,2),i.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:xp.UNKNOWN,2),i.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:xp.UNKNOWN,2),i.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:xp.UNKNOWN,2)}function Pp(t,i){var e,s,n;i.writer.writeUInt(0,4),jp(t,i),i.writer.writeUInt(null!==(e=t.samplePaddingValue)&&void 0!==e?e:0,3),i.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),i.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(kp||(kp={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(xp||(xp={}));var zp=function(){},Bp=function(t){function i(i,e,s){var n=t.call(this,"pssh",i,0)||this;return n.systemId=e,n.data=s,n}return Tt(i,t),w.defineProperty(i.prototype,"systemId",{get:function(){return this.KL},set:function(t){if(16!==t.length)throw new g("Provided systemId length is not 16.");this.KL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"data",{get:function(){return this.JL},set:function(t){if(!jm(t.length,32))throw new g("Provided data length does not fit in 32 bits.");this.JL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},i.prototype.serializeVersionBoxContent=function(t){},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(Ou.from(this.systemId)),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.data.length,32),i.concat(Ou.from(this.data))},i}(Nr),Rp=function(t){function i(i,e){return t.call(this,0,i,e)||this}return Tt(i,t),i}(Bp),Up=function(t){function i(i,e,s){var n=t.call(this,1,i,e)||this;return n.kIds=s,n}return Tt(i,t),w.defineProperty(i.prototype,"kIds",{get:function(){return this.$L},set:function(t){if(!jm(t.length,32))throw new g("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new g("Not all provided key ids are 16 bytes long.");this.$L=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var i=0,e=this.kIds;i<e.length;i++){var s=e[i];t.concat(Ou.from(s))}},i}(Bp);function Qp(t){var i=t.data.nextUint8();t.data.skip(3);var e=t.data.nextUint8Array(16),s=[];if(1===i)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var h=t.data.nextUint32(),o=t.data.nextUint8Array(h);return 1===i?new Up(e,o,s):new Rp(e,o)}var Fp=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"mehd",e,s)||this;return n.fragmentDuration=i,n}return Tt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"fragmentDuration",{get:function(){return this.ek},set:function(t){if(!jm(t,this.bitSize))throw new g("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.ek=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Nr),Yp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Tt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration,32)},i}(Fp),Gp=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Tt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),i.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},i}(Fp);function Vp(t){var i=t.data,e=yc(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new Yp(i.nextUint32(),n.raw):new Gp(i.nextUint64(),n.raw)}var Oh=function(t){function i(i,e,s,n){void 0===e&&(e={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,h,o,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=i,a.defaultSampleDescriptionIndex=null!==(r=null==e?void 0:e.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(h=e.sampleDuration)&&void 0!==h?h:0,a.defaultSampleSize=null!==(o=e.sampleSize)&&void 0!==o?o:0,a.defaultSampleFlags=e.sampleFlags,a}return Tt(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.nk},set:function(t){if(!jm(t,32))throw new g("Provided track id does not fit in 32 bits.");this.nk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.rk},set:function(t){if(!jm(t,32))throw new g("Provided default sample description index does not fit in 32 bits.");this.rk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.hk},set:function(t){if(!jm(t,32))throw new g("Provided default sample duration does not fit in 32 bits.");this.hk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.ck},set:function(t){if(!jm(t,32))throw new g("Provided default sample size does not fit in 32 bits.");this.ck=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.lk},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!jm(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!jm(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.lk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},i.prototype.serializeBoxContent=function(i){var e;t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),i.writer.writeUInt(this.defaultSampleDescriptionIndex,32),i.writer.writeUInt(this.defaultSampleDuration,32),i.writer.writeUInt(this.defaultSampleSize,32),Pp(null!==(e=this.defaultSampleFlags)&&void 0!==e?e:{},i)},i}(Nr);function Wp(t){var i=t.data,e=yc(i.nextUint32()),s=e.version,n=e.flags,r=i.nextUint32(),h=i.nextUint32(),o=i.nextUint32(),a=i.nextUint32(),u=sp(new ml(Ou.from(i.nextUint8Array(4))));return new Oh(r,{sampleDescriptionIndex:h,sampleDuration:o,sampleSize:a,sampleFlags:u},s,n.raw)}var Bh=function(t){function i(){return t.call(this,"mvex")||this}return Tt(i,t),i}(Al);function Hp(t){for(var i=new Bh,e=0,s=ka(t.data);e<s.length;e++){var n=s[e];Pe(n,"mehd")?i.boxes.push(Vp(n)):Pe(n,"trex")?i.boxes.push(Wp(n)):i.boxes.push(oa(n))}return i}var qp=function(t){function i(e,s,n,r,h){void 0===h&&(h=0);var o,a,u,c=this;return(c=t.call(this,"mvhd",r,h)||this).creationTime=e.creation,c.modificationTime=e.modification,c.timescale=e.scale,c.duration=e.duration,c.rate=null!==(o=n.rate)&&void 0!==o?o:i.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:i.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:Cp,c.dk=s,c}return Tt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.WL},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.WL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.HL},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.HL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.qL},set:function(t){if(!jm(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.qL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.XL},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"rate",{get:function(){return this.fk},set:function(t){if(!jm(bo(t,16),32))throw new g("Provided rate does not fit in 32 bits (fixed 16.16).");this.fk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this._k},set:function(t){if(!jm(bo(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this._k=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.gk},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.gk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"nextTrackId",{get:function(){return this.dk},set:function(t){if(0===t)throw new g("NextTrackId cannot be 0.");if(!jm(t,32))throw new g("NextTrackId cannot exceed 32 bits.");this.dk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeMvhdContent(i),i.writer.writeUInt(bo(this.rate,16),32),i.writer.writeUInt(bo(this.volume,8),16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),Op(this.matrix,i);for(var e=0;e<6;e++)i.writer.writeUInt(0,32);i.writer.writeUInt(this.nextTrackId,32)},i.DEFAULT_RATE=1,i.DEFAULT_VOLUME=1,i}(Nr),Xp=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,0,n)||this}return Tt(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},i}(qp),Zp=function(t){function i(i,e,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,i,e,s,1,n)||this}return Tt(i,t),i.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(qp);function Kp(t){var i=t.data,e=yc(i.nextUint32()),s=e.version,n=e.flags,r=ep(i,s),h=el(i.nextUint32(),16),o=el(i.nextUint16(),8);i.skip(2),i.skip(8);var a=np(i);i.skip(24);var u=i.nextUint32();return 0===s?new Xp(r,u,{rate:h,volume:o,matrix:a},n.raw):new Zp(r,u,{rate:h,volume:o,matrix:a},n.raw)}var Jp=function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o={});var a,u,c,l=this;return l=t.call(this,"tkhd",i,function(t){var i,e,s,n;return{trackEnabled:null===(i=null==t?void 0:t.trackEnabled)||void 0===i||i,trackInMovie:null===(e=null==t?void 0:t.trackInMovie)||void 0===e||e,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(o))||this,l.creationTime=e.creation,l.modificationTime=e.modification,l.trackId=s,l.duration=e.duration,l.volume=n,l.width=r,l.height=h,l.layer=null!==(a=o.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=o.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=o.matrix)&&void 0!==c?c:Cp,l}return Tt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"creationTime",{get:function(){return this.WL},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.WL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"modificationTime",{get:function(){return this.HL},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.HL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"trackId",{get:function(){return this.nk},set:function(t){if(0===t)throw new g("trackId cannot be 0.");if(!jm(t,32))throw new g("trackId cannot exceed 32 bits.");this.nk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"duration",{get:function(){return this.XL},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.XL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"volume",{get:function(){return this._k},set:function(t){if(!jm(bo(t,8),16))throw new g("Provided volume does not fit in 16 bits (fixed 8.8).");this._k=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"width",{get:function(){return this.wk},set:function(t){if(!jm(bo(t,16),32))throw new g("Provided width does not fit in 32 bits (fixed 16.16).");this.wk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.vk},set:function(t){if(!jm(bo(t,16),32))throw new g("Provided height does not fit in 32 bits (fixed 16.16).");this.vk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"layer",{get:function(){return this.Ak},set:function(t){if(!jm(t,16))throw new g("Provided layer does not fit in 16 bits.");this.Ak=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"alternateGroup",{get:function(){return this.pk},set:function(t){if(!jm(t,16))throw new g("Provided alternateGroup does not fit in 16 bits.");this.pk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"matrix",{get:function(){return this.gk},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new g("(u, v, w) does not match the required (0, 0, 1)");this.gk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeTkhdContent(i),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.layer,16),i.writer.writeUInt(this.alternateGroup,16),i.writer.writeUInt(bo(this.volume,8),16),i.writer.writeUInt(0,16),Op(this.matrix,i),i.writer.writeUInt(bo(this.width,16),32),i.writer.writeUInt(bo(this.height,16),32)},i}(Nr),$p=function(t){function i(i,e,s,n,r,h){return t.call(this,0,i,e,s,n,r,h)||this}return Tt(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},i}(Jp),ty=function(t){function i(i,e,s,n,r,h){return t.call(this,1,i,e,s,n,r,h)||this}return Tt(i,t),i.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},i}(Jp);function iy(t){var i,e,s,n,r=t.data,h=yc(r.nextUint32()),o=h.version,a=h.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===o?(i=r.nextUint32(),e=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(i=r.nextUint64(),e=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),g=el(r.nextInt16(),8);r.skip(2);var w=np(r),v=el(r.nextUint32(),16),A=el(r.nextUint32(),16);return 0===o?new $p({creation:i,modification:e,duration:n},s,g,v,A,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new ty({creation:i,modification:e,duration:n},s,g,v,A,{layer:f,matrix:w,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var ey=function(t){function i(){return t.call(this,"trak")||this}return Tt(i,t),i}(Al);function sy(t){for(var i=new ey,e=0,s=ka(t.data);e<s.length;e++){var n=s[e];Pe(n,"tkhd")?i.boxes.push(iy(n)):Pe(n,"mdia")?i.boxes.push(Ip(n)):Pe(n,"edts")?i.boxes.push(wp(n)):i.boxes.push(oa(n))}return i}var ny=function(t){function i(){return t.call(this,"moov")||this}return Tt(i,t),i}(Al);function ry(t){for(var i=new ny,e=0,s=ka(t.data);e<s.length;e++){var n=s[e];Pe(n,"mvhd")?i.boxes.push(Kp(n)):Pe(n,"trak")?i.boxes.push(sy(n)):Pe(n,"mvex")?i.boxes.push(Hp(n)):Pe(n,"pssh")?i.boxes.push(Qp(n)):i.boxes.push(oa(n))}return i}var hy=function(t){function i(i,e,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",e,s)||this;return n.baseMediaDecodeTime=i,n}return Tt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseMediaDecodeTime",{get:function(){return this.yk},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.yk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},i}(Nr),Mr=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,0,e)||this}return Tt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime,32)},i}(hy),Hh=function(t){function i(i,e){return void 0===e&&(e=0),t.call(this,i,1,e)||this}return Tt(i,t),i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},i}(hy);function oy(t){var i=t.data,e=yc(i.nextUint32()),s=e.version,n=e.flags;return 0===s?new Mr(i.nextUint32(),n.raw):new Hh(i.nextUint64(),n.raw)}var ay=function(t){function i(i,e){void 0===e&&(e=0);var s=t.call(this,"tfhd",e,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(i))||this;return s.trackId=i.trackId,s.baseDataOffset=i.baseDataOffset,s.sampleDescriptionIndex=i.sampleDescriptionIndex,s.defaultSampleDuration=i.defaultSampleDuration,s.defaultSampleSize=i.defaultSampleSize,s.defaultSampleFlags=i.defaultSampleFlags,s}return Tt(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.nk},set:function(t){if(!jm(t,32))throw new g("Provided track id does not fit in 32 bits.");this.nk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"baseDataOffset",{get:function(){return this.Mk},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new g("The base data offset present flag is not set.");if(t&&!jm(t,64))throw new g("Provided baseDataOffset does not fit in 32 bits.");this.Mk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleDescriptionIndex",{get:function(){return this.Tk},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new g("The sample description index flag is not set.");if(t&&!jm(t,32))throw new g("Provided sampleDescriptionIndex does not fit in 32 bits.");this.Tk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleDuration",{get:function(){return this.hk},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new g("The default sample duration present flag is not set.");if(t&&!jm(t,32))throw new g("Provided defaultSampleDuration does not fit in 32 bits.");this.hk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.ck},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new g("The default sample size present flag is not set.");if(t&&!jm(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.ck=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"defaultSampleFlags",{get:function(){return this.lk},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new g("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!jm(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!jm(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.lk=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(i+=8),this.flags.sampleDescriptionIndexPresent&&(i+=4),this.flags.defaultSampleDurationPresent&&(i+=4),this.flags.defaultSampleSizePresent&&(i+=4),this.flags.defaultSampleFlagsPresent&&(i+=4),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(i.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),i.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&i.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&i.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&i.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&Pp(this.defaultSampleFlags,i)},i}(Nr);function uy(t){var i=t.data,e=i.nextUint8(),s=new ml(Ou.from(i.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var h=Boolean(s.readBit()),o=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=i.nextUint32(),d=c?i.nextUint64():void 0,f=u?i.nextUint32():void 0,_=a?i.nextUint32():void 0,g=o?i.nextUint32():void 0,w=h?sp(new ml(Ou.from(i.nextUint8Array(4)))):void 0;return new ay({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:g,defaultSampleFlags:w},e)}var Ar=function(t){function i(i,e,s){var n=t.call(this,"trun",i,function(t){var i,e,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(i=t.sampleDurationPresent)&&void 0!==i&&i,sampleSizePresent:null!==(e=t.sampleSizePresent)&&void 0!==e&&e,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(e))||this;return n.dataOffset=e.dataOffset,n.samples=s,n.firstSampleFlags=e.firstSampleFlags,n}return Tt(i,t),w.defineProperty(i.prototype,"dataOffset",{get:function(){return this.Nk},set:function(t){if(t&&!jm(t,32))throw new g("Provided data offset does not fit in 32 bits.");this.Nk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstSampleFlags",{get:function(){return this.Dk},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!jm(t.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!jm(t.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");this.Dk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.Sk},set:function(t){var i,e;if(!jm(t.length,32))throw new g("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new g("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new g("The sample duration present flag is not set.");if(r.duration&&!jm(r.duration,32))throw new g("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new g("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new g("The sample size present flag is not set.");if(r.size&&!jm(r.size,32))throw new g("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new g("The sample flags present flag is not set.");if((null===(i=r.flags)||void 0===i?void 0:i.samplePaddingValue)&&!jm(r.flags.samplePaddingValue,3))throw new g("Provided sample padding value does not fit in 3 bits.");if((null===(e=r.flags)||void 0===e?void 0:e.sampleDegradationPriority)&&!jm(r.flags.sampleDegradationPriority,16))throw new g("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new g("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!jm(r.compositionTimeOffset,32))throw new g("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.Sk=t},enumerable:!1,configurable:!0}),i.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},i.prototype.getBoxContentSize=function(){var i=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(i+=4),this.flags.firstSampleFlagsPresent&&(i+=4),this.flags.sampleDurationPresent&&(i+=4*this.samples.length),this.flags.sampleSizePresent&&(i+=4*this.samples.length),this.flags.sampleFlagsPresent&&(i+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(i+=4*this.samples.length),i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&i.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&Pp(this.firstSampleFlags,i);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];this.flags.sampleDurationPresent&&i.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&i.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&Pp(n.flags,i),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?i.writer.writeUInt(n.compositionTimeOffset,32):i.writer.writeInt(n.compositionTimeOffset,32))}},i}(Nr);function cy(t){var i=t.data,e=i.nextUint8(),s=new ml(Ou.from(i.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),h=Boolean(s.readBit()),o=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=i.nextUint32(),l={sampleDurationPresent:o,sampleSizePresent:h,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=i.nextInt32()),a&&(l.firstSampleFlags=sp(new ml(Ou.from(i.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};o&&(_.duration=i.nextUint32()),h&&(_.size=i.nextUint32()),r&&(_.flags=sp(new ml(Ou.from(i.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===e?i.nextUint32():i.nextInt32()),d.push(_)}return new Ar(e,l,d)}var Br=function(t){function i(){return t.call(this,"traf")||this}return Tt(i,t),i}(Al);function ly(t){for(var i=new Br,e=0,s=ka(t.data);e<s.length;e++){var n=s[e];Pe(n,"tfhd")?i.boxes.push(uy(n)):Pe(n,"tfdt")?i.boxes.push(oy(n)):Pe(n,"trun")?i.boxes.push(cy(n)):i.boxes.push(oa(n))}return i}var dy=function(t){function i(){return t.call(this,"moof")||this}return Tt(i,t),i}(Al);function fy(t){for(var i=new dy,e=0,s=ka(t.data);e<s.length;e++){var n=s[e];Pe(n,"traf")?i.boxes.push(ly(n)):Pe(n,"pssh")?i.boxes.push(Qp(n)):i.boxes.push(oa(n))}return i}!function(t){function i(i){var e=t.call(this,"mfhd",0,0)||this;return e.sequenceNumber=i,e}Tt(i,t),w.defineProperty(i.prototype,"sequenceNumber",{get:function(){return this.Ik},set:function(t){if(!jm(t,32))throw new g("Provided sequence number does not fit in 32 bits.");this.Ik=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.sequenceNumber,32)}}(Nr);var _y=function(t){function i(i){var e=t.call(this,"frma")||this;return e.codingName=i,e}return Tt(i,t),w.defineProperty(i.prototype,"codingName",{get:function(){return this.Ek},set:function(t){if(4!==t.length)throw new g("Provided coding name was not 4 characters long.");this.Ek=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 4},i.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},i}(Ki),gy=(function(t){function i(i,e){var s=t.call(this,"pasp")||this;return s.hSpacing=i,s.vSpacing=e,s}Tt(i,t),w.defineProperty(i.prototype,"hSpacing",{get:function(){return this.bk},set:function(t){if(!jm(t,32))throw new g("Provided hSpacing does not fit in 32 bits.");this.bk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"vSpacing",{get:function(){return this.Lk},set:function(t){if(!jm(t,32))throw new g("Provided vSpacing does not fit in 32 bits.");this.Lk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 8},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(Ki),function(t){function i(i,e,s){var n=t.call(this,i)||this;return n.sample=e,n.sinf=s,n}Tt(i,t),i.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},i.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}(Al),function(t){function i(i,e,s){var n=t.call(this,"sinf")||this;return n.schm=e,n.schi=s,n.frma=new _y(i),n}Tt(i,t),i.prototype.getBoxContentSize=function(){var t,i,e,s;return this.frma.getSize()+(null!==(i=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==i?i:0)+(null!==(s=null===(e=this.schi)||void 0===e?void 0:e.getSize())&&void 0!==s?s:0)},i.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(Ki),function(t){function i(i,e,s){var n=t.call(this,"saio",i,void 0===s?0:1)||this;return n.entries=e,n.explicitAuxInfoType=s,n}return Tt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"entries",{get:function(){return this.CL},set:function(t){var i=this;if(!jm(t.length,32))throw new g("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!jm(t,i.bitSize)})))throw new g("Not all provided entries fit in ".concat(this.bitSize," bits."));this.CL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.xk},set:function(t){if(void 0===t)this.flags=0;else{if(!jm(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!jm(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.xk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(i)},i}(Nr)),wy=(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Tt(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s,32)}}}(gy),function(t){function i(){return null!==t&&t.apply(this,arguments)||this}Tt(i,t),i.prototype.serializeSaioContent=function(t){for(var i=0,e=this.entries;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}(gy),function(t){function i(i,e,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=i,n.sampleInfoSizes=e,n.explicitAuxInfoType=s,n}Tt(i,t),w.defineProperty(i.prototype,"defaultSampleInfoSize",{get:function(){return this.Ck},set:function(t){if(!jm(t,8))throw new g("Provided defaultSampleInfoSize does not fit in a single byte.");this.Ck=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"sampleInfoSizes",{get:function(){return this.Ok},set:function(t){if(!jm(t.length,32))throw new g("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!jm(t,8)})))throw new g("Not all provided sampleInfoSizes fit in a byte.");this.Ok=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"explicitAuxInfoType",{get:function(){return this.xk},set:function(t){if(void 0===t)this.flags=0;else{if(!jm(t.auxInfoType,32))throw new g("Provided auxInfoType does not fit in 32 bits.");if(!jm(t.auxInfoTypeParameter,32))throw new g("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.xk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},i.prototype.serializeBoxContent=function(i){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new g("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,i),void 0!==this.explicitAuxInfoType&&(i.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),i.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),i.writer.writeByte(this.defaultSampleInfoSize),i.writer.writeUInt(this.sampleInfoSizes.length,32);for(var e=0,s=this.sampleInfoSizes;e<s.length;e++){var n=s[e];i.writer.writeByte(n)}}}(Nr),function(t){function i(i){var e=t.call(this,"sdtp",0,0)||this;return e.samples=i,e}Tt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i);for(var e=0,s=this.samples;e<s.length;e++){jp(s[e],i)}}}(Nr),function(t){function i(i){return t.call(this,"stsd",i,0)||this}Tt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.boxes.length,32)}}(Fh),function(t){function i(i,e,s){var n=t.call(this,"sgpd",i,0)||this;return n.entries=s,n.groupingType=e,n}return Tt(i,t),w.defineProperty(i.prototype,"groupingType",{get:function(){return this.jk},set:function(t){if(4!==t.length)throw new g("The provided groupingType does not equal 4 characters.");this.jk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.groupingType),this.serializeVersionBoxContent(i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];this.serializeEntryBoxContent(i,n)}},i.prototype.serializeEntryBoxContent=function(t,i){i.serializeBoxContent(t)},i}(Nr)),vy=(function(t){function i(i,e){return t.call(this,0,i,e)||this}Tt(i,t),i.prototype.serializeVersionBoxContent=function(t){}}(wy),function(t){function i(i,e,s){var n=t.call(this,1,i,s)||this;return n.defaultLength=e,n}Tt(i,t),w.defineProperty(i.prototype,"defaultLength",{get:function(){return this.Pk},set:function(t){if(!jm(t,32))throw new g("The provided defaultLength does not fit in 32 bits.");this.Pk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},i.prototype.serializeEntryBoxContent=function(t,i){0===this.defaultLength&&t.writer.writeUInt(i.getBoxContentSize(),32),i.serializeBoxContent(t)}}(wy),function(t){function i(i,e,s,n){void 0===n&&(n=0);var r=this;if(i<2)throw new g("This constructor is only meant for versions 2 and up.");return(r=t.call(this,i,e,s)||this).defaultSampleDescriptionIndex=n,r}Tt(i,t),w.defineProperty(i.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.rk},set:function(t){if(!jm(t,32))throw new g("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.rk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(wy),function(t){function i(i){void 0===i&&(i=[]);var e=t.call(this,"stsz",0,0)||this;return e.sampleSizes=i,e}Tt(i,t),w.defineProperty(i.prototype,"sampleSizes",{get:function(){return this.zk},set:function(t){if(!jm(t.length,32))throw new g("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!jm(t,32)})))throw new g("Not all sampleSizes can be represented in 32 bits.");this.zk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,32),i.writer.writeUInt(this.sampleSizes.length,32);for(var e=0,s=this.sampleSizes;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Nr),function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=i,s.samples=e,s}Tt(i,t),w.defineProperty(i.prototype,"defaultSampleSize",{get:function(){return this.ck},set:function(t){if(!jm(t,32))throw new g("Provided defaultSampleSize does not fit in 32 bits.");this.ck=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"samples",{get:function(){return this.Sk},set:function(t){if(!jm(t,32))throw new g("Number of allowed samples cannot fit in 32 bits.");this.Sk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.defaultSampleSize,32),i.writer.writeUInt(this.samples,32)}}(Nr),function(t){function i(){return t.call(this,"stbl")||this}Tt(i,t)}(Al),function(t){function i(i){var e=t.call(this,"stsc",0,0)||this;return e.entries=i,e}Tt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.CL},set:function(t){if(!jm(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!jm(t.firstChunk,32)||!jm(t.sampleDescriptionIndex,32)||!jm(t.samplesPerChunk,32)})))throw new g("Not all entries can be represented in 96 bits.");this.CL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.firstChunk,32),i.writer.writeUInt(n.samplesPerChunk,32),i.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(Nr),function(t){function i(){return t.call(this,"schi")||this}Tt(i,t)}(Al),function(t){function i(i,e,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=i,n.schemeVersion=e,n.schemeUri=s,n}Tt(i,t),w.defineProperty(i.prototype,"schemeType",{get:function(){return this.Bk},set:function(t){if(4!==t.length)throw new g("The provided schemeType does not have a length of 4.");this.Bk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeVersion",{get:function(){return this.Rk},set:function(t){if(!jm(t,32))throw new g("The provided schemeVersion does not fit in 23 bits.");this.Rk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"schemeUri",{get:function(){return this.Uk},set:function(t){if(t&&4!==t.length)throw new g("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.Uk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeType),i.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(i.writer.writeString(this.schemeUri),i.writer.writeByte(0))}}(Nr),function(t){function i(i,e,s,n,r,h,o){void 0===o&&(o=0);var a=t.call(this,"sidx",i,o)||this;return a.referenceId=e,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=h,a}return Tt(i,t),w.defineProperty(i.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"referenceId",{get:function(){return this.Qk},set:function(t){if(!jm(t,32))throw new g("Provided referenceId does not fit in 32 bits.");this.Qk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"timescale",{get:function(){return this.qL},set:function(t){if(!jm(t,32))throw new g("Provided timescale does not fit in 32 bits.");this.qL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"earliestPresentationTime",{get:function(){return this.Fk},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.Fk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"firstOffset",{get:function(){return this.Yk},set:function(t){if(!jm(t,this.bitSize))throw new g("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.Yk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"references",{get:function(){return this.Gk},set:function(t){if(!jm(t.length,16))throw new g("The number of provided reference items does not fit in 16 bits.");for(var i=0,e=t;i<e.length;i++){var s=e[i];if(!jm(s.referencedSize,31))throw new g("Provided referenced size does not fit in 31 bits.");if(!jm(s.subsegmentDuration,32))throw new g("Provided subsegment duration does not fit in 31 bits.");if(!jm(s.sapType,3))throw new g("Provided SAP type does not fit in 3 bits.");if(!jm(s.sapDeltaTime,28))throw new g("Provided SAP delta time does not fit in 28 bits.")}this.Gk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.referenceId,32),i.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(i),i.writer.writeUInt(0,16),i.writer.writeUInt(this.references.length,16);for(var e=0,s=this.references;e<s.length;e++){var n=s[e];i.writer.writeBit(n.referenceType),i.writer.writeUInt(n.referencedSize,31),i.writer.writeUInt(n.subsegmentDuration,32),i.writer.writeBool(n.startsWithSap),i.writer.writeUInt(n.sapType,3),i.writer.writeUInt(n.sapDeltaTime,28)}},i}(Nr)),Ay=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,0,i,e,s,n,r,h)||this}return Tt(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},i}(vy),my=function(t){function i(i,e,s,n,r,h){return void 0===h&&(h=0),t.call(this,1,i,e,s,n,r,h)||this}return Tt(i,t),i.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},i}(vy);var py=function(t){function i(i,e,s){return t.call(this,"styp",i,e,s)||this}return Tt(i,t),i}(vp);function yy(t){for(var i=t.data,e=i.nextChars(4),s=i.nextUint32(),n=[];i.cursor.offset<i.data.byteLength;)n.push(i.nextChars(4));return new py(e,s,n)}(function(t){function i(i){void 0===i&&(i=0);var e=t.call(this,"smhd",0,0)||this;return e.balance=i,e}Tt(i,t),w.defineProperty(i.prototype,"balance",{get:function(){return this.Vk},set:function(t){if(t<-1||t>1)throw new g("Provided balance does not fit in the allowed range [-1, 1].");if(!jm(bo(t,8),16))throw new g("Provided balance does not fit in 16 bits (fixed 8.8).");this.Vk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(bo(this.balance,8),16),i.writer.writeUInt(0,16)}})(Nr),function(t){function i(i){var e=t.call(this,"stss",0,0)||this;return e.entries=i,e}Tt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.CL},set:function(t){if(!jm(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!jm(t,32)})))throw new g("Not all entries can be represented in 32 bits.");this.CL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n,32)}}}(Nr),function(t){function i(i){var e=t.call(this,"stts",0,0)||this;return e.entries=i,e}Tt(i,t),w.defineProperty(i.prototype,"entries",{get:function(){return this.CL},set:function(t){if(!jm(t.length,32))throw new g("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!jm(t.sampleCount,32)||!jm(t.sampleDelta,32)})))throw new g("Not all entries can be represented in 64 bits.");this.CL=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.entries.length,32);for(var e=0,s=this.entries;e<s.length;e++){var n=s[e];i.writer.writeUInt(n.sampleCount,32),i.writer.writeUInt(n.sampleDelta,32)}}}(Nr),function(t){function i(i){var e=t.call(this,"trep",0,0)||this;return e.trackId=i,e}Tt(i,t),w.defineProperty(i.prototype,"trackId",{get:function(){return this.nk},set:function(t){if(!jm(t,32))throw new g("The provided trackId does not fit in 32 bits.");this.nk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.trackId,32)}}(Fh),function(t){function i(){return t.call(this,"udta")||this}Tt(i,t)}(Al);var My={red:0,green:0,blue:0},Ty=(function(t){function i(i,e){void 0===i&&(i=0),void 0===e&&(e=My);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=i,s.opColor=e,s}Tt(i,t),w.defineProperty(i.prototype,"opColor",{get:function(){return this.Wk},set:function(t){if(!jm(t.red,16)||!jm(t.green,16)||!jm(t.blue,16))throw new g("Not all colors could be represented in 16 bits.");this.Wk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.graphicsMode,16),i.writer.writeUInt(this.opColor.red,16),i.writer.writeUInt(this.opColor.green,16),i.writer.writeUInt(this.opColor.blue,16)}}(Nr),function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h,o,a,u,c,l=this;return(l=t.call(this,i,e)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(h=s.horizontal)&&void 0!==h?h:72,l.verticalResolution=null!==(o=s.vertical)&&void 0!==o?o:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return Tt(i,t),w.defineProperty(i.prototype,"width",{get:function(){return this.wk},set:function(t){if(!jm(t,16))throw new g("Provided width does not fit in 16 bits.");this.wk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"height",{get:function(){return this.vk},set:function(t){if(!jm(t,16))throw new g("Provided height does not fit in 16 bits.");this.vk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"horizontalResolution",{get:function(){return this.Hk},set:function(t){if(!jm(bo(t,16),32))throw new g("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.Hk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"verticalResolution",{get:function(){return this.qk},set:function(t){if(!jm(bo(t,16),32))throw new g("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.qk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"compressorName",{get:function(){return this.Xk},set:function(t){if(t.length>31)throw new g("The provided compressorName should at most be 31 characters long.");this.Xk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"frameCount",{get:function(){return this.Zk},set:function(t){if(!jm(t,16))throw new g("Provided frameCount does not fit in 16 bits.");this.Zk=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"depth",{get:function(){return this.Kk},set:function(t){if(!jm(t,16))throw new g("Provided depth does not fit in 16 bits.");this.Kk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){var i,e,s,n,r,h;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(e=null===(i=this.clap)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(h=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==h?h:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(0,16),i.writer.writeUInt(0,16),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.width,16),i.writer.writeUInt(this.height,16),i.writer.writeUInt(bo(this.horizontalResolution,16),32),i.writer.writeUInt(bo(this.verticalResolution,16),32),i.writer.writeUInt(0,32),i.writer.writeUInt(this.frameCount,16),i.writer.writeByte(this.compressorName.length),i.writer.writeString(this.compressorName);for(var e=0;e<31-this.compressorName.length;e++)i.writer.writeByte(0);i.writer.writeUInt(this.depth,16),i.writer.writeInt(-1,16),this.clap&&i.concat(this.clap.serialize()),this.pasp&&i.concat(this.pasp.serialize()),this.extra&&ga(i.writer,this.extra)},i}(up)),Ny=(function(t){function i(i){var e=t.call(this,"esds",0,0)||this;return e.esDescriptor=i,e}Tt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof j?this.esDescriptor.length:this.esDescriptor.getSize())},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor instanceof j?i.concat(Ou.from(this.esDescriptor)):this.esDescriptor.serialize(i)}}(Nr),function(t){function i(i,e,s){var n=t.call(this,"mp4a",i,s)||this;return n.esd=e,n}Tt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.esd.serialize())}}(cp),function(t){function i(i,e,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",i,e,n)||this;return r.esDescriptor=s,r}Tt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(Ty),function(t){function i(i,e){var s=t.call(this,"mp4s",i)||this;return s.esDescriptor=e,s}Tt(i,t),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.esDescriptor.serialize(i)}}(up),function(t){function i(i){var e=t.call(this,"avcC")||this;return e.decoderConfig=i,e}Tt(i,t),i.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},i.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(Ki),function(){function t(t,i,e,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=e,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=i,this.spsSets=s,this.ppsSets=n}w.defineProperty(t.prototype,"version",{get:function(){return this.Jk},set:function(t){if(!jm(t,8))throw new g("Provided version does not fit in 8 bits.");this.Jk=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileIndication",{get:function(){return this.$k},set:function(t){if(!jm(t,8))throw new g("Provided profileIndication does not fit in 8 bits.");this.$k=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.tx},set:function(t){if(!jm(t,8))throw new g("Provided profileCompatibility does not fit in 8 bits.");this.tx=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"levelIndication",{get:function(){return this.ix},set:function(t){if(!jm(t,8))throw new g("Provided levelIndication does not fit in 8 bits.");this.ix=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"spsSets",{get:function(){return this.sx},set:function(t){if(!jm(t.length,5))throw new g("Provided number of spsSets exceeds the max (32)");this.sx=t},enumerable:!1,configurable:!0}),w.defineProperty(t.prototype,"ppsSets",{get:function(){return this.nx},set:function(t){if(!jm(t.length,8))throw new g("Provided number of ppsSets exceeds the max (256)");this.nx=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,i){return t+i.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,i){return t+i.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var i=0,e=this.spsSets;i<e.length;i++){var s=e[i];t.writer.writeUInt(s.length,16),t.concat(Ou.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var h=r[n];t.writer.writeUInt(h.length,16),t.concat(Ou.from(h))}}}(),function(t){function i(i,e,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h=t.call(this,"avc1",i,e,n)||this;return h.configurationBox=s,h.bitrateBox=r,h}Tt(i,t),i.prototype.getBoxContentSize=function(){var i,e;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(e=null===(i=this.bitrateBox)||void 0===i?void 0:i.getSize())&&void 0!==e?e:0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.concat(this.configurationBox.serialize()),this.bitrateBox&&i.concat(this.bitrateBox.serialize())}}(Ty),function(t){function i(i,e,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=i,n.max=e,n.avg=s,n}Tt(i,t),w.defineProperty(i.prototype,"bufferSizeDb",{get:function(){return this.ML},set:function(t){if(!jm(t,32))throw new g("Provided bufferSizeDb does not fit in 32 bits.");this.ML=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"max",{get:function(){return this.hx},set:function(t){if(!jm(t,32))throw new g("Provided max does not fit in 32 bits.");this.hx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"avg",{get:function(){return this.ox},set:function(t){if(!jm(t,32))throw new g("Provided avg does not fit in 32 bits.");this.ox=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return 12},i.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(Ki),function(t){function i(i,e){var s,n,r,h,o=this;if(o=t.call(this,"tenc",i,0)||this,e.perSampleIvSize>0&&(null!==(n=null===(s=e.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new g("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return o.kId=e.kId,o.isProtected=null!==(r=e.isProtected)&&void 0!==r?r:1,e.perSampleIvSize>0?o.perSampleIvSize=e.perSampleIvSize:o.constantIv=null!==(h=e.constantIv)&&void 0!==h?h:new j(0),o}return Tt(i,t),w.defineProperty(i.prototype,"isProtected",{get:function(){return this.ux},set:function(t){if(!jm(t,8))throw new g("Provided isProtected does not fit in 1 byte.");this.ux=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"perSampleIvSize",{get:function(){return this.lx},set:function(t){if(![8,16].includes(t))throw new g("Provided perSampleIvSize does not match any allowed value [8, 16].");this.lx=t,this._x=new j(0)},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"kId",{get:function(){return this.gx},set:function(t){if(16!==t.length)throw new g("Provided kId length is not 16.");this.gx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"constantIv",{get:function(){return this._x},set:function(t){if(![8,16].includes(t.length))throw new g("Provided constant IV length does not match any allowed value [8, 16].");this._x=t,this.lx=0},enumerable:!1,configurable:!0}),i.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},i.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),this.serializeOwnContent(i)},i.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),ga(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),ga(t.writer,this.constantIv))},i}(Nr)),Dy=(function(t){function i(i){return t.call(this,0,i)||this}Tt(i,t)}(Ny),function(t){function i(i){var e=t.call(this,1,i)||this;return e.cryptByteBlocks=i.cryptByteBlock,e.skipByteBlocks=i.skipByteBlock,e}return Tt(i,t),w.defineProperty(i.prototype,"cryptByteBlocks",{get:function(){return this.wx},set:function(t){if(!jm(t,4))throw new g("Provided cryptByteBlocks does not fit in 4 bits.");this.wx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"skipByteBlocks",{get:function(){return this.vx},set:function(t){if(!jm(t,4))throw new g("Provided skipByteBlocks does not fit in 4 bits.");this.vx=t},enumerable:!1,configurable:!0}),i.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},i}(Ny));!function(t){function i(i){var e=t.call(this)||this;return e.tencBox=new Dy(i),e}Tt(i,t),i.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},i.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(zp);function Sy(t){return void 0!==t.iv}function Iy(t){return void 0!==t.subsamples}(function(t){function i(i){var e=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return e.samples=i,e}Tt(i,t),w.defineProperty(i.prototype,"samples",{get:function(){return this.Sk},set:function(t){var i;if(!jm(t.length,32))throw new g("The number of samples provided does not fit in 32 bits.");for(var e=0,s=t;e<s.length;e++){var n=s[e];if(Sy(n)&&![8,16].includes(n.iv.length))throw new g("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===i&&(i=Iy(n)),!0===i&&!Iy(n)||!1===i&&Iy(n))throw new g("Mix of samples with and without subsamples detected.");if(Iy(n)){if(!jm(n.subsamples.length,16))throw new g("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];if(!jm(o.clearData,16))throw new g("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!jm(o.protectedData,23))throw new g("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=i&&i,this.Sk=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){for(var i=0,e=0,s=this.samples;e<s.length;e++){var n=s[e];Sy(n)&&(i+=n.iv.length),Iy(n)&&(i+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+i},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeUInt(this.samples.length,32);for(var e=0,s=this.samples;e<s.length;e++){var n=s[e];if(Sy(n)&&ga(i.writer,n.iv),Iy(n)){i.writer.writeUInt(n.subsamples.length,16);for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];i.writer.writeUInt(o.clearData,16),i.writer.writeUInt(o.protectedData,32)}}}},i.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}})(Nr),function(t){function i(i,e,s,n,r){var h=t.call(this,"emsg",0,0)||this;return h.schemeIdUri=i,h.value=e,h.data=r,h.id=s,h.timescale=n.timescale,h.presentationTimeDelta=n.presentationTimeDelta,h.eventDuration=n.eventDuration,h}Tt(i,t),w.defineProperty(i.prototype,"timescale",{get:function(){return this.qL},set:function(t){if(!jm(t,32))throw new g("The provided timescale does not fit in 32 bits.");this.qL=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"presentationTimeDelta",{get:function(){return this.Ax},set:function(t){if(!jm(t,32))throw new g("The provided presentationTimeDelta does not fit in 32 bits.");this.Ax=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"eventDuration",{get:function(){return this.mx},set:function(t){if(!jm(t,32))throw new g("The provided eventDuration does not fit in 32 bits.");this.mx=t},enumerable:!1,configurable:!0}),w.defineProperty(i.prototype,"id",{get:function(){return this.CT},set:function(t){if(!jm(t,32))throw new g("The provided id does not fit in 32 bits.");this.CT=t},enumerable:!1,configurable:!0}),i.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},i.prototype.serializeBoxContent=function(i){t.prototype.serializeBoxContent.call(this,i),i.writer.writeString(this.schemeIdUri),i.writer.writeByte(0),i.writer.writeString(this.value),i.writer.writeByte(0),i.writer.writeUInt(this.timescale,32),i.writer.writeUInt(this.presentationTimeDelta,32),i.writer.writeUInt(this.eventDuration,32),i.writer.writeUInt(this.id,32),i.concat(Ou.from(this.data))}}(Nr);var Ey=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new Om,i=0,e=this.boxes;i<e.length;i++){var s=e[i];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function by(t,i){return function(e){var s=function(t,i){for(var e=t.data,s=t.cursor;s.offset<e.byteLength;){var n=ip(e,s);if(!n.complete)return;if(Pe(n.box,i))return n.box}}(new $m(Zm(e),new Jm),t);if(!s)throw new g("".concat(t," box not found"));return i(s)}}var Ly=by("moov",ry),ky=by("sidx",(function(t){var i,e,s=t.data,n=yc(s.nextUint32()),r=n.version,h=n.flags,o=s.nextUint32(),a=s.nextUint32();0===r?(i=s.nextUint32(),e=s.nextUint32()):(i=s.nextUint64(),e=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new ml(Ou.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),g=d.readUInt(32),w=Boolean(d.readBit()),v=d.readUInt(3),A=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:g,startsWithSap:w,sapType:v,sapDeltaTime:A})}return 0===r?new Ay(o,a,i,e,c,h.raw):new my(o,a,i,e,c,h.raw)})),xy=by("moof",fy),Cy=by("pssh",Qp);function Oy(t){return function(t){for(var i=new Ey,e=0,s=ka(t);e<s.length;e++){var n=s[e];Pe(n,"ftyp")?i.boxes.push(mp(n)):Pe(n,"styp")?i.boxes.push(yy(n)):Pe(n,"moov")?i.boxes.push(ry(n)):Pe(n,"moof")?i.boxes.push(fy(n)):Pe(n,"mdat")?i.boxes.push(bp(n)):i.boxes.push(oa(n))}return i}(new $m(Zm(t),new Jm))}var jy=class extends Bo{get yx(){return this.Mx}get Tx(){return this.Nx.expiration}get Dx(){return this.Sx}get Ix(){return this.Nx.sessionId}Ws(){if(this.Ex)return this.Mx;const t=[];return t.push(Promise.resolve(this.Nx.close())),t.push(N(1e3)),this.bx.Xd(Promise.race(t).catch(Py)),this.Ex=!0,this.Mx}Lx(t,i,e){if(f.fE){const t=Cy(Oi(i));if(1===t.version){i=new Rp(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.Nx.generateRequest(t,i)).catch(Py)}$n(t){return Promise.resolve(this.Nx.load(t)).catch(Py)}bT(){return Promise.resolve(this.Nx.remove()).catch(Py)}Yn(t){return Promise.resolve(this.Nx.update(t)).catch(Py)}kx(){this.Sx.Xb(),this.Nx.keyStatuses.forEach(((t,i)=>{this.xx(i,t)})),this.Co(new uo(this))}xx(t,i){if("string"==typeof t){const e=t;t=i,i=e}const e=Oi(t);if(this.lA===g_&&16===e.byteLength){let t=Ao(e),i=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,i,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.lA===g_&&"status-pending"===i&&(i="usable"),this.Sx.qb(e,i)}constructor(t,i){super(),this.Nx=t,this.lA=i,this.Ex=!1,this.Cx=()=>{this.kx()},this.Ox=t=>{this.Co(new pr(this,t.messageType,Dm(this.lA,t.message)))},this.jx=()=>{this.Ex=!0,this.Sx.hp>0&&(this.Sx.Xb(),this.Co(new uo(this))),this.Nx.removeEventListener("keystatuseschange",this.Cx),this.Nx.removeEventListener("message",this.Ox)},this.Nx.addEventListener("keystatuseschange",this.Cx),this.Nx.addEventListener("message",this.Ox),this.Sx=new wr;const e=[];this.Nx.closed&&e.push(Promise.resolve(this.Nx.closed)),this.bx=new ue,e.push(this.bx.tL),this.Mx=Promise.race(e).then(this.jx,this.jx),this.kx()}};function Py(t){let i;if(t.message){const e=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);e&&(i=0|x(e[1],16))}throw new xi(t.message,void 0,i,t)}var zy=class{async Px(t){return new jy(this.zx.createSession(t),this.cA)}Bx(t){return Promise.resolve(this.zx.setServerCertificate(t))}bn(t){return Promise.resolve(t.setMediaKeys(this.zx))}Rx(t){return Promise.resolve(t.setMediaKeys(null))}tr(){return Promise.resolve()}constructor(t,i,e){this.zx=t,this.cA=i,this.wd=e}},By=class{get cA(){return this.Ux.keySystem}async Qx(){const t=await this.Ux.createMediaKeys();return new zy(t,this.lA,this.Fx)}Yx(){return this.Fx}constructor(t,i,e){this.Ux=t,this.lA=i,this.Fx=e}},Ry=f.pE&&f.ME>=42||f.WE&&f.qE>=38||f.BE||f.FE||f.ib&&f.sb>=29;function Uy(t,i){return Xi(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[Yt({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[Yt({contentType:t},i?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function Qy(){return void 0!==Dl&&"function"==typeof Dl.requestMediaKeySystemAccess}function Tr(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var Fy=class{Gx(){return this.Vx(qn)}Wx(){return this.Vx(Uh)}Hx(){return this.Vx(qh)}qx(){return this.Vx(_m)}Vx(t){const i=t.Ob,e=this.Xx.get(i);if(e)return e;const s=this.Zx(t,'video/mp4; codecs="avc1.42000a"');return this.Xx.set(i,s),s}async Zx(t,i){try{return await this.Jx.Kx(t.kb,[Uy(i,!0)]),!0}catch(e){try{return await this.Jx.Kx(t.kb,[Uy(i,!1)]),!0}catch(t){return!1}}}$x(){return this.tC||(this.tC=this.iC()),this.tC}async iC(){return"https:"!==dm.protocol&&(!!Ry&&!await this.Wx())}constructor(t){this.Xx=ke(),this.tC=void 0,this.Jx=t}};function Yy(t,i,e,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,eC:s.eC};let h=!1;if(s.audioCapabilities){const o=s.audioCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.audioCapabilities=o.filter((s=>Gy(t,i,e,s))),h=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const o=s.videoCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.videoCapabilities=o.filter((s=>Gy(t,i,e,s))),h=!0,r.videoCapabilities.length&&(n=!0))}return h||(n=t(e,"video/mp4")),n?r:void 0}function Gy(t,i,e,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!qo(i,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(e,K(s.contentType))}function Vy(t){if(t.videoCapabilities)for(const i of t.videoCapabilities)if(i.contentType)return i.contentType;if(t.audioCapabilities)for(const i of t.audioCapabilities)if(i.contentType)return i.contentType}function Wy(t){const i=[];for(const e of t)e.encryptionScheme&&i.push({contentType:e.contentType,robustness:e.robustness});return t.concat(i)}function Hy(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(qy))||!(!t.videoCapabilities||!t.videoCapabilities.some(qy))}function qy(t){return!t.robustness}function Xy(t,i){const e=[];for(const s of t)s.robustness?e.push(s):e.push(Yt({},s,{robustness:i}));return e}var Zy=class{async Kx(t,i){i=i.filter((t=>!t.eC));for(const t of i)t.audioCapabilities&&(t.audioCapabilities=Wy(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=Wy(t.videoCapabilities));if(t===v_&&i.some(Hy)){const e=i.map((t=>function(t,i){return Yt({},t,{videoCapabilities:t.videoCapabilities?Xy(t.videoCapabilities,i):void 0,audioCapabilities:t.audioCapabilities?Xy(t.audioCapabilities,i):void 0})}(t,"SW_SECURE_CRYPTO")));try{const i=await Dl.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new By(i,t,s)}catch(t){}}const e=await Dl.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new By(e,t,s)}static sC(){return Qy()}},Ky=class extends Bo{get Ix(){return this.nC&&this.nC.sessionId||""}get Tx(){return NaN}get yx(){return this.rC.tL}get Dx(){return this.hC}async Lx(t,i,e){this.oC(),this.aC=new ue,this.Px(Oi(i),e),await this.aC.tL}Px(t,i){if(!t)throw new b("Expected initData to be defined but was "+t+".");const e=i&&i.playready&&i.playready.uC;let s;return s=i?this.cC.createSession(this.lC,t,e):this.cC.createSession(this.lC,t),s.addEventListener("mskeyclose",this.jx),s.addEventListener("mskeymessage",this.dC),s.addEventListener("mskeyerror",this.Ss),s.addEventListener("mskeyadded",this.fC),this.nC=s,this._C("status-pending"),s}async $n(t){return this.oC(),!0}async Yn(t){if(this.gC=new ue,this.oC(),!this.nC)return Promise.resolve();const i=Oi(t);if(0===i.byteLength)throw new b("Cannot call update with an empty response.");this.nC.update(i),await this.gC.tL}Ws(){return!this.Ex&&this.nC&&(this.Ex=!0,this.nC.close()),this.rC.tL}async bT(){this.oC()}oC(){if(this.Ex)throw new b("Already closing or closed.")}_C(t){this.hC.Xb(),this.hC.qb(Tm,t),this.Co(new uo(this))}constructor(t,i){super(),this.cC=t,this.lC=i,this.Ex=!1,this.gC=void 0,this.aC=void 0,this.nC=void 0,this.jx=()=>{this.Ex=!0,this.rC.Zb(void 0),this.nC&&(this.nC.removeEventListener("mskeyclose",this.jx),this.nC.removeEventListener("mskeymessage",this.dC),this.nC.removeEventListener("mskeyerror",this.Ss),this.nC.removeEventListener("mskeyadded",this.fC))},this.dC=t=>{this.aC&&(this.aC.Zb(void 0),this.aC=void 0),this.Co(new pr(this,"license-request",He(t.message).buffer,t.destinationURL||void 0))},this.Ss=()=>{const t=this.nC&&this.nC.error;if(!t)return;const i=new xi("Unknown CDM error",t.code,t.systemCode);if(this.aC)this.aC.Jb(i),this.aC=void 0;else if(this.gC)this.gC.Jb(i),this.gC=void 0;else switch(i.iL){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this._C("output-not-allowed");break;default:this._C("internal-error")}},this.fC=()=>{this.aC&&(this._C("usable"),this.aC.Zb(void 0),this.aC=void 0),this.gC&&(this._C("usable"),this.gC.Zb(void 0),this.gC=void 0)},this.rC=new ue,this.hC=new wr}},Jy=class{async Px(t){return new Ky(this.cC,this.lC)}Bx(t){return Promise.resolve(!1)}bn(t){const i=()=>{t.msSetMediaKeys(this.cC),t.removeEventListener("loadedmetadata",i)};return t.readyState>=1?t.msSetMediaKeys(this.cC):t.addEventListener("loadedmetadata",i),Promise.resolve()}Rx(t){return Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.cC=t,this.cA=i,this.wd=e;const s=Vy(e)||"video/mp4";this.lC=K(s)}},$y=class{get cA(){return this.lA}Yx(){return this.wC}Qx(){const t=new Ha.MSMediaKeys(this.lA);return Promise.resolve(new Jy(t,this.lA,this.wC))}constructor(t,i){this.lA=t,this.wC=i}},tM=class{Kx(t,i){try{return Promise.resolve(function(t,i){if(!iM())throw new b("Unsupported key system "+t);for(let e of i){let i=Yy(eM,mm,t,e);if(i)return new $y(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static sC(){return iM()}};function iM(){return void 0!==Ha.MSMediaKeys&&"function"==typeof Ha.MSMediaKeys.isTypeSupported}function eM(t,i){return Ha.MSMediaKeys.isTypeSupported(t,i)}var sM=class extends Bo{get Ix(){return this.vC?this.vC.sessionId:""}get Tx(){return NaN}get yx(){return this.rC.tL}get Dx(){return this.hC}Lx(t,i,e){const s=e&&e.fairplay&&e.fairplay.AC;if(!s)throw new b("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,i,e){const s=_n(t),n=2*s.length,r=2*i.length;let h=new ArrayBuffer(4+n+4+r+4+e.byteLength),o=new DataView(h),a=new _s;return ac(o,a,n,!0),vg(o,a,s,!0),ac(o,a,r,!0),vg(o,a,i,!0),ac(o,a,e.byteLength,!0),br(o,a,e),new j(h)}(Oi(i),s,this.mC);return this.vC=this.pC.createSession(this.lC,n),this.vC.addEventListener("webkitkeymessage",this.dC,!1),this.vC.addEventListener("webkitkeyadded",this.fC,!1),this.vC.addEventListener("webkitkeyerror",this.Ss,!1),this._C("status-pending"),this.yC.Zb(this.vC),this.yC=new ue,Promise.resolve()}$n(t){return Promise.resolve(!0)}async Yn(t){const i=Oi(t);if(0===i.byteLength)throw new b("Cannot call update with an empty response.");this.MC=new ue;(this.vC||await this.yC.tL).update(i),await this.MC.tL}Ws(){var t;const i=this.vC;return i&&(i.removeEventListener("webkitkeymessage",this.dC,!1),i.removeEventListener("webkitkeyadded",this.fC,!1),i.removeEventListener("webkitkeyerror",this.Ss,!1),i.close()),this.yC.qd(),null==(t=this.MC)||t.qd(),this.rC.Zb(void 0),this.rC.tL}bT(){return Promise.resolve(void 0)}_C(t){this.hC.Xb(),this.hC.qb(Tm,t),this.Co(new uo(this))}constructor(t,i,e){super(),this.pC=t,this.lC=i,this.mC=e,this.rC=new ue,this.MC=void 0,this.hC=new wr,this.vC=void 0,this.yC=new ue,this.Ss=()=>{const t=this.vC&&this.vC.error;if(!t)return;const i=new xi("Unknown CDM error",t.code,t.systemCode);this.MC?(this.MC.Jb(i),this.MC=void 0):i.iL===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this._C("output-not-allowed"):this._C("internal-error"),this.Co(new ym)},this.dC=t=>{this.Co(new pr(this,"license-request",He(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.fC=()=>{this.MC&&(this.MC.Zb(void 0),this.MC=void 0),this._C("usable")}}};var nM=class{getInternalMediaKeys(){return this.pC}async Px(t){if(!this.mC)throw new Rs(Ui.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new sM(this.pC,this.lC,this.mC)}Bx(t){return this.mC=Oi(t),Promise.resolve(!0)}bn(t){return t.webkitSetMediaKeys(this.pC),Promise.resolve()}Rx(t){return t.webkitSetMediaKeys(null),Promise.resolve()}tr(){return Promise.resolve()}constructor(t,i,e){this.pC=t,this.cA=i,this.wd=e,this.mC=void 0;const s=Vy(e)||"video/mp4";this.lC=K(s)}},rM=class{get cA(){return this.lA}Yx(){return this.wC}Qx(){const t=new Ha.WebKitMediaKeys(this.lA);return Promise.resolve(new nM(t,this.lA,this.wC))}constructor(t,i){this.lA=t,this.wC=i}},hM=class{Kx(t,i){try{return Promise.resolve(function(t,i){if(t!==p_)throw new b(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!oM())throw new b("Unsupported key system "+t);for(let e of i){let i=Yy(aM,pm,t,e);if(i)return new rM(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static sC(){return oM()}};function oM(){return void 0!==Ha.WebKitMediaKeys&&"function"==typeof Ha.WebKitMediaKeys.isTypeSupported}function aM(t,i){return Ha.WebKitMediaKeys.isTypeSupported(t,i)}var uM=class{async Kx(t,i){for(let e of this.TC)try{return await e.Kx(t,i)}catch(t){}throw new b("Unsupported key system configuration for "+t)}constructor(t){this.TC=t}},Kr=class{NC(t,i){return new Promise((e=>{const s=new Wr;s.Xd(this.DC.Wd),i&&s.Xd(i);const n=()=>{s.Ud()};this.SC.push((()=>{const i=cM(t,s.Wd);return e(i),i.then(n,n)})),this.IC||(this.IC=this.EC())}))}qd(){return this.bC(!0)}gn(){return this.LC=void 0,this.bC(!1)}bC(t){const i=this.IC;return this.DC.qd(),t&&(this.DC=new Wr),Promise.resolve(i)}constructor(t){this.SC=[],this.IC=void 0,this.DC=new Wr,this.EC=()=>{if(0===this.SC.length)return this.LC?cM(this.LC,this.DC.Wd).then(this.kC,this.kC):this.kC();return this.SC.shift()().then(this.EC)},this.kC=()=>{if(0!==this.SC.length)return this.EC();this.IC=void 0},this.LC=t}};function cM(t,i){return new Promise((e=>e(t(i))))}var lM,dM=new Kr,fM=class extends Bo{xC(){this.MC&&(this._C("usable"),this.MC.Zb(void 0),this.MC=void 0)}OC(t){const i=new xi("Unknown CDM error",t.errorCode,t.systemCode);this.MC?(this.MC.Jb(i),this.MC=void 0):this.aC?(this.aC.Jb(i),this.aC=void 0):i.iL===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this._C("output-restricted"):1===i.eL?this._C("expired"):this._C("internal-error")}jC(t){0!==t.message.byteLength?(this.aC&&(this.aC.Zb(void 0),this.aC=void 0),this.Co(new pr(this,"license-request",Dm(this.lA,He(t.message).buffer),t.defaultURL||void 0))):this.aC&&(this.aC.Jb("Empty key message"),this.aC=void 0)}zC(t){this.BC||(this.BC=t,this.RC.Zb(t))}get Dx(){return this.UC}get Ix(){return this.QC}set Ix(t){this.QC=t}get yx(){return this.rC.tL}get Tx(){return NaN}async Ws(){this.throwIfClosed(),this.MC&&(this.MC.Jb(void 0),this.MC=void 0),this.dL=!0,this.rC.Zb(void 0)}async Lx(t,i){this.throwIfClosed(),this.aC=new ue,this.FC=Oi(i);(this.BC||await this.RC.tL).webkitGenerateKeyRequest(this.lA,this.FC),await this.aC.tL}async $n(t){return this.throwIfClosed(),!1}async bT(){this.throwIfClosed()}async Yn(t){if(this.throwIfClosed(),this.MC=new ue,f.OE||f.LE)return dM.NC((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.MC)return;(this.BC||await this.RC.tL).webkitAddKey(this.lA,Oi(t),this.FC,this.Ix),await this.MC.tL,f.LE&&await N(500)}throwIfClosed(){if(this.dL)throw new b("Already closing or closed.")}_C(t){this.UC.Xb(),this.UC.qb(Tm,t),this.Co(new uo(this))}async YC(){const t=this.BC||await this.RC.tL;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.lA,this.QC)}catch(t){}finally{await N(500)}}constructor(t){super(),this.lA=t,this.aC=void 0,this.MC=void 0,this.dL=!1,this.FC=void 0,this.BC=void 0,this.rC=new ue,this.QC="",this.RC=new ue,this.UC=new wr}},_M=class{bn(t){return this.BC=t,this.BC.addEventListener("webkitkeyadded",this.fC),this.BC.addEventListener("webkitkeyerror",this.GC),this.BC.addEventListener("webkitkeymessage",this.VC),this.WC.forEach(((i,e)=>i.zC(t))),this.HC.forEach((i=>i.zC(t))),Promise.resolve()}Rx(t){return t.removeEventListener("webkitkeyadded",this.fC),t.removeEventListener("webkitkeyerror",this.GC),t.removeEventListener("webkitkeymessage",this.VC),this.BC=void 0,Promise.resolve()}async tr(){let t=this.WC.entries(),i=t.next();for(;!i.done;)await i.value[1].YC(),i=t.next();this.WC.clear()}async Px(t,i,e){const s=new fM(this.cA);return this.BC&&s.zC(this.BC),this.HC.push(s),s}Bx(t){return Promise.resolve(!1)}qC(t){if(!t)return;let i=this.WC.get(t);return i||(i=this.HC.shift(),i?(i.Ix=t,this.WC.set(t,i),i):void 0)}constructor(t,i){this.cA=t,this.wd=i,this.BC=void 0,this.WC=ke(),this.HC=[],this.fC=t=>{const i=this.qC(t.sessionId);i&&i.xC()},this.GC=t=>{const i=this.qC(t.sessionId);i&&i.OC(t)},this.VC=t=>{const i=this.qC(t.sessionId);i&&i.jC(t)}}},gM=class{Qx(){return Promise.resolve(new _M(this.cA,this.XC))}Yx(){return this.XC}constructor(t,i){this.cA=t,this.XC=i}};function zu(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function wM(t){let i;for(;Po(i=t.firstChild);)t.removeChild(i)}function vM(t,i){t.insertBefore(i,t.firstChild)}function AM(t){const i=t.className;return"string"==typeof i?i:i&&"string"==typeof i.baseVal?i.baseVal:""}function mM(t,i){const e=t.className;"string"==typeof e?t.className=i:e&&"string"==typeof e.baseVal&&(e.baseVal=i)}function pM(t,i){return void 0!==t.classList?t.classList.contains(i):void 0!==t.className&&-1!==(" "+AM(t)+" ").indexOf(" "+i+" ")}function Pi(t,i){if(void 0!==t.classList)t.classList.add(i);else if(void 0!==t.className){const e=AM(t);-1===(" "+e+" ").indexOf(" "+i+" ")&&mM(t,(e+" "+i).trim())}}function yM(t,i){if(void 0!==t.classList)t.classList.remove(i);else if(void 0!==t.className){let e=" "+AM(t)+" ";const s=" "+i+" ";for(;-1!==e.indexOf(s);)e=e.replace(s," ");mM(t,e.trim())}}function MM(t,i,e){void 0===e&&(e=!pM(t,i)),e?Pi(t,i):yM(t,i)}function TM(t){t.stopPropagation()}function NM(t,i){f.LE&&f.xE<3?function(t,i){let e=i;switch(i){case"flex":e="-webkit-flex";break;case"inline-flex":e="-webkit-inline-flex"}t.display=e}(t,i):function(t,i){if(t.display=i,t.display!==i){let e=i;switch(i){case"flex":e="-ms-flexbox";break;case"inline-flex":e="-ms-inline-flexbox"}t.display=e}}(t,i)}function DM(t,i){const e=i.style;if(e)for(const i of w.keys(t)){const s=t[i];void 0!==s&&(e[i]=s)}}function gn(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.top="0",i.bottom="0",i.width="100%",i.height="100%"}function SM(t){const i=t.style;i.position="",i.left="",i.right="",i.top="",i.bottom="",i.width="",i.height=""}function IM(t){t.removeAttribute("title")}function EM(t){t.addEventListener("mouseover",(t=>{IM(t.target)}))}function bM(t){try{return Boolean(t)&&t===t.top}catch(t){return!1}}function LM(t){try{return Boolean(t)&&t.parent!==t}catch(t){return!1}}function Er(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function kM(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function xM(){return void 0!==h?h.createElement("video"):void 0}function Gh(){return lM||(lM=xM()),lM}var CM,Au,OM=class{Kx(t,i){try{return Promise.resolve(function(t,i){if(!OM.sC())throw new b("Unsupported key system "+t);for(let e of i){let i=Yy(jM,mm,t,e);if(i)return new gM(t,i)}throw new b("Unsupported key system configuration for "+t)}(t,i))}catch(t){return Promise.reject(t)}}static sC(){return Tr()}};function jM(t,i){const e=Gh();return!(!e||!e.canPlayType||""===e.canPlayType(i,t))}function PM(){return CM||(CM=function(){const t=[];hM.sC()&&t.push(new hM);Zy.sC()&&t.push(new Zy);tM.sC()&&t.push(new tM);OM.sC()&&t.push(new OM);return new uM(t)}()),CM}!function(t){t[t.ZC=0]="ZC",t[t.KC=1]="KC"}(Au||(Au={}));var Fr=class extends wn{constructor(t){super(Zt.Bw),this.currentTime=t}},Oe=class extends wn{constructor(t){super(Zt.Rw),this.currentTime=t}},zM=[Zt.H_,Zt.Rw,Co.jh,Co.Sh],at=class extends Bo{JC(t){!this.$C&&t>=Mw.Xn&&(this.$C=!0,this.Co(new B(this.tO.Mf,t)))}iO(t){!this.eO&&t>=Mw.cT&&(this.eO=!0,this.Co(new R(this.tO.Mf,t)))}sO(t){this.nO||(t>=Mw.lT&&this.rO<Mw.lT&&!this.tO.Ff||this.hO&&t>=Mw.lT)&&this.Co(new Oe(this.tO.Mf))}oO(t){!this.aO(t)||this.tO.Sf||this.tO.lt||this.Co(new Fr(this.tO.Mf))}uO(t){this.rO<=Mw.cT&&t>=Mw.lT&&this.Co(new zc(this.tO.Mf,t))}maybeDispatchCanPlayThroughEvent(t){t===Mw.dT&&this.Co(new F(this.tO.Mf,t))}aO(t){const i=!this.tO.Ff&&t<=Mw.cT,e=!this.cO&&this.rO<=Mw.cT;return i&&!e}get hO(){return!this.tO.Ff&&this.cO}tr(){this.rO=Mw.uT,this.cO=!0,this.eO=!1,this.$C=!1}gn(){this.Vo(),this.nO&&this.tO.fn(Zt.Rw,this.lO),this.tO.fn(Co.jh,this.dO),this.tO.fn(Co.Sh,this.fO),this.tO.fn(Zt.H_,this._O)}constructor(t,i=!1){super(),this.tO=t,this.nO=i,this.rO=Mw.uT,this.cO=!0,this.eO=!1,this.$C=!1,this._O=t=>{const i=this.tO.Jf;i!==this.rO&&this.Co(new _e(t.currentTime,i)),i===Mw.uT&&(this.eO=!1,this.$C=!1),this.JC(i),this.iO(i),this.uO(i),this.maybeDispatchCanPlayThroughEvent(i),this.sO(i),this.oO(i),this.rO=i},this.dO=()=>{this.oO(this.rO),this.sO(this.rO),this.cO=this.tO.Ff},this.fO=()=>{this.cO=this.tO.Ff},this.lO=t=>{this.Co(new Oe(t.currentTime))},this.tO.yn(Zt.H_,this._O),this.tO.yn(Co.jh,this.dO),this.tO.yn(Co.Sh,this.fO),this.nO&&this.tO.yn(Zt.Rw,this.lO)}},BM=class extends Bo{get Mf(){return this.tO.Mf}get Sf(){return this.tO.Sf}get lt(){return this.tO.lt}get Ff(){return this.tO.Ff}get Jf(){return this.tO.Jf}Ud(){this.Vo(),this.tO.fn(zM,this.Ds)}constructor(t){super(),this.tO=t,this.tO.yn(zM,this.Ds)}},Pr=class{gO(){return this.wO}vO(t){this.wO=t}get AO(){return this.EI}get mO(){return!1}get pO(){const t=this.yO.certificate;if(t)return Qs(t)?Bn(t):Oi(t)}MO(){return this.yO.licenseAcquisitionURL||this.gO()}get TO(){return!1}DO(t){return Promise.resolve()}SO(t,i){return Promise.resolve(void 0)}get pI(){return Boolean(this.yO.useCredentials)}async IO(t,i,e,s){const n=this.EO(t,i,e,s);if(""===n.zu)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.AO.LS(n);return await t.bO(i)}catch(t){return yo(t),void await this.LO(t,n.zu,s)}}EO(t,i,e,s){const n=this.kO().XS(),r=this.pI,h={zu:this.xO(),wI:i,_I:n,fI:t,pI:r,gI:yt.POST,jS:0,Wd:s,Rg:sa.iI,AI:e};return new ss(h)}CO(t,i){return Promise.resolve(t)}OO(t,i,e,s){return Promise.resolve(t)}kO(){return new Z(this.yO.headers||{})}async LO(t,i,e){throw new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}xO(t,e){let s=e;const n=this.yO.queryParameters;if(!s){const t=this.MO();if(!t)return"";s=t}if(n||t){const e=i.Dh(s);t&&Be(e,t),n&&Be(e,n),s=e.href}return s}jO(t,i){return RM(t)}PO(t){return new j(t)}async zO(t,i,e){const s=await this.jO(t,e),n=await this.IO(s,this.BO,i,e);return this.PO(n)}gn(){}constructor(t,i,e,s,n){this.wO=void 0,this.cA=t,this.RO=i,this.UO=e,this.EI=s,this.BO=n,this.yO=this.QO(i)}};function RM(t){return Promise.resolve(He(t).buffer)}var bl,Yo=class extends Pr{QO(t){return t.widevine||{}}async FO(t,i){return this.pO?this.pO:this.YO(new j(t),i)}YO(t,i){return super.zO(t,Kt.rI,i)}constructor(t,i,e,s){super(qn,t,i,e,s)}};!function(t){t.Jv="Widevine",t.GO="PlayreadyV2",t.VO="PlayreadyV3",t.Kv="PlayreadyV2",t.$v="Fairplay"}(bl||(bl={}));var UM={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function QM(t,e){var s,n,r,h;const o=UM[e],a=t.accountName;return{CustomerName:t.customerName,AccountName:a,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(s=i.WO)?void 0:s.Ys,OSVersion:null==(n=i.WO)?void 0:n.HO,DRMProvider:o.DRMProvider,DRMVersion:o.DRMVersion,DRMType:o.DRMType,DeviceVendor:null==(r=i.WO)?void 0:r.qO,DeviceModel:null==(h=i.WO)?void 0:h.XO}}}function FM(t,i){if(!t.accountName)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, accountName is not set.");if(!t.customerName)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, customerName is not set.");if(!t.portalId)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration, portalId is not set.");throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+i+" DRM configuration.")}function YM(t,i,e){let s;if(Rg(t))s={AuthToken:t.authToken,Payload:i};else{if(!Ug(t))throw FM(t,e);s={LatensRegistration:QM(t,e),Payload:i}}return Fu(JSON.stringify(s))}async function GM(t,i,e){const s=t.xS;if(!s)throw new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,i);const n=s;let r,h;try{r=await n.ZO(e),h=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(r)}catch(t){h=""}throw new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,n.LS.zu,n.OS,n.KO,h)}var VM=class extends Yo{static JO(){return i.Ys.$O?"required":"optional"}LO(t,i,e){return GM(t,i,e)}DO(t){return this.tj?Ys(this.tj.tL,t):(this.tj=new ue,Promise.resolve())}async jO(t,i){const e=this.RO;if(!e)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return YM(e,pt(t),bl.Jv)}PO(t){let i;if(!t.license)throw new To(Ui.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return i=Bn(t.license),i}ij(t){return Promise.resolve(new j(t))}async FO(t,i){this.ej();const e=await this.jO(t,i),s=await this.IO(e,oe.WS,Kt.hI,i);return await this.ij(s)}async YO(t,i){const e=await super.YO(t,i);return this.ej(),e}ej(){this.tj||(this.tj=new ue),this.tj.Zb()}gn(){this.tj&&this.tj.qd(),super.gn()}constructor(t,i,e){super(t,i,e,oe.HS),this.tj=void 0}},WM=class extends Yo{get sj(){if(Qg(this.RO))return this.RO.token}async jO(t,i){const e=await RM(t),s=this.UO,n=Ng(new j(e)),r=this.sj;if(!r)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:r,drm_info:n,kid:s})}constructor(t,i,e){super(t,i,e,oe.WS),this.vO("https://widevine-proxy.drm.technology/proxy")}};function HM(t,i){let e=i||{};return t.ticket&&t.sessionId&&(e=Yt({},e,{SessionId:t.sessionId,Ticket:t.ticket})),Yt({},e,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}var qM=class extends Yo{xO(t,i){let e=t;return zg(this.RO)&&(e=HM(this.RO,e)),super.xO(e,i)}constructor(t,i,e){super(t,i,e,oe.WS),this.vO("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}},XM="Conax-Custom-Data";function ZM(t,i,e){const s=t&&Pg(t)&&t;if(s&&!e.has(XM)){const t=r_(s)?s.token:void 0,n=r_(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:i+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});e.set(XM,r)}return e}var KM=class extends Yo{kO(){const t=super.kO();return ZM(this.RO,"Widevine",t)}constructor(t,i,e){super(t,i,e,oe.WS),this.vO("https://connect.conax.com:8094/license")}};function JM(t){const i=Vn(new j(t));return Bn(JSON.parse(i).license)}function $M(t){return"string"==typeof t.token?t.token:Fu(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function tT(t,i,e){let s;return s=e.token?"x-dt-auth-token":"dt-custom-data",t.set(s,i),t}var iT=class extends Yo{get sj(){return $M(this.RO)}PO(t){return JM(t)}kO(){return tT(super.kO(),this.sj,this.RO)}constructor(t,i,e){super(t,i,e,oe.WS),this.vO("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}},eT=class extends Yo{kO(){const t=super.kO(),i=this.RO.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e){super(t,i,e,oe.WS)}};async function sT(t,i,e,s){if(!Fg(t))throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const n=new Z;n.append("Cache-Control","no-cache"),n.append("Content-Type","application/json");const r=t.sessionId;r&&n.append("XSSESSION",r);const h=t.streamId;let o;o=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const a={drmType:i,licenseType:o,streamId:h},u={zu:t.ticketAcquisitionURL,wI:oe.HS,_I:n,gI:yt.POST,fI:JSON.stringify(a),Wd:s},c=await e.LS(u);return await c.ZO()}var nT=class extends Yo{kO(){const t=super.kO();return t.set("Content-Type","application/json"),t}async jO(t,i){const e=C_(t.buffer),s=this.RO,n=await sT(s,"widevine_modular",this.AO,i);this.vO(n.licenseServerUrl);const r=Ju(JSON.stringify({payload:e,ticket:n.ticket}));return super.jO(r,i)}PO(t){return Bn(t.license)}constructor(t,i,e){super(t,i,e,oe.HS)}},rT=class extends Yo{kO(){if(!Yg(this.RO))throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.kO();return t.set("X-AxDRM-Message",this.RO.token),t}constructor(t,i,e){super(t,i,e,oe.WS)}};function hT(t){const i=new j(2*t.length);for(let e=0;e<t.length;e+=1)i[2*e]=t.charCodeAt(e),i[2*e+1]=0;return i}var ca=class extends Pr{QO(t){return t.playready||{}}kO(){const t=new Z(this.nj);return t.KS(super.kO()),t}rj(t){return t.length>=1&&t[0].MS.length>0}SO(t){const i=this.RO.playready.customData;if(i){const t=hT(i),e=hT('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+pt(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{uC:e}})}return super.SO(t)}async jO(t,i){const e=await RM(t);return this.hj(e)}async hj(t){var e,s;let n=null;const r=Ru(new DataView(t),new _s,!0);let h;try{h=i.AS(r)}catch(t){return n}const o=null==(e=h.gS("PlayReadyKeyMessage")[0])?void 0:e.gS("LicenseAcquisition")[0];var a;const u=null!=(a=null==o?void 0:o.gS("Challenge"))?a:[];this.rj(u)&&(n=x_(u[0].aj));const c=new Z;var l;const d=null!=(l=null==o||null==(s=o.gS("HttpHeaders")[0])?void 0:s.gS("HttpHeader"))?l:[];for(const t of d){const i=t.gS("name")[0].aj,e=t.gS("value")[0].aj;c.append(i,e)}return this.nj=c,n}FO(t,i){return Promise.resolve(t)}YO(t,i){return super.zO(t,Kt.oI,i)}constructor(t,i,e){super(qh,t,i,e,oe.WS),this.nj=void 0}},oT=class t{static uj(t){return"3"===t.version?bl.VO:bl.GO}cj(){const t={};if(this.Jk===bl.VO){const i={LatensRegistration:QM(this.lj,bl.VO)};t["X-TITANIUM-DRM-CDATA"]=Fu(JSON.stringify(i))}return t}get dj(){return this.Jk}get eC(){return this.Jk===bl.GO}constructor(i){this.lj=i,this.Jk=t.uj(i)}};var aT=class extends ca{SO(t){const i=this.RO;if(!this.RO)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(Ug(i)){const t={};return t.playready={uC:uT(i,this._j.dj)},Promise.resolve(t)}return Promise.reject(FM(i,bl.Kv))}kO(){const t=new Z(this._j.cj());return t.KS(super.kO()),t}async LO(t,e,s){const n=t.xS;if(!n)throw new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e);let r,h;try{const t=await n.gj(s),e=Vn(new j(t)),a=i.AS(e);if(a){const t=function(t,i){return function(t,i){const e=t.m.slice(),s=[];for(;e.length>0;){const t=e.shift();i(t)?s.push(t):e.push(...t.m)}return s}(t,(t=>t.wj===i))}(a,"CustomData");var o;if(t.length>0)r=JSON.parse(t[0].aj),h=null==(o=r.DrmErr)?void 0:o.desc}}catch(t){}throw new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e,n.OS,n.KO,h)}rj(t){if(1!==t.length)throw new To(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,i,e){super(t,i,e),this._j=new oT(this.RO)}};function uT(t,i){const e=QM(t,i),s=e.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+Fu('<LatensRegistration formatversion="'+s+'"><AccountName>'+e.AccountName+"</AccountName><CustomerName>"+e.CustomerName+"</CustomerName><PortalID>"+e.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+e.DeviceInfo.DeviceType+"</DeviceType><OSType>"+e.DeviceInfo.OSType+"</OSType><OSVersion>"+e.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+e.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+e.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+e.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+e.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+e.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=mg(n,!0);return mg('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+pt(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}var cT,lT=class extends ca{get sj(){if(Qg(this.RO))return this.RO.token}rj(t){if(1!==t.length)throw new To(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}xO(t,i){const e=Yt({},t||{},{token:this.sj});return super.xO(e,i)}constructor(t,i,e){super(t,i,e),this.vO("https://playready-license.drm.technology/rightsmanager.asmx")}},dT=class extends ca{xO(t,i){let e=t;return zg(this.RO)&&(e=HM(this.RO,e)),super.xO(e,i)}constructor(t,i,e){super(t,i,e),this.vO("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}},fT=class extends ca{kO(){const t=super.kO();return ZM(this.RO,"PlayReady",t)}constructor(t,i,e){super(t,i,e),this.vO("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}},_T=class extends ca{get sj(){return $M(this.RO)}PO(t){const i=function(t){const i=Vn(new j(t));return D(i,"<?xml")?0:1}(t);return 1===i?JM(t):super.PO(new j(t))}kO(){return tT(super.kO(),this.sj,this.RO)}constructor(t,i,e){super(t,i,e),this.vO("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};!function(t){t[t.vj=0]="vj",t[t.ZO=1]="ZO"}(cT||(cT={}));var Fs,gT=class extends ca{kO(){const t=super.kO();return this.Aj&&t.set("Ticket",this.Aj),t.set("Content-Type","text/xml"),t}async jO(t,i){const e=this.RO,s=await sT(e,"playready",this.AO,i);return this.vO(s.licenseServerUrl),this.Aj=s.ticket,super.jO(t,i)}constructor(t,i,e){super(t,i,e)}},wT=class extends ca{kO(){if(!Yg(this.RO))throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.kO();return t.set("X-AxDRM-Message",this.RO.token),t}};!function(t){t.HS="application/json",t.mj="application/x-www-form-urlencoded",t.pj="application/octet-stream",t.Ru="text/plain;charset=UTF-8"}(Fs||(Fs={}));var Sl=class extends Pr{get TO(){return!0}yj(){return this.yO.certificateURL||this.Mj}Tj(t){this.Mj=t}jO(t){return Promise.resolve(this.Nj(t,this.Dj))}Nj(t,i){return"spc="+encodeURIComponent(pt(t))+"&assetId="+encodeURIComponent(i)}get Sj(){return Fs.mj}QO(t){return t.fairplay||{}}Ij(t){const i=t.indexOf("?");if(i>=0)return Promise.resolve(t.substr(i+1));{const i=t.split("skd://").pop();if(i){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(i))return Promise.resolve(i)}const e=t.split("/");return Promise.resolve(e[e.length-1])}}async SO(t){var i;const e=null!=(i=this.Ej)?i:_n(new j(t)),s=await this.Ij(e);this.Dj=s;const n={};return n.fairplay={AC:s},n}kO(){const t=super.kO();return t.set("Content-Type",this.Sj),t}async FO(t,i){return this.pO?this.pO:await this.bj(i)}YO(t,i){return super.zO(t,Kt.sI,i)}Lj(t){const i=this.yj(),e=this.kO(),s={zu:i,wI:oe.WS,_I:e,gI:yt.GET,pI:!1,fI:null,jS:0,Wd:t,Rg:sa.iI,AI:Kt.nI};return new ss(s)}async bj(t){const i=this.Lj(t),e=await this.AO.LS(i),s=await e.gj();return new j(s)}PO(t){let i;if("string"==typeof t){let e=t.trim();"<ckc>"===e.substr(0,5)&&"</ckc>"===e.substr(-6)&&(e=e.slice(5,-6)),i=Bn(e)}else i=new j(t);return i}xO(t,i){let e=super.xO(t,i);return D(e,"skd:")&&(e=e.substr(4)),e}constructor(t,i,e,s,n){super(t.cA,i,e,s,n),this.Dj="",this.Mj=void 0,this.Ej=t.xj}};function vT(t){return!S(t.getTime())}function _r(){return Date.now()||(new Date).getTime()}function AT(t){return t/1e3}function qi(t){return 1e3*t}var fl=1/6,mT=Ce.fromNumber(jh);function vi(t,i){if(0===i)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(mT))return t.toNumber()/i;const e=t.divide(i),s=t.subtract(e.multiply(i));return e.toNumber()+s.toNumber()/i}var pT=class extends Sl{get Sj(){return Fs.pj}Ij(t){let i=t.split("://",1);return"skd"!==i[0].slice(-3).toLowerCase()?Promise.resolve(""):(i=t.split(";",2),i.length>1?Promise.resolve(i[1]):Promise.resolve(super.Ij(t)))}async jO(t){return t}PO(t){return new j(t)}xO(t,i){const e=t||{};return e.p1=_r(),super.xO(e,i)}constructor(t,i,e,s){super(t,i,e,s,oe.WS)}},yT=class extends Sl{get Sj(){return Fs.HS}get sj(){if(!Qg(this.RO))throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.RO.token}Nj(t,i){const e={token:this.sj,contentId:i,payload:pt(t)};return JSON.stringify(e)}PO(t){return new j(t)}kO(){const t=super.kO();return t.set("x-vudrm-token",this.sj),t}constructor(t,i,e,s){super(t,i,e,s,oe.WS),this.vO("https://fairplay-license.drm.technology/license"),this.Tj("https://fairplay-license.drm.technology/certificate")}},MT="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",TT="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",NT=class extends Sl{PO(t){const i=function(t){let i;try{i=JSON.parse(t).ckc}catch(t){throw new To(Ui.CONTENT_PROTECTION_LICENSE_INVALID,MT)}if(!i)throw new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,TT);return i}(Vn(new DataView(t)));return super.PO(i)}constructor(t,i,e,s){super(t,i,e,s,oe.WS)}};var DT=class extends Sl{get Sj(){return Fs.HS}async jO(t){const i=this.RO;if(!i)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return YM(i,pt(t),bl.$v)}PO(t){try{let i;if(Qs(t)){const e=t.trim();i=JSON.parse(e)}else i=t;if(i.license){const t=x_(i.license);return new j(t)}throw new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new To(Ui.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}LO(t,i,e){return GM(t,i,e)}constructor(t,i,e,s){super(t,i,e,s,oe.HS)}},ST=class extends Sl{yj(){const t=super.yj();if(!t)return t;const e=i.Dh(t),s=this.RO;return zg(s)&&Be(e,{accountId:s.accountId,applicationId:s.applicationId||""}),e.href}Ij(t){return zg(this.RO)?Promise.resolve(this.RO.contentId):super.Ij(t)}async jO(t){return t}PO(t){return new j(t)}get Sj(){return Fs.pj}xO(t,i){let e=t;return zg(this.RO)&&(e=function(t,i){return Yt({},HM(t,i),{KeyId:t.keyId})}(this.RO,e)),super.xO(e,i)}constructor(t,i,e,s){super(t,i,e,s,oe.WS),this.vO("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.Tj("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}},IT=class extends Sl{kO(){const t=super.kO();return ZM(this.RO,"FairPlay",t)}async bj(t){const i={zu:this.yj(),wI:oe.WS,_I:{},gI:yt.GET,pI:!1,fI:null,jS:0,Wd:t,Rg:sa.iI,AI:Kt.nI},e=await this.AO.LS(i),s=await e.gj();return new j(s)}async jO(t){return t}Ij(t){const i=t.indexOf("?");if(0===t.indexOf("skd://")){let e;return e=i>=0?t.substring(6,i):t.substring(6),Promise.resolve(function(t){return Vn(Bn(t))}(e))}return Promise.resolve("unknown")}PO(t){try{const i=JSON.parse(t);return new j(x_(i.CkcMessage))}catch(t){throw new g("CFLRW-66")}}constructor(t,i,e,s){if(super(t,i,e,s,oe.Ru),!Pg(i))throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.vO("https://connect.conax.com:8097/license")}},ET=class extends Sl{Ij(t){return D(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new To(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}Nj(t,i){return"spc="+pt(t)+"&assetId="+i}constructor(t,i,e,s){super(t,i,e,s,oe.Ru),this.vO(bg[be.$v])}},bT=class extends Sl{get sj(){return $M(this.RO)}Nj(t,i){const e="spc="+encodeURIComponent(pt(t))+"&"+encodeURI(i);return"persistent"===this.yO.licenseType?e+"&offline=true":e}kO(){return tT(super.kO(),this.sj,this.RO)}constructor(t,i,e,s){super(t,i,e,s,oe.Ru),this.vO("https://lic.drmtoday.com/license-server-fairplay/")}},LT=class extends Sl{Ij(t){let e=t;return D(e,"skd:")&&(e="http:"+e.substring(4)),D(e,"http:")||D(e,"https:")?Promise.resolve(i.Dh(e).hostname):Promise.reject(new g("Could not parse ExpressPlay FairPlay content ID."))}async jO(t){return t}PO(t){return new j(t)}get Sj(){return Fs.pj}constructor(t,i,e,s){super(t,i,e,s,oe.WS)}},kT=class extends Sl{kO(){const t=super.kO(),i=this.RO.token;return t.set("Authorization","Bearer "+i),t}constructor(t,i,e,s){super(t,i,e,s,oe.Ru)}},xT=class extends Sl{async bj(t){const i=this.yj(),e=this.kO(),s={zu:i,wI:oe.HS,_I:e,gI:yt.POST,Wd:t,Rg:sa.iI,AI:Kt.nI},n=await this.AO.LS(s),r=await n.ZO();return new j(Bn(r.certificate))}get Sj(){return Fs.HS}async YO(t,i,e){void 0===e&&(e=oe.Ru);const s=pt(t),n=this.RO,r=await sT(n,"fairplay",this.AO,i),h=Ju(JSON.stringify({spc:s,ticket:r.ticket})),o={zu:this.MO(),wI:oe.HS,_I:this.kO(),gI:yt.POST,fI:h,jS:0,Wd:i,Rg:sa.iI,AI:Kt.sI},a=await this.AO.LS(o);return Bn((await a.ZO()).licence)}constructor(t,i,e,s){if(super(t,i,e,s,oe.HS),!Fg(i))throw new g("Invalid Xstream DRM configuration")}},CT=class extends Sl{Nj(t,i){return pt(t)}PO(t){if(0===t.length)throw new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.PO(t)}kO(){const t=super.kO();return t.set("Content-Type","text/plain"),t}constructor(t,i,e,s){super(t,i,e,s,oe.Ru)}},OT=class extends Sl{get Sj(){return Fs.HS}Nj(t,i){return t}PO(t){return new j(t)}kO(){if(!Yg(this.RO))throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.kO();return t.set("X-AxDRM-Message",this.RO.token),t}constructor(t,i,e,s){super(t,i,e,s,oe.WS)}},jT=class extends Sl{get Sj(){return Fs.Ru}Nj(t,i){const e={spc:pt(t)};return JSON.stringify(e)}Ij(t){const e=i.Dh(t);return this.Cj=t,e.searchParams.has("b")?Promise.resolve(e.searchParams.get("b")):Promise.reject(new To(Ui.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}xO(t,i){let e=this.MO();return!e&&this.Cj&&(e=this.Cj),e&&(e=e.replace("skd://","https://")),super.xO(t,i||e)}PO(t){try{let i;if(i=Qs(t)?JSON.parse(t.trim()):t,i.ckc)return Bn(i.ckc)}catch(t){throw new To(Ui.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,i,e,s){super(t,i,e,s,oe.HS),this.Cj=void 0}},Gi=class{Oj(t){return this.jj(t)}Pj(t,i){throw new b(i+" must be "+this.zj+". (Received: "+t+")")}constructor(t,i){this.jj=t,this.zj=i}},sh=(new Gi((function(t){return!0}),"any"),new Gi(ci,"a number")),Ps=new Gi(Qs,"a string"),PT=new Gi(id,"a boolean"),ta=(new Gi(ed,"a date"),new Gi($l,"undefined")),zh=new Gi(Ut,"an object"),zT=new Gi((function(t){return null===t}),"null");new Gi((function(t){return null==t}),"null or undefined");function BT(t,i){throw new b(i+" has an incorrect type")}var RT=class{Oj(t){if(!Ut(t))return!1;for(const i of w.keys(this.Bj)){if(!this.Bj[i].Oj(t[i]))return!1}return!0}Pj(t,i){if(!Ut(t))throw new b(i+" must be an object.");for(const e of w.keys(this.Bj)){const s=this.Bj[e];if(!s.Oj(t[e]))return s.Pj(t[e],i+"."+String(e))}throw new b}constructor(t){this.Bj=t}};function ro(t){return new RT(t)}function UT(t){return w.keys(t).map((i=>t[i]))}var QT=class{Oj(t){return qo(this.Rj,t)}Pj(t,i){return BT(0,i)}constructor(t){this.Rj=t}};function vt(t){return new QT(t)}var FT=class{Oj(t){return this.Uj.some((i=>i.Oj(t)))}Pj(t,i){return BT(0,i)}constructor(t){this.Uj=t}};function Ae(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];return new FT(i)}var YT=class{Oj(t){return fh(t)&&t.every((t=>this.Qj.Oj(t)))}Pj(t,i){if(!fh(t))throw new b(i+" must be an array.");for(let e=0;e<t.length;e++){const s=t[e];this.Qj.Oj(s)||this.Qj.Pj(s,i+"["+e+"]")}return BT(0,i)}constructor(t){this.Qj=t}};function Zr(t){return new YT(t)}var GT=class{Oj(t){return Ut(t)&&w.keys(t).every((i=>this.Qj.Oj(t[i])))}Pj(t,i){if(!Ut(t))throw new b(i+" must be an object.");for(const e of w.keys(t))if(!this.Qj.Oj(t[e]))return this.Qj.Pj(t[e],i+"."+e);return BT(0,i)}constructor(t){this.Qj=t}};function VT(t){return new GT(t)}var WT=class{Oj(t){return this.Qj().Oj(t)}Pj(t,i){return this.Qj().Pj(t,i)}constructor(t){this.Qj=Oa(t)}};var HT=ro({responseCode:sh,isException:PT,description:Ps,title:Ps,correlationId:Ps});async function qT(t,i,e,s,n){const r=function(t,i,e,s){const n={token:i.token,account:i.accountId,form:"json"},r=decodeURIComponent(Of(e,n)),h=new Z({});h.append("Content-Type","application/json");const o=pt(t),a={getFairplayLicense:{releasePid:i.releasePid,spcMessage:o}};return{zu:r,wI:oe.Ru,_I:h,gI:yt.POST,fI:JSON.stringify(a),Wd:s,Rg:sa.iI,AI:Kt.sI}}(t,i,e,n);return await async function(t,i){const e=await i.LS(t),s=await e.ZO();if(HT.Oj(s))throw new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.zu,s.responseCode);return Bn(s.getFairplayLicenseResponse.ckcResponse)}(r,s)}var XT=class extends Sl{Ij(t){const i=t.replace("FairPlay",this.Fj.releasePid);return super.Ij(i)}async YO(t,i){return await qT(t,this.Fj,this.MO(),this.AO,i)}constructor(t,i,e,s){super(t,i,e,s,oe.WS),this.Fj=i}},ZT=class extends Pr{QO(t){return t.clearkey||{}}async IO(t,i,e,s){const n=this.yO;if(this.MO())return super.IO(t,this.BO,e,s);if(n.keys&&n.keys.length){const t={keys:n.keys.map((t=>{let i=t;return i||(i={}),{kty:"oct",kid:i.id,k:i.value}}))};return Lu(JSON.stringify(t)).buffer}throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}FO(t,i){return Promise.resolve(new j(0))}async YO(t,i){const e=await super.zO(t,Kt.aI,i),s=JSON.parse(_n(e));if(s.keys)for(const t of s.keys)t.k&&(t.k=E_(t.k)),t.kid&&(t.kid=E_(t.kid));return Lu(JSON.stringify(s))}constructor(t,i,e){super(Uh,t,i,e,oe.WS)}},KT=class extends Yo{},JT={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function $T(t,i,e){const s=hN(i),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(i);const r=await Ys(Promise.resolve(n.call(t,s)),e);return Mg(r)?Oi(r):rN(Yt({},JT,r))}async function tN(t,i,e,s,n){const r=t.onCertificateResponse,h=nN(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);return Oi(await Ys(Promise.resolve(r.call(t,h)),n))}async function iN(t,i,e,s){const n=await async function(t,i,e,s){const n=null==t?void 0:t.onLicenseRequest,r=sN(i,e);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const h=await Ys(Promise.resolve(n.call(t,r)),s);if(Mg(h))return Oi(h).buffer;return Yt({fairplaySkdUrl:void 0},JT,h)}(t,i,e,s);return n instanceof ArrayBuffer?n:rN(n)}async function eN(t,i,e,s,n,r){const h=sN(e,n),o=await async function(t,i,e,s,n){const r=null==t?void 0:t.onLicenseResponse,h=nN(i,e,s);if(!r||"function"!=typeof r)return Promise.resolve(i);0;const o=await Ys(Promise.resolve(r.call(t,h)),n);return Oi(o)}(t,new j(i),h,s,r);return Oi(o)}function sN(t,i){return Yt({},hN(t),{fairplaySkdUrl:i})}function nN(t,i,e){return{url:e.LI,status:e.OS,statusText:e.KO,headers:e._I.XS(),body:t,request:i}}function rN(t){return new ss({zu:t.url,gI:t.method,_I:t.headers,fI:t.body,pI:t.useCredentials})}function hN(t){var i;return{url:t.zu,body:null!=(i=oN(t.fI))?i:null,headers:t._I.XS(),method:t.gI,useCredentials:t.pI}}function oN(t){if(t)return"string"==typeof t?Lu(t):t instanceof ArrayBuffer?new j(t):Uu(t)?ks(t):void 0}var aN=class extends ca{FO(t,i){return Promise.resolve(t)}async YO(t,i){const e=await this.hj(He(t).buffer),s=this.EO(e,oe.WS,Kt.oI,i),n=await iN(this.Yj,s,void 0,i);if(n instanceof ArrayBuffer)return new j(n);if(""===n.zu)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.AO.LS(n),e=await t.gj(i);return await eN(this.Yj,e,s,t,void 0,i)}catch(t){throw yo(t),new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,i,e,s){super(t,i,e),this.Yj=s}},uN=class extends KT{async FO(t,i){if(this.pO)return this.pO;const e=this.EO(t,oe.WS,Kt.hI,i),s=await $T(this.Yj,e,i);if(s instanceof j)return s;if(""===s.zu)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let n,r;try{n=await this.AO.LS(s),r=await n.gj(i)}catch(t){throw yo(t),new To(Ui.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const h=sN(e,void 0);return await tN(this.Yj,new j(r),h,n,i)}async YO(t,i){const e=this.EO(t,oe.WS,Kt.rI,i),s=await iN(this.Yj,e,void 0,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.zu)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.AO.LS(s),n=await t.gj(i);return await eN(this.Yj,n,e,t,void 0,i)}catch(t){throw yo(t),new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,i,e,s){super(t,i,e,oe.WS),this.Yj=s}},cN=class extends Sl{async FO(t,i){if(this.pO)return this.pO;const e=this.Lj(i),s=await $T(this.Yj,e,i);if(Uu(s))return s;try{const t=await this.AO.LS(s),n=await t.gj(),r=sN(e,void 0);return await tN(this.Yj,new j(n),r,t,i)}catch(t){throw yo(t),new To(Ui.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async YO(t,i){const e=this.EO(t,oe.WS,Kt.sI,i),s=await iN(this.Yj,e,this.Gj,i);if(s instanceof ArrayBuffer)return new j(s);if(""===s.zu)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.AO.LS(s),n=await t.gj(i);return await eN(this.Yj,n,e,t,this.Gj,i)}catch(t){throw yo(t),new To(Ui.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}Ij(t){var i;return this.Gj=t,(null==(i=this.Yj)?void 0:i.extractFairplayContentId)?Promise.resolve(this.Yj.extractFairplayContentId(t)):super.Ij(t)}constructor(t,i,e,s,n){super(t,i,e,s,oe.WS),this.Yj=n}},lN=class{Vj(t,i,e,s){switch(t.cA.Rg){case be.Jv:return this.Wj(i,e,s);case be.Kv:return this.Hj(i,e,s);case be.$v:return this.qj(t,i,e,s);case be.tA:default:return this.Xj(i,e,s)}}Wj(t,i,e){const s=function(t){return t.integration===i_&&Qs(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&Nu.mA.wA(s,ti)){const n=Nu.mA.AA(s,ti,t);return new uN(t,i,e,n)}switch(s){case Vf:return new VM(t,i,e);case fr:return new WM(t,i,e);case hr:return new qM(t,i,e);case Wf:return new KM(t,i,e);case or:return new iT(t,i,e);case sn:return new eT(t,i,e);case lr:return new nT(t,i,e);case Jf:return new rT(t,i,e);default:return new KT(t,i,e,oe.WS)}}Hj(t,i,e){const s=t.integration;if(s&&Nu.mA.wA(s,Mn)){const n=Nu.mA.AA(s,Mn,t);return new aN(t,i,e,n)}switch(s){case Vf:return new aT(t,i,e);case fr:return new lT(t,i,e);case hr:return new dT(t,i,e);case Wf:return new fT(t,i,e);case or:return new _T(t,i,e);case lr:return new gT(t,i,e);case Jf:return new wT(t,i,e);default:return new ca(t,i,e)}}qj(t,i,e,s){const n=i.integration;if(n&&Nu.mA.wA(n,uu)){const r=Nu.mA.AA(n,uu,i);return new cN(t,i,e,s,r)}switch(n){case Hf:return new pT(t,i,e,s);case fr:return new yT(t,i,e,s);case qf:return new NT(t,i,e,s);case Vf:return new DT(t,i,e,s);case hr:return new ST(t,i,e,s);case Wf:return new IT(t,i,e,s);case Xf:return new ET(t,i,e,s);case or:return new bT(t,i,e,s);case Zf:return new LT(t,i,e,s);case sn:return new kT(t,i,e,s);case lr:return new xT(t,i,e,s);case Kf:return new CT(t,i,e,s);case Jf:return new OT(t,i,e,s);case $f:return new jT(t,i,e,s);case t_:return new XT(t,i,e,s);default:return new Sl(t,i,e,s,oe.Ru)}}Xj(t,i,e){return new ZT(t,i,e)}Zj(t){return t.Rg===be.Kv||t.Rg===be.Jv||t.Rg===be.$v||t.Rg===be.tA}eC(t,i){var e;if(t.Rg!==be.Kv)return!1;if(Po(null==(e=i.playready)?void 0:e.customData))return!0;const s=i.integration;return(!s||!Nu.mA.wA(s,uu))&&(s===Vf&&new oT(i).eC)}JO(t,i){if(t.Rg!==be.Jv)return;const e=i.integration;return e&&Nu.mA.wA(e,uu)?void 0:e===Vf?VM.JO():void 0}};var Ca,dN="default",fN="theoplayer-stored-network-info-v2",_N=25e5,va=class{Kj(t){var e;const s=null==(e=i.Jj)?void 0:e.Wb(t);if(void 0===s)return;const n=JSON.parse(s);if(void 0!==n&&void 0!==n[this.$j]){if(!this.tP(n))return n[this.$j].availableBandwidth;var r;null==(r=i.Jj)||r.iP(t,JSON.stringify({}))}}eP(){const t=this.Kj(fN);if(void 0!==t)return t;const i=this.Kj("theoplayer-stored-network-info");return i?8*i:void 0}tP(t){const i=t[this.$j].storedTimestamp;return!!i&&_r()-i>36e5}sP(t){this.nP=t,this.rP()}hP(){var t;return null!=this.nP||(this.nP=null!=(t=this.eP())?t:_N),this.nP}constructor(){this.$j=dN,this.nP=void 0,this.rP=ze((()=>{var t;const e={[this.$j]:{availableBandwidth:this.nP,storedTimestamp:_r()}};null==(t=i.Jj)||t.iP(fN,JSON.stringify(e))}),1e4)}};va.Lb=new va,function(t){t[t.oP=0]="oP",t[t.aP=1]="aP",t[t.uP=2]="uP",t[t.cP=3]="cP",t[t.lP=4]="lP",t[t.Wv=5]="Wv",t[t.dP=6]="dP",t[t.fP=7]="fP",t[t.Zv=8]="Zv",t[t._P=9]="_P",t[t.gP=10]="gP"}(Ca||(Ca={}));var ao=class{get wP(){return 0}get vP(){return 0}AP(t){}},jr=class{mP(t){this.lj=t}JO(t){const i=this.lj;if(void 0!==i)return this.pP.JO(t,i)}eC(t){const i=this.lj;return void 0!==i&&this.pP.eC(t,i)}yP(t){const i={cA:t.cA,MP:t.MP||[],TP:t.TP,xj:t.xj},e=this.pP.Vj(i,this.lj||{},t.UO,this.EI);return i.TP&&e.vO(i.TP),new gN(e)}constructor(t,i=new lN){this.lj=void 0,this.EI=t,this.pP=i}},gN=class{DO(t){return this.NP.DO(t)}SO(t,i,e){return this.NP.SO(i,e)}TO(){return this.NP.TO||void 0!==this.NP.pO}FO(t,i){return this.NP.FO(t,i)}YO(t,i,e){return i&&this.NP.vO(i),this.NP.YO(t,e)}Ud(){this.NP.gn()}constructor(t){this.NP=t}},ms=class extends Pn{DP(t){this.SP.push(t);for(const i of t.og)this.tt(i);this.IP(t)}EP(t){Qr(this.SP,t),this.bP(t);for(const i of t.og)this.LP(i)||this.it(i)}LP(t){for(const i of this.SP)if(i.dg(t))return!0;return!1}IP(t){t.yn(Ud.L_,this.kP),t.yn(Ud.x_,this.xP)}bP(t){t.fn(Ud.L_,this.kP),t.fn(Ud.x_,this.xP)}gn(){for(;this.SP.length>0;)this.EP(this.SP[0]);super.gn()}fa(){return Ve(this)}constructor(t){super(),this.SP=[],this.kP=t=>{this.tt(t.Lt)},this.xP=t=>{const i=t.Lt;this.LP(i)||this.it(i)};for(const i of t)this.DP(i)}};var wN,vN={forceSeekOffset:0,maximumOffset:0,maximumPlaybackRate:0,minimumOffset:0,minimumPlaybackRate:0,targetOffset:0},Ct=class{get va(){return null!=this.Xa||(this.Xa=function(t){return{get enabled(){return t.Rt},set enabled(i){t.Rt=we(i)},get monitoringLivePlayback(){return t.CP},get currentLatency(){return t.yv},get currentConfiguration(){return function(t){if(void 0!==t)return{get minimumOffset(){return t.minimumOffset},get maximumOffset(){return t.maximumOffset},get targetOffset(){return t.targetOffset},get forceSeekOffset(){return t.forceSeekOffset},get minimumPlaybackRate(){return t.minimumPlaybackRate},get maximumPlaybackRate(){return t.maximumPlaybackRate}}}(t.wd)}}}(this)),this.Xa}get Rt(){var t,i;return null!=(i=this.Le)?i:Boolean(null==(t=this.OP)?void 0:t.Rt)}set Rt(t){this.Le=t,this.OP&&(this.OP.Rt=t)}get CP(){var t,i;return null!=(i=null==(t=this.OP)?void 0:t.Gw)&&i}get yv(){var t;return null==(t=this.OP)?void 0:t.pv}get wd(){return this.OP?this.OP.Vw:vN}ka(t){this.OP=t,void 0!==this.Le&&(this.OP.Rt=this.Le)}tr(){this.OP=void 0,this.Le=void 0}};function AN(){return wN||(wN=Ha&&Ha.document&&Ha.document.createElement("video")),wN}var mN=!(!Ha||!Ha.TextTrack),pN=class extends dt{get yv(){}get jP(){const t=this.hv.wf,i=this.Mf;return t.gr(i,.01)}get ht(){return this.fT}get wf(){return this.hv.wf.ks()}get Af(){return this.hv.Af}set Af(t){t&&this.hv.PP(t)}get bt(){return this.bc}get Mf(){return void 0!==this.zP?this.zP:this.hv.Mf}set Mf(t){this.Nf(t)}Nf(t,i){this.Cf&&(this.zP=t),this.hv.Em(t)}get ct(){return this.hv.ct}get Sf(){return this.hv.Sf}get lt(){return this.BP}get bf(){return this.RP}get kf(){}get Cf(){return this.hv.Cf}get jf(){return Yt({},{vT:0,AT:0,mT:0,pT:0,yT:0,MT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.hv.Pf())}get zf(){return this.hv.zf}set zf(t){this.hv.zf=t}get Uf(){return!0}get Ff(){return this.hv.Ff}get Gf(){return this.hv.Gf}set Gf(t){this.hv.Gf=t}get Hf(){return this.hv.UP.played}get Xf(){return this.QP}set Xf(t){this.QP=t,this.FP&&(this.FP.Xf=t)}get Jf(){return this.hv.Jf}get t_(){return this.hv.t_.ks()}get e_(){return this.hv.e_}get YP(){return this.hv.YP}get nt(){return this.Dl}get rt(){return this.gT}get r_(){return this.hv.r_}get a_(){return this.hv.a_}get c_(){return this.hv.c_}set c_(t){this.hv.c_=t}get f_(){return this.GP}get g_(){return this.hv.g_}set g_(t){this.hv.g_=t}get VP(){return this.WP}be(){this.hv.be()}ge(){this.hv.ge()}async ga(t,i,e){fo(e),this.bc=t;const s={Rg:Au.ZC,Ug:t.src,HP:t.type,qP:this.XP(t),Xf:this.QP,ZP:t.crossOrigin,KP:i.metadata&&i.metadata.title};this.JP.mP(t.contentProtection),this.FP=await this.hv.$n(s),fo(e),i.textTracks&&this.$P(i.textTracks),st(this.nt)}$P(t){for(let e of t)if(this.hv.tz()&&f.Ga&&mN&&!YA(e.kind,e.label)&&this.iz(e)){var i;const t=null!=(i=e.kind)?i:Mi.Tm;this.hv.ez(e.src,t,e.label,e.srclang,e.default)}else{if(void 0===e.src)continue;this.sz.NI(e)}}iz(t){return!t.format||"webvtt"===t.format}async p_(){try{await this.hv.p_()}catch(t){}for(;!this.jP;)await this.hv.lf(Co.gw)}m_(){this.hv.m_()}M_(){return void 0!==this.hv.UP.webkitShowPlaybackTargetPicker}T_(){this.hv.UP.webkitShowPlaybackTargetPicker&&this.hv.UP.webkitShowPlaybackTargetPicker()}N_(){this.hv.UP.webkitShowPlaybackTargetPicker&&this.hv.UP.webkitShowPlaybackTargetPicker()}v_(){return this.hv.UP}w_(){return this.hv.ya}async tr(){this.bc=void 0,this.BP=void 0,this.RP=void 0,this.FP=void 0,await this.sz.tr(),this.hv.nz(),await this.hv.tr(),this.rz.tr(),this.Xf=this.QP,this.ht.tr(),this.rt.tr(),this.zP=void 0}async gn(){await this.tr(),this.Vo(),this.oz(),this.cz(),this.rz.gn(),this.hv.lz=void 0,await this._z.fz(this.hv),this.fT.gn(),this.gT.gn(),this.Dl.gn(),await this.sz.gn()}gz(){this.hv.yn(Co.jh,this.Ds),this.hv.yn(Co.Sh,this.Ds),this.hv.yn(Co.Iw,this.wc),this.hv.yn(Co.gw,this.Ds),this.hv.yn(Co.cw,this.Ds),this.hv.yn(Co.yw,this.Ds),this.hv.yn(Co.pw,this.wz),this.hv.yn(Co.Jg,this.Ds),this.hv.yn(Co.ww,this.Ds),this.hv.yn(Co.Ew,this.Ds),this.hv.yn(Co.Xg,this.Ds),this.hv.yn(Co.mw,this.vz),this.hv.yn(Zt.Rw,this.fv),this.hv.yn(Nt.ha,this.Az),this.hv.yn(Co.Wg,this.Ds),this.hv.yn(Co.Vg,this.mz),this.hv.UP.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.pz)}oz(){this.hv.fn(Co.jh,this.Ds),this.hv.fn(Co.Sh,this.Ds),this.hv.fn(Co.Iw,this.wc),this.hv.fn(Co.gw,this.Ds),this.hv.fn(Co.cw,this.Ds),this.hv.fn(Co.yw,this.Ds),this.hv.fn(Co.pw,this.wz),this.hv.fn(Co.Jg,this.Ds),this.hv.fn(Co.ww,this.Ds),this.hv.fn(Co.Ew,this.Ds),this.hv.fn(Co.Xg,this.Ds),this.hv.fn(Co.mw,this.vz),this.hv.fn(Zt.Rw,this.fv),this.hv.fn(Nt.ha,this.Az),this.hv.fn(Co.Wg,this.Ds),this.hv.fn(Co.Vg,this.mz),this.hv.UP.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.pz)}XP(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{cA:_m,yz:[{initDataTypes:[_m.xb],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}Mz(){let t=this.hv.UP.audioTracks,i=this.hv.UP.videoTracks;t&&(t.addEventListener("addtrack",this.Tz),t.addEventListener("removetrack",this.Nz),t.addEventListener("change",this.Dz)),i&&(i.addEventListener("addtrack",this.Sz),i.addEventListener("removetrack",this.Iz),i.addEventListener("change",this.Ez))}cz(){let t=this.hv.UP.audioTracks,i=this.hv.UP.videoTracks;t&&(t.removeEventListener("addtrack",this.Tz),t.removeEventListener("removetrack",this.Nz),t.removeEventListener("change",this.Dz)),i&&(i.removeEventListener("addtrack",this.Sz),i.removeEventListener("removetrack",this.Iz),i.removeEventListener("change",this.Ez))}nh(t){for(let i=0;i<t.U;i++){t.cg(i).BT()}}D_(){this.hv.D_()}S_(){}bz(t,i){this.BP||(this.BP=i,this.RP=t,this.Co(new Eo(t)))}constructor(t,i,e,s,n,r,h=new lN,o=PM()){super(),this.FP=void 0,this.bc=void 0,this.BP=void 0,this.RP=void 0,this.WP=new ao,this.GP=new Ct,this.Az=t=>{const i=t.lt,e=i.code,s=new Rs(Rw(e),"Something went wrong during native playback.",i),n=new nl(e,s.message,i.message);this.bz(s,n)},this.wc=()=>{this.Co(new Dr(this.Mf,this.Af))},this.wz=t=>{this.Ff||(this.zP=void 0),this.Co(t)},this.fv=t=>{this.zP=void 0},this.pz=()=>{this.Co(new Jw(this.Cf))},this.vz=()=>{this.a_>0&&this.r_>0&&this.Co(new il)},this.Tz=t=>{const i=this.hv.UP.audioTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];TN(this.fT,e)||this.fT.tt(new Xw(e))}},this.Nz=t=>{const i=[],e=this.hv.UP.audioTracks;if(e){for(const t of this.fT.og)NN(e,t.PT)||i.push(t);for(const t of i)this.fT.it(t)}},this.Dz=()=>{this.nh(this.fT)},this.Sz=t=>{const i=this.hv.UP.videoTracks;if(i)for(let t=0;t<i.length;t++){const e=i[t];TN(this.gT,e)||this.gT.tt(new Kw(e))}},this.Iz=t=>{const i=[],e=this.hv.UP.videoTracks;if(e){for(const t of this.gT.og)NN(e,t.PT)||i.push(t);for(const t of i)this.gT.it(t)}},this.Ez=()=>{this.nh(this.gT)},this.mz=t=>{this.Co(t),this.bz(t.errorObject,tn(t.errorObject))},this._z=i,this.EI=e,this.Jx=o,this.hv=this._z.Lz(fi.ym),this.QP=this.hv.UP.preload,this.rz=new at(this.hv,!0),this.rz.yn(Ls,this.Ds),this.JP=new jr(e,h),this.hv.lz=this.JP,this.gz(),this.fT=new wo,this.gT=new wo,this.Mz(),this.sz=new Ch(this.hv,this.EI),this.Dl=new ms([this.hv.nt]),this.ge()}};function yN(t){if(!Boolean(AN().canPlayType&&AN().canPlayType(t.type)))return!1;if(t.useNativePlayback)return!0;if(!t.useManagedMediaSource&&(f.Ga||f.Mb))return!0;const i=t.contentProtection;if(i&&!jg(i)){if(!Gu(i))return!1;if(i.fairplay)return!0}return!1}var MN=class{dA(t,i,e,s,n,r,h){return new pN(t,i,e,s,n,r)}kz(t,i){return yN(t)}xz(){return!1}constructor(){this.Cz=Ca.gP}};function TN(t,i){for(let e of t.og)if(e.PT===i)return e}function NN(t,i){for(let e=0;e<t.length;e++)if(t[e]===i)return!0;return!1}var DN=class{static Oz(){return this.Lb}jz(t){this.Pz.push(t)}get Cz(){return this.zz.Cz}dA(t,i,e,s,n,r,h){let o=this.zz.dA(t,i,e,s,n,r,h);for(const t of this.Pz)o=t(o,e,s);return o}kz(t,i){return this.zz.kz(t,i)}xz(){return!1}constructor(){this.zz=new MN,this.Pz=[]}};function SN(t,i){return ru(t.Cz,i.Cz)}DN.Lb=new DN;var IN=class{Bz(t){this.Rz.push(t),this.Rz.sort(SN)}async Uz(t,i){for(const e of this.Rz){const s=e.kz(t,i);if(ya(s)?await s:Boolean(s))return e}}constructor(){this.Rz=[]}};function ct(t){Qi.Lb.Bz(t)}var Qi=class extends IN{Qz(t){this.Fz=t}Yz(){return this.Fz}async Gz(t,i){const e=this.Fz;for(let s of t){let t=await this.Uz(s,i);if(t)return{yc:s,t:t};const n=e.kz(s,i);if(ya(n)?await n:Boolean(n))return{yc:s,t:e}}return{yc:t[0],t:e}}constructor(...t){super(...t),this.Fz=DN.Oz()}};Qi.Lb=new Qi;var Le,EN=class{gn(){zu(this.Us)}constructor(t){this.Us=Ha&&Ha.document&&Ha.document.createElement("div"),gn(this.Us),t.appendChild(this.Us)}};!function(t){t.gP="",t.Vz="none",t.Dm="metadata",t.eT="auto"}(Le||(Le={}));var bN=[Nt.ha,Co.Zg,Co.Kg,Co.Cw,Co.Qg,Co.$g,Co.ew,Co.fw,Co._w,Co.Tw,Co.Dw,Zt.Ow,Zt.jw,Zt.Pw,Zt.zw,Zt.H_,Zt.Bw,Zt.Rw,Co.Vg,Co.Wg,Co.Xg,Co.Jg,Co.cw,Co.lw,Co.jh,Co.gw,Co.Sh,Co.ww,Co.mw,Co.yw,Co.pw,Co.Iw,Co.Ew,Co.Aw,Co.dw,Co.Mw],LN=class extends dt{get ht(){return this.fT}get wf(){return this.Qo.wf}get lt(){return this.Qo.lt}get bf(){return this.Qo.bf}get Af(){return this.Qo.Af}set Af(t){this.Qo.Af=t}get bt(){return this.Wz}get Mf(){return this.Qo.Mf}set Mf(t){this.Qo.Mf=t}get ct(){return this.Qo.ct}get Sf(){return this.Qo.Sf}get kf(){return this._T}get Cf(){return this.Qo.Cf}get jf(){return this.Qo.jf}get zf(){return this.Qo.zf}set zf(t){this.Qo.zf=t}get Uf(){return this.Qo.Uf}get Ff(){return this.Qo.Ff}get Gf(){return this.Qo.Gf}set Gf(t){this.Qo.Gf=t}get Hf(){return this.Qo.Hf}get Xf(){return this.QP}set Xf(t){this.QP=t,this.Qo&&(this.Qo.Xf=this.QP)}get Jf(){return this.Qo.Jf}get t_(){return this.Qo.t_}get e_(){return this.Qo.e_}get nt(){return this.Dl}get r_(){return this.Qo.r_}get rt(){return this.gT}get a_(){return this.Qo.a_}get c_(){return this.Qo.c_}set c_(t){this.Qo.c_=t}get f_(){return this.Qo.f_}get VP(){return this.Qo.VP}m_(){this.Qo.m_()}p_(){const t=this.Qo.p_();ya(t)&&ha(t)}y_(){return this.ga(void 0)}A_(){}qz(){this.fT.fg=this.Qo.ht,this.gT.fg=this.Qo.rt,this.Dl.fg=this.Qo.nt,this._T.fg=this.Qo.kf,this.Qo.yn(bN,this.Ds)}Xz(){this.Qo.fn(bN,this.Ds),this.fT.fg=void 0,this.gT.fg=void 0,this.Dl.fg=void 0,this._T.fg=void 0}Wa(){return this.Zz}async ga(t,i){if(fo(i),this.Zz=t,!t)return;const e=t.sources.filter(Sw);if(li(e))return;const s=await this.Kz.Gz(e,t);fo(i);const n=s.yc,r=s.t,h=this.w_(),o=xw(this);(this.Jz!==r||this.lt)&&(this.Xz(),await this.Qo.gn(),fo(i),this.Jz=r,this.Qo=this.$z(r,n),function(t,i){t.zf!==i.zf&&(t.zf=i.zf);t.c_!==i.c_&&(t.c_=i.c_);t.Gf!==i.Gf&&(t.Gf=i.Gf)}(this.Qo,o),ic(this,o,this),this.qz()),this.Qo.Xf=this.Xf,this.tB?this.Qo.ge():this.Qo.be(),await this.Qo.ga(n,t,i),fo(i),this.iB(n),this.w_()!==h&&this.Co(new Zc)}iB(t){this.Wz!==t&&(this.Wz=t,this.Co(new V(t)))}M_(){return this.Qo.M_()}T_(){this.Qo.T_()}N_(){this.Qo.N_()}w_(){return this.Qo.w_()}D_(){this.Qo.D_()}S_(){this.Qo.S_()}async tr(){this.Zz=void 0,this.iB(void 0),await this.Qo.tr()}async gn(){this.Vo(),await this.tr(),await this.Qo.gn(),this.fT.gn(),this.gT.gn(),this.Dl.gn(),this._T.gn()}ge(){this.tB=!0,this.Qo.ge()}be(){this.tB=!1,this.Qo.be()}constructor(t,i){super(),this.Jz=void 0,this.Wz=void 0,this.QP=Le.Vz,this.Zz=void 0,this.tB=!0,this.fT=new vo,this.gT=new vo,this.Dl=new al,this._T=new Cu,this.Kz=t,this.Qo=i,this.Qo.Xf=this.Xf,this.qz()}};function kN(t,i,e){return e?t<=i:t<i}var ge,Ai=class t{get eB(){return this.sB.slice()}Cn(t){return this.sB[2*t]}jn(t){return this.sB[2*t+1]}nB(t){return this.rB[2*t]}hB(t){return this.rB[2*t+1]}ks(){const t=this;return{get length(){return t.U},start(i){const e=0|i;return t.oB(e),t.Cn(e)},end(i){const e=0|i;return t.oB(e),t.jn(e)}}}aB(){const i=new Array(2*this.U),e=new Array(2*this.U);for(let t=0;t<this.U;t++)i[2*t]=this.Cn(t),i[2*t+1]=this.jn(t),e[2*t]=!0,e[2*t+1]=!0;return new t(i,e)}oB(t){if(t<0)throw new g("The index provided ("+t+") must be non-negative");if(t>=this.U)throw new g("The index provided ("+t+") is greater than the maximum bound ("+this.U+")")}uB(t){if(0===this.U)return 0;if(this.gr(t))return t;if(t<=this.Cn(0))return this.Cn(0);if(t>=this.jn(this.U-1))return this.jn(this.U-1);{let i=0,e=1/0;for(let s=0;s<this.U;s++){const n=this.Cn(s),r=_.abs(n-t);r<e&&(i=n,e=r);const h=this.jn(s),o=_.abs(h-t);o<e&&(i=h,e=o)}return i}}Sn(i){let e=0,s=0;const n=[],r=[];for(;e<this.U&&s<i.U;){const t=this.Cn(e),h=this.jn(e),o=this.nB(e),a=this.hB(e),u=i.Cn(s),c=i.jn(s),l=i.nB(s),d=i.hB(s),f=_.max(t,u),g=_.min(h,c);let w,v;w=t===u?o&&l:f===t?o:l,v=h===c?a&&d:g===h?a:d,(f<g||w&&v&&f===g)&&(n.push(f,g),r.push(w,v)),h===c?(e+=1,s+=1):h<c?e+=1:s+=1}return new t(n,r)}cB(){const i=this.lB(),e=i.U;if(0===e)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=i.Cn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!i.nB(0)));for(let t=0;t<e-1;t++)s.push(i.jn(t),i.Cn(t+1)),n.push(!i.hB(t),!i.nB(t+1));const h=i.jn(e-1);return h!==1/0&&(s.push(h,1/0),n.push(!i.hB(e-1),!1)),new t(s,n)}dB(i){let e=0,s=0;const n=this.U,r=i.U,h=new Array(2*(n+r)),o=new Array(2*(n+r));let a=0;for(;e<n&&s<r;){const t=this.Cn(e),n=this.jn(e),r=i.Cn(s),u=i.jn(s);t<r||t===r&&n<u?(h[a]=t,h[a+1]=n,o[a]=this.nB(e),o[a+1]=this.hB(e),e++):(h[a]=r,h[a+1]=u,o[a]=i.nB(s),o[a+1]=i.hB(s),s++),a+=2}for(;e<n;)h[a]=this.Cn(e),h[a+1]=this.jn(e),o[a]=this.nB(e),o[a+1]=this.hB(e),e++,a+=2;for(;s<r;)h[a]=i.Cn(s),h[a+1]=i.jn(s),o[a]=i.nB(s),o[a+1]=i.hB(s),s++,a+=2;return new t(h,o)}fB(i){void 0===i&&(i=0);const e=this.U;if(e<2)return this;const s=[],n=[];let r=this.Cn(0),h=this.jn(0),o=this.nB(0),a=this.hB(0);for(let t=1;t<e;t++){const e=this.Cn(t),u=this.jn(t);let c=this.nB(t),l=this.hB(t);r<e&&h>u||(r===e&&(c=o||c,o=c),h===u&&(l=a||l,a=l),kN(e,h+i,a||c)?(h=u,a=l):(s.push(r,h),n.push(o,a),r=e,h=u,o=c,a=l))}return s.push(r,h),n.push(o,a),new t(s,n).lB()}lB(){const i=[],e=[];for(let t=0;t<this.U;t++){const s=this.Cn(t),n=this.jn(t),r=this.nB(t),h=this.hB(t);s===n?(r||h)&&(i.push(s,n),e.push(!0,!0)):(i.push(s,n),e.push(r,h))}return new t(i,e)}_B(t){if(0===this.U)return t;if(0===t.U)return this;return this.dB(t).fB()}gB(t){const i=this.lB(),e=t.lB(),s=i.cB(),n=e.cB(),r=s.Sn(e),h=n.Sn(i);return r._B(h)}Im(i){if(0===this.U||0===i)return this;const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t)+i,r=this.jn(t)+i;e.push(n,r),s.push(this.nB(t),this.hB(t))}return new t(e,s)}wB(t){return 0===this.U||0===t.U?this:this.lB().Sn(t.lB().cB())}gr(t,i){return this.vB(t,i)>=0}AB(t,i,e,s,n){return this.mB(t,i,e,s,n)>=0}pB(t,i,e,s,n){return this.yB(t,i,e,s,n)>=0}MB(t){if(t.U!==this.U)return!1;for(let i=0;i<this.U;i++)if(this.Cn(i)!==t.Cn(i)||this.jn(i)!==t.jn(i)||this.nB(i)!==t.nB(i)||this.hB(i)!==t.hB(i))return!1;return!0}TB(i){const e=[],s=[];for(let t=0;t<this.U;t++){const n=this.Cn(t),r=this.jn(t),h=this.nB(t),o=this.hB(t);i(n,r,h,o)&&(e.push(n,r),s.push(h,o))}return new t(e,s)}yB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,h=i+n;for(let t=0;t<this.U;t+=1)if(kN(this.Cn(t),h,!s||this.nB(t))&&kN(r,this.jn(t),!e||this.hB(t)))return t;return-1}mB(t,i,e,s,n){void 0===e&&(e=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,h=i-n;for(let t=0;t<this.U;t+=1)if(kN(this.Cn(t),r,!e||this.nB(t))&&kN(h,this.jn(t),!s||this.hB(t)))return t;return-1}vB(t,i){return this.mB(t,t,!0,!0,i)}NB(t,i){void 0===i&&(i=0);const e=t+i;for(let t=this.U-1;t>=0;t-=1)if(kN(this.Cn(t),e,this.nB(t)))return t;return-1}DB(t,i){void 0===i&&(i=0);const e=t-i;for(let t=0;t<this.U;t+=1)if(kN(e,this.jn(t),this.hB(t)))return t;return-1}SB(t,i){void 0===i&&(i=0);const e=t+i;for(let t=0;t<this.U;t+=1)if(this.Cn(t)>e)return t;return-1}IB(i){return this.oB(i),new t([this.Cn(i),this.jn(i)],[this.nB(i),this.hB(i)])}Mv(t,i){const e=this.vB(t,i);return e<0?void 0:this.IB(e)}get EB(){let t=0;for(let i=0;i<this.U;i++){t+=this.jn(i)-this.Cn(i)}return t}static xn(i){const e=[];for(let t=0;t<i.length;t++)e.push(i.start(t),i.end(t));return new t(e)}static bB(i){return new t([i,i],[!0,!0])}static LB(i,e){return i<=e?new t([i,e]):t.kB()}static kB(){return xN}constructor(t,i){this.U=t.length>>1,this.sB=t,this.rB=i||function(t){const i=new Array(2*t);for(let e=0,s=0;e<t;e+=1,s+=2)i[s]=!0,i[s+1]=!1;return i}(this.U)}},xN=new Ai([]);!function(t){t.ra="fullscreenchange",t.ca="fullscreensupportchange",t.ha="fullscreenerror"}(ge||(ge={}));var CN=class extends wn{constructor(){super(ge.ha)}},Ba=(ge.ra,ge.ca,ge.ha,class extends Bo{get cs(){return!1}get ta(){return!1}mo(){this.Co(new CN)}So(){}gn(){this.Vo()}}),ON=class extends Bo{get Af(){}set Af(t){}get bt(){}get Mf(){return this.xB}set Mf(t){this.Nf(t)}Nf(t,i){this.xB!==t&&(this.xB=t,this.CB=!0,this.Co(new ri(this.Mf)))}get jf(){return{vT:0,AT:0,mT:0,pT:0,yT:0,MT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get zf(){return this.OB}set zf(t){this.OB!==t&&(this.OB=t,this.Co(new Pc(this.Mf,this.c_)))}get Ff(){return this.jB}get Gf(){return this.PB}set Gf(t){this.PB!==t&&(this.PB=t,this.Co(new Qe(this.Mf,this.Gf)))}get e_(){return this.CB}get c_(){return this._k}set c_(t){this._k!==t&&(this._k=t,this.Co(new Pc(this.Mf,this.c_)))}get g_(){return!1}set g_(t){}get VP(){return this.WP}get yv(){}ge(){}be(){}p_(){this.jB&&(this.jB=!1,this.Co(new Gt(this.Mf)),this.Co(new Fr(this.Mf)))}m_(){this.jB||(this.jB=!0,this.Co(new Dr(this.Mf,this.Af)),this.Co(new hs(this.Mf)))}ga(t,i){return Promise.resolve()}M_(){return!1}T_(){}N_(){}w_(){return this.zB}D_(){}S_(){}async tr(){this.xB=0,this.CB=!1,this.m_(),this.Co(new Da(this.xB))}async gn(){this.Vo(),this.ht.gn(),this.nt.gn(),this.rt.gn()}constructor(...t){super(...t),this.xB=0,this.OB=!1,this.jB=!0,this.PB=1,this.CB=!1,this._k=1,this.ht=new wo,this.wf=Ai.kB().ks(),this.ct=NaN,this.Sf=!1,this.lt=void 0,this.bf=void 0,this.kf=void 0,this.Cf=!1,this.Uf=!0,this.Hf=Ai.kB().ks(),this.Xf=Le.Vz,this.Jf=Mw.uT,this.t_=Ai.kB().ks(),this.YP=void 0,this.nt=new Lr,this.r_=0,this.rt=new wo,this.a_=0,this.f_=new Ct,this.WP=new ao,this.zB=new Ba}},jN=class extends ON{set BB(t){this._z=t,this.hv=t.Lz(fi.ym)}v_(){var t;return null==(t=this.hv)?void 0:t.UP}Nf(t,i){this.Mf=t}async gn(){await super.gn(),this.hv&&(await this._z.fz(this.hv),this.hv=void 0)}constructor(...t){super(...t),this._z=void 0,this.hv=void 0}},PN=class extends LN{get we(){return this.pu}get g_(){return this.Qo.g_}set g_(t){this.Qo.g_=t}A_(){super.A_(),this.UB.RB()}ur(t){Cw(this,t)}ar(){}I_(t){return!1}async ga(t,i){const e=this.w_(),s=this.v_();await super.ga(t,i),this.w_()!==e&&this.Co(new Zc),this.v_()!==s&&this.Co(new z)}Nf(t,i){this.Qo.Nf(t,i)}$z(t,i){return t.dA(this.pu,this.UB,this.EI,this.wC,this.QB,this.FB,this.YB,i)}v_(){return this.Qo.v_()}gf(){return this.UB.GB.map((t=>t.UP))}async gn(){await super.gn(),this.UB.gn(),this.VB.gn()}constructor(t,i,e,s,n,r,h){const o=new jN;super(Qi.Lb,o),this.pu=t,this.wC=i,this.EI=e,this.QB=s,this.FB=n,this.YB=h,this.UB=new pa(r,this.YB),this.UB.WB(this.pu),o.BB=this.UB,this.VB=new EN(this.pu)}},zN=class extends dt{get ht(){return this.HB}get wf(){return Ai.kB().ks()}get Af(){return new Date(NaN)}set Af(t){}get bt(){}get Mf(){return 0}set Mf(t){}Nf(t,i){}get ct(){return 0}get we(){return this.pu}get Sf(){return!0}get lt(){return this.qB}get bf(){return this.XB}get kf(){}get jf(){return{vT:0,AT:0,mT:0,pT:0,yT:0,MT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get zf(){return!1}set zf(t){}get Uf(){return!0}get Ff(){return!0}get Gf(){return 0}set Gf(t){}get Hf(){return Ai.kB().ks()}get Xf(){return Le.Vz}set Xf(t){}get Jf(){return Mw.uT}get t_(){return Ai.kB().ks()}get e_(){return!1}get nt(){return this.ZB}get r_(){return 0}get rt(){return this.HB}get a_(){return 0}get c_(){return 1}set c_(t){}get f_(){return this.GP}get g_(){return!1}set g_(t){}I_(t){return!0}be(){}p_(){throw this.Co(new Eo(this.XB)),this.qB}m_(){}Wa(){}async ga(t,i){throw fo(i),this.Co(new Eo(this.XB)),this.qB}ge(){}y_(){return Promise.resolve()}v_(){}w_(){return this.zB}gf(){return[]}A_(){}ur(t){}ar(){}get Cf(){return!1}M_(){return!1}T_(){}N_(){}D_(){}S_(){}tr(){return Promise.resolve()}gn(){return this.Vo(),this.HB.gn(),this.ZB.gn(),Promise.resolve()}constructor(t,i,e){super(),this.zB=new Ba,this.GP=new Ct,this.pu=t,this.qB=i,this.HB=new wo,this.ZB=new Lr,this.XB=e}};function BN(t){if(t&&Ut(t))return Yt({},t,{integration:RN(t.integration),fairplay:VN(t.fairplay),widevine:UN(t.widevine),playready:QN(t.playready),clearkey:WN(t.clearkey),aes128:HN(t.aes128),integrationParameters:qN(t.integrationParameters),preferredKeySystems:XN(t.preferredKeySystems)})}function RN(t){if(Qs(t))return t}function UN(t){if(t&&Ut(t))return{persistentState:FN(t.persistentState),distinctiveIdentifier:FN(t.distinctiveIdentifier),audioRobustness:YN(t.audioRobustness),videoRobustness:YN(t.videoRobustness),licenseAcquisitionURL:Qs(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:GN(t.licenseType),headers:t.headers,useCredentials:!!id(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:Qs(t.certificate)||Mg(t.certificate)?t.certificate:void 0}}function QN(t){if(!t)return;const i=UN(t);if(!i)return;return Yt({},i,{customData:Qs(t.customData)?t.customData:void 0})}function FN(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function YN(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function GN(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function VN(t){if(!t)return;const i=UN(t);if(!i)return;return Yt({},i,{certificateURL:Qs(t.certificateURL)?t.certificateURL:void 0})}function WN(t){if(!t)return;const i=UN(t);if(!i)return;const e=fh(t.keys)?t.keys.map((t=>function(t){if(!t||!Ut(t))return;const i=t.id,e=t.value;if(!Qs(i)||!Qs(e))return;return{id:i,value:e}}(t))).filter(Po):void 0;return Yt({},i,{keys:e})}function HN(t){if(Ut(t))return{useCredentials:id(t.useCredentials)?t.useCredentials:void 0}}function qN(t){if(Ut(t))return t}function XN(t){return t&&fh(t)?t.map((t=>on(t))).filter(Po):[ti,Mn,uu]}var ZN=class extends wn{constructor(t){super("presentationmodechange"),this.presentationMode=t}};function KN(t,i,e){return new Promise(((s,n)=>{if(e&&e.zd)return n(new Sn);const r=t=>{o(),s(t)},h=()=>{o(),n(new Sn)},o=()=>{t.removeEventListener(i,r),e&&e.Yd(h)};t.addEventListener(i,r),e&&e.Fd(h)}))}var JN,$N=class extends Bo{Qa(t){for(const i of this.KB)t.yn(i,this.JB);this.$B.push(t)}tR(t){for(const i of this.KB)t.fn(i,this.JB);this.$B.push(t)}gn(){this.Vo();for(const t of this.$B)this.tR(t);No(this.$B)}constructor(t,i=!1,e){super(e),this.$B=[],this.iR=t=>{wc((()=>{this.Ds(t)}))},this.KB=t,this.JB=i?this.iR:this.Ds}},Yu=class extends dt{Qa(t){t.sf(this.eR),this.$B.push(t)}tR(t){t.cf(this.eR),Qr(this.$B,t)}gn(){this.Vo();for(const t of this.$B)t.cf(this.eR);No(this.$B)}constructor(t,i=!1){super(t),this.$B=[],this.iR=t=>{wc((()=>{this.Ds(t)}))},this.eR=i?this.iR:this.Ds}};!function(t){t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture"}(JN||(JN={}));var Pu,tD=class extends dt{get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return function(t){let i,e={get currentMode(){return t.qo()},requestMode(i){const e=eD(i);e&&t.Zo(e)},supportsMode(i){const e=eD(i);return!!e&&t.Go(e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Yu(e,!0),i.Qa(t),e}(this)}Zo(t){this.Xo(t,t)}Xo(t,i){this.sR!==i&&(this.nR=!0,this.rR=t,this.Jo(i,this.sR),"fullscreen"!==t&&(this.hR=t),this.nR=!1,this.Yr())}qo(){return this.oR?"fullscreen":"inline"}Go(t){switch(t){case"fullscreen":return this.zB.ta;case"inline":return!0}return!1}Yr(){if(this.nR)return;const t=this.sR,i=this.qo();this.sR=i,"fullscreen"!==i&&(this.aR=i),t!==i&&this.Co(new ZN(i))}Jo(t,i){const e="fullscreen"===t;this.oR=e,e!==this.zB.cs&&(e?this.zB.mo():this.zB.So())}wi(){if(this.nR)return;const t=this.zB.cs;this.oR=t,t?this.Xo("fullscreen","fullscreen"):t||"fullscreen"!==this.rR?this.Yr():this.Xo(this.hR,this.aR)}uR(){this.wi(),this.Co(new Eo(new Rs(Ui.FULLSCREEN_ERROR,"Failed to enter fullscreen.")))}gn(){this.zB.gn(),this.Vo()}constructor(t){super(),this.rR="inline",this.sR="inline",this.nR=!1,this.oR=!1,this.hR="inline",this.aR="inline",this.Xa=void 0,this.cR=()=>this.wi(),this.lR=()=>this.uR(),this.zB=t,this.zB.yn(ge.ra,this.cR),this.zB.yn(ge.ha,this.lR),this.Yr()}},iD={bt:void 0,Mf:0,ct:NaN,Sf:!1,lt:void 0,bf:void 0,zf:!1,Ff:!0,Gf:1,Jf:Mw.uT,e_:!1,r_:0,a_:0,c_:1};function eD(t){switch(t){case JN.INLINE:case JN.FULLSCREEN:case JN.PICTURE_IN_PICTURE:return t;default:return}}!function(t){t.DEFAULT="",t.THEO="theo",t.CSAI="csai",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor",t.THEOADS="theoads"}(Pu||(Pu={}));var ll,jc,qa,sD,nD,Ur=class{get dR(){return this.fR}_R(t){const i=this.fR.filter((i=>i.gR(t)));if(i.length>1)0;else if(0===i.length)throw g("Unknown ad integration: "+t.integration);return i[0]||null}wR(t){this.fR.push(t)}constructor(){this.fR=[]}};Ur.Lb=new Ur,function(t){t.Rw="PLAYING",t.vR="PAUSED",t.AR="SEEK",t.mR="STALLED",t.pR="FAILED",t.yR="INITIAL_BUFFERING",t.MR="NO_ACCESS"}(ll||(ll={})),function(t){t.NR="HTTP_REQUEST_STATUS_CODE_1XX",t.DR="HTTP_REQUEST_STATUS_CODE_2XX",t.SR="HTTP_REQUEST_STATUS_CODE_3XX",t.IR="HTTP_REQUEST_STATUS_CODE_4XX",t.ER="HTTP_REQUEST_STATUS_CODE_5XX",t.bR="BUFFER_LENGTH",t.LR="BYTES_RECEIVED",t.kR="SEGMENT_READ_BITRATE",t.xR="SEGMENT_PROFILE_BITRATE",t.OR="VIDEO_PROFILE_BITRATE",t.jR="NUMBER_OF_FRAMES_DROPPED",t.PR="PLAYBACK_POSITION",t.zR="NUMBER_OF_FRAMES_DECODED",t.RR="PLAYBACK_DELTA_TO_ORIGIN",t.UR="STREAM_DELTA_TO_ORIGIN",t.QR="ORIGIN_TIMESTAMP"}(jc||(jc={})),function(t){t.FR="MANIFEST_URI",t.YR="ASSET_DURATION",t.GR="NUMBER_OF_CONTENT_PROFILES",t.WR="CDN",t.HR="CONTENT_TITLE",t.qR="SERVICE_NAME",t.XR="CONTENT_TYPE",t.ZR="CONTENT_DESCRIPTION"}(qa||(qa={})),(sD||(sD={})).KR="shutdown_normal_shutdown",function(t){t.JR="session/",t.$R="content/",t.tU="internalError/",t.iU="drmError/",t.eU="caError/",t.sU="networkError/"}(nD||(nD={}));var rD,hD=class{get code(){return this.category+this.statusCode}constructor(t,i){this.category=t,this.statusCode=i}};!function(t){t.nU="userAction",t.rU="endOfStreamReached"}(rD||(rD={}));var Yr,oD=class extends Bo{};!function(t){t.PAUSE="hU",t.RESUME="oU"}(Yr||(Yr={}));var aD=class extends wn{constructor(){super("aU")}},uD=class extends Bo{uU(){this.cU=!0}lU(){}gn(){this.cU=!1,this.dU.fn(Yr.PAUSE,this.fU),this.dU.fn(Yr.RESUME,this._U)}gU(){return isFinite(this.Qo.Td())}constructor(t,i){super(),this.Qo=t,this.dU=i,this.cU=!1,this.fU=()=>{this.lU(),this.cU=!1},this._U=()=>{this.cU=!0},this.dU.yn(Yr.PAUSE,this.fU),this.dU.yn(Yr.RESUME,this._U)}},cD=class extends uD{uU(){super.uU(),this.wU()}gn(){this.vU(),super.gn()}wU(){this.Qo.yn(Zt.Bw,this.AU),this.Qo.yn(Co.Sh,this.mU),this.Qo.yn(Zt.Rw,this.pU),this.Qo.yn(Co.yw,this.yU),this.Qo.yn(Co.pw,this.MU)}vU(){this.Qo.fn(Zt.Bw,this.AU),this.Qo.fn(Co.Sh,this.mU),this.Qo.fn(Zt.Rw,this.pU),this.Qo.fn(Co.yw,this.yU),this.Qo.fn(Co.pw,this.MU)}TU(){this.NU=!0}DU(){const t=this.Qo.Ef(),i=new hD(nD.tU,String(t.code));this.SU(ll.pR,i,t.message)}IU(t){this.cU&&(this.dU.EU(t),this.Co(new aD))}SU(t,i,e){this.dU.bU(t,i,e),this.Co(new aD)}LU(t,i){this.dU.kU(t,i)}constructor(...t){super(...t),this.NU=!1,this.xU=!1,this.CU=!1,this.AU=()=>{this.xU&&!this.CU&&this.IU(ll.mR)},this.pU=()=>{this.Qo.Ff||(this.xU||this.LU(new hD(nD.$R,"firstFrameDisplayed"),"now"),this.xU=!0,this.IU(ll.Rw))},this.mU=()=>{this.Qo.Ff&&(this.xU=!0,this.IU(ll.vR))},this.yU=()=>{this.NU&&(this.CU=!0,this.NU=!1,this.IU(ll.AR))},this.MU=()=>{this.CU=!1,this.Qo.Ff&&this.IU(ll.vR)}}},lD=class extends uD{uU(){super.uU(),this.OU(),this.wU()}gn(){this.vU(),super.gn()}wU(){this.Qo.rt.yn(qt.ra,this.OU),this.Qo.PU.jU(this.zU),this.Qo.yn(Co.Xg,this.BU)}vU(){this.Qo.rt.fn(qt.ra,this.OU),this.Qo.PU.RU(this.zU),this.Qo.fn(Co.Xg,this.BU)}UU(t){t.serviceName&&this.QU(qa.qR,t.serviceName),t.cdn&&this.QU(qa.WR,t.cdn),t.contentTitle&&this.QU(qa.HR,t.contentTitle),t.contentType&&this.QU(qa.XR,t.contentType),t.contentDescription&&this.QU(qa.ZR,t.contentDescription)}QU(t,i){this.cU&&this.dU.FU(t,i)}constructor(...t){super(...t),this.BU=()=>{this.gU()&&this.QU(qa.YR,_.round(this.Qo.Td()))},this.zU=t=>{"manifest"===t.request.type&&this.QU(qa.FR,t.url)},this.OU=()=>{const t=Vt(this.Qo.rt.og,(t=>t.Rt));t&&this.QU(qa.GR,t.Ng.U)}}},dD=class extends uD{uU(){super.uU(),this.YU=this.Qo.jf.vT,this.GU=this.Qo.jf.mT,this.wU(),this.VU.push(v(this.WU,1e3))}lU(){super.lU(),this.HU()}gn(){this.HU(),this.vU(),this.VU.forEach(m),No(this.VU),super.gn()}wU(){this.Qo.PU.jU(this.qU),this.Qo.yn(Co.Dw,this.XU)}vU(){this.Qo.PU.RU(this.qU),this.Qo.fn(Co.Dw,this.XU)}ZU(){this.HU()}KU(t){this.JU+=t,this.$U(jc.LR,this.JU)}tQ(t,i){const e=this.iQ.get(i)||0;this.$U(t,e)}eQ(){const t=this.Qo.jf.vT-this.YU;this.$U(jc.jR,t)}sQ(){const t=this.Qo.jf.mT-this.GU;this.$U(jc.zR,t)}nQ(){const t=va.Lb.hP();this.$U(jc.kR,Dg(t))}rQ(t){this.$U(jc.xR,Dg(t)),this.$U(jc.OR,Dg(t))}HU(){if(!this.gU())return;const t=_.round(qi(this.Qo.Tf()));this.$U(jc.PR,t)}hQ(){const t=Ai.xn(this.Qo.vf()),i=this.Qo.Tf(),e=t.Mv(i),s=e?qi(e.jn(0)-i):0;this.$U(jc.bR,s)}$U(t,i){this.cU&&this.dU.oQ(t,i)}constructor(...t){super(...t),this.iQ=ke(),this.JU=0,this.YU=0,this.GU=0,this.VU=[],this.WU=()=>{this.eQ(),this.sQ(),this.hQ()},this.XU=t=>{t.mI===fi.ym&&(this.KU(t.yT),this.nQ(),this.rQ(t.aQ),this.HU())},this.qU=t=>{const i=t.status.toString()[0],e=this.iQ.get(i)||0;this.iQ.set(i,e+1),this.tQ(jc.NR,"1"),this.tQ(jc.DR,"2"),this.tQ(jc.SR,"3"),this.tQ(jc.IR,"4"),this.tQ(jc.ER,"5")}}},fD=class{Xb(t){this.uQ.delete(t)}cQ(){this.uQ.clear()}Wb(t){return this.uQ.get(t)}iP(t,i){this.uQ.set(t,i)}constructor(){this.uQ=ke()}},_D=class t{static lQ(){return t.Lb||(t.Lb=gD.sC()?new gD:new fD),t.Lb}static Xb(i){t.lQ().Xb(i)}static cQ(){t.lQ().cQ()}static Wb(i){return t.lQ().Wb(i)}static iP(i,e){t.lQ().iP(i,e)}};_D.Lb=void 0;var nc,gD=class extends _D{static sC(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}Xb(t){self.sessionStorage.removeItem(t)}cQ(){self.sessionStorage.clear()}Wb(t){var i;return null!=(i=self.sessionStorage.getItem(t))?i:void 0}iP(t,i){self.sessionStorage.setItem(t,i)}};function wD(t){return t&&t.integration===MD}function vD(t){if(!Qs(t.asset))throw new b("Agama source configuration: expected 'asset' to be a string");if(!function(t){return!!Qs(t)&&("live"===t||"vod"===t)}(t.streamType))throw new b("Agama source configuration: expected 'streamType' to be 'live' or 'vod'");if(void 0!==t.serviceName&&!function(t){return!!Qs(t)&&("live"===t||"svod"===t||"nvod"===t||"tvod"===t||"avod"===t||"catchuptv"===t)}(t.serviceName))throw new b("Agama source configuration: expected 'serviceName' to be 'live', 'svod', 'nvod','tvod', 'avod' or 'catchuptv'");if(void 0!==t.cdn&&!Qs(t.cdn))throw new b("Agama source configuration: expected 'cdn' to be a string");if(void 0!==t.contentTitle&&!Qs(t.contentTitle))throw new b("Agama source configuration: expected 'contentTitle' to be a string");if(void 0!==t.contentType&&!Qs(t.contentType))throw new b("Agama source configuration: expected 'contentType' to be a string");if(void 0!==t.contentDescription&&!Qs(t.contentDescription))throw new b("Agama source configuration: expected 'contentDescription' to be a string");return t}function AD(t){if(!Qs(t.config))throw new b("Agama player configuration: expected 'config' to be a string");if(void 0!==t.logLevel&&!function(t){return!!Qs(t)&&("info"===t||"debug"===t||"warning"===t||"error"===t||"fatal"===t)}(t.logLevel))throw new b("Agama player configuration: expected 'logLevel' to be 'info', 'debug', 'warning','error' or 'fatal'");if(void 0!==t.application&&!Qs(t.application))throw new b("Agama player configuration: expected 'application' to be a string");if(void 0!==t.applicationVersion&&!Qs(t.applicationVersion))throw new b("Agama player configuration: expected 'applicationVersion' to be a string");if(void 0!==t.userAccountID&&!Qs(t.userAccountID))throw new b("Agama player configuration: expected 'userAccountID' to be a string");if(void 0!==t.deviceID&&!Qs(t.deviceID))throw new b("Agama player configuration: expected 'deviceID' to be a string");return t}function mD(){let t="00000000-0000-0000-0000-000000000000",i=s.navigator,e=s.screen,n=""+i.mimeTypes.length;n+=i.userAgent.replace(/\D+/g,""),n+=i.plugins.length,n+=e.height||"",n+=e.width||"",n+=e.pixelDepth||"",n+=_.floor(1e3*_.random());let r=function(t){let i,e,s=0;if(0===t.length)return"0";for(i=0;i<t.length;i++)e=t.charCodeAt(i),s=(s<<5)-s+e,s|=0;return _.abs(s).toString().substring(0,12)}(n);return t=[t.slice(0,t.length-r.length),r].join(""),t}function pD(t,i,e){const s=i,n=function(t,i){return dw(i)?t.DsProtocol.APPLE_HLS:t.DsProtocol.MPEG_DASH}(t,s.type),r=function(t,i){let e=t.DsPlaylistType.VOD;"live"===i&&(e=t.DsPlaylistType.LIVE);return e}(t,e.streamType);return{asset:e.asset,playlistType:r,protocol:n,uri:s.src}}!function(t){t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected"}(nc||(nc={}));var hu,Bc,mu,yD=class{dQ(){this.Qo.fn(Nt.ha,this.fQ),this._Q(),this.gQ(),this.dU.wQ()}vQ(){this.Qo.AQ.va.chromecast&&this.Qo.AQ.va.chromecast.addEventListener("statechange",this.mQ)}gQ(){this.Qo.AQ.va.chromecast&&this.Qo.AQ.va.chromecast.removeEventListener("statechange",this.mQ)}pQ(){return void 0!==this.Qo.AQ.va.chromecast&&this.Qo.AQ.va.chromecast.state===nc.CONNECTED}gn(){this.Qo.fn(Co.lo,this.do),this.Qo.fn(Co.jh,this.yQ),this.Qo.fn(Co.Jg,this.MQ),this.dQ(),this.dU.gn()}TQ(){this.NQ||(this.NQ=new cD(this.Qo,this.dU)),this.DQ||(this.DQ=new dD(this.Qo,this.dU)),this.SQ||(this.SQ=new lD(this.Qo,this.dU))}uU(){this.NQ&&(this.NQ.uU(),this.NQ.yn("aU",this.IQ)),this.DQ&&this.DQ.uU(),this.SQ&&this.SQ.uU()}_Q(){this.NQ&&(this.NQ.fn("aU",this.IQ),this.NQ.gn(),this.NQ=void 0),this.DQ&&(this.DQ.gn(),this.DQ=void 0),this.SQ&&(this.SQ.gn(),this.SQ=void 0)}UU(t){this.SQ&&this.SQ.UU(t)}EQ(){this.NQ&&this.NQ.DU()}TU(){this.NQ&&this.NQ.TU()}constructor(t,i,e){this.Qo=t,this.dU=i,this.do=()=>{this.bQ(),this.MQ()},this.bQ=()=>{const t=this.Qo.Wa(),i=t&&t.analytics;this.LQ=function(t){void 0===t&&(t=[]);for(let i of t)if(wD(i))return vD(i)}(i)},this.MQ=()=>{this.dQ(),this.Qo.fn(Co.jh,this.yQ),!this.pQ()&&this.dU.kQ()&&this.Qo.bt&&this.LQ&&(this.TQ(),this.Qo.Ff||this.Qo.Sf?this.Qo.yn(Co.jh,this.yQ):this.yQ())},this.yQ=()=>{this.Qo.bt&&this.LQ&&(this.dU.xQ(this.Qo.bt,this.LQ),this.uU(),this.UU(this.LQ),this.vQ(),this.Qo.yn(Nt.ha,this.fQ),this.Qo.fn(Co.jh,this.yQ))},this.mQ=()=>{this.pQ()&&this.dQ()},this.fQ=()=>{this.EQ(),this.dQ()},this.IQ=()=>{this.DQ&&this.DQ.ZU()};const s=function(t){void 0===t&&(t=[]);for(const i of t)if(wD(i))return AD(i)}(e.analytics);s&&this.dU.CQ()&&(this.dU.A_(s),this.dU.kQ()?(this.dU.OQ(),this.Qo.yn(Co.lo,this.do),this.Qo.yn(Co.Jg,this.MQ)):console.warn("An error occurred while initializing an Agama EMP client. Please check your configuration"))}},MD="agama";function TD(t){switch(t){case"":return hu.NONE;case"horizontal":return hu.HORIZONTAL;case"vertical":return hu.VERTICAL;default:throw new b}}function ND(t,i){if(i)return Bc.PM360;if(null==t)return Bc.NONE;switch(t){case"":return Bc.NONE;case"360":return Bc.PM360;case"180":return Bc.PM180;default:throw new b("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}!function(t){t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(hu||(hu={})),function(t){t.NONE="",t.PM360="360",t.PM180="180"}(Bc||(Bc={})),function(t){t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event"}(mu||(mu={}));var DD="https://content.uplynk.com";function SD(t){if(!t)return!0;const i=!function(t){return mw(t)||Tn(t)&&mw(t[0])}(t.sources)||li(t.sources),e=!t.ads||ID(t.ads),s=""!==t.poster&&!t.poster;return i&&e&&s}function ID(t){return!t||fh(t)&&0===t.length}function ED(t){if(t&&t.sources)return bD(t.sources)}function bD(t){return Qs(t)?uw(t):ho(t)?t.type||t.src&&uw(t.src):Tn(t)&&t.length>0?bD(t[0]):void 0}function LD(t){if(t&&t.sources)return kD(t.sources)}function kD(t){return Qs(t)?t:ho(t)?t.src:Tn(t)&&t.length>0?kD(t[0]):void 0}function xD(t,i,e){return _w(t)?function(t,i,e){let s=Yt({},pw(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:Ci.VERIZON_MEDIA,id:"",prefix:DD,preplayParameters:{},playbackUrlParameters:{},assetType:mu.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(Qs(t))return t;if(Tn(t)&&Qs(t[0]))return t;if(function(t){return Ut(t)&&Qs(t.userId)&&(Tn(t.externalId)||Qs(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return mu.CHANNEL;case"event":return mu.EVENT;default:return mu.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=we(t.contentProtected));t.assetInfo?s.assetInfo=we(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=cs(t.prefix)||DD);return s.ping=function(t,i){let e=!1,s=!1,n=!1;i?(e=!!id(i.adImpressions)&&i.adImpressions,s=!!id(i.freeWheelVideoViews)&&i.freeWheelVideoViews,n=id(i.linearAdData)?i.linearAdData:t!==mu.ASSET):t!==mu.ASSET&&(n=!0);return{adImpressions:e,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=OD(s,t),s=PD(s,i,e),s=jD(s,t,e),s}(t,i,e):ww(t)?function(t,i,e){var s;return Yt({},CD(t,i,e),{integration:Ci.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,i,e):gw(t)?function(t,i,e){return Yt({},CD(t,i,e),{integration:Ci.THEOLIVE})}(t,i,e):CD(t,i,e)}function CD(t,i,e){let s=yw();const n=i&&(i.contentProtection||i.drm);if(Qs(t)){if(s.src=t,s.type=uw(t),n){const t=BN(n);s.contentProtection=Wg(t)}}else if(ho(t)||fw(t)){s.src=t.src,s.type=t.type||uw(t.src),s.isAdvertisement=t.isAdvertisement;const i=Aw(t)?t.hesp:void 0;void 0!==i&&(s.hesp=i);ww(t)&&(s.integration=t.integration);const e=BN(t.contentProtection||t.drm||n);s.contentProtection=Wg(e),t.ssai&&(s.ssai=Gf(t.ssai)),s=OD(s,t)}return s=PD(s,i,e),s=jD(s,t,e),s}function OD(t,i){var e,s;i.useCredentials?t.crossOrigin=Ln.Gv:i.crossOrigin&&(t.crossOrigin=cw(i.crossOrigin)),Qs(i.timeServer)&&(t.timeServer=i.timeServer),i.liveOffset&&(t.liveOffset=i.liveOffset),i.hlsDateRange&&(t.hlsDateRange=i.hlsDateRange),i.lowLatency&&(t.lowLatency=we(i.lowLatency)),i.useNativePlayback&&(t.useNativePlayback=we(i.useNativePlayback)),i.useManagedMediaSource&&(t.useManagedMediaSource=we(i.useManagedMediaSource)),i.dash&&(t.dash=Hg(i.dash)),i.hls&&(t.hls=qg(i.hls)),i.lcevc&&(t.lcevc=we(i.lcevc)),i.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=Iw(i.ignoreEmbeddedTextTrackTypes)),i.latencyConfiguration&&(t.latencyConfiguration=rw(i.latencyConfiguration)),t.seamlessSwitchStrategy=hw(null!=(s=i.seamlessSwitchStrategy)?s:null==(e=i.dash)?void 0:e.useSeamlessPeriodSwitch);const n=Cc(i.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=Cc(i.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function jD(t,i,e){return t.abr=Kg(Qs(i)?void 0:Zg(i.abr),null==e?void 0:e.abr),t}function PD(t,i,e){var s;const n=i&&i.timeServer;return e&&e.liveOffset&&!Po(t.liveOffset)&&(t.liveOffset=e.liveOffset),e&&e.hlsDateRange&&!Po(t.hlsDateRange)&&(t.hlsDateRange=e.hlsDateRange),t.crossOrigin===Ln.Fv&&(null==i||null==(s=i.vr)?void 0:s[360])&&(t.crossOrigin=Ln.Yv),t.useCredentials=t.crossOrigin===Ln.Gv,Qs(n)&&!t.timeServer&&(t.timeServer=n),t}function zD(t){const i={src:""};if(t&&t.src){if(i.src=cs(t.src),"default"in t&&(i.default=we(t.default)),i.kind=function(t){const i=String(t||"").toLowerCase();return jA(i)?i:i?"metadata":"subtitles"}(t.kind),ow(t.format)&&(i.format=t.format),"srclang"in t){const e=t.srclang;"string"==typeof e&&""!==e&&(i.srclang=e)}if("label"in t){const e=t.label;"string"==typeof e&&""!==e&&(i.label=e)}}return i}function BD(t,i){if(Ut(t))try{return i._R(t).jQ(t)}catch(t){return}}function De(t,i,e){if(void 0===e&&(e=Ur.Lb),SD(t))return{sources:[yw()]};const s=Ms(t);if(s.sources=function(t,i,e){if(mw(t))return[xD(t,i,e)];if(Tn(t)&&mw(t[0])){const s=[];for(const n of t)s.push(xD(n,i,e));return s}return[yw()]}(s.sources,s,i),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,i){if(!Tn(t))return[];const e=[];for(let s of t)s=BD(s,i),s&&e.push(s);return e}(s.ads,e);0===t.length?delete s.ads:s.ads=t}const n=!li(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!Tn(t))return[];const i=[];for(let e of t)e=zD(e),""!==e.src&&i.push(e);return i}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=cs(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const i=t||{};return i.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(i.stereoMode),{panoramaMode:ND(i.panoramaMode,Boolean(i[360])),stereoMode:i.stereoMode?TD(i.stereoMode):hu.NONE,nativeVR:Boolean(i.nativeVR)}}(s.vr));if("analytics"in s||(null==i?void 0:i.analytics)){const t=Dw(s.analytics),e=i&&i.analytics||[];s.analytics=function(t,i){const e=Ms(t);for(const s of i){const i=!t.some((t=>t.integration===s.integration));i&&s.integration!==MD&&e.push(s)}return e}(t,e)}return"mutedAutoplay"in s&&(s.mutedAutoplay=Lw(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=pc(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}var RD=!(f.UE&&!f.FE),go=self.console;function UD(t){if(Ut(t))try{return JSON.stringify(t)}catch(t){}return t}function QD(t){return t.map(UD).join(" ")}function FD(t){const i=go&&go[t];return i?i.bind&&RD?i.bind(go):function(){for(var i=arguments.length,e=new Array(i),s=0;s<i;s++)e[s]=arguments[s];go[t](QD(e))}:void 0}var YD=FD("log")||na,$=FD("warn")||YD.bind(void 0,"WARNING:"),Ma=FD("error")||YD.bind(void 0,"ERROR:"),GD=(()=>{const t=go&&go.assert;return t?t.bind&&RD?t.bind(go):function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];go.assert(t,QD(e))}:function(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];t||Ma("Assertion failed:",...e)}})();var Aa=function(){function t(t){this.zQ=t}return t.prototype.BQ=function(t){var i,e,s,n,r,h,o,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.zQ.charAt(64);for(i=0;i<t.length;i+=4)e=(o=this.zQ.indexOf(t.charAt(i))<<18|this.zQ.indexOf(t.charAt(i+1))<<12|(r=this.zQ.indexOf(t.charAt(i+2)))<<6|(h=this.zQ.indexOf(t.charAt(i+3))))>>>16&255,s=o>>>8&255,n=255&o,a[i/4]=String.fromCharCode(e,s,n),64===h&&(a[i/4]=String.fromCharCode(e,s)),64===r&&(a[i/4]=String.fromCharCode(e));return a.join("")},t.prototype.RQ=function(t,i){var e,s,n,r,h,o,a,u=[],c="";if((o=t.length%3)>0)for(;o++<3;)c+=this.zQ.charAt(64),t+="\0";for(o=0;o<t.length;o+=3)s=(e=t.charCodeAt(o)<<16|t.charCodeAt(o+1)<<8|t.charCodeAt(o+2))>>18&63,n=e>>12&63,r=e>>6&63,h=63&e,u[o/3]=this.zQ.charAt(s)+this.zQ.charAt(n)+this.zQ.charAt(r)+this.zQ.charAt(h);return a=(a=u.join("")).slice(0,a.length-c.length),i||(a+=c),a},t.lh=new t(function(){var t,i,e,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(i=r[t],e=0;e<i.length;e+=1)s=i.charAt(e),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.UQ=new t(function(t){return t.BQ("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.lh)),t}();function VD(t){return"string"==typeof t}function WD(t){return"number"==typeof t}var HD={}.toString;var ei,qD=Array.isArray||function(t){return"[object Array]"===HD.call(t)};function Rr(t,i){return qD(t)&&t.every(i)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb",t.KEPLER="kepler"}(ei||(ei={}));var Ga,XD=w.keys(ei).map((function(t){return ei[t]}));function ZD(t){return-1!==XD.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview",t.THEOADS="theoads"}(Ga||(Ga={}));var KD,JD=w.keys(Ga).map((function(t){return Ga[t]}));function $D(t){return-1!==JD.indexOf(t)}function tS(t){try{var i=Aa.UQ.BQ(t),e=JSON.parse(i);if(!function(t,i){var e,s=function(t){return"object"==typeof t&&null!==t}(t),n=VD(t.key),r=VD(t.customer_id),h=WD(t.generation_date),o=WD(t.expiration_date),a=Rr(t.domains_page,VD),u=Rr(t.domains_source,VD),c=Rr(t.sdks,i?ZD:VD),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?e=Rr(t.features,i?$D:VD):(e=!0,t.features=[]);if(!(s&&n&&r&&h&&o&&a&&u&&c&&l&&e))return!1;return!0}(e,!1))throw new g("The provided license could not be decoded correctly.");return e}catch(t){throw new g("The provided license could not be decoded correctly.")}}function iS(){return KD||(KD={zu:dm.href,QQ:Ha.parent&&Ha.parent!==s,FQ:nS()}),KD}var eS,sS=["http:","https:","ftp:","ws:","wss:"];function nS(){var t;try{if(null==Ha?void 0:Ha.top)return Ha.top.location.href}catch(t){}return null==Ha||null==(t=Ha.document)?void 0:t.referrer}!function(t){t[t.YQ=0]="YQ",t[t.GQ=1]="GQ",t[t.VQ=2]="VQ"}(eS||(eS={}));var rS,hS=class{constructor(t,i,e,s,n=[],r="",h=Date.now(),o=[],a=!0){this.WQ=t,this.HQ=i,this.qQ=e,this.XQ=s,this.ZQ=n,this.KQ=r,this.JQ=h,this.$Q=o,this.tF=a}};!function(t){t.GQ="expired",t.iF="invaliddomain",t.eF="invalidsource",t.sF="invalidfeature",t.ha="error"}(rS||(rS={}));var oS=class t{nF(t,i){let e=[];mw(t.sources)?e=[t.sources]:Tn(t.sources)&&(e=t.sources),this.rF(t,e,i),this.hF(e,i)}rF(t,i,e){if(SD(t)||0===e.qQ.length||fS(e.qQ))return;if(!i.every((t=>this.oF(t,e)))){const t="invalidsource",i=Si.aF(t);throw new Rs(uS(t),i)}}hF(t,i){for(const e of t)ho(e)&&Aw(e)&&!e.bypassLicense&&this.uF([Ga.HESP],i)}cF(i){return this.lF(i.$Q)&&this.dF(i)?t.fF(i.XQ)?0:1:2}uF(t,i){for(const e of t)if(!qo(i.ZQ,e)){const t="invalidfeature",i=Si._F(t,e);throw new Rs(uS(t),i)}}lF(t){return 0===t.length||t.some((t=>this.gF(t)))}gF(t){return"web"===function(t){switch(t){case ei.ANDROID:return Ku.zI;case ei.ANDROIDTV:case ei.FIRETV:return Ku.BI;case ei.IOS:return Ku.RI;case ei.TVOS:return Ku.UI;case ei.CHROMECAST:case ei.CHROMECASTCAF:return Ku.QI;case ei.THEOLIVEWEB:return Ku.FI;default:return Ku.jI}}(t)}static fF(t){const i=Number(new Date);return!!t&&i<=t}dF(t){return!(this.wF&&0!==t.HQ.length&&!fS(t.HQ))||!!(this.wF&&this.vF(t.HQ)&&this.AF(t.HQ))}vF(t){return _S(this.FL.zu,t)}AF(t){if(!this.FL.QQ)return!0;if(this.mF)return!0;const i=this.pF();return!!i&&_S(i,t)}pF(){if(!this.FL.QQ)return;const t=Nl.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.FL.FQ?this.FL.FQ:void 0}oF(i,e){return!!t.yF(i,e.qQ)}static yF(t,i){return _S(this.MF(t),i)}static MF(t){return Qs(t)?t:ho(t)&&t.src||""}constructor(t,i,e){this.mF=t,this.TF=i,this.FL=e,this.wF=wS(this.FL)}},aS=class{cF(t){return 0}nF(t,i){}uF(t,i){}};function uS(t){switch(t){case"invaliddomain":return Ui.LICENSE_INVALID_DOMAIN;case"invalidsource":return Ui.LICENSE_INVALID_SOURCE;case"expired":return Ui.LICENSE_EXPIRED;case"invalidfeature":return Ui.LICENSE_INVALID_FEATURE;case"error":return Ui.LICENSE_ERROR}}var cS="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",lS=Oa((()=>{const t="\\.",i="(\\*|"+cS+")";return new RegExp("ip-range\\("+i+t+i+t+i+t+i+"\\)")}));function dS(t,i){let e=t,s=i;if(!e)return!1;if(s=s.trim(),"*"===s)return!0;if(e=e.replace(/\.+$/,""),s===e)return!0;if(D(s,"ip-range(")){const t="\\.",i=s.match(lS()),n=t=>"*"===t?"("+cS+")":t;if(null!==i&&5===i.length){const s=new RegExp("^"+i[1]+t+n(i[2])+t+n(i[3])+t+n(i[4])+"$");return null!==e.match(s)}}return s="."+s,-1!==e.indexOf(s,e.length-s.length)}function fS(t){return t.some((t=>"*"===t))}function _S(t,e){const s=i.Dh(t);if(!gS(s))return!0;for(const i of e){if(dS(s.hostname,i))return!0;if(dS(zf(t),i))return!0}return!1}function gS(t){return-1!==sS.indexOf(t.protocol)}function wS(t){const e=i.Dh(t.zu);return gS(e)&&!function(t){return dS(t.hostname,"localhost")}(e)&&!function(t){return dS(t.hostname,"theoplayer.doubleclick.net")}(e)}var es,Si=class{static _F(t,i){return"The requested feature '"+i+"' is not available with the license for this player."}static aF(t){return"invaliddomain"===t?this.NF:"invalidsource"===t?this.DF:"expired"===t?this.SF:"invalidfeature"===t?this.IF:this.EF}};function vS(t){const i=[t.MM,t.bF,t.LF];switch(t.bF){case 1:i.push(t.Ug);break;case 4:i.push(t.Mf),i.push(t.lt);break;case 5:i.push(t.lt)}return i}Si.EF="The license for this player is invalid.",Si.SF="The usage license for this video player has expired.",Si.NF="The current domain is incompatible with the license for this player.",Si.DF="The provided video source is incompatible with the license for this player.",Si.IF="The requested feature is not available with the license for this player.",function(t){t[t.kF=1]="kF",t[t.xF=4]="xF",t[t.CF=5]="CF",t[t.OF=9]="OF"}(es||(es={}));var Th=new Array(256);for(let t=0;t<256;t+=1)Th[t]=(t<16?"0":"")+t.toString(16);function Xh(){const t=_r(),i=(4294967296*_.random()|0)+t&3029421624,e=(4294967296*_.random()|0)+t&3595553209,s=(4294967296*_.random()|0)+t&1130486254,n=(4294967296*_.random()|0)+t&1284287105;return Th[255&i]+Th[i>>>8&255]+Th[i>>>16&255]+Th[i>>>24&255]+"-"+Th[255&e]+Th[e>>>8&255]+"-"+Th[e>>>16&15|64]+Th[e>>>24&255]+"-"+Th[63&s|128]+Th[s>>>8&255]+"-"+Th[s>>>16&255]+Th[s>>>24&255]+Th[255&n]+Th[n>>>8&255]+Th[n>>>16&255]+Th[n>>>24&255]}function AS(t){return yr(t.replace(/-/g,""))}function cr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const i=16*_.random()|0;return("x"===t?i:3&i|8).toString(16)}))}function Uo(){return i.Kd()}var mS,pS="theoplayer-session-id";function yS(){if(!mS){const t=_D.Wb(pS);t?mS=t:(mS=Xh(),_D.iP(pS,mS))}return mS}var MS=/[^\x00-\x7E]/g;function TS(t){return"\\u"+Es(t.charCodeAt(0).toString(16),4,"0")}var NS="https://license.theoplayer.com";function DS(t){const i=function(t){const i=[];return function(t,i,e){return JSON.stringify(t,i,e).replace(MS,TS)}(t,((t,e)=>{if(Ut(e)){if(-1!==i.indexOf(e))return null;i.push(e)}return e}))}(function(t){return[t.jF,t.Ix,t.WQ,t.dp,t.PF,t.zF,t.BF.map(vS)]}(t));return Aa.UQ.RQ(i)}var SS=class{get BF(){return this.KB}RF(){return Boolean(this.PF)}get PF(){return this.UF}async QF(t){if(!(await this.YF.FF()).tF)return;const i={bF:es.kF,LF:_r(),Ug:t};await this.LU(i)}async GF(){if(!(await this.YF.FF()).tF)return;const t={bF:es.OF,LF:_r()};await this.LU(t)}async VF(t,i){const e={bF:es.xF,LF:_r(),Mf:i,lt:t};await this.LU(e)}async WF(t){const i={bF:es.CF,LF:_r(),lt:t};await this.LU(i)}async LU(t){const i=await this.YF.FF();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.HF.RQ(i.WQ)&&t.bF!==es.CF||(t.bF===es.kF?this.qF():this.RF()||this.qF(),t.MM=this.Ik++,this.KB.push(t),!function(t){return t===es.kF||t===es.CF}(t.bF)?this.KB.length>this.XF&&await this.ZF():await this.KF())}async KF(t){for(void 0===t&&(t=!1);this.KB.length>0;)await this.ZF(t)}async JF(t){const i=await this.YF.FF();return{jF:_r(),Ix:yS(),WQ:this.HF.RQ(i.WQ)||"dev",dp:this.Jk,PF:this.UF,zF:this.tY,BF:t}}async ZF(t){void 0===t&&(t=!1);const i=this.KB.splice(0,this.iY),e=await this.JF(i);t?this.eY(e):this.sY(e),this.nY=Uo()}async sY(t){const i=DS(t),e=new ss({zu:NS,fI:i,pI:!1,wI:oe.Ru,_I:{"Content-Type":Fs.mj},jS:4e3,gI:yt.POST});try{const t=await this.EI.LS(e);await t.gj()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+i}}eY(t){const i=DS(t);this.EI.eY({zu:NS,fI:i,HP:Fs.mj})}qF(){this.RF()&&this.KF(),this.UF=Xh(),this.Ik=0}gn(){Rn.rY(this.hY),m(this.oY),this.KF()}constructor(t,i,e,s=Aa.lh,n=0,r=1){this.Jk=t,this.EI=i,this.YF=e,this.HF=s,this.XF=n,this.iY=r,this.KB=[],this.UF=null,this.nY=0,this.tY="unknown",this.Ik=0,this.aY=()=>{Uo()-this.nY>6e4&&this.KF()},this.hY=()=>{this.KF(!0)},Rn.uY(this.hY),this.oY=v(this.aY,6e4)}};var IS=0;var ES=c,le=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,Go=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;le&&Go||(le=function(t){const i=Uo(),e=_.max(0,16-(i-IS)),s=u((()=>t(i+e)),e);return IS=i+e,s},Go=ES),le=le.bind(self),Go=Go.bind(self);var bS=f.UE||f.Ga&&f.JE<13;function LS(t,i,e){const s=t.getImageData(i,e,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var ii,kS=class{get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{drawImage(i){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];return t.cY(i,...s)},texImage2D:(i,e,s,n,r,h)=>t.lY(i,e,s,n,r,h),requestVideoFrameCallback:i=>t.dY(i),cancelVideoFrameCallback:i=>t.fY(i)}}(this)}cY(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];const n=this._Y;return void 0!==n&&(t.drawImage(n,...e),!0)}lY(t,i,e,s,n,r){let h=this._Y;return void 0!==h&&(bS&&(h=this.gY(h)),t.texImage2D(i,e,s,n,r,h),!0)}dY(t){const i=this.wY++,e=this.vY(t,i);return this.AY.set(i,{mY:t,pY:e}),i}fY(t){const i=this.AY.get(t);void 0!==i&&(this.AY.delete(t),i.pY())}vY(t,i){const e=this._Y;if(void 0===e)return na;if(e instanceof HTMLVideoElement&&e.requestVideoFrameCallback){const s=e.requestVideoFrameCallback(((e,s)=>{this.AY.delete(i),t(e,s)}));return()=>e.cancelVideoFrameCallback(s)}{let e;const s=n=>{this.yY()?(this.AY.delete(i),this.MY=!1,t(n,void 0)):e=le(s)};return e=le(s),()=>Go(e)}}yY(){return(!this.t.Ff||this.MY)&&!this.t.e_&&this.t.Jf>=Mw.cT}gY(t){let i=this.TY;void 0===i&&(i=h.createElement("canvas"),this.TY=i);const e=i.getContext("2d"),s=this.t,n=s.a_,r=s.r_,o=i.width,a=i.height;e.clearRect(0,0,i.width,i.height),o===n&&a===r||(i.width=n,i.height=r),e.drawImage(t,0,0,n,r);let u=!1;return n>0&&LS(e,n-1,0)&&(i.width=o,u=!0),r>0&&LS(e,0,r-1)&&(i.height=a,u=!0),u&&e.drawImage(t,0,0,n,r),i}gn(){this.AY.forEach((t=>t.pY())),this.AY.clear(),this.t.fn(Co.ew,this.NY),this.t.fn(Co.pw,this.DY),this._Y=void 0,this.TY=void 0}constructor(t){this._Y=void 0,this.Xa=void 0,this.TY=void 0,this.AY=I(),this.wY=1,this.MY=!0,this.DY=()=>{this.MY=!0},this.NY=()=>{this._Y=this.t.v_(),this.AY.forEach(((t,i)=>{t.pY(),t.pY=this.vY(t.mY,i)}))},this.t=t,this.t.yn(Co.ew,this.NY),this.t.yn(Co.pw,this.DY),this.NY()}};(ii||(ii={})).pn="dimensionchange";var xS,CS=class extends Bo{get _u(){return 0}get ku(){return 0}},OS=class extends wn{constructor(t,i){super(ii.pn),this.width=t,this.height=i}},jS=class{constructor(t,i){this.we=t,this.mY=i}},PS=class extends jS{get _u(){return this.SY}get ku(){return this.IY}gn(){this.EY.disconnect()}constructor(t,i){super(t,i),this.SY=0,this.IY=0,this.bY=t=>{if(t.length>0){const i=t[t.length-1].contentRect;this.IY=i.width,this.SY=i.height,this.mY(this.IY,this.SY)}},this.EY=new Ha.ResizeObserver(this.bY),this.EY.observe(this.we)}};var zS=["Webkit","Moz","O","ms"],BS=(()=>{let t=!1;try{if(void 0!==Ha&&"function"==typeof Ha.addEventListener){const i=w.defineProperty({},"passive",{get(){t=!0}});Ha.addEventListener("testPassiveEventSupport",na,i),Ha.removeEventListener("testPassiveEventSupport",na,i)}}catch(t){}return t})(),RS=ke();function US(t){return RS.has(t)||RS.set(t,function(t){const i=(xS||(xS=Ha&&Ha.document&&Ha.document.createElement("span")),xS);if(!i||!i.style)return t;if(void 0!==i.style[t])return t;const e=t.charAt(0).toUpperCase()+t.slice(1);for(const t of zS){const s=t+e;if(void 0!==i.style[s])return s}return t}(t)),RS.get(t)}function QS(t){const i=t.style;i.position="absolute",i.left="0",i.right="0",i.bottom="0",i.top="0",i.overflow="scroll",i.zIndex="-1",i.visibility="hidden"}function FS(t){const i=t.style;i.position="absolute",i.left="0",i.top="0",i[US("transition")]="0s"}var YS=class extends jS{gn(){Go(this.LY),this.LY=0,this.kY.removeEventListener("scroll",this.xY),this.CY.removeEventListener("scroll",this.xY),zu(this.OY),s&&s.removeEventListener("resize",this.jY)}get _u(){return this.we.getBoundingClientRect().height||this.SY||0}get ku(){return this.we.getBoundingClientRect().width||this.IY||0}constructor(t,i,e){super(t,i),this.LY=0,this.IY=NaN,this.SY=NaN,this.PY=void 0,this.tr=()=>{const t=1e5;this.zY.style.width=t+"px",this.zY.style.height=t+"px",this.kY.scrollLeft=t,this.kY.scrollTop=t,this.CY.scrollLeft=t,this.CY.scrollTop=t,0===this.CY.scrollTop&&le(this.tr)},this.BY=()=>{const t=this.ku,i=this._u;this.mY(t,i),this.IY=t,this.SY=i,this.tr(),this.LY=0},this.xY=()=>{if(this.LY)return;const t=this.ku,i=this._u;t===this.IY&&i===this.SY||(this.LY=le(this.BY))},this.jY=()=>{this.PY||(this.PY=u(this.RY,66))},this.RY=()=>{this.PY=void 0,this.UY()},this.UY=()=>{this.xY()};const n=function(t,i){return s.getComputedStyle(t,void 0).getPropertyValue(i)||t.style[i]}(t,"position");e||"static"!==n||(t.style.position="relative");const r=h.createElement("div");this.OY=r,this.kY=h.createElement("div"),this.zY=h.createElement("div"),this.CY=h.createElement("div"),this.QY=h.createElement("div"),QS(this.kY),QS(this.CY),FS(this.zY),function(t){FS(t),t.style.width="200%",t.style.height="200%"}(this.QY),r.appendChild(this.kY),r.appendChild(this.CY),this.kY.appendChild(this.zY),this.CY.appendChild(this.QY),t.appendChild(r),this.kY.addEventListener("scroll",this.xY),this.CY.addEventListener("scroll",this.xY),s&&s.addEventListener("resize",this.jY),this.xY()}},GS=class extends Bo{bn(t){this.EY||("function"==typeof Ha.ResizeObserver?this.EY=new PS(this.we,this.bY):this.EY=new YS(this.we,this.bY,t))}gn(){this.Vo(),this.EY&&(this.EY.gn(),this.EY=void 0)}get _u(){return this.EY?this.EY._u:0}get ku(){return this.EY?this.EY.ku:0}constructor(t){super(),this.EY=void 0,this.bY=(t,i)=>{this.Co(new OS(t,i))},this.we=t}},uh=class extends wn{constructor(){super(ge.ra)}};var VS=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let i of t)if(i[1]in h)return{FY:i[0],YY:i[1],GY:i[2],VY:i[3],Qe:i[4],WY:i[5]}}(),WS=class extends wn{constructor(){super(ge.ca)}},HS=class t extends Bo{static ia(t){return Boolean(VS&&h[VS.VY]&&VS.FY in t)}mo(){const t=this.we[VS.FY]();t&&t.then?t.then(this.HY,this.qY):(h.removeEventListener(VS.WY,this.qY),h.addEventListener(VS.WY,this.qY))}So(){const t=h[VS.YY]();t&&t.then?t.then(this.HY,this.qY):(h.removeEventListener(VS.WY,this.qY),h.addEventListener(VS.WY,this.qY))}cR(){const t=this.cs,i=this.we===h[VS.GY];this.cs=i,t!==i&&this.Co(new uh)}lR(){this.Co(new CN)}gn(){this.Vo(),h.removeEventListener(VS.Qe,this.HY),h.removeEventListener(VS.WY,this.qY)}constructor(i){super(),this.cs=!1,this.HY=()=>this.cR(),this.qY=()=>this.lR(),this.we=i,this.ta=t.ia(i),h.addEventListener(VS.Qe,this.HY),this.cR()}},qS=class t extends Bo{static ia(t){return f.Ga&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}mo(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("fullscreen")?f.Ga?requestAnimationFrame((()=>this.we.webkitSetPresentationMode("fullscreen"))):this.we.webkitSetPresentationMode("fullscreen"):this.we.webkitEnterFullscreen()}So(){this.we.webkitSupportsPresentationMode&&this.we.webkitSupportsPresentationMode("inline")?this.we.webkitSetPresentationMode("inline"):this.we.webkitExitFullscreen()}cR(){const t=this.cs;let i;i=this.we.webkitPresentationMode?"fullscreen"===this.we.webkitPresentationMode:Boolean(this.we.webkitDisplayingFullscreen),this.cs=i,t!==i&&this.Co(new uh)}gn(){this.Vo(),this.we.removeEventListener("webkitbeginfullscreen",this.HY),this.we.removeEventListener("webkitendfullscreen",this.HY),this.we.removeEventListener("webkitpresentationmodechanged",this.HY)}constructor(i){super(),this.cs=!1,this.HY=()=>this.cR(),this.we=i,this.ta=t.ia(i),this.we.addEventListener("webkitbeginfullscreen",this.HY),this.we.addEventListener("webkitendfullscreen",this.HY),this.we.addEventListener("webkitpresentationmodechanged",this.HY),this.cR()}},XS=class extends Bo{get ta(){return!!this.XY&&this.XY.ta}get cs(){return this.oR}mo(){this.XY?this.XY.mo():this.Co(new CN)}So(){for(const t of this.ZY)t.cs&&t.So()}KY(t){this.XY=t}JY(t){this.ZY.push(t),t.yn(ge.ra,this.cR),t.yn(ge.ha,this.Ds),this.cR()}$Y(t){Qr(this.ZY,t),t.fn(ge.ra,this.cR),t.fn(ge.ha,this.Ds)}tG(){for(const t of this.ZY)if(t.cs)return!0;return!1}tr(){this.XY=void 0,this.oR=!1;const t=this.ZY.slice();for(const i of t)this.$Y(i),i.gn();this.cR()}gn(){this.Vo(),this.tr()}constructor(...t){super(...t),this.ZY=[],this.XY=void 0,this.oR=!1,this.cR=()=>{const t=this.oR,i=this.tG();t!==i&&(this.oR=i,this.Co(new uh))}}},ZS=class extends Bo{get ta(){return!!this.iG&&this.eG.ta}get cs(){return this.eG.cs}mo(){this.iG&&this.eG.mo()}So(){this.eG.So()}sG(){this.eG.yn([ge.ra,ge.ca],this.cR),this.eG.yn(ge.ha,this.Ds)}nG(){this.eG.fn([ge.ra,ge.ca],this.cR),this.eG.fn(ge.ha,this.Ds)}Yn(){const t=this.eG,i=this.t.w_();if(t===i)return;this.oa=!0;const e=this.cs,s=this.ta;e&&this.So(),this.nG(),this.eG=i,this.sG(),e&&!this.cs&&this.ta?this.mo():this.So(),this.oa=!1,s!==this.ta&&this.Co(new WS),e!==this.cs&&this.Co(new uh)}gn(){this.Vo(),this.nG(),this.t.fn(Co.$g,this.rG)}constructor(t,i){super(),this.oa=!1,this.rG=()=>this.Yn(),this.cR=t=>{this.oa||this.Co(t)},this.t=t,this.iG=i,this.eG=new Ba,this.sG(),this.t.yn(Co.$g,this.rG),this.Yn()}},Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"};function KS(){}var JS=Number.isNaN||function(t){return t!=t},$S=KS;function Hi(t){return"object"==typeof t&&null!==t||"function"==typeof t}function tI(t){return t.slice()}function iI(t,i,e,s,n){new j(t).set(new j(e,s,n),i)}function eI(t){return!1!==function(t){if("number"!=typeof t)return!1;if(JS(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function sI(t,i,e){if("function"!=typeof t)throw new b("Argument is not a function");return Function.prototype.apply.call(t,i,e)}function nI(t,i,e,s){var n=t[i];if(void 0!==n){if("function"!=typeof n)throw new b(n+" is not a method");switch(e){case 0:return function(){return hI(n,t,s)};case 1:return function(i){var e=[i].concat(s);return hI(n,t,e)}}}return function(){return gs(void 0)}}function rI(t,i,e){var s=t[i];if(void 0!==s)return sI(s,t,e)}function hI(t,i,e){try{return gs(sI(t,i,e))}catch(t){return jo(t)}}function oI(t){if(t=Number(t),JS(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function aI(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new b("size property of a queuing strategy must be a function");return function(i){return t(i)}}var uI=Promise,cI=Promise.prototype.then,lI=Promise.resolve.bind(uI),dI=Promise.reject.bind(uI);function ot(t){return new uI(t)}function gs(t){return lI(t)}function jo(t){return dI(t)}function wa(t,i,e){return cI.call(t,i,e)}function ns(t,i,e){wa(wa(t,i,e),void 0,$S)}function fI(t,i){ns(t,i)}function _I(t,i){ns(t,void 0,i)}function Wh(t,i,e){return wa(t,i,e)}function gI(t){wa(t,void 0,$S)}var wI=function(){function t(){this.hG=0,this.oG=0,this.aG={uG:[],cG:void 0},this.lG=this.aG,this.hG=0,this.oG=0}return w.defineProperty(t.prototype,"length",{get:function(){return this.oG},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var i=this.lG,e=i;16383===i.uG.length&&(e={uG:[],cG:void 0}),i.uG.push(t),e!==i&&(this.lG=e,i.cG=e),++this.oG},t.prototype.shift=function(){var t=this.aG,i=t,e=this.hG,s=e+1,n=t.uG,r=n[e];return 16384===s&&(i=t.cG,s=0),--this.oG,this.hG=s,t!==i&&(this.aG=i),n[e]=void 0,r},t.prototype.forEach=function(t){for(var i=this.hG,e=this.aG,s=e.uG;!(i===s.length&&void 0===e.cG||i===s.length&&(i=0,0===(s=(e=e.cG).uG).length));)t(s[i]),++i},t.prototype.peek=function(){var t=this.aG,i=this.hG;return t.uG[i]},t}();function ps(t,i,e){var s=null;!0===e&&(s=w.prototype);var n=w.create(s);return n.value=t,n.done=i,n}function vI(t,i){t.dG=!0,t.fG=i,i._G=t,"readable"===i.ja?yI(t):"closed"===i.ja?function(t){yI(t),NI(t)}(t):MI(t,i.gG)}function AI(t,i){return nh(t.fG,i)}function mI(t){"readable"===t.fG.ja?TI(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,i){MI(t,i)}(t,new b("Reader was released and can no longer be used to monitor the stream's closedness")),t.fG._G=void 0,t.fG=void 0}function pI(t){return new b("Cannot "+t+" a stream using a released reader")}function yI(t){t.Mx=ot((function(i,e){t.wG=i,t.vG=e}))}function MI(t,i){yI(t),TI(t,i)}function TI(t,i){gI(t.Mx),t.vG(i),t.wG=void 0,t.vG=void 0}function NI(t){t.wG(void 0),t.wG=void 0,t.vG=void 0}var DI=Sa("[[CancelSteps]]"),SI=Sa("[[PullSteps]]");function II(t,i){void 0===i&&(i=!1);var e=new OI(t);return e.dG=i,e}function EI(t){return ot((function(i,e){var s={Kb:i,$b:e};t._G.AG.push(s)}))}function bI(t,i,e){var s=t._G;s.AG.shift().Kb(ps(i,e,s.dG))}function LI(t){return t._G.AG.length}function kI(t){var i=t._G;return void 0!==i&&!!Gr(i)}var xI,CI,OI=function(){function t(t){if(!1===Ab(t))throw new b("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===la(t))throw new b("This stream has already been locked for exclusive reading by another reader");vI(this,t),this.AG=new wI}return w.defineProperty(t.prototype,"closed",{get:function(){return Gr(this)?this.Mx:jo(PI("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return Gr(this)?void 0===this.fG?jo(pI("cancel")):AI(this,t):jo(PI("cancel"))},t.prototype.read=function(){return Gr(this)?void 0===this.fG?jo(pI("read from")):jI(this):jo(PI("read"))},t.prototype.releaseLock=function(){if(!Gr(this))throw PI("releaseLock");if(void 0!==this.fG){if(this.AG.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");mI(this)}},t}();function Gr(t){return!!Hi(t)&&!!w.prototype.hasOwnProperty.call(t,"AG")}function jI(t){var i=t.fG;return i.mG=!0,"closed"===i.ja?gs(ps(void 0,!0,t.dG)):"errored"===i.ja?jo(i.gG):i.pG[SI]()}function PI(t){return new b("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof Sa.asyncIterator&&((xI={})[Sa.asyncIterator]=function(){return this},CI=xI,w.defineProperty(CI,Sa.asyncIterator,{enumerable:!1}));var zI={next:function(){if(!1===BI(this))return jo(RI("next"));var t=this.yG;return void 0===t.fG?jo(pI("iterate")):Wh(jI(t),(function(i){var e=i.done;return e&&mI(t),ps(i.value,e,!0)}))},return:function(t){if(!1===BI(this))return jo(RI("next"));var i=this.yG;if(void 0===i.fG)return jo(pI("finish iterating"));if(i.AG.length>0)return jo(new b("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.MG){var e=AI(i,t);return mI(i),Wh(e,(function(){return ps(t,!0,!0)}))}return mI(i),gs(ps(t,!0,!0))}};function BI(t){return!!Hi(t)&&!!w.prototype.hasOwnProperty.call(t,"yG")}function RI(t){return new b("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function UI(t){var i=t.TG.shift();return t.NG-=i.size,t.NG<0&&(t.NG=0),i.value}function QI(t,i,e){if(!eI(e=Number(e)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.TG.push({value:i,size:e}),t.NG+=e}function Lo(t){t.TG=new wI,t.NG=0}void 0!==CI&&w.setPrototypeOf(zI,CI),w.defineProperty(zI,"next",{enumerable:!1}),w.defineProperty(zI,"return",{enumerable:!1});var FI=Sa("[[AbortSteps]]"),YI=Sa("[[ErrorSteps]]"),GI=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),WI(this);var e=i.size,s=i.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=aI(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(uE.prototype);function r(){return rI(i,"start",[n])}var h=nI(i,"write",1,[n]),o=nI(i,"close",0,[]),a=nI(i,"abort",1,[]);cE(t,n,r,h,o,a,e,s)}(this,t,s=oI(s),n)}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===ch(this))throw vE("locked");return HI(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===ch(this)?jo(vE("abort")):!0===HI(this)?jo(new b("Cannot abort a stream that already has a writer")):qI(this,t)},t.prototype.close=function(){return!1===ch(this)?jo(vE("close")):!0===HI(this)?jo(new b("Cannot close a stream that already has a writer")):!0===$I(this)?jo(new b("Cannot close an already-closing stream")):XI(this)},t.prototype.getWriter=function(){if(!1===ch(this))throw vE("getWriter");return VI(this)},t}();function VI(t){return new eE(t)}function WI(t){t.ja="writable",t.gG=void 0,t.wL=void 0,t.DG=void 0,t.SG=new wI,t.IG=void 0,t.EG=void 0,t.bG=void 0,t.LG=void 0,t.kG=!1}function ch(t){return!!Hi(t)&&!!w.prototype.hasOwnProperty.call(t,"DG")}function HI(t){return void 0!==t.wL}function qI(t,i){var e=t.ja;if("closed"===e||"errored"===e)return gs(void 0);if(void 0!==t.LG)return t.LG.xG;var s=!1;"erroring"===e&&(s=!0,i=void 0);var n=ot((function(e,n){t.LG={xG:void 0,Kb:e,$b:n,CG:i,OG:s}}));return t.LG.xG=n,!1===s&&KI(t,i),n}function XI(t){var i=t.ja;if("closed"===i||"errored"===i)return jo(new b("The stream (in "+i+" state) is not in the writable state and cannot be closed"));var e=ot((function(i,e){var s={Kb:i,$b:e};t.EG=s})),s=t.wL;return void 0!==s&&!0===t.kG&&"writable"===i&&IE(s),function(t){QI(t,"close",0),fE(t)}(t.DG),e}function ZI(t,i){"writable"!==t.ja?JI(t):KI(t,i)}function KI(t,i){var e=t.DG;t.ja="erroring",t.gG=i;var s=t.wL;void 0!==s&&hE(s,i),!1===function(t){if(void 0===t.IG&&void 0===t.bG)return!1;return!0}(t)&&!0===e.jG&&JI(t)}function JI(t){t.ja="errored",t.DG[YI]();var i=t.gG;if(t.SG.forEach((function(t){t.$b(i)})),t.SG=new wI,void 0!==t.LG){var e=t.LG;if(t.LG=void 0,!0===e.OG)return e.$b(i),void tE(t);ns(t.DG[FI](e.CG),(function(){e.Kb(),tE(t)}),(function(i){e.$b(i),tE(t)}))}else tE(t)}function $I(t){return void 0!==t.EG||void 0!==t.bG}function tE(t){void 0!==t.EG&&(t.EG.$b(t.gG),t.EG=void 0);var i=t.wL;void 0!==i&&yE(i,t.gG)}function iE(t,i){var e=t.wL;void 0!==e&&i!==t.kG&&(!0===i?function(t){TE(t)}(e):IE(e)),t.kG=i}var eE=function(){function t(t){if(!1===ch(t))throw new b("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===HI(t))throw new b("This stream has already been locked for exclusive writing by another writer");this.zG=t,t.wL=this;var i=t.ja;if("writable"===i)!1===$I(t)&&!0===t.kG?TE(this):DE(this),mE(this);else if("erroring"===i)NE(this,t.gG),mE(this);else if("closed"===i)DE(this),function(t){mE(t),ME(t)}(this);else{var e=t.gG;NE(this,e),pE(this,e)}}return w.defineProperty(t.prototype,"closed",{get:function(){return!1===sE(this)?jo(ih("closed")):this.Mx},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===sE(this))throw ih("desiredSize");if(void 0===this.zG)throw AE("desiredSize");return function(t){var i=t.zG,e=i.ja;if("errored"===e||"erroring"===e)return null;if("closed"===e)return 0;return dE(i.DG)}(this)},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"ready",{get:function(){return!1===sE(this)?jo(ih("ready")):this.BG},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===sE(this)?jo(ih("abort")):void 0===this.zG?jo(AE("abort")):function(t,i){var e=t.zG;return qI(e,i)}(this,t)},t.prototype.close=function(){if(!1===sE(this))return jo(ih("close"));var t=this.zG;return void 0===t?jo(AE("close")):!0===$I(t)?jo(new b("Cannot close an already-closing stream")):nE(this)},t.prototype.releaseLock=function(){if(!1===sE(this))throw ih("releaseLock");void 0!==this.zG&&oE(this)},t.prototype.write=function(t){return!1===sE(this)?jo(ih("write")):void 0===this.zG?jo(AE("write to")):aE(this,t)},t}();function sE(t){return!!Hi(t)&&!!w.prototype.hasOwnProperty.call(t,"zG")}function nE(t){return XI(t.zG)}function rE(t,i){"pending"===t.UG?yE(t,i):function(t,i){pE(t,i)}(t,i)}function hE(t,i){"pending"===t.QG?SE(t,i):function(t,i){NE(t,i)}(t,i)}function oE(t){var i=t.zG,e=new b("Writer was released and can no longer be used to monitor the stream's closedness");hE(t,e),rE(t,e),i.wL=void 0,t.zG=void 0}function aE(t,i){var e=t.zG,s=e.DG,n=function(t,i){try{return t.FG(i)}catch(i){return _E(t,i),1}}(s,i);if(e!==t.zG)return jo(AE("write to"));var r=e.ja;if("errored"===r)return jo(e.gG);if(!0===$I(e)||"closed"===r)return jo(new b("The stream is closing or closed and cannot be written to"));if("erroring"===r)return jo(e.gG);var h=function(t){return ot((function(i,e){var s={Kb:i,$b:e};t.SG.push(s)}))}(e);return function(t,i,e){var s={chunk:i};try{QI(t,s,e)}catch(i){return void _E(t,i)}var n=t.YG;if(!1===$I(n)&&"writable"===n.ja){iE(n,gE(t))}fE(t)}(s,i,n),h}var uE=function(){function t(){throw new b("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!Hi(t))return!1;if(!w.prototype.hasOwnProperty.call(t,"YG"))return!1;return!0}(this))throw new b("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.YG.ja&&wE(this,t)},t.prototype[FI]=function(t){var i=this.GG(t);return lE(this),i},t.prototype[YI]=function(){Lo(this)},t}();function cE(t,i,e,s,n,r,h,o){i.YG=t,t.DG=i,i.TG=void 0,i.NG=void 0,Lo(i),i.jG=!1,i.FG=o,i.VG=h,i.WG=s,i.HG=n,i.GG=r;var a=gE(i);iE(t,a),ns(gs(e()),(function(){i.jG=!0,fE(i)}),(function(e){i.jG=!0,ZI(t,e)}))}function lE(t){t.WG=void 0,t.HG=void 0,t.GG=void 0,t.FG=void 0}function dE(t){return t.VG-t.NG}function fE(t){var i=t.YG;if(!1!==t.jG&&void 0===i.IG)if("erroring"!==i.ja){if(0!==t.TG.length){var e=function(t){return t.TG.peek().value}(t);"close"===e?function(t){var i=t.YG;(function(t){t.bG=t.EG,t.EG=void 0})(i),UI(t);var e=t.HG();lE(t),ns(e,(function(){!function(t){t.bG.Kb(void 0),t.bG=void 0,"erroring"===t.ja&&(t.gG=void 0,void 0!==t.LG&&(t.LG.Kb(),t.LG=void 0)),t.ja="closed";var i=t.wL;void 0!==i&&ME(i)}(i)}),(function(t){!function(t,i){t.bG.$b(i),t.bG=void 0,void 0!==t.LG&&(t.LG.$b(i),t.LG=void 0),ZI(t,i)}(i,t)}))}(t):function(t,i){var e=t.YG;!function(t){t.IG=t.SG.shift()}(e);var s=t.WG(i);ns(s,(function(){!function(t){t.IG.Kb(void 0),t.IG=void 0}(e);var i=e.ja;if(UI(t),!1===$I(e)&&"writable"===i){var s=gE(t);iE(e,s)}fE(t)}),(function(i){"writable"===e.ja&&lE(t),function(t,i){t.IG.$b(i),t.IG=void 0,ZI(t,i)}(e,i)}))}(t,e.chunk)}}else JI(i)}function _E(t,i){"writable"===t.YG.ja&&wE(t,i)}function gE(t){return dE(t)<=0}function wE(t,i){var e=t.YG;lE(t),KI(e,i)}function vE(t){return new b("WritableStream.prototype."+t+" can only be used on a WritableStream")}function ih(t){return new b("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function AE(t){return new b("Cannot "+t+" a stream using a released writer")}function mE(t){t.Mx=ot((function(i,e){t.wG=i,t.vG=e,t.UG="pending"}))}function pE(t,i){mE(t),yE(t,i)}function yE(t,i){gI(t.Mx),t.vG(i),t.wG=void 0,t.vG=void 0,t.UG="rejected"}function ME(t){t.wG(void 0),t.wG=void 0,t.vG=void 0,t.UG="resolved"}function TE(t){t.BG=ot((function(i,e){t.qG=i,t.XG=e})),t.QG="pending"}function NE(t,i){TE(t),SE(t,i)}function DE(t){TE(t),IE(t)}function SE(t,i){gI(t.BG),t.XG(i),t.qG=void 0,t.XG=void 0,t.QG="rejected"}function IE(t){t.qG(void 0),t.qG=void 0,t.XG=void 0,t.QG="fulfilled"}function EE(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var bE="undefined"!=typeof DOMException?DOMException:void 0;var LE=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(bE)?bE:function(){var t=function(t,i){this.message=t||"",this.name=i||"Error",g.captureStackTrace&&g.captureStackTrace(this,this.constructor)};return t.prototype=w.create(g.prototype),w.defineProperty(t.prototype,"constructor",{value:t,writable:!0,configurable:!0}),t}();function kE(t,i,e,s,n,r){var h=II(t),o=VI(i);t.mG=!0;var a=!1,u=gs(void 0);return ot((function(c,l){var d,f,_,g;if(void 0!==r){if(d=function(){var e=new LE("Aborted","AbortError"),r=[];!1===s&&r.push((function(){return"writable"===i.ja?qI(i,e):gs(void 0)})),!1===n&&r.push((function(){return"readable"===t.ja?nh(t,e):gs(void 0)})),m((function(){return Promise.all(r.map((function(t){return t()})))}),!0,e)},!0===r.aborted)return void d();r.addEventListener("abort",d)}if(A(t,h.Mx,(function(t){!1===s?m((function(){return qI(i,t)}),!0,t):p(!0,t)})),A(i,o.Mx,(function(i){!1===n?m((function(){return nh(t,i)}),!0,i):p(!0,i)})),f=t,_=h.Mx,g=function(){!1===e?m((function(){return function(t){var i=t.zG,e=i.ja;return!0===$I(i)||"closed"===e?gs(void 0):"errored"===e?jo(i.gG):nE(t)}(o)})):p()},"closed"===f.ja?g():fI(_,g),!0===$I(i)||"closed"===i.ja){var w=new b("the destination writable stream closed before all data could be piped to it");!1===n?m((function(){return nh(t,w)}),!0,w):p(!0,w)}function v(){var t=u;return wa(u,(function(){return t!==u?v():void 0}))}function A(t,i,e){"errored"===t.ja?e(t.gG):_I(i,e)}function m(t,e,s){function n(){ns(t(),(function(){return y(e,s)}),(function(t){return y(!0,t)}))}!0!==a&&(a=!0,"writable"===i.ja&&!1===$I(i)?fI(v(),n):n())}function p(t,e){!0!==a&&(a=!0,"writable"===i.ja&&!1===$I(i)?fI(v(),(function(){return y(t,e)})):y(t,e))}function y(t,i){oE(o),mI(h),void 0!==r&&r.removeEventListener("abort",d),t?l(i):c(void 0)}gI(ot((function(t,i){!function e(s){s?t():wa(!0===a?gs(!0):wa(o.BG,(function(){return wa(jI(h),(function(t){return!0===t.done||(u=wa(aE(o,t.value),void 0,KS),!1)}))})),e,i)}(!1)})))}))}var xE=function(){function t(){throw new b}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===CE(this))throw FE("desiredSize");return RE(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===CE(this))throw FE("close");if(!1===UE(this))throw new b("The stream is not in a state that permits close");zE(this)},t.prototype.enqueue=function(t){if(!1===CE(this))throw FE("enqueue");if(!1===UE(this))throw new b("The stream is not in a state that permits enqueue");return BE(this,t)},t.prototype.error=function(t){if(!1===CE(this))throw FE("error");Qa(this,t)},t.prototype[DI]=function(t){Lo(this);var i=this.ZG(t);return PE(this),i},t.prototype[SI]=function(){var t=this.KG;if(this.TG.length>0){var i=UI(this);return!0===this.JG&&0===this.TG.length?(PE(this),mb(t)):OE(this),gs(ps(i,!1,t._G.dG))}var e=EI(t);return OE(this),e},t}();function CE(t){return!!Hi(t)&&!!w.prototype.hasOwnProperty.call(t,"KG")}function OE(t){!1!==jE(t)&&(!0!==t.$G?(t.$G=!0,ns(t.tV(),(function(){t.$G=!1,!0===t.iV&&(t.iV=!1,OE(t))}),(function(i){Qa(t,i)}))):t.iV=!0)}function jE(t){var i=t.KG;return!1!==UE(t)&&(!1!==t.jG&&(!0===la(i)&&LI(i)>0||RE(t)>0))}function PE(t){t.tV=void 0,t.ZG=void 0,t.FG=void 0}function zE(t){var i=t.KG;t.JG=!0,0===t.TG.length&&(PE(t),mb(i))}function BE(t,i){var e=t.KG;if(!0===la(e)&&LI(e)>0)bI(e,i,!1);else{var s=void 0;try{s=t.FG(i)}catch(i){throw Qa(t,i),i}try{QI(t,i,s)}catch(i){throw Qa(t,i),i}}OE(t)}function Qa(t,i){var e=t.KG;"readable"===e.ja&&(Lo(t),PE(t),pb(e,i))}function RE(t){var i=t.KG.ja;return"errored"===i?null:"closed"===i?0:t.VG-t.NG}function UE(t){var i=t.KG.ja;return!1===t.JG&&"readable"===i}function QE(t,i,e,s,n,r,h){i.KG=t,i.TG=void 0,i.NG=void 0,Lo(i),i.jG=!1,i.JG=!1,i.iV=!1,i.$G=!1,i.FG=h,i.VG=r,i.tV=s,i.ZG=n,t.pG=i,ns(gs(e()),(function(){i.jG=!0,OE(i)}),(function(t){Qa(i,t)}))}function FE(t){return new b("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var YE=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&_.floor(t)===t},GE=function(){function t(){throw new b("ReadableStreamBYOBRequest cannot be used directly")}return w.defineProperty(t.prototype,"view",{get:function(){if(!1===HE(this))throw ab("view");return this.aS},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===HE(this))throw ab("respond");if(void 0===this.eV)throw new b("This BYOB request has been invalidated");this.aS.buffer,function(t,i){if(i=Number(i),!1===eI(i))throw new RangeError("bytesWritten must be a finite");eb(t,i)}(this.eV,t)},t.prototype.respondWithNewView=function(t){if(!1===HE(this))throw ab("respond");if(void 0===this.eV)throw new b("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new b("You can only respond with array buffer views");t.buffer,function(t,i){var e=t.sV.peek();if(e.byteOffset+e.bytesFilled!==i.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(e.byteLength!==i.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");e.buffer=i.buffer,eb(t,i.byteLength)}(this.eV,t)},t}(),VE=function(){function t(){throw new b("ReadableByteStreamController constructor cannot be used directly")}return w.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===WE(this))throw ub("byobRequest");if(void 0===this.nV&&this.sV.length>0){var t=this.sV.peek(),i=new j(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),e=w.create(GE.prototype);!function(t,i,e){t.eV=i,t.aS=e}(e,this,i),this.nV=e}return this.nV},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===WE(this))throw ub("desiredSize");return hb(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===WE(this))throw ub("close");if(!0===this.JG)throw new b("The stream has already been closed; do not close it again!");var t=this.rV.ja;if("readable"!==t)throw new b("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var i=t.rV;if(t.NG>0)return void(t.JG=!0);if(t.sV.length>0){if(t.sV.peek().bytesFilled>0){var e=new b("Insufficient bytes to fill elements in the given buffer");throw rb(t,e),e}}nb(t),mb(i)}(this)},t.prototype.enqueue=function(t){if(!1===WE(this))throw ub("enqueue");if(!0===this.JG)throw new b("stream is closed or draining");var i=this.rV.ja;if("readable"!==i)throw new b("The stream (in "+i+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new b("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,i){var e=t.rV,s=i.buffer,n=i.byteOffset,r=i.byteLength,h=s;if(!0===kI(e)){if(0===LI(e))ZE(t,h,n,r);else bI(e,new j(h,n,r),!1)}else!0===db(e)?(ZE(t,h,n,r),ib(t)):ZE(t,h,n,r);ah(t)}(this,t)},t.prototype.error=function(t){if(!1===WE(this))throw ub("error");rb(this,t)},t.prototype[DI]=function(t){this.sV.length>0&&(this.sV.peek().bytesFilled=0);Lo(this);var i=this.ZG(t);return nb(this),i},t.prototype[SI]=function(){var t=this.rV;if(this.NG>0){var i=this.TG.shift();this.NG-=i.byteLength,$E(this);var e=void 0;try{e=new j(i.buffer,i.byteOffset,i.byteLength)}catch(t){return jo(t)}return gs(ps(e,!1,t._G.dG))}var s=this.hV;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return jo(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:j,readerType:"default"};this.sV.push(r)}var h=EI(t);return ah(this),h},t}();function WE(t){return!!Hi(t)&&!!w.prototype.hasOwnProperty.call(t,"rV")}function HE(t){return!!Hi(t)&&!!w.prototype.hasOwnProperty.call(t,"eV")}function ah(t){var i=function(t){var i=t.rV;if("readable"!==i.ja)return!1;if(!0===t.JG)return!1;if(!1===t.jG)return!1;if(!0===kI(i)&&LI(i)>0)return!0;if(!0===db(i)&&lb(i)>0)return!0;var e=hb(t);if(e>0)return!0;return!1}(t);!1!==i&&(!0!==t.$G?(t.$G=!0,ns(t.tV(),(function(){t.$G=!1,!0===t.iV&&(t.iV=!1,ah(t))}),(function(i){rb(t,i)}))):t.iV=!0)}function qE(t,i){var e=!1;"closed"===t.ja&&(e=!0);var s=XE(i);"default"===i.readerType?bI(t,s,e):function(t,i,e){var s=t._G,n=s.oV.shift();n.Kb(ps(i,e,s.dG))}(t,s,e)}function XE(t){var i=t.bytesFilled,e=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,i/e)}function ZE(t,i,e,s){t.TG.push({buffer:i,byteOffset:e,byteLength:s}),t.NG+=s}function KE(t,i){var e=i.elementSize,s=i.bytesFilled-i.bytesFilled%e,n=_.min(t.NG,i.byteLength-i.bytesFilled),r=i.bytesFilled+n,h=r-r%e,o=n,a=!1;h>s&&(o=h-i.bytesFilled,a=!0);for(var u=t.TG;o>0;){var c=u.peek(),l=_.min(o,c.byteLength),d=i.byteOffset+i.bytesFilled;iI(i.buffer,d,c.buffer,c.byteOffset,l),c.byteLength===l?u.shift():(c.byteOffset+=l,c.byteLength-=l),t.NG-=l,JE(t,l,i),o-=l}return a}function JE(t,i,e){tb(t),e.bytesFilled+=i}function $E(t){0===t.NG&&!0===t.JG?(nb(t),mb(t.rV)):ah(t)}function tb(t){void 0!==t.nV&&(t.nV.eV=void 0,t.nV.aS=void 0,t.nV=void 0)}function ib(t){for(;t.sV.length>0;){if(0===t.NG)return;var i=t.sV.peek();!0===KE(t,i)&&(sb(t),qE(t.rV,i))}}function eb(t,i){var e=t.sV.peek();if("closed"===t.rV.ja){if(0!==i)throw new b("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,i){i.buffer=i.buffer;var e=t.rV;if(!0===db(e))for(;lb(e)>0;)qE(e,sb(t))}(t,e)}else!function(t,i,e){if(e.bytesFilled+i>e.byteLength)throw new RangeError("bytesWritten out of range");if(JE(t,i,e),!(e.bytesFilled<e.elementSize)){sb(t);var s=e.bytesFilled%e.elementSize;if(s>0){var n=e.byteOffset+e.bytesFilled,r=e.buffer.slice(n-s,n);ZE(t,r,0,r.byteLength)}e.buffer=e.buffer,e.bytesFilled-=s,qE(t.rV,e),ib(t)}}(t,i,e);ah(t)}function sb(t){var i=t.sV.shift();return tb(t),i}function nb(t){t.tV=void 0,t.ZG=void 0}function rb(t,i){var e=t.rV;"readable"===e.ja&&(!function(t){tb(t),t.sV=new wI}(t),Lo(t),nb(t),pb(e,i))}function hb(t){var i=t.rV.ja;return"errored"===i?null:"closed"===i?0:t.VG-t.NG}function ob(t,i,e){var s=w.create(VE.prototype);var n=nI(i,"pull",0,[s]),r=nI(i,"cancel",1,[]),h=i.autoAllocateChunkSize;if(void 0!==h&&(h=Number(h),!1===YE(h)||h<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,i,e,s,n,r,h){i.rV=t,i.iV=!1,i.$G=!1,i.nV=void 0,i.TG=i.NG=void 0,Lo(i),i.JG=!1,i.jG=!1,i.VG=oI(r),i.tV=s,i.ZG=n,i.hV=h,i.sV=new wI,t.pG=i,ns(gs(e()),(function(){i.jG=!0,ah(i)}),(function(t){rb(i,t)}))}(t,s,(function(){return rI(i,"start",[s])}),n,r,e,h)}function ab(t){return new b("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function ub(t){return new b("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function cb(t){return ot((function(i,e){var s={Kb:i,$b:e};t._G.oV.push(s)}))}function lb(t){return t._G.oV.length}function db(t){var i=t._G;return void 0!==i&&!!_b(i)}var fb=function(){function t(t){if(!Ab(t))throw new b("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===WE(t.pG))throw new b("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(la(t))throw new b("This stream has already been locked for exclusive reading by another reader");vI(this,t),this.oV=new wI}return w.defineProperty(t.prototype,"closed",{get:function(){return _b(this)?this.Mx:jo(gb("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return _b(this)?void 0===this.fG?jo(pI("cancel")):AI(this,t):jo(gb("cancel"))},t.prototype.read=function(t){return _b(this)?void 0===this.fG?jo(pI("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?jo(new b("view must have non-zero byteLength")):function(t,i){var e=t.fG;if(e.mG=!0,"errored"===e.ja)return jo(e.gG);return function(t,i){var e=t.rV,s=1;i.constructor!==DataView&&(s=i.constructor.BYTES_PER_ELEMENT);var n=i.constructor,r={buffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.sV.length>0)return t.sV.push(r),cb(e);if("closed"===e.ja)return gs(ps(new n(r.buffer,r.byteOffset,0),!0,e._G.dG));if(t.NG>0){if(!0===KE(t,r)){var h=XE(r);return $E(t),gs(ps(h,!1,e._G.dG))}if(!0===t.JG){var o=new b("Insufficient bytes to fill elements in the given buffer");return rb(t,o),jo(o)}}t.sV.push(r);var a=cb(e);return ah(t),a}(e.pG,i)}(this,t)):jo(new b("view must be an array buffer view")):jo(gb("read"))},t.prototype.releaseLock=function(){if(!_b(this))throw gb("releaseLock");if(void 0!==this.fG){if(this.oV.length>0)throw new b("Tried to release a reader lock when that reader has pending read() calls un-settled");mI(this)}},t}();function _b(t){return!!Hi(t)&&!!w.prototype.hasOwnProperty.call(t,"oV")}function gb(t){return new b("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var et=function(){function t(t,i){void 0===t&&(t={}),void 0===i&&(i={}),vb(this);var e=i.size,s=i.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==e)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),ob(this,t,s=oI(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=aI(e);void 0===s&&(s=1),function(t,i,e,s){var n=w.create(xE.prototype),r=nI(i,"pull",0,[n]),h=nI(i,"cancel",1,[]);QE(t,n,(function(){return rI(i,"start",[n])}),r,h,e,s)}(this,t,s=oI(s),r)}}return w.defineProperty(t.prototype,"locked",{get:function(){if(!1===Ab(this))throw oh("locked");return la(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===Ab(this)?jo(oh("cancel")):!0===la(this)?jo(new b("Cannot cancel a stream that already has a reader")):nh(this,t)},t.prototype.getReader=function(t){var i=(void 0===t?{}:t).mode;if(!1===Ab(this))throw oh("getReader");if(void 0===i)return II(this,!0);if("byob"===(i=String(i)))return function(t,i){void 0===i&&(i=!1);var e=new fb(t);return e.dG=i,e}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,i){var e=t.writable,s=t.readable,n=void 0===i?{}:i,r=n.preventClose,h=n.preventAbort,o=n.preventCancel,a=n.signal;if(!1===Ab(this))throw oh("pipeThrough");if(!1===ch(e))throw new b("writable argument to pipeThrough must be a WritableStream");if(!1===Ab(s))throw new b("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),h=Boolean(h),o=Boolean(o),void 0!==a&&!EE(a))throw new b("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===la(this))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===HI(e))throw new b("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return gI(kE(this,e,r,h,o,a)),s},t.prototype.pipeTo=function(t,i){var e=void 0===i?{}:i,s=e.preventClose,n=e.preventAbort,r=e.preventCancel,h=e.signal;return!1===Ab(this)?jo(oh("pipeTo")):!1===ch(t)?jo(new b("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===h||EE(h)?!0===la(this)?jo(new b("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===HI(t)?jo(new b("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):kE(this,t,s,n,r,h):jo(new b("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===Ab(this))throw oh("tee");var t=function(t,i){var e,s,n,r,h,o=II(t),a=!1,u=!1,c=!1,l=ot((function(t){h=t}));function d(){return!0===a||(a=!0,gI(Wh(jI(o),(function(t){if(a=!1,!0===t.done)return!1===u&&zE(n.pG),void(!1===c&&zE(r.pG));var i=t.value,e=i,s=i;!1===u&&BE(n.pG,e),!1===c&&BE(r.pG,s)})))),gs(void 0)}function f(){}return n=wb(f,d,(function(i){if(u=!0,e=i,!0===c){var n=tI([e,s]),r=nh(t,n);h(r)}return l})),r=wb(f,d,(function(i){if(c=!0,s=i,!0===u){var n=tI([e,s]),r=nh(t,n);h(r)}return l})),_I(o.Mx,(function(t){Qa(n.pG,t),Qa(r.pG,t)})),[n,r]}(this);return tI(t)},t.prototype.getIterator=function(t){var i=(void 0===t?{}:t).preventCancel,e=void 0!==i&&i;if(!1===Ab(this))throw oh("getIterator");return function(t,i){void 0===i&&(i=!1);var e=II(t),s=w.create(zI);return s.yG=e,s.MG=Boolean(i),s}(this,e)},t}();function wb(t,i,e,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=w.create(et.prototype);return vb(r),QE(r,w.create(xE.prototype),t,i,e,s,n),r}function vb(t){t.ja="readable",t._G=void 0,t.gG=void 0,t.mG=!1}function Ab(t){return!!Hi(t)&&!!w.prototype.hasOwnProperty.call(t,"pG")}function la(t){return void 0!==t._G}function nh(t,i){return t.mG=!0,"closed"===t.ja?gs(void 0):"errored"===t.ja?jo(t.gG):(mb(t),Wh(t.pG[DI](i),KS))}function mb(t){t.ja="closed";var i=t._G;void 0!==i&&(Gr(i)&&(i.AG.forEach((function(t){t.Kb(ps(void 0,!0,i.dG))})),i.AG=new wI),NI(i))}function pb(t,i){t.ja="errored",t.gG=i;var e=t._G;void 0!==e&&(Gr(e)?(e.AG.forEach((function(t){t.$b(i)})),e.AG=new wI):(e.oV.forEach((function(t){t.$b(i)})),e.oV=new wI),TI(e,i))}function oh(t){return new b("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof Sa.asyncIterator&&w.defineProperty(et.prototype,Sa.asyncIterator,{value:et.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});!function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}t.prototype.size=function(t){return t.byteLength}}();var yb=function(){function t(t){var i=t.highWaterMark;this.highWaterMark=i}return t.prototype.size=function(){return 1},t}(),_i=function(){function t(t,i,e){void 0===t&&(t={}),void 0===i&&(i={}),void 0===e&&(e={});var s=i.size,n=i.highWaterMark,r=e.size,h=e.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var o=aI(s);if(void 0===n&&(n=1),n=oI(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=aI(r);void 0===h&&(h=0),h=oI(h),function(t,i,e,s,n,r){function h(){return i}function o(i){return function(t,i){var e=t.aV;if(!0===t.kG){return Wh(t.uV,(function(){var s=t.cV;if("erroring"===s.ja)throw s.gG;return Lb(e,i)}))}return Lb(e,i)}(t,i)}function a(i){return function(t,i){return Tb(t,i),gs(void 0)}(t,i)}function u(){return function(t){var i=t.lV,e=t.aV,s=e.dV();return Eb(e),Wh(s,(function(){if("errored"===i.ja)throw i.gG;var t=i.pG;!0===UE(t)&&zE(t)}),(function(e){throw Tb(t,e),i.gG}))}(t)}function c(){return function(t){return Db(t,!1),t.uV}(t)}function l(i){return Nb(t,i),gs(void 0)}t.cV=function(t,i,e,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var h=w.create(GI.prototype);return WI(h),cE(h,w.create(uE.prototype),t,i,e,s,n,r),h}(h,o,u,a,e,s),t.lV=wb(h,c,l,n,r),t.kG=void 0,t.uV=void 0,t.fV=void 0,Db(t,!0),t.aV=void 0}(this,ot((function(t){a=t})),n,o,h,u),function(t,i){var e=w.create(Sb.prototype),s=function(t){try{return bb(e,t),gs(void 0)}catch(t){return jo(t)}},n=i.transform;if(void 0!==n){if("function"!=typeof n)throw new b("transform is not a method");s=function(t){return hI(n,i,[t,e])}}var r=nI(i,"flush",0,[e]);!function(t,i,e,s){i._V=t,t.aV=i,i.gV=e,i.dV=s}(t,e,s,r)}(this,t);var c=rI(t,"start",[this.aV]);a(c)}return w.defineProperty(t.prototype,"readable",{get:function(){if(!1===Mb(this))throw xb("readable");return this.lV},enumerable:!0,configurable:!0}),w.defineProperty(t.prototype,"writable",{get:function(){if(!1===Mb(this))throw xb("writable");return this.cV},enumerable:!0,configurable:!0}),t}();function Mb(t){return!!Hi(t)&&!!w.prototype.hasOwnProperty.call(t,"aV")}function Tb(t,i){Qa(t.lV.pG,i),Nb(t,i)}function Nb(t,i){Eb(t.aV),_E(t.cV.DG,i),!0===t.kG&&Db(t,!1)}function Db(t,i){void 0!==t.uV&&t.fV(),t.uV=ot((function(i){t.fV=i})),t.kG=i}var Sb=function(){function t(){throw new b("TransformStreamDefaultController instances cannot be created directly")}return w.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Ib(this))throw kb("desiredSize");return RE(this._V.lV.pG)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===Ib(this))throw kb("enqueue");bb(this,t)},t.prototype.error=function(t){if(!1===Ib(this))throw kb("error");!function(t,i){Tb(t._V,i)}(this,t)},t.prototype.terminate=function(){if(!1===Ib(this))throw kb("terminate");!function(t){var i=t._V,e=i.lV.pG;!0===UE(e)&&zE(e);var s=new b("TransformStream terminated");Nb(i,s)}(this)},t}();function Ib(t){return!!Hi(t)&&!!w.prototype.hasOwnProperty.call(t,"_V")}function Eb(t){t.gV=void 0,t.dV=void 0}function bb(t,i){var e=t._V,s=e.lV.pG;if(!1===UE(s))throw new b("Readable side is not in a state that permits enqueue");try{BE(s,i)}catch(t){throw Nb(e,t),e.lV.gG}var n=function(t){return!0!==jE(t)}(s);n!==e.kG&&Db(e,!0)}function Lb(t,i){return Wh(t.gV(i),void 0,(function(i){throw Tb(t._V,i),i}))}function kb(t){return new b("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function xb(t){return new b("TransformStream.prototype."+t+" can only be used on a TransformStream")}var Cb,Ob=class extends Jo{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}};function jb(t){return function(t){return new et({start(i){for(const e of t)i.enqueue(e);i.close()}})}([t])}function Pb(t){return jb(function(t){return new j(t)}(t))}function zb(t,i){let e=i;const s=t.getReader(),n=new ue,r=()=>{h();const t=new Sn;s.cancel(t).catch(na),n.Jb(t)},h=()=>{e&&(e.Yd(r),e=void 0)};e&&(e.zd?r():e.Fd(r));const o=[],a=t=>t.done?(h(),Promise.resolve(o)):(o.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{h(),n.Zb(t)}),(t=>{h(),n.Jb(t)})),n.tL}function wt(t,i){return zb(t,i).then((t=>uc(t).buffer))}function Bb(t,i){let e=i;const{readable:s,writable:n}=new _i,r=n.getWriter(),h=()=>{e&&e.qd()};return r.closed.then(h,h),t.then((t=>(e=void 0,r.releaseLock(),t.pipeTo(n).catch(na))),(t=>(e=void 0,r.releaseLock(),n.abort(t).catch(na)))),s}function Rb(t){const{readable:i,writable:e}=new _i;return t.pipeTo(e,{preventCancel:!0}).catch((i=>{let e;e=fh(i)?i[0]===i[1]||ut(i[0])&&ut(i[1])?i[0]:new Ob(i):i,t.cancel(e).catch(na)})),i.tee()}function Ub(t){return _n(new j(t))}function Qb(t){return Lu(t).buffer}!function(t){t[t.qS=0]="qS",t[t.wV=1]="wV"}(Cb||(Cb={}));var Fb="content-type",Yb="text/plain;charset=UTF-8",Gb=class{ZO(t){return this.bI(t).then(JSON.parse)}bO(t,i){switch(t){case oe.WS:return this.gj(i);case oe.HS:return this.ZO(i);case oe.qS:return this.vV();case oe.Ru:return this.bI(i);default:throw new b}}};function Vb(t,i,e){if(t instanceof Gb)return t;if(t instanceof et)return function(t,i){return new Hb({Rg:0,vV:t,HP:Wb(i)})}(t,e);const s=Wb(e),n=Promise.resolve(t).then((t=>function(t,i){if(t){if("string"==typeof t)return{Rg:oe.Ru,fI:t,HP:i||Yb};if(t instanceof ArrayBuffer||Uu(t))return{Rg:oe.WS,fI:tL(t),HP:i};if(td(t)||fh(t))return{Rg:oe.HS,fI:t,HP:i};throw new b("Unsupported BodyInit type")}return{Rg:oe.Ru,fI:null,HP:i}}(t,s)));return new Hb({Rg:1,tL:n,AV:i})}function Wb(t){return(t.get(Fb)||"").toLowerCase()}var Hb=class t extends Gb{get mV(){return this.pV}get yV(){return 0===this.MV.Rg}TV(){return this.NV.tL}bI(t){return this.DV(qb,t)}ZO(t){return this.DV(Zb,t)}gj(t){return this.DV(Jb,t)}vV(){return this.SV(function(t){return 0===t.Rg?t.vV:Bb(t.tL.then($b).then(Pb),t.AV)}(this.MV))}DV(t,i){if(this.pV)return Promise.reject(new b("Already used"));this.pV=!0;const e=t(this.MV,i);return this.NV.Xd(e.then(na)),e}SV(t){if(this.pV)throw new b("Already used");if(t.locked)throw new b("Body stream is locked");this.pV=!0;const i=new _i,e=Promise.resolve(t.pipeTo(i.writable));return this.NV.Xd(e),i.readable}EV(t){this.MV=t,1===t.Rg&&t.tL.catch(na)}bV(){if(this.pV)throw new b("Already used");const i=function(t){if(0===t.Rg){const[i,e]=t.vV.tee();return[{Rg:t.Rg,vV:i,HP:t.HP},{Rg:t.Rg,vV:e,HP:t.HP}]}{const[i,e]=t.AV.Zd();return[{Rg:t.Rg,tL:t.tL,AV:i},{Rg:t.Rg,tL:t.tL,AV:e}]}}(this.MV),e=i[0],s=i[1];return this.EV(e),new t(s)}constructor(t){super(),this.pV=!1,this.NV=new ue,this.NV.tL.catch(na),this.EV(t)}};function qb(t,i){return 0===t.Rg?wt(t.vV,i).then(Ub):(i&&t.AV.Xd(i),Ir(t.tL.then(Xb),t.AV))}function Xb(t){switch(t.Rg){case oe.Ru:return Promise.resolve(t.fI||"");case oe.WS:return Promise.resolve(t.fI).then(Ub);case oe.HS:return Promise.resolve(t.fI).then(JSON.stringify)}}function Zb(t,i){return 0===t.Rg?qb(t,i).then(JSON.parse):(i&&t.AV.Xd(i),Ir(t.tL.then(Kb),t.AV))}function Kb(t){return t.Rg===oe.HS?Promise.resolve(t.fI):Xb(t).then(JSON.parse)}function Jb(t,i){return 0===t.Rg?wt(t.vV,i):(i&&t.AV.Xd(i),Ir(t.tL.then($b),t.AV))}function $b(t){switch(t.Rg){case oe.WS:return Promise.resolve(t.fI);case oe.Ru:case oe.HS:return Xb(t).then(Qb)}}function tL(t){return t instanceof ArrayBuffer?t:He(ks(t)).buffer}var iL=class extends Gb{get mV(){return this.LV.mV}get yV(){return this.LV.yV}TV(){return this.LV.TV()}bI(t){return this.LV.bI(t)}ZO(t){return this.LV.ZO(t)}gj(t){return this.LV.gj(t)}vV(t){return this.LV.vV(t)}bV(){return this.LV.bV()}constructor(t){super(),this.LV=t}};function Jr(t){return t.OS>=200&&t.OS<=299||304===t.OS}var fa=class t extends iL{zm(t){return this.bO(this.wI,t)}Lm(){return new t({zm:this.bV(),LS:this.LS},this)}constructor(t,i){let e,s,n,r,h;i?(e=i._I,s=i.wI,n=i.OS,r=i.KO,h=i.kV):(e=[],s=oe.Ru,n=200,r="OK",h=!1);const o=t.LS,a=new Z(t._I||e),u=t.wI||s,c=t.LI||(i&&i.LS===o?i.LI:o.zu),l=i?i.LV:null;super(Vb(void 0!==t.zm?t.zm:l,t.AV||new Wr,a)),this._I=a,this.LS=o,this.LI=c,this.wI=u,this.OS=void 0!==t.OS?t.OS:n,this.KO=void 0!==t.KO?String(t.KO):r,this.kV=t.kV||h}},eL=class{LS(t){const i=function(t){return new fa({zm:null,_I:{},LS:t,LI:t.zu,wI:t.wI,OS:0,KO:Co.fw})}(new ss(t));return Promise.resolve(i)}eY(t){}gn(){}};var Ta=class t{static get xV(){return t.CV||(t.CV=new t(new eL)),t.CV}LS(t){const i=this.OV(t);return this.jV.LS(i)}eY(t){return this.jV.eY(this.PV(t))}OV(i){let e=new ss(i);if(!this.zV){const i=t.BV(e.zu);e=new ss({zu:i},e)}return e}PV(i){let e=i.zu;return this.zV||(e=t.BV(e)),{zu:e,fI:i.fI}}static BV(t){return i.RV&&D(t,"http://")?t.replace(":","s:"):t}gn(){this.jV.gn()}constructor(t,i=!0){this.jV=t,this.zV=i}};function sL(t){let i;return{get url(){return t.zu},get method(){return t.gI},get headers(){return i||(i=t._I.XS()),i},get body(){return t.fI},get useCredentials(){return t.pI},get type(){return t.Rg},get subType(){return t.AI},get mediaType(){return t.mI},get responseType(){return t.wI}}}function nL(t){switch(t.toLowerCase()){case"arraybuffer":return oe.WS;case"json":return oe.HS;case"stream":return oe.qS;default:return oe.Ru}}function rL(t){switch(t.toUpperCase()){case"POST":return yt.POST;case"PUT":return yt.PUT;case"DELETE":return yt.DELETE;case"HEAD":return yt.HEAD;case"OPTIONS":return yt.OPTIONS;default:return yt.GET}}function hL(t){switch(t.toLowerCase()){case"manifest":return sa.JS;case"segment":return sa.$S;case"preload-hint":return sa.tI;case"content-protection":return sa.iI;default:return sa.hT}}function oL(t){switch(t.toLowerCase()){case"initialization-segment":return Kt.eI;case"fairplay-license":return Kt.sI;case"fairplay-certificate":return Kt.nI;case"widevine-license":return Kt.rI;case"widevine-certificate":return Kt.hI;case"playready-license":return Kt.oI;case"clearkey-license":return Kt.aI;case"aes128-key":return Kt.uI;default:return Kt.hT}}function aL(t){switch(t.toLowerCase()){case"audio":return ls.Mm;case"video":return ls.ym;case"text":return ls.Ru;case"image":return ls.rT;default:return ls.hT}}Ta.CV=void 0;var uL=class{get QV(){return this.FV.tL}get va(){return this.Xa||(this.Xa=this.YV()),this.Xa}get GV(){return this.VV}get WV(){return!this.VV}get HV(){return this.qV>0}get xS(){return this.CS}$m(){this.VV=!0,this.FV.Zb(null)}XV(){this.FV.Jb(new Ob(this.ZV))}KV(t){if(!this.WV)throw new b("Cannot respond more than once");if(!Ut(t))throw new b("Expected valid response");this.CS=this.JV(t),this.$m()}$V(){try{const t=this.tW(this.va);t?this.iW(t):this.HV||this.GV||this.$m()}catch(t){this.ZV.push(t),this.XV()}}iW(t){if(this.GV)throw new g("Request has been redirected or a response already exists");if(ya(t))this.eW(t);else{if("function"!=typeof t)throw new b("Expected promise or function");{const i=new ue,e=t=>{t?i.Jb(t):i.Zb(void 0)};try{const s=t(e);ya(s)&&i.Xd(s)}catch(t){i.Jb(t)}this.eW(i.tL)}}}async eW(t){try{this.qV++,await t,this.qV--,this.HV||this.GV||(this.ZV.length?this.XV():this.$m())}catch(t){this.qV--,this.ZV.push(t),this.HV||this.GV||this.XV()}}constructor(t,i){this.sW=t,this.tW=i,this.FV=new ue,this.ZV=[],this.Xa=void 0,this.VV=!1,this.CS=void 0,this.qV=0}},cL=class t extends uL{get fI(){return this.nW}get _I(){return this.sW._I}get LS(){return this.sW.LS}get xS(){return this.CS}get OS(){return this.sW.OS}get KO(){return this.sW.KO}get zu(){return this.sW.LI}static rW(t,i,e){const s=void 0===t.body?e:t.body;return new fa({zm:s,LS:i.LS,wI:i.LS.wI,_I:t.headers,OS:t.status,KO:t.statusText,LI:t.url,kV:!0},i)}YV(){return function(t){let i;const e=sL(t.LS);return{get closed(){return!t.WV},get request(){return e},get url(){return t.zu},get status(){return t.OS},get statusText(){return t.KO},get headers(){return i||(i=t._I.XS()),i},get body(){return t.fI},respondWith:i=>t.KV(i),waitUntil:i=>t.iW(i)}}(this)}JV(i){return t.rW(i,this.sW,this.nW)}constructor(t,i,e){super(t,i),this.nW=e,this.$V()}},lL=class extends uL{get fI(){return this.sW.fI}get WV(){return this.hW&&!this.VV}get _I(){return this.sW._I}get gI(){return this.sW.gI}get oW(){return this.aW}get xS(){return this.CS}get wI(){return this.sW.wI}get jS(){return this.sW.jS}get vI(){return this.sW.vI}get Wd(){return this.sW.Wd}get Rg(){return this.sW.Rg}get AI(){return this.sW.AI}get mI(){return this.sW.mI}get zu(){return this.sW.zu}get pI(){return this.sW.pI}get MI(){return this.sW.MI}get yI(){return this.sW.yI}get jg(){return this.sW.jg}get TI(){return this.sW.TI}YV(){return function(t){let i;return{get url(){return t.zu},get method(){return t.gI},get headers(){return i||(i=t._I.XS()),i},get body(){return t.fI},get closed(){return!t.WV},get useCredentials(){return t.pI},get type(){return t.Rg},get subType(){return t.AI},get mediaType(){return t.mI},get responseType(){return t.wI},redirect:i=>t.uW(i),respondWith:i=>t.KV(i),waitUntil:i=>t.iW(i)}}(this)}JV(t){const i=this.sW.fI,e=new fa({zm:i,_I:{},LS:this.sW,LI:this.sW.zu,wI:this.sW.wI,OS:200,KO:"OK"});return cL.rW(t,e,i)}uW(t){if(!this.WV)throw new b("Cannot redirect, already redirected or has a response");let i;i=Qs(t)?{url:t}:t,this.aW=function(t,i){return new ss({zu:void 0===t.url?i.zu:t.url,gI:void 0!==t.method?rL(t.method):void 0,_I:t.headers,fI:t.body,pI:t.useCredentials,Rg:void 0!==t.type?hL(t.type):void 0,AI:void 0!==t.subType?oL(t.subType):void 0,mI:void 0!==t.mediaType?aL(t.mediaType):void 0,wI:void 0!==t.responseType?nL(t.responseType):void 0},i)}(i,this.sW),this.$m()}constructor(t,i,e){super(t,i),this.aW=void 0,this.hW=e,this.$V()}};var eu,dL=class extends Ta{cW(t){this.lW.cW(t)}dW(t){this.lW.dW(t)}fW(t){this.lW.fW(t)}jU(t){this.lW.jU(t)}RU(t){this.lW.RU(t)}constructor(t,i=!0){const e=new fL(t);super(e,i),this.lW=e}},fL=class{async LS(t){let i;try{i=await this._W(t,t.Wd)}catch(i){if(i instanceof W)return await this.gW(i,t.Wd);throw i}if(i=await this.wW(i,t.Wd),Jr(i))return i;throw new bt(i)}eY(t){return this.jV.eY(t)}async _W(t,i){fo(i);let e,s=t;for(const t of this.vW.slice()){fo(i);const n=new lL(s,t,!e);if(!n.GV)try{await n.QV}catch(t){0;continue}n.oW&&!e?s=n.oW:n.xS&&!e&&(e=n.xS)}return e||this.jV.LS(s)}async gW(t,i){let e;if(t instanceof bt)e=t.xS;else{const i=t.LS;e=new fa({zm:null,LS:i,wI:i.wI,OS:0,KO:""})}const s=await this.wW(e,i);if(s===e)throw t;if(Jr(s))return s;throw new bt(s)}async wW(t,i){let e=t;for(const t of this.AW.slice()){fo(i);const s=await Promise.resolve(e.Lm().zm(i)),n=new cL(e,t,s);if(!n.GV)try{await n.QV}catch(t){0;continue}e=n.xS||e}return e}cW(t){this.vW.unshift(t)}dW(t){this.vW.push(t)}fW(t){Qr(this.vW,t)}jU(t){this.AW.unshift(t)}RU(t){Qr(this.AW,t)}gn(){this.jV.gn(),No(this.vW),No(this.AW)}constructor(t){this.vW=[],this.AW=[],this.jV=t}},_L=class{get va(){return this.Xa||(this.Xa=function(t){return{addRequestInterceptor(i){t.cW(i)},removeRequestInterceptor(i){t.fW(i)},addResponseInterceptor(i){t.jU(i)},removeResponseInterceptor(i){t.RU(i)}}}(this)),this.Xa}cW(t){this.EI.cW(t)}fW(t){this.EI.fW(t)}jU(t){this.EI.jU(t)}RU(t){this.EI.RU(t)}constructor(t){this.EI=t}},gL=class extends Bo{get va(){return this.Xa||(this.Xa=function(t){return{get online(){return t.Uf},get estimator(){return function(t){return{get bandwidth(){return t.wP},get roundTripTime(){return t.vP}}}(t.mW)},setEstimator(i){t.pW(function(t){if(!t)return;return{get wP(){return ef(t.bandwidth)},get vP(){return ef(t.roundTripTime)},AP:i=>function(t){if(!t)return;return{yW(i){t.markRequestStart(i)},MW(i){t.markResponseStart(i)},TW(i,e){t.markResponseData(i,e)},NW(i){t.markResponseEnd(i)}}}(t.createMeasurer(sL(i)))}}(i))},addRequestInterceptor(i){t.cW(i)},removeRequestInterceptor(i){t.fW(i)},addResponseInterceptor(i){t.jU(i)},removeResponseInterceptor(i){t.RU(i)},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}(this)),this.Xa}get Uf(){return this.DW.Uf}get mW(){return this.QB.mW}pW(t){this.QB.pW(t)}cW(t){this.EI.cW(t)}fW(t){this.EI.fW(t)}jU(t){this.EI.jU(t)}RU(t){this.EI.RU(t)}gn(){this.Vo(),this.DW.fn(Co._w,this.SW),this.DW.fn(Co.fw,this.IW)}constructor(t,i,e){super(i),this.DW=t,this.EI=i,this.QB=e,this.SW=t=>{this.Co(t)},this.IW=t=>{this.Co(t)},this.DW.yn(Co._w,this.SW),this.DW.yn(Co.fw,this.IW)}};!function(t){t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth"}(eu||(eu={}));function wL(t,i,e,s,n,r){const h=[];let o=t-_.max(r,1),a=t+n;if(i&&e){const t=os(e,1,5),s=i-t;o=_.min(o,s);const n=i+e+t;a=_.max(a,n)}0!==o&&s.pB(0,o)&&h.push([0,o]);return s.pB(a,1/0)&&h.push([a,1/0]),h}function mh(t){return t instanceof g&&"QuotaExceededError"===t.name}var vL={type:eu.BANDWIDTH};function AL(t){const i=Ms(vL);return Qs(t)?i.type=mL(t):Ut(t)&&function(t){switch(t){case eu.PERFORMANCE:case eu.QUALITY:case eu.BANDWIDTH:return!0;default:return!1}}(t.type)&&(i.type=mL(t.type)),Ut(t)&&Ut(t.metadata)&&(i.metadata=function(t){const i={},e=pc(t.bitrate);return S(e)||(i.bitrate=e),i}(t.metadata)),i}function mL(t){switch(t){case"bandwidth":return eu.BANDWIDTH;case"performance":return eu.PERFORMANCE;case"quality":return eu.QUALITY}}var pL=class extends wn{constructor(t){super("EW"),this.bW=t}},yL=class extends wn{constructor(t){super("LW"),this.kW=t}},ML=class extends wn{constructor(t){super("xW"),this.OW=t}},TL=class extends Bo{jW(t){this.PW=t}get zW(){switch(this.BW.type){case eu.PERFORMANCE:return 0;case eu.QUALITY:return 1/0;case eu.BANDWIDTH:return this.BW.metadata&&void 0!==this.BW.metadata.bitrate?this.BW.metadata.bitrate:va.Lb.hP();default:return va.Lb.hP()}}get va(){return this.Xa}get kW(){return this.BW}set kW(t){this.BW=t,this.Co(new yL(t))}get bW(){return this.RW}set bW(t){this.RW=t,this.Co(new pL(t))}get UW(){return _.min(this.RW,this.QW)}get OW(){return this.FW}set OW(t){this.FW=t,this.Co(new ML(t))}get YW(){return this.QW}get mW(){var t;return null!=(t=this.GW)?t:this.PW.VP}pW(t){this.GW=t}VW(t){let i=_.min(t,.8*this.QW);if(i=_.max(10,i),this.QW===i)return!1;const e=this.UW;this.QW=i;const s=this.UW;return s!==e&&this.Co(new pL(s)),!0}get WW(){return this.HW}set WW(t){this.HW=t}constructor(...t){super(...t),this.Xa=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.kW)},set strategy(i){t.kW=AL(i)},get targetBuffer(){return t.bW},set targetBuffer(i){const e=pc(i);S(e)||(t.bW=e)},get bufferLookbackWindow(){return t.OW},set bufferLookbackWindow(i){const e=pc(i);S(e)||(t.OW=e<=0?30:e)},get maxBufferLength(){return t.YW},get clearBufferWhenSettingTargetQuality(){return t.WW},set clearBufferWhenSettingTargetQuality(i){t.WW=we(i)}}}(this),this.BW=vL,this.RW=20,this.FW=30,this.QW=1/0,this.HW=!1,this.GW=void 0}},NL=class extends hl{fa(){return new DL}constructor(){super("W_")}},DL=class extends wn{constructor(){super("change")}},Fo=class extends Bo{gn(){this.Vo();for(const t of this.KB)this.qW.fn(t,this.XW)}constructor(t,i,e){super(e),this.XW=t=>{Yd(t)&&wc((()=>{this.Co(t.va)}))},this.qW=t,this.KB=i;for(const t of this.KB)this.qW.yn(t,this.XW)}},xa=class extends dt{gn(){this.Vo(),this.qW.cf(this.XW)}constructor(t,i){super(i),this.XW=t=>{Yd(t)&&wc((()=>{this.Co(t.va)}))},this.qW=t,this.qW.sf(this.XW)}};var SL=class extends dt{get VT(){return this.iN}set VT(t){if(this.WT<=t)throw new g("Start time of a clip should be smaller than the end time.");this.iN!==t&&(this.iN=t,this.Co(new NL))}get WT(){return this.nN}set WT(t){if(t<=this.VT)throw new g("End time of a clip should be larger than the start time.");this.nN!==t&&(this.nN=t,this.Co(new NL))}get va(){return this.Xa||(this.Xa=function(t){let i,e={get startTime(){return t.VT},set startTime(i){t.VT=i},get endTime(){return t.WT},set endTime(i){t.WT=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new xa(t,e),e}(this)),this.Xa}tr(){0===this.iN&&this.nN===1/0||(this.iN=0,this.nN=1/0,this.Co(new NL))}ZW(){return new Ai([this.VT,this.WT],[!0,!0])}constructor(...t){super(...t),this.iN=0,this.nN=1/0}},IL=class t extends Fd{Nf(t,i){const e=this.KW.ZW().uB(t);super.Nf(e,i),this.JW()}If(){return super.If()||this.$W}get tH(){return this.i_().length?this.i_():this.KW.ZW().ks()}i_(){return Ai.xn(super.i_()).Sn(this.KW.ZW()).ks()}p_(){this.If()?this.Nf(this.tH.start(0)):this.iH(),super.p_(),this.JW()}async ga(t,i){fo(i),this.$W=!1,this.KW.tr(),await super.ga(t,i)}gn(){return this.KW.fn("W_",this.eH),this._f.fn(Co.Iw,this.wc),this.sH(),super.gn()}E_(t){switch(t.type){case Co.yw:return this.Co(t),this.nH(),!0;case Co.pw:case Co.Zg:return this.Co(t),this.rH(),!0;case Co.Jg:if(this.hH)return!0}return super.E_(t)}get hH(){return this.KW.WT<this.ct}sH(){this.oH&&(Go(this.oH),this.oH=void 0)}JW(){const i=this.Mf,e=this.hH&&i>=this.KW.WT-t.Zl;this.$W&&!e?(this.$W=!1,this.Ff&&this.p_()):this.$W||!e||this.e_||this.aH||(this.$W=!0,this.Co(new jn(i)),this.m_())}iH(){if(this.ct===1/0)return;const i=this.tH,e=Ai.xn(i).uB(this.Mf);M(this.Mf,e,t.Zl)||this.Nf(e)}constructor(i,e){super(i),this.$W=!1,this.oH=void 0,this.aH=!1,this.eH=()=>{this.iH(),this.JW()},this.wc=()=>{this.sH(),this.JW();this.hH&&this.Mf>=this.KW.WT-t.uH&&!this.Sf&&(this.oH=le(this.wc))},this.nH=()=>{this.aH=!0},this.rH=()=>{this.aH&&(this.aH=!1,this.JW())},this.KW=e,this.KW.yn("W_",this.eH),this._f.yn(Co.Iw,this.wc)}};IL.uH=1,IL.Zl=.001;var EL=class{get cH(){return this.lH}set cH(t){this.lH=t}constructor(){this.lH=!1}},bL=class extends Fd{If(){return!this.lH.cH&&super.If()}m_(){this.dH=!0,super.m_()}p_(){this.dH=!1,super.p_()}E_(t){if(this.lH.cH)switch(t.type){case Co.Jg:return this.Mf=0,this.dH||(this.e_?this.fH=!0:this.p_()),!0;case Co.pw:this.fH&&(this.fH=!1,this.p_());break;case Co.Sh:if(this.fH||super.If())return!0}return super.E_(t)}constructor(t,i){super(t),this.fH=!1,this.dH=!1,this.lH=i}};var LL=class{get va(){return this.Xa}get AT(){return this.Qo.jf.AT}get pT(){return this.Qo.jf.pT}get vT(){return this.Qo.jf.vT}get _H(){throw new g("Not implemented")}get gH(){throw new g("Not implemented")}get yT(){return this.Qo.jf.yT}get mT(){return this.Qo.jf.mT}get MT(){return this.Qo.jf.MT}constructor(t){this.Qo=t,this.Xa=function(t){return{get currentBandwidthEstimate(){return t.pT},get corruptedVideoFrames(){return t.AT},get droppedVideoFrames(){return t.vT},get totalBytesLoaded(){return t.yT},get bufferedSegments(){return t.MT}}}(this)}};function kL(t){if(!t||!Er(t))return{vT:0,AT:0,mT:0,pT:0,yT:0,MT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const i=t.getVideoPlaybackQuality();return{vT:i.droppedVideoFrames,AT:i.corruptedVideoFrames||0,mT:i.totalVideoFrames}}return{vT:t.webkitDroppedFrameCount||0,AT:0,mT:t.webkitDecodedFrameCount||0}}var xL=class extends hl{fa(){return new CL}constructor(){super("wH")}},CL=class extends wn{constructor(){super("castingchange")}};var OL=class extends Bo{get vH(){var t,i;return(null==(t=this.AH)?void 0:t.vH)||(null==(i=this.mH)?void 0:i.vH)||!1}get pH(){return this.AH}get yH(){return this.mH}MH(t){this.AH=t,this.TH(t)}NH(t){this.mH=t,this.TH(t)}TH(t){t.yn("statechange",this.DH)}SH(t){t.fn("statechange",this.DH)}get va(){return this.Xa||(this.Xa=function(t){let i;const e={get casting(){return t.vH},get airplay(){var i;return null==(i=t.pH)?void 0:i.va},get chromecast(){var i;return null==(i=t.yH)?void 0:i.va},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Fo(t,["wH"],e),e}(this)),this.Xa}gn(){this.Vo(),this.AH&&(this.SH(this.AH),this.AH=void 0),this.mH&&(this.SH(this.mH),this.mH=void 0)}constructor(...t){super(...t),this.AH=void 0,this.mH=void 0,this.IH=!1,this.Xa=void 0,this.DH=()=>{const t=this.IH,i=this.vH;t!==i&&(this.IH=i,this.Co(new xL))}}},us=class{static async EH(t,i){try{const e=new ss({zu:t,wI:oe.Ru,gI:yt.GET}),s=await i.LS(e);return(await s.zm()).trim()}catch(t){return void ut(t)}}static bH(t){try{const i=tS(t);return new hS(i.key,i.domains_page,i.domains_source,i.expiration_date,i.features,i.customer_id,i.generation_date,i.sdks,i.send_impression)}catch(t){throw new Rs(Ui.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static LH(t){void 0===t&&(t=Aa.lh),i.Qv("The baked-in license is used. Please update the configuration with your license.");const e=t.BQ("F2b-iL'[FL[S"),s=JSON.parse('["F$(:_L50F|aY"]').map((i=>t.BQ(i))),n=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((i=>t.BQ(i))),r=Number(new Date(Number(t.BQ('COD|aHpHa:p3Ceo3Co""')))),h=JSON.parse("[]").map((i=>t.BQ(i)));return new hS(e,s,n,r,h)}static convertLicenseToDummyLicense(t){return new hS(t.WQ,t.HQ,t.qQ,864e13,t.ZQ,t.KQ,Date.now(),t.$Q,t.tF)}},it=class t{static lQ(){return t.Lb||(t.Lb=jL.sC()?new jL:new fD),t.Lb}static Xb(i){t.lQ().Xb(i)}static cQ(){t.lQ().cQ()}static Wb(i){return t.lQ().Wb(i)}static iP(i,e){t.lQ().iP(i,e)}static kH(i){const e=t.Wb(i);if(void 0!==e)return C(e)}static xH(i){return"true"===t.Wb(i)}};it.Lb=void 0;var jL=class extends it{static sC(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}Xb(t){self.localStorage.removeItem(t)}cQ(){self.localStorage.clear()}Wb(t){var i;return null!=(i=self.localStorage.getItem(t))?i:void 0}iP(t,i){self.localStorage.setItem(t,i)}},PL="https://validate.theoplayer.com/1/",zL=72e5,BL=_.floor(14399999*_.random()-zL),RL="THEOplayer.license",UL=class{async CH(){const t=await this.OH(this.jH.license,this.jH.licenseUrl);this.YF.PH(t)}async OH(t,i){let e,s=i;t?e=us.bH(t):s||(e=us.LH()),s||(s=PL+e.WQ);const n=this.zH();let r;if(e&&(r=this.BH.cF(e),r===eS.YQ)){if(this.RH(e.XQ)&&this.RH(null==n?void 0:n.XQ)){const t=await this.UH(s);if(t)return t}return e}if(n){if(this.BH.cF(n)===eS.YQ){if(this.RH(null==n?void 0:n.XQ)){const t=await this.UH(s);if(t)return t}return n}it.Xb(RL)}const h=await us.EH(s,this.EI);let o;if(h){o=us.bH(h);if(this.BH.cF(o)===eS.YQ)return it.iP(RL,h),o;it.Xb(RL)}else if(!this.wF&&e&&r===eS.GQ&&s===PL+e.WQ)return us.convertLicenseToDummyLicense(e);if(!e&&!o)throw new Rs(Ui.LICENSE_ERROR,"The given license is invalid!");this.QH(null!=e?e:o,new Rs(Ui.LICENSE_ERROR,"The given license is invalid!"))}async nF(t){let i=await this.YF.FF();if(this.RH(i.XQ)){var e;const t=null!=(e=this.jH.licenseUrl)?e:PL+i.WQ,s=await this.UH(t);s&&(this.YF.PH(s),i=s)}try{const e=this.BH.cF(i);if(e===eS.VQ){const t=rS.iF;throw new Rs(uS(t),Si.aF(t))}if(e===eS.GQ){const t=rS.GQ;throw new Rs(uS(t),Si.aF(t))}this.BH.nF(t,i)}catch(t){this.FH(t)}}async uF(t){const i=await this.YF.FF();try{this.BH.uF(t,i)}catch(t){this.FH(t)}}async UH(t){try{const i=await us.EH(t,this.EI);if(void 0===i)return;const e=us.bH(i);return this.BH.cF(e)===eS.YQ?(it.iP(RL,i),e):void 0}catch(t){return}}RH(t){return!t||Number(new Date)+2592e5+BL>=t}zH(){const t=it.Wb(RL);if(t)return us.bH(t)}QH(t,i){this.YF.PH(t),this.FH(i)}FH(t){throw Ma(t.message),this.YH.WF(t.message),t}constructor(t,i,e,s,n,r){this.EI=t,this.BH=i,this.YH=e,this.YF=s,this.jH=n,this.FL=r,this.wF=wS(r)}},QL=class{PH(t){this.GH=t,this.VH.Zb()}get WH(){return this.GH}async FF(){return this.GH?Promise.resolve(this.GH):(await this.VH.tL,this.GH)}constructor(){this.VH=new ue}},FL=class extends hl{fa(){return new YL}constructor(){super("W_")}},YL=class extends wn{constructor(){super("change")}};function GL(t){let i;const e={get fontFamily(){return t.HH},set fontFamily(i){t.HH=i},get fontColor(){return t.qH},set fontColor(i){t.qH=i},get fontSize(){return t.XH},set fontSize(i){t.XH=i},get backgroundColor(){return t.ZH},set backgroundColor(i){t.ZH=i},get windowColor(){return t.KH},set windowColor(i){t.KH=i},get edgeStyle(){return t.JH},set edgeStyle(i){t.JH=i},get marginTop(){return t.$H},set marginTop(i){t.$H=i},get marginBottom(){return t.tq},set marginBottom(i){t.tq=i},get marginLeft(){return t.iq},set marginLeft(i){t.iq=i},get marginRight(){return t.nq},set marginRight(i){t.nq=i},addEventListener(t,e){const s=Ko(t,cs);i.yn(s,e)},removeEventListener(t,e){const s=Ko(t,cs);i.fn(s,e)}};return i=new hi(e),t.yn(["W_"],(t=>i.Co(t.va))),e}var VL={HH:void 0,qH:void 0,XH:void 0,ZH:void 0,KH:void 0,JH:void 0,rq:void 0,$H:void 0,tq:void 0,iq:void 0,nq:void 0},xe="THEOplayer.textTrackStyle.",WL=class t extends Bo{get hq(){return this.oq}get HH(){return this.oq.HH}set HH(t){this.Yn({HH:t})}get qH(){return this.oq.qH}set qH(t){this.Yn({qH:t})}get XH(){return this.oq.XH}set XH(t){this.Yn({XH:t})}get ZH(){return this.oq.ZH}set ZH(t){this.Yn({ZH:t})}get KH(){return this.oq.KH}set KH(t){this.Yn({KH:t})}get JH(){return this.oq.JH}set JH(t){this.Yn({JH:t})}get rq(){return this.oq.rq}get $H(){return this.oq.$H}set $H(t){this.Yn({$H:t})}get tq(){return this.oq.tq}set tq(t){this.Yn({tq:t})}get nq(){return this.oq.nq}set nq(t){this.Yn({nq:t})}get iq(){return this.oq.iq}set iq(t){this.Yn({iq:t})}get va(){return this.Xa||(this.Xa=GL(this)),this.Xa}Yn(i){this.oq=Yt({},this.oq,i),t.aq(this.oq),this.Co(new FL)}static uq(){let t=Yt({},VL);return t.HH=it.Wb(xe+"fontFamily")||t.HH,t.qH=it.Wb(xe+"fontColor")||t.qH,t.XH=it.Wb(xe+"fontSize")||t.XH,t.ZH=it.Wb(xe+"backgroundColor")||t.ZH,t.KH=it.Wb(xe+"windowColor")||t.KH,t.JH=it.Wb(xe+"edgeStyle")||t.JH,t}static aq(t){it.iP(xe+"fontFamily",t.HH||""),it.iP(xe+"fontColor",t.qH||""),it.iP(xe+"fontSize",t.XH||""),it.iP(xe+"backgroundColor",t.ZH||""),it.iP(xe+"windowColor",t.KH||""),it.iP(xe+"edgeStyle",t.JH||"")}constructor(){super(),this.Xa=void 0,this.oq=t.uq()}};function HL(t,i){var e,s;t.style.marginLeft=(null!=(e=i.iq)?e:0)+"px",t.style.marginRight=(null!=(s=i.nq)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}var Bi,qL=[Co.jh,Co.Sh,Zt.Rw,Co.Iw,Co.gw,Co.cw,Co.yw,Co.pw,Co.Jg,Co.ww,Co.Ew,Co.Xg,Zt.H_,Co.mw,Nt.ha,Fi.Kg,Fi.Fb,Co.Wg,Co.Vg,Co.Lw,Co.hw,Co.aw,Co.ew,Co.$g],XL={_v:!1};function ZL(t){return t.wd.Rg===Au.KC}(Bi||(Bi={})).cq="lq";var G,KL=["lq"];!function(t){t[t.dq=0]="dq",t[t.qS=1]="qS",t[t.fq=2]="fq"}(G||(G={}));var JL,$L=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"];!function(t){t.rU="_q",t.gq="wq"}(JL||(JL={}));var tk=class extends Bo{get ht(){throw new g("Not implemented")}get wd(){return this.wC}get UP(){return this.BC}get rt(){throw new g("Not implemented")}async vq(t,i){const e=await this.Jx.Kx(t.kb,i),s=await e.Qx();return await this.Aq(s),s}mq(t){const i=this.zx;return i?0!==t.qP.length&&t.qP.some((t=>t.cA.kb===i.cA)):0!==this.wC.qP.length?t.qP.some((t=>this.wC.qP.some((i=>t.cA===i.cA)))):0===t.qP.length||!this.pq}yq(t){return this.Mq.yq(t),this.wC=t,Promise.resolve()}Tq(t){return!1}async Ud(){this.Vo(),this.BC.removeEventListener("loadedmetadata",this.Nq);for(const t of $L)this.BC.removeEventListener(t,this.Dq);await this.Sq.gn(),this.Iq(),await this.Mq.tr(),await this.Eq(void 0)}bq(t){t!==this.Lq&&(this.Lq=t,t?this.kq.Zb(void 0):this.kq=new ue)}Aq(t){return this.Sq.NC((()=>this.Eq(t)))}async Eq(t){if(t&&!this.BC.src&&!this.BC.srcObject)throw new To(Ui.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&(this.BC.src||this.BC.srcObject))throw new To(Ui.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.Lq&&await this.kq.tL;const i=this.zx;i&&(await i.Rx(this.BC),this.zx=void 0),t&&(await t.bn(this.BC),this.zx=t)}ga(t){return this.Sq.NC((()=>this.xq(t)))}xq(t){this.bq(!1);const i=this.hv.Gf;if(function(t){if(void 0!==s.ManagedMediaSource&&t instanceof s.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&f.Ga&&f.JE>=17}(this.BC))try{this.BC.srcObject=t}catch(i){this.BC.src=URL.createObjectURL(t)}else this.BC.src=URL.createObjectURL(t);else this.BC.src=t;this.hv.Gf=i}Cq(t){return this.Sq.NC((()=>this.Oq(t)))}Oq(t){this.xq(t),this.BC.load()}Iq(){this.bq(!1),kM(this.BC)}async jq(){this.zx&&await this.zx.tr()}constructor(t,i,e,s){super(),this.Lq=!1,this.kq=new ue,this.pq=!1,this.Sq=new Kr,this.zx=void 0,this.Nq=()=>{this.pq=!0},this.Dq=()=>{this.bq(!0)},this.wC=t,this.hv=i,this.BC=i.UP,this.Mq=e,this.Jx=s,this.BC.addEventListener("loadedmetadata",this.Nq);for(const t of $L)this.BC.addEventListener(t,this.Dq)}};var ik,ek=class extends tk{get wf(){return Ai.xn(this.BC.buffered)}get ct(){return this.BC.duration}get Pq(){const t=this.ct;if(!isFinite(t))return!1;const i=this.wf;if(0===i.U)return!1;return t-i.jn(i.U-1)<fl}get Xf(){return this.BC.preload}set Xf(t){this.BC.preload=t}get t_(){return Ai.xn(this.BC.seekable)}get zq(){return this.wf}get Bq(){if(Er(this.BC)&&(this.BC.videoWidth>0||this.BC.videoHeight>0))return this.wf}async jW(){const t=this.wd;switch(t.ZP){case Ln.Yv:case Ln.Gv:this.BC.setAttribute("crossorigin",t.ZP);break;case Ln.Fv:default:this.BC.removeAttribute("crossorigin")}void 0!==t.Xf?this.BC.preload=t.Xf:this.BC.preload=Le.gP,void 0!==t.KP?this.BC.title=t.KP:IM(this.BC),await this.ga(t.Ug),this.Mq.$n(this,t)}mq(t){return!1}yq(t){return Promise.resolve(void 0)}async Ud(){IM(this.BC),await super.Ud()}static Rq(t,i){return!!i.canPlayType&&Boolean(i.canPlayType(t.HP))}},Wa=class extends wn{constructor(t){super(Co.gw),this.currentTime=t}},sk=class extends wn{constructor(){super(Co.cw)}};(ik||(ik={})).Uq="Qq";var nk=class extends wn{constructor(t){super("Qq"),this.Fq=t}},vh=class extends Bo{get Yq(){return this.Gq}Vq(t,i){const e=new Ai([t,i]);this.Gq=this.Gq._B(e),this.Co(new nk(e))}Wq(t,i){this.Gq=this.Gq.wB(new Ai([t,i]))}tr(){this.Gq=Ai.kB()}gn(){this.Vo()}constructor(...t){super(...t),this.Gq=Ai.kB()}};var rk,hk=class{start(t){this.VH=t,this.Hq()&&this.qq()}pull(){this.TG.length>0?this.Xq():this.Zq=!0,this.Hq()&&this.qq()}cancel(t){return No(this.TG),this.NG=0,this.Zq=!1,this._G.cancel(t)}Xq(){if(0===this.TG.length)return;const t=this.TG;this.TG=[],this.NG=0,this.Zq=!1,this.VH.enqueue(t)}Hq(){if(this.Zq)return!0;return this.Kq-this.NG>0}qq(){if(this.Jq)return;const t=this._G.read().then(this.$q).catch(this.tX);this.Jq=t;const i=()=>{this.Jq===t&&(this.Jq=void 0)};t.then(i,i)}constructor(t,{size:i=(()=>1),highWaterMark:e=1}){this.TG=[],this.NG=0,this.VH=void 0,this.Zq=!1,this.Jq=void 0,this.$q=t=>t.done?(this.Xq(),void this.VH.close()):(this.TG.push(t.value),this.NG+=this.iX(t.value),this.Zq&&this.Xq(),this.Hq()?this._G.read().then(this.$q):void 0),this.tX=t=>{this.Xq(),this.VH.error(t)},this._G=t.getReader(),this.iX=i,this.Kq=e}},ok=class{eX(t){this.sX.push(t),this.hp+=t.byteLength}nX(t){if(this.hp<=t)return this.rX();const i=this.sX;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.slice(0,s);if(s<i.length&&e<t){const r=t-e;0,n.push(Io(i[s],0,r)),e+=r}return{sX:n,hp:e}}hX(t){const i=this.nX(t);return 1===i.sX.length?i.sX[0]:L_(i.sX,i.hp)}rX(){return{sX:this.sX,hp:this.hp}}oX(t){if(this.hp<=t)return this.aX();const i=this.sX;let e=0,s=0;for(;s<i.length&&e+i[s].byteLength<=t;)e+=i[s].byteLength,s++;const n=i.splice(0,s);if(i.length>0&&e<t){const s=t-e;0,n.push(Io(i[0],0,s)),i[0]=Io(i[0],s),e+=s}return this.hp-=e,{sX:n,hp:e}}uX(t){const i=this.oX(t);return 1===i.sX.length?i.sX[0]:L_(i.sX,i.hp)}aX(){const t=this.rX();return this.sX=[],this.hp=0,t}cX(){const t=1===this.sX.length?this.sX[0]:L_(this.sX,this.hp);return this.sX=[],this.hp=0,t}constructor(){this.sX=[],this.hp=0}};!function(t){t[t.lX=0]="lX",t[t.dX=1]="dX",t[t.fX=2]="fX"}(rk||(rk={}));var ak=class{_X(t,i){}gX(){}wX(t){this.TG.eX(t),this.vX(!1)}AX(){this.vX(!0)}mX(){return 0!==this.ja||0!==this.TG.hp}vX(t){for(;0!==this.TG.hp;){if(!t&&this.pX>this.TG.hp)return;switch(this.ja){case 0:this.yX(t);break;case 1:this.MX(t);break;case 2:this.TX(t)}}}NX(){this.ja=0,this.pX=8}yX(t){const i=Ao(this.TG.hX(this.pX)),e=new _s,s=At.np(i,e);if(!s.$m)return this.pX=s.op,void(t&&this.pX>this.TG.hp&&this.DX(this.TG.hp));const n=s.rp.Rg;let r=s.rp.hp;0===r&&(r=1/0),this._X(n,r),this.SX(n)?this.IX(r):this.DX(r)}IX(t){this.ja=1,this.pX=t}MX(t){const i=Ao(this.TG.uX(this.pX)),e=new _s,s=At.tp(i,e,!t);if(!s.$m)throw new Eg(e.Ku);this.gX(),this.EX(s.ip),this.NX()}DX(t){this.ja=2,this.pX=0,this.bX=t}TX(t){const i=this.TG.oX(this.bX);this.bX-=i.hp;for(const t of i.sX)this.LX(t);(0===this.bX||t&&this.bX===1/0)&&(this.gX(),this.NX())}constructor(){this.TG=new ok,this.ja=0,this.pX=0,this.bX=0,this.NX()}};function uk(t){return t instanceof ny}function ck(t){return t instanceof ey}function lk(t){return t instanceof $p||t instanceof ty}function dk(t){return t instanceof Sp}function fk(t){return t instanceof rp}function _k(t){return t instanceof Bh}function gk(t){return t instanceof Oh}function wk(t){return t instanceof dy}function vk(t){return t instanceof Br}function Ak(t){return t instanceof ay}function mk(t){return t instanceof Ar}function pk(t,i){const e=Vt(t.boxes,Ak);if(e&&e.flags.baseDataOffsetPresent)e.baseDataOffset=e.baseDataOffset.add(i);else for(const e of t.boxes)e instanceof Ar&&e.flags.dataOffsetPresent&&(e.dataOffset=e.dataOffset+i)}var yk=class extends ak{start(t){this.VH=t}transform(t){this.wX(t)}flush(){this.AX()}SX(t){return t===he.pA||t===he.$A||t===he.gm}EX(t){const i=this.kX(t);this.VH.enqueue(i)}LX(t){this.VH.enqueue(t)}kX(t){const i=ks(t.zm.zm);switch(t.Rg){case"moov":return this.xX(i);case"sidx":return this.CX(i);case"moof":return this.OX(i)}return i}get jX(){if(void 0===this.PX)throw new g("Expected to have found a movie header timescale.");return this.PX}zX(t){const i=this.BX.get(t);if(void 0===i)throw new g("Expected to have found a media header timescale for track ID "+t+".");return i}xX(t){const i=Ly(t);for(let t=0;t<i.boxes.length;t++){const e=i.boxes[t];e instanceof Xp?i.boxes[t]=this.RX(e):e instanceof Zp?i.boxes[t]=this.UX(e):e instanceof ey&&this.QX(e)}for(const t of i.boxes)t instanceof Bh&&this.FX(t);return i.serialize().join()}RX(t){this.PX=t.timescale;const i=Nk(Ce.fromNumber(t.duration,!0),this.jX,this.YX);return 0!==i.getHighBits()?this.UX(function(t){return new Zp({creation:Ce.fromNumber(t.creationTime,!0),modification:Ce.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Ce.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.YX,t.duration=i.toInt(),t)}UX(t){return this.PX=t.timescale,t.timescale=this.YX,t.duration=Nk(t.duration,this.jX,this.YX),t}QX(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof $p?(i=s.trackId,t.boxes[e]=this.GX(s)):s instanceof ty?(i=s.trackId,t.boxes[e]=this.VX(s)):s instanceof Sp?this.WX(s,i):s instanceof gp&&this.HX(s)}}GX(t){const i=Nk(Ce.fromNumber(t.duration,!0),this.jX,this.YX);return 0!==i.getHighBits()?this.VX(function(t){return new ty({creation:Ce.fromNumber(t.creationTime,!0),modification:Ce.fromNumber(t.modificationTime,!0),duration:Ce.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=i.toInt(),t)}VX(t){return t.duration=Nk(t.duration,this.jX,this.YX),t}WX(t,i){for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof Mp?t.boxes[e]=this.qX(s,i):s instanceof Tp&&(t.boxes[e]=this.XX(s,i))}}qX(t,i){this.BX.set(i,t.timescale);const e=Nk(Ce.fromNumber(t.duration,!0),t.timescale,this.YX);return 0!==e.getHighBits()?this.XX(function(t){return new Tp({creation:Ce.fromNumber(t.creationTime,!0),modification:Ce.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Ce.fromNumber(t.duration,!0)},t.language,t.flags)}(t),i):(t.timescale=this.YX,t.duration=e.toInt(),t)}XX(t,i){return this.BX.set(i,t.timescale),t.timescale=this.YX,t.duration=Nk(t.duration,t.timescale,this.YX),t}HX(t){for(const i of t.boxes)i instanceof dp?this.ZX(i):i instanceof fp&&this.KX(i)}ZX(t){for(const i of t.entries)i.mediaTime=Tk(i.mediaTime,this.jX,this.YX),i.segmentDuration=Tk(i.segmentDuration,this.jX,this.YX)}KX(t){for(const i of t.entries)i.mediaTime=Nk(i.mediaTime,this.jX,this.YX),i.segmentDuration=Nk(i.segmentDuration,this.jX,this.YX)}FX(t){for(let i=0;i<t.boxes.length;i++){const e=t.boxes[i];e instanceof Oh?this.JX(e):e instanceof Yp?t.boxes[i]=this.$X(e):e instanceof Gp&&(t.boxes[i]=this.tZ(e))}}JX(t){const i=this.zX(t.trackId);t.defaultSampleDuration=Tk(t.defaultSampleDuration,i,this.YX)}$X(t){const i=Nk(Ce.fromNumber(t.fragmentDuration,!0),this.jX,this.YX);return 0!==i.getHighBits()?this.tZ(function(t){return new Gp(Ce.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=i.toInt(),t)}tZ(t){return t.fragmentDuration=Nk(t.fragmentDuration,this.jX,this.YX),t}CX(t){let i=ky(t);return i=i instanceof Ay?this.iZ(i):this.eZ(i),i.serialize().join()}iZ(t){const i=t.timescale,e=Nk(Ce.fromNumber(t.earliestPresentationTime,!0),i,this.YX);if(0!==e.getHighBits())return this.eZ(function(t){return new my(t.referenceId,t.timescale,Ce.fromNumber(t.earliestPresentationTime,!0),Ce.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.YX,t.earliestPresentationTime=e.toInt();for(const e of t.references)e.subsegmentDuration=Tk(e.subsegmentDuration,i,this.YX);return t}eZ(t){const i=t.timescale;t.timescale=this.YX,t.earliestPresentationTime=Nk(t.earliestPresentationTime,i,this.YX);for(const e of t.references)e.subsegmentDuration=Tk(e.subsegmentDuration,i,this.YX);return t}OX(t){const i=xy(t),e=i.getSize();for(const t of i.boxes)t instanceof Br&&this.sZ(t);const s=i.getSize();if(s!==e){const t=s-e;for(const e of i.boxes)e instanceof Br&&pk(e,t)}return i.serialize().join()}sZ(t){let i;for(let e=0;e<t.boxes.length;e++){const s=t.boxes[e];s instanceof ay?(i=this.zX(s.trackId),this.nZ(s,i)):s instanceof Mr?t.boxes[e]=this.rZ(s,i):s instanceof Hh?t.boxes[e]=this.hZ(s,i):s instanceof Ar&&this.oZ(s,i)}}nZ(t,i){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=Tk(t.defaultSampleDuration,i,this.YX))}rZ(t,i){const e=Nk(Ce.fromNumber(t.baseMediaDecodeTime,!0),i,this.YX);return 0!==e.getHighBits()?this.hZ(function(t){return new Hh(Ce.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),i):(t.baseMediaDecodeTime=e.toInt(),t)}hZ(t,i){return t.baseMediaDecodeTime=Nk(t.baseMediaDecodeTime,i,this.YX),t}oZ(t,i){let e=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=Tk(s,i,this.YX);n.duration=t-e,e=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=Mk(n.compositionTimeOffset,i,this.YX))}}constructor(t){super(),this.BX=I(),this.YX=t}};function Mk(t,i,e){return Ce.fromInt(t,!1).multiply(e).divide(i).toNumber()}function Tk(t,i,e){return Ce.fromInt(t,!0).multiply(e).divide(i).toNumber()}function Nk(t,i,e){return Ih.ON(t).nD(Ih.jN(e,!0)).aD(Ih.jN(i,!0)).HN()}var Dk,Sk,Ik,Ek=class{aZ(t){return t.pipeThrough(new _i(this.uZ))}constructor(t){this.uZ=new yk(t)}};function bk(t,i,e){const s=Mo(t,i);if(s!==e)throw new b("Expected descriptor with tag "+e+", but found "+s)}function Lk(t,i){bk(t,i,3);const e=kk(t,i),s=i.Ku+e,n=og(t,i),r=Mo(t,i),h=0!=(64&r),o=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=og(t,i)),h){c=su(t,i,Mo(t,i))}o&&(l=su(t,i,2));const d=function(t,i){bk(t,i,4);const e=kk(t,i),s=i.Ku+e,n=Mo(t,i),r=Mo(t,i),h=r>>2,o=0!=(2&r),a=rg(t,i,3),u=aa(t,i),c=aa(t,i);let l;if(i.Ku<s){const e=function(t,i){return t.getUint8(i.Ku)}(t,i);5===e&&(l=function(t,i){bk(t,i,5);const e=kk(t,i),s=rl(t,i,e);return{cZ:5,lZ:s}}(t,i))}return i.Em(s),{cZ:4,dZ:n,fZ:h,_Z:o,gZ:a,wZ:u,vZ:c,AZ:l}}(t,i);return i.Em(s),{cZ:3,o:n,mZ:u,zu:c,pZ:a,yZ:l,MZ:d}}function kk(t,i){let e=0;for(let s=0;s<4;s++){const s=Mo(t,i);if(e=e<<7|127&s,!(128&s))break}return e}function xk(t,i){const e=Mo(t,i),s=Mo(t,i),n=Mo(t,i),r=Mo(t,i),h=3&Mo(t,i),o=31&Mo(t,i),a=[];for(let e=0;e<o;e++){const e=og(t,i);a.push(rl(t,i,e))}const u=Mo(t,i),c=[];for(let e=0;e<u;e++){const e=og(t,i);c.push(rl(t,i,e))}return{TZ:e,NZ:s,DZ:n,SZ:r,IZ:h,EZ:a,bZ:c}}function ds(t,i,e){if(e&&i.byte>=e)return;const s=t.Wb(i.byte);return i.byte+=1,s}function Ck(t,i){return function(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=256*s+ds(t,i);return s}(t,i,2)}!function(t){t[t.LZ=3]="LZ",t[t.kZ=4]="kZ",t[t.xZ=5]="xZ"}(Dk||(Dk={})),function(t){t[t.CZ=64]="CZ",t[t.OZ=103]="OZ",t[t.jZ=107]="jZ"}(Sk||(Sk={})),function(t){t[t.PZ=0]="PZ",t[t.zZ=1]="zZ",t[t.OZ=2]="OZ",t[t.BZ=5]="BZ",t[t.RZ=34]="RZ"}(Ik||(Ik={}));var Ok,cu=class t{UZ(t){this.QZ=this.QZ.concat(t.QZ),this.FZ+=t.U}YZ(t,i,e){const s=this.FZ,n=e-i;n>0&&(this.QZ.push({GZ:i,VZ:e,WZ:n,HZ:s,qZ:t}),this.FZ+=n)}Wb(t){for(const i of this.QZ)if(i.HZ<=t&&t<i.HZ+i.WZ)return i.qZ[t+i.GZ-i.HZ]}XZ(t,i){let e=i;for(const i of this.QZ){const s=i.VZ;for(let n=i.GZ;n<s;n+=1,e+=1)t[e]=i.qZ[n]}return e}get U(){return this.FZ}set U(t){const i=this.QZ;let e=this.FZ-t;if(!(t>=this.FZ))if(this.FZ=t,0!==t)for(let t=i.length-1;t>=0;t-=1){const s=i[t];if(e<=s.WZ)return s.VZ-=e,s.WZ-=e,void(i.length!==t+1&&(i.length=t+1));e-=s.WZ}else i.length=0}get zm(){const t=new Array(this.FZ);let i=0;for(const e of this.QZ){const s=e.VZ;for(let n=e.GZ;n<s;n+=1,i+=1)t[i]=e.qZ[n]}return t}ZZ(){const t=new j(this.FZ);let i=0;for(const e of this.QZ){const s=e.VZ;for(let n=e.GZ;n<s;n+=1,i+=1)t[i]=e.qZ[n]}return t}Lm(i){const e=new t;for(const t of this.QZ)e.YZ(t.qZ,t.GZ,t.VZ);return e.JD=i||Yt({},this.JD),e}constructor(){this.FZ=0,this.QZ=[],this.JD={}}},jk=[128,64,32,16,8,4,2,1];function nn(t,i){const e=_.floor(i.bit/8),s=0==(t.Wb(e)&jk[i.bit%8])?0:1;return i.bit+=1,s}function Pk(t,i,e){let s=0,n=e;for(;n>0;)n-=1,s=2*s+nn(t,i);return s}function Ac(t,i){let e=0;for(;0===nn(t,i)&&e<32;)e+=1;return Pk(t,i,e)+2**e-1}function zk(t,i){const e=Ac(t,i);return 1&e?_.floor((e+1)/2):-_.floor(e/2)}function Bk(t,i){const e=[],s={byte:1};let n;do{e.push(Uk(t,i,s)),n=i.Wb(s.byte)}while(void 0!==n&&128!==n);return e}function Rk(t,i){let e,s=0;do{e=ds(t,i),s+=e}while(255===e);return s}function Uk(t,i,e){const s=Rk(i,e),n=Rk(i,e),r=e.byte,h=r+n;return e.byte=h,{KZ:t,JZ:s,$Z:n,tK:r,iK:h,eK:i}}!function(t){t[t.sK=1]="sK",t[t.nK=2]="nK",t[t.rK=3]="rK",t[t.hK=4]="hK",t[t.oK=5]="oK",t[t.aK=6]="aK",t[t.uK=7]="uK",t[t.cK=8]="cK",t[t.lK=9]="lK"}(Ok||(Ok={}));var Qk=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function Fk(t,i,e){let s=8,n=8;for(let r=0;r<e;r+=1){if(0!==n){n=(s+zk(t,i)+256)%256}s=0===n?s:n}}var Yk=class{dK(){const t=this.fK;let i=_.max(0,this._K+t.length-2);const e=this.gK,s=e.U;let n=0;for(;i<s;i+=1){const s=e.Wb(i);0===s?n+=1:(3===s&&n>=2&&t.push(i),n=0)}this._K=i-t.length}wK(t){const i=this.fK;let e=t;for(const t of i){if(!(t<=e))return e;e+=1}return e}Wb(t){if(!(t>this.gK.U))return t>this._K&&this.dK(),this.gK.Wb(this.wK(t))}constructor(t){this.fK=[],this._K=0,this.gK=t}};function Gk(t){const i=new Yk(t);let e,s,n,r,h,o,a=0,u=0,c=0,l=0;const d=i.Wb(1),f={bit:32};if(Ac(i,f),100===d||110===d||122===d||144===d){const t=Ac(i,f);3===t&&(e=nn(i,f)),Ac(i,f),Ac(i,f),nn(i,f);if(1===nn(i,f))for(let e=0;e<(3!==t?8:12);e+=1){1===nn(i,f)&&Fk(i,f,e<6?16:64)}}const g=Ac(i,f),w=Ac(i,f);if(0===w)Ac(i,f);else if(1===w){nn(i,f),zk(i,f),zk(i,f);const t=Ac(i,f);for(let e=0;e<t;e+=1)zk(i,f)}Ac(i,f),nn(i,f);const v=Ac(i,f),A=Ac(i,f),m=nn(i,f);0===m&&nn(i,f),nn(i,f);1===nn(i,f)&&(a=Ac(i,f),u=Ac(i,f),c=Ac(i,f),l=Ac(i,f));if(1===nn(i,f)){if(1===nn(i,f)){const t=Pk(i,f,8);if(255===t)s=Pk(i,f,16),n=Pk(i,f,16);else{const i=Qk[t];i&&(s=i[0],n=i[1])}}1===nn(i,f)&&nn(i,f);if(1===nn(i,f)){Pk(i,f,3),nn(i,f);1===nn(i,f)&&(Pk(i,f,8),Pk(i,f,8),Pk(i,f,8))}1===nn(i,f)&&(Ac(i,f),Ac(i,f)),r=nn(i,f),1===r&&(h=Pk(i,f,32),o=Pk(i,f,32),nn(i,f))}return{width:_.floor(16*(v+1)-2*a-2*u),height:_.floor((2-m)*(A+1)*16-2*c-2*l),dM:s,fM:n,vK:r?o/(2*h):void 0,AK:e,mK:g}}function Vk(t,i,e){void 0===e&&(e=1);const s=Ig(iu._p(t),he.$A);if(s&&0!==s.Z.length)return function(t,i,e){void 0===e&&(e=1);var s;let n;n=void 0!==i?Vt(t.Z,(t=>t.rp.Fp===i)):t.Z[0];const r=null==n||null==(s=n.IM)?void 0:s.IM;return r?vi(r,e):void 0}(s,i,e)}function Wk(t){const i=Ig(iu._p(t),he.pA);if(!i)return;const e=i.rp.xp,s=[];for(const t of i.Z){const i=t.rp.Fp,e=t.Bp.rp.xp;let o,a,u;for(const i of t.Bp.Xp.Jp.iy.sy){const t=Hk(i);var n,r,h;if(t)o=null!=(n=t.pK)?n:o,a=null!=(r=t.yK)?r:a,u=null!=(h=t.MK)?h:u}s.push({Fp:i,xp:e,pK:o,yK:a,MK:u})}return{xp:e,Z:s}}function Hk(t){let i,e,s;if(t.Rg===he.CA){var n;const e=xk(Ao(t.Yy.zm),new _s);i=function(t){return"avc1."+qk(t.NZ,2)+qk(t.DZ,2)+qk(t.SZ,2)}(e),s=null==(n=function(t){if(0===t.EZ.length)return;const i=t.EZ[0],e=new cu;return e.YZ(i,0,i.byteLength),Gk(e)}(e))?void 0:n.vK}else if(t.Rg===he.jA||t.Rg===he.PA){const e=function(t,i){const e=i.jm(),s=Ni(t,e,8),n=Ni(t,e,2),r=Ni(t,e,1),h=Ni(t,e,5),o=Ni(t,e,32),a=[];for(let i=0;i<6;i++)a.push(Ni(t,e,8));const u=Ni(t,e,8);e.Im(4);const c=Ni(t,e,12);e.Im(6);const l=Ni(t,e,2);e.Im(6);const d=Ni(t,e,2);e.Im(5);const f=Ni(t,e,3);e.Im(5);const _=Ni(t,e,3),g=Ni(t,e,16),w=Ni(t,e,2),v=Ni(t,e,3),A=Ni(t,e,1),m=Ni(t,e,2),p=Ni(t,e,8),y=[];for(let i=0;i<p;i++){const i=Ni(t,e,1);e.Im(1);const s=Ni(t,e,6),n=Ni(t,e,16),r=[];for(let i=0;i<n;i++){const i=Ni(t,e,16),s=rl(t,new _s(e.Ku>>3),i);e.Im(8*i),r.push({TK:i,NK:s})}y.push({DK:i,SK:s,IK:n,EK:r})}return{TZ:s,bK:n,LK:r,kK:h,xK:a,CK:u,jK:c,PK:l,zK:o,BK:d,RK:f,UK:_,QK:g,FK:v,YK:A,GK:w,IZ:m,VK:p,WK:y}}(Ao(t.Hy.zm),new _s);i=function(t,i){let e=t.toString()+".";switch(i.bK){case 0:break;case 1:e+="A";break;case 2:e+="B";break;case 3:e+="C";break;default:return}switch(e+=i.kK.toString()+".",e+=function(t){let i=t;return i=i>>>1&1431655765|(1431655765&i)<<1,i=i>>>2&858993459|(858993459&i)<<2,i=i>>>4&252645135|(252645135&i)<<4,i=i>>>8&16711935|(16711935&i)<<8,i=i>>>16|i<<16,i}(i.zK).toString(16)+".",i.LK){case 0:e+="L";break;case 1:e+="H";break;default:return}e+=i.CK.toString();const s=i.xK.reduce(((t,i)=>0===t?i:i+1),0);for(let t=0;t<s;t++)e+="."+i.xK[t].toString(16).toUpperCase();return e}(t.Rg,e)}else if(t.Rg===he.BA){const e=function(t,i){const e=i.jm(),s=Ni(t,e,8);e.Im(24);const n=Ni(t,e,8),r=Ni(t,e,8),h=Ni(t,e,4),o=Ni(t,e,3),a=Zh(t,e),u=Ni(t,e,8),c=Ni(t,e,8),l=Ni(t,e,8),d=Ni(t,e,16),f=new Array(8);for(let i=0;i<d;i++)f[i]=Ni(t,e,8);return{TZ:s,HK:n,qK:r,XK:h,ZK:o,KK:a,aM:u,uM:c,cM:l,JK:d,$K:f}}(Ao(t.Xy.zm),new _s);i=function(t,i){let e=t.toString()+".";return e+="0"+i.HK+".",e+=Es(""+i.qK,2,"0")+".",e+=Es(""+i.XK,2,"0")+".",e+=Es(""+i.ZK,2,"0")+".",e+=Es(""+i.aM,2,"0")+".",e+=Es(""+i.uM,2,"0")+".",e+=Es(""+i.cM,2,"0")+".",e+="0"+i.KK,e}(t.Rg,e)}else if(t.Rg===he.UA){const e=function(t,i){const e=i.jm();e.Im(1);const s=Ni(t,e,7),n=Ni(t,e,3),r=Ni(t,e,5),h=Zh(t,e),o=Zh(t,e),a=Zh(t,e),u=Zh(t,e),c=Zh(t,e),l=Zh(t,e),d=Ni(t,e,2);e.Im(3);const f=Zh(t,e);let _;return f?_=Ni(t,e,4):e.Im(4),{dp:s,tJ:n,iJ:r,eJ:h,sJ:o,nJ:a,rJ:u,hJ:c,oJ:l,aJ:d,uJ:f,cJ:_}}(Ao(t.Jy.zm),new _s);i=function(t,i,e){let s=t.toString()+".";if(s+=i.tJ+".",s+=""+Es(""+i.iJ,2,"0"),s+=(0===i.eJ?"M":"H")+".",s+=(1===i.nJ?12:10)+".",s+=(1===i.tJ?0:i.rJ)+".",s+=""+i.hJ+i.oJ+(1===i.hJ&&1===i.oJ?i.aJ:"0"),e&&e.oM===l_.ON_SCREEN_COLOURS){const t=e;s+="."+Es(""+t.aM,2,"0")+"."+Es(""+t.uM,2,"0")+"."+Es(""+t.cM,2,"0")+"."+(t.lM?1:0)}return s}(t.Rg,e,t.$y)}else if(t.Rg===he.GA){e=function(t){const i=t.MZ;switch(i.dZ){case Sk.CZ:return function(t){var i;if(!(null==(i=t.AZ)?void 0:i.lZ))return"mp4a.40";const e=function(t,i){let e=Ni(t,i,5);31===e&&(e=32+Ni(t,i,6));const s=Ni(t,i,4);let n;return 15===s&&(n=Ni(t,i,24)),{lJ:e,dJ:s,fJ:n,_J:Ni(t,i,4)}}(Ao(t.AZ.lZ),new O_);return"mp4a.40."+e.lJ}(i);case Sk.OZ:return"mp4a.40.2";case Sk.jZ:return"mp4a.40.34"}}(Lk(Ao(t.jy.zm),new _s))}else{if(t.Rg!==he.WA)return(t.Rg===he.JA||t.Rg===he.KA)&&t.eM?Hk(t.eM):void 0;e="fLaC"}return{pK:i,yK:e,MK:s}}function qk(t,i){const e=t.toString(16);return Es(e,i,"0")}function Xk(t,i){const e=iu._p(Ao(t)),s=function(t,i){let e;for(const n of t.Z){var s;const t=null==(s=n.IM)?void 0:s.IM;if(t){const s=n.rp.Fp,r=Vt(i.Z,(t=>t.Fp===s)),h=is.ON(t,r.xp);e&&!h.SN(e)||(e=h)}}return e}(Ig(e,he.$A),i),n=Ig(e,he.dm);return{VT:s.mN(),gJ:n.zm}}var Zk=f.ZE,Kk=class extends Bo{get bW(){return this.RW}set bW(t){this.RW=t}get OW(){return this.FW}set OW(t){this.FW=t}get oa(){return this.wJ||this.vJ.updating}AJ(t,i,e){switch(t.Rg){case G.dq:case G.qS:return this.mJ((e=>this.pJ(t,i,e)),e);case G.fq:throw new g("Opaque segments are not supported on web.")}}yJ(t,i){switch(t.Rg){case G.dq:return this.mJ((i=>this.MJ(t,i)),i);case G.qS:throw new g("Streaming initialization segments are not supported on web.");case G.fq:throw new g("Opaque initialization segments are not supported on web.")}}async MJ(t,i){this.TJ?this.NJ=Wk(Ao(t.zm)):(await this.DJ(t,void 0,i),Zk&&(this.SJ=!1,this.IJ=t))}async pJ(t,i,e){Zk&&this.SJ&&this.IJ&&await this.MJ(this.IJ,e);try{if(fo(e),this.TJ&&this.NJ){const n=await async function(t,i){switch(t.Rg){case G.dq:return t;case G.qS:{const e=await wt(t.zm,i);return fo(i),{Rg:G.dq,zm:new j(e)}}case G.fq:throw new g("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,e),r=Xk(n.zm,this.NJ);var s;t={Rg:G.dq,zm:r.gJ},i=Yt({},i,{QD:r.VT+(null!=(s=i.QD)?s:0)})}await this.DJ(t,i,e),this.Co(new wn(Bi.cq))}finally{t.Rg===G.qS&&t.zm.cancel(new Sn).catch(na)}}async DJ(t,i,e){switch(fo(e),i&&await this.EJ(i),t.Rg){case G.dq:if(this.bJ){const i=this.bJ.aZ(jb(t.zm));return await this.LJ(i,e)}return await this.kJ(t.zm);case G.qS:if(this.bJ){const i=this.bJ.aZ(t.zm);return await this.LJ(i,e)}return await this.LJ(t.zm,e)}}async LJ(t,i){const e=this.xJ.wf,s=function(t,i){return void 0===i&&(i=new yb({highWaterMark:1/0})),new et(new hk(t,i),{highWaterMark:0})}(t),n=s.getReader();let r=!1;try{for(;;){const t=await Ys(n.read(),i);if(t.done){r=!1;break}fo(i);const e=uc(t.value);r=!0,await this.kJ(e)}}catch(t){if(n.cancel(t).catch(na),r){await this.CJ();const t=this.xJ.wf.Sn(e.cB());for(let i=0;i<t.U;i++)await this.OJ(t.Cn(i),t.jn(i))}throw t}}jJ(t,i){return this.mJ((()=>this.PJ(t,i)))}async PJ(t,i){this.vJ.appendWindowStart===t&&this.vJ.appendWindowEnd===i||(await this.CJ(),this.vJ.appendWindowStart=0,this.vJ.appendWindowEnd=i,this.vJ.appendWindowStart=t)}async EJ(t){if(this.vJ.timestampOffset!==t.QD)try{this.vJ.timestampOffset=t.QD}catch(i){await this.CJ(),this.vJ.timestampOffset=t.QD}}async kJ(t){this.vJ.appendBuffer(t),this.zJ=!0,await this.BJ()}RJ(t,i,e){return this.mJ((e=>this.OJ(t,i,e)),e)}async OJ(t,i,e){fo(e),this.vJ.remove(t,i),await this.BJ()}BJ(){const t=this.xJ.wf;return new Promise(((i,e)=>{let s,n=!1,r=()=>{n=!0},h=()=>{n=!1,s="error"},o=()=>{n=!1,s="aborted"},a=()=>{n=!1,s="sourceclose",u()},u=()=>{c(),n&&!s?(t.MB(this.xJ.wf)||this.Co(new wn(Bi.cq)),i()):e(new g(s))},c=()=>{this.vJ.removeEventListener("update",r),this.vJ.removeEventListener("error",h),this.vJ.removeEventListener("abort",o),this.vJ.removeEventListener("updateend",u),this.UJ.fn(JL.gq,a)};this.vJ.addEventListener("update",r),this.vJ.addEventListener("error",h),this.vJ.addEventListener("abort",o),this.vJ.addEventListener("updateend",u),f.LE&&f.xE<3&&this.UJ.yn(JL.gq,a)}))}QJ(){return this.mJ((()=>this.CJ()))}async CJ(){if(this.UJ.Jf===fx.IS){Zk&&(this.SJ=!0),this.vJ.updating&&(this.wJ=!0);try{this.vJ.abort()}catch(t){0,this.wJ=!1}this.oa&&await this.BJ().catch(na)}}FJ(){return"function"==typeof this.vJ.changeType}yq(t){if(this.YJ(),this.UJ.Jf===fx.GJ)return;var i;this.VJ=t;const e=null!=(i=this.UJ.WJ(t.HP))?i:t.HP;this.TJ=Jk(t.HP,this.HJ),this.FJ()&&!yn(this.HJ,e)&&(this.HJ=e,this.vJ.changeType(this.HJ))}qJ(){this.UJ.Jf!==fx.Jg||this.XJ||this.oa||(this.vJ.timestampOffset=this.vJ.timestampOffset,this.UJ.ZJ())}async mJ(t,i){this.YJ();const e=new Wr;e.Xd(this.KJ.Wd),i&&e.Xd(i);try{this.XJ=t(e.Wd),await this.XJ,this.UJ.ZJ(),this.oa&&await this.BJ()}finally{this.XJ=void 0,e.Ud()}}YJ(){if(this.XJ)throw new g("Internal error")}async Ud(){this.Vo(),this.KJ.qd(),this.XJ&&(await this.XJ.catch(na),this.XJ=void 0),this.vJ.removeEventListener("updateend",this.JJ),this.vJ.removeEventListener("bufferedchange",this.$J)}constructor(t,i,e,s,n){var r;if(super(),this.RW=20,this.FW=30,this.wJ=!1,this.zJ=!1,this.XJ=void 0,this.KJ=new Wr,this.SJ=!1,this.IJ=void 0,this.TJ=!1,this.NJ=void 0,this.JJ=()=>{this.wJ=!1},this.$J=t=>{t.removedRanges&&this.Co(new wn(Bi.cq))},this.UJ=i,this.xJ=t,this.vJ=e,this.vJ.addEventListener("updateend",this.JJ),this.vJ.addEventListener("bufferedchange",this.$J),this.VJ=s,this.HJ=n,this.TJ=Jk(s.HP,n),null==(r=i.wd)?void 0:r.t$){var h;const t=null!=(h=i.wd.i$)?h:1e5;this.bJ=new Ek(t)}}};function Jk(t,i){return D(t,"audio/mp4")&&D(i,"audio/mpeg")}var $k=class{get wf(){if(this.e$.Jf===fx.GJ)return Ai.kB();let t=Ai.xn(this.vJ.buffered).Sn(new Ai([0,1/0]));const i=this.s$;return void 0!==i&&t.U>0&&t.jn(t.U-1)===i&&(t=t._B(Ai.bB(i))),t}Pq(){return!!this.s$&&this.wf.aB().gr(this.s$)}n$(){const t=this.wf;this.s$=t.U>0?t.jn(t.U-1):0,this.e$.r$()}qJ(){this.s$=void 0}constructor(t,i){this.s$=void 0,this.e$=i,this.vJ=t}};function tx(t){const i=t.dS("codecs");return i?i.split(",").map((t=>t.trim())):[]}function ix(t,i){return!("opus"===t)&&!("opus"===i)||t===i}function ex(t,i){const e=sx(t)||nx(t),s=sx(i)||nx(i);return!e&&!s||t===i}function sx(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function nx(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function ui(t,i){if(t===i)return!0;const e=t.split("."),s=i.split("."),n=e[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,i]=e,[,n,r]=s;if(t!==n)return!1;if(Number(i)!==Number(r))return!1}return!0}function rx(t,i,e,s,n,r,h){const o=new $k(n,t),a=new Kk(o,t,n,e,r);return new hx(t,i,e,s,o,a,h)}var hx=class extends Bo{get wf(){return this.xJ.wf}get wd(){return this.wC}get HP(){return this.lC}get h$(){return this.o$}get a$(){return this.u$.Yq}get bW(){return this.c$.bW}set bW(t){this.c$.bW=t}get OW(){return this.c$.OW}set OW(t){this.c$.OW=t}get oa(){return this.c$.oa}Pq(){return this.xJ.Pq()}n$(){this.xJ.n$()}qJ(){this.xJ.qJ(),this.c$.qJ()}l$(t,i){this.u$.Vq(t,i)}d$(t,i){this.u$.Wq(t,i)}f$(){return this.c$.QJ()}AJ(t,i,e){return this.c$.AJ(t,i,e)}yJ(t,i,e){return this.c$.yJ(t,e)}jJ(t,i){return f.LE&&f.xE<3?this.c$.jJ(t,1/0):this.c$.jJ(t,i)}async bT(t,i,e){this.d$(t,i);const s=this.wf;await this.c$.RJ(t,i,e);const n=0!==s.U&&0===this.wf.U;(f.ob||f.OE)&&n&&this.hv.Em(this.hv.Mf)}mq(t){const i=t.HP;if(this.lC===i)return!0;const e=this._$.get(i);if(void 0!==e)return e;const s=this.g$(t);return this._$.set(i,s),s}g$(t){const i=this.UJ.WJ(t.HP);if(void 0===i)return!1;const e=En(this.lC),s=En(i),n=tx(e),r=tx(s);if(this.c$.FJ()){if(!function(t,i){return Dd(t,i,ex)}(n,r))return!1;if(f.fb&&!function(t,i){return Dd(t,i,ix)}(n,r))return!1}else{if(e.Rg!==s.Rg)return!1;if(!function(t,i){return Dd(t,i,ui)}(n,r))return!1}return!0}async yq(t){const i=t.HP;this.lC!==i&&(this._$.clear(),this.c$.yq(t),this.lC=i),this.wC=t,this.UJ.w$()}async Ud(){this._$.clear(),this.Vo(),this.u$.gn();try{this.c$.fn(Bi.cq,this.Ds),await this.c$.Ud()}catch(t){}}constructor(t,i,e,s,n,r,h){super(),this._$=ke(),this.UJ=t,this.wC=e,this.lC=e.HP,this.o$=s,this.hv=i,this.xJ=n,this.c$=r,this.u$=h,this.c$.yn(Bi.cq,this.Ds)}},xs=class{v$(){let t=this.Cn,e=this.jn;if(this.A$||this.m$){const s=.001*(i.Kd()-this.p$);this.A$&&(t+=s),this.m$&&(e+=s)}return Ai.LB(t,e)}constructor(t,e,s=!1,n=!1){this.Cn=t,this.jn=e,this.A$=s,this.m$=n,this.p$=i.Kd()}},ox=.5,ax=[Co.jh,Co.Sh,Co.yw,Co.pw,Co.hw,Co.aw,Co.Jg,Co.ww,Zt.H_,Nt.ha],ux=class{y$(t){this.M$.push(t),t.yn(ik.Uq,this.T$)}get Yq(){return this.M$.reduce(((t,i)=>t._B(i.Yq)),Ai.kB())}gn(){this.N$(),this.D$.fn(Zt.H_,this.S$),this.hv.fn(Co.gw,this.S$),this.hv.fn(ax,this.I$),this.M$.forEach((t=>t.fn(ik.Uq,this.T$))),0!==this.E$&&(i.Jd(this.E$),this.E$=0),this.b$=!0}Tq(t){if(this.hv.Sf)return!1;if(0!==this.E$)return!1;const e=this.xJ.wf,s=e.vB(t);if(s>=0&&t+ox<e.jn(s))return!1;const n=s>=0?s+1:e.SB(t);if(n<0||n>=e.U)return!1;const r=e.Cn(n);if(Ai.LB(t,r).wB(this.Yq).EB>1)return!1;if(i.L$)return this.k$=this.hv.Mf,this.E$=i.$d((()=>{this.k$===this.hv.Mf&&this.x$(r),this.E$=0}),250),!0;return!(_.abs(r-t)<=.001)&&(this.x$(r),!0)}x$(t){this.hv.Em(t,!1,!0)}C$(){0!==this.O$&&(i.Jd(this.O$),this.O$=0),this.hv.fn(Co.Iw,this.Jl)}j$(){this.b$||0===this.P$&&(this.C$(),this.P$=i.z$(this.B$,250))}N$(){0!==this.P$&&(i.R$(this.P$),this.P$=0),this.C$(),this.hv.e_||(this.U$=0)}Q$(){return!this.hv.Ff&&!this.hv.e_&&0!==this.hv.Gf&&!this.hv.Sf&&!this.hv.lt&&(this.F$()||this.D$.Jf>=Mw.lT)}F$(){const t=this.hv.Mf,i=this.xJ.wf,e=i.vB(t);return-1!==e&&i.jn(e)>t+ox}Y$(t,i){const e=i.vB(t);return e>-1?i.jn(e):t}constructor(t,e,s,n){this.xJ=t,this.D$=e,this.hv=s,this.b$=!1,this.M$=[],this.E$=0,this.O$=0,this.G$=0,this.k$=0,this.U$=0,this.P$=0,this.V$=1,this.T$=t=>{const i=this.hv.Mf,e=t.Fq.gr(i),s=t.Fq.gr(i,ox)&&this.hv.Jf<=Mw.cT;(e||s)&&this.Tq(i)},this.S$=jd((t=>{if(this.b$)return;if(this.D$.Jf<=Mw.cT){const t=this.hv.Mf;this.Tq(t)||this.B$()}}),100),this.Jl=jd((t=>{this.j$()}),100),this.I$=()=>{this.Q$()?0===this.P$&&(this.hv.yn(Co.Iw,this.Jl),this.O$=i.$d((()=>{this.j$()}),3500)):this.N$()},this.B$=()=>{const t=this.G$,e=this.U$,s=this.hv.Mf,n=i.Kd(),r=this.xJ.wf;if(t!==s)return this.G$=s,this.U$=n,this.V$=1,void(this.W$=i.H$?2e3:1e3);if(this.Q$()&&0!==r.U&&e>0&&n>e+this.W$){let t;const i=this.Yq.aB().wB(r),e=i.DB(s);if(-1!==e){const n=i.Cn(e);if(n-s<1){const s=i.jn(e);0,t=s}}var h;if(!t)t=null==(h=this.q$)?void 0:h.determineStallJumpTarget(),t||(t=s+.01*this.V$,r.gr(t)||(t=this.Y$(s,r)));0,this.G$=t,this.V$++,this.W$=_.min(2*this.W$,1e4),this.x$(t)}},this.D$.yn(Zt.H_,this.S$),this.hv.yn(Co.gw,this.S$),this.hv.yn(ax,this.I$),this.q$=n,this.W$=i.H$?2e3:1e3}};function cx(t){const i=[];if(t.X$&&i.push(t.X$.wf),t.Z$&&i.push(t.Z$.wf),0===i.length)return Ai.kB();let e=0;for(const t of i)t.U>0&&(e=_.max(e,t.jn(t.U-1)));const s=t.Pq;let n=new Ai([0,e],[!0,s]);for(let t of i)s&&t.U>0&&(t=t._B(new Ai([t.jn(t.U-1),e],[!0,!0]))),n=n.Sn(t);return n}function lx(t,i,e){const s=t.wf;let n,r=s.vB(i);if(r>=0){if(!(r+1<s.U))return Promise.resolve();n=s.Cn(r+1)}else{if(r=s.SB(i),!(r>=0))return Promise.resolve();n=s.Cn(r)}return t.bT(n,1/0,e)}function dx(t,i,e){if(!t.gr(i)){const s=t.vB(i,e);if(s>=0){const e=t.Cn(s);if(i<e)return e}}return i}var th=class{K$(){return new this.J$}t0(t){return this.J$.isTypeSupported(t)}constructor(t){this.J$=as(t)}};function as(t){return t&&kn(Ha.ManagedMediaSource)?Ha.ManagedMediaSource:kn(Ha.MediaSource)?Ha.MediaSource:void 0}var fx,_x=f.BE||f.UE,gx=f.WE||f.ZE&&f.JE>=17;!function(t){t.GJ="closed",t.IS="open",t.Jg="ended"}(fx||(fx={}));var wx=class extends tk{get X$(){return this.i0}get Z$(){return this.e0}get ct(){if(this.s0)return this.s0;const t=this.FP.duration;return t===jh?1/0:t}n0(t){if(S(t)||t<0)throw new g("Invalid duration");this.r0()?this.h0(t):this.s0=t}h0(t){const i=t===1/0;if(i&&this.FP.setLiveSeekableRange){const t=2**39;this.FP.setLiveSeekableRange(0,t)}this.FP.duration=i?gx?1/0:jh:t,this.s0=void 0}get wf(){return _x?cx(this):function(t,i){let e=i;return e.U>0&&t.Pq&&(e=e._B(Ai.bB(e.jn(e.U-1)))),e}(this,Ai.xn(this.BC.buffered))}get zq(){var t;return null==(t=this.i0)?void 0:t.wf}get Bq(){var t;return null==(t=this.e0)?void 0:t.wf}get t_(){return this.o0.v$().Sn(new Ai([0,this.ct],[!0,!0]))}a0(t,i,e,s){this.o0=new xs(t,i,!!e,!!s)}get Pq(){return(!this.i0||this.i0.Pq())&&(!this.e0||this.e0.Pq())}get Jf(){return this.FP.readyState}async jW(){const t=this.wC,i=Vt(t.u0,(t=>D(t.HP,"audio"))),e=Vt(t.u0,(t=>D(t.HP,"video")));if(this.BC.disableRemotePlayback=!0,await this.c0(),i){const t=new vh;var s;this.l0.y$(t);const e=null!=(s=this.WJ(i.HP))?s:i.HP;this.d0=this.FP.addSourceBuffer(e),this.i0=rx(this,this.hv,i,fi.Mm,this.d0,e,t),this.i0.yn(Bi.cq,this.$J)}if(e){const t=new vh;var n;this.l0.y$(t);const i=null!=(n=this.WJ(e.HP))?n:e.HP;this.f0=this.FP.addSourceBuffer(i),this.e0=rx(this,this.hv,e,fi.ym,this.f0,i,t),this.e0.yn(Bi.cq,this.$J)}this.Mq.$n(this,t)}async c0(){await super.Cq(this.FP),"open"!==this.Jf&&await KN(this.FP,"sourceopen")}r0(){if("open"!==this.Jf)return!1;const t=this.i0&&this.i0.oa,i=this.e0&&this.e0.oa;return!(t||i)}n$(){this._0=!0,this.i0&&this.i0.n$(),this.e0&&this.e0.n$(),this._0=!1,this.g0()}qJ(){this.i0&&this.i0.qJ(),this.e0&&this.e0.qJ()}mq(t){const i=Vt(t.u0,(t=>D(t.HP,"audio"))),e=Vt(t.u0,(t=>D(t.HP,"video")));if(this.i0){if(!i)return!1;if(!this.i0.mq(i))return!1}else if(i)return!1;if(this.e0){if(!e)return!1;if(!this.e0.mq(e))return!1}else if(e)return!1;return!!super.mq(t)}async yq(t){const i=Vt(t.u0,(t=>D(t.HP,"audio"))),e=Vt(t.u0,(t=>D(t.HP,"video"))),s=[];this.i0&&s.push(this.i0.yq(i)),this.e0&&s.push(this.e0.yq(e)),await Promise.all(s),await super.yq(t)}async Ud(){if(this.FP.removeEventListener("sourceclose",this.w0),f.OE&&await this.jq(),this.i0){if(await this.i0.Ud(),this.i0=void 0,Tr()&&(f.OE||f.LE))try{this.FP.removeSourceBuffer(this.d0)}catch(t){}this.d0=void 0}if(this.e0){if(await this.e0.Ud(),this.e0=void 0,Tr()&&(f.OE||f.LE))try{this.FP.removeSourceBuffer(this.f0)}catch(t){}this.f0=void 0}this.BC.src&&URL.revokeObjectURL(this.BC.src),this.BC.disableRemotePlayback=!1,this.hv.fn([Co.yw,Co.hw],this.v0),this.l0.gn(),f.LE&&await this.jq(),await super.Ud()}w$(){const t=this.wC,i=t.u0.map((t=>D(t.HP,"audio")&&this.i0?this.i0.wd:D(t.HP,"video")&&this.e0?this.e0.wd:t));this.wC=Yt({},t,{u0:i})}r$(){this._0||this.g0()}get A0(){if(!this.Pq)return!1;const t=this.wf;return 0!==t.U&&t.Cn(t.U-1)<=this.hv.Mf}g0(){this.A0&&this.r0()&&(this.FP.endOfStream(),this.s0=void 0,this.Co(new wn(JL.rU)),this.hv.$J())}ZJ(){this.r0()&&(this.Pq?this.g0():void 0!==this.s0&&this.h0(this.s0))}Tq(t){return this.l0.Tq(t)}WJ(t){return vx(this.m0,t)}static Rq(t){const i=as(t.p0);if(void 0===i)return!1;if("function"!=typeof i.isTypeSupported)return!1;const e=new th(t.p0);for(const i of t.u0)if(void 0===vx(e,i.HP))return!1;return!0}constructor(t,i,e,s,n,r=new th(t.p0),h){super(t,i,s,n),this.i0=void 0,this.d0=void 0,this.e0=void 0,this.f0=void 0,this.o0=new xs(0,1/0),this.s0=void 0,this._0=!1,this.w0=()=>{this.Co(new wn(JL.gq))},this.v0=()=>{this.g0()},this.$J=()=>{this.hv.$J()},this.m0=r,this.FP=this.m0.K$(),this.FP.addEventListener("sourceclose",this.w0),this.hv.yn([Co.yw,Co.hw],this.v0),this.l0=new ux(this,e,this.hv,h)}};function vx(t,i){const e=En(i),s=tx(e),n="audio/mp4"===e.Rg,r=n&&1===s.length&&"mp4a.40.34"===s[0];if(t.t0(i)&&(!r||!f.ZE))return i;if(r){const i=['audio/mp4; codecs="mp3"',"audio/mpeg"];for(const e of i)if(t.t0(e))return e}if(n&&1===s.length&&"flac"===s[0].toLowerCase()){const e=["flac","fLaC","FLAC"];for(const s of e){const e='audio/mp4; codecs="'+s+'"';if(t.t0(i))return e}}}var vs=class extends wn{constructor(t){super(Co.hw),this.currentTime=t}},Ax=[Co.Ew,Co.ww,Co.yw,Co.hw,Co.jh,Co.Sh],mx=class extends Bo{get Mf(){return this.xB}get y0(){return this.M0}get T0(){return this.N0}get ct(){return this.XL}get Sf(){return this.D0}get Ff(){return this.jB}get Jf(){return this.S0}get e_(){return this.CB}get zf(){return this.OB}set zf(t){this.zf!==t&&(this.OB=t,this.Co(new Pc(this.Mf,this.c_)))}get Gf(){return this.PB}set Gf(t){this.Gf!==t&&(this.PB=t,this.Co(new Qe(this.Mf,this.Gf)))}get c_(){return this._k}set c_(t){this.c_!==t&&(this._k=t,this.Co(new Pc(this.Mf,this.c_)))}Em(t,i,e){this.xB!==t&&(this.xB=t,this.M0=i,e&&!this.CB?(this.N0=!0,this.Co(new vs(this.Mf))):(this.N0=!1,this.CB=!0,this.Co(new ri(this.Mf))))}m_(){this.jB||(this.jB=!0,this.Co(new hs(this.Mf)))}p_(){this.jB&&(this.jB=!1,this.Co(new Gt(this.Mf)))}Ud(){this.Vo()}constructor(t,i,e,s,n,r,h,o,a,u,c){super(),this.xB=t,this.XL=i,this.D0=e,this.jB=s,this.CB=n,this.OB=r,this.PB=h,this._k=o,this.S0=a,this.M0=u,this.N0=c}};function px(t){return new mx(t.Mf,t.ct,t.Sf,t.Ff,t.e_,t.zf,t.Gf,t.c_,t.Jf,!1,t.T0)}function yx(t,i){i.ct===t.ct||S(i.ct)&&S(t.ct)||t.Co(new ko(t.ct)),t.zf=i.zf,t.c_=i.c_,t.Gf=i.Gf,i.Ff?t.m_():t.p_().catch(na),i.Mf!==t.Mf||i.Jf>Mw.uT&&t.Jf===Mw.uT?t.Em(i.Mf,i.y0,i.T0):!i.e_&&t.e_?t.Co(new ri(t.Mf)):i.e_&&!t.e_&&t.Jf>=Mw.cT&&t.Co(new yi(t.Mf)),!i.Sf&&t.Sf&&t.Co(new jn(t.Mf))}var Mx=class extends Bo{get Jf(){return this.$f()}I0(t){this.rO!==t&&(this.rO=t,this.Co(new _e(this.hv.Mf,t)))}E0(){this.I0(this.$f())}tr(){this.I0(Mw.uT)}Ud(){this.Vo()}constructor(t){super(),this.rO=Mw.uT,this.b0=()=>{this.E0()},this.hv=t}},Tx=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],nu=class extends Mx{$f(){let t=this.hv.UP.readyState;return t>Mw.cT&&this.hv.L0?Mw.cT:(this.hv.UP.seeking&&t>Mw.Xn&&(t=Mw.Xn),t)}Ud(){for(const t of Tx)this.hv.UP.removeEventListener(t,this.b0);super.Ud()}constructor(t){super(t);for(const t of Tx)this.hv.UP.addEventListener(t,this.b0)}},Nx=class extends Mx{$f(){if(this.hv.UP.readyState===Mw.uT)return Mw.uT;const t=this.k0(),i=t?t.jn-t.Cn:0;if(!t)return Mw.Xn;const e=this.hv.Gf;return this.x0()||i>=3*e?Mw.dT:i>=3?Mw.lT:Mw.cT}k0(){const t=this.hv.Mf,i=this.hv.wf.fB(.04),e=i.vB(t);if(!(e<0))return{Cn:t,jn:i.jn(e)}}x0(){if(this.hv.Sf)return!0;const t=this.hv.ct,i=this.k0();return!!i&&t-i.jn<=.16666666666666666}Ud(){this.hv.fn([Co.yw,Co.hw],this.b0);for(const t of Tx)this.hv.UP.removeEventListener(t,this.b0);super.Ud()}constructor(t){super(t),this.hv.yn([Co.yw,Co.hw],this.b0);for(const t of Tx)this.hv.UP.addEventListener(t,this.b0)}},Dx=[Zt.H_,Co.jh,Co.Sh,Co.yw,Co.pw,Co.hw,Co.aw,Co.Jg,Nt.ha],Sx=class extends Bo{C0(){return(!this.tO.T0||!this.tO.O0)&&this.tO.Jf<Mw.lT}j0(){return!this.tO.e_&&!(this.tO.Ff||this.tO.Sf||this.tO.lt||this.C0())}Yn(){const t=this.P0;this.P0=this.j0(),!t&&this.P0&&this.Co(new Oe(this.tO.Mf))}tr(){this.P0=!1}Ud(){this.Vo(),this.tO.fn(Dx,this.rG)}constructor(t){super(),this.P0=!1,this.rG=()=>{this.Yn()},this.tO=t,this.tO.yn(Dx,this.rG)}},Ix=class extends Sx{j0(){return this.z0&&super.j0()}Yn(){this.z0&&(this.BC.paused||this.BC.ended||this.BC.error)&&(this.z0=!1),super.Yn()}tr(){super.tr(),this.z0=!1}Ud(){this.BC.removeEventListener(Zt.Rw,this.lO),super.Ud()}constructor(t){super(t),this.z0=!1,this.lO=()=>{this.z0=!0,this.Yn()},this.BC=t.UP,this.BC.addEventListener(Zt.Rw,this.lO)}},Ex=class extends wn{constructor(t){super(Nt.ha),this.lt=t}};function bx(t,i){return t.VT<=i&&t.WT>i}function Lx(t,i){return function(t,i){return ld(t.VT,i.VT,xr)}(t,i)||function(t,i){return ld(t.WT,i.WT,xr)}(t,i)}function kx(t,i){return function(t,i){return ld(t.$T,i.$T,xr)}(t,i)||function(t,i){return ld(t.tN,i.tN,xr)}(t,i)}function Bu(t,i,e){let s=function(t,i,e,s,n,r,h){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===h&&(h=t.length);let o=r,a=h-1;for(;o<=a;){const h=o+(a-o>>1),u=s(e(t[h]),i);if(u<0)o=h+1;else if(u>0)a=h-1;else{if(!(n&&h>r&&0===s(e(t[h-1]),i)))return h;a=h-1}}return~o}(t,i,Od,e,!0);if(s<0)return s;for(;s<t.length&&e(i,t[s])===Ri.Zr;s++)if(t[s].aN(i))return s;return-(s+1)}function xx(t,i,e){const s=Bu(t,i,e);return s>=0?s:-(s+1)}function Cx(t){const i=t.Lt;if(!i)return-1;if(t instanceof je)return i.B0(t);const e=i.L;if(!e)return-1;const s=Bu(e.og,t,Lx);return s>=0?s:-1}function Ox(t,i){const e=function(t,i,e){const s=t.length,n=i.length;let r=0,h=0;const o=[],a=[];for(;r<s&&h<n;){const s=t[r],n=i[h];s===n?(r++,h++):e(n,s)<=0?(o.push(n),h++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;h<n;)o.push(i[h]),h++;return{R0:o,U0:a}}(t,i,Lx);return function(t,i){const e=i.length;for(let s=0;s<e;s++)t[s]=i[s];t.length=e}(t,i),e}var ys=class{get og(){return this.Q0}get U(){return this.Q0.length}get va(){if(this.Xa){const t=this.Q0;this.Xa.length=t.length;for(let i=0;i<t.length;i++)this.Xa[i]=t[i].va}else this.Xa=this.fa();return this.Xa}fa(){return function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.Wb(e).va;return i.item=i=>{const e=0|i,s=t.Wb(e);return s&&s.va||void 0},w.defineProperty(i,"constructor",{value:nv}),i}(this)}LT(t){const i=this.Q0;for(let e=i.length-1;e>=0;e-=1){const s=i[e];if(t.aN(s))return!0}return!1}Wb(t){return this.Q0[t]}constructor(t){this.Xa=void 0,this.Q0=t}},jx=class extends ja{fa(){return new Px(this.Lt.va,this.Jf)}constructor(t,i){super(qt.H_),this.Lt=t,this.Jf=i}},Px=class extends Y{constructor(t,i){super("readystatechange"),this.track=t,this.readyState=i}},zx=class extends ja{fa(){return new Bx(this.Lt.va)}constructor(t){super(qt.X_),this.Lt=t}},Bx=class extends Y{constructor(t){super("typechange"),this.track=t}},Rx=class extends ja{fa(){return new Ux(this.GT.va)}constructor(t){super(qt.O_),this.GT=t}},Ux=class extends Y{constructor(t){super("addcue"),this.cue=t}},Qx=class extends ja{fa(){return new Fx(this.GT.va)}constructor(t){super(qt.P_),this.GT=t}},Fx=class extends Y{constructor(t){super("removecue"),this.cue=t}},Yx=class extends Bo{get q(){return this.F0}get L(){return this.Y0}G0(t){return Vt(this.Y0.og,(i=>i.o===t))}get OI(){return this.V0}set OI(t){this.V0=t}get Bg(){return this.W0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Su(this)}get o(){return this.CT}get Mg(){return this.OT}get Og(){return this.H0}set Og(t){this.H0=t}get zt(){return this.q0}get kh(){return this.jT}set kh(t){t!==this.jT&&(this.jT=t,this.Co(new Ks(this)))}get gs(){return this.ZL}get Tg(){return this.X0}get jg(){return this.rR}set jg(t){this.Xo(t)}Xo(t){const i=cf(t);i!==this.jg&&(this.rR=i,i===Or.Ch&&(this.Z0.forEach((t=>{t.ro=!1})),No(this.Z0),this.K0=0),this.Co(new no(this)))}get Jf(){return this.S0}set Jf(t){this.S0!==t&&(this.S0=t,this.Co(new jx(this,this.S0)))}get Ug(){return this.J0}set Ug(t){this.J0=t}get Rg(){return this.$0}set Rg(t){this.$0!==t&&(this.$0=t,this.Co(new zx(this)))}kI(t){if(!t||t.Lt)return;const i=Bu(this.t1,t,kx);if(i>=0)return;t.Lt=this;const e=-(i+1);this.t1.splice(e,0,t);const s=xx(this.L.og,t,Lx);this.i1(t,s),this.Co(new Rx(t))}i1(t,i){this.Q0.splice(i,0,t),this.e1(i),t.lN=i,i<this.K0&&(this.K0=i)}PS(t){if(!t||t.Lt!==this)return;const i=this.B0(t);if(i<0)return;t.ro=!1;const e=this.Z0,s=Bu(e,t,Lx);s>=0&&Kn(e,s);const n=Bu(this.t1,t,kx);n>=0&&Kn(this.t1,n),this.s1(t,i),this.Co(new Qx(t))}s1(t,i){Kn(this.Q0,i),this.e1(i),t.lN=-1,this.K0>i&&--this.K0}sN(t){if(!t||t.Lt!==this)return;const i=this.B0(t);if(i<0)return;this.s1(t,i);const e=xx(this.L.og,t,Lx);this.i1(t,e);const s=tc(this.Z0,(i=>i===t));if(s>=0){Kn(this.Z0,s);const i=xx(this.Z0,t,Lx);this.Z0.splice(i,0,t)}}n1(t,i){const e=this.Z0,s=this.Q0;let n=this.K0,r=!1;i&&(n=0);for(let i=e.length-1;i>=0;i--){bx(e[i],t)||(r=!0,Kn(e,i))}for(;n<s.length&&s[n].VT<=t;){const i=s[n];if(0===t)break;bx(i,t)&&!qo(e,i)&&(r=!0,e.push(i)),n++}r&&Zl(e,Lx),this.K0=n}B0(t){return(-1===t.lN||t.lN>=this.o1)&&this.a1(),t.lN}a1(){const t=this.Q0;for(let i=this.o1;i<t.length;i++)t[i].lN=i;this.o1=t.length}e1(t){t<this.o1&&(this.o1=_.max(t,0))}zg(t){this.Bg||(this.jg=t)}gn(){this.Vo();const t=this.Q0.slice();for(const i of t)i.gn();No(this.Q0),No(this.t1),No(this.Z0)}constructor(t,i,e,s,n,r,h,o,a){super(),this.OT=Xc(),this.V0=!1,this.rR=Or.Ch,this.S0=si.NONE,this.J0=void 0,this.Q0=[],this.t1=[],this.Z0=[],this.o1=0,this.K0=0,this.CT=i||"",this.H0=o||"",this.q0=t,this.ZL=s||"",this.V0=Boolean(n),this.W0=Boolean(h),this.$0=r||Wt.DEFAULT,this.jT=e||"",this.X0=a||[],this.Y0=new ys(this.Q0),this.F0=new ys(this.Z0)}},lh=class extends zr{fa(){return new Gx(this.GT.va)}constructor(t,i){super(Di.FT,t),this.cD=i}},Gx=class extends Hr{constructor(t){super("enter",t)}},ph=class extends zr{fa(){return new Vx(this.GT.va)}constructor(t,i){super(Di.YT,t),this.cD=i}},Vx=class extends Hr{constructor(t){super("exit",t)}},Wx=class extends ja{fa(){return new Hx(this.GT.va)}constructor(t){super(qt.U_),this.GT=t}},Hx=class extends Y{constructor(t){super("entercue"),this.cue=t}},qx=class extends ja{fa(){return new Xx(this.GT.va)}constructor(t){super(qt.F_),this.GT=t}},Xx=class extends Y{constructor(t){super("exitcue"),this.cue=t}},Za=class extends dt{get Mg(){return this.OT}get VT(){return this.u1.startTime}set VT(t){this.u1.startTime=t}get WT(){return this.u1.endTime}set WT(t){this.u1.endTime=t}get O(){return this.rN}set O(t){this.rN=t}get hN(){return!!this.u1.pauseOnExit}set hN(t){this.u1.pauseOnExit=!!t}get Lt(){return this.eN}set Lt(t){this.eN=t}get o(){return this.u1.id||""}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Lh(this)}get ro(){return this.ho}set ro(t){this.ro!==t&&(this.ho=t,t?(this.Co(new lh(this,this.VT)),this.eN&&this.eN.Co(new Wx(this))):(this.Co(new ph(this,this.WT)),this.eN&&this.eN.Co(new qx(this))))}aN(t){return this===t||$d(this,t)&&av(this,t)&&this.uN(t)}uN(t){return Dc(this.O,t.O)}gn(){this.Vo(),this.u1.removeEventListener("enter",this.c1),this.u1.removeEventListener("exit",this.l1)}constructor(t){super(),this.rN=void 0,this.eN=void 0,this.Xa=void 0,this.ho=!1,this.c1=()=>{this.ro=!0},this.l1=()=>{this.ro=!1},this.OT=Hw(),this.u1=t,this.$T=t.startTime,this.tN=t.endTime,this.u1.addEventListener("enter",this.c1),this.u1.addEventListener("exit",this.l1)}},Zx=class extends ja{fa(){return new Kx(this.Lt.va)}constructor(t){super(qt.G_),this.Lt=t}},Kx=class extends Y{constructor(t){super("cuechange"),this.track=t}};function Jx(t){if(!t)return;let i=t.THEOplayerVTTRegion;return i||(i=new $x(t),t.THEOplayerVTTRegion=i),i}var $x=class{get d1(){return this.f1}get o(){return this.f1.id||""}get ji(){return+this.f1.width||0}set ji(t){this.f1.width=t||0}get dN(){return+this.f1.lines||0}set dN(t){this.f1.lines=t||0}get fN(){return+this.f1.regionAnchorX||0}set fN(t){this.f1.regionAnchorX=t||0}get _N(){return+this.f1.regionAnchorY||0}set _N(t){this.f1.regionAnchorY=t||0}get wN(){return+this.f1.viewportAnchorX||0}set wN(t){this.f1.viewportAnchorX=t||0}get vN(){return+this.f1.viewportAnchorY||0}set vN(t){this.f1.viewportAnchorY=t||0}get gN(){return this.f1.scroll||""}get va(){return this.Xa||(this.Xa=fv(this)),this.Xa}constructor(t){this.Xa=void 0,this.f1=t}};var tC=class extends Za{get O(){return this.u1.text}set O(t){this.u1.text=t}get Pt(){return this.u1.vertical||""}set Pt(t){this.u1.vertical=t||""}get JT(){return this.u1.snapToLines}set JT(t){this.u1.snapToLines=t}get qT(){return this.u1.line}set qT(t){this.u1.line=t}get hp(){return+this.u1.size}set hp(t){this.u1.size=os(t,0,100)}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return rv(this)}uN(t){return uv(this,t)}constructor(t){super(t)}},iC=class extends tC{get KT(){return Jx(this.u1.region)}get XT(){return this.u1.lineAlign||"start"}set XT(t){this.u1.lineAlign=t||"start"}get po(){return this.u1.position}set po(t){this.u1.position=t}get ZT(){return this.u1.positionAlign||"auto"}set ZT(t){this.u1.positionAlign=t||"auto"}get HT(){return this.u1.align||"center"}set HT(t){this.u1.align=t||"center"}constructor(t){super(t)}},eC=class extends tC{get KT(){return Jx(this.d1)}get d1(){return function(t,i){if(void 0===i)return;let e=t&&t.regions;return e&&e.getRegionById(i)||void 0}(this.u1.track,this.u1.regionId)}get XT(){return function(t){return"middle"===t?"center":t}(this.u1.lineAlign||"start")}set XT(t){this.u1.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get po(){return this.u1.position}set po(t){this.u1.position=function(t,i){return sv(t,i)}(t,this.HT)}get ZT(){return function(t){return iv[t]}(this.u1.positionAlign||"middle")}set ZT(t){this.u1.positionAlign=function(t,i){return $w[ev(t,i)]}(t||"center",this.HT)}get HT(){return function(t){return"middle"===t?"center":t}(this.u1.align||"middle")}set HT(t){this.u1.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function sC(t,i){return t.O===i.O}function nC(t,i){if(0===i.length)return;const e=i.length-1;if(i[e].VT<t.VT)return void rC(i,e,t.VT);const s=i[0];if(s.VT>t.VT)return void(t.WT=s.VT);const n=Bu(i,t,Lx);if(n>=0)return;const r=-(n+1),h=r-1;if(h>=0){i[h].VT<t.VT&&rC(i,h,t.VT)}if(r<i.length){const e=i[r];t.WT=e.VT}}function rC(t,i,e){const s=t[i].VT;for(let n=i;n>=0&&t[n].VT===s;n--)t[n].WT=e}function hC(t){return Lh(t)}var oC,aC,uC=class extends Za{get O(){return this._1}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return hC(this)}uN(t){return sC(this,t)}constructor(t,i){super(t),this._1=i}};function Wi(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function Ge(t){switch(t){case 0:return $c;case 1:return gg;case 2:return Ru;case 3:return so}}function cC(t,i){const e=i.Ku,s=t.byteLength,n=ks(t);return i.Im(s-e),Tg(n,e,s).buffer}function lC(t,i){return{id:t||"",data:i instanceof ArrayBuffer?i:void 0}}function dC(t,i,e){const s=Mo(t,i);if(!Wi(s))return;const n=Ge(s);return{id:e,language:su(t,i,3),description:n(t,i),text:n(t,i)}}function fC(t,i,e){const s=Mo(t,i);if(!Wi(s))return;const n=Ge(s);return{id:e,mimeType:$c(t,i),fileName:n(t,i),description:n(t,i),data:cC(t,i)}}function _C(t,i,e){const s=Mo(t,i);if(!Wi(s))return;const n=Ge(s),r=[];for(;i.Ku<t.byteLength;)r.push({involvement:n(t,i),involvee:n(t,i)});return{id:e,entries:r}}function gC(t,i,e){const s=Mo(t,i);if(!Wi(s))return;const n=Ge(s),r=su(t,i,3),h=Mo(t,i),o=Mo(t,i),a=n(t,i);let u=!1;const c=[];for(;i.Ku<t.byteLength;){let e;if(1===s){let s=_g(t,i);void 0===s?s=u:u=s,e=Ru(t,i,s)}else e=n(t,i);if(!e||i.Ku+4>t.byteLength)break;c.push({text:e,timestamp:aa(t,i)})}return{id:e,language:r,format:h,contentType:o,description:a,entries:c}}function wC(t,i,e){return{id:e,ownerIdentifier:$c(t,i),identifier:cC(t,i)}}function vC(t,i,e){const s=Mo(t,i);if(!Wi(s))return;const n=Ge(s);return{id:e,language:su(t,i,3),description:n(t,i),text:n(t,i)}}function AC(t,i,e){const s=Mo(t,i);if(!Wi(s))return;return{id:e,text:Ge(s)(t,i)}}function mC(t,i,e){return{id:e,url:$c(t,i)}}function pC(t,i,e){const s=Mo(t,i);if(!Wi(s))return;const n=Ge(s);return{id:e,description:n(t,i),text:n(t,i)}}function yC(t,i,e){const s=Mo(t,i);if(!Wi(s))return;return{id:e,description:Ge(s)(t,i),url:$c(t,i)}}function MC(t,i,e){switch(e){case"COM":return dC(t,i,e);case"GEO":return fC(t,i,e);case"IPL":return _C(t,i,e);case"PIC":return function(t,i,e){const s=Mo(t,i);if(!Wi(s))return;const n=Ge(s),r=su(t,i,3),h=Mo(t,i),o=n(t,i);let a,u;return"--\x3e"===r?(a=r,u=$c(t,i)):(a="image/"+r.toLowerCase(),u=cC(t,i)),{id:e,mimeType:a,pictureType:h,description:o,data:u}}(t,i,e);case"SLT":return gC(t,i,e);case"TXX":return pC(t,i,e);case"UFI":return wC(t,i,e);case"ULT":return vC(t,i,e);case"WXX":return yC(t,i,e);default:if("T"===e.charAt(0))return AC(t,i,e);if("W"===e.charAt(0))return mC(t,i,e)}}function TC(t,i,e){switch(e){case"APIC":return function(t,i,e){const s=Mo(t,i);if(!Wi(s))return;const n=Ge(s),r=$c(t,i),h=Mo(t,i),o=n(t,i);let a;return a="--\x3e"===r?$c(t,i):cC(t,i),{id:e,mimeType:r,pictureType:h,description:o,data:a}}(t,i,e);case"COMM":return dC(t,i,e);case"COMR":return function(t,i,e){const s=Mo(t,i);if(!Wi(s))return;const n=Ge(s),r=$c(t,i),h=su(t,i,8),o=$c(t,i),a=Mo(t,i),u=n(t,i),c=n(t,i);let l,d;return i.Ku<t.byteLength&&(l=$c(t,i)||"image/",d=cC(t,i)),{id:e,price:r,validUntil:h,contactURL:o,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,i,e);case"GEOB":return fC(t,i,e);case"IPLS":return _C(t,i,e);case"PRIV":return function(t,i,e){return{id:e,ownerIdentifier:$c(t,i),data:cC(t,i)}}(t,i,e);case"POSS":return function(t,i,e){return{id:e,format:Mo(t,i),position:aa(t,i)}}(t,i,e);case"SYLT":return gC(t,i,e);case"TXXX":return pC(t,i,e);case"UFID":return wC(t,i,e);case"USER":return function(t,i,e){const s=Mo(t,i);if(!Wi(s))return;const n=Ge(s);return{id:e,language:su(t,i,3),text:n(t,i)}}(t,i,e);case"USLT":return vC(t,i,e);case"WXXX":return yC(t,i,e);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return AC(t,i,e);default:{const s=e.charAt(0);if("T"===s)return AC(t,i,e);if("W"===s)return mC(t,i,e)}}}!function(t){t[t.ISO_8859_1=0]="ISO_8859_1",t[t.UTF16_BOM=1]="UTF16_BOM",t[t.UTF16=2]="UTF16",t[t.UTF8=3]="UTF8"}(oC||(oC={})),function(t){t[t.V22=2]="V22",t[t.V23=3]="V23",t[t.V24=4]="V24"}(aC||(aC={}));var NC=10;function DC(t,i){return(127&Mo(t,i))<<21|(127&Mo(t,i))<<14|(127&Mo(t,i))<<7|127&Mo(t,i)}function SC(t,i){switch(t){case 4:return{g1:tu(i,0),w1:tu(i,1),v1:tu(i,2),A1:tu(i,3)};case 3:return{g1:tu(i,0),w1:tu(i,1),v1:tu(i,2)};case 2:return{g1:tu(i,0),m1:tu(i,1)}}}function IC(t,i,e){switch(e.dp){case 3:e.fp.w1&&function(t,i){const e=i.Ku,s=aa(t,i)+4,n=32768&og(t,i);i.Em(e+s),n&&aa(t,i)}(t,i);break;case 4:e.fp.w1&&function(t,i){const e=i.Ku,s=DC(t,i);i.Em(e+s)}(t,i)}}function EC(t,i){if(t.byteLength-i.Ku<NC)return null;if(73!==Mo(t,i)||68!==Mo(t,i)||51!==Mo(t,i))return null;const e=Mo(t,i),s=Mo(t,i);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(e))return null;const n=Mo(t,i),r=DC(t,i);return{dp:e,M1:s,fp:SC(e,n),T1:r}}function bC(t,i,e){switch(e){case 2:return function(t,i){if(i.Ku+6>t.byteLength)return;return{o:su(t,i,3),hp:rg(t,i,3)}}(t,i);case 3:return function(t,i){if(i.Ku+10>t.byteLength)return;const e=su(t,i,4),s=aa(t,i);Mo(t,i);const n=Mo(t,i);return{o:e,hp:s,fp:{m1:tu(n,0),N1:tu(n,1),groupingIdentity:tu(n,2)}}}(t,i);case 4:return function(t,i){if(i.Ku+10>t.byteLength)return;const e=su(t,i,4),s=DC(t,i);Mo(t,i);const n=Mo(t,i);return{o:e,hp:s,fp:{groupingIdentity:tu(n,1),m1:tu(n,4),N1:tu(n,5),g1:tu(n,6),D1:tu(n,7)}}}(t,i)}}function LC(t){const i=ks(t),e=new j(i.byteLength);let s=0;for(let t=0;t<i.byteLength;t++){const n=i[t];255===n&&t++,e[s]=n,s++}return Ao(Tg(e,0,s))}function kC(t,i){const e=i||new _s,s=EC(t,e);if(!s)return null;const n=function(t,i,e){const s=[],n=i.Ku;let r=qr(t,n,n+e.T1);const h=new _s;switch(i.Im(e.T1),e.dp){case 2:case 3:e.fp.g1&&(r=LC(r))}IC(t,i,e);for(;h.Ku<r.byteLength;){const t=xC(r,h,e);if(void 0===t)break;s.push(t)}return s}(t,e,s);return{rp:s,S1:n}}function xC(t,i,e){const s=bC(t,i,e.dp);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.hp)return;const n=i.Ku;let r,h,o=qr(t,n,n+s.hp);switch(i.Im(s.hp),e.dp){case 2:{const t=s;h=o,r=MC(h,new _s,t.o);break}case 3:{const t=s,i=new _s;!function(t,i,e){const s=e.fp;let n,r,h;s.m1&&(n=aa(t,i)),s.N1&&(r=Mo(t,i)),s.groupingIdentity&&(h=Mo(t,i))}(o,i,t);h=qr(o,i.Ku,o.byteLength),r=TC(h,new _s,t.o);break}case 4:{const t=s,i=new _s;t.fp.g1&&(o=LC(o)),function(t,i,e){const s=e.fp;let n,r,h,o;s.groupingIdentity&&(n=Mo(t,i)),s.m1&&(r=aa(t,i)),s.N1&&(h=Mo(t,i)),s.D1&&(o=DC(t,i))}(o,i,t);h=qr(o,i.Ku,o.byteLength),r=TC(h,new _s,t.o);break}}if(!r){const t=He(ks(h));r=lC(s.o,t.buffer)}return r}function CC(t){return function(t,i,e){return AC(t,i,e)}(new DataView(t.data),new _s,t.key)}function OC(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return CC(t);default:let i=t.key.charAt(0);if("T"===i)return function(t){return{id:t.key,text:t.data}}(t);if("W"===i)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return lC(t.key,t.data)}(t)}var jC=class t extends Bo{get q(){return this.F0}get OI(){return this.I1?this.I1.default:void 0}get L(){return this.Y0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return Su(this)}get o(){return this.xT.id||this.I1&&this.I1.id||""}get Mg(){return this.OT}get Og(){return this.xT.inBandMetadataTrackDispatchType||""}get zt(){return this.xT.kind||Mi.Tm}get kh(){return this.jT}set kh(t){t!==this.jT&&(this.jT=t,void 0!==this.I1&&(this.I1.label=t),this.Co(new Ks(this)))}get gs(){return this.xT.language||""}get jg(){return this.rR}set jg(t){let i=this.jg;this.rR=cf(t),this.E1();let e=this.jg;i!==e&&this.Co(new no(this)),e!==Or.Ch&&this.b1(si.LOADING)}get L1(){return cf(this.xT.mode)}set L1(t){this.xT.mode=t}get PT(){return this.xT}get Jf(){return this.S0}get C1(){return this.I1?+this.I1.readyState||si.NONE:si.LOADED}get Ug(){return this.J0}get Rg(){return this.$0}set Rg(t){this.$0!==t&&(this.$0=t,this.Co(new zx(this)))}get O1(){return this.j1}set O1(t){this.j1=t,t&&(this.P1=!0,u((()=>{this.P1=!1}),50)),this.E1()}E1(){let t=this.jg;this.O1||t!==Or.Jn?this.L1=t:this.L1=Or.Pg}z1(){let t=this.jg,i=this.L1;t!==i&&(this.O1||t!==Or.Jn||i!==Or.Pg)&&("metadata"===this.zt&&i===Or.Ch?this.jg=t:this.P1&&i===Or.Ch&&t===Or.Jn?this.L1=t:this.jg=i)}E0(t){this.S0!==t&&(this.S0=t,this.Co(new jx(this,t)))}b1(t){let i=_.max(this.S0,this.C1,t);this.E0(i)}static B1(t){return t&&t.THEOplayerTextTrackCue||void 0}R1(i){let e=t.B1(i);if(e)return e;if(e=this.U1(i),Tn(e))for(let t of e)t.Lt=this;else e.Lt=this;return i.THEOplayerTextTrackCue=e,e}U1(t){return function(t){return!(!t||"org.id3"!==t.type||!t.value)}(t)?(this.Rg=Wt.ID3,function(t){let i;try{i=OC(t.value)}catch(t){i=lC("")}return new uC(t,i)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Rg=Wt.ID3,function(t){let i=[];try{let e=kC(new DataView(t.data));if(e)for(let s of e.S1)i.push(new uC(t,s))}catch(t){}return i}(t)):function(t){return"text"in t}(t)?(this.Rg=Wt.WEBVTT,function(t){return"regionId"in t}(t)?new eC(t):new iC(t)):new Za(t)}Q1(t){let i=[];if(!t)return i;let e=t.length;for(let s=0;s<e;s++){let e=this.R1(t[s]||t.item(s));if(Tn(e))for(let t of e)i.push(t);else i.push(e)}return i}F1(){let t=this.Q1(this.xT.cues),i=Ox(this.Q0,t);for(let t of i.U0)t.fn(Di.YT,this.Y1),t.fn(Di.FT,this.Y1),this.Co(new Qx(t));for(let t of i.R0)t.yn(Di.FT,this.Y1),t.yn(Di.YT,this.Y1),this.Co(new Rx(t))}n1(){let t=this.Q1(this.xT.activeCues),i=Ox(this.Z0,t);for(let t of i.U0)t.ro=!1;for(let t of i.R0)t.ro=!0;(i.R0.length||i.U0.length)&&this.Co(new Zx(this))}zg(t){this.jg=t}gn(){this.Vo();const t=this.Q0.slice();for(let i of t)i.gn();No(this.Q0),No(this.Z0),this.xT.removeEventListener("cuechange",this.G1),this.xT.removeEventListener("cuechange",this.Y1),this.I1&&(this.I1.removeEventListener("load",this.V1),this.I1.removeEventListener("error",this.W1),zu(this.I1))}constructor(t,i,e=!0){super(),this.Q0=[],this.Z0=[],this.rR=Or.Ch,this.S0=si.NONE,this.J0=void 0,this.$0=Wt.DEFAULT,this.P1=!1,this.G1=()=>{this.E1(),this.xT.removeEventListener("cuechange",this.G1)},this.Y1=()=>{this.jg!==Or.Ch&&(this.F1(),this.n1(),this.Q0.length&&this.b1(si.LOADING))},this.V1=()=>{this.b1(si.LOADED)},this.W1=()=>{this.b1(si.ERROR)},this.xT=t,this.j1=e,this.xT.addEventListener("cuechange",this.G1),this.xT.addEventListener("cuechange",this.Y1),this.I1=i,this.I1&&(this.J0=Na(this.I1.src),this.I1.addEventListener("load",this.V1),this.I1.addEventListener("error",this.W1)),this.OT=Xc(),this.jT=t.label||"",this.Y0=new ys(this.Q0),this.F0=new ys(this.Z0),this.jg=this.L1,wc((()=>{this.Y1(),this.b1(si.NONE)}))}};function PC(t,i){return rr(t.cD,i.cD)||function(t,i){return t.Lt===i.Lt?ru(Cx(t),Cx(i)):VA(t.Lt,i.Lt)}(t.GT,i.GT)||function(t,i){return t===i?Ri.Zr:t===Di.FT?Ri.hd:Ri.ul}(t.type,i.type)}var zC=class{tr(){No(this.H1);for(const t of this.Dl.slice())this.it(t);this.q1(),this.X1=0,this.An=0,this.Z1=!1,this.K1=!1,this.J1=void 0}tt(t){if(!qo(this.Dl,t)){if(this.Dl.push(t),t.yn(qt.O_,this.t4),t.yn(qt.P_,this.i4),t.yn(qt.B_,this.e4),t.yn(qt.ra,this.s4),t.L.U>0){for(const i of t.L.og)this.n4.push(i);this.r4()}this.h4()}}it(t){if(Qr(this.Dl,t)){if(t.fn(qt.O_,this.t4),t.fn(qt.P_,this.i4),t.fn(qt.B_,this.e4),t.fn(qt.ra,this.s4),t.L.U>0){for(const i of t.L.og)Qr(this.H1,i),Qr(this.n4,i);this.r4()}this.h4()}}h4(){this.Z1=this.Dl.some((t=>t.jg!==Or.Ch))}o4(){this.Qo.e_||this.Qo.Ff?this.q1():this.r4()}r4(){this.Z1&&(this.X1||(this.X1=this.u4.a4(this.c4)))}q1(){this.X1&&(this.u4.l4(this.X1),this.X1=0)}d4(){if(!this.Z1)return;if(this.Qo.e_)return;const t=this.Dl,i=this.An;var e;const s=null!=(e=this.J1)?e:this.Qo.Mf,n=s-i<-.1;let r=this.K1||n;r&&s>i&&s-i<.1&&(r=!1),this.K1=!1,this.J1=void 0;const h=[];for(const i of t)if(i.jg!==Or.Ch){i.n1(s,r);for(const t of i.q.og)h.push(t)}const o=this.H1.slice();if(r);else for(const e of t)e.jg!==Or.Ch&&GA(e,i-fl,s,o);for(let t=o.length-1;t>=0;t--)qo(h,o[t])&&Kn(o,t);const a=[];if(!r)for(let t=o.length-1;t>=0;t--){const e=o[t];e.VT>i&&e.WT<=s&&(a.push(e),Kn(o,t))}for(const t of this.n4)Qr(a,t);No(this.n4);const u=[],c=[];for(const t of a)t.ro||u.push(new lh(t,t.VT)),u.push(new ph(t,_.max(t.VT,t.WT))),t.ro=!1;for(const t of o)t.ro&&(u.push(new ph(t,_.max(t.VT,t.WT))),t.ro=!1);for(const t of h)t.ro||(u.push(new lh(t,t.VT)),t.ro=!0);u.sort(PC);for(const t of u){const i=t.GT;i.Co(t);const e=i.Lt;e&&(t.type===Di.FT?e.Co(new Wx(i)):e.Co(new qx(i)),qo(c,e)||c.push(e))}c.sort(VA);for(const t of c)t.Co(new Zx(t));this.An=s,this.H1=h}gn(){this.tr(),this.Qo.fn(Co.Iw,this.f4),this.Qo.fn(Co.jh,this.f4),this.Qo.fn(Zt.Rw,this.f4),this.Qo.fn(Co.Sh,this.f4),this.Qo.fn(Co.yw,this._4),this.Qo.fn(Co.pw,this.g4)}constructor(t,i){this.Dl=[],this.X1=0,this.An=0,this.H1=[],this.n4=[],this.Z1=!1,this.K1=!1,this.J1=void 0,this.c4=()=>{this.X1=0,this.d4(),this.o4()},this.f4=()=>{this.d4(),this.o4()},this._4=()=>{this.K1=!0,this.J1=this.Qo.Mf,this.q1()},this.g4=()=>{this.d4(),this.o4()},this.s4=()=>{this.h4(),this.d4(),this.o4()},this.t4=t=>{const i=t.GT;qo(this.n4,i)||this.n4.push(i),this.r4()},this.i4=t=>{const i=t.GT;Qr(this.H1,i),Qr(this.n4,i),this.r4()},this.e4=t=>{this.r4()},this.u4=i,this.Qo=t,t.yn(Co.Iw,this.f4),t.yn(Co.jh,this.f4),t.yn(Zt.Rw,this.f4),t.yn(Co.Sh,this.f4),t.yn(Co.yw,this._4),t.yn(Co.pw,this.g4),this.r4()}},_a=class{a4(t){return le(t)}l4(t){Go(t)}},BC=new _a,ou=class extends zC{constructor(t,i=BC){super(t,i)}},RC=class extends je{get va(){return this.Xa||(this.Xa=hC(this)),this.Xa}uN(t){return sC(this,t)}constructor(t,i,e){super(t,1/0,i,!1,e)}},UC=class extends Yx{constructor(t,i,e=Wt.DEFAULT){super(Mi.Dm,"",i||"","",!1,e,!1,t)}},QC=class extends UC{kI(t){nC(t,this.Q0),super.kI(t)}fa(){return Su(this)}constructor(t,i){super(t,i),this.Rg=Wt.ID3}};function FC(t){const i=t&&t.THEOplayerTextTrackCue||void 0;if(i)return i;const e=t.startTime,s=OC(t.value);return t.THEOplayerTextTrackCue=new RC(e,s),t.THEOplayerTextTrackCue}var YC=class extends QC{get o(){return this.xT.id||""}get Og(){return this.xT.inBandMetadataTrackDispatchType||""}get gs(){return this.xT.language||""}Xo(t){super.Xo(t),this.L1=this.jg}get L1(){return cf(this.xT.mode)}set L1(t){this.xT.mode=t}get PT(){return this.xT}b1(t){this.Jf=_.max(this.Jf,t)}F1(){let t=this.xT.cues;if(!t)return;let i=function(t){const i=t.length,e=[];for(let s=0;s<i;s++)e.push(FC(t[s]||t.item(s)));return Zl(e,Lx),e}(t),e=Ox(this.L.og.slice(),i);for(let t of e.U0)this.PS(t);for(let t of e.R0)this.kI(t)}gn(){this.xT.removeEventListener("cuechange",this.Y1),super.gn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.Y1=()=>{this.jg!==Or.Ch&&(this.F1(),this.b1(si.LOADED))},this.xT=t,this.xT.addEventListener("cuechange",this.Y1),this.jg=this.L1,wc((()=>{this.Y1()}))}};function GC(t){return"TXXX"===t.id||"TXX"===t.id}var VC=class extends Ti{w4(){this.v4.yn(Ud.L_,this.kP),this.v4.yn(Ud.x_,this.xP)}A4(){this.v4.fn(Ud.L_,this.kP),this.v4.fn(Ud.x_,this.xP)}m4(t){const i=t.L.og[0];if(!WC(i))return;const e=function(t){const i=t.match(HC);if(!i)return;return{Lt:i[1],gs:i[2]}}(i.O.description),s=e.Lt,n=e.gs;if(this.y4(s,n))return;const r=this.SI.DI(Mi.Tm,t.o,s,n,!1,Wt.TTML);this.tt(r),this.M4.set(t.Mg,r);for(let i of t.L.og)WC(i)&&this.T4(i);t.yn(qt.O_,this.N4)}y4(t,i){return this.Z.og.some((e=>e.kh===t&&e.gs===i))}T4(t){if(!t.Lt)return;const i=this.M4.get(t.Lt.Mg),e=yA(t.O.text,i,{RD:0,UD:1/0,QD:t.VT});for(let t of e)i.kI(t)}async tr(){for(let t of this.v4.og)t.fn(qt.O_,this.N4);for(let t of this.Z.og)this.SI.CI(t);this.M4.clear(),await super.tr()}async gn(){this.A4(),await super.gn()}constructor(t,i){super(),this.SI=t,this.v4=i,this.M4=I(),this.kP=async t=>{const i=t.Lt;if(i.Rg||await i.lf(qt.X_),i.Rg===Wt.ID3){for(;0===i.L.U;)await i.lf(qt.O_);this.m4(i)}},this.xP=t=>{const i=t.Lt;if(i.Rg!==Wt.ID3||!this.M4.has(i.Mg))return;const e=this.M4.get(i.Mg);this.it(e),this.SI.CI(e),i.fn(qt.O_,this.N4)},this.N4=t=>{WC(t.GT)&&this.T4(t.GT)},this.w4()}};function WC(t){return function(t){return GC(t)&&HC.test(t.description)}(t.O)}var HC=/^Track:(.+),Lang:(.+)$/;var qC=class extends wn{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(Co.Vg),this.errorObject=t}},XC=class extends wn{constructor(t){super(Co.Wg),this.D4=t}},ZC=class extends wn{constructor(t){super("xw"),this.D4=t}},KC=new Kr,JC=class extends wn{constructor(t){super("Ws"),this.session=t}},$C=class extends Bo{Lx(){return this.S4=!0,KC.NC((t=>this.I4(t)),this.DC.Wd)}async I4(t){try{fo(t),await this.E4.DO(t);const i=await this.E4.SO(this.b4.xb,this.b4.Gb,t);await this.L4.Lx(this.b4.xb,this.b4.Gb,i)}catch(t){yo(t);const i=t instanceof xi?t.eL:void 0,e=new To(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,i);throw this.Ss(e),e}}async CO(t,i){let e;try{e=function(t){return Tu(t,Nm())}(t)?await this.E4.FO(new j(t),this.DC.Wd):await this.E4.YO(new j(t),i,this.DC.Wd)}catch(t){if(ut(t))return;throw t}if(this.DC.Wd.zd)return;const s=this.x4,n=new ue;this.x4=n;try{await this.L4.Yn(e),await N(100)}catch(t){const i=t instanceof xi?t.eL:void 0;throw new To(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,i)}finally{void 0!==s&&await s.tL,n.Zb(),this.x4===n&&(this.x4=void 0)}}Ss(t){const i=t instanceof To?t:new To(Ui.CONTENT_PROTECTION_ERROR,t.message,t);this.Co(new qC(i)),this.Ws()}C4(){this.L4.fn("Bb",this.Ox),this.L4.fn("Pb",this.O4),this.L4.fn("lt",this.j4),this.P4=!1,this.DC.qd(),this.Co(new JC(this))}async Ws(){let t;this.Vo();do{t=this.x4,void 0!==t&&await t.tL}while(this.x4!==t);this.C4(),await this.L4.Ws().catch(na)}constructor(t,e,s){super(),this.L4=t,this.E4=e,this.b4=s,this.S4=!1,this.P4=!1,this.DC=new Wr,this.Ox=t=>{if(!this.DC.Wd.zd)switch(t.Rb){case"license-request":case"license-renewal":this.CO(t.Bb,t.Ub).catch((t=>this.Ss(t)));break;default:this.Ss(new To(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.Rb))}},this.O4=t=>{this.L4.Dx.Hb(((t,e)=>{switch(t){case"usable":i.$d((()=>{this.P4=!0,this.Co(new XC(e))}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.Co(new ZC(e))}}))},this.j4=t=>{this.Ss(new To(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.yn("Bb",this.Ox),t.yn("Pb",this.O4),t.yn("lt",this.j4),t.yx.then((()=>this.C4()),(t=>this.Ss(t)))}},tO=[Co.Wg,Co.Vg,Co.Lw],iO=class extends Bo{get cA(){return this.lA}TO(){return this.z4.TO()}B4(t){return this.R4||(this.R4=this.U4(t)),this.R4}async U4(t){fo(t);const i=await this.z4.FO(new j(Nm()),t);if(fo(t),!this.zx)throw new g("Invalid MediaKeys when setting ServerCertificate");await this.zx.Bx(i.buffer)}async Q4(t){if(!this.zx)throw new g("Invalid MediaKeys when creating KeySession");try{this.F4.push(t);const i=await this.zx.Px("temporary"),e=new $C(i,this.z4,t);return this.Y4.push(e),e.yn(tO,this.Ds),e.yn("Ws",this.G4),e}finally{Qr(this.F4,t)}}V4(t){if(t.W4)return!1;for(const i of this.Y4)if(eO(i.b4,t))return!0;for(const i of this.F4)if(eO(i,t))return!0;return!1}async gn(){this.zx=void 0,this.Vo();const t=this.Y4.slice();No(this.Y4),await Promise.all(t.map((t=>t.Ws()))),this.z4.Ud()}constructor(t,i,e){super(),this.Y4=[],this.R4=void 0,this.F4=[],this.G4=t=>{t.session.fn(tO,this.Ds),t.session.fn("Ws",this.G4),Qr(this.Y4,t.session)},this.lA=t,this.zx=i,this.z4=e}};function eO(t,i){return!t.W4&&t.xb===i.xb&&Tu(t.Gb,i.Gb)}var sO=class extends Bo{get H4(){var t;return null==(t=this.lA)?void 0:t.cA}get lz(){return this.z4}set lz(t){this.z4=t}$n(t,i){this.FP=t,this.yq(i)}yq(t){this.wC=t,this.q4(this.DC.Wd).catch(Pd)}async q4(t){if(!i.Ys.X4||!await this.Z4(t))return this.wC&&this.wC.K4?await this.J4(t):void 0}async Z4(t){var i,e;if(!(null==(i=this.wC)?void 0:i.qP))return!1;let s=!1;var n;for(const i of null!=(n=null==(e=this.wC)?void 0:e.qP)?n:[]){var r;for(const e of null!=(r=i.MP)?r:[])try{await this.t2(i.cA.xb,e,t),s=!0}catch(t){yo(t)}if(s)return!0}return!1}async t2(t,e,s){if(fo(s),!e.byteLength)return;if(!this.wC||!this.wC.qP.length)throw new To(Ui.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==Yh&&t!==vr&&t!==f_)return void 0;const n=Vg(t,e),r=this.wC.qP;let h;for(const i of r){fo(s);const e=n[i.cA.Cb];if(e&&i.cA.xb===t)try{const t=await this.i2(i,s);t.TO()&&await t.B4();const n=this.hv.Cf,r={xb:i.cA.xb,Gb:e,W4:n};if(this.e2(t,r)){const i=await t.Q4(r);await i.Lx()}return}catch(t){yo(t),h=t}}throw await i.$x()?new To(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",h):new To(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",h)}async J4(t){var i;const e=null==(i=this.wC)?void 0:i.qP;if(e)for(const i of e){fo(t);try{const e=await this.i2(i,t);return void(e.TO()&&await e.B4())}catch(t){yo(t)}}}e2(t,e){return i.Ys.s2||this.hv.vv._v||!t.V4(e)}i2(t,i){return this.Sq.NC((i=>this.n2(t,i)),i)}async n2(t,i){if(fo(i),!this.wC||!this.z4||!this.FP)throw new g("Not initialized");if(this.lA){if(this.lA.cA!==t.cA)throw new g("Internal key system error");return this.lA}const e=this.z4,s=Yt({},t,{yz:t.yz.map((i=>{var s;return Yt({},i,{persistentState:null!=(s=i.persistentState)?s:e.JO(t.cA),eC:i.eC||e.eC(t.cA)})}))}),n=await this.FP.vq(s.cA,s.yz),r=e.yP(s),h=new iO(s.cA,n,r);return h.yn([Co.Wg,Co.Vg,Co.Lw],this.Ds),this.lA=h,h}Ss(t){if(ut(t))return;const i=t instanceof To?t:new To(Ui.CONTENT_PROTECTION_ERROR,t.message,t);this.Co(new qC(i))}async tr(){this.FP=void 0,this.wC=void 0,this.DC.qd(),this.DC=new Wr,await this.h2()}async h2(){await this.Sq.qd();const t=this.lA;t&&(t.fn(Co.Lw,this.Ds),this.lA=void 0,await t.gn())}async Ud(){this.Vo(),this.hv.fn(Fi.Kg,this.o2),await this.tr(),await this.Sq.gn()}constructor(t){super(),this.DC=new Wr,this.Sq=new Kr,this.wC=void 0,this.z4=void 0,this.FP=void 0,this.lA=void 0,this.o2=t=>{this.t2(t.xb,t.Gb,this.DC.Wd).catch((t=>this.Ss(t)))},this.hv=t,this.hv.yn(Fi.Kg,this.o2)}},ju=class extends wn{constructor(t){super(Co.aw),this.currentTime=t}},nO=class extends Bo{get Jf(){return void 0!==this.a2?this.a2.Jf:Mw.uT}E0(){var t;null==(t=this.a2)||t.E0()}tr(){var t;null==(t=this.a2)||t.tr()}Ud(){this.Vo(),void 0!==this.a2&&(this.a2.Ud(),this.a2=void 0)}u2(t){if(this.a2===t)return;const i=this.Jf;void 0!==this.a2&&this.a2.Ud(),this.a2=t,void 0!==t&&(t.yn(Zt.H_,this.Ds),t.E0());const e=this.Jf;i!==e&&this.Co(new _e(this.c2.Mf,e))}constructor(t){super(),this.c2=t}},rO=f.BE||f.UE,hO=f.Eb,oO=f.ZE,aO=f.ZE&&f.Ga,uO=class extends Bo{l2(){this.UP.ended||this.Mf===this.ct||(this.d2=!1)}get L0(){return this.f2}get wf(){return this.FP?this.FP.wf:Ai.kB()}get Af(){const t=this.YP;if(!t||S(t.getTime()))return;const i=1e3*this.Mf;return new Date(t.getTime()+i)}get YP(){if(this.UP.getStartDate)return this.CB&&this._2||(this._2=this.UP.getStartDate()),this._2}get Mf(){return this.g2?this.g2.Mf:void 0!==this.w2?this.w2:this.BC.currentTime}get Iu(){return this.Wu}get ct(){return this.g2?this.g2.ct:this.FP?this.FP.ct:this.BC.duration}get Sf(){return this.e_?this.A2():this.g2?this.g2.Sf:this.BC.ended||this.d2}A2(){return void 0!==this.w2&&this.ct===this.w2}get lt(){return this.BP}get UP(){return this.BC}get Ff(){return this.m2?this.M2:this.g2?this.g2.Ff:this.BC.paused}get Hf(){return this.Uo._B(Ai.xn(this.BC.played))}get Ti(){return this.BC.offsetHeight*i.Ys.T2}get ji(){return this.BC.offsetWidth*i.Ys.T2}get ya(){return this.zB}get Jf(){return this.N2.Jf}get t_(){return this.FP?this.FP.t_:Ai.kB()}get e_(){return this.g2?this.g2.e_:this.CB}get T0(){return this.g2?this.g2.T0:this.N0}get O0(){return 0!==this.D2}get zf(){return this.g2?this.g2.zf:this.BC.muted}set zf(t){this.g2?this.g2.zf=t:(this.BC.muted=t,this.S2())}get Gf(){return this.g2?this.g2.Gf:void 0!==this.I2?this.I2:this.BC.playbackRate}set Gf(t){this.g2?this.g2.Gf=t:this.Ff||this.f2?(this.I2=t,this.E2()):(this.I2=void 0,this.BC.playbackRate=t,this.E2())}E2(){const t=this.Gf;this.b2!==t&&(this.b2=t,this.Co(new Qe(this.Mf,t)))}get L2(){return this.tB}get c_(){return this.g2?this.g2.c_:this.BC.volume}set c_(t){this.g2?this.g2.c_=t:(this.BC.volume=t,this.S2())}S2(){const t=this.c_,i=this.zf;this.C2===t&&this.O2===i||(this.C2=t,this.O2=i,this.Co(new Pc(this.Mf,this.c_)))}Pf(){return kL(this.BC)}p_(){this.j2||(this.j2=!0);const t=this.P2();return this.z2(),t}z2(){this.m2?this.M2&&(this.M2=!1,this.Co(new Gt(this.Mf))):this.B2()}B2(){if(this.g2)this.g2.p_();else{f.ZE&&!f.Ga&&this.BC.preload===Le.Vz&&(this.BC.preload=Le.Dm);const t=this.Gf,i=this.BC.play();t!==this.UP.playbackRate&&(this.Gf=t),ya(i)?i.then(this.R2,this.U2):this.Q2.j0()&&this.F2()}}m_(){this.m2?this.M2||(this.M2=!0,this.Co(new hs(this.Mf))):this.Y2()}Y2(){this.g2?this.g2.m_():(this.BC.pause(),this.Q2.Yn()),this.G2(new Sn)}P2(){const t=new ue;return this.V2.push(t),t.tL}W2(){for(const t of this.V2)t.Zb(void 0);No(this.V2)}G2(t){for(const i of this.V2)i.Jb(t);No(this.V2)}F2(){this.m2||this.g2||this.W2()}H2(t){this.m2||this.g2||this.G2(t)}Em(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.g2?this.g2.Em(t,i,e):(this.q2.qd(),this.q2=new Wr,this.X2=this.Z2(t,i,e,this.X2,this.q2.Wd).catch(na))}PP(t){const i=this.YP;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Em(e)}async Z2(t,e,s,n,r){try{for(this.w2=t,this.K2=t,this.J2=i.Kd(),s&&!this.CB?this.N0=!0:(this.CB=!0,this.N0=!1),this.d2&&!this.A2()&&(this.d2=!1),this.N0?this.Co(new vs(this.Mf)):this.Co(new ri(t)),await n.catch(na),fo(r),this.t3&&this.i3(),this.N2.Jf===Mw.uT&&await this.N2.lf(Zt.H_,r);0===this.BC.seekable.length||aO&&!this.j2;)await Promise.race([KN(this.BC,"timeupdate",r),N(100,r)]),fo(r);let h=dx(this.wf,t,.05),o=this.t_,a=!0,u=!1;for(;;){if(o=this.t_,o.U>0&&!o.gr(h)&&(h=o.uB(h),a=!0),e&&!this.BC.fastSeek){const t=this.wf;if(!t.gr(h)){const i=dx(t,h,1);i!==h&&(h=i,a=!0)}}if(oO){const t=this.e3();void 0!==t&&h>t&&(h=t,a=!0)}if(!u){const t=this.s3();void 0!==t&&h>t&&(u=!0,await this.n3(t,!1,r),await KN(this.BC,"seeked",r),fo(r),a=!0)}if(a){a=!1,await this.n3(h,e,r),fo(r);let t=this.Mf;o=this.t_,h=o.uB(h);let i=1;for(;_.abs(h-t)>=fl;)o=this.t_,h=lO(h,o,i),await this.n3(h,e,r),fo(r),t=this.Mf,i++}if(!(this.BC.seeking||this.N2.Jf<Mw.cT))break;await Vh((t=>{var i;return Promise.race([KN(this.BC,"seeked",t),this.lf([Co.gw,Co.Xg],t),this.N2.lf(Zt.H_,t),null==(i=this.FP)?void 0:i.lf(JL.rU,t)].filter(Po))}),r),fo(r)}this.r3()}catch(t){if(ut(t))return;0}}async n3(t,i,e){fo(e);let s=this.t_;if(t=s.uB(t),this.t3){let i=!0;for(;i||this.N2.Jf<Mw.lT;)s=this.t_,s.gr(t)||(t=s.uB(t),i=!0),i?(i=!1,this.w2=t,this.h3(this.Mf)):await Vh((t=>Promise.race([this.lf(Co.Xg,t),this.N2.lf(Zt.H_,t)])),e);fo(e)}const n=KN(this.BC,"seeking",e);i&&this.BC.fastSeek?this.BC.fastSeek(t):this.BC.currentTime=t,this.w2=void 0,this.h3(this.Mf),this.BC.seeking&&await n}e3(){if(!this.FP||!this.FP.Pq)return;const t=this.FP.zq,i=this.FP.Bq,e=t&&i?t.Sn(i):t||i;if(!e||0===e.U)return;const s=e.Cn(e.U-1),n=e.jn(e.U-1);return _.max(s,n-.001)}s3(){if(!this.FP||!this.FP.Pq)return;const t=this.FP.Bq;if(!t||0===t.U)return;const i=t.Cn(t.U-1);let e=t.jn(t.U-1)-.02;return e-=.001,_.max(i,e)}h3(t){this.K2!==t&&(this.K2=t,this.N0?this.Co(new vs(t)):this.Co(new ri(t)))}r3(){const t=this.N0;this.CB=!1,this.N0=!1,this.J2=0,this.K2=NaN,this.t3&&this.o3(),t?(this.Co(new ju(this.Mf)),this.a3()):this.Co(new yi(this.Mf))}i3(){this.m2||(this.M2=this.Ff,this.m2=!0,this.Y2())}o3(){this.m2&&(this.m2=!1,this.M2||this.z2())}Rq(t){for(const i of t){if(i.Rg===Au.ZC&&ek.Rq(i,this.BC))return i;if(i.Rg===Au.KC&&wx.Rq(i))return i}}be(){this.tB=!1,Er(this.BC)&&(this.BC.style.display="none")}ge(){this.tB=!0,Er(this.BC)&&(this.BC.style.display="block")}get nt(){return this.u3}get Ol(){return this.YB}DI(t,i,e,s,n,r,h,o,a){const u=new Yx(t,i,e,s,n,r,h,a,o);return this.Dl.tt(u),this.l3.tt(u),u}tz(){return!0}ez(t,i,e,s,n){const r=h.createElement("track");r.src=Na(t),r.kind=i,r.label=null!=e?e:"",s&&(r.srclang=s),r.default=!!n,r.id=Xh(),this.BC.appendChild(r);const o=this.BC.textTracks.getTrackById(r.id),a=new jC(o,r);return this.d3.tt(a),this.f3.push(a),a}CI(t){this.Dl.it(t),this.l3.it(t)}nz(){for(const t of this.Dl.og.slice())t.gn();this.Dl.tr();for(const t of this.f3.slice())this.d3.it(t),t.gn();No(this.f3)}Mz(){let t=this.BC.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this._3),t.addEventListener("removetrack",this.g3),t.addEventListener("change",this.w3))}cz(){let t=this.BC.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this._3),t.removeEventListener("removetrack",this.g3),t.removeEventListener("change",this.w3))}v3(t,i){if(f.ZE){if(t.kind===Mi.Dm)return void this.A3(t);if(t.kind===Mi.NS&&""===t.label&&""===t.language&&!fO(t))return void this.m3(t,i)}dO(this.d3,t)||this.d3.tt(new jC(t,i))}A3(t){t.mode=Or.Pg;const i=new YC(t);this.d3.tt(i),this.l3.tt(i)}m3(t,i){const e=()=>{fO(t)&&(t.removeEventListener("cuechange",e),this.d3.tt(new jC(t,i)))};t.addEventListener("cuechange",e),t.mode=Or.Pg}y3(t){let i=this.BC.getElementsByTagName("track");for(let e=0;e<i.length;e++){let s=i[e]||i.item(e);if(s.track===t)return s}}$n(t){return this.M3.NC((async i=>{if(fo(i),this.FP)throw new g("Already loaded a media source");let e;if(t.Rg===Au.ZC)e=new ek(t,this,this.Mq,this.Jx),this.t3=!1,this.N2.u2(this.T3());else{if(t.Rg!==Au.KC)throw new g("Unsupported configuration");{this.t3=rO;const i=this.T3();e=new wx(t,this,i,this.Mq,this.Jx,void 0,this.q$),this.N2.u2(i),hO&&(this.yn(Co.Iw,this.N3),this.N2.yn(Zt.H_,this.D3))}}return this.FP=e,await e.jW(),e}))}T3(){return this.t3?new Nx(this):new nu(this)}S3(){if(this.f2)return;const t=this.Gf;this.f2=!0,this.Gf=t,this.BC.playbackRate=0,this.N2&&this.N2.E0()}I3(){if(!this.f2)return;const t=this.Gf;this.f2=!1,this.Gf=t,this.E3()}E3(){this.BC.currentTime=this.BC.currentTime,this.N2&&this.N2.E0()}async tr(){this.CB=!1,this.N0=!1,i.Jd(this.D2),this.D2=0,this.Uo=Ai.kB(),this.q2.qd(),this.w2=void 0,this.K2=NaN,this._2=void 0,this.t3=!1,this.m2=!1,this.BP=void 0,this.d2=!1,this.b3=void 0,this.L3=!1,this.j2=!1,this.x3&&(this.C3(),this.x3=!1),this.G2(new Sn),this.N2.u2(new nu(this)),this.Q2.tr(),this.d3.tr(),this.I3(),hO&&(Go(this.O3),this.O3=0,this.fn(Co.Iw,this.N3)),await this.M3.qd(),await this.M3.NC((async()=>{this.FP&&(await this.FP.Ud(),this.FP=void 0,f.LE&&f.xE<3&&this.j3())}))}j3(){this.P3();const t=this.BC,i=t.parentElement,e=t.tagName.toLowerCase();this.BC=Vj(e),this.retainMediaElementState(t),Wj(t),null==i||i.replaceChild(this.BC,t),this.C3(),this.N2.u2(this.T3()),this.Q2.fn(Zt.Rw,this.z3),this.Q2.Ud(),this.Q2=new Ix(this),this.Q2.yn(Zt.Rw,this.z3),this.tB?this.ge():this.be(),this.Co(new Zc),this.Co(new z)}retainMediaElementState(t){this.UP.muted=t.muted,this.UP.volume=t.volume}async Ud(){this.x3=!1,this.P3(),this.cz(),await this.tr(),await this.M3.gn(),this.Q2.Ud(),this.N2.Ud(),await this.Mq.Ud(),this.nz(),this.Dl.gn(),this.d3.gn(),await this.B3.gn(),this.R3.gn(),this.u3.gn(),this.Vo()}C3(){this.UP.addEventListener("play",this.U3),this.UP.addEventListener("pause",this.Q3),this.UP.addEventListener("timeupdate",this.F3),this.UP.addEventListener("progress",this.Y3),this.UP.addEventListener("loadstart",this.G3),this.UP.addEventListener("ended",this.V3),this.UP.addEventListener("ratechange",this.W3),this.UP.addEventListener("volumechange",this.H3),this.UP.addEventListener("durationchange",this.q3),this.UP.addEventListener("resize",this.X3),this.UP.addEventListener("loadedmetadata",this.X3),this.UP.addEventListener("error",this.Z3),this.UP.addEventListener("emptied",this.K3),Qy()?(this.BC.addEventListener("encrypted",this.J3),this.BC.addEventListener("waitingforkey",this.t5)):void 0!==Ha.WebKitMediaKeys&&"function"==typeof Ha.WebKitMediaKeys.isTypeSupported?this.BC.addEventListener("webkitneedkey",this.i5):Tr()?this.BC.addEventListener("webkitneedkey",this.e5):void 0!==Ha.MSMediaKeys&&"function"==typeof Ha.MSMediaKeys.isTypeSupported&&this.BC.addEventListener("msneedkey",this.s5)}P3(){this.UP.removeEventListener("play",this.U3),this.UP.removeEventListener("pause",this.Q3),this.UP.removeEventListener("timeupdate",this.F3),this.UP.removeEventListener("progress",this.Y3),this.UP.removeEventListener("loadstart",this.G3),this.UP.removeEventListener("ended",this.V3),this.UP.removeEventListener("ratechange",this.W3),this.UP.removeEventListener("volumechange",this.H3),this.UP.removeEventListener("durationchange",this.q3),this.UP.removeEventListener("resize",this.X3),this.UP.removeEventListener("loadedmetadata",this.X3),this.UP.removeEventListener("error",this.Z3),this.UP.removeEventListener("encrypted",this.J3),this.UP.removeEventListener("waitingforkey",this.t5),this.UP.removeEventListener("webkitneedkey",this.i5),this.UP.removeEventListener("webkitneedkey",this.e5),this.UP.removeEventListener("msneedkey",this.s5),this.UP.removeEventListener("emptied",this.K3)}n5(){this.g2||(this.Uo=this.Hf,this.g2=px(this),this.P3(),this.g2.yn(Ax,this.Ds))}r5(){if(!this.g2)return;const t=this.g2;this.g2=void 0,this.N2.E0(),yx(this,t),t.Ud(),this.C3()}a3(){const t=this.Mf;this.Co(new Dr(t,void 0)),this.b3=t}bz(t){this.BP=t,this.G2(this.BP),this.Co(new Ex(this.BP))}get Cf(){return!!this.BC.webkitCurrentPlaybackTargetIsWireless}get h5(){return this.o5}get vv(){return Yt({},XL)}a5(){this.h5||(qj(this.BC,i.Ys),this.o5=!0)}u5(t){t.appendChild(this.BC)}$J(){hO&&this.N3(),this.N2.E0()}get lz(){return this.Mq.lz}set lz(t){this.Mq.lz=t}get c5(){return this.q$}set c5(t){this.q$=t}get H4(){return this.Mq.H4}D_(){this.Mq.h2().catch(na),this.d3.tr()}get g_(){return this.L3}set g_(t){this.L3=t,this.x3&&!this.L3&&(this.x3=!1,this.C3())}constructor(t,e,s,n){super(),this.BP=void 0,this.tB=!0,this.FP=void 0,this.M3=new Kr,this.g2=void 0,this.zB=new Ba,this.f3=[],this.w2=void 0,this.J2=0,this.K2=NaN,this._2=void 0,this.b3=void 0,this.CB=!1,this.N0=!1,this.l5=Mw.uT,this.D2=0,this.X2=Promise.resolve(),this.q2=new Wr,this.V2=[],this.Uo=Ai.kB(),this.I2=void 0,this.b2=1,this.O2=!1,this.C2=1,this.d2=!1,this.L3=!1,this.x3=!1,this.t3=!1,this.m2=!1,this.M2=!1,this.f2=!1,this.o5=!1,this.O3=0,this.j2=!1,this._3=t=>{const i=t.track,e=this.y3(i);this.v3(i,e)},this.g3=t=>{const i=dO(this.d3,t.track);i&&this.d3.it(i)},this.w3=()=>{for(let t=0;t<this.d3.U;t++){let i=this.d3.cg(t);i instanceof jC&&i.z1()}},this.N3=()=>{if(void 0===this.FP||!ZL(this.FP))return;const t=this.FP,i=t.X$,e=t.Z$;if(!i||!e)return;if(t.Pq)return void this.I3();if(t.Jf===fx.GJ)return;const s=i.wf,n=e.wf;if(0===s.U&&0===n.U)return void this.I3();const r=this.Mf;if(r<s.Cn(0)||r<n.Cn(0))return void this.I3();if(s.gr(r)!==n.gr(r)){if(t.Tq(r))return;this.S3()}else if(this.I3(),!this.O3&&this.Q2.j0()){s.gB(n).pB(r,r+.5)&&(this.O3=le(this.d5))}},this.d5=()=>{this.O3=0,this.N3()},this.D3=()=>{if(this.e_||this.T0)return;if(this.N2.Jf>=Mw.lT)return;if(void 0===this.FP||!ZL(this.FP))return;const t=this.FP,i=t.X$,e=t.Z$;if(!i||!e)return;const s=this.Mf,n=i.wf,r=e.wf;if(!n.gr(s)||!r.gr(s))return;n.gB(r).pB(s-5,s)&&(this.f2?this.I3():this.E3())},this.U3=()=>{this.Co(new Gt(this.Mf))},this.Q3=()=>{this.H2(new Sn),this.Co(new hs(this.Mf))},this.z3=()=>{this.F2(),this.Co(new Oe(this.Mf))},this.W3=()=>{this.E2()},this.q3=()=>{this.Co(new ko(this.ct))},this.Y3=()=>{this.Co(new Wa(this.Mf))},this.G3=()=>{this.Co(new sk)},this.F3=()=>{const t=this.Mf,i=this.e_,e=this.N2.Jf<Mw.lT&&!this.Sf,s=void 0!==this.b3,n=s&&this.b3!==t;(i||!s||n&&!e)&&this.a3()},this.V3=()=>{!this.d2&&this.Sf&&(this.d2=!0,this.Co(new jn(this.Mf)))},this.Z3=()=>{if(null!==this.BC.error){const i=this.BC.error;var t;this.bz(new nl(null!=(t=i.code)?t:bi.DECODE,i.message||"Error decoding media",void 0,i.msExtendedCode))}},this.K3=()=>{this.L3&&(this.P3(),this.x3=!0)},this.f5=t=>{if(i.Jd(this.D2),this.D2=0,t.readyState<=Mw.cT)if(this.CB||this.N0){const e=i.Kd()-this.J2;if(e<250)return void(this.D2=i.$d((()=>this.f5(t)),250-e))}else if(void 0!==this.FP&&this.FP.Tq(this.Mf))return void(this.D2=i.$d((()=>this.f5(t)),250));this.l5!==t.readyState&&(this.l5=t.readyState,this.Co(t))},this.H3=()=>{this.S2()},this.X3=()=>{this.a_>0&&this.r_>0&&this.Co(new il)},this.J3=t=>{this.Co(new jt(t.initDataType,t.initData||new ArrayBuffer(0)))},this.t5=()=>{this.Co(new Mm)},this.s5=t=>{const i=t.initData,e=i?He(i).buffer:new ArrayBuffer(0);this.Co(new jt(Yh,e))},this.i5=t=>{if(t.initData){const i=function(t){try{const i=Ao(t),e=new _s,s=rl(i,e,aa(i,e,!0));return Ju(Ag(s,!0))}catch(t){return}}(t.initData);if(!i)return;this.Co(new jt(vr,i))}else this.Co(new jt(vr,new ArrayBuffer(0)))},this.e5=t=>{const i=t.initData,e=i?He(i).buffer:new ArrayBuffer(0);this.Co(new jt(Yh,e))},this.R2=()=>{this.F2()},this.U2=t=>{this.H2(t)},this._5=t=>{this.Co(t),t.type===Co.Vg&&this.bz(tn(t.errorObject))},this.BC=t,this.Jx=e,this.Wu=s,this.YB=n,this.N2=new nO(this),this.N2.yn(Zt.H_,this.f5),this.N2.u2(new nu(this)),this.Q2=new Ix(this),this.Q2.yn(Zt.Rw,this.z3),this.Mq=new sO(this),this.Mq.yn([Co.Wg,Co.Vg,Co.Lw],this._5),this.Dl=new Lr,this.d3=new Lr,this.R3=new ms([this.Dl,this.d3]),this.B3=new VC(this,this.R3),this.u3=new ms([this.R3,this.B3.Z]),this.l3=new ou(this),this.C3(),this.Mz()}};var cO=.01;function lO(t,i,e){if(void 0===e&&(e=0),!i.U)return 0;let s=i.uB(t);const n=cO*e;return s===i.Cn(0)?s+=n:s===i.jn(i.U-1)&&(s-=n),s}function dO(t,i){for(let e of t.og)if(e.PT===i)return e}function fO(t){return!!t.cues&&t.cues.length>0}var _O={HH:void 0,qH:void 0,XH:void 0,ZH:void 0,KH:void 0,JH:void 0,rq:void 0,$H:void 0,tq:void 0,iq:void 0,nq:void 0},gO=class extends Bo{get va(){return this.Xa||(this.Xa=GL(this)),this.Xa}get HH(){}get qH(){}get XH(){}get ZH(){}get KH(){}get JH(){}get rq(){}get $H(){}get tq(){}get iq(){}get nq(){}constructor(...t){super(...t),this.Xa=void 0}},wO=class extends uO{v_(){}get r_(){return 0}get a_(){return 0}constructor(t,i,e){super(t,i,e,new gO)}},vO=class{get we(){return this.g5}be(){this.g5.style.display="none"}ge(){this.g5.style.display="block"}u5(t){t.appendChild(this.g5)}gn(){zu(this.g5)}constructor(t=5){let i=Ha.document.createElement("div");i.className="theoplayer-texttracks",i.style.position="absolute",i.style.display="none",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.width="100%",i.style.height="100%",i.style.lineHeight="1.3em",i.style.zIndex=""+t,this.g5=i,this.ge()}};function AO(t,i){return Yt({},i,tf(function(t){return{HH:t.HH,qH:t.qH,XH:t.XH,ZH:t.ZH,KH:t.KH,JH:t.JH,rq:t.rq,$H:t.$H,tq:t.tq,iq:t.iq,nq:t.nq}}(t)))}function mO(t){return t.XH&&Ss(t.XH,"%")?Number(t.XH.replace("%",""))/100:t.XH&&Ss(t.XH,"em")?Number(t.XH.replace("em","")):1}var da,pO,pe,yO=class t{get w5(){return this.v5+this.ji}set w5(t){this.v5=t-this.ji}get A5(){return this.m5+this.Ti}set A5(t){this.m5=t-this.Ti}y5(t){return this.v5<t.w5&&this.w5>t.v5&&this.m5<t.A5&&this.A5>t.m5}LT(t){return this.v5<=t.v5&&t.w5<=this.w5&&this.m5<=t.m5&&t.A5<=this.A5}Lm(){return new t(this.v5,this.m5,this.ji,this.Ti)}M5(i){const e=this.v5+i,s=this.m5+i,n=_.max(0,this.ji-2*i),r=_.max(0,this.Ti-2*i);return new t(e,s,n,r)}T5(i){const e=_.min(this.v5,i.v5),s=_.max(this.w5,i.w5),n=_.min(this.m5,i.m5),r=_.max(this.A5,i.A5);return new t(e,n,s-e,r-n)}constructor(t,i,e,s){this.v5=t,this.m5=i,this.ji=e,this.Ti=s}},Du=class{N5(t){const i=this.D5(t);if(!i)return!1;for(const t of i)zu(t);return this.S5(t),!0}get Lt(){return this.eN}get UP(){return this.BC}get Iu(){return this.Wu}get I5(){return this.E5}get b5(){return this.L5}jW(){this.k5(),this.eN.L.og.forEach((t=>this.kI(t))),this.Iu.yn(ii.pn,this.x5),this.re(this.Iu.ku,this.Iu._u)}C5(t){this.L5=t,this.E5=AO(this.L5,this.O5),this.E5.HH&&(this.UP.style.fontFamily=this.E5.HH),this.E5.rq&&(this.UP.style.visibility=this.E5.rq),this.re(this.Iu.ku,this.Iu._u),this.j5(!0)}P5(){return this.E5}z5(t){return this.B5.has(t.Mg)}k5(){this.eN.yn(qt.O_,this.R5),this.eN.yn(qt.P_,this.U5),this.eN.yn(qt.ra,this.Q5)}F5(){this.eN.fn(qt.O_,this.R5),this.eN.fn(qt.P_,this.U5),this.eN.fn(qt.ra,this.Q5)}Y5(t){t.yn(Di.FT,this.G5),t.yn(Di.YT,this.V5),t.yn(Di.K_,this.W5)}H5(t){t.fn(Di.FT,this.G5),t.fn(Di.YT,this.V5),t.fn(Di.K_,this.W5)}kI(t){this.Y5(t),t.ro&&this.q5(t)}PS(t){this.H5(t),this.X5(t)}Z5(){this.eN.jg===Or.Jn?this.K5():this.J5()}K5(){if(!this.t6)return;this.t6=!1;const t=this.Iu.ku,i=this.Iu._u;this.re(t,i),this.j5(!1)}J5(){this.t6||(this.t6=!0,this.j5(!0))}q5(t){this.t6||t.ro&&!this.z5(t)&&this.j5(!1)}X5(t){this.z5(t)&&this.j5(!0)}i6(t){(t.ro||this.z5(t))&&this.j5(!0)}j5(t){const i=this.e6,e=this.t6?[]:this.eN.q.og.slice();this.s6(e,i,t),this.e6=e}D5(t){return this.B5.get(t.Mg)}n6(t,i){this.B5.set(t.Mg,i)}S5(t){this.B5.delete(t.Mg)}r6(t){const i=[],e=this.E5;if(void 0!==e.$H){const s=t.Lm();s.Ti=e.$H,i.push(s)}if(void 0!==e.tq){const s=t.Lm();s.Ti=e.tq,s.A5=t.A5,i.push(s)}return i}h6(){return this.e6.slice()}gn(){zu(this.UP),this.B5.clear(),this.F5(),this.eN.L.og.forEach((t=>this.H5(t))),this.Iu.fn(ii.pn,this.x5)}constructor(t,i,e,s,n){this.B5=I(),this.t6=!0,this.L5=Yt({},_O),this.e6=[],this.R5=t=>this.kI(t.GT),this.U5=t=>this.PS(t.GT),this.Q5=()=>this.Z5(),this.G5=t=>this.q5(t.GT),this.V5=t=>this.X5(t.GT),this.W5=t=>this.i6(t.GT),this.x5=t=>this.re(t.width,t.height),this.eN=t,this.O5=this.E5=n,this.BC=this.o6(e),this.Wu=s,i.appendChild(this.BC)}};function MO(t,i,e,s,n){let r=t.Lm(),h=r,o=1,a=!1;const u=C(getComputedStyle(i).lineHeight)/4;if(!S(u)&&u>0){for(let i=0;i<e.length&&!a;i++){for(;!SO(t,s,e[i],.01)&&(!s.LT(t)||TO(t,n));)DO(t,e[i],u);if(s.LT(t)){h=t.Lm(),a=!0;break}let c=IO(t,s);o>c&&(h=t.Lm(),o=c),t=r.Lm()}s.LT(t)||(h=r.Lm())}i.style.left=(h.v5-s.v5)/s.ji*100+"%",i.style.top=(h.m5-s.m5)/s.Ti*100+"%"}function TO(t,i){return i.some((i=>t.y5(i)))}function NO(t){return new yO(t.left,t.top,t.width,t.height)}function DO(t,i,e){switch(i){case 0:t.v5+=e;break;case 1:t.v5-=e;break;case 2:t.m5+=e;break;case 3:t.m5-=e}}function SO(t,i,e,s){switch(e){case 0:return t.w5>i.w5+s;case 1:return t.v5<i.v5-s;case 2:return t.A5>i.A5+s;case 3:return t.m5<i.m5-s}}function IO(t,i){return _.max(0,_.min(t.w5,i.w5)-_.max(t.v5,i.v5))*_.max(0,_.min(t.A5,i.A5)-_.max(t.m5,i.m5))/(t.ji*t.Ti)}function EO(t,i){return t?{a6:t.a6,u6:t.u6,c6:t.c6,Ml:i}:null}function bO(t){const i=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return i?{a6:x(i[1],16),u6:x(i[2],16),c6:x(i[3],16)}:null}function LO(t){return("0"+t.toString(16)).slice(-2)}function kO(t){return"#"+LO(t.a6)+LO(t.u6)+LO(t.c6)}function xO(t){const i=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return i?{a6:x(i[1],10),u6:x(i[2],10),c6:x(i[3],10),Ml:C(i[4])}:null}function CO(t,i){return function(t){return t?"rgba("+t.a6+", "+t.u6+", "+t.c6+", "+t.Ml+")":void 0}(EO(bO(t),i/100))}function wh(t){return OO[t||"none"]}!function(t){t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y"}(da||(da={})),function(t){t.qc='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Wc='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.Gc='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Xc='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif'}(pO||(pO={})),function(t){t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent"}(pe||(pe={}));var OO={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},jO=Id({monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:"monospace, sans-serif",monospaceSerif:"monospace, serif",proportionalSansSerif:"Arial",proportionalSerif:"Times New Roman",default:"monospace, sans-serif"}),PO=16,zO="1.3em",BO={qH:pe.WHITE,HH:"Arial, Helvetica, Sans-Serif",XH:"100%",ZH:pe.TRANSPARENT,KH:pe.TRANSPARENT,JH:"uniform",rq:"visible",$H:void 0,tq:void 0,iq:void 0,nq:void 0},RO=class extends Du{o6(t){let i=h.createElement("div");i.className="theoplayer-ttml-texttrack-"+t;const e=i.style;return e.position="absolute",NM(e,"flex"),e.flexDirection=e.webkitFlexDirection="column",e.overflow="hidden",e.pointerEvents="none",e.top="0",e.left="0",e.width="100%",e.height="100%",e.fontSize=PO+"px",e.lineHeight=zO,i}re(t,i){const e=_.min(t/640,i/360),s=PO*e*mO(this.I5);this.UP.style.fontSize=s+"px"}s6(t,i,e){for(const t of i)!e&&t.ro||this.N5(t);let s=[];const n=NO(this.UP.getBoundingClientRect());s.push(...this.r6(n));for(const i of t){const t=this.l6(i,s,n);for(const i of t)s.push(i.M5(.1))}}l6(t,i,e){let s=this.D5(t);s||(s=this.d6(t),this.n6(t,s));for(const t of s)this.UP.appendChild(t);const n=[],r=[da.POS_Y,da.NEG_Y,da.POS_X,da.NEG_X];for(const t of s){MO(JO(t),t,r,e,i),n.push(JO(t))}return n}d6(t){let i=[];const e=t.XD,s=t.FD,n=t.JD,r=t.O,o=t.HD,a=o?_.min(640/o.width,360/o.height):1,u=this.I5;if(0===w.keys(s).length){const t=h.createElement("div");ZO(t),UO(r,e,n,t,t,a,u),QO(t,"body",u),t.firstChild&&i.push(t)}else for(let t of w.keys(s)){let o=h.createElement("div");o.id=t,ZO(o),GO(o,"region",s[t],e,a),UO(r,e,n,o,o,a,u),QO(o,"body",u),o.firstChild&&i.push(o)}return i}C5(t){return HL(this.UP,t),super.C5(t)}constructor(t,i,e,s){super(t,i,e,s,BO)}};function UO(t,i,e,s,n,r,o){if(ar(t)&&function(t){const i=t.vS.toUpperCase();return"SPAN"===i||"P"===i||"BR"===i||"DIV"===i||"BODY"===i}(t)){let a=FO(t);if(!a||(null==n?void 0:n.id)===a){let a;if("BODY"===t.vS.toUpperCase())a=n;else{if(a=function(t){let i;switch(t.vS.toUpperCase()){case"BR":i=h.createElement("br");break;case"SPAN":i=h.createElement("span"),KO(i),YO(i,t);break;case"P":i=h.createElement("p"),function(t){KO(t);const i=t.style;i.textAlign="inherit",i.padding="0",i.margin="0"}(i),YO(i,t);break;case"DIV":i=h.createElement("div"),YO(i,t)}return i}(t),!a)return;s.appendChild(a)}!function(t,i,e,s,n){let r=i.pS("style");HO(t,i.vS,r,e,s,n),function(t,i,e,s){for(const n of i.wS)qO(t,i.vS,n.vS,n.PM,e,s)}(t,i,s,n)}(a,t,i,n,r),function(t,i,e){let s=null==i?void 0:i.pS("smpte:backgroundImage");if(s){s=s.replace("#","");let n=e&&VO(e,(t=>t.wS.some((t=>"id"===t.vS&&t.PM===s))));n&&WO(t,n,i,!0)}!function(t,i){const e=i.m[0];if(!e||"metadata"!==e.vS.toLowerCase())return;const s=e.m[0];WO(t,s,i)}(t,i)}(a,t,e),QO(a,t.vS,o);for(const s of t.MS)UO(s,i,e,a,n,r,o)}}else if(uA(t)){const i=h.createTextNode(t.zm);if("SPAN"!==s.nodeName.toUpperCase()){const t=h.createElement("span");KO(t),QO(t,"span",o),t.appendChild(i),s.appendChild(t)}else s.appendChild(i)}}function QO(t,i,e){if(!e)return;const s=t.style;switch(e.HH&&(s.fontFamily=e.HH),e.qH&&(s.color=e.qH),i.toLowerCase()){case"span":e.ZH&&(s.background=e.ZH);break;case"p":case"div":e.KH&&(s.backgroundColor=e.KH);break;case"body":e.JH&&(s.textShadow=wh(e.JH))}}function FO(t){const i=t.pS("region");if("p"===t.vS.toLowerCase())return i;const e=[];for(const i of t.m)e.push(FO(i));return Td(e),0===e.length?i:1===e.length?null!=(s=e[0])?s:i:void 0;var s}function YO(t,i){let e=i.yS(gA,"id");e&&(t.id=e)}function GO(t,i,e,s,n){HO(t,i,e.style,s,t,n);for(const s of w.keys(e))qO(t,i,s,e[s],t,n)}function VO(t,i){if(i(t))return t;for(let e of t.m){const t=VO(e,i);if(t)return t}return null}function WO(t,i,e,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const i=t&&t.MS.length>0?t.MS[0]:null;return i&&uA(i)?"data:image/png;base64,"+i.zm:""}(i),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,i){const e=t.style;NM(e,"flex"),e.flexDirection=e.webkitFlexDirection="column";let s=i.pS("smpte:backgroundImageVertical"),n="center";if(s)switch(s.toLowerCase()){case"left":n="flex-start";break;case"center":n="center";break;case"right":n="flex-end";break;case"inherit":n="inherit"}e.justifyContent=e.webkitJustifyContent=n;let r=i.pS("smpte:backgroundImageHorizontal"),h="center";if(r)switch(r.toLowerCase()){case"left":h="flex-start";break;case"center":h="center";break;case"right":h="flex-end";break;case"inherit":h="inherit"}e.alignItems=e.webkitAlignItems=h}(t,e),t.appendChild(n)}function HO(t,i,e,s,n,r){if(e)for(const h of e.split(" "))if(s[h])for(const e of w.keys(s[h]))"style"===e.toLowerCase()?HO(t,i,s[h][e],s,n,r):qO(t,i,e,s[h][e],n,r)}function qO(t,i,e,s,n,r){const h=t.style;switch(e){case"backgroundColor":h.backgroundColor=s;break;case"color":h.color=s;break;case"direction":h.direction=s;break;case"display":"none"===s&&(h.display="none");break;case"fontFamily":var o;h.fontFamily=null!=(o=jO.get(s))?o:s;break;case"fontSize":{let t=s;if(Ss(t,"px")){const i=Number(t.slice(0,-2));t=i*r/PO+"em"}else Ss(t,"c")&&(t=t.replace("c","em"));h.fontSize=t,h.lineHeight&&"inherit"!==h.lineHeight||(h.lineHeight=zO);break}case"fontStyle":h.fontStyle=s;break;case"fontWeight":h.fontWeight=s;break;case"lineHeight":{let t=s;if(Ss(t,"px")){const i=Number(t.slice(0,-2));t=i*r+"px"}h.lineHeight=t;break}case"opacity":h.opacity=s;break;case"overflow":h.overflow=s;break;case"padding":h.padding=s;break;case"textAlign":h.textAlign=s;break;case"textDecoration":switch(s){case"lineThrough":h.textDecoration="line-through";break;case"underline":case"overline":h.textDecoration=s;break;case"noUnderline":case"noLineThrough":case"noOverline":h.textDecoration="none"}break;case"unicodeBidi":switch(s){case"bidiOverride":h.unicodeBidi="bidi-override";break;case"normal":case"embed":case"isolate":h.unicodeBidi=s}break;case"visibility":h.visibility=s;break;case"zIndex":h.zIndex=s;break;case"displayAlign":{let t;switch(s.toLowerCase()){case"before":t="flex-start";break;case"center":t="center";break;case"after":t="flex-end";break;case"justify":t="space-between";break;default:return}h.justifyContent=h.webkitJustifyContent=t;break}case"extent":{const e=XO(i.toLowerCase())?n:t;let r,h,o=s.split(" ",2);2===o.length?(r=o[0],h=o[1]):r=h="100%",e&&(e.style.height=h,e.style.width=r);break}case"origin":{const e=XO(i.toLowerCase())?n:t,[r,h]=s.split(" ",2);e&&(r||h)&&(r&&(e.style.left=r),h&&(e.style.top=h));break}case"showBackground":case"textOutline":break;case"wrapOption":switch(s){case"wrap":h.whiteSpace="normal";break;case"noWrap":h.whiteSpace="nowrap"}break;case"writingMode":{let t,i,e,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",i="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",e="upright";break;case"tblr":t="vertical-lr",e="upright";break;case"rl":t="horizontal-tb",i="rtl";break;default:return}h.writingMode=t,h.setProperty("-webkit-writing-mode",t),i&&(h.direction=i),e&&(h.textOrientation=e,h.setProperty("-webkit-text-orientation",e)),n&&(h.unicodeBidi=n);break}case"linePadding":if(Ss(s,"c")){let t=s.replace("c","em");h.paddingLeft=h.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?h.textAlign="":h.textAlign=s}}function XO(t){return"div"===t||"p"===t||"span"===t}function ZO(t){const i=t.style;NM(i,"flex"),i.flexDirection=i.webkitFlexDirection="column",i.top="auto",i.left="5%",i.width="90%",i.height="100%",i.maxHeight="100%",i.maxWidth="100%",i.overflow="visible",i.position="absolute",i.fontFamily=BO.HH,i.color=BO.qH,i.textShadow=wh(BO.JH),i.textAlign="start",i.writingMode="horizontal-tb",i.setProperty("-webkit-writing-mode","horizontal-tb"),i.padding="0",i.margin="0",i.fontSize="inherit",i.lineHeight="inherit"}function KO(t){const i=t.style;i.fontFamily="inherit",i.color="inherit",i.fontSize="inherit",i.lineHeight="inherit"}function JO(t){let i=NO(t.getBoundingClientRect());if("visible"===getComputedStyle(t).overflow&&t.scrollHeight>t.clientHeight){const e=t.children;for(let t=0;t<e.length;t++){const s=e[t];i=i.T5(NO(s.getBoundingClientRect()))}}return i}var $O,po,tj=void 0;function ij(t){return tj||(tj=Ha.document.createElement("textarea")),tj.innerHTML=t,tj.value}function ej(t,i){let e="Data",s="",n=[],r=t.charAt(i.Ku),h="",o={Rg:"starttag",wj:"",f6:[]};for(;i.Ku<t.length+1;){switch(r=i.Ku<t.length?t.charAt(i.Ku):"EOF",e){case"Data":switch(r){case"&":let n=t.substring(i.Ku).match(/&#?[0-9a-zA-Z]+;/);n?(s+=ij(n[0]),i.Im(n[0].length-1)):s+="&";break;case"<":if(s)return{Rg:"string",O:s};e="Tag";break;case"EOF":return{Rg:"string",O:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":e="StartTagAnnotation";break;case".":e="StartTagClass";break;case"/":e="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,e="TimestampTag";break;case">":return i.Im(1),o;case"EOF":return o;default:s=r,e="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":e="StartTagAnnotation";break;case"\n":h=r,e="StartTagAnnotation";break;case".":e="StartTagClass";break;case">":return i.Im(1),{Rg:"starttag",wj:s,f6:[]};case"EOF":return{Rg:"starttag",wj:s,f6:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(h),h="",e="StartTagAnnotation";break;case"\n":n.push(h),h=r,e="StartTagAnnotation";break;case".":n.push(h),h="";break;case">":return i.Im(1),n.push(h),{Rg:"starttag",wj:s,f6:n};case"EOF":return n.push(h),{Rg:"starttag",wj:s,f6:n};default:h+=r}break;case"StartTagAnnotation":switch(r){case"&":e="CharRefInAnnotation";break;case">":i.Im(1);let t=h.trim();return t=t.replace(/\s/," "),{Rg:"starttag",wj:s,f6:n,_6:t};default:h+=r}break;case"CharRefInAnnotation":let a="";for(let e=i.Ku;">"===t.charAt(e);e++)a+=t.charAt(e);h+=a||"&",e="StartTagAnnotation";break;case"EndTag":switch(r){case">":return i.Im(1),{Rg:"endtag",wj:s};case"EOF":return{Rg:"endtag",wj:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return i.Im(1),{Rg:"timestamp",g6:s};case"EOF":return{Rg:"timestamp",g6:s};default:s+=r}}i.Im(1)}return o}function sj(t){let i;if(t.getBoundingClientRect&&t.parentNode&&(i=t.getBoundingClientRect()),!i)return{left:0,top:0};const e=h.documentElement,n=h.body,r=e.clientLeft||n.clientLeft||0,o=s.pageXOffset||n.scrollLeft,a=i.left+o-r,u=e.clientTop||n.clientTop||0,c=s.pageYOffset||n.scrollTop,l=i.top+c-u;return{left:_.round(a),top:_.round(l)}}function nj(t,i,e,s){if(void 0===s&&(s=0),!t||!i)return;t.style.left="0px";let n=t.getClientRects(),r=i.getClientRects();if(0===n.length||0===r.length)return;let h=n[0],o=r[0],a=h.width/2+h.left;rj(t,o.width/2+o.left-a,e,s)}function rj(t,i,e,s){void 0===s&&(s=0),oj(t,i,"left","right",e,s)}function hj(t,i,e,s){void 0===s&&(s=0),oj(t,i,"top","bottom",e,s)}function oj(t,i,e,s,n,r){void 0===r&&(r=0);const h=t.getClientRects();if(n&&h.length>0){const t=h[0];i=os(i,n[e]+r-t[e],n[s]-r-t[s])}t.style[e]=i+"px"}function fs(t,i){void 0===t.textContent?t.innerText=i:t.textContent=i}!function(t){t.w6="Data",t.v6="Tag",t.A6="StartTag",t.m6="StartTagClass",t.p6="StartTagAnnotation",t.y6="CharRefInAnnotation",t.M6="EndTag",t.T6="TimestampTag"}($O||($O={})),function(t){t.N6="string",t.D6="starttag",t.S6="endtag",t.I6="timestamp"}(po||(po={}));var aj={qH:pe.WHITE,HH:"sans-serif",XH:"100%",ZH:"rgba(0,0,0,0.8)",KH:pe.TRANSPARENT,JH:"none",rq:"visible",$H:void 0,tq:void 0,iq:void 0,nq:void 0},uj="theoplayer-webvtt-region-",cj="theoplayer-webvtt-styling-",lj="theoplayer-webvtt-default-style",dj=5.23,fj=1.14,_j=class extends Du{o6(t){let i=h.createElement("div");i.className="theoplayer-webvtt-texttrack-"+t,gn(i),i.style.overflow="hidden",i.style.pointerEvents="none";const e=this.I5.HH;return e&&(i.style.fontFamily=e),i.style.whiteSpace="pre-line",function(){if(h.getElementById(lj))return;const t=[];for(const[i,e]of Tj)t.push("."+cj+i+" { color: "+e+" !important; }"),t.push("."+cj+"E6"+i+" { background-color: "+e+" !important; }"),t.push("video::cue(."+i+") { color: "+e+"; }"),t.push("b6"+i+") { background-color: "+e+"; }");const i=h.createElement("style");i.id=lj,i.innerHTML=t.join("\n"),h.body.appendChild(i)}(),i}jW(){this.UP.appendChild(this.L6),super.jW()}re(t,i){const e=_.min(t/100,i/100),s=mO(this.I5);this.k6.forEach((t=>{let{KT:i,x6:n}=t;this.C6(n,e,s,i)})),this.C6(this.L6,e,s)}C5(t){HL(this.UP,t),super.C5(t)}s6(t,i,e){const s=this.UP,n=this.Iu._u/100;let r=[];for(const i of t)void 0!==i.KT&&(qo(r,i.KT)||r.push(i.KT));this.k6.forEach(((t,i)=>{let{KT:s,x6:n}=t;!e&&qo(r,s)||(zu(n),this.k6.delete(i))}));for(const t of i)!e&&t.ro||this.N5(t);let h=[];const o=NO(this.L6.getBoundingClientRect());h.push(...this.r6(o));for(const t of r){let i;this.k6.has(t.o)?i=this.k6.get(t.o).x6:(i=yj(t,n),s.appendChild(i),this.k6.set(t.o,{KT:t,x6:i})),h.push(NO(i.getBoundingClientRect()))}t.sort(Nj);for(const i of t){const t=this.l6(i,h,o);void 0!==t&&h.push(t.M5(.1))}}l6(t,i,e){var s;let n;t.KT?(n=this.k6.get(t.KT.o).x6,"up"===t.KT.gN&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.L6;let r=null==(s=this.D5(t))?void 0:s[0];if(r||(r=this.O6(t),this.n6(t,[r])),n.appendChild(r),t.KT||(gj(r,t),t.JT?function(t,i,e,s){const n=Mj(t),r=n?e.Ti:e.ji;let h=C(getComputedStyle(i).lineHeight);if(0===h||S(h))return;let o=NO(i.getBoundingClientRect()),a=_.round(mt(t));"rl"===t.Pt&&(a=-(a+1));let u=h*a;"rl"===t.Pt&&(u=u-o.ji+h);a<0&&(u+=r,h=-h);n?o.m5+=u:o.v5+=u;const c=o.Lm();let l=!1;for(;!e.LT(o)||TO(o,s);)if(n)if(h<0&&o.m5<e.m5||h>0&&o.A5>e.A5){if(o.m5=c.m5,l)break;h=-h,l=!0}else o.m5+=h;else if(h<0&&o.v5<e.v5||h>0&&o.w5>e.w5){if(o.v5=c.v5,l)break;h=-h,l=!0}else o.v5+=h;n?i.style.top=(o.m5-e.m5)/e.Ti*100+"%":i.style.left=(o.v5-e.v5)/e.ji*100+"%"}(t,r,e,i):function(t,i,e,s){let n,r=NO(i.getBoundingClientRect());if(0===r.ji||0===r.Ti)return;Mj(t)?"center"===t.XT?r.m5-=r.Ti/2:"end"===t.XT&&(r.m5-=r.Ti):"center"===t.XT?r.v5-=r.ji/2:"end"===t.XT&&(r.v5-=r.ji);n=""===t.Pt?[da.POS_Y,da.NEG_Y,da.POS_X,da.NEG_X]:"lr"===t.Pt?[da.POS_X,da.NEG_X,da.POS_Y,da.NEG_Y]:[da.NEG_X,da.POS_X,da.POS_Y,da.NEG_Y];MO(r,i,n,e,s)}(t,r,e,i)),!t.KT)return NO(r.getBoundingClientRect())}O6(t){let i=new _s,e=t.O,s=this.j6(t),n={P6:void 0,we:s},r=n,o="",a="",u=[n],c=[],l=[];for(;i.Ku<e.length;){let t=ej(e,i);if(t.Rg===po.N6){const i=h.createElement("span");fs(i,t.O),wj(i,u),""!==o&&(i.lang=o),this.z6(i,a),r.we.appendChild(i)}else if(t.Rg===po.D6){const i=t.wj.toLowerCase();switch(i){case"i":case"b":case"u":case"ruby":{let e=h.createElement(i);r.we.appendChild(e),r={P6:t,we:e},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.P6)?void 0:d.wj.toLowerCase())){let i=h.createElement("rt");r.we.appendChild(i),r={P6:t,we:i},u.push(r)}break;case"c":case"v":r={P6:t,we:r.we},u.push(r);break;case"font":{var f;const i=null==(f=t._6)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);i&&(a=i[1],l.push(a),r={P6:t,we:r.we},u.push(r));break}case"lang":var _;o=null!=(_=t._6)?_:"",c.push(o)}}else if(t.Rg===po.S6){var g;const i=t.wj.toLowerCase(),e=null==(g=r.P6)?void 0:g.wj.toLowerCase();e===i?(u.pop(),r=u[u.length-1],"font"===i&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===e&&"ruby"===i?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===i&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Rg===po.I6){let i=t.g6,e=new _s;try{Gv(i,e)}catch(t){Ma("ERROR collecting timestamp",t)}}}return s}z6(t,i){const e=this.I5,s=this.b5;e.ZH&&(t.style.background=e.ZH);const n=s.qH||i||e.qH;n&&(t.style.color=n)}C6(t,i,e,s){if(s){let n=vj(s,i);t.style.height=n*e+"px",t.style.left=Aj(s)+"%",t.style.top=mj(s,i)+"px"}t.style.fontSize=dj*i*e+"px"}j6(t){const i=h.createElement("div");i.style.position="absolute",i.style.margin="0",i.style.padding="0",i.style.unicodeBidi="plaintext",i.style.wordWrap="break-word",i.style.overflowWrap="break-word",i.style.width="auto",i.style.textAlign=t.HT,function(t,i){"rl"===i.Pt?t.style.writingMode="vertical-rl":"lr"===i.Pt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(i,t),function(t,i){let e=dv(i);Mj(i)?(t.style.width=e+"%",t.style.height="auto"):(t.style.height=e+"%",t.style.width="auto")}(i,t),gj(i,t);const e=this.I5.KH;e&&(i.style.background=e);const s=this.I5.qH;return s&&(i.style.color=s),i.style.textShadow=wh(this.I5.JH),i}constructor(t,i,e,s){super(t,i,e,s,aj),this.k6=ke(),this.L6=pj(3)}};function gj(t,i){let e,s,n=lv(i),r=cv(i),h=dv(i);if(Mj(i)){switch(n){case"line-left":e=r;break;case"center":e=r-h/2;break;case"line-right":e=r-h}s=i.JT?0:mt(i)}else{switch(n){case"line-left":s=r;break;case"center":s=r-h/2;break;case"line-right":s=r-h}e=i.JT?0:mt(i)}t.style.left=e+"%",t.style.top=s+"%"}function wj(t,i){for(const e of i)if(e.P6){for(const i of e.P6.f6)Pi(t,cj+i);"v"===e.P6.wj.toLowerCase()&&e.P6._6&&Pi(t,"theoplayer-webvtt-voice-"+e.P6._6)}}function vj(t,i){return t.dN*(dj*i)*fj}function Aj(t){return t.wN-t.fN*t.ji/100}function mj(t,i){let e=t.vN,s=t._N*vj(t,i)/100;return _.max(0,e-s)}function pj(t){let i=h.createElement("div");return i.className=uj+"default",gn(i),i.style.wordWrap="break-word",i.style.writingMode="horizontal-tb",i.style.pointerEvents="none",i.style.width="auto",i.style.height="auto",i.style.maxHeight="100%",i.style.minHeight="0px",i.style.padding="0",i.style.boxSizing="border-box",i.style.fontSize=dj*t+"px",i.style.lineHeight=fj+"em",i}function yj(t,i){let e=pj(i);e.className=uj+t.o;let s=t.ji,n=vj(t,i);return e.style.width=s+"%",e.style.height=n+"px",e.style.left=Aj(t)+"%",e.style.right="",e.style.top=mj(t,i)+"px",e.style.bottom="",e.style.boxSizing="border-box",e}function Mj(t){return""===t.Pt}var yh,Tj=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function Nj(t,i){const e=mt(t),s=mt(i),n=Dj(e,t.JT),r=Dj(s,i.JT);return n&&r?e-s||Lx(i,t)||i.Mg-t.Mg:Lx(t,i)||t.Mg-i.Mg}function Dj(t,i){return i?t<0?t>-8:t>8:t>50}!function(t){t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics"}(yh||(yh={}));var Sj={qH:pe.WHITE,HH:pO.Gc,XH:"100%",ZH:pe.BLACK,KH:"transparent",JH:"none",B6:"regular",rq:"visible",$H:void 0,tq:void 0,iq:void 0,nq:void 0},Ij=[{R6:pe.WHITE,B6:"regular",U6:0},{R6:pe.WHITE,B6:"underline",U6:0},{R6:pe.GREEN,B6:"regular",U6:0},{R6:pe.GREEN,B6:"underline",U6:0},{R6:pe.BLUE,B6:"regular",U6:0},{R6:pe.BLUE,B6:"underline",U6:0},{R6:pe.CYAN,B6:"regular",U6:0},{R6:pe.CYAN,B6:"underline",U6:0},{R6:pe.RED,B6:"regular",U6:0},{R6:pe.RED,B6:"underline",U6:0},{R6:pe.YELLOW,B6:"regular",U6:0},{R6:pe.YELLOW,B6:"underline",U6:0},{R6:pe.MAGENTA,B6:"regular",U6:0},{R6:pe.MAGENTA,B6:"underline",U6:0},{R6:pe.WHITE,B6:"italics",U6:0},{R6:pe.WHITE,B6:"underline-italics",U6:0},{R6:pe.WHITE,B6:"regular",U6:0},{R6:pe.WHITE,B6:"underline",U6:0},{R6:pe.WHITE,B6:"regular",U6:4},{R6:pe.WHITE,B6:"underline",U6:4},{R6:pe.WHITE,B6:"regular",U6:8},{R6:pe.WHITE,B6:"underline",U6:8},{R6:pe.WHITE,B6:"regular",U6:12},{R6:pe.WHITE,B6:"underline",U6:12},{R6:pe.WHITE,B6:"regular",U6:16},{R6:pe.WHITE,B6:"underline",U6:16},{R6:pe.WHITE,B6:"regular",U6:20},{R6:pe.WHITE,B6:"underline",U6:20},{R6:pe.WHITE,B6:"regular",U6:24},{R6:pe.WHITE,B6:"underline",U6:24},{R6:pe.WHITE,B6:"regular",U6:28},{R6:pe.WHITE,B6:"underline",U6:28}],Ej=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function bj(t,i){return pv(t.Q6,i.Q6)||ru(t.MM,i.MM)}var Mh=32,Lj=/CC([1-4])=(.*)/;function kj(t){if(!t)return[];const i=[],e=t.trim().split(";");if(e.every((t=>t.match(Lj))))for(const t of e){const[,e,s]=t.match(Lj);i.push({F6:Number(e),Y6:s})}else for(let t=0;t<e.length;t++)i.push({F6:t+1,Y6:e[t]});return i}var xj=class t{get G6(){return this.W6.V6}get H6(){return this.W6.q6}get X6(){return this.W6.q6.U6-this.W6.V6.U6+1}get Z6(){return this.W6.q6.K6-this.W6.V6.K6+1}pr(){return this.J6=this.t8(),this.i8(),this.e8(),this.J6}t8(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.X6/Mh*this.n8.s8*100+"%",t.style.height=1.2*this.Z6+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.n8.r8?"calc(1em - 1ch)":"";const i=this.E5.HH;i&&(t.style.fontFamily=i);const e=this.E5.KH;return e&&(t.style.backgroundColor=e),t}i8(){if(!this.J6)return;let t=this.G6.K6/15*100,i=this.G6.U6/Mh*100,e=(Mh-this.H6.U6-1)/Mh*100,s=(15-this.H6.K6-1)/15*100;this.n8.h8||(i=e=1,this.J6.style.width="98%"),s<t?this.J6.style.bottom=s*this.n8.s8+"%":this.J6.style.top=t*this.n8.s8+"%",e<i?this.J6.style.right=e+"%":this.J6.style.left=i+"%"}e8(){const t=this.W6.o8.sort(Cj);for(let i=0;i<t.length;i++)this.a8(t[i-1],t[i]),this.u8(t[i]);this.a8(t[t.length-1],void 0)}u8(i){var e;const s=AO(this.E5,i.c8),n=t.l8(s);fs(n,i.d8),null==(e=this.J6)||e.appendChild(n)}static l8(t){const i=h.createElement("span");i.style.display="inline-block",t.B6!==yh.FONT_ITALICS&&t.B6!==yh.FONT_UNDERLINE_ITALICS||(i.style.fontStyle="italic"),t.B6!==yh.FONT_UNDERLINE&&t.B6!==yh.FONT_UNDERLINE_ITALICS||(i.style.textDecoration="underline");const e=t.qH;e&&(i.style.color=e);const s=t.ZH;return s&&(i.style.backgroundColor=s),i.style.textShadow=wh(t.JH),i.style.height="1.2em",i}a8(t,i){let e=t?t.q6.K6:this.W6.V6.K6;const s=i?i.V6.K6:this.W6.q6.K6;let n=t?t.q6.U6:this.W6.V6.U6;const r=i?i.V6.U6:this.W6.q6.U6;e<s&&(!i||t&&t.V6.K6!==i.V6.K6?this.f8():this._8(this.W6.q6.U6-n),n=this.W6.V6.U6),n<r&&(i?this._8(r-n):this.f8())}f8(){var t;const i=h.createElement("br");null==(t=this.J6)||t.appendChild(i)}_8(t){var i;if(t<=0)return;const e=h.createElement("span");e.style.display="inline-block",fs(e,Ef(" ",t)),null==(i=this.J6)||i.appendChild(e)}constructor(t,i,e){this.W6=t,this.n8=i,this.E5=e}};function Cj(t,i){return function(t,i){if(t.K6!==i.K6)return t.K6-i.K6;return t.U6-i.U6}(t.V6,i.V6)}var Oj=class extends Du{o6(t){let i=h.createElement("div");return i.className="theoplayer-cea608-texttrack-"+t,i.style.position="absolute",i.style.overflow="hidden",i.style.pointerEvents="none",i.style.top="10%",i.style.bottom="10%",this.I5.HH&&(i.style.fontFamily=this.I5.HH),i}re(t,i){this.ll()}ll(){let t=mO(this.I5);this.g8=function(t){return{s8:t/100,r8:t<=100,h8:t<=150}}(100*t);const i=this.w8/Mh;this.v8=i*t,this.UP.style.fontSize=this.v8+"px"}get w8(){let t=this.UP.offsetWidth;return this.g8&&this.g8.h8||(t*=.8),t}s6(t,i,e){for(const t of i)!e&&t.ro||this.N5(t);for(const i of t)this.l6(i)}l6(t){this.g8&&this.g8.h8?this.A8(80):this.A8(100),this.ll();let i=this.D5(t);i||(i=this.d6(t),this.n6(t,i));for(const t of i)this.UP.appendChild(t)}d6(t){return t.O.map((t=>new xj(t,this.g8,this.I5).pr()))}A8(t){const i=(100-t)/2;this.UP.style.left=i+"%",this.UP.style.width=t+"%"}constructor(t,i,e,s){super(t,i,e,s,Sj)}},jj=class t{m8(t){for(let i of this.p8)if(i.Lt===t)return i}static y8(t){switch(t.Rg){case Wt.TTML:case Wt.SRT:case Wt.WEBVTT:case Wt.CEA608:return!0}return!1}M8(t){switch(t.Rg){case Wt.TTML:return new RO(t,this.T8,t.kh,this.Wu);case Wt.SRT:case Wt.WEBVTT:return new _j(t,this.T8,t.kh,this.Wu);case Wt.CEA608:return new Oj(t,this.T8,t.kh,this.Wu)}}N8(t){let i=this.m8(t);i||(i=this.M8(t),i&&(i.jW(),i.C5(this.YB),this.p8.push(i),t.jg===Or.Jn&&i.K5()))}D8(t){let i=this.p8;for(let e=i.length-1;e>=0;e-=1){let s=i[e];s.Lt===t&&(s.gn(),Kn(i,e))}}S8(i){BA(i.zt)&&t.y8(i)&&(i.Jf===si.ERROR?this.D8(i):this.N8(i))}get O1(){return this.I8.cs}tr(){for(let t of this.p8)t.Lt.fn(qt.H_,this.E8),t.Lt.fn(qt.X_,this.E8),t.gn();No(this.p8)}gn(){this.tr();for(let t of this.p8)t.gn();this.Dl.fn(Ud.L_,this.b8),this.Dl.fn(Ud.x_,this.L8),this.Dl.fn(qt.ra,this.E8),this.I8.fn(ge.ra,this.k8),this.YB.fn("W_",this.x8)}constructor(t,i,e,s,n){this.p8=[],this.b8=t=>{let i=t.Lt;i.yn(qt.H_,this.E8),i.yn(qt.X_,this.E8),i instanceof jC&&(i.O1=this.O1),this.S8(i)},this.E8=t=>{let i=t.Lt;this.S8(i)},this.L8=t=>{let i=t.Lt;i.fn(qt.H_,this.E8),i.fn(qt.X_,this.E8),this.D8(i)},this.k8=()=>{let t=this.O1;for(let i of this.Dl.og)i instanceof jC&&(i.O1=t)},this.x8=()=>{for(let t of this.p8)t.C5(this.YB)},this.C8=()=>{for(let t of this.p8)t.C5(Yt({},t.P5(),{rq:"hidden"}))},this.O8=()=>{for(let t of this.p8)t.C5(Yt({},t.P5(),{rq:"visible"}))},this.T8=t,this.Wu=i,this.Dl=e,this.I8=n,this.YB=s,this.Dl.yn(Ud.L_,this.b8),this.Dl.yn(Ud.x_,this.L8),this.Dl.yn(qt.ra,this.E8),this.I8.yn(ge.ra,this.k8),this.YB.yn("W_",this.x8),this.k8()}};function Pj(t){const i=new XS,e=function(t){const i=[];return HS.ia(t)&&i.push(new HS(t)),qS.ia(t)&&i.push(new qS(t)),i}(t);if(e.length>0){for(const t of e)i.JY(t);i.KY(e[0])}return i}var wu,zj=class extends uO{get UP(){return this.BC}get r_(){return this.BC.videoHeight}get a_(){return this.BC.videoWidth}get ya(){return this.j8}v_(){return this.BC}async Ud(){this.j8.gn(),this.P8.gn(),this.z8.gn(),await super.Ud()}be(){super.be(),this.P8.be()}ge(){super.ge(),this.P8.ge()}u5(t){super.u5(t),this.P8.u5(t)}constructor(t,i,e,s){super(t,i,e,s),this.j8=Pj(t),this.P8=new vO,this.z8=new jj(this.P8.we,this.Iu,this.nt,this.Ol,this.ya)}};!function(t){t.B8="HELLO",t.U8="HI_THERE",t.Q8="INITIALIZE",t.F8="APPEND_INIT",t.Y8="APPEND_DATA",t.G8="ACK",t.V8="REMOVE",t.W8="DESTROY_SESSION"}(wu||(wu={}));var xu,Bj=class{H8(t){return this.Sq.NC((async t=>{fo(t);const i=new MessageChannel,e=i.port1,s=i.port2;Dl.serviceWorker.controller||await KN(Dl.serviceWorker,"install",t),"activated"!==Dl.serviceWorker.controller.state&&await KN(Dl.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};Dl.serviceWorker.controller.postMessage(n,[s]),e.start(),this.q8=e;try{const i=await KN(e,"message",t),s=i.data;if("HI_THERE"!==s.kind)throw new g("Could not set up message channel");this.QC=s.sessionId}catch(t){throw ut(t)&&this.X8(),t}}),t)}Z8(t,i){return this.q8,this.Sq.NC((async()=>{if(!this.q8)throw new g("MessageSession not set up yet or already closed.");i||(i=[]),this.q8.postMessage(t,i);const e=await KN(this.q8,"message");return e.data}))}K8(){return this.Sq.NC((()=>this.X8()))}X8(){if(!Dl.serviceWorker.controller)return;if("activated"!==Dl.serviceWorker.controller.state)return;if(!this.q8)return;const t={kind:"DESTROY_SESSION"};this.q8.postMessage(t),this.q8.close(),this.q8=void 0}constructor(){this.Sq=new Kr}},Rj=class{get J8(){return this.t9}i9(t,i){const e=t-i;this.t9=e>this.J8?this.t9:e}e9(t){this.t9=t}constructor(){this.t9=1/0}};!function(t){t.Mm="audio",t.ym="video",t.Dm="metadata"}(xu||(xu={}));var Uj=class extends Bo{get wf(){return void 0===this.s9||void 0===this.n9?Ai.kB():new Ai([this.s9,this.n9])}get wd(){return{HP:this.tY}}get h$(){return D(this.tY,"audio")?fi.Mm:D(this.tY,"video")?fi.ym:fi.hT}get zF(){return this.tY}get a$(){return Ai.kB()}get bW(){return 30}set bW(t){}get OW(){return 30}set OW(t){}l$(t,i){}d$(t,i){}Pq(){return this.r9}get oa(){return this.h9}get o9(){return this.s9}get WT(){return this.n9}async f$(){}async jJ(t,i){}async AJ(t,i,e){if(t.Rg!==G.dq)throw new g("Streaming or opaque segments are not supported yet.");const s=t.zm,n=async()=>{const t=s.buffer,e={kind:wu.Y8,mediaType:Qj(this.tY),segment:s,startPts:i.a9,totalDuration:i.ct};if(await this.u9.Z8(e,[t]),void 0===this.s9){const t=i.a9+i.QD;this.s9=t,this.n9=t}this.n9=this.n9+i.ct,this.Co(new wn(Bi.cq))};return this.Sq.NC((async t=>{fo(t);try{this.h9=!0,await n()}finally{this.h9=!1}}),e)}async yJ(t,i,e){if(t.Rg!==G.dq)throw new g("Streaming or opaque initialization segments are not supported yet.");const s=t.zm,n=async()=>{const t={kind:wu.F8,mediaType:Qj(this.tY),segment:s};await this.u9.Z8(t,[])};return this.Sq.NC((async t=>{fo(t);try{this.h9=!0,await n()}finally{this.h9=!1}}),e)}n$(){this.r9=!0}qJ(){this.r9=!1}async bT(t,i,e){const s=async()=>{const t={kind:wu.V8,mediaType:Qj(this.tY),endTime:i};await this.u9.Z8(t),this.s9=void 0,this.n9=void 0,this.Co(new wn(Bi.cq))};return this.Sq.NC((async t=>{fo(t);try{this.h9=!0,await s()}finally{this.h9=!1}}),e)}mq(t){return this.tY===t.HP}yq(t){return this.tY=t.HP,Promise.resolve()}async Ud(){this.Vo(),await this.Sq.gn()}constructor(t,i){super(),this.tY=t,this.u9=i,this.s9=void 0,this.n9=void 0,this.Sq=new Kr,this.h9=!1,this.r9=!1}};function Qj(t){return t.match(/video/)?xu.ym:xu.Mm}var Fj=class t{static c9(i,e,s,n){const r=[];for(let t=0;t<i.u0.length;t++){const s=i.u0[t].HP;r.push(new Uj(s,e))}return new t(i,r,s,n)}l9(){}get d9(){return[this.i0,this.e0].filter(Po)}get X$(){return this.i0}get wf(){return cx(this)}get wd(){return this.wC}get ct(){return 0}get Pq(){var t,i,e;const s=null==(e=null==(t=this.i0)?void 0:t.Pq())||e;var n;const r=null==(n=null==(i=this.e0)?void 0:i.Pq())||n;return s&&r}get t_(){return new Ai([0,1/0])}get Z$(){return this.e0}get rt(){throw new g("Not implemented")}async Ud(){await Promise.all([this.i0,this.e0].filter(Po).map((t=>t.Ud())))}n0(t){}a0(t,i,e,s){}n$(){var t,i;null==(t=this.i0)||t.n$(),null==(i=this.e0)||i.n$()}qJ(){var t,i;null==(t=this.i0)||t.qJ(),null==(i=this.e0)||i.qJ()}mq(t){return!0}yq(t){return this.wC=t,Promise.resolve()}async vq(t,i){const e=await this.Jx.Kx(t.kb,i),s=await e.Qx();return await this.Aq(s),s}async Aq(t){if(t&&!this.BC.src)throw new To(Ui.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.BC.src)throw new To(Ui.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const i=this.zx;i&&(await i.Rx(this.BC),this.zx=void 0),t&&(await t.bn(this.BC),this.zx=t)}constructor(t,i,e,s){this.zx=void 0,this.wC=t,this.e0=Vt(i,(t=>Boolean(t.zF.match(/video/)))),this.i0=Vt(i,(t=>Boolean(t.zF.match(/audio/)))),this.Jx=e,this.BC=s,this.l9()}},Yj=class extends Bo{f9(){this._9.addEventListener("timeupdate",this.g9),this._9.addEventListener("ended",this.w9),this._9.addEventListener("timeupdate",this.v9),this._9.addEventListener("ratechange",this.A9),this._9.addEventListener("volumechange",this.m9),this._9.addEventListener("durationchange",this.p9),this._9.addEventListener("playing",this.y9),this._9.addEventListener("seeking",this.M9),this._9.addEventListener("play",this.T9),this._9.addEventListener("pause",this.N9),this._9.addEventListener("encrypted",this.J3)}D9(){this._9.removeEventListener("timeupdate",this.g9),this._9.removeEventListener("ended",this.w9),this._9.removeEventListener("timeupdate",this.v9),this._9.removeEventListener("ratechange",this.A9),this._9.removeEventListener("volumechange",this.m9),this._9.removeEventListener("durationchange",this.p9),this._9.removeEventListener("playing",this.y9),this._9.removeEventListener("seeking",this.M9),this._9.removeEventListener("play",this.T9),this._9.removeEventListener("pause",this.N9)}S9(){this.N2.yn(Zt.H_,this.Ds)}I9(){this.N2.fn(Zt.H_,this.Ds)}get UP(){return this._9}get L0(){return!1}get Mf(){return this._9.currentTime+this.E9.J8}get Ff(){return this._9.paused}get c_(){return this._9.volume}set c_(t){this._9.volume=t}get Gf(){return this._9.playbackRate}set Gf(t){this._9.playbackRate=t}get b9(){return this._9.defaultPlaybackRate}get wf(){var t,i;return null!=(i=null==(t=this.FP)?void 0:t.wf)?i:Ai.kB()}get L9(){return Ai.xn(this._9.buffered)}get Hf(){const t=this.k9;return this.Uo._B(t.Im(this.E9.J8))}get k9(){return Ai.xn(this._9.played)}get e_(){return this.CB}get T0(){return!1}get O0(){return!1}get ct(){return this._9.duration}get zf(){return this._9.muted}set zf(t){this._9.muted=t}get c8(){return this._9.style}get vv(){return Yt({},XL,{_v:!0})}Em(t,i,e){this.q2.qd(),this.q2=new Wr,this.X2=this.Z2(t,this.X2,this.q2.Wd).catch(na)}async Z2(t,i,e){var s;this.Uo=this.Hf;const n=null==(s=this.FP)?void 0:s.d9;if(!n)return;const r=_.max(...n.map((t=>t.o9?t.o9:1/0)));this.CB=!0,this.Co(new ri(t)),await i.catch(na),fo(e);try{for(this.x9||this.C9(),this._9.load(),this.O9||(this.j9=!1,await Ys(this._9.play(),e));this.Jf<Mw.cT;)await this.N2.lf(Zt.H_,e);this.P9.Zb(),this.x9=!1,this.CB=!1,this.Co(new yi(this.Mf))}catch(t){throw this.P9.Jb(t),t}finally{this.z9(),this.E9.e9(r)}}m_(){this.O9=!0,this._9.pause()}async p_(){this.O9&&(this._9.src||this.a5(),await this.P9.tL,await this._9.play())}async Ud(){this.u9&&this.u9.K8().catch(na),this.q2.qd(),this.D9(),this.I9(),this.N2.Ud(),this.Vo(),this.Dl.gn(),this.P8.gn(),this.z8.gn()}async tr(){this.u9&&this.u9.K8().catch(na),this.q2.qd(),this._9.removeAttribute("src"),this._9.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this._9.removeAttribute("x-airplay-deny"),this._9.disableRemotePlayback=!1,this._9.load(),this.N2.tr(),this.Uo=Ai.kB()}a5(){this.h5||(qj(this._9,i.Ys),this.o5=!0)}get Jf(){return this.N2.Jf}C9(){const t=this._9.getClientRects();let i;if(!(t.length>0))return;i=t[0];const e=i.width,s=this._9.videoWidth/this._9.videoHeight,n=i.height;let r,h;e/n>s?(r=n*s,h=n):(h=e/s,r=e),this._9.style.width=r+"px",this._9.style.height=h+"px",this._9.style.marginLeft=(e-r)/2+"px",this._9.style.marginTop=(n-h)/2+"px",this._9.style.backgroundColor="black"}z9(){this._9.style.width="100%",this._9.style.height="100%",this._9.style.marginLeft="",this._9.style.marginTop="",this._9.style.backgroundColor=""}get r_(){return this._9.videoHeight}get a_(){return this._9.videoWidth}get Sf(){return this._9.ended}get Ti(){return this._9.offsetHeight*i.Ys.T2}get ji(){return this._9.offsetWidth*i.Ys.T2}get Cf(){return!1}get h5(){return this.o5}get Af(){}get Iu(){return this.B9}get lt(){}get ya(){return this.j8}get t_(){return this.FP?this.FP.t_:Ai.kB()}get YP(){}get nt(){return this.Dl}get Ol(){return this.YB}get g_(){return!1}set g_(t){}ez(t,i,e,s,n){}DI(t,i,e,s,n,r,h,o,a){const u=new Yx(t,i,e,s,n,r,h,a,o);return this.Dl.tt(u),this.l3.tt(u),u}Rq(t){}Pf(){return kL(this._9)}get L2(){return"block"===this._9.style.display}ge(){this._9.style.display="block",this.P8.ge()}be(){this._9.style.display="none",this.P8.be()}n5(){}async $n(t){if(t.Rg===Au.ZC)throw new g("Not yet implemented");await this.u9.H8();const i=Vt(t.qP,(t=>t.cA.Rg===be.$v)),e={kind:wu.Q8,mediaBufferConfigs:t.u0.map((t=>t.HP)),fairPlaySdkUri:null==i?void 0:i.xj};return await this.u9.Z8(e),this.FP=Fj.c9(t,this.u9,this.Jx,this._9),this.Mq.$n(this.FP,t),this._9.setAttribute("x-webkit-airplay","deny"),this._9.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this._9.disableRemotePlayback=!0,this._9.preload="none",this._9.src="https://theo.proxy/"+this.u9.QC+"/master.m3u8",this.FP}r5(){}CI(t){this.Dl.it(t),this.l3.it(t)}nz(){for(const t of this.Dl.og.slice())t.gn();this.Dl.tr()}PP(t){}tz(){return!1}u5(t){t.appendChild(this._9),this.P8.u5(t)}v_(){return this._9}l2(){}get lz(){return this.Mq.lz}set lz(t){this.Mq.lz=t}get c5(){}set c5(t){}get H4(){}D_(){}constructor(t,i,e,s){super(),this.x9=!0,this.u9=new Bj,this.E9=new Rj,this.O9=!0,this.P9=new ue,this.CB=!1,this.X2=Promise.resolve(),this.q2=new Wr,this.j9=!0,this.Uo=Ai.kB(),this.o5=!1,this.g9=()=>{this.Ff||this.L9.U<=0||this.wf.U<=0||this.E9.i9(this.wf.jn(this.wf.U-1),this.L9.jn(this.L9.U-1))},this.w9=()=>{this.Co(new jn(this.Mf))},this.v9=()=>{this.Co(new Dr(this.Mf,this.Af))},this.A9=()=>{this.Co(new Qe(this.Mf,this.Gf))},this.m9=()=>{this.Co(new Pc(this.Mf,this.c_))},this.p9=()=>{this.Co(new ko(this.ct))},this.y9=()=>{this.Co(new Oe(this.Mf))},this.M9=()=>{this.Em(this.Mf)},this.T9=async()=>{this.j9&&this.Co(new Gt(this.Mf)),this.O9=!1,this.j9=!0},this.N9=()=>{this.O9=!0,this.Co(new hs(this.Mf))},this.J3=t=>{const i=t.initDataType;var e;const s=null!=(e=t.initData)?e:new ArrayBuffer(0);this.Co(new jt(i,s))},this._9=t,this.N2=new nu(this),this.B9=e,this.YB=s,this._9.playsInline=!0,this._9.style.width="100%",this._9.style.height="100%",this.f9(),this.S9(),this.j8=Pj(this._9),this.Mq=new sO(this),this.Jx=i,this.Dl=new Lr,this.l3=new ou(this),this.P8=new vO,this.z8=new jj(this.P8.we,this.Iu,this.nt,this.Ol,this.ya)}},Gj=[fi.Mm,fi.ym];function Vj(t){const i=h.createElement(t);return Er(i)&&i.addEventListener("contextmenu",Xj),Hj(i),i}function Wj(t){Hj(t),t.removeEventListener("contextmenu",Xj)}function Hj(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),wM(t),kM(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=Le.eT,t.controls=!1,t.style.display="none",Er(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function qj(t,i){if(i.R9){const i=t.muted;t.muted=!0,t.muted=!1,t.muted=i}else if(t.paused){const i=t.play();ya(i)&&ha(i),t.pause()}}function Xj(t){t.preventDefault()}var Zj=class{LS(t){return this.EI.LS(t)}eY(t){this.EI.eY(t)}gn(){this.EI.gn()}constructor(t){this.EI=t}},Kj=class extends Zj{LS(t){const i=new ss(t),e=this.QB.mW.AP(i);return e?this.U9(i,e):this.EI.LS(i)}async U9(t,e){e.yW(i.Kd()/1e3);const s=await this.EI.LS(t);let n;e.MW(i.Kd()/1e3),n=s.yV?s.vV().pipeThrough(new _i(new Jj(e))):s.gj().then((t=>{const s=i.Kd()/1e3;return e.TW(s,new j(t)),e.NW(s),t}));const r={zm:n,LS:s.LS};return new fa(r,s)}constructor(t,i){super(t),this.QB=i}},Jj=class{start(t){this.VH=t}transform(t){this.Q9.TW(i.Kd()/1e3,t),this.VH.enqueue(t)}flush(){this.Q9.NW(i.Kd()/1e3)}constructor(t){this.Q9=t}};function $j(t){return{get ratio(){return t.Lo},get thresholds(){return t.F9.slice()}}}function tP(t){const i=[],e=_.floor(1/t);if(S(e))return[];for(let s=0;s<=e;s++){const e=os(s*t,0,1);i.push(e)}return i}var iP=class{get Lo(){return this.Y9}get F9(){return this.G9}V9(t){return i=>{const e=i[i.length-1];this.Y9=e.intersectionRatio,t(e.intersectionRatio)}}get va(){return this.Xa||(this.Xa=$j(this)),this.Xa}y_(){this.W9.disconnect()}constructor(t,i,e){this.Y9=1,this.Xa=void 0,this.G9=tP(i);const n=this.V9(e);this.W9=new s.IntersectionObserver(n,{root:null,threshold:this.G9}),this.W9.observe(t)}},eP=class{get Lo(){return this.Y9}get F9(){return this.G9}get va(){return this.Xa||(this.Xa=$j(this)),this.Xa}H9(t){this.Y9=t;const i=this.G9;let e=0;if(t>0)for(;e<i.length&&i[e]<=t;)++e;this.q9!==e&&(this.q9=e,this.X9(t))}constructor(t,i){this.Y9=1,this.q9=-1,this.Xa=void 0,this.G9=tP(t),this.X9=i}},sP=class extends eP{Z9(){const t=this.yo.getBoundingClientRect();return os(_.max(0,_.min(s.innerWidth,t.right)-_.max(0,t.left))*_.max(0,_.min(s.innerHeight,t.bottom)-_.max(0,t.top))/(t.width*t.height),0,1)}y_(){s.removeEventListener("scroll",this.K9)}constructor(t,i,e){super(i,e),this.K9=ze((()=>this.H9(this.Z9())),50),this.yo=t,s.addEventListener("scroll",this.K9,!!BS&&{passive:!0}),wc((()=>this.H9(this.Z9())))}},nP=.1,rP=class{get J9(){return this.t7}get zo(){return this.i7}set zo(t){if(S(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.i7=t}get va(){return this.Xa||(this.Xa=function(t){return{get ratio(){return t.J9},get visible(){return t.J9>t.zo},get visibleThreshold(){return t.zo},set visibleThreshold(i){i=pc(i),t.zo=i},addObserver:(i,e)=>(i=pc(i),t.Fo(i,e).va),removeObserver(i){let e=t.e7(i);e&&t.Ro(e)}}}(this)),this.Xa}s7(t){return i=>{this.t7=i,null==t||t(this.t7)}}Fo(t,i){if(S(t))throw new b("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let e;return e="function"==typeof s.IntersectionObserver?new iP(this.yo,t,this.s7(i)):new sP(this.yo,t,this.s7(i)),this.n7.push(e),e}Ro(t){t.y_(),Qr(this.n7,t)}e7(t){for(const i of this.n7)if(i.va===t)return i}gn(){for(const t of this.n7)t.y_();No(this.n7)}constructor(t){this.t7=1,this.i7=0,this.n7=[],this.Xa=void 0,this.yo=t,this.Fo(.1,this.s7())}},hP=class extends wn{constructor(){super(Co.qg)}},oP=class extends dt{get r7(){return this.QB}get ST(){return this.h7}set ST(t){this.h7=t,this.o7.ST=t}get a7(){return this.u7}get ht(){return this.o7.ht}get AQ(){return this.l7}get Iu(){return this.d7}get kf(){return this.o7.kf}get jf(){return this.f7}get PU(){return this._7}get nt(){return this.o7.nt}get Ol(){return this.YB}get rt(){return this.o7.rt}get wf(){return this.vf()}vf(){return this.o7.wf}get g7(){return this.KW}get cH(){return this.lH}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this.o7.Mf}Nf(t,i){this.o7.Nf(t,i)}w7(){return this.Tf()}get Af(){return this.o7.Af}set Af(t){this.o7.Af=t}get bt(){return this.o7.bt}get ct(){return this.Td()}Td(){return this.o7.ct}get we(){return this.o7.we}get Sf(){return this.o7.Sf}get lt(){return this.Ef()}Ef(){return this.o7.lt}get bf(){return this.Lf()}Lf(){return this.o7.bf}get ya(){return this.o7.w_()}get g_(){return this.o7.g_}set g_(t){this.o7.g_=t}get zf(){return this.o7.zf}set zf(t){const i=Boolean(t);this.Rf(i)}Rf(t){this.o7.zf=t,t||this.Ff||this.A_()}get Ff(){return this.o7.Ff}get Gf(){return this.o7.Gf}set Gf(t){this.o7.Gf=t}get Hf(){return this.qf()}qf(){return this.o7.Hf}get Xf(){return this.o7.Xf}set Xf(t){this.o7.Xf=t}get Jf(){return this.o7.Jf}get t_(){return this.i_()}i_(){return this.o7.t_}get e_(){return this.o7.e_}get Mg(){return this.OT}get r_(){return this.o7.r_}get a_(){return this.o7.a_}get c_(){return this.o7.c_}set c_(t){const i=os(Number(t),0,1)||0;this.d_(i)}get f_(){return this.FB}d_(t){this.o7.c_=t}ka(){ic(this,iD,this)}p_(){this.o7.p_()}m_(){this.o7.m_()}Wa(){return this.Zz}async ga(t,i){if(this.Zz=t,t){this.v7.nF(t).catch(this.A7);const e=function(t){t.sources;const i=t.sources.filter((t=>$l(t.integration)));0;return t.sources=i,t}(t);await this.o7.ga(e,i)}}A_(){if(this.bo)return;this.o7.A_(),this.u7.A_();const t=this.we.getElementsByTagName("video");for(let e=0;e<t.length;e++){const s=t[e];"Advertisement"===s.title&&qj(s,i.Ys)}this.bo=!0}cs(){return this.m7.qo()===JN.FULLSCREEN}ge(){this.o7.ge()}be(){this.o7.be()}v_(){return this.o7.v_()}D_(){this.o7.D_()}S_(){this.o7.S_()}async y_(){this.Zz=void 0,await this.o7.y_(),await this.o7.tr()}async gn(){this.Co(new hP),this.Vo(),this.l7.gn(),this.AO.gn(),this._7.gn(),this.p7.gn(),this.y7.gn(),this.m7.gn(),this.d7.gn(),this.M7.gn(),this.u7.gn(),this.UB.gn(),await this.o7.gn()}constructor(t,e,s){super(),this.h7=!1,this.bo=!1,this.Zz=void 0,this.T7=!1,this.ba=void 0,this.A7=t=>{if(this.T7)return;this.T7=!0;const i=this.N7,e=tn(t);this.o7.fg=new zN(this.we,e,t),ha(i.gn())},this.D7=t=>{t.type!==Co._w&&t.type!==Co.fw&&this.Co(t)};const n=pc(e.uid);S(n)?this.OT=Yw++:this.OT=n,this.wd=e;const r=i.AO,h=new QL;this.M7=new SS("8.2.0",r,h),this.QB=new TL,this.FB=new Ct;const o=new Kj(r,this.QB);this.AO=new dL(o,e.allowMixedContent),this.BH=null!=s?s:new oS(e.isEmbeddable,"8.2.0",iS()),this.v7=new UL(r,this.BH,this.M7,h,e,iS()),this.v7.CH().catch(this.A7),this.d7=new GS(t),this.d7.yn(ii.pn,this.Ds),this.YB=new WL,this.KW=new SL,this.lH=new EL;const a=new PN(t,e,this.AO,this.QB,this.FB,this.d7,this.YB);this.QB.jW(a);let u=a;u=new IL(u,this.g7),u=new bL(u,this.cH),this.N7=u,this.o7=new jw(this.N7),this.o7.sf(this.D7),this.f7=new LL(this.o7),this._7=new gL(this.o7,this.AO,this.QB),this.p7=new kS(this),this.y7=new ZS(this.o7,e.allowNativeFullscreen),this.m7=new tD(this.y7),this.d7.bn(),this.Bo=new rP(t),this.UB=new pa(this.d7,this.YB,1,[fi.ym]),this.u7=new lm(this.UB),this.l7=new OL}};var Zo,cc=class extends dt{get r7(){return this.S7()}S7(){return this.Qo.r7}get Oc(){return this.I7()}I7(){return this.Qo.Oc}get M7(){return this.Qo.M7}get a7(){return this.E7()}E7(){return this.Qo.a7}get ST(){return this.Qo.ST}set ST(t){this.Qo.ST=t}get p7(){return this.Qo.p7}get AQ(){return this.Qo.AQ}get g7(){return this.Qo.g7}get wd(){return this.Qo.wd}get Iu(){return this.Qo.Iu}get ya(){return this.w_()}w_(){return this.Qo.ya}get AO(){return this.Qo.AO}get f_(){return this.Qo.f_}get v7(){return this.Qo.v7}get cH(){return this.Qo.cH}get PU(){return this.Qo.PU}get m7(){return this.Qo.m7}get d7(){return this.Qo.d7}get o7(){return this.Qo.o7}get Ol(){return this.Qo.Ol}get b7(){return this.L7()}L7(){return this.Qo.b7}get Mg(){return this.Qo.Mg}get Bo(){return this.Qo.Bo}get ht(){return this.df()}df(){return this.Qo.ht}vf(){return this.Qo.vf()}get Af(){return this.mf()}set Af(t){this.pf(t)}mf(){return this.Qo.Af}pf(t){this.Qo.Af=t}get bt(){return this.yf()}yf(){return this.Qo.bt}Tf(){return this.Qo.Tf()}Nf(t,i){this.Qo.Nf(t,i)}w7(){return this.Qo.w7()}Td(){return this.Qo.Td()}get we(){return this.Df()}Df(){return this.Qo.we}get Sf(){return this.If()}If(){return this.Qo.Sf}Ef(){return this.Qo.Ef()}Lf(){return this.Qo.Lf()}get kf(){return this.xf()}xf(){return this.Qo.kf}get g_(){return this.Qo.g_}set g_(t){this.Qo.g_=t}get jf(){return this.Pf()}Pf(){return this.Qo.jf}get zf(){return this.Bf()}set zf(t){this.Rf(t)}Bf(){return this.Qo.zf}Rf(t){this.Qo.Rf(t)}get Ff(){return this.Yf()}Yf(){return this.Qo.Ff}get Gf(){return this.Vf()}set Gf(t){this.Wf(t)}Vf(){return this.Qo.Gf}Wf(t){this.Qo.Gf=t}qf(){return this.Qo.qf()}get Xf(){return this.Zf()}set Xf(t){this.Kf(t)}Zf(){return this.Qo.Xf}Kf(t){this.Qo.Xf=t}get Jf(){return this.$f()}$f(){return this.Qo.Jf}get ba(){return this.Qo.ba}set ba(t){this.Qo.ba=t}i_(){return this.Qo.i_()}get e_(){return this.s_()}s_(){return this.Qo.e_}get nt(){return this.n_()}n_(){return this.Qo.nt}get r_(){return this.h_()}h_(){return this.Qo.r_}get rt(){return this.o_()}o_(){return this.Qo.rt}get a_(){return this.u_()}u_(){return this.Qo.a_}get c_(){return this.l_()}set c_(t){this.d_(t)}l_(){return this.Qo.c_}d_(t){this.Qo.d_(t)}A_(){this.Qo.A_()}m_(){this.Qo.m_()}p_(){this.Qo.p_()}ge(){this.Qo.ge()}be(){this.Qo.be()}cs(){return this.Qo.cs()}v_(){return this.Qo.v_()}D_(){this.Qo.D_()}S_(){this.Qo.S_()}ka(){this.Qo.ka()}Wa(){return this.Qo.Wa()}ga(t,i){return this.Qo.ga(t,i)}y_(){return this.Qo.y_()}E_(t){return!1}qz(){this.k7&&this.Qo.sf(this.b_)}Xz(){this.k7&&this.Qo.cf(this.b_)}async gn(t){this.Vo(),t||await this.Qo.gn(),this.Xz()}constructor(t,i){super(),this.b_=t=>{this.E_(t)||this.Co(t)},this.Qo=t,this.k7=!i,this.qz()}};!function(t){t[t.Za=0]="Za",t[t.x7=1]="x7",t[t.C7=2]="C7",t[t.O7=3]="O7",t[t.j7=4]="j7"}(Zo||(Zo={}));var aP=[0,1,2,3,4],uP={};function Vr(t,i){(uP[i]||(uP[i]=[])).push(t)}var cP={};function lP(t,i){(cP[i]||(cP[i]=[])).push(t)}var dP=[];function fP(t){for(const i of dP)i(t)}var _P=self.CustomEvent;var gP=function(){try{const t=new _P("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,i){return new CustomEvent(t,i)}:function(t,i){const e=h.createEvent("CustomEvent");return e.initCustomEvent(t,(null==i?void 0:i.bubbles)||!1,(null==i?void 0:i.cancelable)||!1,null==i?void 0:i.detail),e};var wP=new class{get U(){return this.TT.length}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){const i=[];for(let e=0;e<t.U;e++)i[e]=t.cg(e).va;return i.getPlayerByUID=i=>{const e=t.P7(i);return e&&e.va},i}(this)}cg(t){return this.TT[t]}eX(t){this.TT.push(t),this.va.push(t.va)}bT(t){const i=this.TT.indexOf(t);i<0||(Kn(this.TT,i),this.Xa&&Kn(this.Xa,i))}P7(t){for(const i of this.TT)if(i.Mg===t)return i}constructor(){this.TT=[],this.Xa=void 0}};var ie,vP=class extends wn{constructor(t){super(Co.lo),this.source=t}},AP=class extends dt{get Af(){}set Af(t){}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this.xB}w7(){return this.Tf()}Nf(t,i){this.CB&&this.xB===t||(this.xB=t,this.CB=!0,this.Co(new ri(this.xB)))}get Ff(){return this.jB}get Gf(){return this.PB}set Gf(t){this.PB!==t&&(this.PB=t,this.Co(new Qe(this.xB,this.Gf)))}get Jf(){return Mw.uT}get e_(){return this.CB}p_(){this.jB&&(this.jB=!1,this.Co(new Gt(this.xB)),this.Co(new Fr(this.xB)))}m_(){this.jB||(this.jB=!0,this.Co(new Dr(this.xB,this.Af)),this.Co(new hs(this.xB)))}tr(){this.xB=0,this.CB=!1,this.PB=1,this.m_()}gn(){this.Vo()}be(){}ge(){}constructor(){super(),this.xB=0,this.jB=!0,this.CB=!1,this.PB=1}},mP={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},pP={visibility:"hidden"},yP={visibility:"visible"},MP=class{get zu(){return void 0!==this.z7?this.z7:void 0!==this.B7?this.B7:void 0}set R7(t){this.B7=t,this.Yn()}Yn(){const t=this.Qo.Ff,i=this.U7;this.zu?this.Us.style.backgroundImage='url("'+Cf(this.zu)+'")':this.Us.style.backgroundImage="",t&&this.zu&&!i?this.ge():this.be()}ge(){DM(pP,this.Qo.we),DM(yP,this.Us)}be(){DM(pP,this.Us),DM(yP,this.Qo.we)}qz(){this.Qo.yn(Co.lo,this.Q7),this.Qo.yn(Co.jh,this.dO)}gn(){this.Qo.fn(Co.lo,this.Q7),this.Qo.fn(Co.jh,this.dO),zu(this.Us)}constructor(t){this.U7=!1,this.Q7=t=>{var i;this.U7=!this.Qo.Ff,this.z7=null==(i=t.source)?void 0:i.poster,this.Yn()},this.dO=()=>{this.U7=!0,this.be()},this.Qo=t,this.qz(),this.Us=function(){let t=Ha&&Ha.document&&Ha.document.createElement("div");return t.className="theoplayer-poster",DM(mP,t),t}(),t.we.appendChild(this.Us)}};function TP(t){let i;const e={get playing(){return t.Fc},get currentAds(){return t.F7.map((t=>t.Y7()))},get currentAdBreak(){var i,e;return null!=(e=null==(i=t.G7)?void 0:i.Y7())?e:null},get scheduledAds(){return t.V7.map((t=>t.Y7()))},get scheduledAdBreaks(){return t.W7.map((t=>t.Y7()))},skip(){t.qm()},schedule(i){let e=BD(i,Ur.Lb);e?t.a4(e,ie.H7,!1):console.error("Invalid ad description")},registerServerSideIntegration(i,e){t.q7(i,e)},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},get theoads(){var i;return null==(i=t.X7)?void 0:i.va}};return i=new xa(t,e),e}!function(t){t[t.H7=0]="H7",t[t.Z7=1]="Z7"}(ie||(ie={}));var NP=class extends hl{constructor(t,i){super(t),this.Xl=i}},DP=class extends wn{get ad(){return this.adBreak}constructor(t,i){super(t),this.adBreak=i}},SP=class extends NP{fa(){return new IP(this.Xl.Y7())}constructor(t){super("K7",t)}},IP=class extends DP{constructor(t){super("removeadbreak",t)}},EP=class extends NP{fa(){return new bP(this.Xl.Y7())}constructor(t){super("J7",t)}},bP=class extends DP{constructor(t){super("addadbreak",t)}},gh=class extends hl{constructor(t,i){super(t),this.ttt=i}},dh=class extends wn{constructor(t,i){super(t),this.ad=i}},LP=class extends gh{fa(){return new kP(this.ttt.Y7())}constructor(t){super("itt",t)}},kP=class extends dh{constructor(t){super("addad",t)}},Ji=class extends NP{fa(){return new xP(this.Xl.Y7())}constructor(t){super("ett",t)}},xP=class extends DP{constructor(t){super("adbreakend",t)}},ea=class extends NP{fa(){return new CP(this.Xl.Y7())}constructor(t){super("stt",t)}},CP=class extends DP{constructor(t){super("adbreakbegin",t)}},js=class extends gh{fa(){return new OP(this.ttt.Y7(),this.currentTime)}constructor(t,i){super("ntt",t),this.currentTime=i}},OP=class extends dh{constructor(t,i){super("adbegin",t),this.currentTime=i}},Jh=class extends gh{fa(){return new jP(this.ttt.Y7(),this.currentTime)}constructor(t,i){super("htt",t),this.currentTime=i}},jP=class extends dh{constructor(t,i){super("adend",t),this.currentTime=i}},Iu=class extends hl{fa(){return new PP}constructor(){super("ott")}},PP=class extends wn{constructor(){super("adadded")}},dc=class extends dt{get Fc(){return!!this.Ic&&this.Ic.Fc}get F7(){return this.Ic?this.Ic.F7:[]}get G7(){return this.Ic?this.Ic.G7:null}get V7(){return this.Ic?this.Ic.V7:[]}get W7(){return this.Ic?this.Ic.W7:[]}get X7(){var t;return null==(t=this.Ic)?void 0:t.X7}a4(t,i,e){var s;null==(s=this.Ic)||s.a4(t,i,e)}att(t){var i;null==(i=this.Ic)||i.att(t)}qm(){var t;null==(t=this.Ic)||t.qm()}utt(t){var i;null==(i=this.Ic)||i.utt(t)}q7(t,i){var e;null==(e=this.Ic)||e.q7(t,i)}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=TP(this)}get fg(){return this.Ic}set fg(t){const i=this.Ic;if(i===t)return;const e=this.F7,s=this.G7,n=this.V7,r=this.W7;null==i||i.cf(this.Ds),this.Ic=t,null==t||t.sf(this.Ds);const h=this.F7,o=this.G7,a=this.V7,u=this.W7,c=[];let l=!1;for(const t of r)qo(u,t)||c.push(new SP(t));for(const t of u)qo(r,t)||c.push(new EP(t));for(const t of a)qo(n,t)||(c.push(new LP(t)),l=!0);l&&c.push(new Iu),s!==o&&(s&&c.push(new Ji(s)),o&&c.push(new ea(o)));for(const t of e)qo(h,t)||c.push(new Jh(t,this.Qo.Tf()));for(const t of h)qo(e,t)||c.push(new js(t,this.Qo.Tf()));for(const t of c)this.Co(t)}gn(){var t;return this.Vo(),null==(t=this.Ic)||t.cf(this.Ds),this.Ic=void 0,Promise.resolve()}constructor(t){super(),this.Xa=void 0,this.Qo=t}},zP=class extends dt{get Fc(){return!1}get F7(){return[]}get G7(){return null}get V7(){return[]}get W7(){return[]}a4(t,i,e){this.ctt.push({ltt:t,dtt:i,ftt:e})}qm(){}utt(t){}q7(t,i){this._tt.push({aA:t,gtt:i})}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=TP(this)}att(t){const i=this._tt.slice(),e=this.ctt.slice();this.tr();for(const e of i)t.q7(e.aA,e.gtt);for(const i of e)t.a4(i.ltt,i.dtt,i.ftt)}wtt(){const t=this.ctt.map((t=>t.ltt));return this.tr(),t}tr(){No(this._tt),No(this.ctt)}gn(){return this.Vo(),this.tr(),Promise.resolve()}constructor(...t){super(...t),this.Xa=void 0,this._tt=[],this.ctt=[]}};function BP(t){return class extends dt{get M7(){return this.Att.M7}get Oc(){return this.Ic}get p7(){return this.Att.p7}get wd(){return this.Att.wd}get AO(){return this.Att.AO}get ya(){return this.Att.ya}get m7(){return this.Att.m7}get d7(){return this.Att.d7}get o7(){return this.Att.o7}get r7(){return this.Att.r7}get ST(){return this.Att.ST}set ST(t){this.Att.ST=t,this.mtt()}get a7(){return this.Att.a7}get ht(){return this.Att.ht}get AQ(){return this.Att.AQ}get Iu(){return this.Att.d7}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}get kf(){return this.Att.kf}get g_(){return this.Att.g_}set g_(t){this.Att.g_=t}get jf(){return this.Att.jf}get PU(){return this.Att.PU}get nt(){return this.Att.nt}get Ol(){return this.Att.Ol}get rt(){return this.Att.rt}get g7(){return this.Att.g7}get cH(){return this.Att.cH}get Af(){return this.Qo.Af}set Af(t){this.Qo.Af=t}get bt(){return this.Att.bt}get we(){return this.Att.we}get Sf(){return this.Att.Sf}get zf(){return this.Att.zf}set zf(t){this.Rf(t)}get Ff(){return this.Qo.Ff}get mi(){return this.ptt.zu||""}set mi(t){this.ptt.R7=t}get Gf(){return this.Att.Gf}set Gf(t){this.Qo.Gf=t}get Xf(){return this.Att.Xf}set Xf(t){this.Att.Xf=t}get Jf(){return this.Qo.Jf}get ba(){return this.Att.ba}set ba(t){this.Att.ba=t}get e_(){return this.Qo.e_}get b7(){return this.Att.b7}get Mg(){return this.Att.Mg}get r_(){return this.Att.r_}get a_(){return this.Att.a_}get c_(){return this.Att.c_}set c_(t){this.d_(t)}get f_(){return this.Att.f_}get v7(){return this.Att.v7}get Bo(){return this.Att.Bo}async NC(t,i){return this.Sq.NC(t,i).catch(Pd)}async ytt(t,i){fo(i),this.Att.sf(this.Mtt);try{await this.Att.ga(t,i)}finally{this.Att.cf(this.Mtt)}}async mtt(){const t=await this.Ttt();this.Ntt(t)}async Ttt(){const t=this.Wa();return t&&!SD(t)&&this.ST&&this.Ff?this.a7.Dtt(this.zf):"none"}Ntt(t){var i;const e=(null==(i=this.Wa())?void 0:i.mutedAutoplay)||this.wd.mutedAutoplay;switch(t){case"all":this.Stt();break;case"muted":(this.zf||e===Ew.ALL)&&(this.zf=!0,this.p_())}}ga(t){SD(this.Zz)||this.Co(new Da(0,Mw.uT)),this.tr(),this.Zz=t,ha(this.NC((async i=>{fo(i);try{await this.ytt(t,i)}catch(t){return yo(t),this.Zz=void 0,void this.bz(h_(t,Ui.SOURCE_NOT_SUPPORTED))}finally{this.Itt(this.Att)}const e=await this.Ttt();this.Co(new vP(this.Wa())),this.Ntt(e)})))}Nf(t,i){this.Qo.Nf(t,i)}Ef(){var t;return null!=(t=this.qB)?t:this.Att.Ef()}Lf(){var t;return null!=(t=this.BP)?t:this.Att.Lf()}bz(t){void 0===this.Lf()&&(this.BP=t,this.qB=tn(t),this.Co(new Eo(t)))}p_(){this.Qo.p_()}Stt(){this.zf||this.A_(),this.p_()}A_(){this.Att.A_()}m_(){this.Qo.m_()}y_(){this.ga(void 0)}ge(){this.tB=!0,this.Qo.ge()}be(){this.tB=!1,this.Qo.be()}ka(){this.Att.ka()}d_(t){this.Att.d_(t)}Rf(t){this.Att.Rf(t)}wa(t){this.Ett=t,t.eX(this)}cs(){return this.Att.cs()}Wa(){return this.Zz}v_(){return this.Att.v_()}Tf(){return this.Qo.Tf()}w7(){return this.Qo.w7()}Td(){return this.Att.Td()}vf(){return this.Att.vf()}qf(){return this.Att.qf()}i_(){return this.Att.i_()}D_(){this.Att.D_()}S_(){this.Att.S_()}tr(){this.Zz=void 0,this.BP=void 0,this.qB=void 0,this.btt=!0,No(this.Ltt),this.ktt.tr(),this.Itt(this.ktt),this.Sq.qd(),ha(this.Sq.NC((async t=>{fo(t),await this.Att.y_()})))}gn(){this.Co(new hP),this.ptt.gn(),this.Xz(),this.tr(),ha(this.NC((async()=>{await this.Att.gn(),this.Ett&&(this.Ett.bT(this),this.Ett=void 0),this.Sq.gn()}))),this.Vo()}Itt(t){if(this.Qo===t)return;const i=this.Qo.Ff,e=this.Qo.Tf(),s=this.Qo.Gf,n=this.Qo.Jf,r=this.Qo.e_;this.xtt=i,this.l5=n,this.Xz(),t.sf(this.Ctt),t===this.Att?(void 0!==this.Ic&&(this.Ic.fg=t.Oc,this.Ott.att(this.Ic)),(r||t.Tf()!==e)&&t.Nf(e),t.Gf!==s&&(t.Gf=s),i?t.m_():t.p_()):(void 0!==this.Ic&&(this.Ic.fg=this.Ott,this.Ott.tr()),this.wd.retainPlaybackRateOnSourceChange?t.Gf=s:1!==s&&this.Co(new Qe(this.Tf(),1))),t.cf(this.Ctt),this.Qo=t,this.qz();for(const t of this.Ltt)this.Co(t);No(this.Ltt),this.tB?t.ge():t.be()}qz(){this.Qo.sf(this.I_)}Xz(){this.Qo.cf(this.I_)}fa(){return function(t){let i,e;const s=i=>{e=i;const s=De(i,t.wd);t.ga(s)};let n={get abr(){return t.r7.va},get ads(){var i;return null==(i=t.Oc)?void 0:i.va},get audioTracks(){return t.ht.va},get autoplay(){return t.ST},set autoplay(i){t.ST=Boolean(i)},get buffered(){return t.vf()},get canvas(){return t.p7.va},get cast(){var i;return null==(i=t.AQ)?void 0:i.va},get clip(){return t.g7.va},get currentProgramDateTime(){var i;return null!=(i=t.Af)?i:null},set currentProgramDateTime(i){t.Af=null!=i?i:void 0},get currentTime(){return t.Tf()},set currentTime(i){t.Nf(Number(i))},get duration(){return t.Td()},get element(){return t.we},get ended(){return t.Sf},get error(){return t.Ef()},get errorObject(){return t.Lf()},get loop(){return t.cH.cH},set loop(i){t.cH.cH=Boolean(i)},get metrics(){return t.jf.va},get muted(){return t.zf},set muted(i){t.Rf(i)},get network(){return t.PU.va},get paused(){return t.Ff},get playbackRate(){return t.Gf},set playbackRate(i){const e=Number(i);if(e<0)throw new RangeError("playbackRate must be a positive number");t.Gf=e},get played(){return t.qf()},get poster(){return t.mi},set poster(i){t.mi=cs(i)},get preload(){return t.Xf},set preload(i){t.Xf=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(i)},get presentation(){return t.m7.va},get readyState(){return t.Jf},get seekable(){return t.i_()},get seeking(){return t.e_},get source(){return e},set source(t){s(t)},get src(){return LD(t.Wa())},set src(t){s({sources:t})},get textTracks(){return t.nt.va},get textTrackStyle(){return t.Ol.va},get theoLive(){return t.b7},get uid(){return t.Mg},get videoHeight(){return t.r_},get videoTracks(){return t.rt.va},get videoWidth(){return t.a_},get visibility(){return t.Bo.va},get volume(){return t.c_},set volume(i){t.d_(Number(i))},get latency(){return t.f_.va},destroy(){t.gn(),t=null,e=void 0},play(){t.Stt()},pause(){t.m_()},stop(){e=void 0,t.y_()},prepareWithUserAction(){t.A_()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)},setSource(t){s(t)}};return i=new Yu(n,!0),i.Qa(t),i.yn("destroy",(()=>{i.gn()})),n}(this)}constructor(i,e){super(),this.xtt=!0,this.l5=Mw.uT,this.btt=!1,this.Zz=void 0,this.BP=void 0,this.qB=void 0,this.Mtt=t=>{t.type!==Co.ww&&this.Ltt.push(t)},this.Ctt=t=>{(t.type!==Co.jh||this.Qo.Ff)&&(t.type===Co.Sh&&this.Qo.Ff||t.type===Co.yw&&this.Qo.e_&&this.Qo.Tf()===t.currentTime||t.type===Co.ww&&this.Qo.Gf===t.playbackRate||this.Co(t))},this.I_=t=>{if(this.btt){if(t.type===Zt.Bw)return;t.type!==Zt.Ow&&t.type!==Zt.Rw||(this.btt=!1)}if(t.type===Co.jh){if(!this.xtt)return;this.xtt=!1}else if(t.type===Co.Sh){if(this.xtt)return;this.xtt=!0}else if(t.type===Zt.H_){if(this.l5===t.readyState)return;this.l5=t.readyState}else if(t.type===Co.qg)return;this.Co(t)},this.Att=new t(i,e),this.ktt=new AP,this.Qo=this.Att,this.ptt=new MP(this),this.Att.Oc&&(this.Ic=new dc(this),this.Ic.fg=this.Att.Oc,this.Ott=new zP),this.Sq=new Kr,this.Ltt=[],this.tB=!0,this.qz()}}}var RP,UP=class extends wn{constructor(t){super("tizen2retry"),this.originalErrorEvent=t}};function QP(){if(!RP){let t=oP;t=function(t){return class extends cc{constructor(i,e){let s=new t(i,e);for(const t of aP)if(cP[t])for(const i of cP[t])s=i(s);super(s)}}}(t);let i=BP(t);f.LE&&f.xE<3&&(i=function(t){return class extends t{ga(t){this.jtt=0,super.ga(t)}Co(t){if(t.type===Nt.ha&&this.jtt<3)return this.jtt++,super.Co(new UP(t)),void super.ga(this.Wa());super.Co(t)}constructor(...t){super(...t),this.jtt=0}}}(i)),i=function(t){let i=t;for(const t of aP)if(uP[t])for(const e of uP[t])i=e(i);return i}(i),RP=i}return RP}function FP(t,i){const e=kw(i),s=new(QP())(t,e);s.ba=s;let n=s.va;return s.ka(),s.wa(wP),w.defineProperty(n,"constructor",{value:FP}),n=Kd(n),fP(s),n}wc((()=>{self.dispatchEvent&&self.dispatchEvent(gP("theoplayerready"))}));var YP={base64:new class{encode(t){return pt(t)}decode(t){return Bn(t)}}},GP=JSON.parse('["dash","hesp","hls","chromecast","ads","theoads","airplay","spotx","vr","vr-webxr","cache","webaudio","youbora","mediamelon","moat","google-dai","streamone","lcevc","freewheel","agama","verizonmedia","mediatailor","ui","relatedcontent","social","upnext","contextmenu","texttrackstyle-ui","activequalitylabel","upcomingadnotification"]');function VP(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}function WP(t,i){var e=function(t,i){var e=t.length;if(e<=1)return t;for(var s=new Array(e),n=1;n<e;n*=2){HP(t,i,n,s);var r=t;t=s,s=r}return t}(t,i);return e!==t&&HP(e,null,t.length,t),t}function HP(t,i,e,s){var n,r,h,o,a,u=t.length,c=0,l=2*e;for(n=0;n<u;n+=l)for(h=(r=n+e)+e,r>u&&(r=u),h>u&&(h=u),o=n,a=r;;)if(o<r&&a<h)i(t[o],t[a])<=0?s[c++]=t[o++]:s[c++]=t[a++];else if(o<r)s[c++]=t[o++];else{if(!(a<h))break;s[c++]=t[a++]}}var qP=/[a-zA-Z]/,XP=/[0-9]/,ZP=/[0-9a-fA-F]/,KP=/^0x/i,JP=/^[0-9]+$/,$P=/^[0-9a-fA-F]+$/,tz=/^[0-7]+$/,iz=w.prototype.toString,ez=Array.isArray||function(t){return"[object Array]"===iz.call(t)},sz="undefined"!=typeof Symbol&&"symbol"==typeof Symbol.iterator;function nz(t){return ez(t)?t:Array.from(t)}function rz(t,i,e){var s=t[i];t[i]=t[e],t[e]=s}function hz(t){return t>=65&&t<=90}function oz(t){return hz(t)||function(t){return t>=97&&t<=122}(t)}function az(t){return t>=48&&t<=57}function uz(t){return az(t)||oz(t)}function cz(t){return az(t)||t>=65&&t<=70||t>=97&&t<=102}function lz(t){return hz(t)?t+32:t}function dz(t){return az(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function fz(t,i){return void 0===i&&(i=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(i?87:55):-1}var _z=_.min,gz=String.fromCharCode,wz=16384;function vz(t){for(var i=t.length,e=[],s=0;s<i;s+=wz){var n=_z(s+wz,i);e.push(gz.apply(null,t.slice(s,n)))}return e.join("")}var Az=2147483647,mz=/[^\0-\x7E]/,pz=/[\x2E\u3002\uFF0E\uFF61]/g,yz={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Mz=_.floor,Tz=String.fromCharCode;function Nz(t){throw new RangeError(yz[t])}function Dz(t){for(var i=[],e=0,s=t.length;e<s;){var n=t.charCodeAt(e++);if(n>=55296&&n<=56319&&e<s){var r=t.charCodeAt(e++);56320==(64512&r)?i.push(((1023&n)<<10)+(1023&r)+65536):(i.push(n),e--)}else i.push(n)}return i}var Sz,Iz,Ez,bz=function(t,i){return t+22+75*(t<26)-((0!=i)<<5)},Lz=function(t,i,e){var s=0;for(t=e?Mz(t/700):t>>1,t+=Mz(t/i);t>455;s+=36)t=Mz(t/35);return Mz(s+36*t/(t+38))},kz=function(t){return function(t,i){var e=t.split("@"),s="";e.length>1&&(s=e[0]+"@",t=e[1]);var n=function(t,i){for(var e=[],s=t.length;s--;)e[s]=i(t[s]);return e}((t=t.replace(pz,".")).split("."),i).join(".");return s+n}(t,(function(t){return mz.test(t)?"xn--"+function(t){for(var i=[],e=(t=Dz(t)).length,s=128,n=0,r=72,h=0,o=t;h<o.length;h++){var a=o[h];a<128&&i.push(Tz(a))}var u=i.length,c=u;for(u&&i.push("-");c<e;){for(var l=Az,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var g=c+1;l-s>Mz((Az-n)/g)&&Nz("overflow"),n+=(l-s)*g,s=l;for(var w=0,v=t;w<v.length;w++){var A=v[w];if(A<s&&++n>Az&&Nz("overflow"),A==s){for(var m=n,p=36;;p+=36){var y=p<=r?1:p>=r+26?26:p-r;if(m<y)break;var M=m-y,T=36-y;i.push(Tz(bz(y+M%T,0))),m=Mz(M/T)}i.push(Tz(bz(m,0))),r=Lz(n,g,c==u),n=0,++c}}++n,++s}return i.join("")}(t):t}))};function rt(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];s>65535&&(s-=65536,i.push(s>>>10&1023|55296),s=56320|1023&s),i.push(s)}return vz(i)}function xz(t){if(t>=55296&&t<=57343)throw new g("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Cz(t,i){return t>>i&63|128}function Oz(t,i){0!=(4294967168&t)?(0==(4294965248&t)?i.push(t>>6&31|192):0==(4294901760&t)?(xz(t),i.push(t>>12&15|224),i.push(Cz(t,6))):0==(4292870144&t)&&(i.push(t>>18&7|240),i.push(Cz(t,12)),i.push(Cz(t,6))),i.push(63&t|128)):i.push(t)}function jz(t){for(var i=[],e=0;e<t.length;e++){Oz(t[e],i)}return i}function Pz(){if(Ez>=Iz)throw new g("Invalid byte index");var t=255&Sz[Ez];if(Ez++,128==(192&t))return 63&t;throw new g("Invalid continuation byte")}function zz(){var t,i;if(Ez>Iz)throw new g("Invalid byte index");if(Ez===Iz)return!1;if(t=255&Sz[Ez],Ez++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|Pz())>=128)return i;throw new g("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|Pz()<<6|Pz())>=2048)return xz(i),i;throw new g("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|Pz()<<12|Pz()<<6|Pz())>=65536&&i<=1114111)return i;throw new g("Invalid UTF-8 detected")}function Bz(t){return[37,fz(t>>4),fz(15&t)]}function Rz(t){return function(t){return t>=0&&t<=31}(t)||t>126}function Uz(t){return Rz(t)||32===t||34===t||60===t||62===t||96===t}function Qz(t){return Uz(t)||35===t||63===t||123===t||125===t}function Fz(t){return Qz(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function Yz(t){return t<33||t>126||34===t||35===t||60===t||62===t}function Gz(t){return Yz(t)||39===t}function Vz(t,i){if(!i(t))return[t];for(var e=jz([t]),s=[],n=0;n<e.length;n++){var r=e[n];s.push.apply(s,Bz(r))}return s}function Wz(t,i){for(var e=[],s=0,n=Dz(t);s<n.length;s++){var r=n[s];e.push.apply(e,Vz(r,i))}return rt(e)}function Hz(t){return function(t){for(var i=[],e=t.length,s=0;s<e;s++){var n=t[s];if(37===n&&s+2<e&&cz(t[s+1])&&cz(t[s+2])){var r=dz(t[s+1])<<4|dz(t[s+2]);i.push(r),s+=2}else i.push(n)}return i}(jz(t))}function qz(t){return rt(function(t){Sz=t.slice(),Iz=Sz.length,Ez=0;for(var i,e=[];!1!==(i=zz());)e.push(i);return e}(Hz(Dz(t))))}function Xz(t){var i=t.length,e=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<i&&":"===t[r]){if(!(r+1<i&&":"===t[r+1]))throw new b;r+=2,n=s+=1}for(;r<i;){if(8===s)throw new b("Too many groups");if(":"!==t[r]){for(var h=0,o=0;o<4&&r<i&&ZP.test(t[r]);)h=h<<4|x(t[r],16),r+=1,o+=1;if("."===t[r]){if(0===o)throw new b;if(r-=o,s>6)throw new b;for(var a=0;r<i;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new b;r+=1}if(!XP.test(t[r]))throw new b;for(;r<i&&XP.test(t[r]);){var c=x(t[r],10);if(null===u)u=c;else{if(0===u)throw new b;if((u=10*u+c)>255)throw new b}r+=1}e[s]=e[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new b;break}if(":"===t[r]){if((r+=1)===i)throw new b}else if(r<i)throw new b;e[s]=h,s+=1}else{if(null!==n)throw new b("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)rz(e,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new b;return e}function Zz(t){var i=10,e=JP;return KP.test(t)?(t=t.slice(2),i=16,e=$P):t.length>=2&&"0"===t[0]&&(t=t.slice(1),i=8,e=tz),""===t?0:e.test(t)?x(t,i):void 0}var $u={$0:4},Kz=/[\0\t\n\r #%/:?@\[\\\]]/,Jz=/[\0\t\n\r #/:?@\[\\\]]/;function $z(t,i){if("["===t[0]){if("]"!==t[t.length-1])throw new b("Invalid IPv6 address");return{$0:2,Ptt:Xz(t.slice(1,-1))}}if(!i)return function(t){if(Jz.test(t))throw new b("Invalid code point in opaque host");var i=Wz(t,Rz);return""===i?$u:{$0:3,JL:i}}(t);var e=function(t){var i=function(t){return kz(t.toLowerCase())}(t);return i}(qz(t));if(Kz.test(e))throw new b("Invalid code point in host");var s=function(t){var i=t.split(".");if(""===i[i.length-1]&&i.pop(),!(i.length>4)){for(var e=[],s=0;s<i.length;s++){var n=i[s];if(""===n)return;var r=Zz(n);if(void 0===r)return;e.push(r)}for(var h=0;h<e.length-1;h++)if(e[h]>255)throw new b;if(e[e.length-1]>=_.pow(256,5-e.length))throw new b;for(var o=e.pop(),a=0;a<e.length;a++)o+=e[a]*_.pow(256,3-a);return o}}(e);return void 0!==s?{$0:1,Ptt:s}:""===e?$u:{$0:0,ztt:e}}function tB(t){switch(t.$0){case 0:return t.ztt;case 1:return function(t){for(var i=[],e=t,s=1;s<=4;s++)i.push(""+(255&e)),4!==s&&i.push("."),e>>>=8;return i.reverse().join("")}(t.Ptt);case 2:return"["+function(t){for(var i="",e=function(t){for(var i=0,e=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>e&&(i=s,e=n),n=0);return n>e&&(i=s,e=n),e>1?i:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}e!==n?(i+=t[n].toString(16),7!==n&&(i+=":")):(i+=0===n?"::":":",s=!0)}return i}(t.Ptt)+"]";case 3:return t.JL;case 4:return""}}var iB=/\+/g;function eB(t){return 42===t||45===t||46===t||95===t||uz(t)}function sB(t){for(var i=t.split("&"),e=[],s=0;s<i.length;s++){var n=i[s];if(""!==n){var r=n.indexOf("="),h=void 0,o=void 0;-1!==r?(h=n.slice(0,r),o=n.slice(r+1)):(h=n,o=""),h=h.replace(iB," "),o=o.replace(iB," ");var a=qz(h),u=qz(o);e.push([a,u])}}return e}function nB(t){for(var i="",e=0;e<t.length;e++){var s=t[e];e>0&&(i+="&"),i+=rB(jz(Dz(s[0])))+"="+rB(jz(Dz(s[1])))}return i}function rB(t){for(var i=[],e=0;e<t.length;e++){var s=t[e];32===s?i.push(43):eB(s)?i.push(s):i.push.apply(i,Bz(s))}return vz(i)}var hB=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function oB(t){var i=""+t,e=hB.exec(i);return e?function(t,i){for(var e=t.length,s=[],n=i;n<e;n++){var r=t.charCodeAt(n);if(uB(r))if(cB(r)||n===e-1)s.push(aB);else{var h=t.charCodeAt(n+1);cB(h)?(s.push(r,h),n++):s.push(aB)}else s.push(r)}return t.slice(0,i)+vz(s)}(i,e.index):i}var aB=65533,uB=function(t){return 55296==(63488&t)},cB=function(t){return 0!=(1024&t)};function lB(t,i){var e=t[0],s=i[0];return e===s?0:e<s?-1:1}function dB(t){t.Btt.length=0}function fB(t,i){!function(t,i){for(var e=0;e<i.length;e++)t[e]=i[e];t.length=i.length}(t.Btt,sB(i))}function _B(t){if(t.Ju){var i=nB(t.Btt);""===i&&(i=null),t.Ju.Ju.Rtt=i}}var gB=function(){function t(t){if(void 0===t&&(t=void 0),this.Ju=null,null==t)this.Btt=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof gB&&!!ez(t.Btt)&&(!sz||t[Symbol.iterator]===wB)}(t))this.Btt=t.Btt.slice();else if(function(t){return null!=t&&(!!ez(t)||!!sz&&"function"==typeof t[Symbol.iterator])}(t)){this.Btt=[];for(var i=0,e=nz(t);i<e.length;i++){var s=nz(e[i]);if(2!==s.length)throw new b("Invalid name-value pair");this.Btt.push([oB(s[0]),oB(s[1])])}}else for(var n in this.Btt=[],t)w.prototype.hasOwnProperty.call(t,n)&&this.Btt.push([oB(n),oB(t[n])]);else(t=oB(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.Btt=sB(t)}var i=t.prototype;return i.append=function(t,i){t=oB(t),i=oB(i),this.Btt.push([t,i]),_B(this)},i.delete=function(t){t=oB(t);for(var i=this.Btt,e=0;e<i.length;){i[e][0]===t?i.splice(e,1):e++}_B(this)},i.get=function(t){t=oB(t);for(var i=this.Btt,e=0;e<i.length;e++){var s=i[e];if(s[0]===t)return s[1]}return null},i.getAll=function(t){t=oB(t);for(var i=this.Btt,e=[],s=0;s<i.length;s++){var n=i[s];n[0]===t&&e.push(n[1])}return e},i.has=function(t){t=oB(t);for(var i=this.Btt,e=0;e<i.length;e++){if(i[e][0]===t)return!0}return!1},i.set=function(t,i){t=oB(t),i=oB(i);for(var e=this.Btt,s=!1,n=0;n<e.length;){var r=e[n];r[0]===t?s?e.splice(n,1):(r[1]=i,s=!0,n++):n++}s||e.push([t,i]),_B(this)},i.sort=function(){WP(this.Btt,lB),_B(this)},i.toString=function(){return nB(this.Btt)},i.entries=function(){return new pB(this.Btt,vB)},i.keys=function(){return new pB(this.Btt,AB)},i.values=function(){return new pB(this.Btt,mB)},i.forEach=function(t){var i=this;this.Btt.forEach((function(e){return t(e[1],e[0],i)}))},t}(),wB=gB.prototype.entries;sz&&(gB.prototype[Symbol.iterator]=wB);var vB=function(t){return[t[0],t[1]]},AB=function(t){return t[0]},mB=function(t){return t[1]},pB=function(){function t(t,i){this.Utt=0,this.Btt=t,this.Qtt=i}return t.prototype.next=function(){return this.Utt<this.Btt.length?{done:!1,value:this.Qtt(this.Btt[this.Utt++])}:{done:!0,value:void 0}},t}(),yB="null";var MB=w.create(null);MB.ftp=21,MB.file=0,MB.gopher=70,MB.http=80,MB.https=443,MB.ws=80,MB.wss=443;var TB=/^(?:\.|%2e)$/i,NB=/^(?:\.|%2e){2}$/i;function DB(t){return TB.test(t)}function SB(t){return NB.test(t)}function IB(t){return void 0!==MB[t]}function Ah(t){return IB(t.Bj)}function EB(t){return""!==t.Ftt||""!==t.Ytt}function bB(t){var i=t.length;if(!(i>=2))return!1;if(!kB(t.slice(0,2)))return!1;if(2!==i){var e=t[2];if(47!==e&&92!==e&&63!==e&&35!==e)return!1}return!0}function LB(t){return 2===t.length&&qP.test(t[0])&&(":"===t[1]||"|"===t[1])}function kB(t){return 2===t.length&&LB(vz(t))}function xB(t){return LB(t)&&":"===t[1]}function CB(t){var i=t.Gtt;0!==i.length&&("file"===t.Bj&&1===i.length&&xB(i[0])||i.pop())}function OB(t){return null===t.Vtt||$u===t.Vtt||t.Wtt||"file"===t.Bj}var J=-1,jB=/\t|\n|\r/g,PB=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function zB(t,i,e,s){void 0===e&&(e=null),void 0===s&&(s=null),e||(e=new RB,t=t.replace(PB,""));var n=null!==s?s:0;i=i||null;for(var r=[],h=!1,o=!1,a=!1,u=Dz(t=t.replace(jB,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:J;switch(n){case 0:if(!oz(d)){if(null===s){r.length=0,n=2;continue}throw new b("Invalid scheme")}r.push(lz(d)),n=1;break;case 1:if(uz(d)||43===d||45===d||46===d)r.push(lz(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new b("Invalid scheme")}var f=rt(r);if(null!==s){if(IB(e.Bj)&&!IB(f))return;if(!IB(e.Bj)&&IB(f))return;if((EB(e)||null!==e.q8)&&"file"===f)return;if("file"===e.Bj&&(e.Vtt===$u||null===e.Vtt))return}if(e.Bj=f,null!==s)return void(Ah(e)&&e.q8===MB[e.Bj]&&(e.q8=null));r.length=0,"file"===e.Bj?n=13:Ah(e)&&i&&i.Bj===e.Bj?n=3:Ah(e)?n=7:47===u[l+1]?(n=4,l+=1):(e.Wtt=!0,e.Gtt.push(""),n=18)}break;case 2:if(!i||i.Wtt&&35!==d)throw new b("Invalid scheme");i.Wtt&&35===d?(e.Bj=i.Bj,e.Gtt=i.Gtt.slice(),e.Rtt=i.Rtt,e.Htt="",e.Wtt=!0,n=20):"file"!==i.Bj?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:e.Bj=i.Bj,J===d?(e.Ftt=i.Ftt,e.Ytt=i.Ytt,e.Vtt=i.Vtt,e.q8=i.q8,e.Gtt=i.Gtt.slice(),e.Rtt=i.Rtt):47===d?n=6:63===d?(e.Ftt=i.Ftt,e.Ytt=i.Ytt,e.Vtt=i.Vtt,e.q8=i.q8,e.Gtt=i.Gtt.slice(),e.Rtt="",n=19):35===d?(e.Ftt=i.Ftt,e.Ytt=i.Ytt,e.Vtt=i.Vtt,e.q8=i.q8,e.Gtt=i.Gtt.slice(),e.Rtt=i.Rtt,e.Htt="",n=20):92===d&&Ah(e)?n=6:(e.Ftt=i.Ftt,e.Ytt=i.Ytt,e.Vtt=i.Vtt,e.q8=i.q8,e.Gtt=i.Gtt.slice(),e.Gtt.pop(),n=17,l-=1);break;case 6:!Ah(e)||47!==d&&92!==d?47===d?n=9:(e.Ftt=i.Ftt,e.Ytt=i.Ytt,e.Vtt=i.Vtt,e.q8=i.q8,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){h&&r.unshift(37,52,48),h=!0;for(var _=0;_<r.length;_++){var g=r[_];if(58!==g||a){var w=rt(Vz(g,Fz));a?e.Ytt+=w:e.Ftt+=w}else a=!0}r.length=0}else if(J===d||47===d||63===d||35===d||Ah(e)&&92===d){if(h&&0===r.length)throw new b("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===e.Bj)l-=1,n=15;else if(58!==d||o)if(J===d||47===d||63===d||35===d||Ah(e)&&92===d){if(l-=1,Ah(e)&&0===r.length)throw new b("Invalid host");if(null!==s&&0===r.length&&(EB(e)||null!==e.q8))return;var v=$z(rt(r),Ah(e));if(e.Vtt=v,r.length=0,n=16,null!==s)return}else 91===d?o=!0:93===d&&(o=!1),r.push(d);else{if(0===r.length)throw new b("Invalid host");var A=$z(rt(r),Ah(e));if(e.Vtt=A,r.length=0,n=12,11===s)return}break;case 12:if(az(d))r.push(d);else{if(!(J===d||47===d||63===d||35===d||Ah(e)&&92===d||null!==s))throw new b("Invalid port");if(0!==r.length){var m=x(rt(r),10);if(m>65535)throw new b("Invalid port");e.q8=m===MB[e.Bj]?null:m,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:e.Bj="file",47===d||92===d?n=14:i&&"file"===i.Bj?J===d?(e.Vtt=i.Vtt,e.Gtt=i.Gtt.slice(),e.Rtt=i.Rtt):63===d?(e.Vtt=i.Vtt,e.Gtt=i.Gtt.slice(),e.Rtt="",n=19):35===d?(e.Vtt=i.Vtt,e.Gtt=i.Gtt.slice(),e.Rtt=i.Rtt,e.Htt="",n=20):(bB(u.slice(l))||(e.Vtt=i.Vtt,e.Gtt=i.Gtt.slice(),CB(e)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(i&&"file"===i.Bj&&!bB(u.slice(l))&&(xB(i.Gtt[0])?e.Gtt.push(i.Gtt[0]):e.Vtt=i.Vtt),n=17,l-=1);break;case 15:if(J===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&kB(r))n=17;else if(0===r.length){if(e.Vtt=$u,null!==s)return;n=16}else{var p=$z(rt(r),Ah(e));if(0===p.$0&&"localhost"===p.ztt&&(p=$u),e.Vtt=p,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:Ah(e)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(e.Rtt="",n=19):null===s&&35===d?(e.Htt="",n=20):J!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(J===d||47===d||Ah(e)&&92===d||null===s&&(63===d||35===d)){var y=rt(r);if(SB(y)?(CB(e),47===d||Ah(e)&&92===d||e.Gtt.push("")):!DB(y)||47===d||Ah(e)&&92===d?DB(y)||("file"===e.Bj&&0===e.Gtt.length&&kB(r)&&($u!==e.Vtt&&null!==e.Vtt&&(e.Vtt=$u),r[1]=58,y=rt(r)),e.Gtt.push(y)):e.Gtt.push(""),r.length=0,"file"===e.Bj&&(J===d||63===d||35===d))for(;e.Gtt.length>1&&""===e.Gtt[0];)e.Gtt.shift();63===d?(e.Rtt="",n=19):35===d&&(e.Htt="",n=20)}else r.push.apply(r,Vz(d,Qz));break;case 18:63===d?(e.Rtt="",n=19):35===d?(e.Htt="",n=20):J!==d&&(e.Gtt[0]+=rt(Vz(d,Rz)));break;case 19:null===s&&35===d?(e.Htt="",n=20):J!==d&&(e.Rtt+=rt(Vz(d,Ah(e)?Gz:Yz)));break;case 20:J===d||0===d||(e.Htt+=rt(Vz(d,Uz)))}l++}return e}function BB(t,i,e,s){try{zB(t,i,e,s)}catch(t){}}var RB=function(){this.Bj="",this.Ftt="",this.Ytt="",this.Vtt=null,this.q8=null,this.Gtt=[],this.Rtt=null,this.Htt=null,this.Wtt=!1};function UB(t){switch(t.Bj){case"blob":var i;try{i=zB(t.Gtt[0],null)}catch(t){return yB}return UB(i);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,i,e){return t+"://"+tB(i)+(null===e?"":":"+e)}(t.Bj,t.Vtt,t.q8);default:return yB}}var QB=function(){function t(t,i){var e,s=null;if(null!=i)if(function(t){return null!=t&&t instanceof QB&&"object"==typeof t.Ju}(i))s=i.Ju;else try{s=zB(String(i),null)}catch(t){throw new b("Invalid base URL: "+t.message)}try{e=zB(String(t),s)}catch(t){throw new b("Invalid URL: "+t.message)}var n=e.Rtt;this.Ju=e,this.Rtt=function(t){var i=new gB;return null!==t&&fB(i,t),i}(n),this.Rtt.Ju=this}var i=t.prototype;return i.toString=function(){return this.href},i.toJSON=function(){return this.href},function(t,i,e){i&&VP(t.prototype,i),e&&VP(t,e)}(t,[{key:"href",get:function(){return function(t,i){void 0===i&&(i=!1);var e=t.Bj+":";if(null!==t.Vtt?(e+="//",EB(t)&&(e+=t.Ftt,""!==t.Ytt&&(e+=":"+t.Ytt),e+="@"),e+=tB(t.Vtt),null!==t.q8&&(e+=":"+t.q8)):null===t.Vtt&&"file"===t.Bj&&(e+="//"),t.Wtt)e+=t.Gtt[0];else for(var s=0,n=t.Gtt;s<n.length;s++)e+="/"+n[s];return null!==t.Rtt&&(e+="?"+t.Rtt),i||null===t.Htt||(e+="#"+t.Htt),e}(this.Ju)},set:function(t){var i;try{i=zB(String(t),null)}catch(t){throw new b("Invalid URL: "+t.message)}this.Ju=i,dB(this.Rtt);var e=this.Ju.Rtt;null!==e&&fB(this.Rtt,e)}},{key:"origin",get:function(){return UB(this.Ju)}},{key:"protocol",get:function(){return this.Ju.Bj+":"},set:function(t){BB(t+":",null,this.Ju,0)}},{key:"username",get:function(){return this.Ju.Ftt},set:function(t){OB(this.Ju)||(this.Ju.Ftt=Wz(t,Fz))}},{key:"password",get:function(){return this.Ju.Ytt},set:function(t){OB(this.Ju)||(this.Ju.Ytt=Wz(t,Fz))}},{key:"host",get:function(){var t=this.Ju,i=t.Vtt;if(null===i)return"";var e=t.q8,s=tB(i);return null!==e&&(s+=":"+e),s},set:function(t){this.Ju.Wtt||BB(t,null,this.Ju,10)}},{key:"hostname",get:function(){var t=this.Ju.Vtt;return null===t?"":tB(t)},set:function(t){this.Ju.Wtt||BB(t,null,this.Ju,11)}},{key:"port",get:function(){var t=this.Ju.q8;return null===t?"":""+t},set:function(t){OB(this.Ju)||(""===t?this.Ju.q8=null:BB(t,null,this.Ju,12))}},{key:"pathname",get:function(){var t=this.Ju.Gtt;return this.Ju.Wtt?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.Ju.Wtt||(this.Ju.Gtt.length=0,BB(t,null,this.Ju,16))}},{key:"search",get:function(){var t=this.Ju.Rtt;return null===t||""===t?"":"?"+t},set:function(t){t=oB(t);var i=this.Ju;if(""===t)return i.Rtt=null,void dB(this.Rtt);"?"===t[0]&&(t=t.slice(1)),i.Rtt="",BB(t,null,i,19),fB(this.Rtt,t)}},{key:"searchParams",get:function(){return this.Rtt}},{key:"hash",get:function(){var t=this.Ju.Htt;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.Ju.Htt="",BB(t,null,this.Ju,20)):this.Ju.Htt=null}}]),t}();function FB(t){return t.document&&t.document.baseURI||t.location.href||""}function YB(){let t=Ha,i=t.location.href;for(;t!==s.top;){t=t.parent;try{i=t.location.href}catch(t){}}return i}var GB=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!Dl||!Dl.msMaxTouchPoints),VB=Gh(),WB=!(!VB||!VB.webkitShowPlaybackTargetPicker),HB=class{get qtt(){return void 0===this.Xtt&&(this.Xtt=this.Ztt()),this.Xtt}Ztt(){return 0}get Ktt(){return!f.fb}get Jtt(){if(s.screen)return{width:s.screen.width,height:s.screen.height}}get T2(){return s.devicePixelRatio||1}get $tt(){return WB}get s2(){return!1}get X4(){return!0}get Dv(){return f.ZE||f.Ga}get tit(){return!f.Ga}get $O(){return!0}get bv(){return!0}get Ev(){return!1}get iit(){}get eit(){return!0}get t$(){return!1}get sit(){return f.PE}nit(t,i){return!0}rit(t){return t>=2*fl}constructor(){this.Xtt=void 0,this.hit=!1,this.Je=GB,this.Qs=!1,this.R9=!0}},qB=function(){const t=xM();if(!t)return!1;const i=t.muted;return t.muted=!i,t.muted!==i}(),XB=function(){if(f.hE)return!1;const t=xM();if(!t)return!1;const i=t.volume;return t.volume=i/2+.1,i!==t.volume}();var zi=class extends HB{Ztt(){return this.oit?this.oit.qtt:super.Ztt()}get iit(){var t;return null==(t=this.oit)?void 0:t.iit}get eit(){var t,i;return null==(i=null==(t=this.oit)?void 0:t.eit)||i}nit(t,i){return this.oit?this.oit.nit(t,i):super.nit(t,i)}rit(t){return this.oit?this.oit.rit(t):super.rit(t)}constructor(t){super(),this.oit=t,this.oit&&(this.hit=this.oit.hit,this.Je=this.oit.Je,this.R9=qB&&this.oit.R9)}},ZB=class extends zi{get Ev(){return f.Ga}constructor(t){super(t),this.hit=!0,this.Qs=!0}},KB=class extends ZB{get Ev(){return!0}Ztt(){return as(!0)?super.Ztt():1}},JB=class extends zi{get s2(){return f.xE<3}get X4(){return f.xE>=3}get Jtt(){return s.tizen&&!this.ait&&s.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const i=t.resolutionWidth,e=t.resolutionHeight;1===i&&1===e||(this.ait={width:i,height:e})})),this.ait}get t$(){return f.xE<3}nit(t,i){return super.nit(t,i)}},Ee=class extends HB{constructor(){super()}},$B=class extends Ee{get iit(){if(f.GI)return 4096}nit(t,i){if(t&&t.uit&&i&&i.uit){let e=rn(t.uit,"mp4a.40.2")&&rn(i.uit,"mp4a.40.5"),s=rn(t.uit,"mp4a.40.5")&&rn(i.uit,"mp4a.40.2"),n=rn(t.uit,"mp4a.40.2")&&rn(i.uit,"mp4a.40.34"),r=rn(t.uit,"mp4a.40.34")&&rn(i.uit,"mp4a.40.2"),h=rn(t.uit,"mp4a.40.5")&&rn(i.uit,"mp4a.40.34"),o=rn(t.uit,"mp4a.40.34")&&rn(i.uit,"mp4a.40.5");return!(e||s||n||r||h||o)}return!0}};function rn(t,i){return t.indexOf(i)>-1}var tR=class extends Ee{rit(t){return t>=2}},iR=class extends Ee{constructor(){super(),this.hit=f.JE>=11,this.R9=f.ZE&&!(f.Ga&&f.JE<10)}},eR=class extends zi{get Jtt(){return s.webOS&&!this.ait&&s.webOS.deviceInfo((t=>{this.ait={width:t.screenWidth,height:t.screenHeight}})),this.ait}get $O(){return!1}},sR=class extends Ee{get eit(){return!f.WI||(f.DE?92!==f.EE:f.ME>=100)}},nR=class extends zi{get Ev(){return!0}},rR=class{cit(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];YD(...i)}Qv(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];$(...i)}dit(){for(var t=arguments.length,i=new Array(t),e=0;e<t;e++)i[e]=arguments[e];Ma(...i)}fit(t){for(var i=arguments.length,e=new Array(i>1?i-1:0),s=1;s<i;s++)e[s-1]=arguments[s];GD(t,...e)}$d(t,i){return u(t,i)}z$(t,i){return v(t,i)}Jd(t){c(t)}R$(t){m(t)}$x(){return this._it.$x()}Wx(){return this._it.Wx()}qx(){return this._it.qx()}Hx(){return this._it.Hx()}Gx(){return this._it.Gx()}Zx(t,i){return this._it.Zx(t,i)}Vx(t){return this._it.Vx(t)}get WO(){return this.git}Dh(t,i){let e;return void 0===i&&(i=FB(Ha)),e="object"!=typeof i||i instanceof QB?i:i.href,new QB(t,e)}Uv(t,i){if(void 0===i&&(i=FB(Ha)),this.wit){const e=Qs(i)?i:i.toString();return new self.URL(t,e).href}return this.Dh(t,i).href}get Ys(){return this.vit}get Iv(){return{Lv:Dl&&Dl.userAgent.match(/Android /i)?"Android":"other",Sv:Boolean(Dl&&Dl.userAgent.match(/Android 8.0.0/i))}}get RV(){return self&&self.location&&"https:"===self.location.protocol}get Ait(){return"languages"in Dl?Dl.languages.slice():[Dl.language]}constructor(){this.git=new hR,this.vit=function(){const t=function(){if(f.WE)return new $B;if(f.BE||f.UE)return new tR;if(f.ZE)return new iR;if(f.pE)return new sR;return new Ee}();return f.Ga?new KB(t):f.Qs?new ZB(t):f.LE?new JB(t):f.OE?new eR(t):f.GI?new nR(t):new zi(t)}(),this.wit=oR(),self.performance&&self.performance.now?this.Kd=()=>self.performance.now():this.Kd=_r}},hR=class{get HO(){return Dl.oscpu}get Ys(){return Dl.platform}get qO(){return Dl.vendor}get XO(){return Dl.vendorSub}};function oR(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}var co=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(i,e)=>new t(i,e)}(t)}catch(t){}const i=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(i)return function(t){return(i,e)=>{const s=new t;if(i)for(const t of i)s.append(t);return s.getBlob(e&&e.type||"")}}(i)})();function aR(t,i,e){const s=co([i],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,i){let e=t;const s=e.indexOf("?");if(s>=0&&(e=e.substr(0,s)),e=e.substr(e.lastIndexOf("/")+1),i){let t=e.indexOf(".");t<0&&(t=e.length),e=e.substr(0,t)+i+e.substr(t)}return e}(t,e),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}var mo=class extends W{get name(){return gr.IS}constructor(t,i){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.zu),i)}},uR=self.fetch,cR=self.Request,lR=self.Response,dR=self.Headers,fR=self.ReadableStream,_R=self.AbortSignal,gR=self.AbortController,wR=Oa((()=>{try{return sd(uR)&&kn(cR)&&kn(lR)&&kn(dR)&&"forEach"in dR.prototype&&oR()}catch(t){return!1}})),vR=["http:","https:"];var AR=Oa((()=>{try{return wR()&&kn(_R)&&kn(gR)&&"signal"in cR.prototype}catch(t){return!1}})),mR=Oa((()=>{try{return wR()&&kn(fR)&&"body"in lR.prototype&&!f.fE}catch(t){return!1}}));function pR(t,i){const e=t._I.has("content-length")?Number(t._I.get("content-length")):void 0;let s;return s=t.yV?function(t,i,e){return t.pipeThrough(new _i(new yR(i,e)))}(t.vV(),i,e):async function(t,i,e){await Promise.resolve(),i(0,e);const s=await t,n=s.byteLength;return i(n,null!=e?e:n),s}(t.gj(),i,e),new fa({zm:s,LS:t.LS},t)}var yR=class{transform(t,i){this.mit+=t.byteLength,this.pit(this.mit,this.yit),i.enqueue(t)}flush(t){var i;this.pit(this.mit,null!=(i=this.yit)?i:this.mit)}constructor(t,i){this.pit=t,this.yit=i,this.mit=0}};var MR=class{async Mit(){const t=this.kS;let e,s;t.jS&&u((()=>{this.Tit=!0,this.DC.qd()}),t.jS);try{e=uR(t.zu,{method:t.gI,headers:t._I.XS(),body:t.fI,credentials:t.pI?"include":"same-origin",signal:DR(this.DC.Wd),mode:t.jg,keepalive:t.TI})}catch(i){throw new mo(t,i)}try{s=await e}catch(t){const i=this.Nit(t);throw ut(i)&&this.DC.qd(),i}const n=s.url||t.zu,r=0===s.status&&"file:"===function(t){return i.Dh(t).protocol}(n)?200:s.status,h=new TR(this,s,this.DC);let o=new fa({zm:h,LS:t,wI:t.wI,_I:SR(s.headers),OS:r,KO:s.statusText,LI:n});if(!Jr(o))throw new bt(o);return t.yI&&(o=pR(o,t.yI)),o}Nit(t){return tl(t)?t:ut(t)?this.Tit?new kh(this.kS):new Sn(t.message,t):this.CS?new bt(this.CS,t):new mo(this.kS,t)}constructor(t){this.DC=new Wr,this.CS=void 0,this.Tit=!1,this.kS=t,this.DC.Xd(t.Wd),this.xS=this.Mit()}},TR=class t extends Gb{get mV(){return this.Dit.bodyUsed}get yV(){return Po(this.Dit.body)}TV(){return this.NV.tL}bI(t){return this.DV(this.Dit.text(),t)}gj(t){return this.DV(this.Dit.arrayBuffer(),t)}vV(){const t=this.Dit.body;return t?this.SV(t):Bb(this.gj().then(Pb),this.DC)}bV(){const i=this.Dit.clone(),[e,s]=this.DC.Zd();return this.DC=e,new t(this.Sit,i,s)}DV(t,i){i&&this.DC.Xd(i);let e=Ys(Promise.resolve(t),this.DC.Wd).catch((t=>{throw this.Sit.Nit(t)}));return e=Ir(e,this.DC),this.NV.Xd(e.then(na)),e}SV(t){return new et(new ER(t,(t=>this.Sit.Nit(t)),this.DC,this.NV),{highWaterMark:0})}constructor(t,i,e){super(),this.NV=new ue,this.Sit=t,this.Dit=i,this.DC=e,this.NV.tL.catch(na)}},NR="abort";function DR(t){if(!AR())return;const i=new gR;if(t.zd)i.abort();else if(!t.Bd){const e=()=>{s(),i.abort()},s=()=>{i.signal.removeEventListener(NR,e),t.Yd(e),t.Vd(s)};i.signal.addEventListener(NR,e),t.Fd(e),t.Gd(s)}return i.signal}function SR(t){if(function(t){return Ut(t)&&"function"==typeof t.forEach}(t)){const i=new Z;return t.forEach(((t,e)=>{Array.isArray(t)&&2===t.length?i.append(t[0],t[1]):i.append(e,t)})),i}return new Z(t)}var IR,ER=class{start(t){this._G=this.Iit.getReader()}async pull(t){let i;try{i=await Ys(this._G.read(),this.DC.Wd)}catch(i){const e=this.Eit(i);return this.NV.Jb(e),this.DC.qd(),this._G.cancel(e).catch(na),void t.error(e)}i.done?(this.NV.Zb(),this.DC.qd(),t.close()):t.enqueue(i.value)}cancel(t){return this.DC.qd(),this.NV.Jb(t),this._G.cancel(t)}constructor(t,i,e,s){this.Iit=t,this.Eit=i,this.DC=e,this.NV=s}};!function(t){t[t.UNSENT=0]="UNSENT",t[t.OPENED=1]="OPENED",t[t.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",t[t.LOADING=3]="LOADING",t[t.DONE=4]="DONE"}(IR||(IR={}));var bR=class{get xS(){return this.Lit.tL}Mit(){const t=this.kit,i=this.kS;if(i.Wd.zd)return this.xit();t.onreadystatechange=()=>this.Cit(),t.onprogress=t=>this.pit(t),t.onload=()=>this.Oit(),t.onloadend=()=>this.jit(),t.onerror=()=>this.tX(),t.ontimeout=()=>this.Pit(),t.onabort=()=>this.xit(),t.open(i.gI,i.zu,!0),t.withCredentials=Boolean(i.pI),"responseType"in t&&i.wI&&(i.wI===oe.Ru?t.responseType="text":t.responseType="arraybuffer"),i._I.forEach(((i,e)=>{t.setRequestHeader(e,i)})),i.jS&&(t.timeout=i.jS),this.DC.Wd.Fd(this.zit);const e=i.fI;e?t.send(e):t.send()}Cit(){const t=this.kit;void 0!==t&&t.readyState>=2&&!this.Bit&&(this.Bit=!0,this.Rit())}Rit(){var t;const i=this.kit,e=function(t){const i=new Z,e=t.replace(/\r?\n[\t ]+/g," ");return e.split(/\r?\n/).forEach((t=>{const e=t.split(":"),s=e.shift().trim();if(s){const t=e.join(":").trim();i.append(s,t)}})),i}(i.getAllResponseHeaders()||""),s=this.kS;var n;this.Uit=new ue,this.CS=new fa({LS:s,wI:s.wI,zm:this.Uit.tL,OS:i.status,KO:i.statusText,_I:e,LI:null!=(n=i.responseURL)?n:e.get("X-Request-URL")}),null==(t=this.Lit)||t.Zb(this.CS)}Oit(){var t;const i=this.kit;if(void 0===i)return;let e=i.response;if(!Po(e)){const t=this.kS.wI;e=t===oe.Ru?i.responseText:t===oe.WS?new ArrayBuffer(0):{}}null==(t=this.Uit)||t.Zb(e)}jit(){this.gn()}pit(t){void 0!==this.kit&&(null==this.kS.yI||this.kS.yI.call(this.kS,t.loaded,t.lengthComputable?t.total:void 0))}tX(){const t=new g("Network request failed");this.CS?this.Ss(new bt(this.CS,t)):this.Ss(new mo(this.kS,t))}Pit(){this.Ss(new kh(this.kS))}xit(){this.Ss(new Sn),this.gn()}Ss(t){var i,e;null==(i=null!=(e=this.Uit)?e:this.Lit)||i.Jb(t)}gn(){this.kit=void 0,this.CS=void 0,this.Lit=void 0,this.Uit=void 0,this.DC.Ud()}constructor(t){this.DC=new Wr,this.CS=void 0,this.Lit=new ue,this.Bit=!1,this.zit=()=>{var t;this.xit(),null==(t=this.kit)||t.abort()},this.kS=t,this.DC.Xd(t.Wd),this.kit=new El,this.Mit()}};var LR=class{LS(t){return function(t){if(!wR()||!function(t){try{return vR.indexOf(new self.URL(t,self.location.href).protocol)>=0}catch(t){return!1}}(t.zu))return!1;if(!mR()&&t.yI)return!1;if(!t.MI){if(f.OE&&f.ME<=68)return!1;if(f.LE)return!1}return!0}(t)?new MR(t).xS:new bR(t).xS}eY(t){if(fm&&fm.sendBeacon)fm.sendBeacon(t.zu,co([t.fI],{type:t.HP}));else{const i=t.HP?{"Content-type":t.HP}:void 0;this.LS(new ss({gI:yt.POST,zu:t.zu,fI:t.fI,_I:i,jg:kt.Fv})).then((t=>{ha(t.gj())}),na)}}gn(){}};var kR=class extends Jo{constructor(t){super("Invalid XML",t)}},xR=class{AS(t){const i=new DOMParser;let e;try{e=i.parseFromString(t,"text/xml")}catch(t){throw new kR(t)}if(!e||e.getElementsByTagName("parsererror").length>0)throw new kR;return new RR(e)}},CR=class t{get iS(){return q.sS}get vS(){var t;return null!=(t=this.Qit.localName)?t:FR(this.Qit.nodeName)}get l(){return this.Qit.nodeName}get Fit(){var t;return null!=(t=this.Qit.namespaceURI)?t:void 0}get Yit(){var t;return null!=(t=this.Qit.prefix)?t:void 0}get PM(){return this.Qit.nodeValue}tS(t){return this.Qit.isEqualNode(t.Qit)}oS(i){return new t(this.Qit.cloneNode(i))}constructor(t){this.Qit=t}},OR=class{get MS(){return void 0===this.Git&&(this.Git=function(t){const i=[];for(let e=0;e<t.length;e++){const s=QR(t.item(e));s&&i.push(s)}return i}(this.Vit.childNodes)),this.Git}get m(){return this.MS.filter(UR)}gS(t){return this.MS.filter((i=>UR(i)&&i.wj===t))}_S(t,i){return this.MS.filter((e=>UR(e)&&e.vS===i&&e.Fit===t))}get WD(){return this.Vit}TS(t){this.Vit.appendChild(t.WD),this.Git&&this.Git.push(t)}tS(t){return this.Vit.isEqualNode(t.WD)}constructor(t){this.Git=void 0,this.Vit=t}},jR=class t extends OR{get iS(){return q.eS}get vS(){var t;return null!=(t=this.Vit.localName)?t:FR(this.Vit.nodeName)}get Fit(){var t;return null!=(t=this.Vit.namespaceURI)?t:void 0}get Yit(){var t;return null!=(t=this.Vit.prefix)?t:void 0}get wj(){return this.Vit.nodeName}get wS(){return function(t){const i=[];for(let e=0;e<t.length;e++)i.push(new CR(t.item(e)));return i}(this.Vit.attributes)}get aj(){return this.Vit.textContent}pS(t){if(this.Vit.hasAttribute(t))return this.Vit.getAttribute(t)}yS(t,i){if(this.Vit.hasAttributeNS(t,i))return this.Vit.getAttributeNS(t,i)}lS(t){this.Vit.removeAttribute(t)}Wit(t,i){this.Vit.removeAttributeNS(t,i)}Hit(t,i){this.Vit.setAttribute(t,i)}qit(t,i,e){this.Vit.setAttributeNS(t,i,e)}oS(i){return new t(this.Vit.cloneNode(i))}constructor(t){super(t)}},PR=class{get zm(){return this.Vit.nodeValue}get WD(){return this.Vit}tS(t){return this.zm===t.zm}constructor(t){this.Vit=t}},zR=class t extends PR{get iS(){return q.Ru}oS(i){return new t(this.Vit.cloneNode(i))}constructor(t){super(t)}},BR=class t extends PR{get iS(){return q.nS}oS(i){return new t(this.Vit.cloneNode(i))}constructor(t){super(t)}},RR=class t extends OR{get iS(){return q.rS}get mS(){return new jR(this.Vit.documentElement)}oS(i){return new t(this.Vit.cloneNode(i))}constructor(t){super(t)}};function UR(t){return ar(t)}function QR(t){switch(t.nodeType){case q.eS:return new jR(t);case q.Ru:return new zR(t);case q.nS:return new BR(t)}}function FR(t){const i=t.indexOf(":");return i<0?t:t.substr(i+1)}!function(t){i=t}(new class extends rR{get _it(){return this.Xit||(this.Xit=new Fy(PM())),this.Xit}get Zit(){return this.Kit}get L$(){return this.Jit}get H$(){return this.$it}get tet(){return!1}get Jj(){return _D.lQ()}get iet(){return{eet:aR}}get net(){return Dl.connection&&Dl.connection.effectiveType||dN}get ret(){return Dl.connection&&Dl.connection.type||"unknown"}get AO(){return this.het||(this.het=new Ta(new LR)),this.het}AS(t){return this.oet.AS(t)}constructor(...t){super(...t),this.Xit=void 0,this.Kit=mR(),this.Jit=f.gb||f.fE,this.$it=(f.gb||f.OE&&f.ME<=68||f.fE)&&!(f.LE&&f.xE<3),this.het=void 0,this.oet=new xR}});var YR=class{get Mf(){const t=this.Qo.currentTime;return isFinite(t)?t:"now"}get aet(){return this.Qo.src||""}tr(){}constructor(t,i){this.uet=!1,this.cet=!1,this.let=t=>{this.det.VF(t.error,this.Mf)},this.fet=()=>{this.det.QF(this.aet),this.Qo.removeEventListener("playing",this.fet),this.uet=!1},this.js=()=>{var t,i;this.uet||(this.Qo.addEventListener("playing",this.fet),this.uet=!0);var e;if((null==(i=this.Qo.source)||null==(t=i.ads)?void 0:t.some((t=>"theoads"===t.integration)))&&!this.cet)this.cet=!0,null==(e=this.Qo.ads)||e.addEventListener("adbreakbegin",this._et);else if(this.cet){var s;this.cet=!1,null==(s=this.Qo.ads)||s.removeEventListener("adbreakbegin",this._et)}},this._et=t=>{"theoads"===t.adBreak.integration&&this.det.GF()},this.det=i,this.Qo=t,this.Qo.addEventListener("error",this.let),this.Qo.addEventListener("sourcechange",this.js),this.js()}};!function(t){dP.push(t)}((function(t){new YR(t.va,t.M7)}));var GR="theoplayer-stored-volume",VR="theoplayer-stored-mutedstate";Vr((function(t){return class extends t{Rf(t){this.wd.persistVolume&&it.iP(VR,""+Boolean(t)),super.Rf(t)}d_(t){this.wd.persistVolume&&it.iP(GR,""+Number(t)),super.d_(t)}constructor(t,i){if(super(t,i),i.persistVolume){let t=it.kH(GR);(void 0===t||S(t))&&(t=1);const i=it.xH(VR)||!1;this.c_=t,this.zf=i}}}}),Zo.Za);var WR="8.2.0",HR="2024.3.8",qR=wP.va,XR=Nu.mA.registerContentProtectionIntegration.bind(Nu.mA),ZR={uY(t){Ha.addEventListener("beforeunload",t)},rY(t){Ha.removeEventListener("beforeunload",t)}};!function(t){pa=t.wet,lm=t.vet,Rn=t.Aet,Ha=t.met,dm=Ha&&Ha.location,fm=Ha&&Ha.navigator}({wet:class{get GB(){const t=[];for(const i of this.pet){const e=this.yet.get(i);if(e){const i=e.map((t=>t.Met));t.push(...i)}}return this.Tet&&t.push(this.Tet),t}WB(t){for(const i of this.GB)i.u5(t)}Lz(t){const i=Vt(this.yet.get(t),(t=>t.Net));if(i)return i.Net=!1,i.Met}Det(t){if(!this.Tet){var i;const t=null==(i=this.yet.get(fi.ym))?void 0:i[0].Met.UP;if(!t)throw new g("Error creating iOS Safari MediaController");this.Tet=new Yj(t,this.Jx,this.Wu,this.YB),t.parentElement&&this.Tet.u5(t.parentElement)}return this.Tet}async fz(t){const i=t.UP,e=i.tagName.toLowerCase();await t.tr(),Hj(i);const s=Vt(this.yet.get(e)||[],(i=>t===i.Met));s&&(s.Net=!0)}RB(){for(const t of this.GB)t.a5()}gn(){for(const t of this.GB){const i=t.UP;t.Ud(),Wj(i),zu(i)}this.yet.clear(),this.Tet=void 0}Iet(){for(const t of this.pet){const i=[];this.yet.set(t,i);for(let e=0;e<this.Eet;e++){const e=Vj(t),s=t===fi.Mm?new wO(e,this.Jx,this.Wu):new zj(e,this.Jx,this.Wu,this.YB);i.push({Met:s,Net:!0})}}}constructor(t,i,e=2,s=Gj,n=PM()){this.Eet=e,this.pet=[...s],this.Jx=n,this.Wu=t,this.YB=i,this.yet=ke(),this.Iet()}},vet:class t{Dtt(t){return this.bet.NC((()=>this.Let(t)))}A_(){this.UB.RB()}async Let(i){const e=this.UB.Lz(fi.ym),s=e.UP,n=await t.ket(s,i);return await this.UB.fz(e),n}static async ket(i,e){return f.OE||f.LE?"all":(i.src||(i.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.xet(),!e&&await t.Cet(i,!1)?"all":await t.Cet(i,!0)?"muted":"none")}static async Cet(t,i){t.muted=i;const e=t.play();try{if(!ya(e))return!f.Qs;const t=N(250);return await Promise.race([e,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static xet(){return new Promise((t=>{if("function"==typeof MessageChannel){const i=new MessageChannel;i.port1.onmessage=()=>t(),i.port2.postMessage("")}else u(t,0)}))}gn(){this.bet.gn()}constructor(t){this.UB=t,this.bet=new Kr}},Aet:ZR,met:s});var KR=class t{async kz(i){if(!lw(i.type))return!1;const e=i.contentProtection;if(e&&!jg(e)){if(!Gu(e))return!1;if(!await t.Oet(e))return!1}return!0}static async Oet(t){return!(!t.playready||!await i.Hx())||(!(!t.widevine||!await i.Gx())||(!(!t.clearkey||!await i.Wx())||!!await i.$x()))}},JR=class extends KR{async kz(t){return!!as(t.useManagedMediaSource)&&super.kz(t)}};function qs(t){return Na(t)}function fc(t,i){const e=Na(t);return i?""+e+i:""+e}var Rt,Xe=class{async jet(t){return(await this.zet.Pet(t.map(qs))).shift()}Bet(t,i){const e=fc(t,i);return this.Ret.Vb(e)}async Uet(t,i){var e;const s=fc(t,i);return null==(e=await this.Qet.Wb(s))?void 0:e.data}zH(t){return this.Fet.Wb(t)}constructor(t,i,e,s){this.zet=t,this.Ret=i,this.Qet=e,this.Fet=s}},xc=class{Yet(t){return Promise.resolve(!1)}Get(t){return Promise.reject($R)}Vet(t){return Promise.reject($R)}Vb(t){return Promise.resolve(!1)}Wb(t){return Promise.resolve(void 0)}Wet(t,i){return Promise.resolve(void 0)}Pet(t){return Promise.resolve([])}Het(){return Promise.resolve([])}qet(t){return Promise.resolve([])}Xet(t,i){return Promise.resolve([])}bT(t){return Promise.reject($R)}Zet(t){return Promise.reject($R)}Ket(){return Promise.reject($R)}},$R="Storage disabled",tU="Storage disabled",_c=class{get Jet(){return this.Hd.tL}async Yet(t){return(this.$et||await this.Jet).Yet(t)}async Get(t,i){return(this.$et||await this.Jet).Get(t,i)}async Vet(t,i){return(this.$et||await this.Jet).Vet(t,i)}async Vb(t){return(this.$et||await this.Jet).Vb(t)}async Wb(t){return(this.$et||await this.Jet).Wb(t)}async Wet(t,i){return(this.$et||await this.Jet).Wet(t,i)}async Pet(t){return(this.$et||await this.Jet).Pet(t)}async Het(){return(this.$et||await this.Jet).Het()}async qet(t){return(this.$et||await this.Jet).qet(t)}async Xet(t,i){return(this.$et||await this.Jet).Xet(t,i)}async bT(t){return(this.$et||await this.Jet).bT(t)}async Zet(t){return(this.$et||await this.Jet).Zet(t)}async Ket(){return(this.$et||await this.Jet).Ket()}constructor(t){this.Hd=new ue,this.$et=void 0,this.Hd.Xd(t),this.Hd.tL.then((t=>{this.$et=t}))}},iU=class{get tst(){return this.Hd.tL}async ist(t){const i=this.sst||await this.tst;return await i.ist(t)}constructor(t){this.Hd=new ue,this.sst=void 0,this.Hd.Xd(t);const i=this.Hd.tL;i.then((t=>{this.sst=t})),this.nst=new _c(i.then((t=>t.nst))),this.rst=new _c(i.then((t=>t.rst))),this.hst=new _c(i.then((t=>t.hst))),this.ost=new _c(i.then((t=>t.ost))),this.ast=new _c(i.then((t=>t.ast)))}};function Fe(t){return new g("This storage cannot handle persistency type "+t)}!function(t){t.ust="readonly",t.cst="readwrite"}(Rt||(Rt={}));var eU=class{Yet(t){return Promise.resolve("temporary"===t)}Get(t,i){return void 0===i&&(i="temporary"),"temporary"!==i?Promise.reject(Fe(i)):(this.lst(t.key),this.CL.push(t),Promise.resolve())}Vet(t,i){if(void 0===i&&(i="temporary"),"temporary"!==i)return Promise.reject(Fe(i));for(const i of t)this.lst(i.key);for(const i of t)this.CL.push(i);return Promise.resolve()}Vb(t){return Promise.resolve(Boolean(this.dst(t)))}Wb(t){return Promise.resolve(this.dst(t))}Wet(t,i){return Promise.resolve(this.fst(t,i))}Pet(t){const i=t?t.map((t=>this.dst(t))):this.CL;return Promise.resolve(i.filter(Po))}Het(){return Promise.resolve([...this.CL])}qet(t){return this.Xet(t,"key")}Xet(t,i){const e=this.CL.filter((e=>e[i]===t));return Promise.resolve(e)}bT(t){return this.lst(t),Promise.resolve()}Zet(t){for(const i of t)this.lst(i);return Promise.resolve()}Ket(){return No(this.CL),Promise.resolve()}dst(t){return this.fst(t,"key")}fst(t,i){for(const e of this.CL)if(e[i]===t)return e}lst(t){const i=this.dst(t);i&&Qr(this.CL,i)}constructor(){this.CL=[]}},xo=class t{static c9(){return Promise.resolve(new t)}ist(t){return t(this)}constructor(){this.rst=new eU,this.nst=new eU,this.hst=new eU,this.ost=new eU,this.ast=new eU}},kc=class{async Yet(t){for(let i of this._st)if(await i.Yet(t))return!0;return!1}async Get(t,i){void 0===i&&(i="persistent");for(let e of this._st)if(await e.Yet(i))return e.Get(t);throw Fe(i)}async Vet(t,i){void 0===i&&(i="persistent");for(let e of this._st)if(await e.Yet(i))return e.Vet(t);throw Fe(i)}async Vb(t){for(let i of this._st)if(await i.Vb(t))return!0;return!1}async Wb(t){for(let i of this._st){const e=await i.Wb(t);if(e)return e}}async Wet(t,i){for(let e of this._st){const s=await e.Wet(t,i);if(s)return s}}async Pet(t){const i=[];for(let e of this._st)i.push(...await e.Pet(t));return i}async Het(){const t=[];for(let i of this._st)t.push(...await i.Het());return t}async qet(t){const i=[];for(let e of this._st)i.push(...await e.qet(t));return i}async Xet(t,i){const e=[];for(let s of this._st)e.push(...await s.Xet(t,i));return e}async bT(t){for(let i of this._st)await i.bT(t)}async Zet(t){for(let i of this._st)await i.Zet(t)}async Ket(){for(let t of this._st)await t.Ket()}constructor(t){this._st=t}};function sU(t){return async()=>{const i=await Promise.all(t.map((t=>t())));return nU.c9(i)}}var nU=class t{static c9(i){return Promise.resolve(new t(i))}get ost(){return this.gst}get ast(){return this.wst}get hst(){return this.vst}get rst(){return this.Ast}get nst(){return this.mst}ist(i){if(0===this.pst.length)return i(this);const e=[];let s=0;const n=r=>(e.push(r),s++,s<this.pst.length?this.pst[s].ist(n):i(new t(e)));return this.pst[s].ist(n)}constructor(t){this.pst=t,this.gst=new kc(t.map((t=>t.ost))),this.wst=new kc(t.map((t=>t.ast))),this.vst=new kc(t.map((t=>t.hst))),this.Ast=new kc(t.map((t=>t.rst))),this.mst=new kc(t.map((t=>t.nst)))}},wi=class t{static wa(i){t.pP.wa(i)}static get Lb(){return t.yst||(t.yst=t.pP.c9()),t.yst}};function rU(t){return void 0!==t.r_}function hU(t){const e=f.OE||f.LE,s=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),n=e&&!s,r=new th(!0);return async t=>{const e=t.HP;if(!r.t0(e)&&!function(t,i){return!!t&&(pi(t)?RA(i)||QA(i):Xi(t,We.APPLICATION_TTML_XML)||Xi(t,We.TEXT_VTT)||Xi(t,We.IMAGE_JPEG))}(t.zF,t.Mst))return!1;const s=t.Mst.some((t=>"ac-3"===t||"ec-3"===t));if(n&&s)return!1;if(t.Tst){const s=t.Tst,n=A(s,(t=>Am(t.Nst))).filter(Po),r=await async function(t,i){for(const e of t)if(await i(e))return!0;return!1}(n,(t=>i.Zx(t,e)));if(!r)return!1}return!0}}wi.pP=new class{c9(){return new iU(this.Dst())}async Dst(){this.Sst&&(await Promise.resolve(),this.Sst=!1);for(const t of this.Ist)try{return await sU([xo.c9,t])()}catch(t){}return await sU([xo.c9,this.Est])()}wa(t){if(!this.Sst)throw new g("Registration overdue");this.Ist.push(t)}constructor(t){this.Ist=[],this.Sst=!0,this.Est=t}}(class t{static c9(){return Promise.resolve(new t)}ist(t){return Promise.reject(tU)}constructor(){this.rst=new xc,this.nst=new xc,this.hst=new xc,this.ost=new xc,this.ast=new xc}}.c9),wi.yst=void 0;var _h,oU=class{get Ti(){return this.bst.offsetHeight*i.Ys.T2}get ji(){return this.bst.offsetWidth*i.Ys.T2}constructor(t){this.bst=t}},aU=class{get nt(){return this.Dl}DI(t,i,e,s,n,r,h,o){const a=new Yx(t,i,e,s,n,r,h,void 0,o);return this.Dl.tt(a),this.l3.tt(a),a}CI(t){this.Dl.it(t),this.l3.it(t),t.gn()}tr(){for(const t of this.Dl.og.slice())t.gn();this.Dl.tr(),this.l3.tr()}gn(){this.tr(),this.Dl.gn(),this.l3.gn()}constructor(t,i){this.Dl=new Lr,this.l3=new zC(t,i)}},tr=class{Lz(t){return this.pP.Lz(t)}Det(t){return this.pP.Det(t)}fz(t){return this.pP.fz(t)}constructor(t){this.pP=t}},mc=class extends Bo{get Lst(){return this.hv}get wf(){return this.vf()}vf(){return this.hv.wf}get Af(){return this.mf()}mf(){return this.hv.Af}get Mf(){return this.Tf()}Tf(){return this.hv.Mf}get Iu(){return this.hv.Iu}get ct(){return this.Td()}Td(){return this.hv.ct}get YP(){return this.kst()}kst(){return this.hv.YP}get Sf(){return this.xst()}xst(){return this.hv.Sf}get lt(){return this.hv.lt}get Ti(){return this.hv.Ti}get ji(){return this.hv.ji}get ya(){return this.w_()}w_(){return this.hv.ya}get zf(){return this.hv.zf}set zf(t){this.hv.zf=t}get Ff(){return this.Cst()}Cst(){return this.hv.Ff}get Gf(){return this.hv.Gf}set Gf(t){this.hv.Gf=t}get Hf(){return this.qf()}qf(){return this.hv.Hf}get Jf(){return this.$f()}$f(){return this.hv.Jf}get t_(){return this.i_()}i_(){return this.hv.t_}get e_(){return this.s_()}s_(){return this.hv.e_}get T0(){return this.Ost()}Ost(){return this.hv.T0}get O0(){return this.jst()}jst(){return this.hv.O0}get nt(){return this.n_()}n_(){return this.Pst}get Ol(){return this.P5()}P5(){return this.hv.Ol}get L2(){return this.hv.L2}get c_(){return this.hv.c_}set c_(t){this.hv.c_=t}get h5(){return this.hv.h5}get Cf(){return this.hv.Cf}get vv(){return this.hv.vv}get lz(){return this.zst()}set lz(t){this.Bst(t)}zst(){return this.hv.lz}Bst(t){this.hv.lz=t}get c5(){return this.hv.c5}set c5(t){this.Rst(t)}Rst(t){this.hv.c5=t}get H4(){return this.Ust()}Ust(){return this.hv.H4}Pf(){return this.hv.Pf()}p_(){return this.hv.p_()}m_(){this.hv.m_()}Em(t,i,e){this.hv.Em(t,i,e)}PP(t){this.hv.PP(t)}ge(){this.hv.ge()}be(){this.hv.be()}DI(t,i,e,s,n,r,h,o){return this.hv.DI(t,i,e,s,n,r,h,o)}tz(){return this.hv.tz()}ez(t,i,e,s,n){return this.hv.ez(t,i,e,s,n)}CI(t){this.hv.CI(t)}nz(){this.hv.nz()}Rq(t){return this.hv.Rq(t)}async $n(t){const i=await this.hv.$n(t);let e;return e=t.Rg===Au.ZC?this.Qst(i):this.Fst(i),this.FP=e,e}async tr(){this.FP&&(await this.FP.Ud(),this.FP=void 0),await this.hv.tr()}n5(){this.hv.n5()}r5(){this.hv.r5()}async Ud(){this.Vo(),this.hv.fn(qL,this.Yst),this.Pst.fg=void 0,this.Pst.gn(),this.FP&&(await this.FP.Ud(),this.FP=void 0)}a5(){this.hv.a5()}Gst(t){this.hv.fn(qL,this.Yst),this.hv=t,this.Pst.fg=t.nt,this.hv.yn(qL,this.Yst)}I_(t){this.Co(t)}constructor(t){super(),this.FP=void 0,this.Pst=new al,this.Yst=t=>this.I_(t),this.hv=t,this.Pst.fg=t.nt,this.hv.yn(qL,this.Yst)}},uU=class extends mc{get UP(){return this.hv.UP}get L0(){return this.hv.L0}get g_(){return this.hv.g_}set g_(t){this.hv.g_=t}u5(t){this.hv.u5(t)}l2(){this.hv.l2()}D_(){this.hv.D_()}constructor(t){super(t)}},cU=class{get wd(){return this.Yx()}Yx(){return this.FP.wd}get t_(){return this.i_()}i_(){return this.FP.t_}get rt(){return this.FP.rt}mq(t){return this.FP.mq(t)}yq(t){return this.FP.yq(t)}Ud(){return Promise.resolve()}constructor(t){this.FP=t}},qe=class extends cU{get X$(){return this.i0}get Z$(){return this.e0}get wf(){return this.vf()}vf(){return this.FP.wf}get ct(){return this.Td()}Td(){return this.FP.ct}get Pq(){return this.Vst()}Vst(){return this.FP.Pq}n0(t){this.FP.n0(t)}a0(t,i,e,s){this.FP.a0(t,i,e,s)}n$(){this.FP.n$()}qJ(){this.FP.qJ()}Ud(){return this.i0&&(this.i0.Ud(),this.i0=void 0),this.e0&&(this.e0.Ud(),this.e0=void 0),super.Ud()}Wst(t){this.FP=t,this.i0?t.X$?this.i0.Hst(t.X$):(this.i0.Ud(),this.i0=void 0):t.X$&&(this.i0=this.qst(t.X$),this.i0.yn(KL,this.Xst)),this.e0?t.Z$?this.e0.Hst(t.Z$):(this.e0.Ud(),this.e0=void 0):t.Z$&&(this.e0=this.qst(t.Z$),this.e0.yn(KL,this.Xst))}Zst(t){}constructor(t){super(t),this.i0=void 0,this.e0=void 0,this.Xst=t=>this.Zst(t)}},lU=class extends Bo{get OW(){return this.FW}set OW(t){this.FW=t}get wf(){return Ai.kB()}get wd(){return this.wC}get h$(){return fi.hT}get a$(){return Ai.kB()}get Kst(){return!1}get bW(){return this.RW}set bW(t){this.RW=t}AJ(t,i,e){return Promise.reject(new g("Invalid media buffer"))}f$(){return Promise.reject(new g("Invalid media buffer"))}yJ(t,i,e){return Promise.reject(new g("Invalid media buffer"))}Pq(){return!1}n$(){}l$(t,i){}d$(t,i){}bT(t,i,e){return Promise.resolve()}jJ(t,i){return Promise.reject(new g("Invalid media buffer"))}zT(t,i){return Promise.reject(new g("Invalid media buffer"))}mq(t){return!1}yq(t){return Promise.reject(new g("Invalid media buffer"))}Ud(){this.Vo()}constructor(t){super(),this.RW=0,this.FW=0,this.wC=t}},fe=class extends Bo{get OW(){return this.Jst()}set OW(t){this.$st(t)}Jst(){return this.tnt.OW}$st(t){this.tnt.OW=t}get wf(){return this.vf()}vf(){return this.tnt.wf}get wd(){return this.Yx()}Yx(){return this.tnt.wd}get h$(){return this.tnt.h$}get a$(){return this.int()}int(){return this.tnt.a$}get bW(){return this.ent()}set bW(t){this.snt(t)}ent(){return this.tnt.bW}snt(t){this.tnt.bW=t}AJ(t,i,e){return this.tnt.AJ(t,i,e)}f$(){return this.tnt.f$()}yJ(t,i,e){return this.tnt.yJ(t,i,e)}Pq(){return this.tnt.Pq()}n$(){this.tnt.n$()}l$(t,i){this.tnt.l$(t,i)}d$(t,i){this.tnt.d$(t,i)}bT(t,i,e){return this.tnt.bT(t,i,e)}jJ(t,i){return this.tnt.jJ(t,i)}mq(t){return this.tnt.mq(t)}yq(t){return this.tnt.yq(t)}I_(t){this.Co(t)}Ud(){this.Vo(),this.Hst(new lU(this.wd))}Hst(t){this.tnt.fn(KL,this.nnt),this.tnt=t,this.tnt.yn(KL,this.nnt)}constructor(t){super(),this.nnt=t=>this.I_(t),this.tnt=t,this.tnt.yn(KL,this.nnt)}},dU=class extends fe{get Met(){return this.hv}set Met(t){this.hv=t}async AJ(t,i,e){return fo(e),await this.rnt(this.hv.Mf,null==i?void 0:i.a9,null==i?void 0:i.ct),fo(e),t.Rg===G.qS?await this.hnt(t,i,e):await this.ont(t,i,e)}async hnt(t,i,e){let s=t;for(;;){const[t,n]=Rb(s.zm);s={Rg:G.qS,zm:t};try{return await this.ant(s,i,e),void n.cancel(new Sn).catch(na)}catch(t){if(mh(t)){if(await this.rnt(this.hv.Mf,i.a9,i.ct,e)){s={Rg:G.qS,zm:n};continue}}throw n.cancel(t).catch(na),t}}}async ont(t,i,e){for(;;)try{return fo(e),await this.ant(t,i,e)}catch(t){if(mh(t)){if(await this.rnt(this.hv.Mf,i.a9,i.ct,e))continue}throw t}}async rnt(t,i,e,s){const n=wL(t,i,e,this.wf,this.bW,this.OW);for(const[t,i]of n)await this.unt(t,i,s);return n.length>0}ant(t,i,e){return super.AJ(t,i,e)}unt(t,i,e){return super.bT(t,i,e)}constructor(t){super(t),this.hv=void 0}},fU=class extends qe{get Met(){return this.hv}set Met(t){this.hv=t,this.i0&&(this.i0.Met=t),this.e0&&(this.e0.Met=t)}qst(t){const i=new dU(t);return i.Met=this.hv,i}constructor(t){super(t),this.hv=void 0,this.Wst(t)}},gt=class extends cU{get Xf(){return this.FP.Xf}set Xf(t){this.FP.Xf=t}},_U=class extends mc{get UP(){return this.hv.UP}get L0(){return this.hv.L0}get a_(){return this.hv.a_}get r_(){return this.hv.r_}get g_(){return this.hv.g_}set g_(t){this.hv.g_=t}u5(t){this.hv.u5(t)}l2(){this.hv.l2()}D_(){this.hv.D_()}v_(){return this.hv.v_()}constructor(t){super(t)}},gU=class extends uU{get Lst(){return this.hv}Fst(t){const i=new fU(t);return i.Met=this,i}Qst(t){return new gt(t)}},wU=class extends _U{get Lst(){return this.hv}Fst(t){const i=new fU(t);return i.Met=this,i}Qst(t){return new gt(t)}},vU=class extends tr{Lz(t){return t===fi.ym?new wU(super.Lz(t)):t===fi.Mm?new gU(super.Lz(t)):void 0}async fz(t){const i=t;await i.Ud(),await super.fz(i.Lst)}},AU=class{cnt(){this.Qo.S_()}gn(){s.removeEventListener("pageshow",this.lnt)}constructor(t){this.lnt=t=>{t.persisted&&this.cnt()},this.Qo=t,s.addEventListener("pageshow",this.lnt)}},mU=class{dnt(t,i,e){return Promise.resolve()}fnt(t,i,e,s){let n=[];if(s){const r={RD:i.VT,UD:i.WT,QD:e._nt.QD};s.Rg===Wt.TTML?n=pA(t,s,r,e.zF):s.Rg===Wt.WEBVTT&&(n=Cv(t,r).L)}return n}tr(){}};!function(t){t.XA="vttc",t.gnt="vsid",t.wnt="iden",t.vnt="ctim",t.Ant="sttg",t.mnt="payl",t.pnt="vtte",t.ynt="vtta"}(_h||(_h={}));var Ic=class t{static Mnt(i){return Boolean(t.Tnt[i])}static _p(i){const e=[],s=At.Km(new ia(i,new _s));for(const i of s)t.Mnt(i.Rg)&&e.push(t.Tnt[i.Rg](i.zm));return e}static Nnt(i){const e=At.Km(i),s=Bt(e,_h.gnt),n=Bt(e,_h.wnt),r=Bt(e,_h.vnt),h=Bt(e,_h.Ant),o=Bt(e,_h.mnt);return{Rg:_h.XA,Dnt:s?t.Snt(s):void 0,Int:n?t.Ent(n):void 0,bnt:r?t.Lnt(r):void 0,knt:h?t.xnt(h):void 0,Cnt:o?t.Ont(o):void 0}}static Snt(t){return{Rg:_h.gnt,jnt:t.Fm()}}static Ent(t){return{Rg:_h.wnt,Int:t.Hm()}}static Lnt(t){return{Rg:_h.vnt,Pnt:t.Hm()}}static xnt(t){return{Rg:_h.Ant,znt:t.Hm()}}static Ont(t){return{Rg:_h.mnt,Bnt:t.Hm()}}static Rnt(t){return{Rg:_h.pnt}}static Unt(t){return{Rg:_h.ynt,Qnt:t.Hm()}}};Ic.Tnt={[_h.XA]:Ic.Nnt,[_h.pnt]:Ic.Rnt,[_h.ynt]:Ic.Unt};var pU=class{dnt(t,i,e){const s=new DataView(t.Fnt),n=iu._p(s),r=Vt(n,(t=>t.Rg===he.pA));return r&&(this.Ynt=r.Z[0].Bp.rp.xp),Promise.resolve()}fnt(t,i,e){if(S(this.Ynt))return[];const s=Ao(t),n=iu._p(s),r=Ig(n,he.$A),h=Ig(n,he.dm);if(!r||0===r.Z.length||!h)return[];const o=function(t,i,e){const s=t.Z[0],n=s.IM?s.IM.IM.toNumber()/e:i.VT,r=[];for(const t of s.SM)r.push(...t.CM);return{Gnt:n,CM:r}}(r,i,this.Ynt),a=e._nt.QD;return function(t,i,e,s){const n=Ic._p(Ao(i.zm)),r=t.CM,h=t.Gnt+s,o=[];let a=0;for(let t=0;t<r.length;t++){const i=r[t],s=n[t];var u;const c=(null!=(u=i.ct)?u:0)/e;let l;s.Rg===_h.XA&&(l=yU(s,a,c,h)),l&&o.push(l),a+=c}return o}(o,h,this.Ynt,a)}tr(){this.Ynt=NaN}constructor(){this.Ynt=NaN}};function yU(t,i,e,s){if(!t.Cnt)return void 0;const n=t.bnt?function(t){return Gv(t.Pnt,new _s(0))}(t.bnt):i,r=s+n,h=r+e,o=t.Cnt.Bnt;return new O(r,h,o,!1)}var Zn,ye,MU=class t extends Ti{get Vnt(){return this.Wnt}set Vnt(t){this.Wnt=t}get Rt(){for(const t of this.Z.og)if(t.jg!==Or.Ch)return!0;return!1}async $n(t){await this.tr(),this.Hnt=t,this.qnt(t)}qnt(t){for(const i of t.Xnt){const t=this.Znt(i);this.Knt(t,i),t.Jf=si.LOADED,this.tt(t)}}it(t){this.Jnt(t),super.it(t)}YS(t){const i=this.$nt(t);if(i&&this.Vnt!==i){this.Vnt=i;for(const t of this.Z.og)t!==i&&(t.jg=Or.Ch)}}GS(t){const i=this.$nt(t);i&&this.Vnt===i&&(this.Vnt=void 0)}$nt(t){return Vt(this.Z.og,(i=>t.Mg===i.Mg))}Knt(t,i){this.trt.set(t.Mg,i)}irt(t){return this.trt.get(t.Mg)}Jnt(t){this.trt.delete(t.Mg)}ert(){if(!this.Vnt)return;const i=this.irt(this.Vnt);return i?t.nrt(i):void 0}static nrt(t){return t.rrt&&t.rrt.length>0?t.rrt[0]:void 0}constructor(...t){super(...t),this.trt=I()}};function TU(t,i){const e=i.TB(((i,e)=>t.pB(i,e,!1,!1)));return t._B(e)}function NU(t,i){const e=i.Sn(t.cB()).TB(((i,e)=>t.gr(e)));return t._B(e)}!function(t){t[t.pR=0]="pR",t[t.hrt=1]="hrt",t[t.ort=10]="ort",t[t.art=11]="art",t[t.urt=12]="urt",t[t.crt=13]="crt",t[t.lrt=14]="lrt",t[t.drt=15]="drt",t[t.frt=20]="frt",t[t._rt=21]="_rt",t[t.grt=22]="grt",t[t.wrt=23]="wrt",t[t.vrt=24]="vrt",t[t.Art=30]="Art",t[t.mrt=31]="mrt",t[t.prt=32]="prt",t[t.yrt=33]="yrt",t[t.Mrt=34]="Mrt",t[t.Trt=35]="Trt",t[t.Nrt=40]="Nrt",t[t.Drt=41]="Drt",t[t.Srt=42]="Srt",t[t.Irt=43]="Irt",t[t.Ert=44]="Ert",t[t.brt=50]="brt",t[t.Lrt=51]="Lrt",t[t.krt=60]="krt",t[t.xrt=61]="xrt",t[t.Crt=62]="Crt",t[t.Ort=63]="Ort",t[t.jrt=70]="jrt",t[t.Prt=71]="Prt",t[t.zrt=72]="zrt",t[t.Brt=73]="Brt",t[t.Rrt=74]="Rrt",t[t.Urt=75]="Urt",t[t.Qrt=76]="Qrt",t[t.Frt=77]="Frt",t[t.Yrt=90]="Yrt",t[t.Grt=91]="Grt"}(Zn||(Zn={})),function(t){t.Vrt="Wrt",t.Hrt="qrt"}(ye||(ye={}));var DU,SU=class extends Jo{constructor(t,i,e){super("Xrt"),this.Cn=t,this.jn=i,this.Zrt=e}},IU=class extends wn{constructor(){super("Krt")}};!function(t){t.Jrt="$rt",t.tht="iht",t.eht="sht",t.pR="nht"}(DU||(DU={}));var EU=[Co.Tw,Co.Dw,Co.Mw,Co.Yg],bU=class extends Bo{get rht(){var t,i;return(null==(t=this.oht.hht)?void 0:t.Zrt)||(null==(i=this.oht.aht)?void 0:i.Zrt)}get uht(){return this.cht}set dht(t){this.oht.dht=t}get dht(){return this.oht.dht}get OS(){return this.fht}_ht(t){this.fht!==t&&(this.fht=t,this.Co(new IU))}get ght(){return this.cht.Lt.ght}get lt(){return this.BP}async Cn(t){if(!this.wht&&!this.vht)return;const i=this.lf("Krt");this.wht?(this.Aht.qd(),this.Aht=new Wr,this.mht(this.Aht.Wd)):(this.pht.Zb(void 0),this.pht=new ue),await i}get wht(){return"$rt"===this.fht}get vht(){return"iht"===this.fht}get yht(){return"sht"===this.fht}get Mht(){return"nht"===this.fht}async y_(t){if(this.yht||this.vht)for(0,this.Aht.qd();!this.wht&&!this.Mht;)await this.lf("Krt")}async tr(t){this.Mht?(this.BP=void 0,this._ht("$rt")):await this.y_(t),this.oht.tr(),this.cht.tr()}bz(t){this.BP=t,this._ht("nht"),this.Co(new Eo(t))}Tht(){this.c2.yn(Co.Iw,this.od),this.c2.yn([Co.yw,Co.hw],this.We),this.oht.yn(EU,this.Ds),this.Nht.yn(ye.Vrt,this.od)}Dht(){this.c2.fn(Co.Iw,this.od),this.c2.fn([Co.yw,Co.hw],this.We),this.oht.fn(EU,this.Ds),this.Nht.fn(ye.Vrt,this.od)}async Sht(t){this.Dht(),this.Iht.qd(),await this.y_(null!=t?t:Zn.Irt),this.oht.tr()}async Eht(t){this.Tht(),await this.Cn(null!=t?t:Zn.drt)}async gn(){this.Vo(),this.Dht(),this.Iht.qd(),await this.y_(Zn.Ert),this.oht.gn()}async mht(t){for(;;)try{fo(t),this._ht("sht"),await this.oht.bht(t),fo(t),this._ht("iht"),await Ys(this.pht.tL,t)}catch(t){if(ut(t))this._ht("$rt");else{const i=t instanceof Rs?t:new Rs(Ui.MEDIA_LOAD_ERROR,t.message,t);this.bz(i)}break}}async Lht(t){fo(t),await this.y_(Zn.Srt),this.oht.tr(),fo(t),await this.Cn(Zn.crt)}constructor(t,e,s,n,r){super(),this.kht=t,this.Nht=e,this.cht=s,this.oht=n,this.c2=r,this.fht="$rt",this.BP=void 0,this.pht=new ue,this.Iht=new Wr,this.Aht=new Wr,this.We=t=>{this.wht||this.Mht||!i.tet&&this.oht.xht(t.currentTime)||(this.Iht.qd(),this.Iht=new Wr,this.Lht(this.Iht.Wd).catch(Pd))},this.od=ze((()=>{if(this.vht){try{this.oht.Cht();if(this.oht.Oht())return}catch(t){if(!(t instanceof SU))throw t}this.Cn(Zn.lrt)}}),250),this.Tht()}},LU=class t{jht(t,i){return this.Pht(t,!1,i)}zht(t,i){return this.Pht(t,!0,i)}async Pht(i,e,s){fo(s.Wd);const n=await this.Bht(i,e,s);return n.yV?t.Rht(n):this.Uht(n)}Uht(t){return t}static Rht(t){return t}Bht(t,i,e){var s;const n=new ss({zu:t.zu,wI:oe.WS,_I:t.Qht?{Range:"bytes="+t.Qht[0]+"-"+(null!=(s=t.Qht[1])?s:"")}:void 0,pI:t.pI,gI:yt.GET,Rg:sa.$S,AI:i?Kt.eI:Kt.hT,mI:this.Fht,jS:e.Yht,vI:e.vI,Wd:e.Wd,MI:e.MI});return this.EI.LS(n)}constructor(t,i){this.EI=t,this.Fht=i}},kU=class{Ght(t,i){const e=this.Vht**t,s=i*(1-e)+e*this.i9;S(s)||(this.i9=s,this.Wht+=t)}Hht(){const t=1-this.Vht**this.Wht;return this.i9/t}constructor(t){this.i9=0,this.Wht=0,this.Vht=_.exp(_.log(.5)/t)}},ec=class{Ght(t,i){const e=8e3*i/t,s=t/1e3;this.qht+=i,this.Xht.Ght(s,e),this.Zht.Ght(s,e)}Hht(){return this.Kht()?_.min(this.Xht.Hht(),this.Zht.Hht()):this.Jht}Kht(){return this.qht>=this.$ht}constructor(t=2,i=5,e=128e3){this.qht=0,this.Jht=_N,this.Xht=new kU(t),this.Zht=new kU(i),this.$ht=e}},xU=class{get tot(){return this.iot.Hht()}get Kht(){return this.iot.Kht()}eot(t){const i=t.rot,e=this.hot?t.oot-t.aot:t.oot-t.uot,s=t.cot;!s&&i<this.lot||(s?this.iot.Ght(2*e,i):this.iot.Ght(e,i))}constructor(t,i){this.hot=i,!i||t!==fi.ym&&t!==fi.Mm?(this.lot=16e3,this.iot=new ec):t===fi.ym?(this.lot=5e3,this.iot=new ec(.05,1,0)):(this.lot=0,this.iot=new ec(.005,.1,0))}},CU=["Nw","Sw"],OU=class extends Bo{async fot(t,i){let e;for(const s of this._ot)try{return await s.fot(t,i)}catch(t){yo(t),e=t}throw e}async got(t,i){let e;for(const s of this._ot)try{return await s.got(t,i)}catch(t){yo(t),e=t}throw e}gn(){for(const t of this._ot)t.fn(CU,this.Ds),t.gn()}constructor(t){super(),this._ot=t;for(const t of this._ot)t.yn(CU,this.Ds)}};var jU=class{transform(t,i){this.wL.write(t).catch(na),i.enqueue(t)}flush(){this.wL.close().catch(na)}constructor(t){this.wL=t}},PU=class{wot(){return new zU(Pb(this.Fnt),this.vot,this.Aot)}constructor(t,i,e){this.Fnt=t,this.vot=i,this.Aot=e}},zU=class t{get vV(){return this.mot}gj(t){return wt(this.mot,t)}Lm(){const[i,e]=Rb(this.mot);return this.mot=i,new t(e,this.vot,this.Aot)}pot(){const[i,e]=function(t){const i=new _i,e=i.writable.getWriter(),s=new _i(new jU(e));return t.pipeTo(s.writable).catch((t=>{e.abort(t).catch(na)})),[s.readable,i.readable]}(this.mot);return this.mot=i,new t(e,this.vot,this.Aot)}yot(t){return this.gj(t).then((t=>new PU(t,this.vot,this.Aot)))}constructor(t,i,e){this.mot=t,this.vot=i,this.Aot=e}},Oo=class extends Jo{constructor(t,i,e){super(i,e),this.Mot=t}},BU="Cache lookup failed.",RU=class extends Bo{async fot(t,i){fo(i);const e=await this.Tot.Uet(t.zu.zu,t.zu.Qht);if(fo(i),!e)throw new Oo(t,BU);const s=new PU(e.buffer,e.byteLength,e.reference);return{Mot:t.Mot,Not:{Rg:G.dq,zm:s},Zrt:t.Zrt,zu:t.zu}}async got(t,i){fo(i);const e=await this.Tot.Uet(t.zu,t.Qht);if(fo(i),!e)throw new Oo(t,BU);const s=new PU(e.buffer,e.byteLength,e.reference);return{Rg:G.dq,zm:s}}gn(){this.Vo()}constructor(t){super(),this.Tot=t}};function T(t){return ci(t.Dot)}function UU(t){return T(t)?t.Dot:t.Sot}var QU=class extends wn{constructor(t,i,e,s,n,r){super(t),this.Iot=i,this.aQ=e,this.MM=s,this.Fp=n,this.mI=r}},FU=class extends QU{constructor(t,i,e,s,n){super(Co.Tw,t,i,e,s,n)}},YU=class{constructor(t,i){this.Eot=t,this.bot=i}},GU=class extends YU{get rot(){return this.Lot}start(){}transform(t,i){this.Lot+=t.byteLength,i.enqueue(t)}flush(){this.kot(!1)}qd(){this.kot(!0)}kot(t){this.Eot(this.bot,i.Kd(),this.rot,t)}constructor(...t){super(...t),this.Lot=0}},VU=class extends YU{get rot(){return this.Lot}start(){this.bot=i.Kd()}transform(t,i){this.Lot+=t.byteLength,this.xot||this.Cot(t)&&this.kot(!1),i.enqueue(t)}flush(){}qd(){this.kot(!0)}Cot(t){const i=this.Oot(t),e=this.jot(i);return Boolean(Vt(e,WU))}Oot(t){return this.Pot&&void 0!==this.zot?(this.Pot=uc([this.Pot,t]),new ia(Ao(this.Pot),new _s(this.zot))):(this.Pot=t,new ia(Ao(t),new _s))}jot(t){const i=At.Jm(t.zm,t.Bm,!0);return i.$m?(this.Pot=void 0,this.zot=void 0):this.zot=t.Bm.Ku,i.m}kot(t){this.xot||(this.Eot(this.bot,i.Kd(),this.rot,t),this.xot=!0)}constructor(...t){super(...t),this.Lot=0,this.xot=!1}};function WU(t){return t.Rg===he.dm}var HU=class{Bot(t){const e=t.kV?this.Rot:i.Kd(),s=this.Uot(e),n=new _i(s),r=t.vV().pipeTo(n.writable).then((()=>({jf:{rot:s.rot}})),(t=>{throw s.qd(),t}));return this.Qot.Xd(r),n.readable}Fot(t){const e=t.kV?this.Rot:i.Kd(),s=t.gj(),n=s.then((t=>{const s=i.Kd();return this.eot(e,s,t.byteLength,!1),{jf:{rot:t.byteLength}}}),(t=>{const s=i.Kd();throw this.eot(e,s,0,!0),t}));return this.Qot.Xd(n),s}get Yot(){return this.Qot.tL}constructor(t){this.Got=t,this.Qot=new ue,this.eot=(t,i,e,s)=>{const n={uot:this.Rot,aot:t,oot:i,rot:e,cot:s};this.Got.eot(n),this.Got.Kht&&va.Lb.sP(this.Got.tot)},this.Qot.tL.catch(na),this.Rot=i.Kd()}},qU=class extends HU{Uot(t){return new GU(this.eot,t)}},XU=class extends HU{Uot(t){return new VU(this.eot,t)}},ZU=class extends QU{constructor(t,i,e,s,n,r,h){super(Co.Dw,t,i,e,s,n),this.Vot=r,this.yT=h}},KU=class extends Jo{constructor(t,i,e){super("Error downloading segment "+UU(i),t),this.Wot=i.VT,this.Hot=i.WT,this.qot=e}},JU=class extends Bo{Xot(){return this.hot?new XU(this.Got):new qU(this.Got)}async fot(t,i){fo(i);const e=t.Zrt,s=t.zu,n=t.Mot,r=UU(n),h=e.Zrt?e.Zrt.Mg:-1,o=function(t){const i=t.Zrt;let e;e=i===function(t){return t.rrt.reduce(((t,i)=>t.wP<i.wP?t:i))}(i.Zot)?qi(5*t.Mot.ct):qi(1.2*t.Mot.ct);return os(e,1e3,18e3)}(t);this.Co(new FU(s,e.wP,r,h,e.Rg));try{const t=this.Xot(),a=await this.Kot.jht(s,{MI:this.hot,Yht:o,Wd:i}),u=await this.Jot(a,a.yV,i,t);return ha(this.$ot(t.Yot,e,s,r,h,a)),{Not:u,Zrt:e,Mot:n,zu:s}}catch(t){throw yo(t),new KU(t,n,e)}}async got(t,i){fo(i);const e=await this.Kot.zht(t,{MI:false,Yht:1e4,Wd:i});return await this.Jot(e,false,i)}async Jot(t,i,e,s){if(i){const i=s?s.Bot(t):t.vV();return{Rg:G.qS,zm:new zU(i)}}{const i=s?await s.Fot(t):await t.gj(e);return{Rg:G.dq,zm:new PU(i)}}}async $ot(t,i,e,s,n,r){try{const h=await t;this.Co(new ZU(e,i.wP,s,n,i.Rg,r.OS,h.jf.rot))}catch(t){}}gn(){this.Vo()}constructor(t,i,e){super(),this.Kot=t,this.Got=i,this.hot=e}};var $U=class{iat(t,i,e,s,n){const r=new RU(n),h=this.eat(t,e,s);return new OU([r,h])}eat(t,i,e){return new JU(t,i,e)}},tQ=.001,iQ=class{get wf(){return this.sat.wf}get nat(){return this.sat.nat}get Yq(){return this.sat.Yq}get rat(){if(this.D$.Jf<Mw.Xn)return!1;if(this.sat.jn<=this.oat&&this.sat.aat())return!0;const t=this.sat.jP;if(!t||0===t.U)return!1;const i=Ai.LB(this.c2.Mf,1/0);return t.Sn(i).wB(this.sat.Yq).EB>=this.QB.UW}get oat(){const t=this.sat.jP;let i;if(t&&t.U>0)i=t.jn(0);else{i=this.c2.Mf;const t=this.sat.Yq,e=t.vB(i);e>=0&&(i=t.jn(e))}const e=this.sat.t_.Cn(0);if(e>i){if(this.sat.Cn<=i&&this.sat.jn>=i&&e>i+tQ)throw new SU(i,e);i=e}return i=this.sat.uat.uB(i),i}constructor(t,i,e,s){this.sat=t,this.c2=i,this.D$=e,this.QB=s}};var eQ=class{get dat(){if(0===this.Ld.size)return Ai.kB();let t=Ai.LB(0,1/0);return this.Ld.forEach((i=>{t=t.Sn(i)})),t}fat(t){return this.Ld.get(t.o)}_at(){let t=Ai.kB();return this.Ld.forEach((i=>{t=t._B(i)})),t}gat(t){let i=!1;return this.Ld.forEach((e=>{i=i||e.gr(t)})),i}wat(t,i){const e=this.Ld.get(i.o);return!!e&&e.gr(t)}AB(t,i){let e=!1;return this.Ld.forEach((s=>{e=e||s.AB(t,i)})),e}vat(t,i){const e=this.Ld.get(i.o)._B(t);this.Ld.set(i.o,e)}Aat(t){this.Ld.forEach(((i,e)=>{const s=i._B(t);this.Ld.set(e,s)}))}mat(t){this.Ld.forEach(((i,e)=>{this.Ld.set(e,i.Sn(t))}))}tr(){this.Ld.forEach(((t,i)=>{this.Ld.set(i,Ai.kB())}))}constructor(t){this.Ld=function(t){const i=ke();for(const e of t)i.set(e.o,Ai.kB());return i}(t)}},sQ=class{get pat(){return this.yat}get Yq(){return this.Gq}Mat(t){for(const i of this.nst){if(i.Tat>t)break;if(i.Nat>t)return i}}Dat(t){for(const i of this.nst){if(i.Sat>t)break;if(i.Iat>=t)return i}}Eat(t,i){const e=[];for(const s of this.nst){if(s.Tat>t)break;s.Nat>=i&&e.push(s)}return e}bat(){return this.nst}Lat(t,i){const e=Ai.LB(t.Sat,t.Iat),s=e.cB();this.yat.mat(s),this.yat.vat(e,i),this.xat(s);const n=tc(this.nst,(i=>t.Tat<=i.Tat));if(n<0)this.nst.push(t);else{this.nst[n].Nat<=t.Nat?this.nst.splice(n,1,t):this.nst.splice(n,0,t)}}Vq(t,i){this.Gq.vat(t,i)}Cat(t){this.Gq.Aat(t)}mat(t){this.yat.mat(t),this.Gq.mat(t);const i=this.yat._at();this.xat(i)}xat(t){this.nst=this.nst.filter((i=>t.pB(i.Sat,i.Iat))).map((i=>i.Oat&&!t.AB(i.Sat,i.Iat)?function(t,i){return{Tat:t.Tat,Nat:t.Nat,Sat:t.Sat,Iat:t.Iat,Oat:i}}(i,!1):i))}tr(){this.yat.tr(),this.Gq.tr(),this.nst=[]}gn(){this.tr()}constructor(t){this.nst=[],this.Lt=t,this.yat=new eQ(t.rrt),this.Gq=new eQ(t.rrt)}},nQ=class{get dht(){return this.jat}set dht(t){this.jat=t}get ght(){return this.cht.Lt.ght}async Pat(t,i,e){let s;fo(e);const n=this.cht.Dat(t);s=n&&M(n.Iat,t,1e-5)?n.Nat:t;const r=this.zat(s),h=function(t){return rQ.bind(void 0,t)}(s);let o=await this.Qtt.Bat(h,r,i,e);for(fo(e);o&&this.Rat(o.Mot);){const t=uQ(o.Mot),s=o.Zrt;o=await this.Qtt.Bat(t,[s],i,e),fo(e)}if(!o)return void 0;if(!this.Uat(o.Mot))return o;const a=this.Qat(o.Mot);if(t<a.Cn)return await this.findFirstNonAppendedSegmentBeforeSegment(o,i,e,a);if(t>=a.jn)return await this.findFirstNonAppendedSegmentAfterSegment(o,i,e);if(!o.Zrt.Fat(o.Mot))throw new g("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,i,e){let s=t;do{const n=uQ(s.Mot),r=t.Zrt;s=await this.Qtt.Bat(n,[r],i,e),fo(e)}while(s&&this.Uat(s.Mot));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,i,e,s){let n=t;do{const s=aQ(n.Mot),r=t.Zrt;n=await this.Qtt.Bat(s,[r],i,e),fo(e)}while(n&&this.Uat(n.Mot));if(!n){0;const i=t.Zrt.Yat.Cn;throw new SU(i,s.Cn,t.Zrt)}return n}Gat(t){return this.cht.pat.gat(t)}Vat(t){return this.cht.Eat(t.VT,t.WT)}Uat(t){const i=this.Vat(t);return i.length>0&&function(t,i){return function(t){let i=Ai.kB();for(const e of t)i=i._B(Ai.LB(e.Tat,e.Nat));return i}(t).AB(i.VT,i.WT)}(i,t)&&i.every(cQ)}Rat(t){return this.cht.Yq.AB(t.VT,t.WT)}Qat(t){const i=this.Vat(t);return{Cn:i[0].Sat,jn:i[i.length-1].Iat}}zat(t){const i=this.Wat(t);if(0===i.length){const t=this.jat?this.jat:this.cht.Lt.rrt;return[t[t.length-1]]}const e=i.filter((t=>!t.Hat));return e.length>0?e:[i[i.length-1]]}Wat(t){return(this.jat?this.jat:this.cht.Lt.rrt).filter((i=>!this.cht.Yq.wat(t,i)))}constructor(t,i,e){this.kht=t,this.cht=i,this.Qtt=e}};async function rQ(t,i,e,s){const n=i._nt.qat(t);if(n){if(i.Xat(n)){return(await i.Kat(n,e,s)).Zat(t)}return n}}async function hQ(t,i,e,s){if(T(t)){if(0===t.Dot)return;const n=i._nt.Jat(t);if(!n)return;return(await i.Kat(n,e,s)).$at(t.Dot-1)}return i._nt.tut(t)}async function oQ(t,i,e,s){if(T(t)){const n=i._nt.Jat(t);if(!n)return;const r=await i.Kat(n,e,s);if(t.Dot+1===r.U)return;return r.$at(t.Dot+1)}return i._nt.iut(t)}function aQ(t){return hQ.bind(void 0,t)}function uQ(t){return oQ.bind(void 0,t)}function cQ(t){return t.Oat}var lQ=class{async Bat(t,i,e,s){fo(s);const n=this.eut(i,e);if(!n)return;const r=await t(n,this.sut,s);if(!r)return;const h=n.nut(r);return{Zrt:n,Mot:r,zu:h}}eut(t,i){if(0===t.length)return;const e=this.hut.rut(t,this.out?i:void 0,this.sat,this.QB.zW);return this.out||(this.out=!0),e}constructor(t,i,e,s){this.hut=t,this.sat=i,this.QB=e,this.sut=s,this.out=!1}},dQ=class{async Bat(t,i,e,s){fo(s);const n=this.hut.aut(i,e,this.sat);if(!n.length)return;let r;for(const i of n)try{fo(s);const e=await t(i,this.sut,s);if(e){const t=i.nut(e);if(await this.Tot.Bet(t.zu,t.Qht))return{Mot:e,Zrt:i,zu:t}}}catch(t){yo(t),r=t}if(r)throw r}constructor(t,i,e,s){this.hut=t,this.sat=i,this.Tot=e,this.sut=s}};function fQ(t){return void 0!==t.Gf}function _Q(t,i){const e=t.ji&&i.ji,s=t.Ti&&i.Ti;if(e||s){if(e&&s)return t.ji*t.Ti-i.ji*i.Ti;if(e)return t.ji-i.ji;if(s)return t.Ti-i.Ti;return(t.ji||1)*(t.Ti||1)-(i.ji||1)*(i.Ti||1)}return 0}function gQ(t,i){return _Q(t,i)||function(t,i){return t.wP-i.wP}(t,i)}var wQ=class t{rut(i,e,s,n){let r=t.sortByQuality(i);if(void 0!==this.uut&&void 0===e&&i.length>1){const i=t.cut(r,this.uut);i&&(r=i)}const h=this.aut(r,e,s,n);return h.length?h[h.length-1]:r[0]}aut(i,e,s,n){var r;const h=t.sortByQuality(i),o={tot:void 0===n||this.lut.Kht?this.lut.tot:n,Gf:fQ(s)&&s.Gf?s.Gf:1,fut:s.ji,_ut:s.Ti,gut:null==(r=this.wut)?void 0:r.restrictToPlayerSize};let a=h;for(const t of this.vut)a=t(a,e,o,this.vit,this.Aut);return a}static mut(i){return t.sortByQuality(i)[0]}static yut(i,e){var s;return e?t.mut(null!=(s=t.cut(i,e))?s:i):t.mut(i)}static cut(t,i){for(const e of i){const i=t.filter((t=>ui(t.uit,e)));if(i.length>0)return i}}static sortByQuality(t){const i=[...t];return i.sort(gQ),i}constructor(t,i,e,s,n,r){this.vut=t,this.lut=i,this.vit=e,this.wut=s,this.uut=n,this.Aut=r}},vQ=(t,i,e,s,n)=>t.filter((t=>n.mq(t)&&s.nit(i,t))),AQ=(t,i,e)=>t.filter((t=>function(t,i,e){const s=e.tot;if(s<=0)return!1;return.8*s>t.wP*e.Gf}(t,0,e)));var mQ=(t,i,e,s,n)=>{const r=e.gut;if(void 0===r&&!s.Qs)return t;if(!1===r)return t;if(t.length>0&&t[0].Rg!==fi.ym)return t;for(let i=t.length-1;i>=0;i--){const s=t[i];if(s.Ti===e._ut&&s.ji===e.fut)return t.slice(0,i+1);if(s.Ti<e._ut||s.ji<e.fut)return t.slice(0,i+2)}return[]},pQ=class{async Bat(t,i,e,s){let n;for(const r of this.Mut)try{const n=await r.Bat(t,i,e,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.Mut=t}},yQ=class{async Tut(t,i,e,s){let n;for(const r of this.Nut)try{return await r.Tut(t,i,e,s)}catch(t){yo(t),n=t}throw n}constructor(t){this.Nut=t}},MQ=class{async Tut(t,i,e,s){var n;const r=await this.EI.LS({zu:t,wI:oe.WS,_I:i?{Range:"bytes="+i[0]+"-"+(null!=(n=i[1])?n:"")}:void 0,pI:e,gI:yt.GET,Rg:sa.hT,Wd:s});return await r.gj()}constructor(t){this.EI=t}},TQ=class{async Tut(t,i,e,s){const n=await this.Tot.Uet(t,i);if(n)return n.buffer;if(i){const e=await this.Tot.Uet(t);if(e)return Tg(new j(e.buffer),i[0],i[1])}throw new Oo({zu:t,Qht:i,pI:!1})}constructor(t){this.Tot=t}};var NQ=1.05,DQ=(t,i,e,s)=>{if(!1===e.gut)return t;if(s.Ktt)return t;const n=s.Jtt;var r;const h=(null!=(r=null==n?void 0:n.width)?r:e.fut)*NQ;var o;const a=(null!=(o=null==n?void 0:n.height)?o:e._ut)*NQ;for(let i=t.length-1;i>=0;i--){const e=t[i];if(e.Ti<=a&&e.ji<=h)return t.slice(0,i+1)}return[]},SQ=class{static c9(t,e,s,n,r,h,o,a,u,c){const l=function(t,i){return new yQ([new TQ(i),new MQ(t)])}(h,o),d=new wQ([vQ],r,i.Ys,a,u,c),f=new dQ(d,e,o,l),_=new wQ([AQ,vQ,mQ,DQ],r,i.Ys,a,u,c),g=new lQ(_,e,n,l),w=new pQ([f,g]);return new nQ(t,s,w)}},IQ=class{Dut(t,i,e,s){return this.sat.Dut(t,i,e,s)}Sut(t,i,e){return this.sat.dnt(t,i,e)}Iut(t,i,e){return this.sat.Iut(t,i,e)}Vq(t,i){this.sat.Vq(t,i)}Wq(t,i){this.sat.Wq(t,i)}n$(){this.sat.n$()}VW(){return this.sat.VW()}constructor(t){this.sat=t}},rc=class extends wn{constructor(t,i,e,s,n,r=0){super(Co.Mw),this.segmentStartTime=t,this.error=i,this.trackType=e,this.track=s,this.quality=n,this.retryCount=r}},EQ=class extends wn{constructor(t,i){super(Co.Yg),this.track=t,this.segments=i}},bQ=class extends Jo{constructor(t,i){super(i),this.Eut=t}},LQ=[Co.Tw,Co.Dw],kQ=class extends Bo{get hht(){return this.but}get aht(){return this.Lut}set dht(t){this.kut.dht=t}get dht(){return this.kut.dht}get ght(){return this.cht.Lt.ght}xut(t){return!this.IJ||!t||!Tu(this.IJ.Fnt,t.Fnt)}xht(t){if(!this.but)return!1;const i=this.but.Mot,e=Ai.LB(i.VT,i.WT),s=this.Cut.nat,n=s.vB(t);return n<0?e.gr(t,tQ):e.pB(t,s.jn(n),!0,!0,tQ)}async bht(t){const i=this.cht.Lt.rrt;for(;;)try{fo(t),this.Cht();if(this.Oht())break;const e=this.Out(),s=await this.Bat(e,t);if(void 0===s)break;if(this.but=s,!xQ(this.but)){await this.jut(this.but,t);continue}this.Lut&&!ui(this.Lut.Zrt.HP,this.but.Zrt.HP)&&await this.Aut.yq(this.but.Zrt),await this.Put(e,this.but.Mot,t),this.IJ=await this.zut(this.but.Zrt,t);const n=await this.fot(this.but,t),r=this.Cut.wf,h=this.Lut;this.Lut=await this.But(n,t);const o=this.Cut.wf;this.Rut(h,this.but,r,o),i.forEach((t=>t.Hat=!1)),this.Uut=0,this.Qut=0}catch(e){if(e instanceof SU){this.l$(e.Cn,e.jn,e.Zrt);continue}if(e instanceof bQ){let s=500;if(i.every((t=>t.Hat))){if(2===this.Uut){const t=this.Cut.wf;if(this.Fut(this.but),this.Rut(this.Lut,this.but,t,t),i.forEach((t=>t.Hat=!1)),this.Qut+=1,this.Uut=0,this.Qut===this.Yut.maxRetries)throw new Rs(Ui.MEDIA_LOAD_ERROR,"The segments could not be loaded.",e);continue}this.Uut++;const t=this.Yut.minimumBackoff*2**(this.Uut-1);s=_.min(t,this.Yut.maximumBackoff)}await N(s,t);continue}throw this.Gut=Ai.kB(),e}finally{this.but=void 0}}Rut(t,i,e,s){const n=s.wB(e),r=i.Zrt.Vut(i.Mot),h=i.Zrt.Fat(i.Mot);let o=i.Mot.VT,a=i.Mot.WT;r&&(o=_.min(o,_.max(0,i.Zrt.Yat.Cn-.05))),h&&(a=_.max(a,i.Zrt.Yat.jn));const u=Ai.LB(o,a).wB(s);if(0===n.U)return 0===this.Gut.U&&this.Gut._B(Ai.LB(e.jn(e.U-1),o)),this.Gut=this.Gut._B(u),void this.cht.Cat(this.Gut);if(r||this.Gut.U>0){const t=u.Sn(Ai.LB(o,n.Cn(0)));this.Wut(t)}const c=n.cB().Sn(Ai.LB(n.Cn(0),n.jn(n.U-1)));if(this.Wut(c),h){const t=u.Sn(Ai.LB(n.jn(n.U-1),a));this.Wut(t)}if(this.Gut.U>0){const t=this.Gut.wB(n);this.Wut(t),this.Gut=Ai.kB()}const l=i.Zrt._nt,d=T(i.Mot)?void 0:l.tut(i.Mot);var f;const g=null!=(f=null==t?void 0:t.Mot)?f:this.Hut(d)?d:void 0;if(g){const t=this.cht.Eat(g.VT,g.WT);if(t.length>0){const i=Ai.LB(t[t.length-1].Iat,n.Cn(0));this.Wut(i)}}const w=T(i.Mot)?void 0:l.iut(i.Mot);if(w&&this.Hut(w)){const t=this.cht.Eat(w.VT,w.WT);if(t.length>0){const i=Ai.LB(n.jn(n.U-1),t[0].Sat);this.Wut(i)}}}Hut(t){return!!t&&this.cht.Eat(t.VT,t.WT).length>0}Wut(t){const i=t.wB(this.Cut.wf);for(let t=0;t<i.U;t++)i.Cn(t)!==i.jn(t)&&this.qut.Vq(i.Cn(t),i.jn(t))}Xut(t,i){throw new bQ(t,i)}Cht(){if(this.Gut.U>0)return;var t;const i=this.Cut.nat._B(null!=(t=this.Cut.Yq.aB().Mv(this.Cut.oat))?t:Ai.kB());this.cht.mat(i),this.Zut&&!this.Kut(this.Zut)&&(this.Zut=void 0),this.Co(new EQ(this.cht.Lt.ght,this.cht.bat()))}Oht(){return this.Lut&&this.Lut.Zrt.Fat(this.Lut.Mot)?(this.qut.n$(),!0):(this.Zut&&this.Zut.Zrt.Fat(this.Zut.Mot)&&this.Kut(this.Zut)&&this.qut.n$(),!!this.Cut.rat)}Kut(t){return this.cht.pat.AB(t.Jut,t.$ut)}tct(t,i,e){(!this.Zut||this.Zut.Mot.WT<t.Mot.WT)&&(this.Zut=Yt({},t,{Jut:i,$ut:e}))}Out(){const t=this.Cut.oat;return t}async Bat(t,i){fo(i);const e=this.Lut?this.Lut.Zrt:void 0,s=await this.kut.Pat(t,e,i);if(s)return s}async jut(t,i){const e=t.Zrt,s=e._nt,n=T(t.Mot)?s.Jat(t.Mot):t.Mot,r=e.ect.ict(),h=s.sct(n);if(h&&h.getTime()<=r.getTime())return this.Xut(Zn.grt,"Segment is not available.");const o=s.nct(n).getTime()-r.getTime();await Vh((t=>Promise.race([N(o,t),e.lf(ye.Vrt,t)])),i)}async zut(t,i,e){void 0===e&&(e=0),fo(i);const s=t.rct;if(!s)return this.IJ;try{if(!t.hct){const e=await this.act.got(s,i);t.hct=e.zm}}catch(s){if(yo(s),tl(s)){if(2===e)return t.Hat=!0,this.Xut(Zn.Trt,"Could not fetch the initializer.");const s=_.min(this.Yut.minimumBackoff*2**e,this.Yut.maximumBackoff);return await N(s,i),this.zut(t,i,e+1)}throw new Rs(Ui.MEDIA_LOAD_ERROR,s.message,s)}fo(i);try{this.xut(t.hct)&&await this.qut.Sut(t.hct,t,i)}catch(t){if(yo(t),tl(t))return this.Xut(Zn.Trt,"Could not append the initializer.");throw new Rs(Ui.MEDIA_DECODE_ERROR,t.message,t)}return t.hct}async fot(t,i,e){void 0===e&&(e=0);try{return fo(i),await this.act.fot(t,i)}catch(s){if(yo(s),s instanceof KU){if(function(t){return t instanceof kh}(s.cause))return this.uct(new KU(s,t.Mot,t.Zrt),e),this.Xut(Zn.grt,"Could not append the segment.");if(2===e)return t.Zrt.Hat=!0,this.uct(s,e),this.Xut(Zn.grt,"Could not fetch the segment.");const n=_.min(this.Yut.minimumBackoff*2**e,this.Yut.maximumBackoff);return await N(n,i),await this.fot(t,i,e+1)}throw new Rs(Ui.MEDIA_LOAD_ERROR,s.message,s)}}async Put(t,i,e){const s=this.cht.Eat(i.VT,i.WT),n=this.Cut.nat.Mv(t);let r=Ai.kB();for(const t of s){fo(e);const i=t.Sat,s=t.Iat,h=n&&n.pB(i,s)?_.max(i,n.jn(0)):i,o=s;h<o&&(r=r._B(Ai.LB(h,o)))}for(let t=0;t<r.U;t++)await this.qut.Iut(r.Cn(t),r.jn(t),e);this.Cht()}async But(t,i){try{fo(i);const e=await this.qut.Dut(t.Not,t.Mot,t.Zrt,i);return this.cct(t,e.Jut,e.$ut),this.tct(t,e.Jut,e.$ut),t}catch(i){if(yo(i),tl(i))return this.uct(new KU(i,t.Mot,t.Zrt),0),this.Xut(Zn.grt,"Could not append the segment.");if(mh(i)&&this.qut.VW())return this.Xut(Zn.vrt,"Buffer is full. Could not reduce the buffer.");throw new Rs(Ui.MEDIA_DECODE_ERROR,i.message,i)}}cct(t,i,e){const s=t.Zrt,n=t.Mot;this.Lat(n,s,i,e)}Lat(t,i,e,s){this.cht.Lat({Tat:t.VT,Nat:t.WT,Sat:e,Iat:s,Oat:!0},i),this.qut.Wq(e,s)}l$(t,i,e){const s=Ai.LB(t,i);e?this.cht.Vq(s,e):this.cht.Cat(s),this.qut.Vq(t,i)}Fut(t){const i=Ai.LB(t.Mot.VT,t.Mot.WT);t.Zrt?this.cht.Vq(i,t.Zrt):this.cht.Cat(i)}uct(t,i){const e=t.Wot,s=this.cht.Lt.ght,n=this.cht.Lt.va,r=t.qot.Zrt&&t.qot.Zrt.va,h=new rc(e,t.message,s,n,r,i);this.Co(h)}tr(){this.IJ=void 0,this.Lut=void 0}gn(){this.tr(),this.Zut=void 0,this.act.fn(LQ,this.Ds),this.act.gn()}constructor(t,i,e,s,n,r,h,o){super(),this.kht=t,this.cht=i,this.Cut=e,this.kut=s,this.act=n,this.qut=r,this.Aut=h,this.Yut=o,this.but=void 0,this.IJ=void 0,this.Lut=void 0,this.Zut=void 0,this.Uut=0,this.Qut=0,this.Gut=Ai.kB(),this.act.yn(LQ,this.Ds)}};function xQ(t){const i=t.Zrt,e=i._nt,s=T(t.Mot)?e.Jat(t.Mot):t.Mot;return e.lct(s,i.ect.ict())}var CQ=0,OQ=class{c9(t){const i=CQ++,e=this.sat.h$,s=new sQ(t),n=new xU(e,this.dct),r=new iQ(this.sat,this.c2,this.D$,this.QB),h=SQ.c9(i,this.sat,s,this.QB,n,this.EI,this.Tot,this.wut,this.uut,this.Aut),o=function(t){switch(t){case fi.Mm:return ls.Mm;case fi.ym:return ls.ym;case fi.Ru:return ls.Ru;case fi.rT:return ls.rT;default:return ls.hT}}(e),a=new LU(this.EI,o),u=this.iat(a,n,this.dct),c=new IQ(this.sat),l=new kQ(i,s,r,h,u,c,this.Aut,this.Yut);return new bU(i,t.Zot,s,l,this.c2)}constructor(t,i,e,s,n,r,h,o,a,u,c){this.sat=t,this.c2=i,this.D$=e,this.EI=s,this.QB=n,this.dct=r,this.Tot=h,this.wut=o,this.uut=a,this.Aut=u,this.Yut=c}},jQ=class extends OQ{iat(t,i,e){return(new $U).iat(t,this.sat,i,e,this.Tot)}},PQ=class extends OQ{fct(t,i){const e={ght:fi.Ru,Zot:i,rrt:i.rrt,va:t.va};return super.c9(e)}iat(t,i){return(new $U).iat(t,this.sat,i,!1,this.Tot)}};var zQ=class{mq(t){return this.tnt.mq(t)}yq(t){return this.tnt.yq(t)}constructor(t){this.tnt=t}},hc=class{mq(t){return!0}yq(t){return Promise.resolve(void 0)}},BQ=class extends hl{fa(){return new RQ(this.Ng.map((t=>t.va)))}constructor(t,i){super(qt.rg),this.Ng=t||[],this.Lt=i}},RQ=class extends wn{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}},UQ=class extends ja{fa(){return new QQ(this.quality.va)}constructor(t){super(qt.QUALITY_UNAVAILABLE),this.quality=t}},QQ=class extends Y{constructor(t){super("qualityunavailable"),this.quality=t}},oc=class extends wn{constructor(){super(qt.NO_QUALITY)}};function bc(t){return{wP:t.wP,uit:t.Mst,Ti:FQ(t)?t.Ti:0,Rg:FQ(t)?fi.ym:fi.Mm,ji:FQ(t)?t.ji:0}}function FQ(t){const i=t;return void 0!==i.Ti&&void 0!==i.ji}var YQ=0,GQ=class extends Bo{get Tg(){return this.Nht._ct.map(VQ).filter(Po)}gct(t){for(const i of t)i.yn("update",this.wct),this.IT.ET(i)}vct(t){if(!this.IT.LT(t))return;t.GS();const i=this.Act();if(this.mct&&qo(this.mct,t)){const t=this.mct.filter((t=>t.Net));0===t.length&&i.length>0?this.Dg=i:this.Dg=t}else this.Dg=i;this.Co(new UQ(t))}pct(t){if(!this.IT.LT(t))return;const i=this.Act();t.YS(),this.mct&&!function(t,i){return Ad(t,i,((t,i)=>t===i))}(this.mct,i)||(this.Dg=this.Act())}Act(){const t=[];for(const i of this.IT.og)i.Net&&t.push(i);return t}get yg(){return this.yct}Mct(t){this.yct=t.Zrt,this.Co(t)}get Zot(){return this.Nht}get Rt(){return this.Le}set Rt(t){this.zT(t)}get va(){return this.Xa||(this.Xa=ni(this)),this.Xa}get Tct(){return this.Nct}set Tct(t){this.Nct=t}get o(){return this.CT}get Mg(){return this.OT}get zt(){return this.q0}get gs(){return this.ZL}get kh(){return this.jT}set kh(t){t!==this.jT&&(this.jT=t,this.Co(new Ks(this)))}get jg(){return this.Rt?"enabled":"disabled"}get Dg(){return this.mct}set Dg(t){let e=[];if(t){const s=(null!=t?t:[]).filter((t=>{const e=this.yg?bc(this.yg):void 0;return i.Ys.nit(e,bc(t))}));if(0===s.length)return;e=s.filter((t=>t.Net))}else e=this.Act();0===e.length&&this.Co(new oc),this.mct=t&&this.IT.LT(t)?t:void 0,this.Dct=this.Sct(this.mct),this.Co(new BQ(t,this))}get Ict(){return this.Dct}Sct(t){if(!t||0===t.length)return;const i=[];for(const e of this.rrt)for(const s of t)s===e.Zrt&&s.Net&&i.push(e);return i}get Ng(){return this.IT}get rrt(){return this.Ect}bct(t){this.Lct.push(t),this.Ect.push(...t.rrt);const i=t.rrt.map((t=>t.Zrt));this.gct(i)}get ght(){return this.kct}get xct(){return this.Lct}get Cct(){return this.rrt.every((t=>t.Cct))}zT(t){this.Le=t,this.Nct&&(t?this.Nct.YS(this):this.Nct.GS(this))}Oct(t){this.Le=t,this.jct!==t&&(this.jct=t,this.Co(new no(this)))}gn(){for(const t of this.IT.og)t.fn("update",this.wct);this.IT.tr()}constructor(t,i,e="alternative"){super(),this.yct=void 0,this.Le=!1,this.Xa=void 0,this.Nct=void 0,this.CT="",this.jct=!1,this.IT=new Uw,this.Ect=[],this.mct=void 0,this.Dct=void 0,this.wct=()=>this.Co(new Ks(this)),this.Lct=[],this.Nht=t,this.CT=String(YQ++),this.OT=Xc(),this.q0=e,this.ZL=t.Y6,this.jT=t.kh,this.kct=t.Rg,this.Ect=t.rrt,this.gct(i)}};function VQ(t){if("urn:mpeg:dash:role:2011"===t.Nst)return WQ(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.Nst){if("1"===t.PM)return sl.Ig;if("2"===t.PM)return sl.Lg}}function WQ(t){if(void 0!==(null==t?void 0:t.PM))switch(t.PM){case"caption":return sl.Sg;case"sign":return sl.Eg;case"description":return sl.Ig;case"enhanced-audio-intelligibility":return sl.Lg;default:return}}var ku,$o,HQ=class extends MU{get jP(){const t=this.c2.Mf;return this.nat.Mv(t,.01)}get Pct(){return this.Vnt&&this.zct[this.Vnt.Mg]?this.zct[this.Vnt.Mg]:Ai.kB()}get Bct(){return this.Vnt&&this.Rct[this.Vnt.Mg]?this.Rct[this.Vnt.Mg]:Ai.kB()}get uat(){return new Ai([0,1/0])}get wf(){return this.Pct}get Yq(){return this.Uct?this.Uct.uht.Yq.dat:Ai.kB()}get nat(){return TU(this.wf,this.Yq).fB(2*this.Qct)}get Cn(){return this.Hnt?this.Hnt.Yat.Cn:NaN}get jn(){return this.Hnt?this.Hnt.Yat.jn:NaN}get Sf(){const t=this.jn;return!!t&&this.c2.Mf>=t}get Qct(){var t;const i=this.ert();if(!i)return.04;var e;return 1/(null!=(e=this.Vnt&&(null==i||null==(t=i.Fct)?void 0:t.mN()))?e:25)}get Ti(){return this.vk}get h$(){return fi.Ru}get Gf(){return this.PB}set Gf(t){this.PB=t}get Hf(){return this.Bct}get t_(){if(!this.Vnt)return Ai.bB(0);const t=this.irt(this.Vnt),i=null==t?void 0:t.Yct,e=null==t?void 0:t.Gct;if(void 0===e||void 0===i)return Ai.bB(0);const s=_.max(i,this.c2.Mf);return new Ai([e,s]).aB()}get ji(){return this.wk}n$(){}aat(){return this.nat.gr(this.jn)}async Dut(t,i,e,s){const n=t.Rg===G.dq?t.zm.Fnt:await t.zm.gj(s),r=this.findTrackForRepresentation(e),h=this.zct[r.Mg],o=i.VT,a=i.WT,u=new Ai([o,a]);h||(this.zct[r.Mg]=Ai.kB(),this.Rct[r.Mg]=Ai.kB()),this.rnt(s);const c=this.fnt(new j(n),i,e,r);for(const t of c)r.kI(t);return this.zct[r.Mg]=this.zct[r.Mg]._B(u),{Jut:o,$ut:a}}rnt(t){const i=wL(this.c2.Mf,void 0,void 0,this.wf,this.QB.UW,this.QB.OW);for(const[e,s]of i)ha(this.Iut(e,s,t))}dnt(t,i,e){return this.Vct.dnt(t,i,e)}fnt(t,i,e,s){return this.Vct.fnt(t,i,e,s)}Iut(t,i,e){const s=t,n=i;let r=new Ai([t,i]);for(const t of this.Z.og){const i=[];for(const e of t.L.og)e.VT>=s&&e.WT<=n?i.push(e):r=r.wB(new Ai([e.VT,e.WT]));for(const e of i)t.PS(e);const e=this.zct[t.Mg];e&&(this.zct[t.Mg]=e.wB(r))}return Promise.resolve()}Vq(t,i){}Wq(t,i){}VW(){return!1}YS(t){if(super.YS(t),this.Vct.tr(),this.Uct&&(this.Uct.gn(),this.Uct=void 0),this.Vnt){const t=this.irt(this.Vnt);this.Uct=new PQ(this,this.c2,this.c2,this.EI,this.QB,!1,this.Tot,void 0,void 0,new hc,bw).fct(this.Vnt,t),this.Uct.yn(Nt.ha,this.Wct),this.Uct.Cn(Zn.art)}}GS(t){this.Vnt===t&&(super.GS(t),this.Uct&&(this.Uct.gn(),this.Uct=void 0))}Znt(t){const i=function(t){const i=t.rrt&&t.rrt.length>0&&t.rrt[0],e=i&&RA(i.Mst),s=RA(t.Mst),n=t.zF===We.APPLICATION_TTML_XML;return e||s||n?Wt.TTML:t.zF===We.TEXT_VTT||Sr(t.zF,t.Mst)?Wt.WEBVTT:Wt.DEFAULT}(t);if(!i)throw new g("Unknown TextTrack type for Representation");const e=t.Hct.concat(t._ct);return this.qct(function(t){return qo(t.filter((t=>"urn:mpeg:dash:role:2011"===t.Nst)).map((t=>t.PM)).filter(Po),"caption")?Mi.NS:Mi.Tm}(e),t.kh,t.Y6,!1,i,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.Nst)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.PM)))}(t.Hct),t._ct.map(WQ).filter(Po))}async tr(){await super.tr(),this.Uct&&(await this.Uct.tr(Zn.Lrt),this.Uct.fn(Nt.ha,this.Wct),this.Uct=void 0),this.Hnt=void 0,this.zct={},this.Rct={}}Xct(){this.zct={},this.Rct={}}findTrackForRepresentation(t){for(const i of this.Z.og){const e=this.irt(i);if(e&&MU.nrt(e)===t)return i}}constructor(t,i,e,s,n){super(),this.vk=0,this.PB=1,this.Uct=void 0,this.zct={},this.Rct={},this.wk=0,this.Wct=t=>{0},this.c2=t,this.EI=i,this.QB=e,this.Vct=s,this.Tot=n}},qQ=class extends HQ{qct(t,i,e,s,n,r,h,o){var a;const u=r.rrt.reduce(((t,i)=>t||i.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.SI.DI(t,l,i,e,s,n,h,o)}gn(){for(const t of this.Z.og)this.SI.CI(t);return super.gn()}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.SI=r}},XQ=class{get nt(){return this.Dl}async II(t){if(t.Rg!==fi.Ru)return;const i=function(t,i){return RA(i)||t===We.APPLICATION_TTML_XML||t===We.TEXT_VTT?new mU:Sr(t,i)?new pU:void 0}(t.zF,t.Mst);if(i){const e=this.Zct(i);return this.Kct(e),await e.$n(t),e}}Zct(t){return new qQ(this.c2,this.EI,this.QB,t,this.Tot,this.SI)}Kct(t){this.Jct.push(t),this.Dl.DP(t.Z)}async tr(){for(const t of this.Jct.slice())await t.tr();No(this.Jct),this.Dl.tr()}async gn(){for(const t of this.Jct)await t.gn();No(this.Jct),this.Dl.gn()}constructor(t,i,e,s,n){this.Jct=[],this.Dl=new ms([]),this.c2=t,this.EI=i,this.QB=e,this.Tot=s,this.SI=n}},ZQ=class extends wn{constructor(t){super(Co.dw),this.error=t}};!function(t){t.ZC="static",t.KC="dynamic"}(ku||(ku={})),($o||($o={})).$ct="tlt";var KQ=class extends wn{constructor(){super($o.$ct)}},JQ=0;var cn,ft,$Q,tF=class extends wn{constructor(t,i){super(Co.Aw),this.representation=t,this.previousRepresentation=i}};function iF(t,i,e){return e===cn.ilt?e:i!==ft.elt&&i!==ft.slt||e!==cn.nlt&&e!==cn.rlt?t?i===ft.hlt?cn.olt:i===ft.ult?cn.clt:cn.ilt:cn.llt:cn.rlt}function eF(t,i,e,s){const n={byte:e};let r=cn.nlt;const h=[],o=31&ds(i,n,s);n.byte+=1;for(let e=0;e<o;e+=1){const o=ds(i,n,s),a=4&o,u=3&o;r=iF(Boolean(a),u,r);const c=ds(i,n,s),l=ds(i,n,s);h.push({dlt:t,MM:-1,flt:!e,_lt:Boolean(a),Rg:u,glt:r,wlt:c,vlt:l})}return h}function sF(t,i,e){const s=ds(t,i,e);if(!S(s))return String.fromCharCode(s)}function nF(t){const i=t.eK,e={byte:t.tK},s=t.iK,n=ds(i,e,s);if(255===n&&(e.byte+=1),181!==n)return;const r=Ck(i,e);if(47!==r&&49!==r)return;if(49===r){const t=function(t,i,e){let s="",n=e;for(;n>0;)n-=1,s+=sF(t,i);return s}(i,e,4);if("GA94"!==t)return}if(3!==ds(i,e,s))return;47===r&&(e.byte+=1);const h=t;return h.Alt=e.byte,h}function rF(t){return 4===t.JZ}function hF(t){const i=t.filter(rF).map(nF).filter(Po),e=[];for(const t of i)e.push(...eF(t.KZ,t.eK,t.Alt,t.iK));return e}!function(t){t[t.ilt=0]="ilt",t[t.nlt=1]="nlt",t[t.rlt=2]="rlt",t[t.clt=3]="clt",t[t.olt=4]="olt",t[t.llt=5]="llt"}(cn||(cn={})),function(t){t[t.elt=0]="elt",t[t.slt=1]="slt",t[t.hlt=2]="hlt",t[t.ult=3]="ult"}(ft||(ft={})),function(t){t[t.plt=47]="plt",t[t.ylt=49]="ylt"}($Q||($Q={}));var oF="und";function aF(t){if(t===oF)return;const i=t.toLowerCase();for(const t of uF)if(t[1]===i||t[2]===i||t["2T"]===i||t["2B"]===i||t[3]===i)return t}var uF=[{l:"Abkhaz",lh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",lh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",lh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",lh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",lh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",lh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",lh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",lh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",lh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",lh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",lh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",lh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",lh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",lh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",lh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",lh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",lh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",lh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",lh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",lh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",lh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",lh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",lh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",lh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",lh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",lh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",lh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",lh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",lh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",lh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",lh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",lh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",lh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",lh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",lh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",lh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",lh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",lh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",lh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",lh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",lh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",lh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",lh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",lh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",lh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",lh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",lh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",lh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",lh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",lh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",lh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",lh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",lh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",lh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",lh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",lh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",lh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",lh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",lh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",lh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",lh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",lh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",lh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",lh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",lh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",lh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",lh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",lh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",lh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",lh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",lh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",lh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",lh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",lh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",lh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",lh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",lh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",lh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",lh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",lh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",lh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",lh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",lh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",lh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",lh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",lh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",lh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",lh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",lh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",lh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",lh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",lh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",lh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",lh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",lh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",lh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",lh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",lh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",lh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",lh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",lh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",lh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",lh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",lh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",lh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",lh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",lh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",lh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",lh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",lh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",lh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",lh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",lh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",lh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",lh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",lh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",lh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",lh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",lh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",lh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",lh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",lh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",lh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",lh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",lh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",lh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",lh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",lh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",lh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",lh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",lh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",lh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",lh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",lh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",lh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",lh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",lh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",lh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",lh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",lh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",lh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",lh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",lh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",lh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",lh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",lh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",lh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",lh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",lh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",lh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",lh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",lh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",lh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",lh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",lh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",lh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",lh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",lh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",lh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",lh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",lh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",lh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",lh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",lh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",lh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",lh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",lh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",lh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",lh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",lh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",lh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",lh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",lh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",lh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",lh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",lh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",lh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",lh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",lh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",lh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",lh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",lh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",lh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",lh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];function cF(t){var i;const e=null!=(i=function(t){const i=t.EZ,e=new cu;return e.YZ(i,0,i.byteLength),Gk(e).vK}(t))?i:24;return t.Mlt/e}function lF(t){return t.Rg===he.$A}var dF;function fF(t,i,e,s,n){const r=function(t,i,e,s){const n=e.Mlt,r=Ce.fromNumber(t.OM||0),h=s.ET(is.ON(r,n));return{Tlt:s.mN(),Nlt:s,Dlt:h,Slt:s}}(t,0,e,s),h=is.jN(t.ct||0,e.Mlt),o=t.fp||0,a=!(65536&o)&&1!==(o>>24&3);let u;const c=Ao(n),l=new _s;for(;l.Ku<c.byteLength;){const t=aa(c,l);if((31&rg(c,l,1))===Ok.aK){const i=new cu;i.YZ(n,l.Ku-1,l.Ku+t-1);const e=new Yk(i),s=Bk(r.Dlt,e);u=u||[],u.push(...hF(s))}l.Im(t-1)}return Yt({},r,{ct:h.mN(),Ilt:h,Elt:r.Dlt.mN(),blt:r.Tlt,Llt:a,klt:u,xlt:!1,Clt:!1})}function _F(t){return{Fp:t.rp.Fp,Mlt:t.Bp.rp.xp}}function gF(t){return t.Rg===he.pA}!function(t){t[t.SAMPLE_DEPENDS_ON_UNKNOWN=0]="SAMPLE_DEPENDS_ON_UNKNOWN",t[t.SAMPLE_DEPENDS_ON_OTHERS=1]="SAMPLE_DEPENDS_ON_OTHERS",t[t.SAMPLE_DEPENDS_ON_NO_OTHER=2]="SAMPLE_DEPENDS_ON_NO_OTHER",t[t.SAMPLE_DEPENDS_ON_RESERVED=3]="SAMPLE_DEPENDS_ON_RESERVED"}(dF||(dF={}));var Do=class{aN(t){return this.K6===t.K6&&this.U6===t.U6}constructor(t,i){this.K6=t,this.U6=i}},wF=class{get d8(){return this.Olt}get o8(){return[this]}get c8(){return this.oq}get V6(){return this.jlt}get q6(){return new Do(this.V6.K6,this.V6.U6+this.d8.length-1)}Plt(t){this.Olt+=t}zlt(t){for(const i of t)this.Plt(i)}constructor(t,i){this.oq=t,this.jlt=i,this.Olt=""}};function vF(t,i){return t===i||t.d8===i.d8&&t.V6.aN(i.V6)&&Dc(t.c8,i.c8)}function AF(t,i){return t===i||t.V6.aN(i.V6)&&t.q6.aN(i.q6)&&Ad(t.o8,i.o8,vF)}var mF=class extends je{uN(t){return Ad(this.O,t.O,AF)}constructor(t,i,e){super(t,i,e,!1)}},pF=class{Blt(t){return t.CD(this)}Rlt(t){return A(t,((t,i)=>t.CD(this,i)))}Ult(t,i){return new yF(t,i).Qlt()}},yF=class{Qlt(){if(this.Flt)return[];for(let t=0;t<this.K6.length;t++)this.Ylt(t);return this.Glt(),this.Vlt}Wlt(t){this.Hlt=new wF(Sj,new Do(this.qlt,t))}Glt(){this.Hlt&&(this.Vlt.push(this.Hlt),this.Hlt=null)}Ylt(t){const i=this.K6[t];MF(i)?this.Hlt&&this.Glt():(this.Hlt||this.Wlt(t),this.Hlt.Plt(i))}get Flt(){return this.K6.every(MF)}constructor(t,i){this.K6=t,this.qlt=i,this.Vlt=[],this.Hlt=null}};function MF(t){return null==t}var TF=class{static Xlt(t,i,e){if(i>=e)return;const s=A(t,((t,i)=>new yF(t.map((t=>t?t.Zlt():null)),i).Qlt()));return 0!==s.length?new mF(i,e,s):void 0}},fn="black",Fa="white",NF=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,i)=>(t[i[0]]=i[1],t)),{}),DF=class{Klt(t){for(let i=0;i<Mh;i++)t&&(this.Jlt[i]=t.Jlt[i])}aN(t){for(let i=0;i<Mh;i++)if(this.Jlt[i]!==t.Jlt[i])return!1;return!0}$lt(){for(let t=0;t<Mh;t++)if(null!==this.Jlt[t])return!1;return!0}tdt(t){this.idt!==t&&(this.idt=t),this.idt<0?this.idt=0:this.idt>Mh&&(this.idt=31)}edt(t){const i=this.idt+t;this.tdt(i)}sdt(){this.edt(-1),this.Jlt[this.idt]=null}Plt(t){t>=144&&this.sdt();const i=function(t){return NF[t]?String.fromCharCode(NF[t]):String.fromCharCode(t)}(t);this.addParsedChar(i)}addParsedChar(t){this.idt>=Mh||(32===Number(t)?(this.Jlt[this.idt]=this.ndt?"</i>":"<i>",this.ndt=!this.ndt):this.Jlt[this.idt]=t,this.edt(1))}rdt(t){for(let i=t;i<Mh;i++)this.Jlt[i]=null}Xb(){this.rdt(0),this.idt=0}hdt(){this.rdt(this.idt)}odt(t,i){const e=this.Jlt;let s=null;for(let n=0;n<Mh;n++){const r=e[n];null===r?s=null:(s||(s={Gh:n,Xh:t,ji:0,Ti:1,Jlt:[[]]},i.push(s)),s.Jlt[0].push(r),s.ji++)}}CD(t,i){return t.Ult(this.Jlt,i)}constructor(){this.Jlt=[],this.idt=0;for(let t=0;t<Mh;t++)this.Jlt.push(null);this.ndt=!1}};var SF,IF=class{adt(t,i){const e="CC"+(this.udt<<1|this.cdt+1);if(t>=i)return null;const s=(new pF).Rlt(this.ldt.slice(1));return 0===s.length?null:{GT:new mF(t,i,s),vV:e,ddt:this.udt<<1|this.cdt+1}}tr(){this.fdt(),this._dt=1}gdt(){return this._dt}wdt(t){this._dt=t}tdt(t){this.ldt[this._dt].tdt(t)}edt(t){this.ldt[this._dt].edt(t)}vdt(){return this.Adt}mdt(t){this.Adt=t}Plt(t,i){if(i<32||i>127)return;let e="";switch(t){case 0:e=void 0!==bF[i]?bF[i]:String.fromCharCode(i);break;case 1:e=LF[i];break;case 2:this.pdt(),e=kF[i];break;case 3:this.pdt(),e=xF[i]}e&&this.ldt[this._dt].addParsedChar(e)}pdt(){this.ldt[this._dt].sdt()}ydt(t,i,e){if(t>=i)for(let s=e-1;s>=0;s--)this.ldt[t+s]=this.ldt[i+s];else for(let s=0;s<e;s++)this.ldt[t+s]=this.ldt[i+s]}Mdt(t,i){for(let e=0;e<=i;e++)this.ldt[t+e]=new DF}fdt(){this.Mdt(0,So)}Tdt(){this._dt=this.Adt>0?this.Adt:0,this.fdt()}Ndt(t){this.Ddt=t}Sdt(t){this.Idt=t}Edt(t){this.bdt=t}Ldt(t){this.kdt=t}constructor(t,i){this.ldt=new Array(So+1);for(let t=0;t<=So;t++)this.ldt[t]=new DF;this._dt=1,this.Adt=0,this.udt=t,this.cdt=i,this.Ddt=!1,this.Idt=!1,this.bdt=Fa,this.kdt=fn,this.tr()}},So=15;!function(t){t[t.xdt=0]="xdt",t[t.Cdt=1]="Cdt",t[t.Odt=2]="Odt",t[t.jdt=3]="jdt"}(SF||(SF={}));var EF,bF={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},LF={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},kF={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},xF={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},Ia=class{tr(){this.Pdt=!0,this.zdt=0,this.$0=0,this.Bdt=this.Rdt,this.Udt=void 0,this.Rdt.tr(),this.Qdt.tr(),this.Fdt.tr()}Ydt(t,i){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|i>>5&1]}Gdt(t,i){const e=this.Ydt(t,i),s=(30&i)>>1;let n=Fa,r=!1;s<7?n=PF[s]:7===s&&(r=!0);const h=1==(1&i);if(4===this.$0)return;const o=this.Bdt;if(3===this.$0&&e!==o.gdt()){const t=1+o.gdt()-o.vdt(),i=1+e-o.vdt();o.ydt(i,t,o.vdt()),o.Mdt(0,i-1),o.Mdt(e+1,So-e)}o.wdt(e);const a=Ej[t<<1&14|i>>5&1]-1;if(a<0)return;const u=function(t,i){const e=i>95?i-96:i-64;return{R6:Ij[e].R6,B6:Ij[e].B6,U6:Ij[e].U6,K6:t}}(a,i);o.tdt(u.U6),this.Bdt.Ndt(h),this.Bdt.Sdt(r),this.Bdt.Edt(n),this.Bdt.Ldt(fn)}Vdt(t,i){this.Bdt.Ndt(!1),this.Bdt.Sdt(!1),this.Bdt.Edt(Fa);const e=this.Wdt(t,SF.xdt," ".charCodeAt(0));let s=Fa,n=!1;const r=1==(1&i);return s=PF[(14&i)>>1],"white_italics"===s&&(s="white",n=!0),this.Bdt.Ndt(r),this.Bdt.Sdt(n),this.Bdt.Edt(s),e}Wdt(t,i,e){if(this.Bdt.Plt(i,e),2===this.$0||3===this.$0){const i=this.Hdt(this.Bdt,this.zdt,t);return this.zdt=t,i}return null}Hdt(t,i,e){return this.Pdt?null:2===this.$0||3===this.$0?t.adt(e,e+10):t.adt(i,e)}qdt(t,i){let e=fn;0==(7&t)&&(e=jF[(14&i)>>1]),this.Bdt.Ldt(e)}Xdt(t){const i=CF,e=t.Zdt,s=t.Kdt;let n=null;switch(e){case i.RCL:this.Jdt();break;case i.BS:this.$dt();break;case i.AOD:case i.AON:case i.DER:break;case i.RU2:n=this.tft(2,s);break;case i.RU3:n=this.tft(3,s);break;case i.RU4:n=this.tft(4,s);break;case i.FON:n=this.ift(s);break;case i.RDC:this.eft(s);break;case i.TR:this.sft();break;case i.RTD:this.nft();break;case i.EDM:n=this.rft(s);break;case i.CR:n=this.hft(s);break;case i.ENM:this.oft();break;case i.EOC:n=this.aft(s)}return n}hft(t){const i=this.Bdt;if(3!==this.$0)return null;const e=this.Hdt(i,this.zdt,t),s=i.gdt()-i.vdt()+1;return i.ydt(s-1,s,i.vdt()),i.Mdt(0,s-1),i.Mdt(i.gdt(),So-i.gdt()),this.zdt=t,e}tft(t,i){this.Bdt=this.Rdt;const e=this.Bdt;let s=null;return 3!==this.$0&&4!==this.$0&&(s=this.Hdt(e,this.zdt,i),this.Rdt.Tdt(),this.Qdt.Tdt(),this.Pdt=!1,e.wdt(So)),this.$0=3,e.mdt(t),s}ift(t){return this.Wdt(t,SF.xdt," ".charCodeAt(0))}rft(t){const i=this.Rdt;let e=null;return 4!==this.$0&&(e=this.Hdt(i,this.zdt,t)),i.fdt(),this.Pdt=!1,e}eft(t){this.$0=2,this.Bdt=this.Rdt,this.Bdt.mdt(0),this.zdt=t}oft(){this.Qdt.fdt()}aft(t){let i=null;4!==this.$0&&(i=this.Hdt(this.Rdt,this.zdt,t));const e=this.Qdt;return this.Qdt=this.Rdt,this.Rdt=e,this.Jdt(),this.zdt=t,i}Jdt(){this.$0=1,this.Bdt=this.Qdt,this.Bdt.mdt(0)}$dt(){this.Bdt.pdt()}sft(){this.Fdt.tr(),this.Pdt=!1,this.nft()}nft(){this.Bdt=this.Fdt,this.$0=4}uft(t,i,e){return this.Bdt.Plt(SF.xdt,i),this.Wdt(t,SF.xdt,e)}cft(t,i,e){const s=1&i?SF.jdt:SF.Odt;return this.Wdt(t,s,e)}lft(t){const i=t.dft,e=t.Zdt,s=t.Kdt;if(this.Udt===(i<<8|e))return this.Udt=void 0,null;if(this.Udt=i<<8|e,this.fft(i,e))this.Gdt(i,e);else{if(this._ft(i,e))return this.Vdt(s,e);if(this.gft(i,e))this.qdt(i,e);else{if(this.wft(i,e))return this.Wdt(s,SF.Cdt,e);if(this.vft(i,e))return this.cft(s,i,e);if(this.Aft(i,e))return this.Xdt(t);this.isTabOffset(i)&&this.Bdt.edt(e-32)}}return null}isTabOffset(t){return 23===t||31===t}Aft(t,i){return 20==(246&t)&&32==(240&i)}fft(t,i){return 16==(240&t)&&64==(192&i)}_ft(t,i){return 17==(247&t)&&32==(240&i)}gft(t,i){return 16==(247&t)&&32==(240&i)||23==(247&t)&&45==(255&i)}wft(t,i){return 17==(247&t)&&48==(240&i)}vft(t,i){return 18==(246&t)&&32==(224&i)}static mft(t){return 16==(112&t)}constructor(t,i){this.$0=0,this.Fdt=new IF(t,i),this.Rdt=new IF(t,i),this.Qdt=new IF(t,i),this.Bdt=this.Rdt,this.zdt=0,this.Udt=void 0,this.Pdt=!1}},CF={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47};!function(t){t[t.Vz=0]="Vz",t[t.pft=1]="pft",t[t.yft=2]="yft",t[t.Mft=3]="Mft",t[t.Ru=4]="Ru"}(EF||(EF={}));var OF,jF=["black","green","blue","cyan","red","yellow","magenta","black"],PF=["white","green","blue","cyan","red","yellow","magenta","white_italics"],zF=class{Zlt(){return this.Tft}Nft(){return this.Ddt}Dft(){return this.Idt}Sft(){return this.kdt}Ift(){return this.bdt}constructor(t,i,e,s,n){this.Tft=t,this.Ddt=i,this.Idt=e,this.kdt=s,this.bdt=n}},BF=class{Eft(t,i,e,s,n,r,h){this.tB=t,this.bft=i,this.Lft=e,this.kft=s,this.xft=n,this.Cft=r,this.Oft=h}jft(){this.Pft=[];for(let t=0;t<UF;t++)this.Pft.push(this.zft())}zft(){const t=[];for(let i=0;i<RF;i++)t.push(null);return t}Bft(t){this.Rft()&&(this.Pft[this._dt][this.Uft]=new zF(t,this.Ddt,this.Idt,this.kdt,this.bdt),this.Uft++)}Qft(){this.Rft()&&(this.Uft<=0&&this._dt<=0||(this.Uft<=0?(this.Uft=this.Oft-1,this._dt--):this.Uft--,this.Pft[this._dt][this.Uft]=null))}Rft(){const t=this._dt<this.Cft&&this._dt>=0,i=this.Uft<this.Oft&&this.Uft>=0;return t&&i}Fft(){return this.tB}Yft(t){let i=0;for(let e=t;e<UF;e++,i++)this.Pft[i]=this.Pft[e];for(let e=0;e<t;e++,i++)this.Pft[i]=this.zft()}Gft(){if(this._dt+1>=this.Cft)return this.Yft(1),void(this.Uft=0);this._dt++,this.Uft=0}Vft(){this.Pft[this._dt]=this.zft(),this.Uft=0}adt(t,i){if(this.iN>=t)return null;const e=TF.Xlt(this.Pft,this.iN,t);return e?(this.Wft(t),{GT:e,vV:"svc"+i,ddt:i}):null}Hft(t,i){this._dt=t,this.Uft=i}qft(t){this.kdt=t}Xft(t){this.bdt=t}Zft(t){this.Ddt=t}Kft(t){this.Idt=t}Jft(){this._dt=0,this.Uft=0,this.Ddt=!1,this.Idt=!1,this.bdt=Fa,this.kdt=fn}$ft(t){this.t_t=t}i_t(){this.tB=!0}be(){this.tB=!1}wh(){this.tB=!this.tB}Wft(t){this.iN=t}constructor(t){this.e_t=t,this.tB=!1,this.xft=!1,this.Lft=0,this.bft=0,this.kft=0,this.Cft=0,this.Oft=0,this.t_t=2,this.Pft=[],this.iN=0,this._dt=0,this.Uft=0,this.Idt=!1,this.Ddt=!1,this.bdt=Fa,this.kdt=fn,this.jft()}};!function(t){t[t.s_t=0]="s_t",t[t.n_t=1]="n_t",t[t.r_t=2]="r_t",t[t.h_t=3]="h_t"}(OF||(OF={}));var RF=42,UF=15,QF=class{o_t(t){const i=t.a_t();let e=i.PM;const s=i.Kdt;if(e===WF){e=e<<16|t.a_t().PM}return e>=0&&e<=31?this.u_t(e,s):e>=128&&e<=159?this.c_t(t,e,s):(e>=4096&&e<=4127?this.l_t(t,255&e):e>=4224&&e<=4255?this.d_t(t,255&e):e>=32&&e<=127?this.f_t(e):e>=160&&e<=255?this.__t(e):e>=4128&&e<=4223?this.g_t(255&e):e>=4256&&e<=4351&&this.w_t(255&e),null)}f_t(t){this.v_t&&(127!==t?this.v_t.Bft(String.fromCharCode(t)):this.v_t.Bft("\u266a"))}__t(t){this.v_t&&this.v_t.Bft(String.fromCharCode(t))}g_t(t){if(!this.v_t)return;if(void 0===HF[t])return void this.v_t.Bft("_");const i=HF[t];this.v_t.Bft(i)}w_t(t){this.v_t&&(160===t?this.v_t.Bft("[CC]"):this.v_t.Bft("_"))}u_t(t,i){if(!this.v_t)return null;const e=this.v_t;let s=null;switch(t){case FF:e.Qft();break;case GF:e.Fft()&&(s=e.adt(i,this.A_t)),e.Gft();break;case VF:e.Fft()&&(s=e.adt(i,this.A_t)),e.Vft();break;case YF:e.Fft()&&(s=e.adt(i,this.A_t)),e.jft(),e.Hft(0,0)}return s}c_t(t,i,e){if(i>=128&&i<=135){const t=7&i;this.m_t(t)}else{if(136===i){const i=t.a_t().PM;return this.p_t(i,e)}if(137===i){const i=t.a_t().PM;this.y_t(i,e)}else{if(138===i){const i=t.a_t().PM;return this.M_t(i,e)}if(139===i){const i=t.a_t().PM;return this.T_t(i,e)}if(140===i){const i=t.a_t().PM;return this.N_t(i,e)}if(143===i)return this.tr(e);if(144===i)this.D_t(t);else if(145===i)this.S_t(t);else if(146===i)this.Hft(t);else if(151===i)this.I_t(t);else if(i>=152&&i<=159){const s=(15&i)-8;this.Eft(t,s,e)}}}return null}l_t(t,i){i>=8&&i<=15?t.qm(1):i>=16&&i<=23?t.qm(2):i>=24&&i<=31&&t.qm(3)}d_t(t,i){i>=128&&i<=135?t.qm(4):i>=136&&i<=143&&t.qm(5)}m_t(t){this.E_t[t]&&(this.v_t=this.E_t[t])}*b_t(t){for(let i=0;i<8;i++){1==(1&t)&&this.E_t[i]&&(yield i),t>>=1}}p_t(t,i){let e=null;for(const s of this.b_t(t)){const t=this.E_t[s];t.Fft()&&(e=t.adt(i,this.A_t)),t.jft()}return e}y_t(t,i){for(const e of this.b_t(t)){const t=this.E_t[e];t.Fft()||t.Wft(i),t.i_t()}}M_t(t,i){let e=null;for(const s of this.b_t(t)){const t=this.E_t[s];t.Fft()&&(e=t.adt(i,this.A_t)),t.be()}return e}T_t(t,i){let e=null;for(const s of this.b_t(t)){const t=this.E_t[s];t.Fft()?e=t.adt(i,this.A_t):t.Wft(i),t.wh()}return e}N_t(t,i){let e=null;for(const s of this.b_t(t)){const t=this.E_t[s];t.Fft()&&(e=t.adt(i,this.A_t)),this.E_t[s]=void 0}return e}tr(t){const i=this.N_t(255,t);return this.Xb(),i}Xb(){this.v_t=void 0,this.E_t=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}D_t(t){t.qm(1);const i=t.a_t().PM;if(!this.v_t)return;const e=(128&i)>0,s=(64&i)>0;this.v_t.Kft(e),this.v_t.Zft(s)}S_t(t){const i=t.a_t().PM,e=t.a_t().PM;if(t.qm(1),!this.v_t)return;const s=3&i,n=(12&i)>>2,r=(48&i)>>4,h=3&e,o=(12&e)>>2,a=(48&e)>>4,u=this.L_t(r,n,s),c=this.L_t(a,o,h);this.v_t.Xft(u),this.v_t.qft(c)}Hft(t){const i=t.a_t().PM,e=t.a_t().PM;if(!this.v_t)return;const s=15&i,n=63&e;this.v_t.Hft(s,n)}I_t(t){t.qm(1),t.qm(1);const i=t.a_t().PM;if(t.qm(1),!this.v_t)return;const e=3&i;this.v_t.$ft(e)}Eft(t,i,e){const s=void 0!==this.E_t[i];if(!s){const t=new BF(i);t.Wft(e),this.E_t[i]=t}const n=t.a_t().PM,r=t.a_t().PM,h=t.a_t().PM,o=t.a_t().PM,a=t.a_t().PM,u=t.a_t().PM,c=(32&n)>0,l=127&r,d=(128&r)>0,f=h,_=1+(15&o),g=(240&o)>>4,w=1+(63&a);s&&0===(7&u)||this.E_t[i].Jft(),this.E_t[i].Eft(c,l,f,g,d,_,w),this.v_t=this.E_t[i]}L_t(t,i,e){const s={0:0,1:0,2:1,3:1};return qF[s[t]<<2|s[i]<<1|s[e]]}constructor(t){this.A_t=t,this.E_t=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.v_t=void 0}},FF=8,YF=12,GF=13,VF=14,WF=16,HF={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},qF=["black","blue","green","cyan","red","magenta","yellow","white"],XF=class{k_t(t){if(t.Rg===ft.ult){const i=63&t.PM;return this.x_t=2*i-1,void(this.C_t=[])}if(this.C_t&&(this.x_t>0&&(this.C_t.push(t),this.x_t--),0===this.x_t)){const t=new ZF(this.C_t);this.O_t.push(t),this.C_t=null,this.x_t=0}}j_t(){return this.O_t}P_t(){this.O_t=[]}Xb(){this.O_t=[],this.C_t=[],this.x_t=0}constructor(){this.O_t=[],this.C_t=null,this.x_t=0}},ZF=class{z_t(){return this.B_t<this.R_t.length}U_t(){return this.B_t}a_t(){if(!this.z_t())throw new Rs(Ui.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.R_t[this.B_t++]}qm(t){if(this.B_t+t>this.R_t.length)throw new Rs(Ui.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.B_t+=t}constructor(t){this.B_t=0,this.R_t=t}},KF=class{Xb(){this.Q_t=0,this.F_t=[],this.Y_t=[],this.G_t.Xb(),this.tr(),this.V_t.forEach((t=>{t.Xb()}))}tr(){this.W_t=0,this.H_t=0,this.q_t.forEach((t=>{t.tr()}))}X_t(t,i){if(t._lt){const e=t.wlt,s=t.vlt,n=t.Rg;n===ft.elt||n===ft.slt?this.F_t.push({Kdt:i,Rg:n,dft:e,Zdt:s,Z_t:this.F_t.length}):this.K_t&&(this.Y_t.push({Kdt:i,Rg:n,PM:e,Z_t:this.Y_t.length}),this.Y_t.push({Kdt:i,Rg:ft.hlt,PM:s,Z_t:this.Y_t.length}))}}BQ(){const t=[];this.F_t.sort(((t,i)=>t.Kdt-i.Kdt||t.Z_t-i.Z_t)),this.Y_t.sort(((t,i)=>t.Kdt-i.Kdt||t.Z_t-i.Z_t));for(const i of this.F_t){const e=this.J_t(i);e&&t.push(e)}for(const t of this.Y_t)this.G_t.k_t(t);const i=this.G_t.j_t();for(const e of i){const i=this.$_t(e);t.push(...i)}return this.G_t.P_t(),this.F_t=[],this.Y_t=[],t}J_t(t){const i=t.Rg;if(Ia.mft(t.dft)){const e=t.dft>>3&1;0===i?this.W_t=e:this.H_t=e}const e="CC"+(i<<1|(i?this.H_t:this.W_t)+1),s=this.q_t.get(e);return 255===t.dft&&255===t.Zdt||!t.dft&&!t.Zdt||!this.tgt(t.dft)||!this.tgt(t.Zdt)?(++this.Q_t>=45&&this.tr(),null):(this.Q_t=0,t.dft&=127,t.Zdt&=127,t.dft||t.Zdt?Ia.mft(t.dft)?s.lft(t):s.uft(t.Kdt,t.dft,t.Zdt):null)}$_t(t){const i=[];try{for(;t.z_t();){const e=t.a_t().PM;let s=(224&e)>>5;const n=31&e;if(7===s&&0!==n){s=63&t.a_t().PM}if(0!==s){if(!this.V_t.has(s)){const t=new QF(s);this.V_t.set(s,t)}const e=this.V_t.get(s),r=t.U_t();for(;t.U_t()-r<n;){const s=e.o_t(t);s&&i.push(s)}}}}catch(t){if(!(t instanceof Rs&&t.code===Ui.SUBTITLE_PARSE_ERROR))throw t}return i}tgt(t){let i=0;for(;t;)i^=1&t,t>>=1;return 1===i}constructor(){this.K_t=!1,this.F_t=[],this.Y_t=[],this.G_t=new XF,this.Q_t=0,this.q_t=Id({CC1:new Ia(0,0),CC2:new Ia(0,1),CC3:new Ia(1,0),CC4:new Ia(1,1)}),this.W_t=0,this.H_t=0,this.V_t=I(),this.tr()}},JF=class extends wn{constructor(t,i){super("igt"),this.ddt=t,this.GT=i}},$F=is.pD(.1),tY=class extends Bo{egt(t,i){this.sgt.X_t(t,i)}BQ(){const t=this.sgt.BQ();for(const i of t)this.Co(new JF(i.ddt,i.GT))}tr(){this.sgt.Xb()}gn(){this.Vo(),this.sgt.Xb()}constructor(){super(),this.sgt=new KF}},iY=class extends tY{ngt(t,i,e,s){const n=this.rgt(t,s);this.hgt(n,i,e),this.BQ()}rgt(t,i){const e=t.slice().sort(bj),s=this.ogt;if(0===s.length)return e;if(0===e.length)return s;let n;const r=s[0].Q6,h=s[s.length-1].Q6,o=e[0].Q6,a=s[0].Zrt===e[0].Zrt;if(h.LN(o).IN().SN(is.pD(2.5*i))&&a)n=s.concat(e).sort(bj);else if(o.MN(r)){let t=0;for(;t<s.length&&s[t].Q6.SN(o);)t++;let i=!1,r=!1;for(let n=t,h=0;n<s.length&&h<e.length;n++,h++)eY(s[n],e[h])?i=!0:r=!0;const h=i&&!r,a=i&&r;!i&&r?n=s.concat(e).sort(bj):h?n=s.slice(0,t).concat(e):(n=e,a&&this.tr())}else n=e,this.tr();return n}hgt(t,i,e){for(let s=0;s<t.length;s++){const n=t[s],r=n.Q6.mN();if(!e&&i-r<$F.mN())return void(this.ogt=t.slice(s));this.egt(n,r)}this.ogt=[]}constructor(...t){super(...t),this.ogt=[]}};function eY(t,i){return t.Q6.aN(i.Q6)&&t.Rg===i.Rg&&t.wlt===i.wlt&&t.vlt===i.vlt}var pn=class extends Ti{agt(t){return this.ugt.get(t)}cgt(t){let i=this.ugt.get(t.F6);return i||(i=this.lgt(t),this.ugt.set(t.F6,i)),i}lgt(t){const i=[sl.Sg],e=aF(t.Y6);let s,n=e?e.l:"";t.dgt&&(n="easy "+n,i.push(sl.xg)),s=t.kh?"CC "+t.kh:n?"CC "+n:"CC"+t.F6;const r=this.SI.DI(Mi.NS,s,s,t.Y6,!1,Wt.CEA608,void 0,i);return this.tt(r),r}dnt(t){const i=iu._p(Ao(t));this.fgt=function(t){for(const i of t.Z){const t=_F(i),e=i.Bp.Xp.Jp.iy.sy;let s=Vt(e,(t=>t.Rg===he.CA));if(!s){const t=e.filter((t=>t.Rg===he.JA)),i=Vt(t,(t=>{var i;return(null==(i=t.eM)?void 0:i.Rg)===he.CA}));i&&(s=i.eM)}if(!s)continue;const n=xk(Ao(s.Yy.zm),new _s),r=s.Vy;return Yt({},t,{Fp:i.rp.Fp,Yy:Ng(s.Yy.zm),ji:s.ji,Ti:s.Ti,fM:r&&r.fM,dM:r&&r.dM,HK:n.NZ,_gt:n.DZ,qK:n.SZ,EZ:n.EZ[0],bZ:n.bZ[0]})}}(Vt(i,gF))}Dut(t,i,e,s,n,r){var h;if(!this.fgt)return;if(!S(this.ggt)&&M(this.ggt,i,1e-5))return;S(this.wgt)||M(this.wgt,i,.1)||this.vgt.tr();const o=function(t,i,e,s,n){const r=[],h=i.filter(lF),o=s(e);for(const i of h){const s=Vt(i.Z,(t=>t.rp.Fp===e.Fp));if(!s)continue;const h=s.rp.wM||0,u=s.rp.vM||0;let c=s.IM?s.IM.IM:Ce.ZERO;var a;const l=i.yM+(null!=(a=s.rp.EM)?a:Ce.ZERO).toNumber();for(const a of s.SM){let s=l+(a.yM||0);for(const l of a.CM){const a=l.hp||u,d=new cu;d.YZ(t,s,s+a);const f=is.ON(c,e.Mlt);d.JD=n(l,i,e,f,Tg(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||h||o)}}}return r}(t,iu._p(Ao(t)),this.fgt,cF,fF);var a;const u=null!=(a=null==(h=Md(o,(t=>t.JD.ct)))?void 0:h.JD.ct)?a:0,c=function(t){const i=[];for(const e of t)e.JD.klt&&i.push(...e.JD.klt),delete e.JD.klt;for(let t=0;t<i.length;t+=1)i[t].MM=t;return i}(o),l=is.pD(s),d=[];for(const t of c)d.push(Yt({},t,{Zrt:n,Q6:t.dlt.ET(l)}));this.vgt.ngt(d,e,r,u),this.ggt=i,this.wgt=e}tr(){return this.vgt.tr(),this.ugt.forEach((t=>{t.gn(),this.it(t),this.SI.CI(t)})),this.ugt.clear(),this.fgt=void 0,this.ggt=NaN,this.wgt=NaN,super.tr()}gn(){return this.vgt.fn("igt",this.Agt),this.vgt.gn(),super.gn()}constructor(t){super(),this.fgt=void 0,this.ggt=NaN,this.wgt=NaN,this.Agt=t=>{const i=this.cgt({F6:t.ddt,Y6:""}),e=t.GT;for(const t of i.L.og)e.VT<t.VT&&e.WT>t.VT?e.WT=t.VT:e.VT>t.VT&&t.WT>e.VT?t.WT=e.VT:e.VT===t.VT&&(e.WT=t.WT);i.kI(e)},this.SI=t,this.ugt=I(),this.vgt=new iY,this.vgt.yn("igt",this.Agt)}},sY=/(.*)=(.*)/,nY=/(.*):(.*)/;function rY(t){if(!t)return[];const i=[],e=t.trim().split(";");for(const t of e){const e=t.match(sY);if(e){const[,t,s]=e;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(nY)){const[,i,e]=t.match(nY);switch(i){case"lang":n=e;break;case"er":r=Boolean(Number(e))}}i.push({F6:Number(t),Y6:n,dgt:r})}}return i}var hY={1:1,2:3,3:2,4:4},oY="urn:scte:dash:cc:cea-608:2015",aY="urn:scte:dash:cc:cea-708:2015";var vn=class extends hl{fa(){return new uY(this.Zrt&&this.Zrt.va)}constructor(t,i,e){super(qt.J_),this.Zrt=t,this.qot=i,this.mgt=e}},uY=class extends wn{constructor(t){super("activequalitychanged"),this.quality=t}},cY=[Co.jh,Zt.H_,Co.Iw],lY=class extends Bo{pgt(t){const i=this.Uct.uht;for(const e of i.Lt.rrt)if(i.pat.wat(t,e))return e}gn(){this.Vo(),this.hv.fn(cY,this.ygt)}constructor(t,i){super(),this.ygt=t=>{const i=this.Mgt,e=this.pgt(t.currentTime)||this.Uct.rht;e&&i!==e&&(this.Mgt=e,e.Zrt&&this.Co(new vn(e.Zrt,null==e?void 0:e.va,null==i?void 0:i.va)))},this.hv=t,this.hv.yn(cY,this.ygt),this.Uct=i}};function dY(t,i,e){const s=new ia(Ao(t),new _s),n=At.sp(s,he.pA);if(!n)return;const r=At.Km(n.zm),h=Vt(r,(t=>t.Rg===he.MA)),o=Vt(r,(t=>t.Rg===he.fm));if(!h)return;const a=At.sp(h.zm,he.NA);if(!a)return;const u=At.sp(a.zm,he.IA);if(!u)return;const c=At.sp(u.zm,he.EA);if(!c)return;const l=At.Km(c.zm),d=Vt(l,(t=>t.Rg===he.bA));if(!d)return;const f=At.lp(d.zm,he.bA,!1),_=new ia(Ao(f.zm),new _s);_.qm(4);const g=At.Km(_),w=[];for(const t of g){if(t.Rg===he.KA||t.Rg===he.JA)return;t.Rg===he.CA?w.push({Tgt:t,Ngt:he.JA}):t.Rg===he.GA&&w.push({Tgt:t,Ngt:he.KA})}if(!function(t,i){return void 0===t&&void 0!==i&&i.length>0}(o,i)&&0===w.length)return;let v=He(t);const A=Vt(r,(t=>t.Rg===he.kA)),m=A?At.sp(A.zm,he.xA):void 0,p=m?function(t){const i=t.zm.Lm();return i.qm(4),i.qm(4),i.Qm()}(m):1,y=Vt(l,(t=>t.Rg===he.LA));y&&function(t,i,e){const s=Wo(Ao(t),i),n=At.ep(s,new _s),r=n.zm;r.qm(4);const h=r.Qm();for(let t=0;t<h;t++){r.qm(4),r.qm(4);const t=r.Bm.Lm(),i=r.Qm();ac(r.zm,t,i+e)}}(v,y,w.length),m&&function(t,i,e){const s=Wo(Ao(t),i),n=At.ep(s,new _s),r=n.zm;r.qm(4),r.qm(4),ac(r.zm,r.Bm,e)}(v,m,1),v=function(t,i,e,s){if(e||!s)return t;let n=t;for(const t of s)n=fY(n,i,new j(t));return n}(v,n,o,i);const M=[n,h,a,u,c,d];for(let t=w.length-1;t>=0;t--){const i=w[t];v=_Y(v,i.Tgt,d,M,i.Ngt,e)}return{Dgt:v,Sgt:{Igt:w.length,gM:p}}}function fY(t,i,e){const s=k_(t,e,i.zm.zm.byteOffset+i.zm.zm.byteLength);return gY(Wo(Ao(s),i),e.byteLength),s}function _Y(t,i,e,s,n,r){const h=function(t,i,e){0;const s=t.zm.zm,n=pY(),r=new j(s.byteLength+n.byteLength),h=Ao(r);r.set(ks(s),0),gY(h,n.byteLength),fg(h,new _s(TY),i),r.set(n,s.byteLength),fg(h,new _s(s.byteLength+yY),t.Rg),e&&br(h,new _s(s.byteLength+MY),e);return r}(i,n,r),o=k_(t,h,i.zm.zm.byteOffset),a=Ao(o);!function(t,i){const e=At.ep(t,new _s),s=At.lp(e.zm,he.bA,!1),n=Ao(s.zm),r=n.getUint32(0);n.setUint32(0,r+i)}(Wo(a,e),1);for(const t of s)gY(Wo(a,t),h.byteLength);return o}function Wo(t,i){const e=i.zm.zm.byteOffset;return qr(t,e,e+i.zm.zm.byteLength)}function gY(t,i){const e=new _s,s=aa(t,e);if(0===s);else if(1===s){e.Im(4);const s=Oc(t,e.Lm());ug(t,e,s.add(i))}else e.Em(0),ac(t,e,s+i)}var wY=class extends ak{start(t){this.VH=t}transform(t){this.wX(t),this.Egt()}flush(){this.AX(),this.Egt()}SX(t){return t===he.$A}EX(t){let i=He(ks(t.zm.zm));const e=At.ep(Ao(i),new _s);i=vY(i,e,this.bgt),this.Lgt.push(i)}LX(t){this.Lgt.push(t)}Egt(){for(const t of function(t){if(t.length<2)return t;const i=[];let{buffer:e,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const h=t[r];e===h.buffer&&s+n===h.byteOffset?n+=h.byteLength:(i.push(new j(e,s,n)),({buffer:e,byteOffset:s,byteLength:n}=h))}return i.push(new j(e,s,n)),i}(this.Lgt))this.VH.enqueue(t);No(this.Lgt)}constructor(t){super(),this.Lgt=[],this.bgt=t}};function vY(t,i,e){let s=t;const n=At.Km(i.zm);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Rg===he.im&&(s=AY(s,r,i,e))}return s}function AY(t,i,e,s){const n=Wo(Ao(t),i),r=At.ep(n,new _s),h=At.Km(r.zm),o=Vt(h,(t=>t.Rg===he.nm));if(!o)return t;const a=o.zm,u=a.Bm.Lm(),c=a.Qm(),{flags:l}=Eu(c);a.qm(4),l.Cm(ki.BASE_DATA_OFFSET_PRESENT)&&a.qm(8);const d=a.Bm.Lm();if(l.Cm(ki.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const i=aa(a.zm,d);return ac(a.zm,a.Bm,i+s.Igt),t}{ac(a.zm,u,c|ki.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new j(4);Ao(n).setUint32(0,s.gM+s.Igt);const r=a.zm.byteOffset+d.Ku;for(const t of h.filter((t=>t.Rg===he.hm)))mY(t,n.byteLength);for(const s of[o,i,e])gY(Wo(Ao(t),s),n.byteLength);return k_(t,n,r)}}function mY(t,i){const e=t.zm,s=e.Qm(),{flags:n}=Eu(s);if(e.qm(4),n.Cm(io.DATA_OFFSET_PRESENT)){const t=e.Lm().Qm();ac(e.zm,e.Bm,t+i)}}var pY=Oa((()=>new j([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),yY=16,MY=64,TY=4,NY=[Nt.ha,Co.Mw,Co.Tw,Co.Dw,Co.Yg],DY=class extends Bo{get Vnt(){return this.Wnt}get o(){return this.CT}get h$(){return this.o$}get nt(){return this.kgt}get Fct(){return function(t){const i=29.97,e=1024,s=44100;return t===fi.Mm?s/e:i}(this.o$)}get Qct(){return 1/this.Fct}get Rt(){return Boolean(this.Wnt&&this.Wnt.Rt)}get Yq(){const t=this.Uct?this.Uct.uht.Yq.dat:Ai.kB();return this.xgt()._B(t)}get wf(){let t=this.Cgt();const i=this.Ogt;return void 0!==i&&t.aB().gr(i)&&(t=t._B(Ai.bB(i))),t}get nat(){return TU(this.Cgt(),this.Yq._B(this.jgt)).fB(2*this.Qct)}get jgt(){const t=this.Ogt;if(t&&isFinite(t)){const i=this.Pgt.jn;if(isFinite(i)&&t<i)return new Ai([t,i],[!1,!0])}return Ai.kB()}get t_(){const t=this.Wnt;if(!t)return Ai.bB(0);const i=t.Zot.Yct,e=t.Zot.Gct;if(void 0===e||void 0===i)return Ai.bB(0);const s=e;let n=i>=t.Zot.Yat.jn?_.max(i,this.jn):i;return n=_.max(s,n),Ai.LB(s,n).aB()}get jP(){return this.nat.Mv(this.Mf)}get uat(){return this.Pgt.uat}get Mf(){return this.hv.Mf}get Cn(){return this.Wnt?this.Wnt.Zot.Yat.Cn:NaN}get jn(){const t=this.zgt(),i=this.Ogt;return void 0===t?NaN:void 0!==i?i:t}zgt(){var t;return null==(t=this.Wnt)?void 0:t.Zot.Yat.jn}get Ti(){return this.Pgt.Ti}get ji(){return this.Pgt.ji}get Bgt(){return this.Ogt}yht(){return void 0!==this.Uct&&this.Uct.yht}aat(){if(void 0===this.Ogt)return!1;const t=this.Cgt().aB(),i=t.vB(this.Ogt);return!(i<0)&&t.Cn(i)!==this.Ogt}n$(){const t=this.Pgt.uat,i=this.Cgt().Sn(t);this.Ogt=i.U>0?i.jn(i.U-1):0;const e=t.jn(0);isFinite(e)&&this.Ogt<e&&this.Vq(this.Ogt,e),this.Rgt()}async Dut(t,i,e,s){const n=e._nt.QD,r=this.Ugt(t,i,e,n,s),h=this.Qgt(t,i,e,n,s),[o]=await P([h,r]);return o}async Ugt(t,i,e,s,n){if(!pi(e.zF))return;let r;if(t.Rg===G.qS){const i=t.zm.pot(),e=await i.gj(n);r=new j(e)}else r=new j(t.zm.Fnt);const h=[];if(void 0!==this.Fgt&&(this.Fgt.Dut(r,i.VT,s),h.push(this.Fgt)),void 0!==this.Ygt){const t=e.Fat(i);this.Ygt.Dut(r,i.VT,i.WT,s,e.Zrt,t),h.push(this.Ygt)}HA(this.wf,h)}async Qgt(t,i,e,s,n){var r;let h;if(fo(n),t.Rg===G.qS){let i=t.zm.vV;this.Ggt&&(i=function(t,i){return t.pipeThrough(new _i(new wY(i)))}(i,this.Ggt)),h={Rg:G.qS,zm:i}}else{let i=new j(t.zm.Fnt);this.Ggt&&(i=function(t,i){let e=He(t);const s=new ia(Ao(e),new _s),n=At.Km(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.Rg===he.$A&&(e=vY(e,s,i))}return e}(i,this.Ggt)),h={Rg:G.dq,zm:i}}const o={a9:i.VT,ct:i.ct,QD:s,qK:null==(r=e.Zrt)?void 0:r.Mg},a=this.tnt.wf;await this.Vgt(),await this.tnt.AJ(h,o,n);return function(t,i,e,s){let n,r,h=i.wB(t.aB());h=h.wB(e.wB(i)),!1;0===h.U?(n=s.WT,r=n):(n=h.Cn(0),r=h.jn(0));return{Jut:n,$ut:r}}(a,this.tnt.wf,this.tnt.a$,i)}async dnt(t,i,e){var s;fo(e),this.Ygt&&this.Ygt.dnt(new j(t.Fnt));let n=new j(t.Fnt);if(this.Wgt(i)){const t=this.Pgt.Hgt;let i,e=[];t&&(e=A(t.qgt,(t=>t.MP)),i=t.Xgt.UO?AS(t.Xgt.UO):void 0);const s=dY(n,e,i);s?(this.Ggt=s.Sgt,n=s.Dgt):this.Ggt=void 0}const r={Rg:G.dq,zm:n};await this.Vgt(),await this.tnt.yJ(r,{qK:null==(s=i.Zrt)?void 0:s.Mg},e)}Iut(t,i,e){return this.tnt.bT(t,i,e)}Vq(t,i){this.tnt.l$(t,i)}Wq(t,i){this.tnt.d$(t,i)}Cgt(){return this.tnt?this.tnt.wf:Ai.kB()}xgt(){return this.tnt?this.tnt.a$:Ai.kB()}Zgt(){return this.tnt?this.tnt.bT(0,1/0):Promise.resolve()}Kgt(){return this.tnt&&(this.tnt.fn(Bi.cq,this.Ds),this.tnt=void 0),Promise.resolve()}async Jgt(t){var i;const e=wQ.yut(null!=(i=t.Ict)?i:t.rrt,this.uut).zF;this.tnt||(this.tnt=this.Pgt.$gt(e),this.tnt.yn(Bi.cq,this.Ds),this.Aut=new zQ(this.tnt)),await this.Vgt()}$n(t,i){const e=new Wr;i&&e.Xd(i),this.xI.qd(),this.xI=e;const s=this.twt(t,this.iwt,e.Wd);return this.iwt=s,s}ewt(t){if(qo(this.swt,Wt.CEA608))return;const i=t.Zot._ct;if(function(t){return t.some((t=>t.Nst===oY||t.Nst===aY))}(i)){this.Ygt=new pn(this.SI);const t=function(t){const i=[];for(const e of t)if(e.Nst===oY){const t=kj(e.PM);for(const e of t)i.push(e)}else if(e.Nst===aY){const t=rY(e.PM);for(const e of t)if(e.F6<=4){const t=hY[e.F6];i.push(Yt({},e,{F6:t}))}}return i}(i);for(const i of t)this.Ygt.cgt(i);this.kgt.DP(this.Ygt.Z)}}async twt(t,i,e){fo(e),i&&await i.catch(na),this.Wnt===t&&this.nwt||(await this.rwt(),fo(e),await this.Zgt(),fo(e),t&&await this.II(t))}async rwt(){const t=this.Wnt;this.Wnt=void 0,this.nwt=!1,this.Ogt=void 0,t&&(t.fn(qt.rg,this.hwt),t.Oct(!1),t.fn(qt.NO_QUALITY,this.Ds)),this.owt&&(this.owt.gn(),this.owt=void 0),this.Uct&&(await this.Uct.gn(),this.Uct=void 0),this.Ygt&&(this.kgt.EP(this.Ygt.Z),await this.Ygt.gn())}async II(t){this.Wnt=t,this.ewt(t),t.yn(qt.rg,this.hwt),t.yn(qt.NO_QUALITY,this.Ds),await this.Jgt(t),this.Uct=this.awt(t),this.Uct.yn(NY,this.Ds),this.Uct.yn("Krt",this.Rgt),this.Uct.dht=t.Ict,this.owt=new lY(this.hv,this.Uct),this.owt.yn(qt.J_,this.Mct),t.Oct(!0),this.nwt=!0}awt(t){return new jQ(this,this.hv,this.hv,this.EI,this.QB,this.dct,this.Tot,this.wut,this.uut,this.Aut,this.Yut).c9(t)}async tr(t){this.xI.qd(),this.iwt&&(await this.iwt.catch(na),this.iwt=void 0),await this.rwt(),t||await this.Zgt(),await this.Kgt()}async uwt(){await this.rwt()}async cwt(t){var i;const e=null==(i=this.Uct)?void 0:i.uht.pat.fat(t);if(e&&e.U>0){await this.Sht();for(let t=0;t<e.U;t++){var s;await(null==(s=this.tnt)?void 0:s.bT(e.Cn(t),e.jn(t)))}await this.Eht()}}lwt(t){const i=t.Lt.Ict;if(void 0===i)return this.dwt(t);if(i.some((t=>this.Aut.mq(t))))return this.dwt(t);this.Co(new wn("fwt"))}dwt(t){this.Uct&&this.Wnt&&this.Wnt===t.Lt&&(this.Uct.dht=this.Wnt.Ict)}async Sht(t){this.Uct&&await this.Uct.Sht(t)}async Eht(t){this.Uct&&await this.Uct.Eht(t)}VW(){const t=this.wf.EB;return this.QB.VW(t)}Vgt(){const t=this.Pgt.uat,i=_.max(0,t.Cn(0)-.1),e=t.jn(0)+.01;return this.tnt.jJ(i,e)}Wgt(t){if(!pi(t.zF))return!1;if(this.Pgt.H4)return!0;return void 0!==this.Pgt.Hgt}async gn(t){this.Vo();try{await this.tr(t),await this.uwt()}catch(t){}}constructor(t,i,e,s,n,r,h,o,a,u,c,l){super(),this.Wnt=void 0,this.Uct=void 0,this.nwt=!1,this.xI=new Wr,this.iwt=void 0,this.Ogt=void 0,this.tnt=void 0,this.Aut=new hc,this.Ggt=void 0,this.Ygt=void 0,this.kgt=new ms([]),this.Rgt=()=>{!this.yht()&&this.aat()&&this.Pgt.Rgt()},this.Mct=t=>{this.Wnt.Mct(t),this.Co(new tF(t.qot,t.mgt))},this.hwt=t=>{this.lwt(t)},this.CT=function(){const t=JQ;return JQ+=1,t}(),this.o$=t,this.EI=s,this.QB=n,this.Pgt=i,this.hv=e,this.Tot=r,this.SI=h,this.Fgt=o,this.wut=a,this.uut=a?tw(t,a):void 0,this.Yut=u,this.swt=c,this.dct=l}};var vc,SY=class extends Bo{jW(t,i){return this._wt(t,i)}async _wt(t,i){for(const i of t)this.gwt(i);await this.$n(i);for(const t of this.vwt.wwt)t.Rg===fi.Ru&&(t.rrt&&0!==t.rrt.length?await this.Awt.II(t):this.Co(new ZQ("No supported representation found in the AdaptationSet with mimetype : "+t.Rg)))}get Mg(){return this.OT}get ct(){return this.hv.ct}mwt(t){return new DY(t,this,this.hv,this.EI,this.QB,this.Tot,this.SI,this.Fgt,this.pwt,this.Yut,this.swt,this.dct)}yht(){return this.Jct.some((t=>t.yht()))}aat(){return 0!==this.Jct.length&&this.Jct.every((t=>t.aat()))}Rgt(){this.ywt()&&this.Co(new KQ)}$gt(t){if(D(t,"audio")){if(this.UJ.X$)return this.UJ.X$}else if(D(t,"video")&&this.UJ.Z$)return this.UJ.Z$;throw new g("Cannot allocate source buffer for mime type "+t)}Mwt(t){t.yn([Nt.ha,Co.Aw,Co.Mw,Co.Tw,Co.Dw,Co.Yg],this.Ds),t.yn(Bi.cq,this.Twt),t.yn("fwt",this.Ds)}get Rt(){return this.Jct.some((t=>t.Rt))}async Nwt(t){await Promise.all(this.Jct.map((i=>i.gn(t)))),No(this.Jct)}get ht(){return this.fT}get wf(){if(0===this.Jct.length)return Ai.kB();const t=this.Jct.map((t=>t.wf));let i=Ai.LB(0,1/0);for(const e of t)i=i.Sn(e);if(0===i.U)return i;if(this.aat()){const t=i.Sn(this.uat);if(0===t.U)return i;const e=t.jn(t.U-1);let s=0;for(const t of this.Jct)s=_.max(s,t.Bgt);e<=s&&(i=i._B(new Ai([e,s],[!0,!0])))}return i}get H4(){return this.hv.H4}get Mf(){return this.hv.Mf}get Hgt(){return this.Dwt}get jn(){if(this.Swt){const t=this.ct;if(!S(t)&&t!==jh)return t}if(!this.Jct.length)return NaN;let t=0;for(const i of this.Jct)t=_.max(t,i.jn);return t}get Swt(){const t=this.vwt.ect;if(t.Rg===ku.KC)return!1;const i=t.Iwt;return 0!==i.length&&this.vwt===i[i.length-1]}get t_(){if(!this.Jct.length)return Ai.kB();let t=new Ai([0,1/0]);for(const i of this.Jct)t=t.Sn(i.t_);if(t.U>0&&this.Swt&&isFinite(this.ct)){const i=this.ct,e=t.jn(t.U-1);i>e&&(t=t._B(Ai.LB(e,i).aB()))}return t}get yc(){return this.vwt}get nt(){return this.Dl}get rt(){return this.gT}get ji(){return this.vu.ji}get Ti(){return this.vu.Ti}get jP(){const t=this.Mf,i=this.wf,e=i.vB(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get uat(){const t=this.vwt.Cn,i=this.Swt?1/0:this.vwt.jn;return Ai.LB(t,i)}ywt(){if(this.yht())return!1;if(!this.aat())return!1;const t=this.wf;if(0===t.U)return!1;const i=this.Mf;if(this.Swt)return t.Cn(t.U-1)<=i;{const e=t.Sn(this.uat);if(0===e.U)return!0;const s=e.Cn(e.U-1),n=e.jn(e.U-1)+.1;return s<=i&&i<=n}}get Ewt(){return this.bwt}async Sht(t){this.bwt||(this.bwt=!0,await Promise.all(this.Jct.map((i=>i.Sht(t)))))}async Eht(t){this.bwt&&(this.bwt=!1,await Promise.all(this.Jct.map((i=>i.Eht(t)))))}async gn(t){this.hv.fn(Co.Lw,this.Lwt),this.hv.fn(Co.Wg,this.kwt),this.Vo(),this.vwt.fn(ye.Hrt,this.Ds),this.xwt.qd(),this.iwt&&(await this.iwt.catch(na),this.iwt=void 0),await this.Nwt(t),await this.Awt.gn(),this.fT.gn(),this.gT.gn(),this.Dl.gn(),this.Cwt()}gwt(t){this.Owt.push(t),t.yn("jwt",this.Pwt);const i=t.Rg===fi.Mm?this.fT:this.gT;for(const e of t.Z)i.tt(e)}zwt(t){const i=t.Rg===fi.Mm?this.fT:this.gT;for(const e of t.Z)i.it(e),e.gn();t.gn(),Qr(this.Owt,t)}Cwt(){for(let t=this.Owt.length-1;t>=0;t--)this.zwt(this.Owt[t])}get Bwt(){return this.Owt.map((t=>t.Vnt)).filter(Po)}get Rwt(){return this.Jct.map((t=>t.Vnt)).filter(Po)}$n(t,i){return this.xwt.qd(),this.xwt=new Wr,i&&this.xwt.Xd(i),this.iwt=Ir(this.Mit(t,this.iwt,this.xwt.Wd),this.xwt).catch(this.Uwt),this.iwt}async Mit(t,i,e){i&&await i.catch(na),fo(e);const s=[],n=this.Jct.slice(),r=t.slice();No(this.Jct);for(const t of n){const i=t.Vnt;i&&qo(r,i)?(this.Jct.push(t),s.push(t.$n(i,e)),Qr(r,i)):(this.Dl.EP(t.nt),await t.gn(),fo(e))}for(const t of r){const i=this.mwt(t.ght);this.Dl.DP(i.nt),this.Jct.push(i),this.Mwt(i),s.push(i.$n(t,e))}await Promise.all(s)}async yq(t,i,e){this.UJ!==e&&(this.UJ=e,await this.Nwt(!1)),await this.$n(t),this.Dwt=i}async Qwt(t){for(const i of this.Rwt)for(const e of i.Zot.rrt){if((e.Tst||[]).some((i=>i.UO&&to(Oi(t),AS(i.UO))))&&!e.Cct){e.Cct=!0,e.Zrt&&i.vct(e.Zrt);for(const t of this.Jct)await t.cwt(e);this.Co(new qC(new To(Ui.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions")))}}}constructor(t,i,e,s,n,r,h,o,a,u,c,l,d){super(),this.fT=new wo,this.gT=new wo,this.Owt=[],this.xwt=new Wr,this.bwt=!0,this.Jct=[],this.iwt=void 0,this.Twt=ze((()=>{this.Co(new Wa(this.Mf))}),350),this.Pwt=t=>{const i=t.Fwt.Vnt;if(i)for(const t of this.Owt){var e;t.Vnt&&t.Vnt!==i&&t.Rg===(null==(e=i.Tct)?void 0:e.Rg)&&(t.fn("jwt",this.Pwt),t.Vnt.Rt=!1,t.yn("jwt",this.Pwt))}this.Ds(t)},this.Uwt=t=>{ut(t)||this.Co(new Eo(new Rs(Ui.MEDIA_LOAD_ERROR,t.message,t)))},this.Lwt=t=>{const i=t.D4;i&&this.Qwt(i)},this.kwt=t=>{const i=t.D4;if(i)for(const t of this.Rwt)for(const e of t.Zot.rrt){const s=(e.Tst||[]).some((t=>t.UO&&to(Oi(i),AS(t.UO))));e.Cct&&s&&(e.Cct=!1,e.Zrt&&t.pct(e.Zrt))}},this.EI=e,this.QB=s,this.Tot=n,this.hv=t,this.OT=Xc(),this.Owt=[],this.vwt=h,this.Dwt=o,this.SI=u,this.Awt=new XQ(t,e,s,n,u),this.Dl=new ms([this.Awt.nt]),this.Yut=l,this.swt=d,this.vwt.yn(ye.Hrt,this.Ds),this.vu=a,this.UJ=i,this.dct=r.lowLatency,this.Fgt=c,this.pwt=r.abr,this.hv.yn(Co.Lw,this.Lwt),this.hv.yn(Co.Wg,this.kwt)}},IY=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,EY=class t{static _p(i){const e=i.match(IY);if(!e)throw new g("The given value could not be parsed as a valid DateTimeInterval");const s=Number(e[1])||0,n=Number(e[2])||0,r=Number(e[3])||0,h=Number(e[4])||0,o=Number(e[5])||0,a=Number(e[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*h+60*o+a)}get Tlt(){return is.pD(this.Ywt,1e3)}Gwt(){return this.Ywt}Vwt(){return 1e3*this.Ywt}constructor(t){this.Ywt=t}};!function(t){t.Wwt="progressive",t.Hwt="interlaced",t.hT="unknown"}(vc||(vc={}));var bY=class{mN(){return this.qwt/this.Xwt}constructor(t,i){this.qwt=t,this.Xwt=i}},LY=/^(?:true|false)$/i,kY=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function xY(t){if(void 0!==t)return EY._p(t)}function CY(t){if(void 0===t)return;const i=t.match(kY);if(!i)throw new g("The given value could not be parsed as a valid Date");const[,e,s,n,r,h,o,a,u,c,l,d]=i,f=("-"===e?-1:1)*Number(s),w=Number(n)-1,v=Number(r),A=Number(h);let m=Number(o);const p=Number(a),y=Number("0."+(u||"")),M=_.round(1e3*y);if(c){m-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const T=new Date(Date.UTC(f,w,v,A,m,p,M));if(S(T.getTime()))throw new g("The given value could not be parsed as a valid Date");return T}function OY(t){if(!t)return;const i=/(\d+)-(\d+)/.exec(t);return i?[oo(i[1]),oo(i[2])]:void 0}function jY(t){if(void 0!==t){if(!S(Number(t)))try{return Ce.fromString(t,!0)}catch(t){}throw new g("The given value could not be parsed as a valid unsigned long")}}function oo(t){if(void 0===t)return;const i=Number(t);if(!S(i))return i;throw new g("The given value could not be parsed as a valid Number")}function PY(t){if(void 0===t)return;const i=t.split("/"),e=Number(i[0]),s=Number(i[1]||1);if(!S(e)&&!S(s))return new bY(e,s);throw new g("The given value could not be parsed as a valid frame rate")}function du(t){if(void 0!==t){if(LY.test(t))return"true"===t.toLowerCase();if(!S(x(t)))return Boolean(x(t));throw new g("The given value could not be parsed as a valid Boolean.")}}function zY(t){return{zu:t.aj,Zwt:du(t.pS("availabilityTimeComplete")),Kwt:oo(t.pS("availabilityTimeOffset"))}}function BY(t){return t.map(zY)}function RY(t){const i=XY(t),e=function(t,i,e,s){let n=t.yS(e,i);return void 0===n&&(n=t.pS(s+":"+i)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=wA(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=x_(n.aj)),!s){const i=wA(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==i&&(s=function(t){const i=Bn(t.aj),e=new j([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,n=12+e.length+4+s,r=new ArrayBuffer(n),h=new j(r),o=new DataView(r),a=new _s;ac(o,a,n),ac(o,a,1886614376),ac(o,a,0),br(o,a,e),ac(o,a,s),br(o,a,i),!1;return h.buffer}(i))}return{UO:e,Jwt:s,Nst:i.Nst,PM:i.PM}}function UY(t){return{$wt:t.pS("sourceURL"),Qht:OY(t.pS("range"))}}function QY(t,i){const e=t.pS("d"),s=t.pS("t"),n=oo(t.pS("r"));i.push({ct:e,VT:s,tvt:n})}function FY(t){return{Sot:t.pS("index"),ivt:OY(t.pS("indexRange")),Bp:t.pS("media"),evt:OY(t.pS("mediaRange"))}}function YY(t){const i=VY(t),e=function(t){const i=t.map(FY);return i.length>0?i:void 0}(t.gS("SegmentURL"));return Yt({},i,{svt:e,nvt:t.pS("xlink:href"),rvt:t.pS("xlink:actuate")})}function GY(t){const i=du(t.pS("availabilityTimeComplete")),e=oo(t.pS("availabilityTimeOffset")),s=OY(t.pS("indexRange")),n=du(t.pS("indexRangeExact")),r=t.gS("Initialization");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.wj+" element can not have more than one Initialization element.");const h=1===r.length?UY(r[0]):void 0,o=jY(t.pS("presentationTimeOffset")),a=t.gS("RepresentationIndex");if(a.length>1)throw new g("The provided MPEG-DASH document's "+t.wj+" element can not have more than one RepresentationIndex element.");return{Zwt:i,Kwt:e,ivt:s,ovt:n,avt:h,uvt:o,cvt:1===a.length?UY(a[0]):void 0,lvt:xY(t.pS("timeShiftBufferDepth")),xp:oo(t.pS("timescale"))}}function VY(t){const i=GY(t),e=t.gS("BitstreamSwitching"),s=e.length>0?UY(e[0]):void 0,n=oo(t.pS("duration")),r=t.gS("SegmentTimeline");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.wj+" element can not have more than one SegmentTimeline element.");const h=1===r.length?function(t){const i=[],e=t.gS("S");for(const t of e)QY(t,i);return i}(r[0]):void 0;return Yt({},i,{dvt:s,ct:n,_nt:h,fvt:oo(t.pS("startNumber")),_vt:oo(t.pS("endNumber"))})}function WY(t){return{gvt:function(t){if(!t)return;const i=t.split(/\s/);return i.length>1?(i.length=2,i.map(oo)):1===i.length?i.map(oo)[0]:void 0}(t.pS("audioSamplingRate")),Mst:t.pS("codecs"),wvt:du(t.pS("codingDependency")),Tst:function(t){if(0!==t.length)return t.map(RY)}(t.gS("ContentProtection")),vvt:function(t){return t.map(ZY)}(t.gS("EssentialProperty")),Avt:function(t){return t.map(KY)}(t.gS("SupplementalProperty")),Fct:PY(t.pS("frameRate")),Ti:oo(t.pS("height")),mvt:oo(t.pS("maxPlayoutRate")),pvt:oo(t.pS("maximumSAPPeriod")),zF:t.pS("mimeType"),yvt:t.pS("profiles"),Mvt:t.pS("sar"),Tvt:function(t){switch(t){case vc.Wwt:case vc.Hwt:case vc.hT:return t;default:return}}(t.pS("scanType")),Nvt:t.pS("segmentProfiles"),Dvt:oo(t.pS("startWithSAP")),ji:oo(t.pS("width"))}}function HY(t){const i=BY(t.gS("BaseURL")),e=t.gS("SegmentBase");if(e.length>1)throw new g("The provided MPEG-DASH document's "+t.vS+" element can not have more than one SegmentBase element.");const s=1===e.length?GY(e[0]):void 0,n=function(t){const i=t.map(YY);return i.length>0?i:void 0}(t.gS("SegmentList")),r=t.gS("SegmentTemplate");if(r.length>1)throw new g("The provided MPEG-DASH document's "+t.vS+" element can not have more than one SegmentTemplate element.");const h=1===r.length?function(t){return Yt({},VY(t),{Svt:t.pS("bitstreamSwitching"),Ivt:t.pS("index"),Evt:t.pS("initialization"),bvt:t.pS("media")})}(r[0]):void 0;return{Lvt:i,kvt:s,xvt:n,Cvt:h}}function qY(t){const i=WY(t),e=HY(t),s=oo(t.pS("bandwidth")),n=t.pS("dependencyId"),r=t.pS("id"),h=t.pS("mediaStreamStructureId"),o=oo(t.pS("qualityRanking"));if(t.gS("SegmentBase").length>1)throw new g("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return Yt({},i,e,{wP:s,Ovt:n,o:r,jvt:h,Pvt:o})}function XY(t){return{Nst:t.pS("schemeIdUri"),PM:t.pS("value")}}function ZY(t){return XY(t)}function KY(t){return XY(t)}function JY(t){return XY(t)}function $Y(t){return XY(t)}function tG(t){var i;const e=WY(t),s=HY(t),n=function(t){return t.map($Y)}(t.gS("Accessibility")),r=du(t.pS("bitstreamSwitching")),h=t.pS("contentType"),o=oo(t.pS("group")),a=oo(t.pS("id")),u=(null==(i=t.gS("Label")[0])?void 0:i.aj)||"",c=t.pS("lang"),l=oo(t.pS("maxBandwidth")),d=PY(t.pS("maxFrameRate")),f=oo(t.pS("maxHeight")),_=oo(t.pS("maxWidth")),w=oo(t.pS("minBandwidth")),v=PY(t.pS("minFrameRate")),A=oo(t.pS("minHeight")),m=oo(t.pS("minWidth")),p=t.pS("par"),y=function(t){return t.map(qY)}(t.gS("Representation"));if(0===y.length)throw new g("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const M=function(t){return t.map(JY)}(t.gS("Role")),T=du(t.pS("segmentAlignment"))||!1,N=oo(t.pS("selectionPriority")),D=N||1,S=du(t.pS("subsegmentAlignment"))||!1;let I;try{I=oo(t.pS("subsegmentStartsWithSAP"))}catch(t){}return Yt({},e,s,{_ct:n,dvt:r,HP:h,Tct:o,o:a,kh:u,gs:c,zvt:l,Bvt:d,Rvt:f,Uvt:_,Qvt:w,Fvt:v,Yvt:A,Gvt:m,Vvt:p,rrt:y,Hct:M,Wvt:T,Cz:D,Hvt:S,qvt:I,Xvt:t.pS("xlink:actuate")||"onRequest",Zvt:t.pS("xlink:href")})}function iG(t){const i=jY(t.pS("presentationTime"))||Ce.ZERO,e=jY(t.pS("duration")),s=oo(t.pS("id")),n=function(t){const i=t.wS,e={};for(let t=0;t<i.length;t++)e[i[t].l]=i[t].PM;return e}(t),r=t.aj;return{zM:i,ct:e,o:s,wS:n,zm:""!==r.trim()?r:t.pS("messageData")||""}}function eG(t){return{Zvt:t.pS("xlink:href"),Xvt:t.pS("xlink:actuate"),Nst:t.pS("schemeIdUri"),PM:t.pS("value"),xp:oo(t.pS("timescale")),uvt:jY(t.pS("presentationTimeOffset")),BF:t.gS("Event").map(iG)}}function sG(t){const i=HY(t),e=t.gS("AssetIdentifier");if(e.length>1)throw new g("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===e.length?function(t){return XY(t)}(e[0]):void 0,n=function(t){return t.map(tG)}(t.gS("AdaptationSet")),r=du(t.pS("bitstreamSwitching")),h=xY(t.pS("duration")),o=function(t){return t.map(eG)}(t.gS("EventStream")),a=t.pS("id"),u=xY(t.pS("start")),c=(t.gS("Subset"),t.pS("xlink:href"));return Yt({},i,{Xnt:n,Kvt:s,dvt:r,ct:h,Jvt:o,o:a,Cn:u,Xvt:t.pS("xlink:actuate"),Zvt:c})}function nG(t){const i=t.pS("schemeIdUri");if(!i)return;return{Nst:i,PM:t.pS("value")}}function rG(t,i){const e=CY(t.pS("availabilityEndTime")),s=CY(t.pS("availabilityStartTime")),n=BY(t.gS("BaseURL")),r=t.pS("id"),h=function(t){return t.map((t=>""+t.aj))}(t.gS("Location")),o=xY(t.pS("maxSegmentDuration")),a=xY(t.pS("maxSubsegmentDuration")),u=xY(t.pS("mediaPresentationDuration")),c=(t.gS("Metrics"),xY(t.pS("minBufferTime")));if(!c)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=xY(t.pS("minimumUpdatePeriod")),d=function(t){return t.map((t=>sG(t)))}(t.gS("Period"));if(!d.length)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.pS("profiles");if(!f)throw new g("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=CY(t.pS("publishTime")),w=xY(t.pS("suggestedPresentationDelay")),v=xY(t.pS("timeShiftBufferDepth")),A=function(t){switch(t){case ku.ZC:case ku.KC:return t;default:return}}(t.pS("type")),m=function(t){const i=[];for(const e of t){const t=nG(e);t&&i.push(t)}return i}(t.gS("UTCTiming")),p=function(t){if(0===t.length)return;const i=t[0],e=i.gS("Latency");if(0===e.length)return;const s=function(t){const i=t[0],e=oo(i.pS("target"));if(void 0===e)return;const s=oo(i.pS("min")),n=oo(i.pS("max"));return{$vt:e,_D:s,fD:n}}(e);if(void 0===s)return;const n=function(t){if(0===t.length)return;const i=t[0],e=oo(i.pS("max")),s=oo(i.pS("min"));return{_D:s,fD:e}}(i.gS("PlaybackRate"));return{tAt:s,Gf:n}}(t.gS("ServiceDescription"));return{iAt:e,eAt:s,Lvt:n,o:r,sAt:h,nAt:i,rAt:o,hAt:a,oAt:u,aAt:c,uAt:l,Iwt:d,yvt:f,cAt:_,lAt:w,lvt:v,Rg:A,dAt:m,fAt:p}}var hG=class{_At(t,e){return function(t,i){if(!t)throw new g("The provided MPEG-DASH document does not contain a valid MPD root element.");return rG(t,i)}(i.AS(t).mS,e)}};function oG(t){return{get bandwidth(){return t.wP},get codecs(){return t.Mst},get id(){return t.o},get uid(){return t.Mg},get name(){return t.kh},get averageBandwidth(){return t.gAt},get label(){return t.kh},set label(i){t.kh=cs(i)},get available(){return t.Net},get score(){return t.wAt},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}}}function aG(t){return lt(oG(t),{get height(){return t.Ti},get width(){return t.ji},get frameRate(){return t.Fct},get firstFrame(){return t.vAt}})}function gc(t){return lt(oG(t),{get audioSamplingRate(){return t.gvt}})}var uG=class extends wn{constructor(t){super("update"),this.quality=t}},cG=class extends Bo{get kh(){return this.jT}set kh(t){this.jT!==t&&(this.jT=t,this.Co(new uG(this.va)))}get gAt(){}get Net(){return this.AAt}get wAt(){}GS(){this.AAt=!1,this.Co(new uG(this.va))}YS(){this.AAt=!0,this.Co(new uG(this.va))}constructor(t,i,e,s,n){super(),this.o=t,this.wP=i,this.Mst=e,this.mAt=n,this.Mg=Vw(),this.jT=s||"",this.AAt=!0}},lG=class extends cG{get va(){return this.Xa||(this.Xa=aG(this)),this.Xa}constructor(t,i,e,s,n,r,h,o,a=0){super(t,i,e,s,n),this.Fct=r,this.ji=h,this.Ti=o,this.vAt=a,this.Xa=void 0}},Mc=class extends cG{get va(){return this.Xa||(this.Xa=gc(this)),this.Xa}constructor(t,i,e,s,n,r){super(t,i,e,s,n),this.gvt=r,this.Xa=void 0}};var dG=class extends Bo{get pAt(){const t=this.yAt();return null==t?void 0:t.Cn}get MAt(){const t=this.yAt();return null==t?void 0:t.jn}constructor(...t){super(...t),this.TAt=t=>{this.Co(t)}}},fG=class extends dG{get Zot(){return this.Nht}get gvt(){var t;return null!=(t=this.NAt.zm.gvt)?t:this.Zot.gvt}get wP(){return this.NAt.zm.wP||0}get Mst(){const t=this.NAt.zm;return t.Mst?[t.Mst]:this.Zot.Mst}get DAt(){const t=this.NAt.zm;return t.Mst?[t.Mst]:[]}get uit(){return this.NAt.zm.Mst||this.Zot.uit}get wvt(){return this.NAt.zm.wvt||this.Zot.wvt}get Tst(){return this.NAt.zm.Tst||this.Zot.Tst}get HP(){return this.zF+'; codecs="'+this.uit+'"'}get vvt(){const t=this.NAt.zm;return t.vvt.length?t.vvt:this.Zot.vvt}get va(){return this.Xa||(this.Xa=function(t){return{get id(){return t.o},get type(){return t.Rg},get bandwidth(){return t.wP},get width(){return t.ji},get height(){return t.Ti},get frameRate(){var i,e;return null!=(e=null==(i=t.Fct)?void 0:i.mN())?e:NaN},get audioSamplingRate(){return t.gvt}}}(this))}get Fct(){var t;return null!=(t=this.NAt.zm.Fct)?t:this.Zot.Fct}get Ti(){return this.NAt.zm.Ti||this.Zot.Ti}get o(){return this.NAt.zm.o||""}get hct(){return this.SAt}set hct(t){this.SAt=t}get rct(){const t=this.NAt.IAt();if(t)return{zu:t.zu,Qht:t.Qht,pI:this.ect.pI}}get mvt(){return this.NAt.zm.mvt||this.Zot.mvt||1}get pvt(){return this.NAt.zm.pvt||this.Zot.pvt}get ect(){return this.Yat.ect}get zF(){return this.NAt.zm.zF||this.Zot.zF}get Yat(){return this.Zot.Yat}get yvt(){return this.NAt.zm.yvt||this.Zot.yvt}get Zrt(){return this.EAt}get Mvt(){return this.NAt.zm.Mvt||this.Zot.Mvt}get Tvt(){return this.NAt.zm.Tvt||this.Zot.Tvt}get bAt(){return this.NAt.bAt}get Nvt(){return this.NAt.zm.Nvt||this.Zot.Nvt}get _nt(){return this.NAt._nt}get Dvt(){return this.NAt.zm.Dvt||this.Zot.Dvt}get Rg(){const t=this.zF.split("/")[0];return"application"===t||"text"===t||Sr(this.zF,this.Mst)?fi.Ru:"video"===t?fi.ym:"audio"===t?fi.Mm:"image"===t?fi.rT:fi.hT}get ji(){return this.NAt.zm.ji||this.Zot.ji}get Hat(){return this.LAt}set Hat(t){this.LAt=t}get Cct(){return this.kAt}set Cct(t){this.kAt=t}nut(t){const i=T(t)?this.NAt.xAt(t):this.NAt.nut(t);return{zu:i.zu,Qht:i.Qht,pI:this.ect.pI}}CAt(){return this.NAt.CAt()}yAt(){return this.NAt.yAt()}OAt(){return this.NAt.OAt()}Xat(t){return this.NAt.Xat(t)}Kat(t,i,e){return this.NAt.Kat(t,this.ect.pI,i,e)}Vut(t){return T(t)?this._nt.jAt(t,this.NAt):this._nt.Vut(t)}Fat(t){return T(t)?this._nt.PAt(t,this.NAt):this._nt.Fat(t)}gn(){this.NAt.fn(ye.Vrt,this.TAt)}constructor(t,i){if(super(),this.Xa=void 0,this.SAt=void 0,this.LAt=!1,this.kAt=!1,this.Nht=t,this.NAt=i,this.NAt.yn(ye.Vrt,this.TAt),this.Rg===fi.ym){var e,s;const t=null!=(s=null==(e=this.Fct)?void 0:e.mN())?s:NaN;this.EAt=new lG(this.o,this.wP,this.uit,"","",t,this.ji,this.Ti)}else this.Rg===fi.Mm?this.EAt=new Mc(this.o,this.wP,this.uit,"","",this.gvt):this.EAt=void 0}},_G=class extends dG{get _ct(){return this.NAt.zm._ct}get gvt(){var t;return null!=(t=this.NAt.zm.gvt)?t:-1}get Mst(){if(this.NAt.zm.Mst)return[this.NAt.zm.Mst];{const t=[];for(const i of this.rrt)i.DAt.length&&-1===t.indexOf(i.uit)&&t.push(i.uit);return t}}get uit(){return this.Mst.join()}get wvt(){return this.NAt.zm.wvt}get Tst(){return this.NAt.zm.Tst}get HP(){return this.zF+'; codecs="'+this.uit+'"'}get vvt(){return this.NAt.vvt}get Avt(){return this.NAt.Avt}get Fct(){return this.NAt.zm.Fct}get Tct(){return this.NAt.zm.Tct}get Ti(){return this.NAt.zm.Ti||0}get o(){return this.NAt.zm.o}get kh(){return this.NAt.zm.kh||""}get mvt(){return this.NAt.zm.mvt}get pvt(){return this.NAt.zm.pvt}get ect(){return this.Yat.ect}get zF(){return this.NAt.zm.zF||this.Ect[0].zF}get Yat(){return this.vwt}get yvt(){return this.NAt.zm.yvt}get rrt(){return this.Ect}get Hct(){return this.NAt.zm.Hct||[]}get Mvt(){return this.NAt.zm.Mvt}get Tvt(){return this.NAt.zm.Tvt}get Nvt(){return this.NAt.zm.Nvt}get Cz(){return this.NAt.zm.Cz}get Dvt(){return this.NAt.zm.Dvt}get Rg(){const t=(this.NAt.zm.HP||this.zF).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||Sr(this.zF,this.Mst)?fi.Ru:"video"===t?fi.ym:"audio"===t?fi.Mm:"image"===t?fi.rT:fi.hT}get ji(){return this.NAt.zm.ji||0}get Y6(){return this.NAt.zm.gs||""}get Gct(){return this.pAt}get Yct(){const t=this.Gct,i=this.MAt;if(void 0===t||void 0===i)return;const e=_.min(i,this.ect.zAt);return _.max(t,e)}async Yn(t,i){if(0===this.Ect.length){const e=this.NAt.rrt.map((e=>this.BAt(e,t,i)));this.Ect=(await Promise.all(e)).filter(Po)}this.RAt()}async BAt(t,i,e){const s=new fG(this,t),n=await i(s);if(fo(e),n)return s}RAt(){if(!this.Ect.length)throw new g("Detected an AdaptationSet without any supported Representations.")}yAt(){return this.NAt.yAt()}OAt(){return this.NAt.OAt()}gn(){this.NAt.fn(ye.Vrt,this.TAt);for(const t of this.Ect)t.gn();No(this.Ect)}constructor(t,i){super(),this.Ect=[],this.vwt=t,this.NAt=i,this.NAt.yn(ye.Vrt,this.TAt)}};function gG(t,e){const s=[];for(const n of e)for(const e of t)s.push(i.Dh(e,n));return s}var mn=class{UAt(t){const i=t-this.vwt.Cn;if(i<0||i>=this.vwt.ct)return;const e=this.QAt();return void 0!==e&&M(e,i,1e-5)?this.FAt():this.YAt(i)}qat(t){const i=t-this.vwt.Cn;if(!(i<0))return this.GAt(_.min(i,this.vwt.ct))}FAt(){return this.VAt(0)}WAt(){const t=this.vwt.ct;if(isFinite(t))return this.GAt(t)}get HAt(){return this.vwt.XAt.qAt&&void 0!==this.ZAt()}CAt(t){if(this.vwt.XAt.Rg===ku.KC){if(this.HAt){const i=this.FAt(),e=this.ZAt();if(void 0===i||void 0===e)return;return{KAt:t,JAt:i,$At:e}}const i=this.tmt(t);if(!i)return;return{KAt:t,JAt:this.imt(t),$At:i}}{0;const i=this.FAt();if(i)return{KAt:t,JAt:i,$At:this.WAt()}}}OAt(t,i){if(i){let t=this.sct(i.JAt);const e=this.iut(i.$At);if(e){const i=this.nct(e);(!t||i.getTime()<t.getTime())&&(t=i)}return t}{const i=this.FAt();if(i){const e=this.nct(i);if(t.getTime()<e.getTime())return e}const e=this.vwt.XAt.eAt;return t.getTime()<e.getTime()?e:void 0}}tmt(t){const i=(t.getTime()-this.vwt.XAt.eAt.getTime())/1e3-this.vwt.Cn+this.emt;let e=this.GAt(os(i,0,this.vwt.ct));if(!e)return;if(e=this.smt(e,t),!e)return;let s=this.iut(e);for(;s&&this.lct(s,t);)e=s,s=this.iut(e);return e}imt(t){let i;const e=this.nmt.lvt;if(e){const s=(t.getTime()-this.vwt.XAt.eAt.getTime())/1e3-this.vwt.Cn-e.Gwt();i=this.GAt(os(s,0,this.vwt.ct)),i||(i=this.FAt())}else i=this.FAt();if(!i)return;if(i=this.smt(i,t),!i)return;let s=this.tut(i);for(;s&&this.lct(s,t);)i=s,s=this.tut(i);return i}smt(t,i){let e=t;for(;e&&this.nct(e).getTime()>i.getTime();)e=this.tut(e);if(!e)return;const s=this.sct(e);if(s&&s.getTime()<=i.getTime()){const t=this.tut(e);for(t&&this.lct(t,i)&&(e=t);e;){if(this.nct(e).getTime()>i.getTime())return;if(this.lct(e,i))break;e=this.iut(e)}if(!e)return}return e}lct(t,i){if(this.HAt)return!0;if(this.nct(t).getTime()>i.getTime())return!1;const e=this.sct(t);return!(e&&i.getTime()>=e.getTime())}hmt(t,i){if(this.HAt)return!0;if(this.omt(t).getTime()>i.getTime())return!1;const e=this.sct(t);return!(e&&i.getTime()>=e.getTime())}amt(t,i,e){const s=vi(i,this.qL)+this.vwt.Cn;return{Sot:t,umt:i,VT:s,ct:e,WT:s+e}}omt(t){return this.vwt.XAt.Rg===ku.KC?new Date(this.vwt.XAt.eAt.getTime()+1e3*(t.VT+t.ct)):this.vwt.XAt.eAt}nct(t){const i=this.omt(t);return this.vwt.XAt.Rg===ku.KC?new Date(i.getTime()-1e3*this.emt):i}sct(t){let i=1/0;if(this.vwt.XAt.Rg===ku.KC){const e=this.nmt.lvt;e&&(i=this.omt(t).getTime()+1e3*t.ct+e.Vwt())}const e=this.vwt.XAt.iAt;return e&&(i=_.min(i,e.getTime())),i===1/0?void 0:new Date(i)}cmt(t,i){return t.Sot+i}get QD(){return this.vwt.Cn-vi(this.lmt,this.qL)}get uvt(){return vi(this.lmt,this.qL)}Xat(t){return!1}Kat(t,i,e,s,n){const r=this.dmt(t);if(!r)return Promise.reject(new g("Invalid segment"));const h=this.fmt(r.Sot,i);return h?Promise.resolve(h):Ys(this._mt(r.Sot,i,e,s),n)}fmt(t,i){}_mt(t,i,e,s){return Promise.reject(new g("Not supported"))}tut(t){const i=this.dmt(t);if(i)return this.VAt(i.Sot-1)}iut(t){const i=this.dmt(t);if(i)return this.VAt(i.Sot+1)}dmt(t){const i=this.VAt(t.Sot);if(i&&i.VT===t.VT)return i;const e=this.UAt(t.VT);return e&&e.VT===t.VT?e:void 0}gmt(t,i){const e=this.Jat(t);if(!e||!this.Xat(e.Sot))return;const s=this.fmt(e.Sot,i);return s?s.gmt(t):void 0}Jat(t){return this.VAt(t.wmt)}Vut(t){const i=this.dmt(t);return!!i&&0===i.Sot}jAt(t,i){const e=this.gmt(t,i);return!!e&&0===e.Dot}Fat(t){const i=this.dmt(t);if(!i)return!1;const e=this.WAt();return!!e&&i.Sot===e.Sot}PAt(t,i){const e=this.gmt(t,i);if(!e)return!1;const s=this.WAt();if(!s||e.wmt!==s.Sot)return!1;const n=this.fmt(e.wmt,i);return e.Dot+1===n.U}Ud(){}constructor(t,i){this.vwt=t,this.nmt=i,this.qL=i.xp,this.emt=i.Kwt,this.lmt=i.uvt}},wG=class extends mn{VAt(t){if(t<0)return;const i=this.vmt.multiply(t),e=vi(i,this.qL),s=this.vwt.ct;if(e>=s)return;const n=this.Amt();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.amt(t,i,s-e)}return isFinite(s)&&e+this.mmt>s?this.amt(t,i,s-e):this.amt(t,i,this.mmt)}QAt(){return 0}YAt(t){const i=_.floor(t/this.mmt),e=this.Amt();return void 0!==e&&i>=e?this.VAt(e):this.VAt(i)}GAt(t){if(t>=this.vwt.ct){const t=_.ceil(this.vwt.ct/this.mmt)-1,i=this.Amt();return void 0!==i&&t>=i?this.VAt(i):this.VAt(t)}return this.YAt(t)}Amt(){const t=this.nmt._vt;var i;if(void 0!==t)return t-(null!=(i=this.nmt.fvt)?i:1);const e=this.nmt.pmt;return void 0!==e&&e>0?e-1:void 0}ZAt(){if(isFinite(this.vwt.ct))return this.WAt()}ymt(t,i){return this.vmt.multiply(t.Sot+(i-1))}Yn(){}constructor(t,i){super(i,t);const e=t.Mmt,s=t.ct;if(void 0===e||void 0===s)throw new g("MultipleSegmentBase does not have a segment duration specified.");this.vmt=e,this.mmt=s}};function vG(t,i,e){const s=i.length;if(0===s)return-1;let n=0,r=s-1,h=t.Tmt(i[n]),o=t.Nmt(i[r]);for(;n<=r&&t.Dmt(h,e)<=0&&t.Dmt(e,o)<0;){const a=n+_.floor(t.Smt(e,h,o)*(r-n)),u=i[a],c=t.Tmt(u),l=a+1<s?t.Tmt(i[a+1]):t.Nmt(u);if(t.Dmt(l,e)<=0)n=a+1,h=l;else{if(!(t.Dmt(e,c)<0))return a;r=a-1,o=c}}return-1}function AG(t,i){return vG(mG.Lb,t,i)}var mG=class t{static get Lb(){return null!=this.yst||(this.yst=new t),this.yst}Tmt(t){return t.VT}Nmt(t){return t.WT}Dmt(t,i){return t.compare(i)}Smt(t,i,e){return t.subtract(i).toNumber()/e.subtract(i).toNumber()}},pG=class extends mn{VAt(t){if(!(t<0))return t<this.Imt.length?this.Imt[t].Mot:this.Emt(t-this.Imt.length)}QAt(){if(this.Imt.length>0)return vi(this.Imt[0].VT,this.qL)}YAt(t){if(this.bmt&&vi(this.bmt.VT,this.qL)<=t){const i=vi(this.bmt.VT,this.qL),e=vi(this.bmt.ct,this.qL),s=_.floor((t-i)/e);return this.Emt(s)}if(this.Imt.length>0&&M(t,vi(this.Imt[0].VT,this.qL),1e-5))return this.Imt[0].Mot;const i=AG(this.Imt,Ce.fromNumber(t*this.qL));return i<0?void 0:this.Imt[i].Mot}GAt(t){if(!this.bmt&&this.Imt.length>0){const i=this.Imt[this.Imt.length-1];if(function(t,i,e){return ld(t,i,e)>=0}(t,vi(i.WT,this.qL),1e-5))return i.Mot}const i=this.QAt();return i&&t<i?this.Imt[0].Mot:this.YAt(t)}ZAt(){return isFinite(this.vwt.ct)?this.WAt():this.VAt(this.Imt.length-1)}ymt(t){return this.Lmt(t)}Emt(t){if(!this.bmt)return;const i=this.bmt.VT,e=this.bmt.ct,s=i.add(e.multiply(t)),n=vi(s,this.qL),r=this.vwt.ct;if(n>=r)return;const h=this.Imt.length+t,o=_.min(vi(e,this.qL),n+r);return this.amt(h,s,o)}Lmt(t){return t.umt.add(this.lmt)}Yn(){const t=this.nmt.zm._nt;if(!t)throw new g("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.kmt(t)}kmt(t){const i=this.lmt;this.xmt(t,i);const e=this.Cmt(t);this.Omt(t,i,e.jmt,e.wmt)}xmt(t,i){const e=this.Imt;if(0===t.length)No(e);else{const s=t[0],n=s.VT?Ce.fromString(s.VT,!1).subtract(i):Ce.ZERO;let r=0;for(;r<e.length&&e[r].VT.lessThan(n);)r++;r>0&&e.splice(0,r)}}Cmt(t){const i=this.Imt,e=this.ggt;let s=0,n=0;for(;s<t.length&&n<i.length;){const r=t[s].tvt||0;if(r<0)break;const h=n+r;if(h>=i.length)break;if(i[h].VT.greaterThanOrEqual(e))break;if(i[n].Mot.Sot===n)n=h+1;else for(;n<=h;)i[n].Mot.Sot=n,n++;0,s++}return{jmt:s,wmt:n}}Omt(t,i,e,s){const n=this.Imt;let r,h=e,o=s;for(;h<t.length;){const e=t[h],s=Ce.fromString(e.ct,!1),a=e.tvt||0;let u;if(e.VT){if(u=Ce.fromString(e.VT,!1).subtract(i),o>0){const t=n[o-1];t.WT.greaterThan(u)&&(t.ct=u.subtract(t.VT),t.WT=t.VT.add(t.ct))}}else u=o>0?n[o-1].WT:Ce.ZERO;if(a<0){if(h+1===t.length){r={VT:u,ct:s};break}const e=Ce.fromString(t[h+1].VT,!1).subtract(i);for(;u.lessThan(e);){const t=u.add(s);this.Pmt(n,o,u,s,t),u=t,o++}}else{const t=o+a;for(;o<=t;){const t=u.add(s);this.Pmt(n,o,u,s,t),u=t,o++}}h++}o<n.length&&n.splice(o),n.length>0&&(this.ggt=n[n.length-1].VT),this.bmt=r}Pmt(t,i,e,s,n){if(i<t.length){const r=t[i];0,r.ct.equals(s)?r.Mot.Sot=i:t[i]={VT:e,ct:s,WT:n,Mot:this.amt(i,e,vi(s,this.qL))}}else t.push({VT:e,ct:s,WT:n,Mot:this.amt(i,e,vi(s,this.qL))})}constructor(t,i){super(i,t),this.Imt=[],this.bmt=void 0,this.ggt=Ce.ZERO,this.Yn()}},yG=class{get zm(){return this.JL}get Kwt(){return this.JL&&void 0!==this.JL.Kwt?this.JL.Kwt:this.zmt?this.zmt.Kwt:0}get uvt(){return this.JL&&void 0!==this.JL.uvt?this.JL.uvt:this.zmt?this.zmt.uvt:Ce.ZERO}get lvt(){return this.JL&&void 0!==this.JL.lvt?this.JL.lvt:this.zmt?this.zmt.lvt:this.Yat.XAt.lvt}get xp(){return this.JL&&void 0!==this.JL.xp?this.JL.xp:this.zmt&&this.zmt.xp?this.zmt.xp:1}get ivt(){return this.JL&&void 0!==this.JL.ivt?this.JL.ivt:this.zmt?this.zmt.ivt:void 0}get avt(){return this.JL&&void 0!==this.JL.avt?this.JL.avt:this.zmt?this.zmt.avt:void 0}get _nt(){return this.Bmt||(this.Bmt=this.Rmt()),this.Bmt}Rmt(){if(this.Umt=this.Qmt(),this.Umt)return this.Umt;if(this.zmt)return this.zmt._nt;throw new g("Missing media segment information.")}IAt(t){const e=this.avt;if(e){return{zu:(void 0!==e.$wt?i.Dh(e.$wt,t.Lvt[0]):t.Lvt[0]).href,Qht:e.Qht}}const s=this.ivt;if(s)return{zu:t.Lvt[0].href,Qht:[0,s[0]-1]}}Yn(t){this.JL=t,this.Umt&&this.Umt.Yn()}Ud(){this.Umt&&(this.Umt.Ud(),this.Umt=void 0)}constructor(t,i,e){this.Bmt=void 0,this.Umt=void 0,this.Yat=t,this.zmt=i,this.JL=e}},zo=class extends yG{get ct(){return void 0!==this.JL.ct?this.JL.ct/this.xp:this.zmt&&MG(this.zmt)?this.zmt.ct:void 0}get Mmt(){return void 0!==this.JL.ct?Ce.fromNumber(this.JL.ct):this.zmt&&MG(this.zmt)?this.zmt.Mmt:void 0}get fvt(){return void 0!==this.JL.fvt?this.JL.fvt:this.zmt&&MG(this.zmt)?this.zmt.fvt:void 0}get _vt(){return void 0!==this.JL._vt?this.JL._vt:this.zmt&&MG(this.zmt)?this.zmt._vt:void 0}Qmt(){return void 0!==this.JL._nt?new pG(this,this.Yat):void 0!==this.JL.ct?new wG(this,this.Yat):void 0}};function MG(t){return t instanceof zo}var TG=class{Zb(t){return this.Fmt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((i,e,s,n)=>{if("$$"===i)return"$";const r=t[e];if(void 0===r)return i;if(void 0===s)return r.toString();let h=function(t,i){switch(i){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===h?i:(h=Es(h,Number(s),"0"),h)}))}constructor(t){this.Fmt=t}};var NG=class t extends zo{get Evt(){return this.Ymt?this.Ymt:this.zmt&&this.zmt instanceof t?this.zmt.Evt:void 0}get bvt(){return this.Gmt?this.Gmt:this.zmt&&this.zmt instanceof t?this.zmt.bvt:void 0}IAt(t){const e=this.Evt;if(!e)return super.IAt(t);const s=e.Zb({Bandwidth:t.zm.wP,RepresentationID:t.zm.o});return{zu:i.Uv(s,t.Lvt[0])}}nut(t,e){var s;const n=null!=(s=e.bAt.fvt)?s:1,r=this.bvt.Zb({Bandwidth:e.zm.wP,Number:e._nt.cmt(t,n),RepresentationID:e.zm.o,Time:e._nt.ymt(t,n)});return{zu:i.Uv(r,e.Lvt[0])}}xAt(t,i){}get pmt(){}constructor(t,i,e){super(t,i,e),this.Ymt=e.Evt?new TG(e.Evt):void 0,this.Gmt=e.bvt?new TG(e.bvt):void 0}},DG=class t extends zo{nut(t,e){const s=this.svt[t.Sot],n=e.Lvt[0];let r;return r=s.Bp?i.Dh(s.Bp,n):n,{zu:r.href,Qht:s.evt}}xAt(t,i){}get svt(){return void 0!==this.JL.svt?this.JL.svt:this.zmt&&this.zmt instanceof t?this.zmt.svt:void 0}get pmt(){var t;return null==(t=this.svt)?void 0:t.length}},SG=class{gmt(t){const i=this.$at(t.Dot);if(i&&i.VT===t.VT)return i;const e=this.Vmt(t.VT);return e&&e.VT===t.VT?e:void 0}},IG=class extends SG{get U(){return this.Wmt.length}$at(t){if(t>=0&&t<this.U)return this.Hmt(this.Wmt[t])}Vmt(t){const i=this.qmt(t);if(this.Wmt.length>0){const t=this.Wmt[0];if(i<=vi(t.VT,this.xp))return this.Hmt(t)}const e=AG(this.Wmt,Ce.fromNumber(i*this.xp));if(!(e<0))return this.Hmt(this.Wmt[e])}Zat(t){const i=this.qmt(t);if(this.Wmt.length>0){const t=this.Wmt[this.Wmt.length-1];if(i>=vi(t.WT,this.xp))return this.Hmt(t)}return this.Vmt(t)}Hmt(t){const i=vi(t.VT,this.xp)-this.uvt,e=i+this.Xmt,s=vi(t.ct,this.xp);return{wmt:this.wmt,Dot:t.Sot,VT:e,umt:Ce.fromNumber(i*this.xp),ct:s,WT:e+s,Zmt:[t.Kmt,t.Jmt]}}qmt(t){return t-this.Xmt+this.uvt}constructor(t,i,e,s,n){super(),this.wmt=t,this.xp=i,this.Xmt=e,this.uvt=s,this.Wmt=n}};var EG=class t{z_t(){return this.Bm.Ku<this.zm.byteLength}$mt(){const i=this.tpt(),e=this.ipt(),s=this.Bm.Ku,n=this.zm.byteLength;let r;r=t.ept(e)?n-s:t.spt(e);const h=s+r<=n?r:n-s,o=rl(this.zm,this.Bm,h);return new LG(i,Ao(o))}tpt(){const t=this.ipt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let i=0;for(let e=0;e<t.length;e++)i=256*i+t[e];return i}ipt(){const t=Mo(this.zm,this.Bm.Lm());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const e=8-(31-j_(t));return i.fit(e<=8&&e>=1,"Incorrect log2 value"),rl(this.zm,this.Bm,e)}static spt(t){if(8===t.length&&224&t[1])throw new b("EBML variable sized integer is too large");let i=0;for(let e=0;e<t.length;e++){const s=t[e];if(0===e){i=s&(1<<8-t.length)-1}else i=256*i+s}return i}static ept(t){for(const i of bG)if(to(t,new j(i)))return!0;return!1}constructor(t){this.zm=t,this.Bm=new _s}},bG=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],LG=class{npt(){return this.rpt.byteOffset}hpt(){return new EG(this.rpt)}opt(){const t=this.rpt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.rpt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let i=0;for(let e=0;e<t;e++){i=256*i+this.rpt.getUint8(e)}return i}kH(){if(4===this.rpt.byteLength)return this.rpt.getFloat32(0);if(8===this.rpt.byteLength)return this.rpt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,i){this.id=t,this.rpt=i}};function kG(t,i){const e=function(t){const i=new EG(Ao(t)),e=i.$mt();if(e.id!==CG)throw new b("Missing WebM EBML header");const s=i.$mt();if(s.id!==OG)throw new b("Missing WebM SegmentElement");const n=s.npt(),r=function(t){const i=t.hpt();let e;for(;i.z_t();){const t=i.$mt();if(t.id===jG){e=t;break}}if(!e)throw new b("Missing WebM InfoElement");return function(t){const i=t.hpt();let e,s=1e6;for(;i.z_t();){const t=i.$mt();t.id===PG?s=t.opt():t.id===zG&&(e=t.kH())}if(void 0===e)throw new b("Missing Duration in WebM InfoElement");const n=s/1e9,r=e*n;return{timecodeScale:n,duration:r}}(e)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(i),s=new EG(Ao(t)).$mt();if(s.id!==BG)throw new b("Missing WebM CuesElement");const n=function(t,i,e,s){const n=[],r=t.hpt();let h,o;for(;r.z_t();){const t=r.$mt();if(t.id!==RG)continue;const e=xG(t);if(!e)continue;const s=e.unscaledTime,a=i+e.relativeOffset;void 0!==h&&n.push({Sot:n.length,VT:h,ct:s.subtract(h),WT:s,Kmt:o,Jmt:a-1}),h=s,o=a}if(void 0!==h){0;const t=Ce.fromNumber(s/e);n.push({Sot:n.length,VT:h,ct:t.subtract(h),WT:t,Kmt:o,Jmt:void 0})}return n}(s,e.segmentOffset,e.timecodeScale,e.duration);return{xp:_.round(1/e.timecodeScale),apt:n}}function xG(t){const i=t.hpt(),e=i.$mt();if(e.id!==UG)throw new b("Missing CueTime in WebM CuePointElement");const s=Ce.fromNumber(e.opt()),n=i.$mt();if(n.id!==QG)throw new b("Missing CueTrackPositions in WebM CuePointElement");const r=n.hpt();let h=0;for(;r.z_t();){const t=r.$mt();if(t.id===FG){h=t.opt();break}}return{unscaledTime:s,relativeOffset:h}}var CG=440786851,OG=408125543,jG=357149030,PG=2807729,zG=17545,BG=475249515,RG=187,UG=179,QG=183,FG=241,YG=class extends mn{VAt(t){if(0===t)return this.upt}QAt(){return 0}YAt(t){return this.upt}GAt(t){return this.YAt(t)}ZAt(){return this.upt}ymt(t,i){return Ce.ZERO}CAt(t){const i=this.cpt(t);return i&&{KAt:t,JAt:i,$At:i}}cpt(t){const i=this.upt;return this.lct(i,t)?i:void 0}tmt(t){return this.cpt(t)}imt(t){return this.cpt(t)}Yn(){}Xat(t){return 0===t&&void 0!==this.lpt}fmt(t,i){const e=i.Lvt[0].href;return this.dpt.get(e)}_mt(t,i,e,s){const n=i.Lvt[0].href;let r=this.fpt.get(n);if(void 0===r){const h=i.zF,o=this._pt.Wd;if(pi(h))r=this.gpt(t,n,e,s,o);else{if(!lA(h))throw new Rs(Ui.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+h);r=this.wpt(t,n,i,e,s,o)}this.fpt.set(n,r)}return r}async gpt(t,i,e,s,n){const r=this.lpt,h=await s.Tut(i,r,e,n),o=this.vpt(t,h);return this.dpt.set(i,o),o}vpt(t,i){const e=this.lpt,s=At.ep(new DataView(i),new _s);if(s.Rg!==he.gm)throw new g("Invalid segment index");const n=iu.Np(s.zm),r=function(t,i){const e=[];let s=t.JM,n=i+t.$M.toNumber(),r=0;for(const i of t.iT){const t=i.HM,h=Ce.fromNumber(i.ct),o=s.add(h);0===i.WM&&e.push({Sot:r++,VT:s,ct:h,WT:o,Kmt:n,Jmt:n+t-1}),n+=t,s=o}return e}(n,e[1]+1);return new IG(t,n.xp,this.vwt.Cn,vi(this.lmt,this.qL),r)}async wpt(t,i,e,s,n,r){const h=e.IAt(),o=this.lpt,a=n.Tut(h.zu,h.Qht,s,r),u=n.Tut(i,o,s,r),[c,l]=await Promise.all([a,u]),d=this.Apt(t,l,c);return this.dpt.set(i,d),d}Apt(t,i,e){const s=kG(new j(i),new j(e));return new IG(t,s.xp,this.vwt.Cn,vi(this.lmt,this.qL),s.apt)}Ud(){super.Ud(),this._pt.qd()}constructor(t,i){super(i,t),this.dpt=ke(),this.fpt=ke(),this._pt=new Wr,this.lpt=t.ivt,this.upt=this.amt(0,Ce.ZERO,this.vwt.ct)}},GG=class extends yG{get fvt(){}nut(t,i){return{zu:i.Lvt[0].href}}xAt(t,i){return{zu:i.Lvt[0].href,Qht:t.Zmt}}Qmt(){return new YG(this,this.Yat)}},VG=class extends wn{constructor(){super(ye.Vrt)}};var WG=class extends Bo{get zm(){return this.JL}get Lvt(){return this.mpt}ppt(){var t,i;return null!=(i=this.nmt)?i:null==(t=this.Sit)?void 0:t.ppt()}ypt(t){const i=this.Yat,e=this.Sit&&this.Sit.ppt();this.JL.Cvt?this.nmt=new NG(i,e,this.JL.Cvt):this.JL.xvt?this.nmt=new DG(i,e,this.JL.xvt[0]):this.JL.kvt?this.nmt=new GG(i,e,this.JL.kvt):t&&!e&&(this.nmt=new GG(i,e,void 0))}Mpt(t,i){this.JL=t,this.mpt=t.Lvt&&t.Lvt.length>0?gG(t.Lvt.map((t=>t.zu)),i):i.slice(),this.nmt&&(t.Cvt?this.nmt.Yn(t.Cvt):t.xvt?this.nmt.Yn(t.xvt[0]):t.kvt&&this.nmt.Yn(t.kvt))}yAt(){var t;return null==(t=this.Tpt)?void 0:t.Npt}OAt(){var t;return null==(t=this.Tpt)?void 0:t.Dpt}Spt(t){const i=this.Ipt,e=this.Yat.ct,s=this.Tpt,n=this.Ept(t);s&&M(e,i,1e-5)&&XG(s,n)||(this.Ipt=e,this.Tpt=n,this.Co(new VG))}Ud(){this.Vo(),this.nmt&&(this.nmt.Ud(),this.nmt=void 0)}constructor(t,i,e){super(),this.nmt=void 0,this.Ipt=1/0,this.Tpt=void 0,this.Sit=i,this.Mpt(t,e)}};function HG(t){let i,e;for(const e of t){const t=e.yAt();if(t){i=t.Cn;break}}if(void 0!==i){for(let i=t.length-1;i>=0;i--){const s=t[i].yAt();if(s){e=s.jn;break}}return void 0!==e?{Cn:i,jn:e}:void 0}}function qG(t){if(0===t.length)return;let i=0,e=1/0;for(const s of t){const t=s.yAt();if(!t)return;if(i=_.max(i,t.Cn),e=_.min(e,t.jn),i>=e)return}return{Cn:i,jn:e}}function Nc(t){let i;for(const e of t){const t=e.OAt();t&&(!i||t.getTime()<i.getTime())&&(i=t)}return i}function XG(t,i){return function(t,i){return t&&i?t.getTime()===i.getTime():t===i}(t.Dpt,i.Dpt)&&function(t,i){return t&&i?M(t.Cn,i.Cn,1e-5)&&M(t.jn,i.jn,1e-5):t===i}(t.Npt,i.Npt)}var ZG=class extends dG{get Xnt(){return this.bpt}get Mst(){return this.Xnt.reduce(((t,i)=>{for(const e of i.Mst)qo(t,e)||t.push(e);return t}),[])}get uit(){return this.Mst.length>0?this.Mst[0]:""}get Rg(){return this.bpt[0].Rg}get o(){return this.CT}get ect(){return this.vwt.ect}get zF(){return this.bpt[0].zF}get Yat(){return this.vwt}get rrt(){return A(this.Xnt,(t=>t.rrt))}yAt(){return qG(this.bpt)}OAt(){let t;for(const i of this.bpt){const e=i.OAt();e&&(!t||e.getTime()<t.getTime())&&(t=e)}return t}gn(){this.Vo();for(const t of this.bpt)t.fn(ye.Vrt,this.TAt)}constructor(t,i,e){super(),this.vwt=t,this.CT=i,this.bpt=e.slice();for(const t of e)t.yn(ye.Vrt,this.TAt)}},KG=class extends wn{constructor(){super(ye.Hrt)}};function JG(t){const i=[];for(const e of t){let t;const s=e.Tct;void 0===s||(t=Vt(i,(t=>t.o===s))),t||(t={o:s,Xnt:[]},i.push(t)),t.Xnt.push(e)}return i}var _o,$G=class extends dG{get Xnt(){return this.bpt}get wwt(){return this.Lpt}get Kvt(){return this.NAt.zm.Kvt}get ct(){return this.NAt.ct}get jn(){return this.Cn+this.ct}get Jvt(){return this.NAt.zm.Jvt||[]}get o(){return this.NAt.o}get qrt(){return this.kpt}get ect(){return this.xpt}get Cpt(){return this.xpt.Opt(this)}get Yat(){return this}get jpt(){return this.xpt.Ppt(this)}get zpt(){return this.Bpt(1/0,_.min)}get Rpt(){return this.Bpt(0,_.max)}Bpt(t,i){if(0===this.Lpt.length)return;let e=t;for(const t of this.Lpt){const s=t.Rg;if(s===fi.Mm||s===fi.ym){const s=t.MAt;if(void 0===s)return;e=i(e,s)}}return e}get Cn(){return this.NAt.Cn}get pI(){return this.ect.pI}Upt(){this.kpt||(this.kpt=!0,this.Co(new KG),this.gn())}async Yn(t,i){0===this.bpt.length?(await this.Qpt(this.NAt.Xnt,t,i),this.Fpt(this.bpt),fo(i)):await this.Ypt(t,i)}async Qpt(t,i,e){for(const s of t){const t=new _G(this,s);try{await t.Yn(i,e),this.bpt.push(t)}catch(t){yo(t)}}}Fpt(t){const i=JG(t);for(const t of i){const i=new ZG(this,t.o,t.Xnt);this.Lpt.push(i)}}async Ypt(t,i){for(const e of this.bpt)await e.Yn(t,i)}yAt(){return this.NAt.yAt()}OAt(){return this.NAt.OAt()}gn(){this.Vo(),this.NAt.fn(ye.Vrt,this.TAt);for(const t of this.Lpt)t.gn();for(const t of this.bpt)t.gn();No(this.bpt),No(this.Lpt)}constructor(t,i){super(),this.bpt=[],this.Lpt=[],this.kpt=!1,this.xpt=t,this.NAt=i,this.NAt.yn(ye.Vrt,this.TAt)}},tV=class extends wn{constructor(){super(Co.lw)}};(_o||(_o={})).Gpt="Vpt";var iV=class extends wn{constructor(){super(_o.Gpt)}},eV=class extends WG{get Zot(){return this.Nht}get Yat(){return this.Nht.Yat}get XAt(){return this.Nht.XAt}get zF(){return this.JL.zF||this.Nht.zF}get bAt(){return this.ppt()}get _nt(){return this.bAt._nt}Xat(t){const i=this.zF;return!(!pi(i)&&!lA(i))&&this._nt.Xat(t.Sot)}Kat(t,i,e,s){return this._nt.Kat(t,this,i,e,s)}IAt(){return this.bAt.IAt(this)}nut(t){return this.bAt.nut(t,this)}xAt(t){return this.bAt.xAt(t,this)}CAt(){return this.Wpt}Ept(t){const i=this._nt,e=i.CAt(t),s=e&&function(t,i){const{JAt:e,$At:s,KAt:n}=t,r=e.VT;let h;const o=i.omt(s);if(o.getTime()<=n.getTime())h=s.WT;else{const t=(o.getTime()-n.getTime())/1e3,i=_.max(s.ct-t,0);h=s.VT+i}return{Cn:r,jn:h}}(e,i),n=this._nt.OAt(t,e);return this.Wpt=e,{KAt:t,Npt:s,Dpt:n}}Yn(t){this.Mpt(t,this.Nht.Lvt)}constructor(t,i){super(t,i,i.Lvt),this.Wpt=void 0,this.Nht=i,this.ypt(!0)}},sV=class extends WG{get rrt(){return this.Ect}get Yat(){return this.vwt}get XAt(){return this.vwt.XAt}get Tct(){return this.JL.Tct}get zF(){var t;return this.JL.zF||(null==(t=this.Ect[0])?void 0:t.zm.zF)||""}get vvt(){return this.zm.vvt}get Avt(){return this.zm.Avt}Yn(t){this.Mpt(t,this.vwt.Lvt);const i=t.rrt||[];if(this.Ect.length!==i.length)throw new g("Expected "+this.Ect.length+' representations in adaptation set "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.Ect[t].Yn(i[t])}Spt(t){for(const i of this.Ect)i.Spt(t);super.Spt(t)}Ept(t){return{KAt:t,Npt:qG(this.Ect),Dpt:Nc(this.Ect)}}Ud(){for(const t of this.Ect)t.Ud();super.Ud()}constructor(t,i){super(t,i,i.Lvt),this.vwt=i,this.ypt(!1),this.Ect=t.rrt.map((t=>new eV(t,this)))}},nV=class extends WG{get Xnt(){return this.bpt}get wwt(){return this.Lpt}get Yat(){return this}get XAt(){return this.Hpt}get o(){return this.JL.o}get Cn(){return this.uS}get ct(){return this.XL}Yn(t,i){this.Mpt(t,this.Hpt.Lvt),this.XL=i;const e=t.Xnt||[];if(this.bpt.length!==e.length)throw new g("Expected "+this.bpt.length+' adaptation sets in period "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.bpt[t].Yn(e[t])}Spt(t){for(const i of this.bpt)i.Spt(t);super.Spt(t)}Ept(t){return{KAt:t,Npt:qG(this.bpt),Dpt:Nc(this.bpt)}}Ud(){for(const t of this.bpt)t.Ud();super.Ud()}constructor(t,i,e,s){super(i,void 0,t.Lvt),this.Lpt=[],this.Hpt=t,this.uS=e,this.XL=s,this.ypt(!1),this.bpt=(i.Xnt||[]).map((t=>new sV(t,this))),this.Lpt=JG(this.bpt)}},rV=class{get qpt(){return this.Xpt.tAt._D}get Zpt(){return this.Xpt.tAt.fD}get Kpt(){return this.Xpt.tAt.$vt}get Jpt(){var t;return null==(t=this.Xpt.Gf)?void 0:t._D}get $pt(){var t;return null==(t=this.Xpt.Gf)?void 0:t._D}constructor(t){this.Xpt=t}},hV=new Date("2000-01-01"),oV=class extends Bo{get zm(){return this.JL}get Rg(){return this.JL.Rg||ku.ZC}get eAt(){return this.tyt||this.JL.eAt||this.cAt}get iAt(){return this.JL.iAt}get qAt(){var t,i;return null!=(i=null==(t=this.iyt)?void 0:t.ignoreAvailabilityWindow)&&i}get oAt(){return this.eyt}get Lvt(){return this.mpt}get sAt(){return this.syt}get Iwt(){return this.nyt}get cAt(){return this.JL.cAt||this.An}get lvt(){return this.JL.lvt}get ryt(){return this.hyt}get oyt(){return this.An}get fAt(){return this.Xpt}yAt(){var t;return null==(t=this.Tpt)?void 0:t.Npt}OAt(){var t;return null==(t=this.Tpt)?void 0:t.Dpt}Yn(t,i,e,s){var n;const r=void 0!==this.JL&&this.JL.Rg===ku.KC;this.JL=t,this.hyt=null!=s?s:e,this.An=e;const h=[Bf(i)];this.mpt=t.Lvt&&t.Lvt.length>0?gG(t.Lvt.map((t=>t.zu)),h):h,this.syt=t.sAt&&t.sAt.length>0?gG(t.sAt,this.mpt):[];const o=this.syt.map((t=>t.href)),a=i.href;qo(o,a)||(this.syt.push(i),o.push(a));const u=this.ayt.href;qo(o,u)||(this.syt.push(this.ayt),o.push(u)),this.eyt=null==(n=t.oAt)?void 0:n.Gwt(),t.fAt&&(this.Xpt=new rV(t.fAt));const c=t.Rg===ku.KC,l=function(t,i,e){const s=[];for(let e=0;e<t.length;e++){const n=t[e];let r;if(n.Cn)r=n.Cn.Gwt();else if(e>0&&t[e-1].ct){r=s[e-1]+t[e-1].ct.Gwt()}else{if(0!==e||i)break;r=0}s.push(r)}const n=[];for(let i=0;i<s.length-1;i++)n.push({zm:t[i],Cn:s[i],ct:s[i+1]-s[i]});if(s.length>0){const r=s.length-1,h=t[r],o=s[r];let a=1/0;i||(a=h.ct?h.ct.Gwt():e-o),n.push({zm:h,Cn:o,ct:a})}return n}(t.Iwt,c,this.eyt);this.uyt(l,r,c),this.Spt(e)}uyt(t,i,e){const s=this.nyt;if(0===t.length)return void No(s);const n=t[0].zm.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const h=s.splice(0,r);for(const t of h)t.Ud();if(i&&!e&&s.length>0&&t.length>0){var o;const i=null!=(o=aV(s[0].zm))?o:is.zN;var a;const e=null!=(a=aV(t[0].zm))?a:is.zN;if(e.pN(i)){const n=e.LN(i);void 0!==this.eyt&&(this.eyt+=n.mN());for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];e.Cn=t.Cn,fV(e.zm,t.zm)}i===t.length-1&&(e.ct+=n.mN())}}}for(let i=0;i<t.length;i++){const e=t[i];if(i<s.length){const t=s[i];0,t.Yn(e.zm,e.ct)}else s.push(new nV(this,e.zm,e.Cn,e.ct))}}Spt(t){for(const i of this.nyt)i.Spt(t);const i=this.Tpt,e=this.Ept(t);i&&XG(i,e)||(this.Tpt=e,this.Co(new VG))}Ept(t){return{KAt:t,Npt:HG(this.nyt),Dpt:Nc(this.nyt)}}ZAt(){if(0===this.nyt.length)return;const t=this.nyt[this.nyt.length-1];if(isFinite(t.ct))return;if(0===t.Xnt.length)return;const i=t.Xnt[0];if(0===i.rrt.length)return;const e=i.rrt[0]._nt,s=e.ZAt();return s?{Mot:s,iAt:e.sct(s)}:void 0}Ud(){this.Vo();for(const t of this.nyt)t.Ud()}constructor(t,i,e,s,n){if(super(),this.Tpt=void 0,this.eyt=void 0,this.tyt=void 0,this.nyt=[],this.ayt=i,this.iyt=n,this.Yn(t,e,s),t.Rg===ku.KC){const t=this.ZAt();t&&t.iAt&&t.iAt.getTime()<hV.getTime()&&(this.tyt=new Date(this.cAt.getTime()-1e3*(t.Mot.VT+t.Mot.ct)),this.Spt(s))}}};function aV(t){let i=lV(t);var e,s;for(const s of null!=(e=t.Xnt)?e:[])i=yv(i,uV(s));for(const e of null!=(s=t.Jvt)?s:[])i=yv(i,dV(e));return i}function uV(t){let i=lV(t);for(const e of t.rrt)i=yv(i,cV(e));return i}function cV(t){return lV(t)}function lV(t){let i;if(void 0!==t.Cvt&&(i=yv(i,dV(t.Cvt))),void 0!==t.kvt&&(i=yv(i,dV(t.kvt))),void 0!==t.xvt)for(const e of t.xvt)i=yv(i,dV(e));return i}function dV(t){var i,e;return is.ON(null!=(i=t.uvt)?i:Ce.ZERO,null!=(e=t.xp)?e:1)}function fV(t,i){if(wV(t,i),t.Cn=i.Cn,void 0!==t.Xnt&&void 0!==i.Xnt&&t.Xnt.length===i.Xnt.length)for(let e=0;e<t.Xnt.length;e++)_V(t.Xnt[e],i.Xnt[e]);if(void 0!==t.Jvt&&void 0!==i.Jvt&&t.Jvt.length===i.Jvt.length)for(let e=0;e<t.Jvt.length;e++)vV(t.Jvt[e],i.Jvt[e])}function _V(t,i){if(wV(t,i),void 0!==t.rrt&&void 0!==i.rrt&&t.rrt.length===i.rrt.length)for(let e=0;e<t.rrt.length;e++)gV(t.rrt[e],i.rrt[e])}function gV(t,i){wV(t,i)}function wV(t,i){if(void 0!==t.Cvt&&void 0!==i.Cvt&&vV(t.Cvt,i.Cvt),void 0!==t.kvt&&void 0!==i.kvt&&vV(t.kvt,i.kvt),void 0!==t.xvt&&void 0!==i.xvt&&t.xvt.length===i.xvt.length)for(let e=0;e<t.xvt.length;e++)vV(t.xvt[e],i.xvt[e])}function vV(t,i){t.xp=i.xp,t.uvt=i.uvt}var AV=class{async jW(t){await this.cyt(t,this.EI,this.lyt,this.dyt).catch(Pd)}ict(){return new Date(_r()+this.fyt)}async cyt(t,i,e,s){let n;if(s&&(n=await this._yt(i,s,e)),void 0===n){fo(e);for(const s of t)if(n=await this.gyt(i,s,e),void 0!==n)break}this.fyt=void 0===n?0:n-_r()}async gyt(t,i,e){switch(i.Nst){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=i.PM;if(s)return await this._yt(t,s,e);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=i.PM;if(t){const i=new Date(t).getTime();if(!S(i))return i}break}default:return}}async _yt(t,i,e){try{const s=await t.LS({zu:i,gI:yt.GET,wI:oe.Ru,Wd:e}),n=await s.bI(),r=new Date(n).getTime();if(!S(r))return r}catch(t){yo(t)}}constructor(t,i,e){this.EI=t,this.lyt=i,this.dyt=e,this.fyt=0}},mV=class extends Bo{get iAt(){return this.NAt&&this.NAt.iAt}get eAt(){return this.NAt&&this.NAt.eAt}get qAt(){return this.NAt&&this.NAt.qAt}get o(){return this.NAt&&this.NAt.zm.o}get ryt(){var t;return null==(t=this.NAt)?void 0:t.ryt}get wyt(){var t;return null==(t=this.NAt)?void 0:t.oyt}get sAt(){return this.NAt?this.NAt.sAt.map((t=>t.href)):[this.vyt]}get vyt(){return this.Ayt.href}get rAt(){return this.NAt&&this.NAt.zm.rAt}get hAt(){return this.NAt&&this.NAt.zm.hAt}get oAt(){return this.NAt&&this.NAt.zm.oAt}get aAt(){return this.NAt&&this.NAt.zm.aAt}get uAt(){var t,i;const e=(null==(i=this.NAt)||null==(t=i.zm.uAt)?void 0:t.Vwt())||0;return _.max(e,yV)}get Uf(){return this.myt}pyt(t){const i=this.Uf;this.myt=t,i!==this.Uf&&this.Co(new iV)}get Iwt(){return this.nyt}get yyt(){return this.Rg===ku.KC?this.zAt:this.Myt}get Tyt(){const t=this.yyt;if(void 0!==t)for(const i of this.Iwt)if(i.Cn<=t&&i.jn>t)return i}get yvt(){return this.NAt&&this.NAt.zm.yvt}get cAt(){return this.NAt&&this.NAt.cAt}get zpt(){for(let t=this.nyt.length-1;t>=0;t-=1){const i=this.nyt[t].zpt;if(i)return i}}get zAt(){const t=this.zpt;if(void 0===t)return;const i=t-this.Nyt;return _.max(i,this.Myt)}get Myt(){for(const t of this.nyt){const i=t.pAt;if(void 0!==i)return i}}get pI(){return Boolean(this.Dyt.pI)}get Nyt(){var t,i;if(this.Dyt.Syt&&this.Rg===ku.KC)return this.Dyt.Syt;const e=null==(i=this.NAt)||null==(t=i.zm.lAt)?void 0:t.Gwt();return void 0!==e?e:this.Rg===ku.KC?1.5*this.aAt.Gwt():0}get lvt(){return this.NAt&&this.NAt.lvt}get Rg(){return this.NAt?this.NAt.Rg:void 0}get fAt(){var t;return null==(t=this.NAt)?void 0:t.fAt}async Yn(t,e,s){const n=[],r=[],h=t.nAt?i.Dh(t.nAt,this.Ayt):this.Ayt;void 0===this.NAt?(await this.Iyt.jW(t.dAt),this.NAt=new oV(t,this.Ayt,h,this.ict(),this.iyt),this.NAt.yn(ye.Vrt,this.Ds)):this.NAt.Yn(t,h,this.ict(),e);const o=this.NAt.Iwt;let a;if(0===o.length)a=this.nyt.slice(),No(this.nyt);else{const t=o[0].o;let i=0;for(;i<this.nyt.length&&this.nyt[i].o!==t;)i++;a=this.nyt.splice(0,i);for(let t=0;t<o.length;t++){const i=o[t];let e;t<this.nyt.length?e=this.nyt[t]:(e=new $G(this,i),n.push(e)),r.push(e.Yn(this.Eyt,s))}}await Promise.all(r),this.nyt.push(...n);for(const t of a)t.Upt();this.Co(new tV)}ict(){return this.Iyt.ict()}Ppt(t){const i=this.nyt.indexOf(t);if(i>0)return this.nyt[i-1]}Opt(t){const i=this.nyt.indexOf(t);if(i>=0&&i+1<this.nyt.length)return this.nyt[i+1]}yAt(){return this.NAt?this.NAt.yAt():void 0}OAt(){return this.NAt&&this.NAt.OAt()}Spt(t){this.NAt&&this.NAt.Spt(t)}gn(){this.Vo(),this.byt=void 0,this.pyt(!1);for(const t of this.nyt)t.gn();No(this.nyt),this.NAt&&this.NAt.Ud()}constructor(t,i,e,s,n){super(),this.NAt=void 0,this.myt=!0,this.nyt=[],this.byt=void 0,this.Dyt=t,this.Ayt=t.Ug,this.Eyt=i,this.EI=e,this.Lyt=s,this.Iyt=new AV(this.EI,this.Lyt,this.Dyt.kyt),this.iyt=n}},pV=class{get ect(){return this.xpt}constructor(t,i,e,s,n){this.xpt=new mV(t,i,e,s,n)}},yV=1e3,MV=class{get Tr(){return this.NAt}get W(){return this.xyt||(this.xyt=this.Mit(this.Cyt.Wd),ha(this.xyt)),this.xyt}async Mit(t){this.NAt.ect.Co(new sk);try{await this.Oyt(t),this.NAt.ect.pyt(!0)}catch(t){throw yo(t),this.xyt=void 0,this.NAt.ect.pyt(!1),new g("The provided MPEG-DASH document could not be loaded - "+t.message)}this.jyt=this.Pyt(this.Cyt.Wd)}async Pyt(t){try{for(;this.NAt.ect.Rg===ku.KC;)await Ys(this.zyt,t)}catch(t){}}get zyt(){return this.NAt.ect.wyt&&this.NAt.ect.Rg===ku.KC?this.Byt(this.Cyt.Wd):this.W}async Ryt(t){fo(t);const i=this.Uyt();if(i>0){const e=_.min(i,2147483647);await N(e,t)}try{await this.Oyt(t),this.NAt.ect.pyt(!0)}catch(t){throw new g("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.Qyt=void 0}}Uyt(){const t=this.NAt.ect.ict().getTime()-this.NAt.ect.ryt.getTime();return this.NAt.ect.uAt-t}Fyt(t){const i=this.NAt.ect.OAt();if(i){const e=i.getTime()-t.getTime();if(e>0)return e}this.NAt.ect.Spt(t);const e=this.NAt.ect.OAt();return e?e.getTime()-t.getTime():NaN}async Byt(t){this.Qyt||(this.Qyt=this.Ryt(t));const i=new Wr;i.Xd(t);try{await Promise.race([this.Qyt,this.Yyt(i.Wd)].filter(Po))}catch(t){Pd(t)}finally{i.qd()}}Yyt(t){const i=this.NAt.ect.ict(),e=this.Fyt(i);if(!S(e)&&!this.Tr.ect.qAt)return this.Gyt(e,t)}async Gyt(t,i){await N(t,i);const e=this.NAt.ect.ict();this.NAt.ect.Spt(e)}async Vyt(t,i){const e=await this.Hyt.Wyt(t,{},i);return(new hG)._At(e.qyt,e.LI)}gn(){return this.Cyt.qd(),this.jyt=void 0,this.xyt=void 0,this.Qyt=void 0,this.NAt.ect.gn(),Promise.resolve()}constructor(t,i,e,s,n){this.Cyt=new Wr,this.Oyt=async t=>{try{const i=this.NAt.ect.ict(),e=await this.Vyt(this.NAt.ect.sAt,t);await this.NAt.ect.Yn(e,i,t)}catch(t){throw tl(t)&&this.NAt.ect.pyt(!1),t}},this.Hyt=s,this.NAt=new pV(t,i,e,this.Cyt.Wd,n)}},TV=class extends wn{constructor(t,i){super("jwt"),this.Fwt=t,this.Vnt=i}},NV=class extends Bo{get Vnt(){return this.Wnt}get Rg(){return this.$0}get Z(){return this.ag.slice()}YS(t){t&&this.Wnt!==t&&this.Xyt(t)}GS(t){this.Wnt===t&&this.Xyt(void 0)}Xyt(t){this.Wnt=t,this.Co(new TV(this,this.Wnt))}gn(){this.Vo();for(const t of this.ag)t.Tct=void 0;No(this.ag)}constructor(t,i){super(),this.Wnt=void 0,this.$0=t,this.ag=i;for(const t of this.ag)t.Tct=this}};var Ra,bn=class extends wn{constructor(t,i,e){super(Co.Kg),this.currentTime=t,this.initDataType=i,this.initData=e}};function Fc(t,i,e,s,n){let r=[],h=[];for(const t of i)t.Rg===fi.Mm?r=r.concat(t.Z):t.Rg===fi.ym&&(h=h.concat(t.Z));return[DV(t,r,e,s,null==n?void 0:n.preferredAudioCodecs),SV(t,h,e,s,null==n?void 0:n.preferredVideoCodecs)].filter(Po)}function DV(t,i,e,s,n){const r=Vt(s||[],(t=>t.ght===fi.Mm&&t.Rt)),h=[EV(r,e,t),bV(r),LV(r,n),kV(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return IV(i,h)}function SV(t,i,e,s,n){const r=Vt(s||[],(t=>t.ght===fi.ym&&t.Rt)),h=[EV(r,e,t),LV(r,n),kV(),t=>{const i=t.filter((t=>"main"===t.zt));return i.length>0?i:t}];return IV(i,h)}function IV(t,i){if(0===t.length)return;let e=t;for(const t of i){if(1===e.length)return e[0];e=t(e)}return e[0]}function EV(t,i,e){return s=>{const n=t?t.Zot.o:void 0;if(!Po(n))return s;const r=null==i?void 0:i.Kvt,h=e.Kvt,o=r&&h&&r.PM===h.PM,a=Vt(s,(t=>t.Zot.o===n));return o&&a?[a]:s}}function bV(t){return i=>{const e=t?t.gs:"",s=i.some((t=>""!==t.gs))?i.filter((t=>""!==t.gs)):i;if(""===e)return s;const n=s.filter((t=>t.gs===e));return n.length>0?n:s}}function LV(t,i){return t=>{if(i&&i.length>0)for(const e of i){const i=t.filter((t=>t.Ng.og.some((t=>ui(t.Mst,e)))));if(i.length>0)return i}return t}}function kV(){return t=>{let i=[],e=-1/0;for(const s of t){const t=s.Zot.Cz;t>e?(e=t,i=[s]):t===e&&i.push(s)}return i}}!function(t){t.Zyt="api",t.Kyt="start"}(Ra||(Ra={}));var xV={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},CV=class{Jyt(t,i,e){const s=this.Yut.maxRetries===1/0?xV:this.Yut;return qc((()=>this.$yt(t,i,e)),e,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async $yt(t,i,e){let s;for(const n of t)try{const t=new ss({zu:n,wI:oe.Ru,_I:i,pI:this.tMt,gI:yt.GET,Rg:sa.JS,AI:Kt.hT,Wd:e,jS:15e3,vI:5e3}),s=await this.EI.LS(t),r=await s.bI(e);return{qyt:r,iMt:n,LI:s.LI}}catch(t){s=t}throw s}constructor(t,i,e=xV){this.EI=t,this.tMt=i,this.Yut=e}},OV=class{async Wyt(t,i,e){let s;for(const n of this.eMt)try{return await n.Wyt(t,i,e)}catch(t){yo(t),s=t}throw s}constructor(t){this.eMt=t}},jV=class{async Wyt(t,i,e){const s=await this.Tot.jet(t);if(s)return{qyt:s.data,iMt:s.locationURL,LI:s.responseURL};throw new g("Manifest fetch from cache unsuccesful")}constructor(t){this.Tot=t}},PV=class{async Wyt(t,i,e){return await this.sMt.Jyt(t,i,e)}constructor(t){this.sMt=t}};function zV(t,i){return new OV([new jV(i),new PV(t)])}var BV=class{async Wyt(t,i,e){const s=await this.Hyt.Wyt(t,i,e);return await this.nMt(s),s}async nMt(t){await this.rMt.Get({key:qs(t.iMt),locationURL:Na(t.iMt),responseURL:Na(t.LI),data:t.qyt,references:[this.hMt.o]})}constructor(t,i,e){this.Hyt=t,this.rMt=i,this.hMt=e}},RV=class extends wn{constructor(){super(Co._w)}},UV=class extends wn{constructor(){super(Co.fw)}},QV=class extends Ti{oMt(t){return t.Jf=si.LOADED,this.tt(t),t}aMt(t){for(const i of this.Z.og)if(i.Og===t)return i}constructor(){super()}};function FV(t,i){return""===i?t:t+" "+i}var YV=class extends je{get va(){return this.Xa||(this.Xa=function(t){return lt(Lh(t),{get attributes(){return t.wS},get eventID(){var i;return""+(null!=(i=t.uMt)?i:"")}})}(this)),this.Xa}uN(t){return this.O===t.O}constructor(t,i,e,s,n){super(t,i,e,!1,null==n?void 0:n.toString()),this.wS=s,this.uMt=n}},GV=class extends QV{cMt(t){const i=this.SI.DI(Mi.Dm,"","","",void 0,Wt.EVENT_STREAM);return i.Og=t,this.oMt(i),i}lMt(t,i,e){const s=t.Nst;var n;const r=null!=(n=t.PM)?n:"";var h;const o=null!=(h=t.xp)?h:1;var a;const u=null!=(a=t.uvt)?a:Ce.ZERO,c=FV(s,r);let l=this.aMt(c);l||(l=this.cMt(c));for(const s of t.BF)if(!VV(s,l)){const t=WV(s,o,u,i);t.WT>e&&l.kI(t)}}async $n(t){await this.tr(),this.Hpt=t,this.Hpt.yn(Co.lw,this.dMt),this.dMt()}async tr(){this.Hpt&&(this.Hpt.fn(Co.lw,this.dMt),this.Hpt=void 0);for(const t of this.Z.og)this.SI.CI(t);await super.tr()}constructor(t){super(),this.Hpt=void 0,this.dMt=()=>{var t,i;const e=null!=(i=null==(t=this.Hpt.yAt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.og)xh(t,e);for(const t of this.Hpt.Iwt)if(t.jn>e)for(const i of t.Jvt)this.lMt(i,t,e)},this.SI=t}};function VV(t,i){const e=t.o;if(void 0!==e){if(Vt(i.L.og,(i=>i.uMt===e&&i.O===t.zm)))return!0}return!1}function WV(t,i,e,s){const n=t.o,r=t.zM.toSigned().subtract(e),h=t.ct,o=t.zm,a=t.wS,u=r.toNumber()/i+s.Cn,c=h?h.toNumber()/i:void 0,l=void 0!==c?u+c:s.Rpt;return new YV(u,l,o,a,n)}function HV(t,i,e,s,n){const r=[],h=Vt(e,(t=>t.Nst===d_));if(void 0===h)return;const o=h.PM?function(t){const i=t.split(":",1)[0];switch(i){case"cbcs":case"cenc":return i;default:return}}(h.PM.toLowerCase()):"cenc";if(void 0!==o){for(const t of e)if(t.Nst!==d_)for(const i of Am(t.Nst)){const e=n&&t.Jwt?[t.Jwt]:[];r.push({cA:i,MP:e,TP:void 0,xj:void 0})}if(r.length)return{RO:t,Xgt:{fMt:o,UO:h.UO},qgt:r,_Mt:i===fi.Mm?s.slice():[],gMt:i===fi.ym?s.slice():[],K4:!1}}}function qV(t,i){if(!t)return i;if(!i)return t;const e=[],s=ke();var n;return XV(e,s,t.qgt),XV(e,s,i.qgt),{RO:t.RO,Xgt:{fMt:t.Xgt.fMt,UO:null!=(n=t.Xgt.UO)?n:i.Xgt.UO},qgt:e,_Mt:ZV(t._Mt,i._Mt,qo),gMt:ZV(t.gMt,i.gMt,qo),K4:t.K4||i.K4||!1}}function XV(t,i,e){for(const s of e){const e=s.cA.Ob;let n;i.has(e)?(n=i.get(e),n.MP=ZV(n.MP,s.MP,KV)):(n=Yt({},s),t.push(n),i.set(e,n))}}function ZV(t,i,e){const s=t.slice();for(const t of i)e(s,t)||s.push(t);return s}function KV(t,i){for(const e of t)if(Tu(e,i))return!0;return!1}function JV(t,i,e){let s;const n=t.Tst;if(n){const r=t.zF,h=[];for(const i of t.Mst)h.push(r+'; codecs="'+i+'"');s=HV(i||{},t.Rg,n,h,e)}for(const n of t.rrt)s=qV(s,$V(n,i,e));return s}function $V(t,i,e){return HV(i||{},t.Rg,t.Tst||[],[t.HP],e)}function tW(t){return t?t.qgt.map((i=>{const e=iW(t.RO,i.cA),s=t.Xgt.fMt;return{cA:i.cA,MP:i.MP,xj:i.xj,yz:[{initDataTypes:[i.cA.xb],audioCapabilities:eW(t._Mt,s,null==e?void 0:e.audioRobustness),videoCapabilities:eW(t.gMt,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]}})):[]}function iW(t,i){switch(i.Rg){case be.Jv:return t.widevine;case be.Kv:return t.playready;case be.$v:return t.fairplay;case be.tA:return t.clearkey}}function eW(t,i,e){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:i,robustness:e})))}function sW(t,i){const e=t=>{const e=i.indexOf(t.cA.Ob);return e>=0?e:i.length};return Ot(t,((t,i)=>e(t)-e(i)))}var nW=class extends QV{cMt(t){const i=this.SI.DI(Mi.Dm,t.o,"thumbnails","",!1,Wt.DEFAULT);return i.jg=Or.Jn,this.oMt(i),i}async $n(t){await this.tr(),this.Hpt=t,this.Hpt.yn(Co.lw,this.Yn),this.Yn()}wMt(t){this.vMt(t),this.AMt()}AMt(){const t=[];for(const i of this.Z.og)this.mMt(i)||t.push(i);for(const i of t)this.it(i)}vMt(t){const i=[];for(const e of this.Ect)-1===t.indexOf(e)&&i.push(e);for(const t of i)Qr(this.Ect,t)}async tr(){this.Hpt&&(this.Hpt.fn(Co.lw,this.Yn),this.Hpt=void 0);for(const t of this.Ect)t.fn(ye.Vrt,this.pMt);this.Ect.length=0;for(const t of this.Z.og)this.SI.CI(t);await super.tr()}gn(){return this.pMt=void 0,super.gn()}yMt(){var t,i;const e=null!=(i=null==(t=this.Hpt.yAt())?void 0:t.Cn)?i:0;if(e>0)for(const t of this.Z.og)xh(t,e)}MMt(t){return this.Z.og.some((i=>i.o===t.o))}TMt(t){return Vt(this.Z.og,(i=>i.o===t.o))}mMt(t){return this.Ect.some((i=>t.o===i.o))}constructor(t){super(),this.Ect=[],this.Yn=()=>{const t=[];for(const i of this.Hpt.Iwt)for(const e of i.Xnt)if(e.Rg===fi.rT&&e.rrt.length>0){const i=e.rrt[0];t.push(i),this.MMt(i)||this.cMt(i),-1===this.Ect.indexOf(i)&&(this.Ect.push(i),i.yn(ye.Vrt,this.pMt)),this.NMt(i)}this.wMt(t)},this.NMt=t=>{const i=this.TMt(t);i&&t&&i.jg!==Or.Ch&&(this.yMt(),function(t,i){const e=t._nt,s=t.CAt();if(!s)return;const n=s.JAt,r=s.$At,h=t.ji,o=t.Ti,[a,u]=function(t){for(const i of t)if(yn(i.Nst,hW)||yn(i.Nst,oW)){const t=i.PM.match(rW);if(t){const[,i,e]=t;return[Number(i),Number(e)]}}return[1,1]}(t.vvt);let c=n;for(;c&&c.Sot<=r.Sot;){const s=t.bAt.ct||c.ct,n=aW(i,c,t.nut(c).zu,h,o,a,u,s);for(const t of n)i.kI(t);c=e.iut(c)}}(t,i))},this.SI=t;const i=this;this.pMt=function(){i.NMt(this)}}},rW=/^(\d+)x(\d+)$/,hW="http://dashif.org/guidelines/thumbnail_tile",oW="http://dashif.org/thumbnail_tile";function aW(t,i,e,s,n,r,h,o){const a=[],u=i.VT,c=r*h,l=s/r,d=n/h,f=_.round(l),g=_.round(d),w=o/c;if(1===c){const i=u+w;return uW(t,u,i,e)?a:[new je(u,i,e,!1)]}for(let s=0;s<h;s++)for(let n=0;n<r;n++){const h=u+(s*r+n)*w,o=h+w,c=e+"#xywh="+_.round(n*l)+","+_.round(s*d)+","+f+","+g;if(uW(t,h,o,c)||a.push(new je(h,o,c,!1)),o>=i.WT)return a}return a}function uW(t,i,e,s){return t.L.og.some((t=>t.VT===i&&t.WT===e&&t.O===s))}var cW=class extends je{get jM(){return this.DMt}get PM(){return this.SMt}get IMt(){return this.EMt}get va(){return this.Xa||(this.Xa=function(t){return lt(Lh(t),{get schemeIDURI(){return t.jM},get value(){return t.PM},get emsgID(){return t.IMt}})}(this)),this.Xa}uN(t){return to(this.O,t.O)}constructor(t,i,e,s,n,r){super(t,i,r,!1),this.DMt=e,this.SMt=s,this.EMt=n}},lW=class t extends QV{Dut(i,e,s){const n=iu._p(Ao(i));if(!n)return;const r=function(t,i){const e=[];for(const s of t)Sg(s,i)&&e.push(s);return e}(n,he._m);if(r.length){const i=t.bMt(n,e,s);this.LMt(r,i,s)}}LMt(t,i,e){for(const s of t){let t;t=1===s.dp?s.zM.toNumber()/s.xp+e:i+s.UM/s.xp;const n=t+s.BM/s.xp;"https://aomedia.org/emsg/ID3"===s.jM||"https://developer.apple.com/streaming/emsg-id3"===s.jM?this.kMt(s,t):this.xMt(s,t,n)}}xMt(t,i,e){const s=FV(t.jM,t.PM);let n=this.aMt(s);n||(n=this.CMt(s),this.oMt(n)),n.kI(new cW(i,e,t.jM,t.PM,t.o,t.RM))}kMt(t,i){const e=kC(Ao(t.RM));if(!e)return;const s=FV(t.jM,t.PM);let n=this.aMt(s);n||(n=this.OMt(s),this.oMt(n));for(const t of e.S1){const e=new RC(i,t);nC(e,n.L.og),n.kI(e)}}static bMt(t,i,e){const s=Ig(t,he.gm);return s?vi(s.JM,s.xp)+e:i}CMt(t){const i=this.SI.DI(Mi.Dm,"","","",void 0,Wt.EMSG);return i.Og=t,i.jg=Or.Pg,i}OMt(t){const i=this.SI.DI(Mi.Dm,"","","",void 0,Wt.ID3);return i.Og=t,i.jg=Or.Pg,i}async tr(){for(const t of this.Z.og)this.SI.CI(t);await super.tr()}constructor(t){super(),this.SI=t}},dW=class extends lW{async $n(t){await this.tr(),this.Hpt=t,this.Hpt.yn(Co.lw,this.dMt),this.dMt()}async tr(){this.Hpt&&(this.Hpt.fn(Co.lw,this.dMt),this.Hpt=void 0),await super.tr()}constructor(...t){super(...t),this.dMt=()=>{var t,i;const e=null!=(i=null==(t=this.Hpt.yAt())?void 0:t.Cn)?i:0;this.zS(e)}}};var Sc=class{Bet(t,i){return this.jMt?this.Tot.Bet(t,i):Promise.resolve(!1)}Uet(t,i){return this.jMt?this.Tot.Uet(t,i):Promise.resolve(void 0)}async jet(t){const i=await this.Tot.jet(t);return this.jMt=void 0!==i,i}zH(t){return this.Tot.zH(t)}constructor(t){this.jMt=!1,this.Tot=t}},fW=class extends Ne{Tv(){var t;return null!=(t=this.pv)?t:0}Nv(){this.Qo.Mf=1/0}constructor(t,i,e){super(t,i,e)}},_W=[Co.gw,Co.Aw,Co.Mw,Co.dw,Co.Tw],gW=[Co.ww,Co.Ew,Co.ew,Co.$g],wW=class t extends Bo{PMt(t){return!!this.FP&&this.FP.mq(t)}async K$(t){this.FP=await this.hv.$n(t),this.zMt(),this.BMt(),this.FP.n0(this.ct)}RMt(t){return this.FP.yq(t)}async UMt(){this.QMt=this.FMt,this.FP&&(await this.hv.tr(),this.FP=void 0)}n$(){this.FP.n$()}qJ(){const t=this.ct;this.FP.ct<t&&this.FP.n0(t),this.FP.qJ()}async YMt(t){const i=this.FP,e=[];i.X$&&e.push(lx(i.X$,t)),i.Z$&&e.push(lx(i.Z$,t)),await Promise.all(e)}GMt(t,i,e,s,n,r){const h=this.hv,o=this.FP;return new SY(h,o,t,i,e,s,n,r,this.VMt,h,this.Fgt,this.Yut,this.swt)}WMt(t,i,e){return t.yq(i,e,this.FP)}async HMt(t,i,e,s){const n=this.GMt(this.EI,this.QB,this.Tot,this.bc,t,s);return n.yn(ye.Hrt,this.qMt),n.yn(Co.dw,this.Ds),await n.jW(i,e),n}XMt(t){void 0===t&&(t=!1),this.ZMt.qd(),this.q2.qd(),this.KMt.qd(),this.KMt=new Wr,this.JMt=this.$Mt(this.tTt,this.X2,this.JMt,t,this.KMt.Wd).catch(this.Uwt)}async $Mt(t,i,e,s,n){await Promise.all([t,i,e]),fo(n),await Ys(this.iTt.tL,n);const r=this.eTt;await r.Sht(),this.qJ(),fo(n);const h=r.yc,o=r.Rwt,a=r.Bwt;let u=this.sTt(h,a,h,o,!1),c=this.nTt(a,u);!s&&this.PMt(c)?await this.rTt(a,u,c):(u=this.sTt(h,a,h,o,!0),c=this.nTt(a,u),await this.hTt(a,u,c,n)),fo(n),this.e_?this.Em(this.Mf):this.oTt(),this.aTt()}async rTt(t,i,e){const s=this.eTt;await this.RMt(e),this.uTt=e,await this.WMt(s,t,i),await s.Eht(Zn.art)}async hTt(t,i,e,s){const n=this.eTt;this.i3(),this.cTt();const r=this.lTt;await this.UMt(),await this.K$(e),this.uTt=e,await this.WMt(n,t,i);try{const t=this.dTt(r,!1,!0,s);await n.Eht(Zn.art),await t}finally{this.o3(),this.fTt()}}get ht(){return this.fT}get jP(){const t=this.lTt,i=this._Tt,e=i.vB(t);if(-1!==e)return{Cn:i.Cn(e),jn:i.jn(e)}}get _Tt(){var t,i,e;const s=null!=(e=null==(t=this.eTt)?void 0:t.wf)?e:Ai.kB();var n;const r=null!=(n=null==(i=this.gTt)?void 0:i.wf)?n:Ai.kB();return s._B(r)}get wf(){return this._Tt.ks()}get Af(){var t;const i=null==(t=this.NAt)?void 0:t.ect,e=null==i?void 0:i.eAt;if(!i||!e)return;const s=e.getTime(),n=1e3*this.Mf;return new Date(n+s)}set Af(t){var i;const e=null==(i=this.NAt)?void 0:i.ect,s=null==e?void 0:e.eAt;if(!t||!e||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.Em(r-n)}get bt(){return this.bc}get lTt(){return void 0!==this.w2?this.w2:void 0!==this.wTt?this.wTt:this.hv.Mf}get Mf(){return this.lTt}set Mf(t){this.Nf(t)}Nf(t,i){this.Em(t,t===1/0)}get ct(){let t=NaN;return this.eTt&&this.eTt.Swt?t=this.eTt.jn:this.NAt&&void 0!==this.NAt.ect.Rg&&(t=this.NAt.ect.oAt?this.NAt.ect.oAt.Gwt():1/0),t}get jn(){return this.ct}get Sf(){return!(!this.eTt||!this.eTt.Swt)&&(this.e_?this.lTt===this.eTt.jn:this.hv.Sf)}get lt(){return this.BP}get bf(){return this.RP}get kf(){}vTt(){var t;const i=this.ATt;if(0===i.U)return!0;var e;return(null!=(e=null==(t=this.jP)?void 0:t.jn)?e:this.lTt)>=i.Cn(0)}mTt(){var t;if(!this.NAt)return!1;if(this.NAt.ect.Rg!==ku.KC)return!1;const i=null==(t=this.eTt)?void 0:t.yc;if(i&&i.qrt)return!0;const e=[];for(const t of this.NAt.ect.Iwt){const i=t.pAt,s=t.Rpt;void 0!==i&&void 0!==s&&e.push(i,s)}const s=new Ai(e).fB();return function(t,i,e){if(!i.U||!e.U)return Ai.kB();const s=i.Cn(0),n=i.jn(i.U-1),r=t.Sn(e).cB().Sn(t)._B(i);return Ai.LB(r.Cn(0),r.jn(r.U-1)).gB(r).TB(((t,i)=>t<s&&i<=n&&i-t>fl))}(this._Tt,this.ATt,s).U>0}get jf(){return Yt({},this.FMt,{pT:va.Lb.hP(),yT:this.pTt,MT:{amountOfBufferedAudioSegments:this.yTt,amountOfBufferedVideoSegments:this.MTt}})}get FMt(){return function(t,i){return{vT:t.vT+i.vT,AT:t.AT+i.AT,mT:t.mT+i.mT}}(this.QMt,this.hv.Pf())}get zf(){return this.hv.zf}set zf(t){this.hv.zf=t}get Ff(){return this.m2?this.TTt:this.eTt&&this.eTt.Swt?this.NTt:this.TTt}get Gf(){return this.hv.Gf}set Gf(t){this.hv.Gf=t}get Hf(){let t=this.Uo;return this.eTt&&(t=t._B(this.DTt)),t.fB(.1).ks()}get DTt(){return this.hv.Hf}STt(t){this.Uo=this.Uo._B(t)}get Xf(){return this.QP}set Xf(t){this.QP=t,this.ITt()}get Jf(){let t=this.hv.Jf;return this.ETt&&(t=_.max(Mw.Xn,t)),t}get ATt(){return this.bTt(!1)}get LTt(){return this.bTt(!0)}get t_(){return this.ATt.ks()}get e_(){return this.CB||this.kTt}get kTt(){return this.hv.e_}get T0(){return this.hv.T0}get YP(){}get xTt(){var t,i;return null!=(i=null==(t=this.NAt)?void 0:t.ect.Rg)?i:ku.ZC}get nt(){return this.Dl}get rt(){return this.gT}get r_(){var t;return this.CTt||(null==(t=this.OTt())?void 0:t.Ti)||0}get a_(){var t;return this.jTt||(null==(t=this.OTt())?void 0:t.ji)||0}get c_(){return this.hv.c_}set c_(t){this.hv.c_=os(t,0,1)}get f_(){return this.GP}get g_(){return!1}set g_(t){}get VP(){return this.WP}PTt(t){t.yn(_W,this.Ds),t.yn(Co.Dw,this.zTt),t.yn(Co.Yg,this.BTt),t.yn(Nt.ha,this.RTt),t.yn(Co.Vg,this.UTt),t.yn(Co.Aw,this.QTt),t.yn("jwt",this.FTt),t.yn("fwt",this.FTt)}YTt(t){t.fn(_W,this.Ds),t.fn(Co.Dw,this.zTt),t.fn(Co.Yg,this.BTt),t.fn(Nt.ha,this.RTt),t.fn(Co.Vg,this.UTt),t.fn(Co.Aw,this.QTt),t.fn("jwt",this.FTt),t.fn("fwt",this.FTt)}GTt(t){t.yn(Co.gw,this.Ds)}VTt(t){t.fn(Co.gw,this.Ds)}OTt(){if(!this.eTt)return;const t=Vt(this.eTt.Bwt,(t=>t.ght===fi.ym));return t?t.yg:void 0}bTt(t){var i;const e=null==(i=this.NAt)?void 0:i.ect;if(!e)return Ai.kB();const s=e.Myt;let n=t?e.zpt:e.zAt;if(void 0===s||void 0===n)return Ai.kB();if(!t){const t=this.DTt;t.U>0&&t.jn(t.U-1)>n&&(n=_.min(t.jn(t.U-1),e.zpt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),Ai.LB(s,n).aB()}async $n(t,i){let e,s;fo(i);const n=this.NAt.ect;try{e=n.Tyt,s=n.yyt}catch(t){throw new g("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!e)throw new g("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new g("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.WTt(t.textTracks),this.i3();const r=this.qnt(e),h=Fc(e,r,void 0,void 0,this.pwt),o=this.sTt(e,h,e,h,!0);h.forEach((t=>t.Rt=!0));const a=this.nTt(h,o);await this.K$(a),this.uTt=a,fo(i);const u=await this.HMt(e,r,h,o);fo(i),this.HTt(u),this.o3(),fo(i),await u.Eht(),fo(i),!this.qTt&&s>0&&this.Em(s,!0,Ra.Kyt),this.CB||(this.oTt(),this.XTt())}oTt(){this.ZMt.qd(),this.ZMt=new Wr,this.tTt=this.ZTt(this.tTt,this.JMt,this.ZMt.Wd).catch(this.Uwt)}KTt(){this.ZMt.qd()}async ZTt(t,i,e){for(await Promise.all([t,i]),fo(e);;){var s;const t=null==(s=this.eTt)?void 0:s.yc;if(!t){0;break}if(!await this.JTt(t,e)){0;break}}}async JTt(t,i){var e;fo(i);const s=this.eTt;for(0;this.NAt.ect.Rg===ku.KC&&void 0===(null==(e=this.Opt(t))?void 0:e.pAt);)await Ys(this.$Tt.zyt,i),await this.tNt();for(fo(i),await this.tNt(),fo(i);!s.ywt();)await s.lf($o.$ct,i),await this.tNt();fo(i),await this.tNt(),fo(i);const n=this.Opt(t);return n?(this.iNt(n)?await this.eNt(n,i):await this.sNt(n,i),!0):(this.n$(),!1)}iNt(t){var i,e,s,n,r;const h=null!=(r=null==(i=this.bc)?void 0:i.seamlessSwitchStrategy)?r:mi.eT;if(h===mi.oT)return!0;if(h===mi.aT)return!1;const o=this.eTt,a=null==o?void 0:o.yc,u=null==o?void 0:o.Bwt,c=Fc(t,this.qnt(t),a,u,this.pwt),l=this.sTt(t,c,a,u,!1);if(h===mi.CLEAR_ONLY&&((null==(e=this.eTt)?void 0:e.Hgt)||l)||h===mi.SAME_DRM_ONLY&&!((null==(s=this.eTt)?void 0:s.Hgt)&&l||!(null==(n=this.eTt)?void 0:n.Hgt)&&!l))return!1;const d=this.nTt(c,l);return this.PMt(d)}nNt(){return!0}rNt(t){const i=this.hNt();for(const e of i)e!==t&&(e.jg=Or.Ch)}aTt(){if(void 0!==this.oNt){if(this.oNt.Bg){const t=Vt(this.ht.og,(t=>t.Rt));void 0!==t&&this.oNt.gs===t.gs||(this.oNt.jg=Or.Ch)}}else this.aNt()}aNt(){if(this.hNt().length)return;const t=Vt(this.ht.og,(t=>t.Rt));if(void 0===t)return;const i=this.nt.og.filter((t=>t.Bg));for(const e of i)if(e.gs===t.gs)return e.jg=Or.Jn,void(this.oNt=e)}hNt(){return this.nt.og.filter((t=>t.jg===Or.Jn&&(t.zt===Mi.NS||t.zt===Mi.Tm)))}uNt(t){if(t&&this.oNt){const i=function(t,i){if(""===t.gs)return;return i.filter((i=>i.gs===t.gs))[0]}(this.oNt,t.nt.og);i&&(i.jg=Or.Jn)}}async eNt(t,i){var e,s;const n=this.eTt;let r=this.gTt;const h=this.uTt;try{fo(i);const e=n.yc,s=n.Bwt,h=this.qnt(t),o=Fc(t,h,e,s,this.pwt),a=this.sTt(t,o,e,s,!1);o.forEach((t=>t.Rt=!0));const u=this.nTt(o,a);for(0,await n.Sht(),this.qJ(),fo(i),r&&r.yc===t?(this.PMt(u)&&await this.RMt(u),this.uTt=u):(r&&await r.gn(!0),this.PMt(u)&&await this.RMt(u),this.uTt=u,r=await this.HMt(t,h,o,a),this.gTt=r,this.GTt(r),this.cNt.fg=r.nt),await r.Eht(),fo(i);this.lTt<t.Cn;)await this.hv.lf(Co.Iw,i);fo(i),this.HTt(r)}catch(t){throw ut(t)&&(r&&await r.Sht(),h&&this.uTt!==h&&(this.PMt(h)&&await this.RMt(h),this.uTt=h)),t}(null==(s=this.bc)||null==(e=s.dash)?void 0:e.forceSeekToSynchronize)&&await this.lNt(t,i)}async lNt(t,i){const e=Date.now()/1e3;if(void 0===this.dNt)this.dNt=e;else if(e-this.dNt>900){this.dNt=e,this.cTt();const s=_.max(this.lTt,t.Cn);try{await this.dTt(s,!1,!0,i)}finally{this.fTt()}}}async sNt(t,i){for(fo(i),await this.eTt.Sht(),this.qJ(),await this.YMt(t.Cn),fo(i),this.n$();!this.hv.Sf&&this.lTt<t.Cn;)await this.hv.lf([Co.Iw,Co.Jg],i);fo(i);const e=this.eTt.yc,s=this.eTt.Bwt,n=this.qnt(t),r=Fc(t,n,e,s,this.pwt),h=this.sTt(t,r,e,s,!0);r.forEach((t=>t.Rt=!0));const o=this.nTt(r,h);this.eTt&&(this.fNt.fn(qt.ra,this._Nt),await this.eTt.gn(),this.fNt.yn(qt.ra,this._Nt),this.eTt=void 0),this.gTt&&(await this.gTt.gn(),this.gTt=void 0),this.cTt(),this.i3();const a=_.max(this.lTt,t.Cn);await this.UMt(),await this.K$(o),this.uTt=o;const u=await this.HMt(t,n,r,h);this.HTt(u);try{const t=this.dTt(a,!1,!0,i);await u.Eht(),await Vh((i=>Promise.race([t,u.lf([$o.$ct],i)])),i)}finally{this.o3(),this.fTt()}}async tNt(){const t=this.gTt;t&&t.yc.qrt&&(await t.gn(!0),this.gTt=void 0)}static gNt(t,i){const e=[],s=[];let n=!i.some((t=>t.Hct.some((t=>"main"===t.PM))));for(const t of i){if(-1!==e.indexOf(t))continue;const r=AW(t._ct.concat(t.Hct),n);n=!1;const h=t.rrt.map((t=>t.Zrt)),o=new GQ(t,h,r),a=mW(t,i);for(const t of a)o.bct(t),e.push(t);s.push(o)}return new NV(t,s)}qnt(i){const e=[],s=[];for(const t of i.wwt)t.Rg!==fi.Mm&&t.Rg!==fi.ym||(0===t.rrt.length?this.Co(new ZQ("No supported representation found in the AdaptationSet with mimetype : "+t.Rg)):t.Rg===fi.Mm?e.push(...t.Xnt):s.push(...t.Xnt));const n=[];return e.length>0&&n.push(t.gNt(fi.Mm,e)),s.length>0&&n.push(t.gNt(fi.ym,s)),n}nTt(t,e){var s,n,r,h,o,a,u,c;const l=t.map((t=>{var i;return wQ.yut(null!=(i=t.Ict)?i:t.rrt,tw(t.ght,this.pwt))})).map((t=>({HP:t.HP}))),d=null==(n=this.bc)||null==(s=n.dash)?void 0:s.desiredTimescale;var f;const _=(null==(r=this.bc)?void 0:r.seamlessSwitchStrategy)!==mi.aT&&(null==(h=this.bc)?void 0:h.seamlessSwitchStrategy)!==mi.CLEAR_ONLY&&(null==(o=this.bc)?void 0:o.seamlessSwitchStrategy)!==mi.SAME_DRM_ONLY&&(null!=(f=null==(u=this.bc)||null==(a=u.dash)?void 0:a.needsTimescaleShifting)?f:i.Ys.t$),g=null==(c=this.bc)?void 0:c.useManagedMediaSource;return{Rg:Au.KC,u0:l,qP:tW(e),K4:null==e?void 0:e.K4,t$:_,i$:d,p0:g}}static wNt(t,i){if(!t.length)return;let e;for(const s of t){const t=0===s.xct.length;e=qV(e,JV(s.Zot,i,t))}return(null==i?void 0:i.preferredKeySystems)&&e&&(e.qgt=sW(e.qgt,i.preferredKeySystems)),e}sTt(i,e,s,n,r){var h,o;const a=this.bc.contentProtection;let u=t.wNt(e,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(h=this.bc)?void 0:h.seamlessSwitchStrategy)?c:mi.eT;if(l===mi.aT||l===mi.CLEAR_ONLY||l===mi.SAME_DRM_ONLY)return;const d=null==(o=this.eTt)?void 0:o.Hgt;if(!r&&void 0!==d){const t=!d.K4;if(l===mi.eT&&t&&!this.nNt())return;return d}const f=!r&&l===mi.eT;return u=this.vNt(i,a,s,n,f),void 0!==u?(u.K4=!0,u):void 0}vNt(i,e,s,n,r){let h=i,o=!1;for(;;){if(h=o?this.Ppt(h):this.Opt(h),void 0===h){if(o)return;o=!0,h=i;continue}const a=Fc(h,this.qnt(h),s,n,this.pwt),u=t.wNt(a,e);if(r){const t=this.nTt(a,u);if(!this.PMt(t))return}if(void 0!==u)return u}}WTt(t){for(const i of t)i.src&&this.sz.NI(i);st(this.sz.Z)}m_(){var t;const i=this.Ff;this.TTt=!0,i||(this.m2||(this.ANt(new Sn),this.mNt()),(null==(t=this.OP)?void 0:t.Gw)&&this.OP.y_(),this.pNt())}p_(){this.yNt||(this.yNt=new ue),this.MNt();const t=this.yNt.tL;return ha(t),t}MNt(){if(this.TTt=!1,this.j2=!0,this.ITt(),this.Sf){const t=this.ATt;t.U>0&&this.Em(t.Cn(0))}this.m2||this.z2().then(this.TNt,this.ANt),this.qMt(),this.pNt()}get NTt(){return this.hv.Ff}z2(){return this.hv.p_()}mNt(){this.hv.m_()}i3(){this.m2||(this.TTt=this.Ff,this.m2=!0,this.mNt())}o3(){this.m2&&(this.m2=!1,this.TTt||this.z2().then(this.TNt,this.ANt),this.qMt(),this.pNt())}pNt(){const t=this.cO,i=this.Ff;t!==i&&(this.cO=i,i?this.Co(new hs(this.Mf)):this.Co(new Gt(this.Mf)))}Em(t,i,e){return void 0===i&&(i=!1),void 0===e&&(e=Ra.Zyt),this.qTt=!0,this.ZMt.qd(),this.q2.qd(),this.CB=!0,this.w2=t,this.STt(this.DTt),this.NNt(new ri(this.Mf)),this.q2=new Wr,this.X2=this.Z2(t,this.tTt,this.X2,this.JMt,this.q2.Wd,i,e).catch(this.Uwt),this.X2}DNt(){this.q2.qd()}async Z2(t,i,e,s,n,r,h,o){var a;void 0===r&&(r=!1),void 0===h&&(h=Ra.Zyt),void 0===o&&(o=!1),null==(a=this.OP)||a.y_();try{var u,c;0,await Promise.all([i,e,s]),fo(n),await Ys(this.iTt.tL,n);const a=this.ATt.uB(t);this.w2=a;const l=o||(null==(c=this.bc)||null==(u=c.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&a<=this.Mf,d=this.SNt(a),f=this.eTt;if(l||!f||!f.t_.gr(a)&&h!==Ra.Kyt&&f.yc!==d){if(d){let t=this.gTt;if(this.i3(),f&&await f.Sht(),t&&t.yc===d&&!l){const i=this.nTt(t.Rwt,t.Hgt);this.qJ(),this.PMt(i)&&await this.RMt(i),this.uTt=i}else{t&&await t.gn(!0);const i=this.qnt(d),e=null==f?void 0:f.yc,s=null==f?void 0:f.Bwt,n=Fc(d,i,e,s,this.pwt);let r=this.sTt(d,n,e,s,!1);n.forEach((t=>t.Rt=!0));let h=this.nTt(n,r);this.iNt(d)&&!l?(this.qJ(),this.PMt(h)&&await this.RMt(h)):(r=this.sTt(d,n,e,s,!0),h=this.nTt(n,r),f&&(this.fNt.fn(qt.ra,this._Nt),await f.gn(),this.fNt.yn(qt.ra,this._Nt),this.eTt=void 0),await this.UMt(),await this.K$(h)),this.uTt=h,t=await this.HMt(d,i,n,r),this.gTt=t,this.cNt.fg=t.nt,this.GTt(t)}await t.Eht(Zn.crt),this.HTt(t)}}else{0;const t=this.gTt;if(t&&!t.Ewt){await t.Sht(),this.qJ();const i=this.nTt(f.Rwt,f.Hgt);this.PMt(i)&&await this.RMt(i),this.uTt=i}}0;const _=this.dTt(a,r,!1,n);this.w2=void 0,await this.eTt.Eht(Zn.crt),fo(n),this.oTt(),await _,fo(n),this.o3(),this.CB=!1,this.INt(new yi(this.Mf)),this.XTt()}catch(t){if(ut(t))return void 0;0}}XTt(){if(this.Ff||this.e_||void 0===this.yv)return;const t=this.Mf;var i,e;this.Mf+this.yv-this.f_.wd.maximumOffset<t?null==(i=this.OP)||i.Cn():null==(e=this.OP)||e.y_()}async dTt(t,i,e,s){let n,r,h=!0,o=t;for(;;){const a=this.LTt;if(a.U>0){const i=a.uB(t);o!==i&&(a.gr(o)&&this.NAt.ect.Rg===ku.KC||(o=i,h=!0))}if(h)h=!1,n&&ha(n),null==r||r.qd(),r=new Wr,r.Xd(s),n=this.ENt(o,i,e,r.Wd);else if(!this.kTt&&!this.T0)break;await Vh((t=>Promise.race([n,this.lf([Co.Mw,Co.Xg],t),this.NAt.ect.lf(ye.Vrt,t)])),s)}}async ENt(t,i,e,s){for(this.hv.Em(t,i,e);this.kTt||this.T0;)await this.hv.lf([Co.pw,Co.aw],s)}cTt(){void 0===this.wTt&&(this.wTt=this.lTt,this.hv.fn(Co.yw,this.NNt),this.hv.fn(Co.pw,this.INt))}fTt(){if(void 0===this.wTt)return;const t=this.lTt;this.wTt=void 0,this.hv.yn(Co.yw,this.NNt),this.hv.yn(Co.pw,this.INt),this.lTt!==t&&this.wc()}bNt(t){this.Uo=this.Uo._B(t)}SNt(t){const i=this.NAt.ect,e=i.Iwt.filter((t=>t.ct>=.2));if(0===e.length)return;const s=e[0];if(t<=s.Cn)return s;for(const i of e)if(i.jn>t)return i;return i.Rg!==ku.KC?e[e.length-1]:void 0}Ppt(t){let i=t.jpt;for(;i&&i.ct<.2;)i=i.jpt;return i}Opt(t){let i=t.Cpt;for(;i&&i.ct<.2;)i=i.Cpt;return i}async ga(t,e,s){var n;if(this.JP.mP(t.contentProtection),this.LNt(),this.bc&&!li(this.bc)&&await this.tr(),!t||li(t))return;this.xI=new Wr,s&&this.xI.Xd(s),this.bc=t,this.kNt=e,this.pwt=t.abr,this.swt=t.ignoreEmbeddedTextTrackTypes;const r=zV(new CV(this.EI,Boolean(this.bc.useCredentials),this.Yut),this.Tot);var h;if(this.pyt(!0),this.$Tt=new MV({Ug:i.Dh(this.bc.src),Syt:null!=(h=null==(n=this.bc.latencyConfiguration)?void 0:n.targetOffset)?h:this.bc.liveOffset,kyt:this.bc.timeServer,pI:this.bc.useCredentials},this.xNt(this.pwt),this.EI,r,this.bc.dash),this.NAt=this.$Tt.Tr,this.NAt.ect.yn(Co.cw,this.CNt),this.NAt.ect.yn(Co.lw,this.ONt),this.NAt.ect.yn(_o.Gpt,this.jNt),this.NAt.ect.yn(ye.Vrt,this.qMt),await this.PNt.$n(this.NAt.ect),await this.zNt.$n(this.NAt.ect),qo(this.swt,Wt.EMSG)||(this.Fgt=new dW(this.SI),this.Dl.DP(this.Fgt.Z),await this.Fgt.$n(this.NAt.ect)),t.latencyConfiguration){const i=t.latencyConfiguration;this.OP=new fW(this,this.hv,i),this.OP.Rt=!0,this.GP.ka(this.OP)}this.ITt()}async BNt(){const t=this.NAt.ect.Uf;var i,e;(this.pyt(t),t)?this.FTt():(await Promise.all([null==(i=this.eTt)?void 0:i.Sht(Zn.Drt),null==(e=this.gTt)?void 0:e.Sht(Zn.Drt)].filter(Po)),this.KTt(),this.DNt(),this.KMt.qd())}get Uf(){return this.myt}pyt(t){this.myt!==t&&(this.myt=t,this.Co(t?new RV:new UV))}ITt(){return this.NAt?(this.RNt=this.UNt(this.RNt,this.xI.Wd),this.RNt.catch(this.Uwt)):Promise.resolve()}async UNt(t,i){t&&(await t,fo(i));try{this.Xf===Le.eT||this.j2?await this.QNt(i):this.Xf===Le.Dm&&await this.FNt(i)}catch(t){throw yo(t),this.bz(new Rs(Ui.MANIFEST_LOAD_ERROR,t.message,t)),t}}async QNt(t){await this.FNt(t),this.YNt||(this.YNt=!0,this.iTt.Xd(this.$n(this.kNt,t)));try{await this.iTt.tL}catch(t){yo(t),this.bz(new Rs(Ui.MEDIA_DECODE_ERROR,t.message,t))}}async FNt(t){await Ys(this.$Tt.W,t);const i=this.NAt.ect;if(void 0===this.OP&&i.Rg===ku.KC){const t=i.fAt,e=(null==t?void 0:t.Kpt)?(null==t?void 0:t.Kpt)/1e3:i.Nyt,s={minimumOffset:(null==t?void 0:t.qpt)?(null==t?void 0:t.qpt)/1e3:.5*e,maximumOffset:(null==t?void 0:t.Zpt)?(null==t?void 0:t.Zpt)/1e3:1.5*e,targetOffset:e,forceSeekOffset:2.5*e,minimumPlaybackRate:vu,maximumPlaybackRate:Ka};this.OP=new fW(this,this.hv,s),this.GP.ka(this.OP)}}HTt(i){const e=this.eTt;i!==e&&(this.eTt&&this.YTt(this.eTt),this.gTt&&this.VTt(this.gTt),e&&this.STt(this.DTt),this.eTt=i,this.gTt=e,this.PTt(this.eTt),this.gTt&&this.GTt(this.gTt),this.fT.fg=i.ht,this.gT.fg=i.rt,this.uNt(i),this.fNt.fn(qt.ra,this._Nt),t.GNt(this.fNt),this.fNt.yn(qt.ra,this._Nt),this.fNt.fg=i.nt,this.cNt.fg=void 0,this.aNt())}static GNt(t){for(const i of t.og)i.jg=Or.Ch}ge(){this.hv.ge()}be(){this.hv.be()}bz(t){this.BP||(ha(this.tr()),this.BP=tn(t),this.RP=t,this.Co(new Eo(t)))}LNt(){this.BP=void 0,this.RP=void 0}zMt(){const t=this.FP;t&&(t.Z$&&(t.Z$.bW=this.QB.UW),t.X$&&(t.X$.bW=this.QB.UW))}BMt(){const t=this.FP;t&&(t.Z$&&(t.Z$.OW=this.QB.OW),t.X$&&(t.X$.OW=this.QB.OW))}determineStallJumpTarget(){if(this.eTt)return this.eTt.ywt()&&this.Mf>this.eTt.jn-ox&&!this.eTt.Swt?this.eTt.jn:void 0}async tr(){if(this.VNt)return this.VNt;try{this.VNt=this.WNt(),await this.VNt}finally{this.VNt=void 0}}async WNt(){this.Gf=1,this.xI.qd(),this.DNt(),this.KTt(),this.KMt.qd(),this.iTt.qd(),this.qTt=!1,this.m_(),this.j2=!1,this.fT.fg=void 0,this.gT.fg=void 0,this.fNt.fg=void 0,this.cNt.fg=void 0,this.RNt&&(await this.RNt.catch(na),this.RNt=void 0),await Promise.all([this.tTt,this.X2,this.JMt,this.iTt.tL.catch(na)]),this.eTt&&(await this.eTt.gn(!0),this.eTt=void 0),this.gTt&&(this.VTt(this.gTt),await this.gTt.gn(!0),this.gTt=void 0),await this.UMt(),this.uTt=void 0,this.oNt=void 0,this.rz.tr(),await this.PNt.tr(),await this.zNt.tr(),void 0!==this.Fgt&&(this.Dl.EP(this.Fgt.Z),await this.Fgt.gn(),this.Fgt=void 0),this.SI.tr(),this.NAt&&(this.NAt.ect.fn(Co.cw,this.CNt),this.NAt.ect.fn(Co.lw,this.ONt),this.NAt.ect.fn(_o.Gpt,this.jNt),await this.$Tt.gn(),this.NAt=void 0),this.ETt=!1,this.HNt=NaN,this.qNt=0,this.XNt=0,this.wTt=void 0,this.m2=!1,this.Uo=Ai.kB(),this.cO=!0,this.w2=void 0,this.ZNt=!1,this.CB=!1,this.YNt=!1,this.iTt=new ue,this.pTt=0,this.yTt=0,this.MTt=0,this.bc=void 0,this.kNt=void 0,this.swt=[],this.dNt=void 0,this.GP.tr(),this.OP=void 0,this.QMt={vT:0,AT:0,mT:0},await this.sz.tr(),this.hv.nz()}async gn(){this.Vo(),this.LNt(),await this.tr(),this.Vo(),this.fT.gn(),this.gT.gn(),this.fNt.gn(),this.cNt.gn(),this.Dl.gn(),this.rz.gn(),this.KNt.Ud(),await this.PNt.gn(),await this.zNt.gn(),this.SI.gn(),this.hv.fn(Co.Xg,this.q3),this.hv.fn(Fi.Kg,this.o2),this.hv.fn(Co.Jg,this.V3),this.hv.fn(Co.yw,this.NNt),this.hv.fn(Co.pw,this.INt),this.hv.fn(Co.mw,this.QTt),this.hv.fn(Co.Iw,this.wc),this.hv.fn([Co.jh,Co.Sh],this.JNt),this.hv.fn(gW,this.Ds),await this.sz.gn(),this.Dl.gn(),this.QB.fn("EW",this.$Nt),this.QB.fn("xW",this.tDt),this.hv.fn(Nt.ha,this.iDt),this.hv.fn([Co.Wg,Co.Vg],this.Ds),this.hv.lz=void 0,this.hv.c5=void 0}w_(){return this.hv.ya}get Cf(){return!1}M_(){return!1}T_(){}N_(){}D_(){}S_(){this.XMt(!0)}get yv(){var t;const i=null==(t=this.NAt)?void 0:t.ect;if(i&&i.Rg===ku.KC&&i.eAt)return i.ict().getTime()/1e3-i.eAt.getTime()/1e3-this.Mf}constructor(t,i,e,s,n,r,h){super(),this.eTt=void 0,this.gTt=void 0,this.j2=!1,this.HNt=NaN,this.BP=void 0,this.RP=void 0,this.m2=!1,this.wTt=void 0,this.w2=void 0,this.ZNt=!1,this.qNt=0,this.XNt=0,this.ETt=!1,this.xI=new Wr,this.iTt=new ue,this.YNt=!1,this.NAt=void 0,this.$Tt=void 0,this.myt=!0,this.TTt=!0,this.yNt=void 0,this.Uo=Ai.kB(),this.QP=Le.Vz,this.RNt=void 0,this.cO=!0,this.bc=void 0,this.kNt=void 0,this.pwt=void 0,this.swt=[],this.CB=!1,this.ZMt=new Wr,this.tTt=Promise.resolve(),this.q2=new Wr,this.X2=Promise.resolve(),this.qTt=!1,this.KMt=new Wr,this.JMt=Promise.resolve(),this.uTt=void 0,this.Fgt=void 0,this.pTt=0,this.yTt=0,this.MTt=0,this.WP=new ao,this.dNt=void 0,this.QMt={vT:0,AT:0,mT:0},this.FP=void 0,this.OP=void 0,this.FTt=()=>{this.XMt()},this.wc=()=>{this.Co(new Dr(this.Mf,this.Af))},this.o2=t=>{this.Co(new bn(this.Mf,t.xb,t.Gb))},this.zTt=t=>{this.pTt+=t.yT,this.Co(t)},this.BTt=t=>{const i=t.segments.filter((t=>t.Oat));t.track===fi.Mm?this.yTt=i.length:t.track===fi.ym&&(this.MTt=i.length)},this.q3=()=>{const t=this.ct;S(t)||t===this.HNt||(this.HNt=t,this.Co(new ko(this.HNt)))},this.JNt=()=>{this.qMt(),this.pNt()},this.V3=t=>{this.Sf&&this.Co(t)},this.ONt=t=>{this.Ds(t),this.ETt||(this.ETt=!0,this.KNt.eDt())},this.CNt=()=>{this.NAt.ect.fn(Co.cw,this.CNt),this.Co(new sk)},this.UTt=t=>{var i;if(t.errorObject.code===Ui.CONTENT_PROTECTION_OUTPUT_RESTRICTED&&(null==(i=this.eTt)?void 0:i.Rwt.every((t=>!t.Cct))))return;this.bz(t.errorObject),this.Co(t)},this.RTt=t=>{this.bz(t.errorObject)},this.Uwt=t=>{ut(t)||this.bz(new Rs(Ui.MEDIA_DECODE_ERROR,t.message,t))},this.qMt=()=>{if(!this.Ff)if(this.vTt())if(this.mTt()){const t=this.NAt.ect.yyt;this.Em(t,!0)}else;else{const t=this.NAt.ect.yyt;this.Em(t,!0)}},this.NNt=t=>{this.ZNt=this.e_,this.Co(t)},this.INt=t=>{const i=this.ZNt,e=this.e_;this.ZNt=e,i&&!e&&this.Co(t)},this.QTt=()=>{const t=this.a_,i=this.r_;this.qNt===t&&this.XNt===i||(this.qNt=t,this.XNt=i,this.Co(new il))},this._Nt=t=>{const i=t.Lt;i.jg===Or.Jn?(this.rNt(i),this.oNt=i):i===this.oNt&&i.jg===Or.Ch&&(this.oNt=void 0,this.aNt())},this.TNt=()=>{this.m2||this.yNt&&(this.yNt.Zb(),this.yNt=void 0)},this.ANt=t=>{this.m2||this.yNt&&(this.yNt.Jb(t),this.yNt=void 0)},this.jNt=()=>{this.BNt().catch(this.Uwt)},this.iDt=t=>{this.bz(Bw(t.lt))},this.$Nt=()=>{this.zMt()},this.tDt=()=>{this.BMt()},this.EI=t,this.Tot=new Sc(n),this.hv=r,this.VMt=h,this.QB=e,this.QB.yn("EW",this.$Nt),this.QB.yn("xW",this.tDt),this.GP=s,this.Yut=i.retryConfiguration,this.fT=new vo,this.gT=new vo,this.JP=new jr(t),this.hv.yn(Co.Xg,this.q3),this.hv.yn(Fi.Kg,this.o2),this.hv.yn(Co.Jg,this.V3),this.hv.yn(Co.yw,this.NNt),this.hv.yn(Co.pw,this.INt),this.hv.yn(Co.mw,this.QTt),this.hv.yn(Co.Iw,this.wc),this.hv.yn([Co.jh,Co.Sh],this.JNt),this.hv.yn(gW,this.Ds),this.hv.yn(Nt.ha,this.iDt),this.hv.lz=this.JP,this.hv.c5=this,this.hv.yn([Co.Wg,Co.Vg],this.Ds),this.KNt=new vW(this,this.hv),this.rz=new at(this.KNt,!0),this.rz.yn(Zt.Bw,this.qMt),this.rz.yn(Ls,this.Ds),this.fNt=new al,this.fNt.yn(qt.ra,this._Nt),this.cNt=new al,this.SI=this.sDt(),this.PNt=new GV(this.SI),this.zNt=new nW(this.SI),this.sz=new Ch(this.hv,this.EI),this.Dl=new ms([this.fNt,this.PNt.Z,this.zNt.Z,this.sz.Z])}},vW=class extends BM{get Jf(){return this.Qo.Jf}eDt(){this.Co(new _e(this.Mf,this.Jf))}constructor(t,i){super(i),this.Qo=t}};function AW(t,i){const e=t.filter((t=>"urn:mpeg:dash:role:2011"===t.Nst)).map((t=>t.PM)).filter(Po);return i||qo(e,"main")?qo(e,"caption")?"captions":qo(e,"subtitle")?"subtitles":qo(e,"dub")?"translation":"main":qo(e,"sign")?"sign":qo(e,"description")?"descriptions":qo(e,"commentary")?"commentary":"alternative"}function mW(t,i){var e;const s=Vt([...t.vvt,...t.Avt],(t=>"urn:mpeg:dash:adaptation-set-switching:2016"===t.Nst));var n;const r=null!=(n=null==s||null==(e=s.PM)?void 0:e.split(","))?n:[],h=[];for(const t of r){const e=Number(t),s=Vt(i,(t=>t.o===e));s&&h.push(s)}return h}var au=class extends wW{v_(){if(rU(this.hv))return this.hv.v_()}get CTt(){return rU(this.hv)?this.hv.r_:0}get jTt(){return rU(this.hv)?this.hv.a_:0}async gn(){var t;await super.gn(),null==(t=this.nDt)||t.gn()}iNt(t){var i,e;return((null!=(e=null==(i=this.bc)?void 0:i.seamlessSwitchStrategy)?e:mi.eT)!==mi.eT||!f.wb)&&super.iNt(t)}nNt(){return!(f.LE&&f.xE<3)&&super.nNt()}sDt(){return new aU(this,new _a)}xNt(t){return hU(t)}constructor(t,i,e,s,n,r,h){super(t,i,e,s,n,r,new oU(h)),this.bst=h,f.ZE&&(this.nDt=new AU(this))}},pW=class extends au{async gn(){await super.gn(),await this._z.fz(this.hv)}constructor(t,i,e,s,n,r,h,o){const a=new vU(r);super(t,i,e,s,n,a.Lz(h),o),this._z=a}},yW=class extends fe{get rDt(){return this.Sit.rDt}vf(){return super.vf().Im(this.rDt)}int(){return super.int().Im(this.rDt)}AJ(t,i,e){const s=this.rDt;return super.AJ(t,{a9:i.a9-s,ct:i.ct,QD:i.QD-s},e)}jJ(t,i){const e=this.rDt;return super.jJ(_.max(0,t-e),_.max(0,i-e))}bT(t,i,e){const s=this.rDt;return super.bT(_.max(0,t-s),_.max(0,i-s),e)}l$(t,i){const e=this.rDt;super.l$(_.max(0,t-e),_.max(0,i-e))}d$(t,i){const e=this.rDt;super.d$(_.max(0,t-e),_.max(0,i-e))}constructor(t,i){super(i),this.Sit=t}},MW=class extends qe{get rDt(){return this.Sit.rDt}Td(){return super.Td()+this.rDt}n0(t){super.n0(t-this.rDt)}i_(){return super.i_().Im(this.rDt)}a0(t,i,e,s){const n=this.rDt;super.a0(t-n,i-n,e,s)}qst(t){return new yW(this,t)}constructor(t,i){super(i),this.Wst(i),this.Sit=t}},TW=class extends _U{get Lst(){return this.hv}get rDt(){return this.hDt}set rDt(t){this.hDt=t}vf(){return super.vf().Im(this.hDt)}mf(){return NW(super.mf(),this.hDt)}Tf(){return super.Tf()+this.hDt}Td(){return super.Td()+this.hDt}qf(){return super.qf().Im(this.hDt)}i_(){return super.i_().Im(this.hDt)}Em(t,i,e){const s=_.max(0,t-this.hDt);super.Em(s,i,e)}PP(t){super.PP(NW(t,-this.hDt))}n_(){return this.Dl}DI(t,i,e,s,n,r,h,o){return this.SI.DI(t,i,e,s,n,r,h,o)}CI(t){this.SI.CI(t)}nz(){this.SI.tr(),super.nz()}tz(){return!1}ez(t,i,e,s,n){throw new g("Not supported")}Ud(){return this.z8.gn(),this.P8.gn(),this.SI.gn(),this.Dl.gn(),super.Ud()}Fst(t){return new MW(this,t)}Qst(t){return new gt(t)}I_(t){let i;switch(t.type){case Co.jh:i=new Gt(t.currentTime+this.hDt);break;case Co.Sh:i=new hs(t.currentTime+this.hDt);break;case Zt.Rw:i=new Oe(t.currentTime+this.hDt);break;case Co.Iw:i=new Dr(t.currentTime+this.hDt,NW(t.currentProgramDateTime,this.hDt));break;case Co.gw:i=new Wa(t.currentTime+this.hDt);break;case Co.yw:i=new ri(t.currentTime+this.hDt);break;case Co.pw:i=new yi(t.currentTime+this.hDt);break;case Co.hw:i=new vs(t.currentTime+this.hDt);break;case Co.aw:i=new ju(t.currentTime+this.hDt);break;case Co.Jg:i=new jn(t.currentTime+this.hDt);break;case Co.ww:i=new Qe(t.currentTime+this.hDt,t.playbackRate);break;case Co.Ew:i=new Pc(t.currentTime+this.hDt,t.volume);break;case Co.Xg:i=new ko(t.duration+this.hDt);break;case Zt.H_:i=new _e(t.currentTime+this.hDt,t.readyState);break;default:i=t}super.I_(i)}be(){super.be(),this.P8.be()}ge(){super.ge(),this.P8.ge()}constructor(t){super(t),this.hDt=0,this.SI=new aU(this,new _a),this.Dl=new ms([this.SI.nt,super.n_()]),this.P8=new vO,this.P8.u5(this.UP.parentElement),this.z8=new jj(this.P8.we,this.Iu,this.Dl,this.Ol,this.ya)}};function NW(t,i){return t?new Date(t.getTime()+1e3*i):void 0}var DW=class extends tr{Lz(t){if(t===fi.ym)return new TW(super.Lz(t))}async fz(t){const i=t;await i.Ud(),await super.fz(i.Lst)}},SW=class extends au{async K$(t){await super.K$(t),void 0===this.oDt&&(this.oDt=this.aDt(),this.hv.rDt=this.oDt)}aDt(){if(this.ct===1/0){const t=this.ATt;if(t.U>0)return _.max(0,t.Cn(0)-300)}return 0}Z2(t,i,e,s,n,r,h,o){return void 0===r&&(r=!1),void 0===h&&(h=Ra.Zyt),void 0===o&&(o=!1),o||(o=this.ct===1/0&&f.LE&&f.xE<3&&t<=this.Mf),super.Z2(t,i,e,s,n,r,h,o)}async tr(){await super.tr(),this.oDt=void 0,this.hv.rDt=0}async gn(){await super.gn(),await this.hv.Ud(),await this._z.fz(this.hv)}static sC(t){var i;return(!t||"google-dai"!==(null==t||null==(i=t.ssai)?void 0:i.integration))&&(f.LE&&f.xE<4)}constructor(t,i,e,s,n,r,h,o){const a=new DW(new vU(r));super(t,i,e,s,n,a.Lz(h),o),this._z=a,this.oDt=void 0}},IW=class extends mc{get Lst(){return this.hv}get r_(){return this.hv.r_}get a_(){return this.hv.a_}constructor(t){super(t)}},Uc=class extends fe{Jst(){return this.uDt?this.FW:super.Jst()}$st(t){this.uDt?this.FW=t:super.$st(t)}vf(){return this.uDt?this.cDt:super.vf()}Yx(){return this.uDt?this.wC:super.Yx()}int(){return this.uDt?this.lDt:super.int()}ent(){return this.uDt?this.RW:super.ent()}snt(t){this.uDt?this.RW=t:super.snt(t)}AJ(t,i,e){return this.mJ((e=>this.dDt(t,i,e)),e)}dDt(t,i,e){return super.AJ(t,i,e)}f$(){return this.mJ((()=>this.fDt()))}fDt(){return super.f$()}yJ(t,i,e){return this.mJ((e=>this._Dt(t,i,e)),e)}_Dt(t,i,e){return super.yJ(t,i,e)}Pq(){return this.uDt?this.r9:super.Pq()}n$(){this.uDt?this.gDt=!0:super.n$()}l$(t,i){this.YJ(),this.uDt?(this.lDt=this.lDt._B(new Ai([t,i])),this.wDt.push({Rg:"vat",VT:t,WT:i})):this.vDt(t,i)}vDt(t,i){super.l$(t,i)}jJ(t,i){return this.mJ((()=>this.ADt(t,i)))}ADt(t,i){return super.jJ(t,i)}d$(t,i){this.YJ(),this.uDt?(this.lDt=this.lDt.wB(new Ai([t,i])),this.wDt.push({Rg:"bT",VT:t,WT:i})):this.mDt(t,i)}mDt(t,i){super.d$(t,i)}bT(t,i,e){return this.mJ((e=>this.pDt(t,i,e)),e)}pDt(t,i,e){return super.bT(t,i,e)}yq(t){return this.mJ((()=>this.yDt(t)))}yDt(t){return super.yq(t)}async mJ(t,i){this.YJ(),this.uDt&&(await Ys(this.uDt.tL,i),this.YJ()),fo(i);try{this.XJ=t(i),await this.XJ}finally{this.XJ=void 0}}YJ(){if(this.XJ)throw new g("Internal error")}async MDt(){if(this.uDt)throw new b("Already locked");this.uDt=new ue,this.TDt(),this.XJ&&(await this.XJ.catch(na),this.TDt())}NDt(){var t;null==(t=this.uDt)||t.Zb(),this.uDt=void 0,this.DDt()}TDt(){this.wC=super.Yx(),this.FW=super.Jst(),this.RW=super.ent(),this.cDt=super.vf(),this.lDt=super.int(),this.r9=super.Pq(),this.gDt=!1}DDt(){this.YJ(),super.$st(this.FW),super.snt(this.RW);const t=this.wDt.slice();No(this.wDt);for(const i of t)"vat"===i.Rg?this.vDt(i.VT,i.WT):this.mDt(i.VT,i.WT);this.gDt&&super.n$(),this.cDt.MB(super.vf())||this.Co(new wn(Bi.cq))}Ud(){var t;null==(t=this.uDt)||t.qd(),this.uDt=void 0,super.Ud()}constructor(t){super(t),this.XJ=void 0,this.uDt=void 0,this.FW=0,this.cDt=Ai.kB(),this.lDt=Ai.kB(),this.wDt=[],this.r9=!1,this.gDt=!1,this.RW=0,this.wC=t.wd}},EW=class extends Uc{vf(){var t,i;return super.vf()._B(null!=(i=null==(t=this.SDt)?void 0:t.wf)?i:Ai.kB())}int(){var t,i;return super.int()._B(null!=(i=null==(t=this.SDt)?void 0:t.a$)?i:Ai.kB())}$st(t){super.$st(t),this.SDt&&(this.SDt.OW=t)}snt(t){super.snt(t),this.SDt&&(this.SDt.bW=t)}vDt(t,i){super.vDt(t,i),this.SDt&&this.SDt.l$(t,i)}mDt(t,i){super.mDt(t,i),this.SDt&&this.SDt.d$(t,i)}async pDt(t,i,e){fo(e);const s=[];s.push(super.pDt(t,i,e)),this.SDt&&s.push(this.SDt.bT(t,i,e)),await Promise.all(s)}mq(t){return!!super.mq(t)||this.Sit.IDt(t)}yDt(t){return super.mq(t)?super.yDt(t):this.Sit.EDt(t)}bDt(t){var i,e;null==(i=this.SDt)||i.fn(KL,this.nnt),this.SDt=t,null==(e=this.SDt)||e.yn(KL,this.nnt)}constructor(t,i){super(i),this.SDt=void 0,this.Sit=t}},bW=class extends qe{mq(t){const i=void 0!==this.i0,e=void 0!==this.e0,s=t.u0.some((t=>D(t.HP,"audio"))),n=t.u0.some((t=>D(t.HP,"video")));return i===s&&e===n&&(!!super.mq(t)||(!(!this.LDt||!this.LDt.mq(t))||this.Sit.kDt(t)))}async yq(t){return super.mq(t)?await super.yq(t):this.LDt&&this.LDt.mq(t)?(this.xDt(),await this.yq(t)):(await this.Sit.CDt(t),await this.yq(t))}IDt(t){return this.mq(this.ODt(t))}EDt(t){return this.yq(this.ODt(t))}ODt(t){const i=this.wd,e=i.u0.map((i=>D(t.HP,"audio")&&D(i.HP,"audio")||D(t.HP,"video")&&D(i.HP,"video")?t:i));return Yt({},i,{u0:e})}a0(t,i,e,s){super.a0(t,i,e,s),this.LDt&&this.LDt.a0(t,i,e,s)}jDt(){return!this.PDt&&this.zDt}Td(){return void 0!==this.BDt?this.BDt:this.jDt()?this.XL:super.Td()}n0(t){this.XL=t,this.BDt=void 0,this.jDt()||super.n0(t)}Vst(){return!this.jDt()&&super.Vst()}n$(){this.BDt=_.max(LW(this.FP.X$),LW(this.FP.Z$)),this.jDt()||super.n$()}qJ(){this.BDt=void 0,this.jDt()||super.qJ()}qst(t){return new EW(this,t)}RDt(){this.PDt=!this.PDt}xDt(){const t=this.FP,i=this.LDt;i&&(this.PDt=!this.PDt,this.Wst(i),this.UDt(t),this.jDt()&&this.QDt())}UDt(t){var i,e;this.LDt=t,null==(i=this.i0)||i.bDt(null==t?void 0:t.X$),null==(e=this.e0)||e.bDt(null==t?void 0:t.Z$)}FDt(t){const i=this.FP,e=this.LDt;if(!e)return;const s=this.PDt,n=s?i:e,r=(s?e:i).wf.Mv(t);if(!r)return;const h=NU(n.wf,this.int()).Mv(r.jn(0),fl);return!h||r.jn(0)+fl>=h.jn(0)?void 0:_.max(r.jn(0),h.Cn(0))}YDt(t,i){if(this.zDt)return Promise.resolve();const e=this.PDt?this.LDt:this.FP;return e?(this.zDt=!0,this.GDt((i=>{if(fo(i),this.zDt)return async function(t,i,e){fo(e);const s=[];t.X$&&s.push(lx(t.X$,i,e));t.Z$&&s.push(lx(t.Z$,i,e));await Promise.all(s),t.n$()}(e,t,i)}),i)):Promise.resolve()}QDt(){if(!this.zDt)return;const t=this.PDt?this.LDt:this.FP;if(!t)return;var i;this.zDt=!1;const e=null!=(i=this.BDt)?i:this.XL;t.ct<e&&t.n0(e),t.qJ()}VDt(t){var i;const e=null!=(i=this.BDt)?i:this.XL;t.n0(e),this.PDt?this.Wst(t):this.UDt(t)}int(){var t,i,e;const s=null!=(e=null==(t=this.i0)?void 0:t.a$)?e:Ai.kB();var n;const r=null!=(n=null==(i=this.e0)?void 0:i.a$)?n:Ai.kB();return s._B(r)}async GDt(t,i){const e=[];this.i0&&e.push(this.i0.MDt()),this.e0&&e.push(this.e0.MDt());try{await Promise.all(e),await t(i)}finally{this.i0&&this.i0.NDt(),this.e0&&this.e0.NDt()}}Zst(t){t.type===Bi.cq&&this.Sit.$J(),super.Zst(t)}constructor(t,i){super(i),this.LDt=void 0,this.XL=NaN,this.PDt=!1,this.zDt=!1,this.BDt=void 0,this.Wst(i),this.Sit=t}};function LW(t){if(!t)return 0;const i=t.wf;return i.U>0?i.jn(i.U-1):0}function Ns(t){return t.wd.Rg===Au.KC}var kW=class extends IW{get WDt(){return this.HDt}vf(){return super.vf()._B(this.HDt.wf)}Td(){if(!this.qDt){const t=this.FP;if(t&&Ns(t))return t.ct}return super.Td()}xst(){return!!super.xst()&&!(!this.qDt&&!this.Pq())}Cst(){return!!super.Cst()&&!(!this.qDt&&super.xst()&&!this.Pq())}Pq(){const t=this.FP;return!(!t||!Ns(t))&&t.Pq}qf(){return this.Uo._B(this.hv.Hf)}i_(){return super.i_()._B(this.HDt.t_)}$f(){return super.$f()}kst(){var t;return null!=(t=super.kst())?t:this.HDt.YP}p_(){return this.jB=!1,super.p_()}m_(){this.jB=!0,super.m_()}n5(){this.qDt=!0,super.n5(),this.HDt.n5()}r5(){this.qDt=!1,super.r5(),this.HDt.n5()}Tf(){var t;return null!=(t=this.w2)?t:super.Tf()}s_(){return void 0!==this.w2||super.s_()}Em(t,i,e){void 0===i&&(i=!1),void 0===e&&(e=!1),this.XDt.qd(),this.q2.qd(),this.q2=new Wr,this.ZDt=this.Z2(t,i,e,this.ZDt,this.q2.Wd).catch(na)}async Z2(t,i,e,s,n){this.w2=t,this.K2=t,this.Co(new ri(t)),s&&await s.catch(na),fo(n),this.FP&&Ns(this.FP)&&this.FP.QDt(),this.w2=void 0,super.Em(t,i,e),this.HDt.Em(t,i,e),this.KDt()}PP(t){const i=this.YP;if(!i||S(i.getTime()))return;const e=(t.getTime()-i.getTime())/1e3;this.Em(e)}a5(){super.a5(),this.HDt.a5()}get r_(){return this.JDt.r_}get a_(){return this.JDt.a_}be(){this.tB&&(this.tB=!1,this.JDt.be())}ge(){this.tB||(this.tB=!0,this.JDt.ge())}async $Dt(){var t;this.w2=void 0,this.K2=NaN,this.Uo=Ai.kB(),null==(t=this.tSt)||t.qd(),this.XDt.qd(),this.q2.qd(),this.ZDt&&(await this.ZDt.catch(na),this.ZDt=void 0)}Bst(t){super.Bst(t),this.HDt.lz=t}Rst(t){super.Rst(t),this.HDt.c5=t}n_(){return this.Dl}DI(t,i,e,s,n,r,h,o){return this.SI.DI(t,i,e,s,n,r,h,o)}CI(t){this.SI.CI(t)}nz(){this.SI.tr(),super.nz()}async $n(t){const i=await super.$n(t);return Ns(i)&&this.KDt(),i}async tr(){await this.$Dt(),await super.tr(),await this.HDt.tr()}async Ud(){await this.$Dt(),this.SI.gn(),this.Dl.gn(),await super.Ud()}Fst(t){return new bW(this,t)}Qst(t){return new gt(t)}KDt(){this.XDt.qd(),this.XDt=new Wr,this.ZDt=this.iSt(this.ZDt,this.XDt.Wd).catch(na)}async iSt(t,i){if(t&&await t.catch(na),this.FP&&Ns(this.FP))for(;;){let t;for(fo(i),this.eSt()&&this.RDt(),this.FP.QDt(),fo(i);fo(i),!this.eSt();){if(t=this.FP.FDt(this.Tf()),void 0!==t){0,this.sSt(),await this.FP.YDt(t,i),fo(i),this.HDt.Em(t);break}await Vh((t=>Promise.race([this.lf(Co.Iw,t),this.nSt(t)])),i)}for(fo(i);!this.eSt();)await this.hv.lf([Co.Iw,Co.Jg,Zt.H_],i)}}eSt(){const t=this.FP;if(void 0===t||!Ns(t))return!1;const i=this.Tf(),e=this.hv.wf;if(!this.hv.Sf&&e.gr(i))return!1;return!!NU(this.HDt.wf,t.int()).pB(i,i+fl)}RDt(){if(this.rSt)return;this.rSt=!0,this.Uo=this.qf();const t=px(this),i=this.s_(),e=this.$f(),s=this.hv,n=this.HDt,r=this.FP;r.QDt(),r.RDt(),yx(n,t),this.Gst(n),this.HDt=s,s.m_(),s.zf=!0,this.rSt=!1;const h=this.s_();i!==h&&(h?this.Co(new ri(this.Mf)):this.Co(new yi(this.Mf)));const o=this.$f();e!==o&&this.Co(new _e(this.Mf,o)),h||this.sSt()}sSt(){const t=this.hv,i=this.JDt;if(i===t)return;const e=this.a_,s=this.r_;this.JDt=t,this.tB&&(i.be(),t.ge());const n=this.a_,r=this.r_;n>0&&r>0&&(e!==n||s!==r)&&this.Co(new il)}kDt(t){return void 0!==this.HDt.Rq([t])}async CDt(t){this.sSt();const i=this.FP,e=this.HDt;await e.tr();const s=await e.$n(t);i.VDt(s)}nSt(t){return this.tSt=new ue,Ys(this.tSt.tL,t)}$J(){var t;null==(t=this.tSt)||t.Zb()}I_(t){t.type===Co.yw&&this.K2===t.currentTime||(t.type===Co.pw&&(this.K2=NaN,this.sSt()),t.type!==Zt.H_&&t.type!==Co.Sh&&t.type!==Co.Jg||this.rSt||!this.eSt()?(t.type!==Co.Jg||this.Sf)&&super.I_(t):this.KDt())}constructor(t,i,e){super(t),this.qDt=!1,this.w2=void 0,this.K2=NaN,this.Uo=Ai.kB(),this.jB=!0,this.rSt=!1,this.tB=!0,this.tSt=void 0,this.ZDt=void 0,this.XDt=new Wr,this.q2=new Wr,this.HDt=i,this.JDt=t,this.hv.ge(),this.HDt.be(),this.SI=new aU(this,e),this.Dl=new ms([this.SI.nt,super.n_()])}},xW=class extends kW{get Lst(){return this.hv}get WDt(){return this.HDt}be(){super.be(),this.P8.be()}ge(){super.ge(),this.P8.ge()}get UP(){return this.hv.UP}get L0(){return this.hv.L0}get g_(){return this.hv.g_}set g_(t){this.hv.g_=t}u5(t){this.hv.u5(t),this.HDt.u5(t)}l2(){this.hv.l2()}D_(){this.hv.D_(),this.HDt.D_()}v_(){return this.hv.v_()}Gst(t){const i=this.w_(),e=this.v_();super.Gst(t),this.w_()!==i&&this.Co(new Zc),this.v_()!==e&&this.Co(new z)}Ud(){return this.z8.gn(),this.P8.gn(),super.Ud()}constructor(t,i){super(t,i,new _a),this.P8=new vO,this.P8.u5(t.UP.parentElement),this.z8=new jj(this.P8.we,this.Iu,this.nt,this.Ol,this.ya)}},CW=class extends tr{Lz(t){if(t===fi.ym){const i=super.Lz(t),e=super.Lz(t);return new xW(i,e)}return super.Lz(t)}async fz(t){t instanceof xW?(await t.Ud(),await super.fz(t.Lst),await super.fz(t.WDt)):await super.fz(t)}},OW=class extends au{async gn(){await super.gn(),await this._z.fz(this.hv)}static sC(t){var i;return!f.Qs&&!f.fb&&!(t&&"google-dai"===(null==(i=t.ssai)?void 0:i.integration))}constructor(t,i,e,s,n,r,h,o){const a=new vU(new CW(r));super(t,i,e,s,n,a.Lz(h),o),this._z=a}},jW=class extends qe{qst(t){return new Uc(t)}Yx(){return this.hSt?this.wC:super.Yx()}vf(){return this.hSt?this.cDt:super.vf()}Td(){return this.hSt?this.XL:super.Td()}n0(t){this.hSt?(this.XL=t,this.oSt=!0):super.n0(t)}i_(){return this.hSt?this.aSt?this.aSt.v$():this.o0:super.i_()}a0(t,i,e,s){this.hSt?this.aSt=new xs(t,i,e,s):super.a0(t,i,e,s)}Vst(){return this.hSt?this.r9&&!1!==this.gDt:super.Vst()}n$(){this.hSt?this.gDt=!0:super.n$()}qJ(){this.hSt?this.gDt=!1:super.qJ()}mq(t){return!this.hSt&&super.mq(t)}yq(t){return this.hSt?Promise.reject(new b("Not supported")):super.yq(t)}async MDt(){if(this.hSt)throw new b("Already locked");this.hSt=!0,this.TDt();const t=[];this.i0&&t.push(this.i0.MDt()),this.e0&&t.push(this.e0.MDt()),await Promise.all(t)}NDt(){this.hSt=!1,this.i0&&this.i0.NDt(),this.e0&&this.e0.NDt(),this.DDt()}TDt(){this.wC=super.Yx(),this.cDt=super.vf(),this.XL=super.Td(),this.o0=super.i_(),this.oSt=!1,this.gDt=void 0,this.aSt=void 0}DDt(){if(this.oSt&&(super.n0(this.XL),this.oSt=!1),void 0!==this.aSt){const t=this.aSt;super.a0(t.Cn,t.jn,t.A$,t.m$),this.aSt=void 0}void 0!==this.gDt&&(this.gDt?super.n$():super.qJ(),this.gDt=void 0)}constructor(t){super(t),this.hSt=!1,this.cDt=Ai.kB(),this.XL=0,this.oSt=!1,this.r9=!1,this.gDt=void 0,this.o0=Ai.kB(),this.aSt=void 0,this.Wst(t),this.wC=t.wd}},PW=class extends _U{get Lst(){return this.hv}p_(){return void 0!==this.FP&&Ns(this.FP)&&this.Sf&&this.Em(0),super.p_()}Em(t,i,e){void 0!==this.FP&&Ns(this.FP)&&this.Sf&&t<this.ct&&this.uSt(),super.Em(t,i,e)}n5(){this.cSt=!0,super.n5()}r5(){this.cSt=!1,this.lSt()||super.r5()}lSt(){return this.cSt||this.dSt}fSt(){this.dSt||(this.dSt=!0,super.n5())}_St(){this.dSt&&(this.dSt=!1,this.lSt()||super.r5())}$n(t){this.gSt.qd();const i=this.Mit(t,this.wSt);return this.vSt=i,i}async Mit(t,i){return i&&await i.catch(na),this._St(),await super.$n(t)}Fst(t){return new jW(t)}Qst(t){return new gt(t)}tr(){this.gSt.qd();const t=this.WNt(this.wSt);return this.vSt=t,t}async WNt(t){return t&&await t.catch(na),this._St(),await super.tr()}uSt(){this.fSt(),this.gSt.qd(),this.gSt=new Wr,this.wSt=Ir(this.ASt(this.vSt,this.wSt,this.gSt.Wd),this.gSt).catch(Pd)}async ASt(t,i,e){t&&await t.catch(na),i&&await i.catch(na),fo(e);const s=this.FP;if(!s||!Ns(s))return;const n=s.wd;await s.MDt(),await this.hv.tr();const r=await this.hv.$n(n);r.n0(s.ct),s.Wst(r),s.NDt(),this._St()}async Ud(){this.gSt.qd(),this.wSt&&(await this.wSt.catch(na),this.wSt=void 0),this.lSt()&&super.r5(),await super.Ud()}constructor(...t){super(...t),this.cSt=!1,this.dSt=!1,this.vSt=void 0,this.wSt=void 0,this.gSt=new Wr}},xn=class extends tr{Lz(t){if(t===fi.ym)return new PW(super.Lz(t))}async fz(t){const i=t;await i.Ud(),await super.fz(i.Lst)}static sC(){return f.gb}};ct(new class extends JR{dA(t,i,e,s,n,r,h,o){const a=new Xe(wi.Lb.hst,wi.Lb.rst,wi.Lb.nst,wi.Lb.ast);let u;u=SW.sC(o)?SW:OW.sC(o)?OW:pW;let c=i;return xn.sC()&&(c=new xn(c)),new u(e,s,n,r,a,c,fi.ym,t)}xz(){return!0}constructor(...t){super(...t),this.Cz=Ca.cP}}),Vr((function(t){return class extends t{fa(){const t=this.kf.va;return lt(super.fa(),{get hesp(){return t}})}}}),Zo.Za);var zW=0;function Us(t,i){if(void 0===i&&(i=!0),!t)return;let e=t;return"/"===e.charAt(0)&&(e=e.substring(1)),i&&"/"!==e.charAt(e.length-1)&&(e+="/"),e}function BW(t){var i,e,s;return Yt({},t,{baseUrl:Us(t.baseUrl),id:null!=(i=t.id)?i:String(zW++),timeBounds:Yt({},t.timeBounds,{scale:null!=(e=t.timeBounds.timescale)?e:1e3}),currentTime:t.currentTime?{value:t.currentTime.timestamp,scale:null!=(s=t.currentTime.timescale)?s:1e3}:void 0,audio:t.audio.map(GW),video:t.video.map(WW),metadata:t.metadata.map(qW),events:t.events.map($W)})}var RW=0;function UW(t){const i=Us(t.initPattern,!1),e=Us(t.contPattern,!1);var s;return Yt({},t,{id:null!=(s=t.id)?s:String(RW++),continuationPattern:e?hn(e,"${segmentId}","{segmentId}"):void 0,initializationPattern:i?hn(i,"${initId}","{initId}"):void 0})}function QW(t){var i;const e=Us(t.initPattern,!1),s=Us(t.contPattern,!1);return Yt({},t,{continuationPattern:s?hn(s,"${segmentId}","{segmentId}"):void 0,initializationPattern:e?hn(e,"${initId}","{initId}"):void 0,segmentDuration:t.segmentDuration?{value:t.segmentDuration.duration,scale:t.segmentDuration.timescale}:void 0,segments:t.segments.map(FW),activeSegment:null==(i=Vt(t.segments,(t=>t.active)))?void 0:i.id})}function FW(t){var i;return Yt({},t,{timeBounds:Yt({},t.timeBounds,{endTime:void 0!==t.timeBounds.duration?t.timeBounds.startTime+t.timeBounds.duration:void 0,scale:null!=(i=t.timeBounds.timescale)?i:1e3})})}function YW(t){return t&&"-"===t.charAt(0)}function GW(t){let i;try{var e;i=x(null!=(e=t.channels)?e:"2")}catch(t){i=2}return YW(t.contPattern)||YW(t.initPattern)?function(t,i){const e=t.initPattern,s=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Yt({},UW(t),{baseUrl:Us(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map((t=>{var i,n;return t.initPattern=null!=(i=t.initPattern)?i:e,t.contPattern=null!=(n=t.contPattern)?n:s,VW(t)}))})}(t,i):Yt({},UW(t),{baseUrl:Us(t.baseUrl),language:"eng",channels:i,sampleRate:t.samplerate,tracks:t.tracks.map(VW)})}function VW(t){let i;try{var e;i=x(null!=(e=t.channels)?e:"2")}catch(t){i=2}return YW(t.contPattern)||YW(t.initPattern)?function(t,i){return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Yt({},QW(t),{baseUrl:"./",channels:i,sampleRate:t.samplerate})}(t,i):Yt({},QW(t),{baseUrl:Us(t.baseUrl),channels:i,sampleRate:t.samplerate})}function WW(t){return YW(t.contPattern)||YW(t.initPattern)?function(t){const i=t.initPattern,e=t.contPattern;return t.initPattern=void 0,t.contPattern=void 0,Yt({},UW(t),{baseUrl:Us(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map((t=>(t.initPattern=i,t.contPattern=e,HW(t))))})}(t):Yt({},UW(t),{baseUrl:Us(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,tracks:t.tracks.map(HW)})}function HW(t){var i,e;return YW(t.contPattern)||YW(t.initPattern)?function(t){var i,e;return t.contPattern=t.baseUrl+t.contPattern,t.initPattern=t.baseUrl+t.initPattern,Yt({},QW(t),{baseUrl:"./",frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Yt({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}(t):Yt({},QW(t),{baseUrl:Us(t.baseUrl),frameRate:t.framerate?{value:t.framerate.rate,scale:t.framerate.scale}:void 0,resolution:Yt({},t.resolution,{sarWidth:null==(i=t.resolution.sar)?void 0:i.width,sarHeight:null==(e=t.resolution.sar)?void 0:e.height})})}function qW(t){var i;return Yt({},t,{id:null!=(i=t.id)?i:String(RW++),schemeId:"",tracks:t.tracks.map(XW)})}function XW(t){return Yt({},t,{segments:t.segments.map(KW)})}var ZW=0;function KW(t){return{id:ZW++,timeBounds:Yt({},t.timeBounds,{scale:t.timeBounds.timescale})}}var JW=0;function $W(t){var i,e;return Yt({},t,{id:null!=(i=t.id)?i:String(JW++),timeBounds:Yt({},t.timestamp,{scale:null!=(e=t.timestamp.timescale)?e:1e3})})}var tH=class{async mSt(t,i){const e={zu:t,Wd:i},s=await this.AO.LS(e);let n=await s.ZO(i);return function(t){const i=t;if(Qs(i.manifestVersion)&&Xi(i.manifestVersion,"alpha"))return!0;let e,s;for(const t of i.presentations){for(const i of[...t.video,...t.audio])if(i.tracks.length>0){e=i.tracks[0],s=i;break}if(Po(e))break}return(Qs(null==s?void 0:s.initPattern)||Qs(null==e?void 0:e.initPattern))&&!Qs(null==e?void 0:e.initializationPattern)&&!Qs(null==s?void 0:s.initializationPattern)}(n)&&(n=function(t){return Yt({},t,{availabilityDuration:{value:t.dvrDuration?t.dvrDuration.duration/t.dvrDuration.timescale:0},manifestVersion:"1.0.0",presentations:t.presentations.map(BW),contentBaseUrl:t.contentBaseUrl||"./"})}(n)),n}constructor(t){this.AO=t}},iH=class extends Bo{get va(){return this.Xa||(this.Xa=Df(this)),this.Xa}Nv(){return this.pSt.Nv()}get Cv(){return this.pSt.ySt}get yv(){return this.pSt.yv}get Ov(){return this.pSt.Ov}get Pv(){return this.pSt.Pv}get xv(){return this.pSt.MSt}get Bv(){return this.pSt.TSt}set Bv(t){this.pSt.TSt=t}get zv(){return this.pSt.zv}yn(t,i){this.pSt.yn(t,i)}fn(t,i){this.pSt.fn(t,i)}constructor(t){super(),this.pSt=t}},eH=class{get i9(){const t=1-this.NSt**this.DSt;return this.SSt/t}Ght(t,i){const e=this.NSt**t,s=i*(1-e)+e*this.SSt;S(s)||(this.SSt=s,this.DSt+=t)}yq(t){const i=_.exp(_.log(.5)/t);if(i===this.NSt)return;if(0===this.DSt)return void(this.NSt=i);const e=this.i9,s=1-i**this.DSt;this.SSt=e*s,this.NSt=i}constructor(t){this.SSt=0,this.DSt=0,this.NSt=_.exp(_.log(.5)/t)}},Vu=class t{get i9(){return this.Kht()?_.max(this.ISt.i9,this.ESt.i9):this.bSt}Ght(t){const e=i.Kd(),s=t;this.LSt&&void 0!==this.kSt&&e-this.kSt>=this.xSt&&this.tr(),this.CSt+=1,this.ISt.Ght(1,s),this.ESt.Ght(1,s),this.OSt.push(s),this.OSt.length>this.jSt&&this.OSt.shift(),this.kSt=e}Kht(){return void 0!==this.kSt&&i.Kd()-this.kSt<=this.xSt}tr(){this.ISt=new eH(this.PSt),this.ESt=new eH(this.zSt),this.CSt=0,this.OSt=[],this.kSt=void 0}constructor(i=t.BSt,e=t.RSt,s=t.Jht,n=!1){this.CSt=0,this.OSt=[],this.kSt=void 0,this.xSt=6e4,this.jSt=10,this.PSt=i,this.zSt=e,this.bSt=s,this.LSt=n,this.ISt=new eH(i),this.ESt=new eH(e)}};Vu.BSt=2,Vu.RSt=5,Vu.Jht=.1;var Ja,Rc=class{yW(t){for(const i of this.USt)i.yW(t)}MW(t){for(const i of this.USt)i.MW(t)}TW(t,i){for(const e of this.USt)e.TW(t,i)}NW(t){for(const i of this.USt)i.NW(t)}constructor(t){this.USt=t}},sH=class{yW(t){this.QSt=t}MW(t){this.FSt.Ght(t-this.QSt)}TW(t){}NW(t){}constructor(t){this.QSt=0,this.FSt=t}},Ec=class{MW(t){this.YSt=t}TW(t,i){this.iot.Ght(t-this.YSt,i.byteLength),this.YSt=t}NW(t){}yW(t){}constructor(t){this.YSt=0,this.iot=t}},nH=class{yW(t){}TW(t,e){const s=e.byteLength,n=this.GSt;this.GSt=s;const r=t-this.An;this.An=t,this.VSt.wX(e);const h=!this.VSt.WSt(),o=s>=this.HSt;n!==i.Ys.iit&&h&&o&&this.iot.Ght(r,s)}MW(t){this.An=t}NW(t){}constructor(t,i=0){this.VSt=new rH,this.An=0,this.GSt=0,this.iot=t,this.HSt=i}},rH=class extends ak{WSt(){return this.qSt}wX(t){this.qSt=!1,super.wX(t)}_X(t,i){this.XSt&&this.XSt!==he.dm||(this.qSt=!0),super._X(t,i),this.XSt=t}SX(t){return!1}EX(t){}LX(t){}constructor(...t){super(...t),this.XSt=void 0,this.qSt=!1}};(Ja||(Ja={})).ZSt="sample";var hH=class extends Bo{sP(){if(!this.Kht())return;const t=i.Kd();t-this.KSt>1e3&&(this.KSt=t,va.Lb.sP(this.i9))}constructor(...t){super(...t),this.KSt=0}},oH=class extends hH{get i9(){return this.Kht()?this.SSt:this.JSt}Kht(){return this.Sk.length>=3}Ght(t,i){if(0===t)return;const e={wP:8*i/t,$St:i};if(this.Sk.push(e),this.tIt+=e.$St,this.Sk.length>30){const t=this.Sk.shift();this.tIt-=t.$St}const s=this.Sk.slice().sort(((t,i)=>t.wP-i.wP));let n=0;for(let t=0;t<s.length;t++){const i=s[t];if(n+=i.$St/this.tIt,this.SSt=i.wP,n>=.5)break}this.sP(),this.Co(new wn(Ja.ZSt))}constructor(t){super(),this.Sk=[],this.tIt=0,this.JSt=t,this.SSt=t}},aH=class t extends hH{Ght(t,i){const e=8*i/t;this.ISt.Ght(t,e),this.ESt.Ght(t,e),this.iIt+=i,this.sP(),this.Co(new wn(Ja.ZSt))}get i9(){return this.Kht()?_.min(this.ISt.i9,this.ESt.i9):this.bSt}Kht(){return this.iIt>=this.eIt}constructor(i=t.BSt,e=t.RSt,s=t.sIt,n=t.Jht){super(),this.iIt=0,this.eIt=s,this.ISt=new eH(i),this.ESt=new eH(e),this.bSt=n}};aH.sIt=128e3,aH.Jht=_N,aH.BSt=.5,aH.RSt=5;var Vc,uH=class{nIt(t){var i;null==(i=this.iot)||i.fn(Ja.ZSt,this.rIt),this.iot=new oH(t),this.iot.yn(Ja.ZSt,this.rIt)}hIt(t){this.oIt.push(t)}aIt(t){Qr(this.oIt,t)}get wP(){var t,i;return null!=(i=null==(t=this.iot)?void 0:t.i9)?i:this.uIt}get vP(){return this.cIt.i9}AP(t){if("segment"!==t.Rg)return;if("video"!==t.mI)return;const i=[new sH(this.cIt)];return this.iot&&("stream"===t.wI&&"initialization-segment"!==t.AI?i.push(new nH(this.iot,1e3)):i.push(new Ec(this.iot))),new Rc(i)}constructor(t,i){this.oIt=[],this.rIt=()=>{for(const t of this.oIt)t()},this.uIt=t>0?t:aH.Jht,this.cIt=new Vu(Vu.BSt,Vu.RSt,i>0?i:Vu.Jht),this.nIt(this.uIt)}},cH=class{lIt(t,i){const e=i-t;(!this.dIt||e<this.dIt)&&(this.dIt=e)}fIt(t,i){this._It=i-t}get gIt(){return void 0!==this._It?i.Kd()/1e3+this._It:void 0!==this.dIt?i.Kd()/1e3+this.dIt:void 0}wIt(t){const i=this.gIt;if(void 0!==i)return i-t}tr(){this.dIt=void 0,this._It=void 0}},lH=class{vIt(t){for(const i of this.cDt)i[1]=i[1].Sn(t)}AIt(t,i){let e=!0;for(const s of this.cDt){let n=s[1];n=n.wB(i),t===s[0]&&(n=n._B(i),e=!1),s[1]=n.fB(1e-5)}e&&this.cDt.push([t,i])}mIt(t){for(const i of this.cDt)i[1]=i[1].wB(t)}pIt(t){for(let i=0;i<this.cDt.length;i++)if(this.cDt[i][1].gr(t))return this.cDt[i][0]}constructor(){this.cDt=[]}},dH=class extends Bo{get wf(){let t=Ai.kB();for(const[,i]of this.yIt){const e=i.a9+i.QD,s=e+i.ct;t=t._B(Ai.LB(e,s))}return this.tnt.wf._B(t)}pIt(t){return this.MIt.pIt(t)}get TIt(){return void 0!==this.NIt}get DIt(){return this.NIt?this.NIt.tL:Promise.resolve()}async appendStream(t,i){if(this.TIt)throw new g("Concurrent appends are not supported.");const e=this.KJ.Wd;this.MIt.vIt(this.wf),this.NIt=new ue;const s=t.getReader();try{for(;;){const t=await Ys(s.read(),e);if(t.done)break;const n=t.value,r={Rg:G.dq,zm:n.Mot},h={ct:n.ct,a9:n.Kdt,QD:-i.Zrt.SIt};await this.pJ(r,h,e);const o=h.a9+h.QD,a=o+h.ct;this.MIt.AIt(i.Zrt,Ai.LB(o,a))}}finally{i.IIt();const t=this.NIt;this.NIt=void 0,t.Zb()}}async AJ(t,i,e,s){if(this.TIt)throw new g("Concurrent appends are not supported.");const n=new Wr;n.Xd(this.KJ.Wd),s&&n.Xd(s);try{this.NIt=new ue,await this.pJ(t,i,n.Wd);const s=i.a9+i.QD,r=s+i.ct;this.MIt.vIt(this.wf),this.MIt.AIt(e,Ai.LB(s,r))}finally{const t=this.NIt;this.NIt=void 0,null==t||t.Zb()}}async pJ(t,i,e){const s=new Wr;s.Xd(this.KJ.Wd),e&&s.Xd(e),this.tnt.h$===fi.ym&&this.EIt.Dut(t.zm,i.a9,i.a9+i.ct,i.QD,this.EAt,!1);const n=this.hv.vv._v,r=this.tnt.wf.gr(this.hv.Mf);if(n||r)return await this.bIt(),await this.tnt.AJ(t,i,s.Wd);this.yIt.push([t,i]);const h=this.yIt[0][1].a9;return this.yIt[this.yIt.length-1][1].a9-h>=.4?await this.bIt():void 0}async yJ(t){if(this.TIt)throw new g("Concurrent appends are not supported.");try{this.NIt=new ue,await this.bIt(),await this.tnt.yJ(t,{},this.KJ.Wd),this.tnt.h$===fi.ym&&this.EIt.dnt(t.zm)}finally{const t=this.NIt;this.NIt=void 0,null==t||t.Zb()}}async bT(t,i){if(this.TIt)throw new g("Concurrent appends are not supported.");try{this.NIt=new ue,await this.bIt(),await this.tnt.bT(t,i,this.KJ.Wd),this.MIt.mIt(Ai.LB(t,i))}finally{const t=this.NIt;this.NIt=void 0,null==t||t.Zb()}}async KF(){if(this.TIt)throw new g("Concurrent appends are not supported.");try{this.NIt=new ue,await this.bIt()}finally{const t=this.NIt;this.NIt=void 0,null==t||t.Zb()}}async bIt(){for(const[t,i]of this.yIt)await this.tnt.AJ(t,i,this.KJ.Wd);No(this.yIt)}async Ud(){for(this.KJ.Ud();this.TIt;)await this.DIt}constructor(t,i,e,s){super(),this.yIt=[],this.NIt=void 0,this.KJ=new Wr,this.hv=i,this.tnt=t,this.EAt=e,this.EIt=s,this.MIt=new lH,this.tnt.yn(Bi.cq,this.Ds)}},fH=class{async LIt(t,i){if(this.kIt>=this.xIt.maxRetries)throw t;const e=this.CIt(this.kIt++);await N(e,i)}CIt(t){let i=0;return 0!==t&&(i+=_.min(this.xIt.maximumBackoff,this.xIt.minimumBackoff*(2**t-1))),i}constructor(t){this.kIt=0,this.xIt=t}};(Vc||(Vc={})).OIt="emsgdata";var Is,_H=class extends wn{constructor(t,i){super("emsgdata"),this.value=t,this.data=i}},gH=class{start(t){this.VH=t}jIt(t){this.VH.enqueue(t)}};!function(t){t.PIt="initdata",t.MANIFEST_UPDATE="manifestupdate",t.zIt="timestamps:v1"}(Is||(Is={}));var wH="urn:theo:hesp:2020";function vH(t){if(t.jM!==wH)return;const i=t.PM;if(i===Is.PIt){return function(t){if(!t||!Ut(t))return;const i=t;return!ci(i.index)||!ci(i.offset)||i.index<0&&i.offset<0?void 0:{Rg:"initdata",index:i.index,offset:i.offset}}(JSON.parse(so(Ao(t.RM),new _s)))}if(i===Is.MANIFEST_UPDATE){return function(t){if(!t||!Ut(t))return;const i=t;return!Po(i.url)||Qs(i.url)?{Rg:"manifestupdate",url:i.url}:void 0}(JSON.parse(so(Ao(t.RM),new _s)))}if(i===Is.zIt){const i=Ao(t.RM),e=new _s,s=Oc(i,e).toNumber()/t.xp,n=Oc(i,e).toNumber()/1e3,r=aa(i,e)/1e3;let h;return e.Ku+8<=i.byteLength&&(h={hours:aa(i,e),minutes:hg(i,e),seconds:hg(i,e),frames:og(i,e)}),{Rg:Is.zIt,BIt:s,RIt:n,UIt:r,QIt:h}}}var AH=class extends gH{transform(t){if(t.Rg===he._m)try{const i=vH(iu.Dp(t.zm));i&&this.FIt.Co(new _H(i.Rg,i))}catch(t){false}this.jIt(t)}Ud(){this.FIt.Vo()}constructor(...t){super(...t),this.FIt=new Bo}},mH=class{start(t){this.YIt=new pH(t)}transform(t){this.YIt.wX(t)}flush(){this.YIt.AX()}},pH=class extends ak{SX(t){return!0}EX(t){this.VH.enqueue(t)}LX(t){}constructor(t){super(),this.VH=t}},yH=Ce.fromNumber(jh);var Bs,MH=class extends Bo{async LS(t){for(;;)try{return await this.EI.LS(t)}catch(i){if(ut(i))throw i;await this.GIt.LIt(i,t.Wd)}}constructor(t,i){super(),this.EI=t,this.GIt=i}};function TH(t,i,e,s,n,r,h,o){const a=new Z;return n&&a.KS(function(t,i){return void 0===i&&(i=yH),new Z({Range:"bytes="+t.toString()+"-"+i.toString()})}(n.start,n.end)),{zu:t,_I:a,pI:!1,Wd:o,Rg:sa.$S,AI:e,mI:s,jS:r,vI:h,wI:i,MI:i===oe.qS}}!function(t){t[t.INITIALIZER=0]="INITIALIZER",t[t.FRAMES=1]="FRAMES"}(Bs||(Bs={}));var NH=class extends gH{transform(t){this.VIt.push(t),t.Rg===he.dm&&this.WIt(this.VIt.splice(0),Bs.FRAMES)}WIt(t,i){const e={xp:this.qL,zF:this.tY},s=uc(t.map((t=>ks(t.zm.zm)))),n=Vt(t,DH),r=iu._p(n.zm.zm)[0],h={mI:this.Fht,Gb:e,Mot:s,Rg:i,ct:this.Td(r)/this.qL,Kdt:vi(this.HIt(r),this.qL)};this.jIt(h)}Td(t){const i=t.Z[0];if(!i||0===i.SM.length)return 0;var e;const s=null!=(e=i.rp.wM)?e:0;return i.SM[0].CM.reduce(((t,i)=>{var e;return t+(null!=(e=i.ct)?e:s)}),0)}HIt(t){var i,e;return null!=(e=null==(i=t.Z[0].IM)?void 0:i.IM)?e:Ce.UZERO}constructor(t,i){super(),this.VIt=[],this.tY=t,this.Fht=this.tY.match(/video/)?xu.ym:xu.Mm,this.qL=i}};function DH(t){return t.Rg===he.$A}var SH=class extends Bo{get Zrt(){return this.qIt}iut(t){return t+1}get XIt(){return!1}get ZIt(){return this.KIt}get TIt(){return void 0!==this.NIt}get DIt(){return this.NIt?this.NIt.tL:Promise.resolve()}Em(t){this.KIt=t,this.JIt=void 0,this.$It=void 0}tEt(){return void 0!==this.JIt}async iEt(){if(this.TIt)throw new g("Concurrent downloads are not supported.");try{this.NIt=new ue;let t;if("now"===this.KIt)t=i.Uv(this.qIt.eEt("now"),this.qIt.sEt);else{const e=this.KIt,s=0===e?1:this.qIt.nEt(e);t=i.Uv(this.qIt.eEt(s),this.qIt.sEt)}const e=TH(t,oe.WS,Kt.eI,this.Fht,void 0,3e3,1e3,this.rEt.Wd),s=await this.hEt.LS(e),n=await s.gj(this.rEt.Wd),r=new j(n),{oEt:h,Bp:o}=function(t){const i=At.Km(new ia(Ao(t),new _s)),e=Vt(i,(t=>t.Rg===he.wm||t.Rg===he.$A));if(void 0===e)return{oEt:t,Bp:void 0};const s=Io(t,0,e.Ku),n=Io(t,e.Ku);return{oEt:s,Bp:0===n.byteLength?void 0:n}}(r),a=iu._p(Ao(r));this.qL=function(t){const i=Vt(t,(t=>t.Rg===he.pA));return i.Z[0].Bp.rp.xp}(a);const u=function(t){const i=t.filter((t=>t.Rg===he._m)),e=i.map((t=>vH(t))),s=Vt(e,(t=>(null==t?void 0:t.Rg)===Is.PIt));if(!s)throw new g("No init data in init response");return s}(a);let c;if(this.JIt=u.index,this.$It=u.offset,o){c=function(t,i,e){var s;const n=Vt(t,(t=>t.Rg===he.$A));var r;const h=vi(null!=(r=null==(s=n.Z[0].IM)?void 0:s.IM)?r:Ce.UZERO,e),o=n.Z[0];var a;const u=null!=(a=o.rp.wM)?a:0,c=o.SM[0],l=c.CM.reduce(((t,i)=>{var e;return t+(null!=(e=i.ct)?e:u)}),0)/e;return{a9:h,ct:l,QD:i}}(iu._p(Ao(r)),-this.Zrt.SIt,this.qL)}return{initialization:h,data:o,metadata:c}}finally{const t=this.NIt;this.NIt=void 0,null==t||t.Zb()}}aEt(){if(this.TIt)throw new g("Concurrent downloads are not supported.");this.NIt=new ue;const t=void 0!==this.$It?Ce.fromNumber(this.$It):void 0;return Bb(this.uEt(this.JIt,t,this.rEt.Wd)).pipeThrough(new _i(new NH(this.Zrt.zF,this.qL))).pipeThrough(new _i(new IH(this.rEt.Wd)))}async uEt(t,i,e){const s=this.cEt(t,i,e);return(await this.hEt.LS(s)).vV().pipeThrough(new _i(new mH)).pipeThrough(new _i(this.lEt))}cEt(t,e,s){const n=this.qIt.dEt(t),r=void 0!==e?{start:e,end:void 0}:void 0;return TH(i.Uv(n,this.qIt.sEt),oe.qS,Kt.hT,this.Fht,r,25e3,1e3,s)}IIt(){void 0!==this.JIt&&(this.JIt=this.iut(this.JIt)),this.$It=void 0;const t=this.NIt;this.NIt=void 0,null==t||t.Zb()}cancelDownload(){var t;this.rEt.qd(),this.rEt=new Wr,this.NIt=null!=(t=this.NIt)?t:new ue,this.JIt=void 0,this.$It=void 0;const i=this.NIt;this.NIt=void 0,null==i||i.Zb()}async Ud(){this.Vo(),this.lEt.Ud(),this.rEt.qd(),await this.DIt,this.JIt=void 0,this.$It=void 0}constructor(t,i,e){super(),this.KIt="now",this.rEt=new Wr,this.NIt=void 0,this.qIt=t,this.GIt=new fH(e),this.lEt=new AH,this.lEt.FIt.yn(Vc.OIt,this.Ds),this.EI=i,this.Fht=function(t){switch(t){case xu.Mm:return ls.Mm;case xu.ym:return ls.ym;default:return ls.hT}}(t.Rg),this.hEt=new MH(this.EI,this.GIt)}};var IH=class{start(t){this.VH=t,this.Hd.Fd(this.fEt)}flush(){this.Hd.Yd(this.fEt)}constructor(t){this.fEt=()=>{this.VH.error(new Sn)},this.Hd=t}};function EH(t){var i;return t.value/(null!=(i=t.scale)?i:1)}var bH="{initId}",LH=/{initId(?::0(?:\d+)d)?}/,kH=/{segmentId(?::0(?:\d+)d)?}/,xH=class{get o(){return this.CT}get wP(){return this.nP}get gAt(){return this._Et}get nst(){return this.Imt}get gEt(){return this.wEt}get vEt(){return this.AEt}get sEt(){return i.Uv(this.mEt,this.pEt.sEt)}get Mst(){return this.yEt}get kh(){return this.jT}get MEt(){return this.TEt}get NEt(){return this.DEt}get SIt(){return this.SEt}get IEt(){return this.mmt}Yn(t){this.wEt=t.activeSegment,this.AEt=t.activeSequenceNumber,this.Imt=t.segments}constructor(t,i,e){var s,n,r,h;this.Imt=[],this.eN=t,this.EEt=e,this.CT=t.id,this.nP=t.bandwidth,this._Et=t.averageBandwidth,this.mEt=null!=(s=t.baseUrl)?s:"",this.yEt=null!=(n=t.codecs)?n:i.codecs,this.TEt=null!=(r=t.continuationPattern)?r:i.continuationPattern,this.DEt=null!=(h=t.initializationPattern)?h:i.initializationPattern,this.jT=t.label,this.SEt=t.mediaTimeOffset?EH(t.mediaTimeOffset):0,this.mmt=t.segmentDuration?EH(t.segmentDuration):0,this.Yn(t)}},CH=class extends xH{get Rg(){return xu.Mm}get pEt(){return this.EEt}get bEt(){return this.LEt}get Fct(){return this.kEt}get Ey(){return this.xL}get zF(){return'audio/mp4; codecs="'+this.Mst+'"'}constructor(t,i,e){var s,n,r,h;super(t,i,e),this.LEt=null!=(s=t.channels)?s:1,this.kEt=null!=(r=null!=(n=t.frameRate)?n:i.frameRate)?r:1024,this.xL=null!=(h=t.sampleRate)?h:i.sampleRate}},OH=class extends xH{get Rg(){return xu.ym}get pEt(){return this.EEt}get xEt(){return this.ait}get Fct(){return this.kEt}get zF(){return'video/mp4; codecs="'+this.Mst+'"'}constructor(t,i,e){var s;super(t,i,e),this.ait=t.resolution,this.kEt=EH(null!=(s=t.frameRate)?s:i.frameRate)}};function jH(t,i){const e=String(i);if(t===bH||"now"===i)return e;const s=x(t.substring(9,t.lastIndexOf("d")));return Es(e,s,"0")}function PH(t,i){const e=String(i);if(t===bH)return e;const s=x(t.substring(12,t.lastIndexOf("d")));return Es(e,s,"0")}var zH,BH,RH=class{get m7(){return this.CEt}get o(){return this.CT}get OEt(){return this.jEt}get sEt(){return i.Uv(this.mEt,this.m7.sEt)}get kh(){return this.jT}get SIt(){return this.SEt}get PEt(){return this.zEt}Yn(t){for(const i of this.ag){const e=Vt(t.tracks,(t=>i.o===t.id));e&&i.Yn(e)}}constructor(t,i,e){var s;this.EEt=t,this.ag=e,this.CEt=i,this.CT=t.id,this.jEt=t.alignId,this.mEt=null!=(s=t.baseUrl)?s:"",this.jT=t.label,this.SEt=t.mediaTimeOffset?EH(t.mediaTimeOffset):0,this.zEt=t.protection,this.Yn(t)}},UH=class extends RH{get pEt(){return this.EEt}get Z(){return this.ag}get gs(){return this.ZL}get bEt(){return this.LEt}Yn(t){var i,e;super.Yn(t),this.ZL=t.language,this.LEt=null!=(i=t.channels)?i:1,this.tY=null!=(e=t.mimeType)?e:"audio/mp4"}constructor(t,i){const e=[];super(t,i,e);for(const i of t.tracks)e.push(new CH(i,t,this))}},QH=class extends RH{get pEt(){return this.EEt}get Z(){return this.ag}Yn(t){var i;super.Yn(t),this.tY=null!=(i=t.mimeType)?i:"video/mp4"}constructor(t,i){const e=[];super(t,i,e);for(const i of t.tracks)e.push(new OH(i,t,this))}},FH=class{get o(){return this.CT}get sEt(){return i.Uv(this.mEt,this.REt.BEt)}get UEt(){return this.QEt}get Mf(){return this.xB}get BF(){return this.KB}get FEt(){return this.YEt}get GEt(){return this.VEt}Yn(t){var i;this.QEt=t.timeBounds,this.KB=null!=(i=t.events)?i:[],this.xB=t.currentTime?EH(t.currentTime):void 0}constructor(t,i){var e,s,n;this.YEt=[],this.VEt=[],this.REt=t,this.CT=i.id,this.mEt=null!=(e=i.baseUrl)?e:"";for(const t of null!=(s=i.audio)?s:[])this.YEt.push(new UH(t,this));for(const t of null!=(n=i.video)?n:[])this.VEt.push(new QH(t,this));this.Yn(i)}},YH=class{get zv(){return this.REt}get WEt(){return this.HEt}get qEt(){return this.XEt}get ZEt(){return this.KEt}get JEt(){return this.$Et}get tbt(){return this.ibt}get fZ(){return this.yL}get ebt(){return this.sbt}get BEt(){var t;return i.Uv(null!=(t=this.nbt)?t:"",this.rbt)}get hbt(){return this.obt}Yn(t){var i;this.HEt=EH(t.availabilityDuration),this.XEt=t.creationDate,this.KEt=t.fallbackPollRate,this.$Et=t.manifestVersion,this.yL=t.streamType,this.sbt=t.activePresentation,this.nbt=t.contentBaseUrl,this.obt=null==(i=t.timeSource)?void 0:i.url,this.REt=t;for(const i of t.presentations){const t=Vt(this.ibt,(t=>t.o===i.id));t?t.Yn(i):this.ibt.push(new FH(this,i))}this.ibt=this.ibt.filter((i=>t.presentations.some((t=>t.id===i.o))))}constructor(t,i){this.ibt=[],this.rbt=t,this.REt=i,this.Yn(i)}},GH=0,VH=class extends Bo{get Net(){return!0}get gAt(){return this.abt.gAt}get wP(){return this.abt.wP}get Mst(){return this.abt.Mst}get o(){return this.abt.o}get kh(){var t;return null!=(t=this.abt.kh)?t:""}get Mg(){return this.OT}get mAt(){return this.abt.sEt}get wAt(){}get zF(){return this.abt.zF}get SIt(){return this.abt.SIt}get sEt(){return this.abt.sEt}get Rg(){return this.abt.Rg}nEt(t){const i=(t-this.abt.pEt.m7.Mf)*this.framesPerSecond();return _.round(this.abt.vEt+i)}ubt(t){return t+1}eEt(t){var i;let e,s=this.abt.NEt;for(;e=null==(i=s.match(LH))?void 0:i.pop();)s=s.split(e).join(jH(e,t));return s+("now"===t?"?uuid="+cr():"")}dEt(t){var i;let e,s=this.abt.MEt;for(;e=null==(i=s.match(kH))?void 0:i.pop();)s=s.split(e).join(PH(e,t));return s}GS(){}YS(){}constructor(t){super(),this.OT=GH++,this.abt=t}},WH=class extends VH{get cbt(){return this.abt}get gvt(){return this.abt.Ey}get Lt(){return this.eN}framesPerSecond(){return this.abt.Ey/this.abt.Fct}get va(){return this.Xa||(this.Xa=gc(this)),this.Xa}constructor(t,i){super(t),this.Xa=void 0,this.eN=i}},HH=class extends VH{get cbt(){return this.abt}get vAt(){return 0}get Fct(){return this.abt.Fct}get Ti(){return this.abt.xEt.height}get ji(){return this.abt.xEt.width}get xEt(){return this.abt.xEt}get Lt(){return this.eN}framesPerSecond(){return this.abt.Fct}get va(){return this.Xa||(this.Xa=aG(this)),this.Xa}constructor(t,i){super(t),this.Xa=void 0,this.eN=i}};!function(t){t.lbt="alternative",t.dbt="main",t.fbt="commentary",t._bt="",t.DS="descriptions",t.gbt="main-desc",t.wbt="translation"}(zH||(zH={})),function(t){t.lbt="alternative",t.dbt="main",t.fbt="commentary",t._bt="",t.NS="captions",t.Eg="sign",t.Tm="subtitles"}(BH||(BH={}));var qH=0,XH=class extends Bo{get yg(){return this.vbt()}get Rt(){return this.Le}set Rt(t){this.Rt!==t&&(this.Le=t,t&&this.Abt(),this.pbt.mbt(),this.Co(new no(this)))}get va(){return this.Xa||(this.Xa=ni(this)),this.Xa}get Tct(){return this.ybt}get o(){return this.EEt.o}get Mg(){return this.OT}get kh(){var t;return null!=(t=this.EEt.kh)?t:""}get jg(){return this.Rt?"enabled":"disabled"}set jg(t){"enabled"===t?this.Rt=!0:"disabled"===t&&(this.Rt=!1)}get Ng(){return this.IT}get Dg(){return this.jat}set Dg(t){this.jat=t,this.pbt.mbt(),this.Co(new BQ(t,this))}zT(t){this.Rt=t}Mbt(t){for(const i of this.IT.og)i===t&&this.Co(new vn(i))}constructor(t,i,e){super(),this.IT=new Uw,this.OT=qH++,this.Le=!1,this.jat=void 0,this.EEt=i,this.pbt=e,this.ybt=new NV(t,[]);for(const t of i.Z)this.IT.ET(this.createQuality(t))}},ZH=class extends XH{get Rg(){return xu.Mm}get zt(){return zH.dbt}get gs(){return this.EEt.gs}get pEt(){return this.EEt}Abt(){this.pbt.Tbt(this)}vbt(){const t=this.pbt.Nbt;return(null==t?void 0:t.Lt)===this?t:void 0}createQuality(t){return new WH(t,this)}constructor(t,i){super(fi.Mm,t,i)}},KH=class extends XH{get Rg(){return xu.ym}get zt(){return BH.dbt}get gs(){return""}get pEt(){return this.EEt}Abt(){this.pbt.Dbt(this)}vbt(){const t=this.pbt.Sbt;return(null==t?void 0:t.Lt)===this?t:void 0}createQuality(t){return new HH(t,this)}constructor(t,i){super(fi.ym,t,i)}};function JH(t,i,e,s){if(!t)return;const n=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"audio/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(i+'; codecs="'+e+'"')}return $H(t,i,s,[],e)}(t,i?[i]:[],!s),r=function(t,i,e){const s=[];for(const t of i){var n;const i=null!=(n=t.mimeType)?n:"video/mp4";var r;const e=null!=(r=t.codecs)?r:t.tracks.map((t=>t.codecs))[0];s.push(i+'; codecs="'+e+'"')}return $H(t,i,[],s,e)}(t,e?[e]:[],!s),h=qV(n,r);return t.preferredKeySystems&&(null==h?void 0:h.qgt)&&(h.qgt=sW(h.qgt,t.preferredKeySystems)),h}function $H(t,i,e,s,n){const r=i.map((t=>t.protection)).filter(Po);if(!r.length)return;const h=r[0].type,o=A(r,(t=>t.systems)),a=A(o,(t=>function(t,i){void 0===i&&(i=!0);const e=[],s=i?function(t){return vm.filter((i=>i.Cb===t.toLowerCase()))}(t.schemeId):function(t){return wm.filter((i=>i.Cb===t.toLowerCase()))}(t.schemeId);for(const i of s)e.push({xj:tq(t)?t.uri:void 0,cA:i,TP:void 0,MP:t.pssh?[Bn(t.pssh).buffer]:[]});return e}(t,n)));return{RO:t,Xgt:{fMt:h},qgt:a,_Mt:e,gMt:s}}function tq(t){return t.schemeId===u_.$v&&void 0!==t.keyFormat&&void 0!==t.keyFormatVersions}var iq,eq;function sq(t){const i=t.Mf,e=t.wf.Mv(i);return e?e.jn(0)-i:0}iq="Android"===i.Iv.Lv?200:300,function(t){t[t.Ibt=0]="Ibt",t[t.Ebt=1]="Ebt"}(eq||(eq={}));var nq=i.Ys.Ev?1:.5,rq=class{Cn(){1!==this.ja&&(this.ja=1,this.bbt=i.z$((()=>{this.Lbt()}),iq),this.kbt.hIt(this.xbt),this.hv.Ff?this.Cbt.yn(Zt.Rw,this.Obt):this.Obt())}y_(){0!==this.ja&&(this.ja=0,void 0!==this.bbt&&i.R$(this.bbt),this.kbt.aIt(this.xbt),this.Cbt.fn(Zt.Bw,this.jbt),this.Cbt.fn(Zt.Rw,this.Obt),this.Pbt=void 0,this.Jw())}get zbt(){return hq(this.Bbt.Nbt,this.Bbt.Sbt)}async Lbt(){await this.Rbt,this.Rbt=this.Ubt(),await this.Rbt}Qbt(t,i){const e=this.Fbt(t,i),s=this.kbt.wP;for(const t of e){if(t.Ybt<=s)return t}return e[e.length-1]}async Ubt(){var t,i;const e=null==(t=this.Bbt.Nbt)?void 0:t.Lt,s=null==(i=this.Bbt.Sbt)?void 0:i.Lt,n=this.Fbt(e,s);if(0===n.length)return void 0;const r=this.maybeSwitchToTargetQuality(n);if(r)return void await this.Gbt(r);const h=this.maybeGetUpSwitch(n);h&&await this.Gbt(h)}maybeSwitchToTargetQuality(t){const i=this.zbt;if(t.some((t=>oq(t,i))))return;const e=this.kbt.wP;for(const i of t){if(i.Ybt<=e)return i}return t[t.length-1]}maybeGetUpSwitch(t){var e,s;const n=this.kbt.wP;var r;var h;const o=(null!=(r=null==(e=this.Bbt.Nbt)?void 0:e.wP)?r:0)+(null!=(h=null==(s=this.Bbt.Sbt)?void 0:s.wP)?h:0);let a;for(const e of t){if(e.Ybt<n&&e.Ybt>o){a={Vbt:e,Tlt:i.Kd(),kM:0};break}}if(!this.Pbt||!oq(this.Pbt.Vbt,null==a?void 0:a.Vbt))return void(this.Pbt=a);const u=i.Kd()-this.Pbt.Tlt,c=this.Pbt.kM>3;if(u>1e3&&c){if(this.hv.vv._v||i.Ys.Dv){const t=2*this.kbt.vP;if(!(sq(this.hv)>t))return}else{const t=_.max(2*this.kbt.vP+nq,this.OP.Vw.minimumOffset);if(!(sq(this.hv)>t))return void(this.Wbt&&this.Wbt.minimumOffset===t||(this.Jw(),this.Wbt={minimumOffset:t},this.OP.Zw(this.Wbt)))}return this.Pbt.Vbt}}async Gbt(t){this.Pbt=void 0,this.Jw();const i=this.zbt;if(i.Hbt===t.Hbt&&i.qbt===t.qbt)return;const e=t.Hbt,s=t.qbt;i.qbt&&s&&i.qbt.wP>s.wP&&this.kbt.nIt(t.Ybt),await this.Bbt.Xbt(s,e)}Jw(){this.Wbt&&(this.OP.Jw(this.Wbt),this.Wbt=void 0)}Fbt(t,i){let e=[],s=[];var n;t&&(e=(null==(n=t.Dg)?void 0:n.length)?t.Dg:t.Ng.og);if(i){var r;const t=(null==(r=i.Dg)?void 0:r.length)?i.Dg:i.Ng.og,e=t.slice().sort(((t,i)=>t.wP-i.wP)),n=this.Zbt(e);0===n.length&&t.length>0&&n.push(md(t,(t=>t.wP))),s=n}const h=[],o=e.length>0?e:[void 0],a=s.length>0?s:[void 0];for(const t of o)for(const i of a)h.push(hq(t,i));return function(t){return t.sort(((t,i)=>i.Ybt-t.Ybt))}(h)}Zbt(t){for(let i=0;i<t.length;i++){const e=t[i].xEt;if(e.height>=this.hv.Ti&&e.width>=this.hv.ji)return t.slice(0,i+1)}return t.slice()}Ud(){this.Pbt=void 0,this.Cbt.tr(),this.Jw()}constructor(t,i,e,s,n){this.hv=t,this.OP=i,this.Bbt=e,this.Kbt=s,this.kbt=n,this.ja=0,this.Rbt=Promise.resolve(),this.Wbt=void 0,this.jbt=()=>{var t,i;if(this.Kbt.e_)return;const e=null==(t=this.Bbt.Nbt)?void 0:t.Lt,s=null==(i=this.Bbt.Sbt)?void 0:i.Lt,n=md(this.Fbt(e,s),(t=>t.Ybt));n&&(ha(this.Gbt(n)),this.hv.vv._v&&this.Kbt.Nv())},this.Obt=()=>{this.Cbt.yn(Zt.Bw,this.jbt),this.Cbt.fn(Zt.Rw,this.Obt)},this.xbt=()=>{if(this.Pbt){this.Pbt.kM+=1;const t=this.Pbt.Vbt.Ybt;this.kbt.wP<t&&(this.Pbt=void 0,this.Jw())}},this.Cbt=new at(this.hv)}};function hq(t,i){var e;var s;return{Hbt:t,qbt:i,Ybt:(null!=(e=null==t?void 0:t.wP)?e:0)+(null!=(s=null==i?void 0:i.wP)?s:0)}}function oq(t,i){var e,s,n,r;return void 0===t||void 0===i?t===i:(null==(e=t.Hbt)?void 0:e.o)===(null==(s=i.Hbt)?void 0:s.o)&&(null==(n=t.qbt)?void 0:n.o)===(null==(r=i.qbt)?void 0:r.o)&&t.Ybt===i.Ybt}var aq=class t{static async create(i,e,s){const n=await uq(i,e,s);return new t(n,i,e)}get KAt(){return(this.Jbt.serverTimeMs+(i.Kd()-this.Jbt.localTimeMs))/1e3}get $bt(){return(this.Jbt.localTimeMs-this.Jbt.serverTimeMs)/1e3}async iSt(t,i,e){for(;!e.zd;){await N(6e5,e);try{this.Jbt=await uq(t,i,e)}catch(t){yo(t)}}}Ud(){this.DC.qd()}constructor(t,i,e){this.DC=new Wr,this.Jbt=t,this.iSt(i,e,this.DC.Wd).catch(na)}};async function uq(t,i,e){let[s,n,r]=await cq(t,i,e);return n>20&&([s,n,r]=await cq(t,i,e)),{localTimeMs:s,serverTimeMs:r-n/2}}async function cq(t,e,s){const n=i.Kd(),r=await e.LS({gI:yt.GET,zu:t,Wd:s}),h=i.Kd()-n,o=await r.bI(s);return[n,h,1e3*Number(o)]}var lq,dq=class extends wn{constructor(){super("seek")}};(lq||(lq={})).AR="seek";var fq=[Co.jh,Zt.H_,Co.Iw],_q=class extends Bo{get zv(){return this.REt}get wf(){return this.tLt&&this.iLt?this.tLt.wf.Sn(this.iLt.wf):this.tLt?this.tLt.wf:this.iLt?this.iLt.wf:Ai.kB()}get Nbt(){return this.eLt}get Sbt(){return this.sLt}get ht(){return this.fT}get rt(){return this.gT}get nLt(){return this.rLt.tL}get W(){return this.hLt.tL}get t_(){return this.REt?function(t,i,e){var s;const n=null==(s=t.tbt[0])?void 0:s.Mf,r=t.WEt;if(void 0===n||void 0===r)return e>0&&e<jh?new Ai([0,e],[!0,!0]):Ai.kB();let h=i.gIt;if(!h){const i=CY(t.qEt).getTime()/1e3;h=n+(Date.now()/1e3-i)}return new Ai([h-r,h],[!0,!0])}(this.REt,this.oLt,this.hv.ct):Ai.kB()}async aLt(){this.tLt&&await this.tLt.bT(0,1/0),this.iLt&&await this.iLt.bT(0,1/0)}$n(){if(!this.bc.src)throw new Rs(Ui.SOURCE_INVALID,"No src property found in given source.");this.iwt||(this.iwt=this.Mit(this.xI.Wd).catch(this.j4))}async Mit(t){this.Co(new sk);const i=this.bc.src,e=await this.uLt.mSt(i,t);this.REt=new YH(i,e),this.REt.hbt&&(this.cLt=await aq.create(this.REt.hbt,this.EI,t)),this.lLt();const s=this.REt.tbt[this.REt.tbt.length-1];this.createTracksForPresentation(s),this.rLt.Zb(),this.mbt()}Tbt(t){for(const i of this.fT.og)i.zT(i===t)}Dbt(t){for(const i of this.gT.og)i.zT(i===t)}mbt(){const t=Vt(this.fT.og,(t=>t.Rt)),i=Vt(this.gT.og,(t=>t.Rt)),e=this.QB.Qbt(t,i);ha(this.Xbt(e.qbt,e.Hbt))}lLt(){if(!this.REt||"live"!==this.REt.fZ||!this.cLt)return;const t=this.REt.tbt.filter((t=>t.o===this.REt.ebt))[0].Mf,i=this.cLt.$bt+new Date(this.REt.qEt).getTime()/1e3;this.oLt.fIt(i,t)}createTracksForPresentation(t){var i,e,s,n;for(const i of null!=(s=t.FEt)?s:[])this.fT.tt(new ZH(i,this));for(const i of null!=(n=t.GEt)?n:[])this.gT.tt(new KH(i,this));null==(i=this.fT.cg(0))||i.zT(!0),null==(e=this.gT.cg(0))||e.zT(!0)}get Ov(){return this.dLt}get ySt(){const t=this.oLt.gIt;if(void 0!==t)return t}Cn(){this.fLt=!0,this._Lt()}y_(){var t;this.fLt=!1,this.gLt().catch(this.j4),"live"===(null==(t=this.zv)?void 0:t.fZ)&&(this.wLt(),this.vLt())}wLt(){this.ALt&&this.ALt.cancelDownload()}vLt(){this.mLt&&this.mLt.cancelDownload()}Nv(t){this.q2.qd(),this.q2=new Wr,this.X2=this.pLt(t,this.X2,this.q2.Wd).catch(this.j4),this.Co(new dq)}async pLt(t,i,e){if(i&&await i,await Ys(this.W,e),"live"!==this.REt.fZ)throw new g("The current video source does not support Live playback.");if(fo(e),await this.gLt(),fo(e),this.ALt&&(this.ALt.tEt()||this.ALt.ZIt!==(null!=t?t:"now"))){var s;if(this.wLt(),this.tLt){for(;this.tLt.TIt;)await Ys(this.tLt.DIt,e);await this.tLt.bT(0,1/0)}null==(s=this.ALt)||s.Em(null!=t?t:"now")}if(this.mLt&&(this.mLt.tEt()||this.mLt.ZIt!==(null!=t?t:"now"))){var n;if(this.vLt(),this.iLt){for(;this.iLt.TIt;)await Ys(this.iLt.DIt,e);await this.iLt.bT(0,1/0)}null==(n=this.mLt)||n.Em(null!=t?t:"now")}fo(e),this.X2=void 0,this._Lt()}Em(t){this.q2.qd(),this.q2=new Wr,this.X2=this.Z2(t,this.X2,this.q2.Wd).catch(this.j4),this.Co(new dq)}async Z2(t,i,e){var s,n;i&&await i,await Ys(this.W,e),fo(e),await this.gLt(),fo(e),this.ALt&&(this.ALt.tEt()||this.ALt.ZIt!==t)&&this.wLt(),this.mLt&&(this.mLt.tEt()||this.mLt.ZIt!==t)&&this.vLt(),fo(e),null==(s=this.ALt)||s.Em(t),null==(n=this.mLt)||n.Em(t),this.X2=void 0,this._Lt()}Xbt(t,i){var e,s;return(null==(e=this.ALt)?void 0:e.Zrt)===i&&(null==(s=this.mLt)?void 0:s.Zrt)===t?Promise.resolve():(this.yLt.qd(),this.yLt=new Wr,this.MLt=this.TLt(t,i,this.MLt,this.yLt.Wd).catch(this.j4),this.MLt)}async TLt(t,i,e,s){e&&await e,await Ys(this.rLt.tL,s),fo(s),await this.gLt(),fo(s),await this.NLt(t,i),await this.DLt(t,i),fo(s),this.MLt=void 0,this._Lt()}async NLt(t,i){var e,s,n;const r=null!=(n=this.ySt)?n:"now";if((null==(e=this.ALt)?void 0:e.Zrt)!==i){var h;const t=this.ALt&&!this.ALt.tEt(),e=null==(h=this.ALt)?void 0:h.ZIt;if(this.ALt&&(await this.ALt.Ud(),this.ALt=void 0),this.tLt&&await this.tLt.DIt,i){var o,a;const s=null!=(a=null==(o=this.tLt)?void 0:o.wf)?a:Ai.kB(),n=t?e:s.jn(s.U-1);this.ALt=new SH(i,this.EI,this.Yut),this.ALt.Em(null!=n?n:r)}}if((null==(s=this.mLt)?void 0:s.Zrt)!==t){var u;const i=this.mLt&&!this.mLt.tEt(),e=null==(u=this.mLt)?void 0:u.ZIt;if(this.mLt&&(await this.mLt.Ud(),this.mLt=void 0),this.iLt&&await this.iLt.DIt,t){var c,l;const s=null!=(l=null==(c=this.iLt)?void 0:c.wf)?l:Ai.kB(),n=i?e:s.jn(s.U-1);this.mLt=new SH(t,this.EI,this.Yut),this.mLt.yn(Vc.OIt,this.Ds),this.mLt.Em(null!=n?n:r)}}}async DLt(t,i){const e=function(t,i,e,s,n){const r=JH(t,null==i?void 0:i.Lt.pEt.pEt,null==e?void 0:e.Lt.pEt.pEt,s),h=tW(r),o=[];i&&o.push({HP:i.zF});e&&o.push({HP:e.zF});return{Rg:Au.KC,u0:o,qP:h,p0:n&&!s}}(this.bc.contentProtection,i,t,this.hv.vv._v,this.bc.useManagedMediaSource);if(this.FP&&this.FP.mq(e)){var s,n;const t=!(null==(s=this.ALt)?void 0:s.tEt());if(this.tLt&&t){for(;this.tLt.TIt;)await this.tLt.DIt;await this.tLt.KF()}const i=!(null==(n=this.mLt)?void 0:n.tEt());if(this.iLt&&i){for(var r,h;null==(r=this.iLt)?void 0:r.TIt;)await this.iLt.DIt;await(null==(h=this.iLt)?void 0:h.KF())}await this.FP.yq(e)}else{this.wLt(),this.vLt(),this.tLt&&(await this.tLt.Ud(),this.tLt=void 0),this.iLt&&(await this.iLt.Ud(),this.iLt=void 0),this.hv.n5();try{await this.hv.tr(),this.FP=await this.hv.$n(e),this.hLt.Zb(),this.FP.X$&&this.ALt&&(this.FP.X$.yn(Bi.cq,this.Ds),this.tLt=new dH(this.FP.X$,this.hv,i,this.SLt)),this.FP.Z$&&this.mLt&&(this.FP.Z$.yn(Bi.cq,this.Ds),this.iLt=new dH(this.FP.Z$,this.hv,t,this.SLt)),"live"===this.REt.fZ&&this.FP.n0(1/0)}finally{this.hv.r5()}}}_Lt(){!this.fLt||this.X2||this.MLt||this.ILt||this.ELt||(this.QB.Cn(),this.bLt=new Wr,this.mLt&&this.iLt&&(this.ILt=this.LLt(this.mLt,this.iLt,this.bLt.Wd).catch(this.j4)),this.ALt&&this.tLt&&(this.ELt=this.LLt(this.ALt,this.tLt,this.bLt.Wd).catch(this.j4)))}async gLt(){this.QB.y_(),this.bLt&&(this.bLt.qd(),this.bLt=void 0),this.ILt&&(await this.ILt,this.ILt=void 0),this.ELt&&(await this.ELt,this.ELt=void 0)}async LLt(t,e,s){for(await this.W;t.TIt;)await Ys(t.DIt,s);for(;e.TIt;)await Ys(e.DIt,s);if(!t.tEt()){const s=i.Kd()/1e3,n="now"===t.ZIt,{initialization:r,data:h,metadata:o}=await t.iEt(),a={Rg:G.dq,zm:r},u=h?{Rg:G.dq,zm:h}:void 0,c=e.wf;!i.Ys.tit&&!this.hv.vv._v&&o&&c.jn(c.U-1)>o.a9&&await e.bT(o.a9,1/0),await e.yJ(a),u&&await e.AJ(u,o,t.Zrt);const l=e.wf.wB(c);n&&l.U>0&&this.oLt.lIt(s,l.jn(l.U-1))}for(;!t.XIt;){fo(s);const i=t.aEt();await Ys(e.appendStream(i,t),s)}}async Ud(){this.xI.qd(),this.iwt&&await this.iwt.catch(na),this.X2&&(this.q2.qd(),this.wLt(),this.vLt(),await this.X2.catch(na)),this.MLt&&(this.yLt.qd(),this.wLt(),this.vLt(),await this.MLt.catch(na)),await this.gLt(),this.ALt&&await this.ALt.Ud(),this.mLt&&await this.mLt.Ud(),this.ALt=void 0,this.mLt=void 0,this.hLt.qd(),this.rLt.qd(),this.FP&&(await this.hv.tr(),this.FP=void 0),this.tLt=void 0,this.iLt=void 0,this.hv.fn(Zt.Rw,this.fv),this.hv.fn(fq,this.updateActiveQualities),this.fT.tr(),this.eLt=void 0,this.gT.tr(),this.sLt=void 0,this.REt=void 0,this.cLt&&(this.cLt.Ud(),this.cLt=void 0),this.fLt=!1}constructor(t,i,e,s,n,r,h,o,a,u){super(),this.fLt=!1,this.kLt=!1,this.fT=new wo,this.gT=new wo,this.xLt=void 0,this.eLt=void 0,this.sLt=void 0,this.rLt=new ue,this.FP=void 0,this.iwt=void 0,this.hLt=new ue,this.xI=new Wr,this.MLt=void 0,this.yLt=new Wr,this.X2=void 0,this.q2=new Wr,this.ALt=void 0,this.tLt=void 0,this.ELt=void 0,this.mLt=void 0,this.iLt=void 0,this.ILt=void 0,this.bLt=void 0,this.fv=()=>{this.kLt=!0},this.updateActiveQualities=()=>{var t,i;const e=this.hv.Mf,s=null==(t=this.tLt)?void 0:t.pIt(e),n=null==(i=this.iLt)?void 0:i.pIt(e);if(this.eLt!==s&&(this.eLt=s,s))for(const t of this.fT.og)t.Mbt(s);if(this.sLt!==n&&(this.sLt=n,n))for(const t of this.gT.og)t.Mbt(n)},this.CLt=t=>{const i=t.data;if(i.Rg===Is.zIt){const{RIt:t,UIt:s,BIt:n,QIt:r}=i;if(this.cLt){const i=this.cLt.KAt,e=this.hv.Mf;this.kLt&&0!==e&&(this.dLt={theolive:i-t+n-e,engine:s,distribution:i-(t+s),player:n-e},this.oLt.fIt(this.cLt.$bt+t,n))}var e;if(r)this.xLt||(this.xLt=this.hv.DI(Mi.Dm,"timecode","timecode",void 0,!1,Wt.DEFAULT,!1,void 0)),this.xLt.kI(new je(n,n,r,!1,void 0)),xh(this.xLt,null!=(e=this.hv.wf.Cn(0))?e:-1)}},this.j4=t=>{ut(t)||(this.y_(),this.Co(new Eo(new Rs(Ui.MEDIA_LOAD_ERROR,t.message))))},this.bc=t,this.uLt=i,this.hv=e,this.EI=n,this.oLt=r,this.QB=new rq(e,h,this,a,s),this.Yut=o,this.SLt=u,this.yn(Vc.OIt,this.CLt),this.hv.yn(Zt.Rw,this.fv),this.hv.yn(fq,this.updateActiveQualities)}};var gq=[Co.mw,Co.Iw,Co.Jg,Co.ww,Co.Ew,Co.Xg,Co.ew,Co.$g],wq=class extends Bo{vg(){this.hv.yn(gq,this.Ds),this.hv.yn(Zt.Rw,this.pU),this.hv.yn([Co.jh,Co.Sh],this.OLt),this.hv.yn(Nt.ha,this.jLt),this.rz.yn(Ls,this.Ds)}gg(){this.hv.fn(gq,this.Ds),this.hv.fn(Zt.Rw,this.pU),this.hv.fn([Co.jh,Co.Sh],this.OLt),this.hv.fn(Nt.ha,this.jLt),this.rz.fn(Ls,this.Ds)}get ht(){return this.fT}get rt(){return this.gT}get zv(){var t,i;return null==(i=this.Bbt)||null==(t=i.zv)?void 0:t.zv}get c_(){return this.hv.c_}set c_(t){this.hv.c_=t}get g_(){return!1}set g_(t){}get VP(){return this.WP}M_(){return!1}w_(){return this.hv.ya}be(){this.hv.be()}ge(){return this.hv.ge()}D_(){}S_(){}T_(){}N_(){}get zf(){return this.hv.zf}set zf(t){this.hv.zf=t}get Mf(){var t;return null!=(t=this.PLt)?t:this.hv.Mf}set Mf(t){this.Nf(t)}Nf(t,i){this.q2.qd(),this.q2=new Wr,this.X2=this.Z2(t,this.q2.Wd,this.X2)}get Af(){const t=this.zLt();if(t)return new Date(t.getTime()+1e3*this.Mf)}set Af(t){const i=this.zLt();t&&i&&(this.Mf=i.getTime()-t.getTime())}zLt(){const t=this.zv;if(!t)return;const i=new Date(t.creationDate).getTime();let e=NaN;for(const i of t.presentations)i.currentTime&&(e=i.currentTime.value/(i.currentTime.scale||1)*1e3);return S(e)?void 0:new Date(i-e)}get bt(){return this.bc}get Gf(){return this.hv.Gf}set Gf(t){this.hv.Gf=t}get ct(){const t=this.hv.ct;return t===jh?1/0:t}get Sf(){return!1}get bf(){return this.RP}get lt(){return this.BP}get kf(){return this.BLt}get Cf(){return!1}get jf(){return Yt({},{vT:0,AT:0,mT:0,pT:0,yT:0,MT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.hv.Pf())}get Uf(){return!0}get e_(){return this.CB}get YP(){}get nt(){return this.Dl}get r_(){return this.hv.r_}get a_(){return this.hv.a_}get wf(){return this._Tt.ks()}get _Tt(){return this.Bbt?this.Bbt.wf:Ai.kB()}get Hf(){return this.hv.Hf.ks()}get t_(){var t,i;return null!=(i=null==(t=this.Bbt)?void 0:t.t_.ks())?i:Ai.kB().ks()}get Ff(){return this.O9}get Pv(){return!0}get f_(){return this.FB}get MSt(){return this.OP?lu(this.OP.Vw):null!=(i=this.TSt)?i:lu(null!=(t=this.RLt)?t:dr());var t,i}get TSt(){if(!this.OP)return this.ULt;const t=this.OP.Hw;return t?lu(t):void 0}set TSt(t){this.OP?this.OP.Hw=t?Mf(t):void 0:this.ULt=t}get ySt(){var t;return null==(t=this.Bbt)?void 0:t.ySt}get yv(){if(this.Ff)return;if(!this.kLt)return;const t=this.Mf,i=this.oLt.wIt(t);if(void 0===i)return;const e=this._Tt;let s=0;if(e.U>0){const i=e.jn(e.U-1);s=_.max(i-t,0)}return _.max(i,s)}get Ov(){var t;return null==(t=this.Bbt)?void 0:t.Ov}get Jf(){return this.hv.Jf}get Xf(){return this.QLt}set Xf(t){this.QLt=t,this.FLt()}async FLt(){this.QLt!==Le.Vz&&this.Bbt&&(this.Bbt.$n(),this.QLt!==Le.eT&&this.QLt!==Le.gP||(await this.Bbt.nLt,"vod"===this.Bbt.zv.fZ&&this.Bbt.Cn()))}async ga(t,i,e){if(fo(e),await this.tr(),fo(e),!Aw(t))return this.RP=new Rs(Ui.SOURCE_INVALID,"HESP source incorrectly configured"),this.BP=tn(this.RP),this.YLt(this.RP),Promise.resolve();const s=t;this.bc=s;const n=new tH(this.EI);this.RLt=this.GLt(t),this.OP=new Tf(this,this.hv,this.RLt),this.OP.Rt=!0,this.OP.yn("latencyrecoveryseek",this.Ds),this.ULt=void 0,this.f_.ka(this.OP),this.Bbt=new _q(s,n,this.hv,this.WP,this.EI,this.oLt,this.OP,this.Yut,this,this.SLt),this.Bbt.yn(Co.cw,this.Ds),this.Bbt.yn(Nt.ha,this.VLt),this.fT.fg=this.Bbt.ht,this.gT.fg=this.Bbt.rt,this.JP.mP(t.contentProtection),ha(this.FLt())}GLt(t){return t.latencyConfiguration?t.latencyConfiguration:this.ULt?Mf(this.ULt):dr()}async p_(){var t;if(!this.Bbt)return;this.O9=!1,this.Bbt.$n(),await this.Bbt.W,this.Co(new Gt(this.Mf));const i=this.Bbt.lf(lq.AR);this.Nv(),await i,this.Bbt.Cn(),await this.hv.p_(),null==(t=this.OP)||t.Cn()}m_(){var t;this.Bbt&&(this.O9=!0,this.Co(new hs(this.Mf)),this.Bbt.y_(),null==(t=this.OP)||t.y_(),this.hv.m_())}Nv(){if(this.VNt)throw new g("Cannot seek while resetting");this.q2.qd(),this.q2=new Wr,this.X2=this.pLt(this.X2,this.q2.Wd)}WLt(){var t;null==(t=this.Bbt)||t.y_()}YLt(t){this.Co(new Eo(t)),this.WLt()}async Z2(t,i,e){var s;if(this.VNt)throw new g("Cannot seek while resetting");let n=t;if(this.HLt(n),this.t_.length>0&&(n=Ai.xn(this.t_).uB(n),this.HLt(n)),this.Bbt){e&&(await e.catch(na),fo(i)),(null==(s=this.OP)?void 0:s.Gw)&&this.OP.y_();try{const t=this.hv.lf(Co.pw,i);this.hv.Em(n),this.Bbt.Em(n),await t}catch(t){throw yo(t),this.Bbt.y_(),this.qLt(),t}this.XLt()}}async pLt(t,i){this.Co(new wn("golive"));const e=this.ySt;if(this.HLt(e),this.Bbt){t&&(await t.catch(na),fo(i));try{const t=this.OP.Vw.targetOffset;let s;if(await this.Bbt.nLt,s=e&&t>=1?e-(t-.4):this.ySt?this.ySt-.2:void 0,this.Bbt.Nv(s),this._Tt.U>0)for(;this._Tt.U>0;)await this.Bbt.lf(Bi.cq,i);const n=this._Tt;for(;0===this._Tt.wB(n).U;)await this.Bbt.lf(Bi.cq,i);s=this._Tt.Cn(this._Tt.U-1),s=this.ZLt(s),this.HLt(s);const r=this.hv.lf(Co.pw,i);this.hv.Em(s,!0),await r}catch(t){var s;if(ut(t))throw null==(s=this.OP)||s.Cn(),t;throw this.Bbt.y_(),await this.Bbt.aLt(),this.qLt(),t}this.XLt()}}HLt(t){this.CB=!0,this.PLt=t,this.Co(new ri(this.Mf))}XLt(){this.CB&&(this.PLt=void 0,this.CB=!1,this.Co(new yi(this.Mf)))}qLt(){this.PLt=void 0,this.CB=!1}ZLt(t){return t}async WNt(t,i,e){var s;fo(e),t&&await t.catch(na),i&&await i.catch(na),await this.SLt.tr(),null==(s=this.OP)||s.y_(),this.Bbt&&(await this.Bbt.Ud(),this.Bbt=void 0),fo(e),await this.hv.tr(),fo(e),this.hv.nz(),this.gT.tr(),this.fT.tr(),this.qLt(),this.rz.tr(),this.oLt.tr(),this.RP=void 0,this.BP=void 0,this.O9=!0,this.kLt=!1,this.bc=void 0,this.VNt=void 0,this.RLt=void 0}tr(){return this.q2.qd(),this.q2=new Wr,this.KLt.qd(),this.KLt=new Wr,this.VNt=this.WNt(this.X2,this.VNt,this.KLt.Wd),this.VNt}async gn(){var t,i;this.gg(),this.rz.gn(),this.bc&&await this.tr(),this.Vo(),this.hv.lz=void 0,null==(t=this.OP)||t.fn("latencyrecoveryseek",this.Ds),null==(i=this.OP)||i.Ud(),await this.SLt.gn(),this.Dl.gn(),this.fT.gn(),this.gT.gn()}constructor(t,i,e,s,n){super(),this.Bbt=void 0,this.CB=!1,this.q2=new Wr,this.X2=void 0,this.VNt=void 0,this.KLt=new Wr,this.O9=!0,this.kLt=!1,this.fT=new vo,this.gT=new vo,this.RP=void 0,this.BP=void 0,this.QLt=Le.Vz,this.OLt=()=>{this.hv.Ff!==this.O9&&(this.hv.Ff?this.m_():this.p_().catch(na))},this.pU=()=>{this.kLt=!0},this.VLt=t=>{this.RP=t.errorObject,this.BP=tn(this.RP),this.YLt(this.RP)},this.jLt=t=>{this.RP=Bw(t.lt),this.BP=t.lt,this.YLt(this.RP)},this.hv=t,this.rz=new at(this.hv,!0),this.EI=i,this.WP=new uH(e.zW,e.mW.vP),this.JP=new jr(i),this.hv.lz=this.JP,this.SLt=new pn(this.hv),this.Dl=new ms([this.hv.nt,this.SLt.Z]),this.oLt=new cH,this.BLt=new iH(this),this.FB=s,this.Yut=n.retryConfiguration,this.vg()}},vq=class extends wq{v_(){if(rU(this.hv))return this.hv.v_()}async tr(){this.JLt=!1,await super.tr()}async gn(){h.removeEventListener("visibilitychange",this.$Lt),await super.gn(),await this.hv.Ud(),await this._z.fz(this.tkt)}ZLt(t){return f.ZE&&f.JE>=15&&f.hE?t+.25:t}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this.JLt=!1,this.$Lt=()=>{const t=this.zf||0===this.c_;"hidden"===h.visibilityState&&!this.Ff&&t?(this.m_(),this.JLt=!0):"visible"===h.visibilityState&&this.JLt&&(ha(this.p_()),this.JLt=!1)},this._z=n,this.tkt=t,h.addEventListener("visibilitychange",this.$Lt)}},Aq=class{get Cz(){return Ca.Zv}async kz(t,i){return function(t){if(!t)return!1;const i=t.toLowerCase();return D(i,rs.Xv)||D(i,rs.Zv)}(t.type)}};ct(new class extends Aq{dA(t,i,e,s,n,r,h){const o=new vU(i),a=o.Lz(fi.ym);return new vq(a,e,n,r,o,s)}kz(t,i){return as(t.useManagedMediaSource)?super.kz(t,i):Promise.resolve(!1)}xz(){return!1}});var mq=class extends wq{v_(){if(rU(this.hv))return this.hv.v_()}async gn(){await super.gn(),await this._z.fz(this.hv)}constructor(t,i,e,s,n,r){super(t,i,e,s,r),this._z=n}};f.ZE&&f.Ga&&ct(new class extends Aq{get Cz(){return Ca._P}async kz(t,i){var e,s;const n=await super.kz(t,i);var r;if(null==(r=null==(s=Gh())||null==(e=s.canPlayType)?void 0:e.call(s,rs.Wv))||!r||!n||!("serviceWorker"in Dl))return!1;try{const t=Dl.serviceWorker.ready;return await Bd(t,1e3),!0}catch(t){return!1}}dA(t,i,e,s,n,r,h){if(t instanceof HTMLDivElement){const t=i.Det(fi.ym);return new mq(t,e,n,r,i,s)}throw new Rs(Ui.CONFIGURATION_ERROR,"Container Div element expected.")}xz(){return!1}});var pq="theo_live_user_id",yq=class{incrementSequenceNumber(){this.Ik+=1}get sequenceNumber(){return this.Ik}constructor(t){this.externalId=t,this.id=cr(),this.userId=Mq(),this.Ik=0}};function Mq(){try{const t=localStorage.getItem(pq);if(t)return t;const i=cr();return localStorage.setItem(pq,i),i}catch(t){return cr()}}var Tq=class{agt(t){const i=this.ikt.get(t.id);if(i)return i;const e=new Nq(t,this.EI,this.ekt);return this.ikt.set(t.id,e),e}constructor(t,i){this.EI=t,this.ikt=new Map,this.ekt=i}},Nq=class{get skt(){return _r()-this.nkt>36e5}Yn(){this.rkt=!1,this.nkt=_r(),this.hkt=this.Wyt(),this.hkt.catch((()=>this.rkt=!0))}async Wyt(){const{id:t,discovery:e}=this.CT;if(Ss(e.pathname,"manifest.json"))return function(t){return{id:{id:t.id,discovery:i.Dh("dev://")},name:"demo",mode:"demo",status:"playing",source:{src:t.id,type:"theo.live"},customization:{autoplay:!0}}}(this.CT);const s=await this.okt(this.CT,this.akt);if(!s)throw new Sq(t);const{mode:n,status:r,fallback:h,metadata:o}=s;if("locked"===n)throw new Iq(t);if("deleted"===r)throw new Eq(t);return{id:this.CT,name:o.name,mode:n,status:r,source:bq(s),fallback:h?await this.ukt(h,e,this.akt):void 0,insights:null==o?void 0:o.insights,enhancedLogging:null==o?void 0:o.enhancedLogging,customization:null==o?void 0:o.customization}}async ukt(t,i,e){if("theo.live"!==t.type)return{src:t.src,type:t.type};const s={id:t.src,discovery:i},n=await this.okt(s,e);return n?bq(n):void 0}async okt(t,e){let{id:s,discovery:n}=t;try{const t=await this.EI.LS({zu:i.Dh(s,n.toString()).toString(),_I:e});return await t.ZO()}catch(t){return}}get F6(){return(this.rkt||this.skt)&&this.Yn(),this.hkt}constructor(t,i,e){this.CT=t,this.EI=i,this.akt=new Z,e.discoveryHeader&&this.akt.append("x-theolive-discovery",e.discoveryHeader),this.Yn()}};var Dq=class extends Rs{constructor(t,i,e){super(t,"Could not load channel with id "+i+": "+e),this.channelId=i,this.reason=e}},Sq=class extends Dq{constructor(t){super(Ui.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel could not be found")}},Iq=class extends Dq{constructor(t){super(Ui.THEO_LIVE_CHANNEL_NOT_FOUND,t,"This account has been locked")}},Eq=class extends Dq{constructor(t){super(Ui.THEO_LIVE_CHANNEL_NOT_FOUND,t,"The channel got deleted")}};function bq(t){var i;return{src:t.hespSrc,type:"theo.live",targetLatency:null==(i=t.metadata.customization)?void 0:i.targetLatency,contentProtection:t.drmConfig?Lq(t.drmConfig):void 0}}function Lq(t){const{integration:i,widevine:e,playready:s,fairplay:n}=t;return Yt({integration:i},e&&{widevine:{licenseAcquisitionURL:e.licenseUrl}},s&&{playready:{licenseAcquisitionURL:s.licenseUrl}},n&&{fairplay:{licenseAcquisitionURL:n.licenseUrl,certificateURL:n.certificateUrl}})}function kq(t,e){return{id:t,discovery:i.Dh(t,e)}}function Hc(t,e){const s=i.Dh(t),n=cr();return s.searchParams.append("CMCD","rid="+n+"&sid="+e.id),s.searchParams.append("userId",e.userId),e.externalId&&s.searchParams.append("externalSessionId",e.externalId),s.href}var xq=class{get ckt(){return this.amountOfSamples>0?this.currentAverage:0}get lkt(){return this.dkt}fkt(t){this._kt=!0,this.currentAverage=this.currentAverage+(t-this.currentAverage)/(this.amountOfSamples+1),this.amountOfSamples+=1,this.dkt=_.min(this.lkt,t)}constructor(){this._kt=!1,this.amountOfSamples=0,this.currentAverage=0,this.dkt=1/0}},vl=class{fkt(t){this.gkt+=1,this.wkt=_.min(this.wkt,t),this.vkt=_.max(this.vkt,t),this.Akt+=(t-this.Akt)/this.gkt,this.mkt=t}pkt(){if(0!==this.gkt)return{weight:this.gkt,minimum:_.round(this.wkt),average:_.round(this.Akt)}}ykt(){if(0!==this.gkt)return{weight:this.gkt,minimum:_.round(this.wkt),average:_.round(this.Akt),latest:_.round(this.mkt)}}Mkt(){if(0!==this.gkt)return{weight:this.gkt,maximum:_.round(this.vkt),average:_.round(this.Akt)}}constructor(){this.gkt=0,this.wkt=1/0,this.vkt=0,this.Akt=0,this.mkt=0}},Cq=class extends Rs{constructor(){super(Ui.THEO_LIVE_ANALYTICS_ERROR,"Illegal configuration: unexpected property analyticsEnabled")}},Oq=class{Ta(t){var e,s,n;const r={state:t,width:this.Qo.we.clientWidth,height:this.Qo.we.clientHeight,activeQuality:null!=(n=null==(s=this.Qo.rt.cg(0))||null==(e=s.yg)?void 0:e.wP)?n:-1,time:i.Kd()};this.ja&&function(t,i){return t.state===i.state&&t.activeQuality===i.activeQuality&&t.height===i.height&&t.width===i.width}(this.ja,r)||(this.ja=r,this.Tkt("statechange",r))}Nkt(t){var e,s;this.Ta("loading");const n=Ss(i.Dh(t.source.src).host,"fastly.net");if(!this.Dkt()&&!n)throw new Cq;var r,h;this.Skt=t,this.Ikt=!1,this.kLt=!1,this.Ekt=-1/0,this.bkt({type:"session",channelId:t.id.id,channelStatus:t.status,sessionId:this.Lkt.id,externalSessionId:this.Lkt.externalId,backup:null==(e=t.fallback)?void 0:e.src,autoplay:null!=(r=null==(s=t.customization)?void 0:s.autoplay)&&r,userAgent:Dl.userAgent,clientVersion:"8.2.0",clientType:"theoplayer"}),this.Tkt("loadchannel",{targetLatency:null!=(h=t.source.targetLatency)?h:0})}Cn(){if(!this.kkt){var t,e;this.kkt=!0,this.Qo.yn(Nt.ha,this.xkt),this.Qo.yn(Co.Ew,this.Ckt),this.Qo.rt.yn(Ud.L_,this.Okt),this.Qo.yn(Co.ww,this.jkt),this.Qo.yn(Zt.Rw,this.y9),this.Qo.yn(Co.Sh,this.N9),this.Qo.yn(Co.jh,this.T9),this.Qo.kf.yn("golive",this.Pkt),this.Qo.kf.yn("latencyrecoveryseek",this.zkt),this.Qo.yn(Zt.Bw,this.Bkt),this.Qo.yn(Co.Iw,this.Rkt),this.Qo.yn(ii.pn,this.Ukt),this.Qo.PU.cW(this.Qkt),null==(t=this.Qo.Oc)||t.yn(["stt","ett","ntt","htt","Fkt"],this.Ykt),null==(e=this.Qo.Oc)||e.yn("Gkt",this.Vkt),s.addEventListener("beforeunload",this.Wkt),h.addEventListener("visibilitychange",this.Hkt),this.Tkt("visibilitychange",{visibility:h.visibilityState});const n=this.Qo.we;this.Tkt("dimensionchange",{width:n.clientWidth,height:n.clientHeight}),this.qkt=i.Kd(),this.Xkt=i.z$((()=>{const t=this.Zkt();this.bkt(t)}),3e4),this.Kkt=i.z$((()=>{this.Jkt()}),5e3),this.$kt=i.z$((()=>{this.txt.push(this.Qo.PU.mW.wP)}),100)}}y_(){if(this.ixt.length>0){const t=this.Zkt();this.bkt(t)}var t,e,n;(this.ixt=[],this.ext=[],this.sxt=[],this.kkt)&&(this.kkt=!1,this.Qo.fn(Nt.ha,this.xkt),this.Qo.fn(Co.Ew,this.Ckt),this.Qo.rt.fn(Ud.L_,this.Okt),null==(t=this.Qo.rt.cg(0))||t.fn(qt.J_,this.nxt),this.Qo.fn(Co.ww,this.jkt),this.Qo.fn(Zt.Rw,this.y9),this.Qo.fn(Co.Sh,this.N9),this.Qo.fn(Co.jh,this.T9),this.Qo.kf.fn("golive",this.Pkt),this.Qo.kf.fn("latencyrecoveryseek",this.zkt),this.Qo.fn(Zt.Bw,this.Bkt),this.Qo.fn(Co.Iw,this.Rkt),this.Qo.fn(ii.pn,this.Ukt),this.Qo.PU.fW(this.Qkt),null==(e=this.Qo.Oc)||e.fn(["stt","ett","ntt","htt","Fkt"],this.Ykt),null==(n=this.Qo.Oc)||n.fn("Gkt",this.Vkt),s.removeEventListener("beforeunload",this.Wkt),h.removeEventListener("visibilitychange",this.Hkt),i.R$(this.Xkt),i.R$(this.Kkt),i.R$(this.$kt))}rxt(){this.Tkt("intenttofallback")}hxt(){this.Tkt("fallback")}Jkt(){var t;const i=this.Qo.vf();if(i.length){const t=i.end(i.length-1)-this.Qo.Tf();this.ext.push(t)}this.sxt.push(this.Qo.PU.mW.wP);const e=null==(t=this.Qo.kf)?void 0:t.yv;void 0===e||this.Qo.Ff||(this.oxt=_.min(this.oxt,e),this.axt=_.max(this.axt,e),this.uxt.fkt(e))}cxt(t){var e;this.txt.sort(((t,i)=>t-i));const s=null!=(e=this.txt[0])?e:0;var n;const r=null!=(n=this.txt[_.round(.05*this.txt.length)])?n:0;var h;const o=null!=(h=this.txt[_.round(.25*this.txt.length)])?h:0;var a;const u=null!=(a=this.txt[_.round(.5*this.txt.length)])?a:0;var c;const l=null!=(c=this.txt[_.round(.75*this.txt.length)])?c:0;var d;const f=null!=(d=this.txt[_.round(.95*this.txt.length)])?d:0;var g;const w=null!=(g=this.txt[this.txt.length-1])?g:0,v=i.Kd();var A;const m=(v-(null!=(A=this.qkt)?A:0))/1e3;return this.txt.length=0,this.qkt=v,{activeQuality:t.wP,duration:m,min:s,p5:r,p25:o,median:u,p75:l,p95:f,max:w}}Zkt(){var t,i,e;this.Tkt("beacon",{activeQuality:null==(i=this.Qo.rt.cg(0))||null==(t=i.yg)?void 0:t.wP,averageLatency:this.uxt.ckt,minLatency:this.oxt,maxLatency:this.axt}),this.uxt=new xq,this.oxt=1/0,this.axt=-1/0;const s=null==(e=this.Qo.rt.cg(0))?void 0:e.yg;if(s){const t=this.cxt(s);this.Tkt("bandwidth-distribution",t)}const n=this.ixt.slice(0),r=_.round(this.sxt.reduce(((t,i)=>t+i),0)/_.max(this.sxt.length,1)),h=this.ext.reduce(((t,i)=>t+i),0)/_.max(this.ext.length,1);return this.sxt=[],this.ext=[],this.ixt.splice(0),{type:"events",channelId:this.Skt.id.id,userId:this.Lkt.userId,currentTime:_r()/1e3,latency:this.Qo.kf.yv,paused:this.Qo.Ff,events:n,rtt:_.round(1e3*this.Qo.PU.mW.vP),sessionId:this.Lkt.id,externalSessionId:this.Lkt.externalId,userAgent:Dl.userAgent,weightedAverageBandwidth:r,weightedAverageBufferSize:h}}Dkt(){var t,i,e,s;return!1!==(null==(t=this.ekt)?void 0:t.analyticsEnabled)&&(null==(s=null==(e=this.Skt)||null==(i=e.insights)?void 0:i.enabled)||s)}bkt(t){if(this.Dkt()){this.lxt.push(t);for(const i of this.ekt.analyticsUrls)this.Qo.AO.LS({zu:i,gI:yt.POST,_I:{Accept:"application/json","Content-Type":"application/json"},jg:kt.Fv,fI:JSON.stringify(t)}).then((i=>{Qr(this.lxt,t),ha(i.gj())})).catch((()=>{Qr(this.lxt,t)}))}}dxt(t){if(this.Dkt())for(const i of this.ekt.analyticsUrls)this.Qo.AO.eY({zu:i,fI:JSON.stringify(t)})}constructor(t,e,s){this.fxt=i.Kd(),this.Ikt=!1,this.kLt=!1,this.kkt=!1,this._xt=!1,this.gxt=0,this.lxt=[],this.wxt=0,this.ixt=[],this.ext=[],this.sxt=[],this.oxt=1/0,this.axt=-1/0,this.uxt=new xq,this.Ekt=-1/0,this.txt=[],this.qkt=void 0,this.vxt=void 0,this.ja=void 0,this.Okt=()=>{var t,i;this.Qo.rt.cg(0).yn(qt.J_,this.nxt),this.Tkt("qualities",{qualities:null==(i=this.Qo.rt.cg(0))||null==(t=i.Ng)?void 0:t.og.map((t=>({id:t.o,bandwidth:t.wP,label:t.kh,width:t.ji,height:t.Ti})))})},this.Wkt=()=>{this.Tkt("exit"),this.Ta("end");const t=this.Zkt();for(const t of this.lxt)this.dxt(t);this.lxt.length=0,this.dxt(t)},this.Hkt=()=>{this.Tkt("visibilitychange",{visibility:h.visibilityState})},this.Qkt=t=>{t.redirect(Yt({},t,{url:Hc(t.url,this.Lkt)}))},this.xkt=t=>{this.Tkt("error",{message:t.errorObject.message})},this.Ckt=()=>{this.Tkt("volumechange",{volume:this.Qo.c_,muted:this.Qo.zf})},this.nxt=t=>{var i;const e=t.Zrt.wP;this.Tkt("qualitychange",{from:this.vxt,to:e}),this.vxt=e;const s=this.cxt(t.Zrt);var n;this.Tkt("bandwidth-distribution",s),this.Ta(null!=(n=null==(i=this.ja)?void 0:i.state)?n:"loading")},this.jkt=t=>{var i;this.Tkt("playbackratechange",{rate:t.playbackRate,latency:null==(i=this.Qo.kf)?void 0:i.yv})},this.y9=()=>{var t;this.kLt||(this.kLt=!0,this.Tkt("firstplaying",{targetLatency:null==(t=this.Qo.kf)?void 0:t.yv}));const e=this.Ikt;var s,n,r,h;(this.Ikt=!0,e)?this.Tkt("playing",{activeQuality:null==(n=this.Qo.rt.cg(0))||null==(s=n.yg)?void 0:s.wP}):this.Tkt("playing",{timeSincePlay:(i.Kd()-this.fxt)/1e3,activeQuality:null==(h=this.Qo.rt.cg(0))||null==(r=h.yg)?void 0:r.wP});this.Ta("play")},this.N9=t=>{this.Tkt("pause"),this.Ikt=!1,this.Ta("pause")},this.T9=()=>{this.Tkt("play"),this.fxt=i.Kd()},this.Pkt=()=>{i.Kd()-this.Ekt>100&&this.Tkt("liveseek",{when:this.Ikt?"playback":"after-pause"})},this.zkt=()=>{this.Ekt=i.Kd(),this.Tkt("latencyrecoveryseek",{when:this.Ikt?"playback":"after-pause"})},this.Bkt=t=>{this._xt||(this._xt=!0,this.gxt=_r(),this.Tkt("stallstart",{when:this.Ikt?"playback":"after-pause"})),this.Ta("stall")},this.Rkt=t=>{if(this._xt){this._xt=!1;const t=(_r()-this.gxt)/1e3;this.Tkt("stallend",{stallDuration:t})}},this.Ukt=jd((t=>{var i,e;this.Tkt("dimensionchange",{width:t.width,height:t.height}),this.Ta(null!=(e=null==(i=this.ja)?void 0:i.state)?e:"loading")}),1e3),this.Vkt=t=>{this.Tkt("aderror",null==t?void 0:t.message)},this.Ykt=t=>{switch(t.type){case"stt":this.Tkt("adbreakbegin");break;case"ett":this.Tkt("adbreakend");break;case"ntt":this.Tkt("adbegin");break;case"htt":this.Tkt("adend");break;case"Fkt":this.Tkt("adskip")}},this.Tkt=(t,i)=>{this.ixt.push({sequenceNumber:this.wxt++,currentTime:_r()/1e3,type:t,extra:i})},this.Qo=t,this.Lkt=e,this.ekt=s}};var jq=class{Axt(t){const i=_.min(_.max(t,this.oxt),this.axt);localStorage.setItem("theolive/"+this.channelId+"/latency",i.toString());const e=i-this.defaultLatency.target;this.cu.kf.Bv={windowStart:this.defaultLatency.windowStart+e,target:i,windowEnd:this.defaultLatency.windowEnd+e,maxOffset:this.defaultLatency.maxOffset+e}}mxt(){if(!this.cu.Ff){const t=this.pxt;this.yxt=_.min(this.yxt,t),this.Mxt+=1}}get pxt(){const t=this.cu.vf(),i=this.cu.Tf();for(let e=0;e<t.length;e++)if(t.start(e)<=i&&i<=t.end(e))return t.end(e)-i;return 0}Txt(){if(this.Mxt<10)return;const t=.25-this.yxt;let i=this.Nxt+t;i=_.max(i,this.Nxt-.1),i=_.min(i,this.Nxt+.1),this.Axt(i),this.yxt=1/0,this.Mxt=0}get Nxt(){return this.cu.kf.xv.target}Ud(){i.R$(this.Dxt),i.R$(this.Sxt)}constructor(t,e,s,n=s.target,r=0){this.channelId=e,this.defaultLatency=s,this.Mxt=0,this.yxt=1/0,this.cu=t,this.oxt=_.max(n,s.target),this.axt=this.oxt+r;const h=localStorage.getItem("theolive/"+e+"/latency");this.Axt(h?Number(h):n),this.Dxt=i.z$((()=>this.mxt()),1e3),this.Sxt=i.z$((()=>this.Txt()),6e4)}},Lc=class{get ct(){return _.round(i.Kd()-this.uS)}Ixt(){const t=this.Qo.PU.mW.wP,i=this.Qo.kf.yv?1e3*this.Qo.kf.yv:void 0,e=function(t){const i=t.Tf(),e=t.vf();for(let t=0;t<e.length;t++)if(e.start(t)<=i&&i<=e.end(t))return 1e3*(e.end(t)-i);return 0}(this.Qo);t>0&&this.nP.fkt(t),void 0!==e&&this.Ext.fkt(e),void 0!==i&&this.GP.fkt(i)}constructor(t){var e,s;this.uS=i.Kd(),this.Ext=new vl,this.nP=new vl,this.GP=new vl,this.Qo=t,this.EAt=null==(s=this.Qo.rt.cg(0))||null==(e=s.yg)?void 0:e.o}},Wc=class t extends Lc{dA(){return{type:"loading",reason:this.CG,duration:this.ct,error:this.BP}}bxt(){return new t(this.Qo,this.CG,this.BP)}constructor(t,i,e){super(t),this.CG=i,this.BP=e}},Pq=class t extends Lc{dA(){var t;return{type:"stalling",duration:this.ct,bandwidth:this.nP.pkt(),quality:null!=(t=this.EAt)?t:"unknown"}}bxt(){return new t(this.Qo,this.ln)}constructor(t,i){super(t),this.ln=i}},zq=class t extends Lc{dA(){var t;return{type:"playing",duration:this.ct,bandwidth:this.nP.ykt(),buffer:this.Ext.pkt(),latency:this.GP.Mkt(),qualities:this.IT,targetQualities:this.jat,width:this.wk,height:this.vk,quality:null!=(t=this.EAt)?t:"unknown"}}bxt(){return new t(this.Qo,this.IT,this.jat,this.wk,this.vk)}constructor(t,i,e,s,n){super(t),this.IT=i,this.jat=e,this.wk=s,this.vk=n}},Bq=class t extends Lc{dA(){var t;return{type:"paused",duration:this.ct,quality:null!=(t=this.EAt)?t:"unknown"}}bxt(){return new t(this.Qo)}constructor(t){super(t)}},Rq=class t extends Lc{dA(){var t;return{type:"seeking",duration:this.ct,reason:this.CG,quality:null!=(t=this.EAt)?t:"unknown"}}bxt(){return new t(this.Qo,this.CG)}constructor(t,i){super(t),this.CG=i}};var Uq=class{Lxt(){var t;if(void 0===(null==(t=this.Qo.rt.cg(0))?void 0:t.yg))return{};this.kxt(this.xxt.bxt());const i={channel:{name:this.Skt.name},states:this.Cxt};return this.Cxt=[],{"X-THEOLIVE-SEGMENT-METRICS-V1":""+JSON.stringify(i)}}kxt(t){this.Cxt.push(this.xxt.dA()),this.xxt=t}destroy(){this.Oxt(),s.removeEventListener("beforeunload",this.Oxt),this.Qo.fn(Zt.Rw,this.fv),this.Qo.fn(Zt.Bw,this.uv),this.Qo.fn(Co.Sh,this.jxt),this.Qo.kf.fn("latencyrecoveryseek",this.Pxt),this.Qo.kf.fn("golive",this.zxt),this.Qo.rt.fn(Ud.L_,this.kP),this.Qo.rt.og.forEach((t=>t.fn(qt.J_,this.Jr))),this.Qo.b7.removeEventListener("intenttofallback",this.Bxt),this.Qo.b7.removeEventListener("publicationloadstart",this.Rxt),this.Qo.b7.removeEventListener("publicationoffline",this.Uxt),this.Qo.PU.fW(this.Qxt),i.R$(this.Fxt)}constructor(t,e,n){this.Cxt=[],this.Yxt=!1,this.kLt=!1,this.CU=!1,this.Bxt=()=>{var t;this.kxt(new Wc(this.Qo,"fallback",null==(t=this.Qo.Lf())?void 0:t.message))},this.Rxt=()=>{this.kxt(new Wc(this.Qo,"loadChannel"))},this.Uxt=()=>{this.kxt(new Wc(this.Qo,"offline"))},this.kP=t=>{t.Lt.yn(qt.J_,this.Jr)},this.Jr=()=>{const t=this.Qo.rt.cg(0);if(!t)return;const i=this.Yxt;if(this.Yxt=!0,!i)return;var e;const s=null!=(e=t.Dg)?e:[],n=Array.isArray(s)?s:[s];this.kxt(new zq(this.Qo,t.Ng.og.map((t=>Qq(t))),n.map((t=>t.o)),this.Qo.we.clientWidth,this.Qo.we.clientHeight))},this.fv=()=>{this.kLt=!0,this.CU=!1;const t=this.Qo.rt.cg(0),i=t.Ng.og;var e;const s=null!=(e=t.Dg)?e:[],n=Array.isArray(s)?s:[s];this.kxt(new zq(this.Qo,i.map((t=>Qq(t))),n.map((t=>t.o)),this.Qo.we.clientWidth,this.Qo.we.clientHeight))},this.Pxt=()=>{this.kLt&&!this.CU&&(this.CU=!0,this.kxt(new Rq(this.Qo,"latencyRecovery")))},this.zxt=()=>{this.kLt&&!this.CU&&(this.CU=!0,this.kxt(new Rq(this.Qo,"goLive")))},this.uv=()=>{this.Qo.e_||this.kxt(new Pq(this.Qo,"visible"===h.visibilityState))},this.jxt=()=>{this.kxt(new Bq(this.Qo))},this.Qxt=t=>{const e=function(t){const{pathname:i}=t;if(Ss(i,"/manifest.json"))return"manifest";if(Ss(i,".hspc")){if(Xi(i,"/video/"))return"video-segment";if(Xi(i,"/audio/"))return"audio-segment"}else if(Ss(i,".hspi")){if(Xi(i,"/video/"))return"video-init";if(Xi(i,"/audio/"))return"audio-init"}return"unknown"}(i.Dh(t.url));if("unknown"===e)return;this.Lkt.incrementSequenceNumber();let s=Yt({},t.headers,{"X-Theolive-Version":"8.2.0","X-Theolive-Playertype":"theoplayer","X-Theolive-Sequence":""+this.Lkt.sequenceNumber});"video-segment"===e&&(s=Yt({},s,this.Lxt())),t.redirect(Yt({},t,{headers:s}))},this.Oxt=()=>{ha(this.Qo.AO.LS({zu:this.Gxt,_I:this.Lxt(),TI:!0}))},this.Qo=t,this.Skt=e,this.Lkt=n,this.Gxt=Hc(i.Dh("bye",e.source.src).href,n),s.addEventListener("beforeunload",this.Oxt),this.Qo.yn(Zt.Rw,this.fv),this.Qo.yn(Zt.Bw,this.uv),this.Qo.yn(Co.Sh,this.jxt),this.Qo.kf.yn("latencyrecoveryseek",this.Pxt),this.Qo.kf.yn("golive",this.zxt),this.Qo.PU.cW(this.Qxt),this.Qo.rt.yn(Ud.L_,this.kP),this.Qo.b7.addEventListener("intenttofallback",this.Bxt),this.Qo.b7.addEventListener("publicationloadstart",this.Rxt),this.Qo.b7.addEventListener("publicationoffline",this.Uxt),this.xxt=new Wc(this.Qo,"loadChannel"),this.Fxt=i.z$((()=>{this.xxt.Ixt()}),1e3)}};function Qq(t){return[t.o,t.wP,t.ji,t.Ti]}var Fq=class extends wn{constructor(t){super("publicationloadstart"),this.publicationId=t}},Yq=class extends wn{constructor(t){super("publicationoffline"),this.publicationId=t}},Gq=class extends wn{constructor(t){super("publicationloaded"),this.publicationId=t}},Vq=class extends wn{constructor(){super("intenttofallback")}},Wq=class extends wn{constructor(){super("enterbadnetworkmode")}},Hq=class extends wn{constructor(){super("exitbadnetworkmode")}},qq=class extends Bo{get va(){return this.Xa||(this.Xa=function(t){return{addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)},get badNetworkMode(){return t.Vxt},set badNetworkMode(i){t.Vxt=i},preloadPublications:async i=>(await t.Wxt(i)).map((t=>({name:t.name})))}}(this)),this.Xa}get Vxt(){return this.Qo.Vxt}set Vxt(t){this.Qo.Vxt=t}Wxt(t){return this.Qo.Wxt(t)}constructor(t){super(),this.Qo=t}};var Jc,Xq=["https://theo-insights-prod-5cb0.ew.r.appspot.com/"],Zq=8e5,Kq=class extends cc{Hxt(){this.Qo.kf.yn("latencyrecoveryseek",this.Pxt),this.Qo.rt.yn(Ud.L_,this.kP)}qxt(){this.Qo.kf.fn("latencyrecoveryseek",this.Pxt),this.Qo.rt.fn(Ud.L_,this.kP)}E_(t){return this.fLt?t.type===Zt.Rw?(void 0!==this.Xxt?(i.Jd(this.Xxt),this.Xxt=void 0,this.kLt||this.Co(new Oe(this.Tf()))):this.Co(new Oe(this.Tf())),this.kLt=!0,!0):t.type===Zt.Bw?(this.Xxt||(this.Xxt=i.$d((()=>{this.Co(new Fr(this.Tf())),this.Xxt=void 0}),100)),!0):"error"===t.type?(this.Zxt.y_(),ha(this.Kxt()),!0):super.E_(t):super.E_(t)}L7(){return this.Jxt.va}get Vxt(){return this.$xt}set Vxt(t){this.fLt&&(t?this.tCt():this.iCt())}tCt(){if(this.$xt)return;if(this.$xt=!0,this.Jxt.Co(new Wq),0===this.Qo.rt.U)return;const t=this.rt.cg(0),i=yd(t.Ng.og,(t=>t.wP));var e;(null!=(e=i.gAt)?e:i.wP)<Zq?(t.Dg=[i],Promise.resolve().then((()=>t.Dg=t.Ng.og.slice()))):this.iCt()}iCt(){if(!this.$xt)return;if(this.$xt=!1,this.Jxt.Co(new Hq),0===this.Qo.rt.U)return;const t=this.Qo.rt.cg(0);var i;const e=Jq(null!=(i=t.Dg)?i:t.Ng.og);t.Dg=e.length>0?e:Jq(t.Ng.og)}Wxt(t){return Promise.all(t.map((async t=>{const i=this.eCt.agt(kq(t,this.sCt.discoveryUrl));return await Ys(i.F6,this.DC.Wd)})))}async ga(t,i){var e;this.fLt=!1;for(const r of null!=(e=null==t?void 0:t.sources)?e:[]){if(r.integration===Ci.THEOLIVE){if(void 0===r.src)continue;this.Hxt(),this.fLt=!0,this.Jxt.Co(new Fq(r.src));const e=kq(r.src,this.sCt.discoveryUrl),h=this.Jxt.lf("publicationloaded");try{var s,n;this.bc=t,this.Wz=r,this.nCt=this.eCt.agt(e);const h=await this.nCt.F6;this.Zxt.Nkt(h);const{enhancedLogging:o,source:{targetLatency:a}}=h;(null==o?void 0:o.enabled)&&_.random()<=o.percentage&&this.Qo.PU.cW(this.rCt),(null==(s=this.sCt)?void 0:s.analyticsEnabled)&&(null==(n=this.sCt)?void 0:n.experimentalAnalyticsEnabled)&&"theo.live"===h.source.type&&(this.hCt=new Uq(this,h,this.Lkt));const u=this.Qo.kf.xv,c=(null!=a?a:.45)-u.target;this.Qo.kf.Bv={windowStart:u.windowStart+c,target:u.target+c,windowEnd:u.windowEnd+c,maxOffset:u.maxOffset+c},await Ys(this.oCt(this.Qo.ST),i)}catch(t){throw this.h2(),this.dispatchErrorEvent(t),t}return void await Ys(h,i).catch(yo)}if("web"===Ku.FI&&(null==t?void 0:t.contentProtection)&&(!Sw(r)||r.type!==rs.Zv)){const t=new Rs(Ui.CONFIGURATION_ERROR,"Content protection is not supported for this source type");throw this.dispatchErrorEvent(t),t}}return await super.ga(t,i)}async oCt(t){if(this.h2(),!this.nCt)return;const{source:i}=await this.nCt.F6,e=await this.aCt(i);if("live"===e)if("primary"===this.uCt)try{await this.cCt(t)}catch(i){await this.lCt(t)}else await this.lCt(t);else if("offline"===e)await this.Uxt();else try{await this.cCt(t)}catch(t){await this.Uxt()}}async aCt(t){try{const i=await this.Qo.AO.LS({zu:Hc(t.src,this.Lkt)});return i.OS>=200&&i.OS<300?"live":404===i.OS||503===i.OS?"offline":"error"}catch(t){return"error"}}async lCt(t){if(!this.nCt)return;const i=await this.nCt.F6;this.uCt="primary",this.xq(i.source,t)}async Uxt(){if(!this.nCt)return;const t=await this.nCt.F6;this.Jxt.Co(new Yq(t.id.id)),this.dCt=i.$d((()=>this.oCt(this.Qo.ST)),15e3)}xq(t,i){var e,s,n,r;this.Zxt.Cn();const h=De({sources:[{type:$q(t.type),src:t.src,contentProtection:t.contentProtection,useManagedMediaSource:!0}],ads:this.kLt?[]:null==(e=this.bc)?void 0:e.ads,blockContentIfAdError:null==(s=this.bc)?void 0:s.blockContentIfAdError});h.sources[0].bypassLicense=!0,this.Qo.ga(h,(new Wr).Wd).then((()=>{i&&this.Qo.p_()})).catch(this.dispatchErrorEvent);const{targetLatency:o}=t,a=this.nCt.CT.id;null==(n=this.fCt)||n.Ud(),this.fCt=new jq(this,a,this._Ct,o,null==(r=this.Wz)?void 0:r.targetLatencyLeniency),this.Jxt.Co(new Gq(a))}async cCt(t){if(this.Zxt.rxt(),this.Jxt.Co(new Vq),!await this.gCt())throw new g("fallback not live");await this.wCt(t)}async wCt(t){var i;const e=await(null==(i=this.nCt)?void 0:i.F6);(null==e?void 0:e.fallback)&&(this.Zxt.hxt(),this.uCt="fallback",this.xq(e.fallback,t))}async gCt(){var t,i;const e=await(null==(t=this.nCt)?void 0:t.F6);if(!(null==(i=this.sCt)?void 0:i.fallbackEnabled)||!(null==e?void 0:e.fallback))return!1;const s=await this.Qo.AO.LS({zu:Hc(e.fallback.src,this.Lkt)});return s.OS>=200&&s.OS<300}dispatchErrorEvent(t){if(t instanceof Rs)return this.Co(new Eo(t));this.Co(new Eo(new Rs(Ui.THEO_LIVE_UNKNOWN_ERROR,t.message,t)))}async h2(){await this.Qo.y_(),void 0!==this.dCt&&(i.Jd(this.dCt),this.dCt=void 0)}y_(){var t,e;return this.DC.qd(),this.DC=new Wr,this.qxt(),void 0!==this.Xxt&&(i.Jd(this.Xxt),this.Xxt=void 0),this.fLt=!1,this.kLt=!1,null==(t=this.fCt)||t.Ud(),this.fCt=void 0,this.Zxt.y_(),null==(e=this.hCt)||e.destroy(),this.bc=void 0,this.Wz=void 0,this.nCt=void 0,this.uCt=void 0,this.vCt=[],this.Qo.PU.fW(this.rCt),this.$xt&&this.iCt(),super.y_()}async gn(t){var e;this.DC.qd(),void 0!==this.Xxt&&(i.Jd(this.Xxt),this.Xxt=void 0),this.Vo(),this.qxt(),null==(e=this.hCt)||e.destroy(),this.Qo.kf.fn("latencyrecoveryseek",this.Pxt),await super.gn(t)}constructor(t,e){var s,n;super(t,e),this.fLt=!1,this.DC=new Wr,this.Xxt=void 0,this.kLt=!1,this.vCt=[],this.$xt=!1,this.kP=t=>{const i=t.Lt;var e;i.yn(qt.J_,this.Jr);const s=Jq(null!=(e=i.Dg)?e:i.Ng.og);i.Dg=s.length>0?s:Jq(i.Ng.og)},this.Jr=t=>{const i=t.Zrt;var e;(!i||(null!=(e=i.gAt)?e:i.wP)>=Zq)&&this.iCt()},this.Pxt=async()=>{this.tCt(),this.vCt.push(i.Kd()),this.vCt=this.vCt.filter((t=>i.Kd()-t<=3e5)),this.vCt.length>=3&&(this.vCt=[],await this.oCt(!0))},this.Kxt=async()=>{if(this.nCt){if("demo"===(await this.nCt.F6).mode){this.nCt.Yn();if("playing"!==(await this.nCt.F6).status)return void this.Co(new Eo(new Rs(Ui.THEO_LIVE_END_OF_DEMO,"This demo channel has been stopped automatically after 5 minutes")))}await this.oCt(!0)}},this.rCt=t=>{if("manifest"===t.type||"segment"===t.type||""===t.type){const e=i.Dh(t.url);e.searchParams.append("enhancedLogging","true"),t.redirect({url:e.toString()})}},this.Jxt=new qq(this);const r=t.wd.theoLive;var h,o,a,u;this.sCt={sessionId:null!=(h=null==r?void 0:r.sessionId)?h:cr(),userId:null!=(o=null==r?void 0:r.userId)?o:Mq(),externalSessionId:null==r?void 0:r.externalSessionId,analyticsEnabled:!1!==(null==r?void 0:r.analyticsEnabled),fallbackEnabled:!1!==(null==r?void 0:r.fallbackEnabled),discoveryUrl:null!=(a=null==r?void 0:r.discoveryUrl)?a:"https://discovery.theo.live/channels/",analyticsUrls:null!=(u=null==r?void 0:r.analyticsUrls)?u:Xq},this.Lkt=new yq(null==(s=this.sCt)?void 0:s.externalSessionId),this.Zxt=new Oq(this,this.Lkt,this.sCt),this.eCt=new Tq(t.AO,{discoveryHeader:null==(n=this.sCt)?void 0:n.discoveryHeader}),this._Ct=t.kf.xv,this.Qo.kf.yn("latencyrecoveryseek",this.Pxt)}};function Jq(t){return t.filter((t=>{var i;return(null!=(i=t.gAt)?i:t.wP)>=Zq}))}function $q(t){switch(t){case"theo.live":return"application/vnd.theo.hesp+json";case"hls":return"application/x-mpegurl";case"dash":return"application/dash+xml";default:throw new g("Unknown source type: "+t)}}lP((t=>new Kq(t)),Zo.Za),function(t){t.ACt="currentbufferingrenditionchange",t.mCt="pCt",t.yCt="MCt",t.TCt="NCt"}(Jc||(Jc={}));var tX=class{constructor(t,i){var e,s;this.Mst=void 0,this.Mg=Vw(),this.DCt=i,this.Rg=t.Rg,this.SCt=t.SCt,this.ICt=t.ICt,this.ECt=t.ECt,this.l=t.l,this.gs=t.gs,this.bCt=t.bCt,this.LCt=t.LCt,this.kCt=void 0===t.mAt,this.xCt=null!=(s=null==(e=t.xCt)?void 0:e.split(","))?s:[]}};function iX(t,i){return t.Rg===i.Rg&&(t.l===i.l||!(!t.SCt||!i.SCt))}function eX(t,i){return void 0!==t&&void 0!==i&&sX(t,i)}function sX(t,i){return t.DCt===i.DCt}function nX(t,i){return sX(t,i)&&t.bCt===i.bCt}function rX(t,i){for(const e of t)if(nX(e,i))return!0;return!1}var hX,oX=class extends Bo{get Tg(){return this.CCt}get Rt(){const t=this.OCt();if(!t)return!1;for(const i of this.Ng.og)if(i.jCt===t)return!0;return!1}set Rt(t){if(t!==this.Rt)if(t){var i;let t=null==(i=this.Ng.cg(0))?void 0:i.jCt;const e=this.Qo.PCt;for(const i of this.Ng.og)if(i.zCt===e){t=i.jCt;break}this.BCt(t)}else this.BCt(void 0)}get yg(){if(!this.Rt)return;const t=this.Qo.RCt;for(const i of this.Ng.og)if(rX(t,i.jCt))return i}get va(){return this.Xa||(this.Xa=ni(this)),this.Xa}get o(){return this.OT.toString()}get Mg(){return this.OT}get kh(){return this.jT}set kh(t){t!==this.jT&&(this.jT=t,this.Co(new Ks(this)))}get gs(){return this.ZL}get jg(){return this.Rt?"enabled":"disabled"}get Dg(){return this.jat}set Dg(t){let e=[];if(t){e=t.filter((t=>{const e=this.yg?bc(this.yg):void 0;return i.Ys.nit(e,bc(t))})).filter((i=>this.Ng.LT(t)&&i.Net))}else e=this.Ng.og.filter((t=>t.Net));if(0!==e.length){if(!(t===this.jat||this.jat&&se(this.jat,e))){if(this.jat=t?e:void 0,this.Qo.UCt(e.map((t=>t.zCt))),1===e.length){const t=e[0].zCt,i=this.$0===fi.ym,s=this.QB.WW;ha(this.Qo.QCt(t,{FCt:!0,YCt:s&&i,GCt:s&&!i}))}this.Co(new BQ(e,this))}}else this.Co(new oc)}zT(t){this.Rt=t}gn(){this.Vo(),this.Qo.fn(Jc.ACt,this.VCt),this.Qo.fn(Jc.mCt,this.WCt);for(const t of this.Ng.og)t.gn();this.Ng.tr()}constructor(t,i,e,s,n){var r;super(),this.$0=t,this.Qo=i,this.QB=e,this.fh=s,this.Ng=n,this.jat=void 0,this.HCt=void 0,this.qCt=()=>this.Co(new Ks(this)),this.VCt=()=>{const t=this.yg;t&&this.HCt!==t&&(this.HCt=t,this.Co(new vn(t)))},this.WCt=()=>{const t=this.Rt;this.XCt!==t&&(this.XCt=t,this.fh.Co(new no(this)),this.Co(new no(this)))},this.HCt=this.yg,this.XCt=this.Rt;const h=n.cg(0);var o,a;this.jT=null!=(o=null==h?void 0:h.jCt.l)?o:"",this.ZL=null!=(a=null==h?void 0:h.jCt.gs)?a:"",this.CCt=null==h||null==(r=h.jCt)?void 0:r.xCt.map(fX).filter(Po),this.OT=Xc(),this.Qo.yn(Jc.ACt,this.VCt),this.Qo.yn(Jc.mCt,this.WCt);for(let t=0;t<this.Ng.U;t++){this.Ng.cg(t).yn("update",this.qCt)}}},aX=class extends oX{get zt(){return zH.dbt}OCt(){return this.Qo.ZCt}BCt(t){ha(this.Qo.KCt(t))}constructor(t,i,e,s){super(fi.Mm,t,i,e,s)}},uX=class extends oX{get zt(){return BH.dbt}OCt(){return this.Qo.JCt}BCt(t){ha(this.Qo.$Ct(t))}constructor(t,i,e,s){super(fi.ym,t,i,e,s)}},cX=class extends Bo{get o(){return String(this.zCt.o)}get Mg(){return this.zCt.o}get wP(){return this.zCt.wP}get gAt(){return this.zCt.gAt}get kh(){var t;return null!=(t=this.jT)?t:this.jCt.l}set kh(t){this.kh!==t&&(this.jT=t,this.Co(new uG(this.va)))}get mAt(){return this.jCt.DCt.tOt()}get wAt(){return this.zCt.wAt}GS(){}YS(){}gn(){this.Vo()}constructor(t,i){super(),this.zCt=t,this.jCt=i,this.jT="",this.Net=!0}},lX=class extends cX{get gvt(){return 0}get Mst(){var t;return(null==(t=this.zCt.Mst)?void 0:t.FEt)||""}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return gc(this)}constructor(t,i){super(t,i),this.Xa=void 0}},dX=class extends cX{get Mst(){var t;return(null==(t=this.zCt.Mst)?void 0:t.GEt)||""}get vAt(){return this.iOt}set vAt(t){this.iOt!==t&&(this.iOt=t,this.Co(new uG(this.va)))}get Fct(){var t,i;return null!=(i=null!=(t=this.kEt)?t:this.zCt.Fct)?i:0}set Fct(t){this.Fct!==t&&(this.kEt=t,this.Co(new uG(this.va)))}get Ti(){var t,i;return null!=(i=null==(t=this.zCt.xEt)?void 0:t.Ti)?i:0}get ji(){var t,i;return null!=(i=null==(t=this.zCt.xEt)?void 0:t.ji)?i:0}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){return aG(this)}constructor(t,i){super(t,i),this.Xa=void 0,this.iOt=0,this.kEt=void 0}};function fX(t){return"public.accessibility.describes-video"===t?sl.Cg:"public.accessibility.transcribes-spoken-dialog"===t?sl.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?sl.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?sl.xg:void 0}!function(t){t.eOt="FATAL",t.ha="ERROR",t.sOt="WARNING",t.nOt="INFO",t.rOt="DEBUG"}(hX||(hX={}));var er=new class{hOt(t){if(!this.Rt())return!1;const i=[];return!(i.length>0)||i.some((i=>i.toLowerCase()===t.toLowerCase()))}oOt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.hOt(t)&&i.cit("DEBUG "+t+" -",...s)}Xp(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.hOt(t)&&i.cit("INFO "+t+" -",...s)}aOt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.hOt(t)&&i.Qv("WARNING "+t+" -",...s)}lt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.hOt(t)&&i.dit("ERROR "+t+" -",...s)}uOt(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),n=1;n<e;n++)s[n-1]=arguments[n];this.hOt(t)&&i.dit("FATAL "+t+" -",...s)}constructor(){this.Rt=()=>!1}},Cn="HLSPlaylistParser",Gc="Discontinuity",me="Buffering",_X=class{qnt(){var t;const i=null==(t=this.Qo.Tr)?void 0:t.cOt;if(!i||0===i.length)return void er.aOt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var e;const s=null!=(e=Vt(i,(t=>0!==t.lOt.length&&0!==t.dOt.length)))?e:i[0],n=i.filter((t=>t!==s));for(const t of s.lOt){const i=new Uw,e=[];i.ET(new lX(s,t)),e.push(t);for(const s of n)for(const n of s.lOt)if(iX(n,t)&&!rX(e,n)){i.ET(new lX(s,n)),e.push(n);break}this.fOt.tt(new aX(this.Qo,this.QB,this.fOt,i))}for(const t of s.dOt){const i=new Uw,e=[];i.ET(new dX(s,t)),e.push(t);for(const s of n)for(const n of s.dOt)if(iX(n,t)&&!rX(e,n)){i.ET(new dX(s,n)),e.push(n);break}this._Ot.tt(new uX(this.Qo,this.QB,this._Ot,i))}}gOt(){this.wOt(this.fOt),this.wOt(this._Ot)}wOt(t){const i=[];for(const e of t.og){const t=[];for(const i of e.Ng.og)qo(i.zCt.vOt,i.jCt)||t.push(i);for(const i of t)e.Ng.bT(i),i.gn();0===e.Ng.U&&i.push(e)}for(const e of i)t.it(e),e.gn()}AOt(t,i){const e=this.mOt(t);void 0!==e&&(e.Fct=i)}pOt(t,i){const e=this.mOt(t);void 0!==e&&(e.vAt=i)}mOt(t){for(const i of this._Ot.og){const e=Vt(i.Ng.og,(i=>i.jCt===t));if(void 0!==e)return e}}constructor(t,i,e,s){this.Qo=t,this.QB=i,this.fOt=e,this._Ot=s}},gX=class{get wP(){return this.iot.i9}get vP(){return this.cIt.i9}AP(t){if("segment"!==t.Rg&&"preload-hint"!==t.Rg)return;const i=[new sH(this.cIt)];return"stream"!==t.wI||!function(t){return"segment"===t.Rg&&"initialization-segment"!==t.AI}(t)&&"preload-hint"!==t.Rg?i.push(new Ec(this.iot)):i.push(new nH(this.iot,1e3)),new Rc(i)}nIt(t){this.iot=new aH(aH.BSt,aH.RSt,1,t)}constructor(t){const i=t.wP>0?t.wP:aH.Jht,e=t.vP>0?t.vP:Vu.Jht;this.iot=new aH(aH.BSt,aH.RSt,1,i),this.cIt=new Vu(Vu.BSt,Vu.RSt,e)}};var wX=class extends wn{constructor(t){super(Jc.TCt),this.lt=t}},vX=class{Rq(t,i){const e={Rg:Au.KC,qP:[],u0:t.map((t=>({HP:t}))),p0:i};return Promise.resolve(void 0!==this.Met.Rq([e]))}constructor(t){this.Met=t}},AX=(t,i,e,s,n)=>t.filter((t=>!!qo(s,t)||1.1*t.wP<=e.wP)),mX=(t,i,e,s,n)=>t.filter((t=>{if(qo(s,t))return!0;let r=1/0;for(const i of t.vOt){var h,o;r=_.min(r,null!=(o=null!=(h=i.DCt.yOt)?h:i.DCt.MOt)?o:1/0)}r===1/0&&(r=1);const a=2*e.vP+t.wP*r/e.wP;return t.wP<=i.wP||n.TOt>a})),pX=(t,i,e,s,n)=>Ot(t,((t,i)=>i.wP-t.wP)),yX=(t,i,e,s,n)=>t.every((t=>t.wAt&&!S(t.wAt)))?Ot(t,((t,i)=>i.wAt-t.wAt)):t,MX=(t,i,e,s,n)=>0===s.length?t:Ot(t,((t,i)=>{const e=qo(s,t)?1:0;return(qo(s,i)?1:0)-e})),TX=(t,i,e,s,n,r)=>t.filter((t=>!t.Mst||!i.Mst||!(void 0!==i.Mst.GEt&&void 0!==t.Mst.GEt&&!ui(i.Mst.GEt,t.Mst.GEt)&&!r.NOt({HP:'video/mp4; codecs="'+t.Mst.GEt+'"'}))&&!(void 0!==i.Mst.FEt&&void 0!==t.Mst.FEt&&!ui(i.Mst.FEt,t.Mst.FEt)&&!r.DOt({HP:'audio/mp4; codecs="'+t.Mst.FEt+'"'})))),NX=(t,e,s,n,r)=>{if(!1===r.gut)return t;if(i.Ys.Ktt)return t;const h=i.Ys.Jtt;var o;const a=(null!=(o=null==h?void 0:h.width)?o:r.ji)*NQ;var u;const c=(null!=(u=null==h?void 0:h.height)?u:r.Ti)*NQ;for(let i=0;i<t.length;i++){const e=t[i];if(void 0===e.xEt)return t;const s=e.xEt.Ti,n=e.xEt.ji;if(s<=c&&n<=a)return t.slice(i,t.length)}return[]},DX=(t,e,s,n,r)=>function(t,e){const s=e.gut;if(void 0===s&&!i.Ys.Qs)return t;if(!1===s)return t;for(let i=0;i<t.length;i++){const s=t[i];if(void 0===s.xEt)return t;const n=s.xEt.Ti,r=s.xEt.ji;if(n===e.Ti&&r===e.ji)return t.slice(i,t.length);if(n<e.Ti||r<e.ji)return t.slice(0===i?i:i-1,t.length)}return[]}(t,r);var gi,Pt,sc,Ke,SX="AbrEvaluator",IX=class{get SOt(){return this.QB.mW}IOt(t){this.vut=t}async EOt(t,i,e,s,n){return(await this.bOt(t,i,e,s,n))[0]}async bOt(t,i,e,s,n){if(0===t.length)throw new g("AbrEvaluator - Unable to select optimal variant stream from an empty list.");er.oOt(SX,"Performing optimal variant stream selection.");const r=this.SOt;let h=t;for(const t of this.vut){const o=t(h,i,r,e,s,n);h=fh(o)?o:await o}if(0===h.length){er.aOt(SX,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[md(t,(t=>t.wP))]}return h}constructor(t){this.QB=t,this.vut=[TX,AX,mX,pX,NX,DX,yX,MX]}};function Qc(t,i){return[t,void 0!==i?t+i-1:jh]}function EX(t){return Boolean(t.Bp)}function In(t){return Boolean(t.nst)}function Tc(t){return t?t.Zmt?t.PM+"@"+t.Zmt.Cn+"-"+(null!=(i=t.Zmt.U)?i:""):""+t.PM:"";var i}function bX(t,i){if(i===t)return!0;if(i.PM!==t.PM)return!1;if(!t.Zmt)return!0;if(i.Zmt){const e=Qc(t.Zmt.Cn,t.Zmt.U),s=Qc(i.Zmt.Cn,i.Zmt.U);if(e[0]<=s[0])return void 0===e[1]||void 0!==s[1]&&e[1]>=s[1]}return!1}function LX(t,i){return t===i||t.PM===i.PM&&(t.Zmt&&i.Zmt?t.Zmt.Cn===i.Zmt.Cn&&t.Zmt.U===i.Zmt.U:t.Zmt===i.Zmt)}function kX(t){const i=!!t.LOt||void 0;return{o:t.o,kOt:t.kOt,YP:t.YP,xOt:t.xOt,ct:t.ct,COt:t.COt,LOt:i,OOt:t.jOt,POt:t.zOt,BOt:t.BOt,ROt:t.ROt}}function xX(t,i){var e,s,n;return{FEt:null!=(e=i.FEt)?e:null==t?void 0:t.FEt,GEt:null!=(s=i.GEt)?s:null==t?void 0:t.GEt,UOt:null!=(n=i.UOt)?n:null==t?void 0:t.UOt}}async function CX(t,i,e,s,n){const r=i.filter((t=>Xi(t,"audio"))),h=i.filter((t=>Xi(t,"video"))),o=[],a=e.map((t=>async function(t,i,e){if(!t.mAt)return;if(!t.QOt)return;if(t.gI!==sc.FOt)return;const s=OX(t.QOt);if(!s)return;if(s.Ob===uu)return{cA:s,MP:[],TP:void 0,xj:t.mAt};if(s.Ob===m_&&t.QOt===M_)return{cA:s,MP:[],TP:t.mAt,xj:void 0};{er.Xp("HLSDrmUtils","Fetching key uri "+t.mAt+".");const n=await i.LS({zu:t.mAt,pI:e});return{cA:s,MP:[await n.gj()],TP:void 0,xj:void 0}}}(t,s,n)));var u;const c=function(t,i){if(0===i.length)return t;const e=t=>{const e=i.indexOf(t.cA.Ob);return e>=0?e:i.length};return Ot(t,((t,i)=>e(t)-e(i)))}((await Promise.all(a)).filter(Po),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const i of c){const e=iW(null!=t?t:{},i.cA),s="cbcs";o.push({cA:i.cA,MP:i.MP,TP:i.TP,xj:i.xj,yz:[{initDataTypes:[i.cA.xb],audioCapabilities:eW(r,s,null==e?void 0:e.audioRobustness),videoCapabilities:eW(h,s,null==e?void 0:e.videoRobustness),persistentState:null==e?void 0:e.persistentState,distinctiveIdentifier:null==e?void 0:e.distinctiveIdentifier}]})}return o}function OX(t){return t===ti?qn:t===g_?qh:t===y_?gm:t===M_?Uh:void 0}function jX(t){if("#"!==t[0])throw new g("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function PX(t){return"#"!==t[0]?t:t.split(":",1)[0]}function zX(t){const i=t.indexOf(":");if(-1===i||t.length<i+1)throw new g("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(i+1)}function ul(t){const i=Nh(zX(t));if(void 0===i)throw new g("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return i}function xt(t){const i={},e=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=e.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?i[n]=r:er.aOt(Cn,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=e.exec(t)}return i}function BX(t,e){const s=xt(t);let n,r;try{n=s.URI?i.Uv(s.URI,e):void 0,r=function(t){switch(t){case"AUDIO":return gi.Mm;case"VIDEO":return gi.ym;case"SUBTITLES":return gi.Tm;case"CLOSED-CAPTIONS":return gi.YOt}throw new g("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(s.TYPE)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const h=s["GROUP-ID"],o=s.LANGUAGE,a=s["ASSOC-LANGUAGE"],u=s.NAME,c="YES"===s.DEFAULT;let l="YES"===s.AUTOSELECT;const d="YES"===s.FORCED,f=s["INSTREAM-ID"],_=s.CHARACTERISTICS,w=s.CHANNELS;if(h||er.aOt(Cn,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),o||er.aOt(Cn,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),u||er.aOt(Cn,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),r===gi.YOt?(n&&er.aOt(Cn,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),f?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(f)||er.aOt(Cn,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):er.aOt(Cn,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):f&&er.aOt(Cn,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),c&&!l&&(l=!0,s.AUTOSELECT&&er.aOt(Cn,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),s.FORCED&&r!==gi.Tm&&er.aOt(Cn,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===h||void 0===u)throw new g("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{GOt:a,bEt:w,xCt:_,bCt:h,ICt:l,SCt:c,ECt:d,LCt:f,gs:o,l:u,Rg:r,mAt:n}}function RX(t,e,s){const n=xt(t);let r,h,o;try{r=i.Uv(s,e),o=function(t){if(void 0===t)return;const i=t.split("x"),e=Number(i[0]),s=Number(i[1]);if(S(e)||S(s))throw new g("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{ji:e,Ti:s}}(n.RESOLUTION),h=function(t){if(!t)return;let i,e,s;const n=t.split(",");for(const t of n){const n=t.trim();D(n,"mp4a")?i="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n||"flac"===n.toLowerCase()?i=n:D(n,"avc")||D(n,"hvc1")||D(n,"hev1")||D(n,"dvh")||D(n,"vp09")||D(n,"av01")?e=n:s=s?s+","+n:n}return{FEt:i,GEt:e,UOt:s}}(n.CODECS)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const a=Nh(n.BANDWIDTH),u=Nh(n["AVERAGE-BANDWIDTH"]),c=Nh(n.SCORE),l=Nh(n["FRAME-RATE"]),d=n["HDCP-LEVEL"],f=[];if(void 0!==n["ALLOWED-CPC"]){const t=n["ALLOWED-CPC"].split(",");f.push(...t.map((t=>{const i=t.split(":");return{keysystem:i[0],label:i[1]}})))}const _=n["VIDEO-RANGE"],w=n.AUDIO,v=n.VIDEO,A=n.SUBTITLES,m=n["CLOSED-CAPTIONS"];if(void 0===a?er.aOt(Cn,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==u&&u>a&&er.aOt(Cn,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),h||er.Xp(Cn,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),h&&h.GEt&&void 0===o&&er.Xp(Cn,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===d||qo(["TYPE-0","TYPE-1","NONE"],d)||er.aOt(Cn,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===_||qo(["SDR","PQ","HLG"],_)||er.aOt(Cn,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===a)throw new g("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{VOt:f,WOt:w,gAt:u,wP:a,HOt:m,Mst:h,Fct:l,qOt:d,xEt:o,wAt:c,XOt:A,mAt:r,ZOt:v,KOt:_}}function UX(t,i){const e=xt(t);if(!e.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return RX(t,i,e.URI)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function Nh(t){const i=Number(t);return S(i)?void 0:i}function QX(t,i){const e=xt(t);let s,n;try{s=function(t){switch(t){case"NONE":return sc.Vz;case"AES-128":return sc.JOt;case"SAMPLE-AES":return sc.FOt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new g("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(e.METHOD),n=e.URI?XX(e.URI,i):void 0}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=e.KEYFORMAT,h=e.IV,o=e.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==sc.Vz){if(c=r||M_,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(OX(c)!==qn)throw new g("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=sc.FOt}else a=s;u=n,l=h?yr(h):void 0,d=o?o.split("/").map((t=>Number(t))):[1]}else a=sc.Vz,(n||r||o||h)&&er.aOt(Cn,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{gI:a,mAt:u,$Ot:l,QOt:c,tjt:d}}function FX(t){const i=zX(t);if(!i)return[void 0,""];const[e,s]=i.split(",");return[Nh(e),s]}function YX(t,i){const e=t.split("@"),s=Nh(e[0]),n=e.length>1?Nh(e[1]):i;if(void 0===s||void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Cn:n,U:s}}function GX(t){if(void 0!==t)return YX(t,void 0)}function VX(t,i){return YX(zX(t),i)}function WX(t,i){const e=xt(t);try{const t=XX(e.URI,i);return{PM:t,Zmt:GX(e.BYTERANGE)}}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function HX(t){const i=zX(t);if(!i)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const e=new Date(i);if(!vT(e))throw new g("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return e}function qX(t){const i=xt(t),e=i["START-DATE"],s=i["END-DATE"],n=Nh(i["PLANNED-DURATION"]);let r,h,o,a=Nh(i.DURATION);void 0!==i["SCTE35-CMD"]&&(r=yr(i["SCTE35-CMD"]).buffer),i["SCTE35-IN"]&&(h=yr(i["SCTE35-IN"]).buffer),i["SCTE35-OUT"]&&(o=yr(i["SCTE35-OUT"]).buffer);const u="YES"===i["END-ON-NEXT"],c=function(t){const i={};for(const e of w.keys(t)){const s=t[e];void 0!==s&&D(e,"X-")&&(i[e]=s)}return i}(i),l=i.ID,d=i.CLASS;let f,_;if(void 0===e)er.aOt(Cn,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+e+".");else if(f=new Date(e),_=void 0!==s?new Date(s):void 0,vT(f)||er.aOt(Cn,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const i=new Date(f.getTime()+1e3*a);_?_.getTime()!==i.getTime()&&(er.aOt(Cn,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=i):_=i}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(i.CLASS||er.aOt(Cn,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),i.DURATION&&er.aOt(Cn,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&er.aOt(Cn,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&er.aOt(Cn,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new g("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,kOt:d,YP:f,xOt:_,ct:a,COt:n,zOt:r,ROt:h,BOt:o,LOt:u,jOt:c}}function XX(t,e){if(void 0===t)throw new g("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return i.Uv(t,e)}function ZX(t,i){const e=xt(t),s=Nh(e.DURATION),n=XX(e.URI,i),r=GX(e.BYTERANGE),h="YES"===e.INDEPENDENT,o="YES"===e.GAP;if(void 0===s)throw new g("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,mAt:{PM:n,Zmt:r},ijt:h,ejt:o}}function KX(t){const i=xt(t);return{sjt:"YES"===i["CAN-BLOCK-RELOAD"],njt:Nh(i["CAN-SKIP-UNTIL"]),rjt:"YES"===i["CAN-SKIP-DATERANGES"],hjt:Nh(i["HOLD-BACK"]),ojt:Nh(i["PART-HOLD-BACK"])}}function JX(t,i){const e=xt(t);if(void 0===e.URI)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=XX(e.URI,i),n=Nh(e["LAST-MSN"]),r=Nh(e["LAST-PART"]);if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{mAt:s,ajt:n,ujt:r}}function $X(t,i){var e;const s=xt(t),n=Nh(s["SKIPPED-SEGMENTS"]),r=null==(e=s["RECENTLY-REMOVED-DATERANGES"])?void 0:e.split("\t");if(void 0===n)throw new g("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{cjt:n,ljt:r,djt:i}}function tZ(t){const i=Nh(xt(t)["PART-TARGET"]);if(void 0===i)throw new g("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return i}function iZ(t){switch(zX(t)){case"VOD":return Ke.fjt;case"EVENT":return Ke._jt;default:return er.aOt(Cn,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),Ke.hT}}function eZ(t,i){const e=xt(t);let s,n;try{s=function(t){if(void 0===t)throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return Pt.gjt;if("PART"===t)return Pt.wjt;throw new g("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(e.TYPE),n=XX(e.URI,i)}catch(i){throw new g("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=Nh(e["BYTERANGE-START"]),h=Nh(e["BYTERANGE-LENGTH"]);let o;return void 0===r&&void 0===h||(o={Cn:r||0,U:h}),{Rg:s,mAt:{PM:n,Zmt:o}}}!function(t){t[t.Mm=0]="Mm",t[t.ym=1]="ym",t[t.Tm=2]="Tm",t[t.YOt=3]="YOt"}(gi||(gi={})),function(t){t[t.gjt=0]="gjt",t[t.wjt=1]="wjt"}(Pt||(Pt={})),function(t){t[t.Vz=0]="Vz",t[t.JOt=1]="JOt",t[t.FOt=2]="FOt"}(sc||(sc={})),function(t){t[t.hT=0]="hT",t[t.fjt=1]="fjt",t[t._jt=2]="_jt"}(Ke||(Ke={}));var sZ=class t{vjt(){const t=this.Ajt[this.mjt];return this.mjt+=1,t}pjt(){return this.Ajt[this.mjt]}Lm(){const i=new t("");return i.mjt=0,i.Ajt=this.Ajt.slice(this.mjt),i}static yjt(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(i){this.mjt=0,this.Ajt=t.yjt(i)}};function nZ(t,i,e){const s=t.mAt;let n=t.dp,r=t.Mjt,h=t.Cn;switch(e){case"#EXT-X-VERSION":n=function(t){const i=ul(t);return S(i)?(er.aOt(Cn,"Playlist version is NaN: "+t+"."),1):i}(i);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":h=function(t){const i=xt(t),e=Nh(i["TIME-OFFSET"]);if(void 0===e)throw new g("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{Tjt:e,Njt:"YES"===i.PRECISE}}(i);break;case"#EXT-X-DEFINE":er.aOt(Cn,"Ignoring unsupported #EXT-X-DEFINE: "+i+".");break;default:er.Xp(Cn,"Ignoring unrecognized line or comment: "+i+".")}return{mAt:s,dp:n,Mjt:r,Cn:h}}function rZ(t,i){return t.map((t=>t.gI===sc.Vz||t.$Ot?t:Yt({},t,{$Ot:hZ(i)})))}function hZ(t){const i=new DataView(new ArrayBuffer(16)),e=new _s;return e.Im(8),ug(i,e,Ce.fromNumber(t)),new j(i.buffer)}function oZ(t,e,s){er.Xp(Cn,"Parsing M3U8 playlist at "+t+".");const n=new sZ(s);if("#EXTM3U"!==n.vjt())throw new g("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(s)?function(t,e){let s;try{s=i.Uv(t)}catch(i){throw er.aOt(Cn,"The master playlist has no valid base URI: "+t+"."),new g("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let n={mAt:s,Mjt:void 0,Cn:void 0,dp:void 0};const r=[],h=[],o=[],a=[];for(;;){const t=e.vjt();if(!t)break;try{const i=jX(t);switch(i){case"#EXT-X-MEDIA":{const i=BX(t,s);r.push(i);break}case"#EXT-X-STREAM-INF":{const i=RX(t,s,e.vjt());h.push(i);break}case"#EXT-X-I-FRAME-STREAM-INF":{const i=UX(t,s);o.push(i);break}case"#EXT-X-SESSION-DATA":er.aOt(Cn,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const i=QX(t,s);a.push(i);break}default:n=nZ(n,t,i)}}catch(i){er.aOt(Cn,"Ignoring unparsable line: "+t,i)}}let u=n.dp;var c;const l=null!=(c=n.Mjt)&&c,d=n.Cn;return void 0===u&&(er.aOt(Cn,"The playlist has no #EXT-X-VERSION, assuming version is 2."),u=2),u>=8&&(h.some((t=>void 0!==t.wAt))||o.some((t=>void 0!==t.wAt)))&&(h.some((t=>void 0===t.wAt))||o.some((t=>void 0===t.wAt)))&&er.aOt(Cn,"If one master playlist variant stream has a SCORE, all variants should have it."),{mAt:s,dp:u,Mjt:l,Cn:d,Djt:o,Sjt:a,Bp:r,Ijt:h}}(t,n):function(t,e,s){let n={mAt:t,Mjt:void 0,Cn:void 0,dp:void 0};const r=[];let h,o,a,u,c=!1,l=!1;const d=[],f=ke();let _,w,v,A,m,p,y,M,T,N=[],S=[],I=!1,E=!1;const b=[],L=[];let k,x,C,O,j,P=0,z=!1,B=Ke.hT,R=!1,U=0;try{j=i.Uv(t)}catch(i){throw er.aOt(Cn,"The media playlist has no valid base URI: "+t+".",i),new g("HLSPlaylistParser - Could not parse HLS media playlist.")}const Q=s.Lm();for(;void 0===x||void 0===C;){const t=Q.vjt();if(!t)break;try{switch(PX(t)){case"#EXT-X-MEDIA-SEQUENCE":x=ul(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":C=ul(t)}}catch(i){er.aOt(Cn,"Ignoring unparsable line: "+t,i)}}void 0===x&&(er.Xp(Cn,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),x=0),void 0===C&&(er.Xp(Cn,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),C=0);let F=x,Y=C;for(;;){const t=s.vjt();if(!t)break;let e=!1;try{const s=PX(t);switch(s){case"#EXTINF":e=!0,[_,w]=FX(t);break;case"#EXT-X-BYTERANGE":e=!0,v=VX(t,P),v&&(P=v.Cn+v.U);break;case"#EXT-X-DISCONTINUITY":e=!0,I=!0,Y++;break;case"#EXT-X-KEY":{var G;e=!0;const i=QX(t,j);if(i.gI===sc.Vz){f.clear(),T=void 0;break}var V;const s=null!=(V=null==(G=i.QOt)?void 0:G.toString())?V:"identity";f.set(s,i),i.gI===sc.JOt&&(T=i);break}case"#EXT-X-MAP":e=!0,m=WX(t,j),p=T;break;case"#EXT-X-PROGRAM-DATE-TIME":e=!0,y=HX(t);break;case"#EXT-X-GAP":e=!0,E=!0;break;case"#EXT-X-BITRATE":e=!0,M=ul(t);break;case"#EXT-X-TARGETDURATION":h=ul(t);break;case"#EXT-X-DATERANGE":{const i=qX(t);r.push(i);break}case"#EXT-X-PART":{e=!0;const i=ZX(t,j);S.push(i);break}case"#EXT-X-PRELOAD-HINT":{const i=eZ(t,j);b.push(i);break}case"#EXT-X-SKIP":{d.length>0&&er.aOt(Cn,"#EXT-X-SKIP must appear before any #EXTINF tags."),e=!0;const i=$X(t,F);U=i.cjt,O=i.ljt,F+=i.cjt;break}case"#EXT-X-SERVER-CONTROL":{const i=KX(t);c=i.sjt,o=i.njt,l=i.rjt,a=i.hjt,u=i.ojt;break}case"#EXT-X-RENDITION-REPORT":{const i=JX(t,j);L.push(i);break}case"#EXT-X-PART-INF":k=tZ(t);break;case"#EXT-X-MEDIA-SEQUENCE":e&&er.aOt(Cn,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":e&&er.aOt(Cn,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":z=!0;break;case"#EXT-X-PLAYLIST-TYPE":B=iZ(t);break;case"#EXT-X-I-FRAMES-ONLY":R=!0;break;default:if(D(s,"#"))n=nZ(n,t,s);else{A=i.Uv(t,j);const e=m?{mAt:m,Ejt:p}:void 0,s={Sjt:rZ(Ed(f),F),JD:N,bjt:S,ct:_,KP:w,Ljt:I,mAt:{Zmt:v,PM:A},kjt:e,xjt:y,ejt:E,Cjt:M,djt:F,Ojt:Y};d.push(s),F++,N=[],S=[],_=void 0,w=void 0,I=!1,v=void 0,A=void 0,y=void 0,E=!1,M=void 0}}}catch(i){er.aOt(Cn,"Ignoring unparsable line: "+t,i)}}if(S.length){const t=m?{mAt:m,Ejt:T}:void 0,i={Sjt:rZ(Ed(f),F),JD:N,bjt:S,ct:_,KP:w,Ljt:I,mAt:void 0,kjt:t,xjt:y,ejt:E,Cjt:M,djt:F,Ojt:Y};d.push(i)}let W=n.dp;var H;const q=null!=(H=n.Mjt)&&H,X=n.Cn;void 0===W&&(er.aOt(Cn,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),W=2),void 0===h&&er.aOt(Cn,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const Z=d.length,K=Z>0;K||er.aOt(Cn,"The HLS media playlist contains no segments.");const J=K&&d[Z-1].bjt.length>0;return J&&void 0===k&&er.aOt(Cn,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),J&&void 0===u&&er.aOt(Cn,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{sjt:c,njt:o,rjt:l,jjt:r,Ojt:C,Pjt:z,Mjt:q,hjt:a,zjt:R,djt:x,cjt:U,ojt:u,yOt:k,Bjt:B,Rjt:b,ljt:O,Ujt:L,Qjt:h,nst:d,Cn:X,mAt:j,Fjt:e,dp:W}}(t,e,n)}var aZ=class{get mAt(){return this.DCt.mAt}get Mst(){return this.yEt}set Mst(t){this.yEt=t?cZ(t):void 0,this.Yjt=function(t,i){return!(void 0!==(null==t?void 0:t.FEt)&&void 0===(null==i?void 0:i.FEt)||void 0!==(null==t?void 0:t.GEt)&&void 0===(null==i?void 0:i.GEt))}(this.Gjt,this.yEt)}get Vjt(){return this.Yjt}get vOt(){return this.Wjt}get lOt(){return this.Wjt.filter((t=>t.Rg===gi.Mm))}get dOt(){return this.Wjt.filter((t=>t.Rg===gi.ym))}get Hjt(){return this.Wjt.filter((t=>t.Rg===gi.Tm))}get qjt(){return this.Wjt.filter((t=>t.Rg===gi.YOt))}Xjt(t){for(const i of this.Wjt){const e=i.DCt.Xjt(t);if(void 0!==e)return e}}Zjt(t){for(const i of this.Wjt){const e=i.DCt.Zjt(t);if(void 0!==e)return e}}Kjt(t){Qr(this.Wjt,t)}constructor(t,i,e){var s,n,r,h;this.o=uZ++,this.wAt=void 0,this.xEt=void 0,this.gAt=void 0,this.Yjt=!1,this.Wjt=[],this.DCt=i,this.wP=t.wP,this.gAt=t.gAt,this.wAt=t.wAt,this.Gjt=t.Mst?cZ(t.Mst):void 0,this.yEt=this.Gjt,this.xEt=t.xEt,this.Fct=t.Fct,this.WOt=null!=(s=t.WOt)?s:"Jjt"+this.o,this.ZOt=null!=(n=t.ZOt)?n:"$jt"+this.o,this.XOt=null!=(r=t.XOt)?r:"tPt"+this.o,this.HOt=null!=(h=t.HOt)?h:"iPt"+this.o,this.Wjt=e}},uZ=0;function cZ(t){return Yt({},t,{GEt:t.GEt?_A(t.GEt):void 0})}var Yc,lZ=class{get VT(){var t;return this.iN+(null!=(t=this.ePt)?t:0)}get sPt(){return this.nPt}get Sjt(){return this.rPt.Sjt}hPt(t,i){this.iN=t,this.nPt=i}constructor(t,i,e,s,n){this.a9=void 0,this.rPt=t,this.oPt=i,this.iN=e,this.nPt=s,this.ct=n.ct,this.mAt=n.mAt,this.ijt=n.ijt,this.ejt=n.ejt}},dZ=class{get VT(){var t;return this.iN+(null!=(t=this.aPt)?t:0)}get uPt(){return this.iN}get ct(){return this.XL}get mAt(){return this.cPt}get lPt(){return this.dPt}get sPt(){return this.nPt}get bjt(){return this.fPt}get _Pt(){return this.gPt}get WT(){var t;return this.VT+(null!=(t=this.XL)?t:this.gPt)}set ePt(t){this.aPt=t;for(const i of this.fPt)i.ePt=t}get ePt(){return this.aPt}wPt(t){return this.fPt[t]}vPt(t){for(let i=0;i<this.fPt.length;i++){const e=this.fPt[i],s=e.VT,n=s+e.ct;if(s<=t&&t<=n)return t===n&&i+1<this.fPt.length?this.fPt[i+1]:e}}APt(t){for(let i=this.fPt.length-1;i>=0;i--){const e=this.fPt[i];if(e.VT<=t)return e}}mPt(t){let i=this.APt(t);for(;i&&!i.ijt&&i.oPt>0;)i=this.wPt(i.oPt-1);return i}hPt(t,i,e){const s=t.bjt.length!==this.fPt.length||e!==this.nPt;this.dPt=i,this.nPt=e,this.XL=t.ct,null!=this.xjt||(this.xjt=t.xjt),void 0===this.cPt&&(this.cPt=t.mAt),s&&this.pPt(t.bjt)}pPt(t){this.fPt.length>t.length&&(this.fPt.length=t.length);let i=0;for(let e=0;e<t.length;e++){const s=t[e],n=this.nPt&&e===t.length-1,r=this.iN+i;if(e<this.fPt.length)this.fPt[e].hPt(r,n);else{const t=new lZ(this,e,r,n,s);this.fPt.push(t)}i+=s.ct}this.gPt=i}yPt(){No(this.fPt),this.gPt=0}constructor(t,i,e,s,n){this.a9=void 0,this.fPt=[],this.gPt=0,this.iN=t,this.kjt=n.kjt,this.dPt=e,this.nPt=s,this.XL=n.ct,this.xjt=n.xjt,this.cPt=n.mAt,this.ejt=n.ejt,this.djt=n.djt,this.Ljt=n.Ljt,this.Ojt=i,this.Sjt=n.Sjt,this.pPt(n.bjt)}};!function(t){t.MPt="YES",t.TPt="v2"}(Yc||(Yc={}));var fZ=class extends Jo{};var _Z=class extends je{get va(){return this.Xa||(this.Xa=function(t){return lt(Lh(t),{get content(){return t.O},get class(){return t.kOt},get startDate(){return t.YP},get endDate(){return t.xOt},get duration(){return t.ct},get plannedDuration(){return t.COt},get endOnNext(){return t.LOt},get scte35Cmd(){return t.POt},get scte35Out(){return t.BOt},get scte35In(){return t.ROt},get customAttributes(){return t.OOt}})}(this)),this.Xa}get kOt(){return this.NPt}get YP(){return this.DPt}get xOt(){return this.SPt}get ct(){return this.XL}get COt(){return this.IPt}get LOt(){return this.EPt}get POt(){return this.bPt}get BOt(){return this.LPt}get ROt(){return this.kPt}get OOt(){return this.xPt}Yn(t){let i=!1;var e;(void 0===this.NPt&&void 0!==t.kOt&&(i=!0,this.NPt=t.kOt),void 0===this.SPt&&void 0!==t.xOt&&(i=!0,this.SPt=t.xOt),void 0===this.XL&&void 0!==t.ct&&(i=!0,this.XL=t.ct),void 0===this.IPt&&void 0!==t.COt&&(i=!0,this.IPt=t.COt),!this.EPt&&t.LOt&&(i=!0,this.EPt=t.LOt),i=this.updateCustomAttributes(t,i),void 0===this.bPt&&void 0!==t.POt&&(i=!0,this.bPt=t.POt),void 0===this.LPt&&void 0!==t.BOt&&(i=!0,this.LPt=t.BOt),void 0===this.kPt&&void 0!==t.ROt&&(i=!0,this.kPt=t.ROt),this.CPt(),this.OPt(),this.jPt(),i)&&(this.Co(new rh(this)),null==(e=this.eN)||e.Co(new eh(this)))}updateCustomAttributes(t,i){let e=i;if(t.OOt)for(const i of w.keys(t.OOt))void 0===this.xPt[i]&&(e=!0,this.xPt[i]=t.OOt[i]);return e}CPt(){this.XL&&!this.SPt&&(this.SPt=new Date(this.DPt.getTime()+qi(this.XL)))}OPt(){this.SPt&&!this.XL&&(this.XL=AT(this.SPt.getTime()-this.DPt.getTime()))}jPt(){this.nN===1/0&&(this.SPt||this.XL)&&(this.nN=gZ(this.iN,this.XL,this.DPt,this.SPt))}constructor(t,i){super(i,gZ(i,t.ct,t.YP,t.xOt),void 0,!1,t.o),this.NPt=t.kOt,this.DPt=t.YP,this.SPt=t.xOt,this.XL=t.ct,this.IPt=t.COt,this.EPt=Boolean(t.LOt),this.xPt=t.OOt||{},this.bPt=t.POt,this.LPt=t.BOt,this.kPt=t.ROt,this.CPt(),this.OPt()}};function gZ(t,i,e,s){return Po(i)?t+i:s?t+(AT(s.getTime())-AT(e.getTime())):1/0}var wZ=class extends UC{Yn(t,i){vZ(this,AZ(t),i)}kI(t){mZ(this.L.og,t),super.kI(t)}constructor(){super(void 0,void 0,Wt.DATE_RANGE)}};function vZ(t,i,e){const s=t.L.og;for(let e=s.length-1;e>=0;e--){const n=s[e],r=Vt(i,(t=>t.o===n.o));r?n.Yn(r):t.PS(n)}for(const s of i){const i=s.YP;if(void 0!==i&&!t.G0(s.o)){const n=e(i),r=new _Z(s,n);mZ(t.L.og,r),t.kI(r)}}}function AZ(t){const i=ke(),e=[];for(const s of t)if(i.has(s.o)){const t=i.get(s.o),e=Yt({},t,tf(s),{OOt:Yt({},t.OOt,s.OOt)});i.set(s.o,e)}else i.set(s.o,s),e.push(s.o);return e.map((t=>i.get(t)))}function mZ(t,i){const e=gd(t,(t=>t.kOt===i.kOt));e&&e.LOt&&e.Yn({o:e.o,xOt:i.YP})}var pZ=String.fromCharCode(95),yZ=pZ+"HLS_msn",MZ=pZ+"HLS_part",TZ=pZ+"HLS_skip",NZ="HLSMediaPlaylist",DZ=class{get Pjt(){if(0===this.Imt.length)return!1;return this.Imt[this.Imt.length-1].sPt}get ct(){return this.XL}get t_(){return this.o0}get PPt(){return this.zPt}get MOt(){return this.BPt}get yOt(){return this.RPt}get hjt(){return this.Pjt?0:this.UPt?this.UPt:this.BPt?3*this.BPt:void 0}get ojt(){var t;return null!=(t=this.QPt)?t:this.RPt?3*this.RPt:void 0}get sjt(){return this.FPt}get njt(){return this.YPt}get rjt(){return this.GPt}get Bjt(){return this.VPt}get WPt(){return void 0!==this.yOt}get HPt(){if(this.Pjt)return!0;const t=i.Kd()/1e3,e=this.qPt,s=this.XPt;return void 0!==e&&t-e<s}get qPt(){return this.ZPt}get KPt(){if(this.JPt)return i.Kd()/1e3-this.JPt}get ePt(){return this.aPt}get XPt(){var t;return null!=(t=this.BPt)?t:void 0===this.ZPt?5:1}get nst(){return this.Imt}get jjt(){return this.$Pt}get tzt(){return this.izt}set tzt(t){this.izt=t}get Cn(){return this.uS}get ezt(){return this.szt}tOt(t){if(!t)return this.mAt;const e=i.Dh(this.mAt);return void 0!==t.djt&&e.searchParams.append(yZ,String(t.djt)),void 0!==t.nzt&&e.searchParams.append(MZ,String(t.nzt)),void 0!==t.qm&&e.searchParams.append(TZ,t.qm),e.href}Pht(t){const i=this.Imt;if(0===i.length)return;const e=t-i[0].djt;return e<0||e>=i.length?void 0:i[e]}rzt(t){if(0===this.Imt.length)return;const i=vG(SZ.Lb,this.Imt,t);if(!(i<0)){const e=this.Imt[i];return t===e.WT&&i+1<this.Imt.length?this.Imt[i+1]:e}{const i=this.Imt[this.Imt.length-1];if(t===i.WT)return i}}hzt(t){if(0===this.Imt.length)return;const i=this.Imt[0];if(t<i.WT)return i;const e=this.Imt[this.Imt.length-1];return t>=e.VT?e:this.rzt(t)}Xjt(t){const i=this.hzt(t);if(void 0===i)return;for(let e=i.djt-this.Imt[0].djt;e>=0;e--){const i=this.Imt[e];if(void 0!==i.xjt)return new Date(i.xjt.getTime()+1e3*(t-i.VT))}}Zjt(t){let i;for(const e of this.Imt)if(IZ(e))if(void 0===i)i=e;else{if(!(e.xjt.getTime()<=t.getTime()))break;i=e}if(void 0!==i)return i.VT+(t.getTime()-i.xjt.getTime())/1e3}ozt(t){switch(t){case Pt.gjt:return this.azt;case Pt.wjt:return this.uzt;default:return}}hPt(t){var e;void 0===this.BPt&&(this.BPt=null!=(e=t.Qjt)?e:this.czt(t));void 0===this.UPt&&void 0!==t.hjt&&(this.UPt=t.hjt),void 0===this.RPt&&void 0!==t.yOt&&(this.RPt=t.yOt),void 0===this.QPt&&void 0!==t.ojt&&(this.QPt=t.ojt),this.FPt=t.sjt,this.YPt=t.njt,this.GPt=t.rjt,this.VPt=t.Bjt,this.kmt(t),this.lzt(t);const s=Vt(t.Rjt,(t=>t.Rg===Pt.gjt)),n=Vt(t.Rjt,(t=>t.Rg===Pt.wjt));this.azt=s?{mAt:s.mAt,Rg:s.Rg,Ojt:t.Ojt}:void 0,this.uzt=n?{mAt:n.mAt,Rg:n.Rg,Ojt:t.Ojt}:void 0,this.ZPt=i.Kd()/1e3;const r=this.o0.jn(this.o0.U-1);this.dzt();const h=this.o0.jn(this.o0.U-1);(!this.JPt||h-r>0)&&(this.JPt=this.ZPt),null!=this.uS||(this.uS=t.Cn)}dzt(){this.zPt=this.fzt(),this.o0=this._zt(this.zPt),this.XL=this.gzt()}fzt(){const t=this.nst;if(0===t.length)return Ai.kB();const i=t[0].VT,e=t[t.length-1].WT;return new Ai([i,e])}_zt(t){if(0===t.U||this.Pjt)return t;const i=t.Cn(0),e=t.jn(0)-this.Syt;return e<i?Ai.bB(i):new Ai([i,e])}get Syt(){return this.Pjt?0:null!=(e=null!=(i=null!=(t=this.wzt)?t:this.ojt)?i:this.hjt)?e:0;var t,i,e}gzt(){return 0===this.Imt.length?0:this.Pjt?cd(this.Imt,(t=>{var i;return null!=(i=t.ct)?i:t._Pt})):1/0}czt(t){let i;for(const e of t.nst)if(void 0!==e.ct){const t=_.max(1,_.round(e.ct));(void 0===i||i<t)&&(i=t)}if(void 0===i)throw new g("HLSModel - Could not determine required segment target duration.");return i}kmt(t){if(0===t.nst.length)return No(this.Imt),void this.vzt();const i=this.Azt(t);if(!i)return;let e,s,n;i.mzt>0&&this.Imt.splice(0,i.mzt);const r=t.cjt;if(r>0){if(r>this.Imt.length)throw new fZ("New playlist skips over missing segments.");const i=this.Imt[r-1];if(void 0===i.ct)throw new fZ("New playlist skips over an incomplete segment.");e=i.uPt+i.ct,n=i.Ojt-t.Ojt,s=r;for(let t=0;t<r;t++)this.Imt[t].yPt()}else e=i.pzt,n=0,s=0;for(let i=0;i<t.nst.length;i++,s++){const r=t.nst[i],h=0===i,o=t.Pjt&&i===t.nst.length-1,a=r.ct,u=r.Ojt+n;if(s<this.Imt.length){const t=this.Imt[s];0,t.hPt(r,h,o)}else{let t=r;if(this.Imt.length>0&&void 0===t.kjt){t=Yt({},t,{kjt:this.Imt[this.Imt.length-1].kjt})}const i=new dZ(e,u,h,o,t);i.ePt=this.aPt,this.Imt.push(i)}void 0!==a&&(e+=a)}}Azt(t){if(0===this.Imt.length)return{mzt:0,pzt:0};const i=this.Imt[0].djt,e=this.Imt[this.Imt.length-1].djt,s=t.nst[0].djt-t.cjt,n=t.nst[t.nst.length-1].djt;let r=0,h=0;if(s<i){const e=this.nst[0].xjt,n=t.nst[0].xjt;if(!(e&&n&&e<n))return void er.aOt(NZ,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+i+")");r=this.Imt.length,this.vzt()}else{if(n<e)return void er.aOt(NZ,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+e+")");if(e<s){var o;h=null!=(o=function(t,i){const e=gd(t,(t=>void 0!==t.xjt));if(void 0===e)return;const s=function(t){let i=0;for(const s of t){if(s.Ljt)return;if(s.xjt)return[s,i];var e;i+=null!=(e=s.ct)?e:0}return}(i.nst);if(void 0===s)return;const[n,r]=s;if(e.Ojt!==n.Ojt)return;const h=(n.xjt.getTime()-e.xjt.getTime())/1e3;return e.uPt+h-r}(this.Imt,t))?o:function(t,i,e){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:_.max(e,s._Pt),h=e*(i-s.djt-1);return s.uPt+r+h}(this.Imt,s,this.BPt),er.oOt(NZ,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+e+"), resetting playlist and restarting at "+h+"s"),r=this.Imt.length,this.vzt()}else{0;const t=tc(this.Imt,(t=>t.djt===s));0,h=this.Imt[t].uPt,t>0&&(r=t)}}return{mzt:r,pzt:h}}lzt(t){let i=t.jjt.map(kX);if(t.rjt&&t.Fjt.qm===Yc.TPt&&(i=this.$Pt.concat(i)),this.$Pt=AZ(i),t.ljt)for(const i of t.ljt){const t=tc(this.$Pt,(t=>t.o===i));t>=0&&Kn(this.$Pt,t)}}yzt(t,i){if(this.aPt!==t){this.aPt=t;for(const t of this.Imt)t.ePt=this.aPt;this.dzt()}this.szt=i}vzt(){this.aPt=void 0,this.szt=void 0}constructor(t,i,e){this.ZPt=void 0,this.JPt=void 0,this.azt=void 0,this.uzt=void 0,this.BPt=void 0,this.RPt=void 0,this.UPt=void 0,this.QPt=void 0,this.Imt=[],this.$Pt=[],this.FPt=!1,this.YPt=void 0,this.GPt=!1,this.VPt=Ke.hT,this.o0=Ai.kB(),this.zPt=Ai.kB(),this.XL=void 0,this.izt=-1/0,this.szt=void 0,this.mAt=t,this.uS=i,this.wzt=e}},SZ=class t{static get Lb(){return null!=this.yst||(this.yst=new t),this.yst}Tmt(t){return t.VT}Nmt(t){return t.WT}Dmt(t,i){return rr(t,i)}Smt(t,i,e){return(t-i)/(e-i)}};function IZ(t){return void 0!==t.xjt}function Ts(t){return void 0!==t.bjt}function EZ(t){return Ts(t)?t.lPt:0===t.oPt&&t.rPt.lPt}function bZ(t,i){return Ts(t)?Ts(i)?t.djt+1===i.djt:0===i.oPt&&bZ(t,i.rPt):t.oPt===t.rPt.bjt.length-1?bZ(t.rPt,i):!Ts(i)&&t.rPt===i.rPt&&t.oPt+1===i.oPt}var LZ=class extends Jo{get name(){return"DiscontinuityMisalignmentError"}constructor(){super("Tried to wait for multiple discontinuity mappings at the same time")}};var kZ=class{Mzt(t){const i=this.Tzt.get(t);return void 0!==i&&xZ(i)}Nzt(t){if(this.Dzt()>t)return Promise.reject(new LZ);const i=[];for(const s of this.Szt){var e;if(s<t)null==(e=this.Tzt.get(s))||e.Izt.Jb(new LZ),this.Tzt.delete(s);else i.push(s)}return this.Szt=i,-1===this.Szt.indexOf(t)&&this.Szt.push(t),this.Ezt(t).Izt.tL}bzt(t){const i=this.Tzt.get(t);if(!i||!xZ(i))throw new g("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return i}Lzt(t){return this.bzt(t).QD}kzt(t,i){const e=Ts(i)?i:i.rPt,s=this.bzt(e.Ojt);let n=t.ET(s.QD);if(s.xzt){const t=is.pD(i.VT).LN(n);if(t.IN().pN(Nv())){const i=_.round(t.mN()/Tv().mN());n=n.ET(Tv().nD(i))}}return n}Czt(t,i){return this.kzt(t,i).LN(t)}Ozt(t,i,e,s,n,r){this.jzt<t&&(this.jzt=t);const h=this.Ezt(t);void 0===h.QD&&(h.Pzt.some((t=>t.ght===i))||(h.Pzt.push({ght:i,zzt:e,Bzt:s.gD(e.xp),Rzt:n,xzt:r}),this.Uzt(h,t)))}Uzt(t,i){if(t.QD||!this.Qzt(t))return;const e=function(t){return Md(t,CZ)}(t.Pzt);t.QD=e.Bzt.LN(e.zzt),t.xzt=t.Pzt.some((t=>t.xzt)),t.Izt.Zb(),No(t.Pzt),Qr(this.Szt,i)}Qzt(t){return this.Fzt.length>0&&this.Fzt.every((i=>t.Pzt.some((t=>t.ght===i))))}Ezt(t){if(this.Tzt.has(t))return this.Tzt.get(t);{const i={QD:void 0,xzt:!1,Izt:new ue,Pzt:[]};return this.Tzt.set(t,i),i}}Yzt(t){this.Fzt=t,this.Tzt.forEach(((t,i)=>this.Uzt(t,i)))}Gzt(){this.jzt=-1}Dzt(){return this.jzt}Ud(){this.Tzt.forEach((t=>t.Izt.qd())),this.Tzt.clear()}constructor(){this.Fzt=[],this.Tzt=I(),this.Szt=[],this.jzt=-1}};function xZ(t){return void 0!==t.QD}function CZ(t,i){return-function(t,i){if(t.xzt||i.xzt)return function(t,i){let e=t.LN(i);return t.xN()||i.xN()||(e.MN(Nv())?e=e.LN(Tv()):e.SN(Nv().bN())&&(e=e.ET(Tv()))),e}(t.zzt,i.zzt).yN(is.zN);return t.zzt.yN(i.zzt)}(t,i)||function(t,i){return t.Rzt===i.Rzt?Ri.Zr:t.Rzt?Ri.ul:Ri.hd}(t,i)||function(t,i){return t.Bzt.yN(i.Bzt)}(t,i)}var OZ=class{get Vzt(){return this.Wzt}get cOt(){return this.Hzt}get iT(){return this.qzt}hPt(t,i){if(In(t))if(0===this.Hzt.length)this.Xzt(t);else{if(!i)return void er.aOt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");i.DCt.hPt(t)}else{if(0!==this.Hzt.length)return void er.aOt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.Zzt(t)}}Xzt(t){const i=this.Kzt(t.mAt);i.hPt(t);const e=this.Jzt(gi.Mm,i),s=this.Jzt(gi.ym,i),n=new aZ({mAt:i.mAt,wP:0,gAt:0,wAt:NaN,Mst:void 0,xEt:void 0,Fct:0,VOt:[],qOt:void 0,KOt:void 0,WOt:void 0,ZOt:void 0,XOt:void 0,HOt:void 0},i,[e,s]);this.Hzt.push(n)}Zzt(t){this.Wzt.push(...t.Sjt);const i=this.$zt(t);for(const e of t.Ijt){const s=i.filter((t=>PZ(t,e)));this.tBt(e,s);const n=new aZ(e,this.Kzt(e.mAt,t.Cn),s);this.Hzt.push(n)}}Kzt(t,i){let e=this.iBt.get(t);return void 0===e&&(e=new DZ(t,i,this.wzt),this.iBt.set(t,e)),e}$zt(t){const i=[];for(const e of t.Bp)if(void 0===e.mAt){for(const s of t.Ijt)if(jZ(e.Rg,e.bCt,s)){const t=new tX(e,this.Kzt(s.mAt));i.push(t)}}else{const t=new tX(e,this.Kzt(e.mAt));i.push(t)}return i}Jzt(t,i){return new tX({Rg:t,mAt:void 0,bCt:"",gs:void 0,GOt:void 0,l:"",SCt:!0,ICt:!1,ECt:!1,xCt:void 0,LCt:void 0,bEt:void 0},i)}tBt(t,i){const e=i.filter((t=>t.Rg===gi.Mm)),s=i.filter((t=>t.Rg===gi.ym)),n=t.Mst&&(t.Mst.GEt||t.Mst.FEt);if((!n||t.Mst.GEt)&&0===s.length){const e=this.Jzt(gi.ym,this.Kzt(t.mAt));i.push(e)}if((!n||t.Mst.FEt)&&0===e.length){const e=this.Jzt(gi.Mm,this.Kzt(t.mAt));i.push(e)}t.Mst&&t.Mst.UOt}eBt(t){for(const i of this.Hzt)for(const e of i.vOt)if(e===t)return e}sBt(t){for(const i of this.Hzt)if(i===t)return i}nBt(t){for(const i of this.Hzt)if(qo(i.vOt,t))return i}Ud(){No(this.Hzt),No(this.Wzt),this.iBt.clear(),this.qzt.Ud()}constructor(t,i){this.Hzt=[],this.Wzt=[],this.iBt=ke(),this.qzt=new kZ,this.rBt=t,this.wzt=i}};function jZ(t,i,e){switch(t){case gi.Mm:return e.WOt===i;case gi.ym:return e.ZOt===i;case gi.Tm:return e.XOt===i;case gi.YOt:return e.HOt===i}return!1}function PZ(t,i){return jZ(t.Rg,t.bCt,i)&&(!t.kCt||t.DCt.mAt===i.mAt)}var Xs,zZ=class extends wn{constructor(t){super(Xs.hBt),this.jCt=t}},BZ=class extends wn{constructor(t){super(Xs.oBt),this.jCt=t}},Fn="HlsModelUpdater";!function(t){t.hBt="aBt",t.oBt="uBt"}(Xs||(Xs={}));var Nn=class extends Bo{get cBt(){return this.lBt}get dBt(){return this.fBt}get Tr(){return this.NAt}get _Bt(){return this.gBt}async wBt(t){const i=this.NAt.rBt;if(!i)throw new g("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.Co(new sk);const e=await this.vBt(i,{},2,!0,t),s=e.DCt;if(!EX(s)&&!In(s))throw new g("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");EX(s)||er.Xp(Fn,"Detected media playlist only HLS stream."),this.ABt(s),e.mBt&&(this.fBt=!0,await this.pBt(t)),this.lBt=!0}async yBt(t,i,e,s){const n=this.NAt.eBt(t);if(!n)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={djt:i,nzt:e,qm:FZ(n)},h=qi(_.max(1,3*t.DCt.XPt));try{await this.MBt(n,r,s,h)}catch(t){throw yo(t),this.TBt(n),t}}NBt(t,i){const e=this.NAt.eBt(t);if(!e)throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={djt:void 0,nzt:void 0,qm:FZ(e)},n=qi(_.max(1,3*t.DCt.XPt));return this.MBt(e,s,i,n)}DBt(t,i){return this.SBt.has(t.Mg)||this.SBt.set(t.Mg,new ue),Ys(this.SBt.get(t.Mg).tL,i)}TBt(t){this.Co(new BZ(t))}async MBt(t,e,s,n){const r=t.DCt.tOt(e);let h;try{h=(await this.vBt(r,e,0,this.fBt,s,n)).DCt}catch(e){throw yo(e),t.DCt.tzt=i.Kd(),e}if(!In(h))throw new g("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");if(this.IBt&&t!==this.IBt&&!this.IBt.DCt.HPt)try{await this.NBt(this.IBt,s)}catch(i){yo(i),this.IBt=t,this.EBt()}try{this.ABt(h,t)}catch(i){if(i instanceof fZ&&void 0!==e.qm){const i=Yt({},e,{qm:void 0});return this.MBt(t,i,s,n)}throw i}this.bBt(t),this.IBt=t}async vBt(t,i,e,s,n,r){if(er.Xp(Fn,"Loading HLS playlist at "+t+"."),s){const i=await this.LBt(t,n);if(void 0!==i)return{DCt:i,mBt:!0}}return{DCt:await this.kBt(t,i,e,n,r),mBt:!1}}async LBt(t,i){try{const e=await this.Tot.jet([t]);if(fo(i),void 0!==e)return oZ(e.responseURL,{},e.data)}catch(t){yo(t)}}async kBt(t,i,e,s,n){const r={zu:t,wI:oe.Ru,pI:this.tMt,gI:yt.GET,Rg:sa.JS,Wd:s,jS:n},h=await qc((()=>this.xBt(r)),s,e);return oZ(h.LI,i,h.zm)}async xBt(t){const i=await this.EI.LS(t);return{zm:await i.bI(),LI:i.LI}}async pBt(t){fo(t);const i=[];for(const e of this.NAt.cOt)for(const s of e.vOt)i.push(this.CBt(s,t));await Promise.all(i)}async CBt(t,i){try{const e=await this.Tot.jet([t.DCt.mAt]);fo(i),void 0===e||t.DCt.HPt||await this.NBt(t,i)}catch(t){yo(t)}}EBt(){for(const t of this.NAt.cOt)for(const i of t.vOt)i!==this.IBt&&void 0!==i.DCt.ePt&&(i.DCt.HPt?this.bBt(i):i.DCt.vzt())}bBt(t){if(0!==t.DCt.nst.length){if(!this.IBt)return this.IBt=t,void this.IBt.DCt.yzt(0,void 0);if(this.OBt(this.IBt),!this.OBt(t)&&void 0===t.DCt.ePt){const i=this.jBt(t,this.IBt);er.oOt(Fn,"Assuming global timeline offset of "+i+"s for rendition "+t.DCt.mAt+"."),t.DCt.yzt(i,void 0)}}}jBt(t,i){if(RZ(t)){const e=t.DCt.nst[0],s=i.DCt.nst[0];return er.oOt(Fn,"Synchronizing by start of VOD: "+s.VT+" vs "+e.VT),s.VT-e.uPt}const e=function(t,i){let e=t.length-1,s=i.length-1;for(;e>=0&&s>=0;){const n=t[e],r=i[s];if(n.Ojt>r.Ojt)e--;else if(n.Ojt<r.Ojt)s--;else if(n.Ljt){if(r.Ljt)return{segment:n,referenceSegment:r};s--}else e--}return}(t.DCt.nst,i.DCt.nst);if(void 0!==e){const{segment:t,referenceSegment:i}=e;return er.oOt(Fn,"Synchronizing by start of discontinuity #"+i.Ojt+": "+i.VT+" vs "+t.VT),i.VT-t.uPt}const s=QZ(t.DCt.nst);if(void 0!==s){const t=QZ(i.DCt.nst);if(void 0!==t){er.oOt(Fn,"Synchronizing by PDT:",t.xjt.toISOString()+" vs "+s.xjt.getTime());return t.VT-s.uPt-(t.xjt.getTime()-s.xjt.getTime())/1e3}}const n=UZ(i),r=UZ(t);var h;const o=null!=(h=t.DCt.ePt)?h:0;return er.oOt(Fn,"Synchronizing by last segment:",n+" vs "+r),n-r+o}OBt(t){const i=this.NAt.eBt(t);if(!i)return!1;if(RZ(i))return!1;const e=function(t,i){return gd(t,(t=>void 0!==t.a9&&i.Mzt(t.Ojt)))}(i.DCt.nst,this.NAt.iT);if(void 0===e)return!1;if(i.DCt.ezt===e.Ojt)return!0;const s=this.NAt.iT.kzt(e.a9,e).mN()-e.uPt;return er.oOt(Fn,"Synchronize by media timestamp: "+s+"s for rendition "+t.DCt.mAt+"."),i.DCt.yzt(s,e.Ojt),(void 0===this.IBt||void 0===this.IBt.DCt.ezt||this.IBt.DCt.ezt<e.Ojt)&&(this.IBt=i),!0}ABt(t,i){var e;(this.NAt.hPt(t,i),In(t)&&i)&&(this.gBt=i,this.Co(new zZ(i)),null==(e=this.SBt.get(i.Mg))||e.Zb(),this.SBt.delete(i.Mg));this.Co(new tV)}PBt(t,i){for(const e of this.NAt.cOt){const s=Vt(e.dOt,(t=>t.DCt===i));void 0!==s&&void 0!==t.GEt&&(s.Mst=xX(s.Mst,t));const n=Vt(e.lOt,(t=>t.DCt===i));void 0!==n&&void 0!==t.FEt&&(n.Mst=xX(n.Mst,t)),e.Vjt||void 0===s&&void 0===n||(e.Mst=xX(e.Mst,t))}}zBt(t,i){for(const e of this.NAt.cOt){const s=Vt(e.dOt,(t=>t.DCt===i));void 0!==s&&void 0===t.GEt&&e.Kjt(s);const n=Vt(e.lOt,(t=>t.DCt===i));void 0!==n&&void 0===t.FEt&&e.Kjt(n)}}Ud(){this.Vo(),this.NAt.Ud(),this.SBt.forEach((t=>t.qd())),this.SBt.clear()}constructor(t,i,e,s,n){super(),this.EI=t,this.Tot=i,this.tMt=e,this.lBt=!1,this.fBt=!1,this.IBt=void 0,this.gBt=void 0,this.SBt=I(),this.NAt=new OZ(s,n)}};function RZ(t){return t.DCt.Pjt||t.DCt.Bjt===Ke._jt}function UZ(t){const i=t.DCt.nst;return i[i.length-1].WT}function QZ(t){return gd(t,(t=>void 0!==t.xjt))}function FZ(t){if(void 0!==t.DCt.njt&&!t.DCt.Pjt&&!(void 0===t.DCt.qPt||i.Kd()/1e3-t.DCt.qPt>=t.DCt.njt/2))return t.DCt.rjt?Yc.TPt:Yc.MPt}var _l,Cl=class{get nt(){return this.kgt}lzt(t){if(0===t.DCt.jjt.length)return;this.BBt||(this.BBt=this.hv.DI(Mi.Dm,void 0,void 0,void 0,void 0,Wt.DATE_RANGE),this.kgt.tt(this.BBt));vZ(this.BBt,t.DCt.jjt,(i=>{var e;return null!=(e=t.DCt.Zjt(i))?e:NaN}))}constructor(t,i){this.RBt=t=>{this.lzt(t.jCt)},this.$Tt=t,this.hv=i,this.kgt=new Lr,this.$Tt.yn(Xs.hBt,this.RBt)}},YZ=class extends wn{constructor(){super(Jc.ACt)}},yl=class{get UBt(){return this.IJ}get wf(){return TU(this.tnt.wf,this.tnt.a$)}get nst(){return this.Imt}get Bgt(){return this.Ogt}QBt(t){var i;return null==(i=this.FBt(t))?void 0:i.jCt}Sut(t){this.IJ=t,this.YBt()}Dut(t,i,e,s,n,r){this.Imt.push({jCt:t,Mot:i,GBt:Ai.LB(n,r),VBt:Ai.LB(e,s)}),this.YBt()}FBt(t){return Vt(this.Imt,(i=>i.VBt.gr(t)))}Pht(t){return Vt(this.Imt,(i=>i.Mot===t))}tut(t,i){return Vt(this.Imt,(e=>e.jCt===t&&bZ(e.Mot,i)))}n$(){const t=this.wf;t.U>0&&(this.Ogt=t.jn(t.U-1))}YBt(){const t=this.tnt.wf;this.Imt=this.Imt.filter((i=>0!==t.Sn(i.VBt).U))}constructor(t){this.tnt=t,this.Imt=[],this.IJ=void 0,this.Ogt=void 0}},GZ=class{get Rg(){return this.$0}get WBt(){return this.$0===fi.Mm||this.$0===fi.ym}get HBt(){return this.cht}get qBt(){return this.XBt}get TIt(){return void 0!==this.ZBt}KBt(){if(this.TIt)throw new g("Cannot perform new operation while BufferAppender is still busy")}Hst(t){this.tnt!==t&&(this.KBt(),this.tnt=t,this.cht=new yl(t))}JBt(){return this.ZBt?this.ZBt.tL:Promise.resolve()}$Bt(t){const i=this.cht.Bgt;return void 0!==i&&this.tRt(t,i)}tRt(t,i){var e;const s=_.min(t,i);var n;return null!=(n=null==(e=this.cht.wf.aB().wB(this.qBt).Mv(s))?void 0:e.gr(i))&&n}iRt(t){return this.cht.QBt(t)}qd(){this.DC.qd(),this.DC=new Wr}yJ(t){this.KBt(),this.ZBt=new ue;const i=i=>{this.sRt.eRt(t),this.nRt(i)};this.MJ(t,this.DC.Wd).then(i,i)}async MJ(t,i){er.oOt(me,"Appending initializer",Tc(t.rRt.mAt)),await this.tnt.yJ(t,i),er.oOt(me,"Appended initializer",Tc(t.rRt.mAt)),this.cht.Sut(t)}But(t){this.KBt(),this.ZBt=new ue;const i=i=>{this.sRt.eRt(t),this.nRt(i)};this.hRt(t,this.DC.Wd).then(i,i)}async hRt(t,i){const e=t.jCt;if(void 0===e.DCt.MOt)throw new g("MediaBufferWrapper - Cannot append HLSAsset to "+this.$0+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.cht.wf.eB,n=this.tnt.wf;er.oOt(me,"Appending",Tc(t.rRt.mAt)),await this.tnt.AJ(t,i),er.oOt(me,"Appended",Tc(t.rRt.mAt),s,this.cht.wf.eB);const r=t.VT,h=r+t.ct,o=t.rRt,a=o.VT;var u;const c=o.VT+(null!=(u=o.ct)?u:0);this.cht.Dut(e,o,r,h,a,c);const l=this.tnt.wf.wB(n),d=this.cht.tut(e,o);if(this.Rg===fi.ym)if(d)if(this.oRt(d))if(0===l.U){if(void 0===this.cht.Pht(o)){const t=this.tnt.a$.Sn(new Ai([r,h]));this.XBt=this.XBt._B(t)}}else{const t=l.Cn(0),i=new Ai([t,h]);if(this.XBt=this.XBt.wB(i),t>r){const i=this.tnt.a$.Sn(new Ai([r,t]));this.XBt=this.XBt._B(i)}}else{const t=l.U>0&&l.Cn(0)<r?l.Cn(0):r;this.XBt=this.XBt.wB(new Ai([t,h]))}else if(0===l.U){const t=this.tnt.a$.Sn(new Ai([r,h]));this.XBt=this.XBt._B(t)}else{var f;const t=l.Cn(0),i=null==(f=n.Mv(r))?void 0:f.jn(0),e=i&&i>r?i:r;if(t>e){const t=this.tnt.a$.Sn(new Ai([e,l.Cn(0)]));this.XBt=this.XBt._B(t)}}t.rRt.sPt&&this.cht.n$()}oRt(t){const i=t.VBt,e=i.Cn(0),s=i.jn(i.U-1),n=i.nB(0),r=i.hB(i.U-1);return this.XBt.AB(e,s,n,r)}constructor(t,i,e,s,n){this.ZBt=void 0,this.DC=new Wr,this.XBt=Ai.kB(),this.nRt=t=>{this.ZBt&&(t?mh(t)&&this.WBt?this.aRt.VW(this.tnt.wf.EB)?this.ZBt.Zb():this.ZBt.Jb(t):ut(t)?this.ZBt.Zb():this.ZBt.Jb(t):this.ZBt.Zb(),this.ZBt=void 0)},this.$0=t,this.sRt=e,this.tnt=i,this.cht=s,this.aRt=n}},VZ=class{async uRt(t,i,e,s){const n=await this.cRt(i,s);return await this.lRt.uRt(t,n,e)}async cRt(t,i){var e;if((null==(e=this.dRt)?void 0:e.zu)!==t){er.oOt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const e=await this.EI.LS({zu:t,wI:oe.WS,gI:yt.GET,Wd:i,Rg:sa.iI,AI:Kt.uI,pI:this.tMt}),s=await e.gj(),n=new j(s);this.dRt={zu:t,zm:n}}return this.dRt.zm}constructor(t,i,e){this.lRt=t,this.EI=i,this.tMt=e,this.dRt=void 0}},WZ=class{async LS(t,i,e,s,n){const r=await this.fRt(t,i,e,oe.WS,s,n),h=await r.gj(n);return{httpStatusCode:r.OS,response:new j(h)}}async _Rt(t,i,e,s,n){return(await this.fRt(t,i,e,oe.qS,s,n)).vV(n)}async fRt(t,i,e,s,n,r){let h;t.Zmt&&(h=Qc(t.Zmt.Cn,t.Zmt.U),0===h[0]&&h[1]===jh&&(h=void 0));const o=h?{Range:"bytes="+h[0]+"-"+h[1]}:void 0,a=new ss({zu:t.PM,wI:s,_I:o,pI:this.tMt,gI:yt.GET,Rg:i,AI:e,mI:this.Fht,MI:s===oe.qS,yI:n,Wd:r});try{const i=await this.Tot.Uet(t.PM,h);if(fo(r),void 0!==i)return null==n||n(i.buffer.byteLength,i.buffer.byteLength),new fa({LS:a,wI:a.wI,zm:i.buffer})}catch(t){yo(t)}return await qc((()=>Ys(this.EI.LS(a),a.Wd)),r,this.jtt)}constructor(t,i,e,s,n=2){this.EI=t,this.Tot=i,this.Fht=e,this.tMt=s,this.jtt=n}},ol=class{gRt(){return this.wRt.DCt.sjt}async vRt(t,e,s){if(!this.gRt())throw new g("Could not perform blocking playlist update.");try{await this.ARt(),fo(s),await this.$Tt.yBt(this.wRt,t,e,s),this.An=i.Kd()}catch(t){throw ut(t)&&this.mRt(),t}this.mRt()}pRt(t){return this.$Tt.DBt(this.wRt,t)}mRt(){if(!this.yRt&&!this.MRt){const t=()=>{this.yRt=void 0};this.yRt=this.TRt(this.NRt.Wd).then(t,t)}}async ARt(){this.yRt&&(this.NRt.qd(),this.NRt=new Wr,await this.yRt.catch(na),this.yRt=void 0)}async TRt(t){for(;;){if(this.wRt.DCt.Pjt&&this.wRt.DCt.HPt)return;const e=i.Kd()-this.An,s=1e3*this.wRt.DCt.XPt;e<s&&await N(s-e,t);try{await this.$Tt.NBt(this.wRt,t)}catch(t){throw yo(t),this.$Tt.TBt(this.wRt),t}this.An=i.Kd()}}Ud(){this.MRt=!0,ha(this.ARt())}constructor(t,i){this.yRt=void 0,this.NRt=new Wr,this.An=-1/0,this.MRt=!1,this.$Tt=t,this.wRt=i,this.mRt()}};!function(t){t[t.gjt=0]="gjt",t[t.wjt=1]="wjt",t[t.$S=2]="$S",t[t.tI=3]="tI"}(_l||(_l={}));var Xa="AssetExtractor",HZ=class{DRt(t,i,e){let s=i;for(const i of this.SRt){if(s>=t)return!0;if(s<i.Cn)return!1;if(s<i.jn){if(e<=i.jn)return!0;s=i.jn}}return s>=t}IRt(t,i){const e=[];for(let s=0;s<this.SRt.length;s+=1){const n=this.SRt[s],r=t-n.Cn,h=n.zm.length,o=_.min(h,_.max(r,0)),a=_.max(0,i+r),u=Tg(n.zm,o,a);u.length&&(s=this.ERt(s,n,t,o,a),e.push(u))}return e}bRt(t,i){this.SRt.push({Cn:t,jn:t+i.length,zm:i})}ERt(t,i,e,s,n){let r=t;this.SRt.splice(r,1),r-=1,i.Cn<e&&(r+=1,this.SRt.splice(r,0,{Cn:i.Cn,jn:e,zm:Tg(i.zm,0,s)}));const h=e+n-s;return h<i.jn&&(r+=1,this.SRt.splice(r,0,{Cn:h,jn:i.jn,zm:Tg(i.zm,n)})),r}constructor(){this.SRt=[]}},qZ=class{get LRt(){return this.kRt}async xRt(){const t=await this._G.read();if(t.done)throw this.kRt=1/0,new g("No more data can be read from the given stream.");return this.kRt+=t.value.length,t.value}async CRt(t){await this._G.cancel(t)}constructor(t,i){this.kRt=i,this._G=t.getReader()}},XZ=class{ORt(){this.jRt.Zb(),this.jRt=new ue}PRt(t){const{Kmt:i,Jmt:e}=KZ(this.cPt.Zmt),s=this.zRt.IRt(i,e-i);er.oOt(Xa,"Collected "+s.length+" chunks.");for(const i of s)t.enqueue(i)}async readAndSliceOutAssetBytes(t){await this.BRt.tL;const{Kmt:i,Jmt:e}=KZ(this.cPt.Zmt);try{for(;;){const s=this._G.LRt,n=await this._G.xRt(),r=n.length;er.oOt(Xa,"Read "+r+" at "+s+" for extraction of "+Tc(this.cPt));const h=_.min(s+r,i)-s;if(!(h>0)){if(s+r<=e)return er.oOt(Xa,"Extracting the read data range for extraction of "+Tc(this.cPt)),t.enqueue(n),this.ORt(),ha(this.readAndSliceOutAssetBytes(t));{const i=e-s,h=Tg(n,0,i),o=Tg(n,i);return h.length>0&&(er.oOt(Xa,"Extracting "+h.length+" bytes for extraction of "+Tc(this.cPt)),t.enqueue(h)),er.oOt(Xa,"Of the read "+r+" bytes, the last "+o.length+" will be stored locally for extraction of "+Tc(this.cPt)),this.zRt.bRt(s+i,o),er.oOt(Xa,"Extraction of "+Tc(this.cPt)+" completed as the entire request has been fulfilled."),this.RRt(t),void(this.URt&&(er.oOt(Xa,"Aborting stream upstream as no more bytes are needed from "+Tc(this.cPt)+"."),await this._G.CRt("AssetExtraction - AbortOnEnd")))}}{const i=Tg(n,0,h),e=Tg(n,h);if(er.oOt(Xa,"Of the read "+r+" bytes, the first "+h+" will be stored locally for extraction of "+Tc(this.cPt)),this.zRt.bRt(s,i),e.length>0)return er.oOt(Xa,"Extracting "+e.length+" bytes for extraction of "+Tc(this.cPt)),t.enqueue(e),this.ORt(),ha(this.readAndSliceOutAssetBytes(t))}}}catch(i){er.oOt(Xa,"Extraction of "+Tc(this.cPt)+" completed as the entire source stream has been read."),this.RRt(t)}}RRt(t){t.close(),this.ORt(),this.QRt.Zb()}start(t){er.oOt(Xa,"Preparing to push all collected data to controller for extraction of "+Tc(this.cPt)),this.PRt(t),er.oOt(Xa,"Collected data pushed to controller for extraction of "+Tc(this.cPt));const{Jmt:i}=KZ(this.cPt.Zmt);this._G.LRt>=i?(er.oOt(Xa,"Extraction of "+Tc(this.cPt)+" completed as the entire request has been fulfilled."),this.RRt(t)):(er.oOt(Xa,"Continuing read from original stream for extraction of "+Tc(this.cPt)),ha(this.readAndSliceOutAssetBytes(t)))}get FRt(){return this.QRt.tL}pull(){return this.BRt.Zb(),this.BRt=new ue,this.jRt.tL}constructor(t,i,e,s){this.QRt=new ue,this.cPt=t,this._G=i,this.zRt=e,this.URt=s,this.BRt=new ue,this.jRt=new ue}},ZZ=class{LT(t){if(!bX(this.cPt,t))return!1;const{Kmt:i,Jmt:e}=KZ(t.Zmt);return this.zRt.DRt(this.YRt.LRt,i,e)}async X_t(t,i){void 0===i&&(i=!1);const e=this.YRt,s=this.zRt;if(er.Xp(Xa,"Extracting data from "+Tc(t)+" out of "+Tc(this.cPt)),this.GRt&&(er.oOt(Xa,"Awaiting previous extraction before extracting "+Tc(t)+" out of "+Tc(this.cPt)),await this.GRt),!this.LT(t))throw new g("The extractor does not contain the data requested");const n=new XZ(t,e,s,i);return this.GRt=n.FRt,new et(n)}constructor(t,i){this.cPt=i;const{Kmt:e}=KZ(this.cPt.Zmt);this.YRt=new qZ(t,e),this.zRt=new HZ}};function KZ(t){if(t){const i=t.Cn;return{Kmt:i,Jmt:void 0!==t.U?i+t.U:jh}}return{Kmt:0,Jmt:jh}}var JZ=class{async $n(){const t=await this.VRt._Rt(this.cPt,sa.tI,Kt.hT,void 0,this.DC.Wd);return new ZZ(t,this.cPt)}LT(t){return bX(this.cPt,t)}async X_t(t,i){void 0===i&&(i=!1);const e=await this.iwt;return await Ys(e.X_t(t,i),this.DC.Wd)}qd(){this.iwt.catch(na),this.DC.qd()}constructor(t,i){this.cPt=t,this.VRt=i,this.DC=new Wr,this.iwt=this.$n()}},$Z=class extends wn{constructor(t){super(rK.WRt),this.mI=t}},tK=class extends wn{constructor(t,i,e,s,n,r,h){super(rK.HRt),this.uri=t,this.qRt=i,this.mI=e,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.XRt=r,this.httpStatusCode=h}};function iK(t,i,e){const s=Ts(e)?e:e.rPt;if(i.Mzt(s.Ojt)){if(void 0!==e.a9)return i.kzt(e.a9,e).mN();if(e!==s&&void 0!==s.a9){const t=i.kzt(s.a9,s).mN();return e.VT+(t-s.VT)}}const n=t.DCt.Pht(s.djt-1);if(void 0!==n&&i.Mzt(n.Ojt)){if(n.bjt.length>0){const t=n.wPt(n.bjt.length-1);if(void 0!==t.a9){const s=i.kzt(t.a9,t).mN();return e.VT+(s-t.VT)}}if(void 0!==n.a9){const t=i.kzt(n.a9,n).mN();return e.VT+(t-n.VT)}}const r=t.DCt.Pht(s.djt+1);if(void 0!==r&&i.Mzt(r.Ojt)){if(r.bjt.length>0){const t=r.wPt(0);if(void 0!==t.a9){const s=i.kzt(t.a9,t).mN();return e.VT+(s-t.VT)}}if(void 0!==r.a9){const t=i.kzt(r.a9,r).mN();return e.VT+(t-r.VT)}}return e.VT}function eK(t){return void 0!==t.a9}function sK(t,i,e,s){for(let n=i;n<t.length;n++){const i=t[n];if(i.Ojt!==e)break;if(eK(i)){if(s(i,n))break}}}function nK(t,i,e,s){for(let n=i;n>=0;n--){const i=t[n];if(i.Ojt!==e)break;if(eK(i)){if(s(i,n))break}}}var rK,hK="HlsPlaylistDownloader";!function(t){t.WRt="segmentdownloadprogress",t.HRt="segmentdownloaded"}(rK||(rK={}));var wl=class extends Bo{ZRt(t){this.KRt.Ud(),this.KRt=new ol(this.$Tt,t),this.TIt?this.JRt=t:(this.wRt=t,this.$Rt=0,this.tUt=void 0,this.iUt=void 0)}get TIt(){return void 0!==this.eUt}JBt(){return this.eUt?this.eUt.tL:Promise.resolve()}sUt(){return this.sRt.sUt()}nUt(t){this.sRt.nUt(t)}qd(){var t,i,e;this.rUt.qd(),this.rUt=new Wr,null==(t=this.hUt)||t.qd(),this.hUt=void 0,null==(i=this.oUt)||i.qd(),null==(e=this.aUt)||e.qd(),this.oUt=void 0,this.aUt=void 0,this.$Rt=0,this.tUt=void 0,this.iUt=void 0}Ud(){this.KRt.Ud()}get jCt(){var t;return null!=(t=this.JRt)?t:this.wRt}get XIt(){if(!this.wRt.DCt.Pjt||void 0===this.tUt)return!1;const t=this.wRt.DCt.Pht(this.tUt);if(!t.sPt)return!1;if(void 0!==this.iUt){if(!t.wPt(this.iUt).sPt)return!1}return!0}uUt(t){const i=this.wRt.DCt.rzt(t);if(!i)return!1;if(void 0!==this.tUt){const e=i.djt===this.tUt;return void 0!==this.iUt?i.vPt(t)===i.wPt(this.iUt)&&e:e}return!1}cUt(t){let i;if(void 0===this.tUt||t<this.$Rt-1e-6)i=this.lUt(t);else if(i=this.dUt(this.tUt,this.iUt),void 0!==i){const[e,s]=i,n=iK(this.wRt,this.$Tt.Tr.iT,null!=s?s:e),r=3*this.wRt.DCt.MOt;_.abs(n-t)>=r&&(i=this.lUt(t))}else if(this.wRt.DCt.Pjt){if(this.wRt.DCt.Pht(this.tUt).sPt&&(i=this.lUt(t),void 0!==i&&i[0].djt===this.tUt))return}if(i){this.$Rt=t;const[e,s]=i;return 0===(null==s?void 0:s.oPt)&&void 0!==e.ct?[e,void 0]:[e,s]}}lUt(t){let i,e;const s=this.wRt.DCt.nst;if(0===s.length)return;const n=this.$Tt.Tr.iT,r=is.pD(t),h=function(t,i,e){const s=t.DCt.nst;if(0===s.length)return;const n=t.DCt.hzt(e.mN());if(!i.Mzt(n.Ojt))return;const r=n.djt-s[0].djt,h=n.Ojt;let o,a,u,c=0;if(nK(s,r,h,((t,i)=>(o=t,c=i,!0))),void 0===o&&(sK(s,r+1,h,((t,i)=>(o=t,c=i,!0))),void 0===o))return;return i.kzt(o.a9,o).NN(e)?(a=o,sK(s,c+1,h,(t=>i.kzt(t.a9,t).pN(e)?(u=t,!0):(a=t,!1)))):(u=o,nK(s,c-1,h,(t=>i.kzt(t.a9,t).NN(e)?(a=t,!0):(u=t,!1)))),void 0!==a&&void 0!==u?[a,u]:void 0}(this.wRt,n,r);let o;if(void 0!==h){const[t,i]=h,e=n.kzt(t.a9,t),s=n.kzt(i.a9,i),a=r.LN(e).mN()/s.LN(e).mN()*(i.VT-t.VT);o=t.VT+a}else o=t;const a=s[s.length-1];return a.WT<=o?(i=a,e=a.mPt(o)):s[0].VT>o?(i=s[0],e=i.wPt(0)):(i=this.wRt.DCt.rzt(o),e=null==i?void 0:i.mPt(o)),i?[i,e]:void 0}dUt(t,i){let e,s;if(e=this.wRt.DCt.Pht(t),e&&void 0!==i){if(0===e.bjt.length)return[e,void 0];s=e.wPt(i+1)}return void 0!==e&&void 0!==s||(e=this.wRt.DCt.Pht(t+1),s=null==e?void 0:e.wPt(0)),e?[e,s]:void 0}KBt(){if(this.TIt)throw new g("Cannot perform new operation while PlaylistDownloader is still busy")}fUt(t){this.KBt(),this.eUt=new ue,this._Ut(t,this.rUt.Wd).then(this.gUt,this.gUt)}wUt(){this.KRt.mRt()}async _Ut(t,i){if(this.wRt.DCt.Pjt)return;let e=this.cUt(t);for(!e&&this.KRt.gRt()&&void 0!==this.tUt&&(await this.KRt.vRt(void 0===this.iUt?this.tUt+1:this.tUt,void 0!==this.iUt?this.iUt+1:void 0,i),e=this.cUt(t)),!e&&this.KRt.gRt()&&void 0!==this.tUt&&(await this.KRt.vRt(this.tUt+1,0,i),e=this.cUt(t));!e;){er.Xp(hK,"No next segment / part available, need to update playlist before continuing."),await this.KRt.pRt(i);const s=this.jCt.DCt.nst;s[0].VT>t&&(this.iUt=void 0,this.tUt=void 0);s[s.length-1].djt<this.tUt&&(this.iUt=void 0,this.tUt=void 0),e=this.cUt(t)}}vUt(){return this.sRt.AUt()}mUt(){this.KBt();try{const t=this.wRt.DCt.ozt(Pt.gjt);t&&this.pUt(t);const i=this.wRt.DCt.ozt(Pt.wjt);i&&this.yUt(i)}catch(t){throw yo(t),this.wRt.DCt.tzt=i.Kd(),this.$Tt.TBt(this.wRt),t}}pUt(t){this.aUt&&!this.aUt.LT(t.mAt)&&(this.aUt.qd(),this.aUt=void 0),this.aUt||(this.aUt=new JZ(t.mAt,this.VRt))}yUt(t){this.oUt&&!this.oUt.LT(t.mAt)&&(this.oUt.qd(),this.oUt=void 0),this.oUt||(this.oUt=new JZ(t.mAt,this.VRt))}jht(t,e,s){this.KBt(),er.Xp(hK,"Starting download of segment "+Tc(t.mAt)+" and part "+(null==e?void 0:e.oPt)),this.eUt=new ue,this.MUt(t,e,s,this.rUt.Wd).catch((t=>{throw yo(t),this.wRt.DCt.tzt=i.Kd(),this.$Tt.TBt(this.wRt),t})).then(this.gUt,this.gUt)}async MUt(t,i,e,s){let n;if(t.kjt){var r,h;if(!e||!LX(e.rRt.mAt,null==(r=t.kjt)?void 0:r.mAt)||t.Ojt!==e.Ojt){var o;null==(o=this.hUt)||o.qd(),this.hUt=new ue;const i=this.TUt(t.kjt,t,s).then((()=>{this.hUt=void 0}));this.hUt.Xd(i)}n=null==(h=this.hUt)?void 0:h.tL}await this.NUt(t,i,n,s)}async TUt(t,i,e){const s=await this.DUt(t,i,e),n=s.kjt.zm.zm.byteLength;this.sRt.SUt(s),this.Co(new tK(s.kjt.rRt.mAt,s.Rg,this.$0,i.djt,s.jCt.Mg,n,s.kjt.Vot)),er.oOt(me,"Download initializer complete",Tc(t.mAt))}async NUt(t,i,e,s){const n=await this.IUt(t,i,s),r=n.Mot.zm.zm.byteLength;var h;e&&await Ys(e,s),this.sRt.SUt(n),this.Co(new tK(n.Mot.rRt.mAt,n.Rg,this.$0,t.djt,n.jCt.Mg,r,n.Mot.Vot)),er.oOt(me,"Download complete",Tc(null!=(h=null==i?void 0:i.mAt)?h:t.mAt))}async IUt(t,i,e){let s;if(i){if(this.oUt)if(this.oUt.LT(i.mAt)){const t=await this.oUt.X_t(i.mAt),n=await wt(t,e),r=new j(n);s=aK(i,await this.uRt(r,i.Sjt,e),200)}else this.oUt.qd(),this.oUt=void 0;s||(er.oOt(me,"Start download",Tc(i.mAt)),s=await this.EUt(i,e))}else er.oOt(me,"Start download",Tc(t.mAt)),s=await this.Bht(t,e);return this.tUt=t.djt,this.iUt=null==i?void 0:i.oPt,{Rg:"Mot",Mot:s,jCt:this.wRt,Ojt:t.Ojt}}async DUt(t,i,e){let s;if(this.aUt){var n;if(this.aUt.LT(t.mAt)){const n=await Ys(this.aUt.X_t(t.mAt),e),r=await wt(n,e),h=new j(r);s=oK(t,i,await this.uRt(h,t.Ejt?[t.Ejt]:[],e),200)}er.Xp(hK,"MAP is required for segment, downloading MAP data."),null==(n=this.aUt)||n.qd(),this.aUt=void 0}return s||(er.oOt(me,"Start download",Tc(t.mAt)),s=await this.bUt(t,i,e)),{Rg:"kjt",kjt:s,jCt:this.wRt,VT:i.VT,Ojt:i.Ojt,Sjt:i.Sjt}}async bUt(t,i,e){const{response:s,httpStatusCode:n}=await this.VRt.LS(t.mAt,sa.$S,Kt.eI,void 0,e),r=t.Ejt?[t.Ejt]:[];return oK(t,i,await this.uRt(s,r,e),n)}async Bht(t,i){if(!t.mAt)throw new g("Internal error: attempted to download an incomplete segment");let e,s;try{this.LUt(t);const n=await this.VRt.LS(t.mAt,sa.$S,Kt.hT,this.kUt,i);e=n.response,s=n.httpStatusCode}finally{this.xUt()}return function(t,i,e){return{zm:{zm:i,Rg:G.dq},Rg:_l.$S,Vot:e,rRt:t,Ojt:t.Ojt}}(t,await this.uRt(e,t.Sjt,i),s)}async EUt(t,i){let e,s;try{this.LUt(t);const n=await this.VRt.LS(t.mAt,sa.$S,Kt.hT,this.kUt,i);e=n.response,s=n.httpStatusCode}finally{this.xUt()}return aK(t,await this.uRt(e,t.Sjt,i),s)}async uRt(t,i,e){const s=Vt(i,(t=>t.gI===sc.JOt));return s?s.mAt&&s.$Ot?await this.CUt.uRt(t,s.mAt,s.$Ot,e):(er.lt(hK,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}LUt(t){var e,s,n;this.OUt=t,this.jUt=0,this.PUt=i.Kd(),this.zUt=0,this.BUt=null!=(n=null==(s=t.mAt)||null==(e=s.Zmt)?void 0:e.U)?n:0}xUt(){this.OUt=void 0,this.jUt=0,this.PUt=0,this.zUt=0,this.BUt=0}RUt(){if(void 0!==this.OUt)return{Mot:this.OUt,UUt:this.zUt,QUt:this.BUt,FUt:i.Kd()-this.PUt}}YUt(t){return void 0!==this.OUt&&(0!==this.jUt&&(!(this.BUt>0&&this.zUt>=this.BUt)&&!(t-this.jUt<500)))}constructor(t,e,s,n,r,h,o,a){super(),this.JRt=void 0,this.eUt=void 0,this.OUt=void 0,this.jUt=0,this.PUt=0,this.zUt=0,this.BUt=0,this.rUt=new Wr,this.hUt=void 0,this.$Rt=0,this.tUt=void 0,this.iUt=void 0,this.aUt=void 0,this.oUt=void 0,this.gUt=t=>{this.JRt&&(this.wRt=this.JRt,this.JRt=void 0,this.$Rt=0,this.tUt=void 0,this.iUt=void 0),this.eUt&&(t&&!ut(t)?this.eUt.Jb(t):this.eUt.Zb(),this.eUt=void 0)},this.kUt=(t,e)=>{this.zUt=t,t>0&&0===this.jUt&&(this.jUt=i.Kd()),void 0!==e&&(this.BUt=e),this.Co(new $Z(this.$0))},this.$0=t,this.$Tt=s,this.sRt=n,this.wRt=e,this.KRt=new ol(s,e),this.CUt=new VZ(o,r,a),this.VRt=new WZ(r,h,function(t){switch(t){case gi.ym:return ls.ym;case gi.Mm:return ls.Mm;case gi.Tm:case gi.YOt:return ls.Ru;default:return ls.hT}}(e.Rg),a)}};function oK(t,i,e,s){return{zm:{zm:e,Rg:G.dq},Rg:_l.gjt,Vot:s,rRt:t,Ojt:i.Ojt}}function aK(t,i,e){return{zm:{zm:i,Rg:G.dq},Vot:e,Rg:_l.wjt,rRt:t,Ojt:t.rPt.Ojt}}var lc,kl=class{get UBt(){return this.GUt}get VUt(){const t=[];for(const e of this.WUt)if("Mot"===e.Rg){const s=e.Mot.rRt,n=iK(e.jCt,this.qzt,s);var i;t.push({Mot:s,jCt:e.jCt,VT:n,WT:n+(null!=(i=s.ct)?i:0)})}return t}get HUt(){const t=[];return this.qUt.forEach((i=>{for(const e of i.XUt)"Mot"===e.Rg&&t.push({Mot:e.rRt,jCt:e.jCt,VT:e.VT,WT:e.VT+e.ct})})),t}SUt(t){"kjt"===t.Rg&&(this.GUt=t.kjt),this.WUt.push(t),this.ZUt&&(this.ZUt.Zb(),this.ZUt=void 0)}sUt(){return this.WUt[0]}nUt(t){Qr(this.WUt,t)}AUt(){return null!=this.ZUt||(this.ZUt=new ue),this.ZUt.tL}KUt(t){this.JUt(t.ght).KUt(t)}$Ut(t){return this.JUt(t).$Ut()}eRt(t){this.JUt(t.ght).eRt(t)}tQt(t){var i;null==(i=this.qUt.get(t))||i.Ud()}iQt(t){return this.JUt(t).iQt()}JUt(t){if(this.qUt.has(t))return this.qUt.get(t);{const i=new uK;return this.qUt.set(t,i),i}}Xb(){this.eQt(),this.sQt()}eQt(){this.GUt=void 0,No(this.WUt)}sQt(){this.qUt.forEach((t=>t.Xb()))}Ud(){this.qUt.forEach((t=>t.Ud())),this.qUt.clear(),this.Xb(),this.ZUt&&(this.ZUt.qd(),this.ZUt=void 0)}constructor(t){this.WUt=[],this.qUt=ke(),this.ZUt=void 0,this.GUt=void 0,this.qzt=t}},uK=class{get XUt(){return this.nQt}KUt(t){this.nQt.push(t),this.rQt&&(this.rQt.Zb(),this.rQt=void 0)}$Ut(){return this.nQt[0]}eRt(t){Qr(this.nQt,t)}iQt(){return null!=this.rQt||(this.rQt=new ue),this.rQt.tL}Xb(){No(this.nQt)}Ud(){this.Xb(),this.rQt&&(this.rQt.qd(),this.rQt=void 0)}constructor(){this.nQt=[],this.rQt=void 0}},cK=1e-6,lK=class{get wf(){return this.cDt}get a$(){return this.lDt}async yJ(t,i){const e=t.zm.zm;if(this.hQt(e),this.oQt.Rg===Wt.TTML){this.qzt.Mzt(t.Ojt)||await Ys(this.qzt.Nzt(t.Ojt),i);const s=this.aQt(e,t.Ojt);for(const t of s)this.oQt.kI(t)}}async AJ(t,i){if(void 0===t.zm)return;const e=t.VT,s=e+t.ct;this.cDt=this.cDt._B(Ai.LB(e,s)).fB(cK),this.l$(t.uQt,t.cQt),this.d$(e,s),this.qzt.Mzt(t.Ojt)||await Ys(this.qzt.Nzt(t.Ojt),i),this.pJ(t.zm.zm,t.Ojt,t.rRt)}pJ(t,i,e){let s;this.hQt(t),s=this.oQt.Rg===Wt.WEBVTT?this.lQt(t,e):this.aQt(t,i);for(const t of s)this.oQt.kI(t)}lQt(t,i){const e=Cv(t),s=e.L;var n;const r=null!=(n=e.GD)?n:{VD:is.zN,lh:is.zN};for(const t of s){const e=is.pD(t.VT).LN(r.lh).ET(r.VD),s=this.qzt.kzt(e,i).mN(),n=s+(t.WT-t.VT);t.cN(s,n)}return s}aQt(t,i){const e=this.qzt.Lzt(i).mN();return pA(t,this.oQt,{RD:0,UD:1/0,QD:e},We.APPLICATION_MP4)}hQt(t){this.oQt.Rg===Wt.DEFAULT&&(this.oQt.Rg=this.dQt(t)?Wt.WEBVTT:Wt.TTML)}dQt(t){return Vv(yg(qr(Ao(t),0,_.min(t.byteLength,16)),new _s))}l$(t,i){this.lDt=this.lDt._B(Ai.LB(t,i)).fB(cK)}d$(t,i){this.lDt=this.lDt.wB(Ai.LB(t,i))}constructor(t,i){this.cDt=Ai.kB(),this.lDt=Ai.kB(),this.oQt=t,this.qzt=i}},dK=class extends wn{constructor(t,i){super(lc.fQt),this.jCt=t,this.Mst=i}},fK=class extends wn{constructor(t){super(lc._Qt),this.jCt=t}},_K=class extends wn{constructor(t,i){super(lc.gQt),this.jCt=t,this.Fct=i}},gK=class extends wn{constructor(t,i){super(lc.wQt),this.jCt=t,this.vQt=i}};!function(t){t.fQt="AQt",t.gQt="mQt",t.wQt="pQt",t._Qt="yQt"}(lc||(lc={}));var Ml=class extends Bo{get MQt(){return this.TQt}NQt(t){for(const i of this.TQt)qo(t,i)||this.sRt.tQt(i);this.TQt=t}get TIt(){return void 0!==this.DQt}JBt(){var t,i;return null!=(i=null==(t=this.DQt)?void 0:t.tL)?i:Promise.resolve()}KBt(){if(this.TIt)throw new g("Cannot perform new operation while transmuxer is still busy")}SQt(t,i){}IQt(t){this.KBt(),this.DQt=new ue;const i=i=>{this.EQt(t,i)};this.bQt(t,this.DC.Wd).then(i,i)}LQt(t){this.KBt(),this.DQt=new ue;const i=i=>{this.EQt(t,i)};this.kQt(t,this.DC.Wd).then(i,i)}EQt(t,i){this.DQt&&(!i||ut(i)||function(t){return t instanceof LZ}(i)?(ut(i)||this.sRt.nUt(t),this.DQt.Zb(),this.DQt=void 0):this.DQt.Jb(i))}xQt(t,i){this.Co(new dK(t,i))}CQt(t,i){this.Co(new _K(t,i))}OQt(t,i,e){EZ(i)&&this.Co(new gK(t,e))}jQt(t){this.Co(new fK(t))}KUt(t){qo(this.TQt,t.ght)&&this.sRt.KUt(t)}PQt(t){return this.sRt.$Ut(t)}eRt(t){this.sRt.eRt(t)}zQt(t){return this.sRt.iQt(t)}qd(){this.DC.qd(),this.DC=new Wr}constructor(t,i,e){super(),this.DQt=void 0,this.DC=new Wr,this.sRt=t,this.qzt=i,this.TQt=e}};function jl(t,i){return EZ(t)?0:_.min(t.VT,i)}function dl(t,i){var e;return _.max(t.VT,i)+(null!=(e=t.ct)?e:0)}var wK=class extends Ml{bQt(t,i){fo(i);const e={Rg:"oEt",zm:t.kjt.zm,ght:this.MQt[0],Ojt:t.Ojt,BQt:{Mst:"",Sjt:t.Sjt},VT:t.VT,jCt:t.jCt,rRt:t.kjt.rRt};return this.KUt(e),Promise.resolve()}async kQt(t,i){fo(i);const e=t.Mot.rRt;let s;void 0!==e.a9?(this.qzt.Mzt(t.Ojt)||await Ys(this.qzt.Nzt(t.Ojt),i),s=this.qzt.kzt(e.a9,e).mN()):s=e.VT;const n=jl(e,s),r=dl(e,n);var h;const o={Rg:"Mot",zm:t.Mot.zm,ght:this.MQt[0],uQt:n,cQt:r,VT:s,ct:null!=(h=e.ct)?h:0,QD:0,Ojt:t.Ojt,jCt:t.jCt,rRt:t.Mot.rRt};this.KUt(o)}constructor(t,i,e){super(t,i,[e])}};function vK(t,i){let e=Ai.kB();for(const s of t){let n=s.VT;if(s.jCt.DCt.Pjt&&EZ(s.Mot))n=0;else{const e=t=>s.jCt===t.jCt&&bZ(t.Mot,s.Mot),r=Vt(t,e);if(void 0!==r)n=_.min(n,r.WT);else{const t=Vt(i,e);void 0!==t&&(n=_.min(n,t.VBt.jn(0)))}}e=e._B(Ai.LB(n,s.WT))}return e}var AK=.001,mK=class{get RQt(){return this.UQt}get jCt(){return this.QQt.jCt}ZRt(t){this.QQt.ZRt(t)}get TIt(){return this.QQt.TIt||this.FQt.TIt||this.UQt.some((t=>t.TIt))}YQt(t){const i=t.slice();for(let t=this.UQt.length-1;t>=0;t--){const e=this.UQt[t];if(!e.WBt)throw new g("Invalid state");const s=tc(i,(t=>t.Rg===e.Rg));s>=0?(e.Hst(i[s]),Kn(i,s)):Kn(this.UQt,t)}for(const t of i){const i=new yl(t);this.UQt.push(new GZ(t.Rg,t,this.GQt,i,this))}i.length>0&&this.GQt.Xb();const e=t.map((t=>t.Rg));this.FQt.NQt(e)}VW(t){var i;const e=(null==(i=this.QB)?void 0:i.VW(t))||!1;return e&&(this.qd(),this.GQt.Xb()),e}VQt(t){for(const t of this.UQt)if(t.Rg!==fi.Ru||t.TIt)throw new g("Invalid state");const i=new yl(t),e=new GZ(fi.Ru,t,this.GQt,i,this);this.UQt=[e]}get UBt(){const t=this.GQt.UBt;if(t)return t;if(this.UQt.length>0){const t=this.UQt[0].HBt.UBt;if(t&&this.UQt.every((i=>i.HBt.UBt===t)))return t}}Cht(){for(const t of this.UQt)t.HBt.YBt()}get WQt(){if(0===this.UQt.length)return Ai.kB();const t=vK(this.GQt.VUt.concat(this.GQt.HUt),A(this.UQt,(t=>t.HBt.nst))).aB();let i=new Ai([0,1/0]);for(const t of this.UQt)i=i.Sn(t.HBt.wf);for(const t of this.UQt)i=i.wB(t.qBt);return i=i._B(t),i.fB(AK)}get HQt(){if(0===this.UQt.length)return Ai.kB();const t=vK(this.GQt.HUt,A(this.UQt,(t=>t.HBt.nst))).aB();let i=new Ai([0,1/0]);for(const t of this.UQt)i=i.Sn(t.HBt.wf);return i=i._B(t),i}Out(t){const i=this.WQt.Mv(t,AK);return i?i.jn(i.U-1):t}uUt(t){return!!this.WQt.Mv(t,AK)||this.QQt.uUt(t)}qQt(t){return this.HQt.gr(t,AK)}XQt(t,i,e){for(const t of this.UQt){const e=t.HBt,s=e.Bgt;if(void 0!==s&&i>=s&&!e.wf.aB().gr(s))return!0}return i-t<e}qd(){this.ZQt(),this.KQt()}ZQt(){this.QQt.qd()}KQt(){this.FQt.qd(),this.RQt.forEach((t=>t.qd()))}Ud(){this.qd(),this.QQt.Ud()}constructor(t,i,e,s){this.QQt=t,this.GQt=i,this.FQt=e,this.QB=s,this.UQt=[]}};var pK=class extends wn{constructor(){super(Jc.yCt)}},yK=class extends wn{constructor(){super(Jc.mCt)}},MK="LazyMediaBuffer",TK=class extends Bo{get HP(){return this.lC}get h$(){return this.$0}get wd(){if(!this.tnt)throw new Rs(Ui.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.tnt.wd}get bW(){return this.RW}set bW(t){this.RW=t,this.tnt&&(this.tnt.bW=t)}Pq(){return this.tnt?this.tnt.Pq():this.JQt}get wf(){return this.tnt?this.tnt.wf:Ai.kB()}get a$(){return this.tnt?this.tnt.a$:this.u$.Yq}get OW(){return this.FW}set OW(t){this.FW=t,this.tnt&&(this.tnt.OW=t)}l$(t,i){er.oOt(MK,"Marking gap from "+t+" to "+i+"."),this.u$.Vq(t,i),this.tnt&&this.tnt.l$(t,i)}d$(t,i){er.oOt(MK,"Removing gap from "+t+" to "+i+"."),this.u$.Wq(t,i),this.tnt&&this.tnt.d$(t,i)}$Qt(t){this.tnt=t,this.tnt.OW=this.FW,this.tnt.bW=this.RW;const i=this.u$.Yq;for(let t=0;t<i.U;t++)this.tnt.l$(i.Cn(t),i.jn(t));var e;this.JQt&&(er.oOt(MK,"End of stream"),null==(e=this.tnt)||e.n$());this.tnt.yn(Bi.cq,this.Ds),this.tFt.Zb(t)}iFt(t){return Ys(this.tFt.tL,t)}async AJ(t,i,e){const s=await this.iFt(e);await s.AJ(t,i,e)}async f$(){const t=await this.iFt();await t.f$()}async yJ(t,i,e){const s=await this.iFt(e);await s.yJ(t,i,e)}async bT(t,i,e){const s=await this.iFt(e);await s.bT(t,i,e)}async jJ(t,i){const e=await this.iFt();await e.jJ(t,i)}n$(){this.JQt=!0,this.tnt&&this.tnt.n$()}mq(t){return!!this.tnt&&this.tnt.mq(t)}async yq(t){const i=await this.iFt();await i.yq(t)}async gn(){var t;this.Vo(),null==(t=this.tnt)||t.fn(Bi.cq,this.Ds)}constructor(t,i){super(),this.$0=t,this.eFt=i,this.lC=void 0,this.tnt=void 0,this.tFt=new ue,this.RW=20,this.JQt=!1,this.FW=30,this.u$=new vh}},NK="LazyMediaSource",DK=class{get wd(){return{Rg:Au.KC,u0:[],qP:[]}}get rt(){throw new g("Not implemented")}get X$(){return this.sFt}get Z$(){return this.nFt}get wf(){return this.FP?this.FP.wf:Ai.kB()}get ct(){return this.FP?this.FP.ct:this.XL}get Pq(){return!!this.FP&&this.FP.Pq}get t_(){return this.FP?this.FP.t_:new Ai([0,1/0])}n0(t){this.XL=t,this.FP&&this.FP.n0(t)}n$(){this.r9=!0,this.FP&&this.FP.n$()}qJ(){this.r9=!1,this.FP&&this.FP.qJ()}a0(t,i,e,s){this.rFt=t,this.hFt=i,this.oFt=Boolean(e),this.aFt=Boolean(s),this.FP&&this.FP.a0(t,i,e,s)}mq(t){return!this.FP||this.FP.mq(t)}async yq(t){if(!this.mq(t))throw new g("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.FP)await this.FP.yq(t);else{var i,e;this.hv.n5();const s=await this.hv.$n(t);S(this.XL)||s.n0(this.XL),this.r9&&s.n$(),s.a0(this.rFt,this.hFt,this.oFt,this.aFt),er.oOt(NK,"The MediaSource has been loaded."),this.uFt=!0,this.FP=s,null==(i=this.sFt)||i.$Qt(this.FP.X$),null==(e=this.nFt)||e.$Qt(this.FP.Z$),this.cFt.Zb(s),this.hv.r5()}}async Ud(){this.FP&&await this.FP.Ud()}constructor(t,i,e){this.hv=t,this.sFt=void 0,this.nFt=void 0,this.cFt=new ue,this.FP=void 0,this.uFt=!1,this.XL=NaN,this.r9=!1,this.rFt=0,this.hFt=1/0,this.oFt=!1,this.aFt=!1,i&&(er.oOt(NK,"Created lazy media buffer for audio."),this.sFt=new TK(fi.Mm,this)),e&&(er.oOt(NK,"Created lazy media buffer for video."),this.nFt=new TK(fi.ym,this))}};function SK(t,i){return void 0===i&&(i=!1),function(e,s){void 0===s&&(s="*");let n=EK(e,"tag");const r=EK(null==s?"*":s,"range"),h=[];let o,a,u,c=-1;for(;++c<r.length;)if(o=r[c].toLowerCase(),i||"*"!==o){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),o)){if(!i)return n[a];h.push(n[a])}else u.push(n[a]);n=u}return i?h:void 0}}SK(((t,i)=>"*"===i||t===i||Xi(t,i+"-")),!0),SK(((t,i)=>{const e=t.split("-"),s=i.split("-");let n=0,r=0;if("*"!==s[r]&&e[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!e[n])return!1;if(e[n]!==s[r]){if(1===e[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var IK=SK(((t,i)=>{let e,s=i;for(;;){if("*"===s||t===s)return!0;if(e=s.lastIndexOf("-"),e<0)return!1;"-"===s.charAt(e-2)&&(e-=2),s=s.slice(0,e)}}));function EK(t,i){const e=t&&"string"==typeof t?[t]:t;if(!e||"object"!=typeof e||!("length"in e))throw new g("Invalid "+i+" `"+e+"`, expected non-empty string");return e}var bK,LK=16384,kK=71,xK=188,CK=2,OK=3;function jK(t){return PK(t)?1:function(t){return function(t){if(t.length<CK*xK)return-1;const i=t.length<OK*xK?CK:OK,e=_.min(1e3,t.length-i*xK);for(let s=0;s<=e;s++){let e=!0;for(let n=0;n<i;n++)if(t[s+n*xK]!==kK){e=!1;break}if(e)return s}return-1}(t)>=0}(t)?2:function(t){return null!==EC(Ao(t),new _s)}(t)?3:0}function PK(t){const i=Io(t,0,_.min(t.length,LK));return iu.wp(Ao(i))}!function(t){t[t.hT=0]="hT",t[t.qv=1]="qv",t[t.lFt=2]="lFt",t[t.dFt=3]="dFt"}(bK||(bK={}));var pl=class{get Rg(){return this.$0}get wf(){return this.tnt.wf}get a$(){return this.tnt.a$}fFt(t){return this.tnt===t}async yJ(t,i){if(this.tnt.wd.HP!==t.BQt.Mst){const e={HP:t.BQt.Mst};this.tnt.mq(e)&&(await this.tnt.yq(e),fo(i))}await this.tnt.yJ(t.zm,{qK:t.jCt.Mg},i),void 0!==this.SLt&&this.$0===fi.ym&&PK(t.zm.zm)&&this.SLt.dnt(t.zm.zm)}async AJ(t,i){fo(i),er.Xp("HlsMediaBuffer","Got media data, appending to "+this.$0+" MediaBuffer: "+Tc(t.rRt.mAt));const e=t.uQt,s=t.cQt,n={a9:t.VT,ct:t.ct,QD:t.QD,qK:t.jCt.Mg};void 0!==t.zm&&(await this.tnt.AJ(t.zm,n,i),this._Ft(t.zm,t)),this.gFt(e,s)}_Ft(t,i){var e;if(!PK(t.zm))return;const s=i.VT,n=s+i.ct,r=i.QD;if(null==(e=this.Fgt)||e.Dut(t.zm,s,r),void 0!==this.SLt&&this.$0===fi.ym){const e=i.rRt.sPt;this.SLt.Dut(t.zm,s,n,r,i.jCt,e)}const h=[];void 0!==this.Fgt&&h.push(this.Fgt),void 0!==this.SLt&&h.push(this.SLt),HA(this.wf,h)}gFt(t,i){const e=this.tnt.wf,s=new Ai([t,i]).wB(e);for(let t=0;t<s.U;t++)this.tnt.l$(s.Cn(t),s.jn(t));for(let t=0;t<e.U;t++)this.tnt.d$(e.Cn(t),e.jn(t))}l$(t,i){this.tnt.l$(t,i)}d$(t,i){this.tnt.d$(t,i)}constructor(t,i,e,s){this.$0=t,this.tnt=i,this.Fgt=e,this.SLt=s}};function zK(t){if(t.Rg!==gi.YOt||void 0===t.LCt)return;const i=t.LCt.match(/^CC([1-4])$/);if(i)return Number(i[1]);const e=t.LCt.match(/^SERVICE([\d+])$/);return e?Number(e[1]):void 0}var BK=class{NOt(t){var i,e,s;return null==(s=null==(e=this.FP)||null==(i=e.Z$)?void 0:i.mq(t))||s}DOt(t){var i,e,s;return null==(s=null==(e=this.FP)||null==(i=e.X$)?void 0:i.mq(t))||s}constructor(t){this.FP=t}},Gs="LLHLSPlayer",RK=[Zt.jw,Zt.Pw,Zt.zw,Zt.H_],UK=[Co.ww,Co.Wg,Co.ew,Co.$g],QK=2e3,FK=class extends Bo{get yv(){var t;const i=[this.wFt,this.vFt].filter(Po);if(0===i.length||this.ct!==1/0)return;const e=null==(t=this.Af)?void 0:t.getTime();if(e){return(Date.now()-e)/1e3}let s;for(const t of i){const i=t.DCt.t_;if(0===i.U)continue;const e=i.jn(i.U-1)+t.DCt.Syt,n=t.DCt.KPt,r=e+(null!=n?n:0)-this.Mf;(!s||s<r)&&(s=r)}return s}AFt(){if(void 0===this.mFt)return!1;const t=i.Kd();if(!this.mFt.QQt.YUt(t))return!1;const e=this.mFt.QQt.RUt();if(void 0===e||void 0===e.Mot.ct)return!1;const s=this.Mf,n=this.Gf,r=this.mFt.WQt.Mv(s);if((void 0!==r?r.jn(0)-s:0)>=2*e.Mot.ct*n)return!1;if(e.UUt>0&&0===e.QUt)return e.FUt>1e3*e.Mot.ct*.8;return 8*e.QUt/this.QB.mW.wP>=1.8*e.Mot.ct}async pFt(){var t;const i=await this.EOt();if(void 0===i)return;const e=null==(t=this.mFt)?void 0:t.QQt.RUt();if(void 0===e)return;const s=this.yFt;if(e.QUt>0){if(_.max(0,e.QUt-e.UUt)<=e.QUt*(i.wP/s.wP))return}const n=i.wP<s.wP;await this.QCt(i,{FCt:n})}MFt(t){return md(t,(t=>t.wP))}async TFt(){let t=await this.NFt();if(0===t.length)return;const i=await this.DFt(t);i.length>0&&(t=i);const e=this.MFt(t);void 0!==e&&(await this.QCt(e,{FCt:!0}),this.WP.nIt(e.wP))}get SFt(){const t=[this.vFt,this.wFt].filter(Po);for(const i of t){if(!i.DCt.Pjt)return!1;const t=i.DCt.nst,e=t[t.length-1];if(e&&e.Ojt!==this.IFt)return!1}return!0}get PCt(){return this.yFt}get ZCt(){return this.vFt}get JCt(){return this.wFt}get EFt(){return this.bFt}get ht(){return this.fT}get wf(){return this.hv.wf.ks()}get RCt(){const t=[];if(this.yFt){const i=this.hv.Mf;for(const e of this.LFt)for(const s of e.RQt){const e=s.iRt(i);e&&!qo(t,e)&&t.push(e)}}return t}get Af(){if(this.yFt){const t=this.hv.Mf;return this.yFt.Xjt(t)}}set Af(t){if(!t||!this.yFt)return;const i=this.yFt.Zjt(t);void 0!==i&&this.Nf(i,{kFt:!1,xFt:!0})}get bt(){return this.CFt}get Mf(){var t;return null!=(t=this.OFt)?t:this.hv.Mf}set Mf(t){this.Nf(t)}Nf(t,e){var s,n,r,h;er.Xp(Gs,"Seeking to "+t+" s.");const o={kFt:null!=(n=null==e?void 0:e.kFt)?n:t===1/0,xFt:null==(r=null==e?void 0:e.xFt)||r,Njt:null!=(h=null==e?void 0:e.Njt)&&h};this.OFt=t,this.jFt=o,this.PFt=!0,this.qTt=!0,null==(s=this.OP)||s.y_(),this.Co(new ri(t)),this.q2.qd(),this.zFt&&(i.Jd(this.BFt),o.xFt?this.BFt=i.$d((()=>this.RFt(t,o)),50):this.RFt(t,o))}RFt(t,e){i.Jd(this.BFt);const s=[this.iwt,this.UFt,this.X2].filter(Po);this.q2=new Wr,this.X2=this.Z2(s,t,e,this.q2.Wd).catch(this.QFt)}get ct(){var t,i,e,s,n,r,h;if(!this.SFt)return null!=(h=null!=(r=null!=(n=null==(t=this.vFt)?void 0:t.DCt.ct)?n:null==(i=this.wFt)?void 0:i.DCt.ct)?r:null==(s=this.$Tt)||null==(e=s._Bt)?void 0:e.DCt.ct)?h:[this.vFt,this.wFt].filter(Po).every((t=>function(t){if(void 0===t)return!1;return t.DCt.nst.length>0&&!t.DCt.Pjt}(t)))?1/0:NaN;const o=this.hv.ct;if(S(o)){var a,u;const t=null==(u=this.$Tt)||null==(a=u._Bt)?void 0:a.DCt.ct;if(void 0!==t)return t}return o}get Sf(){if(!this.SFt)return!1;if(this.e_&&this.zFt){var t,i;const e=this.Mf,s=null==(t=this.vFt)?void 0:t.DCt.ct,n=null==(i=this.wFt)?void 0:i.DCt.ct;return!(void 0!==s&&e<s)&&!(void 0!==n&&e<n)}return this.hv.Sf}get lt(){return this.BP}get bf(){return this.RP}get kf(){}get Cf(){return!1}get jf(){return Yt({},{vT:0,AT:0,mT:0,pT:0,yT:0,MT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.hv.Pf(),{yT:this.pTt,pT:this.QB.mW.wP})}get Tr(){var t;return null==(t=this.$Tt)?void 0:t.Tr}get zf(){return this.hv.zf}set zf(t){this.hv.zf=t}get Uf(){return this.myt}set Uf(t){this.myt!==t&&(this.myt=t,this.Co(t?new RV:new UV))}get Ff(){return this.hv.Ff}get Gf(){return this.hv.Gf}set Gf(t){er.Xp(Gs,"Setting playback rate to "+t+"."),this.hv.Gf=t}get Hf(){return this.DTt.ks()}get DTt(){return this.hv.Hf}get Xf(){return this.QP}set Xf(t){this.QP!==t&&(this.QP=t,this.FFt())}get Jf(){let t=this.hv.Jf;return this.ETt&&(t=_.max(Mw.Xn,t)),t}get t_(){return this.ATt.ks()}get ATt(){let t=this.o0;const i=[this.vFt,this.wFt].filter(Po);if(t.U>0&&i.some((t=>!t.DCt.Pjt))){const e=this.DTt,s=t.jn(t.U-1);if(e.U>0&&e.jn(e.U-1)>s){let n=e.jn(e.U-1);const r=VK(i);r.U>0&&(n=_.min(n,r.jn(r.U-1))),t=t._B(new Ai([s,n]))}}return t}dzt(){let t=function(t){if(0===t.length)return Ai.kB();let i=new Ai([0,1/0]),e=0;for(const s of t){const t=s.DCt.t_;t.U>0&&(i=i.Sn(t),e=_.max(e,t.Cn(0)))}if(i.U>0)return i;return Ai.bB(e)}([this.vFt,this.wFt].filter(Po));0!==t.U&&(this.FP&&this.SFt&&this.FP.ct!==1/0&&(t=new Ai([t.Cn(0),this.FP.ct])),this.o0=t,this.YFt&&this.Fgt.zS(t.Cn(0)),this.GFt&&this.SLt.zS(t.Cn(0)))}get e_(){var t;return null!=(t=this.PFt)?t:this.hv.e_}get YP(){}get nt(){return this.Dl}get rt(){return this.gT}get r_(){var t,i;return this.hv.r_||(null==(i=this.yFt)||null==(t=i.xEt)?void 0:t.Ti)||0}get a_(){var t,i;return this.hv.a_||(null==(i=this.yFt)||null==(t=i.xEt)?void 0:t.ji)||0}get c_(){return this.hv.c_}set c_(t){er.Xp(Gs,"Setting volume to "+t+"."),this.hv.c_=t}get f_(){return this.FB}get g_(){return!1}set g_(t){}get VP(){return this.WP}M_(){return!1}w_(){return this.hv.ya}be(){er.Xp(Gs,"Hiding the player."),this.hv.be()}m_(){var t;er.Xp(Gs,"Pausing the player."),this.hv.m_(),(null==(t=this.OP)?void 0:t.Gw)&&this.OP.y_()}async p_(){this.j2=!0;const t=this.hv.p_();if(this.Sf){const t=this.ATt;t.U>0&&this.Nf(t.Cn(0),{xFt:!1})}this.zFt||await this.FFt(),this.qMt(),await t,this.XTt()}qMt(){var t;if(!this.vTt())if(null==(t=this.PCt)?void 0:t.DCt.Pjt){var i;let t=!0,e=0;const s=null==(i=this.yFt)?void 0:i.DCt.Cn;if(!this.qTt&&s&&(t=!s.Njt,e=s.Tjt,e<0)){const t=this.PCt.DCt.PPt;e+=t.jn(t.U-1)}this.RFt(e,{kFt:t})}else this.RFt(1/0,{kFt:!0});this.VFt()&&this.RFt(1/0,{kFt:!0})}vTt(){var t;const i=this.ATt;if(0===i.U)return!0;const e=null==(t=this.WFt)?void 0:t.vB(this.Mf);return(e&&e>0?this.WFt.jn(e):this.Mf)>=i.Cn(0)}get WFt(){var t,i;const e=null==(t=this.HFt)?void 0:t.WQt,s=null==(i=this.mFt)?void 0:i.WQt;return e?s?s.Sn(e):e:s}VFt(){return KK(this.Mf,this.vFt)||KK(this.Mf,this.wFt)}LNt(){this.BP=void 0,this.RP=void 0}bz(t){this.BP||(ha(this.tr()),this.BP=tn(t),this.RP=t,this.Co(new Eo(t)))}ge(){er.Xp(Gs,"Showing the player."),this.hv.ge()}T_(){throw new g("Not implemented")}N_(){throw new g("Not implemented")}D_(){}S_(){this.zFt&&ha(this.qFt(this.vFt,this.wFt,this.bFt,{S_:!0}))}async ga(t,e,s){var n,r;if(er.Xp(Gs,"Setting the player source to "+t.src+"."),this.LNt(),this.CFt&&!li(this.CFt)&&(await this.tr(),fo(s)),!t.src||li(t))return;this.JP.mP(t.contentProtection),this.CFt=t,this.XFt=t.seamlessSwitchStrategy,this.GFt=!qo(t.ignoreEmbeddedTextTrackTypes,Wt.CEA608),this.YFt=!qo(t.ignoreEmbeddedTextTrackTypes,Wt.EMSG),this.yn(Jc.TCt,this.handleBufferingErrorEvent);const h=null!=(r=null==(n=t.latencyConfiguration)?void 0:n.targetOffset)?r:t.liveOffset;if(this.$Tt=new Nn(this.EI,this.Tot,t.useCredentials,i.Uv(t.src),h),this.$Tt.yn(Xs.hBt,this.RBt),this.$Tt.yn(Xs.oBt,this.ZFt),this.$Tt.yn(Co.cw,this.Ds),this.$Tt.yn(Co.lw,this.Ds),t.hlsDateRange&&(this.KFt=new Cl(this.$Tt,this.hv),this.Dl.DP(this.KFt.nt)),null!=this.JFt||(this.JFt=this.$Ft.c9()),e.textTracks&&this.$P(e.textTracks),t.latencyConfiguration){const i=t.latencyConfiguration;this.OP=new fW(this,this.hv,i),this.OP.Rt=!0,this.f_.ka(this.OP)}st(this.Dl),this.FFt()}FFt(){return this.iwt=this.tYt(this.iwt,this.xI.Wd).catch(this.Uwt),this.iwt}async tYt(t,i){if(t&&(await t,fo(i)),!this.$Tt)return;const e=this.QP;e===Le.eT||this.j2?await this.Mit(i):e===Le.Dm&&await this.iYt(i)}async iYt(t){if(void 0===this.$Tt||this.ETt)return;if(!this.$Tt.cBt){try{await this.$Tt.wBt(t)}catch(t){throw yo(t),this.Uf=!1,new Rs(Ui.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.eYt.qnt()}const i=await this.sYt();this.nYt(i);const e=this.rYt(i.lOt),s=this.hYt(i.dOt),n=this.oYt(i.Hjt);if(!n){const t=WK(i.qjt);t&&(er.Xp(Gs,"Detected initial closed caption rendition."),this.aYt(i,t))}await this.qFt(e,s,n,{uYt:!0}),this.ETt=!0,this.KNt.eDt(),this.cYt()}cYt(){const t=[this.vFt,this.wFt].filter(Po);if(t.some((t=>t.DCt.Pjt)))return;if(this.OP)return;const i=_.max(...t.map((t=>{var i;return null!=(i=t.DCt.Syt)?i:0}))),e={minimumOffset:.66*i,maximumOffset:2*i,targetOffset:1*i,forceSeekOffset:3*i,minimumPlaybackRate:vu,maximumPlaybackRate:Ka};this.OP=new fW(this,this.hv,e),this.FB.ka(this.OP)}async sYt(){if(this.lYt=this.$Tt.Tr.cOt,!this.lYt.length)throw new Rs(Ui.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.dYt(this.lYt);if(0===t.length)throw new Rs(Ui.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const i=await this.DFt(t);return i.length>0&&(t=i),er.Xp(Gs,"Selecting initial active variant stream."),function(t,i,e,s){void 0===s&&(s=bw.maximumBackoff);const n=function(t,i){if(void 0===i)return t;const e=i.preferredVideoCodecs,s=i.preferredAudioCodecs;if(void 0!==e){let i;for(const n of e){const e=t.filter((t=>t.Mst&&t.Mst.GEt&&ui(t.Mst.GEt,n)));if(0===e.length)continue;if(void 0===s)return e;void 0===i&&(i=e);const r=HK(e,s);if(void 0!==r)return r}if(void 0!==i)return i}if(void 0!==s){const i=HK(t,s);if(void 0!==i)return i}return t}(t,i),r=XK(n,s);switch(e.kW.type){case eu.BANDWIDTH:{const t=e.zW,i=r.filter((i=>i.wP<=t));if(i.length>0)return pd(i,(t=>t.wP))}case eu.PERFORMANCE:return md(r,(t=>t.wP));case eu.QUALITY:return pd(r,(t=>t.wP))}}(t,this.CFt.abr,this.QB,this.Yut.maximumBackoff)}rYt(t){if(this.fYt){const t=this._Yt(this.fYt);if(t)return t}return qK(t)}hYt(t){if(this.gYt){const t=this._Yt(this.gYt);if(t)return t}return qK(t)}oYt(t){for(const t of this.Dl.og)t.jg===Or.Jn&&(this.wYt=this.vYt(t));if(this.wYt){const t=this._Yt(this.wYt);if(t)return t}return WK(t)}vYt(t){return Vt(this.yFt.Hjt,(i=>t===this.AYt.get(i.Mg)))}async Mit(t){this.zFt||(await this.iYt(t),fo(t),this.zFt=!0,await this.qFt(this.vFt,this.wFt,this.bFt,{uYt:!0}))}$P(t){for(const i of t)i.src&&this.sz.NI(i)}aYt(t,i){if(!this.GFt)return;const e=function(t){const i=[];for(const e of t){const t=zK(e);void 0!==t&&i.push({F6:t,Y6:e.gs||"",kh:e.l})}return i}(t.qjt);for(const t of e)this.SLt.cgt(t);if(void 0!==i){const t=zK(i);this.SLt.agt(t).jg=Or.Jn}}get LFt(){return[this.HFt,this.mFt,this.mYt].filter(Po)}UCt(t){for(const i of t)if(!this.pYt(i))throw new g("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.lYt=t}pYt(t){const i=this.Tr;return!!i&&qo(i.cOt,t)}_Yt(t){if(t&&this.yFt)return Vt(this.yFt.vOt,(i=>i===t))}nYt(t){var i;if(er.Xp(Gs,"Setting active variant stream."),this.yFt===t)return;const e=(null==(i=this.yFt)?void 0:i.XOt)!==(null==t?void 0:t.XOt);if(this.yFt&&e)for(const t of this.yFt.Hjt)this.CI(t);if(this.yFt=t,this.Co(new pK),this.QTt(),t&&e)for(const i of t.Hjt)this.yYt(i)}yYt(t){const i=this.hv.DI(Mi.Tm,void 0,t.l,t.gs,t.SCt,void 0,void 0,t.xCt.map(fX).filter(Po));i.yn(qt.ra,this.onTextTrackChange),this.AYt.set(t.Mg,i),this.MYt.tt(i)}CI(t){const i=this.AYt.get(t.Mg);i&&(i.fn(qt.ra,this.onTextTrackChange),this.MYt.it(i),this.AYt.delete(t.Mg),this.hv.CI(i))}async NFt(){var t;const i=null!=(t=this.lYt)?t:this.Tr.cOt;if(0===i.length&&!this.lYt)return er.Xp(Gs,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===i.length&&!this.lYt)return er.Xp(Gs,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const e=await this.dYt(i);if(0===e.length)return er.aOt(Gs,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=XK(e,this.Yut.maximumBackoff);return 0===s.length?(this.TYt||(er.aOt(Gs,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.NYt++,await this.DYt(e)),[]):s}async SYt(){const t=await this.EOt();if(void 0===t)return;const i=!!this.yFt&&t.wP<this.yFt.wP;await this.QCt(t,{FCt:i})}async EOt(){var t,i;const e=await this.NFt();if(0===e.length)return;const s=sq(this.hv),n=await this.DFt(e),r={ji:this.hv.ji,Ti:this.hv.Ti,TOt:s,gut:null==(i=this.CFt)||null==(t=i.abr)?void 0:t.restrictToPlayerSize},h=await this.IYt.EOt(e,this.yFt,n,r,new BK(this.FP));return!!this.yFt&&h.wP<this.yFt.wP||this.EYt(h,s)?h:void 0}EYt(t,e){var s;if(t===this.PCt)return!1;const n=this.PCt&&ZK(this.PCt,this.Yut.maximumBackoff),r=ZK(t,this.Yut.maximumBackoff);if(!n&&r)return!0;(!this.Pbt||this.Pbt.zCt.wP>t.wP)&&(this.Pbt={zCt:t,Tlt:i.Kd()});const h=i.Kd()-this.Pbt.Tlt;var o;const a=null!=(o=null==(s=this.JCt)?void 0:s.DCt.MOt)?o:1/0;return e>=_.max(a-1,5)||h>1e3}async DYt(t){this.TYt=!0;let i=!1;for(const e of t)try{const t=this.wFt?Vt(e.dOt,(t=>iX(t,this.wFt))):void 0;if(void 0===t)continue;await this.NBt(t),t.DCt.tzt=-1/0,i=!0}catch(t){}if(i)this.NYt=0,await this.bYt();else{if(this.NYt>=this.Yut.maxRetries)return void this.bz(new Rs(Ui.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=_.min(this.Yut.minimumBackoff*2**(this.NYt-1),this.Yut.maximumBackoff);await N(t)}this.TYt=!1,await this.SYt()}async dYt(t){let i=await Nd(t,(async t=>{var i,e,s;const n=[(null==(i=t.Mst)?void 0:i.FEt)?'audio/mp4; codecs="'+t.Mst.FEt+'"':void 0,(null==(e=t.Mst)?void 0:e.GEt)?'video/mp4; codecs="'+t.Mst.GEt+'"':void 0].filter(Po);return 0===n.length||await this.LYt.Rq(n,null==(s=this.CFt)?void 0:s.useManagedMediaSource)}));return i.some((t=>{var i;return null==(i=t.Mst)?void 0:i.GEt}))&&(i=i.filter((t=>!t.Mst||t.Mst.GEt||0!==t.dOt.length))),i.some((t=>{var i;return null==(i=t.Mst)?void 0:i.FEt}))&&(i=i.filter((t=>!t.Mst||t.Mst.FEt||0!==t.lOt.length))),i}DFt(t){return this.$Tt.dBt?Nd(t,(t=>async function(t,i){for(const e of t)if(!await i(e))return!1;return!0}([qK(t.lOt),qK(t.dOt),WK(t.Hjt),WK(t.qjt)].filter(Po),(t=>this.kYt(t))))):Promise.resolve([])}async kYt(t){if(0===t.DCt.nst.length)return!1;const i=t.DCt.nst[0];if(!i.mAt)return!1;const e=i.mAt,s=e.Zmt?Qc(e.Zmt.Cn,e.Zmt.U):void 0;try{return await this.Tot.Bet(e.PM,s)}catch(t){return!1}}async QCt(t,i){if(!this.zFt)throw new g("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.pYt(t))throw new g("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.yFt)return void er.Xp(Gs,"Trying to set the already active variant stream, ignoring.");const e=this.vFt?Vt(t.lOt,(t=>iX(t,this.vFt))):void 0,s=this.wFt?Vt(t.dOt,(t=>iX(t,this.wFt))):void 0,n=this.bFt?Vt(t.Hjt,(t=>iX(t,this.bFt))):void 0;this.nYt(t),this.Pbt=void 0,await this.qFt(e,s,n,i)}async KCt(t){if(!this.yFt)return void(this.fYt=t);const i=this._Yt(t);if(t&&!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");this.ZCt!==i&&(er.Xp(Gs,"Switching audio rendition"),await this.qFt(i,this.wFt,this.bFt,{GCt:!0}))}async $Ct(t){if(!this.yFt)return void(this.gYt=t);const i=this._Yt(t);if(t&&!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");this.JCt!==i&&(er.Xp(Gs,"Switching video rendition"),await this.qFt(this.vFt,i,this.bFt,{YCt:!0}))}async xYt(t){if(!t)throw new g("LLHLSPlayer - Cannot explicitly set the active subtitle rendition to undefined.");if(!this.ETt)return void(this.wYt=t);const i=this._Yt(t);if(!i)throw new g("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");er.Xp(Gs,"Switching subtitle rendition"),await this.qFt(this.vFt,this.wFt,i)}async CYt(t,i){if(this.TYt)return;const e=0===this.rt.U;t.Rg===gi.ym||t.Rg===gi.Mm&&e?this.lYt&&this.lYt.length<=1?(t.Rg===gi.ym&&this.wFt!==t?await this.qFt(this.vFt,t,this.bFt):t.Rg===gi.Mm&&e&&this.vFt!==t&&await this.qFt(t,this.wFt,this.bFt),await this.OYt(t,i)):await this.SYt():await this.OYt(t,i)}async NBt(t,i){try{await this.$Tt.NBt(t,i)}catch(e){throw yo(e),(tl(e)||nt(e))&&await this.CYt(t,i),e}}async OYt(t,i){if(!qo(this.jYt,t)){this.jYt.push(t);try{const e=t.Rg===gi.Tm||t.Rg===gi.YOt?1/0:this.Yut.maxRetries;await qc((()=>this.retryOfflineRenditionsCallback(t,i)),i,e,this.Yut.minimumBackoff,this.Yut.maximumBackoff)}catch(t){this.bz(new Rs(Ui.MEDIA_LOAD_ERROR,t.message,t))}finally{Qr(this.jYt,t),t.DCt.tzt===-1/0&&await this.bYt()}}}qFt(t,i,e,s){void 0===s&&(s={});const n={FCt:s.FCt||!1,GCt:s.GCt||!1,YCt:s.YCt||!1,S_:s.S_||!1,uYt:s.uYt||!1};return n.uYt||n.S_||this.vFt!==t||this.wFt!==i||this.bFt!==e?void 0===t&&void 0===i?Promise.reject(new g("Trying to buffer no media renditions.")):(this.vFt=t,this.wFt=i,this.bFt=e,this.dzt(),this.Co(new yK),this.q2.qd(),this.q2=new Wr,this.PYt.qd(),this.PYt=new Wr,this.UFt=this.zYt([this.UFt,this.X2].filter(Po),t,i,e,n,this.PYt.Wd).catch(this.QFt),this.UFt):Promise.resolve()}async BYt(t,i,e,s){var n,r;const h=[];if(h.push(this.RYt(i,s)),eX(t,i)||h.push(this.RYt(t,s)),null==(r=this.CFt)||null==(n=r.hls)?void 0:n.delaySubtitlePreload)return Promise.all(h).then((()=>this.RYt(e,s)));const o=this.RYt(e,s);return Promise.all([...h,o])}async RYt(t,i){if(t)try{await this.$Tt.NBt(t,i)}catch(e){yo(e),(tl(e)||nt(e))&&await this.UYt(t,i)}}async UYt(t,i){if(this.TYt)return;const e=0===this.rt.U;if(t.Rg===gi.ym||t.Rg===gi.Mm&&e)if(this.lYt&&this.lYt.length<=1)await this.OYt(t,i);else{const t=await this.sYt();this.nYt(t);const i=this.rYt(t.lOt),e=this.hYt(t.dOt),s=this.oYt(t.Hjt);await this.qFt(i,e,s)}else await this.OYt(t,i)}async zYt(t,i,e,s,n,r){var h;if(!this.zFt)return void await this.BYt(i,e,s,r);await Promise.all(t.map((t=>t.catch(na)))),this.QYt(),await this.FYt(r),await this.YYt();const o=[];n.GCt&&this.FP&&this.FP.X$&&o.push(this.FP.X$.bT(0,1/0)),n.YCt&&this.FP&&this.FP.Z$&&o.push(this.FP.Z$.bT(0,1/0)),await Promise.all(o),fo(r);const a=await this.GYt(i,e,n.S_,r);this.VYt(i,e,n.FCt||a),this.WYt(s,n.FCt),fo(r);const u=[e,eX(i,e)?void 0:i,s].filter(Po);try{await Promise.all(u.filter((t=>!t.DCt.HPt)).map((t=>{var i;return null==(i=this.$Tt)?void 0:i.DBt(t,r)})))}catch(t){yo(t)}if(fo(r),this.h0(),this.dzt(),void 0!==this.OFt)this.RFt(this.OFt,this.jFt);else if(!this.qTt&&(null==(h=this.yFt)?void 0:h.DCt.Cn)){const t=this.yFt.DCt,i=t.Cn;let e=i.Tjt;if(i.Tjt<0){const i=t.PPt;e+=i.jn(i.U-1)}this.RFt(e,{kFt:!i.Njt})}else!this.qTt&&u.every((t=>!t.DCt.Pjt))?this.RFt(1/0,{kFt:!0}):this.LFt.length>0&&this.HYt()}async GYt(t,i,e,s){var n,r;const h=void 0!==t&&t!==i,o=void 0!==i,a=await this.qYt(t,i,this.yFt);if(fo(s),!e&&this.FP&&!a)return!1;const u=void 0!==(null==(n=this.FP)?void 0:n.X$),c=void 0!==(null==(r=this.FP)?void 0:r.Z$);if(!e&&!(h!==u||o!==c)&&a&&this.FP&&this.FP.mq(a))return await this.FYt(s),await this.FP.yq(a),!0;for(const t of this.LFt)t.RQt.forEach((t=>t.qd()));this.hv.n5();try{this.FP&&await this.hv.tr(),this.FP=await this.XYt(a,h,o)}finally{this.hv.r5()}return!0}async qYt(t,i,e){var s,n;const r=e.Mst,h=[];if(void 0!==t){var o,a;const i=null!=(a=null==(o=t.Mst)?void 0:o.FEt)?a:null==r?void 0:r.FEt;if(!i)return;{const t='audio/mp4; codecs="'+i+'"';er.Xp(Gs,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),h.push(t)}}if(void 0!==i){var u,c;const t=null!=(c=null==(u=i.Mst)?void 0:u.GEt)?c:null==r?void 0:r.GEt;if(!t)return;{const i='video/mp4; codecs="'+t+'"';er.Xp(Gs,"Configuring MediaSource for initial video rendition with codec: "+i+"."),h.push(i)}}if(0===h.length)return void er.aOt(Gs,"No codecs found on the active variant stream.");var l;const d=null!=(l=null==i||null==(s=i.DCt.nst[0])?void 0:s.Sjt)?l:[];var f;const _=null!=(f=null==t||null==(n=t.DCt.nst[0])?void 0:n.Sjt)?f:[],g=this.$Tt.Tr,w=await CX(this.CFt.contentProtection,h,g.Vzt.concat(_).concat(d),this.EI,this.CFt.useCredentials);return{Rg:Au.KC,u0:h.map((t=>({HP:t}))),qP:w,p0:this.CFt.useManagedMediaSource}}async XYt(t,i,e){let s;return s=t?await this.hv.$n(t):new DK(this.hv,i,e),this.FP=s,this.h0(),this.zMt(),this.BMt(),s}h0(){const t=this.FP;if(t&&S(t.ct)){var i,e,s;const n=null!=(s=null==(i=this.vFt)?void 0:i.DCt.ct)?s:null==(e=this.wFt)?void 0:e.DCt.ct;void 0!==n&&n>0&&t.n0(n)}this.dzt()}zMt(){const t=this.FP;t&&(t.Z$&&(t.Z$.bW=this.QB.UW),t.X$&&(t.X$.bW=this.QB.UW))}BMt(){const t=this.FP;t&&(t.Z$&&(t.Z$.OW=this.QB.OW),t.X$&&(t.X$.OW=this.QB.OW))}VYt(t,i,e){if(!this.FP)throw new g("Invalid state");this.FP.X$?this.i0&&this.i0.fFt(this.FP.X$)||(this.i0=new pl(fi.Mm,this.FP.X$,this.YFt?this.Fgt:void 0,this.GFt?this.SLt:void 0)):this.i0=void 0,this.FP.Z$?this.e0&&this.e0.fFt(this.FP.Z$)||(this.e0=new pl(fi.ym,this.FP.Z$,this.YFt?this.Fgt:void 0,this.GFt?this.SLt:void 0)):this.e0=void 0;const s=eX(t,i);if(this.e0&&i){const t=s&&this.i0?[this.e0,this.i0]:[this.e0];this.mFt?this.mFt.jCt!==i&&(e&&(this.mFt.qd(),this.mFt.GQt.Xb()),this.mFt.ZRt(i)):(this.mFt=function(t,i,e,s,n,r,h,o,a,u){const c=s.Tr.iT,l=new kl(c),d=new wl(fi.ym,t,s,l,n,r,h,u),f=i.map((t=>t.Rg)),_=o.cMt(l,s.Tr.iT,f),g=new mK(d,l,_,a);return g.YQt(i),g}(i,t,this.hv,this.$Tt,this.EI,this.Tot,this.lRt,this.JFt,this.QB,this.CFt.useCredentials),this.mFt.QQt.yn(rK.WRt,this.ZYt),this.mFt.QQt.yn(rK.HRt,this.KYt),this.mFt.FQt.yn(lc.fQt,this.JYt),this.mFt.FQt.yn(lc.gQt,this.$Yt),this.mFt.FQt.yn(lc.wQt,this.tGt),this.mFt.FQt.yn(lc._Qt,this.iGt)),this.mFt.YQt(t)}else{var n;null==(n=this.mFt)||n.Ud(),this.mFt=void 0}var r;this.i0&&t&&!s?(this.HFt?this.HFt.jCt!==t&&(e&&(this.HFt.qd(),this.HFt.GQt.Xb()),this.HFt.ZRt(t)):(this.HFt=function(t,i,e,s,n,r,h,o,a,u){const c=s.Tr.iT,l=new kl(c),d=new wl(fi.Mm,t,s,l,n,r,h,u),f=o.cMt(l,s.Tr.iT,[i.Rg]),_=new mK(d,l,f,a);return _.YQt([i]),_}(t,this.i0,this.hv,this.$Tt,this.EI,this.Tot,this.lRt,this.JFt,this.QB,this.CFt.useCredentials),this.HFt.QQt.yn(rK.HRt,this.KYt),this.HFt.FQt.yn(lc.fQt,this.JYt),this.HFt.FQt.yn(lc._Qt,this.iGt)),this.HFt.YQt([this.i0])):(null==(r=this.HFt)||r.Ud(),this.HFt=void 0);this.eGt()}WYt(t,i){if(this.mYt){this.mYt.QQt.jCt===t?i&&(this.mYt.qd(),this.mYt.GQt.Xb()):(this.mYt.Ud(),this.mYt=void 0)}if(!this.mYt&&t){const i=this.AYt.get(t.Mg);i.jg=Or.Jn,this.mYt=function(t,i,e,s,n,r,h){const o=e.Tr.iT,a=new lK(i,o),u=new kl(o),c=new wl(fi.Ru,t,e,u,s,n,r,h),l=new wK(u,o,fi.Ru),d=new mK(c,u,l);return d.VQt(a),d}(t,i,this.$Tt,this.EI,this.Tot,this.lRt,this.CFt.useCredentials)}}eGt(){const t=[this.i0,this.e0].filter(Po).map((t=>t.Rg));this.$Tt.Tr.iT.Yzt(t)}async Z2(t,i,e,s){let n;if(await Promise.all(t.map((t=>t.catch(na)))),fo(s),await this.YYt(),fo(s),this.OFt=void 0,this.PFt=void 0,this.qTt=!0,e.Njt){n=VK([this.vFt,this.wFt].filter(Po))}else n=this.ATt;const r=n.uB(i),h=this.hv.lf(Co.pw,s);this.hv.Em(r,e.kFt),this.zFt&&this.LFt.length>0&&(this.$Tt.Tr.iT.Gzt(),this.sGt(this.hv.Mf),this.HYt()),await h,this.XTt()}XTt(){const t=this.yv;if(this.Ff||this.e_||void 0===t)return;const i=this.Mf;var e,s;t+this.Mf-this.f_.wd.maximumOffset<i?null==(e=this.OP)||e.Cn():null==(s=this.OP)||s.y_()}sGt(t){for(const i of this.LFt)i.uUt(t)||(i.ZQt(),i.GQt.eQt()),i.qQt(t)||(i.KQt(),i.GQt.sQt())}QYt(){for(const t of this.LFt)t.qd()}YYt(){return Promise.all([this.gLt(),this.nGt(),this.rGt()])}HYt(){this._Lt(),this.hGt(),this.oGt()}async bYt(){this.zFt&&this.LFt.length>0&&(this.LFt.forEach((t=>t.ZQt())),await this.gLt(),this._Lt(),this.LFt.forEach((t=>t.QQt.wUt())))}_Lt(){if(this.aGt)return;const t=()=>{this.aGt=void 0};this.uGt=new Wr,this.aGt=this.LLt(this.uGt.Wd).catch(this.QFt).then(t,t)}async gLt(){var t;null==(t=this.uGt)||t.qd();const i=this.aGt;this.aGt=void 0,i&&await i}async LLt(t){fo(t);const i=this.LFt;for(;;){const e=[],s=this.hv.Mf;for(const t of i){const i=t.QQt,n=t.Out(s);if(i.TIt)e.push(i.JBt());else if(t.XQt(s,n,this.QB.UW)){const s=i.cUt(n);if(void 0===s){if(i.jCt.DCt.Pjt)continue;const t=i.jCt.DCt.nst;t.length&&t[0].VT>n&&(this.Mf=1/0),i.mUt(),i.fUt(n)}else{const[e,n]=s;i.jht(e,n,t.UBt),t.FQt.SQt(e,n)}e.push(i.JBt())}}await Vh((t=>{if(0===e.length){i.every((t=>t.QQt.XIt))||e.push(this.hv.lf(Co.Iw,t));for(const s of i)e.push(s.FQt.lf(lc._Qt,t))}return Ys(Promise.race(e),t)}),t)}}hGt(){if(this.cGt)return;const t=()=>{this.cGt=void 0};this.lGt=new Wr,this.cGt=this.dGt(this.lGt.Wd).catch(this.QFt).then(t,t)}async nGt(){var t;null==(t=this.lGt)||t.qd();const i=this.cGt;this.cGt=void 0,i&&await i}async dGt(t){fo(t);const i=this.LFt;for(;;){const e=[];for(const t of i){const i=t.QQt,s=t.FQt;if(s.TIt)e.push(s.JBt());else{const t=i.sUt();t?"Mot"===t.Rg?(s.LQt(t),e.push(s.JBt())):"kjt"===t.Rg&&(s.IQt(t),e.push(s.JBt())):e.push(i.vUt())}}if(0===e.length)break;await Ys(Promise.race(e),t)}}oGt(){if(this.fGt)return;this._Gt=new Wr;const t=()=>{this.fGt=void 0};this.fGt=this.gGt(this._Gt.Wd).catch(this.QFt).then(t,t)}async rGt(){var t;null==(t=this._Gt)||t.qd();const i=this.fGt;this.fGt=void 0,i&&await i}async gGt(t){for(;;){const i=this.LFt;i.forEach((t=>t.Cht()));const e=this.hv.Mf,s=[],n=[];for(const t of i){const i=t.FQt;for(const r of t.RQt){const t=r.WBt?s:n;if(r.TIt)t.push(r.JBt());else if(!r.$Bt(e)){const e=i.PQt(r.Rg);e?"Mot"===e.Rg&&e.Ojt===this.IFt?(r.But(e),t.push(r.JBt())):"oEt"===e.Rg&&e.Ojt===this.IFt&&(r.yJ(e),t.push(r.JBt())):n.push(i.zQt(r.Rg))}}}if(0===s.length){if(await this.wGt(i,e,t))continue}if(0===s.length&&0===n.length){i.every((t=>t.RQt.length>0&&t.RQt.every((t=>t.$Bt(e)))))&&this.FP.n$();break}await Ys(Promise.race([...s,...n]),t)}}async wGt(t,i,e){const s=[],n=[];for(const e of t){const t=e.Out(i);for(const r of e.RQt){if(!r.WBt)continue;const h=e.FQt.PQt(r.Rg);if(void 0!==h){if(h.Ojt===this.IFt)return!1;s.push(h)}else{if(e.TIt||e.XQt(i,t,this.QB.UW)||!r.tRt(i,t))return!1;{const t=r.HBt.UBt;void 0!==t&&n.push(t)}}}}if(0===s.length)return!1;const r=pd(s,(t=>t.Ojt)).Ojt;if(s.every((t=>"oEt"===t.Rg&&t.Ojt===r))){const t=md(s,(t=>t.VT)).VT,i=[...s,...n],r=await this.vGt(i);this.AGt(r)?(er.oOt(Gc,"Seamless switch from",this.FP.wd,"to",r),await this.FP.yq(r),er.oOt(Gc,"Seamless switch complete.")):await this.mGt(t,r,e),this.IFt=s[0].Ojt}else for(const i of t)for(const t of i.RQt){let e=i.FQt.PQt(t.Rg);for(;void 0!==e&&("oEt"!==e.Rg||e.Ojt!==r);)er.oOt(Gc,"Removing append for other discontinuity, expecting "+r,e),i.FQt.eRt(e),e=i.FQt.PQt(t.Rg)}return!0}AGt(t){return this.XFt===mi.oT||this.XFt!==mi.aT&&this.FP.mq(t)}async vGt(t){const i=t.map((t=>t.BQt.Mst)),e=i.map((t=>({HP:t}))),s=A(t,(t=>t.BQt.Sjt));s.push(...this.$Tt.Tr.Vzt);let n=await CX(this.CFt.contentProtection,i,s,this.EI,this.CFt.useCredentials);return 0===n.length&&this.FP&&this.FP.wd.qP.length>0&&(n=this.FP.wd.qP),{Rg:Au.KC,u0:e,qP:n,p0:this.CFt.useManagedMediaSource}}async mGt(t,i,e){var s;const n=this.FP,r=n.ct,h=this.wf.length>0&&this.Mf<t;if(h)try{for(er.oOt(Gc,"Marking end of stream and waiting for ended to switch discontinuity."),n.n$();!this.hv.Sf&&this.hv.Mf<t;)await this.hv.lf([Co.Iw,Co.Jg],e)}catch(t){throw n.qJ(),n.n0(r),t}er.oOt(Gc,"Perform hard switch from",null==(s=this.FP)?void 0:s.wd,"to",i);try{this.hv.n5(),this.Mf<t&&this.hv.Em(t,!0,!0),this.e0=void 0,this.i0=void 0,this.eGt(),await this.hv.tr(),this.FP=await this.hv.$n(i),this.h0(),this.zMt(),this.BMt(),this.FP.Z$&&(this.e0=new pl(fi.ym,this.FP.Z$,this.YFt?this.Fgt:void 0,this.GFt?this.SLt:void 0),this.e0.l$(t-1,t)),this.FP.X$&&(this.i0=new pl(fi.Mm,this.FP.X$,this.YFt?this.Fgt:void 0,this.GFt?this.SLt:void 0),this.i0.l$(t-1,t)),this.eGt()}finally{h&&ha(this.hv.p_()),this.hv.r5()}if(this.mFt){const t=void 0!==this.i0&&void 0===this.HFt?[this.e0,this.i0]:[this.e0];this.mFt.YQt(t)}this.HFt&&this.HFt.YQt([this.i0]),er.oOt(Gc,"Hard switch complete.")}FYt(t){return Ys(P(A(this.LFt,(t=>t.RQt.map((t=>t.JBt()))))),t)}QTt(){const t=this.a_,i=this.r_;this.qNt===t&&this.XNt===i||(this.qNt=t,this.XNt=i,this.Co(new il))}async gn(){er.Xp(Gs,"Unloading the player."),this.pGt(),this.LNt(),await this.tr(),this.hv.lz=void 0,this.MYt.gn(),await this.sz.gn(),await this.Fgt.gn(),await this.SLt.gn(),this.fT.gn(),this.gT.gn(),this.Dl.gn(),this.yGt.gn(),this.KNt.Ud(),this.lRt.Ud(),this.JFt&&(this.JFt.Ud(),this.JFt=void 0)}async tr(){er.Xp(Gs,"Resetting the player."),this.fn(Jc.TCt,this.handleBufferingErrorEvent),this.IFt=-1,this.xI.qd(),this.xI=new Wr,this.q2.qd(),this.q2=new Wr,this.PYt.qd(),this.PYt=new Wr;const t=[this.iwt,this.X2,this.UFt].filter(Po);await Promise.all(t.map((t=>t.catch(na)))),this.iwt=void 0,this.X2=void 0,this.UFt=void 0,this.vFt=void 0,this.wFt=void 0,this.bFt=void 0,this.lYt=void 0,this.fYt=void 0,this.gYt=void 0,this.wYt=void 0,this.fYt=void 0,this.gYt=void 0,this.wYt=void 0,this.OP=void 0,this.FB.tr(),this.jYt=[],this.nYt(void 0),this.QYt(),await this.YYt(),this.HFt&&(this.HFt.Ud(),this.HFt=void 0),this.mFt&&(this.mFt.Ud(),this.mFt=void 0),this.mYt&&(this.mYt.Ud(),this.mYt=void 0),this.i0=void 0,this.e0=void 0,this.FP=void 0,this.$Tt&&(this.$Tt.Ud(),this.$Tt=void 0),this.KFt&&(this.Dl.EP(this.KFt.nt),this.KFt=void 0),await this.sz.tr(),await this.Fgt.tr(),await this.SLt.tr(),this.hv.nz(),await this.hv.tr(),this.CFt=void 0,this.zFt=!1,this.o0=Ai.kB(),this.OFt=void 0,this.HNt=void 0,this.qNt=0,this.XNt=0,this.PFt=void 0,this.qTt=!1,this.j2=!1,i.Jd(this.BFt),this.ETt=!1,this.MGt=!1,this.pTt=0,this.XFt=mi.eT,this.yGt.tr(),this.TGt(),this.Co(new Da(this.Mf,this.Jf))}TGt(){for(const t of this.fT.og)t.gn();for(const t of this.gT.og)t.gn();for(const t of this.Dl.og)t.gn();this.fT.tr(),this.gT.tr(),this.Dl.tr(),this.AYt.clear()}NGt(){this.yGt.yn(RK,this.Ds),this.yGt.yn(Zt.Rw,this.fv),this.yGt.yn(Zt.Bw,this.DGt),this.yGt.yn(Zt.Ow,this.SGt),this.QB.yn("EW",this.$Nt),this.QB.yn("xW",this.tDt),this.hv.yn(UK,this.Ds),this.hv.yn(Co.Vg,this.handleContentProtectionErrorEvent),this.hv.yn(Co.Xg,this.IGt),this.hv.yn(Co.Jg,this.Mh),this.hv.yn(Co.Sh,this.jxt),this.hv.yn(Co.jh,this.EGt),this.hv.yn(Co.gw,this.bGt),this.hv.yn(Zt.H_,this._O),this.hv.yn(Co.Iw,this.f4),this.hv.yn(Co.yw,this.We),this.hv.yn(Co.pw,this.wz),this.hv.yn(Co.mw,this.LGt),this.hv.yn(Co.Ew,this.kGt)}pGt(){this.yGt.fn(RK,this.Ds),this.yGt.fn(Zt.Rw,this.fv),this.yGt.fn(Zt.Bw,this.DGt),this.yGt.fn(Zt.Ow,this.SGt),this.QB.fn("EW",this.$Nt),this.QB.fn("xW",this.tDt),this.hv.fn(UK,this.Ds),this.hv.fn(Co.Vg,this.handleContentProtectionErrorEvent),this.hv.fn(Co.Xg,this.IGt),this.hv.fn(Co.Jg,this.Mh),this.hv.fn(Co.Sh,this.jxt),this.hv.fn(Co.jh,this.EGt),this.hv.fn(Co.gw,this.bGt),this.hv.fn(Zt.H_,this._O),this.hv.fn(Co.Iw,this.f4),this.hv.fn(Co.yw,this.We),this.hv.fn(Co.pw,this.wz),this.hv.fn(Co.mw,this.LGt),this.hv.fn(Co.Ew,this.kGt)}constructor(t,e,s,n,r,h,o,a){super(),this.QB=s,this.FB=n,this.lRt=r,this.$Ft=h,this.AYt=I(),this.GFt=!0,this.YFt=!0,this.zFt=!1,this.CFt=void 0,this.FP=void 0,this.iwt=void 0,this.xI=new Wr,this.$Tt=void 0,this.fYt=void 0,this.gYt=void 0,this.wYt=void 0,this.yFt=void 0,this.vFt=void 0,this.wFt=void 0,this.bFt=void 0,this.lYt=void 0,this.jYt=[],this.i0=void 0,this.e0=void 0,this.HFt=void 0,this.mFt=void 0,this.mYt=void 0,this.JFt=void 0,this.PYt=new Wr,this.UFt=void 0,this.q2=new Wr,this.X2=void 0,this.IFt=-1,this.uGt=void 0,this.lGt=void 0,this._Gt=void 0,this.aGt=void 0,this.cGt=void 0,this.fGt=void 0,this.myt=!0,this.NYt=0,this.TYt=!1,this.QP=Le.Vz,this.BP=void 0,this.RP=void 0,this.o0=Ai.kB(),this.xGt=[],this.OFt=void 0,this.jFt=void 0,this.qTt=!1,this.j2=!1,this.HNt=void 0,this.qNt=0,this.XNt=0,this.PFt=void 0,this.BFt=0,this.ETt=!1,this.MGt=!1,this.XFt=mi.eT,this.Pbt=void 0,this.CGt=void 0,this.pTt=0,this.handleContentProtectionErrorEvent=t=>{this.BP=tn(t.errorObject),this.RP=t.errorObject,this.Ds(t)},this.handleBufferingErrorEvent=t=>{this.bz(new Rs(Ui.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.IGt=()=>{this.dzt();const t=this.ct;t!==this.HNt&&(this.HNt=t,this.Co(new ko(this.HNt)))},this.Mh=()=>{this.Sf&&this.Co(new jn(this.Mf))},this.jxt=()=>{this.Co(new hs(this.Mf))},this.EGt=()=>{this.qMt(),this.Co(new Gt(this.Mf))},this.fv=()=>{void 0!==this.CGt&&(i.Jd(this.CGt),this.CGt=void 0),this.Co(new Oe(this.Mf))},this.bGt=()=>{this.Co(new Wa(this.Mf))},this._O=()=>{this.Co(new _e(this.Mf,this.Jf))},this.f4=()=>{const t=this.RCt;se(this.xGt,t)||(this.Co(new YZ),this.xGt=t),this.Co(new Dr(this.Mf,this.Af))},this.ZYt=ze((t=>{t.mI===fi.ym&&this.AFt()&&ha(this.pFt())}),200),this.KYt=t=>{var i;this.pTt+=t.XRt;const e=this.rt.U>0?t.mI===fi.ym:t.mI===fi.Mm;"Mot"===t.qRt&&e&&ha(this.SYt()),this.Co(new ZU(function(t){if(t){if(void 0!==t.Zmt){var i,e;const s=t.Zmt.Cn+(null!=(e=t.Zmt.U)?e:0);return{zu:t.PM,Qht:[null==(i=t.Zmt)?void 0:i.Cn,s],pI:!0}}return{zu:t.PM.toString()||"",pI:!0}}return{zu:"",pI:!0}}(t.uri),(null==(i=this.PCt)?void 0:i.wP)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.mI,t.httpStatusCode,t.XRt))},this.We=()=>{this.Co(new ri(this.Mf))},this.wz=()=>{this.Co(new yi(this.Mf))},this.LGt=()=>{this.QTt()},this.kGt=()=>{this.Co(new Pc(this.Mf,this.c_))},this.DGt=()=>{this.hv.e_?this.Co(new Fr(this.Mf)):(null!=this.CGt||(this.CGt=i.$d((()=>{this.MGt&&(this.Pbt=void 0,ha(this.TFt()))}),2500)),this.qMt(),this.Co(new Fr(this.Mf)))},this.SGt=()=>{this.MGt=!0,this.Co(new zc(this.Mf,this.Jf))},this.QFt=t=>{ut(t)||tl(t)||nt(t)||(this.QYt(),ha(this.YYt()),this.Co(new wX(t)))},this.RBt=()=>{this.dzt()},this.ZFt=t=>{ha(this.CYt(t.jCt))},this.Uwt=t=>{if(ut(t))return;const i=t instanceof Rs?t:new Rs(Ui.MEDIA_DECODE_ERROR,t.message,t);this.bz(i)},this.onTextTrackChange=t=>{if(!this.yFt)return;const i=t.Lt,e=this.vYt(i);e&&(i.jg===Or.Pg||i.jg===Or.Jn?(ha(this.xYt(e)),this.AYt.forEach((t=>{t!==i&&(t.jg=Or.Ch)}))):this.bFt&&this.bFt===e&&ha(this.qFt(this.vFt,this.wFt,void 0)))},this.retryOfflineRenditionsCallback=async(t,i)=>{this.EFt!==t&&this.ZCt!==t&&this.JCt!==t||(await this.$Tt.NBt(t,i),t.DCt.tzt=-1/0)},this.$Nt=()=>{this.zMt()},this.tDt=()=>{this.BMt()},this.JYt=t=>{const i=this.yFt,e=null==i?void 0:i.Vjt;if(this.$Tt.PBt(t.Mst,t.jCt.DCt),!e&&(this.$Tt.zBt(t.Mst,t.jCt.DCt),this.eYt.gOt(),i)){const t=void 0!==this.vFt&&!qo(i.lOt,this.vFt),e=void 0!==this.wFt&&!qo(i.dOt,this.wFt);(t||e)&&this.qFt(t?void 0:this.vFt,e?void 0:this.wFt,this.bFt).catch(na)}},this.$Yt=t=>{this.eYt.AOt(t.jCt,t.Fct)},this.tGt=t=>{this.eYt.pOt(t.jCt,t.vQt.mN())},this.iGt=t=>{this.$Tt.OBt(t.jCt)},this.Tot=new Sc(o),this.hv=t,this.EI=e,this.WP=new gX(this.QB.mW),this.LYt=new vX(this.hv),this.IYt=new IX(this.QB),this.Yut=a.retryConfiguration,this.fT=new wo,this.gT=new wo,this.eYt=new _X(this,this.QB,this.fT,this.gT),this.MYt=new Lr,this.sz=new Ch(this.hv,this.EI),this.Fgt=new lW(this.hv),this.SLt=new pn(this.hv),this.Dl=new ms([this.MYt,this.sz.Z,this.Fgt.Z,this.SLt.Z,this.hv.nt]),this.JP=new jr(this.EI),this.hv.lz=this.JP,this.KNt=new GK(this,this.hv),this.yGt=new at(this.KNt,!0),this.NGt()}},YK=class{async kz(t,i){if(!dw(t.type))return!1;if(t.useNativePlayback)return!1;const e=t.contentProtection;if(e&&!jg(e)){if(!Gu(e))return!1;if(!await this.Oet(e))return!1}return!0}async Oet(t){return!!t.aes128||(!(!t.playready||!await i.Hx())||(!(!t.widevine||!await i.Gx())||(!(!t.clearkey||!await i.Wx())||!t.fairplay&&await i.$x())))}},GK=class extends BM{get Jf(){return this.Qo.Jf}eDt(){this.Co(new _e(this.Mf,this.Jf))}constructor(t,i){super(i),this.Qo=t}};function VK(t){return t.reduce(((t,i)=>t.Sn(i.DCt.PPt)),new Ai([0,1/0]))}function WK(t){const e=Vt(t,(t=>t.SCt)),s=t.filter((t=>t.ICt)),n=i.Ait,r=s.map((t=>t.gs)).filter(Po),h=IK(r,n);return h?Vt(s,(t=>t.gs===h)):e}function HK(t,i){for(const e of i){const i=t.filter((t=>t.Mst&&t.Mst.FEt&&ui(t.Mst.FEt,e)));if(0!==i.length)return i}}function qK(t){var i;return null!=(i=WK(t))?i:t[0]}function XK(t,i){return t.filter((t=>ZK(t,i)))}function ZK(t,e){const s=e+QK,n=0===t.dOt.length||t.dOt.some((t=>t.DCt.tzt<i.Kd()-s)),r=0===t.lOt.length||t.lOt.some((t=>t.DCt.tzt<i.Kd()-s));return n&&r}function KK(t,i){if(!i||i.DCt.Pjt)return!1;const e=i.DCt.nst;return 0!==e.length&&e[0].VT>t}var JK=class{async uRt(t,i,e){try{const s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:e},s,t);return new j(n)}catch(t){throw new Rs(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Ud(){}static sC(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}},gl=class extends wn{constructor(t,i){super(t),this.data=i}},$K=["message","messageerror","error"],tJ=class extends wn{constructor(t){super(Nt.ha),this.error=t}},iJ=class extends Bo{get OGt(){return this.jGt.Wd.zd}PGt(t,i){this.OGt||(void 0!==this.zGt?this.zGt.PGt(t,i):this.BGt.push({Bb:t,RGt:i}))}UGt(){this.OGt||(this.jGt.qd(),No(this.BGt),void 0!==this.zGt&&this.zGt.UGt())}constructor(t){super(),this.zGt=void 0,this.BGt=[],this.QGt=t=>{if(this.OGt)t.UGt();else{this.zGt=t,this.zGt.yn($K,this.Ds);for(const i of this.BGt)t.PGt(i.Bb,i.RGt);No(this.BGt)}},this.FGt=t=>{if(this.OGt)return;const i=t instanceof g?t:new g("Could not create Worker.");this.Co(new tJ(i)),this.UGt()},this.jGt=new Wr,t(this.jGt.Wd).then(this.QGt,this.FGt)}};var eJ=class extends Bo{PGt(t,i){i?this.zGt.postMessage(t,i):this.zGt.postMessage(t)}UGt(){this.Vo(),this.zGt.removeEventListener("message",this.YGt),this.zGt.removeEventListener("messageerror",this.GGt),this.zGt.removeEventListener("error",this.Z3),this.zGt.terminate()}constructor(t,i){super(),this.YGt=t=>{this.Co(new gl("message",t.data))},this.GGt=t=>{this.Co(new gl("messageerror",t.data))},this.Z3=t=>{null==t.preventDefault||t.preventDefault.call(t);const i=t.error instanceof g?t.error:new g(t.message);this.Co(new tJ(i)),this.UGt()},this.zGt=new Il(t,i),this.zGt.addEventListener("message",this.YGt),this.zGt.addEventListener("messageerror",this.GGt),this.zGt.addEventListener("error",this.Z3)}},sJ=0,nJ=class extends Bo{PGt(t,i){i?this.VGt.contentWindow.postMessage({type:"message",data:t},"*",i):this.VGt.contentWindow.postMessage({type:"message",data:t},"*")}UGt(){var t;this.VGt.removeEventListener("load",this.WGt),self.removeEventListener("message",this.HGt),null==(t=this.VGt.contentWindow)||t.postMessage({type:"terminate"},"*"),zu(this.VGt)}constructor(t,e){super(),this.WGt=()=>{this.VGt.removeEventListener("load",this.WGt),this.VGt.contentWindow.postMessage({type:"initialize",id:this.CT,script:this.qGt},"*")},this.HGt=t=>{t.origin===this.XGt&&t.data.id===this.CT&&("initialized"===t.data.type||("error"===t.data.type?(this.Co(new tJ(new g(t.data.data.message))),this.UGt()):this.Co(new gl("message",t.data.data))))},this.CT=sJ++,this.qGt=t;const s=i.Dh("iframe.html",e);this.VGt=function(t){const i=h.createElement("iframe");return i.width="0",i.height="0",i.style.display="none",i.role="",i.src=t,h.body.appendChild(i),i}(s.href),this.XGt=s.origin,this.VGt.addEventListener("load",this.WGt),self.addEventListener("message",this.HGt)}};function rJ(t,e,s){const n=i.Uv(t,e);return new iJ((t=>async function(t,e,s,n){let r;try{return r=new eJ(t,s),await uJ(r,n),r}catch(t){null==r||r.UGt(),yo(t)}if(aJ&&co){let e;try{const s=await i.AO.LS({zu:t,gI:yt.GET,wI:oe.Ru,Wd:n});e=await s.bI(n)}catch(t){yo(t)}if(e){let t;try{const i=co([e],{type:"application/javascript"});return t=URL.createObjectURL(i),r=new eJ(t,s),await uJ(r,n),r}catch(t){null==r||r.UGt(),yo(t),aJ=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return r=new nJ(t,e),await uJ(r,n),r}catch(t){throw null==r||r.UGt(),t}}(n,e,s,t)))}var hJ,oJ,aJ=!0;async function uJ(t,i){const e=await t.lf(["message","error"],i);if("error"===e.type)throw function(t){return new Rs(Ui.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(e.error);if(!function(t){return td(t)&&"8.2.0"===t.ZGt}(e.data))throw new Rs(Ui.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (8.2.0).");return e}!function(t){t.KGt="uRt",t.JGt="CRt"}(hJ||(hJ={})),function(t){t.$Gt="tVt",t.iVt="eVt"}(oJ||(oJ={}));var cJ=class{sVt(){const t=rJ(this.nVt,this.rVt,{name:"THEOplayer decrypt worker"});return t.yn("message",this.hVt),t.yn("error",this.oVt),t}uRt(t,i,e){const s=""+ ++this.aVt,n={uVt:hJ.KGt,cVt:s,lVt:t,dVt:i,fVt:e},r=new ue;return this._Vt.set(s,r),null!=this.zGt||(this.zGt=this.sVt()),this.zGt.PGt(n),r.tL}Ud(t){void 0===t&&(t=new Sn),this._Vt.forEach((i=>i.Jb(t))),this._Vt.clear(),this.zGt&&(this.zGt.UGt(),this.zGt=void 0)}constructor(t){this.zGt=void 0,this.aVt=0,this._Vt=ke(),this.hVt=t=>{const i=t.data,e=i.gVt,s=this._Vt.get(e);if(s)if(this._Vt.delete(e),i.wVt===oJ.$Gt)s.Zb(i.vVt);else if(i.wVt===oJ.iVt){const t=i.AVt,e=i.mVt?new g(i.mVt):void 0,n=new Rs(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt. (code: "+t+")",e);s.Jb(n)}},this.oVt=t=>{const i=new Rs(Ui.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Ud(i)},this.rVt=t;try{this.nVt=i.Uv("theoplayer.d.js",t)}catch(t){throw new Rs(Ui.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function lJ(t){return JK.sC()?new JK:new cJ(t)}function dJ(t){const i=Vt(t.boxes,dk);if(!i)return;const e=Vt(i.boxes,fk);return e?e.handlerType:void 0}function fJ(t){const i=new Ey;return i.boxes.push(...t.boxes),i}function _J(t){const i=new Bh;return i.boxes.push(...t.boxes),i}var gJ=8;function wJ(t,i){const e=function(t){const i=new ny;return i.boxes.push(...t.boxes),i}(t),s=AJ(i);for(let t=0;t<e.boxes.length;t++){const n=e.boxes[t];if(n===i)e.boxes[t]=new pp(new j(i.getSize()-gJ));else if(_k(n)){const i=n,r=tc(i.boxes,(t=>t instanceof Oh&&t.trackId===s));if(r>=0){const s=i.boxes[r],n=_J(i);n.boxes[r]=new pp(new j(s.getSize()-gJ)),e.boxes[t]=n}}}return e}function vJ(t,i){const e=function(t){const i=new dy;return i.boxes.push(...t.boxes),i}(t);for(let t=0;t<e.boxes.length;t++){const s=e.boxes[t];if(vk(s)){const n=Vt(s.boxes,Ak);n&&n.trackId===i&&(e.boxes[t]=new pp(new j(s.getSize()-gJ)))}}return e}function AJ(t){return Vt(t.boxes,lk).trackId}function mJ(t,i,e,s){const n=Vt(t.boxes,Ak),r=e.gD(i).HN();let h=Ce.ZERO;for(const i of t.boxes){if(i instanceof Hh){h=X_(i.baseMediaDecodeTime,r),i.baseMediaDecodeTime=i.baseMediaDecodeTime.subtract(h);break}if(i instanceof Mr){h=X_(Ce.fromNumber(i.baseMediaDecodeTime),r),i.baseMediaDecodeTime-=h.toNumber();break}}if(h.isZero())return;const o=Vt(t.boxes,mk);if(void 0!==o&&o.samples.length>0){const t=o.samples;if(!o.flags.sampleDurationPresent){o.flags.sampleDurationPresent=!0;const i=null!=s?s:n.defaultSampleDuration;for(const e of t)e.duration=i}t[0].duration+=h.toNumber(),o.samples=t}}var pJ="Mp4Transmuxer",yJ=class extends Ml{bQt(t,i){fo(i);const e=t.jCt,s=Wk(Ao(t.kjt.zm.zm));if(!s)throw new g("Mp4Transmuxer - Unable to parse "+e.Rg+" MP4 initializer.");this.NJ=s;const n=function(t){let i,e;for(const s of t.Z)i||(i=s.yK),e||(e=s.pK);if(i||e)return{FEt:i,GEt:e,UOt:void 0};return}(s);n&&this.xQt(e,n);const r=function(t){for(const i of t.Z)if(void 0!==i.MK)return i.MK;return}(s);void 0!==r&&this.CQt(e,r);const h=function(t){var i;const e=Oy(t),s=Vt(e.boxes,uk),n=s.boxes.filter(ck),r=Vt(n,(t=>dJ(t)===Lp.AUDIO)),h=Vt(n,(t=>dJ(t)===Lp.VIDEO)),o={FEt:{Fp:r?AJ(r):void 0},GEt:{Fp:h?AJ(h):void 0}},a=null==(i=Vt(s.boxes,_k))?void 0:i.boxes.filter(gk);var u,c;const l=a?{FEt:null!=(u=Vt(a,(t=>t.trackId===o.FEt.Fp)))?u:void 0,GEt:null!=(c=Vt(a,(t=>t.trackId===o.GEt.Fp)))?c:void 0}:void 0;var d,f;if(l&&(o.FEt.wM=null==(d=l.FEt)?void 0:d.defaultSampleDuration,o.GEt.wM=null==(f=l.GEt)?void 0:f.defaultSampleDuration),!r||!h)return{FEt:r?t:void 0,GEt:h?t:void 0,JD:o};const _=fJ(e),g=fJ(e),w=e.boxes.indexOf(s);_.boxes[w]=wJ(s,h),g.boxes[w]=wJ(s,r);const v=_.serialize().join(),A=g.serialize().join();return{FEt:v,GEt:A,JD:o}}(t.kjt.zm.zm);if(this.pVt=h.JD,h.GEt){const i=Vt(s.Z,(t=>t.Fp===h.JD.GEt.Fp)),e={Rg:"oEt",zm:{Rg:G.dq,zm:h.GEt},ght:fi.ym,Ojt:t.Ojt,BQt:{Mst:'video/mp4; codecs="'+i.pK+'"',Sjt:t.Sjt},VT:t.VT,jCt:t.jCt,rRt:t.kjt.rRt};this.KUt(e)}if(h.FEt){const i=Vt(s.Z,(t=>t.Fp===h.JD.FEt.Fp)),e={Rg:"oEt",zm:{Rg:G.dq,zm:h.FEt},ght:fi.Mm,Ojt:t.Ojt,BQt:{Mst:'audio/mp4; codecs="'+i.yK+'"',Sjt:t.Sjt},VT:t.VT,jCt:t.jCt,rRt:t.kjt.rRt};this.KUt(e)}return Promise.resolve()}async kQt(t,i){fo(i);const e=t.Mot.rRt;er.Xp(pJ,"Transmuxing fMP4: "+Tc(e.mAt));const s=t.Mot.zm,n=MJ(s.zm,this.NJ),r=yd(n.map((t=>t.o9)),pv);if(void 0!==r&&(e.a9=r,this.jQt(t.jCt)),!this.qzt.Mzt(t.Ojt)){const s=is.pD(e.VT);if(n.length>0){const i=yd(n.map((t=>t.yVt)),pv);for(const n of this.MQt)this.qzt.Ozt(t.Ojt,n,i,s,TJ(e),!1);this.jQt(t.jCt)}this.qzt.Mzt(t.Ojt)||await Ys(this.qzt.Nzt(t.Ojt),i)}const h=this.qzt.Lzt(t.Ojt),o=e.a9?this.qzt.kzt(e.a9,e).mN():e.VT,a=jl(e,o);var u;const c={uQt:a,cQt:dl(e,a),VT:o,ct:null!=(u=e.ct)?u:0,QD:h.mN(),Ojt:t.Ojt,jCt:t.jCt,rRt:t.Mot.rRt},l=function(t,i){if(void 0===i.FEt.Fp)return{FEt:void 0,GEt:t};if(void 0===i.GEt.Fp)return{FEt:t,GEt:void 0};const e=Oy(t),s=fJ(e),n=fJ(e);for(let t=0;t<e.boxes.length;t++){const r=e.boxes[t];wk(r)&&(s.boxes[t]=vJ(r,i.GEt.Fp),n.boxes[t]=vJ(r,i.FEt.Fp))}const r=s.serialize().join(),h=n.serialize().join();return{FEt:r,GEt:h}}(s.zm,this.pVt);if(l.GEt){var d;const i=this.pVt.GEt.Fp,s=Vt(this.NJ.Z,(t=>t.Fp===i)),h=Vt(n,(t=>t.Fp===i)),o=this.MVt(l.GEt,s,h,null==(d=this.pVt)?void 0:d.GEt.wM,e);this.TVt=s,this.OQt(t.jCt,e,h.o9.LN(r));const a=Yt({Rg:"Mot",zm:{Rg:G.dq,zm:o},ght:fi.ym},c);this.KUt(a)}if(l.FEt){const t=Yt({Rg:"Mot",zm:{Rg:G.dq,zm:l.FEt},ght:fi.Mm},c);this.KUt(t)}this.NVt=e,this.DVt=n}MVt(t,i,e,s,n){if(!TJ(n))return t;if(!this.NVt||!this.TVt||!this.DVt)return t;const r=this.TVt.Fp,h=Vt(this.DVt,(t=>t.Fp===r)),o=this.qzt.kzt(h.SVt,this.NVt),a=this.qzt.kzt(e.o9,n).LN(o).gD(i.xp);if(a.NN(is.zN))return t;if(a.pN(is.pD(.5)))return t;const u=Ts(n)?n:n.rPt;return er.oOt(pJ,"Stretching first video frame of segment #"+u.djt+" to fill gap of "+a.mN()+"s"),function(t,i,e,s){const n=Oy(t),r=Vt(n.boxes,wk);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Br&&mJ(t,i,e,s);const n=r.getSize();if(n!==t){const i=n-t;for(const t of r.boxes)t instanceof Br&&pk(t,i)}}return n.serialize().join()}(t,i.xp,a,s)}constructor(...t){super(...t),this.NJ=void 0,this.pVt=void 0,this.NVt=void 0,this.DVt=void 0,this.TVt=void 0}};function MJ(t,i){const e=Ig(iu._p(Ao(t)),he.$A);if(!e)throw new g("Mp4Transmuxer - Unable to parse segment or part.");return function(t,i){const e=[];for(const n of t.Z){if(!n.IM||0===n.SM.length||0===n.SM[0].CM.length)continue;const t=n.rp.Fp,r=Vt(i.Z,(i=>i.Fp===t));let h=0,o=1/0,a=0;const u=n.rp.wM||0;for(const t of n.SM)for(const i of t.CM){const t=i.OM||0,e=h+t;var s;h+=null!=(s=i.ct)?s:u;const n=h+t;e<o&&(o=e),n>a&&(a=n)}const c=is.ON(n.IM.IM,r.xp);e.push({Fp:t,yVt:c,o9:c.ET(is.jN(o,r.xp)),IVt:c.ET(is.jN(h,r.xp)),SVt:c.ET(is.jN(a,r.xp))})}return e}(e,i)}function TJ(t){return Ts(t)?t.Ljt:0===t.oPt&&t.rPt.Ljt}var NJ,DJ="MpegtsTransmuxer",SJ=class extends yJ{bQt(t,i){return super.bQt(t,i)}SQt(t,i){if(super.SQt(t,i),this.Sit.EVt())return;var e;const s=null!=(e=null==i?void 0:i.mAt)?e:t.mAt;if(!s)return;/\.(ts|aac|mp3)/i.test(s.PM)&&this.Sit.bVt()}LVt(t){let i;return t.jCt===this.kVt&&this.xVt.has(t.Ojt)?i=this.xVt.get(t.Ojt):(i=jK(t.Mot.zm.zm),this.kVt=t.jCt,this.xVt.set(t.Ojt,i)),i}async kQt(t,i){fo(i);const e=this.LVt(t),s=t.Mot;if(e!==bK.lFt&&e!==bK.dFt)return super.kQt(t,i);if(s.rRt.Sjt.some(EJ))throw new Rs(Ui.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const n=this.Sit.bVt();let r;e===bK.lFt?(er.Xp(DJ,"Transmuxing MPEG-TS: "+Tc(s.rRt.mAt)),r=await n.CVt({data:s.zm.zm,metadata:this.OVt})):(er.Xp(DJ,"Transmuxing raw audio: "+Tc(s.rRt.mAt)),r=await n.jVt({data:s.zm.zm,metadata:this.OVt})),fo(i),this.xQt(t.jCt,{FEt:r.metadata.audio_codec,GEt:r.metadata.video_codec,UOt:void 0}),r.metadata.video_frame_rate&&this.CQt(t.jCt,r.metadata.video_frame_rate);const h=bJ(r.metadata.first_decode_timestamp),o=bJ(r.metadata.first_presentation_timestamp),a=void 0!==r.metadata.first_video_presentation_timestamp?bJ(r.metadata.first_video_presentation_timestamp):void 0;if(s.rRt.a9=o,this.jQt(t.jCt),void 0!==a&&this.OQt(t.jCt,s.rRt,function(t,i){let e=t.LN(i);return e.SN(is.zN)&&(e=e.ET(Tv())),e}(a,o)),!this.qzt.Mzt(t.Ojt)){const e=is.pD(s.rRt.VT);for(const i of this.MQt)this.qzt.Ozt(t.Ojt,i,h,e,TJ(s.rRt),!0);this.jQt(t.jCt),this.qzt.Mzt(t.Ojt)||await Ys(this.qzt.Nzt(t.Ojt),i)}const u=this.qzt.Czt(h,s.rRt);this.OVt=r.metadata;const c=this.qzt.kzt(o,s.rRt).mN(),l=jl(s.rRt,c);var d;const f={uQt:l,cQt:dl(s.rRt,l),VT:c,ct:null!=(d=s.rRt.ct)?d:0,QD:u.mN(),Ojt:t.Ojt,jCt:t.jCt,rRt:s.rRt};if(void 0===r.data.audio_media&&void 0===r.data.video_media){for(const t of this.MQt){const i=Yt({Rg:"Mot",zm:void 0,ght:t},f);this.KUt(i)}return}const _=[];if(void 0!==r.data.audio_media){if(r.data.audio_init&&(!this.PVt||this.zVt!==t.Ojt||!to(this.PVt,r.data.audio_init))){const i=this.qzt.kzt(s.rRt.a9,s.rRt).mN(),e={Rg:"oEt",zm:{Rg:G.dq,zm:r.data.audio_init},ght:fi.Mm,Ojt:t.Ojt,BQt:{Mst:'audio/mp4; codecs="'+r.metadata.audio_codec+'"',Sjt:s.rRt.Sjt},VT:i,jCt:t.jCt,rRt:s.rRt};this.PVt=r.data.audio_init,this.zVt=t.Ojt,this.KUt(e)}const i=Yt({Rg:"Mot",zm:{Rg:G.dq,zm:r.data.audio_media},ght:fi.Mm},f);this.KUt(i)}else if(t.Mot.rRt.sPt&&qo(this.MQt,fi.Mm)){const t=Yt({Rg:"Mot",zm:void 0,ght:fi.Mm},f);this.KUt(t)}if(void 0!==r.data.video_media){if(r.data.video_init&&(!this.BVt||this.RVt!==t.Ojt||!to(this.BVt,r.data.video_init))){const i=this.qzt.kzt(s.rRt.a9,s.rRt).mN(),e={Rg:"oEt",zm:{Rg:G.dq,zm:r.data.video_init},ght:fi.ym,Ojt:t.Ojt,BQt:{Mst:'video/mp4; codecs="'+r.metadata.video_codec+'"',Sjt:s.rRt.Sjt},VT:i,jCt:t.jCt,rRt:s.rRt};this.BVt=r.data.video_init,this.RVt=t.Ojt,this.UVt=Wk(Ao(r.data.video_init)),this.KUt(e)}const i=this.UVt.Z[0],e=MJ(r.data.video_media,this.UVt)[0],n=this.MVt(r.data.video_media,i,e,void 0,s.rRt);this.TVt=i;const h=Yt({Rg:"Mot",zm:{Rg:G.dq,zm:n},ght:fi.ym},f);this.KUt(h),_.push(e)}else if(t.Mot.rRt.sPt&&qo(this.MQt,fi.ym)){const t=Yt({Rg:"Mot",zm:void 0,ght:fi.ym},f);this.KUt(t)}this.NVt=s.rRt,this.DVt=_}qd(){this.PVt=void 0,this.BVt=void 0,this.zVt=-1,this.RVt=-1,super.qd()}constructor(t,i,e,s){super(i,e,s),this.OVt=void 0,this.PVt=void 0,this.BVt=void 0,this.UVt=void 0,this.zVt=-1,this.RVt=-1,this.kVt=void 0,this.xVt=I(),this.Sit=t}},IJ=class{cMt(t,i,e){return new SJ(this,t,i,e)}};function EJ(t){return t.gI===sc.FOt}function bJ(t){return is.ON(Ce.fromBits(t.low,t.high),t.base)}!function(t){t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4"}(NJ||(NJ={}));var LJ=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=f.ME;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(Bn("AGFzbQEAAAA="))}catch(t){return!1}}();return LJ=()=>t,t};var kJ=class{CVt(t){return this.QVt(NJ.MPEGTS_TO_FMP4,t)}jVt(t){return this.QVt(NJ.RAW_AUDIO_TO_FMP4,t)}sVt(){const t=rJ(this.nVt,this.rVt,{name:"THEOplayer transmux worker"});return t.yn("message",this.hVt),t.yn("error",this.oVt),t}QVt(t,i){const e=++this.aVt,s={type:t,id:e,input:i},n=new ue;return this._Vt.set(e,n),this.zGt.PGt(s),n.tL}Ud(t){void 0===t&&(t=new Sn),this._Vt.forEach((i=>i.Jb(t))),this._Vt.clear(),this.zGt.UGt()}constructor(t){this.aVt=0,this._Vt=I(),this.hVt=t=>{const i=t.data;if(void 0!==i.requestId){const t=this._Vt.get(i.requestId);if(!t)return;this._Vt.delete(i.requestId),i.success?t.Zb(i.output):t.Jb(new Rs(i.errorCode,i.error))}else i.success||this.Ud(new Rs(i.errorCode,i.error))},this.oVt=t=>{const i=new Rs(Ui.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Ud(i)},this.rVt=t;const e=LJ()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.nVt=i.Uv(e,t)}catch(t){throw new Rs(Ui.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.zGt=this.sVt()}},xJ=class extends IJ{EVt(){return void 0!==this.zGt}bVt(){var t;return null!=(t=this.zGt)?t:this.zGt=new kJ(this.FVt)}Ud(){this.zGt&&(this.zGt.Ud(),this.zGt=void 0)}constructor(t){super(),this.FVt=t,this.zGt=void 0}},CJ=class{c9(){return new xJ(this.FVt)}constructor(t){this.FVt=t}},OJ=class extends FK{v_(){if(rU(this.hv))return this.hv.v_()}get g_(){return!1}set g_(t){}async gn(){var t;await super.gn(),null==(t=this.nDt)||t.gn()}constructor(t,i,e,s,n,r,h,o){super(t,i,e,s,n,r,h,o),f.ZE&&(this.nDt=new AU(this))}},jJ=class extends OJ{async gn(){await super.gn(),await this._z.fz(this.hv)}constructor(t,i,e,s,n,r,h,o){const a=new vU(t);super(a.Lz(fi.ym),i,e,s,n,r,h,o),this._z=a}},PJ=class extends YK{async kz(t,i){return!!as(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(f.Ga||f.Mb))&&super.kz(t,i))}async Oet(t){return(!t.clearkey||!f.ZE)&&super.Oet(t)}};ct(new class extends PJ{dA(t,i,e,s,n,r,h){return new jJ(i,e,n,r,lJ(s.libraryLocation),new CJ(s.libraryLocation),new Xe(wi.Lb.hst,wi.Lb.rst,wi.Lb.nst,wi.Lb.ast),s)}xz(){return!0}constructor(...t){super(...t),this.Cz=Ca.Wv}}),er.Rt=()=>{var t;return Boolean(null==(t=s)?void 0:t.THEOplayerDebugLogsEnabled)};var zJ=class{Bet(t,i){return Promise.resolve(!1)}Uet(t,i){return Promise.resolve(void 0)}jet(t){return Promise.resolve(void 0)}zH(t){return Promise.resolve(void 0)}},BJ=class extends Bo{YVt(){var t;return null==(t=this.GVt)?void 0:t.DCt}Cn(t){ha(qc((()=>this.VVt(t)),t))}async VVt(t){await this.$Tt.wBt(t),this.WVt&&(this.HVt(this.WVt.ji,this.WVt.Ti),this.WVt=void 0),this.S4=!0}qVt(t,i){this.S4?this.HVt(t,i):this.WVt={ji:t,Ti:i}}HVt(t,i){const e=this.XVt(t,i),s=null==e?void 0:e.dOt[0];s!==this.GVt&&(this.ZVt(),void 0!==s&&(this.GVt=s,this.KVt=new ol(this.$Tt,s),this.KVt.mRt()))}ZVt(){this.GVt=void 0,this.KVt&&(this.KVt.Ud(),this.KVt=void 0)}XVt(t,i){const e=Vt(this.$Tt.Tr.cOt,(e=>void 0!==e.xEt&&e.xEt.ji===t&&e.xEt.Ti===i));return null!=e?e:this.$Tt.Tr.cOt[0]}gn(){this.Vo(),this.ZVt(),this.$Tt.Ud()}constructor(t,i,e){super(),this.GVt=void 0,this.KVt=void 0,this.WVt=void 0,this.JVt=()=>{this.Co(new tV)},this.bc=t,this.$Tt=new Nn(e,new zJ,t.useCredentials,t.src,t.liveOffset),this.$Tt.yn(Co.lw,this.Ds),this.S4=!1}},RJ=class extends dt{get ht(){return this.a2.ht}get wf(){return this.a2.wf}get Af(){return this.a2.Af}set Af(t){this.a2.Af=t}get bt(){return this.a2.bt}get Mf(){return this.a2.Mf}set Mf(t){this.a2.Mf=t}Nf(t,i){this.Mf=t}get ct(){return this.a2.ct}get Sf(){return this.a2.Sf}get bf(){return this.a2.bf}get kf(){return this.a2.kf}get lt(){return this.a2.lt}get Cf(){return this.a2.Cf}get jf(){return this.a2.jf}get zf(){return this.a2.zf}set zf(t){this.a2.zf=t}get Uf(){return this.a2.Uf}get Ff(){return this.a2.Ff}get Gf(){return this.a2.Gf}set Gf(t){this.a2.Gf=t}get Hf(){return this.a2.Hf}get Xf(){return this.a2.Xf}set Xf(t){this.a2.Xf=t}get Jf(){return this.a2.Jf}get t_(){return this.a2.t_}get e_(){return this.a2.e_}get YP(){return this.a2.YP}get nt(){return this.a2.nt}get r_(){return this.a2.r_}get rt(){return this.a2.rt}get a_(){return this.a2.a_}get c_(){return this.a2.c_}set c_(t){this.a2.c_=t}get f_(){return this.a2.f_}get g_(){return this.a2.g_}set g_(t){this.a2.g_=t}get VP(){return this.a2.VP}get yv(){}M_(){return this.a2.M_()}w_(){return this.a2.w_()}v_(){return this.a2.v_()}be(){return this.a2.be()}D_(){return this.a2.D_()}S_(){return this.a2.S_()}m_(){return this.a2.m_()}p_(){return this.a2.p_()}tr(){return this.a2.tr()}ga(t,i,e){return this.a2.ga(t,i,e)}ge(){return this.a2.ge()}T_(){return this.a2.T_()}N_(){return this.a2.N_()}gn(){this.Vo();for(const t of bN)this.a2.fn(t,this.Ds);return this.a2.gn()}constructor(t){super(),this.a2=t;for(const t of bN)this.a2.yn(t,this.Ds)}},UJ=class extends RJ{async ga(t,i,e){await super.ga(t,i,e),t.hlsDateRange&&this._At(t,i,e)}_At(t,i,e){this.$Vt=new BJ(t,i,this.tWt),this.$Vt.yn(Co.lw,this.handleManifestUpdate),this.$Vt.Cn(e)}tr(){return this.BBt&&(this.nt.it(this.BBt),this.l3.it(this.BBt),this.BBt.gn(),this.BBt=void 0,this.iWt=!1),this.$Vt&&(this.$Vt.gn(),this.$Vt=void 0),this.l3.tr(),super.tr()}gn(){return this.fn(Co.mw,this.LGt),this.$Vt&&(this.$Vt.gn(),this.$Vt=void 0),this.l3.gn(),super.gn()}constructor(t,i,e){super(t),this.$Vt=void 0,this.iWt=!1,this.BBt=void 0,this.handleManifestUpdate=()=>{const t=this.$Vt.YVt();if(t){const i=this.YP;if(i){const e=i.getTime();let s=this.BBt;s||(s=new wZ,this.BBt=s),s.Yn(t.jjt,(t=>(t.getTime()-e)/1e3)),!this.iWt&&s.L.U>0&&(this.nt.tt(s),this.l3.tt(s),this.iWt=!0)}}},this.LGt=()=>{this.$Vt&&this.$Vt.qVt(this.a_,this.r_)},this.tWt=i,this.l3=new ou(this),this.yn(Co.mw,this.LGt)}};!function(t){DN.Oz().jz(t)}((function(t,i,e){return new UJ(t,i,e)}));var Pa=class extends Jo{get name(){return"CastError"}constructor(t,i=""){super("An error occurred while casting."),this.errorCode=t,this.description=i}};async function QJ(t){GJ()||await async function(t){if(null==t?void 0:t.zd)return Promise.reject(new Sn);const{tL:i,Zb:e,Jb:n}=function(){let t,i;return{tL:new Promise(((e,s)=>{t=e,i=s})),Zb:t,Jb:i}}(),r=s.__onGCastApiAvailable,h=()=>{s.__onGCastApiAvailable=r,n(new Sn)};return s.__onGCastApiAvailable=(i,o)=>{i?e():n(new g(o)),null==t||t.Yd(h),s.__onGCastApiAvailable=r,r&&r(i,o)},null==t||t.Fd(h),i}(t),YJ()||await N(100,t),YJ()||(i.Qv('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await FJ())}var FJ=Oa((()=>function(t){return new Promise(((i,e)=>{const s=h.createElement("script");s.onload=()=>i(),s.onerror=t=>e((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}("//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js").catch((()=>{throw new Pa("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))));function YJ(){return Boolean("undefined"!=typeof cast&&cast.framework)}function GJ(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function VJ(t,i,e,s){if(Po(i))for(const e of w.keys(i)){if("type"===e||"images"===e)continue;const s=i[e];Po(s)&&(t[e]=s)}!function(t,i,e,s){if(!Po(e)&&!Po(null==i?void 0:i.images))return;t.images=[],e&&t.images.push(new s.Image(e));if(null==i?void 0:i.images)if(Qs(i.images))t.images.push(new s.Image(i.images));else if(fh(i.images))for(const e of i.images){let i;var n,r;if(Qs(e))i=new s.Image(e);else i=new s.Image(e.src),i.height=null!=(n=e.height)?n:null,i.width=null!=(r=e.width)?r:null;t.images.push(i)}}(t,i,e,s)}function WJ(t,i,e){return void 0===e&&(e=chrome),function(t,i,e){switch(null==t?void 0:t.type){case"movie":{const s=new e.MovieMediaMetadata;return VJ(s,t,i,e),s}case"audio":{const s=new e.MusicTrackMediaMetadata;return VJ(s,t,i,e),!Po(s.artist)&&Po(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new e.TvShowMediaMetadata;return VJ(s,t,i,e),!Po(s.title)&&Po(t.episodeTitle)&&(s.title=t.episodeTitle),!Po(s.season)&&Po(t.seasonNumber)&&(s.season=t.seasonNumber),!Po(s.episode)&&Po(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new e.GenericMediaMetadata;return VJ(s,t,i,e),s}}}(t,i,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(e))}function HJ(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function qJ(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return Vt(t.items,(i=>i.itemId===t.currentItemId))}var $n,XJ="urn:x-cast:com.theoplayer.cast";!function(t){t.eWt="theoplayer_receiver_info",t.sWt="theoplayer_trackpropertychange",t.nWt="theoplayer_propertychange"}($n||($n={}));var ZJ;(ZJ||(ZJ={})).SKIP_AD="SKIP_AD";function KJ(t){h.createElement("img").src=t}var JJ=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function $J(t){if(!Qs(t))return;const i=t.match(JJ);return i?3600*x(i[1],10)+60*x(i[2],10)+Number(i[3])+(Number(i[4])||0)/1e3:void 0}function t$(t){if(void 0===t)return;const i=t.match(/^([1-9]?\d|100)%$/);return i?x(i[1])/100:void 0}function Un(t,i){return"vmap"===t.type||!Po(t.type)&&!Po(i)}function i$(t,i){return"vast"===t.type||!Po(t.type)&&Po(i)}var e$,s$=class{},n$=class extends s${get rWt(){return this.Ic}hWt(){return null!=this.oWt||(this.oWt=A(this.Ic,(t=>t.hWt()))),this.oWt}constructor(t){super(),this.Ic=t.sort(((t,i)=>t.MM-i.MM))}},r$=class extends s${get o(){return this.aWt}get MM(){return this.uWt}get cWt(){return this.lWt}constructor(t,i){super(),this.aWt=t,this.uWt=i,this.lWt=!1}},h$=class extends r${get dWt(){return this.fWt}get _Wt(){return this.gWt}get wWt(){return this.vWt}get AWt(){return this.mWt}get lt(){return this.BP}hWt(){if(void 0===this.pWt){let t,i,e,s=[];for(const n of this.fWt)n.yWt&&(t=n.yWt),n.MWt&&(i=n.MWt),n.TWt&&(e=n.TWt),s=s.concat(n.universalAdIds);this.pWt={AWt:this.AWt,yWt:t,NWt:i,TWt:e,lt:this.lt,DWt:s}}return[this.pWt]}constructor(t,i,e,s,n,r,h){super(t,i),this.gWt=e,this.vWt=s,this.mWt=n,this.fWt=r,this.BP=h}},o$=class{get SWt(){return this.IWt}get EWt(){return this.bWt}constructor(t,i){this.IWt=t,this.bWt=i}},a$=class{get LWt(){return this.kWt}get xWt(){return this.CWt}get OWt(){return this.jWt}get PWt(){return this.zWt}get Xl(){return this.BWt}set Xl(t){this.BWt=t}get RWt(){return this.UWt}get QWt(){return this.FWt}YWt(){this.FWt=!0}get _Wt(){return this.gWt}constructor(t,i,e,s,n,r){this.kWt=t,this.CWt=i,this.jWt=e,this.zWt=s,this.FWt=!1,this.UWt=n,this.gWt=r}};!function(t){t.GWt="all",t.VWt="any",t.Vz="none"}(e$||(e$={}));var Ws,u$=class{get WWt(){return this.HWt}get qWt(){return this.XWt}constructor(t,i){this.HWt=t,this.XWt=i}},c$=class{get o(){return this.CT}get ji(){return this.wk}get Ti(){return this.vk}get ZWt(){return this.KWt}get JWt(){return this.$Wt}get tHt(){return this.iHt}get eHt(){return this.sHt}get nHt(){return this.rHt}get hHt(){return this.oHt}get aHt(){return this.uHt}get LWt(){return this.kWt}get xWt(){return this.CWt}get OWt(){return this.jWt}get cHt(){return this.lHt}get EWt(){return this.dHt}get fHt(){return this._Ht}constructor(t,i,e,s,n,r,h,o,a,u,c,l,d,f,_,g){this.wk=t,this.vk=i,this.CT=e,this.KWt=s,this.$Wt=n,this.iHt=r,this.sHt=h,this.rHt=o,this.oHt=a,this.uHt=u,this.kWt=c,this.CWt=l,this.jWt=d,this.lHt=f,this.dHt=_,this._Ht=g}},l$=class{get id(){return this.CT}get uri(){return this.cPt}constructor(t,i){this.CT=t,this.cPt=i}},d$=class{get gHt(){return this.wHt}get vHt(){return this.AHt}get mHt(){return this.pHt}get yHt(){return this.MHt}constructor(t,i,e,s){this.wHt=t,this.AHt=i,this.pHt=e,this.MHt=s}},f$=class extends r${get AWt(){return this.mWt}get THt(){return this.NHt}get DHt(){return this.SHt}get dWt(){return this.fWt}get IHt(){return this.EHt}get bHt(){return this.LHt}get lt(){return this.BP}hWt(){return void 0===this.NHt?[]:(null!=this.oWt||(this.oWt=this.NHt.hWt().map((t=>this.kHt(t)))),this.oWt)}kHt(t){let i,e,s;for(const t of this.dWt)t.yWt&&(i=t.yWt),t.MWt&&(e=t.MWt),t.TWt&&(s=t.TWt);const n=t.AWt.concat(this.AWt);let r=t.yWt;if(i&&t.yWt){const e=new d$(t.yWt.xHt.gHt,t.yWt.xHt.vHt,t.yWt.xHt.mHt.concat(i.xHt.mHt),t.yWt.xHt.yHt.concat(i.xHt.yHt));r=t.yWt,r.xHt=e,r.EWt=r.EWt.concat(i.EWt)}let h=t.NWt;if(e&&e.SWt){var o,a;const s=[];for(const t of e.SWt)s.concat(t.PWt.mHt);const n=[];var u,c;for(const e of null!=(u=null==(o=t.NWt)?void 0:o.SWt)?u:[]){var l,d,f;const r=new d$(e.PWt.gHt,e.PWt.vHt,e.PWt.mHt.concat(s),(null!=(d=null==(l=t.yWt)?void 0:l.xHt.yHt)?d:[]).concat(null!=(f=null==i?void 0:i.xHt.yHt)?f:[]));n.push(new a$(e.LWt,e.xWt,e.OWt,r,e.RWt,e._Wt))}h=new o$(n,(null!=(c=null==(a=t.NWt)?void 0:a.EWt)?c:[]).concat(e.EWt))}let _=t.TWt;if(_){var g;let i=_.WWt;var w,v;s&&s.WWt&&(i=s.WWt),_=new u$(i,(null!=(w=null==(g=t.TWt)?void 0:g.qWt)?w:[]).concat(null!=(v=null==s?void 0:s.qWt)?v:[]))}let A=t.lt;return this.lt&&(A=this.lt),{AWt:n,yWt:r,NWt:h,TWt:_,lt:A,DWt:t.DWt}}constructor(t,i,e,s,n,r,h,o,a){super(t,i),this.mWt=e,this.NHt=s,this.SHt=n,this.fWt=r,this.EHt=h,this.LHt=o,this.BP=a}},_$=class{get o(){return this.CT}get CHt(){return this.OHt}get jHt(){return this.PHt}get nHt(){return this.rHt}get yWt(){return this.zHt}get MWt(){return this.BHt}get TWt(){return this.RHt}get universalAdIds(){return this.UHt}constructor(t,i,e,s,n,r,h,o){this.CT=t,this.OHt=i,this.PHt=e,this.rHt=s,this.zHt=n,this.BHt=r,this.RHt=h,this.UHt=o}},g$=class{get ct(){return this.QHt}get FHt(){return this.YHt}get EWt(){return this.bWt}set EWt(t){this.bWt=t}set xHt(t){this.GHt=t}get xHt(){return this.GHt}get VHt(){return this.WHt}set VHt(t){this.WHt=t}get HHt(){return this.FWt}get Xl(){return this.BWt}set Xl(t){this.BWt=t}get RWt(){return this.UWt}get _Wt(){return this.gWt}YWt(){this.FWt=!0}constructor(t,i,e,s,n,r,h){this.QHt=t,this.YHt=i,this.bWt=e,this.GHt=s,this.WHt=n,this.FWt=!1,this.UWt=r,this.gWt=h}};function It(t,i){return A$(t)&&t.getAttribute(i)||void 0}function w$(t,i){return v$(t,i,void 0,!1)}function v$(t,i,e,s){return i===(t.localName?t.localName:t.nodeName)&&(s&&e?e===t.namespaceURI:!e||!t.namespaceURI||e===t.namespaceURI)}function Ho(t,i){const e=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);A$(n)&&w$(n,i)&&e.push(n)}return e}function A$(t){return t&&1===t.nodeType}function m$(t,i){const e=(new DOMParser).parseFromString(t,i);if(!e||e.getElementsByTagName("parsererror").length>0)throw new g('Invalid document for MIME type "'+i+'"');return e}function p$(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function y$(t){return"data:application/xml,"+encodeURIComponent(t)}function M$(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}!function(t){t.qHt="mute",t.XHt="unmute",t.Sh="pause",t.ZHt="resume",t.KHt="rewind",t.JHt="skip",t.$Ht="playerExpand",t.tqt="playerCollapse",t.Ah="fullscreen",t.iqt="exitFullscreen",t.eqt="expand",t.COLLAPSE="collapse",t.Kyt="start",t.sqt="firstQuartile",t.nqt="thirdQuartile",t.rqt="midpoint",t.hqt="complete",t.oqt="acceptInvitationLinear",t.aqt="acceptInvitation",t.uqt="timeSpentViewing",t.cqt="otherAdInteraction",t.gw="progress",t.lqt="creativeView",t.dqt="adExpand",t.fqt="adCollapse",t._qt="minimize",t.gqt="close",t.wqt="closeLinear",t.vqt="overlayViewDuration",t.Aqt="breakStart",t.mqt="breakEnd",t.ha="error"}(Ws||(Ws={}));var T$=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function N$(t){return void 0!==t&&-1!==T$.indexOf(t)}var D$=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function S$(t){return void 0!==t&&-1!==D$.indexOf(t)}var I$=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function E$(t){return void 0!==t&&-1!==I$.indexOf(t)}function b$(t,i){if(void 0===t||""===t||void 0===i)return;let e=t.match(/^(\d+):(\d+):(\d+)$/);return e?C(e[1]||"0")+60*C(e[2]||"0")+C(e[3]||"0"):(e=t.match(/^(100|[1-9]\d|\d)%$/),e?C(e[1]||"0")*i/100:void 0)}var Xr,Vi,L$=class{get kU(){return this.pqt}get Ku(){return this.yqt}get eventURL(){return this.Mqt}constructor(t,i,e){this.pqt=t,this.yqt=i,this.Mqt=e}},k$=class{get Tqt(){return this.Nqt}constructor(t){this.Nqt=t}},x$=class extends k${get gHt(){return this.wHt}get fHt(){return this._Ht}get Dqt(){return this.Sqt}constructor(t,i,e,s){super(t),this.Sqt=i,this.wHt=e,this._Ht=s}},C$=class extends k${constructor(t){super(t)}},O$=class extends k${constructor(t){super(t)}},ir={Iqt:{iL:100,Bb:"XML parsing error."},Eqt:{iL:303,Bb:"Empty or invalid VAST error."},bqt:{iL:400,Bb:"General linear error"},Lqt:{iL:403,Bb:"Unsupported MIME-type or missing mediafiles error"},kqt:{iL:500,Bb:"General nonlinear error"},sU:{iL:900,Bb:"Network error"}},cl=class{get xqt(){return this.Cqt}Oqt(t){if(!this.xqt)return;const i=this.xqt.replace(/\[ERRORCODE]/,""+t.iL);KJ(i)}constructor(t){this.Cqt=t}},_t=class extends Jo{get jqt(){return this.Pqt}get zqt(){var t;return null!=(t=this.Bqt)?t:900}constructor(t,i,e,s){super(e||i&&j$[i]||t,s),this.Pqt=t,this.Bqt=i,this.Rqt=e}};!function(t){t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general"}(Xr||(Xr={})),function(t){t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED"}(Vi||(Vi={}));var j$={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function P$(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case rs.Wv:case rs.Hv:case rs.Vv:return!0;default:return!1}}function z$(t){const i=Gh();return!!(P$(t)||t&&i&&(null==i?void 0:i.canPlayType)&&i.canPlayType(t))||(R$("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function B$(t,i){for(const e of i){new cl(e).Oqt(t)}}function R$(t){0}var U$,Q$=class{get Uqt(){return this.Qqt}get Fqt(){return this.Yqt}constructor(t,i){this.Qqt=t,this.Yqt=i}};!function(t){t.Gqt="linear",t.Vqt="nonlinear",t.Wqt="companion",t.Hqt="vmap"}(U$||(U$={}));var F$,Y$=class t{async qqt(i,e){if(Un(i.sources,i.timeOffset)){const s=await t.Xqt(i.sources.src,e),n=s&&s.documentElement;if(!n)throw new _t(Xr.NETWORK,Vi.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(w$(n,"VMAP"))return await this.Zqt(n,i,e);if(w$(n,"VAST")){const t=await this.Kqt(n,e,!1);if(t){const e=new H$("",!0,!0,t);return[new Tl("start",e,F$.Gqt,"",[],!1,!0,i)]}return[]}throw new _t(Xr.GENERAL,Vi.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(i$(i.sources,i.timeOffset))return[new W$(String(i.timeOffset),i,e)];throw new _t(Xr.GENERAL,Vi.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async Jqt(i,e,s,n){let r;void 0===n&&(n=[]);try{r=await t.Xqt(i,e)}catch(t){throw B$(t instanceof _t&&t.zqt===Vi.VAST_MALFORMED_RESPONSE?ir.Eqt:ir.sU,n),t}const h=r&&r.documentElement;if(h&&w$(h,"VAST"))return await this.Kqt(h,e,s,n)}async $qt(t,i,e,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new _t(Xr.GENERAL,Vi.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.Jqt(t.sources.src,s,!1),h=new H$("",!0,!0,r),o=new Tl(i,h,F$.Gqt,"",[],!1,!0,t);return o.tXt=e,o}static async requestSuccessOnly(t,i){let e;try{e=await i.LS(t)}catch(t){throw new _t(Xr.NETWORK,Vi.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!Jr(e))throw new _t(Xr.NETWORK,Vi.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return e}static async Xqt(t,i){const e=new ss({zu:t,wI:oe.Ru,gI:yt.GET}),s=await this.requestSuccessOnly(e,i);try{return function(t){return m$(t,"text/xml")}(await s.zm())}catch(t){throw new _t(Xr.NETWORK,Vi.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async Kqt(t,i,e,s){void 0===s&&(s=[]);const n=[],r=[],h=[];if(t&&w$(t,"VAST")){if(0!==Ho(t,"Ad").length){for(const e of Ho(t,"Ad"))try{const t=await this.iXt(e,i,s);0===t.MM?n.push(t):r.push(t)}catch(t){h.push(t)}if(0===n.length&&0===r.length&&h.length>0)throw h[0];return 1===n.length&&0===r.length?n[0]:0===n.length&&0!==r.length?new n$(r):n.length>0||r.length>0?new n$(r.concat(n)):void 0}if(0!==Ho(t,"Error").length){for(const i of Ho(t,"Error")){R$(ir.Iqt.Bb);const t=i.textContent;t&&s.push(t),B$(ir.Iqt,s)}throw new _t(Xr.GENERAL,Vi.VAST_MALFORMED_RESPONSE,"The Ad Server responded with a VAST Error")}if(e)throw B$(ir.Eqt,s),new _t(Xr.PARSING,Vi.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}else if(e)throw B$(ir.Eqt,s),new _t(Xr.PARSING,Vi.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}async Zqt(t,e,s){const n=[],r=Ho(t,"AdBreak");for(const t of r)try{const i=await this.eXt(t,e,s);i&&n.push(i)}catch(t){i.cit(t)}return n}async iXt(i,e,s){const n=It(i,"id")||"";let r=oo(It(i,"sequence"));r||(r=0);const h=Ho(i,"InLine"),o=Ho(i,"Wrapper");if(0!==o.length)return await this.sXt(o[0],n,r,e,s);if(0!==h.length)return t.nXt(h[0],n,r,s);throw new _t(Xr.PARSING,Vi.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static nXt(i,e,s,n){const r=Ho(i,"Error")[0];let h;r&&r.textContent&&(h=r.textContent,n.push(h));const o=Ho(i,"AdSystem")[0];let a,u="";o&&(u=o.textContent||u);const c=Ho(i,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of Ho(i,"Impression"))t.textContent&&l.push(t.textContent);const d=t.rXt(Ho(i,"Creatives")[0],u,n);return new h$(e,s,u,a,l,d,new cl(h))}async sXt(i,e,s,n,r){const h=Ho(i,"Error")[0];let o="";h&&h.textContent&&(o=h.textContent,r.push(o));const a=Ho(i,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of Ho(i,"Impression"))t.textContent&&c.push(t.textContent);const l=Ho(i,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.Jqt(d,n,!0,r),_=Ho(i,"Creatives")[0];let g=[];_&&(g=t.hXt(_,u,r));let w=du(It(i,"followAdditionalWrappers"));w||(w=!0);let v=du(It(i,"allowMultipleAds"));v||(v=!0);let A=du(It(i,"fallbackOnNoAd"));return A||(A=!1),new f$(e,s,c,f,w,g,v,A,new cl(o))}static hXt(i,e,s){const n=[];for(const r of Ho(i,"Creative")){let i=It(r,"id");i||(i="");let h=oo(It(r,"sequence"));h||(h=0);let o=It(r,"adId");o||(o="");const a=Ho(r,"Linear")[0];let u;a&&(u=t.oXt(a,"wrapper",i,e,s));const c=Ho(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.aXt(c,i,e),l=d}catch(t){}const f=Ho(r,"CompanionAds")[0];let _;f&&(_=t.uXt(f)),n.push(new _$(i,o,h,"",u,l,_,[]))}return n}static rXt(i,e,s){const n=[];for(const r of Ho(i,"Creative")){let i=It(r,"id");i||(i="");let h=oo(It(r,"sequence"));h||(h=0);let o=It(r,"adId");o||(o="");let a=It(r,"apiFramework");a||(a="");const u=Ho(r,"Linear")[0];let c;if(u)try{c=t.oXt(u,"inline",i,e,s)}catch(t){}const l=Ho(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.aXt(l,i,e),d=f}catch(t){}const _=Ho(r,"CompanionAds")[0];let g;_&&(g=t.uXt(_));const w=Ho(r,"UniversalAdId"),v=t.parseUniversalAdIds(w);n.push(new _$(i,o,h,a,c,d,g,v))}return n}static oXt(i,e,s,n,r){const h=Ho(i,"Duration")[0];let o=0;if(h)o=$J(h.textContent)||0;else if(!h&&"inline"===e)throw new _t(Xr.PARSING,Vi.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=It(i,"skipoffset");let u=-1;if(a){let t=$J(a);if(void 0===t&&a.indexOf("%")>-1){const i=_.abs(Number(a.replace(/(?![0-9])./g,"")))/100;S(i)||(t=o*i)}void 0!==t&&(u=t)}const c=Ho(i,"MediaFiles")[0];let l=[];if(c&&(l=function(t,i){const e=[];for(const s of Ho(t,"MediaFile")){const t=It(s,"delivery"),n=It(s,"type");if(!n){R$();continue}if(!i(n))continue;let r=oo(It(s,"width")),h=oo(It(s,"height"));r||(R$(),r=0),h||(R$(),h=0);const o={delivery:t,type:n,width:r,height:h,contentURL:""+s.textContent};e.push(o)}return e}(c,z$)),"inline"===e&&(!c||0===l.length))throw B$(ir.Lqt,r),new _t(Xr.PARSING,Vi.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const d=Ho(i,"TrackingEvents")[0];let f=[];d&&(f=t.cXt(d,N$,"linear"));const g=Ho(i,"VideoClicks")[0],w=t.lXt(g);return new g$(o,l,f,w,u,s,n)}static lXt(i){if(!i)return new d$("","",[],[]);const e=Ho(i,"ClickThrough")[0];let s,n="";e&&(s=e.textContent||void 0,n=It(e,"id")||"");const r=t.dXt(Ho(i,"ClickTracking")),h=t.dXt(Ho(i,"CustomClick"));return new d$(s,n,r,h)}static dXt(t){const i=[];for(const e of t){const t=e.textContent;if(!t)continue;const s=It(e,"id")||"";i.push(new l$(s,t))}return i}static cXt(t,i,e){const s=[];for(const n of Ho(t,"Tracking")){const r=It(n,"event");if(!i(r)){R$();continue}let h="";"linear"===e&&(h=It(t,"offset")||"0");const o=n.textContent;o&&s.push(new L$(r,h,o))}return s}static aXt(i,e,s){const n=[];for(const r of Ho(i,"NonLinear")){const i=Ho(r,"NonLinearClickThrough")[0];let h;i&&(h=i.textContent||void 0);const o=t.dXt(Ho(r,"NonLinearClickTracking")),a=Ho(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=It(a,"creativeType"),i=a.textContent||"",e=Ho(a.parentNode,"NonLinearClickThrough")[0];let s="";e&&(s=e.textContent||""),u=new x$(i,t,s,"")}const c=t.fXt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){R$();continue}const d=new d$(h,"",o,[]);n.push(new a$(u,c,l,d,e,s))}if(0===n.length)throw new _t(Xr.PARSING,Vi.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=Ho(i,"TrackingEvents")[0];let h=[];return r&&(h=t.cXt(r,S$,"nonlinear")),new o$(n,h)}static parseUniversalAdIds(t){const i=[];for(const r of t){var e;const t=null!=(e=It(r,"idRegistry"))?e:"";var s,n;const h=null!=(n=null!=(s=It(r,"idValue"))?s:r.textContent)?n:"";i.push(new Q$(t,h))}return i}static uXt(i){let e=It(i,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(e)||(e=e$.Vz);const s=[];for(const e of Ho(i,"Companion")){let i=oo(It(e,"width")),n=oo(It(e,"height")),r=It(e,"id"),h=oo(It(e,"assetWidth")),o=oo(It(e,"assetHeight")),a=oo(It(e,"expandedWidth")),u=oo(It(e,"rxpandedHeight")),c=It(e,"apiFramework"),l=It(e,"adSlotId"),d=oo(It(e,"pxratio"));const f=Ho(e,"AltText")[0];let _=f?f.textContent:"";i||(R$(),i=0),n||(R$(),n=0),r||(r=""),h||(h=0),o||(o=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const g=t._Xt(e),w=t.fXt(e),v=t.parseHtmlResource(e),A=Ho(e,"TrackingEvents")[0];let m=[];A&&(m=t.cXt(A,E$,"companion"));const p=Ho(e,"CompanionClickThrough")[0];let y;p&&(y=p.textContent||void 0);const M=t.dXt(Ho(e,"CompanionClickTracking"));(g||w||v)&&s.push(new c$(i,n,r,h,o,a,u,c,l,d,g,w,v,new d$(y,"",M,[]),m,_))}return new u$(e,s)}static _Xt(t){const i=Ho(t,"StaticResource")[0];let e;if(i&&i.parentNode){let t=It(i,"creativeType");t||(t="");const s=i.textContent,n=Ho(i.parentNode,"AltText")[0],r=Ho(i.parentNode,"CompanionClickThrough")[0];let h,o="";n&&(o=n.textContent||""),r&&(h=r.textContent||void 0),s&&(e=new x$(s,t,h,o))}return e}static fXt(t){const i=Ho(t,"IFrameResource")[0];let e;if(i){const t=i.textContent||"";e=new C$(t)}return e}static parseHtmlResource(t){const i=Ho(t,"HTMLResource")[0];let e;if(i){const t=i.textContent||"";e=new O$(t)}return e}async eXt(i,e,s){const n=It(i,"timeOffset")||"0",r=It(i,"breakType")||F$.hT;let h=It(i,"breakId"),o=du(It(i,"repeatAfter"));if(void 0===h&&(h=""),void 0===o&&(o=!1),!(void 0!==Re.gXt(n)))throw new _t(Xr.PARSING,Vi.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=Ho(i,"AdSource")[0],u=Ho(i,"TrackingEvents")[0];let c=[];u&&(c=t.cXt(u,M$,"vmap"));let l=It(a,"id");l||(l="");let d=du(It(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=du(It(a,"followRedirects"));f||(f=!0);const _=Ho(a,"AdTagURI")[0];let g="";const w=Ho(a,"VASTAdData")[0];if(!_||!_.textContent){if(w){if(w.firstElementChild&&v$(w.firstElementChild,"VAST")){const t=await this.Kqt(w.firstElementChild,s,!1);if(t){const i=new H$(l,d,f,t);return new Tl(n,i,r,h,c,o,!1,e)}return}throw new _t(Xr.PARSING,Vi.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new _t(Xr.PARSING,Vi.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{g=_.textContent;const t=Ms(e);return t.sources.src=g,new W$(n,t,s)}catch(t){return}}};!function(t){t.hT="",t.Gqt="linear",t.wXt="nonlinear",t.vXt="display"}(F$||(F$={}));var G$,Re=class{static AXt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static mXt(t){}static pXt(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static yXt(t){const i=t.split(":");let e=0;return e+=3600*Number(i[0]),e+=60*Number(i[1]),e+=Number(i[2]),e}static MXt(t){if(t<=0)return"00:00:00.000";const i=_.floor(t),e=t-i;return this.TXt(i/3600,2)+":"+this.TXt(i/60%60,2)+":"+this.TXt(i%60,2)+"."+this.TXt(1e3*e,3)}static TXt(t,i){return("00"+_.floor(t)).slice(-i)}static NXt(t,i){const e=this.gXt(t);if(0===e)switch(t){case"start":return 0;case"end":return-1}else{if(2===e)return t$(t)*i;if(1===e)return $J(t);if(3===e)return this.pXt(t);if(4===e){const i=Number(t);if(!S(i)&&i>=-1)return i}}}static gXt(t){return"start"===t||"end"===t?0:void 0!==$J(t.toString())?1:void 0!==t$(t.toString())?2:void 0!==this.mXt(t.toString())?3:S(Number(t))?void 0:4}};!function(t){t[t.N6=0]="N6",t[t.DXt=1]="DXt",t[t.SXt=2]="SXt",t[t.IXt=3]="IXt",t[t.EXt=4]="EXt"}(G$||(G$={}));var V$,Tl=class{get bXt(){return this.LXt.integration}get kXt(){return this.xXt}get Tjt(){return this.CXt}get VHt(){return this.WHt}set VHt(t){this.WHt=t}get EWt(){return this.dHt}get OXt(){return this.jXt}get PXt(){return this.zXt}get ltt(){return this.LXt}get BXt(){return this.tXt.Kl}get W(){return!0}$n(){return Promise.resolve()}get tXt(){return this.RXt}set tXt(t){this.RXt=t}constructor(t,i,e,s,n,r,h,o){this.WHt=-1,this.xXt=i,this.CXt=t,this.UXt=e,this.jXt=s,this.zXt=r,this.dHt=n,this.QXt=h,this.LXt=o}},W$=class{get bXt(){return this.BWt.bXt}get kXt(){return this.BWt.kXt}get Tjt(){return this.BWt.Tjt}get VHt(){return this.BWt.VHt}set VHt(t){this.BWt.VHt=t}get EWt(){return this.BWt.EWt}get OXt(){return this.BWt.OXt}get PXt(){return this.BWt.PXt}get ltt(){return this.BWt.ltt}get BXt(){return this.BWt.BXt}get W(){return this.mit}$n(){var t;return null!=(t=this.FXt)?t:this.FXt=this.Mit()}async Mit(){const t=new Y$;this.BWt=await t.$qt(this.ltt,this.Tjt,this.tXt,this.EI),this.mit=!0}get tXt(){return this.BWt.tXt}set tXt(t){this.BWt.tXt=t}constructor(t,i,e){this.mit=!1,this.EI=e,this.BWt=new Tl(t,void 0,"","",[],!1,!1,i)}},H$=class{get o(){return this.CT}get IHt(){return this.YXt}get GXt(){return this.VXt}get rWt(){return this.WXt}constructor(t,i,e,s){this.CT=t,this.YXt=i,this.WXt=s,this.VXt=e}};function q$(t,i){let e;if(t.vastAdsRequest&&(e=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return y$(t.adsResponse);return}(t.vastAdsRequest)),!e){const i=function(t){const i=t.contentUrl||t.contentId;if(!i)return;const e=t.contentType||"video/mp4",s=aw(e)||dw(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+Re.MXt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+Re.MXt(t.whenSkippable)+'"':"",h='<MediaFile delivery="'+s+'" type="'+e+'">'+p$(i)+"</MediaFile>",o=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+p$(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+h+"</MediaFiles>"+o+"</Linear>",u=t.title?"<AdTitle>"+p$(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);i&&(e=y$(i))}const s=t.customData;if(e){const n={integration:null==s?void 0:s.integration,sources:{src:e,type:"vast"},timeOffset:i};return n.integration&&"csai"!==n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}!function(t){t.HXt="error",t.qXt="sourceupdate"}(V$||(V$={}));var X$=class extends wn{constructor(t){super("error"),this.lt=t}},Z$=class extends wn{constructor(t,i){super("sourceupdate"),this.bt=t,this.yc=i}},K$=class extends Bo{get Bp(){return this.XXt}ZXt(t){this.KXt.ZXt(t)}JXt(t){this.KXt.JXt(t)}$Xt(t){this.KXt.$Xt(t)}tZt(t){this.KXt.tZt(t)}iZt(t){this.XXt.addUpdateListener(t)}eZt(t){this.XXt.removeUpdateListener(t)}sZt(){const t=new ue,i=new chrome.cast.media.GetStatusRequest;return this.XXt.getStatus(i,(()=>{t.Zb({bt:this.yf(),yc:this.Wa()})}),(i=>t.Jb(i))),t.tL}yf(){var t;return null==(t=this.XXt.customData)?void 0:t.currentSource}Wa(){var t;let i;if(null==(t=this.Lkt.nZt())?void 0:t.version){var e;i=null==(e=this.XXt.customData)?void 0:e.sourceDescription}else{var s;const t=null==(s=qJ(this.XXt))?void 0:s.customData;(function(t){return Ut(t)&&t.theoplayer_version>=1&&Po(t.streamStart)&&Po(t.isLive)&&Po(t.sourceDescription)})(t)&&(i=t.sourceDescription),i||(i=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:J$(t)}}(this.XXt.media))}return i}m_(){const t=new chrome.cast.media.PauseRequest;this.XXt.pause(t,na,this.rZt)}y_(){const t=new chrome.cast.media.StopRequest;this.XXt.stop(t,na,this.rZt)}p_(){const t=new chrome.cast.media.PlayRequest;this.XXt.play(t,na,this.rZt)}Em(t,i){const e=new chrome.cast.media.SeekRequest;return e.currentTime=t,e.resumeState=i?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,i)=>{this.XXt.seek(e,t,(t=>{var e;i(new Pa(HJ(t.code),null!=(e=t.description)?e:void 0))}))}))}Wf(t){this.KXt.Z8(XJ,function(t){return{type:$n.nWt,properties:{playbackRate:t}}}(t)).catch(this.hZt)}oZt(t){const i=new chrome.cast.media.EditTracksInfoRequest(t);this.XXt.editTracksInfo(i,na,this.rZt)}aZt(){return this.XXt.getEstimatedTime()}uZt(){return this.XXt.getEstimatedBreakClipTime()}cZt(){return this.XXt.getEstimatedBreakTime()}lZt(){this.KXt.Z8("urn:x-cast:com.google.cast.media",{type:ZJ.SKIP_AD,requestId:this.dZt++,mediaSessionId:this.XXt.mediaSessionId}).catch(this.hZt)}gn(){this.Vo()}constructor(t,i,e){super(i),this.dZt=0,this.hZt=t=>{this.Co(new X$(t))},this.rZt=t=>{var i;const e=new Pa(HJ(t.code),null!=(i=t.description)?i:void 0);this.hZt(e)},this.Lkt=t,this.KXt=i,this.XXt=e}};function J$(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?A(t.breaks,(i=>function(t,i){const e=[];if(t.isWatched)return e;for(const s of t.breakClipIds){const n=Vt(i,(t=>t.id===s));if(n){const i=q$(n,t.position);i&&e.push(i)}}return e}(i,t.breakClips))):[]}var $$,t0=class{fZt(t,i){this.Lkt.addMessageListener(t,i)}_Zt(t,i){this.Lkt.removeMessageListener(t,i)}Z8(t,i){return new Promise(((e,s)=>{this.Lkt.sendMessage(t,i,e,(t=>{var i;s(new Pa(HJ(t.code),null!=(i=t.description)?i:void 0))}))}))}gn(){}constructor(t){this.Lkt=t}};function i0(t){return"vmap"===t||"adrule"===t}function e0(t){if(t)return Qs(t)&&""!==t?{src:cs(t),type:void 0}:function(t){return Ut(t)&&Boolean(t.src)}(t)&&""!==t.src?{src:cs(t.src),type:s0(t.type)}:void 0}function s0(t){if(Qs(t)){const i=t.toLowerCase();switch(i){case"vast":case"vmap":case"adrule":return i;default:return void $("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||$("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function Ei(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return JJ.test(t)}(t))return Re.yXt(t);if(n0(t))return t}return Number(t)>=0?Number(t):void 0}}function n0(t){return new RegExp(/^\d{1,2}%$/).test(t)}function r0(t){const i=[],e=(t,s)=>{if(fh(s))for(let i=0,n=s.length;i<n;i++){const n=Ut(s[i])&&s[i]?String(i):"";e(t+"["+encodeURIComponent(n)+"]",s[i])}else if(Ut(s))for(const i of w.keys(s))e(t+"["+encodeURIComponent(i)+"]",s[i]);else((t,e)=>{i.push(t+"="+encodeURIComponent(null!=e?e:""))})(t,String(s))};for(const i of w.keys(t))e(encodeURIComponent(i),t[i]);return i.join("&")}!function(t){t.eWt="receiver_info",t._jt="event",t.gZt="propertychange",t.sWt="trackevent"}($$||($$={}));var Xt,h0=class{wZt(t){let i;try{i=JSON.parse(t)}catch(t){0}return i}ZXt(t){this.vZt.push(t)}JXt(t){Qr(this.vZt,t)}$Xt(t){this.AZt.push(t)}tZt(t){Qr(this.AZt,t)}mZt(t){this.pZt=t}Z8(t,i){return this.yZt.Z8(t,i)}gn(){this.yZt._Zt(XJ,this.MZt),No(this.AZt),No(this.vZt),this.pZt=void 0}constructor(t){this.vZt=[],this.AZt=[],this.MZt=(t,i)=>{const e=this.wZt(i);if(e)if(e.type===$$.gZt)for(const t of this.vZt)for(const i of w.keys(e.properties))t(i,e.properties[i]);else if(e.type===$$._jt)for(const t of this.AZt)t(e.event);else e.type===$$.sWt&&this.pZt&&e.event.trackState&&this.pZt(e.event.trackId,e.event.trackState.targetQualityIds)},this.yZt=t,this.yZt.fZt(XJ,this.MZt)}};!function(t){t.TZt="medialoadedchange",t.Ew="volumechange",t.HXt="casterror",t.NZt="playererror",t.DZt="targetqualitychanged",t.SZt="receiverinfochanged"}(Xt||(Xt={}));var o0,a0=class extends wn{constructor(){super("medialoadedchange")}},u0=class extends wn{constructor(t,i){super("volumechange"),this.c_=t,this.zf=i}},c0=class extends wn{constructor(t){super("casterror"),this.lt=t}},l0=class extends wn{constructor(t){super("playererror"),this.lt=t}},d0=class extends wn{constructor(t,i){super("targetqualitychanged"),this.Fp=t,this.IZt=i}},f0=class extends wn{constructor(){super("receiverinfochanged")}},_0=class extends Bo{EZt(t,i,e){this.KXt.Z8(XJ,function(t,i,e){return{type:$n.sWt,trackID:t,trackType:i,properties:{targetQuality:e}}}(t,i,e)).catch(this.hZt)}bZt(){this.yZt.fZt(XJ,this.LZt),this.KXt.Z8(XJ,{type:$n.eWt}).catch(na)}nZt(){return this.kZt}xZt(){return this.Lkt.getSessionObj()}CZt(t){!this.OZt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this.OZt=new K$(this,this.KXt,t),this.jZt(),this.Co(new a0),this.OZt.iZt(this.PZt))}zZt(){return this.OZt}async BZt(t){const i=function(t){const i=function(t,i,e,s){const n=LD(t)||"",r=ED(t)||"",h=new chrome.cast.media.MediaInfo(n,r);return h.metadata=WJ(t.metadata,t.poster),h.streamType=s,function(t,i,e){const s=[],n=[];let r,h=0,o=0;for(const t of i){const i=e0(t.sources);if(i)if(Un(i,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=i.src;else if(i$(i,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=Re.NXt(r,e))?u:0,d=void 0!==c?Re.NXt(c,e):void 0,f=new chrome.cast.media.BreakClip("bc"+o++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=i.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=Vt(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+h++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(h,i,e),h}(t.RZt,t.Oc,t.ct,t.fZ),e=new chrome.cast.media.LoadRequest(i);return e.autoplay=!0,e.currentTime=t.Mf,e.customData=t.UZt,e}(t);let e;try{e=await this.Lkt.loadMedia(i)}catch(t){e=t}if(e)throw new Pa(HJ(e))}Rf(t){this.xZt().setReceiverMuted(t,na,this.QZt)}d_(t){this.xZt().setReceiverVolumeLevel(t,na,this.QZt)}FZt(){return this.xZt().receiver.friendlyName}gn(){this.Vo(),this.Lkt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.YZt),this.xZt().removeUpdateListener(this.jZt),this.yZt._Zt(XJ,this.LZt),this.KXt.gn(),this.yZt.gn()}constructor(t){super(),this.kZt=void 0,this.hZt=t=>{this.Co(new c0(t))},this.GZt=(t,i)=>{"error"===t&&this.Co(new l0(i))},this.VZt=(t,i)=>{this.Co(new d0(t,i))},this.LZt=(t,i)=>{const e=JSON.parse(i);e.type===$$.eWt&&(this.kZt=e.info,this.Co(new f0))},this.jZt=()=>{const t=this.xZt(),{level:i,muted:e}=t.receiver.volume;this.Co(new u0(null!=i?i:void 0,null!=e?e:void 0))},this.YZt=()=>this.CZt(this.Lkt.getMediaSession()),this.PZt=t=>{var i;t||(null==(i=this.OZt)||i.eZt(this.PZt),this.OZt=void 0,this.Co(new a0))},this.QZt=t=>{var i;const e=new Pa(HJ(t.code),null!=(i=t.description)?i:void 0);this.hZt(e)},this.Lkt=t,this.Lkt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.YZt),this.yZt=new t0(t.getSessionObj()),this.KXt=new h0(this.yZt),this.KXt.ZXt(this.GZt),this.KXt.mZt(this.VZt),this.xZt().addUpdateListener(this.jZt),this.jZt(),this.bZt();const i=this.Lkt.getMediaSession();i&&this.CZt(i)}};(o0||(o0={})).WZt="statechange";var Et,g0=class extends wn{constructor(t){super("statechange"),this.glt=t}},w0=class extends Bo{I7(){return this.Ic}vf(){return Ai.kB()}Tf(){return this.xB+this.HZt}w7(){return this.Tf()}mf(){}Td(){return this.XL}If(){return this.D0}Ef(){}Yf(){return this.jB}qZt(){}Vf(){return this.PB}Wf(t){this.PB!==t&&(this.PB=t,this.Co(new Qe(this.Qo.Mf,t)))}$f(){return Mw.uT}qf(){return Ai.kB()}i_(){return Ai.kB()}s_(){return!1}df(){return this.fT}o_(){return this.gT}n_(){return this.Dl}oZt(t){}u_(){return this.XZt}h_(){return this.ZZt}p_(){this.jB=!1}m_(){this.jB=!0}Em(t){this.xB=t-this.HZt}KZt(){return this.HZt}JZt(t){this.HZt=t}att(t){this.Ic.att(t)}y_(){}gn(){this.Vo(),this.fT.gn(),this.gT.gn(),this.Dl.gn(),this.Ic.gn()}constructor(t,i,e,s,n,r,h,o,a){super(),this.Qo=t,this.HZt=0,this.fT=new wo,this.gT=new wo,this.Dl=new Lr,this.Ic=new zP,this.HZt=i,this.xB=e-i,this.XL=s,this.D0=n,this.jB=r,this.PB=h,this.XZt=o,this.ZZt=a}};!function(t){t.$Zt="ccmodechangerequest",t.tKt="cctargetqualitychangerequest",t.iKt="cctrackchangerequest"}(Et||(Et={}));var v0,A0,m0=class extends wn{constructor(t,i,e){super(Et.$Zt),this.track=t,this.trackId=i,this.mode=e}};function p0(t){return"AUDIO"===t.type}function y0(t){return"VIDEO"===t.type}function M0(t){return"TEXT"===t.type}!function(t){t.Ru="TEXT",t.Mm="AUDIO",t.ym="VIDEO"}(v0||(v0={})),function(t){t.Tm="SUBTITLES",t.NS="CAPTIONS",t.DS="DESCRIPTIONS",t.Fn="CHAPTERS",t.Dm="METADATA"}(A0||(A0={}));var T0=class extends Bo{get va(){return this.Xa||(this.Xa=Su(this)),this.Xa}get kh(){return this.jT}set kh(t){t!==this.jT&&(this.jT=t,this.Co(new Ks(this)))}get q(){return this.F0}get L(){return this.Y0}get jg(){return this.rR}set jg(t){const i=cf(t);this.rR!==i&&(this.rR=i,this.eKt!==i&&this.Co(new m0(this,this.Mg,i)),this.Co(new no(this)))}get sKt(){return this.eKt}set sKt(t){const i=cf(t),e=this.rR!==i;this.rR=i,this.eKt=i,e&&this.Co(new no(this))}zg(t){this.jg=t}nKt(t){}gn(){}tr(){}constructor(t){super(),this.Xa=void 0;const i=t.customData;this.Mg=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Mg),this.jT=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.Og=i&&i.inBandMetadataTrackDispatchType||"",this.zt=i&&i.kind||function(t){switch(t){case A0.Tm:return Mi.Tm;case A0.NS:return Mi.NS;case A0.DS:return Mi.DS;case A0.Fn:return Mi.Fn;case A0.Dm:return Mi.Dm}return}(t.subtype)||"subtitles",this.Jf=si.NONE,this.Rg=i&&void 0!==i.type?function(t){return ow(t)?t:Wt.DEFAULT}(i.type):Wt.WEBVTT,this.Q0=[],this.Y0=new ys(this.Q0),this.Z0=[],this.F0=new ys(this.Z0),this.rR=cf(i&&i.mode||Or.Ch),this.eKt=this.rR}};var N0,D0=class extends wn{constructor(t,i){super(Et.iKt),this.trackId=t,this.enabled=i}},S0=class extends wn{constructor(t,i){super(Et.tKt),this.track=t,this.targetQuality=i}};!function(t){t.Mm="audio",t.ym="video",t.Ru="text"}(N0||(N0={}));var I0,E0=class extends Bo{get yg(){return this.yct}get Dg(){return this.mct}set Dg(t){this.rKt(t),this.Co(new S0(this,t))}get Ng(){return this.IT}get kh(){return this.jT}set kh(t){t!==this.jT&&(this.jT=t,this.Co(new Ks(this)))}get Rt(){return this.Le}set Rt(t){this.Le!==t&&(this.Le=t,this.hKt!==t&&this.Co(new D0(this.Mg,t)),this.Co(new no(this)))}get oKt(){return this.hKt}set oKt(t){const i=this.Le!==t;this.Le=t,this.hKt=t,i&&this.Co(new no(this))}get va(){return this.Xa||(this.Xa=ni(this)),this.Xa}get jg(){return this.Rt?"enabled":"disabled"}zT(t){this.Rt=t}nKt(t){if(t.targetQualityIds){const i=[];for(const e of this.IT.og)t.targetQualityIds.indexOf(e.o)>-1&&i.push(e);const e=i.length?i:void 0;this.rKt(e)}}rKt(t){(function(t,i){return!t&&i||t&&!i||t&&i&&!se(t,i)})(this.mct,t)&&(this.mct=t&&this.IT.LT(t)?t:void 0,this.Co(new BQ(this.mct,this)))}unload(){for(const t of this.IT.og)t.fn("update",this.qCt);this.IT.tr()}constructor(t){super(),this.yct=void 0,this.IT=new Uw,this.mct=void 0,this.Xa=void 0,this.qCt=()=>this.Co(new Ks(this));const i=t.customData;if(this.Mg=Number(t.trackId)||0,this.o=""+(i&&i.id||this.Mg),this.jT=i&&i.label||t.name||"",this.gs=i&&i.language||t.language||"",this.zt=i&&i.kind||"main",this.Le=i&&i.enabled,this.hKt=this.Le,p0(t)){this.h$=N0.Mm;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new Mc(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);i.yn("update",this.qCt),this.IT.ET(i)}}else{this.h$=N0.ym;const i=t.customData&&t.customData.qualities;if(i)for(const t of i){const i=new lG(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);i.yn("update",this.qCt),this.IT.ET(i)}}}};!function(t){t.aKt="legacy",t.uKt="caf"}(I0||(I0={}));var b0=class{Mc(){if(this.cKt>=this.Ic.length)return;const t=this.Ic[this.cKt];return this.cKt+=1,t}lt(){return this.Mc()}constructor(t){this.cKt=0,this.Ic=t}};function L0(t){var i,e,s;return null!=(s=null==(e=t.kXt)||null==(i=e.rWt)?void 0:i.hWt())?s:[]}var Qn,k0=class{},x0=class{Y7(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get ads(){return t.Oc.map((t=>t.Y7()))},get integration(){return t.bXt},get maxDuration(){return t.lKt},get maxRemainingDuration(){return t.dKt},get timeOffset(){return t.Tjt},get customData(){return t.UZt}}}(this)}constructor(){this.Xa=void 0}},C0=class{get fKt(){return this._Kt}get t(){return this.Qo}constructor(t,i){this._Kt=t,this.Qo=i}},O0=class extends x0{get tXt(){return this.RXt}get Oc(){const t=[];for(const s of this.RXt.gKt)for(const n of L0(s)){var i,e;const r=null!=(e=null==(i=n.TWt)?void 0:i.qWt)?e:[];if(n.yWt&&t.push(this.wKt(n.yWt,r,n.DWt,s.ltt)),n.NWt)for(const i of n.NWt.SWt)t.push(this.vKt(i,r,n.NWt,n.DWt,s.ltt))}return t}wKt(t,i,e,s){const n=Vt(this.AKt,(i=>i.yWt===t));if(void 0!==n)return n;const r=new B0(t,i,this,this.mKt,e,s);return this.AKt.push(r),r}vKt(t,i,e,s,n){const r=Vt(this.pKt,(i=>i.NWt===t));if(void 0!==r)return r;const h=new z0(t,i,e,this,this.mKt,s,n);return this.pKt.push(h),h}get bXt(){return Pu.CSAI}get Tjt(){const t=this.RXt.Kl;return t>=0?t:this.mKt.t.Td()}get dKt(){let t=0;for(const i of this.RXt.gKt)for(const e of L0(i))e.yWt&&!e.yWt.HHt&&(t+=e.yWt.ct);return this.mKt&&this.mKt.fKt&&(t+=this.mKt.fKt.ct-this.mKt.fKt.Mf),t}get lKt(){let t=0;for(const i of this.RXt.gKt)for(const e of L0(i))e.yWt&&(t+=e.yWt.ct);return t}get UZt(){}constructor(t,i){super(),this.AKt=[],this.pKt=[],this.RXt=t,this.mKt=i}},j0={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},P0=class extends k0{get Xl(){return this.BWt}get ltt(){return this.LXt}get DWt(){return this.UHt}yKt(){return this.MKt}TKt(){this.MKt=!0}NKt(t){return Yt({},j0,{resourceURI:t.Tqt||""})}DKt(t){return Yt({},j0,{contentHTML:t.Tqt.trim(),type:"HTMLResource"})}SKt(t){var i,e;return Yt({},j0,{clickThrough:(null==(i=t.gHt)?void 0:i.trim())||"",resourceURI:(null==(e=t.Tqt)?void 0:e.trim())||"",altText:t.fHt||"",type:"StaticResource"})}IKt(t,i,e){if(!t||!i)return;const s="<img "+(e?"title='"+e+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(i)+"' target='_blank' rel='noopener'>"+s+"</a>"}TWt(t){return t?t.map((t=>{let i;const e={adSlotId:t.hHt||"",height:t.Ti||0,width:t.ji||0};if(t.LWt){var s;const e=this.SKt(t.LWt),n=e.clickThrough||(null==(s=t.cHt)?void 0:s.gHt);i=Yt({},e,{contentHTML:this.IKt(e.resourceURI,n,e.altText)||""})}else if(t.OWt)i=this.DKt(t.OWt);else{if(!t.xWt)return;i=this.NKt(t.xWt)}return lt(i,e)})).filter((t=>void 0!==t)):[]}EKt(){return this.bKt._Wt}constructor(t,i,e,s,n,r){super(),this.MKt=!1,this.bKt=t,this.XWt=i,this.BWt=e,this.mKt=s,this.UHt=n,this.LXt=r}},z0=class extends P0{get NWt(){return this.bKt}get MWt(){return this.LKt}fa(){const t=this.BWt,i={companions:this.TWt(this.XWt),type:"nonlinear",id:this.bKt.RWt,skipOffset:this.VHt,integration:this.LXt.integration,adSystem:this.bKt._Wt,get adBreak(){return t.Y7()},creativeId:this.bKt.RWt,universalAdIds:this.UHt.map((t=>({adIdRegistry:t.Uqt,adIdValue:t.Fqt})))};return this.bKt.xWt?lt(this.NKt(this.bKt.xWt),i):this.bKt.OWt?lt(this.DKt(this.bKt.OWt),i):this.bKt.LWt?lt(this.SKt(this.bKt.LWt),i):i}Y7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}kKt(){var t,i;return null!=(i=null==(t=this.bKt.LWt)?void 0:t.Tqt)?i:""}xKt(){var t,i,e;return null!=(e=null==(i=this.bKt)||null==(t=i.LWt)?void 0:t.Dqt)?e:""}get VHt(){const t=this.bKt.Xl;return t&&t.ltt&&void 0!==t.ltt.skipOffset?Re.NXt(t.ltt.skipOffset,this.mKt.fKt.ct):(null==(i=this.bKt.Xl)?void 0:i.VHt)||-1;var i}constructor(t,i,e,s,n,r,h){super(t,i,s,n,r,h),this.LKt=e}},B0=class extends P0{get yWt(){return this.bKt}fa(){var t;const i=this.BWt;return{companions:this.TWt(this.XWt),duration:this.bKt.ct,id:this.bKt.RWt,mediaFiles:this.bKt.FHt,skipOffset:this.VHt,type:"linear",integration:this.LXt.integration,adSystem:this.bKt._Wt,width:void 0,height:void 0,get adBreak(){return i.Y7()},clickThrough:null==(t=this.bKt.xHt)?void 0:t.gHt,creativeId:this.bKt.RWt,universalAdIds:this.UHt.map((t=>({adIdRegistry:t.Uqt,adIdValue:t.Fqt})))}}Y7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}kKt(){return this.bKt.FHt.length>0?this.bKt.FHt[0].contentURL:""}xKt(){return this.bKt.FHt.length>0?this.bKt.FHt[0].type:""}get VHt(){const t=this.bKt.Xl;return t&&t.ltt&&void 0!==t.ltt.skipOffset?Re.NXt(t.ltt.skipOffset,this.mKt.fKt.ct):this.bKt.VHt||-1}constructor(t,i,e,s,n,r){super(t,i,e,s,n,r)}};function R0(t){return t instanceof B0}!function(t){t.CKt="csai",t.OKt="google-ima",t.so="google-dai",t.jKt="freewheel",t.PKt="mediatailor",t.QI="chromecast",t.C7="theoads"}(Qn||(Qn={}));var U0,za=class extends gh{fa(){return new Q0(this.ttt.Y7())}constructor(t){super("zKt",t)}},Q0=class extends dh{constructor(t){super("updatead",t)}},F0=class extends gh{fa(){return new Y0(this.ttt.Y7())}constructor(t){super("BKt",t)}},Y0=class extends dh{constructor(t){super("adloaded",t)}},G0=class extends dt{get Fc(){return void 0!==this.RKt}get F7(){return this.bKt?[this.bKt]:[]}get G7(){var t;return null!=(t=this.RKt)?t:null}get V7(){return A(this.UKt,(t=>{const i=t.Oc;if(t===this.RKt&&void 0!==this.bKt){const t=i.indexOf(this.bKt);if(t>=0)return i.slice(t+1)}return t.QKt()?[]:i}))}get W7(){return this.UKt.filter((t=>t===this.RKt||!t.QKt()))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=TP(this)}a4(t,i,e){throw new b("Scheduling ads while casting is not supported.")}qm(){this.XXt.lZt()}utt(t){var i;null==(i=this.FKt)||i.utt(t)}q7(t,i){var e;null==(e=this.FKt)||e.q7(t,i)}YKt(t){return Vt(this.UKt,(i=>i.o===t))}GKt(t,i,e,s){const n=this.UKt,r=[];let h=!1;for(const n of t){let t=this.YKt(n.id);void 0===t&&(t=new V0(n),s.push(new EP(t))),!Po(t.VKt)&&Po(e)&&(t.VKt=this.WKt(t.HKt,e));const o=t.Oc;t.Yn(n,i,e,s);const a=t.Oc;for(const t of a)qo(o,t)||(s.push(new LP(t)),h=!0);r.push(t)}this.UKt=r,h&&s.push(new Iu);for(const t of n)qo(r,t)||s.push(new SP(t))}qKt(t,i){const e=this.RKt,s=this.bKt;let n,r;if(t){var h;const{breakId:i,breakClipId:e}=t;n=i?this.YKt(i):void 0,r=e?null==(h=this.RKt)?void 0:h.XKt(e):void 0}if(this.RKt=n,this.bKt=r,n!==e&&(void 0!==e&&(e.ZKt=void 0,i.push(new Ji(e))),void 0!==n&&(n.ZKt=this.XXt,i.push(new ea(n)))),r!==s){const t=this.Qo.Tf();void 0!==s&&i.push(new Jh(s,t)),void 0!==r&&i.push(new js(r,t))}}WKt(t,i){if(!i||!i.breaks)return;const e=Vt(i.breaks,(i=>i.id===t.id));return e}att(t){const i=[];for(const t of this.UKt){let e=t.Oc;if(t===this.RKt&&void 0!==this.bKt){const t=e.indexOf(this.bKt);t>=0&&(e=e.slice(t))}else if(t.QKt())continue;for(const t of e){const e=t.KKt();e&&i.push(e)}}for(const e of i)t.a4(e,ie.H7,!1)}gn(){return this.Vo(),this.XXt.eZt(this.Yr),void 0!==this.RKt&&(this.RKt.ZKt=void 0,this.RKt=void 0),this.bKt=void 0,No(this.UKt),Promise.resolve(void 0)}constructor(t,i,e){super(),this.UKt=[],this.RKt=void 0,this.bKt=void 0,this.Xa=void 0,this.Yr=t=>{var i;if(!t)return;const e=this.XXt.Bp,{breakStatus:s}=e,{breakClips:n,breaks:r}=e.media,h=null==(i=qJ(e))?void 0:i.media,o=[];r&&n&&this.GKt(r,n,h,o),this.qKt(s,o);for(const t of o)this.Co(t)},this.Qo=t,this.XXt=i,this.FKt=e,this.XXt.iZt(this.Yr)}},V0=class extends x0{get HKt(){return this.JKt}get o(){return this.JKt.id}get Oc(){return this.Ic}get bXt(){return Qn.QI}get lKt(){let t=this.JKt.duration;return void 0===t&&this.Ic.length>0&&(t=cd(this.Ic,(t=>t.ct)),S(t)&&(t=void 0)),t}get dKt(){const t=this.lKt;if(void 0!==t&&void 0!==this.ZKt){const i=this.ZKt.cZt();if(void 0!==i)return _.max(0,t-i)}return t}get Tjt(){return this.JKt.position}get UZt(){}QKt(){return this.JKt.isWatched}XKt(t){return Vt(this.Ic,(i=>i.o===t))}Yn(t,i,e,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const h=t.breakClipIds[r],o=Vt(i,(t=>t.id===h));if(void 0===o)continue;const a=r<this.Ic.length?this.Ic[r]:new W0(o,this);!Po(a.$Kt)&&Po(e)&&(a.$Kt=this.tJt(e,h,r)),a.Yn(o,s),n.push(a)}this.JKt=t,this.Ic=n}tJt(t,i,e){if(!t||!t.breakClips)return;let s=Vt(t.breakClips,(t=>t.id===i));if(!s){var n;const i=null==(n=this.VKt)?void 0:n.breakClipIds[e];i&&(s=Vt(t.breakClips,(t=>t.id===i)))}return s}constructor(t){super(),this.VKt=void 0,this.Ic=[],this.ZKt=void 0,this.JKt=t}},W0=class{get iJt(){return this.eJt}get o(){return this.eJt.id}get qWt(){return[]}get ct(){var t;return null!=(t=this.eJt.duration)?t:NaN}get FHt(){const t=this.kKt();return t?[{contentURL:t,delivery:"progressive",type:this.xKt(),width:0,height:0}]:[]}get VHt(){const{whenSkippable:t}=this.eJt;return void 0===t?void 0:t<0?-1:t}get gHt(){return this.eJt.clickThroughUrl}get RWt(){}get DWt(){return[]}get UZt(){}EKt(){return""}xKt(){var t;return null!=(t=this.eJt.contentType)?t:""}kKt(){var t,i;return null!=(i=null!=(t=this.eJt.contentUrl)?t:this.eJt.contentId)?i:""}Yn(t,i){const e=this.o,s=this.ct,n=this.eJt.contentUrl;this.eJt=t;const r=this.o,h=this.ct,o=this.eJt.contentUrl;e===r&&(s===h||S(s)&&S(h))&&n===o||i.push(new za(this)),S(s)&&!S(h)&&i.push(new F0(this))}KKt(){let t;return this.$Kt&&(t=q$(this.$Kt,this.Xl.Tjt)),t||(t=q$(this.eJt,this.Xl.Tjt)),t}Y7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}fa(){const t=this;return{get companions(){return t.qWt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.FHt},get skipOffset(){return t.VHt},type:"linear",integration:Qn.QI,get adSystem(){return t.EKt()},width:void 0,height:void 0,get adBreak(){return t.Xl.Y7()},get resourceURI(){return t.kKt()},get clickThrough(){return t.gHt},get creativeId(){return t.RWt},get customData(){return t.UZt},get isSlate(){return!1},get universalAdIds(){return t.DWt.map((t=>({adIdRegistry:t.Uqt,adIdValue:t.Fqt})))}}}constructor(t,i){this.Xa=void 0,this.eJt=t,this.Xl=i}},H0=class extends Bo{get sJt(){return this.nJt}set sJt(t){this.nJt!==t&&(this.nJt=t,this.Us.href=null!=t?t:"",t?this.YS():this.GS())}YS(){if(this.Le)return;this.Le=!0,this.Us.style.display="",this.rJt||(this.Sit.style.cursor="pointer");const t=this.rJt?this.Us:this.Sit;i.Ys.Je?(t.addEventListener("touchstart",this.hJt),t.addEventListener("touchend",this.oJt)):(t.addEventListener("mousedown",this.hJt),t.addEventListener("click",this.oJt))}GS(){if(!this.Le)return;this.Le=!1,this.Us.style.display="none",this.rJt||(this.Sit.style.cursor="");const t=this.rJt?this.Us:this.Sit;i.Ys.Je?(t.removeEventListener("touchstart",this.hJt),t.removeEventListener("touchend",this.oJt)):(t.removeEventListener("mousedown",this.hJt),t.removeEventListener("click",this.oJt))}Ud(){this.Vo(),this.GS(),this.Sit.removeChild(this.Us)}constructor(t,e=i.Ys.Je){super(),this.Le=!1,this.hJt=t=>{t.stopPropagation(),this.Co(new wn("clickstart"))},this.oJt=t=>{t.stopPropagation(),this.Co(new wn("click"))},this.Sit=t,this.rJt=e,this.Us=h.createElement("a"),this.Us.style.position="absolute",this.Us.style.zIndex="11",this.Us.target="Du",this.rJt?(fs(this.Us,"learn more"),this.Us.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Us.setAttribute("rel","noopener")):gn(this.Us),this.Sit.appendChild(this.Us),this.GS()}};!function(t){t.aJt="theo-size-xs",t.uJt="theo-size-s",t.cJt="theo-size-m",t.lJt="theo-size-l",t.dJt="theo-size-xl"}(U0||(U0={}));var q0=[1200,992,768,576],X0={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},Z0=class{fJt(t){let i=K0(t);i!==this._Jt&&(Pi(this.Us,i),yM(this.Us,this._Jt),this._Jt=i)}gn(){this.Wu.fn(ii.pn,this.mn)}constructor(t,i){this.Us=t,this.Wu=i,this.mn=t=>{this.fJt(t.width)},this._Jt=K0(i.ku),Pi(this.Us,this._Jt),i.yn(ii.pn,this.mn)}};function K0(t){for(let i of q0)if(t>i)return X0[i];return"theo-size-xs"}var J0=class extends Bo{get we(){return this.Us}get jg(){return this.rR}get bI(){return this.Ql.textContent||""}set bI(t){fs(this.Ql,t)}gJt(t){"countdown"!==this.rR&&(this.rR="countdown",this.wJt(),this.we.classList.remove("theoplayer-ad-skip-button"),this.we.classList.add("theoplayer-ad-skip-countdown")),this.bI="You can skip in "+_.round(t)+" seconds"}vJt(){"skip"!==this.rR&&(this.rR="skip",this.bI="Skip Ad",this.AJt(),this.we.classList.remove("theoplayer-ad-skip-countdown"),this.we.classList.add("theoplayer-ad-skip-button"))}AJt(){this.we.addEventListener("mouseup",this.mJt),this.we.addEventListener("touchend",this.mJt)}wJt(){this.we.removeEventListener("mouseup",this.mJt),this.we.removeEventListener("touchend",this.mJt)}gn(){this.Vo(),this.wJt(),this.qu.gn(),zu(this.Us),zu(this.Ql),this.pJt&&zu(this.pJt)}constructor(t,i){super(),this.mJt=()=>{this.Co(new wn("qm"))},this.Us=h.createElement("div"),this.we.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.we.style.position="absolute",this.Ql=h.createElement("span"),this.we.appendChild(this.Ql),i&&(this.pJt=h.createElement("div"),this.pJt.className="theoplayer-ad-skip-poster",this.pJt.style.backgroundImage='url("'+Cf(i)+'")',this.we.appendChild(this.pJt)),this.rR="countdown",this.qu=new Z0(this.we,t)}},$0=class extends Bo{yJt(){const t=this.XXt.Bp.activeTrackIds;if(t){if(this.MJt()){const i=this.gT.og.map((t=>t.o)),e=this.fT.og.map((t=>t.o));qo(i.concat(e),"0")&&t.push(0)}n1(t,this.fT),n1(t,this.gT),function(t,i){const e=!1;for(const e of i.og)e.sKt=qo(t,e.Mg)?Or.Jn:Or.Ch}(t,this.Dl)}}TJt(){var t;const i=null==(t=this.XXt.Bp.media)?void 0:t.tracks;if(!i)return;const e=i.filter(p0),s=i.filter(y0),n=i.filter(M0);if(this.MJt()&&0===s.length&&0!==this.u_()){const t=this.NJt();s.push(t)}if(this.MJt()&&0===e.length){const t=this.DJt();e.push(t)}e1(this.fT,e.map((t=>t.trackId))),e1(this.gT,s.map((t=>t.trackId))),e1(this.Dl,n.map((t=>t.trackId))),s1(e,this.fT),s1(s,this.gT),function(t,i){let e=!1;for(const s of t){let t=i1(i,s.trackId);t||(t=new T0(s),i.tt(t),e=!0)}}(n,this.Dl)}SJt(){this.jB||(this.IJt=v(this.od,250))}EJt(){m(this.IJt)}bJt(){this.EJt(),this.SJt()}LJt(){var t;const i=this.XXt.Bp,e=i.media;var s;const n=null!=(s=null==e?void 0:e.duration)?s:NaN,r=(null==e?void 0:e.streamType)===chrome.cast.media.StreamType.LIVE||n<0,h=r?1/0:n;this.XL=h,this.kJt();const o=i.getEstimatedLiveSeekableRange(),a=null==(t=i.customData)?void 0:t.buffers;if(Po(o)){const{start:t,end:i,isMovingWindow:e=r,isLiveDone:s=!1}=o;this.dzt(t,i,e,s)}else if(Po(a)){const[t,i]=a.seekable;this.dzt(t,i,r,!1)}else r?this.dzt(void 0,void 0,!0,!1):this.dzt(0,h,!1,!1)}xJt(){const t=this.XXt.Bp,i=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||t1(t);this.CJt=i,this.jB!==i&&(this.jB=i,this.jB?this.Co(new hs(this.Tf())):this.Co(new Gt(this.Tf())))}th(){const{playbackRate:t}=this.XXt.Bp;this.OJt!==t&&(this.OJt=void 0,this.PB!==t&&(this.PB=t,this.Co(new Qe(this.Tf(),t))))}jJt(){const{playerState:t}=this.XXt.Bp;let i;switch(t){case chrome.cast.media.PlayerState.IDLE:i=Mw.uT;break;case chrome.cast.media.PlayerState.BUFFERING:i=Mw.Xn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:i=Mw.lT}this.E0(i),this.PJt()}dzt(t,i,e,s){Po(t)&&Po(i)?this.o0=new xs(t,i,e,e&&!s):this.o0=void 0}zJt(t,i){this.ZZt=null!=i?i:this.ZZt,this.XZt=null!=t?t:this.XZt,this.Co(new il)}We(t){this.BJt!==t?(this.CB=!0,this.Co(new ri(this.Tf()))):this.BJt=void 0}wz(){if(!this.CB)return;this.CB=!1;const t=this.Tf();this.Co(new Dr(t,this.mf())),this.Co(new yi(t))}Mh(){this.D0=!0,this.If()&&this.Co(new jn(this.Tf()))}kJt(){const t=this.HNt,i=this.Td();t===i||S(t)&&S(i)||(this.HNt=i,this.Co(new ko(i)))}RJt(){const t=this.Tf();this.CB||this.UJt===t||(this.UJt=t,this.Co(new Dr(t,this.mf())))}qZt(){this.jB&&(this.jB=!1,this.Co(new Gt(this.Tf())),this.E0(Mw.uT))}I7(){return this.Ic}vf(){return this.cDt.Im(this.HZt)}Tf(){if(this.Ic.Fc){const t=this.XXt.uZt();if(void 0!==t)return t}return this.w7()}w7(){return void 0!==this.QJt?this.HZt+this.QJt:this.D0?this.Td():this.HZt+this.XXt.aZt()}mf(){if(this.FJt)return new Date(this.w7()+this.FJt)}Td(){if(this.Ic.Fc){var t;const i=null==(t=this.Ic.F7[0])?void 0:t.ct;if(void 0!==i&&!S(i))return i}return this.HZt+this.XL}Ef(){return this.BP}If(){return!this.Ic.Fc&&this.D0}Yf(){return this.jB}Vf(){return this.PB}Wf(t){this.PB!==t&&(this.OJt=this.PB,this.PB=t,this.Co(new Qe(this.Tf(),t)),this.XXt.Wf(t))}$f(){return this.S0}qf(){return this.Ic.Fc?Ai.LB(0,this.Tf()):this.Uo.Im(this.HZt)}i_(){var t,i;if(this.Ic.Fc)return Ai.kB();let e=null!=(i=null==(t=this.o0)?void 0:t.v$().Im(this.HZt))?i:Ai.kB();if(e.U>0){const t=e.jn(e.U-1);e=e._B(Ai.LB(t,this.Tf()))}return e}s_(){return this.CB}df(){return this.fT}o_(){return this.gT}n_(){return this.Dl}NJt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.h_(),id:"0",name:"",width:this.u_()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:v0.ym}}DJt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:v0.Mm}}MJt(){var t,i;return!(void 0!==(null==(t=this.Lkt.nZt())?void 0:t.version))||(null==(i=this.Lkt.nZt())?void 0:i.sdkType)===I0.uKt}oZt(t){this.MJt()&&Qr(t,0),this.XXt.oZt(t)}u_(){return this.XZt}h_(){return this.ZZt}p_(){this.jB&&(this.jB=!1,this.CJt=!1,this.Co(new Gt(this.Tf()))),this.XXt.p_()}m_(){this.jB||(this.jB=!0,this.CJt=!0,this.Co(new hs(this.Tf()))),this.XXt.m_()}Em(t){if(this.Ic.Fc)return;let i=_.max(0,t-this.HZt);i=_.round(1e6*i)/1e6;const e=this.QJt;this.QJt=i,this.CJt=this.Yf(),this.BJt=i,this.CB=!0,this.Co(new ri(this.Tf())),void 0===e&&(this.MJt()?this.YJt(i):this.Z2(i))}Z2(t){this.XXt.Em(t,this.CJt).then(this.GJt(t)).catch(this.hZt)}GJt(t){return()=>{void 0!==this.QJt&&(this.QJt===t?this.QJt=void 0:this.Z2(this.QJt))}}E0(t){this.S0!==t&&(this.S0=t,this.Co(new _e(this.Tf(),t))),void 0===this.QJt&&this.CB&&t>=Mw.cT&&this.wz(),this.PJt()}PJt(){if(this.jB)return void(this.VJt=!1);const t=this.S0>=Mw.lT;this.VJt!==t&&(this.VJt=t,t?this.Co(new Oe(this.Tf())):this.Co(new Fr(this.Tf())))}WJt(){this.HJt||(this.HJt=h.createElement("div"),this.Qo.we.appendChild(this.HJt),this.HJt.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.HJt.style.zIndex="10",gn(this.HJt)),this.HJt.style.display=this.Ic.Fc?"":"none"}qJt(){var t;const i=null==(t=this.Ic.F7[0])?void 0:t.gHt;i&&!this.XJt?(this.XJt=new H0(this.HJt,!0),this.XJt.sJt=i,this.XJt.yn("clickstart",this.ZJt)):this.XJt&&(this.XJt.sJt=i)}KJt(){var t;const i=null==(t=this.Ic.F7[0])?void 0:t.VHt;if(void 0===i||i<0)return void(this.JJt&&(this.JJt.gn(),this.JJt=void 0));if(!this.JJt){var e;const t=null==(e=this.Qo.ba)?void 0:e.mi;this.JJt=new J0(this.Qo.Iu,t),this.HJt.appendChild(this.JJt.we),this.JJt.yn("qm",this.$Jt)}const s=this.XXt.uZt();void 0!==s&&(s<i?this.JJt.gJt(i-s):this.JJt.vJt())}KZt(){return this.HZt}JZt(t){this.HZt=t}att(t){}y_(){this.XXt.y_()}gn(){this.Vo(),this.Ic.gn(),this.XJt&&(this.XJt.Ud(),this.XJt=void 0),this.JJt&&(this.JJt.gn(),this.JJt=void 0),this.HJt&&(zu(this.HJt),this.HJt=void 0),this.XXt.tZt(this.S$),this.XXt.JXt(this.t$t),this.XXt.eZt(this.PZt),this.XXt.fn(V$.HXt,this.i$t),this.XXt.gn()}constructor(t,i,e,s,n){super(),this.cDt=Ai.kB(),this.FJt=void 0,this.D0=!1,this.BP=void 0,this.OJt=void 0,this.S0=Mw.uT,this.VJt=!1,this.Uo=Ai.kB(),this.o0=void 0,this.CB=!1,this.fT=new wo,this.gT=new wo,this.Dl=new Lr,this.HNt=NaN,this.QJt=void 0,this.CJt=!1,this.UJt=NaN,this.BJt=void 0,this.IJt=0,this.t$t=(t,i)=>{switch(t){case"buffered":this.cDt=new Ai(i),this.Co(new Wa(this.Tf()));break;case"currentProgramDateTime":this.FJt=new Date(i).getTime()-this.Tf();break;case"played":this.Uo=new Ai(i);break;case"seekable":this.LJt();break;case"videoHeight":this.zJt(void 0,i);break;case"videoWidth":this.zJt(i,void 0)}},this.S$=t=>{switch(t.type){case Co.yw:this.We(t.currentTime);break;case Co.pw:this.wz();break;case Co.Aw:this.Co(new tF(t.representation,t.previousRepresentation));break;case Co.Mw:this.Co(new rc(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case Co.Kg:this.Co(new bn(t.currentTime,t.initDataType,t.initData));break;case Co.Vg:this.Co(new qC(new To(Ui.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case Co.Wg:this.Co(new XC)}},this.PZt=t=>{this.LJt(),this.xJt(),this.th(),this.jJt(),this.RJt(),this.bJt(),this.TJt(),this.yJt(),this.WJt(),this.qJt(),this.KJt(),t||t1(this.XXt.Bp)&&this.Mh()},this.od=()=>{this.RJt(),this.KJt()},this.i$t=t=>{this.Co(t)},this.YJt=jd((t=>this.Z2(t)),50),this.hZt=t=>{this.QJt=void 0,this.Co(new X$(t))},this.ZJt=()=>{this.m_()},this.$Jt=()=>{this.Ic.qm()},this.Qo=t,this.Lkt=e,this.XXt=s,this.Ic=new G0(t,s,i.Oc),this.HZt=n.KZt(),this.XL=n.Td()-this.HZt,this.jB=n.Yf(),this.PB=n.Vf(),this.XZt=n.u_(),this.ZZt=n.h_(),this.XXt.$Xt(this.S$),this.XXt.ZXt(this.t$t),this.XXt.iZt(this.PZt),this.XXt.yn(V$.HXt,this.i$t),this.XXt.sZt().then((t=>{this.Co(new Z$(t.bt,t.yc))}),this.hZt)}};function t1(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function i1(t,i){for(const e of t.og)if(e.Mg===i)return e}function e1(t,i){let e=!1;for(let s=0;s<t.U;s++){const n=t.cg(s);-1===i.indexOf(n.Mg)&&(t.it(n),s--,e=!0)}return e}function s1(t,i){let e=!1;for(const s of t){let t=i1(i,s.trackId);t||(t=new E0(s),i.tt(t),e=!0)}return e}function n1(t,i){for(const e of i.og)e.oKt=qo(t,e.Mg);return!1}var r1=class{Dtt(t){return Promise.resolve("all")}A_(){}gn(){}};function h1(t,i,e){if(S(t))return e;if(t===1/0){if("live"===e||"dvr"===e)return e;if(i&&i.length>0){if(i.end(i.length-1)-i.start(0)>60)return"dvr"}return"live"}return"vod"}var o1=[Co.Jg,Co.Xg,Co.ww,Co.mw,Co.Sh,Co.jh,Co.gw,Co.Iw,Co.yw,Co.pw,Zt.Bw,Zt.Rw,Co.Aw,Co.Mw,Co.Kg,Co.Vg,Co.Wg],a1=class extends cc{iB(t){if(!t)return;Dc(this.Wz&&ur(this.Wz),t&&ur(t))||(this.Wz=t,this.Co(new V(t)))}e$t(t){if(!t)return;const i=De(t,this.Qo.wd);Dc(this.bc&&ur(this.bc),i&&ur(i))||(this.ja.JZt(0),this.bc=i,this.Co(new vP(i)),this.ja.qZt())}s$t(t){for(const i of this.rt.og)if(i.Mg===t)return i;for(const i of this.ht.og)if(i.Mg===t)return i}get glt(){return this.ja}set glt(t){const i=this.ja;i&&(i.fn(V$.HXt,this.i$t),i.fn(V$.qXt,this.n$t),i.fn(o1,this.Ds),i.fn(Zt.H_,this._O),t.JZt(i.KZt()),i.att(t.I7())),this.ja=t,this.fT.fg=t.df(),this.gT.fg=t.o_(),this.Dl.fg=t.n_(),this.Ic.fg=t.I7(),i&&i.gn(),t.yn(V$.HXt,this.i$t),t.yn(V$.qXt,this.n$t),t.yn(o1,this.Ds),t.yn(Zt.H_,this._O)}get ro(){return this.ho}get Oc(){return this.I7()}I7(){return this.Ic}E7(){return this.u7}df(){return this.fT}vf(){return this.ja.vf().ks()}get r$t(){return this.h$t||this.bc}set r$t(t){this.h$t=t}async $n(t,i){var e;t&&await this.BZt(t,null!=(e=t.ads)?e:[],t.streamType,NaN,0,null!=i?i:0)}async o$t(t){var i;const e=null!=(i=this.h$t)?i:this.bc;if(!e)return;var s;const n=this.h$t?null!=(s=this.h$t.ads)?s:[]:this.wtt(),r=this.Qo.Td(),h=this.Qo.i_(),o=h1(r,h,e.streamType),a=h.length>0?h.start(0):0,u=null!=t?t:this.w7();await this.BZt(e,n,o,r,a,u)}wtt(){const t=new zP;return this.Ic.att(t),t.wtt()}mf(){return this.ja.mf()}yf(){return this.Wz}get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}Tf(){return this.ja.Tf()}w7(){return this.ja.w7()}Nf(t,i){this.a$t||(this.Lkt.zZt()||this.a$t||!this.bc?this.ja.Em(t):this.$n(this.bc,t))}Td(){return this.ja.Td()}If(){return this.ja.If()}Ef(){return this.BP}Lf(){return this.RP}xf(){return this._T}Pf(){return this.Qo.jf}Bf(){return this.OB}Rf(t){this.OB=t,this.Co(new Pc(this.Mf,this.c_)),this.Lkt.Rf(t)}Yf(){return this.ja.Yf()}Vf(){return this.ja.Vf()}Wf(t){this.ja.Wf(t)}qf(){return this.ja.qf().ks()}Zf(){return Le.eT}Kf(t){}$f(){return this.ja.$f()}i_(){return this.ja.i_().ks()}s_(){return this.ja.s_()}Wa(){return this.bc}async ga(t){this.bc=t,await this.$n(t),this.h$t=void 0,this.ja.qZt()}n_(){return this.Dl}h_(){return this.ja.h_()}u_(){return this.ja.u_()}o_(){return this.gT}l_(){return this._k}d_(t){this._k=t,this.Co(new Pc(this.Mf,this.c_)),this.Lkt.d_(t)}get g_(){return!1}set g_(t){}v_(){}w_(){return this.zB}A_(){}p_(){this.Lkt.zZt()||this.a$t||!this.bc?this.ja.p_():this.$n(this.bc)}m_(){this.ja.m_()}ur(){this.ho=!0}ar(){this.Wz=void 0,this.ho=!1}ge(){}be(){}async BZt(t,i,e,s,n,r){this.a$t=!0,this.u$t(),this.ja.JZt(n);const h="live"===e||"dvr"===e,o=function(t,i,e){return{theoplayer_version:1,streamStart:t,isLive:i,sourceDescription:e}}(n,h,t),a={RZt:t,Oc:i,Mf:_.max(0,r-n),ct:s,fZ:h?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,UZt:o};try{await this.Lkt.BZt(a)}catch(t){this.c$t(t)}finally{this.a$t=!1}}l$t(){this.d$t(this.fT),this.d$t(this.gT),this.f$t(this.Dl)}d$t(t){for(const i of t.og)this._$t(i);t.yn(Ud.L_,(t=>{this._$t(t.Lt),this.g$t()}))}f$t(t){for(const i of t.og)this.w$t(i);t.yn(Ud.L_,(t=>{this.w$t(t.Lt),this.g$t()}))}_$t(t){t.yn(Et.tKt,this.hwt),t.yn(Et.iKt,this.v$t),t.yn(Et.iKt,this.yJt)}w$t(t){t.yn(Et.$Zt,this.A$t),t.yn(Et.$Zt,this.yJt)}m$t(){const t=[];for(const i of this.rt.og)i.Rt&&t.push(i.Mg);for(const i of this.ht.og)i.Rt&&t.push(i.Mg);for(const i of this.nt.og)i.jg===Or.Jn&&t.push(i.Mg);this.ja.oZt(t)}p$t(t,i){this.y$t=t,this.M$t=i}T$t(t){var i,e;if(!t)return!1;return(null!=(e=null==(i=this.Lkt.nZt())?void 0:i.version)?e:-1)>=2?t.map((t=>t.o)):[t[0].o]}N$t(t){this.D$t=t}D_(){}S_(){}async y_(){this.ja.y_(),this.u$t()}u$t(){this.rO=Mw.uT,this.$C=!1,this.eO=!1,this.BP=void 0,this.RP=void 0}async gn(){this.u$t(),this.Vo(),this.glt=this.S$t(),this.Lkt.fn(Xt.HXt,this.i$t),this.Lkt.fn(Xt.NZt,this.Kxt),this.Lkt.fn(Xt.Ew,this.I$t),this.Lkt.fn(Xt.TZt,this.E$t),this.Lkt.fn(Xt.DZt,this.b$t),this.Lkt.gn()}S$t(){return new w0(this,this.ja.KZt(),this.ja.Tf(),this.ja.Td(),this.ja.If(),this.ja.Yf(),this.ja.Vf(),this.ja.u_(),this.ja.h_())}constructor(t,i){super(t,!0),this.ho=!1,this.D$t=na,this.rO=Mw.uT,this.$C=!1,this.eO=!1,this.a$t=!1,this.h$t=void 0,this.BP=void 0,this.RP=void 0,this.fT=new vo,this.gT=new vo,this.Dl=new al,this.zB=new Ba,this._T=new Nf,this.u7=new r1,this.y$t=void 0,this.M$t=void 0,this.I$t=t=>{var i,e;(Po(t.c_)&&!M(t.c_,this._k,1e-5)||Po(t.zf)&&t.zf!==this.OB)&&(this._k=null!=(i=t.c_)?i:this._k,this.OB=null!=(e=t.zf)?e:this.OB,this.Co(new Pc(this.Mf,this._k)))},this.E$t=()=>{const t=this.Lkt.zZt();this.glt=t?new $0(this,this.Qo,this.Lkt,t,this.ja):this.S$t()},this.n$t=t=>{this.iB(t.bt),this.e$t(t.yc)},this.b$t=t=>{const i=this.s$t(t.Fp);if(!i)return void 0;const e={targetQualityIds:t.IZt};i.nKt(e)},this.i$t=t=>{this.c$t(t.lt)},this.c$t=t=>{this.D$t&&this.D$t(t)},this.Kxt=t=>{this.BP=t.lt,this.RP=Bw(this.BP),this.Co(new Eo(this.RP))},this.v$t=t=>{if(!t.enabled)return;const i=this.rt.og.some((i=>i.Mg===t.trackId))?this.rt:this.ht;for(const e of i.og)e.Rt&&e.Mg!==t.trackId&&(e.Rt=!1)},this.A$t=t=>{if(t.mode===Or.Jn)for(const i of this.nt.og)i.jg===Or.Jn&&i.Mg!==t.trackId&&PA(i.zt,t.track.zt)&&(i.jg=Or.Ch)},this.yJt=jd((()=>{this.m$t()}),50),this.g$t=()=>{const t=[];var i;const e=null!=(i=Vt(this.ht.og,(t=>v1(t,this.y$t))))?i:Vt(this.ht.og,(t=>t.Rt));var s;e&&t.push(e.Mg);const n=null!=(s=Vt(this.nt.og,(t=>v1(t,this.M$t))))?s:Vt(this.nt.og,(t=>t.jg===Or.Jn));n&&t.push(n.Mg);const r=Vt(this.rt.og,(t=>t.Rt));r&&t.push(r.Mg),0!==t.length&&this.ja.oZt(t)},this.hwt=t=>{const i=this.T$t(t.targetQuality),e=t.track;this.Lkt.EZt(e.Mg,e.h$,i)},this._O=t=>{this.Co(t);const i=t.readyState;!this.$C&&this.rO===Mw.uT&&i>=Mw.Xn&&(this.$C=!0,this.Co(new B(t.currentTime))),!this.eO&&this.rO<=Mw.Xn&&i>=Mw.cT&&(this.eO=!0,this.Co(new R(t.currentTime))),this.rO<=Mw.cT&&i>=Mw.lT&&this.Co(new zc(t.currentTime)),this.rO<=Mw.lT&&i===Mw.dT&&this.Co(new F(t.currentTime)),this.rO=i},this._k=this.Qo.c_,this.OB=this.Qo.zf,this.Lkt=i,this.Lkt.yn(Xt.HXt,this.i$t),this.Lkt.yn(Xt.NZt,this.Kxt),this.Lkt.yn(Xt.Ew,this.I$t),this.Lkt.yn(Xt.TZt,this.E$t),this.Lkt.yn(Xt.DZt,this.b$t),this.Ic=new dc(this),this.Wz=this.Qo.bt,this.bc=this.Qo.Wa(),this.glt=new w0(this,0,this.Qo.w7(),this.Qo.Td(),this.Qo.Sf,this.Qo.Ff,this.Qo.Gf,this.Qo.a_,this.Qo.r_),this.l$t()}},u1=class extends hl{fa(){return new c1(this.lt)}constructor(t){super("error"),this.lt=t}},c1=class extends wn{constructor(t){super("error"),this.error=t}},l1=class extends wn{constructor(t){super("statechange"),this.state=t}};function d1(t,i){let e;return{get casting(){return t.vH},get error(){return t.lt},get receiverName(){return t.L$t},get state(){return t.glt},start(){t.Cn()},stop(){t.y_()},join(){t.k$t()},leave(){t.x$t()},set connectionCallback(t){null==i||i.C$t(t)},get connectionCallback(){return null==i?void 0:i.O$t()},get source(){return e||t.yc},set source(i){e=i,t.yc=i},addEventListener(i,e){const s=Ko(i,cs);t.yn(s,e)},removeEventListener(i,e){const s=Ko(i,cs);t.fn(s,e)}}}var f1=class extends dt{get vH(){return this.glt===nc.CONNECTING||this.glt===nc.CONNECTED}get lt(){return this.BP}get va(){return this.Xa||(this.Xa=d1(this,this.j$t)),this.Xa}get L$t(){var t;return null==(t=this.j$t.P$t())?void 0:t.FZt()}get yc(){return this.Qo?this.Qo.r$t:this.h$t}set yc(t){this.h$t=t?De(t,this.z$t.wd):void 0,this.Qo&&(this.Qo.r$t=this.h$t,this.h$t&&this.Qo.$n(this.h$t))}get glt(){return this.ja}set glt(t){let i=t;this.B$t||i!==nc.CONNECTING&&i!==nc.CONNECTED||(i=nc.AVAILABLE),this.ja!==i&&(this.ja=i,this.Co(new l1(this.glt)))}async R$t(){if(!this.U$t)throw new g("Chromecast must be initialized before starting a session");await this.U$t,this.j$t.P$t()||await this.j$t.Q$t()}async Cn(){this.B$t=!0;try{if(this.glt=nc.CONNECTING,await this.R$t(),await this.F$t(),this.Qo){const t=this.z$t.Wa(),i=this.j$t.Y$t(t);this.Qo.r$t=i?De(i,this.z$t.wd):this.h$t,this.Qo.o$t()}this.glt=nc.CONNECTED,await this.z$t.y_()}catch(t){this.G$t(!1).catch(na),this.glt=nc.AVAILABLE,ut(t)||this.j4(t)}}async k$t(){this.B$t=!0;try{if(this.glt=nc.CONNECTING,await this.R$t(),await this.F$t(),this.Qo){const t=this.z$t.Wa(),i=this.j$t.V$t(t);i&&(this.Qo.r$t=De(i,this.z$t.wd))}this.glt=nc.CONNECTED,await this.z$t.y_()}catch(t){await this.G$t(!0).catch(na),this.glt=nc.AVAILABLE,ut(t)||this.j4(t)}}async W$t(){this.j$t.P$t()&&await this.Cn()}async F$t(){null!=this.Qo||(this.Qo=this.H$t()),this.BP=void 0,this.z$t.m_(),await this.DW.q$t(this.Qo)}H$t(){const t=new a1(this.z$t,this.j$t.P$t());return t.N$t(this.j4),t}X$t(){this.Qo&&(this.Qo.gn(),this.Qo=void 0)}async G$t(t){if(this.B$t=!1,!this.Qo)return;const i=this.Qo.ro,e=this.Qo.Wa(),s=this.Qo.w7();try{if(i){let i;i=t?this.j$t.Z$t(e):this.j$t.K$t(e),null!=i||(i=e),await this.DW.J$t(i,i===e),this.z$t.Nf(s),this.z$t.p_()}}finally{this.X$t()}}x$t(){this.vH&&(this.j$t.$$t(!1),this.G$t(!0).catch(this.j4))}y_(){this.vH&&(this.j$t.$$t(!0),this.G$t(!1).catch(this.j4))}gn(){this.xI.qd(),this.j$t.fn(o0.WZt,this.t0t),this.Vo(),this.X$t()}constructor(t,i,e,s){super(),this.BP=void 0,this.Xa=void 0,this.Qo=void 0,this.ja=nc.UNAVAILABLE,this.B$t=!1,this.xI=new Wr,this.i0t=()=>{this.j$t.yn(o0.WZt,this.t0t),this.glt=this.j$t.e0t()},this.t0t=t=>{const i=t.glt;this.glt=i,i!==nc.UNAVAILABLE&&i!==nc.AVAILABLE||this.G$t(!1).catch(this.j4)},this.h$t=void 0,this.j4=t=>{ut(t)||t instanceof Pa&&(this.BP=t,this.Co(new u1(t).va))},this.DW=t,this.z$t=i,this.j$t=s,this.wC=e.chromecast,this.U$t=this.j$t.jW(this.wC,this.xI.Wd),this.U$t.then(this.i0t).catch(this.j4)}},_1=class extends dt{get vH(){return!1}get lt(){}get L$t(){}get yc(){}set yc(t){}get glt(){return nc.UNAVAILABLE}get va(){return this.Xa||(this.Xa=d1(this)),this.Xa}k$t(){i.Qv("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}x$t(){i.Qv("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Cn(){i.Qv("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}y_(){i.Qv("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}W$t(){return Promise.resolve()}gn(){}};function g1(t){return{bt:t.bt,Mf:t.Tf(),ct:t.Td(),Sf:t.Sf,lt:t.Ef(),bf:t.Lf(),zf:t.zf,Ff:t.Ff,Gf:t.Gf,Jf:t.Jf,e_:t.e_,r_:t.r_,a_:t.a_,c_:t.c_}}var Wn=class extends cc{I7(){return this.Ic}df(){return this.fT}get kf(){return this.xf()}xf(){return this._T}n_(){return this.Dl}o_(){return this.gT}wT(t){if(this.Qo===t)return;let i;this.Xz(),this.k7&&(i=g1(this));const e=this.yf(),s=this.w_(),n=this.v_();if(this.Qo=t,this.fT.fg=t.ht,this.gT.fg=t.rt,this.Dl.fg=t.nt,this._T.fg=t.kf,this.Ic.fg=t.Oc,void 0!==i){ic(this,i,g1(this))}const r=this.yf();r!==e&&this.Co(new V(r)),this.w_()!==s&&this.Co(new Zc),this.v_()!==n&&this.Co(new z),this.qz()}async gn(t){await super.gn(t),this.fT.gn(t),this.gT.gn(t),this.Dl.gn(t),this._T.gn(),await this.Ic.gn()}constructor(t,i){super(t,i),this.fT=new vo,this.gT=new vo,this.Dl=new al,this._T=new Cu,this.fT.fg=t.ht,this.gT.fg=t.rt,this.Dl.fg=t.nt,this._T.fg=t.kf,this.Ic=new dc(this),this.Ic.fg=t.Oc}},w1=class extends Wn{Wa(){const t=super.Wa();return!t&&this.s0t.vH&&this.s0t.yc?this.s0t.yc:t}ga(t,i){return this.Sq.NC((i=>(this.n0t=new Wr,this.n0t.Xd(i),super.ga(t,this.n0t.Wd))),i)}p_(){super.p_(),this.wd.cast.strategy!==Rf.AUTO||this.s0t.vH||this.s0t.W$t()}q$t(t){return this.Sq.NC((i=>this.r0t(t,i)))}J$t(t,i){return void 0===t&&(t=void 0),void 0===i&&(i=!1),this.Sq.NC((e=>this.h0t(t,i,e)))}r0t(t,i){fo(i),this.o0t.Oc&&this.o0t.Oc.att(t.Oc),this.a0t(),this.u0t=Vt(this.o0t.ht.og,(t=>t.Rt)),this.oNt=Vt(this.o0t.nt.og,(t=>"showing"===t.jg)),this.c0t=t,this.c0t.p$t(this.u0t,this.oNt),this.wT(t),this.c0t.ur()}async h0t(t,i,e){fo(e);const s=this.c0t;if(void 0!==s)try{if(t){await this.o0t.y_(),fo(e);const s=De(t,this.o0t.wd);i&&(s.ads=void 0),this.n0t=new Wr,this.n0t.Xd(e),await this.o0t.ga(s,this.n0t.Wd)}i&&this.o0t.Oc&&s.Oc.att(this.o0t.Oc)}catch(t){Pd(t)}finally{s.ar(),this.wT(this.o0t),this.u0t=Vt(this.c0t.ht.og,(t=>t.Rt)),this.oNt=Vt(this.c0t.nt.og,(t=>"showing"===t.jg)),this.o0t.ht.yn(Ud.L_,this.l0t),this.o0t.nt.yn(Ud.L_,this.d0t),this.o0t.yn(Zt.zw,this.a0t),this.c0t===s&&(this.c0t=void 0)}}y_(){var t;return this.u0t=void 0,this.oNt=void 0,this.a0t(),null==(t=this.n0t)||t.qd(),this.Sq.NC((()=>super.y_()))}async gn(){var t;null==(t=this.n0t)||t.qd(),this.s0t.gn(),await this.J$t(),await this.Sq.gn(),await super.gn()}constructor(t,i){super(t),this.Sq=new Kr,this.u0t=void 0,this.oNt=void 0,this.l0t=t=>{const i=t.Lt;v1(this.u0t,i)&&(i.Rt=!0)},this.d0t=t=>{const i=t.Lt;v1(this.oNt,i)&&(i.jg=Or.Jn)},this.a0t=()=>{this.o0t.ht.fn(Ud.L_,this.l0t),this.o0t.nt.fn(Ud.L_,this.d0t)},this.o0t=t,this.wd.cast.strategy!==Rf.DISABLED?this.s0t=new f1(this,t,this.wd.cast,i):this.s0t=new _1,this.AQ.NH(this.s0t)}};function v1(t,i){return void 0!==t&&void 0!==i&&(t.gs===i.gs&&i.kh===t.kh)}var A1=new class extends Bo{C$t(t){this.f0t=t}O$t(){return this.f0t}P$t(){return this._0t}e0t(){switch(this.g0t.getCastState()){case cast.framework.CastState.CONNECTED:return nc.CONNECTED;case cast.framework.CastState.CONNECTING:return nc.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return nc.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return nc.UNAVAILABLE}}async jW(t,i){await QJ(i),this.g0t=cast.framework.CastContext.getInstance(),this.g0t.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.DH),this.g0t.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async Q$t(){try{const t=await this.g0t.requestSession();if(t)throw t}catch(t){throw new Pa(HJ(t))}}Y$t(t){var i;return null==(i=this.f0t)?void 0:i.onStart(t)}K$t(t){var i;return null==(i=this.f0t)?void 0:i.onStop(t)}V$t(t){var i;return null==(i=this.f0t)?void 0:i.onJoin(t)}Z$t(t){var i;return null==(i=this.f0t)?void 0:i.onLeave(t)}$$t(t){this.g0t.endCurrentSession(t)}constructor(...t){super(...t),this._0t=void 0,this.f0t=void 0,this.DH=()=>{const t=this.e0t();this._0t=t===nc.CONNECTED?new _0(this.g0t.getCurrentSession()):void 0,this.Co(new g0(t))}}},m1=new class{get va(){return this.Xa||(this.Xa=function(t){return{initialize(i){const e=t.jW(Qf(i));return e.catch(na),e},startSession(){const i=t.Q$t();return i.catch(na),i},endSession(){t.w0t()}}}(this)),this.Xa}async jW(t){this.U$t||(this.U$t=this.v0t(t)),await this.U$t}async v0t(t){await this.j$t.jW(t)}async Q$t(){if(!this.U$t)throw new g("Chromecast must be initialized before starting a session");await this.U$t,this.j$t.P$t()||await this.j$t.Q$t()}A0t(){this.j$t.$$t(!1)}w0t(){this.j$t.$$t(!0)}constructor(t){this.U$t=void 0,this.Xa=void 0,this.j$t=t}}(A1),p1={get chromecast(){return m1.va}};lP((t=>new w1(t,A1)),Zo.O7);var lo,y1,M1=class{m0t(t,i,e,s){t.dR.forEach((t=>{if(!this.p0t(t.y0t)){const n=t.M0t(i,e,s);n&&this.T0t(n)}}))}p0t(t){return this.N0t.get(t)}T0t(t){this.N0t.set(t.D0t,t),this.S0t.set(t.D0t,t.I0t),this.E0t.Qa(t.b0t)}utt(t){this.S0t.has(t.D0t)||(this.S0t.set(t.D0t,t),this.E0t.Qa(t.b0t))}L0t(t){return this.S0t.forEach(t)}k0t(t){return this.N0t.forEach(t)}x0t(t){let i=!1;return this.N0t.forEach((e=>{i=e.x0t(t)||i})),i}async gn(){const t=[];this.N0t.forEach((i=>t.push(i.gn()))),this.S0t.forEach((i=>t.push(i.gn()))),await Promise.all(t),this.N0t.clear(),this.S0t.clear()}constructor(t){this.E0t=t,this.N0t=ke(),this.S0t=ke()}},ln=class t extends hl{fa(){return new T1(this.jqt,this.Bb,this.iL,this.yc)}static C0t(i){return new t(Xr.GENERAL,i.Bb,i.zqt)}static O0t(i,e){return new t(i.jqt,i.message,i.zqt,e)}constructor(t,i,e,s){super("Gkt"),this.jqt=t,this.Bb=i,this.iL=e,this.yc=s}},T1=class extends wn{constructor(t,i,e,s){super("aderror"),this.problemType=t,this.message=i,this.errorCode=e,this.source=s}},N1=class extends Yu{get j0t(){return this.P0t}get Fc(){let t=!1;return this.z0t((i=>{t=t||i.B0t})),t}get F7(){const t=[];return this.z0t((i=>{const e=i.F7;e.length&&t.push(...e)})),t}get G7(){let t=null;return this.z0t((i=>{null!=t||(t=i.G7)})),t}get V7(){const t=[];return this.z0t((i=>{t.push(...i.V7)})),t}get W7(){const t=[];return this.z0t((i=>{t.push(...i.W7)})),t}att(t){this.z0t((i=>{i.att(t)}))}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=TP(this)}qm(){this.z0t((t=>{t.qm()}))}utt(t){this.P0t.utt(t)}q7(t,i){return this.R0t.q7(t,i)}U0t(t){this.P0t.k0t((i=>{i.U0t(t)}))}x0t(t){return this.P0t.x0t(t)}z0t(t){return this.P0t.L0t(t)}A_(){this.P0t.k0t((t=>t.A_()))}async tr(){const t=[];this.P0t.k0t((i=>t.push(i.y_()))),await Promise.all(t)}async gn(){this.Vo(),await this.P0t.gn()}constructor(t){super(),this.Xa=void 0,this.R0t=t,this.P0t=new M1(this)}},D1=class extends N1{a4(t,i,e){try{this.Q0t=e;const s=Ur.Lb._R(t);if(s.y0t===Qn.C7)return;const n=this.P0t.p0t(s.y0t);if(!n)throw new _t(Xr.ADBLOCK,void 0,"Ads could not be loaded.");i!==ie.Z7&&this.j2||this.R0t.F0t(n),s.a4(t,i,n,this.Q0t)}catch(i){0,this.Co(ln.O0t(i,t.sources))}}async tr(){await super.tr(),this.j2=!1}async gn(){await super.gn(),this.R0t.fn(Co.jh,this.T9),this.fn("Gkt",this.Y0t)}constructor(t){super(t),this.Q0t=!1,this.j2=!1,this.Y0t=t=>{if(!this.Q0t)return;const i=new nl(bi.ADVERTISEMENT_ERROR,t.Bb),e=new Rs(Ui.AD_BLOCKER_DETECTED,t.Bb+" Turn off your AdBlocker and try again.",i);this.R0t.bz(e)},this.T9=()=>{this.j2=!0},this.yn("Gkt",this.Y0t),t.yn(Co.jh,this.T9)}},S1=class extends x0{get Oc(){return this.Ic}get lKt(){return this.G0t}set lKt(t){this.G0t=t}get dKt(){return this.V0t}set dKt(t){this.V0t=t}set Tjt(t){this.CXt=t}get Tjt(){return this.CXt}get UZt(){return this.W0t}H0t(){this.q0t=!0}X0t(t){this.Ic.push(t),this.q0t=!1}Z0t(t){Qr(this.Ic,t)}get Hf(){return this.q0t}constructor(t){super(),this.CXt=t,this.Ic=[],this.G0t=-1,this.V0t=-1,this.W0t=void 0,this.q0t=!1}},I1=class extends S1{get bXt(){return this.K0t}get V7(){return this.J0t}Yn(t){void 0!==t.maxDuration&&(this.G0t=t.maxDuration),void 0!==t.customData&&(this.W0t=t.customData)}$0t(t){const i=this.Ic.indexOf(t);return i>=0&&i<this.Ic.length-1}X0t(t){super.X0t(t),this.J0t.push(t)}t1t(t){Qr(this.J0t,t)}Z0t(t){super.Z0t(t),Qr(this.J0t,t)}constructor(t,i){super(i.timeOffset),this.J0t=[],this.K0t=t,this.Yn(i)}};!function(t){t.Gqt="linear",t.Vqt="nonlinear",t.hT="unknown"}(lo||(lo={})),function(t){t.NONE="none",t.READY="ready"}(y1||(y1={}));var Ft=class extends k0{i1t(t,i,e,s,n,r){this.CT=t,this.wk=i,this.vk=e,this.XL=s,this.XWt=n,this.WHt=r,this.e1t="ready"}get s1t(){return this.e1t}get qWt(){return this.XWt}get ct(){return this.XL}Y7(){var t;return null!=(t=this.Xa)?t:this.Xa=this.fa()}get Ti(){return this.vk}get o(){return this.CT}get VHt(){return this.WHt}get ji(){return this.wk}get n1t(){return this.r1t}get gHt(){return this.wHt}get RWt(){return this.UWt}get DWt(){return this.UHt}get UZt(){return this.W0t}get h1t(){return this.o1t}EKt(){}xKt(){return""}kKt(){return this.a1t}constructor(t,i){super(),this.r1t=i,this.CT=void 0,this.WHt=void 0,this.wk=void 0,this.vk=void 0,this.XL=void 0,this.UHt=[],this.XWt=[],this.e1t="none",this.W0t=void 0,this.o1t=!1,this.Xl=t}};function E1(t){return{get adSystem(){return t.EKt()},get readyState(){return t.s1t},get adBreak(){return t.Xl.Y7()},get duration(){return t.ct},get companions(){return t.qWt.map((t=>t.va))},get resourceURI(){return t.kKt()},get clickThrough(){return t.gHt},get width(){return t.ji},get type(){return function(t){switch(t){case"linear":case"unknown":return"linear";case"nonlinear":return"nonlinear"}}(t.n1t)},get height(){return t.Ti},get id(){return t.o},get skipOffset(){return t.VHt},get integration(){return t.bXt},get creativeId(){return t.RWt},get universalAdIds(){return t.DWt},get customData(){return t.UZt},get isSlate(){return t.h1t}}}var b1=class{get hHt(){return this.oHt}get fHt(){return this._Ht}get u1t(){return this.c1t}get gHt(){return this.wHt}get Ti(){return this.vk}get Tqt(){return this.a1t}get ji(){return this.wk}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get adSlotId(){return t.hHt},get altText(){return t.fHt},get contentHTML(){return t.u1t},get clickThrough(){return t.gHt},get height(){return t.Ti},get resourceURI(){return t.Tqt},get width(){return t.ji}}}(this)}l1t(t){if(t.gHt&&t.Tqt)return;const i=function(t){try{return m$(t,"text/html")}catch(t){return}}(t.u1t);i&&(this.wHt=L1(i,"a","href"),this.a1t=L1(i,"img","src"))}constructor(t){var i;this.Xa=void 0,this.wHt=void 0,this.a1t=void 0,this.oHt=t.hHt,this.wk=t.ji,this.vk=t.Ti,this.c1t=t.u1t,this.wHt=t.gHt,this.a1t=t.Tqt,this._Ht=null!=(i=t.fHt)?i:"",this.l1t(t)}};function L1(t,i,e){const s=t.querySelector(i);return s&&s.getAttribute(e)||""}var k1=class extends Ft{get bXt(){return this.K0t}get d1t(){return this.f1t}set d1t(t){this.f1t=t}fa(){return E1(this)}Yn(t){t.id&&(this.CT=t.id),void 0!==t.skipOffset&&(this.WHt=t.skipOffset),void 0!==t.width&&(this.wk=t.width),void 0!==t.height&&(this.vk=t.height),void 0!==t.duration&&(this.XL=t.duration),void 0!==t.readyState&&(this.e1t=function(t){return"ready"===t?y1.READY:y1.NONE}(t.readyState)),void 0!==t.resourceURI&&(this.a1t=t.resourceURI),void 0!==t.clickThrough&&(this.wHt=t.clickThrough),void 0!==t.companions&&(this.XWt=[...t.companions].map(x1)),void 0!==t.creativeId&&(this.UWt=t.creativeId),void 0!==t.universalAdIds&&(this.UHt=t.universalAdIds),void 0!==t.customData&&(this.W0t=t.customData)}constructor(t,i,e){super(e,function(t){return"linear"===t?lo.Gqt:"nonlinear"===t?lo.Vqt:lo.hT}(i.type)),this.f1t=0,this.K0t=t,this.Yn(i)}};function x1(t){const i={hHt:t.adSlotId,fHt:t.altText,u1t:t.contentHTML,HP:void 0,gHt:t.clickThrough,Ti:t.height,Tqt:t.resourceURI,ji:t.width};return new b1(i)}var Ye=class extends gh{fa(){return new C1(this.ttt.Y7(),this._1t)}get _1t(){return this.g1t}constructor(t,i){super("Fkt",t),this.g1t=i}},C1=class extends dh{constructor(t,i){super("adskip",t),this.playedPercentage=i}},O1=class extends NP{fa(){return new j1(this.Xl.Y7())}constructor(t){super("w1t",t)}},j1=class extends DP{constructor(t){super("updateadbreak",t)}},P1=class extends NP{fa(){return new z1(this.Xl.Y7())}constructor(t){super("v1t",t)}},z1=class extends DP{constructor(t){super("adbreakchange",t)}},Ze=class extends gh{fa(){return new B1(this.ttt.Y7(),this.currentTime)}constructor(t,i){super("A1t",t),this.currentTime=i}},B1=class extends dh{constructor(t,i){super("adfirstquartile",t),this.currentTime=i}},R1=class extends gh{fa(){return new U1(this.ttt.Y7(),this.currentTime)}constructor(t,i){super("m1t",t),this.currentTime=i}},U1=class extends dh{constructor(t,i){super("admidpoint",t),this.currentTime=i}},Q1=class extends gh{fa(){return new F1(this.ttt.Y7(),this.currentTime)}constructor(t,i){super("p1t",t),this.currentTime=i}},F1=class extends dh{constructor(t,i){super("adthirdquartile",t),this.ad=t,this.currentTime=i}},Y1=class{get Oc(){return this.Ic}get gKt(){return this.UKt}get va(){var t;return null!=(t=this.Xa)?t:this.Xa=function(t){return{get integration(){return t.bXt},get ads(){return t.Oc.map((t=>t.Y7()))},get adBreaks(){return t.gKt.map((t=>t.Y7()))},createAd:(i,e)=>t.y1t(i,e?t.M1t(e):void 0).Y7(),updateAd(i,e){t.T1t(t.N1t(i),e)},updateAdProgress(i,e){const s=os(Number(e),0,1);t.D1t(t.N1t(i),s)},beginAd(i){t.t1t(t.N1t(i))},endAd(i){t.S1t(t.N1t(i))},skipAd(i){t.lZt(t.N1t(i))},removeAd(i){t.Z0t(t.N1t(i))},createAdBreak:i=>t.I1t(i).Y7(),updateAdBreak(i,e){t.E1t(t.M1t(i),e)},removeAdBreak(i){t.b1t(t.M1t(i))},removeAllAds(){t.L1t()},error(i){t.k1t(i)},fatalError(i,e){const s=e?Number(e):void 0;t.x1t(i,s)}}}(this)}get qp(){return this.z4}set qp(t){this.z4=t}get B0t(){return this.C1t.some((t=>t.n1t===lo.Gqt))}get D0t(){return this.bXt}get F7(){return this.C1t}get G7(){var t;return null!=(t=this.RKt)?t:null}get V7(){return A(this.UKt,(t=>t.V7))}get W7(){return this.UKt.filter((t=>!t.Hf))}qm(){var t;if(0===this.C1t.length)return;const i=this.C1t[0];(null==(t=this.z4)?void 0:t.skipAd)?this.z4.skipAd(i.Y7()):this.lZt(i)}att(t){}y1t(t,i){var e;const s=null!=i?i:this.O1t({timeOffset:null!=(e=t.timeOffset)?e:0}),n=new k1(this.bXt,t,s);return s.X0t(n),this.Ic.push(n),this.b0t.Co(new LP(n)),n}T1t(t,i){t.Yn(i),this.b0t.Co(new za(t))}D1t(t,i){if(!qo(this.C1t,t))throw new g("Cannot update ad progress on a non-started ad");const e=t.d1t,s=_.max(e,i);t.d1t=s;const n=this.R0t.Tf();e<.25&&s>=.25&&this.b0t.Co(new Ze(t,n)),e<.5&&s>=.5&&this.b0t.Co(new R1(t,n)),e<.75&&s>=.75&&this.b0t.Co(new Q1(t,n))}t1t(t){qo(this.C1t,t)||(this.C1t.push(t),t.Xl.t1t(t),this.j1t(t.Xl),this.b0t.Co(new js(t,this.R0t.Tf())))}lZt(t){if(!qo(this.C1t,t))return;const i=t.Xl.$0t(t);this.b0t.Co(new Ye(t,t.d1t)),this.P1t(t,i)}S1t(t){if(!qo(this.C1t,t))return;const i=t.Xl.$0t(t);this.b0t.Co(new Jh(t,this.R0t.Tf())),this.P1t(t,i)}Z0t(t){if(!qo(this.Ic,t))return;const i=t.Xl.$0t(t);Qr(this.Ic,t),t.Xl.Z0t(t),this.b0t.Co(new P1(t.Xl)),this.P1t(t,i)}I1t(t){const i=new I1(this.bXt,t);return this.UKt.push(i),this.b0t.Co(new EP(i)),i}E1t(t,i){t.Yn(i),this.b0t.Co(new O1(t))}b1t(t){if(qo(this.UKt,t)){for(const i of t.Oc.slice())this.Z0t(i);Qr(this.UKt,t),this.b0t.Co(new SP(t))}}L1t(){for(const t of this.UKt.slice())this.b1t(t)}k1t(t){this.b0t.Co(new ln(Xr.GENERAL,t.message))}x1t(t,i){const e=new Rs(null!=i?i:Ui.AD_ERROR,t.message,t);this.R0t.bz(e)}z1t(t){return Vt(this.UKt,(i=>i.Tjt===t))}O1t(t){var i;return null!=(i=this.z1t(t.timeOffset))?i:this.I1t(t)}P1t(t,i){Qr(this.C1t,t);const e=t.Xl;0!==this.C1t.length||this.RKt!==e||i||(e.H0t(),this.j1t(void 0))}j1t(t){this.RKt!==t&&(void 0!==this.RKt&&this.b0t.Co(new Ji(this.RKt)),this.RKt=t,void 0!==t&&this.b0t.Co(new ea(t)))}N1t(t){const i=Vt(this.Ic,(i=>i.Y7()===t));if(void 0===i)throw new g('Invalid ad for integration "'+this.bXt+'"');return i}M1t(t){const i=Vt(this.UKt,(i=>i.Y7()===t));if(void 0===i)throw new g('Invalid ad break for integration "'+this.bXt+'"');return i}async ga(t,i){var e;if(fo(i),null==(e=this.z4)?void 0:e.setSource){let i=await Promise.resolve(this.z4.setSource(t));return SD(i)&&(i=t),De(i,this.R0t.wd)}return t}async B1t(){var t;(null==(t=this.z4)?void 0:t.resetSource)?await Promise.resolve(this.z4.resetSource()):this.L1t()}async gn(){var t;(null==(t=this.z4)?void 0:t.destroy)&&await Promise.resolve(this.z4.destroy()).catch(na),this.L1t(),this.j1t(void 0),this.z4=void 0,this.b0t.gn()}constructor(t,i){this.b0t=new Yu,this.Ic=[],this.UKt=[],this.C1t=[],this.bXt=t,this.R0t=i}};var G1=class extends Wn{I7(){return this.R1t}get U1t(){return this.Q1t}A_(){this.o0t.A_(),this.R1t.A_()}p_(){void 0===this.BP?(void 0!==this.F1t&&this.Y1t(this.F1t),super.p_()):this.Co(new Eo(this.BP))}async ga(t,i){fo(i);let e=t;if(e)for(const t of this.G1t)e=await t.ga(e,i);if(await super.ga(e,i),fo(i),null==e?void 0:e.ads){const t=Boolean(e.blockContentIfAdError);this.R1t.U0t(e.playAdsAfterTime);for(const i of e.ads)this.R1t.a4(i,ie.Z7,t)}}async y_(){this.BP=void 0,this.qB=void 0,await this.R1t.tr(),this.J$t(),await super.y_();for(const t of this.G1t)await t.B1t()}Y1t(t){this.V1t=this.Qo.Gf;const i=this.Qo.c_,e=this.Qo.zf;t.d_(i),t.Rf(e),this.Q1t=t,this.F1t=void 0,this.wT(t)}F0t(t){void 0===this.Q1t&&(this.F1t=t)}J$t(){this.F1t=void 0,void 0!==this.Q1t&&(this.o0t.Gf=this.V1t,this.o0t.c_=this.c_,this.o0t.zf=this.zf,this.wT(this.o0t),this.Q1t=void 0)}Ef(){var t;return null!=(t=this.qB)?t:super.Ef()}Lf(){var t;return null!=(t=this.BP)?t:super.Lf()}bz(t){void 0===this.Lf()&&(this.BP=t,this.qB=tn(t),this.Co(new Eo(t)))}E_(t){return void 0===this.Q1t&&this.R1t.x0t(t)}q7(t,i){try{const e=new Y1(t,this);e.qp=i(e.va),this.R1t.utt(e),this.G1t.push(e)}catch(i){this.R1t.Co(new ln(Xr.GENERAL,'Error while constructing ad integration "'+t+'": '+i+'"'))}}async gn(){for(const t of this.G1t)await t.gn().catch(na);await this.R1t.gn(),this.J$t(),await super.gn()}constructor(t,i){super(t),this.G1t=[],this.BP=void 0,this.qB=void 0,this.V1t=1,this.o0t=t,this.R1t=new D1(this),this.R1t.j0t.m0t(i,t,this,t.wd)}};lP((t=>new G1(t,Ur.Lb)),Zo.x7);var V1,W1=0!==f.JE?f.JE:f.lE,H1=f.Ga&&W1<12,Dn=class extends cc{get Mf(){return this.Tf()}set Mf(t){this.Nf(t)}w7(){return this.Qo.w7()}get ct(){return this.Td()}get kf(){return this._T}get t_(){return this.i_()}get f_(){return this.GP}get b0t(){return this.W1t}get ht(){return this.fT}get B0t(){return this.R0t.U1t===this}vf(){return Ai.kB().ks()}mf(){}pf(t){}Vf(){return 1}Wf(t){}qf(){return new Ai([0,this.Mf]).ks()}s_(){return!1}n_(){return this.Dl}o_(){return this.gT}cs(){return this.w_().cs}w_(){return this.zB}ka(){}async gn(){this.Vo(),this.fT.gn(),this.gT.gn(),this.Dl.gn(),this.W1t.gn(),this.Qo.fn(Co.Hg,this.Ds)}H1t(){H1&&this.q1t(),this.B0t||this.R0t.Y1t(this)}J$t(){this.B0t&&(H1&&this.X1t(),f.Mb&&this.we.querySelectorAll("video[src]").forEach((t=>{t.src=""})),i.Ys.sit&&this.Qo.S_(),this.R0t.J$t())}q1t(){this.Z1t||(Ha.addEventListener("blur",this.K1t),Ha.addEventListener("focus",this.J1t),this.Z1t=!0)}X1t(){Ha.removeEventListener("blur",this.K1t),Ha.removeEventListener("focus",this.J1t),this.Z1t=!1}$1t(){requestAnimationFrame((()=>this.Qo.be()))}constructor(t,i){super(t,!0),this.R0t=i,this.Z1t=!1,this.gT=new wo,this.fT=new wo,this.Dl=new Lr,this._T=new Nf,this.W1t=new Yu,this.zB=new Ba,this.GP=new Ct,this.K1t=()=>{this.Qo.ge()},this.J1t=()=>{this.$1t()},this.Qo.yn(Co.Hg,this.Ds)}},q1=0,X1="theoplayer-wrapper",Z1=class t{get t4t(){return this.i4t}get e4t(){return this.s4t}get n4t(){return 1===this.s4t.length&&i0(this.s4t[0].sources.type)}get r4t(){return this.h4t}o4t(t){const i=this.a4t===t.timeOffset;return!this.u4t&&i}get c4t(){return this.l4t}get d4t(){return n0(this.f4t)&&!this.u4t}get a4t(){return this.f4t}get Kl(){return this._4t}g4t(){if(S(this._4t)){let t=this.a4t;if(void 0===t)return void(this._4t=0);if("string"==typeof t&&n0(t)){const i=this.Qo.Td();S(i)||i===1/0||(t=t$(t)*i)}S(t)||(this._4t=t)}}get w4t(){return this.v4t}set w4t(t){this.v4t=t}get A4t(){return this.m4t}set A4t(t){this.m4t=t,this.p4t=!1}get y4t(){return this.M4t}T4t(t){this.M4t.push(t)}N4t(){if(!this.u4t){let t,i;const e=this.i4t===ie.Z7&&void 0===this.D4t&&1===this.s4t.length,s=this.s4t[0];if(i0(s.sources.type)||e)t=s.sources.src;else{if(S(this.Qo.Td())&&"end"===this.S4t())return;i=this.I4t()}let n=this.Qo.Td();(S(n)||n===1/0)&&(n=-3),this.u4t={E4t:this.Qo.we.offsetWidth,b4t:this.Qo.we.offsetHeight,L4t:this.Qo.we.offsetWidth,k4t:this.Qo.we.offsetHeight,x4t:this.h7,C4t:this.OB,O4t:t,j4t:i,P4t:s.omidAccessModeRules,z4t:n}}return this.u4t}I4t(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.s4t.map(((t,i)=>this.B4t(t.sources,i))).join("\n")+"</vmap:VMAP>"}B4t(t,i){const e=this.S4t(),s=t.src;return'<vmap:AdBreak timeOffset="'+e+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.Mg+"-"+i+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+X1+"-"+this.Mg+"-"+i+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}S4t(){if(0===this.a4t)return"start";if(this.a4t===1/0)return"end";const t=this.a4t;if("string"==typeof t&&n0(t)){const i=t$(t)*this.Qo.Td();return Re.MXt(i)}return Re.MXt(this.a4t||0)}R4t(t){this.s4t.push(t)}U4t(t){const i=X1+"-"+this.Mg+"-";for(const e of t)if(D(e,i)){const t=Number(e.slice(i.length));if(!S(t)&&t>=0&&t<this.s4t.length)return t}return-1}static Q4t(t){if(void 0!==t)return-1===t?1/0:t}F4t(){this.l4t=!0}get ST(){return this.h7}set ST(t){this.h7=t}get zf(){return this.OB}set zf(t){this.OB=t}constructor(i,e,s,n){this.i4t=e,this.Qo=s,this.h4t=n,this._4t=NaN,this.v4t=!1,this.m4t=!1,this.l4t=!1,this.M4t=[],this.h7=!1,this.OB=!1,this.s4t=[],this.Mg=++q1,this.D4t=i.timeOffset,this.f4t=t.Q4t(this.D4t),this.g4t(),this.s4t.push(i)}},K1=class{get Y4t(){return this.G4t.Y4t}get V4t(){return this.G4t.V4t}get V7(){return this.G4t.V7}get t(){return this.G4t.t}U0t(t){this.W4t=t}H4t(t){return!(this.Y4t&&!this.Y4t.c4t&&"nonlinear"!==this.V4t.n1t)||this.Y4t.Kl>t.Kl&&this.Y4t.Kl!==t.Kl}q4t(t){if(t.length)return t.sort(((t,i)=>t.Kl-i.Kl))[0]}X4t(){if(this.V7.length)return this.q4t(this.Z4t(this.t.Tf()))}K4t(){if(!(void 0!==this.W4t&&this.W4t>=0))return this.V7.filter((t=>!t.w4t&&0===t.Kl&&t!==this.Y4t))[0]}Z4t(t){if(!this.J4t&&(this.J4t=!this.V7.some((t=>S(t.Kl))),!this.J4t))return[];const i=this.V7.filter((i=>!i.w4t&&(i.n4t||!S(i.Kl)&&t<=i.Kl)));return void 0===this.W4t?i:i.filter((t=>t.n4t||void 0===t.a4t||t.Kl>this.W4t))}constructor(t){this.J4t=!1,this.G4t=t,this.W4t=void 0}};!function(t){t[t.$4t=0]="$4t",t[t.t2t=1]="t2t",t[t.i2t=2]="i2t"}(V1||(V1={}));var ji,J1,$1,t4,i4=class{A_(){this.bo=!0,this.e2t&&this.s2t()}n2t(t,i){this.r2t(t,i);const e=Vt(this.V7,(i=>i.o4t(t)));if(e)e.R4t(t);else{var s;const e=new Z1(t,i,this.Qo,null==(s=t.replaceContent)||s);this.J0t.push(e),2===this.h2t&&this.o2t.I1t(e.Kl,e,e.a4t),this.a2t(i,e)}}get V4t(){return this.u2t}get V7(){return this.J0t}get t(){return this.Qo}get uYt(){return Boolean(this.iwt)}get h2t(){return this.c2t}l2t(){if(Qr(this.V7,this.Y4t),this.Y4t){for(const t of this.Y4t.y4t)this.o2t.d2t();this.Y4t=void 0}}f2t(){for(const t of this.J0t)for(const i of t.y4t)this.o2t._2t(i,!0);No(this.J0t)}async g2t(t){this.l2t(),this.w2t=!0,this.Y4t=t,this.v2t=t.Kl,this.iwt=this.A2t(t),await this.iwt,this.iwt=void 0}async A2t(t){this.m2t(t);const i=t.N4t();if(!i)return this.w2t=!1,void(this.Y4t=void 0);const e=this.u2t.p2t(i);t.w4t=!0;try{await e,t.t4t===ie.H7&&this.u2t.y2t()}catch(t){0,this.Y4t=void 0,await this.s2t()}}m2t(t){this.bo?t.ST=!0:t.ST=this.R0t.ST,t.zf=this.R0t.zf}M2t(){var t;return null!=(t=this.T2t.K4t())?t:this.T2t.X4t()}async s2t(){if(this.Y4t&&!this.Y4t.c4t)return this.iwt;const t=this.M2t();t&&await this.g2t(t)}get Y4t(){return this.N2t}set Y4t(t){this.N2t=t}get w2t(){return this.D2t}set w2t(t){this.D2t=t}tr(){this.l2t(),No(this.J0t),this.v2t=0,this.Y4t=void 0,this.iwt=void 0,this.w2t=!1}A4t(){this.w2t=!1,this.Y4t&&(this.Y4t.A4t=!0)}async a2t(t,i){t===ie.H7&&this.bo&&this.T2t.H4t(i)&&!this.uYt&&"linear"!==this.u2t.n1t&&(!this.Y4t||this.Y4t&&this.Y4t.w4t)&&(await Promise.resolve(),await this.g2t(i))}F4t(){this.Y4t&&this.Y4t.F4t()}get S2t(){if(this.uYt||this.w2t)return!1;if(this.Y4t&&!this.Y4t.c4t)return!1;return!!this.J0t.filter((t=>this.Y4t!==t)).length&&Boolean(this.M2t())}async I2t(){if(!this.S2t)return void 0;const t=this.M2t();t&&await this.g2t(t)}r2t(t,i){const e=t.sources.type,s=i===ie.Z7&&void 0===t.timeOffset,n=i0(e)||s?1:2;n!==this.c2t&&(this.c2t=n,this.f2t(),this.u2t.fKt&&!this.uYt&&"linear"!==this.u2t.n1t&&(this.u2t.fKt.Ud(),this.Y4t=void 0,this.iwt=void 0),this.v2t=0,this.e2t=!0)}U0t(t){this.T2t.U0t(t)}gn(){this.Qo.fn(Co.Xg,this.BU)}constructor(t,i,e,s,n){this.c2t=0,this.iwt=void 0,this.D2t=!1,this.BU=()=>{const t=this.J0t.filter((t=>t.d4t));for(const i of t){i.g4t();const t=i.a4t;this.o2t.E2t(t,i.Kl)}this.bo&&this.S2t&&this.s2t()},this.J0t=[],this.u2t=t,this.bo=!1,this.e2t=!1,this.Qo=i,this.R0t=e,this.Y4t=void 0,this.v2t=0,this.T2t=new K1(this),this.u7=s,this.o2t=n,this.Qo.yn(Co.Xg,this.BU)}};function e4(t,i){if(t===ji.b2t){const t=i;return{L2t:t.adBreakDuration,k2t:t.adPosition,Mf:t.currentTime,ct:t.duration,x2t:t.totalAds}}return i}function s4(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return t4.C2t;case google.ima.AdError.Type.AD_PLAY:return t4.O2t}}function n4(t){return Ut(t)&&sd(t.getVastErrorCode)}function r4(t){const i=t.getInnerError(),e=i&&n4(i)?r4(i):void 0;return{Bb:t.getMessage(),zqt:t.getErrorCode(),j2t:t.getVastErrorCode(),Rg:s4(t.getType()),P2t:e}}function h4(t){if(Po(t))return t}!function(t){t.z2t="contentResumeRequested",t.B2t="contentPauseRequested",t.R2t="click",t.Xg="durationChange",t.U2t="expandedChanged",t.Ebt="start",t.Q2t="impression",t.vR="pause",t.F2t="resume",t.b2t="adProgress",t.Y2t="adBuffering",t.G2t="firstQuartile",t.rqt="midpoint",t.V2t="thirdQuartile",t.hqt="complete",t.W2t="userClose",t.H2t="linearChanged",t.q2t="loaded",t.X2t="adCanPlay",t.Z2t="adMetadata",t.K2t="adBreakReady",t.J2t="interaction",t.$2t="allAdsCompleted",t.t3t="skip",t.i3t="skippableStateChanged",t.e3t="log",t.s3t="viewableImpression",t.n3t="volumeChange",t.r3t="mute"}(ji||(ji={})),(J1||(J1={})).h3t="adError",function(t){t[t.o3t=-1]="o3t",t[t.a3t=-1]="a3t",t[t.u3t=-1]="u3t",t[t.c3t=101]="c3t",t[t.l3t=102]="l3t",t[t.d3t=200]="d3t",t[t.f3t=201]="f3t",t[t._3t=202]="_3t",t[t.g3t=300]="g3t",t[t.w3t=301]="w3t",t[t.v3t=302]="v3t",t[t.A3t=303]="A3t",t[t.m3t=400]="m3t",t[t.p3t=402]="p3t",t[t.y3t=403]="y3t",t[t.M3t=405]="M3t",t[t.T3t=500]="T3t",t[t.N3t=501]="N3t",t[t.D3t=-1]="D3t",t[t.S3t=503]="S3t",t[t.I3t=602]="I3t",t[t.E3t=900]="E3t",t[t.b3t=901]="b3t",t[t.L3t=1005]="L3t",t[t.k3t=1007]="k3t",t[t.x3t=1009]="x3t",t[t.C3t=1010]="C3t",t[t.O3t=1011]="O3t",t[t.j3t=1012]="j3t",t[t.P3t=1013]="P3t",t[t.z3t=1020]="z3t",t[t.B3t=1021]="B3t",t[t.R3t=1101]="R3t",t[t.U3t=1204]="U3t",t[t.Q3t=1205]="Q3t",t[t.F3t=1300]="F3t",t[t.Y3t=-1]="Y3t",t[t.G3t=-1]="G3t",t[t.V3t=-1]="V3t",t[t.W3t=-1]="W3t"}($1||($1={})),function(t){t.C2t="adLoadError",t.O2t="adPlayError"}(t4||(t4={}));var o4=class extends Bo{H3t(t){this.u2t.Co(t)}q3t(t){this._Kt=t,this._Kt.yn(J1.h3t,this.X3t),this._Kt.yn(ji.B2t,this.Z3t),this._Kt.yn(ji.z2t,this.K3t),this._Kt.yn(ji.$2t,this.J3t),this._Kt.yn(ji.Ebt,this.$3t),this._Kt.yn(ji.hqt,this.t5t),this._Kt.yn(ji.t3t,this.i5t),this._Kt.yn(ji.W2t,this.e5t),this._Kt.yn(ji.R2t,this.s5t),this._Kt.yn(ji.X2t,this.n5t),this._Kt.yn(ji.vR,(()=>{this.u2t.Ff||(this.u2t.r5t(!0),this.u2t.Co(new hs(this.u2t.Mf))),this.h5t(!0)})),this._Kt.yn(ji.F2t,(()=>{this.u2t.Ff&&(this.u2t.r5t(!1),this.u2t.Co(new Gt(this.u2t.Mf)))})),this._Kt.yn(ji.r3t,(()=>{const i=t.l_();i>=0&&this.o5t(i)})),this._Kt.yn(ji.n3t,(()=>{const i=t.l_();i>=0&&this.o5t(i)})),this._Kt.yn(ji.Z2t,(t=>{this.u5t.a5t(t.type)})),this._Kt.yn(ji.Xg,(t=>{t.ttt&&this.c5t(t.ttt.ct)})),this._Kt.yn(ji.e3t,(async t=>{const i=t.l5t.adError,e=n4(i)?r4(i):void 0;e&&(this.d5t(e)?await this.f5t(t):this._5t(e)?await this.g5t(e):this.w5t(e)&&this.v5t(e))})),this._Kt.yn(ji.q2t,(t=>{if(t.ttt&&(this.u2t.A4t(),this.u5t.A5t(t.ttt),this.m5t=0,t.ttt.p5t)){var i;const t=this.u2t.Jf,e=Mw.uT;this.u2t.I0(e);const s=this.u2t.Mf,n=this.u2t.Jf;n!==t&&this.H3t(new Da(s,n)),null==(i=this._Kt)||i.d_(this.u2t.y5t()),this.H3t(new B(s,e))}})),this._Kt.yn([ji.Y2t,ji.Q2t,ji.G2t,ji.rqt,ji.V2t],(t=>{t.ttt&&this.u5t.M5t(t.ttt,t.type,this.u2t.Mf)})),this._Kt.yn(ji.G2t,this.T5t),this._Kt.yn(ji.b2t,this.N5t)}async switchToPlayerIfNoNextAd(){if(this._Kt){const t=this._Kt.D5t();t&&this.S5t(t)||(this.u2t.S2t()?await this.u2t.I2t():(this.u2t.I5t(),this.Qo.Ff&&!this.Qo.Sf&&this.Qo.p_()))}else if(this.u2t.S2t())await this.u2t.I2t();else{const t=this.u2t.Ff;this.u2t.I5t(),t||this.Qo.p_()}}S5t(t){const i=t.E5t,e=null==i?void 0:i.x2t;return(null==i?void 0:i.k2t)!==e}R$(){this.u2t.jc&&(m(this.u2t.jc),this.u2t.jc=null)}w5t(t){return t.Rg===t4.C2t}_5t(t){return t.Rg===t4.O2t}d5t(t){return t.zqt===$1.x3t}async g5t(t){var i;this.v5t(t);const e=[$1.m3t,$1.b3t,$1.B3t,$1.Q3t];var s;this.u2t.ftt||qo(e,t.zqt)||qo(e,null==(i=t.P2t)?void 0:i.zqt)||(this.u2t.b5t.w2t=!1,null==(s=this.u2t.b5t.Y4t)||s.F4t(),await this.switchToPlayerIfNoNextAd())}v5t(t){this.u2t.k1t(t)}async L5t(){this.u5t.d2t(),this.u2t.F4t(),"nonlinear"===this.u2t.n1t&&(this.u5t.k5t(-1,!1),this.u2t.x5t(void 0)),"nonlinear"!==this.u2t.n1t&&"none"!==this.u2t.n1t||this.u2t.S2t()&&await this.u2t.I2t(),this.u2t.C5t(),this.u2t.B0t?this.u2t.J$t():this.O5t()&&this.Qo.Co(new jn(this.Qo.Tf()))}O5t(){return this.u2t.j5t&&!this.u2t.P5t&&this.Qo.Sf}setCountdownTimer(){this.R$(),this.u2t.jc=v((()=>this.h5t()),250)}async f5t(t){void 0!==t.ttt&&(this.u2t.b5t.w2t=!1,this.u2t.F4t(),this.u2t.S2t()?await this.u2t.I2t():this.u2t.r5t(!0))}c5t(t){this.u2t.ct!==t&&t>=0&&(this.u2t.n0(t),this.H3t(new ko(this.u2t.ct)))}o5t(t){this.u2t.y5t()!==t&&(0===t?this.u2t.z5t(t,!0,!1):this.u2t.z5t(t,!1,!1))}async B5t(){this.u2t.R5t&&void 0!==this.Qo.Ef()&&(this.U5t=new Wr,await this.Qo.ga(this.Qo.Wa(),this.U5t.Wd),this.Q5t&&this.Qo.Nf(this.Q5t),this.Q5t=void 0)}h5t(t){if(this._Kt){const t=this._Kt.F5t();t>this.u2t.ct&&this.c5t(_.round(t))}const i=this.u2t.Mf;(t||!this.u2t.Ff&&i!==this.u2t.Y5t)&&(this.u2t.Co(new Dr(i,void 0)),this.u2t.Y5t=i)}tr(){this.U5t&&(this.U5t.qd(),this.U5t=void 0),this.G5t=!1,this.m5t=0}gn(){this.tr(),this.Vo()}constructor(t,i,e){super(),this.u2t=t,this.Qo=i,this.u5t=e,this.G5t=!1,this.U5t=void 0,this.Q5t=void 0,this.m5t=0,this.T5t=t=>{if(!t.ttt||!t.ttt.E5t)return;const i=t.ttt.E5t;this.u5t.E1t(i.Tjt,i.x2t,i.lKt)},this.N5t=t=>{var i,e,s;if(this.m5t>=5)return;this.m5t++;const n=t.l5t;if(!function(t){return Ut(t)&&void 0!==t.L2t&&void 0!==t.x2t}(n))return;const r=null==(s=this._Kt)||null==(e=s.D5t())||null==(i=e.E5t)?void 0:i.Tjt;void 0!==r&&this.u5t.E1t(r,n.x2t,n.L2t)},this.X3t=async t=>{t.l5t.V5t&&await this.g5t(t.l5t.V5t)},this.J3t=async()=>{this.G5t=!0,this.u2t.F4t(),await this.K3t()},this.$3t=t=>{if(!t.ttt)return;const i=t.ttt;this.u2t.x5t(i),this.u2t.ge(),this.u2t.W5t(),this.u5t.H5t(i);const e=i.ct;if(this.c5t(e),i.p5t){const t=this.u2t.Mf,i=this.u2t.Jf;this.u2t.I0(Mw.lT),this.H3t(new R(t,i)),this.H3t(new zc(t,i)),this.H3t(new F(t,i)),this.u2t.Ff||this.H3t(new Oe(this.u2t.Mf)),this.setCountdownTimer(),this.h5t(!0)}else this.u2t.J$t(),this.Qo.ge(),this.u2t.Ff||this.Qo.p_()},this.t5t=t=>{var i;if(!t.ttt)return;const e=t.ttt;if(this.R$(),this.u5t.k5t(this.u2t.ct,e.p5t),this.u2t.Jf!==Mw.uT){const t=Mw.uT;this.u2t.I0(t);const i=this.u2t.Mf;this.H3t(new Da(i,t))}this.c5t(NaN),this.u2t.q5t=!1,null==(i=this._Kt)||i.d_(this.u2t.y5t())},this.i5t=t=>{t.ttt&&(this.t5t(t),this.u5t.i5t(t.ttt,this.u2t.Mf,this.u2t.ct))},this.e5t=t=>{t.ttt&&(this.u5t.k5t(-1,t.ttt.p5t),this.u2t.F4t(),!t.ttt.p5t&&this.u2t.S2t()&&this.u2t.I2t())},this.s5t=t=>{t.ttt&&(t.ttt.p5t?this.u2t.m_():this.Qo.m_())},this.n5t=()=>{var t;(this.u2t.q5t=!0,this.u2t.X5t)&&(null==(t=this._Kt)||t.m_(),this.u2t.X5t=!1)},this.Z3t=t=>{var i;if(!t.ttt)return;this.u2t.R5t&&(this.Q5t=this.Qo.Tf(),this.Qo.D_(),this.Qo.g_=!0),this.u2t.Z5t=!0;const e=t.ttt;this.u5t.Md(e);const s=e.ct;this.u2t.x5t(e),this.c5t(s),this.u2t.r5t(!1),this.u2t.ge(),this.u2t.H1t(),this.u2t.R5t||this.Qo.be(),this.Qo.m_(),this.u2t.K5t(e);0===(null==(i=e.E5t)?void 0:i.Tjt)||this.u2t.Co(new Fr(this.u2t.Mf))},this.K3t=async t=>{const i=null==t?void 0:t.ttt;this.u2t.Z5t=!1,"linear"===this.u2t.n1t&&this.u5t.Pd(),i&&i.ct>=0&&this.c5t(i.ct),this.Qo.Td()===1/0&&this.u2t.J5t(),this.u2t.q5t=!1,this.G5t&&await this.L5t(),this.u2t.r5t(!0);try{await this.B5t()}catch(t){return void(ut(t)||this.Co(new tJ(t)))}if(this.u2t.J$t(),this.u2t.be(),this.Qo.Sf||this.Qo.p_(),i&&this.u2t.x5t(i),this.u2t.j5t){if(this.u2t.R5t){var e;const t=this.Qo.v_(),i=null==(e=this.Qo.bt)?void 0:e.src;t&&i&&(t.src=i)}this.u2t.P5t=!0}this.Qo.g_=!1,this.u2t.S2t()&&await this.u2t.I2t()}}},a4=class extends S1{get bXt(){return Qn.OKt}constructor(t,i,e){super(t),this.$5t=i,this.t6t=e}},u4=class extends Ft{set i6t(t){this.e6t=t}get i6t(){return this.e6t}get bXt(){return Qn.so}EKt(){var t;return null==(t=this.s6t)?void 0:t._Wt}get n6t(){var t;return null==(t=this.s6t)?void 0:t.nHt}get RWt(){var t;return null==(t=this.s6t)?void 0:t.RWt}get KP(){var t;return null==(t=this.s6t)?void 0:t.KP}get r6t(){var t,i;return null!=(i=null==(t=this.s6t)?void 0:t.r6t)?i:[]}get h6t(){var t,i;return null!=(i=null==(t=this.s6t)?void 0:t.h6t)?i:[]}get o6t(){var t,i;return null!=(i=null==(t=this.s6t)?void 0:t.o6t)?i:[]}fa(){return function(t,i){return lt(t,{bitrate:0,contentType:void 0,mediaUrl:void 0,traffickingParameters:void 0,traffickingParametersString:void 0,universalAdIds:[],get apiFramework(){return i.n6t},get creativeId(){return i.RWt},get title(){return i.KP},get wrapperAdIds(){return i.r6t},get wrapperAdSystems(){return i.h6t},get wrapperCreativeIds(){return i.o6t}})}(E1(this),this)}a6t(t){this.s6t=t;const i=c4(t);this.i1t(t.CHt,t.u6t,t.c6t,t.ct,i,-1)}constructor(t,i){super(t,i),this.e6t=0,this.s6t=void 0}};function c4(t){return t.TWt.map((t=>new b1(t)))}var l4=class extends Ft{fa(){return function(t,i){return lt(t,{get adSystem(){return i.EKt()},get apiFramework(){return i.n6t},get bitrate(){return i.l6t},get contentType(){return i.HP},get creativeId(){return i.RWt},get mediaUrl(){return i.d6t},get title(){return i.KP},get traffickingParameters(){return i.f6t},get traffickingParametersString(){return i._6t},get wrapperAdIds(){return i.r6t},get wrapperAdSystems(){return i.h6t},get wrapperCreativeIds(){return i.o6t},get universalAdIds(){return i.DWt}})}(E1(this),this)}a6t(t){this.s6t=t,this.i1t(t.CHt,t.u6t,t.c6t,t.ct,c4(t),t.g6t),this.r1t=t.p5t?lo.Gqt:lo.Vqt}get bXt(){return Qn.OKt}EKt(){return this.s6t?d4(this.s6t._Wt):void 0}get n6t(){return this.s6t?d4(this.s6t.nHt):void 0}get l6t(){return this.s6t?this.s6t.w6t:0}get HP(){return this.s6t?d4(this.s6t.HP):void 0}get RWt(){return this.s6t?d4(this.s6t.RWt):void 0}get v6t(){return this.s6t?d4(this.s6t.v6t):void 0}get d6t(){var t;const i=null==(t=this.s6t)?void 0:t.d6t;return Po(i)?i:this.A6t}set d6t(t){this.A6t=t}get KP(){var t;return null==(t=this.s6t)?void 0:t.KP}get f6t(){return this.s6t?d4(this.s6t.f6t):void 0}get _6t(){return this.s6t?d4(this.s6t._6t):void 0}get r6t(){var t,i;return null!=(i=null==(t=this.s6t)?void 0:t.r6t)?i:[]}get h6t(){var t,i;return null!=(i=null==(t=this.s6t)?void 0:t.h6t)?i:[]}get o6t(){var t,i;return null!=(i=null==(t=this.s6t)?void 0:t.o6t)?i:[]}get DWt(){var t,i;return null!=(i=null==(t=this.s6t)?void 0:t.DWt.map((t=>({adIdRegistry:t.m6t,adIdValue:t.p6t}))))?i:[]}constructor(t){super(t,lo.hT),this.s6t=void 0,this.A6t=void 0}};function d4(t){return null===t?void 0:t}var f4=class{get b0t(){return this.u5t.b0t}get D0t(){return this.y6t}get B0t(){return this.u5t.B0t}get G7(){var t;return null!=(t=this.u5t.G7)?t:null}get F7(){const t=this.u5t.M6t;return t?[t]:[]}get V7(){return this.u5t.V7}get W7(){return this.u5t.W7}att(t){this.u5t.att(t)}qm(){this.u5t.qm()}gn(){return Promise.resolve()}constructor(t,i){this.u5t=t,this.y6t=i}},_4=class{get T6t(){return this.N6t}get b0t(){return this.W1t}get B0t(){return this.D6t}get M6t(){return this.bKt}get G7(){return this.RKt}get V7(){return A(this.UKt,(t=>{if(t.Hf)return[];const i=t.Oc;if(t===this.RKt&&void 0!==this.bKt){const t=i.indexOf(this.bKt);if(t>=0)return i.slice(t+1)}return i}))}get W7(){return this.UKt.filter((t=>!t.Hf))}constructor(t,i){this.W1t=t,this.UKt=[],this.D6t=!1,this.N6t=new f4(this,i)}},g4=class extends gh{fa(){return new w4(this.ttt.Y7())}constructor(t){super("S6t",t)}},w4=class extends dh{constructor(t){super("adimpression",t)}},v4=class extends hl{fa(){return new A4(this.ttt.Y7())}constructor(t){super("I6t"),this.ttt=t}},A4=class extends wn{constructor(t){super("adbuffering"),this.ad=t}},m4=class extends hl{fa(){return new p4}constructor(){super("E6t")}},p4=class extends wn{constructor(){super("admetadata")}},y4=class t extends _4{b6t(t,i){for(let e=0;e<t;e++){const t=new l4(i);i.X0t(t),this.b0t.Co(new LP(t))}}I1t(t,i,e){let s=t;s===1/0&&(s=-1);const n=new a4(s,e,i);this.UKt.push(n),i.T4t(n),this.b0t.Co(new EP(n))}E2t(t,i){for(const e of this.UKt)S(e.Tjt)&&e.$5t===t&&(e.Tjt=i,this.b0t.Co(new O1(e)))}_2t(t,i){void 0===i&&(i=!1),i&&Qr(this.UKt,t),this.b0t.Co(new SP(t))}d2t(){if(this.G7){this._2t(this.G7,!0);const t=Boolean(this.bKt&&this.bKt.n1t===lo.Gqt);this.L6t(void 0,t)}}T1t(t,i){const e=i.E5t;if(!e)return;const s=e.k2t-1,n=t.Oc[s];return n.a6t(i),this.b0t.Co(new za(n)),n.Xl.lKt=e.lKt,n}get B0t(){return this.k6t.B0t}x6t(t){if(!qo(this.C6t,t)){if(t){if(this.bKt===t)return;this.bKt=t;for(const i of this.O6t)this.a5t(i,t,this.k6t.Mf)}else{if(!this.bKt)return;const t=new Jh(this.bKt,this.bKt.Xl.Tjt);this.C6t.push(this.bKt),this.bKt=void 0,this.W1t.Co(t)}No(this.O6t)}}L6t(t,i){if(t){var e;if((null==(e=this.G7)?void 0:e.Tjt)===t.Tjt)return;this.RKt=t,i&&this.b0t.Co(new ea(this.RKt))}else{if(!this.RKt)return;const t=new Ji(this.RKt);this.RKt=void 0,No(this.C6t),i&&this.W1t.Co(t)}}j6t(t){return this.UKt.filter((i=>M(i.Tjt,t,.01)))[0]}static P6t(t,i){if(i.E5t)return t.Oc[i.E5t.k2t-1]}Md(t){if(!t.E5t)return;const i=t.E5t,e=this.j6t(i.Tjt);e&&(No(this.O6t),this.L6t(e,t.p5t))}Pd(){this.G7&&this.b0t.Co(new Ji(this.G7)),No(this.O6t),this.d2t()}H5t(i){if(!this.RKt&&i.E5t){const t=this.j6t(i.E5t.Tjt);this.L6t(t,i.p5t)}if(this.RKt){const e=t.P6t(this.RKt,i);if(!e)return;this.T1t(this.RKt,i);const s=i.d6t;Po(s)&&!Po(e.d6t)&&(e.d6t=s,this.b0t.Co(new za(e))),this.x6t(e),this.b0t.Co(new js(this.bKt,e.Xl.Tjt))}else 0}k5t(t,i){if(this.x6t(void 0),!i&&this.G7){const t=this.G7;this.L6t(void 0,!1),this._2t(t)}}A5t(t){const i=t.E5t;if(!i)return;const e=this.j6t(i.Tjt);if(!e)return;this.E1t(i.Tjt,i.x2t,i.lKt);const s=this.T1t(e,t);s&&this.b0t.Co(new F0(s))}E1t(t,i,e){const s=this.j6t(t);if(!s)return;const n=s.Oc.length;if(i>n){const t=i-n;this.b6t(t,s),s.lKt=e,this.b0t.Co(new O1(s))}}i5t(i,e,s){if(!this.RKt)return;const n=t.P6t(this.RKt,i);if(n){const t=e/s;this.b0t.Co(new Ye(n,t))}}M5t(i,e,s){if(!this.RKt)return;let n=this.bKt;if(!n){const s=t.P6t(this.RKt,i);if(!s||qo(this.C6t,s))return void this.O6t.push(e);n=s,this.T1t(this.RKt,i),this.x6t(n)}this.a5t(e,n,s)}a5t(t,i,e){t===ji.Z2t?this.b0t.Co(new m4):t===ji.Q2t&&i?this.b0t.Co(new g4(i)):t===ji.Y2t&&i?this.b0t.Co(new v4(i)):t===ji.G2t&&i&&e?this.b0t.Co(new Ze(i,e)):t===ji.rqt&&i&&e?this.b0t.Co(new R1(i,e)):t===ji.V2t&&i&&e&&this.b0t.Co(new Q1(i,e))}qm(){this.k6t.qm()}att(t){this.k6t.att(t)}tr(){const t=Boolean(this.bKt&&this.bKt.n1t===lo.Gqt);this.x6t(void 0),this.L6t(void 0,t);for(const t of this.UKt)this._2t(t);No(this.UKt),No(this.O6t),No(this.C6t)}gn(){this.tr()}constructor(t,i){super(t,Qn.OKt),this.k6t=i,this.O6t=[],this.C6t=[]}};function M4(t){const i=s.google.ima.settings;t.ads&&t.ads.vpaidMode&&s.google.ima.settings.setVpaidMode(function(t){const i=s.google.ima.ImaSdkSettings.VpaidMode;switch(t){case pu.ENABLED:return i.ENABLED;case pu.INSECURE:return i.INSECURE;case pu.DISABLED:default:return i.DISABLED}}(t.ads.vpaidMode)),i.setPlayerVersion("8.2.0"),i.setPlayerType("THEOplayer"),i.setAutoPlayAdBreaks(!0),i.setDisableCustomPlaybackForIOS10Plus(!T4(t));const e=function(t){var i,e,s;const n=null==(e=t.ads)||null==(i=e.googleIma)?void 0:i.language;if(void 0!==n)return n;const r=null==(s=t.ui)?void 0:s.language;if(Qs(r))return r;return}(t);e&&i.setLocale(e)}function T4(t){return f.Ga&&t.allowNativeFullscreen}var N4=class t extends Dn{get I0t(){return this.o2t.T6t}get z6t(){return this.o2t}get b5t(){return this.G4t}get R5t(){return T4(this.jH)}B6t(t,i,e){i===ie.Z7&&void 0!==e&&(this.Q0t=e),this.G4t.n2t(t,i)}static get D0t(){return Qn.OKt}get D0t(){return t.D0t}get R6t(){return this.jH.ads.preload===iw.MIDROLL_AND_POSTROLL}att(t){const i=this.U6t();for(const e of i)Un(e.sources,e.timeOffset)||t.a4(e,ie.H7,!1)}U6t(){const t=[],{F7:i,V7:e}=this.I0t,s=[];for(const n of i.concat(e)){const i=n.Xl.t6t;if(qo(s,i.Mg))continue;const e=i.U4t(n.r6t);e>=0?t.push(...i.e4t.slice(e)):t.push(...i.e4t),s.push(i.Mg)}for(const i of this.G4t.V7)i.w4t||t.push(...i.e4t);return Td(t)}set n1t(t){this.r1t=t}get n1t(){return this.r1t}get fKt(){return this._Kt}set fKt(t){this._Kt=t,this.Q6t=!1}Tf(){if(!this.fKt)return 0;const t=this.fKt.F5t();return S(this.ct)||t<0?0:this.ct-t}Nf(t,i){}Td(){return this.XL||NaN}n0(t){this.XL=t}Bf(){return this.Qo.zf}Rf(t){this.z5t(this.c_,t,!0)}Yf(){return this.jB}r5t(t){this.jB=t}get q5t(){return this.F6t}set q5t(t){this.F6t=t}get ftt(){return this.Q0t}get j5t(){return this.Y6t}get X5t(){return this.G6t}set X5t(t){this.G6t=t}get P5t(){return this.V6t}set P5t(t){this.V6t=t}h_(){var t,i,e;return null!=(e=null==(i=this.fKt)||null==(t=i.D5t())?void 0:t.c6t)?e:0}u_(){var t,i,e;return null!=(e=null==(i=this.fKt)||null==(t=i.D5t())?void 0:t.u6t)?e:0}gf(){return[]}U0t(t){this.W4t=t,this.G4t.U0t(t)}y2t(){!this.Q6t&&this.fKt&&(this.fKt.Cn(),this.Q6t=!0)}x5t(t){this.n1t=t?t.p5t?"linear":"nonlinear":"none"}i_(){return Ai.kB().ks()}l_(){return this.Qo.c_}d_(t){this.z5t(t,this.zf,!0)}y5t(){return this.Qo.zf?0:this.Qo.c_}z5t(t,i,e){const s=this.Qo.c_!==t||this.Qo.zf!==i;s&&(this.Qo.c_=t,this.Qo.zf=i),this.fKt&&e&&this.fKt.d_(this.y5t()),s&&this.Co(new Pc(this.Mf,this.c_))}If(){return!1}Ef(){if(this.W6t&&this.Q0t)return this.W6t}Lf(){if(this.H6t&&this.Q0t)return this.H6t}$f(){return this.S0}I0(t){this.S0=t,this.Co(new _e(this.Mf,t))}get Z5t(){return this.q6t}set Z5t(t){this.q6t=t}A_(){this.Qo.fn(Co.jh,this.X6t),this.bo||(this.bo=!0,this.G4t.A_(),this.W5t())}async p_(){if(this.Z6t)return;this.K6t.qd(),this.K6t=new Wr;const t=this.Ff;this.r5t(!1),this.Co(new Gt(this.Mf)),this.J6t()||(this.R5t||this.Qo.be(),this.Co(new Fr(this.Mf))),this.q5t||(this.X5t=!1);const i=Boolean(this.fKt);this.Z6t=this.G4t.s2t();try{await this.Z6t}finally{this.Z6t=void 0}try{fo(this.K6t.Wd)}catch(t){return}if(this.bo||this.X6t(),!this.W6t||!this.Q0t)if(this.fKt){if(t)if(i)try{fo(this.K6t.Wd),this.fKt.$6t(),this.Co(new Oe(this.Mf))}catch(t){return}else this.y2t()}else this.Q0t||(this.J$t(),this.R0t.p_())}m_(){var t;this.Ff||(this.r5t(!0),this.Co(new hs(this.Mf))),this.K6t.qd(),this.q5t?null==(t=this.fKt)||t.m_():this.X5t=!0}qm(){var t;null==(t=this.fKt)||t.qm()}C5t(){this.fKt&&(this.i8t.t8t(),this.fKt.y_(),this.fKt.Ud(),this.fKt=void 0,this.n1t="none",this.Q6t=!1)}async y_(){var t;this.Y5t=0,this.G4t.tr(),this.K6t.qd(),this.r5t(!0),this.Y6t=!1,this.V6t=!1,this.q5t=!1,this.o2t.tr(),this.C5t(),this.I5t(),null==(t=this.e8t)||t.tr(),this.X5t=!1,this.i8t.Ud()}ge(){this.s8t.ge(),this.R5t&&this.Qo.ge()}be(){this.s8t.be()}n8t(){return Boolean(this.fKt)&&qo(this.fKt.r8t(),-1)&&!this.Y6t}A4t(){this.G4t.A4t()}S2t(){return this.G4t.S2t}F4t(){this.G4t.F4t()}I2t(){return this.G4t.I2t()}x0t(t){if(this.n8t()){if(t.type===Co.Sh&&this.Qo.Sf)return!0;if(t.type===Co.Jg)return this.Y6t=!0,this.i8t.t8t(),!0}return!1}J6t(){return Boolean(this.fKt&&this.fKt.D5t())}async p2t(t){try{this.C5t();const i=this.h8t();this.s8t.jW(),this.fKt=await this.i8t.p2t(t,this.e8t,i),this.o8t(this.fKt)}catch(t){this.a8t.g5t(t)}}o8t(t){if(t.d_(this.y5t()),this.G4t.h2t===V1.t2t){const i=t.r8t();if(i.length)for(const t of i)this.o2t.I1t(t,this.G4t.Y4t);else this.o2t.I1t(this.G4t.Y4t.Kl,this.G4t.Y4t)}this.a8t.tr(),this.a8t.q3t(t)}v_(){if(this._Kt&&this.R5t&&this.J6t())return this.Qo.v_()}w_(){return this.R5t&&this.B0t?this.Qo.ya:super.w_()}h8t(){const t=!!(this.G4t.h2t===V1.t2t)&&this.R6t;let i,e;void 0!==this.jH.ads.googleIma.uiElements?i=this.jH.ads.googleIma.uiElements:this.jH.ads.showCountdown||(i=[]),void 0!==this.jH.ads.allowedMimeTypes&&(e=this.jH.ads.allowedMimeTypes);return{u8t:e,c8t:i,l8t:t,l6t:this.jH.ads.googleIma.bitrate,d8t:void 0,f8t:this.W4t}}W5t(){if(this._Kt){const t=this.h8t();this._Kt._8t(t)}}k1t(t){this.W6t=new nl(bi.ADVERTISEMENT_ERROR,t.Bb),this.H6t=new Rs(Ui.AD_ERROR,"There was a problem playing ads.",this.W6t),this.b0t.Co(ln.C0t(t))}I5t(){this.B0t&&(this.Qo.ge(),this.J$t(),this.be())}J5t(){var t;if(this.Qo.Tf()===1/0||0===this.Qo.i_().length)return;(null==(t=this.G4t.Y4t)?void 0:t.r4t)&&-1!==this.g8t&&(this.Qo.Nf(this.Qo.Tf()+this.g8t),this.g8t=-1)}K5t(t){var i,e;this.g8t=null!=(e=null==(i=t.E5t)?void 0:i.lKt)?e:-1}J$t(){super.J$t(),this.Qo.ge(),this.R5t&&!this.Qo.Sf&&this.Qo.p_()}$1t(){this.R5t||super.$1t()}async gn(){this.a8t.fn(Nt.ha,this.w8t),await super.gn(),this.C5t(),this.i8t.fn("v8t",this.A8t),this.i8t.Ud(),this.s8t.Ud(),this.G4t.gn(),this.a8t.gn()}constructor(t,i,e,s,n,r,h){super(t,i),this.bo=!1,this.Q0t=!1,this.W6t=void 0,this.H6t=void 0,this.g8t=-1,this.r1t="none",this.q6t=!1,this.Q6t=!1,this.K6t=new Wr,this.F6t=!1,this.G6t=!1,this.A8t=t=>{this.b0t.Co(t)},this.w8t=t=>{this.W6t=new nl(bi.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.H6t=Bw(this.W6t)},this.Y5t=NaN,this.X6t=()=>{this.bo||this.A_()},this.jH=e,this.jB=!0,this.XL=NaN,this.S0=Mw.uT,this.Y6t=!1,this.V6t=!1,this.o2t=new y4(this.b0t,this),this.a8t=new o4(this,this.Qo,this.o2t),this.a8t.yn(Nt.ha,this.w8t),this.Qo.yn(Co.jh,this.X6t),this.G4t=new i4(this,this.Qo,this.R0t,s,this.o2t),this.e8t=h,this.i8t=r,this.s8t=n,this.be(),this.i8t.yn("v8t",this.A8t)}},On=class{registerWebImaAdPlayerConstructor(t){this.m8t=t}createAdPlayer(t,i,e){return D4()&&this.m8t?this.m8t(t,i,e):void 0}};function D4(){if(Boolean(Ha.google&&Ha.google.ima)){return!(1===w.keys(Ha.google.ima).length&&Ha.google.ima.dai)}return!1}On.Lb=new On;var S4=class{get y0t(){return N4.D0t}gR(t){return t&&t.integration===Pu.GOOGLE_IMA}M0t(t,i,e){return On.Lb.createAdPlayer(t,i,e)}a4(t,i,e,s){e.B6t(t,i,s)}jQ(t){const i=e0(t.sources);if(!i)return;const e={integration:Pu.GOOGLE_IMA,sources:i,omidAccessModeRules:h4(t.omidAccessModeRules)},s=Ei(t.timeOffset);return void 0!==s&&(e.timeOffset=s),e}};Ur.Lb.wR(new S4);var I4=class extends hl{fa(){return new E4}constructor(){super("BKt")}},E4=class extends wn{constructor(){super("adloaded")}},Li=-1,b4=class{get gKt(){return this.UKt}get p8t(){return this.y8t}get Sot(){return this.Utt}get M8t(){return this.f4t}get T8t(){return this.N8t}get Kl(){if(S(this.D8t)){const t=Re.NXt(this.f4t,this.mKt.t.Td());void 0===t||S(t)||(this.D8t=t)}return this.D8t}S8t(){return this.Utt<this.UKt.length}Mc(){let t;return this.Utt<this.UKt.length&&(t=this.UKt[this.Utt],this.Utt++),t}I8t(t){t.tXt=this,this.UKt.push(t)}async E8t(t){let i=!1;for(const e of this.UKt)try{await e.$n(),i=!0}catch(i){0,Qr(this.UKt,e);const s=e.ltt.sources,n="string"==typeof s?s:s.src;t.Co(ln.O0t(i,n))}return this.N8t=!0,i}TKt(){this.MKt=!0}yKt(){return this.MKt}b8t(){return this.UKt.some((t=>L0(t).some((t=>t.yWt))))}constructor(t,i){this.UKt=[],this.MKt=!1,this.f4t=t,this.Utt=0,this.mKt=i,this.D8t=NaN,this.N8t=!1,this.y8t=new O0(this,this.mKt)}},L4=class t extends dt{get L8t(){let t=0;for(const i of this.k8t)i.yKt()||(t+=1);return t}x8t(){this.O8t.C8t()}Cn(){this.Po(),this.j8t.yn("htt",this.O8t.P8t)}jn(){this.$o(),this.j8t.fn("htt",this.O8t.P8t),this.G$=this.iN,this.O8t.tr();for(const t of this.k8t)t.TKt();No(this.k8t)}Po(){this.z8t||(this.Qo.yn(Co.Iw,this.B8t),this.z8t=!0)}$o(){this.z8t&&(this.Qo.fn(Co.Iw,this.B8t),this.z8t=!1)}get V7(){return this.k8t}R8t(){return this.U8t(new Dr(Li,void 0))}Q8t(t){return this.F8t(t,0,0).length>0}Y8t(t,i){let e,s=0;for(const n of this.k8t){if(n.yKt())continue;const r=n.Kl;r>=t&&r<=i&&r>=s&&!S(r)&&(e=n,s=e.Kl)}return e}G8t(t){return this.U8t(new Dr(t,void 0))}V8t(){if(!this.W8t&&void 0!==this.W4t){this.W8t=!this.k8t.some((t=>S(t.Kl)));for(const t of this.k8t)t.Kl!==Li&&t.Kl<=this.W4t&&!t.yKt()&&t.TKt()}}H8t(t){for(const i of t)i.TKt();this.Q1t.q8t(t),0===this.L8t&&this.$o()}F8t(t,i,e){return this.k8t.filter((s=>{if(s.yKt())return!1;const n=s.Kl;return this.X8t(n,t)||this.Z8t(n,t,i,e)}))}X8t(t,i){switch(i){case 0:return 0===t;case Li:return t===Li;default:return!1}}Z8t(t,i,e,s){if(t<0)return!1;const n=t-i;return-1!==n&&n<=e&&n>=-s}K8t(i){if(i&&i.length>0){for(const e of i){const i=t.Q4t(e.Tjt);let s=this.U_t(e);-1===s&&(this.W8t=void 0===this.W4t,this.k8t.push(new b4(i,this.J8t)),s=this.k8t.length-1);this.k8t[s].I8t(e)}this.Po()}}static Q4t(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}U_t(i){const e=t.Q4t(i.Tjt);return tc(this.k8t,(i=>e===t.Q4t(i.M8t)))}$8t(t){Qr(this.k8t,t)}U0t(t){this.W4t=t,this.W8t=void 0===t}constructor(t,i,e,s){super(),this.W8t=!1,this.B8t=t=>ha(this.U8t(t)),this.U8t=async t=>{this.V8t();const i=t.currentTime,e=t.currentTime!==Li?this.Y8t(this.G$,t.currentTime):this.F8t(t.currentTime,0,0)[0];let s,n;const r=this.Qo.Td()-10;if(n=this.Q8t(Li)&&_.ceil(i)===_.ceil(r)?this.F8t(Li,10,0).filter((t=>!t.T8t)):this.F8t(i,10,0).filter((t=>!t.T8t)),n.length){const t=(await Promise.all(n.map((t=>t.E8t(this.j8t))))).some((t=>!0===t));t&&this.Co(new I4),(!t||!this.O8t.t9t||n[0].Kl<this.O8t.t9t.Kl)&&(s=n[0])}e&&(e!==this.O8t.t9t&&(s=e),this.H8t([e])),s&&(this.O8t.P8t(),this.O8t.t9t=s,await this.O8t.C8t()),S(this.Qo.Td())||(this.G$=t.currentTime)},this.Qo=t,this.Q1t=i,this.J8t=new C0(this.Q1t,this.Qo),this.W4t=void 0,this.W8t=!1,t.Td()!==1/0?this.iN=0:this.iN=t.Tf(),this.G$=this.iN,this.k8t=[],this.j8t=e,this.O8t=s,this.z8t=!1}},k4=class extends dt{get i9t(){return this.HJt}get b0t(){return this.W1t}e9t(){this.s9t(),this.n9t(),this.BP=void 0}r9t(t){this.h9t=this.h9t.concat(t)}o9t(t){this.a9t=this.a9t.concat(t)}n9t(){this.h9t=[]}s9t(){this.a9t=[]}u9t(t){for(const i of this.h9t)i.kU===t&&KJ(i.eventURL)}ge(){this.i9t.style.display=""}be(){this.i9t.style.display="none"}gn(){this.Vo(),this.W1t.Vo(),zu(this.HJt)}constructor(t,i){super(),this.a9t=[],this.h9t=[],this.BP=void 0,this.W1t=new dt,this.c9t=t=>{t.stopPropagation(),this.l9t()},this.l9t=()=>{for(const t of this.a9t)for(const i of t.mHt)KJ(i.uri)},this.HJt=h.createElement("div"),this.HJt.style.display="none",this.d9t=t,this.f9t=i}};function x4(t,i){let e=i;if(!function(t){return"ui"in t}(t))return e;const s=t.ui.language;let n;if(Qs(s)){const i=t.ui.languages;if(!i)return e;n=i[s]}else n=s;return n&&n[i]&&(e=n[i]),e}var C4={[rs.Vv]:1,[rs.Wv]:2,[rs.Hv]:2};function O4(t,i){const e=i?i.map((t=>t.toLowerCase())):i;return Ot(t.filter((t=>{const i=t.type.toLowerCase();return!!fh(e)&&-1!==e.indexOf(i)&&P$(i)})),((t,i)=>C4[t.type]-C4[i.type])).map(j4)}function j4(t){return Qu({src:t.contentURL,type:t.type,isAdvertisement:!0})}function P4(t,i){return _Q(z4(t),z4(i))}function z4(t){return{Ti:t.height,ji:t.width}}function B4(t,i,e,s){const n=function(t,i,e,s){let n,r=1/0;const h=t.filter((t=>!P$(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(h.length){for(const t of h){const s=(_.abs(t.width/i-1)+_.abs(t.height/e-1))/2;s<r&&(r=s,n=t)}return j4(n||h.sort(P4)[0])}}(t,i.width,i.height,e),r=O4(t,e);return n&&r.push(n),De({sources:r},s)}var _u,R4=class extends k4{get _9t(){return this.g9t}get Mf(){return this.w9t.Mf}get ct(){let t=this.w9t.ct;return S(t)&&this.zHt&&(t=this.zHt.ct||0),t}get Sf(){return this.w9t.Sf}get zf(){return this.w9t.zf}set zf(t){this.w9t.zf=t,t?this.u9t(Ws.qHt):this.u9t(Ws.XHt)}get Ff(){return this.w9t.Ff}get Jf(){return this.w9t.Jf}get c_(){return this.w9t.c_}set c_(t){this.w9t.c_=t}get r_(){return this.w9t.r_}get a_(){return this.w9t.a_}get v9t(){return this.A9t}p_(){this.w9t.Ff&&(this.w9t.p_(),this.Co(new Gt(this.Mf)),this.g9t&&this.u9t(Ws.ZHt),this.g9t=!0)}m_(){this.w9t.Ff||(this.w9t.m_(),this.Co(new hs(this.Mf)),this.u9t(Ws.Sh))}async y_(){var t;null==(t=this.DC)||t.qd(),this.DC=void 0,this.be(),this.g9t=!1,this.m9t=!0,this.p9t(),this.y9t(),await this.M9t()}T9t(t){void 0===t&&(t=!0),this.g9t=!1,t&&this.u9t(Ws.hqt),this.be(),this.f9t()}N9t(){var t;const i=null==(t=this.Q1t.ba)?void 0:t.mi,e=new J0(this.Wu,i);return this.i9t.appendChild(e.we),e.yn("qm",this.D9t),e}S9t(){this.zHt&&this.zHt.xHt.gHt&&(this.XJt=new H0(this.i9t),this.XJt.sJt=this.zHt.xHt.gHt,this.XJt.yn("clickstart",this.I9t),this.XJt.yn("click",this.l9t))}E9t(t,i){for(const e of this.h9t)if(e.kU===Ws.gw){const s=b$(e.Ku,i);void 0!==s&&this.G$<s&&s<=t&&KJ(e.eventURL)}}async b9t(){if(!this.zHt||!this.L9t)return;const t=B4(this.zHt.FHt,this.L9t,this.wC.ads.allowedMimeTypes,this.wC);if(!t.sources.length)return await this.w9t.tr(),this.d9t(""),void this.zHt.YWt();this.DC=new Wr,this.m9t=!0,await this.w9t.ga(t,this.DC.Wd),this.w9t.ge(),this.zHt.YWt(),this.S9t()}async k9t(t,i,e){this.A9t=t,this.zHt=t.yWt,this.w9t.yn(Co.Iw,this.x9t),this.w9t.yn(Co.Xg,this.C9t),this.w9t.yn(Co.Ew,this.O9t),this.w9t.yn(Ls,this.Ds),this.zHt.EWt&&0!==this.zHt.EWt.length&&this.r9t(this.zHt.EWt),this.zHt.xHt&&this.o9t(this.zHt.xHt),this.BP=i,this.L9t=e,0!==this.zHt.FHt.length&&(this.w9t.yn(Nt.ha,this.j9t),await this.b9t(),this.w9t.yn(Co.Jg,this.P9t),this.w9t.yn(Co.Iw,this.z9t),this.w9t.yn(Zt.Rw,this.B9t),this.w9t.yn(Co.mw,this.Ds))}lZt(){this._9t&&this.R9t&&this.D9t()}get R9t(){return this.zHt&&-1!==this.zHt.VHt&&this.w9t.Mf>=this.zHt.VHt}U9t(){this.u9t(Ws.Kyt),this.A9t&&this.b0t.Co(new js(this.A9t,this.Mf))}async M9t(){this.w9t.fn(Nt.ha,this.j9t),this.w9t.fn(Co.Jg,this.P9t),this.w9t.fn(Co.Iw,this.z9t),this.w9t.fn(Zt.Rw,this.Ds),this.w9t.fn(Zt.Rw,this.B9t),this.w9t.fn(Co.mw,this.Ds),this.w9t.fn(Co.Iw,this.x9t),this.w9t.fn(Co.Xg,this.C9t),this.w9t.fn(Co.Ew,this.O9t),this.w9t.fn(Ls,this.Ds),this.A9t&&(this.A9t.TKt(),this.b0t.Co(new Jh(this.A9t,this.Mf))),this.Q9t(),this.e9t(),this.p9t(),this.y9t(),this.A9t=void 0,this.zHt=void 0,this.L9t=void 0,await this.w9t.tr(),this.w9t.be(),this.i9t.style.cursor="",this.F9t=0,this.G$=-1,this.Y9t&&(this.G9t.M9t(),this.Y9t=!1)}Q9t(){this.XJt&&(this.XJt.Ud(),this.XJt=void 0)}y9t(){this.V9t&&(zu(this.V9t),this.V9t=void 0)}p9t(){this.JJt&&(this.JJt.gn(),this.JJt=void 0)}W9t(){this.Y9t=!0}H9t(){var t;this.V9t||(this.V9t=h.createElement("div"),this.V9t.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.i9t.appendChild(this.V9t));const i=null==(t=this.A9t)?void 0:t.Xl;if(!i)return;const e=i.Oc.filter(R0);let s=x4(this.wC,"The content will play in")+" "+_.round(i.dKt)+" "+x4(this.wC,"seconds");if(e.length>1){const t=e.filter((t=>t.yKt())).length;s+=". "+x4(this.wC,"Ad")+" "+(t+1)+"/"+e.length}fs(this.V9t,s)}constructor(t,i,e,s,n,r,h){super(t,i),this.G9t=e,this.wC=s,this.Q1t=n,this.Wu=r,this.w9t=h,this.g9t=!1,this.F9t=0,this.G$=-1,this.DC=new Wr,this.m9t=!0,this.P9t=()=>{this.T9t()},this.B9t=()=>{this.DC=void 0,this.g9t||(this.U9t(),this.g9t=!0),this.m9t&&(this.m9t=!1,this.Q1t.x8t()),this.i9t.style.display="block",this.w9t.fn(Zt.Rw,this.B9t),this.g9t=!0},this.z9t=()=>{const t=this.Mf,i=this.ct,e=t/i;(0===this.F9t&&e>=.25?(this.u9t(Ws.sqt),this.F9t=1):1===this.F9t&&e>=.5?(this.u9t(Ws.rqt),this.F9t=2):2===this.F9t&&e>=.75&&(this.u9t(Ws.nqt),this.F9t=3),this.E9t(t,i),this.H9t(),this.G$=t,this.zHt)&&(-1!==this.zHt.VHt&&this.zHt.VHt<this.zHt.ct&&(null!=this.JJt||(this.JJt=this.N9t()),this.Mf<this.zHt.VHt?this.JJt.gJt(this.zHt.VHt-this.Mf):this.JJt.vJt()))},this.j9t=()=>{var t,i;this.DC=void 0,this.w9t.fn(Nt.ha,this.j9t),this.m9t=!0,null==(t=this.BP)||t.Oqt(ir.bqt),this.g9t=!1,this.w9t.be();const e=(null==(i=this.w9t.bt)?void 0:i.src)||"";this.d9t(e)},this.x9t=()=>{this.Ds(new Dr(this.Mf,void 0))},this.C9t=()=>{this.Ds(new ko(this.ct))},this.O9t=()=>{this.Ds(new Pc(this.Mf,this.c_))},this.I9t=()=>{this.Q1t.m_()},this.D9t=()=>{this.A9t&&(this.u9t(Ws.JHt),this.b0t.Co(new Ye(this.A9t,this.Mf/this.ct)),this.T9t(!1))},this.i9t.className="theoplayer-ad-linear",this.i9t.style.zIndex="10",gn(this.i9t),this.w9t.be(),this.Y9t=!1}},U4=class t extends Bo{get we(){return this.Us}AJt(){this.we.addEventListener("mouseup",this.mJt),this.we.addEventListener("touchend",this.mJt),this.we.addEventListener("mousedown",this.q9t)}wJt(){this.we.removeEventListener("mouseup",this.mJt),this.we.removeEventListener("touchend",this.mJt),this.we.removeEventListener("mousedown",this.q9t)}static cr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}gn(){this.wJt(),zu(this.Us)}constructor(){super(),this.mJt=t=>{this.Co(new wn("qm")),this.q9t(t)},this.q9t=t=>{t.stopPropagation()},this.Us=t.cr(),this.AJt()}},Q4=class extends k4{get X9t(){return this.Z9t}get K9t(){return this.hu}e9t(){super.e9t(),this.i9t&&wM(this.i9t)}async k9t(t,i,e){this.LKt&&this.M9t(),this.Z9t=t,this.LKt=t.MWt,0!==this.LKt.EWt.length&&this.r9t(this.LKt.EWt),this.BP=i,0!==this.LKt.SWt.length&&(this.o9t(this.LKt.SWt[0].PWt),this.i9t.addEventListener("error",this.J9t),this.i9t.addEventListener("load",this.$9t),await this.b9t(),this.t7t())}lZt(){var t;if(void 0!==this.i7t)return;const i=null==(t=this.LKt)?void 0:t.SWt[0];i&&i.Xl&&-1!==i.Xl.VHt&&(this.u9t(Ws.JHt),this.b0t.Co(new Ye(this.Z9t,0)),this.e7t())}U9t(){void 0!==this.Z9t&&this.b0t.Co(new js(this.Z9t,this.Q1t.Mf))}y_(){this.M9t(),this.Z9t=void 0,this.LKt=void 0}M9t(){this.s7t(),void 0!==this.Z9t&&(this.Z9t.TKt(),this.b0t.Co(new Jh(this.Z9t,this.Q1t.Mf))),this.e9t(),this.n7t(),void 0!==this.i7t&&(c(this.i7t),this.i7t=void 0)}s7t(){this.i9t.removeEventListener("load",this.$9t),this.i9t.removeEventListener("error",this.J9t)}async b9t(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const i=this.LKt.SWt[0],e=h.createElement("a");if(i.PWt.gHt&&(e.href=i.PWt.gHt,e.target="Du",e.setAttribute("rel","noopener")),i.xWt){const t=i.xWt,s=h.createElement("iframe");s.src=t.Tqt,e.appendChild(s)}else if(i.LWt){const t=i.LWt,s=h.createElement("img");s.src=t.Tqt,e.appendChild(s)}else if(i.OWt){const t=i.OWt,s=h.createElement("iframe");s.src=t.Tqt,e.appendChild(s)}i.YWt(),e.addEventListener("mousedown",this.c9t),e.addEventListener("touchend",this.c9t),this.i9t.firstChild&&(wM(this.i9t),this.M9t()),t.appendChild(e),this.i9t.appendChild(t),this.ge()}t7t(){var t;if(!this.LKt)return;const i=null==(t=this.LKt.SWt[0].Xl)?void 0:t.VHt;void 0!==i&&-1!==i&&(this.i7t=Ha.setTimeout(this.r7t,1e3*i))}n7t(){this.hu&&(this.hu.fn("qm",this.h7t),this.hu.gn()),this.hu=void 0}get o7t(){return this.Q1t.a7t()}constructor(t,i,e){super(t,i),this.$9t=()=>{this.s7t(),this.u9t(Ws.lqt),this.f9t()},this.J9t=t=>{var i,e;this.s7t(),null==(i=this.BP)||i.Oqt(ir.kqt);const s=null==(e=this.LKt)?void 0:e.SWt[0];var n,r;const h=null!=(r=null!=(n=null==s?void 0:s.xWt)?n:null==s?void 0:s.LWt)?r:null==s?void 0:s.OWt;var o;this.d9t(null!=(o=null==h?void 0:h.Tqt)?o:"")},this.e7t=()=>{this.be(),wM(this.i9t),this.f9t(),this.Z9t=void 0,this.LKt=void 0},this.r7t=()=>{this.hu||(this.i7t=void 0,this.hu=new U4,this.i9t.children[0].appendChild(this.hu.we),this.hu.yn("qm",this.h7t))},this.h7t=()=>{this.u9t(Ws.JHt),this.lZt()},this.i9t.className="theoplayer-ad-nonlinear",this.i9t.style.position="absolute",this.i9t.style.width="100%",this.i9t.style.bottom="3em",this.i9t.style.zIndex="10",this.i9t.style.textAlign="center",this.Q1t=e}},F4=class{static async u7t(t,i,e){let s=[],n=t.shift();for(;n;){try{const t=await(new Y$).qqt(n,i);s=s.concat(t)}catch(t){0;const i=ln.O0t(t,n.sources.src);e.Co(i)}n=t.shift()}return s}},Ph=class extends hl{fa(){return new Y4}constructor(){super("Krt")}},Y4=class extends wn{constructor(){super("statechange")}};!function(t){t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted"}(_u||(_u={}));var G4=class{get Gu(){return this.Xu}get U(){return this.Xu.length}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}cg(t){return this.Xu[t]}ET(t){this.Xu.push(t),this.Xa&&this.Xa.push(t.va),this.c7t(t)}l7t(t){for(const i of t)this.ET(i)}d7t(t,i){i>=0&&i<=this.Xu.length&&(this.Xu.splice(i,0,t),this.Xa&&this.Xa.splice(i,0,t.va),this.c7t(t))}LT(t){return qo(this.Xu,t)}bT(t){this.f7t(this.Xu.indexOf(t))}f7t(t){if(!(t>=0&&t<this.Xu.length))return;const i=this.Xu[t];Kn(this.Xu,t),this.Xa&&Kn(this.Xa,t),this._7t(i)}Xb(){const t=this.Xu.slice();No(this.Xu),this.Xa&&No(this.Xa);for(const i of t)this._7t(i)}constructor(){this.Xu=[],this.Xa=void 0}},V4=class extends G4{fa(){return function(t){const i=function(t){const i=t.Gu.map((t=>t.va));return i.item=i=>{const e=0|i,s=t.cg(e);return s&&s.va||void 0},i}(t),e=new xa(t,i);return i.addEventListener=(t,i)=>{e.yn(t,i)},i.removeEventListener=(t,i)=>{e.fn(t,i)},i}(this)}yn(t,i){this.g7t.yn(t,i)}sf(t){this.g7t.sf(t)}Vo(){this.g7t.Vo()}Co(t){this.g7t.Co(t)}fn(t,i){this.g7t.fn(t,i)}uf(t){this.g7t.uf(t)}cf(t){this.g7t.cf(t)}lf(t,i){return this.g7t.lf(t,i)}constructor(...t){super(...t),this.g7t=new dt,this.Ds=t=>{this.Co(t)}}};var W4,H4=class extends wn{constructor(t){super("addtask"),this.task=t}},q4=class extends hl{fa(){return new H4(this.w7t.va)}constructor(t){super("v7t"),this.w7t=t}},X4=class extends wn{constructor(t){super("removetask"),this.task=t}},Z4=class extends hl{fa(){return new X4(this.task.va)}constructor(t){super("A7t"),this.task=t}},K4=class extends V4{c7t(t){this.Co(new q4(t))}_7t(t){this.Co(new Z4(t))}constructor(){super()}};!function(t){t.UNINITIALISED="uninitialised",t.INITIALISED="initialised"}(W4||(W4={}));var J4=class extends Bo{async A_(){await this.m7t(),this._ht("initialised")}async m7t(){try{await this.p7t()}catch(t){0}}async p7t(){const t=await this.rMt.Het();for(const i of t){const t=this.M7t.y7t(i.id,i.sourceDescription,i.parameters,this.T7t);this.N7t(t),this.SC.ET(t),await t.D7t}}get OS(){return this.fht}_ht(t){this.fht=t,this.Co(new Ph)}get S7t(){return this.SC}y7t(t,i,e){void 0===e&&(e="persistent");const s=this.M7t.I7t(t,i,e);return this.E7t(s,e),this.SC.ET(s),this.N7t(s),s}async E7t(t,i){try{await this.b7t(t,i)}catch(t){throw g("Unable to persist task - "+t)}}async b7t(t,i){await this.rMt.Get({key:t.o,id:t.o,sourceDescription:t.yc,parameters:t.fS},i)}N7t(t){t.yn("Krt",(()=>{t.OS===_u.EVICTED&&this.SC.bT(t)}))}constructor(t,i,e){super(),this.fht="uninitialised",this.SC=new K4,this.M7t=i,this.T7t=e,this.rMt=t,this.A_()}};var $4=class{get EB(){return this.L7t}get k7t(){return this.x7t}get C7t(){return this.O7t.EB}get j7t(){let t=0,i=0;return this.IT.forEach((e=>{t+=e.timeRanges.EB,i+=e.totalQualityDurationToCache})),0===i?0:_.min(1,t/i)}get O7t(){return this.P7t}aN(t){return!!Dc(this.IT,t.IT)&&(!!ad(this.x7t,t.x7t)&&(!!ad(this.EB,t.EB)&&(!!ad(this.C7t,t.C7t)&&this.O7t.MB(t.O7t))))}constructor(t,i,e){if(this.x7t=t,this.IT=i,this.L7t=e,0===this.IT.size)this.P7t=Ai.kB();else{let t=new Ai([-1/0,1/0]);this.IT.forEach((i=>{t=t.Sn(i.timeRanges)})),this.P7t=t}}};$4.QUALITY_TIME_RANGES_NULL_OBJECT=ke(),$4.CACHE_PROGRESSION_NULL_OBJECT=new $4(0,$4.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),$4.z7t=$4.CACHE_PROGRESSION_NULL_OBJECT;var t2=class extends wn{constructor(){super("progress")}},i2=class extends hl{fa(){return new t2}constructor(){super("d1t")}};var e2,yu=class extends Jo{get name(){return"B7t"}constructor(t,i){super(t,i)}};async function s2(t,i,e){const s=[];for(const n of t.wwt)s.push(n2(n,i,e));return{R7t:await Promise.all(s)}}async function n2(t,i,e){const s=[];for(const n of t.Xnt)r2(n)||s.push(a2(n,i,e));return{Z:await Promise.all(s),Rg:t.Rg}}function r2(t){return t.rrt.every(o2)}!function(t){t[t.Vv=0]="Vv",t[t.Wv=1]="Wv"}(e2||(e2={}));var h2=1;function o2(t){return t.mvt!==h2&&Boolean(t.mvt)}async function a2(t,i,e){const s=[];for(const i of t.rrt)o2(i)||s.push(u2(i,e));const n=await Promise.all(s),r=t.Mst[0],h=t.Tst,o=h?function(t,i){const e=[],s=function(t){return t?Xi(t,"avc")?We.VIDEO_H264:Xi(t,"hev")||Xi(t,"hvc")||Xi(t,"hvt")||Xi(t,"lhv")||Xi(t,"lhe")||Xi(t,"lht")?We.VIDEO_H265:Xi(t,"mp4")?We.VIDEO_MP4:Xi(t,"mpeg2")?We.VIDEO_MPEG2:Xi(t,"mpeg")?We.VIDEO_MPEG:We.VIDEO_UNKNOWN:We.VIDEO_UNKNOWN}(t);for(const t of i){const i=t.Nst.split(":").pop(),n=t.Jwt;e.push({mimeType:s,uuid:i,data:n})}const n=e2.Vv,r=Yh;return{type:n,schemeType:r,schemeDatas:e}}(r,h):void 0,a=JV(t,i,!0);return{Ng:n,gs:t.Y6,Rg:t.Rg,qP:o,Hgt:a}}async function u2(t,i){const e=await async function(t,i){const e=[],s=t._nt;t.rct&&e.push({VT:0,ct:0,U7t:t.rct});const n=s.FAt();let r=n;for(;r;){if(t.Xat(r)){const s=await t.Kat(r,i,(new Wr).Wd);for(let i=0;i<s.U;i++)e.push(c2(s.$at(i),t))}else e.push(c2(r,t));r=s.iut(r)}const h=s.WAt(),o=h.WT-n.VT;return{ct:o,nst:e}}(t,i),s={o:l2(t),iT:e,wP:t.wP,uit:t.uit,Ti:t.Ti,Rg:t.Rg,ji:t.ji};switch(t.Rg){case fi.Ru:break;case fi.ym:var n,r;s.Fct=null!=(r=null==(n=t.Fct)?void 0:n.mN())?r:NaN;break;case fi.Mm:s.audioSamplingRate=t.gvt}return s}function c2(t,i){return{VT:t.VT,ct:t.ct,U7t:i.nut(t)}}function l2(t){return t.Yat.Cn+"-"+(""+t.o)}function d2(t,i){const e=function(t){const i=function(t){const i=ke();for(const e of t){let t=i.get(e.bCt);t||(t={Rg:e.Rg,Bp:[]},i.set(e.bCt,t)),t.Bp.push(e)}return i}(t),e=I();return i.forEach((t=>{for(const i of t.Bp){let s=e.get(t.Rg);s||(s=ke(),e.set(t.Rg,s));let n=s.get(i.l);n||(n=[],s.set(i.l,n)),n.push(i)}})),e}(t);return function(t,i){const e=I();return t.forEach(((t,s)=>{const n=ke();t.forEach(((t,e)=>{const r=[];for(const e of t){const t=f2(e,s,i);r.push(t)}n.set(e,r)})),e.set(s,n)})),e}(e,i)}function f2(t,i,e){const s=t.bCt,n={jCt:t,cOt:[]};for(const t of e)jZ(i,s,t)&&n.cOt.push(t);return n}async function _2(t,i){const e=await i.Wyt([t],{});return oZ(e.LI,{},e.qyt)}async function g2(t,i){return EX(t)?async function(t,i){const e=d2(t.Bp,t.Ijt),s=await async function(t,i){const e=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await A2(n,s,i);e.push(r)}return e}(e,i),n=await async function(t,i){const e=[];for(const o of t){var s,n;const t=await M2(o.mAt,i);var r,h;t.wP=o.wP,t.uit=o.Mst?v2(o.Mst):"",t.Ti=null!=(r=null==(s=o.xEt)?void 0:s.Ti)?r:0,t.ji=null!=(h=null==(n=o.xEt)?void 0:n.ji)?h:0,e.push(t)}return{Rg:fi.hT,Z:[{gs:oF,Rg:fi.hT,Ng:e}]}}(t.Ijt,i);return s.push(n),{ct:w2(s),Q7t:[t.mAt],Iwt:[{R7t:s}]}}(t,i):function(t){const i=T2(t);return{ct:i.ct,Q7t:[t.mAt],Iwt:[{R7t:[{Rg:fi.hT,Z:[{Rg:fi.hT,gs:oF,Ng:[{o:t.mAt,iT:i,wP:0,uit:"",Ti:0,Rg:fi.hT,ji:0}]}]}]}]}}(t)}function w2(t){let i=-1/0;for(const e of t)for(const t of e.Z)i=_.max(i,...t.Ng.map((t=>t.iT.ct)));return i}function v2(t){return[t.FEt,t.GEt,t.UOt].filter(Po).join(",")}async function A2(t,i,e){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,i]=t.value,n=await m2(i,e);s.push(n)}return{Rg:p2(i),Z:s}}async function m2(t,i){const e=[],s=t[0].jCt;for(const s of t){const t=await y2(s,i);e.push(t)}return{gs:s.gs||oF,Rg:p2(s.Rg),Ng:e}}function p2(t){switch(t){case gi.Mm:return fi.Mm;case gi.ym:return fi.ym;case gi.Tm:case gi.YOt:return fi.Ru;default:return fi.hT}}function y2(t,i){const e=function(t){const i=t.jCt.mAt,e=t.cOt.map((t=>t.mAt));return i||(e.length?e[0]:void 0)}(t);return M2(e,i)}async function M2(t,i){let e={ct:0,nst:[]};if(t){const s=await _2(t,i);In(s)&&(e=T2(s))}return{o:t||"default",F7t:t,iT:e,wP:0,uit:"",Ti:0,Rg:fi.hT,ji:0}}function T2(t){const i=[];let e,s=0;for(const n of t.nst){const t=s;!n.kjt||void 0!==e&&LX(n.kjt.mAt,e)||(i.push(N2(n.kjt,t)),e=n.kjt.mAt),i.push(D2(n,t)),s+=n.ct}return{ct:s,nst:i}}function N2(t,i){return{VT:i,ct:0,U7t:S2(t.mAt)}}function D2(t,i){return{VT:i,ct:t.ct,U7t:S2(t.mAt)}}function S2(t){return{zu:t.PM,Qht:t.Zmt?[t.Zmt.Cn,t.Zmt.Cn+t.Zmt.U]:void 0,pI:!1}}var I2=class{async Y7t(t){if(!t.src)throw new g("Invalid typed source");const i=t.type;if(dw(i))return await this.G7t(t);if(lw(i))return await this.V7t(t);throw new g("Unexpected source type")}async G7t(t){try{const i=await _2(t.src,this.Hyt);return await g2(i,this.Hyt)}catch(t){throw new g("Unable to fetch HLS manifest")}}async V7t(t){try{const e=new MV({Ug:i.Dh(t.src),Syt:t.liveOffset,kyt:t.timeServer,pI:t.useCredentials},this.W7t,Ta.xV,this.Hyt,t.dash);return await e.W,await async function(t,i,e){const s=[];for(const n of t.Iwt)s.push(s2(n,i,e));const n=await Promise.all(s);return{ct:t.oAt.Gwt(),Q7t:[t.vyt],Iwt:n}}(e.Tr.ect,t.contentProtection,this.sut)}catch(t){throw new g("Unable to fetch DASH manifest")}}constructor(t,i,e){this.Hyt=t,this.sut=i,this.W7t=e}},E2=class{H7t(){const t=new ue;return this.q7t.push(t),this.X7t(),t.tL}async Z7t(t,i){try{await t}finally{this.K7t-=1,this.X7t(),0===this.q7t.length&&0===this.K7t&&i.Zb(!0)}}X7t(){if(this.q7t.length>0&&this.K7t<this.J7t){this.q7t.shift().Zb(),this.K7t+=1}}constructor(t){this.q7t=[],this.K7t=0,this.J7t=t}};var b2=class extends Bo{get D7t(){return this.A_()}async A_(){const t=new I2(this.Hyt,this.sut,this.W7t);this.REt=await t.Y7t(this.$7t);const i=function(t,i){if(Qs(t)){if(Xi(t,"%"))return C(t)/100*i;throw new g("Unexpected - Invalid string supplied as amount to cache.")}return i<t?i:t}(this.hMt.fS.amount,this.REt.ct);let e;this.L7t=i;const s=qs(this.REt.Q7t[0]),n=(await this.sst.rst.Xet(s,"manifestURL")).filter((t=>qo(t.references,this.hMt.o))),r=[],h=this.hMt.fS.bandwidth;for(const t of this.REt.Iwt)for(const i of t.R7t)for(const t of k2(i,this.hMt.fS.preferredTrackSelection))for(const i of C2(t.Ng,h))r.push(i);this.tti=_.ceil(r.map((t=>t.wP*function(t,i){let e=0;for(const s of t.iT.nst.map((t=>t.ct)))if(e+=s,e>=i)return e;return e}(t,i)/8)).reduce(((t,i)=>t+i),0));const o=ke();if(n&&0!==n.length){const t=n.reduce(((t,i)=>t+i.byteSize),0);for(const t of n){const i=t.qualityId,e=new Ai(t.startsAndEnds);if(o.has(i))o.get(i).timeRanges=o.get(i).timeRanges._B(e).fB(5e-4);else{const t=Vt(r,(t=>t.o===i));var a;const s=_.min(this.L7t,null!=(a=null==t?void 0:t.iT.ct)?a:1/0);o.set(i,{timeRanges:e,totalQualityDurationToCache:s})}}e=new $4(t,o,this.L7t)}else{for(const t of r)o.set(t.o,{timeRanges:Ai.kB(),totalQualityDurationToCache:_.min(t.iT.ct,this.L7t)});e=new $4(0,o,this.L7t)}this.iti=e}get eti(){return this.tti}get iti(){return this.sti}set iti(t){this.sti.aN(t)||(this.sti=t,t.aN($4.z7t)||this.Co(new i2))}async pi(t){await this.bo,await this.nti(this.REt,t)}async nti(t,i){if(!t.Q7t)throw new g("Unexpected - manifest is missing locations");await this.rti();const e=[];for(const s of t.Iwt)e.push(this.hti(s,t.Q7t[0],i));return P(e)}async rti(){const t=await this.oti.Het();for(const i of t){const t=await this.sst.hst.Wb(i.key);if(t)await L2(t,this.hMt.o,this.sst.hst,this.T7t);else try{await this.sst.hst.Get(i,this.T7t)}catch(t){throw new yu("Unable to store manifest with url: "+i.locationURL,t)}}await this.oti.Ket()}hti(t,i,e){const s=[];for(const n of t.R7t){const t=k2(n,this.hMt.fS.preferredTrackSelection);for(const n of t)s.push(this.ati(n,i,e))}return P(s)}async ati(t,i,e){const s=this.hMt.fS.bandwidth,n=C2(t.Ng,s);t.Rg===fi.ym&&t.Hgt&&t.Hgt.RO.widevine&&"persistent"===t.Hgt.RO.widevine.licenseType&&(await this.uti(t.Hgt),fo(e));const r=[];for(const t of n)r.push(this.cti(t,i,e));return P(r)}async cti(t,i,e){fo(e);const s=t.iT.nst[0].VT+this.L7t,n=[];let r=!1;for(const h of t.iT.nst){if(h.VT>=s||this.stopIfFailed(r))break;await this.lti(e),await this.dti.H7t(),n.push(this.dti.Z7t(this.fti(h,t,i),this._ti).catch((t=>(r=!0,Promise.reject(t)))))}return P(n)}async lti(t){if(null==t?void 0:t.zd)throw await this._ti.tL,new Sn}async gti(){return await this.bo.catch(na),this.REt}uti(t){return Promise.resolve()}wti(){return i.Qv("License renewal unsupported in this SDK."),Promise.resolve()}async fti(t,i,e){const s=this.sst.rst,n=fc(t.U7t.zu,t.U7t.Qht),r=await s.Wb(n);if(r)await L2(r,this.hMt.o,s,this.T7t),this.vti(r,!1);else try{const s=await this.Ati(t.U7t),{segmentMetadataEntry:n,segmentEntry:r}=this.mti(t,i,e,s);await this.sst.ist((async t=>{await t.rst.Get(n,this.T7t),await t.nst.Get(r,this.T7t)})),this.vti(n,!0)}catch(i){throw new yu("Unable to store segment with url: "+t.U7t.zu,i)}}async Ati(t){const i=await this.Kot.jht(t,{Yht:this.DEFAULT_CACHING_SEGMENT_TIMEOUT,vI:this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT});return await this.Jot(i)}async Jot(t){return{buffer:await t.gj()}}mti(t,i,e,s){const n=fc(t.U7t.zu,t.U7t.Qht),r=t.VT,h=t.ct,o=this.pti(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:qs(e),qualityId:i.o,byteSize:o,startsAndEnds:new Ai([r,r+h]).eB,references:[this.hMt.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:qs(e),data:s,references:[this.hMt.o]}}}pti(t){return t.buffer.byteLength}vti(t,i){const e=t.qualityId,s=this.sti,n=s.IT;n.get(e).timeRanges=n.get(e).timeRanges._B(new Ai(t.startsAndEnds)).fB(5e-4),this.iti=new $4(i?s.k7t+t.byteSize:s.k7t,n,this.L7t)}stopIfFailed(t){return!1}constructor(t,i,e,s,n,r,h,o){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this._ti=new ue,this.sti=$4.z7t,this.hMt=t,this.sst=i,this.Hyt=e,this.oti=s,this.Kot=n,this.sut=r,this.W7t=o,this.T7t=h,this.tti=-1;const a=this.hMt.yc.sources[0];this.$7t=a,this.bo=this.A_(),this.dti=new E2(this.hMt.fS.parallelTasksThreshold)}};async function L2(t,i,e,s){qo(t.references,i)||(t.references.push(i),await e.Get(t,s))}function k2(t,i){switch(t.Rg){case fi.Mm:return x2(t.Z,i.audioTrackSelection);case fi.Ru:return x2(t.Z,i.textTrackSelection);default:return x2(t.Z,[])}}function x2(t,i){if(0===i.length)return t.length?[t[0]]:[];const e=[];for(const s of t)i.indexOf(s.gs)>-1&&e.push(s);return e}function C2(t,i){if(!t.length)return[];const e=[...t].sort(gQ),s=e.filter((t=>t.wP<=i));return s.length>0?[s.pop()]:[e.shift()]}var O2=class{async yti(){await this.sst.ist((async t=>{await this.Mti(t),await this.Tti(t),await this.Nti(t),await this.Dti(t)}))}async Mti(t){const i=t.ost,e=this.hMt.o;await i.bT(e)}async Tti(t){const i=t.rst,e=t.nst,s=this.hMt.yc.sources[0];if(!ho(s))return;const n=qs(s.src),r=(await i.Xet(n,"manifestURL")).filter((t=>qo(t.references,this.hMt.o)));for(const t of r)Qr(t.references,this.hMt.o),0===t.references.length?(await i.bT(t.key),await e.bT(t.key)):await i.Get(t)}async Nti(t){const i=t.hst,e=this.Sti(),s=(await i.Pet(e)).filter((t=>qo(t.references,this.hMt.o)));for(const t of s)Qr(t.references,this.hMt.o),0===t.references.length?await i.bT(t.key):await i.Get(t)}Sti(){if(!this.REt)return[];const t=this.hMt.yc.sources[0];if(!ho(t))return[];const i=qs(t.src),e=function(t){if(!t)return[];const i=[];for(const e of t.Iwt)for(const t of e.R7t)for(const e of t.Z)for(const t of e.Ng)t.F7t&&i.push(t.F7t);return function(t){return t.reduce(((t,i)=>(t.indexOf(i)<0&&t.push(i),t)),[])}(i)}(this.REt).map((t=>({src:t}))).map((t=>qs(t.src)));return[i,...e]}async Dti(t){const i=t.ast,e=(await i.Het()).filter((t=>qo(t.references,this.hMt.o)));for(const t of e)Qr(t.references,this.hMt.o),0===t.references.length?(await i.bT(t.key),this.Iti(t)):await i.Get(t)}Iti(t){}constructor(t,i,e){this.hMt=t,this.sst=i,this.REt=e}},j2=new class{c9(t,i,e){return new O2(t,i,e)}};var P2=class{get va(){return this.Xa||(this.Xa=function(t){return{renew(i){t.Eti(i)}}}(this)),this.Xa}Eti(t){this.bti(t)}async bti(t){try{await this.Lti.wti(t)}catch(t){0,this.Sit._ht(_u.ERROR)}}constructor(t,i){this.Sit=t,this.Lti=i}},z2=class extends dt{get D7t(){return this.Lti.D7t}get va(){return this.Xa||(this.Xa=function(t){let i,e={get id(){return t.o},get status(){return t.OS},get source(){return t.yc},get parameters(){return t.fS},get duration(){return t.ct},get cached(){return t.kti.ks()},get secondsCached(){return t.xti},get percentageCached(){return t.Cti},get bytes(){return t.Oti},get bytesCached(){return t.jti},get license(){return t.FF.va},start(){t.Cn()},pause(){t.m_()},remove(){t.bT()},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Fo(t,["d1t","Krt"],e),e}(this)),this.Xa}get o(){return this.CT}get FF(){return this.Pti}get OS(){return this.fht}_ht(t){this.fht!==t&&(this.fht=t,this.Co(new Ph))}get yc(){return this.bc}get fS(){return this.zti}get ct(){return this.Lti.iti.EB}get kti(){return this.Lti.iti.O7t}get xti(){return this.Lti.iti.C7t}get Cti(){return this.Lti.iti.j7t}get Oti(){return this.Lti.eti}get jti(){return this.Lti.iti.k7t}Cn(){this.fht===_u.EVICTED||this.fht===_u.DONE||this.Bti()}async Bti(){try{this._ht(_u.LOADING);const t=new Wr;this.Rti=t,await this.Lti.pi(t.Wd),this._ht(_u.DONE)}catch(t){ut(t)?this._ht(_u.IDLE):this._ht(_u.ERROR)}finally{this.Rti.Ud()}}m_(){this.Rti.qd()}bT(){this.OS===_u.LOADING?(this.yn("Krt",this.evictOnLoading),this.m_()):this.Uti()}async Uti(){try{const t=await this.Lti.gti();await j2.c9(this,this.sst,t).yti(),this.Lti.iti=$4.z7t,this._ht(_u.EVICTED)}catch(t){0,this._ht(_u.ERROR)}}constructor(t,i,e,s,n,r){super(),this.Rti=new Wr,this.evictOnLoading=()=>{this.fn("Krt",this.evictOnLoading),this.Uti()},this.CT=t,this.bc=i,this.zti=e,this.sst=s,this.Lti=n.c9(this,this.sst,r),this.Pti=new P2(this,this.Lti),this.fht=1===this.Lti.iti.j7t?_u.DONE:_u.IDLE,this.Lti.yn("d1t",(t=>{this.Ds(t),1===this.Cti&&this._ht(_u.DONE)}));const h=new Date,o=this.zti.expirationDate.getTime()-h.getTime();(function(t){return t<2147483647})(o)&&u((()=>this.Uti()),o)}};var B2=class{I7t(t,i,e){const s=Xh();return this.y7t(s,t,i,e)}y7t(t,i,e,s){return new z2(t,i,e,this.sst,this.Qti,s)}constructor(t,i){this.sst=t,this.Qti=i}},R2=30,U2=5;function Q2(t){if(!t)throw new g("Unexpected - The cache parameters are undefined");const i=function(t){if(Qs(t)&&!Xi(t,"%"))return x(t);return t}(t.amount);!function(t){if(function(t){return Qs(t)&&Xi(t,"%")}(t)){const i=C(t);if(S(i)||i<0||i>100)throw new g("The amount as percentage must be between 0 and 100 percent.")}if(!Qs(t)&&S(t))throw new g("The amount must be a number or a string")}(i);const e=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+R2),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||ed(t)&&t>new Date}(t))throw new g("Invalid expiration date for the cache parameters")}(e);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(S(t)||t<0)throw new g("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return U2;if(S(t))throw new g("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:i,expirationDate:e,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var F2=class{set t9t(t){this.Fti=t,this.Yti=0,this.Gti=0,this.Vti=void 0}get t9t(){return this.Fti}M2t(){if(!this.Fti)return;const t=this.Fti.gKt;for(;this.Yti<t.length;){const i=t[this.Yti];for(void 0===this.Vti&&(this.Vti=L0(i),this.Gti=0);this.Gti<this.Vti.length;){const t=this.Vti[this.Gti];if(this.Gti++,void 0!==t.yWt)return t.yWt}this.Yti++,this.Vti=void 0}}tr(){for(this.t9t=void 0,this.DC.qd(),this.DC=new Wr;this.Wti.length;)this.P8t()}Hti(t){return new J4(this.sst.ost,t,"temporary")}async tYt(t){const i=O4(t.FHt,this.jH.ads.allowedMimeTypes);if(!i.length)return;const e=await Qi.Lb.Gz(i,De({sources:i}));if(!e.t.xz())return;this.Lti||(this.Lti=new this.Qti(this.EI));const s=this.sst,n=new B2(s,this.Lti),r=this.Hti(n).y7t(De({sources:e.yc}),Q2({amount:10,bandwidth:va.Lb.hP()||this.QB.zW}),"temporary");this.Wti.push(r);const h=this.Lti.c9(r,s,"temporary");this.DC.qd(),this.DC=new Wr,h.pi(this.DC.Wd).then(na),this.qti(h,t)}constructor(t,i,e,s){this.Wti=[],this.Yti=0,this.Gti=0,this.C8t=async()=>{const t=this.M2t();t&&await this.tYt(t)},this.P8t=()=>{const t=this.Wti.shift();null==t||t.bT()},this.qti=async(t,i)=>{let e=!1;for(;!e;)await t.lf("d1t"),e=1===t.iti.j7t;i.ct<5&&this.C8t()},this.jH=t,this.EI=i,this.DC=new Wr,this.Qti=e,this.QB=s,this.sst=new xo}},Y2={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new Ai([0,0]).eB,references:[]},G2={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},V2=class t extends TQ{async Tut(t,i,e,s){try{return await super.Tut(t,i,e,s)}catch(t){yo(t)}const n=await this.Xti.Tut(t,i,e,s);return await this.Zti(t,i,n),n}async Zti(i,e,s){if(void 0===this.Kti)return;const n=this.sst.rst,r=fc(i,e),h=await n.Wb(r);if(h)await L2(h,this.Kti,n,this.T7t);else try{const i={buffer:s},{segmentMetadataEntry:e,segmentEntry:n}=t.mti(r,i,this.Kti);await this.sst.ist((async t=>{await t.rst.Get(e,this.T7t),await t.nst.Get(n,this.T7t)}))}catch(t){throw new yu("Unable to store segment with url: "+i,t)}}static mti(t,i,e){return{segmentMetadataEntry:Yt({},Y2,{key:t,segmentURLsegmentByteRange:t,references:[e]}),segmentEntry:Yt({},G2,{key:t,segmentURLsegmentByteRange:t,data:i,references:[e]})}}constructor(t,i,e,s,n){super(t),this.Xti=new MQ(i),this.sst=e,this.Kti=s,this.T7t=n}};var W2,H2=class{c9(t,i,e){void 0===e&&(e="persistent");const s=t.yc.sources[0];if(gw(s))throw new g("Caching THEOlive sources is not supported");const n=Boolean(s.useCredentials),r=new LU(this.EI,ls.hT),h=new CV(this.EI,n),o=new Xe(i.hst,i.rst,i.nst,i.ast),a=function(t,i,e,s,n){return new V2(i,t,e,s,n)}(this.EI,o,i,t.o,e),u=new eU,c=new BV(zV(h,o),u,t);return this.Jti(t,i,c,u,r,a,e)}constructor(t){this.EI=t}},q2=class extends H2{Jti(t,i,e,s,n,r,h){return new b2(t,i,e,s,n,r,h,hU())}},X2=q2;!function(t){t[t.NOT_INITIALISED=0]="NOT_INITIALISED",t[t.$ti=1]="$ti",t[t.tii=2]="tii",t[t.Rw=3]="Rw",t[t.vR=4]="vR",t[t.Ibt=5]="Ibt"}(W2||(W2={}));var Z2=class t extends Dn{get I0t(){return this}static get D0t(){return Qn.CKt}get D0t(){return t.D0t}B6t(t,i,e){i===ie.H7&&this.j2?ha(this.p2t([t])):this.eii.push(t)}Tf(){return this.sii._9t?this.sii.Mf:this.w7()}Nf(t,i){}Td(){return this.sii.ct}If(){return this.sii.Sf}Ef(){}Lf(){}Bf(){return this.sii.zf}Rf(t){this.zf!==t&&(this.sii.zf=t,this.Co(new Pc(this.Mf,this.c_)))}Yf(){return this.sii.Ff}$f(){return this.sii.Jf}i_(){return Ai.kB().ks()}h_(){return this.sii.r_}u_(){return this.sii.a_}l_(){return this.sii.c_}d_(t){this.c_!==t&&(this.sii.c_=t,this.Co(new Pc(this.Mf,this.c_)))}async p_(){if(this.nii)return;this.Co(new Gt(this.Mf)),this.rii(),this.eii.length&&(this.nii=this.p2t(this.eii),await this.nii,this.nii=void 0),await this.hii.G8t(this.Qo.Tf());const t=this.oii;4!==t&&1!==t&&5!==t||(!this.RKt&&this.aii.length?this.uii():this.RKt?(this.cii=!0,this.sii.p_()):(this.J$t(),this.Qo.p_()),this.oii=3)}m_(){3===this.oii&&(this.sii.m_(),this.oii=4)}x8t(){this.hii.x8t()}Cn(){this.oii=1,this.hii.Cn()}async y_(){this.hii&&(this.hii.jn(),this.lii(!1),this.G9t.y_(),this.oii=5,this.RKt&&(this.hii.$8t(this.RKt.tXt),this.RKt=void 0)),this.j2=!1,this.cii=!1,No(this.aii),this.B0t&&(this.J$t(),this.Qo.ge()),No(this.eii),await this.sii.y_(),await this.w9t.tr()}qm(){this.sii.lZt(),this.G9t.lZt()}A_(){this.w9t.A_(),this.rii()}x0t(t){return!(t.type!==Co.Jg||!this.hii||!this.hii.Q8t(-1))&&(this.hii.R8t().then(na),!0)}ge(){void 0!==this.sii.v9t&&(this.w9t.ge(),this.sii.ge()),void 0!==this.G9t.X9t&&this.G9t.ge()}be(){this.w9t.be(),this.sii.be(),this.G9t.be()}async p2t(t){const i=await F4.u7t(t,this.EI,this.b0t);if(!i.length){const t="Ads could not be loaded.";return this.b0t.Co(ln.O0t(new _t(Xr.ADBLOCK,Vi.FILE_NOT_FOUND),t)),void(this.j2&&!this.RKt&&0===this.aii.length&&this.dii())}this.hii.K8t(i),this.b0t.Co(new Iu),this.B0t||this.Qo.Ff||this.hii.G8t(this.Qo.Tf()),0!==this.oii&&5!==this.oii||this.Cn()}q8t(t){this.aii.push(...t);for(const i of t)this.j2&&!this.B0t&&this.uii()}async uii(){if(2!==this.oii&&!this.fii){0,this.fii=!0,this.oii=2;const t=this.RKt;this._ii(),this.RKt?(await this.RKt.tXt.E8t(this.b0t),this.gii()||(this.fii=!1),this.b0t.Co(new P1(this.wii(this.RKt))),await this.vii()):((null==t?void 0:t.tXt.b8t())&&this.b0t.Co(new Ji(this.wii(t))),this.fii=!1,this.oii=1,this.dii())}}dii(){this.J$t(),this.Qo.ge(),this.Qo.Sf?this.Qo.Co(new jn(this.Qo.Tf())):this.Qo.p_()}_ii(){let t;if(this.RKt&&this.gii())t=this.RKt.tXt;else{if(0===this.aii.length)return;t=this.aii.shift()}if(!t)return;const i=t.Mc();i?this.RKt=i:(this.RKt&&(this.hii.$8t(this.RKt.tXt),this.RKt=void 0),this.RKt=void 0)}async vii(){const t=this.RKt?function(t){var i,e;const s=null==(e=t.kXt)||null==(i=e.rWt)?void 0:i.hWt();return void 0===s?void 0:new b0(s)}(this.RKt):void 0;if(t){if(!this.RKt)return;this.Aii=t,this.mii(this.RKt.EWt),this.pii(Ws.Aqt);const i=this.Aii.Mc();this.RKt.tXt.b8t()&&(this.G9t.M9t(),1===this.RKt.tXt.Sot&&this.b0t.Co(new ea(this.wii(this.RKt)))),await this.k9t(i)}else this.oii=1,this.fii=!1,this.RKt=void 0,this.uii()}async k9t(t){if(t){var i;let s=Po(t.yWt),n=Po(t.NWt);var e;const r=null!=(e=null==(i=t.TWt)?void 0:i.qWt)?e:[],h=r.length>0,o=this.RKt,a=this.wii(o);if(t.yWt){if(t.yWt.Xl=o,void 0!==o.ltt.skipOffset){const i=Re.NXt(o.ltt.skipOffset,t.yWt.ct);i&&i<t.yWt.ct&&(t.yWt.VHt=i)}const i=a.wKt(t.yWt,r,t.DWt,o.ltt);this.G9t.M9t(),this.H1t(),await this.sii.k9t(i,t.lt,{width:this.Qo.we.offsetWidth,height:this.Qo.we.offsetHeight}),s=!0}if(t.NWt){const i=t.NWt.SWt[0];if(i.Xl=o,void 0!==o.ltt.skipOffset){const t=Re.NXt(o.ltt.skipOffset,this.Qo.Td());t&&(i.Xl.VHt=t)}const e=s?[]:r,h=a.vKt(i,e,t.NWt,t.DWt,o.ltt);s&&this.sii.W9t(),await this.G9t.k9t(h,t.lt,{width:this.Qo.we.offsetWidth,height:this.Qo.we.offsetHeight}),n=!0}if(s){this.oii=3,this.sii.ge();const t=0===a.Tjt;this.cii=t,this.w9t.m_(),this.sii.p_(),this.Qo.m_(),this.Qo.be(),this.H1t(),this.sii.U9t()}n&&(this.oii=3,this.G9t.ge(),this.G9t.U9t()),(s||n||h)&&this.yii(t.AWt),s||n||await this.Mii(),!s&&n&&(this.gii()||this.aii.length>0?this.uii():(this.dii(),this.RKt=o))}else null===t?await this.Mii():this.lii(!0)}Mii(){const t=this.Aii;return this.k9t(t&&t.Mc())}lii(t){this.pii(Ws.mqt),this.Tii(),this.oii=1;const i=void 0!==this.RKt&&this.RKt.tXt.S8t();if(this.fii=!1,i)t&&(this.oii=1,this.uii());else{if(!this.B0t)return;this.Qo.ge(),!this.Qo.Sf&&t&&this.Qo.p_(),this.J$t()}}J$t(){this.Nii(),super.J$t()}Nii(){if(this.Qo.Sf&&(this.oii=5),this.RKt){const t=this.RKt.tXt;t.b8t()&&this.b0t.Co(new Ji(this.wii(this.RKt))),this.hii.$8t(t),this.RKt=void 0}}mii(t){this.Dii=this.Dii.concat(t)}Tii(){this.Dii=[]}Sii(t){this.Qo.we.appendChild(t)}pii(t){for(const i of this.Dii)i.kU===t&&KJ(i.eventURL)}yii(t){this.sii.u9t(Ws.lqt);for(const i of t)KJ(i)}get G7(){return this.RKt?this.wii(this.RKt):null}get F7(){return this.RKt?[this.sii.v9t,this.G9t.X9t].filter(Po):[]}get V7(){const t=this.aii.concat(this.hii.V7.filter((t=>!t.yKt())));return A(t,(t=>t.p8t.Oc.filter((t=>!t.yKt()))))}get W7(){return this.hii.V7.map((t=>t.p8t))}att(t){const i=this.U6t();for(const e of i)Un(e.sources,e.timeOffset)||t.a4(e,ie.H7,!1)}U6t(){const t=[];for(const i of this.F7.concat(this.V7))t.push(i.ltt);const i=this.aii.concat(this.hii.V7.filter((t=>!t.yKt())));for(const e of i)for(const i of e.gKt)i.W||t.push(i.ltt);return t.push(...this.eii),Td(t)}gii(){return!!this.RKt&&L0(this.RKt).some((t=>t.yWt))}wii(t){return t.tXt.p8t}a7t(){return this.Iii}v_(){return this.w9t.v_()}gf(){return this.w9t.gf()}U0t(t){this.hii.U0t(t)}async gn(){await super.gn(),this.Qo.fn(Co.jh,this.rii),this.b0t.tR(this.sii.b0t),this.b0t.tR(this.G9t.b0t),this.b0t.tR(this.hii),this.sii.gn(),this.G9t.gn(),await this.w9t.gn()}constructor(t,i,e,s,n,r){super(t,i),this.aii=[],this.oii=0,this.Dii=[],this.fii=!1,this.j2=!1,this.cii=!0,this.eii=[],this.Eii=t=>{t.type===Co.jh&&this.cii?this.cii=!1:this.Co(t)},this.rii=()=>{this.j2=!0},this.bii=async()=>(this.oii=1,await this.sii.M9t(),this.k9t(this.Aii.Mc())),this.Lii=async t=>{const i=new _t(Xr.PLAYBACK,Vi.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.b0t.Co(ln.O0t(i,t)),await this.sii.M9t(),this.k9t(this.Aii.Mc())},this.kii=()=>(this.G9t.M9t(),this.k9t(this.Aii.Mc())),this.xii=t=>{const i=new _t(Xr.PLAYBACK,Vi.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.b0t.Co(ln.O0t(i,t)),this.G9t.M9t(),this.k9t(this.Aii.Mc())},this.EI=r,this.w9t=e,this.G9t=new Q4(this.xii,this.kii,this),this.sii=new R4(this.Lii,this.bii,this.G9t,s,this,t.Iu,e),this.Sii(this.G9t.i9t),this.Sii(this.sii.i9t);const h=new F2(s,r,q2,n);this.hii=new L4(this.Qo,this,this.b0t,h),this.sii.sf(this.Eii),this.G9t.sf(this.Ds),this.b0t.Qa(this.sii.b0t),this.b0t.Qa(this.G9t.b0t),this.b0t.Qa(this.hii),this.Iii=new C0(this,this.Qo),this.Iu.yn(ii.pn,this.Ds),this.Qo.yn(Co.jh,this.rii)}};Ur.Lb.wR(new class{get y0t(){return Z2.D0t}gR(t){return t&&("string"!=typeof t.integration||t.integration===Pu.DEFAULT||t.integration===Pu.CSAI||t.integration===Pu.THEO)}M0t(t,i,e){const s=new PN(t.we,e,t.AO,t.r7,t.f_,t.d7,t.Ol);return new Z2(t,i,s,e,t.r7,t.AO)}a4(t,i,e,s){e.B6t(t,i,s)}jQ(t){const i=e0(t.sources);if(!i)return;const e={integration:Pu.CSAI,sources:i};"vast"===e.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===e.sources.type&&void 0!==t.timeOffset&&$("property timeOffset will be ignored for vmap ad sources");const s=Ei(t.timeOffset);void 0!==s&&(e.timeOffset=s);const n=Ei(t.skipOffset);return void 0!==n&&(e.skipOffset=n),e}});var K2=class{jW(){var t;this.S4||(null==(t=this.s8t)||t.initialize(),this.S4=!0)}get i9t(){return this.HJt}get Cii(){return this.Oii.offsetHeight}get jii(){return this.Oii.offsetWidth}get Pii(){return this.s8t}zii(t){"linear"===t?this.HJt.style.marginTop="0px":"nonlinear"===t&&(this.HJt.style.marginTop="-45px")}ge(){this.HJt.style.opacity="1",this.HJt.style.pointerEvents=""}be(){this.HJt.style.opacity="0",this.HJt.style.pointerEvents="none"}Ud(){var t;null==(t=this.s8t)||t.destroy(),this.s8t=void 0}constructor(t,i){this.s8t=void 0,this.S4=!1,this._9=t;const e=h.createElement("div");e.className="theoplayer-ima-wrapper",gn(e),e.style.zIndex="10",f.Qs&&function(t,i){t.addEventListener(i,TM)}(e,"mousedown"),i.appendChild(e);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.Oii=s,e.appendChild(s),this.HJt=e,this.s8t=new google.ima.AdDisplayContainer(this.Oii,this._9)}},J2=class{get CHt(){return this.Bii.getAdId()}get E5t(){const t=this.Bii.getAdPodInfo();if(void 0!==t)try{return{k2t:t.getAdPosition(),lKt:t.getMaxDuration(),Rii:t.getPodIndex(),Tjt:t.getTimeOffset(),x2t:t.getTotalAds(),Uii:t.getIsBumper()}}catch(t){return}}get _Wt(){return this.Bii.getAdSystem()}get Qii(){return this.Bii.getAdvertiserName()}get nHt(){var t;return null!=(t=this.Bii.getApiFramework())?t:void 0}get TWt(){return this.XWt.map((t=>({hHt:t.getAdSlotId(),HP:t.getContentType(),u1t:t.getContent(),Ti:t.getHeight(),ji:t.getWidth()})))}get HP(){var t;return null!=(t=this.Bii.getContentType())?t:void 0}get RWt(){return this.Bii.getCreativeId()}get v6t(){return this.Bii.getCreativeAdId()}get Fii(){return this.Bii.getDealId()}get iy(){return this.Bii.getDescription()}get ct(){return this.Bii.getDuration()}get ji(){return this.Bii.getWidth()}get Ti(){return this.Bii.getHeight()}get d6t(){var t;return null!=(t=this.Bii.getMediaUrl())?t:void 0}get Yii(){return this.Bii.getMinSuggestedDuration()}get g6t(){return this.Bii.getSkipTimeOffset()}get Gii(){return this.Bii.getSurveyUrl()}get KP(){return this.Bii.getTitle()}get f6t(){return this.Bii.getTraffickingParameters()}get _6t(){return this.Bii.getTraffickingParametersString()}get DWt(){return this.Bii.getUniversalAdIds().map((t=>({m6t:t.getAdIdRegistry(),p6t:t.getAdIdValue()})))}get c8t(){return this.Bii.getUiElements()}get w6t(){return this.Bii.getVastMediaBitrate()}get c6t(){return this.Bii.getVastMediaHeight()}get u6t(){return this.Bii.getVastMediaWidth()}get r6t(){return this.Bii.getWrapperAdIds()}get h6t(){return this.Bii.getWrapperAdSystems()}get o6t(){return this.Bii.getWrapperCreativeIds()}get p5t(){return this.Bii.isLinear()}constructor(t){this.Bii=t;const i=new google.ima.CompanionAdSelectionSettings;i.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,i.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,i.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.XWt=t.getCompanionAds(0,0,i)}};function $2(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var t3=class extends Bo{d_(t){var i;null==(i=this._Kt)||i.setVolume(t)}l_(){return this._Kt.getVolume()}F5t(){return this._Kt.getRemainingTime()}Ud(){No(this.Ic),this.Wu.fn(ii.pn,this.Vii),this._Kt.removeEventListener(google.ima.AdEvent.Type.LOADED,this.Wii),this._Kt.removeEventListener($2(),this.forwardAdEventListener),this._Kt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this._Kt.destroy()}Cn(){this._Kt.start()}$6t(){this._Kt.resume()}m_(){this._Kt.pause()}qm(){this._Kt.skip()}y_(){this._Kt.stop()}D5t(){const t=this._Kt.getCurrentAd();if(t)return this.Hii(t)}r8t(){return this._Kt.getCuePoints()}Hii(t){let i=Vt(this.Ic,(i=>i.Bii===t));return i||(i=new J2(t),this.Ic.push(i)),i}_8t(t){this._Kt.updateAdsRenderingSettings(n3(t))}constructor(t,i,e){super(),this.Ic=[],this.Wii=t=>{t.getAd().isLinear()?this.s8t.zii("linear"):this.s8t.zii("nonlinear")},this.Vii=()=>{this._Kt.resize(this.s8t.jii,this.s8t.Cii,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const i=t.getAd(),e=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:ji.z2t,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:ji.B2t,[google.ima.AdEvent.Type.CLICK]:ji.R2t,[google.ima.AdEvent.Type.DURATION_CHANGE]:ji.Xg,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:ji.U2t,[google.ima.AdEvent.Type.STARTED]:ji.Ebt,[google.ima.AdEvent.Type.IMPRESSION]:ji.Q2t,[google.ima.AdEvent.Type.PAUSED]:ji.vR,[google.ima.AdEvent.Type.RESUMED]:ji.F2t,[google.ima.AdEvent.Type.AD_PROGRESS]:ji.b2t,[google.ima.AdEvent.Type.AD_BUFFERING]:ji.Y2t,[google.ima.AdEvent.Type.FIRST_QUARTILE]:ji.G2t,[google.ima.AdEvent.Type.MIDPOINT]:ji.rqt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:ji.V2t,[google.ima.AdEvent.Type.COMPLETE]:ji.hqt,[google.ima.AdEvent.Type.USER_CLOSE]:ji.W2t,[google.ima.AdEvent.Type.LINEAR_CHANGED]:ji.H2t,[google.ima.AdEvent.Type.LOADED]:ji.q2t,[google.ima.AdEvent.Type.AD_CAN_PLAY]:ji.X2t,[google.ima.AdEvent.Type.AD_METADATA]:ji.Z2t,[google.ima.AdEvent.Type.AD_BREAK_READY]:ji.K2t,[google.ima.AdEvent.Type.INTERACTION]:ji.J2t,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:ji.$2t,[google.ima.AdEvent.Type.SKIPPED]:ji.t3t,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:ji.i3t,[google.ima.AdEvent.Type.LOG]:ji.e3t,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:ji.s3t,[google.ima.AdEvent.Type.VOLUME_CHANGED]:ji.n3t,[google.ima.AdEvent.Type.VOLUME_MUTED]:ji.r3t}[t]}(t.type),s={type:e,date:new Date,ttt:i?this.Hii(i):void 0,l5t:e4(e,t.getAdData())};this.Co(s)},this.forwardAdErrorEventListener=t=>{this.Co({date:new Date,ttt:void 0,type:J1.h3t,l5t:{V5t:r4(t.getError())}})},this._Kt=t,this.s8t=i,this.Wu=e,this.Wu.yn(ii.pn,this.Vii),this._Kt.init(this.s8t.jii,this.s8t.Cii,google.ima.ViewMode.NORMAL),this._Kt.addEventListener(google.ima.AdEvent.Type.LOADED,this.Wii),this._Kt.addEventListener($2(),this.forwardAdEventListener),this._Kt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}},i3=class extends hl{get qii(){return this.Xii}get i9t(){return this.HJt}fa(){return new e3(this.Xii)}constructor(t,i){super("v8t"),this.Xii=t,this.HJt=i}},e3=class extends wn{get adsManager(){return this.Xii}constructor(t){super("adsmanagerloaded"),this.Xii=t}},s3=class extends Bo{t8t(){var t;null==(t=this.i8t)||t.contentComplete()}async p2t(t,i,e){if(this.Zii)throw new g("Only one ImaAdsRequest can be made at a time.");if(!this.Kii.Pii)throw new g("AdDisplayContainer is not initialized.");this.i8t=new google.ima.AdsLoader(this.Kii.Pii),this.i8t.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.i8t.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.Zii=new ue,this.Jii=i,this.$ii=e;const s=new google.ima.AdsRequest;return t.O4t?s.adTagUrl=t.O4t:t.j4t&&(s.adsResponse=t.j4t),s.linearAdSlotWidth=t.E4t,s.linearAdSlotHeight=t.b4t,s.nonLinearAdSlotWidth=t.L4t,s.nonLinearAdSlotHeight=t.k4t,s.contentDuration=t.z4t,s.setAdWillAutoPlay(t.x4t),s.setAdWillPlayMuted(t.C4t),t.P4t&&(s.omidAccessModeRules=t.P4t),this.i8t.requestAds(s),this.Zii.tL}Ud(){var t;void 0!==this.i8t&&(this.i8t.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.i8t.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.i8t.destroy(),this.i8t=void 0),null==(t=this.Zii)||t.Jb("AdsLoader destroyed"),this.Zii=void 0}constructor(t,i){super(),this.onAdsManagerLoadedListener=t=>{if(this.Jii&&this.$ii&&this.Zii){var i;const e=n3(this.$ii),s=this.Jii,n=t.getAdsManager({get currentTime(){return s.Mf},get duration(){return s.ct}},e),r=new t3(n,this.Kii,this.Wu);this.Co(new i3(n,this.Kii.i9t)),null==(i=this.Zii)||i.Zb(r),this.Zii=void 0}},this.onAdsManagerErrorListener=t=>{var i;const e={Bb:t.getError().getMessage(),j2t:t.getError().getVastErrorCode(),zqt:t.getError().getErrorCode(),Rg:s4(t.getError().getType()),P2t:void 0};null==(i=this.Zii)||i.Jb(e),this.Zii=void 0},this.Wu=i,this.Kii=t}};function n3(t){const i=new google.ima.AdsRenderingSettings;return i.enablePreloading=t.l8t,t.c8t&&(i.uiElements=t.c8t),i.mimeTypes=t.u8t,void 0!==t.f8t&&(i.playAdsAfterTime=t.f8t),void 0!==t.d8t&&(i.loadVideoTimeout=t.d8t),void 0!==t.l6t&&(i.bitrate=t.l6t),void 0!==t.f8t&&(i.playAdsAfterTime=t.f8t),i.restoreCustomPlaybackStateOnAdBreakComplete=!0,i}var r3=class extends Bo{get Mf(){return this.Qo.e_?this.tei:this.Qo.Tf()}get ct(){return this.Qo.Td()}get zf(){return this.Qo.zf}get c_(){return this.Qo.c_}tr(){this.tei=0}constructor(t){super(),this.Qo=t,this.tei=this.Qo.Tf(),this.Qo.yn(Co.Iw,(()=>{this.Qo.e_||(this.tei=this.Qo.Tf()),this.Co(new Dr(this.Mf,void 0))}))}};On.Lb.registerWebImaAdPlayerConstructor((function(t,i,e){M4(e);const s=T4(e)?t.v_():void 0,n=new K2(s,t.we),r=new s3(n,t.Iu),h=new r3(t);return new N4(t,i,e,t.a7,n,r,h)}));var h3=[Co.Xg,Co.Jg],o3=class extends cc{get iei(){return this.Qo===this.N7?this.Q1t:this.N7}ur(t,i,e,s){this.N7.yn(h3,this.Ds),s.Ff&&!s.Sf||this.Qo.p_()}ar(t,i,e){this.N7.fn(h3,this.Ds)}Nf(t,i){}pf(t){}eei(t,i){return super.Nf(t,i)}sei(t){return super.pf(t)}yf(){return this.N7.bt}Wa(){return this.N7.Wa()}Td(){return this.N7.Td()}i_(){if(this.nei())return this.N7.i_();const t=Ai.xn(this.N7.i_()),i=Ai.xn(this.Q1t.i_()).Im(this.rei);return t._B(i).Sn(Ai.LB(0,this.Tf())).ks()}Tf(){return this.hei(super.Tf())}hei(t){return this.Qo===this.Q1t?this.rei+t:t}vf(){const t=Ai.xn(this.N7.vf()),i=Ai.xn(this.Q1t.vf());return t._B(i.Im(this.rei)).ks()}E_(t){if(qo(h3,t.type))return!0;if(this.Qo===this.Q1t)switch(t.type){case Co.Iw:return this.Co(new Dr(this.hei(t.currentTime),t.currentProgramDateTime)),!0;case Co.gw:return this.Co(new Wa(this.hei(t.currentTime))),!0;case Co.jh:return this.Co(new Gt(this.hei(t.currentTime))),!0;case Co.Sh:return this.Co(new hs(this.hei(t.currentTime))),!0;case Co.Jg:return this.Co(new jn(this.hei(t.currentTime))),!0;case Co.yw:return this.Co(new ri(this.hei(t.currentTime))),!0;case Co.pw:return this.Co(new yi(this.hei(t.currentTime))),!0;case Co.ww:return this.Co(new Qe(this.hei(t.currentTime),t.playbackRate)),!0;case Co.Ew:return this.Co(new Pc(this.hei(t.currentTime),t.volume)),!0;case Co.Zg:return this.Co(new Da(this.hei(t.currentTime),t.readyState)),!0;case Zt.Ow:return this.Co(new zc(this.hei(t.currentTime),t.readyState)),!0;case Zt.jw:return this.Co(new F(this.hei(t.currentTime),t.readyState)),!0;case Zt.Pw:return this.Co(new R(this.hei(t.currentTime),t.readyState)),!0;case Zt.zw:return this.Co(new B(this.hei(t.currentTime),t.readyState)),!0;case Zt.H_:return this.Co(new _e(this.hei(t.currentTime),t.readyState)),!0;case Zt.Bw:return this.Co(new Fr(this.hei(t.currentTime))),!0;case Zt.Rw:return this.Co(new Oe(this.hei(t.currentTime))),!0;case Co.Kg:return this.Co(new bn(this.hei(t.currentTime),t.initDataType,t.initData)),!0}return super.E_(t)}async gn(){this.N7.fn(h3,this.Ds),await super.gn(!0)}constructor(t,i,e){super(e),this.N7=t,this.Q1t=i,this.rei=t.Tf()}};function a3(t,i){i.zf=t.zf,i.c_=t.c_,i.Gf=t.Gf}var Vo,u3=class extends o3{ur(t,i,e,s){super.ur(t,i,e,s),this.iei.m_();this.oei(i,e).style.flex="1"}ar(t,i,e){super.ar(t,i,e);this.oei(i,e).style.flex="0"}constructor(t,i,e){super(t,i,e)}},c3=class extends u3{nei(){return!0}oei(t,i){return t}aei(t,i){return i}Nf(t,i){return super.eei(t,i)}pf(t){return super.sei(t)}constructor(t,i){super(t,i,t)}},l3=class extends u3{nei(){return!1}oei(t,i){return i}aei(t,i){return t}ur(t,i,e,s){super.ur(t,i,e,s),this.N7.be();for(const t of[i,e])t.style.transition=""}ar(t,i,e){super.ar(t,i,e),this.N7.ge()}constructor(t,i){super(t,i,i)}};!function(t){t.SINGLE="SINGLE",t.DOUBLE="DOUBLE",t.LSHAPE_AD="LSHAPE_AD",t.LSHAPE_CONTENT="LSHAPE_CONTENT"}(Vo||(Vo={}));var d3,f3=class{get uei(){var t,i;const e=null!=(i=null!=(t=this.cei)?t:this.XL)?i:this.IPt;return void 0!==e?this.VT+e:this.nN?this.nN:void 0}get ct(){const t=this.uei;return void 0===t?void 0:t-this.VT}Yn(t){var i,e,s;this.XL=null!=(i=t.ct)?i:this.XL,this.nN=null!=(e=t.WT)?e:this.nN,this.cei=null!=(s=t.lei)?s:this.cei,this.dei()}dei(){void 0===this.XL&&void 0!==this.nN?this.XL=this.nN-this.VT:void 0===this.nN&&void 0!==this.XL&&(this.nN=this.VT+this.XL)}constructor(t){this.Hf=!1,this.o=t.o,this.VT=t.VT,this.mAt=t.mAt,this.fei=t.fei||"SINGLE",this._ei=t._ei,this.nN=t.WT,this.IPt=t.COt,this.XL=t.ct,this.cei=t.lei,this.dei()}},_3=Promise,g3="urn:google:dai:2018";!function(t){t.AD_LOADING="adloading",t.AD_LOADED="adloaded",t.AD_ERROR="aderror"}(d3||(d3={}));var w3=class extends Bo{yq(t,i,e){if(void 0===this.gei){var s,n;if(void 0===(null==(n=Ha.google)||null==(s=n.ima)?void 0:s.dai))throw new g("IMA DAI SDK missing for THEOads");this.gei=new google.ima.dai.api.StreamManager(this.Q1t.we.querySelector("video"),this.Q1t.we)}const r=this.gei;this.wei(),r.reset();const h=new google.ima.dai.api.PodStreamRequest;return h.networkCode=t,h.customAssetKey=i,h.format="hls",h.adTagParameters=e,this.vei=this.Aei([google.ima.dai.api.StreamEvent.Type.STREAM_INITIALIZED,google.ima.dai.api.StreamEvent.Type.ERROR]).then((t=>{if(t.type===google.ima.dai.api.StreamEvent.Type.ERROR)throw new g("DAI stream request failed");this.mei=t.getStreamData(),this.pei()})),this.gei.requestStream(h),this.vei}updateAdTagParameters(t){var i;null==(i=this.gei)||i.replaceAdTagParameters(t)}pei(){var t;null==(t=this.gei)||t.addEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.PAUSED,google.ima.dai.api.StreamEvent.Type.RESUMED],this.yei),this.Q1t.nt.yn(Ud.L_,this.Hn),this.Q1t.yn(Co.cw,this.Mei),this.Q1t.yn(Zt.jw,this.Tei),this.Q1t.yn(Co.Jg,this.Nei)}wei(){var t;null==(t=this.gei)||t.removeEventListener([google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.CLICK,google.ima.dai.api.StreamEvent.Type.STARTED,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,google.ima.dai.api.StreamEvent.Type.MIDPOINT,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,google.ima.dai.api.StreamEvent.Type.COMPLETE,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,google.ima.dai.api.StreamEvent.Type.PAUSED,google.ima.dai.api.StreamEvent.Type.RESUMED],this.yei),this.Q1t.nt.fn(Ud.L_,this.Hn),this.Q1t.fn(Co.cw,this.Mei),this.Q1t.fn(Zt.jw,this.Tei),this.Q1t.fn(Co.Jg,this.Nei)}Aei(t,i){return new _3(((e,s)=>{var n;if(i&&i.zd)return s(new Sn);const r=t=>{o(),e(t)},h=()=>{o(),s(new Sn)},o=()=>{var e;null==(e=this.gei)||e.removeEventListener(t,r),i&&i.Yd(h)};null==(n=this.gei)||n.addEventListener(t,r),i&&i.Fd(h)}))}async Dei(t,i){return this.Sei({sources:{src:t}},i)}async Iei(t,i){this.vei&&await Ys(this.vei,i);const e=_.floor(1e3*t),s=this.mei.getStandalonePodManifestUrl(v3,e);return this.Sei({sources:{src:s}},i)}async Sei(t,i){var e;null==(e=this.xI)||e.qd(),this.xI=new Wr,this.xI.Xd(i);const s=this.xI.Wd;return fo(s),await this.Q1t.ga(De(t),s),f.Ga&&f.ZE&&(this.Q1t.p_(),this.Q1t.m_()),Vh((t=>{const i=this.lf("aderror",t).then(_3.reject),e=this.lf("adloaded",t).then((()=>_3.resolve()));return _3.race([i,e])}),s)}async tr(){var t,i;null==(t=this.xI)||t.qd(),this.xI=void 0,await this.Q1t.y_(),null==(i=this.gei)||i.reset()}constructor(t,i){super(),this.Nei=()=>{this.Eei=void 0,this.Q1t.y_()},this.yei=t=>{this.Lei.bei(t)},this.Hn=t=>{const i=t.Lt;if(i.zt===Mi.Dm&&!(i.Rg!==Wt.ID3&&i.Rg!==Wt.EVENT_STREAM||i.Rg===Wt.EVENT_STREAM&&i.Og!==g3)){if(i.yn(qt.O_,this.kei),i.yn(qt.P_,this.xei),i.L)for(const t of i.L.og)this.kei(new Rx(t));i.jg=Or.Pg,this.Cei=i}},this.kei=t=>{t.GT.yn(Di.FT,this.Oei)},this.xei=t=>{t.GT.fn(Di.FT,this.Oei)},this.Oei=t=>{var i,e;if(this.mei)if((null==(i=this.Cei)?void 0:i.Rg)===Wt.ID3){const i=t.GT.O;var s;if(GC(i))if(this.Eei!==i.text)this.Eei=i.text,null==(s=this.gei)||s.processMetadata("ID3",i.text,t.GT.VT)}else if((null==(e=this.Cei)?void 0:e.Rg)===Wt.EVENT_STREAM){var n;const i=t.GT.O;null==(n=this.gei)||n.processMetadata(g3,i,t.GT.VT)}},this.Mei=()=>{this.Co(new wn("adloading"))},this.Tei=()=>{this.Co(new wn("adloaded"))},this.Q1t=t,this.Q1t.ST=!1,this.Q1t.Xf=Le.eT,this.Lei=i}};function v3(){return _.floor((new Date).getTime()/6e4)}var A3=class extends o3{nei(){return!0}ur(t,i,e,s){super.ur(t,i,e,s),a3(this.Qo,this.iei),this.iei.zf=!0,t.style.backgroundImage="url('"+this.jei+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center",this.Pei=this.N7.nt.og.filter((t=>t.jg===Or.Jn));for(const t of this.Pei)t.jg=Or.Ch;for(const t of[i,e])t.style.flex="1",t.style.borderWidth="20px",t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,i,e){super.ar(t,i,e);for(const t of[i,e])t.style.flex="0",t.style.borderWidth="0px";var s;for(const t of null!=(s=this.Pei)?s:[])t.jg=Or.Jn;this.Pei=void 0}Ef(){return this.N7.Ef()||this.Q1t.Ef()}Lf(){return this.N7.Lf()||this.Q1t.Lf()}$f(){return _.min(this.N7.Jf,this.Q1t.Jf)}p_(){this.N7.p_(),this.Q1t.p_()}m_(){this.N7.m_(),this.Q1t.m_()}constructor(t,i,e){super(t,i,i),this.Pei=void 0,this.jei=e}},m3=class extends o3{ur(t,i,e,s){super.ur(t,i,e,s),this.iei.m_(),this.iei.be(),t.style.backgroundImage="url('"+this.jei+"')",t.style.backgroundSize="contain",t.style.backgroundPosition="center";const n=this.oei(i,e);n.style.flex="1",n.style.transform="\n          translate(-50%, -50%)\n          scale(calc(43/60))\n          translate(calc(50% + 100%/30), calc(50% + 100%/30))\n        ";for(const t of[i,e])t.style.transition=["flex","border-width","transform"].map((t=>t+" 1s ease-in-out")).join(", ")}ar(t,i,e){super.ar(t,i,e),this.iei.ge();const s=this.oei(i,e);s.style.flex="0",s.style.transform=""}constructor(t,i,e,s){super(t,i,e),this.jei=s}},p3=class extends m3{nei(){return!0}oei(t,i){return t}aei(t,i){return i}constructor(t,i,e){super(t,i,t,e)}},y3=class extends m3{nei(){return!1}oei(t,i){return i}aei(t,i){return t}constructor(t,i,e){super(t,i,i,e)}},M3=class extends gH{start(t){super.start(t);for(const t of this.prependPackets)this.jIt(t)}constructor(t=[]){super(),this.prependPackets=t}};function T3(t){return t.Rg===he.$A}var N3=class extends M3{transform(t){this.VIt.push(t),t.Rg===he.pA?(this.qL=function(t){const i=iu._p(t.zm.zm)[0];if((null==i?void 0:i.Rg)!==he.pA)throw new g("Not able to parse Moov Box");if(0===i.Z.length)throw new g("Tracks not found");return i.Z[0].Bp.rp.xp}(t),this.zei(this.VIt.splice(0),Bs.INITIALIZER)):t.Rg===he.dm&&this.zei(this.VIt.splice(0),Bs.FRAMES)}zei(t,i){const e={xp:this.qL,zF:this.tY},s=uc(t.map((t=>ks(t.zm.zm)))),n=Vt(t,T3),r={mI:this.Fht,Gb:e,Mot:s,Rg:i,ct:this.Bei(n)/e.xp,Kdt:vi(this.Rei(n),e.xp)};this.jIt(r)}Bei(t){if(!t||!this.qL)return 0;const i=iu._p(t.zm.zm)[0].Z[0];if(!i||0===i.SM.length)return 0;const e=i.rp.wM||0;return i.SM[0].CM.reduce(((t,i)=>{var s;return t+(null!=(s=i.ct)?s:e)}),0)}Rei(t){var i;if(!t||!this.qL)return Ce.UZERO;var e;return null!=(e=null==(i=iu._p(t.zm.zm)[0].Z[0].IM)?void 0:i.IM)?e:Ce.UZERO}Uei(t){t.Rg===Bs.INITIALIZER&&(this.qL=t.Gb.xp)}constructor(t,i=[],e=!1){super(e?i:[]),this.tY=t,this.VIt=[],this.Fht=this.tY.match(/video/)?xu.ym:xu.Mm;for(const t of i)this.Uei(t)}},D3="audio/x-theoplayer-fake-json-segment",S3="video/x-theoplayer-fake-json-segment";var I3=class{write(t){if(t.Rg===Bs.FRAMES){const i=t.Gb.xp,e=Vk(Ao(t.Mot),void 0,i);if(void 0===e)return;this.rL.Qei(e,t.ct)}else if(t.Rg===Bs.INITIALIZER){const i=new ia(Ao(t.Mot),new _s),e=At.sp(i,he.pA),s=e?iu.pp(e):[];if(s.length){const t=uc(s.map((t=>new j(t.VM))));this.rL.Co(new jt(Yh,t))}}}constructor(t){this.rL=t}},zn=class t extends Bo{get wf(){return this.cDt}get wd(){return this.wC}get h$(){return this.o$}get a$(){return this.lDt}get bW(){return this.RW}set bW(t){this.RW=t}get OW(){return this.FW}set OW(t){this.FW=t}AJ(t,i,e){return this.Fei=i.QD,this.Yei((i=>this.Gei(t,i)),e)}Gei(t,i){switch(this.lC){case"audio/mp4":case"video/mp4":return this.Vei(t,i);case D3:case S3:return this.Wei(t,i);default:return Promise.reject(new b("Unknown content type: "+this.lC))}}async Vei(t,i){fo(i);const e=function(t){switch(t.Rg){case G.dq:return jb(t.zm);case G.qS:return t.zm;case G.fq:throw new g("HeadlessMediaBuffer - Cannot convert opaque SegmentData to Stream.")}}(t);await e.pipeThrough(new _i(new mH)).pipeThrough(new _i(this.Hei)).pipeTo(new GI(this.qei),{preventClose:!0,preventAbort:!0})}async Wei(t,i){fo(i);const e=function(t){return JSON.parse(_n(t))}(await function(t,i){switch(t.Rg){case G.dq:return Promise.resolve(t.zm);case G.qS:return zb(t.zm,i).then((t=>uc(t)));case G.fq:return Promise.reject(new g("HeadlessMediaBuffer - Cannot convert opaque SegmentData to Uint8Array."))}}(t,i));this.Qei(e.startTime,e.duration)}f$(){return Promise.resolve()}yJ(t,i,e){return this.Yei((i=>this.Gei(t,i)),e)}Pq(){return this.r9}n$(){this.r9=!0}qJ(){this.r9=!1}l$(t,i){this.lDt=this.lDt._B(new Ai([t,i]))}bT(t,i,e){return this.Yei((e=>{fo(e),this.cDt=this.cDt.wB(new Ai([t,i])),this.Co(new wn(Bi.cq))}),e)}jJ(t,i){return this.Yei((()=>{this.Xei=new Ai([t,i])}))}d$(t,i){this.lDt=this.lDt.wB(new Ai([t,i]))}Qei(t,i){const e=this.Fei+t,s=new Ai([e,e+i]).Sn(this.Xei);this.cDt=this.cDt._B(s),this.Co(new wn(Bi.cq)),this.Zei()}Kei(){return this.Jei}Zei(){const t=this.cDt,i=t.U>0?t.jn(this.cDt.U-1):0;this.Jei!==i&&(this.Jei=i,this.Co(new ko(i)))}mq(i){if(!t.Rq(i))return!1;const e=En(i.HP);return this.lC===e.Rg}yq(t){return this.wC=t,this.lC=En(t.HP).Rg,pi(this.lC)?this.Hei=new N3(t.HP):this.Hei=void 0,Promise.resolve()}async Yei(t,i){if(this.$ei)throw new g("Attempted to start concurrent buffer mutation");const e=new Wr;e.Xd(this.KJ.Wd),i&&e.Xd(i);try{this.$ei=Promise.resolve(t(e.Wd)),await this.$ei}finally{this.$ei=void 0}}Ud(){this.Vo(),this.KJ.qd()}static Rq(t){switch(En(t.HP).Rg){case"audio/mp4":case"video/mp4":case D3:case S3:return!0;default:return!1}}constructor(t,i){super(),this.Jei=0,this.r9=!1,this.cDt=Ai.kB(),this.lDt=Ai.kB(),this.FW=30,this.RW=30,this.Fei=0,this.Hei=void 0,this.qei=new I3(this),this.$ei=void 0,this.Xei=new Ai([0,1/0]),this.KJ=new Wr,this.wC=t,this.lC=En(t.HP).Rg,pi(this.lC)&&(this.Hei=new N3(t.HP)),this.o$=i}},E3=class t extends Bo{get X$(){return this.i0}get Z$(){return this.e0}get wf(){return cx(this)}get a$(){var t,i,e,s;return(null!=(e=null==(t=this.i0)?void 0:t.a$)?e:Ai.kB())._B(null!=(s=null==(i=this.e0)?void 0:i.a$)?s:Ai.kB())}get wd(){return this.wC}get ct(){return this.XL}get Pq(){return(!this.i0||this.i0.Pq())&&(!this.e0||this.e0.Pq())}get t_(){return this.o0.v$().Sn(new Ai([0,this.ct],[!0,!0]))}get H4(){return this.tsi}Ud(){var t,i;return this.Vo(),null==(t=this.e0)||t.Ud(),null==(i=this.i0)||i.Ud(),this.i0=void 0,this.e0=void 0,this.XL=NaN,Promise.resolve()}n0(t){this.XL!==t&&(this.XL=t,this.Co(new ko(t)))}Kei(){let t=0;return this.i0&&(t=_.max(t,this.i0.Kei())),this.e0&&(t=_.max(t,this.e0.Kei())),t}a0(t,i,e,s){this.o0=new xs(t,i,Boolean(e),Boolean(s))}get rt(){throw new g("Not implemented")}n$(){this.i0&&this.i0.n$(),this.e0&&this.e0.n$(),this.isi()}qJ(){this.i0&&this.i0.qJ(),this.e0&&this.e0.qJ()}mq(i){if(!t.Rq(i))return!1;const e=Vt(i.u0,(t=>D(t.HP,"audio"))),s=Vt(i.u0,(t=>D(t.HP,"video")));return!(this.i0&&e&&!this.i0.mq(e))&&!(this.e0&&s&&!this.e0.mq(s))}async yq(t){this.wC=t;const i=Vt(t.u0,(t=>D(t.HP,"audio"))),e=Vt(t.u0,(t=>D(t.HP,"video")));this.i0?i?await this.i0.yq(i):(this.i0.Ud(),this.i0=void 0):i&&(this.i0=new zn(i,fi.Mm),this.i0.yn(Co.Xg,this.isi)),this.e0?e?await this.e0.yq(e):(this.e0.Ud(),this.e0=void 0):e&&(this.e0=new zn(e,fi.ym),this.e0.yn(Co.Xg,this.isi));const s=this.tsi;0===t.qP.length?this.tsi=void 0:s&&!t.qP.some((t=>t.cA===s))&&(this.tsi=t.qP[0].cA)}static Rq(t){return t.u0.every((t=>zn.Rq(t)))}constructor(t){var i;super(),this.i0=void 0,this.e0=void 0,this.XL=NaN,this.o0=new xs(0,1/0),this.tsi=void 0,this.isi=()=>{let t;t=this.Pq?this.Kei():_.max(this.XL||0,this.Kei()),this.n0(t)},this.wC=t;const e=Vt(t.u0,(t=>D(t.HP,"audio"))),s=Vt(t.u0,(t=>D(t.HP,"video")));e&&(this.i0=new zn(e,fi.Mm),this.i0.yn(Co.Xg,this.isi)),s&&(this.e0=new zn(s,fi.ym),this.e0.yn(Co.Xg,this.isi)),this.tsi=null==(i=t.qP[0])?void 0:i.cA}},b3=class{a4(t){return i.$d(t,16)}l4(t){i.Jd(t)}},L3=class extends Bo{get wf(){var t,i;return null!=(i=null==(t=this.FP)?void 0:t.wf)?i:Ai.kB()}get Mf(){return this.g2?this.g2.Mf:this.esi/1e3}get Iu(){return this.Wu}get ct(){var t,i;return this.g2?this.g2.ct:null!=(i=null==(t=this.FP)?void 0:t.ct)?i:NaN}get Sf(){return this.g2?this.g2.Sf:this.D0}get lt(){}get Cf(){return!1}get ssi(){return this.FP}get zf(){return this.g2?this.g2.zf:this.OB}set zf(t){this.g2?this.g2.zf=t:this.OB!==t&&(this.OB=t,this.Co(new Pc(this.Mf,this._k)))}get Ff(){return this.g2?this.g2.Ff:this.jB}get Gf(){return this.g2?this.g2.Gf:this.PB}set Gf(t){this.PB!==t&&(this.Yn(),this.PB=t,this.Co(new Qe(this.Mf,t)))}get Jf(){return this.S0}get t_(){var t;return(null==(t=this.FP)?void 0:t.t_)||Ai.kB()}get e_(){return this.g2?this.g2.e_:this.CB}get T0(){return this.g2?this.g2.T0:this.N0}get O0(){return!1}get YP(){}get c_(){return this.g2?this.g2.c_:this._k}set c_(t){this.g2?this.g2.c_=t:this._k!==t&&(this._k=t,this.Co(new Pc(this.Mf,t)))}get Af(){}get Ti(){return this.Wu._u}get Hf(){let t=this.Uo;return!this.g2&&this.VJt&&(t=t._B(new Ai([this.QJt,this.Mf]))),t}get L2(){return this.tB}get ji(){return this.Wu.ku}get ya(){return this.zB}get h5(){return!0}get vv(){return XL}Pf(){return{vT:0,AT:0,mT:0,pT:0,yT:0,MT:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}Rq(t){for(const i of t)if(i.Rg===Au.KC&&E3.Rq(i))return i}async Ud(){this.Vo(),await this.tr(),this.SI.gn()}$n(t){if(t.Rg===Au.KC){const e=new E3(t);this.nsi(e),this.FP=e,i.$d((()=>{this.FP===e&&(this.Co(new sk),this.Yn())}),0);const s=new fU(e);return s.Met=this,Promise.resolve(s)}return Promise.reject(new g("Unsupported configuration"))}m_(){this.g2?this.g2.m_():this.rsi(),this.Yn()}rsi(){this.jB=!0,void 0!==this.hsi&&(i.R$(this.hsi),this.hsi=void 0),this.Co(new hs(this.Mf))}async p_(){const t=this.lf(Zt.Rw);this.g2?this.g2.p_():this.osi(),await t}osi(){this.jB&&(this.Yn(),this.jB=!1,this.D0&&(this.esi=0),this.Co(new Gt(this.Mf)),this.Yn(),void 0===this.hsi&&(this.hsi=i.z$(this.asi,20)))}async tr(){void 0!==this.hsi&&(i.R$(this.hsi),this.hsi=void 0),this.FP&&(await this.FP.Ud(),this.FP=void 0),this.Co(new ko(NaN)),this.esi=0,this.QJt=0,this.usi=-1/0,this.D0=!1,this.Uo=Ai.kB(),this.VJt=!1,this.N0=!1,this.Co(new Dr(0,void 0)),this.CB&&(this.CB=!1,this.Co(new yi(0))),this.jB||(this.Co(new hs(0)),this.jB=!0),1!==this.PB&&(this.PB=1,this.Co(new Qe(0,1))),this.S0!==Mw.uT&&(this.S0=Mw.uT,this.Co(new _e(0,Mw.uT)))}Em(t,i,e){if(void 0===i&&(i=!1),void 0===e&&(e=!1),this.g2)return void this.g2.Em(t,i,e);this.Uo=this.Hf;const s=this.FP?this.FP.t_.uB(t):t;this.QJt=s,this.esi=1e3*s,this.M0=i,e&&!this.CB?(this.N0=!0,this.Co(new vs(s))):(this.N0=!1,this.CB=!0,this.Co(new ri(s))),this.Yn()}be(){this.tB=!1}get nt(){return this.SI.nt}get Ol(){return this.YB}DI(t,i,e,s,n,r,h,o){return this.SI.DI(t,i,e,s,n,r,h,o)}tz(){return!1}ez(){throw new g("Sideloaded native text tracks are not supported")}CI(t){this.SI.CI(t)}nz(){this.SI.tr()}PP(){}ge(){this.tB=!0}a5(){}n5(){this.g2||(void 0!==this.hsi&&(i.R$(this.hsi),this.hsi=void 0),this.Uo=this.Hf,this.g2=px(this),this.g2.yn(Ax,this.Ds))}r5(){if(!this.g2)return;const t=this.g2;this.g2=void 0,yx(this,t),t.Ud(),this.Yn(),this.jB||void 0!==this.hsi||(this.hsi=i.z$(this.asi,20))}get r_(){return 0}get a_(){return 0}get lz(){return this.JP}set lz(t){this.JP=t}get H4(){var t;return null==(t=this.FP)?void 0:t.H4}Yn(){var t,e;if(this.g2)return;const s=i.Kd(),n=S(this.lsi)?0:s-this.lsi;this.lsi=s;let r=!1;var h;const o=null!=(h=null==(t=this.FP)?void 0:t.wf)?h:Ai.kB();var a;const u=null!=(a=null==(e=this.FP)?void 0:e.a$)?a:Ai.kB();this.jB||(this.esi=this.dsi(n,o,u));const c=TU(o,u).aB().Mv(this.Mf);var l;const d=1e3*_.min(null!=(l=null==c?void 0:c.jn(0))?l:0,this.ct);this.fsi<d&&(this.fsi=d,this.Co(new Wa(this.Mf)));const f=this._si(c,d);f!==this.S0&&(this.S0=f,this.Co(new _e(this.Mf,this.S0))),r=this.gsi(r),this.PJt(),r=this.JW(r),!r&&this.VJt&&this.usi+250<s&&(r=!0,this.Co(new Dr(this.Mf,void 0))),r&&(this.usi=s)}dsi(t,i,e){let s=this.esi,n=t*this.PB;const r=1e3*this.ct;for(;;){const t=e.Mv(s/1e3);if(void 0!==t&&i.gr(t.jn(0))&&(s=1e3*t.jn(0)),(this.CB||this.N0)&&this.M0){const t=s/1e3,e=dx(i,t,1);if(e!==t){s=1e3*e;break}}if(this.CB||this.N0)break;if(n<=0)break;const h=i.Mv(s/1e3);if(void 0===h)break;{const t=_.min(1e3*h.jn(0),r),i=_.min(n,t-s);if(!(i>0))break;s+=i,n-=i}}return s}_si(t,i){return this.FP?t?this.FP&&this.FP.Pq&&i===1e3*this.FP.ct?this.esi===i?Mw.cT:Mw.dT:this.esi===i?Mw.cT:Mw.lT:Mw.Xn:Mw.uT}gsi(t){let i=t;if(this.S0>=Mw.cT){const t=this.CB,e=this.N0;this.CB=!1,this.N0=!1,i||!t&&!e||(i=!0,this.Co(new Dr(this.Mf,void 0))),t?this.Co(new yi(this.Mf)):e&&this.Co(new ju(this.Mf))}return i}PJt(){const t=this.VJt,i=this.wsi();!t&&i?(this.VJt=!0,this.Co(new Oe(this.Mf))):t&&!i&&(this.Uo=this.Hf,this.VJt=!1)}wsi(){return!this.e_&&!(this.Ff||this.Sf||this.lt||this.C0())}C0(){return this.Jf<Mw.lT}JW(t){let i=t;return this.FP&&this.FP.Pq&&this.Mf===this.ct?this.D0||(this.D0=!0,i||(i=!0,this.Co(new Dr(this.Mf,void 0))),this.rsi(),this.Co(new jn(this.Mf))):this.D0=!1,i}nsi(t){var i,e;null==(i=t.Z$)||i.yn(Bi.cq,this.vsi),null==(e=t.X$)||e.yn(Bi.cq,this.vsi),t.yn(Co.Xg,this.Asi)}constructor(){super(),this.g2=void 0,this.JP=void 0,this.esi=0,this.Wu=new CS,this.D0=!1,this.zB=new Ba,this.fsi=0,this.QJt=0,this.usi=-1/0,this.lsi=NaN,this.FP=void 0,this.OB=!1,this.jB=!0,this.PB=1,this.Uo=Ai.kB(),this.VJt=!1,this.S0=Mw.uT,this.CB=!1,this.M0=!1,this.N0=!1,this.YB=new gO,this.hsi=void 0,this.tB=!0,this._k=1,this.asi=()=>{this.Yn()},this.vsi=()=>{this.Yn()},this.Asi=()=>{this.g2||(this.Yn(),this.Co(new ko(this.FP.ct)))},this.SI=new aU(this,new b3)}},k3=class{async msi(t){this.yRt&&await this.yRt,this.psi.cBt||await this.psi.wBt(t),void 0===this.ysi&&this.Msi(),await this.psi.NBt(this.ysi,t)}Msi(){for(const t of this.psi.Tr.cOt)0!==t.dOt.length&&(this.ysi=t.dOt[0])}get nt(){return this.KFt.nt}gn(){var t;this.N7.fn(Co.lw,this.Tsi),null==(t=this.NRt)||t.qd(),this.psi.Ud()}constructor(t,i,e,s){this.Tsi=()=>{this.yRt=this.msi(this.NRt.Wd).catch(this.Nsi)},this.Nsi=t=>{0},this.N7=t;const n=new zJ,r=new L3;this.psi=new Nn(e,n,!1,i,void 0),this.KFt=new Cl(this.psi,r),this.NRt=new Wr,this.NRt.Xd(s),this.N7.yn(Co.lw,this.Tsi)}};function x3(t){return t&&t.integration===Pu.THEOADS}function C3(t){const i=h.createElement("div"),e=h.createElement("div");return function(t,i){let e;for(;Po(e=t.firstChild);)i.appendChild(e)}(t,i),Pi(t,"theo-ads-sgai-container"),Pi(i,"theo-ads-sgai-content-player"),Pi(e,"theo-ads-sgai-ad-player"),t.appendChild(i),t.appendChild(e),{contentElement:i,adElement:e}}function O3(t){const i=t.style;i.display="flex",i.backgroundColor="transparent",i.backgroundRepeat="no-repeat",i.backgroundAttachment="scroll",i.border="0 solid transparent",i.borderWidth="0px",i.flex="0"}function j3(t){const i=t.style;i.display="",i.backgroundColor="",i.backgroundRepeat="",i.backgroundAttachment="",i.border="",i.borderWidth="",i.flex="",i.transform="",i.transition="",i.backgroundImage="",i.backgroundSize="",i.backgroundPosition=""}Ur.Lb.wR(new class{get y0t(){return Qn.C7}gR(t){return x3(t)}M0t(t,i,e){}a4(t,i,e,s){}jQ(t){const i={integration:Pu.THEOADS,adTagParameters:Ut(t.adTagParameters)?t.adTagParameters:{},useId3:Boolean(t.useId3)};return Qs(t.sources)&&(i.sources=cs(t.sources)),Qs(t.networkCode)&&(i.networkCode=cs(t.networkCode)),Qs(t.customAssetKey)&&(i.customAssetKey=cs(t.customAssetKey)),Qs(t.backdropDoubleBox)&&(i.backdropDoubleBox=cs(t.backdropDoubleBox)),Qs(t.backdropLShape)&&(i.backdropLShape=cs(t.backdropLShape)),Qs(t.overrideLayout)&&(i.overrideLayout=function(t){switch(t){case"single":case"l-shape":case"double":case"single-if-mobile":return t;default:return}}(t.overrideLayout)),Qs(t.overrideAdSrc)&&(i.overrideAdSrc=cs(t.overrideAdSrc)),i}});var P3=class{get Dsi(){return this.Ssi}Isi(t){if(!qo(this.Esi,t)){this.Esi.push(t);for(const i of t.og)this.bsi(i);t.yn(Ud.L_,this.Hn),t.yn(Ud.x_,this.qn)}}Lsi(t){if(qo(this.Esi,t)){Qr(this.Esi,t),t.fn(Ud.L_,this.Hn),t.fn(Ud.x_,this.qn);for(const i of t.og)this.ksi(i)}}bsi(t){!this.xsi&&function(t){return t.zt===Mi.Dm&&t.Rg===Wt.DATE_RANGE}(t)&&this.Csi!==t?this.Osi(t):this.xsi&&function(t){return t.zt===Mi.Dm&&t.Rg===Wt.ID3}(t)&&this.jsi!==t&&this.Psi(t)}ksi(t){this.Csi===t?this.Osi(void 0):this.jsi===t&&this.Psi(void 0)}Osi(t){const i=this.Csi;if(void 0!==i){if(i.L)for(const t of i.L.og)this.zsi(t);i.fn(qt.O_,this.Bsi),i.fn(qt.B_,this.Rsi),i.fn(qt.U_,this.Usi),i.fn(qt.P_,this.xei),i.jg=Or.Pg}if(this.Csi=t,void 0!==t){if(t.L)for(const i of t.L.og)this.Qsi(i);t.yn(qt.O_,this.Bsi),t.yn(qt.B_,this.Rsi),t.yn(qt.U_,this.Usi),t.yn(qt.P_,this.xei),t.jg=Or.Pg}}Psi(t){const i=this.jsi;if(void 0!==i){if(i.L)for(const t of i.L.og)this.zsi(t);i.fn(qt.O_,this.Fsi),i.fn(qt.U_,this.Usi),i.fn(qt.P_,this.xei),i.jg=Or.Pg}if(this.jsi=t,void 0!==t){if(t.L)for(const i of t.L.og)this.Ysi(i);t.yn(qt.O_,this.Fsi),t.yn(qt.U_,this.Usi),t.yn(qt.P_,this.xei),t.jg=Or.Pg}}Qsi(t){if("com.theoplayer.theoads.interstitial"!==t.kOt)return;if(!t.OOt["X-ASSET-URI"])return void 0;const i=t.OOt["X-RESUME-OFFSET"],e=new f3({o:t.o,VT:t.VT,mAt:t.OOt["X-ASSET-URI"],fei:this.Gsi||Vo[t.OOt["X-COM-THEOPLAYER-THEOADS-LAYOUT"]]||Vo.SINGLE,_ei:t.OOt["X-COM-THEOPLAYER-THEOADS-BACKDROP"],WT:isFinite(t.WT)?t.WT:void 0,ct:t.ct,COt:t.COt,lei:void 0!==i?Number(i):void 0});this.Vsi(e,t)}Ysi(t){const i=t.O;if(!function(t){return"GEO"===t.id||"GEOB"===t.id}(i)||!function(t){return"Anvatos"===t.description&&"application/json"===t.mimeType}(i))return;const e=so(new DataView(i.data),new _s),s=new gB(e),n=s.get("type");if("cue"===n){let i=Number(s.get("duration"))/1e3||void 0;const e=new gB(s.get("payload")),n=Number(e.get("dur"))||void 0,r=Number(e.get("s_bd"))||void 0;if(void 0!==n?i=n:void 0!==r&&(i=r/10),!i)return void 0;const h="theo-ads://dai.break/?d="+i,o=new f3({o:t.o,VT:t.VT,mAt:h,fei:this.Gsi||Vo.SINGLE,COt:i});this.Vsi(o,t)}else if("cue_end"===n){const i=this.Wsi;i&&i.Yn({ct:t.VT-i.VT})}}Hsi(t){this.qsi.get(t.Mg)&&this.Zsi.Xsi(t.VT)}Vsi(t,i){this.Ssi.push(t),this.qsi.set(i.Mg,t),this.Wsi=t,this.Zsi.Vsi(t)}Ksi(t){const i=this.qsi.get(t.Mg);if(void 0===i)return;const e=t.OOt["X-RESUME-OFFSET"];i.Yn({ct:t.ct,WT:isFinite(t.WT)?t.WT:void 0,lei:void 0!==e?Number(e):void 0})}zsi(t){this.Jsi(t)}Jsi(t){const i=this.qsi.get(t.Mg);void 0!==i&&(Qr(this.Ssi,i),this.qsi.delete(t.Mg),this.Zsi.$si(i))}gn(){this.Wsi=void 0,this.Osi(void 0),this.Psi(void 0);for(const t of this.Esi.slice())this.Lsi(t);No(this.Esi),No(this.Ssi),this.qsi.clear()}constructor(t){this.xsi=!1,this.Ssi=[],this.qsi=I(),this.Esi=[],this.Hn=t=>{this.bsi(t.Lt)},this.qn=t=>{this.ksi(t.Lt)},this.Bsi=t=>{this.Qsi(t.GT)},this.Fsi=t=>{this.Ysi(t.GT)},this.Usi=t=>{this.Hsi(t.GT)},this.xei=t=>{this.zsi(t.GT)},this.Rsi=t=>{this.Ksi(t.GT)},this.Zsi=t}};var z3=class extends Ft{EKt(){var t;return null==(t=this.tni)?void 0:t.getAdSystem()}Y7(){var t;return null!=(t=this.Xa)?t:this.fa()}kKt(){return this.BWt.ini.mAt}fa(){return E1(this)}get o(){var t;return null==(t=this.tni)?void 0:t.getAdId()}get duration(){var t;return null==(t=this.tni)?void 0:t.getDuration()}get gHt(){var t,i;return null==(i=this.tni)||null==(t=i.ttt)?void 0:t.clickThroughUrl}get RWt(){var t;return null==(t=this.tni)?void 0:t.getCreativeId()}get VHt(){var t;return null==(t=this.tni)?void 0:t.getSkipTimeOffset()}get bXt(){return Qn.C7}constructor(t,i){super(i,function(t){return t===Vo.LSHAPE_CONTENT?lo.Vqt:lo.Gqt}(i.ini.fei)),this.tni=t,this.BWt=i,this.o1t=void 0===t}};var B3=class extends S1{eni(t){this.Ic.push(t)}get Hf(){return this.sni.Hf}get bXt(){return Qn.C7}get lKt(){var t;return null!=(t=this.sni.ct)?t:-1}get Tjt(){return this.sni.VT}get UZt(){}get ini(){return this.sni}constructor(t){var i;super(t.VT),this.sni=t,this.dKt=null!=(i=this.sni.ct)?i:-1}},R3=class{get b0t(){return this.W1t}get B0t(){return void 0!==this.RKt}get D0t(){return Qn.C7}get F7(){return this.bKt?[this.bKt]:[]}get G7(){var t;return null!=(t=this.RKt)?t:null}get V7(){return A(this.UKt,(t=>{const i=t.Oc;if(t===this.RKt&&void 0!==this.bKt){const t=i.indexOf(this.bKt);if(t>=0)return i.slice(t+1)}return t.Hf?[]:i}))}get W7(){return this.UKt.filter((t=>t===this.RKt||!t.Hf))}qm(){}att(t){}Vsi(t){const i=new B3(t);this.UKt.push(i)}$si(t){const i=this.z1t(t);Qr(this.UKt,i)}bei(t){switch(this.RKt&&(this.RKt.dKt=this.Q1t.Td()-this.Q1t.Tf()),t.type){case google.ima.dai.api.StreamEvent.Type.ERROR:this.W1t.Co(new ln(Xr.GENERAL));break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED:{const t=this.nni.Tf();let e=Vt(this.UKt,(i=>{const e=i.Tjt,s=e+i.dKt;return e<t&&t<s}));e||(e=this.UKt[0]),this.RKt=e,this.W1t.Co(new ea(this.RKt)),this.rni=i.$d(this.hni,250);break}case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:i.Jd(this.rni);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.RKt.dKt>1&&this.hni();break;case google.ima.dai.api.StreamEvent.Type.STARTED:{const i=t.getAd(),e=new z3(i,this.RKt);this.RKt.eni(e),this.bKt=e,this.W1t.Co(new js(this.bKt,this.nni.Tf()));break}case google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE:this.W1t.Co(new Ze(this.bKt,this.nni.Tf()));break;case google.ima.dai.api.StreamEvent.Type.MIDPOINT:this.W1t.Co(new R1(this.bKt,this.nni.Tf()));break;case google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE:this.W1t.Co(new Q1(this.bKt,this.nni.Tf()));break;case google.ima.dai.api.StreamEvent.Type.COMPLETE:this.W1t.Co(new Jh(this.bKt,this.nni.Tf())),this.bKt=void 0;break;case google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED:this.oni()}}z1t(t){return Vt(this.UKt,(i=>i.ini===t))}gn(){return void 0!==this.RKt&&(this.RKt=void 0),this.bKt=void 0,No(this.UKt),Promise.resolve(void 0)}constructor(t,i){this.W1t=new Yu,this.UKt=[],this.RKt=void 0,this.bKt=void 0,this.hni=()=>{const t=new z3(void 0,this.RKt);this.RKt.eni(t),this.bKt=t,this.W1t.Co(new js(this.bKt,this.nni.Tf())),this.Q1t.yn(Co.Jg,this.oni)},this.oni=()=>{this.Q1t.fn(Co.Jg,this.oni),this.RKt&&(this.bKt&&(this.W1t.Co(new Jh(this.bKt,this.nni.Tf())),this.bKt=void 0),this.W1t.Co(new Ji(this.RKt)),this.RKt=void 0)},this.nni=t,this.Q1t=i}},U3=class{ani(t){this.theoAdsPlayer.uni(t)}get va(){return function(t){return{replaceAdTagParameters(i){t.ani(i)}}}(this)}constructor(t){this.theoAdsPlayer=t}},Q3=class extends N1{get X7(){return this.cni}a4(t,i,e){var s;null==(s=this.N7.Oc)||s.a4(t,i,e)}constructor(t,i,e){super(e),this.cni=new U3(t),this.N7=i;for(const t of Ur.Lb.dR){const e=i.Oc.j0t.p0t(t.y0t);void 0!==e&&this.j0t.T0t(e)}}},F3=class extends Wn{async ga(t,i){var e,s,n;this.lni(),fo(i),await super.ga(t,i);const r=null==(e=this.N7.bt)?void 0:e.src;if(void 0===r||void 0===t||void 0===t.ads)return;const h=Vt(t.ads,x3);void 0!==h&&(this.dni(),this.fni(),this._ni=h,this.gni=h.backdropDoubleBox,this.wni=h.backdropLShape,this.vni.Gsi=function(t){switch(t){case"single":return Vo.SINGLE;case"l-shape":return Vo.LSHAPE_AD;case"double":return Vo.DOUBLE;case"single-if-mobile":return f.Qs?Vo.SINGLE:void 0;default:return}}(h.overrideLayout),this.Ani=h.networkCode,this.mni=h.customAssetKey,this.pni=h.overrideAdSrc,void 0!==h.networkCode&&void 0!==h.customAssetKey&&this.yni.yq(h.networkCode,h.customAssetKey,this.Mni).catch((t=>{0})),this.Tni(),null==(s=this.Oc)||s.yn("ntt",this.Nni),null==(n=this.Oc)||n.yn("htt",this.Dni),this.vni.xsi=h.useId3,this.vni.Isi(this.N7.nt),void 0!==h.sources&&this.Sni(h.sources+r),this.Ini(new c3(this.N7,this.Q1t)))}Sni(t){this.Eni=new Wr,this.bni=new k3(this.N7,t,this.N7.AO,this.Eni.Wd),this.vni.Isi(this.bni.nt)}lni(){var t;void 0!==this.bni&&(this.vni.Lsi(this.bni.nt),null==(t=this.Eni)||t.qd(),this.Eni=void 0,this.bni.gn(),this.bni=void 0)}dni(){this.Lni||(this.Lni=!0,SM(this.kni),SM(this.xni),O3(this.Us),O3(this.kni),O3(this.xni))}Cni(){this.Lni&&(this.Lni=!1,j3(this.Us),j3(this.kni),j3(this.xni),gn(this.kni),gn(this.xni))}A_(){this.N7.A_(),this.Q1t.A_()}S7(){return this.N7.r7}Df(){return this.Us}get Oc(){return this.Oni}get Mni(){var t,i,e;return null!=(e=null!=(i=this.jni)?i:null==(t=this._ni)?void 0:t.adTagParameters)?e:{}}uni(t){this.jni=t}Ini(t){var i;void 0!==this.Pni&&(this.Pni.ar(this.we,this.kni,this.xni),this.Pni.gn());const e=null!=(i=this.Pni)?i:this,s=null!=t?t:this.N7;a3(e,s),null==t||t.ur(this.we,this.kni,this.xni,e),this.Pni=t,this.wT(s)}Tni(){this.N7.yn(Co.Iw,this.zni),this.N7.yn(Co.yw,this.yU),this.N7.yn(Co.gw,this.yI)}Bni(){this.N7.fn(Co.Iw,this.zni),this.N7.fn(Co.yw,this.yU),this.N7.fn(Co.gw,this.yI)}Rni(){this.Q1t.yn(Co.gw,this.Uni),this.Q1t.yn(Co.Iw,this.Qni),this.Q1t.yn(Co.Jg,this.Fni),this.N7.yn(Co.lw,this.Tsi)}Yni(){this.Q1t.fn(Co.gw,this.Uni),this.Q1t.fn(Co.Iw,this.Qni),this.Q1t.fn(Co.Jg,this.Fni),this.N7.fn(Co.lw,this.Tsi)}Gni(){void 0!==this.Vni&&this.Q1t.Tf()>=this.Vni.ct&&this.J$t()}Xsi(t){this.Wni(t),this.Hni(t),this.qni(t)}Wni(t){let i;for(const e of this.vni.Dsi){if(e.Hf)continue;const s=e.uei;void 0!==s&&t>=s?e.Hf=!0:void 0!==i&&i.VT<e.VT||(i=e)}this.Vni!==i&&(this.Vni=i,this.Xni())}Xni(){var t;null==(t=this.Zni)||t.qd(),this.Kni=void 0,this.Jni=void 0}Hni(t){if(void 0===this.Vni||void 0!==this.Kni)return;let i=!1;const e=Ai.xn(this.N7.vf()).Mv(t);void 0!==e&&(i=e.jn(0)>=this.Vni.VT);const s=this.Vni.uei,n=t>=this.Vni.VT&&(void 0===s||t<s);(i||n)&&(this.Zni=new Wr,this.Kni=this.$ni(this.Vni,t,this.Zni.Wd).catch((t=>{0})))}async $ni(t,e,s){if(this.pni||!D(t.mAt,"theo-ads://dai.break")){var n;const i=null!=(n=this.pni)?n:t.mAt;return void await this.yni.Dei(i,s)}const r=i.Dh(t.mAt),h=r.searchParams.get("n"),o=r.searchParams.get("k"),a=Yt({},this.Mni);a.cust_params=function(t,i){const e="theoads_slot="+function(t){switch(t){case Vo.DOUBLE:return"double";case Vo.SINGLE:return"single";case Vo.LSHAPE_AD:case Vo.LSHAPE_CONTENT:return"l-shape"}}(i);if(!t)return e;if(-1===t.indexOf("theoads_slot="))return e.concat("&").concat(t);return t.replace(/theoads_slot=(.*)(&?)/,e)}(a.cust_params,t.fei),h&&h!==this.Ani&&o&&o!==this.mni?(this.Ani=h,this.mni=o,await this.yni.yq(h,o,a),fo(s)):this.yni.updateAdTagParameters(a);const u=Number(r.searchParams.get("d")),c=_.min(u,this.Vni.uei-e);await this.yni.Iei(c,s)}qni(t){if(void 0===this.Vni||void 0!==this.Jni)return;const i=this.Vni.uei;var e;t>=this.Vni.VT&&(void 0===i||t<i)&&(this.Jni=null==(e=this.Kni)?void 0:e.then((()=>this.tri())))}tri(){if(void 0===this.Vni)return;const t=this.Vni.fei,i=this.iri(t,this.Vni._ei);this.Ini(i),this.Bni(),this.Rni(),this.Jni=void 0}iri(t,i){switch(t){case Vo.DOUBLE:return new A3(this.N7,this.Q1t,null!=i?i:this.gni);case Vo.LSHAPE_AD:return new y3(this.N7,this.Q1t,null!=i?i:this.wni);case Vo.LSHAPE_CONTENT:return new p3(this.N7,this.Q1t,null!=i?i:this.wni);case Vo.SINGLE:default:return new l3(this.N7,this.Q1t)}}eri(){var t,i;const e=null==(t=this.Vni)?void 0:t.uei;if(void 0===e||(null==(i=this.Pni)?void 0:i.nei())||M(this.N7.Tf(),e,.001))return;const s=Ai.xn(this.Q1t.vf()),n=this.Q1t.i_();s.aB().gr(n.end(n.length-1))&&this.N7.Nf(e,{Njt:!0})}J$t(){void 0!==this.Vni&&(this.N7.Nf(this.Vni.uei,{Njt:!0}),this.Ini(new c3(this.N7,this.Q1t)),this.Yni(),this.Tni(),this.Vni=void 0)}Vsi(t){this.Lei.Vsi(t),this.Wni(this.N7.Tf())}$si(t){this.Lei.$si(t)}Ef(){var t;return null!=(t=this.qB)?t:super.Ef()}Lf(){var t;return null!=(t=this.BP)?t:super.Lf()}bz(t){void 0===this.Lf()&&(this.BP=t,this.qB=tn(t),this.Co(new Eo(t)))}async y_(){var t,i;this.Ani=void 0,this.mni=void 0,this.pni=void 0,this.BP=void 0,this.qB=void 0,this.Vni=void 0,this.sri=!0,this.vni.Lsi(this.N7.nt),this.Bni(),this.Yni(),null==(t=this.Oc)||t.fn("ntt",this.Nni),null==(i=this.Oc)||i.fn("htt",this.Dni),this.lni(),this.Ini(void 0),await this.Q1t.y_(),this.Xni(),await this.yni.tr(),this.Cni(),await super.y_()}async gn(){await this.y_().catch(na),this.Ini(void 0),this.vni.gn(),await this.Q1t.gn(),await super.gn()}E_(t){if(void 0!==this.Pni)switch(t.type){case Zt.Rw:if(!this.sri)return!0;this.sri=!1;break;case Co.jh:case Zt.Bw:this.sri=!0}return super.E_(t)}constructor(t){super(t),this.BP=void 0,this.qB=void 0,this.sri=!0,this.Lni=!1,this.Nni=t=>{const i=t.ttt.Y7().clickThrough;void 0!==i&&""!==i&&(this.XJt=new H0(this.we),this.XJt.sJt=i,this.XJt.yn("clickstart",this.ZJt))},this.ZJt=()=>{this.m_()},this.Dni=()=>{this.XJt&&(this.XJt.Ud(),this.XJt=void 0)},this.zni=t=>{this.Xsi(t.currentTime)},this.yU=t=>{this.Xsi(t.currentTime)},this.yI=t=>{this.Hni(t.currentTime)},this.Uni=t=>{this.eri()},this.Qni=t=>{this.Gni()},this.Tsi=t=>{this.eri()},this.Fni=t=>{this.Vni.Hf=!0,this.J$t()},this.fni=async()=>{try{await this.v7.uF([Ga.THEOADS])}catch(t){await this.y_().catch(na),this.bz(h_(t,Ui.LICENSE_INVALID_FEATURE))}},this.Us=t.we;const{contentElement:i,adElement:e}=C3(this.Us);this.kni=i,this.xni=e,gn(this.kni),gn(this.xni),this.N7=t,this.Q1t=new G1(new oP(this.xni,t.wd,new aS),Ur.Lb),this.Lei=new R3(this,this.Q1t),this.yni=new w3(this.Q1t,this.Lei),this.vni=new P3(this),this.Oni=new Q3(this,t,t),this.Oni.utt(this.Lei)}},Y3=class extends cc{ga(t,i){var e;return void 0!==Vt(null!=(e=null==t?void 0:t.ads)?e:[],x3)?Promise.reject(new Rs(Ui.CONFIGURATION_ERROR,"THEOads must be enabled in the player configuration.")):super.ga(t,i)}};lP((t=>t.wd.ads.theoads?new F3(t):new Y3(t)),Zo.C7);var G3=class extends Bo{get vH(){return this.glt===nc.CONNECTED}get glt(){return this.ja}get va(){return this.Xa||(this.Xa=function(t){return{get casting(){return t.vH},get state(){return t.glt},start(){t.T_()},stop(){t.N_()},addEventListener(i,e){const s=Ko(i,cs);t.yn(s,e)},removeEventListener(i,e){const s=Ko(i,cs);t.fn(s,e)}}}(this)),this.Xa}nri(){this.rri(),this.Pgt.yn(Co.lo,this.hri),i.Ys.$tt&&this.Ta(nc.AVAILABLE)}preloadPlayer(t){if(fo(t),this.Qo.Jf<Mw.Xn){const i=this.Qo.lf(Zt.zw,t);return this.Qo.Xf=Le.Dm,i}return Promise.resolve()}Ta(t){t!==this.ja&&(this.ja=t,this.Co(new l1(this.ja)))}async ari(t){await this.preloadPlayer(t),this.DW.T_()}N_(){i.Ys.$tt&&this.Qo.N_()}gn(){this.Vo(),this.Pgt.fn(Co.lo,this.hri),this.cri.qd()}constructor(t,i){super(),this.Xa=void 0,this.ja=nc.UNAVAILABLE,this.cri=new Wr,this.handleAirplayChangedEvent=()=>{this.Qo&&this.Qo.Cf?this.lri():this.glt===nc.CONNECTED&&this.dri()},this.Pgt=t,this.DW=i}},V3=class extends G3{rri(){this.Qo&&this.Qo.fn(Co.Qg,this.handleAirplayChangedEvent),this.fri?this.Qo=this.DW:this.Qo=this._ri,this.Qo.yn(Co.Qg,this.handleAirplayChangedEvent)}get fri(){return this.DW.M_()}async lri(){if(this.Qo){if(this.fri){if(!this.Qo.Ff){const t=new Promise((t=>u(t,800))),i=this.Qo.lf(Co.Sh,this.cri.Wd);await Promise.race([i,t])}this.Qo.p_()}else{this.gri=this.DW.Mf,this.wri=this.DW.Af,this._ri.yn(Co.Iw,this.handleAirplayPlayerTimeUpdate),this.vri=this.DW.fg,this.DW.fg=this._ri,this.vri.m_(),this.vri.be(),this._ri.ge(),this._ri.zf=this.vri.zf,this._ri.Gf=this.vri.Gf,this._ri.c_=this.vri.c_;const t=this._ri.lf(Co.pw);this._ri.Mf=this.vri.Mf,await t,this._ri.p_(),this._ri.zf=this.vri.zf,this._ri.Gf=this.vri.Gf,this._ri.c_=this.vri.c_}this.Ta(nc.CONNECTED)}}dri(){if(this.vri){this._ri.fn(Co.Iw,this.handleAirplayPlayerTimeUpdate),this.vri.zf=this._ri.zf,this.vri.Gf=this._ri.Gf,this.vri.c_=this._ri.c_;f.ZE&&!f.Ga&&this.DW.ct===1/0?this.wri?this.vri.Af=this.wri:this.vri.Mf=1/0:this.vri.Mf=this.gri,this.wri=void 0,this.gri=void 0,this.vri.ge(),this._ri.be(),this._ri.Ff||this.vri.p_(),this.DW.fg=this.vri,this._ri.tr(),this.vri=void 0}else this.Qo&&(this.Qo.Mf=this.Qo.Mf+1e-4);this.Ta(nc.AVAILABLE)}T_(){i.Ys.$tt&&(this.Pgt.A_(),this.cri.qd(),this.cri=new Wr,this.fri?ha(this.ari(this.cri.Wd)):ha(this.Ari(this.cri.Wd)))}async Ari(t){try{await this._ri.tr();const i=this.DW.Wa();if(void 0===i)throw new g("Not possible to start Airplay without a source");await this._ri.ga(i,t);const e=this._ri.lf(Zt.Rw,t);this._ri.p_(),await Bd(e,3e3),this._ri.m_(),fo(t),this._ri.T_()}catch(t){if(ut(t))return;0}}gn(){var t;super.gn(),this.DW.DT(this._ri),null==(t=this._ri)||t.gn()}constructor(t,e,s){super(t,e),this.hri=()=>{var t;const e=null==(t=this.DW.Wa())?void 0:t.sources.filter(Sw);i.Ys.$tt&&(null==e?void 0:e.some(yN))?this.Ta(nc.AVAILABLE):this.Ta(nc.UNAVAILABLE)},this.handleAirplayPlayerTimeUpdate=t=>{this.gri=t.currentTime,this.wri=this.DW.Af},this._ri=s,this._ri.be(),e.NT(s),this.nri()}},W3=class extends dt{S_(){this.pri.S_()}get ht(){return this.pri.ht}get wf(){return this.pri.wf}get bt(){return this.Wz}get Mf(){return this.pri.Mf}set Mf(t){this.Nf(t)}Nf(t,i){this.pri.Nf(t,i)}get Af(){return this.pri.Af}get ct(){return this.pri.ct}get we(){return this.Us}get Sf(){return this.pri.Sf}get lt(){return this.pri.lt}get bf(){return this.pri.bf}get kf(){return this.pri.kf}get Cf(){return this.pri.Cf}get g_(){return this.pri.g_}get f_(){return this.pri.f_}get jf(){return this.pri.jf}get zf(){return this.pri.zf}set zf(t){this.pri.zf=t}get Uf(){return this.pri.Uf}get Ff(){return this.pri.Ff}get Gf(){return this.pri.Gf}set Gf(t){this.pri.Gf=t}get Hf(){return this.pri.Hf}get Xf(){return this.pri.Xf}set Xf(t){this.pri.Xf=t}get Jf(){return this.pri.Jf}get t_(){return this.pri.t_}get e_(){return this.pri.e_}M_(){return this.pri.M_()}T_(){this.pri.T_()}N_(){this.pri.N_()}get nt(){return this.pri.nt}get r_(){return this.pri.r_}get a_(){return this.pri.a_}get rt(){return this.pri.rt}get c_(){return this.pri.c_}set c_(t){this.pri.c_=t}p_(){ha(this.pri.p_())}m_(){this.pri.m_()}async y_(){}Wa(){return this.bc}async ga(t,i){let e;if(fo(i),this.bc=t,li(t.sources))e=Qu({src:""});else{const i=t.sources.filter(Sw);for(const t of i)if(yN(t)){e=t;break}}if(!e)throw new g("Unsupported source.");await this.pri.ga(e,t,i),this.iB(e)}iB(t){this.Wz!==t&&(this.Wz=t,this.Co(new V(t)))}v_(){return this.pri.v_()}gf(){return[]}A_(){this.yri.RB()}ur(t){Cw(this,t)}ar(){}I_(t){return!1}D_(){this.pri.D_()}async tr(){this.Wz=void 0,this.bc=void 0,await this.pri.tr()}ge(){this.pri.ge()}be(){this.pri.be()}w_(){return this.pri.w_()}async gn(){this.Vo(),this.yri.gn(),await this.pri.gn(),this.fT.gn(),this.gT.gn(),this.Dl.gn()}constructor(t,i,e,s,n,r,h){super(),this.Wz=void 0,this.bc=void 0,this.fT=new vo,this.gT=new vo,this.Dl=new al,this.Us=t,this.yri=new pa(r,h,1,[fi.ym]),this.yri.WB(t),this.pri=new pN(t,this.yri,i,e,s,n),this.pri.sf(this.Ds),this.fT.fg=this.pri.ht,this.gT.fg=this.pri.rt,this.Dl.fg=this.pri.nt}},H3=class extends cc{async gn(){this.Mri.gn(),await super.gn()}constructor(t){super(t);const i=new W3(this.o7.we,this.AO,this.wd,this.r7,this.f_,this.d7,this.Ol);this.Mri=new V3(this,this.o7,i),this.AQ.MH(this.Mri),this.yn(Co.Hg,(()=>{this.Mri.rri()}))}};lP((t=>new H3(t)),Zo.O7);var q3="VPAID";function X3(t){return"spotx"===t.integration}Ur.Lb.wR(new class t{get y0t(){return this.Tri.y0t}gR(t){return X3(t)}M0t(i,e,s){return s.ads||(s.ads=Nw({})),s.ads.vpaidMode=s.ads.vpaidMode||t.Nri(),this.Tri.M0t(i,e,s)}a4(i,e,s,n){!function(t){if(!X3(t))throw new g("Unknown ad integration: "+t.integration)}(i);const r=t.Dri(i,s.we);this.Tri.a4(r,e,s,n)}jQ(t){const i=Ms(t);if(!S(i.id))return i.queryParameters||(i.queryParameters={}),i.custom&&(i.queryParameters.custom?$('"custom" parameter is redefined in queryParameters! Please use "queryParameters.custom" only!'):(i.queryParameters.custom=i.custom,delete i.custom)),i.app&&(i.queryParameters.app?$('"app" parameter is redefined in queryParameters! Please use "queryParameters.app" only!'):(i.queryParameters.app=i.app,delete i.app)),i.device&&(i.queryParameters.device?$('"device" parameter is redefined in queryParameters! Please use "queryParameters.device" only!'):(i.queryParameters.device=i.device,delete i.device)),i.user&&(i.queryParameters.user?$('"user" parameter is redefined in queryParameters! Please use "queryParameters.user" only!'):(i.queryParameters.user=i.user,delete i.user)),i.ipAddress&&(i.queryParameters.ip_addr?$('"ipAddress" parameter is redefined in queryParameters! Please use "queryParameters.ip_addr" or "ipAddress" only!'):(i.queryParameters.ip_addr=i.ipAddress,delete i.ipAddress)),i.maximumAdDuration&&(i.queryParameters.VMaxd?$('"maximumAdDuration" parameter is redefined in queryParameters! Please use "queryParameters.VMaxd" or "maximumAdDuration" only!'):(i.queryParameters.VMaxd=i.maximumAdDuration,delete i.maximumAdDuration)),i}static Dri(i,e){return{integration:Pu.SPOTX,sources:{src:t.Sri(i,Ha.location.href,e.offsetWidth,e.offsetHeight,f.Mb)}}}static Sri(i,e,s,n,r){if(i.sources)return i.sources;let h=n,o=s;r&&0===o&&(o=320,h=180);const a={custom_skin:1,player_width:o,player_height:h};i.cacheBuster&&(a.cb=_.random()),t.Iri(e)&&(a.content_page_url=e);const u=Yt({},a,i.queryParameters);return u[q3]||u.VPI||(u[q3]="js"),"https://search.spotxchange.com/vast/2.0/"+i.id+"?"+t.Eri(u)}static Iri(t){return D(t,"http://")||D(t,"https://")}static Eri(t){return r0(t)}static Nri(){return f.BE?pu.ENABLED:pu.INSECURE}constructor(){this.Tri=new S4}});var Z3=void 0!==s?s:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},K3=function(){return/Android/i.test(Dl.userAgent)||/iPhone|iPad|iPod/i.test(Dl.userAgent)},J3=function(t,i){for(var e=0,s=t.length;e<s;e++)i[e]=t[e]},$3=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},t5=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),i5=function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in w(t))return function(t,i){var e=[],s=!0,n=!1,r=void 0;try{for(var h,o=t[Symbol.iterator]();!(s=(h=o.next()).done)&&(e.push(h.value),!i||e.length!==i);s=!0);}catch(t){n=!0,r=t}finally{try{!s&&o.return&&o.return()}finally{if(n)throw r}}return e}(t,i);throw new b("Invalid attempt to destructure non-iterable instance")},e5=function(t,i,e){return t+(i-t)*e},Dh=function(){var t=/iPad|iPhone|iPod/.test(Dl.platform);return function(){return t}}(),s5=function(){var t=-1!==Dl.userAgent.indexOf("Version")&&-1!==Dl.userAgent.indexOf("Android")&&-1!==Dl.userAgent.indexOf("Chrome");return function(){return t}}(),n5=(function(){var t=/^((?!chrome|android).)*safari/i.test(Dl.userAgent)}(),function(){var t=-1!==Dl.userAgent.indexOf("Firefox")&&-1!==Dl.userAgent.indexOf("Android");return function(){return t}}()),r5=function(){var t=Dl.userAgent.match(/.*Chrome\/([0-9]+)/),i=t?x(t[1],10):null;return function(){return i}}(),h5=function(){var t=!1;if(65===r5()){var i=Dl.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(i){var e=i[1].split("."),s=i5(e,4),n=(s[0],s[1],s[2]),r=s[3];t=3325===x(n,10)&&x(r,10)<148}}return function(){return t}}(),o5=function(){var t=-1!==Dl.userAgent.indexOf("R7 Build");return function(){return t}}(),a5=function(){var t=90==s.orientation||-90==s.orientation;return o5()?!t:t},u5=function(){return _.max(s.screen.width,s.screen.height)*s.devicePixelRatio},c5=function(){return _.min(s.screen.width,s.screen.height)*s.devicePixelRatio},l5=function(){if(h.exitFullscreen)h.exitFullscreen();else if(h.webkitExitFullscreen)h.webkitExitFullscreen();else if(h.mozCancelFullScreen)h.mozCancelFullScreen();else{if(!h.msExitFullscreen)return!1;h.msExitFullscreen()}return!0},d5=function(t,i,e,s){var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,i),t.compileShader(n);var r=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(r,e),t.compileShader(r);var h=t.createProgram();for(var o in t.attachShader(h,n),t.attachShader(h,r),s)t.bindAttribLocation(h,s[o],o);return t.linkProgram(h),t.deleteShader(n),t.deleteShader(r),h},f5=function(t,i){for(var e={},s=t.getProgramParameter(i,t.ACTIVE_UNIFORMS),n="",r=0;r<s;r++){e[n=t.getActiveUniform(i,r).name.replace("[0]","")]=t.getUniformLocation(i,n)}return e},_5=function(){var t,i=!1;return t=Dl.userAgent||Dl.vendor||s.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},g5=function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return t},Ii=[],w5=function(t){if(Dh()){v5(t);var i,e,n=t.style.width,r=t.style.height,h=t.offsetWidth+1,o=t.offsetHeight;t.style.width=h+"px",t.style.height=o+"px";var a=function(){s.cancelAnimationFrame(e);for(var h=0;h<Ii.length;h++)if(Ii[h]===i){t.style.width=n,t.style.height=r,Ii.splice(h,1);break}};i={p7:t,bri:a},Ii.push(i),e=s.requestAnimationFrame(a)}},v5=function(t){if(Dh())for(var i=0;i<Ii.length;i++)if(Ii[i].p7===t){Ii[i].bri();break}},A5=function(){var t=_.PI/180,i=.25*_.PI;var e=new Float32Array([0,0,0,1]),s=new Float32Array([0,0,0]);function n(n,r,h,o,a,u){!function(e,s,n,r){var h=_.tan(s?s.upDegrees*t:i),o=_.tan(s?s.downDegrees*t:i),a=_.tan(s?s.leftDegrees*t:i),u=_.tan(s?s.rightDegrees*t:i),c=2/(a+u),l=2/(h+o);e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*c*.5,e[9]=(h-o)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0}(n,o||null,u.depthNear,u.depthFar),function(t,i,e){var s=i[0],n=i[1],r=i[2],h=i[3],o=s+s,a=n+n,u=r+r,c=s*o,l=s*a,d=s*u,f=n*a,_=n*u,g=r*u,w=h*o,v=h*a,A=h*u;t[0]=1-(f+g),t[1]=l+A,t[2]=d-v,t[3]=0,t[4]=l-A,t[5]=1-(c+g),t[6]=_+w,t[7]=0,t[8]=d+v,t[9]=_-w,t[10]=1-(c+f),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1}(r,h.orientation||e,h.position||s),a&&function(t,i,e){var s,n,r,h,o,a,u,c,l,d,f,_,g=e[0],w=e[1],v=e[2];i===t?(t[12]=i[0]*g+i[4]*w+i[8]*v+i[12],t[13]=i[1]*g+i[5]*w+i[9]*v+i[13],t[14]=i[2]*g+i[6]*w+i[10]*v+i[14],t[15]=i[3]*g+i[7]*w+i[11]*v+i[15]):(s=i[0],n=i[1],r=i[2],h=i[3],o=i[4],a=i[5],u=i[6],c=i[7],l=i[8],d=i[9],f=i[10],_=i[11],t[0]=s,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=u,t[7]=c,t[8]=l,t[9]=d,t[10]=f,t[11]=_,t[12]=s*g+o*w+l*v+i[12],t[13]=n*g+a*w+d*v+i[13],t[14]=r*g+u*w+f*v+i[14],t[15]=h*g+c*w+_*v+i[15])}(r,r,a),function(t,i){var e=i[0],s=i[1],n=i[2],r=i[3],h=i[4],o=i[5],a=i[6],u=i[7],c=i[8],l=i[9],d=i[10],f=i[11],_=i[12],g=i[13],w=i[14],v=i[15],A=e*o-s*h,m=e*a-n*h,p=e*u-r*h,y=s*a-n*o,M=s*u-r*o,T=n*u-r*a,N=c*g-l*_,D=c*w-d*_,S=c*v-f*_,I=l*w-d*g,E=l*v-f*g,b=d*v-f*w,L=A*b-m*E+p*I+y*S-M*D+T*N;L&&(L=1/L,t[0]=(o*b-a*E+u*I)*L,t[1]=(n*E-s*b-r*I)*L,t[2]=(g*T-w*M+v*y)*L,t[3]=(d*M-l*T-f*y)*L,t[4]=(a*S-h*b-u*D)*L,t[5]=(e*b-n*S+r*D)*L,t[6]=(w*p-_*T-v*m)*L,t[7]=(c*T-d*p+f*m)*L,t[8]=(h*E-o*S+u*N)*L,t[9]=(s*S-e*E-r*N)*L,t[10]=(_*M-g*p+v*A)*L,t[11]=(l*p-c*M-f*A)*L,t[12]=(o*D-h*I-a*N)*L,t[13]=(e*I-s*D+n*N)*L,t[14]=(g*m-_*y-w*A)*L,t[15]=(c*y-l*m+d*A)*L)}(r,r)}return function(t,i,e){return!(!t||!i)&&(t.pose=i,t.timestamp=i.timestamp,n(t.leftProjectionMatrix,t.leftViewMatrix,i,e.Lri("left"),e.kri("left"),e),n(t.rightProjectionMatrix,t.rightViewMatrix,i,e.Lri("right"),e.kri("right"),e),!0)}}(),m5=function(t){var i,e=t.indexOf("://");i=-1!==e?e+3:0;var s=t.indexOf("/",i);return-1===s&&(s=t.length),t.substring(0,s)},p5=function(){var t={};return function(i,e){void 0===t[i]&&(console.warn("webvr-polyfill: "+e),t[i]=!0)}}(),Cs=function(t,i){p5(t,t+" has been deprecated. This may not work on native WebVR displays. "+(i?"Please use "+i+" instead.":""))};var y5=function(t,i,e){if(i){for(var s=[],n=null,r=0;r<i.length;++r){switch(h=i[r]){case t.TEXTURE_BINDING_2D:case t.TEXTURE_BINDING_CUBE_MAP:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),s.push(null,null);break}n||(n=t.getParameter(t.ACTIVE_TEXTURE)),t.activeTexture(a),s.push(t.getParameter(h),null);break;case t.ACTIVE_TEXTURE:n=t.getParameter(t.ACTIVE_TEXTURE),s.push(null);break;default:s.push(t.getParameter(h))}}e(t);for(r=0;r<i.length;++r){var h=i[r],o=s[r];switch(h){case t.ACTIVE_TEXTURE:break;case t.ARRAY_BUFFER_BINDING:t.bindBuffer(t.ARRAY_BUFFER,o);break;case t.COLOR_CLEAR_VALUE:t.clearColor(o[0],o[1],o[2],o[3]);break;case t.COLOR_WRITEMASK:t.colorMask(o[0],o[1],o[2],o[3]);break;case t.CURRENT_PROGRAM:t.useProgram(o);break;case t.ELEMENT_ARRAY_BUFFER_BINDING:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o);break;case t.FRAMEBUFFER_BINDING:t.bindFramebuffer(t.FRAMEBUFFER,o);break;case t.RENDERBUFFER_BINDING:t.bindRenderbuffer(t.RENDERBUFFER,o);break;case t.TEXTURE_BINDING_2D:if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_2D,o);break;case t.TEXTURE_BINDING_CUBE_MAP:var a;if((a=i[++r])<t.TEXTURE0||a>t.TEXTURE31)break;t.activeTexture(a),t.bindTexture(t.TEXTURE_CUBE_MAP,o);break;case t.VIEWPORT:t.viewport(o[0],o[1],o[2],o[3]);break;case t.BLEND:case t.CULL_FACE:case t.DEPTH_TEST:case t.SCISSOR_TEST:case t.STENCIL_TEST:o?t.enable(h):t.disable(h);break;default:console.log("No GL restore behavior for 0x"+h.toString(16))}n&&t.activeTexture(n)}}else e(t)},M5=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),T5=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function ne(t,i,e,s){this.gl=t,this.cardboardUI=i,this.bufferScale=e,this.dirtySubmitFrameBindings=s,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,Dh()||(this.realCanvasWidth=w.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=w.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=d5(t,M5,T5,this.attribs),this.uniforms=f5(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize()}ne.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},ne.prototype.onResize=function(){var t=this.gl,i=this,e=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];y5(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.framebuffer),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.texImage2D(t.TEXTURE_2D,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,i.bufferWidth,i.bufferHeight,0,i.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.renderTarget,0),i.ctxAttribs.depth&&i.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.depthStencilBuffer)):i.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,i.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,i.depthBuffer)):i.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,i.bufferWidth,i.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),i.realClearColor.apply(t,i.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},ne.prototype.patch=function(){if(!this.isPatched){var t=this,i=this.gl.canvas,e=this.gl;Dh()||(i.width=u5()*this.bufferScale,i.height=c5()*this.bufferScale,w.defineProperty(i,"width",{configurable:!0,enumerable:!0,get:function(){return t.bufferWidth},set:function(e){t.bufferWidth=e,t.realCanvasWidth.set.call(i,e),t.onResize()}}),w.defineProperty(i,"height",{configurable:!0,enumerable:!0,get:function(){return t.bufferHeight},set:function(e){t.bufferHeight=e,t.realCanvasHeight.set.call(i,e),t.onResize()}})),this.lastBoundFramebuffer=e.getParameter(e.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(i,s){t.lastBoundFramebuffer=s||t.framebuffer,t.realBindFramebuffer.call(e,i,t.lastBoundFramebuffer)},this.cullFace=e.getParameter(e.CULL_FACE),this.depthTest=e.getParameter(e.DEPTH_TEST),this.blend=e.getParameter(e.BLEND),this.scissorTest=e.getParameter(e.SCISSOR_TEST),this.stencilTest=e.getParameter(e.STENCIL_TEST),e.enable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!0;break;case e.DEPTH_TEST:t.depthTest=!0;break;case e.BLEND:t.blend=!0;break;case e.SCISSOR_TEST:t.scissorTest=!0;break;case e.STENCIL_TEST:t.stencilTest=!0}t.realEnable.call(e,i)},e.disable=function(i){switch(i){case e.CULL_FACE:t.cullFace=!1;break;case e.DEPTH_TEST:t.depthTest=!1;break;case e.BLEND:t.blend=!1;break;case e.SCISSOR_TEST:t.scissorTest=!1;break;case e.STENCIL_TEST:t.stencilTest=!1}t.realDisable.call(e,i)},this.colorMask=e.getParameter(e.COLOR_WRITEMASK),e.colorMask=function(i,s,n,r){t.colorMask[0]=i,t.colorMask[1]=s,t.colorMask[2]=n,t.colorMask[3]=r,t.realColorMask.call(e,i,s,n,r)},this.clearColor=e.getParameter(e.COLOR_CLEAR_VALUE),e.clearColor=function(i,s,n,r){t.clearColor[0]=i,t.clearColor[1]=s,t.clearColor[2]=n,t.clearColor[3]=r,t.realClearColor.call(e,i,s,n,r)},this.viewport=e.getParameter(e.VIEWPORT),e.viewport=function(i,s,n,r){t.viewport[0]=i,t.viewport[1]=s,t.viewport[2]=n,t.viewport[3]=r,t.realViewport.call(e,i,s,n,r)},this.isPatched=!0,w5(i)}},ne.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,i=this.gl.canvas;Dh()||(w.defineProperty(i,"width",this.realCanvasWidth),w.defineProperty(i,"height",this.realCanvasHeight)),i.width=this.bufferWidth,i.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,u((function(){w5(i)}),1)}},ne.prototype.setTextureBounds=function(t,i){t||(t=[0,0,.5,1]),i||(i=[.5,0,.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=i[0],this.viewportOffsetScale[5]=i[1],this.viewportOffsetScale[6]=i[2],this.viewportOffsetScale[7]=i[3]},ne.prototype.submitFrame=function(){var t=this.gl,i=this,e=[];if(this.dirtySubmitFrameBindings||e.push(t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0),y5(t,e,(function(t){i.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),i.cullFace&&i.realDisable.call(t,t.CULL_FACE),i.depthTest&&i.realDisable.call(t,t.DEPTH_TEST),i.blend&&i.realDisable.call(t,t.BLEND),i.scissorTest&&i.realDisable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realDisable.call(t,t.STENCIL_TEST),i.realColorMask.call(t,!0,!0,!0,!0),i.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(i.ctxAttribs.alpha||Dh())&&(i.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(i.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.enableVertexAttribArray(i.attribs.position),t.enableVertexAttribArray(i.attribs.texCoord),t.vertexAttribPointer(i.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(i.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(i.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,i.renderTarget),t.uniform4fv(i.uniforms.viewportOffsetScale,i.viewportOffsetScale),t.drawElements(t.TRIANGLES,i.indexCount,t.UNSIGNED_SHORT,0),i.cardboardUI&&i.cardboardUI.renderNoState(),i.realBindFramebuffer.call(i.gl,t.FRAMEBUFFER,i.framebuffer),i.ctxAttribs.preserveDrawingBuffer||(i.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),i.dirtySubmitFrameBindings||i.realBindFramebuffer.call(t,t.FRAMEBUFFER,i.lastBoundFramebuffer),i.cullFace&&i.realEnable.call(t,t.CULL_FACE),i.depthTest&&i.realEnable.call(t,t.DEPTH_TEST),i.blend&&i.realEnable.call(t,t.BLEND),i.scissorTest&&i.realEnable.call(t,t.SCISSOR_TEST),i.stencilTest&&i.realEnable.call(t,t.STENCIL_TEST),i.realColorMask.apply(t,i.colorMask),i.realViewport.apply(t,i.viewport),!i.ctxAttribs.alpha&&i.ctxAttribs.preserveDrawingBuffer||i.realClearColor.apply(t,i.clearColor)})),Dh()){var s=t.canvas;s.width==i.bufferWidth&&s.height==i.bufferHeight||(i.bufferWidth=s.width,i.bufferHeight=s.height,i.onResize())}},ne.prototype.updateDeviceInfo=function(t){var i=this.gl,e=this,s=[i.ARRAY_BUFFER_BINDING,i.ELEMENT_ARRAY_BUFFER_BINDING];y5(i,s,(function(i){var s=e.xri(e.meshWidth,e.meshHeight,t);if(i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer),i.bufferData(i.ARRAY_BUFFER,s,i.STATIC_DRAW),!e.indexCount){var n=e.Cri(e.meshWidth,e.meshHeight);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n,i.STATIC_DRAW),e.indexCount=n.length}}))},ne.prototype.xri=function(t,i,e){for(var s=new Float32Array(2*t*i*5),n=e.getLeftEyeVisibleTanAngles(),r=e.getLeftEyeNoLensTanAngles(),h=e.getLeftEyeVisibleScreenRect(r),o=0,a=0;a<2;a++){for(var u=0;u<i;u++)for(var c=0;c<t;c++,o++){var l=c/(t-1),d=u/(i-1),f=l,g=d,w=e5(n[0],n[2],l),v=e5(n[3],n[1],d),A=_.sqrt(w*w+v*v),m=e.distortion.distortInverse(A),p=v*m/A;l=(w*m/A-r[0])/(r[2]-r[0]),d=(p-r[3])/(r[1]-r[3]),l=2*(h.x+l*h.width-.5),d=2*(h.y+d*h.height-.5),s[5*o+0]=l,s[5*o+1]=d,s[5*o+2]=f,s[5*o+3]=g,s[5*o+4]=a}var y=n[2]-n[0];n[0]=-(y+n[0]),n[2]=y-n[2],y=r[2]-r[0],r[0]=-(y+r[0]),r[2]=y-r[2],h.x=1-(h.x+h.width)}return s},ne.prototype.Cri=function(t,i){for(var e=new Uint16Array(2*(t-1)*(i-1)*6),s=t/2,n=i/2,r=0,h=0,o=0;o<2;o++)for(var a=0;a<i;a++)for(var u=0;u<t;u++,r++)0!=u&&0!=a&&(u<=s==a<=n?(e[h++]=r,e[h++]=r-t-1,e[h++]=r-t,e[h++]=r-t-1,e[h++]=r,e[h++]=r-1):(e[h++]=r-1,e[h++]=r-t,e[h++]=r,e[h++]=r-t,e[h++]=r-1,e[h++]=r-t-1));return e},ne.prototype.Ori=function(t,i){var e=w.getOwnPropertyDescriptor(t,i);return void 0!==e.get&&void 0!==e.set||(e.configurable=!0,e.enumerable=!0,e.get=function(){return this.getAttribute(i)},e.set=function(t){this.setAttribute(i,t)}),e};var N5=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),D5=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),S5=_.PI/180,I5=.3125,Hs=28;function E5(t){this.gl=t,this.attribs={position:0},this.program=d5(t,N5,D5,this.attribs),this.uniforms=f5(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function b5(t){this.coefficients=t}E5.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},E5.prototype.listen=function(t,i){var e=this.gl.canvas,s="undefined"!=typeof TouchEvent;this.listener=function(n){var r=e.clientWidth/2,h=s&&n instanceof TouchEvent?(n.preventDefault(),n.changedTouches[0]):n;h.clientX>r-42&&h.clientX<r+42&&h.clientY>e.clientHeight-42?(n.preventDefault(),n.stopImmediatePropagation(),t(n)):h.clientX<42&&h.clientY<42&&(n.preventDefault(),n.stopImmediatePropagation(),i(n))},e.addEventListener("click",this.listener,!1),e.addEventListener("touchstart",this.listener,!1)},E5.prototype.onResize=function(){var t=this.gl,i=this,e=[t.ARRAY_BUFFER_BINDING];y5(t,e,(function(t){var e=[],n=t.drawingBufferWidth/2,r=_.max(screen.width,screen.height)*s.devicePixelRatio,h=t.drawingBufferWidth/r*s.devicePixelRatio,o=4*h/2,a=42*h,u=Hs*h/2,c=14*h;function l(t,i){var s=(90-t)*S5,r=_.cos(s),h=_.sin(s);e.push(I5*r*u+n,I5*h*u+u),e.push(i*r*u+n,i*h*u+u)}e.push(n-o,a),e.push(n-o,t.drawingBufferHeight),e.push(n+o,a),e.push(n+o,t.drawingBufferHeight),i.gearOffset=e.length/2;for(var d=0;d<=6;d++){var f=60*d;l(f,1),l(f+12,1),l(f+20,.75),l(f+40,.75),l(f+48,1)}function g(i,s){e.push(c+i,t.drawingBufferHeight-c-s)}i.gearVertexCount=e.length/2-i.gearOffset,i.arrowOffset=e.length/2;var w=o/_.sin(45*S5);g(0,u),g(u,0),g(u+w,w),g(w,u+w),g(w,u-w),g(0,u),g(u,2*u),g(u+w,2*u-w),g(w,u-w),g(0,u),g(w,u-o),g(Hs*h,u-o),g(w,u+o),g(Hs*h,u+o),i.arrowVertexCount=e.length/2-i.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}))},E5.prototype.render=function(){var t=this.gl,i=this,e=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];y5(t,e,(function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),i.renderNoState()}))},E5.prototype.renderNoState=function(){var t,i,e,s,n,r,h,o,a,u,c=this.gl;c.useProgram(this.program),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.enableVertexAttribArray(this.attribs.position),c.vertexAttribPointer(this.attribs.position,2,c.FLOAT,!1,8,0),c.uniform4f(this.uniforms.color,1,1,1,1),t=this.projMat,i=0,e=c.drawingBufferWidth,s=0,n=c.drawingBufferHeight,o=1/(i-e),a=1/(s-n),u=1/((r=.1)-(h=1024)),t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(i+e)*o,t[13]=(n+s)*a,t[14]=(h+r)*u,t[15]=1,c.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.drawArrays(c.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),c.drawArrays(c.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},b5.prototype.distortInverse=function(t){for(var i=0,e=1,s=t-this.distort(i);_.abs(e-i)>1e-4;){var n=t-this.distort(e),r=e-n*((e-i)/(n-s));i=e,e=r,s=n}return e},b5.prototype.distort=function(t){for(var i=t*t,e=0,s=0;s<this.coefficients.length;s++)e=i*(e+this.coefficients[s]);return(e+1)*t};var L5=_.PI/180,k5=180/_.PI,zs=function(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0};zs.prototype={constructor:zs,set:function(t,i,e){return this.x=t,this.y=i,this.z=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){var i=1/t;this.multiplyScalar(i)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(t){var i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,l=-n*i-r*e-h*s;return this.x=a*o+l*-n+u*-h-c*-r,this.y=u*o+l*-r+c*-n-a*-h,this.z=c*o+l*-h+a*-r-u*-n,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(t,i){var e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}};var Zs=function(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1};function x5(t){this.width=t.width||u5(),this.height=t.height||c5(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}Zs.prototype={constructor:Zs,set:function(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(t,i,e){var s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a+h*o*r,this.w=s*n*r-h*o*a,this},setFromEulerYXZ:function(t,i,e){var s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(e/2);return this.x=h*n*r+s*o*a,this.y=s*o*r-h*n*a,this.z=s*n*a-h*o*r,this.w=s*n*r+h*o*a,this},setFromAxisAngle:function(t,i){var e=i/2,s=_.sin(e);return this.x=t.x*s,this.y=t.y*s,this.z=t.z*s,this.w=_.cos(e),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},slerp:function(t,i){if(0===i)return this;if(1===i)return this.copy(t);var e=this.x,s=this.y,n=this.z,r=this.w,h=r*t.w+e*t.x+s*t.y+n*t.z;if(h<0?(this.w=-t.w,this.x=-t.x,this.y=-t.y,this.z=-t.z,h=-h):this.copy(t),h>=1)return this.w=r,this.x=e,this.y=s,this.z=n,this;var o=_.acos(h),a=_.sqrt(1-h*h);if(_.abs(a)<.001)return this.w=.5*(r+this.w),this.x=.5*(e+this.x),this.y=.5*(s+this.y),this.z=.5*(n+this.z),this;var u=_.sin((1-i)*o)/a,c=_.sin(i*o)/a;return this.w=r*u+this.w*c,this.x=e*u+this.x*c,this.y=s*u+this.y*c,this.z=n*u+this.z*c,this},setFromUnitVectors:function(){var t,i;return function(e,s){return void 0===t&&(t=new zs),(i=e.dot(s)+1)<1e-6?(i=0,_.abs(e.x)>_.abs(e.z)?t.set(-e.y,e.x,0):t.set(0,-e.z,e.y)):t.crossVectors(e,s),this.x=t.x,this.y=t.y,this.z=t.z,this.w=i,this.normalize(),this}}()};var C5=new x5({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),O5=new x5({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),j5={CardboardV1:new P5({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new P5({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Ea(t){this.viewer=j5.CardboardV2,this.updateDeviceParams(t),this.distortion=new b5(this.viewer.distortionCoefficients)}function P5(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}Ea.prototype.updateDeviceParams=function(t){this.device=this.jri(t)||this.device},Ea.prototype.getDevice=function(){return this.device},Ea.prototype.setViewer=function(t){this.viewer=t,this.distortion=new b5(this.viewer.distortionCoefficients)},Ea.prototype.jri=function(t){if(!t)return Dh()?(console.warn("Using fallback iOS device measurements."),O5):(console.warn("Using fallback Android device measurements."),C5);var i=.0254,e=i/t.xdpi,s=i/t.ydpi;return new x5({widthMeters:e*u5(),heightMeters:s*c5(),bevelMeters:.001*t.bevelMm})},Ea.prototype.getDistortedFieldOfViewLeftEye=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=(i.widthMeters-t.interLensDistance)/2,r=t.interLensDistance/2,h=t.baselineLensDistance-i.bevelMeters,o=i.heightMeters-h,a=k5*_.atan(e.distort(n/s)),u=k5*_.atan(e.distort(r/s)),c=k5*_.atan(e.distort(h/s)),l=k5*_.atan(e.distort(o/s));return{leftDegrees:_.min(a,t.fov),rightDegrees:_.min(u,t.fov),downDegrees:_.min(c,t.fov),upDegrees:_.min(l,t.fov)}},Ea.prototype.getLeftEyeVisibleTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=_.tan(-L5*t.fov),n=_.tan(L5*t.fov),r=_.tan(L5*t.fov),h=_.tan(-L5*t.fov),o=i.widthMeters/4,a=i.heightMeters/2,u=t.baselineLensDistance-i.bevelMeters-a,c=t.interLensDistance/2-o,l=-u,d=t.screenLensDistance,f=e.distort((c-o)/d),g=e.distort((l+a)/d),w=e.distort((c+o)/d),v=e.distort((l-a)/d),A=new Float32Array(4);return A[0]=_.max(s,f),A[1]=_.min(n,g),A[2]=_.min(r,w),A[3]=_.max(h,v),A},Ea.prototype.getLeftEyeNoLensTanAngles=function(){var t=this.viewer,i=this.device,e=this.distortion,s=new Float32Array(4),n=e.distortInverse(_.tan(-L5*t.fov)),r=e.distortInverse(_.tan(L5*t.fov)),h=e.distortInverse(_.tan(L5*t.fov)),o=e.distortInverse(_.tan(-L5*t.fov)),a=i.widthMeters/4,u=i.heightMeters/2,c=t.baselineLensDistance-i.bevelMeters-u,l=t.interLensDistance/2-a,d=-c,f=t.screenLensDistance,g=(l-a)/f,w=(d+u)/f,v=(l+a)/f,A=(d-u)/f;return s[0]=_.max(n,g),s[1]=_.min(r,w),s[2]=_.min(h,v),s[3]=_.max(o,A),s},Ea.prototype.getLeftEyeVisibleScreenRect=function(t){var i=this.viewer,e=this.device,s=i.screenLensDistance,n=(e.widthMeters-i.interLensDistance)/2,r=i.baselineLensDistance-e.bevelMeters,h=(t[0]*s+n)/e.widthMeters,o=(t[1]*s+r)/e.heightMeters,a=(t[2]*s+n)/e.widthMeters,u=(t[3]*s+r)/e.heightMeters;return{x:h,y:u,width:a-h,height:o-u}},Ea.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Ea.prototype.getFieldOfViewRightEye=function(t){var i=this.getFieldOfViewLeftEye(t);return{leftDegrees:i.rightDegrees,rightDegrees:i.leftDegrees,upDegrees:i.upDegrees,downDegrees:i.downDegrees}},Ea.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.Pri();return{leftDegrees:k5*_.atan(t.outerDist),rightDegrees:k5*_.atan(t.innerDist),downDegrees:k5*_.atan(t.bottomDist),upDegrees:k5*_.atan(t.topDist)}},Ea.prototype.getUndistortedViewportLeftEye=function(){var t=this.Pri(),i=this.viewer,e=this.device,s=i.screenLensDistance,n=e.widthMeters/s,r=e.heightMeters/s,h=e.width/n,o=e.height/r,a=_.round((t.eyePosX-t.outerDist)*h),u=_.round((t.eyePosY-t.bottomDist)*o);return{x:a,y:u,width:_.round((t.eyePosX+t.innerDist)*h)-a,height:_.round((t.eyePosY+t.topDist)*o)-u}},Ea.prototype.Pri=function(){var t=this.viewer,i=this.device,e=this.distortion,s=t.screenLensDistance,n=t.interLensDistance/2/s,r=i.widthMeters/s,h=i.heightMeters/s,o=r/2-n,a=(t.baselineLensDistance-i.bevelMeters)/s,u=t.fov,c=e.distortInverse(_.tan(L5*u)),l=_.min(o,c),d=_.min(n,c),f=_.min(a,c);return{outerDist:l,innerDist:d,topDist:_.min(h-a,c),bottomDist:f,eyePosX:o,eyePosY:a}},Ea.Viewers=j5;var z5={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function B5(t,i){if(this.dpdb=z5,this.zri(),t){this.onDeviceParamsUpdated=i;var e=new El,s=this;e.open("GET",t,!0),e.addEventListener("load",(function(){s.loading=!1,e.status>=200&&e.status<=299?(s.dpdb=JSON.parse(e.response),s.zri()):console.error("Error loading online DPDB!")})),e.send()}}function R5(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function U5(t,i){this.set(t,i)}function Q5(t,i){this.kFilter=t,this.isDebug=i,this.currentAccelMeasurement=new U5,this.currentGyroMeasurement=new U5,this.previousGyroMeasurement=new U5,Dh()?this.filterQ=new Zs(-1,0,0,1):this.filterQ=new Zs(1,0,0,1),this.previousFilterQ=new Zs,this.previousFilterQ.copy(this.filterQ),this.accelQ=new Zs,this.isOrientationInitialized=!1,this.estimatedGravity=new zs,this.measuredGravity=new zs,this.gyroIntegralQ=new Zs}function F5(t,i){this.predictionTimeS=t,this.isDebug=i,this.previousQ=new Zs,this.previousTimestampS=null,this.deltaQ=new Zs,this.outQ=new Zs}function dn(t,i,e,n){this.yawOnly=e,this.accelerometer=new zs,this.gyroscope=new zs,this.filter=new Q5(t,n),this.posePredictor=new F5(i,n),this.isFirefoxAndroid=n5(),this.isIOS=Dh();var r=r5();this.isDeviceMotionInRadians=!this.isIOS&&r&&r<66,this.isWithoutDeviceMotion=h5(),this.filterToWorldQ=new Zs,Dh()?this.filterToWorldQ.setFromAxisAngle(new zs(1,0,0),_.PI/2):this.filterToWorldQ.setFromAxisAngle(new zs(1,0,0),-_.PI/2),this.inverseWorldToScreenQ=new Zs,this.worldToScreenQ=new Zs,this.originalPoseAdjustQ=new Zs,this.originalPoseAdjustQ.setFromAxisAngle(new zs(0,0,1),-s.orientation*_.PI/180),this.Bri(),a5()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new Zs,this.Rri=new Float32Array(4),this.start()}B5.prototype.getDeviceParams=function(){return this.deviceParams},B5.prototype.zri=function(){var t=this.Uri();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},B5.prototype.Uri=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var i=Dl.userAgent||Dl.vendor||s.opera,e=u5(),n=c5();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var r=null,h=1/0,o=0;o<t.devices.length;o++){var a=t.devices[o];if(a.rules)if("ios"==a.type||"android"==a.type){if(Dh()==("ios"==a.type)){for(var u=!1,c=0;c<a.rules.length;c++){var l=a.rules[c],d=this.Qri(l,i,e,n);if(!0===d){h=d,r=a,u=!0;break}!1!==d&&d<h&&(h=d,r=a)}if(u)break}}else console.warn("Device["+o+"] has invalid type.");else console.warn("Device["+o+"] has no rules section.")}return r?new R5({xdpi:r.dpi[0]||r.dpi,ydpi:r.dpi[1]||r.dpi,bevelMm:r.bw}):(console.warn("No DPDB device match."),null)},B5.prototype.Qri=function(t,i,e,s){if(!t.ua&&!t.res)return!1;if(t.ua&&i.indexOf(t.ua)<0)return!1;if(t.res){if(!t.res[0]||!t.res[1])return!1;var n=t.res[0],r=t.res[1],h=_.min(e,s)-_.min(n,r),o=_.max(e,s)-_.max(n,r),a=_.abs(h)+_.abs(o);if(a>0)return a}return!0},U5.prototype.set=function(t,i){this.sample=t,this.timestampS=i},U5.prototype.copy=function(t){this.set(t.sample,t.timestampS)},Q5.prototype.addAccelMeasurement=function(t,i){this.currentAccelMeasurement.set(t,i)},Q5.prototype.addGyroMeasurement=function(t,i){this.currentGyroMeasurement.set(t,i),function(t){return!(S(t)||t<=.001||t>1)}(i-this.previousGyroMeasurement.timestampS)&&this.Fri(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},Q5.prototype.Fri=function(){if(!this.isOrientationInitialized)return this.accelQ=this.Yri(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var t=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,i=this.Gri(this.currentGyroMeasurement.sample,t);this.gyroIntegralQ.multiply(i),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(i);var e=new Zs;e.copy(this.filterQ),e.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(e),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var s=new Zs;s.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),s.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",k5*function(t){return t.w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*_.acos(t.w)}(s),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var n=new Zs;n.copy(this.filterQ),n.multiply(s),this.filterQ.slerp(n,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},Q5.prototype.getOrientation=function(){return this.filterQ},Q5.prototype.Yri=function(t){var i=new zs;i.copy(t),i.normalize();var e=new Zs;return e.setFromUnitVectors(new zs(0,0,-1),i),e.inverse(),e},Q5.prototype.Gri=function(t,i){var e=new Zs,s=new zs;return s.copy(t),s.normalize(),e.setFromAxisAngle(s,t.length()*i),e},F5.prototype.getPrediction=function(t,i,e){if(!this.previousTimestampS)return this.previousQ.copy(t),this.previousTimestampS=e,t;var s=new zs;s.copy(i),s.normalize();var n=i.length();if(n<20*L5)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(k5*n).toFixed(1)),this.outQ.copy(t),this.previousQ.copy(t),this.outQ;var r=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(s,r),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(t),this.previousTimestampS=e,this.outQ},dn.prototype.getPosition=function(){return null},dn.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this.Vri)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(i=(new Zs).setFromAxisAngle(new zs(0,0,-1),0),e=new Zs,-90===s.orientation?e.setFromAxisAngle(new zs(0,1,0),_.PI/-2):e.setFromAxisAngle(new zs(0,1,0),_.PI/2),i.multiply(e)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var t=new Zs;return t.setFromAxisAngle(new zs(1,0,0),-_.PI/2),t}(),t=this.Vri,(n=new Zs).copy(t),n.multiply(this.deviceOrientationFilterToWorldQ),n.multiply(this.resetQ),n.multiply(this.worldToScreenQ),n.multiplyQuaternions(this.deviceOrientationFixQ,n),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.Rri[0]=n.x,this.Rri[1]=n.y,this.Rri[2]=n.z,this.Rri[3]=n.w,this.Rri;var i,e,n,r=this.filter.getOrientation();return t=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS),(n=new Zs).copy(this.filterToWorldQ),n.multiply(this.resetQ),n.multiply(t),n.multiply(this.worldToScreenQ),this.yawOnly&&(n.x=0,n.z=0,n.normalize()),this.Rri[0]=n.x,this.Rri[1]=n.y,this.Rri[2]=n.z,this.Rri[3]=n.w,this.Rri},dn.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),a5()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},dn.prototype.Wri=function(t){this.Vri=this.Vri||new Zs;var i=t.alpha,e=t.beta,s=t.gamma;i=(i||0)*_.PI/180,e=(e||0)*_.PI/180,s=(s||0)*_.PI/180,this.Vri.setFromEulerYXZ(e,i,-s)},dn.prototype.Hri=function(t){this.qri(t)},dn.prototype.qri=function(t){var i=t.accelerationIncludingGravity,e=t.rotationRate,s=t.timeStamp/1e3,n=s-this.previousTimestampS;return n<0?(p5("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=s)):n<=.001||n>1?(p5("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=s)):(this.accelerometer.set(-i.x,-i.y,-i.z),o5()?this.gyroscope.set(-e.beta,e.alpha,e.gamma):this.gyroscope.set(e.alpha,e.beta,e.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(_.PI/180),this.filter.addAccelMeasurement(this.accelerometer,s),this.filter.addGyroMeasurement(this.gyroscope,s),void(this.previousTimestampS=s))},dn.prototype.Xri=function(t){this.Bri()},dn.prototype.Ox=function(t){var i=t.data;i&&i.type&&("devicemotion"===i.type.toLowerCase()&&this.qri(i.deviceMotionEvent))},dn.prototype.Bri=function(){switch(this.worldToScreenQ.set(0,0,0,1),s.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new zs(0,0,1),-_.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new zs(0,0,1),_.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},dn.prototype.start=function(){var t,i,e;this.Zri=this.Hri.bind(this),this.Kri=this.Xri.bind(this),this.Jri=this.Ox.bind(this),this.$ri=this.Wri.bind(this),Dh()&&(t=s.self!==s.top,i=m5(h.referrer),e=m5(s.location.href),t&&i!==e)&&s.addEventListener("message",this.Jri),s.addEventListener("orientationchange",this.Kri),this.isWithoutDeviceMotion?s.addEventListener("deviceorientation",this.$ri):s.addEventListener("devicemotion",this.Zri)},dn.prototype.stop=function(){s.removeEventListener("devicemotion",this.Zri),s.removeEventListener("deviceorientation",this.$ri),s.removeEventListener("orientationchange",this.Kri),s.removeEventListener("message",this.Jri)};var Y5=new zs(1,0,0),G5=new zs(0,0,1),V5={};screen.orientation?V5=screen.orientation:screen.msOrientation?V5=screen.msOrientation:w.defineProperty(V5,"angle",{get:function(){return s.orientation||0}});var W5=new Zs;W5.setFromAxisAngle(Y5,-_.PI/2),W5.multiply((new Zs).setFromAxisAngle(G5,_.PI/2));var H5=function(){function t(i){!function(t,i){if(!(t instanceof i))throw new b("Cannot call a class as a function")}(this,t),this.config=i,this.sensor=null,this.fusionSensor=null,this.thi=new Float32Array(4),this.api=null,this.errors=[],this.ihi=new Zs,this.ehi=new Zs,this.shi=new Zs,this.nhi=this.nhi.bind(this),this.rhi=this.rhi.bind(this),this.hhi=this.hhi.bind(this),this.hhi(),this.init()}return t5(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this.rhi)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this.nhi),this.sensor.start()),s.addEventListener("orientationchange",this.hhi)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new dn(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this.thi[0]=this.thi[1]=this.thi[2]=0,this.thi[3]=1,this.thi;var t=this.sensor.quaternion;this.ihi.set(t[0],t[1],t[2],t[3]);var i=this.shi;return i.copy(W5),i.multiply(this.ihi),i.multiply(this.ehi),this.config.YAW_ONLY&&(i.x=i.z=0,i.normalize()),this.thi[0]=i.x,this.thi[1]=i.y,this.thi[2]=i.z,this.thi[3]=i.w,this.thi}},{key:"rhi",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error)}},{key:"nhi",value:function(){}},{key:"hhi",value:function(){var t=-V5.angle*_.PI/180;this.ehi.setFromAxisAngle(G5,t)}}]),t}();function Js(){this.ohi();var t=h.createElement("div");(r=t.style).position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var i=h.createElement("img");i.src=this.icon,(r=i.style).marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(i);var e=h.createElement("div");(r=e.style).textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",e.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(e);var s=h.createElement("div");(r=s.style).backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(s);var n=h.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var r,o=h.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="Du",(r=o.style).float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",s.appendChild(n),s.appendChild(o),this.overlay=t,this.text=e,this.hide()}Js.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):h.body.appendChild(this.overlay),this.overlay.style.display="block";var i=this.overlay.querySelector("img").style;a5()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},Js.prototype.hide=function(){this.overlay.style.display="none"},Js.prototype.showTemporarily=function(t,i){this.show(i),this.timer=u(this.hide.bind(this),t)},Js.prototype.disableShowTemporarily=function(){c(this.timer)},Js.prototype.update=function(){this.disableShowTemporarily(),!a5()&&_5()?this.show():this.hide()},Js.prototype.ohi=function(){this.icon="data:"+"image/svg+xml"+";base64,"+"PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var q5="CardboardV1",X5="WEBVR_CARDBOARD_VIEWER";function $r(){try{this.selectedKey=localStorage.getItem(X5)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=q5),this.dialog=this.ahi(Ea.Viewers),this.root=null,this.uhi=[]}$r.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},$r.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},$r.prototype.getCurrentViewer=function(){return Ea.Viewers[this.selectedKey]},$r.prototype.lhi=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},$r.prototype.onChange=function(t){this.uhi.push(t)},$r.prototype.dhi=function(t){for(var i=0;i<this.uhi.length;i++)this.uhi[i](t)},$r.prototype.fhi=function(){if(this.selectedKey=this.lhi(),this.selectedKey&&Ea.Viewers[this.selectedKey]){this.dhi(Ea.Viewers[this.selectedKey]);try{localStorage.setItem(X5,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},$r.prototype.ahi=function(t){var i=h.createElement("div");i.classList.add("webvr-polyfill-viewer-selector"),i.style.display="none";var e=h.createElement("div");(n=e.style).position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",e.addEventListener("click",this.hide.bind(this));var s=h.createElement("div"),n=s.style;for(var r in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",s.appendChild(this._hi("Select your viewer")),t)s.appendChild(this.ghi(r,t[r].label));return s.appendChild(this.whi("Save",this.fhi.bind(this))),i.appendChild(e),i.appendChild(s),i},$r.prototype._hi=function(t){var i=h.createElement("h1"),e=i.style;return e.color="black",e.fontSize="20px",e.fontWeight="bold",e.marginTop=0,e.marginBottom="24px",i.innerHTML=t,i},$r.prototype.ghi=function(t,i){var e=h.createElement("div");e.style.marginTop="8px",e.style.color="black";var s=h.createElement("input");s.style.fontSize="30px",s.setAttribute("id",t),s.setAttribute("type","radio"),s.setAttribute("value",t),s.setAttribute("name","field");var n=h.createElement("label");return n.style.marginLeft="4px",n.setAttribute("for",t),n.innerHTML=i,e.appendChild(s),e.appendChild(n),e},$r.prototype.whi=function(t,i){var e=h.createElement("button");e.innerHTML=t;var s=e.style;return s.float="right",s.textTransform="uppercase",s.color="#1094f7",s.fontSize="14px",s.letterSpacing=0,s.border=0,s.background="none",s.marginTop="16px",e.addEventListener("click",i),e};void 0!==s||("undefined"!=typeof global?global:"undefined"!=typeof self&&self);var Z5=function(t,i){return t(i={exports:{}},i.exports),i.exports}((function(t,i){var e;e=function(){return function(t){var i={};function e(s){if(i[s])return i[s].exports;var n=i[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||w.defineProperty(t,i,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return w.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=0)}([function(t,i,e){var n=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),w.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}(),r=e(1),o=void 0!==Dl&&C((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(Dl.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!s.MSStream,a=function(){function t(){!function(t,i){if(!(t instanceof i))throw new b("Cannot call a class as a function")}(this,t),o?this.noSleepTimer=null:(this.noSleepVideo=h.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",r),this.noSleepVideo.addEventListener("timeupdate",function(t){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=_.random())}.bind(this)))}return n(t,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=s.setInterval((function(){s.location.href="/",s.setTimeout(s.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(s.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),t}();t.exports=a},function(t,i,e){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},t.exports=e()})),K5=function(t){return t&&t.__esModule?t.default:t}(Z5),J5=1e3,$5=[0,0,.5,1],t6=[.5,0,.5,1],i6=s.requestAnimationFrame,e6=s.cancelAnimationFrame;function s6(t){w.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return Cs("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function Os(t){var i=!("wakelock"in(t=t||{}))||t.wakelock;this.isPolyfilled=!0,this.displayId=J5++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,w.defineProperty(this,"isConnected",{get:function(){return Cs("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new s6({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.vhi=!1,this.Yp=null,this.Ahi=null,this.GY=null,this.y7=null,this.mhi=null,this.phi=null,this.yhi=null,this.Mhi=null,i&&_5()&&(this.Thi=new K5)}Os.prototype.getFrameData=function(t){return A5(t,this.Nhi(),this)},Os.prototype.getPose=function(){return Cs("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this.Nhi()},Os.prototype.resetPose=function(){return Cs("VRDisplay.prototype.resetPose"),this.Dhi()},Os.prototype.getImmediatePose=function(){return Cs("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this.Nhi()},Os.prototype.requestAnimationFrame=function(t){return i6(t)},Os.prototype.cancelAnimationFrame=function(t){return e6(t)},Os.prototype.wrapForFullscreen=function(t){if(Dh())return t;if(!this.y7){this.y7=h.createElement("div");var i=["height: "+_.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.y7.setAttribute("style",i.join("; ")+";"),this.y7.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.GY==t)return this.y7;if(this.GY&&(this.Ahi?this.Ahi.appendChild(this.GY):this.GY.parentElement.removeChild(this.GY)),this.GY=t,this.Ahi=t.parentElement,this.Ahi||h.body.appendChild(t),!this.y7.parentElement){var e=this.GY.parentElement;e.insertBefore(this.y7,this.GY),e.removeChild(this.GY)}this.y7.insertBefore(this.GY,this.y7.firstChild),this.mhi=this.GY.getAttribute("style");var s=this;return function(){if(s.GY){var t=["position: absolute","top: 0","left: 0","width: "+_.max(screen.width,screen.height)+"px","height: "+_.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];s.GY.setAttribute("style",t.join("; ")+";")}}(),this.y7},Os.prototype.removeFullscreenWrapper=function(){if(this.GY){var t=this.GY;this.mhi?t.setAttribute("style",this.mhi):t.removeAttribute("style"),this.GY=null,this.mhi=null;var i=this.y7.parentElement;return this.y7.removeChild(t),this.Ahi===i?i.insertBefore(t,this.y7):this.Ahi&&this.Ahi.appendChild(t),i.removeChild(this.y7),t}},Os.prototype.requestPresent=function(t){var i=this.isPresenting,e=this;return t instanceof Array||(Cs("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),t=[t]),new Promise((function(s,n){if(e.capabilities.canPresent)if(0==t.length||t.length>e.capabilities.maxLayers)n(new g("Invalid number of layers."));else{var r=t[0];if(r.source){var o=r.leftBounds||$5,a=r.rightBounds||t6;if(i){var u=e.Yp;u.source!==r.source&&(u.source=r.source);for(var c=0;c<4;c++)u.leftBounds[c]=o[c],u.rightBounds[c]=a[c];return e.wrapForFullscreen(e.Yp.source),e.Shi(),void s()}if(e.Yp={predistorted:r.predistorted,source:r.source,leftBounds:o.slice(0),rightBounds:a.slice(0)},e.vhi=!1,e.Yp&&e.Yp.source){var l=e.wrapForFullscreen(e.Yp.source);e.Ihi(l,(function(){var t=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;e.isPresenting=l===t,e.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(t){console.error("screen.orientation.lock() failed due to",t.message)})),e.vhi=!1,e.Ehi(),s()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),e.disableWakeLock(),e.bhi(),e.removeFullscreenWrapper(),e.Lhi()),e.khi()}),(function(){e.vhi&&(e.removeFullscreenWrapper(),e.Lhi(),e.disableWakeLock(),e.vhi=!1,e.isPresenting=!1,n(new g("Unable to present.")))})),!function(t){if(h.fullscreenEnabled&&t.requestFullscreen)t.requestFullscreen();else if(h.webkitFullscreenEnabled&&t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(h.mozFullScreenEnabled&&t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!h.msFullscreenEnabled||!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0}(l)?(Dh()||s5())&&(e.enableWakeLock(),e.isPresenting=!0,e.Ehi(),e.khi(),s()):(e.enableWakeLock(),e.vhi=!0)}e.vhi||Dh()||(l5(),n(new g("Unable to present.")))}else s()}else n(new g("VRDisplay is not capable of presenting."))}))},Os.prototype.exitPresent=function(){var t=this.isPresenting,i=this;return this.isPresenting=!1,this.Yp=null,this.disableWakeLock(),new Promise((function(e,s){t?(l5(),i.bhi(),i.removeFullscreenWrapper(),i.Lhi(),i.khi(),e()):s(new g("Was not presenting to VRDisplay."))}))},Os.prototype.getLayers=function(){return this.Yp?[this.Yp]:[]},Os.prototype.khi=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});s.dispatchEvent(t)},Os.prototype.xhi=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});s.dispatchEvent(t)},Os.prototype.Ihi=function(t,i,e){this.Lhi(),this.phi=t,this.yhi=i,this.Mhi=e,i&&(h.fullscreenEnabled?t.addEventListener("fullscreenchange",i,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",i,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenchange",i,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",i,!1)),e&&(h.fullscreenEnabled?t.addEventListener("fullscreenerror",e,!1):h.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",e,!1):h.mozFullScreenEnabled?h.addEventListener("mozfullscreenerror",e,!1):h.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",e,!1))},Os.prototype.Lhi=function(){if(this.phi){var t=this.phi;if(this.yhi){var i=this.yhi;t.removeEventListener("fullscreenchange",i,!1),t.removeEventListener("webkitfullscreenchange",i,!1),h.removeEventListener("mozfullscreenchange",i,!1),t.removeEventListener("msfullscreenchange",i,!1)}if(this.Mhi){var e=this.Mhi;t.removeEventListener("fullscreenerror",e,!1),t.removeEventListener("webkitfullscreenerror",e,!1),h.removeEventListener("mozfullscreenerror",e,!1),t.removeEventListener("msfullscreenerror",e,!1)}this.phi=null,this.yhi=null,this.Mhi=null}},Os.prototype.enableWakeLock=function(){this.Thi&&this.Thi.enable()},Os.prototype.disableWakeLock=function(){this.Thi&&this.Thi.disable()},Os.prototype.Ehi=function(){},Os.prototype.bhi=function(){},Os.prototype.submitFrame=function(t){},Os.prototype.getEyeParameters=function(t){return null};var n6={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},r6="left",h6="right";function Xn(t){var i=g5({},n6);t=g5(i,t||{}),Os.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new s6({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.Chi=this.config.BUFFER_SCALE,this.Ohi=new H5(this.config),this.jhi=null,this.Phi=null,this.p7=null,this.zhi=null,this.Bhi=new B5(this.config.DPDB_URL,this.Rhi.bind(this)),this.Uhi=new Ea(this.Bhi.getDeviceParams()),this.Qhi=new $r,this.Qhi.onChange(this.Fhi.bind(this)),this.Uhi.setViewer(this.Qhi.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.Yhi=new Js),Dh()&&s.addEventListener("resize",this.bY.bind(this))}Xn.prototype=w.create(Os.prototype),Xn.prototype.Nhi=function(){return{position:null,orientation:this.Ohi.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Xn.prototype.Dhi=function(){this.Ohi.resetPose&&this.Ohi.resetPose()},Xn.prototype.Lri=function(t){var i;if(t==r6)i=this.Uhi.getFieldOfViewLeftEye();else{if(t!=h6)return console.error("Invalid eye provided: %s",t),null;i=this.Uhi.getFieldOfViewRightEye()}return i},Xn.prototype.kri=function(t){var i;if(t==r6)i=[.5*-this.Uhi.viewer.interLensDistance,0,0];else{if(t!=h6)return console.error("Invalid eye provided: %s",t),null;i=[.5*this.Uhi.viewer.interLensDistance,0,0]}return i},Xn.prototype.getEyeParameters=function(t){var i=this.kri(t),e=this.Lri(t),s={offset:i,renderWidth:.5*this.Uhi.device.width*this.Chi,renderHeight:this.Uhi.device.height*this.Chi};return w.defineProperty(s,"fieldOfView",{enumerable:!0,get:function(){return Cs("VRFieldOfView","VRFrameData's projection matrices"),e}}),s},Xn.prototype.Rhi=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.Uhi.updateDeviceParams(t),this.jhi&&this.jhi.updateDeviceInfo(this.Uhi)},Xn.prototype.Ghi=function(){this.Yp&&this.jhi&&(this.Yp.leftBounds||this.Yp.rightBounds)&&this.jhi.setTextureBounds(this.Yp.leftBounds,this.Yp.rightBounds)},Xn.prototype.Ehi=function(){var t=this.Yp.source.getContext("webgl");if(t||(t=this.Yp.source.getContext("experimental-webgl")),t||(t=this.Yp.source.getContext("webgl2")),t){if(this.p7=t.canvas,this.zhi=t.canvas.getAttribute("style"),this.Yp.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=u5()*this.Chi,t.canvas.height=c5()*this.Chi,this.Phi=new E5(t)):(this.config.CARDBOARD_UI_DISABLED||(this.Phi=new E5(t)),this.jhi=new ne(t,this.Phi,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.jhi.updateDeviceInfo(this.Uhi)),this.Phi&&this.Phi.listen(function(t){this.Qhi.show(this.Yp.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.Yhi){var i=this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT;a5()&&_5()&&i?this.Yhi.showTemporarily(i,this.Yp.source.parentElement):this.Yhi.update()}this.orientationHandler=this.Xri.bind(this),s.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.Ghi.bind(this),s.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.bY(),this.Vhi()}},Xn.prototype.bhi=function(){this.jhi&&(this.jhi.destroy(),this.jhi=null),this.Phi&&(this.Phi.destroy(),this.Phi=null),this.Yhi&&this.Yhi.hide(),this.Qhi.hide(),this.p7&&(v5(this.p7),this.zhi?this.p7.setAttribute("style",this.zhi):this.p7.removeAttribute("style"),w5(this.p7),this.p7=null,this.zhi=null),s.removeEventListener("orientationchange",this.orientationHandler),s.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Xn.prototype.Shi=function(){this.bhi(),this.Ehi()},Xn.prototype.submitFrame=function(t){if(this.jhi)this.Ghi(),this.jhi.submitFrame();else if(this.Phi&&this.Yp){var i=this.Yp.source.getContext("webgl").canvas;i.width==this.lastWidth&&i.height==this.lastHeight||this.Phi.onResize(),this.lastWidth=i.width,this.lastHeight=i.height,this.Phi.render()}},Xn.prototype.Xri=function(t){this.Qhi.hide(),this.Yhi&&this.Yhi.update(),this.bY()},Xn.prototype.bY=function(t){if(this.Yp){var i=this.Yp.source.getContext("webgl");v5(i.canvas);i.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),w5(i.canvas)}},Xn.prototype.Fhi=function(t){this.Uhi.setViewer(t),this.jhi&&this.jhi.updateDeviceInfo(this.Uhi),this.Vhi()},Xn.prototype.Vhi=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.Uhi}});s.dispatchEvent(t)},Xn.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},Xn.VRDisplay=Os;var o6={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:3e3,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function Hn(t){this.config=$3($3({},o6),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in Dl,this.native={},this.native.getVRDisplays=Dl.getVRDisplays,this.native.VRFrameData=s.VRFrameData,this.native.VRDisplay=s.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&K3())&&(this.enable(),this.getVRDisplays().then((function(t){t&&t[0]&&t[0].xhi&&t[0].xhi()})))}Hn.prototype.getPolyfillDisplays=function(){if(this.Whi)return this.polyfillDisplays;if(K3()){var t=new Xn({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:this.config.ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this.Whi=!0,this.polyfillDisplays},Hn.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,e=this.native.VRDisplay.prototype.getFrameData;s.VRDisplay.prototype.getFrameData=function(s){s instanceof t?e.call(this,s):(e.call(this,i),s.pose=i.pose,J3(i.leftProjectionMatrix,s.leftProjectionMatrix),J3(i.rightProjectionMatrix,s.rightProjectionMatrix),J3(i.leftViewMatrix,s.leftViewMatrix),J3(i.rightViewMatrix,s.rightViewMatrix))}}Dl.getVRDisplays=this.getVRDisplays.bind(this),s.VRDisplay=Xn.VRDisplay,s.VRFrameData=Xn.VRFrameData},Hn.prototype.getVRDisplays=function(){var t,i=this,e=this.config;return this.hasNative?function(t){return Promise.race?Promise.race(t):new Promise((function(i,e){for(var s=0;s<t.length;s++)t[s].then(i,e)}))}([this.native.getVRDisplays.call(Dl),new Promise((function(i){t=u((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),i([])}),e.GET_VR_DISPLAYS_TIMEOUT)}))]).then((function(e){return c(t),e.length>0?e:i.getPolyfillDisplays()})):Promise.resolve(this.getPolyfillDisplays())},Hn.version="0.10.5-opentelly.3",Hn.VRFrameData=Xn.VRFrameData,Hn.VRDisplay=Xn.VRDisplay;var a6=w.freeze({default:Hn}),u6=a6&&Hn||a6;void 0!==Z3&&Z3.window&&(Z3.document||(Z3.document=Z3.window.document),Z3.navigator||(Z3.navigator=Z3.window.navigator));new u6({TOUCH_PANNER_DISABLED:!0,ROTATE_INSTRUCTIONS_LANDSCAPE_TIMEOUT:0,MOBILE_WAKE_LOCK:!f.Mb&&!f.Ga,DPDB_URL:void 0});var St,c6=class{Hhi(t,i){const e=this.qhi;let s;switch(i){case e.VERTEX_SHADER:s=e.createShader(i),this.Xhi=s;break;case e.FRAGMENT_SHADER:s=e.createShader(i),this.Zhi=s;break;default:return void console.error("Invalid Shader Type:",i)}e.attachShader(this.Khi,s),e.shaderSource(s,t),e.compileShader(s)}Jhi(t){const i=this.qhi;if(t){this.$hi={};for(const e in t)i.bindAttribLocation(this.Khi,t[e],e),this.$hi[e]=t[e]}}toi(){this.qhi.linkProgram(this.Khi)}ioi(){const t=this.qhi;if(this.eoi){if(t.getProgramParameter(this.Khi,t.LINK_STATUS)){if(!this.$hi){this.$hi={};const i=t.getProgramParameter(this.Khi,t.ACTIVE_ATTRIBUTES);for(let e=0;e<i;e++){const i=t.getActiveAttrib(this.Khi,e);this.$hi[i.name]=t.getAttribLocation(this.Khi,i.name)}}this.soi={};const i=t.getProgramParameter(this.Khi,t.ACTIVE_UNIFORMS);let e="";for(let s=0;s<i;s++){e=t.getActiveUniform(this.Khi,s).name.replace("[0]",""),this.soi[e]=t.getUniformLocation(this.Khi,e)}}else this.Xhi&&!t.getShaderParameter(this.Xhi,t.COMPILE_STATUS)?console.error("Vertex shader compile error:",t.getShaderInfoLog(this.Xhi)):this.Zhi&&!t.getShaderParameter(this.Zhi,t.COMPILE_STATUS)?console.error("Fragment shader compile error:",t.getShaderInfoLog(this.Zhi)):console.error("Program link error:",t.getProgramInfoLog(this.Khi)),t.deleteProgram(this.Khi),this.Khi=null;t.deleteShader(this.Xhi),t.deleteShader(this.Zhi),this.eoi=!1}t.useProgram(this.Khi)}constructor(t){this.$hi=null,this.soi=null,this.eoi=!0,this.Xhi=null,this.Zhi=null,this.qhi=t,this.Khi=t.createProgram()}},l6=class{pr(t,i,e){let s=this.qhi;this.noi(t,i,s,e),this.t.Ff||this.t.p7.lY(s,s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE),s.drawElements(s.TRIANGLES,this.roi,s.UNSIGNED_SHORT,0)}hoi(t){this.ooi||(t.bindTexture(t.TEXTURE_2D,this.aoi),this.t.p7.lY(t,t.TEXTURE_2D,0,t.RGB,t.RGB,t.UNSIGNED_BYTE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.ooi=!0)}noi(t,i,e,s){const n=this.Khi;n.ioi(),this.hoi(e);const r=n.soi,h=n.$hi;let o;e.uniformMatrix4fv(r.projectionMat,!1,t),e.uniformMatrix4fv(r.modelViewMat,!1,i),o="right"===s?this.uoi:this.coi,e.bindBuffer(e.ARRAY_BUFFER,o),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.loi),e.enableVertexAttribArray(h.position),e.enableVertexAttribArray(h.texCoord),e.vertexAttribPointer(h.position,3,e.FLOAT,!1,20,0),e.vertexAttribPointer(h.texCoord,2,e.FLOAT,!1,20,12),e.activeTexture(e.TEXTURE0),e.uniform1i(r.diffuse,0),e.bindTexture(e.TEXTURE_2D,this.aoi)}constructor(t,i,e){this.ooi=!1,this.qhi=t,this.aoi=t.createTexture();let s=["uniform mat4 projectionMat;","uniform mat4 modelViewMat;","attribute vec3 position;","attribute vec2 texCoord;","varying vec2 vTexCoord;","void main() {","  vTexCoord = texCoord;","  gl_Position = projectionMat * modelViewMat * vec4( position, 1.0 );","}"].join("\n"),n=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");this.Khi=new c6(t),this.Khi.Hhi(s,t.VERTEX_SHADER),this.Khi.Hhi(n,t.FRAGMENT_SHADER),this.Khi.Jhi({position:0,texCoord:1}),this.Khi.toi();const r=[],h=[],o=[],a=40;for(let t=0;t<=40;++t){const i=t*_.PI/40,s=_.sin(i),n=_.cos(i);for(let i=0;i<=a;++i){const o=2*i*_.PI/a-_.PI,u=_.sin(o)*s,c=n,l=-_.cos(o)*s,d=i/a,f=t/40;switch(e){case"horizontal":r.push(2*u,2*c,2*l,d/2,f),h.push(2*u,2*c,2*l,d/2+.5,f);break;case"vertical":r.push(2*u,2*c,2*l,d,f/2),h.push(2*u,2*c,2*l,d,f/2+.5);break;default:r.push(2*u,2*c,2*l,d,f)}}}for(let t=0;t<40;++t){let i=41*t,e=41*(t+1);for(let t=0;t<a;++t){let s=i+t,n=e+t;o.push(s,n,s+1,n,n+1,s+1)}}switch(this.coi=t.createBuffer(),this.uoi=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.coi),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.uoi),e){case"horizontal":case"vertical":t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW);break;default:t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)}this.loi=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.loi),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(o),t.STATIC_DRAW),this.roi=o.length,this.t=i}},d6=class extends hl{fa(){return new f6}constructor(){super("doi")}},f6=class extends wn{constructor(){super("stereochange")}},_6=class extends hl{fa(){return new g6}constructor(){super("foi")}},g6=class extends wn{constructor(){super("directionchange")}},$e=_.PI/180,w6=180/_.PI,$h=class{iP(t,i){return this.x=t,this.y=i,this}Klt(t){return this.x=t.x,this.y=t.y,this}_oi(t){return this.iP(t[0],t[1])}goi(){const t=new Float32Array(2);return t[0]=this.x,t[1]=this.y,t}woi(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}constructor(t,i){this.x=t||0,this.y=i||0}},$s=class{iP(t,i,e){return this.x=t,this.y=i,this.z=e,this}Klt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}_oi(t){return this.iP(t[0],t[1],t[2])}goi(){const t=new Float32Array(3);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t}U(){return _.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}voi(){const t=this.U();if(0!==t){const i=1/t;this.Aoi(i)}else this.x=0,this.y=0,this.z=0;return this}Aoi(t){this.x*=t,this.y*=t,this.z*=t}moi(t){const i=this.x,e=this.y,s=this.z,n=t.x,r=t.y,h=t.z,o=t.w,a=o*i+r*s-h*e,u=o*e+h*i-n*s,c=o*s+n*e-r*i,l=-n*i-r*e-h*s;return this.x=a*o+l*-n+u*-h-c*-r,this.y=u*o+l*-r+c*-n-a*-h,this.z=c*o+l*-h+a*-r-u*-n,this}poi(t){return this.x*t.x+this.y*t.y+this.z*t.z}yoi(t,i){const e=t.x,s=t.y,n=t.z,r=i.x,h=i.y,o=i.z;return this.x=s*o-n*h,this.y=n*r-e*o,this.z=e*h-s*r,this}constructor(t,i,e){this.x=t||0,this.y=i||0,this.z=e||0}},v6=class{iP(t,i,e,s){return this.x=t,this.y=i,this.z=e,this.w=s,this}Klt(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this}_oi(t){return this.iP(t[0],t[1],t[2],t[3])}goi(){const t=new Float32Array(4);return t[0]=this.x,t[1]=this.y,t[2]=this.z,t[3]=this.w,t}poi(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}nD(t){return this.Moi(this,t)}Moi(t,i){const e=t.x,s=t.y,n=t.z,r=t.w,h=i.x,o=i.y,a=i.z,u=i.w;return this.x=e*u+r*h+s*a-n*o,this.y=s*u+r*o+n*h-e*a,this.z=n*u+r*a+e*o-s*h,this.w=r*u-e*h-s*o-n*a,this}Toi(){return this.x*=-1,this.y*=-1,this.z*=-1,this.voi(),this}Noi(){const t=this.x,i=this.y,e=this.z,s=this.w,n=t*i+e*s;let r,h,o;if(n>.499)r=2*_.atan2(t,s),h=_.PI/2,o=0;else if(n<-.499)r=-2*_.atan2(t,s),h=-_.PI/2,o=0;else{const a=t*t,u=i*i,c=e*e;r=_.atan2(2*i*s-2*t*e,1-2*u-2*c),h=_.asin(2*n),o=_.atan2(2*t*s-2*i*e,1-2*a-2*c)}return new oi(r,o,h)}voi(){let t=_.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this}constructor(t,i,e,s){this.x=t||0,this.y=i||0,this.z=e||0,this.w=void 0!==s?s:1}},oi=class{iP(t,i,e){return this.Doi=t,this.Soi=i,this.Ioi=e,this}Klt(t){return this.iP(t.Doi,t.Soi,t.Ioi)}ET(t){return this.Doi+=t.Doi,this.Soi+=t.Soi,this.Ioi+=t.Ioi,this}Eoi(){const t=this.Doi,i=this.Ioi,e=this.Soi,s=_.cos(t/2),n=_.cos(i/2),r=_.cos(e/2),h=_.sin(t/2),o=_.sin(i/2),a=_.sin(e/2),u=s*n,c=h*o;return new v6(u*a+c*r,h*n*r+s*o*a,s*o*r-h*n*a,u*r-c*a)}constructor(t,i,e){this.Doi=t||0,this.Soi=i||0,this.Ioi=e||0}},A6=.15,m6=class{YS(){this.Rt||(this.Rt=!0,this.we.addEventListener("keydown",this.boi),this.we.addEventListener("mousedown",this.Loi),this.we.addEventListener("touchstart",this.koi),s.addEventListener("mousemove",this.er),s.addEventListener("mouseup",this.xoi),this.Coi(s),s.addEventListener("touchmove",this.Ooi),s.addEventListener("touchend",this.joi))}Coi(t){if(bM(t));else if(LM(t))try{t.parent.addEventListener("mouseup",this.xoi),this.Coi(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.Poi)}}GS(){this.Rt&&(this.Rt=!1,this.zoi=!1,this.Boi&&(Go(this.Boi),this.Boi=null),this.we.removeEventListener("keydown",this.boi),this.we.removeEventListener("mousedown",this.Loi),this.we.removeEventListener("touchstart",this.koi),s.removeEventListener("mousemove",this.er),s.removeEventListener("mouseup",this.xoi),this.Roi(s),s.removeEventListener("touchmove",this.Ooi),s.removeEventListener("touchend",this.joi))}Roi(t){if(t.document.documentElement.removeEventListener("mouseleave",this.Poi),LM(t))try{t.parent.removeEventListener("mouseup",this.xoi),this.Roi(t.parent)}catch(t){}}get Uoi(){return new oi(this.Qoi,this.Foi,this.Yoi)}set Uoi(t){this.Qoi=t.Doi,this.Foi=t.Soi,this.Yoi=t.Ioi}Goi(t){this.Voi("Qoi",t)}Woi(t){t=os(t,-_.PI/2,_.PI/2),this.Voi("Foi",t)}Voi(t,i){this.Boi&&Go(this.Boi);let e=this[t],s=Uo(),n=()=>{let r=Uo()-s;if(r>=80)return this[t]=i,Go(this.Boi),void(this.Boi=null);this.Boi=le(n);let h=r/80;this[t]=e+(i-e)*h};this.Boi=le(n)}Hoi(){this.Foi+=2*_.PI*this.qoi.y/this.we.clientHeight*.3,this.Qoi+=2*_.PI*this.qoi.x/this.we.clientWidth*.5,this.Foi=os(this.Foi,-_.PI/2,_.PI/2)}Xoi(){this.zoi=!1}Zoi(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.we}resetPose(){this.Foi=0,this.Qoi=0}gn(){this.GS()}constructor(t){this.Rt=!1,this.Foi=0,this.Qoi=0,this.Yoi=0,this.Boi=null,this.Koi=new $h,this.Joi=new $h,this.qoi=new $h,this.zoi=!1,this.boi=t=>{38===t.keyCode?this.Woi(this.Foi+A6):39===t.keyCode?this.Goi(this.Qoi-A6):40===t.keyCode?this.Woi(this.Foi-A6):37===t.keyCode&&this.Goi(this.Qoi+A6)},this.Loi=t=>{this.Koi.iP(t.clientX,t.clientY),this.zoi=!0,t.preventDefault()},this.koi=t=>{t.touches&&1===t.touches.length&&(this.Koi.iP(t.touches[0].pageX,t.touches[0].pageY),this.zoi=!0,t.preventDefault())},this.er=t=>{if(this.zoi||this.Zoi()){if(this.Zoi()){let i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.Joi.iP(this.Koi.x-i,this.Koi.y-e)}else this.Joi.iP(t.clientX,t.clientY);this.qoi.woi(this.Joi,this.Koi),this.Koi.Klt(this.Joi),this.Hoi()}},this.Ooi=t=>{this.zoi&&(this.Joi.iP(t.touches[0].pageX,t.touches[0].pageY),this.qoi.woi(this.Joi,this.Koi),this.Koi.Klt(this.Joi),this.Hoi())},this.xoi=t=>{this.Xoi()},this.joi=t=>{this.Xoi()},this.Poi=t=>{this.Xoi()},this.we=t}},te=Vs(Ul()),p6=Vs(Ql()),y6=(Vs(Fl()),Vs(Yl())),M6=(Vs(Gl()),Vs(Vl())),T6=Vs(Wl()),N6=Vs(Hl()),D6=Vs(ql()),S6=Vs(Xl()),I6=["foi","Krt","doi","error"];function E6(t){let i,e={get stereo(){return t.$oi},set stereo(i){t.$oi=i},get useDeviceMotionControls(){return t.tai},set useDeviceMotionControls(i){t.tai=i},get direction(){return t.iai},set direction(i){t.iai=i},get verticalFOV(){return t.eai},set verticalFOV(i){t.eai=i},get canPresentVR(){return t.sai},get state(){return t.glt},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new Fo(t,I6,e),e}!function(t){t.Rs="unavailable",t.nai="available",t.Oa="presenting"}(St||(St={}));var b6=new oi(0*$e,0,0);function L6(t){return hd(t+180,360)-180}function k6(t,i){let e=t.poi(i);return 1-e*e<1e-4}var x6=class extends Bo{ko(){Dl.getVRDisplays?(this.rai=new VRFrameData,this.hai(),s.addEventListener("vrdisplayconnect",this.hai,!1),s.addEventListener("vrdisplaydisconnect",this.hai,!1),s.addEventListener("vrdisplayactivate",this.oai,!1),s.addEventListener("vrdisplaydeactivate",this.aai,!1),s.addEventListener("vrdisplaypresentchange",this.uai,!1)):Dl.getVRDevices?this.YLt("Your browser supports WebVR but not the latest version.",Ui.VR_PLATFORM_UNSUPPORTED):this.YLt("Your browser does not support WebVR.",Ui.VR_PLATFORM_UNSUPPORTED),this.t.yn(Co.lo,this.do),this.do()}cai(){let t={alpha:!1,antialias:!1,preserveDrawingBuffer:!0};if(!this.lai){const t=h.createElement("canvas");t.className="theoplayer-vr",gn(t),t.style.zIndex="2",this.t.we.appendChild(t),this.lai=t}this.qhi=this.lai.getContext("webgl",t),this.qhi||(this.qhi=this.lai.getContext("experimental-webgl",t),this.qhi)?(this.qhi.enable(this.qhi.DEPTH_TEST),this.qhi.enable(this.qhi.CULL_FACE)):this.YLt("Your browser does not support WebGL.",Ui.VR_PLATFORM_UNSUPPORTED)}fai(){let t=this.iai;this._ai||(this.cai(),this._ai=!0),this.qhi&&(this.gai(new l6(this.qhi,this.t,this.wai)),this.lai.style.display="",this.gi||(this.gi=new m6(this.lai)),this.gi.YS(),this.t.ya.yn(ge.ra,this.bY),this.t.yn(ii.pn,this.bY),this.iai=t,this.bY(),this.vai=le(this.Aai))}mai(){let t=this.iai;this.gai(void 0),this.gi&&this.gi.GS(),this.lai&&(this.lai.style.display="none"),this.t.ya.fn(ge.ra,this.bY),this.t.fn(ii.pn,this.bY),this.vai&&Go(this.vai),this.iai=t}pai(){var t;return null==(t=this.t.Wa())?void 0:t.vr}yai(t){let i=this.glt,e=this.$oi;this.Mai&&(this.Tai=void 0,this.aai()),this.Mai=t,this.Mai&&(this.Mai.depthNear=.1,this.Mai.depthFar=1024),this.$oi=e,this.glt!==i&&this.Co(new Ph),this.$oi!==e&&this.Co(new d6)}Nai(t){let i=this.glt;this.Dai=t,this.glt!==i&&this.Co(new Ph)}gai(t){let i=this.glt;this.Sai=t,this.glt!==i&&this.Co(new Ph)}Iai(t){let i=this.glt,e=this.$oi;this.Eai=t,this.gi&&(t?this.gi.GS():this.gi.YS()),this.glt!==i&&this.Co(new Ph),this.$oi!==e&&this.Co(new d6)}bai(t){let i=this.$oi;this.Lai=t,this.$oi!==i&&this.Co(new d6)}kai(){let t=this.lai;this.xai===t.width&&this.Cai===t.height||(t.width=this.xai,t.height=this.Cai,this.Oai())}jai(t,i){(0,p6.default)(t,i.goi()),(0,M6.default)(t,t)}useDeviceOrientation(){return!!this.Eai||this.Pai}zai(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().catch(na)}YLt(t,i){Ma(t),this.Co(new Eo(new Rs(i,t)))}Bai(){this.Co(new _6)}get $oi(){return this.sai?this.Eai:this.Lai}set $oi(t){this.sai?t?this.oai():this.aai():this.bai(t)}get tai(){return this.Pai}set tai(t){this.$oi||(this.Pai=t,t&&f.Ga&&this.zai())}get iai(){let t=this.Uoi;return{yaw:L6(t.Doi*w6),pitch:t.Soi*w6,roll:_.round(t.Ioi*w6)}}set iai(t){let i=L6(t&&+t.yaw||0),e=L6(t&&+t.pitch||0),s=L6(t&&+t.roll||0);this.Uoi=new oi(i*$e,e*$e,s*$e)}get Uoi(){if(this.glt===St.Rs)return this.Rai.Noi();let t=this.Uai,i=this.Qai,e=new oi;return t&&e.ET(t),i&&e.ET(i),e}set Uoi(t){const i=this.Uoi.Eoi();if(this.glt===St.Rs)this.Rai=t.Eoi();else{let i=this.Mai;i&&i.resetPose&&i.resetPose(),this.gi&&(this.gi.Uoi=t),this.Rai=this.Uoi.Eoi()}k6(i,this.Rai)||this.Bai()}get Uai(){let t=this.Tai&&this.Tai.orientation;if(t)return(new v6)._oi(t).Noi()}get Qai(){return this.gi&&this.gi.Uoi}get eai(){return 180*this.Fai}set eai(t){t&&t>=0&&t<=180&&(this.Fai=+t/180)}get sai(){return!(!this.Mai||!this.Mai.capabilities.canPresent)}get glt(){var t;return this.Dai&&((null==(t=this.pai())?void 0:t.nativeVR)||this.Sai)?this.Eai?St.Oa:St.nai:St.Rs}gn(){this.xI.qd(),this.Vo(),this.mai(),this.aai(),this.t.fn(Co.lo,this.do),s.removeEventListener("vrdisplayconnect",this.hai,!1),s.removeEventListener("vrdisplaydisconnect",this.hai,!1),s.removeEventListener("vrdisplayactivate",this.oai,!1),s.removeEventListener("vrdisplaydeactivate",this.aai,!1),s.removeEventListener("vrdisplaypresentchange",this.uai,!1),this.t=void 0}constructor(t){super(),this.xI=new Wr,this.Rai=new v6,this.Fai=.4,this.Lai=!1,this.Pai=!1,this.Dai=!1,this.wd=void 0,this.wai=hu.NONE,this.gi=void 0,this.Yai=[],this.Mai=void 0,this.Eai=!1,this._ai=!1,this.lai=void 0,this.Sai=void 0,this.qhi=null,this.vai=0,this.rai=void 0,this.Tai=void 0,this.Gai=(0,te.default)(),this.Vai=(0,te.default)(),this.xai=0,this.Cai=0,this.Wai=!0,this.Hai=0,this.qai=()=>{this.t.fn(Zt.Rw,this.qai);let t=this.pai();t&&!t.nativeVR&&this.fai()},this.do=()=>{this.mai();let t=this.pai();this.wd=t,t&&t.panoramaMode!==Bc.NONE?(t.panoramaMode===Bc.PM180&&$("PanoramaMode is set to '180' while the VR API only supports '360', consider using the WebXR API if you need to play 180 degree content."),this.Nai(!0),t.nativeVR?this.Co(new Ph):(this.wai=t.stereoMode,this.t.yn(Zt.Rw,this.qai))):this.Nai(!1)},this.oai=async()=>{if(this.glt!==St.Rs&&this.sai){this.Wai=!1,this.Xai();try{await this.Mai.requestPresent([{source:this.lai}])}catch(t){this.YLt("Failed to present VR content.",Ui.VR_PRESENTATION_ERROR)}finally{this.uai()}}},this.aai=async()=>{if(this.Mai)try{await this.Mai.exitPresent()}catch(t){}finally{this.uai()}},this.hai=async()=>{try{this.Yai=await Ys(Dl.getVRDisplays(),this.xI.Wd),this.Mai&&qo(this.Yai,this.Mai)||this.yai(this.Yai[0])}catch(t){this.Yai=[],this.yai(void 0)}},this.uai=()=>{this.Iai(!!this.Mai&&this.Mai.isPresenting),this.bY(),this.Wai=!this.Eai,this.Wai?le(this.Oai):this.Xai()},this.bY=()=>{if(!this.lai)return;const t=this.t.we.offsetWidth,e=this.t.we.offsetHeight;let s=this.Mai;if(s&&this.$oi){let t=s.getEyeParameters("left"),i=s.getEyeParameters("right");t&&i&&(this.xai=2*_.max(t.renderWidth,i.renderWidth),this.Cai=_.max(t.renderHeight,i.renderHeight))}else{let s=i.Ys.T2;this.xai=t*s,this.Cai=e*s}},this.Oai=()=>{if(!f.Ga||!this.lai||!this.Wai)return;this.Xai();let t=this.lai,i=t.offsetWidth+1,e=t.offsetHeight;t.style.width=i+"px",t.style.height=e+"px",this.Hai=le(this.Xai)},this.Xai=()=>{if(!this.Hai)return;let t=this.lai;t.style.width="100%",t.style.height="100%",Go(this.Hai),this.Hai=0},this.Aai=()=>{let t=this.Mai,i=this.Fai,e=this.lai,s=this.Sai,n=this.qhi,r=this.rai,h=this.Gai,o=this.Vai;this.kai(),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),t&&this.useDeviceOrientation()&&(t.getFrameData(r),this.Tai=r.pose);let a=this.Uoi.Eoi();this.jai(o,a),t&&t.isPresenting?(this.vai=t.requestAnimationFrame(this.Aai),n.viewport(0,0,.5*e.width,e.height),s.pr(r.leftProjectionMatrix,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(r.rightProjectionMatrix,o,"right"),t.submitFrame()):(this.vai=le(this.Aai),(0,N6.default)(h,_.PI*i,e.width/e.height,.1,1024),this.$oi?(n.viewport(0,0,.5*e.width,e.height),s.pr(h,o,"left"),n.viewport(.5*e.width,0,.5*e.width,e.height),s.pr(h,o,"right")):(n.viewport(0,0,e.width,e.height),s.pr(h,o))),k6(a,this.Rai)||(this.Rai.Klt(a),this.Bai())},this.t=t,this.Uoi=b6,this.va=E6(this),this.ko()}};Vr((function(t){return class extends t{fa(){if(null!==this.Zai){const t=this.Zai.va;return lt(super.fa(),{vr:t})}return super.fa()}gn(){var t;null==(t=this.Zai)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.Zai=null,i.vr.useWebXR||(this.Zai=new x6(this))}}}),Zo.Za);var C6=class{YS(){this.Le||(this.Le=!0,this.Us.addEventListener("mousedown",this.Loi),this.Us.addEventListener("touchstart",this.koi),s.addEventListener("mousemove",this.er),s.addEventListener("touchmove",this.Ooi),s.addEventListener("mouseup",this.xoi),s.addEventListener("touchend",this.joi),this.Coi(s))}GS(){this.Le&&(this.Le=!1,this.Us.removeEventListener("mousedown",this.Loi),this.Us.removeEventListener("touchstart",this.koi),s.removeEventListener("mousemove",this.er),s.removeEventListener("touchmove",this.Ooi),s.removeEventListener("mouseup",this.xoi),s.removeEventListener("touchend",this.joi),this.Roi(s))}Coi(t){if(bM(t));else if(LM(t))try{t.parent.addEventListener("mouseup",this.xoi),this.Coi(t.parent)}catch(i){t.document.documentElement.addEventListener("mouseleave",this.Poi)}}Roi(t){if(t.document.documentElement.removeEventListener("mouseleave",this.Poi),LM(t))try{t.parent.removeEventListener("mouseup",this.xoi),this.Roi(t.parent)}catch(t){}}Xoi(){this.Kai=!1}Hoi(){const t=this.$ai.Jai;t.yaw+=2*_.PI*this.tui.x*.4/this.Us.clientWidth,t.pitch+=2*_.PI*this.tui.y*.5/this.Us.clientHeight,t.pitch=os(t.pitch,-_.PI/2,_.PI/2),this.$ai.Jai=t}Zoi(){return(h.pointerLockElement||h.mozPointerLockElement||h.webkitPointerLockElement)===this.Us}gn(){this.GS()}constructor(t,i){this.Le=!1,this.iui=new $h,this.eui=new $h,this.tui=new $h,this.Kai=!1,this.Loi=t=>{this.iui.iP(t.clientX,t.clientY),this.Kai=!0,t.preventDefault(),t.stopPropagation()},this.koi=t=>{t.touches&&1===t.touches.length&&(this.iui.iP(t.touches[0].pageX,t.touches[0].pageY),this.Kai=!0,t.preventDefault())},this.er=t=>{if(this.Kai||this.Zoi()){if(this.Zoi()){const i=t.movementX||t.mozMovementX||0,e=t.movementY||t.mozMovementY||0;this.eui.iP(this.iui.x-i,this.iui.y-e)}else this.eui.iP(t.clientX,t.clientY);this.tui.woi(this.eui,this.iui),this.iui.Klt(this.eui),this.Hoi()}},this.Ooi=t=>{this.Kai&&(this.eui.iP(t.touches[0].pageX,t.touches[0].pageY),this.tui.woi(this.eui,this.iui),this.iui.Klt(this.eui),this.Hoi())},this.xoi=()=>{this.Xoi()},this.joi=()=>{this.Xoi()},this.Poi=()=>{this.Xoi()},this.$ai=t,this.Us=i}},O6=class{sui(t){t.clearColor(...this.ZH),t.clear(t.COLOR_BUFFER_BIT)}nui(t,i){t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.DEPTH_BUFFER_BIT),this.rui.forEach((e=>{e.nui(t,i)}))}hui(t){this.rui.push(t)}oui(){this.rui=[]}constructor(){this.ZH=[0,0,0,1],this.rui=[]}},j6=class{aui(t,i,e){const s=t.createBuffer();return null===s?($("Failed to create buffer."),null):(t.bindBuffer(i,s),t.bufferData(i,e,t.STATIC_DRAW),s)}constructor(t,i,e,s,n){this.uui=t,this.rL=this.aui(t,i,e),this.cui=s,this.$0=n,this.lui=!1,this.dui=0,this.Zu=0}},P6=class extends j6{YS(t){if(null===this.rL)return void $("Attempted to enable buffer that failed to initialize.");if(null===t)return void $("Attempted to enable attribute without location.");const i=this.uui;i.bindBuffer(i.ARRAY_BUFFER,this.rL),i.vertexAttribPointer(t,this.cui,this.$0,this.lui,this.dui,this.Zu),i.enableVertexAttribArray(t)}GS(t){t&&this.uui.disableVertexAttribArray(t)}constructor(t,i,e){super(t,t.ARRAY_BUFFER,i,e,t.FLOAT)}};var z6,Lt,ws,B6=class extends j6{fui(){const t=this.uui;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.rL),t.drawElements(t.TRIANGLES,this._ui,this.$0,this.Zu)}constructor(t,i){super(t,t.ELEMENT_ARRAY_BUFFER,i,1,t.UNSIGNED_SHORT),this._ui=i.length}};!function(t){t.VertexPos="aVertexPosition",t.VertexUV="aVertexUV",t.VertexColor="aVertexColor"}(z6||(z6={})),function(t){t.ProjectionMat="uProjectionMatrix",t.ModelViewMat="uModelViewMatrix",t.Texture="uTexture"}(Lt||(Lt={})),function(t){t.Normal="vNormal",t.Color="vColor",t.UV="vUV"}(ws||(ws={}));var R6=class{gui(t,i,e){const s=this.wui(t,t.VERTEX_SHADER,i),n=this.wui(t,t.FRAGMENT_SHADER,e);if(null===s||null===n)return $("Failed to create vertex or fragment shader."),null;const r=t.createProgram();return null===r?($("Failed to create shader program"),null):(t.attachShader(r,s),t.attachShader(r,n),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)?r:($("Failed to initialize shader program"),null))}wui(t,i,e){const s=t.createShader(i);if(null===s)return $("failed to create shader."),null;if(t.shaderSource(s,e),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS)){const i=t.getShaderInfoLog(s);return $("Failed to compile shader with error: "+i),t.deleteShader(s),null}return s}vui(){return this.Aui}mui(t){const i=this.Aui;if(null===i)return $("Attempted to retrieve attribute location when shader program was not initialized"),null;const e=this.uui.getAttribLocation(i,t);return-1===e?null:e}pui(t){const i=this.Aui;if(null===i)return $("Attempted to retrieve uniform location when shader program was not initialized"),null;const e=this.uui.getUniformLocation(i,t);return null===e&&Ma("Attempted to retrieve nonexistent uniform: "+t),e}constructor(t,i,e){this.uui=t,this.Aui=this.gui(this.uui,i,e)}},U6=class{yui(){const t=this.Mui.length,i=_.max(...this.Tui);return i>=t?(Ma("Created geometry where largest index ("+i+") is larger than/equal to attribute array size ("+t+")"),!1):(i<t-1&&$("Created geometry where largest index ("+i+") is smaller than attribute buffer - 1 ("+(t-1)+") resulting in unused vertices"),!this.Nui||this.Nui.length===t||(Ma("Created geometry where position ("+t+") and uv ("+this.Nui.length+") buffers have different length."),!1))}Dui(t,i){if(!this.yui())throw new g("Failed to validate buffers for WebGLGeometry.");const e=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y,t.z)})),new P6(t,new Float32Array(e),3)}(t,this.Mui),s=function(t,i){return new B6(t,new Uint16Array(i))}(t,this.Tui),n=function(t,i){const e=[];return i.forEach((t=>{e.push(t.x,t.y)})),new P6(t,new Float32Array(e),2)}(t,this.Nui);return new Q6(e,s,n,i)}constructor(t,i,e){this.Mui=t,this.Tui=i,this.Nui=e}},Q6=class{Sui(){this.Mui.YS(this.Iui),null!==this.Eui&&this.Nui.YS(this.Eui)}bui(){this.Mui.GS(this.Iui),null!==this.Eui&&this.Nui.GS(this.Eui)}nui(){this.Tui.fui()}constructor(t,i,e,s){this.Mui=t;const n=s.mui(z6.VertexPos);if(null===n)throw new g("Failed to get position attribute location.");this.Iui=n,this.Nui=e,this.Eui=s.mui(z6.VertexUV),this.Tui=i}},F6=class extends U6{constructor(t=1,i=32,e=16,s=0,n=2*_.PI,r=0,h=_.PI){let o=0;const a=_.min(r+h,_.PI),u=[],c=[],l=[],d=[];for(let u=0;u<=e;u++){const f=[],g=u/e;let w=0;0===u&&0===r?w=.5/i:u===e&&a===_.PI&&(w=-.5/i);for(let e=0;e<=i;e++){const a=e/i,u=-t*_.cos(s+a*n)*_.sin(r+g*h),d=t*_.cos(r+g*h),v=t*_.sin(s+a*n)*_.sin(r+g*h);c.push(new $s(u,d,v)),l.push(new $h(a+w,1-g)),f.push(o++)}d.push(f)}for(let t=0;t<e;t++)for(let s=0;s<i;s++){const i=d[t][s+1],n=d[t][s],h=d[t+1][s],o=d[t+1][s+1];(0!==t||r>0)&&u.push(i,n,o),(t!==e-1||a<_.PI)&&u.push(n,h,o)}super(c,u,l)}},Y6=[0,0,0,255,0,0,0,255,0,0,0,255,0,0,0,255],G6=class{Lui(){const t=this.uui;t.activeTexture(this.kui),t.bindTexture(t.TEXTURE_2D,this.xui)}ur(){const t=this.uui;t.activeTexture(this.kui),t.bindTexture(t.TEXTURE_2D,this.xui),t.uniform1i(this.Cui,0)}Oui(t){const i=this.uui;i.bindTexture(i.TEXTURE_2D,this.xui),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,this.qK,this.jui,this.Pui,this.zui,t),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}Bui(t){const i=this.uui;i.bindTexture(i.TEXTURE_2D,this.xui),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),t.p7.lY(i,i.TEXTURE_2D,this.qK,this.jui,this.Pui,this.zui),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!1)}constructor(t,i){if(this.uui=t,this.xui=t.createTexture(),null===this.xui)throw new g("Failed to create texture");const e=i.pui(Lt.Texture);if(null===e)throw new g("Failed to get texture location.");this.Cui=e,t.bindTexture(t.TEXTURE_2D,this.xui),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),this.kui=t.TEXTURE0,this.qK=0,this.jui=t.RGBA,this.Pui=t.RGBA,this.zui=t.UNSIGNED_BYTE,t.texImage2D(t.TEXTURE_2D,this.qK,this.jui,2,2,0,this.Pui,this.zui,new j(Y6))}},V6="\n    attribute vec4 "+z6.VertexPos+";\n    attribute vec2 "+z6.VertexUV+";\n\n    uniform mat4 "+Lt.ModelViewMat+";\n    uniform mat4 "+Lt.ProjectionMat+";\n    \n    varying mediump vec2 "+ws.UV+";\n    \n    void main() {\n      gl_Position = "+Lt.ProjectionMat+" * "+Lt.ModelViewMat+" * "+z6.VertexPos+";\n      "+ws.UV+" = "+z6.VertexUV+";\n    }\n",W6="\n    varying mediump vec2 "+ws.UV+";\n    \n    uniform sampler2D "+Lt.Texture+";\n\n    void main() {\n      gl_FragColor = texture2D("+Lt.Texture+", "+ws.UV+");\n    }\n",H6=class{vui(){return this.Aui}YS(){this.uui.useProgram(this.Aui.vui()),this.xui.ur()}Rui(t){this.xui.Oui(t)}Uui(t){this.xui.Bui(t)}constructor(t){this.uui=t,this.Aui=new R6(t,V6,W6),this.xui=new G6(t,this.Aui)}},q6=class{nui(t,i){if(this.Qui(i.Fui)){this.Yui.Sui(),this.Gui.YS();const e=this.Vui,s=i.Wui,n=(0,T6.default)(s,s,e);t.uniformMatrix4fv(this.Hui,!1,n);const r=i.qui;t.uniformMatrix4fv(this.Xui,!1,r),this.Yui.nui(),this.Yui.bui()}}Qui(t){return"none"===this.Fui||"right"!==t&&"left"===this.Fui||"right"===t&&"right"===this.Fui}get Vui(){const t=(0,te.default)(),i=this.po;return(0,S6.default)(t,t,i.goi()),(0,D6.default)(t,t,this.Zui.x,new Float32Array([1,0,0])),(0,D6.default)(t,t,this.Zui.y,new Float32Array([0,1,0])),(0,D6.default)(t,t,this.Zui.z,new Float32Array([0,0,1])),t}constructor(t,i,e,s){this.po=new $s,this.Zui=new $s,this.Fui="none",this.Gui=e;const n=e.vui();this.Yui=i.Dui(t,n),s&&(this.Fui=s);const r=n.pui(Lt.ModelViewMat);if(null===r)throw new g("Failed to get model view matrix location.");this.Hui=r;const h=n.pui(Lt.ProjectionMat);if(null===h)throw new g("Failed to get projection matrix location.");this.Xui=h}},X6=class{Kui(){const t=(0,te.default)();return(0,N6.default)(t,this.Jui,this.$ui,this.tci,this.ici)}eci(){this.sci=this.Kui()}get qui(){return new Float32Array(this.sci)}set qui(t){this.sci=t}nci(){const t=(0,te.default)(),i=(0,y6.default)((0,te.default)(),this.rci.goi()),e=(0,p6.default)((0,te.default)(),this.hci.goi());return(0,T6.default)(t,i,e),(0,M6.default)(t,t),t}aci(){this.uci=this.nci()}get Wui(){return new Float32Array(this.uci)}cci(){this.aci(),this.eci()}tr(){this.rci=new $s,this.Zui=new v6,this.cci()}lci(t){const i=this.hci.Noi();i.ET(t),this.Zui=i.Eoi()}dci(t){this.Zui=t.Eoi()}get fci(){return this.Jui}set fci(t){this.Jui=t,this.eci()}get _ci(){return this.$ui}set _ci(t){this.$ui=t,this.eci()}get po(){return(new $s).Klt(this.rci)}set po(t){this.rci=t,this.aci()}get Zui(){return(new v6).Klt(this.hci)}set Zui(t){this.hci=t,this.aci()}constructor(t){this.Jui=72*_.PI/180,this.$ui=1.77,this.tci=.1,this.ici=100,this.Fui="none",this.rci=new $s,this.hci=new v6,this.sci=this.Kui(),this.uci=this.nci(),t&&(this.Fui=t)}},Z6=1e-4,K6=class extends Bo{ko(){this.gci(),this.uui?Dl.xr?(Dl.xr.addEventListener("devicechange",this.wci),this.vci().then((()=>{this.Aci?(this.mci(),this.pci(),this.yci()):this.YLt("XR: Inline session not available. Panorama functionality will not work.",Ui.VR_PRESENTATION_ERROR)}))):this.YLt("Your browser does not support WebXR",Ui.VR_PLATFORM_UNSUPPORTED):this.YLt("Your browser does not support webGL",Ui.VR_PLATFORM_UNSUPPORTED)}yci(){this.Qo.ya.yn(ge.ra,this.mn),this.Qo.yn(ii.pn,this.mn),this.Qo.yn(Co.lo,this.do),this.Qo.yn(Co.pw,this.MU)}gci(){this.Mci=h.createElement("canvas"),this.Mci.className="theoplayer-vr",this.Mci.style.zIndex="2",this.Mci.style.background="black",this.Mci.style.display="none",this.Qo.we.appendChild(this.Mci),gn(this.Mci);let t=this.Mci.getContext("webgl2");t||(t=this.Mci.getContext("webgl")),t&&(this.uui=t,this.Tci=new C6(this,this.Mci))}async vci(){Dl.xr?await Promise.all([Dl.xr.isSessionSupported("inline").then((t=>{this.Aci=t})).catch((t=>{this.Aci=!1,this.YLt("exception when calling xr.isSessionSupported for inline session: "+t,Ui.VR_PRESENTATION_ERROR)})),Dl.xr.isSessionSupported("immersive-vr").then((t=>{this.Nci=t})).catch((t=>{this.Nci=!1,this.YLt("exception when calling xr.isSessionSupported for immersive-vr session: "+t,Ui.VR_PRESENTATION_ERROR)}))]):(this.Aci=!1,this.Nci=!1)}mci(){const t=this.pai();this.wC=t,this.Dai=Boolean(t),this.Dai&&(this.Dci=(null==t?void 0:t.stereoMode)||hu.NONE,this.Sci=(null==t?void 0:t.panoramaMode)||Bc.NONE,this.Ici&&(this.Eci(this.Sci,this.Dci),this.fai()))}Eci(t,i){if(!this.uui||t===Bc.NONE)return;const e=this.uui;let s,n;this.bci.oui(),t===Bc.PM360?(s=2*_.PI,n=-_.PI/2):(s=_.PI,n=-_.PI);const r=new F6(16,60,40,0,s),h=[],o=[];for(let t=0;t<r.Nui.length;t++){const e=r.Nui[t];switch(i){case hu.NONE:h.push(e),o.push(e);break;case hu.VERTICAL:h.push(new $h(e.x,.5*e.y)),o.push(new $h(e.x,.5*e.y+.5));break;case hu.HORIZONTAL:h.push(new $h(.5*e.x,e.y)),o.push(new $h(.5*e.x+.5,e.y))}}r.Mui.forEach((t=>{t.x*=-1}));const a=new U6(r.Mui,r.Tui,h),u=new U6(r.Mui,r.Tui,o);this.Lci=new H6(e);const c=new q6(e,a,this.Lci,"left");c.Zui.y=n,this.bci.hui(c);const l=new q6(e,u,this.Lci,"right");l.Zui.y=n,this.bci.hui(l)}fai(){this.Mci.style.display="block",this.Aci&&this.Qo.yn(Co.jh,this.kci)}mai(){this.xci(),this.Qo.fn(Co.jh,this.kci),this.Mci.style.display="none"}Cci(){this.Oci(),this.jci()}async Pci(){if(this.zci||!this.Aci)return;const t={optionalFeatures:["local"]};try{const i=await Ys(Dl.xr.requestSession("inline",t),this.xI.Wd);let e;e=f.Qs?f.pE?"viewer":"local":"viewer";const s=await i.requestReferenceSpace(e);i.addEventListener("end",this.Oci),this.Bci=s,this.zci=i,this.Tci.YS(),this.Rci(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,this.uui),inlineVerticalFieldOfView:this.Jui*$e})}catch(t){this.Oci(),this.YLt(t,Ui.VR_PRESENTATION_ERROR)}}Oci(){this.zci&&(this.xci(),this.Tci.GS(),this.zci.removeEventListener("end",this.jci),this.zci.end(),this.zci=null,this.pci())}async Uci(){if(!this.Qci&&this.Nci){this.xci();try{const t=await Ys(Dl.xr.requestSession("immersive-vr"),this.xI.Wd),i=await t.requestReferenceSpace("local");t.addEventListener("end",this.jci),this.Fci=i,this.Qci=t,await this.Yci(),this.Rci()}catch(t){this.jci(),this.YLt(t,Ui.VR_PRESENTATION_ERROR)}}}async Yci(){const t=this.uui,i=this.Qci;this.Mci&&t&&i&&!this.Gci&&(this.Mci.addEventListener("webglcontextlost",(t=>{t.preventDefault()})),this.Mci.addEventListener("webglcontextrestored",(()=>{this.Eci(this.Sci,this.Dci)})),this.Gci=!0,await t.makeXRCompatible(),await i.updateRenderState({baseLayer:new XRWebGLLayer(i,t)}))}pci(){if(!this.Qci&&this.uui){const t=this.uui,e=this.Mci.clientWidth,s=this.Mci.clientHeight,n=i.Ys.T2;this.Mci.width=e*n,this.Mci.height=s*n,t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}}Rci(){null===this.Vci&&(this.Wci(),this.Hci?this.Vci=this.Hci.requestAnimationFrame(this.qci):(this.Xci(),$("XR: Attempted to start animation loop without inline or immersive session.")))}xci(){null!==this.Vci&&(this.Xci(),this.Hci?this.Hci.cancelAnimationFrame(this.Vci):$("XR: Attempted to stop animation loop by cancelAnimationFrame even though there is no session running."),this.Vci=null)}Wci(){if(null!==this.Zci)return;const t=this.Qo.v_();if(void 0===t||!(t instanceof HTMLVideoElement))return void $("No video source.");if("function"!=typeof t.requestVideoFrameCallback)return;const i=()=>{this.Lci.Uui(this.Qo),this.Zci=t.requestVideoFrameCallback(i)};this.Kci=t,this.Zci=t.requestVideoFrameCallback(i)}Xci(){var t,i;null!==this.Zci&&(null==(i=this.Kci)||null==(t=i.cancelVideoFrameCallback)||t.call(i,this.Zci),this.Kci=null,this.Zci=null)}Jci(){return!!this.$ci||(f.Ga?this.tli&&this.ili:this.tli)}zai(){const t=DeviceMotionEvent.requestPermission;"function"==typeof t&&t().then((t=>{this.ili="granted"===t}))}eli(){return(!this.Ff()||Boolean(this.sli))&&this.nli()}Ff(){return this.Qo.Ff}nli(){return this.Qo.Jf>=2}get Dai(){return this.rli}set Dai(t){const i=this.glt;this.rli=t,this.glt!==i&&this.Co(new Ph)}get Ici(){return this.Sci!==Bc.NONE}get Sci(){return this.hli}set Sci(t){const i=this.glt;this.hli=t,this.glt!==i&&this.Co(new Ph)}get Nci(){return this.oli}set Nci(t){const i=this.glt;this.oli=t,this.glt!==i&&this.Co(new Ph)}get sai(){return this.Nci}get Hci(){return this.Qci||this.zci}get Qci(){return this.$ci}set Qci(t){const i=this.glt;this.$ci=t,this.glt!==i&&this.Co(new Ph)}get ali(){return this.Fci||this.Bci}get iai(){const t=this.uli.Noi();return{yaw:t.Doi*w6,pitch:t.Soi*w6,roll:t.Ioi*w6}}set iai(t){const i=J6(t&&t.pitch||0)*$e,e=J6(t&&t.roll||0)*$e,s=J6(t&&t.yaw||0)*$e,n=new oi(s,i,e);this.uli=n.Eoi()}get Jai(){const t=this.cli.Noi();return{yaw:t.Doi,pitch:t.Soi,roll:t.Ioi}}set Jai(t){const i=$6(t&&t.pitch||0),e=$6(t&&t.roll||0),s=$6(t&&t.yaw||0),n=new oi(s,i,e);this.cli=n.Eoi()}get glt(){return this.Dai?this.Qci?St.Oa:St.nai:St.Rs}get $oi(){return null!==this.Qci}set $oi(t){const i=this.$oi;t&&this.Nci?this.Uci():this.jci(),this.$oi!==i&&this.Co(new d6)}get tai(){return this.tli}set tai(t){null===this.$ci&&(this.tli=t,t&&f.Ga&&this.zai())}get eai(){return this.Jui}set eai(t){t&&t>=0&&t<=180&&(this.Jui=t,null!==this.zci&&this.zci.updateRenderState({inlineVerticalFieldOfView:this.Jui*$e}))}YLt(t,i){Ma(t),this.Co(new Eo(new Rs(i,t)))}pai(){const t=this.Qo.Wa();return t&&t.vr}gn(){this.xI.qd(),this.Cci(),this.Vo(),this.Qo=void 0,this.uui=void 0}constructor(t){super(),this.xI=new Wr,this.Aci=!1,this.oli=!1,this.uli=new v6,this.lli=new v6,this.cli=new v6,this.Jui=74,this.tli=!1,this.wC=void 0,this.Dci=hu.NONE,this.rli=!1,this.hli=Bc.NONE,this.bci=new O6,this.zci=null,this.$ci=null,this.Bci=null,this.Fci=null,this.Gci=!1,this.Vci=null,this.Kci=null,this.Zci=null,this.sli=0,this.ili=!1,this.wci=()=>{this.vci()},this.do=()=>{this.mai(),this.Cci(),this.mci()},this.kci=()=>{this.Pci()},this.jci=()=>{this.Qci&&(YD("Ending immersive session"),this.xci(),this.Qci.removeEventListener("end",this.jci),this.Qci.end(),this.Qci=null,this.Fci=null,this.Gci=!1,this.zci?this.Rci():this.Pci())},this.mn=()=>{this.pci()},this.qci=(t,i)=>{if(!this.uui)return;const e=this.uui,s=this.Hci;if(null===this.Zci&&this.eli()&&(this.Lci.Uui(this.Qo),this.sli>0&&(this.sli-=1)),null===s||void 0===i)return void $("Attempted to run webXR animation loop without session or xrFrame.");this.Vci=s.requestAnimationFrame(this.qci);const n=s.renderState.baseLayer,r=i.getViewerPose(this.ali);if(void 0===n||void 0===r)return void $("Attempted to run webXR animation loop without glLayer or viewerPose.");e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer);let h=new oi,o=0;for(const t of r.views){const i=new X6(t.eye);if(i.qui=t.projectionMatrix,this.Jci()){let e;if(f.Qs&&f.pE&&null===this.$ci){if(e=t.transform.inverse.orientation,0===e.x&&0===e.y&&0===e.z&&1===e.w)return}else e=t.transform.orientation;i.Zui=new v6(e.x,e.y,e.z,e.w)}this.zci&&i.lci(this.cli.Noi()),h=h.ET(i.Zui.Noi()),o+=1;const s=n.getViewport(t);s&&e.viewport(s.x,s.y,s.width,s.height),this.bci.nui(e,i)}const a=new oi(h.Doi/o,h.Soi/o,h.Ioi);this.uli=a.Eoi(),function(t,i){const e=t.poi(i);return 1-e*e<Z6}(this.uli,this.lli)||(this.lli.Klt(this.uli),this.Co(new _6))},this.MU=()=>{this.sli=5},this.Qo=t,this.va=E6(this),this.ko()}};function J6(t){return hd(t+180,360)-180}function $6(t){return hd(t+_.PI,2*_.PI)-_.PI}Vr((function(t){return class extends t{fa(){return null!==this.$ai?lt(super.fa(),{vr:this.$ai.va}):super.fa()}gn(){var t;null==(t=this.$ai)||t.gn(),super.gn()}constructor(t,i){super(t,i),this.$ai=null,i.vr.useWebXR&&(this.$ai=new K6(this))}}}),Zo.Za);var t8=class extends dt{get va(){return this.Xa||(this.Xa=function(t){let i,e={get status(){return t.OS},get tasks(){return t.S7t},get network(){return t.PU.va},createTask:(i,e)=>t.dli(i,e),addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new xa(t,e),e}(this)),this.Xa}get OS(){return this.fli.OS}get S7t(){return this.fli.S7t.va}get PU(){return this._7}dli(t,i,e){let s,n;if(void 0===e&&(e="persistent"),!t)throw new g("Unexpected - The source description is undefined");if(s=De(t),n=Q2(i),SD(s))throw new g("Invalid source description");return this.fli.y7t(s,n).va}constructor(t,i){super(),this.fli=t,this._7=i,this.fli.yn("Krt",this.Ds)}};var i8=function(){const t=new dL(i.AO,!1),e=wi.Lb,s=new X2(t),n=new B2(e,s),r=new _L(t),h=new J4(e.ost,n,"persistent");return new t8(h,r)}().va;function e8(t,i){if("function"==typeof t.getAll){return $a(void 0===i?t.getAll():t.getAll(i))}return function(t){let i=new ue,e=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(e.push(s.value),s.continue()):i.Zb(e),na()},t.onerror=()=>{i.Jb(t.error),na()},i.tL}(void 0===i?t.openCursor():t.openCursor(i))}function $a(t){return new Promise(((i,e)=>{t.onsuccess=()=>{i(t.result),na()},t.onerror=()=>{e(t.error),na()}}))}var s8=class{qd(){if(this.ro)try{this.ist.abort(),this.ro=!1}catch(t){}}constructor(t){this.ist=t,this.ro=!0,this.tL=new Promise(((t,i)=>{this.ist.oncomplete=()=>{this.ro=!1,t(),na()},this.ist.onerror=()=>{this.ro&&(this.ro=!1,i(this.ist.error||new g("Transaction error")),na())},this.ist.onabort=()=>{this.ro=!1,i(new g("Transaction aborted")),na()}}))}};async function n8(t,i,e){const s=new s8(t);try{const[t]=await Promise.all([i(e),s.tL]);return t}catch(t){if(!s.ro)throw new yu("IDBTransaction committed prematurely",t);throw t}finally{s.qd()}}var r8=class{get l(){return this.Sit.l}Yet(t){return Promise.resolve("persistent"===t)}Get(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(Fe(i));return $a(this._li(Rt.cst).put(t))}async Vet(t,i){if(void 0===i&&(i="persistent"),"persistent"!==i)return Promise.reject(Fe(i));for(const e of t)await this.Get(e,i)}async Vb(t){return Boolean(await this.Wb(t))}Wb(t){return $a(this._li(Rt.ust).get(t))}Wet(t,i){return $a(this._li(Rt.ust).index(i).get(t))}async Pet(t){const i=[];for(let e of t){const t=await this.Wb(e);t&&i.push(t)}return i}Het(){return e8(this._li(Rt.ust))}qet(t){return e8(this._li(Rt.ust),t)}Xet(t,i){return e8(this._li(Rt.ust).index(i),t)}bT(t){return $a(this._li(Rt.cst).delete(t))}async Zet(t){for(const i of t)await this.bT(i)}Ket(){return $a(this._li(Rt.cst).clear())}_li(t){if(!this.gli)throw new g("Lock was released");if(!function(t,i){return t===Rt.ust&&i===Rt.ust||i===Rt.cst}(t,this.gli.mode))throw new g("Incompatible transaction mode: "+this.gli.mode+", expected "+t);return this.gli.objectStore(this.l)}wli(){this.Sit.vli(this),this.gli=void 0}constructor(t,i){this.Sit=t,this.gli=i}};var fu=class{Yet(t){return Promise.resolve("persistent"===t)}Get(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(Fe(i)):this.ist(Rt.cst,(i=>i.Get(t)))}Vet(t,i){return void 0===i&&(i="persistent"),"persistent"!==i?Promise.reject(Fe(i)):this.ist(Rt.cst,(i=>i.Vet(t)))}Vb(t){return this.ist(Rt.ust,(i=>i.Vb(t)))}Wb(t){return this.ist(Rt.ust,(i=>i.Wb(t)))}Wet(t,i){return this.ist(Rt.ust,(e=>e.Wet(t,i)))}Pet(t){return this.ist(Rt.ust,(i=>i.Pet(t)))}Het(){return this.ist(Rt.ust,(t=>t.Het()))}qet(t){return this.ist(Rt.ust,(i=>i.qet(t)))}Xet(t,i){return this.ist(Rt.ust,(e=>e.Xet(t,i)))}bT(t){return this.ist(Rt.cst,(i=>i.bT(t)))}Zet(t){return this.ist(Rt.cst,(i=>i.Zet(t)))}Ket(){return this.ist(Rt.cst,(t=>t.Ket()))}MDt(t){return this.Ali(),this.uDt=new r8(this,t),this.uDt}Ali(){if(void 0!==this.uDt)throw new g("Already locked")}vli(t){if(this.uDt!==t)throw new g("Incorrect lock");this.uDt=void 0}NC(t){return this.Sq.NC(t)}ist(t,i){return this.NC((()=>this.mli(t,i)))}async mli(t,i){this.Ali();const e=this.yli.transaction(this.l,t),s=this.MDt(e);try{return await n8(e,i,s)}finally{s.wli()}}Mli(t){this.Ali();const i=this.yli.transaction(this.l,t);return this.MDt(i)}static Tli(t,i){let e;const s=new Promise((t=>{e=t})),n=t.reduce(((t,i)=>t.then((()=>{let t;const e=new Promise((i=>{t=i}));return i.NC((()=>(t(),s))).catch(na),e}))),Promise.resolve());return e(n.then(i)),s}constructor(t,i){this.uDt=void 0,this.Sq=new Kr,this.yli=t,this.l=i}},h8={dp:17,Nli:async t=>{const{transaction:i,database:e}=t,s=i.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)e.deleteObjectStore(s[t]);e.createObjectStore(l8,{keyPath:"id"}),e.createObjectStore(d8,{keyPath:"key"}),e.createObjectStore(f8,{keyPath:"key"});e.createObjectStore(_8,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");e.createObjectStore(g8,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},o8=class{async Dli(t){for(const i of this.Sli)this.Ili<i.dp&&await i.Nli(t)}constructor(t){this.Ili=t}},a8=class extends o8{get Sli(){return[h8]}},u8=new class{Eli(t){this.bli=t}c9(t){return this.bli(t)}constructor(){this.bli=t=>new a8(t)}},c8=18,l8="cachingTask",d8="licences",f8="manifest",_8="segment",g8="segmentMetadata";async function w8(){!function(){if("undefined"==typeof indexedDB)throw new g("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",c8);return t.addEventListener("upgradeneeded",v8),await $a(t)}async function v8(t){const i=t.oldVersion<=c8?t.oldVersion:-1,e=t.target,s=e.result,n=e.transaction,r=u8.c9(i),h={database:s,transaction:n};await n8(n,(t=>r.Dli(t)),h)}var A8=class{static get Lb(){return this.yst||(this.yst=w8()),this.yst}};A8.yst=void 0;var m8=class{ist(t){return t(this)}wli(){this.rst.wli(),this.nst.wli(),this.hst.wli(),this.ost.wli(),this.ast.wli()}constructor(t,i){this.rst=t.rst.MDt(i),this.nst=t.nst.MDt(i),this.hst=t.hst.MDt(i),this.ost=t.ost.MDt(i),this.ast=t.ast.MDt(i)}};wi.wa(class t{static async c9(){const i=await A8.Lb;return new t(i)}ist(t){const i=this.allCollections;return fu.Tli(i,(()=>this.mli(i,t)))}async mli(t,i){const e=t.map((t=>t.l)),s=this.yli.transaction(e,Rt.cst),n=new m8(this,s);try{return await n8(s,i,n)}finally{n.wli()}}get allCollections(){return[this.nst,this.rst,this.hst,this.ost,this.ast]}constructor(t){this.yli=t,this.rst=new fu(t,g8),this.nst=new fu(t,_8),this.hst=new fu(t,f8),this.ost=new fu(t,l8),this.ast=new fu(t,d8)}}.c9);var p8=class{Lli(t){const i=this.DW.gf(),e=t.createGain();for(const s of i){t.createMediaElementSource(s).connect(e)}return e}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){const t=this;return{createAudioSourceNode:i=>t.Lli(i)}}constructor(t){this.Xa=void 0,this.DW=t}};Vr((function(t){return class extends t{fa(){const t=this.kli.va;return lt(super.fa(),{get audio(){return t}})}constructor(t,i){super(t,i),this.kli=new p8(this.o7)}}}),Zo.Za);Vr((function(t){return class i extends t{ga(t){const e=i.xli(this.wd.analytics),s=i.xli(t?t.analytics:void 0);e||s?this.Cli(Yt({},e,s)):this.Oli&&this.Oli.disable(),super.ga(t)}Cli(t){if(this.Oli)this.Oli.enable(),this.Oli.setOptions(t);else{const i=s.youbora;if(!i)throw new g("Youbora JavaScript library not loaded.");if(!i.adapters.TheoPlayer2)throw new g("TheoPlayer2 adapter not available on Youbora JavasScript library");const e=new i.Plugin(t);e.setAdapter(new i.adapters.TheoPlayer2(this.va)),this.Oc&&i.adapters.TheoPlayer2.NativeAdsAdapter&&e.setAdsAdapter(new i.adapters.TheoPlayer2.NativeAdsAdapter(this.va)),this.Oli=e}}static xli(t){if(t){const i=t.filter((t=>"youbora"===t.integration));if(0===i.length)return;if(i.length>1)throw new g("Only one youbora analytics configuration expected");const e=i[0],{integration:s}=e;return e_(e,["integration"])}}gn(){this.Oli&&this.Oli.disable(),super.gn()}constructor(t,i){super(t,i)}}}),Zo.j7);var y8=1,M8=0,T8=1e3,N8=class t extends Qd{jli(){const t=this.ct===1/0,i=t?y8:M8,e=t?-1:this.ct,s=A(this.Qo.rt.og,this.Pli);this.zli.setPresentationInformation(new this.Bli(i,e,s))}Pli(t){const i=t.Ng.og,e=[];for(let t=0;t<i.length;t++){const s=i[t];s.ji&&s.Ti&&e.push({trackIdx:t,bitrate:s.wP,width:s.ji,height:s.Ti,codecIdentifier:s.Mst})}return e}Rli(){return this.Qo.Tf()*T8}get ct(){return this.Qo.Td()*T8}get Uli(){return this.Qli}get Fli(){return this.Yli}set Fli(t){this.Yli=t,t&&this.zli.reportPlayerState(t)}set Gli(t){this.Vli=t}Wli(){return v((()=>{this.Hli(),this.qli()}),t.Xli)}Hxt(){this.Qo.Oc&&(this.Qo.Oc.yn("ntt",this.Nni),this.Qo.Oc.yn("htt",this.Dni),this.Qo.Oc.yn("Gkt",this.Zli),this.Qo.Oc.yn("Fkt",this.Kli)),this.Qo.yn(Co.Jg,this.Jli),this.Qo.yn(Nt.ha,this.j4),this.Qo.yn(Co.Sh,this.$li),this.Qo.yn(Co.jh,this.kci),this.Qo.yn(Zt.Rw,this.pU),this.Qo.yn(Co.mw,this.bY),this.Qo.yn(Co.pw,this.MU),this.Qo.yn(Zt.Bw,this.AU),this.Qo.yn(Co.Tw,this.tdi)}qxt(){this.Qo.Oc&&(this.Qo.Oc.fn("ntt",this.Nni),this.Qo.Oc.fn("htt",this.Dni),this.Qo.Oc.fn("Gkt",this.Zli),this.Qo.Oc.fn("Fkt",this.Kli)),this.Qo.fn(Co.Jg,this.Jli),this.Qo.fn(Nt.ha,this.j4),this.Qo.fn(Co.Sh,this.$li),this.Qo.fn(Co.jh,this.kci),this.Qo.fn(Zt.Rw,this.pU),this.Qo.fn(Co.mw,this.bY),this.Qo.fn(Co.pw,this.MU),this.Qo.fn(Zt.Bw,this.AU),this.Qo.fn(Co.Tw,this.tdi)}gn(){m(this.idi),this.qxt()}constructor(t,i,e,s=MMPlayerState,n=MMAdState,r=MMPresentationInfo){super(),this.Qo=t,this.wC=i,this.zli=e,this.edi=s,this.sdi=n,this.Bli=r,this.ndi=!0,this.Qli=!1,this.Vli=void 0,this.Yli=void 0,this.rdi=void 0,this.Nni=t=>{const i=t.ttt;i.kKt();var e;e=i.Y7().duration;const s="linear"===i.Y7().type;i.xKt(),i.EKt();s&&(this.Qli=!0),this.Gli=this.sdi.AD_IMPRESSION,this.Gli=this.sdi.AD_STARTED},this.Dni=t=>{this.Qli=!1,this.Gli=this.sdi.AD_COMPLETED},this.Zli=t=>{t.jqt===Xr.ADBLOCK?this.Gli=this.sdi.AD_BLOCKED:this.Gli=this.sdi.AD_ERROR},this.Kli=()=>{this.Gli=this.sdi.AD_SKIPPED},this.tdi=t=>{var i,e,s,n;t.mI===fi.ym&&(this.rdi&&t.aQ!==this.rdi&&this.zli.reportABRSwitch(this.rdi,t.aQ),this.rdi=t.aQ,this.zli.reportChunkRequest(new MMChunkInformation(t.Fp,t.aQ,t.MM,t.Iot.zu,void 0,void 0,null!=(s=null==(i=t.Iot.Qht)?void 0:i[0])?s:0,null!=(n=null==(e=t.Iot.Qht)?void 0:e[1])?n:-1)))},this.Jli=t=>{this.Fli=this.edi.STOPPED,this.Co(t)},this.j4=t=>{this.Fli=this.edi.ERROR,this.zli.reportError(t.error,this.Rli())},this.$li=()=>{this.Uli?this.Gli=this.sdi.AD_PAUSED:this.Fli=this.edi.PAUSED},this.kci=()=>{this.Uli&&(this.Gli=this.sdi.AD_PLAY)},this.pU=()=>{this.Uli?(this.Vli===this.sdi.AD_PAUSED&&(this.Gli=this.sdi.AD_RESUMED),this.Gli=this.sdi.AD_PLAYING):(this.ndi&&(this.ndi=!1,this.jli(),this.Fli=this.edi.STARTED),this.Fli!==this.edi.PAUSED&&this.Fli!==this.edi.BUFFERING||(this.Fli=this.edi.RESUMED))},this.bY=()=>{this.zli.reportPresentationSize(this.Qo.a_,this.Qo.r_)},this.MU=t=>{this.Uli||this.Fli!==this.edi.PAUSED||this.zli.reportPlayerSeekCompleted(t.currentTime*T8)},this.AU=()=>{this.Uli||(this.Fli=this.edi.BUFFERING)},this.qli=()=>{this.zli.reportDownloadRate(_.floor(va.Lb.hP()))},this.Hli=()=>{this.Uli||this.zli.reportPlaybackPosition(this.Rli())},this.Fli=this.edi.INITIALIZED,this.Hxt(),this.idi=this.Wli()}};N8.Xli=2e3,Vr((function(t){return class extends t{gn(){super.gn(),this.hdi()}constructor(t,i){super(t,i),this.odi=void 0,this.adi=void 0,this.udi=()=>{this.adi=void 0,this.hdi();const t=super.Wa();t&&(this.adi=function(t,i){const e=function(t,i){if(t&&t.analytics)for(const i of t.analytics)if("smartsight"===i.integration)return i;if(i&&i.analytics)for(const t of i.analytics)if("smartsight"===t.integration)return t;return}(t,i);if(!e)return;return e}(t,this.wd)),this.cdi()},this.cdi=()=>{if(!this.odi&&this.adi&&this.bt&&this.bt.src&&!this.Ff){const t=MMSmartStreaming.getInstance();!function(t,i,e){t.registerMMSmartStreaming(e.playerName,e.customerID,e.subscriberID,e.domainName),t.reportComponent("THEOSDK"),t.reportPlayerInfo("THEOplayer","THEOplayer","8.2.0"),t.reportDeviceInfo(void 0,void 0,void 0,void 0,void 0,s.innerWidth,s.innerHeight),t.initializeSession("QBRModeDisabled",i,e.metaURL,e.assetID)}(t,this.bt.src,this.adi),this.odi=new N8(this,this.adi,t),this.odi.yn("ended",this.hdi)}},this.hdi=()=>{this.odi&&(this.odi.gn(),this.odi=void 0)},this.yn(Co.lo,this.udi),this.yn(Co.Hg,this.cdi),this.yn(Co.jh,this.cdi)}}}),Zo.j7);var D8=String.fromCharCode(95);var S8=class t{get va(){return this.Xa||(this.Xa=function(t){return{get adsManager(){return t.adsManager},get ids(){return t.ids},get adContainer(){return t.adContainer},get imaSDK(){return t.imaSDK},get sendEvent(){return t.sendEvent},set sendEvent(i){t.sendEvent=i}}}(this)),this.Xa}get id(){return this.CT}get adsManager(){return this.Xii}get ids(){return this.ldi}get adContainer(){return this.HJt}get sendEvent(){return this.ddi}set sendEvent(t){for(let t of this.fdi)this.Xii.removeEventListener(t.type,t.listener);this.fdi=[],this.ddi=t,this._di()}get imaSDK(){return!0}gdi(){for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Xii.addEventListener(i,this.wdi),this.fdi.push({type:i,listener:this.wdi})}}vdi(){No(this.fdi);for(let t in google.ima.AdEvent.Type){const i=google.ima.AdEvent.Type[t];this.Xii.removeEventListener(i,this.wdi)}}Adi(t){this.KB.push({type:t.type,adVolume:this.adsManager.getVolume()})}_di(){null==this.ddi||this.ddi.call(this,this.KB),this.KB=[]}static mdi(i){return t.pdi[i]||i}constructor(i,e,s,n){this.wdi=i=>{this.Adi({type:t.mdi(i.type)})},this.CT=i,this.Xii=e,this.ldi=s,this.HJt=n,this.fdi=[],this.KB=[]}};S8.pdi={loaded:"AdLoaded",impression:"AdImpression",start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",skip:"AdSkipped",volumeChange:"AdVolumeChange"};var I8=class{ydi(t,i){this.Mdi=h.createElement("script"),this.Mdi.id=t.id,this.Mdi.type="text/javascript",t.adContainer.appendChild(this.Mdi),this.Mdi.src="https://z.moatads.com/"+i+"/moatvideo.js#"+t.id,this.Tdi=t.id,s[this.Tdi]=t.va}Ndi(){this.Mdi&&zu(this.Mdi),this.Tdi&&(s[this.Tdi]=void 0)}constructor(){this.Mdi=void 0,this.Tdi=void 0}};Vr((function(t){return class i extends t{ga(t){var e,s,n;this.Ddi(),null==(e=this.Sdi)||e.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Idi),null==(s=this.Sdi)||s.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Ddi),null==(n=this.Sdi)||n.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Edi),this.Sdi=void 0,this.HJt=void 0,super.ga(t);const r=t&&t.analytics;this.bdi=i.Ldi(r);this.Oc&&this.bdi&&D4()&&this.kdi()}gn(){var t,i,e;this.Ddi(),null==(t=this.Sdi)||t.removeEventListener(google.ima.AdEvent.Type.COMPLETE,this.Idi),null==(i=this.Sdi)||i.removeEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Ddi),null==(e=this.Sdi)||e.removeEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Edi),this.Sdi=void 0,this.HJt=void 0,this.Oc&&this.Oc.fn("v8t",this.A8t),super.gn()}kdi(){this.Oc&&this.Oc.yn("v8t",this.A8t)}xdi(t,i,e){const s=D8+"moatApi"+_.floor(1e8*_.random());this.Cdi=new S8(s,t,i,e),this.Cdi.gdi(),this.Odi.ydi(this.Cdi,this.bdi.partnerCode)}static Ldi(t){if(t){const i=t.filter((t=>"moat"===t.integration));if(0===i.length)return;if(i.length>1)throw new g("Only one Moat analytics configuration expected");return i[0]}}constructor(t,i){super(t,i),this.bdi=void 0,this.Cdi=void 0,this.Sdi=void 0,this.HJt=void 0,this.Edi=()=>{this.xdi(this.Sdi,{partnerCode:this.bdi.partnerCode,viewMode:google.ima.ViewMode.NORMAL},this.HJt)},this.A8t=t=>{this.Sdi=t.qii,this.HJt=t.i9t,this.Ddi(),this.Sdi.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.Idi),this.Sdi.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.Ddi),this.Sdi.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.Edi)},this.Idi=t=>{const i=t.getAd().getAdPodInfo();i.getAdPosition()<i.getTotalAds()&&(this.Ddi(),this.Edi())},this.Ddi=()=>{this.Cdi&&(this.Cdi.vdi(),this.Cdi=void 0),this.Odi.Ndi()},this.Odi=new I8}}}),Zo.j7);var Je,Wu=class extends wn{constructor(t,i,e){super(t,new Date),this.jdi=i,this.ttt=e}};!function(t){t.LOADED="DAILoaded",t.AD_BREAK_STARTED="DAIAdBreakStarted",t.AD_BREAK_ENDED="DAIAdBreakEnded",t.AD_PERIOD_STARTED="DAIAdPeriodStarted",t.AD_PERIOD_ENDED="DAIAdPeriodEnded",t.AD_PROGRESS="DAIAdProgress",t.CUEPOINTS_CHANGED="DAICuePointsChanged",t.CLICK="DAIClick",t.ERROR="DAIError",t.STARTED="DAIStarted",t.FIRST_QUARTILE="DAIFirstQuartile",t.MIDPOINT="DAIMidpoint",t.STREAM_INITIALIZED="DAIStreamInitialized",t.THIRD_QUARTILE="DAIThirdQuartile",t.COMPLETE="DAIComplete"}(Je||(Je={}));var E8=class extends Wu{constructor(t,i){super("DAILoaded",t,i)}},b8=class extends Wu{constructor(t,i){super("DAIAdBreakStarted",t,i)}},L8=class extends Wu{constructor(t,i){super("DAIAdBreakEnded",t,i)}},k8=class extends Wu{constructor(t,i){super("DAIAdProgress",t,i)}},x8=class extends Wu{constructor(t,i){super("DAICuePointsChanged",t,i)}},C8=class extends Wu{constructor(t,i){super("DAIClick",t,i)}},O8=class extends Wu{constructor(t,i){super("DAIError",t,i)}},j8=class extends Wu{constructor(t,i){super("DAIStarted",t,i)}},P8=class extends Wu{constructor(t,i){super("DAIFirstQuartile",t,i)}},z8=class extends Wu{constructor(t,i){super("DAIMidpoint",t,i)}},B8=class extends Wu{constructor(t,i){super("DAIStreamInitialized",t,i)}},R8=class extends Wu{constructor(t,i){super("DAIThirdQuartile",t,i)}},U8=class extends Wu{constructor(t,i){super("DAIComplete",t,i)}};var Q8=class extends Bo{replaceAdTagParameters(t){return this.gei.replaceAdTagParameters(null!=t?t:null)}Pdi(t){return this.gei.contentTimeForStreamTime(t)}zdi(t){return this.gei.streamTimeForContentTime(t)}_Rt(t,i){const e=function(t){let i;"vod"===t.availabilityType?(i=new s.google.ima.dai.api.VODStreamRequest,i.contentSourceId=t.contentSourceID,i.videoId=t.videoID):"live"===t.availabilityType&&(i=new s.google.ima.dai.api.LiveStreamRequest,i.assetKey=t.assetKey);const e=google.ima.dai.api.StreamRequest.StreamFormat;var n;return i.format="dash"===t.format?e.DASH:e.HLS,i.apiKey=t.apiKey,i.adTagParameters=t.adTagParameters,i.omidAccessModeRules=null!=(n=h4(t.omidAccessModeRules))?n:{},i}(t);this.gei.requestStream(e)}tr(){this.Bdi(!1),this.gei.reset()}gn(){this.Vo();const t=google.ima.dai.api.StreamEvent.Type;this.gei.removeEventListener(t.AD_BREAK_STARTED,this.Rdi),this.gei.removeEventListener(t.AD_PROGRESS,this.Udi),this.gei.removeEventListener(t.CLICK,this.mJt),this.gei.removeEventListener(t.COMPLETE,this.Qdi),this.gei.removeEventListener(t.CUEPOINTS_CHANGED,this.Fdi),this.gei.removeEventListener(t.ERROR,this.Ss),this.gei.removeEventListener(t.FIRST_QUARTILE,this.Ydi),this.gei.removeEventListener(t.LOADED,this.Gdi),this.gei.removeEventListener(t.MIDPOINT,this.Vdi),this.gei.removeEventListener(t.STARTED,this.Wdi),this.gei.removeEventListener(t.STREAM_INITIALIZED,this.Hdi),this.gei.removeEventListener(t.THIRD_QUARTILE,this.qdi),this.gei.removeEventListener(t.AD_BREAK_ENDED,this.Xdi),this.tr(),this.Zdi&&zu(this.Zdi)}Kdi(t){this.gei.onTimedMetadata(t)}Jdi(t,i,e){this.gei.processMetadata(t,i,e)}$di(t){const i=this.gei.previousCuePointForStreamTime(t);if(i)return{WT:i.end,VT:i.start,Hf:i.played}}tfi(t){const i=this.$di(t),e=i&&!i.Hf?i.VT:void 0;return Promise.resolve(e)}Bdi(t){this.XJt.style.display=t?"block":"none"}constructor(t,i,e){super(),this.gei=t,this.XJt=i,this.Zdi=e,this.Rdi=t=>{this.Bdi(!0);const i=Mt(t),e=Ht(t);this.Co(new b8(i,e))},this.Xdi=t=>{this.Bdi(!1);const i=Mt(t),e=Ht(t);this.Co(new L8(i,e))},this.Udi=t=>{const i=Mt(t),e=Ht(t);this.Co(new k8(i,e))},this.mJt=t=>{const i=Mt(t),e=Ht(t);this.Co(new C8(i,e))},this.Qdi=t=>{const i=Mt(t),e=Ht(t);this.Co(new U8(i,e))},this.Fdi=t=>{const i=Mt(t),e=Ht(t);this.Co(new x8(i,e))},this.Ss=t=>{const i=Mt(t),e=Ht(t);this.Co(new O8(i,e))},this.Ydi=t=>{const i=Mt(t),e=Ht(t);this.Co(new P8(i,e))},this.Gdi=t=>{const i=Mt(t),e=Ht(t);this.Co(new E8(i,e))},this.Vdi=t=>{const i=Mt(t),e=Ht(t);this.Co(new z8(i,e))},this.Wdi=t=>{const i=Mt(t),e=Ht(t);this.Co(new j8(i,e))},this.Hdi=t=>{const i=Mt(t),e=Ht(t);this.Co(new B8(i,e))},this.qdi=t=>{const i=Mt(t),e=Ht(t);this.Co(new R8(i,e))},this.XJt.style.display="none",this.gei.setClickElement(this.XJt);const s=google.ima.dai.api.StreamEvent.Type;this.gei.addEventListener(s.AD_BREAK_STARTED,this.Rdi),this.gei.addEventListener(s.AD_PROGRESS,this.Udi),this.gei.addEventListener(s.CLICK,this.mJt),this.gei.addEventListener(s.COMPLETE,this.Qdi),this.gei.addEventListener(s.CUEPOINTS_CHANGED,this.Fdi),this.gei.addEventListener(s.ERROR,this.Ss),this.gei.addEventListener(s.FIRST_QUARTILE,this.Ydi),this.gei.addEventListener(s.LOADED,this.Gdi),this.gei.addEventListener(s.MIDPOINT,this.Vdi),this.gei.addEventListener(s.STARTED,this.Wdi),this.gei.addEventListener(s.STREAM_INITIALIZED,this.Hdi),this.gei.addEventListener(s.THIRD_QUARTILE,this.qdi),this.gei.addEventListener(s.AD_BREAK_ENDED,this.Xdi)}};function Mt(t){const i=t.getStreamData(),e=i.adProgressData;let s;e&&(s={L2t:e.adBreakDuration,ifi:e.duration,k2t:e.adPosition,Mf:e.currentTime,ct:e.duration,x2t:e.totalAds});return{efi:s,sfi:(i.cuepoints||[]).map((t=>({VT:t.start,WT:t.end,Hf:t.played}))),nfi:i.errorMessage||void 0,rfi:i.manifestFormat||void 0,hfi:i.streamId||void 0,ofi:(i.subtitles||[]).map((t=>({afi:t.webvtt,ufi:t.ttml,gs:t.language}))),zu:i.url}}function F8(t){return{hHt:t.getAdSlotId(),u1t:t.getContent(),HP:t.getContentType(),Ti:t.getHeight(),ji:t.getWidth()}}function Ht(t){const i=t.getAd();if(!i)return;const e=i.getAdPodInfo(),s=i.getCompanionAds().map(F8);return{CHt:i.getAdId(),E5t:{k2t:e.getAdPosition(),lKt:e.getMaxDuration(),Rii:e.getPodIndex(),Tjt:e.getTimeOffset(),x2t:e.getTotalAds()},_Wt:i.getAdSystem(),Qii:i.getAdvertiserName(),nHt:i.getApiFramework(),TWt:s,RWt:i.getCreativeId(),v6t:i.getCreativeAdId(),Fii:i.getDealId(),iy:i.getDescription(),ct:i.getDuration(),KP:i.getTitle(),cfi:i.getUniversalAdIdRegistry(),lfi:i.getUniversalAdIdValue(),c6t:i.getVastMediaHeight(),u6t:i.getVastMediaWidth(),r6t:i.getWrapperAdIds(),h6t:i.getWrapperAdSystems(),o6t:i.getWrapperCreativeIds()}}function Y8(){const t=h.body.lastElementChild;if(t instanceof HTMLIFrameElement&&"Advertisement"===t.title)return t}var G8="theo-dai-clickthrough",V8="urn:google:dai:2018",W8=class{get va(){const t=this,i=this.dfi;return{contentTimeForStreamTime:i=>t.gei?t.gei.Pdi(i):i,streamTimeForContentTime:i=>t.gei?t.gei.zdi(i):i,replaceAdTagParameters(i){t.gei&&t.gei.replaceAdTagParameters(i)},get snapback(){return t.ffi},set snapback(i){t.ffi=i},get sourceTransformer(){return i._fi},set sourceTransformer(t){i._fi=t}}}Nf(t){this.q2.qd(),this.q2=new Wr,ha(this.eei(t,this.q2.Wd))}async eei(t,i){if(fo(i),!this.gfi||!this.gei)return this.Qo.wfi(t);if(this.gfi.G7)return;if(t>this.Qo.Tf()&&this.ffi){const e=await Ys(this.gei.tfi(t),i);if(e){this.Qo.wfi(e),await this.gei.lf(Je.AD_BREAK_ENDED,i);if(this.gei.$di(t).WT>t)return}}this.Qo.wfi(t)}i_(){const t=this.gfi&&this.gfi.G7;if(t){const i=Ai.xn(this.Qo.vfi()),e=t.Tjt,s=e+t.lKt,n=new Ai([e,s]);return i.Sn(n).ks()}return this.Qo.vfi()}async ytt(t,i){if(!t)return this.Qo.Afi(t,i);let e=t;try{this.Qo.nt.yn(Ud.L_,this.mfi),e=await this.dfi.pfi(t,i),this.gfi&&this.gei&&(this.yfi=!0)}catch(t){if(yo(t),t.code===bi.LICENSE_INVALID)return;const i=new Rs(Ui.SOURCE_NOT_SUPPORTED,"Something went wrong while setting up a Google DAI stream.",t);throw this.BP=tn(i),this.RP=i,this.Qo.Co(new Eo(i)),i}await this.Qo.Afi(e,i)}tr(){if(this.yfi){if(this.Qo.nt.fn(Ud.L_,this.mfi),this.Cei){this.Cei.fn(qt.O_,this.Mfi);for(const t of this.Cei.L.og)t.fn(Di.FT,this.Tfi);this.Cei=void 0}this.BP=void 0,this.RP=void 0,this.q2.qd(),this.gfi&&this.gfi.tr(),this.gei&&this.gei.tr(),this.yfi=!1}}get lt(){return this.BP||this.Qo.Nfi()}get bf(){return this.RP||this.Qo.Dfi()}gn(){this.tr(),this.Qo.Sfi(),this.gei&&this.gei.gn()}constructor(t,i,e,s){this.Cei=void 0,this.BP=void 0,this.RP=void 0,this.q2=new Wr,this.yfi=!1,this.ffi=!0,this.mfi=t=>{const i=t.Lt;i.zt===Mi.Dm&&(i.Rg===Wt.ID3||i.Rg===Wt.EVENT_STREAM&&i.Og===V8)&&(i.jg=Or.Pg,this.Cei=i,i.yn(qt.O_,this.Mfi))},this.Mfi=t=>{t.GT.yn(Di.FT,this.Tfi)},this.Tfi=t=>{var i,e;if(this.gei)if((null==(i=this.Cei)?void 0:i.Rg)===Wt.ID3){const i=t.GT.O;"TXXX"===i.id&&this.gei.Kdi({TXXX:i.text})}else if((null==(e=this.Cei)?void 0:e.Rg)===Wt.EVENT_STREAM){const i=t.GT.O;this.gei.Jdi(V8,i,t.cD)}},this.Qo=t,this.gei=i,this.gfi=e,this.dfi=s,e&&i&&this.Qo.Oc&&this.Qo.Oc.utt(e.T6t)}},H8=class extends S1{get Ifi(){return this.Efi}get bXt(){return Qn.so}constructor(t,i,e,s=!0){super(e),this.Efi=s,this.G0t=t,this.V0t=i}},q8=class extends _4{bfi(){const t=[Je.STARTED,Je.FIRST_QUARTILE,Je.MIDPOINT,Je.THIRD_QUARTILE,Je.COMPLETE];this.gei.yn(t,this.Lfi),this.gei.yn(Je.AD_BREAK_ENDED,this.Xdi),this.gei.yn(Je.AD_PROGRESS,this.Udi),this.gei.yn(Je.CUEPOINTS_CHANGED,this.Fdi)}get B0t(){return this.D6t}get b0t(){return this.W1t}kfi(t){let i=t.E5t.Tjt,e=this.RKt||this.findAdBreakWithPredicate(i,(t=>!t.Hf));if(!e){const s=t.E5t.lKt;i=this.Qo.Tf(),e=new H8(s,s,i,!1),e.H0t(),this.UKt.push(e)}return e}xfi(t){switch(t){case Je.STARTED:this.D6t=!0;break;case Je.AD_BREAK_ENDED:this.D6t=!1}}Cfi(t,i,e){if(i)switch(t){case Je.STARTED:case Je.FIRST_QUARTILE:case Je.MIDPOINT:case Je.THIRD_QUARTILE:case Je.COMPLETE:this.b0t.Co(new ea(this.RKt))}if(e)switch(t){case Je.STARTED:case Je.FIRST_QUARTILE:case Je.MIDPOINT:case Je.THIRD_QUARTILE:case Je.COMPLETE:this.b0t.Co(new js(this.bKt,this.bKt.i6t))}switch(t){case Je.COMPLETE:this.b0t.Co(new Jh(this.bKt,this.M6t.i6t));break;case Je.AD_BREAK_ENDED:this.b0t.Co(new Ji(this.G7))}switch(t){case Je.FIRST_QUARTILE:this.b0t.Co(new Ze(this.bKt,this.M6t.i6t));break;case Je.MIDPOINT:this.b0t.Co(new R1(this.bKt,this.M6t.i6t));break;case Je.THIRD_QUARTILE:this.b0t.Co(new Q1(this.bKt,this.M6t.i6t))}}Ofi(t){const i=t.ttt,e=this.kfi(i),s=function(t,i){if(t.Oc.length)return!1;for(let e=0;e<i;e++){const i=new u4(t,lo.Gqt);t.X0t(i)}return!0}(e,i.E5t.x2t),n=function(t,i){const e=i.E5t.k2t-1;return t.Oc[e]}(e,i),r=function(t,i){return t.s1t!==y1.READY&&(t.a6t(i),!0)}(n,i);this.bKt=n,this.RKt=e,e.H0t(),this.Cfi(t.type,s,r)}jfi(t){for(const i of this.UKt)if(rd(t,i.Tjt))return i}findAdBreakWithPredicate(t,i){for(const e of this.UKt)if(rd(e.Tjt,t)&&i(e))return e}get Pfi(){const t=this.findAdBreakWithPredicate(0,(t=>t.Ifi));let i=0;return t&&(i=t.lKt),i}zfi(t,i){let e;for(const s of this.UKt)s.Tjt>=t&&s.Tjt<=i&&!s.Hf&&(!e||s.Tjt>=e.Tjt)&&(e=s);return e}qm(){}att(t){}tr(){this.bKt&&(this.b0t.Co(new Jh(this.bKt,this.bKt.i6t)),this.bKt=void 0),this.RKt&&(this.b0t.Co(new Ji(this.RKt)),this.RKt=void 0),this.D6t=!1,No(this.UKt)}gn(){this.tr(),this.b0t.gn()}constructor(t,i){super(new Yu,Qn.so),this.gei=t,this.Qo=i,this.Udi=t=>{const i=this.RKt;if(!i||!this.bKt)return;const e=t.jdi.efi;this.bKt.i6t=e.Mf,function(t,i){const e=i.k2t,s=i.L2t,n=i.Mf,r=cd(t.Oc.slice(0,e-1),(t=>{var i;return null!=(i=t.ct)?i:0}));t.dKt=s-n-r}(i,e)},this.Fdi=t=>{const i=t.jdi.sfi;if(i)for(const t of i)if(!this.jfi(t.VT)){const i=t.WT-t.VT,e=new H8(i,i,t.VT,!0);this.UKt.push(e)}},this.Lfi=t=>{this.xfi(t.type),this.Ofi(t)},this.Xdi=t=>{this.D6t=!1,this.bKt=void 0;const i=this.G7;i&&(i.dKt=0,this.Cfi(t.type,!1,!1),this.RKt=void 0)},this.bfi()}};function X8(t){if(t.sources)if(fh(t.sources)){for(const i of t.sources)if(fw(i))return!0}else if(Ut(t.sources))return fw(t.sources);return!1}var Z8=class{async pfi(t,i){const e=[],s=[];for(const i of t.sources)if(fw(i)){if(!this.gei)continue;e.push(i)}else s.push(i);if(0===e.length)return t;let n,r;for(;void 0===n&&0!==e.length;){const{yc:h}=await Qi.Lb.Gz(e,t),o=h;fo(i);try{n=await this.Bfi(o,i),s.push(n)}catch(t){yo(t),r=t,Qr(e,o)}}if(0!==t.sources.length&&0===s.length)throw new g("Fatal: unable to play DAI streams.");return r&&$(r.message),Yt({},t,{sources:s})}async Bfi(t,i){if(!this.gei)throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=this.gei.lf(Je.LOADED,i),s=this.gei.lf(Je.ERROR,i),n=t.type===rs.Vv?"dash":"hls";this.gei._Rt(Yt({},t.ssai,{format:n}));const r=await Promise.race([e,s]);if(r.type===Je.LOADED){const i=t.type===rs.Vv?rs.Vv:rs.Hv;return Qu(Yt({},t,{src:this._fi?await this._fi(r.jdi.zu||""):r.jdi.zu,type:i}))}throw g(r.jdi.nfi)}constructor(t){this.gei=t,this._fi=t=>t}};Vr(function(t){return i=>class extends i{fa(){const t=super.fa(),i=t.ads;if(i){const t=this.Rfi.va;lt(i,{get dai(){return t}})}return t}get Ul(){return this.Ufi}wfi(t){super.Nf(t)}Nf(t,i){this.Rfi.Nf(t)}vfi(){return super.i_()}i_(){return this.Rfi.i_()}ga(t){return this.Rfi.tr(),super.ga(t)}async Afi(t,i){return super.ytt(t,i)}async ytt(t,i){return this.Rfi.ytt(t,i)}Nfi(){return super.Ef()}Dfi(){return super.Lf()}Ef(){return this.Rfi.lt}Lf(){return this.Rfi.bf}Sfi(){super.gn()}gn(){this.Rfi.gn(),this.XJt&&(zu(this.XJt),this.XJt.removeEventListener("keydown",this.Qfi),this.XJt.removeEventListener("click",this.Qfi),this.XJt=void 0)}constructor(i,e){super(i,e),this.Ufi=!1,this.Qfi=t=>{13===t.which&&this.XJt.click(),this.m_()};const s=this.v_();let n,r;try{this.XJt=h.createElement("button"),this.XJt.className=G8,n=t(s,this.XJt),r=new q8(n,this),this.we.appendChild(this.XJt),this.Ufi=!0}catch(t){this.XJt=void 0}const o=new Z8(n);this.Rfi=new W8(this,n,r,o),this.XJt&&(this.XJt.addEventListener("keydown",this.Qfi),this.XJt.addEventListener("click",this.Qfi))}}}((function(t,i){if(!(s.google&&s.google.ima&&Ut(s.google.ima.dai)))throw new g("Could not find Google\u2019s IMA DAI HTML5 SDK, all DAI sources will be ignored.");const e=Y8(),n=new google.ima.dai.api.StreamManager(t),r=Y8();return new Q8(n,i,r&&r!==e?r:void 0)})),Zo.x7);var K8=class{get Ffi(){return void 0===this.Yfi?0:(performance.now()-this.Yfi)/1e3}Gfi(t){this.Vfi=t,this.Hfi.Wfi(t),this.Qo.yn(Co.jh,this.kci),this.Qo.yn(Co.Jg,this.Jli),this.Qo.yn(Co.Iw,this.zni),this.Qo.yn(Nt.ha,this.j4),this.Qo.yn(Zt.Bw,this.qfi),this.Qo.yn([Zt.Ow,Zt.jw,Zt.Rw],this.Xfi),this.Qo.yn(Co.Xg,this.Zfi),Rn.uY(this.Oxt)}Kfi(){this.Qo.fn(Co.jh,this.kci),this.Qo.fn(Co.Jg,this.Jli),this.Qo.fn(Co.Iw,this.zni),this.Qo.fn(Nt.ha,this.j4),this.Qo.fn(Zt.Bw,this.qfi),this.Qo.fn([Zt.Ow,Zt.jw,Zt.Rw],this.Xfi),this.Qo.fn(Co.Xg,this.Zfi),Rn.rY(this.Oxt),this.Jfi||(this.Hfi.$fi(this.t_i),this.Hfi.i_i()),this.e_i&&this.s_i(),this.Vfi=void 0,this.n_i=!1,this.Jfi=!1,this.t_i=-1/0,No(this.r_i)}h_i(){this.n_i&&this.Hfi.o_i(),this.Yfi=performance.now(),this.a_i=v(this.u_i,6e4)}s_i(){this.Hfi.c_i(this.Ffi),this.e_i=!1,this.Yfi=void 0,this.a_i&&(m(this.a_i),this.a_i=void 0)}l_i(){if(S(this.Qo.Td()))return;const t=10*function(t,i){return _.floor(t/i)}(this.Qo.Tf()/this.Qo.Td()*100,10);qo(this.r_i,t)||(this.r_i.push(t),this.Hfi.d_i(t))}constructor(t,i){this.Qo=t,this.Hfi=i,this.n_i=!1,this.Jfi=!1,this.r_i=[],this.t_i=-1/0,this.e_i=!1,this.kci=()=>{this.n_i||(this.Hfi.f_i(),this.e_i&&this.Hfi.o_i(),this.n_i=!0)},this.Jli=()=>{this.Hfi.__i(),this.Jfi=!0},this.zni=()=>{this.t_i<this.Qo.Tf()&&(this.t_i=this.Qo.Tf()),this.l_i()},this.qfi=()=>{this.n_i&&(this.g_i=performance.now(),this.Hfi.w_i(this.Qo.Tf()))},this.Xfi=()=>{this.g_i&&(this.Hfi.v_i((performance.now()-this.g_i)/1e3),this.g_i=void 0)},this.j4=()=>{this.t_i<this.Qo.Tf()&&(this.t_i=this.Qo.Tf()),this.Hfi.let(this.Qo.Ef().message)},this.Zfi=()=>{const t=this.Qo.Td()===1/0;t&&!this.e_i&&(this.e_i=t,this.h_i())},this.Oxt=()=>{this.Hfi.$fi(this.t_i),this.Hfi.A_i()},this.u_i=()=>{void 0!==this.Yfi&&this.Hfi.m_i(this.Ffi)}}},J8=class{Wfi(t){this.p_i(["setDocumentTitle",t.itemTitle]),this.p_i(["setCustomUrl","https://content.streamone.net/embed/cust=Xo9oT45EptMG/account="+t.accountID+"/item="+t.itemID]),this.p_i(["trackPageView"])}f_i(){this.y_i("item first play","viewing","1")}i_i(){this.y_i("item skipped","skipped","1")}d_i(t){this.y_i("item progress","percent",""+t)}A_i(){this.y_i("item abandoned","window closed","1")}$fi(t){this.y_i("item time","watched",""+t)}__i(){this.y_i("item finished","ended","1")}w_i(t){this.y_i("buffering started","timestamp",""+t)}v_i(t){this.y_i("buffering ended","duration",""+t)}let(t){this.y_i("error","message",""+t)}o_i(){this.y_i("livestream first play","viewing","1")}m_i(t){this.y_i("livestream progress","duration",""+t)}c_i(t){this.y_i("livestream time","watched",""+t)}y_i(t,i,e){this.p_i(["trackEvent","Video",t,i,e])}p_i(t){const i="undefined"!=typeof _paq?_paq:void 0;i?i.push(t):console.warn("The Piwik library required for the StreamOne pre-integration was not found. Make sure it is loaded before instantiating THEOplayer.")}},$8=class{get M_i(){if(!this.T_i)return;const t=this.Qo.Tf()/this.T_i;return _.floor(4*t)+1}get N_i(){return void 0!==this.T_i}Gfi(){this.Ic.yn("ntt",this.Nni),this.Ic.yn("htt",this.Dni),this.Ic.yn("Fkt",this.Kli),this.Ic.yn("Gkt",this.Zli),this.Qo.yn(Co.Iw,this.zni),Rn.uY(this.Oxt)}Kfi(){this.Ic.fn("ntt",this.Nni),this.Ic.fn("htt",this.Dni),this.Ic.fn("Fkt",this.Kli),this.Ic.fn("Gkt",this.Zli),this.Qo.fn(Co.Iw,this.zni),No(this.D_i),Rn.rY(this.Oxt),this.T_i=void 0}constructor(t,i,e){this.Qo=t,this.Ic=i,this.Hfi=e,this.D_i=[],this.Nni=()=>{this.T_i=this.Qo.Td(),this.Hfi.S_i(this.T_i)},this.Dni=()=>{this.T_i&&(this.Hfi.I_i(this.T_i),No(this.D_i),this.T_i=void 0)},this.Kli=t=>{if(!this.T_i)return;const i=this.T_i-this.T_i*t._1t;this.Hfi.E_i(i),this.T_i=void 0},this.Zli=()=>{this.T_i=this.Qo.Td(),this.Hfi.b_i()},this.zni=()=>{const t=this.M_i;if(this.N_i&&t&&!qo(this.D_i,t)){switch(t){case 1:this.Hfi.L_i();break;case 2:this.Hfi.k_i();break;case 3:this.Hfi.x_i();break;case 4:this.Hfi.C_i()}this.D_i.push(t)}},this.Oxt=()=>{this.Hfi.O_i()}}},t9=class{S_i(t){this.Hfi.y_i("ad start","duration",""+t)}I_i(t){this.Hfi.y_i("ad finished","duration",""+t)}E_i(t){this.Hfi.y_i("ad skipped","remaining time",""+t)}b_i(){this.Hfi.y_i("ad blocker","detected","1")}L_i(){this.Hfi.y_i("ad progress","firstQuartile","")}k_i(){this.Hfi.y_i("ad progress","secondQuartile","")}x_i(){this.Hfi.y_i("ad progress","thirdQuartile","")}C_i(){this.Hfi.y_i("ad progress","fourthQuartile","")}O_i(){this.Hfi.y_i("ad abandoned","window closed","1")}constructor(t){this.Hfi=t}};function i9(t){return t&&"streamone"===t.integration}Vr((function(t){return class extends t{gn(){this.fn(Co.lo,this.do),this.j_i&&(this.P_i&&this.P_i.Kfi(),this.z_i&&this.z_i.Kfi(),this.j_i=!1),super.gn()}constructor(t,i){super(t,i),this.j_i=!1,this.do=()=>{this.j_i&&(this.P_i.Kfi(),this.z_i&&this.z_i.Kfi());const t=this.Wa();if(this.j_i=!1,!t)return;const i=function(t){if(t.analytics)for(let i of t.analytics)if(i9(i))return i}(t);i&&(this.j_i=!0,this.P_i.Gfi(i),this.z_i&&this.z_i.Gfi())};const e=new J8;if(this.P_i=new K8(this,e),this.Oc){const t=new t9(e);this.z_i=new $8(this,this.Oc,t)}this.yn(Co.lo,this.do)}}}),Zo.j7);var e9=class extends fe{async yJ(t,i,e){const s=await s9(t);await super.yJ(s,i,e),this.B_i(s,i)}async AJ(t,i,e){const s=await s9(t);await super.AJ(s,i,e),this.B_i(s,i)}B_i(t,i){const e=this.U_i.R_i;if(void 0===e)return;const s=i.qK;let n;if(this.Q_i!==s&&(this.Q_i=s,e.setLevelSwitching(s),e.setContainerFormat(2)),function(t){return Qh.call(t,"a9")}(i)){const t=i.a9,r=i.a9+i.ct;n=i.QD,e.newPts(t,r,"video",s)}else 0;e.appendBuffer(t.zm,"video",s,n)}async bT(t,i,e){var s;await super.bT(t,i,e),null==(s=this.U_i.R_i)||s.flushBuffer(t,i)}constructor(t,i){super(t),this.U_i=i,this.Q_i=void 0}};async function s9(t){switch(t.Rg){case G.dq:return t;case G.qS:{const i=await wt(t.zm);return{Rg:G.dq,zm:new j(i)}}case G.fq:throw new g("Opaque initialization segments are not supported on web.")}}var n9=class extends qe{qst(t){return t.h$===fi.ym?new e9(t,this.U_i):new fe(t)}constructor(t,i){super(t),this.U_i=i,this.Wst(t)}},r9=class extends _U{get R_i(){return this.F_i}Y_i(){this.F_i=new LcevcDil.LcevcDil(this.hv.UP,this.G_i,{})}ge(){super.ge(),this.V_i()}be(){super.be(),this.G_i.style.display="none"}tr(){return this.G_i.style.display="none",void 0!==this.F_i&&(this.F_i.close(),this.Y_i()),super.tr()}Ud(){return this.W_i=!0,void 0!==this.F_i&&(this.F_i.close(),this.F_i=void 0),this.pu.removeChild(this.G_i),super.Ud()}bz(t){this.Co(new Ex(new nl(bi.ABORTED,t)))}V_i(){this.hv.UP.style.display="none",this.G_i.style.display="block"}get Lst(){return this.hv}Fst(t){return new n9(t,this)}Qst(t){return new gt(t)}constructor(t,i){super(t),this.W_i=!1,this.H_i=t=>{this.W_i||(t||this.bz("LCEVC SDK failed to initialize."),this.Y_i())},this.q_i=()=>{this.W_i||this.bz("LCEVC SDK failed to initialize.")},this.pu=i,this.G_i=h.createElement("canvas"),this.G_i.style.width="100%",this.G_i.style.height="100%",this.G_i.style.position="absolute",this.G_i.style.top="50%",this.G_i.style.left="50%",this.G_i.style.transform="translate(-50%, -50%)",this.G_i.style.display="none",this.pu.appendChild(this.G_i),LcevcDil.ready.then(this.H_i,this.q_i)}},h9=class extends tr{Lz(t){if(t===fi.ym)return this.X_i=new r9(super.Lz(t),this.pu),this.X_i}async fz(t){this.X_i=void 0;const i=t;await i.Ud(),await super.fz(i.Lst)}get Z_i(){return this.X_i}constructor(t,i){super(t),this.pu=i}},o9=class extends au{async gn(){for(const t of this.gT.og)t.fn(qt.J_,this.K_i);this.rt.fn(Ud.L_,this.J_i),this.rt.fn(Ud.x_,this.$_i),await super.gn(),await this.hv.Ud(),await this._z.fz(this.hv)}constructor(t,i,e,s,n,r,h,o){const a=new h9(r,o),u=new vU(a);super(t,i,e,s,n,u.Lz(h),o),this.J_i=t=>{t.Lt.yn(qt.J_,this.K_i)},this.$_i=t=>{t.Lt.fn(qt.J_,this.K_i)},this.K_i=t=>{var i;const e=null==(i=this.tgi.Z_i)?void 0:i.R_i,s=t.Zrt.Mg;null==e||e.setCurrentLevel(s)},this._z=u,this.tgi=a,this.gT.yn(Ud.L_,this.J_i),this.gT.yn(Ud.x_,this.$_i)}};ct(new class extends JR{dA(t,i,e,s,n,r,h){const o=new Xe(wi.Lb.hst,wi.Lb.rst,wi.Lb.nst,wi.Lb.ast);let a=i;return xn.sC()&&(a=new xn(a)),new o9(e,s,n,r,o,a,fi.ym,t)}async kz(t){if(!t.lcevc)return!1;if(!await super.kz(t))return!1;if(void 0===s.LcevcDil)throw new Rs(Ui.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}xz(){return!1}constructor(...t){super(...t),this.Cz=Ca.oP}});var Yn,a9=class extends OJ{async gn(){for(const t of this.gT.og)t.fn(qt.J_,this.K_i);this.rt.fn(Ud.L_,this.J_i),this.rt.fn(Ud.x_,this.$_i),await super.gn(),await this._z.fz(this.hv)}constructor(t,i,e,s,n,r,h,o,a){const u=new h9(i,t),c=new vU(u);super(c.Lz(fi.ym),e,s,n,r,h,o,a),this.J_i=t=>{t.Lt.yn(qt.J_,this.K_i)},this.$_i=t=>{t.Lt.fn(qt.J_,this.K_i)},this.K_i=t=>{var i;const e=null==(i=this.tgi.Z_i)?void 0:i.R_i,s=t.Zrt.jCt.Mg;null==e||e.setCurrentLevel(s)},this._z=c,this.tgi=u,this.gT.yn(Ud.L_,this.J_i),this.gT.yn(Ud.x_,this.$_i)}};ct(new class extends PJ{dA(t,i,e,s,n,r,h){return new a9(t,i,e,n,r,lJ(s.libraryLocation),new CJ(s.libraryLocation),new Xe(wi.Lb.hst,wi.Lb.rst,wi.Lb.nst,wi.Lb.ast),s)}async kz(t,i){if(!t.lcevc)return!1;if(!await super.kz(t,i))return!1;if(void 0===s.LcevcDil)throw new Rs(Ui.CONFIGURATION_ERROR,"LCEVC SDK is not loaded.");return!0}xz(){return!1}constructor(...t){super(...t),this.Cz=Ca.lP}}),function(t){t.igi="tr",t.egi="sgi"}(Yn||(Yn={}));var u9="freewheel-nonlinear-ad",c9=[Co.Xg,Co.Iw,Co.Ew,Co.Sh,Zt.Rw,Co.jh],l9=class t extends Dn{A_(){this._z.RB()}ngi(){this.rgi.yn("stt",this.hgi),this.rgi.yn(["ntt","htt"],this.ogi),this.rgi.yn("ett",this.dii)}agi(){this.rgi.fn("stt",this.hgi),this.rgi.fn(["ntt","htt"],this.ogi),this.rgi.fn("ett",this.dii)}ugi(){this.b0t.Qa(this.rgi.cgi)}lgi(){this.rgi.dgi.yn(c9,this.Ds)}fgi(){this.rgi.dgi.fn(c9,this.Ds)}get I0t(){return this}static get D0t(){return Qn.jKt}get D0t(){return t.D0t}get G7(){var t;return null!=(t=this.rgi.cgi.G7)?t:null}get F7(){const t=this.rgi.cgi.M6t;return t?[t]:[]}att(t){}Tf(){return this.rgi.dgi.Mf}Nf(t,i){}Td(){return this.rgi.dgi.ct}If(){return this.rgi.dgi.Sf}Ef(){return this.BP}Lf(){return this.RP}h_(){return 0}u_(){return 0}l_(){return this.rgi.dgi.c_}d_(t){this.rgi.dgi.c_=t}Bf(){return this.rgi.dgi.zf}Rf(t){this.rgi.dgi.zf=t}$f(){return this.rgi.dgi.Jf}get V7(){return this.rgi.cgi.V7}get W7(){return this.rgi.cgi.W7}i_(){return this.rgi.dgi.t_}Yf(){return this.rgi.dgi.Ff}x0t(t){if(this.B0t||this.rgi.x0t(t),this.rgi._gi){if(t.type===Co.Sh&&this.Qo.Sf)return!0;if(t.type===Co.Jg)return this.rgi.wgi.ggi(),!0}return!1}be(){this.rgi.be()}m_(){this.Ff||this.rgi.dgi.m_()}async vgi(){if(!this.rgi.Agi)try{await this.rgi.p2t()}catch(t){this.mgi(t,Xr.GENERAL)}}async pgi(){if(this.rgi.dgi.ygi)return this.rgi.dgi.p_(),!1;if(this.rgi.Mgi)try{await this.rgi.wgi.Tgi()}catch(t){this.mgi(t,Xr.PLAYBACK)}return!0}get Ngi(){return Po(this.Ef())}mgi(t,i){t.name!==Yn.igi&&this.b0t.Co(new ln(i,"Ads could not be loaded."))}async p_(){if(this.Ff&&this.Co(new Gt(this.Mf)),await this.vgi(),this.Ngi)return;const t=await this.pgi();!this.Ngi&&t&&this.dii()}B6t(t,i,e){i===ie.Z7&&this.rgi.B6t(t)}ge(){this.rgi.ge()}qm(){this.rgi.dgi.qm()}v_(){return this._9}gf(){return this._z.GB.map((t=>t.UP))}U0t(t){}async gn(){await this.y_(),this.rgi.gn(),await this._z.fz(this.hv),this.agi(),this.fgi(),this.b0t.tR(this.rgi.cgi)}async y_(){this.rgi.tr(),this.B0t&&(this.Qo.ge(),this.J$t(),this.be())}constructor(t,i,e,s,n){super(t,i),this.BP=void 0,this.RP=void 0,this.ogi=t=>{const i=t.ttt,e="ntt"===t.type;if(i.n1t===lo.Vqt){const t=this.Qo.we.classList;e?t.add(u9):t.remove(u9)}e?this.ge():this.be()},this.hgi=()=>{this.H1t(),this.Qo.m_(),this.Qo.be()},this.dii=()=>{this.rgi.Agi&&(this.Qo.Sf||this.Qo.p_(),this.be(),this.Qo.ge(),this.J$t())},this.rgi=s,this._z=e,this.hv=n,this._9=n.UP,this._9.controls=!1,this.ngi(),this.ugi(),this.lgi()}};var d9=class extends S1{get Dgi(){return this.Sgi}get Igi(){return this.Oc[this.Egi]}set bgi(t){this.Egi=t}get bgi(){return this.Egi}get n1t(){return this.r1t}get bXt(){return Qn.jKt}constructor(t,i,e,s){super(e),this.Sgi=s,this.Egi=0,this.r1t=_9(s),this.G0t=t,this.V0t=i}},f9=class extends Ft{get Lgi(){return this.kgi}set Lgi(t){this.kgi!==t&&(this.kgi=t)}get Ti(){return this.Xl.Dgi.getHeight()}get ji(){return this.Xl.Dgi.getWidth()}get gHt(){return this.Lgi.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]}get bXt(){return Qn.jKt}fa(){return E1(this)}constructor(t,i,e){super(t,i),this.kgi=e}};function _9(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY?lo.Vqt:lo.Gqt}var g9=class t extends dt{async xgi(t,i){this.Cgi=t,this.Ogi=i,this.jgi(t),await i,this.Pgi()}get zgi(){return this.Bgi}get Rgi(){return this.Ugi}get Qgi(){return this.Fgi}get G7(){return this.RKt}get M6t(){return this.bKt}get V7(){const t=[];if(this.RKt){const i=this.RKt.bgi;i>=0&&t.push(...this.RKt.Oc.slice(i+1))}for(const i of this.Ygi)t.push(...i.Oc);return t}get W7(){return this.Ygi}Pgi(){this.Ggi()}jgi(t){t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Vgi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Wgi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Hgi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.qgi),t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.Xgi)}Zgi(){this.Cgi&&(this.Cgi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.Vgi),this.Cgi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Wgi),this.Cgi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.Hgi),this.Cgi.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,this.qgi),this.Cgi.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.Xgi))}Ggi(){this.Bgi=this.Kgi(this.Jgi),this.Ugi=this.Kgi(this.$gi).concat(this.Kgi(this.iwi)),this.Fgi=this.Kgi(this.ewi),this.Ygi=this.Bgi.concat(this.Ugi).concat(this.Fgi)}Kgi(t){if(!this.Cgi)return[];const i=this.Cgi.getSlotsByTimePositionClass(t);return this.swi(i)}nwi(t){if(!this.RKt)return void 0;const i=t.getSlot().getAdInstances().indexOf(t);-1!==i&&(this.RKt.bgi=i);const e=this.RKt.Igi;return e&&(e.Lgi=t),e}rwi(t){return Vt(this.Ygi,(i=>i.Dgi===t))}swi(i){return i.map((i=>{const e=i.getTotalDuration(),s=t.hwi(i);return new d9(e,e,s,i)}))}static owi(t,i){const e=t.getAdInstances(),s=[];for(const t of e){const e=_9(t.getSlot()),n=new f9(i,e,t),r=[];n.i1t(t.getAdId(),t.getSlot().getWidth(),t.getSlot().getHeight(),t.getDuration(),r,0),i.X0t(n),s.push(n)}return s}$Jt(){const t=this.M6t;t&&this.Co(new Ye(t,this.awi()))}uwi(){const t=this.M6t;t&&(this.Co(new Jh(t,t.Lgi.getPlayheadTime())),this.bKt=void 0)}cwi(t){const i=this.G7;i&&(i.dKt=function(t,i,e){void 0===e&&(e=0);let s=0;const n=t.Oc.length;for(let r=i;r<n;r++){const n=t.Oc[r],h=n.ct;if(n){let t=h;r===i&&(t=os(h-e,0,h)),s+=t}}return s}(i,i.bgi,t))}static hwi(t){return t.getTimePositionClass()===tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL?-1:t.getTimePosition()}awi(){const t=this.M6t;if(!t)return 0;const i=t.Lgi;return i.getPlayheadTime()/i.getDuration()}lwi(t){Qr(this.Ygi,t),Qr(this.Bgi,t),Qr(this.Ugi,t),Qr(this.Fgi,t)}tr(){this.Zgi(),this.Bgi.length=0,this.Ugi.length=0,this.Fgi.length=0,this.Ygi.length=0,this.bKt=void 0,this.RKt=void 0,this.Cgi=void 0,this.Ogi=void 0}gn(){this.tr(),this.Vo()}constructor(i,e){super(),this.Us=i,this.BC=e,this.Jgi=tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL,this.$gi=tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL,this.ewi=tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL,this.iwi=tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY,this.Bgi=[],this.Ugi=[],this.Fgi=[],this.Ygi=[],this.Vgi=i=>{const e=i.slot,s=this.rwi(e);s&&(t.owi(e,s),this.RKt=s,s.H0t(),this.lwi(s),s.n1t===lo.Gqt&&this.Co(new ea(s)))},this.Wgi=()=>{const t=this.G7;t&&t.n1t===lo.Gqt&&(this.Co(new Ji(t)),this.BC.src=""),this.RKt=void 0},this.Hgi=t=>{const i=this.nwi(t.adInstance);i&&(this.Co(new js(i,i.Lgi.getPlayheadTime())),this.bKt=i),t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&(this.Us.style.cursor="pointer",this.Us.addEventListener("click",this.dwi))},this.qgi=()=>{this.Us.style.cursor="",this.Us.removeEventListener("click",this.dwi)},this.dwi=()=>{this.M6t&&this.M6t.Lgi.getRendererController().processEvent({name:tv.freewheel.SDK.EVENT_AD_CLICK})},this.Xgi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.uwi();break;case tv.freewheel.SDK.EVENT_AD_SKIPPED:this.$Jt(),this.uwi()}}}},w9=class t extends dt{fwi(){if(this.bgt){this.bgt.setAdVolume(v9(this.zf,this.c_))}}_wi(t){this.bgt=t,this.jgi(t)}jgi(t){t.addEventListener(tv.freewheel.SDK.EVENT_AD,this.gwi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.wwi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.vwi),t.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Awi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.mwi),t.addEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.pwi)}ywi(){const t=this.bgt;t&&(t.removeEventListener(tv.freewheel.SDK.EVENT_AD,this.gwi),t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,this.wwi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,this.vwi),t.removeEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,this.Awi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_PAUSE_REQUEST,this.mwi),t.removeEventListener(tv.freewheel.SDK.EVENT_CONTENT_VIDEO_RESUME_REQUEST,this.pwi))}p_(){this.NAt.G7&&(this.NAt.G7.Dgi.resume(),this.Ff=!1)}m_(){this.NAt.G7&&(this.NAt.G7.Dgi.pause(),this.Ff=!0)}get Mf(){const t=this.NAt.M6t;return t&&(this.Mf=t.Lgi.getPlayheadTime()),this.xB}set Mf(t){this.xB=t}get ct(){return this.XL}get ygi(){return!!this.NAt&&void 0!==this.NAt.G7}get Ff(){return this.jB}set Ff(t){this.jB=t}get c_(){return this._k}set c_(t){this.bgt&&this.bgt.setAdVolume(t),this._k=t}get zf(){return this.bgt&&(this.Mwi=0===this.bgt.getAdVolume()),this.Mwi}set zf(t){this.bgt&&this.bgt.setAdVolume(v9(t,this.c_)),this.Mwi=t}get t_(){return this.o0}get Sf(){return this.D0}set Sf(t){this.D0=t}get Jf(){return this.S0}static Nwi(t){switch(t){case"pause":return tv.freewheel.SDK.VIDEO_STATE_PAUSED;case"playing":return tv.freewheel.SDK.VIDEO_STATE_PLAYING;case"ended":return tv.freewheel.SDK.VIDEO_STATE_COMPLETED;case"stop":return tv.freewheel.SDK.VIDEO_STATE_STOPPED}}Dwi(i){const e=t.Nwi(i);this.bgt&&e&&this.bgt.setVideoState(e)}qm(){const t=this.NAt.M6t;t&&t.Lgi.skip()}tr(){if(this.ywi(),this.bgt){this.Dwi("stop"),this.bgt.setVideoState(tv.freewheel.SDK.VIDEO_STATE_STOPPED);const t=this.bgt.getTemporalSlots();for(const i of t)i.stop();this.bgt.dispose(),this.bgt=void 0}this.XL=NaN,this.Sf=!1,this.S0=Mw.uT,this.Mf=0,this.Swi=0,this.Ff=!0,void 0!==this.Iwi&&(m(this.Iwi),this.Iwi=void 0)}gn(){this.tr(),this.Vo(),this.NAt.fn("stt",this.Md),this.Wu.fn(ii.pn,this.wwi),this.HJt.removeEventListener("click",this.Ewi)}constructor(t,i,e,s){super(),this.Qo=t,this.Wu=i,this.NAt=e,this.HJt=s,this.o0=Ai.kB().ks(),this.jB=!0,this.XL=NaN,this.Mwi=!1,this.D0=!1,this.S0=Mw.uT,this.xB=0,this.Swi=0,this.gwi=t=>{switch(t.subType){case tv.freewheel.SDK.EVENT_AD_PAUSE:(function(t){if(!t)return!0;const i=t.Lgi,e=i.getPlayheadTime(),s=i.getDuration();return e>=s||rd(s,e)})(this.NAt.M6t)||(this.Ff=!0,this.Co(new hs(this.Mf)));break;case tv.freewheel.SDK.EVENT_AD_RESUME:this.Ff=!1,this.Co(new Oe(this.Mf));break;case tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE:if(this.bgt){const t=this.bgt.getAdVolume();0===t?this.Mwi=!0:this._k=t,this.Co(new Pc(this.Mf,this.c_))}}},this.vwi=()=>{this.Sf=!1;const t=this.Ff;if(this.Ff=!1,t&&(this.Co(new Gt(this.Mf)),this.Co(new Oe(this.Mf))),this.S0=Mw.lT,this.Mf=0,!this.NAt.M6t)return;const i=this.NAt.M6t.Lgi;this.XL=i.getDuration(),this.Co(new ko(this.XL)),this.Iwi=v((()=>{if(!this.ygi)return void this.R$();this.NAt.cwi(this.Mf);const t=i.getPlayheadTime();M(t,this.Swi,.001)||this.Co(new Dr(t,void 0)),this.Swi=t}),250),this.bgt&&this.bgt.setAdVolume(v9(this.zf,this.c_))},this.Ewi=()=>{const t=this.NAt.M6t;t&&(t.n1t===lo.Vqt?this.Qo.m_():this.Ff||this.m_())},this.R$=()=>{m(this.Iwi),this.Iwi=void 0},this.Awi=()=>{this.R$(),this.Sf=!0},this.mwi=()=>{this.Dwi("pause")},this.pwi=()=>{this.Dwi("playing")},this.Md=t=>{t.Xl.n1t===lo.Gqt&&(this.Ff=!1)},this.wwi=()=>{this.bgt&&this.bgt.resize(this.Wu.ku,this.Wu._u)},this._k=t.c_,e.yn("stt",this.Md),this.Wu.yn(ii.pn,this.wwi),this.HJt.addEventListener("click",this.Ewi)}};function v9(t,i){return t?0:i}var A9=class extends Jo{get name(){return Yn.egi}constructor(){super("A FreeWheel Ad Error occurred")}},m9=class extends Jo{get name(){return Yn.igi}constructor(){super("A FreeWheel Reset Error Occurred")}},p9=0;var y9=class{bwi(t,i,e){t.setNetwork(i.networkId),t.setServer(i.adServerUrl);const s=this.bgt;if(s.setProfile(i.profile),i.assetId&&i.assetDuration&&s.setVideoAsset(i.assetId,i.assetDuration),i.siteSectionId&&s.setSiteSection(i.siteSectionId),s.registerVideoDisplayBase(e),i.cuePoints&&i.cuePoints.length)for(const t of i.cuePoints)s.addTemporalSlot("cue-"+ ++p9,t.adUnit,t.timeOffset);const n=i.customData;if(Ut(n)){const t=w.keys(n);for(const i of t){const t=n[i];s.addKeyValue(i,t)}}}async Lwi(){this.bgt.submitRequest(),await this.kwi.tL}tr(){this.bgt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.xwi),this.kwi.Jb(new m9)}constructor(t,i,e,s){this.bgt=i,this.xwi=t=>{this.bgt.removeEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.xwi),t.success?this.kwi.Zb(void 0):this.kwi.Jb(new A9)},this.bwi(t,e,s),i.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,this.xwi),this.kwi=new ue}},M9=class{Cwi(){this.Cgi.removeEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Wgi),this.Cgi.removeEventListener(tv.freewheel.SDK.EVENT_ERROR,this.Wgi)}get Owi(){return this.Hd.tL}CRt(){this.Cwi(),this.Hd.Jb(new m9)}constructor(t){this.Cgi=t,this.Wgi=t=>{this.Cwi(),this.Hd.Zb(void 0)},this.g5t=t=>{this.Cwi(),this.Hd.Jb(new A9)},this.Hd=new ue,t.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,this.Wgi),t.addEventListener(tv.freewheel.SDK.EVENT_ERROR,this.g5t)}},T9=class{NT(t){this.Cgi=t}Tgi(){return this.jwi(this.Pwi.zgi)}ggi(){this.jwi(this.Pwi.Qgi)}async jwi(t){if(this.Cgi)for(;t.length>0;){this.zwi=new M9(this.Cgi);const i=this.zwi.Owi,e=this.Pwi.G7;e&&e.n1t===lo.Vqt&&e.Dgi.stop();t.shift().Dgi.play();try{await i}finally{this.zwi=void 0}}}tr(){this.zwi&&(this.zwi.CRt(),this.zwi=void 0),this.Bwi=0}gn(){this.Qo.fn(Co.Iw,this.Rwi)}constructor(t,i){this.Qo=t,this.Pwi=i,this.Bwi=0,this.Rwi=()=>{const t=this.Qo.Tf();for(const i of this.Pwi.Rgi){const e=new Ai([this.Bwi,t],[!0,!0]),s=i.Dgi.getTimePosition();if(e.gr(s))switch(i.Dgi.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:this.jwi([i]);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:i.Dgi.play(),i.Dgi.setVisible(!0)}}this.Bwi=t},t.yn(Co.Iw,this.Rwi)}},N9=0,D9=class t extends Yu{static createUniqueDisplayBaseId(){return"theo-freewheel-"+ ++N9}get _gi(){return 0!==this.cgi.Qgi.length}get Mgi(){return 0!==this.cgi.zgi.length}async p2t(){if(!this.LXt)throw new g("Invalid state");const t=this.Uwi,i=t.newContext();i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL),i.setParameter(tv.freewheel.SDK.PARAMETER_EXTENSION_CONTENT_VIDEO_ENABLED,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL);const e=new y9(t,i,this.LXt,this.Qwi),s=this.cgi.xgi(i,e.Lwi());this.Fwi.NT(i),this.dgi._wi(i),this.Ywi=e;try{await s}finally{this.dgi.fwi(),this.Gwi=!0}}get dgi(){return this.u5t}get cgi(){return this.Vwi}get Agi(){return this.Gwi}static Wwi(t,i,e){const s=h.createElement("div");return s.id=e,s.className="theo-freewheel",i.classList.add("theo-freewheel-video"),s.appendChild(i),t.appendChild(s),s}get wgi(){return this.Fwi}x0t(t){this.dgi.Dwi(t.type)}ge(){this.HJt.style.display="block",this.BC.style.display="block"}be(){this.HJt.style.display="none",this.BC.style.display="none"}B6t(t){this.LXt=t}tr(){this.Gwi=!1,this.LXt=void 0,this.cgi.tr(),this.Fwi.tr(),this.Ywi&&(this.Ywi.tr(),this.Ywi=void 0),this.dgi.tr(),this.BC.src=""}gn(){this.tr(),this.u5t.gn(),this.Fwi.gn(),this.cgi.gn(),this.HJt.remove(),this.Qo.we.removeChild(this.HJt)}constructor(i,e,n){super(),this.Qo=i,this.BC=e,this.Gwi=!1,this.Qwi=t.createUniqueDisplayBaseId(),this.HJt=t.Wwi(i.we,e,this.Qwi),this.Uwi=new s.tv.freewheel.SDK.AdManager,this.Vwi=new g9(this.HJt,this.BC),this.Fwi=new T9(this.Qo,this.cgi),this.Qa(this.cgi),this.u5t=new w9(i,n,this.cgi,this.HJt)}};function S9(t){if(s.tv)switch(t){case"preroll":return tv.freewheel.SDK.ADUNIT_PREROLL;case"midroll":return tv.freewheel.SDK.ADUNIT_MIDROLL;case"postroll":return tv.freewheel.SDK.ADUNIT_POSTROLL;case"overlay":return tv.freewheel.SDK.ADUNIT_OVERLAY}}function I9(t,i,e){if(void 0!==i&&S(i)||i<0||i===1/0)return NaN;switch(t){case"preroll":return 0;case"postroll":return e}return Ei(i)}Ur.Lb.wR(new class{get y0t(){return Qn.jKt}gR(t){return t.integration===Pu.FREEWHEEL}M0t(t,i,e){if(!Boolean(s.tv&&s.tv.freewheel&&s.tv.freewheel.SDK&&s.tv.freewheel.SDK.AdManager))return;const n=new pa(t.Iu,t.Ol,1,[fi.ym]);n.WB(t.we);const r=n.Lz(fi.ym),h=new D9(t,r.UP,t.Iu);return new l9(t,i,n,h,r)}jQ(t){const e=Ms(t);fh(e.cuePoints)||(e.cuePoints=[]);const s=[],n=t.assetDuration||0;for(const t of e.cuePoints){const e=I9(t.adUnit,t.timeOffset,n),r=S9(t.adUnit);!S(e)&&Qs(r)?(t.adUnit=r,t.timeOffset=e,s.push(t)):i.Qv("Invalid adUnit/timeOffset combination. Cue was removed.")}return e.cuePoints=s,e}a4(t,i,e,s){e.B6t(t,i,s)}});var E9,b9=self.theoplayerDeviceMetadata;function nr(t){return t.navigator&&t.navigator.userAgent||""}!function(t){t.Hwi="Windows 10",t.qwi="Windows 8.1",t.Xwi="Windows 8",t.Zwi="Windows 7",t.Kwi="Windows Vista",t.Jwi="Windows Server 2003",t.$wi="Windows XP",t.tvi="Windows Phone",t.ivi="Mac OS X",t.evi="Mac OS",t.zI="Android",t.RI="iOS",t.svi="Ubuntu",t.nvi="Linux",t.rvi="Chrome OS"}(E9||(E9={}));var L9={"Windows 10":/(Windows 10.0|Windows NT 10.0)/i,"Windows 8.1":/(Windows 8.1|Windows NT 6.3)/i,"Windows 8":/(Windows 8|Windows NT 6.2)/i,"Windows 7":/(Windows 7|Windows NT 6.1)/i,"Windows Vista":/Windows NT 6.0/i,"Windows Server 2003":/Windows NT 5.2/i,"Windows XP":/(Windows NT 5.1|Windows XP)/i,"Windows Phone":/Windows Phone/i,Android:/Android/i,Linux:/(Linux(?!.*Ubuntu)|X11)/,Ubuntu:/Ubuntu/i,iOS:/(iPhone|iPad|iPod)/i,"Mac OS X":/Mac OS X/i,"Mac OS":/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/i,"Chrome OS":/CrOS/i};function k9(t,i){const e=L9[i];return!!e&&Boolean(nr(t).match(e))}function x9(t){return k9(t,"Android")}function C9(t){return k9(t,"Windows Phone")}function O9(t){return k9(t,"iOS")&&!C9(t)}function j9(t){return k9(t,"Ubuntu")}var P9,As=/Windows (NT|Phone) ([0-9.]+)/i,z9=/Mac.*?(OS |OS X )(\d+(([_.])\d+)?(([_.])\d+)?)/i,B9={"Windows 10":As,"Windows 8.1":As,"Windows 8":As,"Windows 7":As,"Windows Vista":As,"Windows Server 2003":As,"Windows XP":As,"Windows Phone":/Windows Phone ([0-9.]+)/i,Android:/Android (\d+(([_.])\d+)?(([_.])\d+)?)/i,Linux:void 0,Ubuntu:void 0,iOS:/(iPad|iPhone|iPod).*?(OS |os |OS_)(\d+(([_.])\d+)?(([_.])\d+)?)/i,"Mac OS X":z9,"Mac OS":z9,"Chrome OS":void 0};function R9(t,i){const e=B9[i];return e?nr(t).match(e):null}function U9(t){return t.split(/[_.]/).map((t=>x(t,10)))}function Q9(t){if(function(t){return Boolean(nr(t).match(/Windows/i))}(t)){if(function(t){return k9(t,"Windows 10")}(t))return"Windows 10";if(C9(t))return"Windows Phone";if(function(t){return k9(t,"Windows 8.1")}(t))return"Windows 8.1";if(function(t){return k9(t,"Windows 8")}(t))return"Windows 8";if(function(t){return k9(t,"Windows 7")}(t))return"Windows 7";if(function(t){return k9(t,"Windows Vista")}(t))return"Windows Vista";if(function(t){return k9(t,"Windows Server 2003")}(t))return"Windows Server 2003";if(function(t){return k9(t,"Windows XP")}(t))return"Windows XP"}else{if(x9(t))return"Android";if(O9(t))return"iOS";if(function(t){return k9(t,"Mac OS X")}(t))return"Mac OS X";if(function(t){return k9(t,"Mac OS")}(t))return"Mac OS";if(j9(t))return"Ubuntu";if(function(t){return k9(t,"Chrome OS")}(t))return"Chrome OS";if(function(t){return k9(t,"Linux")&&!j9(t)}(t))return"Linux"}}function F9(t,i){const e=function(t){const i=R9(t,"Windows 10");return i&&i.length>2?U9(i[2]):void 0}(t),s=function(t){const i=R9(t,"Mac OS X");return i&&i.length>2?U9(i[2]):void 0}(t),n=function(t){const i=R9(t,"Android");return i&&i.length>1?U9(i[1]):void 0}(t),r=function(t){const i=R9(t,"iOS");return i&&i.length>3?U9(i[3]):void 0}(t),h=function(t){const i=R9(t,"Chrome OS");return i&&i.length>0?U9(i[0]):void 0}(t);return e?e.length>i?e[i]:void 0:s?s.length>i?s[i]:void 0:n?n.length>i?n[i]:void 0:r?r.length>i?r[i]:void 0:h&&h.length>i?h[i]:void 0}function Y9(t){const i=function(t){return F9(t,0)}(t),e=function(t){return F9(t,1)}(t),s=function(t){return F9(t,2)}(t);if(void 0!==i)return void 0===e?""+i:void 0===s?i+"."+e:i+"."+e+"."+s}!function(t){t.hvi="Chrome",t.ovi="Chrome Mobile",t.avi="Chrome iOS",t.uvi="Chromium",t.cvi="Firefox",t.lvi="Seamonkey",t.dvi="Firefox iOS",t.fvi="Firefox Mobile",t._vi="Safari",t.gvi="Safari Mobile",t.wvi="Edge",t.vvi="Edge Chromium",t.Avi="Edge Mobile",t.mvi="IE",t.pvi="Opera",t.yvi="Opera Mobile",t.Mvi="Vivaldi",t.Tvi="HeadlessChrome",t.Nvi="Android Browser"}(P9||(P9={}));var G9={Chrome:/Chrome/i,"Chrome Mobile":void 0,"Chrome iOS":/CriOS/i,Chromium:/Chromium/i,HeadlessChrome:/HeadlessChrome/i,Firefox:/Firefox/i,Seamonkey:/Seamonkey/i,"Firefox iOS":/FxiOS/i,Safari:/Safari/i,Edge:/Edge\/\d+/i,"Edge Chromium":/Edg\/\d+/i,IE:/Trident/i,Opera:/Opera|OPR/i,Vivaldi:/Vivaldi/i,"Android Browser":void 0};function Qt(t,i){const e=G9[i];return!!e&&Boolean(nr(t).match(e))}function V9(t){return Boolean(nr(t).match(/Mobi/i))}function W9(t){return Boolean(t.chrome&&t.navigator&&t.navigator.vendor&&/google/i.test(t.navigator.vendor))||H9(t)}function H9(t){return Qt(t,"Chrome iOS")}function q9(t){return Qt(t,"Firefox")&&!Z9(t)}function X9(t){return Qt(t,"Firefox Mobile")&&!Z9(t)&&V9(t)}function Z9(t){return Qt(t,"Seamonkey")}function K9(t){return Qt(t,"Firefox iOS")&&!Z9(t)}function J9(t){return Qt(t,"Safari")&&!Qt(t,"Chrome")&&!f.tE}function $9(t){return Boolean(a7(t))}function t7(t){return Qt(t,"Edge")}function i7(t){return Qt(t,"Edge Chromium")}function e7(t){return Qt(t,"IE")}function s7(t){return Qt(t,"Vivaldi")}var n7,r7=/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,h7={Chrome:r7,"Chrome Mobile":r7,"Chrome iOS":/CriOS\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i,Chromium:r7,HeadlessChrome:r7,Firefox:/Firefox\/([0-9.]+)/i,"Firefox iOS":/FxiOS\/([0-9.]+)/i,Safari:/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/,"Safari Mobile":void 0,Edge:/Edge\/(\d+)/i,"Edge Chromium":/Edg\/(\d+)/i,"Edge Mobile":void 0,IE:/(MSIE |Trident.*?rv:)(\d+)/i,Opera:/(OPR\/(\d+\.\d+))|(Opera(?=.*Version\/((\d+)\.(\d+))))/i,"Opera Mobile":void 0,Vivaldi:/Vivaldi\/((\d+)\.(\d+)\.(\d+)(?:\.(\d+))?)/i,"Android Browser":void 0};function o7(t,i){const e=h7[i];return e?nr(t).match(e):null}function a7(t){return o7(t,"Opera")}function u7(t){const i=function(t){return o7(t,"Firefox")}(t);return i?C(i[1]):0}function c7(t){const i=function(t){return o7(t,"Firefox iOS")}(t);return i?C(i[1].split(".")[0]):0}function l7(t){const i=function(t){return o7(t,"Safari")}(t);return i?C(i[2].split(".")[0]):0}function d7(t){const i=function(t){return o7(t,"Edge")}(t);return i?C(i[1]):0}function f7(t){const i=function(t){return o7(t,"Edge Chromium")}(t);return i?C(i[1]):0}function _7(t){const i=function(t){return o7(t,"IE")}(t);return i?C(i[2]):0}function g7(t){const i=function(t){return o7(t,"Vivaldi")}(t);return i?C(i[1]):0}function w7(t){if(x9(t))return W9(t)?"Chrome Mobile":q9(t)||X9(t)?"Firefox Mobile":t7(t)?"Edge Mobile":$9(t)?"Opera Mobile":"Android Browser";if(O9(t)){if(W9(t)||H9(t))return"Chrome iOS";if(q9(t)||K9(t))return"Firefox iOS";if(t7(t))return"Edge Mobile";if(J9(t)||function(t){return J9(t)&&V9(t)}(t))return"Safari Mobile";if($9(t))return"Opera Mobile"}return function(t){return Qt(t,"Chromium")}(t)?"Chromium":function(t){return Qt(t,"HeadlessChrome")}(t)?"HeadlessChrome":W9(t)?"Chrome":q9(t)?"Firefox":J9(t)?"Safari":t7(t)?"Edge":i7(t)?"Edge Chromium":e7(t)?"IE":$9(t)?"Opera":s7(t)?"Vivaldi":void 0}function v7(t){return s7(t)?g7(t):H9(t)?Number(function(t){const i=h7["Chrome iOS"];return i&&i.exec(nr(t))||[]}(t)[1]):W9(t)?Number(function(t){const i=h7.Chrome;return i&&i.exec(nr(t))||[]}(t)[1]):q9(t)||X9(t)?u7(t):K9(t)?c7(t):J9(t)?l7(t):t7(t)?d7(t):i7(t)?f7(t):e7(t)?_7(t):$9(t)?function(t){const i=a7(t);return i&&i[0].indexOf("Opera")>-1?C(i[5]):i?C(i[2].split(".")[0]):0}(t):void 0}function A7(t){const i=nr(t);return i.match(/CrKey|Roku|AFTS|AppleTV|Nexus Player/i)?"settop":i.match(/Xbox|Playstation|Wii|Nintendo/i)?"console":/(iPad|Tablet|(Android(?!.*Mobi))|(Windows(?!.*Phone)(.*Touch))|Kindle|Playbook|Silk|(Puffin(?!.*(IP|AP|WP))))/i.test(i)?"tablet":/Mobi/.test(i)?"mobile":i.match(/GoogleTV|SmartTV|SMART-TV|Internet TV|NetCast|NETTV|boxee|Kylo|DLNADOC|hbbtv|CE-HTML/i)?"smarttv":i.match(/(nuhk|Googlebot|bingbot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/i)?"searchbot":function(t){return Boolean(w7(t))}(t)?"pc":void 0}!function(t){t.Dvi="pc",t.Svi="console",t.Ivi="settop",t.Evi="mobile",t.bvi="tablet",t.Lvi="smarttv",t.kvi="searchbot"}(n7||(n7={}));var m7=class{OQ(t){this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_ID,t.deviceID||function(){let t=_D.Wb("deviceId");if(t)return t;let i=mD();return _D.iP("deviceId",i),i}()),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER,"THEOplayer"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.PLAYER_VERSION,"8.2.0"),this.xvi(t),this.Cvi(),this.Ovi(t),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_VERSION,"3.0"),this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.EMPCLIENT_INTEGRATION_BUILDDATE,"2023-04-17 12:00:00"),t.application&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION,t.application),t.applicationVersion&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.APPLICATION_VERSION,t.applicationVersion),t.userAccountID&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.USER_ACCOUNT_ID,t.userAccountID);const i=t.connectionType;i?this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,i):(this.jvi(),Dl.connection&&Dl.connection.addEventListener&&Dl.connection.addEventListener("change",this.jvi))}xvi(t){this.Pvi(t);const i=t.deviceManufacturer||b9&&b9.manufacturer;i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MANUFACTURER,i);const e=t.deviceModel||b9&&b9.model;e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_MODEL,e)}Pvi(t){const i=t.deviceType||function(){const t=A7(self);switch(t){case n7.Svi:return"game-console";case n7.Lvi:return"tv";case n7.Ivi:return"media-streamer";default:return t}}();i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_TYPE,i)}Cvi(){const t=w7(self);t&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER,t);const i=v7(self);void 0!==i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_BROWSER_VERSION,i.toString())}Ovi(t){const i=t.deviceOs||Q9(self);i&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS,i);const e=t.deviceOsVersion||Y9(self);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DEVICE_OS_VERSION,e.toString())}gn(){Dl.connection&&Dl.connection.removeEventListener&&Dl.connection.removeEventListener("change",this.jvi)}constructor(t,e){this.empClient=t,this.agama=e,this.jvi=()=>{const t=i.ret;switch(t){case"wifi":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,"wlan");break;case"ethernet":this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,t);break;case"cellular":const e=function(t){switch(t){case"3g":return"mobile/3G";case"4g":return"mobile/4G";default:return}}(i.net);e&&this.empClient.setDeviceMetadata(this.agama.DeviceMetadata.DATA_CONNECTION_TYPE,e)}}}};var p7,An;Vr(function(t){return i=>class extends i{Nf(t,i){this.zvi&&this.zvi.TU(),super.Nf(t)}gn(){this.zvi&&this.zvi.gn(),super.gn()}constructor(i,e){super(i,e),this.dU=new t,this.zvi=new yD(this,this.dU,e)}}}(class extends oD{A_(t){this.Bvi=t,this.Rvi&&(this.dU=function(t,i){const e=function(t,i){switch(i){case"info":return t.LogLevel.INFO;case"debug":return t.LogLevel.DEBUG;case"warning":return t.LogLevel.WARNING;case"error":return t.LogLevel.ERROR;default:return t.LogLevel.FATAL}}(i,t.logLevel);i.setLogLevel(e);const s=new i.EMPClient(t.config);return function(t,i){return t.setExternalConfig(i.config),t}(s,t)}(t,this.Rvi),this.dU&&(this.Uvi=new m7(this.dU,this.Rvi),this.bo=!0))}CQ(){return this.Rvi||console.warn("Please load the Agama Library (empclient.min.js) in order to use the integration"),!!this.Rvi}kQ(){return this.bo}oQ(t,i){if(this.dU&&this.Rvi)switch(t){case jc.bR:this.dU.setMeasurement(this.Rvi.Measurement.BUFFER_LENGTH,i);break;case jc.LR:this.dU.setMeasurement(this.Rvi.Measurement.BYTES_RECEIVED,i);break;case jc.xR:this.dU.setMeasurement(this.Rvi.Measurement.SEGMENT_PROFILE_BITRATE,i);break;case jc.OR:this.dU.setMeasurement(this.Rvi.Measurement.VIDEO_PROFILE_BITRATE,i);break;case jc.kR:this.dU.setMeasurement(this.Rvi.Measurement.SEGMENT_READ_BITRATE,i);break;case jc.NR:this.dU.setMeasurement(this.Rvi.Measurement.HTTP_REQUEST_STATUS_CODE_1XX,i);break;case jc.DR:this.dU.setMeasurement(this.Rvi.Measurement.HTTP_REQUEST_STATUS_CODE_2XX,i);break;case jc.SR:this.dU.setMeasurement(this.Rvi.Measurement.HTTP_REQUEST_STATUS_CODE_3XX,i);break;case jc.IR:this.dU.setMeasurement(this.Rvi.Measurement.HTTP_REQUEST_STATUS_CODE_4XX,i);break;case jc.ER:this.dU.setMeasurement(this.Rvi.Measurement.HTTP_REQUEST_STATUS_CODE_5XX,i);break;case jc.PR:this.dU.setMeasurement(this.Rvi.Measurement.PLAYBACK_POSITION,i);break;case jc.zR:this.dU.setMeasurement(this.Rvi.Measurement.NUMBER_OF_FRAMES_DECODED,i);break;case jc.jR:this.dU.setMeasurement(this.Rvi.Measurement.NUMBER_OF_FRAMES_DROPPED,i)}}FU(t,i){if(this.dU&&this.Rvi)switch(t){case qa.YR:this.dU.setSessionMetadata(this.Rvi.SessionMetadata.ASSET_DURATION,i);break;case qa.FR:this.dU.setSessionMetadata(this.Rvi.SessionMetadata.MANIFEST_URI,i);break;case qa.GR:this.dU.setSessionMetadata(this.Rvi.SessionMetadata.NUMBER_OF_CONTENT_PROFILES,i);break;case qa.qR:this.dU.setSessionMetadata(this.Rvi.SessionMetadata.SERVICE_NAME,i);break;case qa.WR:this.dU.setSessionMetadata(this.Rvi.SessionMetadata.CDN,i);break;case qa.HR:this.dU.setSessionMetadata(this.Rvi.SessionMetadata.CONTENT_TITLE,i);break;case qa.XR:this.dU.setSessionMetadata(this.Rvi.SessionMetadata.CONTENT_TYPE,i);break;case qa.ZR:this.dU.setSessionMetadata(this.Rvi.SessionMetadata.CONTENT_DESCRIPTION,i)}}OQ(){this.Uvi&&this.Bvi&&this.Uvi.OQ(this.Bvi)}xQ(t,i){this.Rvi&&this.dU&&(this.wQ(),function(t,i,e,s){const n=pD(t,e,s);i.abrSession(n,t.ViewState.INITIAL_BUFFERING)}(this.Rvi,this.dU,t,i),this.Qvi=!0)}gn(){this.Uvi&&this.Uvi.gn(),this.Fvi(sD.KR),this.dU=void 0}EU(t){this.Yvi(t)}kU(t,i){this.dU&&this.dU.event(t.code,i)}wQ(){this.dU&&this.Qvi&&(this.dU.exitSession(),this.Qvi=!1)}Fvi(t){if(this.dU&&this.Rvi&&(this.wQ(),t===sD.KR))this.dU.shutdown(this.Rvi.ShutdownType.NORMAL_SHUTDOWN)}bU(t,i,e){this.Yvi(t,i,e)}Yvi(t,i,e){if(this.dU&&this.Rvi)switch(t){case ll.Rw:this.Gvi(this.Rvi.ViewState.PLAYING,i,e);break;case ll.pR:this.Gvi(this.Rvi.ViewState.FAILED,i,e);break;case ll.yR:this.Gvi(this.Rvi.ViewState.INITIAL_BUFFERING,i,e);break;case ll.vR:this.Gvi(this.Rvi.ViewState.PAUSED,i,e);break;case ll.AR:this.Gvi(this.Rvi.ViewState.SEEK,i,e);break;case ll.mR:this.Gvi(this.Rvi.ViewState.STALLED,i,e);break;case ll.MR:this.Gvi(this.Rvi.ViewState.NO_ACCESS,i,e)}}Gvi(t,i,e){if(this.dU)if(i){const s=function(t){return t||""}(e);this.dU.viewStateExtended(t,i.code,s)}else this.dU.viewStateChanged(t)}constructor(){super(),this.bo=!1,this.Qvi=!1,this.Rvi=Ha.Agama}}),Zo.j7),function(t){t.PLAY_ALL="play-all",t.PLAY_NONE="play-none",t.PLAY_LAST="play-last"}(p7||(p7={})),function(t){t.VOD="vod",t.LIVE="live"}(An||(An={}));var y7=class{get va(){return this.Vvi.va}get lt(){return this.BP}get bf(){return this.RP}Wvi(t){this.BP=tn(t),this.RP=t,this.Qo.Co(new Eo(t))}ga(t){this.Hvi.tr(),this.qvi.Xb(),this.Xvi=!1,this.Qo.Zvi(t)}async ytt(t,i){if(this.Kvi.tr(),this.Xvi=!1,!t||!function(t){return t.sources.some((t=>t.integration===Ci.VERIZON_MEDIA))}(t))return await this.Qo.Jvi(t,i);try{this.$vi=await this.tAi.pfi(t),await this.Qo.Jvi(this.$vi,i)}catch(t){this.Wvi(new Rs(Ui.MANIFEST_LOAD_ERROR,t.message,t))}}gn(){this.q2.qd(),this.iAi.qd(),this.Qo.fn(Co.Hg,this.eAi),this.Qo.fn(Co.jh,this.kci),this.Qo.fn(Co.Iw,this.zni),this.Qo.fn(Co.Jg,this.Jli),this.Qo.fn(Zt.Pw,this.jd);for(const t of this.Hvi.gKt.Gu)t.fn("sAi",this.nAi),t.fn("stt",this.rAi),t.fn("ett",this.hAi);this.Hvi.gKt.fn("J7",this.oAi),this.Hvi.gKt.fn("K7",this.aAi),this.Hvi.gn(),this.XJt&&(this.XJt.Ud(),this.XJt=void 0),this.Xvi=!1}async fetchAssetInfo(t){if(t&&t.integrationData)try{const i=await this.uAi.Wyt(t.integrationData.source.prefix,t.integrationData.source.id,this.iAi.Wd,t.integrationData.preplayResponse.sid);this.Vvi.cAi(i),this.qvi.lAi(i,this.Hvi.gKt.Gu)}catch(t){0}}dAi(t){this.Hvi.fAi(t),this.Hvi.F7.forEach((i=>i._Ai(t))),this.Hvi.gAi(this.Qo.i_()),this.qJt()}Nf(t){this.Hvi.G7||(this.q2.qd(),this.q2=new Wr,ha(this.eei(t,this.q2.Wd)))}async eei(t,i){if(fo(i),t<this.Qo.Tf())return void this.wAi(t);let e=[];switch(this.Hvi.vAi){case p7.PLAY_ALL:e=this.Hvi.AAi(this.Qo.Tf(),t),await this.mAi(t,e,i);break;case p7.PLAY_LAST:const s=this.Hvi.AAi(this.Qo.Tf(),t).pop();e=s?[s]:[],await this.mAi(t,e,i);break;case p7.PLAY_NONE:this.pAi(t)}}wAi(t){const i=Vt(this.Hvi.gKt.Gu,(i=>i.Qht.gr(t)));i?this.Qo.yAi(i.VT):this.Qo.yAi(t)}pAi(t){const i=this.Hvi.AAi(this.Qo.Tf(),t).pop();i&&i.Qht.gr(t)?this.Qo.yAi(i.WT):this.Qo.yAi(t)}async mAi(t,i,e){for(const t of i)await this.MAi(t,e);const s=i[i.length-1];s&&s.Qht.gr(t)?this.Qo.Tf()<t&&this.Qo.yAi(s.WT):this.Qo.yAi(t)}async MAi(t,i){t.fn("sAi",this.nAi);const e=Promise.race([t.lf("ett",i),t.lf("sAi",i)]);this.dAi(this.Qo.Tf()),t.ro||this.Qo.yAi(t.VT),await e,t.yn("sAi",this.nAi)}qJt(){const t=Vt(this.Hvi.F7,(t=>t.TAi.length>0));if(t){const i=t.TAi[0];this.XJt||(this.XJt=new H0(this.Qo.we),this.XJt.yn("clickstart",this.NAi)),this.XJt.sJt=i}else this.XJt&&(this.XJt.Ud(),this.XJt=void 0)}constructor(t,i,e,s,n,r,h){this.Qo=t,this.Kvi=i,this.tAi=e,this.Hvi=s,this.Vvi=n,this.uAi=r,this.qvi=h,this.BP=void 0,this.RP=void 0,this.q2=new Wr,this.iAi=new Wr,this.DAi=void 0,this.Xvi=!1,this.XJt=void 0,this.eAi=t=>{const i=t.currentSource;if(!i||!i.integrationData)return;const{preplayResponse:e,source:s}=i.integrationData;this.Vvi.SAi(e),e&&e.type===An.VOD&&e.ads&&this.Hvi.lAi(e.ads),this.Kvi.IAi=i.integrationData,s.assetInfo&&ha(this.fetchAssetInfo(i))},this.kci=()=>{this.Xvi=!0},this.zni=()=>{this.Xvi&&this.dAi(this.Qo.Tf())},this.Jli=()=>{this.Xvi&&(this.dAi(1/0),this.Xvi=!1)},this.jd=()=>{ha(this.Kvi.Cn())},this.nAi=t=>{this.q2.qd(),this.q2=new Wr,ha(this.eei(t.Xl.WT,this.q2.Wd))},this.rAi=()=>{1!==this.Qo.Gf&&(this.DAi=this.Qo.Gf,this.Qo.Gf=1)},this.hAi=()=>{void 0!==this.DAi&&(this.Qo.Gf=this.DAi,this.DAi=void 0)},this.oAi=t=>{t.Xl.yn("sAi",this.nAi),t.Xl.yn("stt",this.rAi),t.Xl.yn("ett",this.hAi)},this.aAi=t=>{t.Xl.fn("sAi",this.nAi),t.Xl.fn("stt",this.rAi),t.Xl.fn("ett",this.hAi)},this.NAi=()=>{this.Qo.m_()},this.Qo.yn(Co.Hg,this.eAi),this.Qo.yn(Co.jh,this.kci),this.Qo.yn(Co.Iw,this.zni),this.Qo.yn(Co.Jg,this.Jli),this.Qo.yn(Zt.Pw,this.jd),this.Hvi.gKt.yn("J7",this.oAi),this.Hvi.gKt.yn("K7",this.aAi)}};var M7,T7=ro({breaksIndex:sh,adsIndex:sh,startTime:sh,endTime:sh}),N7=ro({index:sh,timeOffset:sh}),D7=ro({duration:sh,apiFramework:Ae(Ps,zT),creative:Ps,mimeType:Ps,width:sh,height:sh,companions:Zr(function(t){return new WT(t)}((()=>D7))),extensions:Ae(ta,Zr(zh)),fw_parameters:Ae(ta,VT(Ps)),events:VT(Zr(Ps))}),S7=ro({type:vt(["linear","nonlinear"]),position:vt(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:sh,duration:sh,ads:Zr(D7),events:VT(Zr(Ps))}),I7=ro({breaks:Zr(S7),breakOffsets:Zr(N7),placeholderOffsets:Zr(T7)}),E7=ro({fairplayCertificateURL:Ae(ta,Ps),widevineLicenseURL:Ae(ta,Ps),playreadyLicenseURL:Ae(ta,Ps)}),b7={type:vt(UT(An)),playURL:Ps,prefix:Ps,sid:Ps,drm:Ae(ta,E7)},L7=ro(Yt({},b7,{type:vt([An.VOD]),ads:I7,interstitialURL:Ae(Ps,zT,ta)})),k7=Ae(L7,ro(Yt({},b7,{type:vt([An.LIVE])}))),x7=Ps,C7=ro({userId:Ps,externalId:Ae(Ps,Zr(Ps))});!function(t){t[t.AD_IMPRESSIONS=1]="AD_IMPRESSIONS",t[t.FW_VIDEO_VIEWS=2]="FW_VIDEO_VIEWS",t[t.LINEAR_AD_DATA=4]="LINEAR_AD_DATA"}(M7||(M7={}));var O7=class{async Wyt(t){try{return this.EAi(t)}catch(t){throw t}}async EAi(t){const e=await async function(t){const e=t.prefix,s=j7[t.assetType],n=function(t){if(Zr(x7).Oj(t))return 1===t.length?t[0]:t.join(",")+"/multiple";if(x7.Oj(t))return t;if(C7.Oj(t)&&fh(t.externalId))return 1===t.externalId.length?"ext/"+t.userId+"/"+t.externalId[0]:"ext/"+t.userId+"/"+t.externalId.join(",")+"/multiple";if(C7.Oj(t))return"ext/"+t.userId+"/"+t.externalId;throw new b("Invalid asset id")}(t.id),r=await async function(t){if(t&&await i.qx())return{rmt:"fps",manifest:"m3u8"};if(t&&await i.Gx())return{rmt:"wv",manifest:"mpd"};if(t&&await i.Hx())return{rmt:"pr",manifest:"mpd"};return{}}(t.contentProtected),h=function(t,i){const e=P7(t,i);return e?{"ad.cping":"1","ad.pingf":String(e)}:{}}(t.assetType,t.ping);let o={};fh(t.preplayParameters)?t.preplayParameters.forEach((t=>{o[t[0]]=t[1]})):o=t.preplayParameters;const a=e+"/preplay/"+s+n+".json";return Of(a,Yt({v:"2"},o,r,h,o))}(t),s=this.EI.LS({gI:yt.GET,zu:e,wI:oe.HS}),n=await s,r=Yt({},await n.zm(),{type:t.assetType===mu.ASSET?An.VOD:An.LIVE});return k7.Oj(r)||k7.Pj(r,"PreplayResponse"),r}constructor(t){this.EI=t}},j7={[mu.ASSET]:"",[mu.CHANNEL]:"channel/",[mu.EVENT]:"event/"};function P7(t,i){const e=t!==mu.ASSET;return(!e&&i.adImpressions?1:0)+(!e&&i.freeWheelVideoViews?2:0)+(e&&i.linearAdData?4:0)}var z7,B7=ro({ad_id:Ps,apiFramework:Ae(zT,Ps),companions:Zr(zh),creative:Ps,duration:sh,mimeType:Ps,height:sh,width:sh,extensions:Ae(ta,Zr(zh)),fw_parameters:Ae(ta,VT(Ps))}),R7=ro({breakId:Ps,ads:Zr(B7),type:vt(["linear","nonlinear"]),position:vt(["preroll","midroll","postroll","pause","overlay",""]),timeOffset:sh,duration:sh,height:Ae(ta,sh),width:Ae(ta,sh),events:VT(Zr(Ps))}),U7=ro({breaks:Zr(R7)}),Q7=ro({next_time:sh,ads:Ae(ta,U7),extensions:Ae(ta,Zr(zh)),error:Ae(ta,Ps),currentBreakEnd:Ae(ta,sh)});!function(t){t.Kyt="start",t.AR="seek"}(z7||(z7={}));var F7=class{async Wyt(t,i){try{return this.EAi(t,i)}catch(t){throw t}}async EAi(t,i){const e=function(t){const i={v:"3",pt:String(t.currentTime)};(function(t){return void 0!==t.seekTime})(t)&&t.hasFreeWheelVideoViews&&(i.ft=String(t.seekTime));t.event&&(i.ev=t.event);return Of(t.zonePrefix+"/session/ping/"+t.sessionId+".json",Yt({},i))}(t),s=this.EI.LS({gI:yt.GET,zu:e,wI:oe.HS,Wd:i}),n=await s,r=await n.zm();return Q7.Oj(r)||Q7.Pj(r,"PingResponse"),r}constructor(t){this.EI=t}};var Y7=class extends hl{get xS(){return this.CS}fa(){return new G7(this.CS)}constructor(t){super("bAi"),this.CS=t}},G7=class extends wn{constructor(t){super("pingresponse"),this.response=t}},V7=class extends hl{get lt(){return this.BP}fa(){return new W7(this.BP)}constructor(t){super("LAi"),this.BP=t}},W7=class extends wn{constructor(t){super("pingerror"),this.error=t}},H7=class extends Bo{set IAi(t){this.kAi=t}get xAi(){return this.CAi}async Cn(){const t=this.kAi;if(!t)return;0!==P7(t.source.assetType,t.source.ping)&&(this.CAi=this.Qo.i_().start(0),await this.OAi(z7.Kyt),this.Qo.yn("timeupdate",this.jAi),this.Qo.yn("seeking",this.PAi))}async OAi(t,i){const e=this.kAi.preplayResponse,s={};if(S(this.CAi))return void 0;if(Po(this.zAi)&&rd(this.zAi,this.Qo.Tf()-this.CAi))return;void 0!==i&&(s.seekTime=i),void 0!==t&&(s.event=t);let n,r=this.Qo.Tf()-this.CAi;t===z7.Kyt?r=0:t!==z7.AR&&this.BAi&&(r=_.min(r,this.BAi)),this.zAi=r;try{var h;const t=await this.RAi.Wyt(Yt({zonePrefix:e.prefix,sessionId:e.sid,currentTime:r,hasFreeWheelVideoViews:null==(h=this.kAi)?void 0:h.source.ping.freeWheelVideoViews},s),this.DC.Wd);this.Co(new Y7(t)),this.BAi=-1!==t.next_time?t.next_time:void 0,n=t.error}catch(t){ut(t)||(n=t.message)}finally{n&&this.Co(new V7(n))}}tr(){this.BAi=void 0,this.kAi=void 0,this.CAi=NaN,this.UAi=!1,this.QAi=NaN,this.zAi=void 0,this.Qo.fn("seeking",this.PAi),this.Qo.fn("timeupdate",this.jAi),this.FAi()}FAi(){this.DC.qd(),this.DC=new Wr}gn(){this.tr()}constructor(t,i){super(),this.RAi=t,this.Qo=i,this.CAi=NaN,this.BAi=void 0,this.UAi=!1,this.QAi=NaN,this.DC=new Wr,this.zAi=void 0,this.jAi=async()=>{const t=this.Qo.Tf();if(this.QAi=t,this.UAi||$l(this.BAi)||S(this.CAi))return;this.CAi+this.BAi<=t&&(this.UAi=!0,await this.OAi(),this.UAi=!1)},this.PAi=()=>{if(this.Qo.Tf()===this.CAi)return;this.UAi&&this.FAi(),this.QAi=this.Qo.Tf();const t=this.QAi-(this.CAi||0);S(t)?ha(this.OAi(z7.AR,0)):ha(this.OAi(z7.AR,t))}}},q7=class{async pfi(t){const i=[];for(const e of t.sources)if(X7(e))try{const s=K7({source:e,preplayResponse:await this.YAi.Wyt(e)},t,this.jH);s.src&&(s.src=Of(s.src,e.playbackUrlParameters)),i.push(s)}catch(t){0}else i.push(e);if(0!==t.sources.length&&0===i.length)throw new g("Fatal: unable to play VerizonMediaSources.");return Yt({},t,{sources:i})}constructor(t,i){this.YAi=t,this.jH=i}};function X7(t){return"verizon-media"===t.integration}function Z7(t){if(t.sources)if(fh(t.sources)){for(const i of t.sources)if(!Qs(i)&&"verizon-media"===i.integration)return!0}else if(!Qs(t.sources))return"verizon-media"===t.sources.integration;return!1}function K7(t,i,e){const s=t.preplayResponse;let n;t.source.contentProtected&&s.drm&&(n={integration:"uplynk"},s.drm.fairplayCertificateURL&&(n.fairplay={certificateURL:s.drm.fairplayCertificateURL}),s.drm.widevineLicenseURL&&(n.widevine={licenseAcquisitionURL:s.drm.widevineLicenseURL}),s.drm.playreadyLicenseURL&&(n.playready={licenseAcquisitionURL:s.drm.playreadyLicenseURL}));const r=Qu({src:s.playURL,contentProtection:n,useNativePlayback:t.source.useNativePlayback,hls:t.source.hls,dash:t.source.dash,seamlessSwitchStrategy:t.source.seamlessSwitchStrategy},i,e);return r.integrationData=t,r}var J7=class extends hl{fa(){return new $7(this.Xl.va)}constructor(t,i){super("stt"),this.Xl=t,this.cD=i}},$7=class extends wn{constructor(t){super("adbreakbegin"),this.adBreak=t}},ttt=class extends hl{fa(){return new itt(this.Xl.va)}constructor(t,i){super("ett"),this.Xl=t,this.cD=i}},itt=class extends wn{constructor(t){super("adbreakend"),this.adBreak=t}},ett=class extends hl{fa(){return new stt(this.Xl.va)}constructor(t){super("sAi"),this.Xl=t}},stt=class extends wn{constructor(t){super("adbreakskip"),this.adBreak=t}};var ntt=class extends hl{fa(){return new rtt(this.Xl.va)}constructor(t){super("w1t"),this.Xl=t}},rtt=class extends wn{constructor(t){super("updateadbreak"),this.adBreak=t}},htt=class extends dt{get va(){return this.Xa||(this.Xa=function(t){let i;const e={get startTime(){return t.VT},get endTime(){return t.WT},get duration(){return t.ct},get ads(){return t.Oc.va},get skipOffset(){return t.VHt},set skipOffset(i){t.VHt=i},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new xa(t,e),e}(this)),this.Xa}get VT(){return this.iN}get WT(){return this.XL?this.iN+this.XL:void 0}GAi(t){this.XL=t-this.VT;for(const i of this.Oc.Gu)i.VT>t&&this.Oc.bT(i);this.Co(new ntt(this))}get ct(){return this.XL}get Qht(){const t=this.WT;return Po(t)?new Ai([this.VT,t]):Ai.kB()}get Oc(){return this.Ic}get VAi(){return this.WAi}get ro(){return this.ho}get VHt(){return this.e_i?-1:this.WHt}set VHt(t){this.e_i||(this.WHt=t)}gat(t){return t>=this.VT&&($l(this.ct)||t<=this.VT+this.ct)}HAi(t){return-1!==this.VHt&&(!!Po(this.WT)&&t-this.VT>=this.VHt)}qm(){this.Ic.Gu.forEach((t=>t.qm())),this.Co(new ett(this))}qAi(t){const i=Po(this.WT)&&t>=this.WT,e=this.VT<=t&&!i&&!this.ro,s=this.ro&&this.WT&&t>=this.WT;e&&(this.ho=!0,this.Co(new J7(this,this.VT))),this.Ic.Gu.forEach((i=>i.qAi(t))),s&&(this.WAi=!0,this.ho=!1,this.Co(new ttt(this,this.WT)))}constructor(t,i,e,s,n){super(),this.iN=t,this.XL=i,this.Ic=e,this.e_i=s,this.ho=!1,this.WAi=!1,this.WHt=n}},ott=class extends hl{fa(){return new att(this.ttt.va)}constructor(t,i){super("ntt"),this.ttt=t,this.cD=i}},att=class extends wn{constructor(t){super("adbegin"),this.ad=t}},utt=class extends hl{fa(){return new ctt(this.ttt.va)}constructor(t,i){super("htt"),this.ttt=t,this.cD=i}},ctt=class extends wn{constructor(t){super("adend"),this.ad=t}},ltt=class extends hl{fa(){return new dtt(this.ttt.va)}constructor(t){super("XAi"),this.ttt=t}},dtt=class extends wn{constructor(t){super("removead"),this.ad=t}},ftt=class extends V4{c7t(t){}_7t(t){this.Co(new ltt(t))}constructor(){super()}},_tt=class extends hl{fa(){return new gtt(this.ttt.va)}constructor(t){super("A1t"),this.ttt=t}},gtt=class extends wn{constructor(t){super("adfirstquartile"),this.ad=t}},wtt=class extends hl{fa(){return new vtt(this.ttt.va)}constructor(t){super("m1t"),this.ttt=t}},vtt=class extends wn{constructor(t){super("admidpoint"),this.ad=t}},Att=class extends hl{fa(){return new mtt(this.ttt.va)}constructor(t){super("p1t"),this.ttt=t}},mtt=class extends wn{constructor(t){super("adthirdquartile"),this.ad=t}},ptt=class extends hl{fa(){return new ytt(this.ttt.va)}constructor(t){super("ZAi"),this.ttt=t}},ytt=class extends wn{constructor(t){super("adcomplete"),this.ad=t}};var Mtt,Ttt,Ntt,Dtt=class t extends dt{static KAi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.KAi(i,e))),e.extensions,e.fw_parameters,e.events,void 0)}static JAi(i,e){return new t(i,e.duration,e.apiFramework||"",e.creative,e.mimeType,e.width,e.height,e.companions.map((e=>t.JAi(i,e))),e.extensions,e.fw_parameters,void 0,e.ad_id)}get va(){return this.Xa||(this.Xa=function(t){let i;const e={get apiFramework(){return t.nHt},get companions(){return t.qWt.va},get creative(){return t.$Ai},get duration(){return t.ct},get endTime(){return t.WT},get events(){return t.BF},get extensions(){return t.tmi},get freeWheelParameters(){return t.imi},get height(){return t.Ti},get mimeType(){return t.zF},get startTime(){return t.VT},get width(){return t.ji},addEventListener(t,e){i.yn(t,e)},removeEventListener(t,e){i.fn(t,e)}};return i=new xa(t,e),e}(this)),this.Xa}get VT(){return this.iN}get WT(){return this.iN+this.XL}get ct(){return this.XL}get nHt(){return this.rHt}get $Ai(){return this.emi}get zF(){return this.tY}get ji(){return this.wk}get Ti(){return this.vk}get BF(){return this.KB}get qWt(){return this.XWt}get tmi(){return this.smi}get imi(){return this.nmi}get ro(){return this.ho}get TAi(){var t;return null!=(t=this.KB.clickthroughs)?t:[]}qAi(t){const i=this.VT<=t&&t<this.WT,e=i&&!this.ro,s=!i&&this.ro;e&&(this.rmi=!1,this.hmi=!1,this.omi=!1,this.ami=!1,this.ho=!0,this.Co(new ott(this,this.VT))),s&&(this.ho=!1,this.Co(new utt(this,this.WT)))}_Ai(t){const i=(t-this.VT)/this.ct;!this.rmi&&i>=.25&&(this.rmi=!0,this.Co(new _tt(this))),!this.hmi&&i>=.5&&(this.hmi=!0,this.Co(new wtt(this))),!this.omi&&i>=.75&&(this.omi=!0,this.Co(new Att(this))),!this.ami&&i>=.9999&&(this.ami=!0,this.Co(new ptt(this)))}qm(){this.rmi=!0,this.hmi=!0,this.omi=!0,this.ami=!0}gn(){this.fn("ntt",this.umi),this.fn("htt",this.cmi)}constructor(t,i,e,s,n,r,h,o,a=[],u={},c={},l){super(),this.iN=t,this.XL=i,this.rHt=e,this.emi=s,this.tY=n,this.wk=r,this.vk=h,this.smi=a,this.nmi=u,this.KB=c,this.OHt=l,this.XWt=new ftt,this.ho=!1,this.rmi=!1,this.hmi=!1,this.omi=!1,this.ami=!1,this.umi=()=>this._Ai(this.iN),this.cmi=()=>this._Ai(this.WT),this.XWt.l7t(o),this.yn("ntt",this.umi),this.yn("htt",this.cmi)}},Stt=class extends hl{fa(){return new Itt(this.Xl.va)}constructor(t){super("J7"),this.Xl=t}},Itt=class extends wn{constructor(t){super("addadbreak"),this.adBreak=t}},Ett=class extends hl{fa(){return new btt(this.Xl.va)}constructor(t){super("K7"),this.Xl=t}},btt=class extends wn{constructor(t){super("removeadbreak"),this.adBreak=t}},Ltt=class extends V4{c7t(t){this.Co(new Stt(t))}_7t(t){this.Co(new Ett(t))}constructor(){super()}},ktt=class{get va(){return this.Xa||(this.Xa=function(t){return{get adBreaks(){return t.gKt.va},get currentAdBreak(){if(t.G7)return t.G7.va},get currentAds(){return t.G7?t.G7.Oc.va:(new ftt).va},skip(){t.qm()}}}(this)),this.Xa}get gKt(){return this.UKt}get G7(){return Vt(this.UKt.Gu,(t=>t.ro))}get F7(){return this.G7?this.G7.Oc.Gu.filter((t=>t.ro)):[]}get lmi(){if(0===this.gKt.U||0===this.Kbt.i_().length)return;const t=this.Kbt.i_().end(this.Kbt.i_().length-1);return Vt(this.gKt.Gu,(i=>i.gat(t)))}get vAi(){return this.dmi}gAi(t){if(0===t.length)return;const i=Ai.xn(t);for(const t of this.UKt.Gu.slice())Po(t.WT)&&i.Cn(0)>t.WT&&this.UKt.bT(t)}lAi(t){const i=!function(t){return Po(t.breakOffsets)}(t),e=i?this.Kvi.xAi:0;for(const s of t.breaks){if(0===s.ads.length)continue;let t=s.timeOffset+e;const n=new ftt;let r=0;for(const e of s.ads){const s=i?Dtt.JAi(t,e):Dtt.KAi(t,e);n.ET(s),t+=s.ct,r+=s.ct}const h=s.timeOffset+e,o=i?void 0:s.duration,a=new htt(h,o,n,i,this.fmi);i&&this._mi.push({BWt:a,SSt:h+r}),this.UKt.ET(a)}}gmi(t){const i=this.lmi;i&&i.GAi(t+this.Kvi.xAi)}fAi(t){this.wmi=t,this.UKt.Gu.forEach((i=>i.qAi(t)))}qm(){const t=this.wmi,i=this.G7;t&&i&&i.HAi(t)&&i.qm()}AAi(t,i){let e=[];for(const s of this.gKt.Gu)!s.VAi&&s.VT>=t&&s.VT<i&&e.push(s);return e}gn(){this.Kbt.fn("timeupdate",this.vmi),this.Kvi.fn("bAi",this.Ami)}tr(){for(const t of this.gKt.Gu){for(const i of t.Oc.Gu)i.Vo();t.Vo()}this.gKt.Xb(),this.wmi=void 0,this._mi=[]}constructor(t,i,e,s){this._mi=[],this.Ami=t=>{t.xS.ads&&this.lAi(t.xS.ads),t.xS.currentBreakEnd&&this.gmi(t.xS.currentBreakEnd)},this.vmi=t=>{if(0===this._mi.length||0===this.Kbt.i_().length)return;const i=this.Kbt.i_().end(this.Kbt.i_().length-1);for(const t of this._mi.slice())Po(t.BWt.ct)?Qr(this._mi,t):t.SSt<i&&(t.BWt.GAi(t.SSt),Qr(this._mi,t))},this.Kbt=t,this.Kvi=i,this.UKt=new Ltt,this.fmi=e,this.dmi=s,t.yn("timeupdate",this.vmi),this.Kvi.yn("bAi",this.Ami)}};!function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.G=1]="G",t[t.PG=2]="PG",t[t.PG_13=3]="PG_13",t[t.R=4]="R",t[t.NC_17=5]="NC_17",t[t.X=6]="X",t[t.NOT_RATED=7]="NOT_RATED"}(Mtt||(Mtt={})),function(t){t[t.NOT_AVAILABLE=-1]="NOT_AVAILABLE",t[t.NOT_APPLICABLE=0]="NOT_APPLICABLE",t[t.TV_Y=1]="TV_Y",t[t.TV_Y7=2]="TV_Y7",t[t.TV_G=3]="TV_G",t[t.TV_PG=4]="TV_PG",t[t.TV_14=5]="TV_14",t[t.TV_MA=6]="TV_MA",t[t.NOT_RATED=7]="NOT_RATED"}(Ttt||(Ttt={})),function(t){t[t.ADULT_LANGUAGE=1]="ADULT_LANGUAGE",t[t.SEXUAL_SITUATIONS=2]="SEXUAL_SITUATIONS",t[t.VIOLENCE=4]="VIOLENCE",t[t.DRUGS=8]="DRUGS"}(Ntt||(Ntt={}));var xtt=class t{static mmi(i,e,s){const n=new Ue(i.rating_flags);return new t(e,s,i.duration,Boolean(i.audio_only),i.boundary_details,Boolean(i.error),i.tv_rating,i.max_slice,i.thumb_prefix,i.slice_dur,i.movie_rating,i.owner,i.meta,i.rates,i.thumbs,i.poster_url,i.default_poster_url,i.desc,n.Cm(1),n.Cm(2),n.Cm(4),n.Cm(8),i.external_id,Boolean(i.is_ad),i.asset)}get va(){return this.Xa||(this.Xa=function(t){return{startTime:t.VT,endTime:t.WT,duration:t.ct,audioOnly:t.pmi,boundaryDetails:t.ymi,error:t.lt,tvRating:t.Mmi,maxSlice:t.Tmi,thumbPrefix:t.Nmi,sliceDuration:t.Dmi,movieRating:t.Smi,ownerId:t.Imi,metadata:t.JD,rates:t.Emi,thumbnailResolutions:t.bmi,posterUrl:t.Lmi,defaultPosterUrl:t.kmi,description:t.iy,hasAdultLanguage:t.xmi,hasSexualSituations:t.Cmi,hasViolence:t.Omi,hasDrugSituations:t.jmi,externalId:t.Pmi,isAd:t.zmi,assetId:t.Bmi}}(this)),this.Xa}constructor(t,i,e,s,n,r,h,o,a,u,c,l,d,f,_,g,w,v,A,m,p,y,M,T,N){this.VT=t,this.WT=i,this.ct=e,this.pmi=s,this.ymi=n,this.lt=r,this.Mmi=h,this.Tmi=o,this.Nmi=a,this.Dmi=u,this.Smi=c,this.Imi=l,this.JD=d,this.Emi=f,this.bmi=_,this.Lmi=g,this.kmi=w,this.iy=v,this.xmi=A,this.Cmi=m,this.Omi=p,this.jmi=y,this.Pmi=M,this.zmi=T,this.Bmi=N}};var Ctt=ro({duration:sh,offset:sh}),Ott=ro({c3:Ctt}),jtt=ro({c7:Ctt}),Ptt=ro({halftime:Ctt}),ztt=vt(UT(Ttt)),Btt=vt(UT(Mtt)),Rtt=ro({width:Ae(ta,sh),prefix:Ps,bw:sh,bh:sh,height:Ae(ta,sh)}),Utt=ro({audio_only:sh,boundary_details:Ae(ta,Zr(Ae(Ott,jtt,Ptt))),error:sh,tv_rating:ztt,max_slice:sh,thumb_prefix:Ps,slice_dur:sh,movie_rating:Btt,owner:Ps,meta:zh,rates:Zr(sh),thumbs:Zr(Rtt),poster_url:Ps,duration:sh,default_poster_url:Ps,desc:Ps,rating_flags:sh,external_id:Ps,is_ad:sh,asset:Ps}),Qtt=class{async Wyt(t,i,e,s){const n=function(t,i,e){if(x7.Oj(i))return[Ftt(t,i,e)];if(Zr(x7).Oj(i))return i.map((i=>Ftt(t,i,e)));if(C7.Oj(i)){return(fh(i.externalId)?i.externalId:[i.externalId]).map((s=>Ftt(t,"ext/"+i.userId+"/"+s,e)))}throw new b("Invalid asset id")}(t,i,s),r=n.map((t=>qc((()=>this.EAi(t)),e)));return(await Promise.all(r)).filter(Po)}async EAi(t){const i=this.EI.LS({gI:yt.GET,zu:t,wI:oe.HS}),e=await i,s=await e.zm();return Utt.Oj(s)||Utt.Pj(s,"AssetInfoResponse"),s}constructor(t){this.EI=t}};function Ftt(t,i,e){return e?t+"/player/assetinfo/"+i+".json?pbs="+e:t+"/player/assetinfo/"+i+".json"}var ee,Ytt=class extends hl{fa(){return new Gtt(this.sd.va)}constructor(t){super("Rmi"),this.sd=t}},Gtt=class extends wn{constructor(t){super("removeasset"),this.asset=t}},Vtt=class extends hl{fa(){return new Wtt(this.sd.va)}constructor(t){super("Umi"),this.sd=t}},Wtt=class extends wn{constructor(t){super("addasset"),this.asset=t}},Htt=class extends V4{lAi(t,i){let e,s=0;for(const n of t){e=s+n.duration;for(const t of i)s<=t.VT&&t.VT<e&&(e+=t.ct||0);this.ET(xtt.mmi(n,s,e)),s=e}}c7t(t){this.Co(new Vtt(t))}_7t(t){this.Co(new Ytt(t))}constructor(){super()}},qtt=class extends hl{fa(){return new Xtt(this.xS)}constructor(t){super("Qmi"),this.xS=t}},Xtt=class extends wn{constructor(t){super("preplayresponse"),this.response=t}},Ztt=class extends hl{fa(){return new Ktt(this.xS)}constructor(t){super("Fmi"),this.xS=t}},Ktt=class extends wn{constructor(t){super("assetinforesponse"),this.response=t}},Jtt=class extends dt{SAi(t){t&&this.Co(new qtt(Ms(t)))}cAi(t){t.forEach((t=>this.Co(new Ztt(t))))}get va(){return this.Xa||(this.Xa=this.fa()),this.Xa}fa(){let t;const i=this,e={get ads(){return i.Hvi.va},get assets(){return i.qvi.va},addEventListener(i,e){t.yn(i,e)},removeEventListener(i,e){t.fn(i,e)}};return t=new xa(i,e),e}constructor(t,i,e){super(),this.Hvi=t,this.qvi=i,this.Kvi=e,e.yn("bAi",this.Ds),e.yn("LAi",this.Ds)}},$tt=class{Ymi(t,i){const e=new O7(t.AO),s=new F7(t.AO),n=function(t){if(t.verizonMedia&&Po(t.verizonMedia.defaultSkipOffset)){const i=t.verizonMedia.defaultSkipOffset;return ci(i)?i:-1}return-1}(i),r=function(t){const i=t.verizonMedia?t.verizonMedia.onSeekOverAd:void 0;return function(t){if(!t)return"play-none";switch(t.toLowerCase()){case"play-all":return"play-all";case"play-none":default:return"play-none";case"play-last":return"play-last"}}(i)}(i),h=new H7(s,t),o=new q7(e,i),a=new ktt(t,h,n,r),u=new Qtt(t.AO),c=new Htt,l=new Jtt(a,c,h);return new y7(t,h,o,a,l,u,c)}};Vr((function(t){return class extends t{Zvi(t){super.ga(t)}Jvi(t,i){return super.ytt(t,i)}yAi(t){super.Nf(t)}Ef(){var t;return null!=(t=this.Gmi.lt)?t:super.Ef()}Lf(){var t;return null!=(t=this.Gmi.bf)?t:super.Lf()}Nf(t,i){this.Gmi.Nf(t)}ga(t){this.Gmi.ga(t)}ytt(t,i){return this.Gmi.ytt(t,i)}fa(){const t=this.Gmi.va;return lt(super.fa(),{get verizonMedia(){return t}})}gn(){this.Gmi.gn(),super.gn()}constructor(t,i){super(t,i),this.Gmi=(new $tt).Ymi(this,i)}}}),Zo.x7),function(t){t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error"}(ee||(ee={}));var tit=class extends Ft{fa(){return E1(this)}get bXt(){return Qn.PKt}get VT(){return this.iN}get EWt(){return this.dHt}constructor(t,i,e,s){super(t,i),this.dHt=s,this.iN=e}},iit=class extends S1{get xjt(){return this.Vmi}get bXt(){return Qn.PKt}constructor(t,i,e){if(super(i),this.G0t=t,this.V0t=t,e){const t=new Date(e);vT(t)&&(this.Vmi=t)}}},eit=class{vg(){this.Qo.yn(Zt.Rw,this.fv),this.Qo.yn(Co.Sh,this.jxt),this.Qo.yn(Co.jh,this.EGt),this.Qo.yn(Co.yw,this.We),this.Qo.yn(Co.Jg,this.Mh),this.Qo.yn(Co.Iw,this.od),this.Qo.yn(Co.Ew,this.I$t),this.Qo.yn("presentationmodechange",this.Wmi)}gg(){this.Qo.fn(Zt.Rw,this.fv),this.Qo.fn(Co.Sh,this.jxt),this.Qo.fn(Co.jh,this.EGt),this.Qo.fn(Co.yw,this.We),this.Qo.fn(Co.Jg,this.Mh),this.Qo.fn(Co.Iw,this.od),this.Qo.fn(Co.Ew,this.I$t),this.Qo.fn("presentationmodechange",this.Wmi)}get Hmi(){return this.qmi}get F7(){const t=this.Hmi;if(!t)return[];const i=[],e=this.Xmi();for(const s of t.Oc)e>=s.VT&&this.Bwi<=s.VT+s.ct&&i.push(s);return i}Xmi(){return this.Qo.Tf()-this.Zmi}Kmi(){if(this.Jmi)return;if(this.Qo.Td()!==1/0)return void(0===this.$mi.length&&(this.Jmi=this.tpi()));const t=()=>{var t;null==(t=this.ipi)||t.Ud(),this.ipi=void 0,this.Jmi=void 0};this.ipi=new Wr,this.Jmi=this.epi(this.ipi.Wd).catch(this.j4).then(t,t)}async spi(){const t=_.min(1e3*2**this.npi,3e4);try{var i;await N(t,null==(i=this.ipi)?void 0:i.Wd),this.npi++}catch(t){if(ut(t))return void(this.npi=0)}this.Kmi()}async epi(t){for(;fo(t),!this.Qo.Ff;){const e=i.Kd()-this.rpi;if(e>1e4)await this.tpi(t),this.rpi=i.Kd(),this.npi=0;else{const i=1e4-e;await N(i,t)}}}hpi(t){const i=t.xjt;if(i&&this.Qo.Af&&0===this.Zmi&&!this.opi&&0!==_.floor(this.Qo.i_().start(0))){const e=(this.Qo.Af.getTime()-i.getTime())/1e3,s=this.Qo.Tf()-t.Tjt;this.Zmi=s-e}}async tpi(t){try{const i=await this.Qo.AO.LS({zu:this.upi}),e=await i.ZO(t);if(0===e.avails.length)return void(0!==this.$mi.length&&(this.$mi=[]));if(e.avails.length===this.$mi.length&&e.avails[0].startTimeInSeconds===this.$mi[0].Tjt)return void this.hpi(this.$mi[0]);const s=[];for(const t of e.avails){const i=new iit(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const e of t.ads){const t=new tit(i,lo.Gqt,e.startTimeInSeconds,e.trackingEvents);t.i1t(e.adId,e.width,e.height,e.durationInSeconds,[],e.skipoffset),i.X0t(t)}s.push(i),this.hpi(i)}this.$mi=Ot(s,((t,i)=>t.Tjt-i.Tjt))}catch(t){throw yo(t),new g("Failed to poll MediaTailor tracking events")}}cpi(){var t;null==(t=this.ipi)||t.qd(),this.ipi=void 0,this.Jmi=void 0,this.rpi=-1/0}lpi(){if(0===this.$mi.length)return;const t=this.$mi[this.$mi.length-1],i=this.Xmi();if(t.Tjt+t.lKt<this.Bwi){var e;this.qmi&&(null==(e=this.Qo.Oc)||e.Co(new Ji(this.qmi)),this.qmi=void 0)}else{for(const t of this.$mi){const e=t.Tjt;if(!(e+t.lKt<this.Bwi)&&(e<=i&&e+t.lKt>this.Bwi)){var s;if(this.Hmi===t)return;return this.qmi=t,void(null==(s=this.Qo.Oc)||s.Co(new ea(this.qmi)))}}var n;if(this.qmi)null==(n=this.Qo.Oc)||n.Co(new Ji(this.qmi)),this.qmi=void 0}}fpi(){const t=this.F7;if(0===t.length)return;let i=[];for(const e of t){const t=e.EWt.filter((t=>qo(this._pi,t.eventType)));i=i.concat(t)}for(const t of i)this.gpi(t.startTimeInSeconds)&&(t.eventType===ee.COMPLETE&&this.wpi(ee.ENGAGED_VIEW),this.vpi(t))}Api(t,i){return i.EWt.filter((i=>yn(i.eventType,t)))[0]}wpi(t){const i=this.F7;if(0===i.length)return;const e=this.Api(t,i[0]);e&&this.vpi(e)}vpi(t){this.Cfi(t.eventType);for(const i of t.beaconUrls){const t={gI:yt.GET,zu:i,fI:"",wI:oe.HS};0,ha(this.mpi(t))}}Cfi(t){let i;const e=this.F7;switch(t){case ee.START:i=new js(e[e.length-1],this.Qo.Tf());break;case ee.COMPLETE:i=new Jh(e[0],this.Qo.Tf());break;case ee.FIRST_QUARTILE:i=new Ze(e[0],this.Qo.Tf());break;case ee.MID_POINT:i=new R1(e[0],this.Qo.Tf());break;case ee.THIRD_QUARTILE:i=new Q1(e[0],this.Qo.Tf())}var s;void 0!==i&&(null==(s=this.Qo.Oc)||s.Co(i))}async mpi(t){const i=await this.Qo.AO.LS(t);i.OS}gpi(t){const i=this.Xmi();return t>=this.Bwi&&t<i}gn(){this.gg(),this.cpi(),this.Bwi=-1}constructor(t,i,e){this.rpi=-1/0,this.qmi=void 0,this.Zmi=0,this.$mi=[],this.Mwi=!1,this.oR=!1,this.Bwi=-1,this.ipi=void 0,this.Jmi=void 0,this.npi=0,this.fv=()=>{this.Kmi()},this.EGt=()=>{this.wpi(ee.RESUME)},this.jxt=()=>{this.cpi(),this.wpi(ee.PAUSE)},this.We=()=>{this.cpi(),this.Bwi=-1},this.Mh=()=>{this.cpi()},this.od=()=>{-1===this.Bwi&&(this.Bwi=this.Xmi()),this.lpi(),this.fpi(),this.Bwi=this.Xmi()},this.I$t=()=>{if(this.Mwi!==this.Qo.zf){this.Mwi=this.Qo.zf;const t=this.Mwi?ee.MUTE:ee.UNMUTE;this.wpi(t)}},this.Wmi=()=>{if(this.oR!==this.Qo.cs()){this.oR=this.Qo.cs();const t=this.oR?ee.FULL_SCREEN:ee.EXIT_FULL_SCREEN;this.wpi(t)}},this.j4=t=>{ut(t)||(this.wpi(ee.ERROR),ha(this.spi()))},this._pi=[ee.START,ee.FIRST_QUARTILE,ee.MID_POINT,ee.THIRD_QUARTILE,ee.COMPLETE,ee.IMPRESSION,ee.CREATIVE_VIEW],this.Qo=t,this.upi=i,this.opi=e,this.vg()}};Vr((function(t){return class extends t{ga(t){return this.ppi&&(this.ppi.gn(),this.ppi=void 0,this.LNt()),super.ga(t)}async ytt(t,i){if(!t||!function(t){return t.sources.some((t=>t.integration===Ci.MEDIATAILOR))}(t))return super.ytt(t,i);try{const e=await this.ypi(t,i);await super.ytt(e,i)}catch(t){this.bz(new Rs(Ui.MANIFEST_LOAD_ERROR,t.message,t))}}Nf(t,i){var e;(null==(e=this.ppi)?void 0:e.Hmi)||super.Nf(t,i)}Ef(){var t;return null!=(t=this.BP)?t:super.Ef()}Lf(){var t;return null!=(t=this.RP)?t:super.Lf()}bz(t){this.BP=tn(t),this.RP=t,this.Co(new Eo(t))}LNt(){this.BP=void 0,this.RP=void 0}async ypi(t,i){let e=[];for(const s of t.sources){if(!ww(s)){e.push(s);continue}const t=s;if(!t.src){e.push(s);continue}const n=await this.Mpi(t,i);fo(i);const r=Yt({},t,{integration:void 0,src:n});e.push(r)}const s=Ms(t);return s.sources=e,s}async Mpi(t,i){const e=t.src||"",s=e.match(/.+?(?=\/v1\/)/);if(!s)throw new g("Could not find MediaTailor session initialization url");const n=s[0],r=Xi(e,"?ads."),h=r?{zu:e,wI:oe.HS}:{zu:e,gI:yt.POST,fI:JSON.stringify({adParams:t.adParams}),wI:oe.HS},o=await qc((()=>this.Tpi(h,i)),i);let a;try{if(a=n+o.manifestUrl,!r){const t=n+o.trackingUrl,i=aw(a);this.ppi=new eit(this,t,i)}}catch(t){throw new g("Something went wrong parsing the MediaTailor session initialization response")}return a}async Tpi(t,i){try{const e=await this.AO.LS(t);return await e.ZO(i)}catch(t){throw yo(t),new g("Failed to initialize MediaTailor session manifest")}}gn(){this.ppi&&(this.ppi.gn(),this.ppi=void 0),this.LNt(),super.gn()}constructor(t,i){super(t,i),this.ppi=void 0,this.BP=void 0,this.RP=void 0}}}),Zo.j7);export{i as a,f as b,Po as c,fh as d,Ut as e,Qs as f,ze as g,os as h,YB as i,zu as j,vM as k,pM as l,Pi as m,yM as n,MM as o,gn as p,IM as q,EM as r,qB as s,XB as t,Yt as u,Xi as v,Cf as w,Ot as x,Ri as y,rr as z,Vt as A,Qr as B,qo as C,No as D,Bo as E,wn as F,Ui as G,Rh as H,Co as I,Kd as J,lt as K,Dc as L,Jd as M,we as N,pc as O,zw as P,si as Q,Jt as R,Or as S,Mi as T,PA as U,BA as V,Mw as W,Fr as X,Zo as Y,Vr as Z,fP as _,Da as $,ko as aa,kw as ba,Ai as ca,ge as da,ZN as ea,$N as fa,JN as ga,tD as ha,eD as ia,nc as ja,ID as ka,le as la,ii as ma,OS as na,US as oa,GS as pa,uh as qa,VS as ra,HS as sa,sk as ta,pO as ua,EO as va,bO as wa,kO as xa,xO as ya,CO as za,sj as Aa,nj as Ba,rj as Ca,hj as Da,fs as Ea,nP as Fa,rP as Ga,wP as Ha,QP as Ia,FP as Ja,YP as Ka,GP as La,WR as Ma,HR as Na,qR as Oa,XR as Pa,oF as Qa,aF as Ra,Qn as Sa,Z0 as Ta,h1 as Ua,p1 as Va,St as Wa,i8 as Xa,G8 as Ya,X8 as Za,Z7 as _a};