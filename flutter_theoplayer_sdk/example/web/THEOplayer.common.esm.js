/*!
 THEOplayer

 Usage of this software is limited by the THEOplayer License.

 It is prohibited to reverse engineer, decompile, translate,
 disassemble, decipher, decrypt, or otherwise attempt to
 discover the source code of this software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 OTHER DEALINGS IN THE SOFTWARE.

 For more information, visit https://www.theoplayer.com or contact
 contact @ theoplayer . com

 This product makes use of Open Source Software: video.js
 (Apache 2.0 - Copyright Brightcove, Inc.), long.js (Apache 2.0),
 nodejs-langs (MIT - Copyright Andrew Lawson), promise-polyfill
 (MIT - Copyright (c) 2014 Taylor Hakes & Forbes Lindesay),
 shaka-player (Apache 2.0 - Copyright 2016 Google LLC)
 The code of these projects has been heavily modified during
 integration.
 More information on the licenses can be found here: Apache 2.0
 (http://www.apache.org/licenses/LICENSE-2.0), MIT
 (https://opensource.org/licenses/MIT)


 THEOplayer is based on patented technology developed by
 THEO Technologies (https://www.theoplayer.com).

 Version: 6.10.1
 Created: 2024-02-20T14:30:43.308Z
 */
var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:void 0!==a?a:"undefined"!=typeof global?global:this,a=s.window,h=s.document,el=s.location,il=s.navigator,u=s.setTimeout,c=s.clearTimeout,sl=s.setInterval,nl=s.clearInterval,v=s.Error,p=s.TypeError,g=(s.SyntaxError,s.Object),w=s.Math,k=s.parseInt,_=s.parseFloat,j=s.isNaN,x=s.Uint8Array,rl=s.Worker,hl=(s.WorkerGlobalScope,s.XMLHttpRequest),lh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(t){return"Symbol("+t+")"};function ol(){}var al=Number.isNaN||function(t){return t!=t},ul=ol;function cl(t){return"object"==typeof t&&null!==t||"function"==typeof t}function ll(t){return t.slice()}function dl(t,e,i,s,n){new x(t).set(new x(i,s,n),e)}function fl(t){return!1!==function(t){if("number"!=typeof t)return!1;if(al(t))return!1;if(t<0)return!1;return!0}(t)&&t!==1/0}function _l(t,e,i){if("function"!=typeof t)throw new p("Argument is not a function");return Function.prototype.apply.call(t,e,i)}function Rn(t,e,i,s){var n=t[e];if(void 0!==n){if("function"!=typeof n)throw new p(n+" is not a method");switch(i){case 0:return function(){return vl(n,t,s)};case 1:return function(e){var i=[e].concat(s);return vl(n,t,i)}}}return function(){return Le(void 0)}}function gl(t,e,i){var s=t[e];if(void 0!==s)return _l(s,t,i)}function vl(t,e,i){try{return Le(_l(t,e,i))}catch(t){return Ec(t)}}function tr(t){if(t=Number(t),al(t)||t<0)throw new RangeError("highWaterMark property of a queuing strategy must be non-negative and non-NaN");return t}function wl(t){if(void 0===t)return function(){return 1};if("function"!=typeof t)throw new p("size property of a queuing strategy must be a function");return function(e){return t(e)}}var ml=Promise,pl=Promise.prototype.then,yl=Promise.resolve.bind(ml),Al=Promise.reject.bind(ml);function no(t){return new ml(t)}function Le(t){return yl(t)}function Ec(t){return Al(t)}function bl(t,e,i){return pl.call(t,e,i)}function Mi(t,e,i){bl(bl(t,e,i),void 0,ul)}function Tl(t,e){Mi(t,e)}function Sl(t,e){Mi(t,void 0,e)}function kl(t,e,i){return bl(t,e,i)}function sr(t){bl(t,void 0,ul)}var Ii=function(){function t(){this.ul=0,this.hd=0,this.ud={ld:[],dd:void 0},this.fd=this.ud,this.ul=0,this.hd=0}return g.defineProperty(t.prototype,"length",{get:function(){return this.hd},enumerable:!0,configurable:!0}),t.prototype.push=function(t){var e=this.fd,i=e;16383===e.ld.length&&(i={ld:[],dd:void 0}),e.ld.push(t),i!==e&&(this.fd=i,e.dd=i),++this.hd},t.prototype.shift=function(){var t=this.ud,e=t,i=this.ul,s=i+1,n=t.ld,r=n[i];return 16384===s&&(e=t.dd,s=0),--this.hd,this.ul=s,t!==e&&(this.ud=e),n[i]=void 0,r},t.prototype.forEach=function(t){for(var e=this.ul,i=this.ud,s=i.ld;!(e===s.length&&void 0===i.dd||e===s.length&&(e=0,0===(s=(i=i.dd).ld).length));)t(s[e]),++e},t.prototype.peek=function(){var t=this.ud,e=this.ul;return t.ld[e]},t}();function ti(t,e,i){var s=null;!0===i&&(s=g.prototype);var n=g.create(s);return n.value=t,n.done=e,n}function El(t,e){t._d=!0,t.vd=e,e.wd=t,"readable"===e.Pa?Cl(t):"closed"===e.Pa?function(t){Cl(t),Nl(t)}(t):xl(t,e.md)}function Il(t,e){return If(t.vd,e)}function Pl(t){"readable"===t.vd.Pa?Dl(t,new p("Reader was released and can no longer be used to monitor the stream's closedness")):function(t,e){xl(t,e)}(t,new p("Reader was released and can no longer be used to monitor the stream's closedness")),t.vd.wd=void 0,t.vd=void 0}function Rl(t){return new p("Cannot "+t+" a stream using a released reader")}function Cl(t){t.pd=no((function(e,i){t.yd=e,t.bd=i}))}function xl(t,e){Cl(t),Dl(t,e)}function Dl(t,e){sr(t.pd),t.bd(e),t.yd=void 0,t.bd=void 0}function Nl(t){t.yd(void 0),t.yd=void 0,t.bd=void 0}var Bl=lh("[[CancelSteps]]"),Ll=lh("[[PullSteps]]");function Ol(t,e){void 0===e&&(e=!1);var i=new ql(t);return i._d=e,i}function Ml(t){return no((function(e,i){var s={Td:e,Sd:i};t.wd.kd.push(s)}))}function Fl(t,e,i){var s=t.wd;s.kd.shift().Td(ti(e,i,s._d))}function Ul(t){return t.wd.kd.length}function Hl(t){var e=t.wd;return void 0!==e&&!!zl(e)}var Vl,Wl,ql=function(){function t(t){if(!1===bi(t))throw new p("ReadableStreamDefaultReader can only be constructed with a ReadableStream instance");if(!0===Tn(t))throw new p("This stream has already been locked for exclusive reading by another reader");El(this,t),this.kd=new Ii}return g.defineProperty(t.prototype,"closed",{get:function(){return zl(this)?this.pd:Ec(Gl("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return zl(this)?void 0===this.vd?Ec(Rl("cancel")):Il(this,t):Ec(Gl("cancel"))},t.prototype.read=function(){return zl(this)?void 0===this.vd?Ec(Rl("read from")):Xl(this):Ec(Gl("read"))},t.prototype.releaseLock=function(){if(!zl(this))throw Gl("releaseLock");if(void 0!==this.vd){if(this.kd.length>0)throw new p("Tried to release a reader lock when that reader has pending read() calls un-settled");Pl(this)}},t}();function zl(t){return!!cl(t)&&!!g.prototype.hasOwnProperty.call(t,"kd")}function Xl(t){var e=t.vd;return e.Ed=!0,"closed"===e.Pa?Le(ti(void 0,!0,t._d)):"errored"===e.Pa?Ec(e.md):e.Id[Ll]()}function Gl(t){return new p("ReadableStreamDefaultReader.prototype."+t+" can only be used on a ReadableStreamDefaultReader")}"symbol"==typeof lh.asyncIterator&&((Vl={})[lh.asyncIterator]=function(){return this},Wl=Vl,g.defineProperty(Wl,lh.asyncIterator,{enumerable:!1}));var Ql={next:function(){if(!1===Kl(this))return Ec(jl("next"));var t=this.Pd;return void 0===t.vd?Ec(Rl("iterate")):kl(Xl(t),(function(e){var i=e.done;return i&&Pl(t),ti(e.value,i,!0)}))},return:function(t){if(!1===Kl(this))return Ec(jl("next"));var e=this.Pd;if(void 0===e.vd)return Ec(Rl("finish iterating"));if(e.kd.length>0)return Ec(new p("Tried to release a reader lock when that reader has pending read() calls un-settled"));if(!1===this.Rd){var i=Il(e,t);return Pl(e),kl(i,(function(){return ti(t,!0,!0)}))}return Pl(e),Le(ti(t,!0,!0))}};function Kl(t){return!!cl(t)&&!!g.prototype.hasOwnProperty.call(t,"Pd")}function jl(t){return new p("ReadableStreamAsyncIterator."+t+" can only be used on a ReadableSteamAsyncIterator")}function Yl(t){var e=t.Cd.shift();return t.xd-=e.size,t.xd<0&&(t.xd=0),e.value}function Zl(t,e,i){if(!fl(i=Number(i)))throw new RangeError("Size must be a finite, non-NaN, non-negative number.");t.Cd.push({value:e,size:i}),t.xd+=i}function Be(t){t.Cd=new Ii,t.xd=0}void 0!==Wl&&g.setPrototypeOf(Ql,Wl),g.defineProperty(Ql,"next",{enumerable:!1}),g.defineProperty(Ql,"return",{enumerable:!1});var Jl=lh("[[AbortSteps]]"),$l=lh("[[ErrorSteps]]"),td=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),id(this);var i=e.size,s=e.highWaterMark;if(void 0!==t.type)throw new RangeError("Invalid type is specified");var n=wl(i);void 0===s&&(s=1),function(t,e,i,s){var n=g.create(vd.prototype);function r(){return gl(e,"start",[n])}var h=Rn(e,"write",1,[n]),o=Rn(e,"close",0,[]),a=Rn(e,"abort",1,[]);wd(t,n,r,h,o,a,i,s)}(this,t,s=tr(s),n)}return g.defineProperty(t.prototype,"locked",{get:function(){if(!1===Bu(this))throw Sd("locked");return Kn(this)},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Bu(this)?Ec(Sd("abort")):!0===Kn(this)?Ec(new p("Cannot abort a stream that already has a writer")):sd(this,t)},t.prototype.close=function(){return!1===Bu(this)?Ec(Sd("close")):!0===Kn(this)?Ec(new p("Cannot close a stream that already has a writer")):!0===Ni(this)?Ec(new p("Cannot close an already-closing stream")):nd(this)},t.prototype.getWriter=function(){if(!1===Bu(this))throw Sd("getWriter");return ed(this)},t}();function ed(t){return new cd(t)}function id(t){t.Pa="writable",t.md=void 0,t.Dd=void 0,t.Nd=void 0,t.Bd=new Ii,t.Ld=void 0,t.Od=void 0,t.Md=void 0,t.Fd=void 0,t.Ud=!1}function Bu(t){return!!cl(t)&&!!g.prototype.hasOwnProperty.call(t,"Nd")}function Kn(t){return void 0!==t.Dd}function sd(t,e){var i=t.Pa;if("closed"===i||"errored"===i)return Le(void 0);if(void 0!==t.Fd)return t.Fd.Hd;var s=!1;"erroring"===i&&(s=!0,e=void 0);var n=no((function(i,n){t.Fd={Hd:void 0,Td:i,Sd:n,Vd:e,Wd:s}}));return t.Fd.Hd=n,!1===s&&hd(t,e),n}function nd(t){var e=t.Pa;if("closed"===e||"errored"===e)return Ec(new p("The stream (in "+e+" state) is not in the writable state and cannot be closed"));var i=no((function(e,i){var s={Td:e,Sd:i};t.Od=s})),s=t.Dd;return void 0!==s&&!0===t.Ud&&"writable"===e&&Bd(s),function(t){Zl(t,"close",0),yd(t)}(t.Nd),i}function rd(t,e){"writable"!==t.Pa?od(t):hd(t,e)}function hd(t,e){var i=t.Nd;t.Pa="erroring",t.md=e;var s=t.Dd;void 0!==s&&fd(s,e),!1===function(t){if(void 0===t.Ld&&void 0===t.Md)return!1;return!0}(t)&&!0===i.qd&&od(t)}function od(t){t.Pa="errored",t.Nd[$l]();var e=t.md;if(t.Bd.forEach((function(t){t.Sd(e)})),t.Bd=new Ii,void 0!==t.Fd){var i=t.Fd;if(t.Fd=void 0,!0===i.Wd)return i.Sd(e),void ad(t);Mi(t.Nd[Jl](i.Vd),(function(){i.Td(),ad(t)}),(function(e){i.Sd(e),ad(t)}))}else ad(t)}function Ni(t){return void 0!==t.Od||void 0!==t.Md}function ad(t){void 0!==t.Od&&(t.Od.Sd(t.md),t.Od=void 0);var e=t.Dd;void 0!==e&&Pd(e,t.md)}function ud(t,e){var i=t.Dd;void 0!==i&&e!==t.Ud&&(!0===e?function(t){Cd(t)}(i):Bd(i)),t.Ud=e}var cd=function(){function t(t){if(!1===Bu(t))throw new p("WritableStreamDefaultWriter can only be constructed with a WritableStream instance");if(!0===Kn(t))throw new p("This stream has already been locked for exclusive writing by another writer");this.zd=t,t.Dd=this;var e=t.Pa;if("writable"===e)!1===Ni(t)&&!0===t.Ud?Cd(this):Dd(this),Ed(this);else if("erroring"===e)xd(this,t.md),Ed(this);else if("closed"===e)Dd(this),function(t){Ed(t),Rd(t)}(this);else{var i=t.md;xd(this,i),Id(this,i)}}return g.defineProperty(t.prototype,"closed",{get:function(){return!1===Nu(this)?Ec(Tu("closed")):this.pd},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Nu(this))throw Tu("desiredSize");if(void 0===this.zd)throw kd("desiredSize");return function(t){var e=t.zd,i=e.Pa;if("errored"===i||"erroring"===i)return null;if("closed"===i)return 0;return pd(e.Nd)}(this)},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"ready",{get:function(){return!1===Nu(this)?Ec(Tu("ready")):this.Xd},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){return!1===Nu(this)?Ec(Tu("abort")):void 0===this.zd?Ec(kd("abort")):function(t,e){var i=t.zd;return sd(i,e)}(this,t)},t.prototype.close=function(){if(!1===Nu(this))return Ec(Tu("close"));var t=this.zd;return void 0===t?Ec(kd("close")):!0===Ni(t)?Ec(new p("Cannot close an already-closing stream")):ld(this)},t.prototype.releaseLock=function(){if(!1===Nu(this))throw Tu("releaseLock");void 0!==this.zd&&_d(this)},t.prototype.write=function(t){return!1===Nu(this)?Ec(Tu("write")):void 0===this.zd?Ec(kd("write to")):gd(this,t)},t}();function Nu(t){return!!cl(t)&&!!g.prototype.hasOwnProperty.call(t,"zd")}function ld(t){return nd(t.zd)}function dd(t,e){"pending"===t.Gd?Pd(t,e):function(t,e){Id(t,e)}(t,e)}function fd(t,e){"pending"===t.Qd?Nd(t,e):function(t,e){xd(t,e)}(t,e)}function _d(t){var e=t.zd,i=new p("Writer was released and can no longer be used to monitor the stream's closedness");fd(t,i),dd(t,i),e.Dd=void 0,t.zd=void 0}function gd(t,e){var i=t.zd,s=i.Nd,n=function(t,e){try{return t.Kd(e)}catch(e){return Ad(t,e),1}}(s,e);if(i!==t.zd)return Ec(kd("write to"));var r=i.Pa;if("errored"===r)return Ec(i.md);if(!0===Ni(i)||"closed"===r)return Ec(new p("The stream is closing or closed and cannot be written to"));if("erroring"===r)return Ec(i.md);var h=function(t){return no((function(e,i){var s={Td:e,Sd:i};t.Bd.push(s)}))}(i);return function(t,e,i){var s={chunk:e};try{Zl(t,s,i)}catch(e){return void Ad(t,e)}var n=t.jd;if(!1===Ni(n)&&"writable"===n.Pa){ud(n,bd(t))}yd(t)}(s,e,n),h}var vd=function(){function t(){throw new p("WritableStreamDefaultController cannot be constructed explicitly")}return t.prototype.error=function(t){if(!1===function(t){if(!cl(t))return!1;if(!g.prototype.hasOwnProperty.call(t,"jd"))return!1;return!0}(this))throw new p("WritableStreamDefaultController.prototype.error can only be used on a WritableStreamDefaultController");"writable"===this.jd.Pa&&Td(this,t)},t.prototype[Jl]=function(t){var e=this.Yd(t);return md(this),e},t.prototype[$l]=function(){Be(this)},t}();function wd(t,e,i,s,n,r,h,o){e.jd=t,t.Nd=e,e.Cd=void 0,e.xd=void 0,Be(e),e.qd=!1,e.Kd=o,e.Zd=h,e.Jd=s,e.$d=n,e.Yd=r;var a=bd(e);ud(t,a),Mi(Le(i()),(function(){e.qd=!0,yd(e)}),(function(i){e.qd=!0,rd(t,i)}))}function md(t){t.Jd=void 0,t.$d=void 0,t.Yd=void 0,t.Kd=void 0}function pd(t){return t.Zd-t.xd}function yd(t){var e=t.jd;if(!1!==t.qd&&void 0===e.Ld)if("erroring"!==e.Pa){if(0!==t.Cd.length){var i=function(t){return t.Cd.peek().value}(t);"close"===i?function(t){var e=t.jd;(function(t){t.Md=t.Od,t.Od=void 0})(e),Yl(t);var i=t.$d();md(t),Mi(i,(function(){!function(t){t.Md.Td(void 0),t.Md=void 0,"erroring"===t.Pa&&(t.md=void 0,void 0!==t.Fd&&(t.Fd.Td(),t.Fd=void 0)),t.Pa="closed";var e=t.Dd;void 0!==e&&Rd(e)}(e)}),(function(t){!function(t,e){t.Md.Sd(e),t.Md=void 0,void 0!==t.Fd&&(t.Fd.Sd(e),t.Fd=void 0),rd(t,e)}(e,t)}))}(t):function(t,e){var i=t.jd;!function(t){t.Ld=t.Bd.shift()}(i);var s=t.Jd(e);Mi(s,(function(){!function(t){t.Ld.Td(void 0),t.Ld=void 0}(i);var e=i.Pa;if(Yl(t),!1===Ni(i)&&"writable"===e){var s=bd(t);ud(i,s)}yd(t)}),(function(e){"writable"===i.Pa&&md(t),function(t,e){t.Ld.Sd(e),t.Ld=void 0,rd(t,e)}(i,e)}))}(t,i.chunk)}}else od(e)}function Ad(t,e){"writable"===t.jd.Pa&&Td(t,e)}function bd(t){return pd(t)<=0}function Td(t,e){var i=t.jd;md(t),hd(i,e)}function Sd(t){return new p("WritableStream.prototype."+t+" can only be used on a WritableStream")}function Tu(t){return new p("WritableStreamDefaultWriter.prototype."+t+" can only be used on a WritableStreamDefaultWriter")}function kd(t){return new p("Cannot "+t+" a stream using a released writer")}function Ed(t){t.pd=no((function(e,i){t.yd=e,t.bd=i,t.Gd="pending"}))}function Id(t,e){Ed(t),Pd(t,e)}function Pd(t,e){sr(t.pd),t.bd(e),t.yd=void 0,t.bd=void 0,t.Gd="rejected"}function Rd(t){t.yd(void 0),t.yd=void 0,t.bd=void 0,t.Gd="resolved"}function Cd(t){t.Xd=no((function(e,i){t.t_=e,t.e_=i})),t.Qd="pending"}function xd(t,e){Cd(t),Nd(t,e)}function Dd(t){Cd(t),Bd(t)}function Nd(t,e){sr(t.Xd),t.e_(e),t.t_=void 0,t.e_=void 0,t.Qd="rejected"}function Bd(t){t.t_(void 0),t.t_=void 0,t.e_=void 0,t.Qd="fulfilled"}function Ld(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}var Od="undefined"!=typeof DOMException?DOMException:void 0;var r,Md=function(t){if("function"!=typeof t&&"object"!=typeof t)return!1;try{return new t,!0}catch(t){return!1}}(Od)?Od:((r=function(t,e){this.message=t||"",this.name=e||"Error",v.captureStackTrace&&v.captureStackTrace(this,this.constructor)}).prototype=g.create(v.prototype),g.defineProperty(r.prototype,"constructor",{value:r,writable:!0,configurable:!0}),r);function Fd(t,e,i,s,n,r){var h=Ol(t),o=ed(e);t.Ed=!0;var a=!1,u=Le(void 0);return no((function(c,l){var d,f,_,g;if(void 0!==r){if(d=function(){var i=new Md("Aborted","AbortError"),r=[];!1===s&&r.push((function(){return"writable"===e.Pa?sd(e,i):Le(void 0)})),!1===n&&r.push((function(){return"readable"===t.Pa?If(t,i):Le(void 0)})),y((function(){return Promise.all(r.map((function(t){return t()})))}),!0,i)},!0===r.aborted)return void d();r.addEventListener("abort",d)}if(m(t,h.pd,(function(t){!1===s?y((function(){return sd(e,t)}),!0,t):A(!0,t)})),m(e,o.pd,(function(e){!1===n?y((function(){return If(t,e)}),!0,e):A(!0,e)})),f=t,_=h.pd,g=function(){!1===i?y((function(){return function(t){var e=t.zd,i=e.Pa;return!0===Ni(e)||"closed"===i?Le(void 0):"errored"===i?Ec(e.md):ld(t)}(o)})):A()},"closed"===f.Pa?g():Tl(_,g),!0===Ni(e)||"closed"===e.Pa){var v=new p("the destination writable stream closed before all data could be piped to it");!1===n?y((function(){return If(t,v)}),!0,v):A(!0,v)}function w(){var t=u;return bl(u,(function(){return t!==u?w():void 0}))}function m(t,e,i){"errored"===t.Pa?i(t.md):Sl(e,i)}function y(t,i,s){function n(){Mi(t(),(function(){return b(i,s)}),(function(t){return b(!0,t)}))}!0!==a&&(a=!0,"writable"===e.Pa&&!1===Ni(e)?Tl(w(),n):n())}function A(t,i){!0!==a&&(a=!0,"writable"===e.Pa&&!1===Ni(e)?Tl(w(),(function(){return b(t,i)})):b(t,i))}function b(t,e){_d(o),Pl(h),void 0!==r&&r.removeEventListener("abort",d),t?l(e):c(void 0)}sr(no((function(t,e){!function i(s){s?t():bl(!0===a?Le(!0):bl(o.Xd,(function(){return bl(Xl(h),(function(t){return!0===t.done||(u=bl(gd(o,t.value),void 0,ol),!1)}))})),i,e)}(!1)})))}))}var Ud=function(){function t(){throw new p}return g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Hd(this))throw Kd("desiredSize");return Gd(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===Hd(this))throw Kd("close");if(!1===ir(this))throw new p("The stream is not in a state that permits close");zd(this)},t.prototype.enqueue=function(t){if(!1===Hd(this))throw Kd("enqueue");if(!1===ir(this))throw new p("The stream is not in a state that permits enqueue");return Xd(this,t)},t.prototype.error=function(t){if(!1===Hd(this))throw Kd("error");xe(this,t)},t.prototype[Bl]=function(t){Be(this);var e=this.i_(t);return qd(this),e},t.prototype[Ll]=function(){var t=this.s_;if(this.Cd.length>0){var e=Yl(this);return!0===this.n_&&0===this.Cd.length?(qd(this),Pf(t)):Vd(this),Le(ti(e,!1,t.wd._d))}var i=Ml(t);return Vd(this),i},t}();function Hd(t){return!!cl(t)&&!!g.prototype.hasOwnProperty.call(t,"s_")}function Vd(t){!1!==Wd(t)&&(!0!==t.r_?(t.r_=!0,Mi(t.h_(),(function(){t.r_=!1,!0===t.o_&&(t.o_=!1,Vd(t))}),(function(e){xe(t,e)}))):t.o_=!0)}function Wd(t){var e=t.s_;return!1!==ir(t)&&(!1!==t.qd&&(!0===Tn(e)&&Ul(e)>0||Gd(t)>0))}function qd(t){t.h_=void 0,t.i_=void 0,t.Kd=void 0}function zd(t){var e=t.s_;t.n_=!0,0===t.Cd.length&&(qd(t),Pf(e))}function Xd(t,e){var i=t.s_;if(!0===Tn(i)&&Ul(i)>0)Fl(i,e,!1);else{var s=void 0;try{s=t.Kd(e)}catch(e){throw xe(t,e),e}try{Zl(t,e,s)}catch(e){throw xe(t,e),e}}Vd(t)}function xe(t,e){var i=t.s_;"readable"===i.Pa&&(Be(t),qd(t),Rf(i,e))}function Gd(t){var e=t.s_.Pa;return"errored"===e?null:"closed"===e?0:t.Zd-t.xd}function ir(t){var e=t.s_.Pa;return!1===t.n_&&"readable"===e}function Qd(t,e,i,s,n,r,h){e.s_=t,e.Cd=void 0,e.xd=void 0,Be(e),e.qd=!1,e.n_=!1,e.o_=!1,e.r_=!1,e.Kd=h,e.Zd=r,e.h_=s,e.i_=n,t.Id=e,Mi(Le(i()),(function(){e.qd=!0,Vd(e)}),(function(t){xe(e,t)}))}function Kd(t){return new p("ReadableStreamDefaultController.prototype."+t+" can only be used on a ReadableStreamDefaultController")}var jd=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&w.floor(t)===t},Yd=function(){function t(){throw new p("ReadableStreamBYOBRequest cannot be used directly")}return g.defineProperty(t.prototype,"view",{get:function(){if(!1===$d(this))throw vf("view");return this.Mu},enumerable:!0,configurable:!0}),t.prototype.respond=function(t){if(!1===$d(this))throw vf("respond");if(void 0===this.a_)throw new p("This BYOB request has been invalidated");this.Mu.buffer,function(t,e){if(e=Number(e),!1===fl(e))throw new RangeError("bytesWritten must be a finite");cf(t,e)}(this.a_,t)},t.prototype.respondWithNewView=function(t){if(!1===$d(this))throw vf("respond");if(void 0===this.a_)throw new p("This BYOB request has been invalidated");if(!ArrayBuffer.isView(t))throw new p("You can only respond with array buffer views");t.buffer,function(t,e){var i=t.u_.peek();if(i.byteOffset+i.bytesFilled!==e.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(i.byteLength!==e.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");i.buffer=e.buffer,cf(t,e.byteLength)}(this.a_,t)},t}(),Zd=function(){function t(){throw new p("ReadableByteStreamController constructor cannot be used directly")}return g.defineProperty(t.prototype,"byobRequest",{get:function(){if(!1===Jd(this))throw wf("byobRequest");if(void 0===this.c_&&this.u_.length>0){var t=this.u_.peek(),e=new x(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),i=g.create(Yd.prototype);!function(t,e,i){t.a_=e,t.Mu=i}(i,this,e),this.c_=i}return this.c_},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Jd(this))throw wf("desiredSize");return _f(this)},enumerable:!0,configurable:!0}),t.prototype.close=function(){if(!1===Jd(this))throw wf("close");if(!0===this.n_)throw new p("The stream has already been closed; do not close it again!");var t=this.l_.Pa;if("readable"!==t)throw new p("The stream (in "+t+" state) is not in the readable state and cannot be closed");!function(t){var e=t.l_;if(t.xd>0)return void(t.n_=!0);if(t.u_.length>0){if(t.u_.peek().bytesFilled>0){var i=new p("Insufficient bytes to fill elements in the given buffer");throw ff(t,i),i}}df(t),Pf(e)}(this)},t.prototype.enqueue=function(t){if(!1===Jd(this))throw wf("enqueue");if(!0===this.n_)throw new p("stream is closed or draining");var e=this.l_.Pa;if("readable"!==e)throw new p("The stream (in "+e+" state) is not in the readable state and cannot be enqueued to");if(!ArrayBuffer.isView(t))throw new p("You can only enqueue array buffer views when using a ReadableByteStreamController");t.buffer,function(t,e){var i=t.l_,s=e.buffer,n=e.byteOffset,r=e.byteLength,h=s;if(!0===Hl(i)){if(0===Ul(i))nf(t,h,n,r);else Fl(i,new x(h,n,r),!1)}else!0===yf(i)?(nf(t,h,n,r),uf(t)):nf(t,h,n,r);tf(t)}(this,t)},t.prototype.error=function(t){if(!1===Jd(this))throw wf("error");ff(this,t)},t.prototype[Bl]=function(t){this.u_.length>0&&(this.u_.peek().bytesFilled=0);Be(this);var e=this.i_(t);return df(this),e},t.prototype[Ll]=function(){var t=this.l_;if(this.xd>0){var e=this.Cd.shift();this.xd-=e.byteLength,of(this);var i=void 0;try{i=new x(e.buffer,e.byteOffset,e.byteLength)}catch(t){return Ec(t)}return Le(ti(i,!1,t.wd._d))}var s=this.d_;if(void 0!==s){var n=void 0;try{n=new ArrayBuffer(s)}catch(t){return Ec(t)}var r={buffer:n,byteOffset:0,byteLength:s,bytesFilled:0,elementSize:1,ctor:x,readerType:"default"};this.u_.push(r)}var h=Ml(t);return tf(this),h},t}();function Jd(t){return!!cl(t)&&!!g.prototype.hasOwnProperty.call(t,"l_")}function $d(t){return!!cl(t)&&!!g.prototype.hasOwnProperty.call(t,"a_")}function tf(t){var e=function(t){var e=t.l_;if("readable"!==e.Pa)return!1;if(!0===t.n_)return!1;if(!1===t.qd)return!1;if(!0===Hl(e)&&Ul(e)>0)return!0;if(!0===yf(e)&&pf(e)>0)return!0;var i=_f(t);if(i>0)return!0;return!1}(t);!1!==e&&(!0!==t.r_?(t.r_=!0,Mi(t.h_(),(function(){t.r_=!1,!0===t.o_&&(t.o_=!1,tf(t))}),(function(e){ff(t,e)}))):t.o_=!0)}function ef(t,e){var i=!1;"closed"===t.Pa&&(i=!0);var s=sf(e);"default"===e.readerType?Fl(t,s,i):function(t,e,i){var s=t.wd,n=s.f_.shift();n.Td(ti(e,i,s._d))}(t,s,i)}function sf(t){var e=t.bytesFilled,i=t.elementSize;return new t.ctor(t.buffer,t.byteOffset,e/i)}function nf(t,e,i,s){t.Cd.push({buffer:e,byteOffset:i,byteLength:s}),t.xd+=s}function rf(t,e){var i=e.elementSize,s=e.bytesFilled-e.bytesFilled%i,n=w.min(t.xd,e.byteLength-e.bytesFilled),r=e.bytesFilled+n,h=r-r%i,o=n,a=!1;h>s&&(o=h-e.bytesFilled,a=!0);for(var u=t.Cd;o>0;){var c=u.peek(),l=w.min(o,c.byteLength),d=e.byteOffset+e.bytesFilled;dl(e.buffer,d,c.buffer,c.byteOffset,l),c.byteLength===l?u.shift():(c.byteOffset+=l,c.byteLength-=l),t.xd-=l,hf(t,l,e),o-=l}return a}function hf(t,e,i){af(t),i.bytesFilled+=e}function of(t){0===t.xd&&!0===t.n_?(df(t),Pf(t.l_)):tf(t)}function af(t){void 0!==t.c_&&(t.c_.a_=void 0,t.c_.Mu=void 0,t.c_=void 0)}function uf(t){for(;t.u_.length>0;){if(0===t.xd)return;var e=t.u_.peek();!0===rf(t,e)&&(lf(t),ef(t.l_,e))}}function cf(t,e){var i=t.u_.peek();if("closed"===t.l_.Pa){if(0!==e)throw new p("bytesWritten must be 0 when calling respond() on a closed stream");!function(t,e){e.buffer=e.buffer;var i=t.l_;if(!0===yf(i))for(;pf(i)>0;)ef(i,lf(t))}(t,i)}else!function(t,e,i){if(i.bytesFilled+e>i.byteLength)throw new RangeError("bytesWritten out of range");if(hf(t,e,i),!(i.bytesFilled<i.elementSize)){lf(t);var s=i.bytesFilled%i.elementSize;if(s>0){var n=i.byteOffset+i.bytesFilled,r=i.buffer.slice(n-s,n);nf(t,r,0,r.byteLength)}i.buffer=i.buffer,i.bytesFilled-=s,ef(t.l_,i),uf(t)}}(t,e,i);tf(t)}function lf(t){var e=t.u_.shift();return af(t),e}function df(t){t.h_=void 0,t.i_=void 0}function ff(t,e){var i=t.l_;"readable"===i.Pa&&(!function(t){af(t),t.u_=new Ii}(t),Be(t),df(t),Rf(i,e))}function _f(t){var e=t.l_.Pa;return"errored"===e?null:"closed"===e?0:t.Zd-t.xd}function gf(t,e,i){var s=g.create(Zd.prototype);var n=Rn(e,"pull",0,[s]),r=Rn(e,"cancel",1,[]),h=e.autoAllocateChunkSize;if(void 0!==h&&(h=Number(h),!1===jd(h)||h<=0))throw new RangeError("autoAllocateChunkSize must be a positive integer");!function(t,e,i,s,n,r,h){e.l_=t,e.o_=!1,e.r_=!1,e.c_=void 0,e.Cd=e.xd=void 0,Be(e),e.n_=!1,e.qd=!1,e.Zd=tr(r),e.h_=s,e.i_=n,e.d_=h,e.u_=new Ii,t.Id=e,Mi(Le(i()),(function(){e.qd=!0,tf(e)}),(function(t){ff(e,t)}))}(t,s,(function(){return gl(e,"start",[s])}),n,r,i,h)}function vf(t){return new p("ReadableStreamBYOBRequest.prototype."+t+" can only be used on a ReadableStreamBYOBRequest")}function wf(t){return new p("ReadableByteStreamController.prototype."+t+" can only be used on a ReadableByteStreamController")}function mf(t){return no((function(e,i){var s={Td:e,Sd:i};t.wd.f_.push(s)}))}function pf(t){return t.wd.f_.length}function yf(t){var e=t.wd;return void 0!==e&&!!bf(e)}var Af=function(){function t(t){if(!bi(t))throw new p("ReadableStreamBYOBReader can only be constructed with a ReadableStream instance given a byte source");if(!1===Jd(t.Id))throw new p("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");if(Tn(t))throw new p("This stream has already been locked for exclusive reading by another reader");El(this,t),this.f_=new Ii}return g.defineProperty(t.prototype,"closed",{get:function(){return bf(this)?this.pd:Ec(Tf("closed"))},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return bf(this)?void 0===this.vd?Ec(Rl("cancel")):Il(this,t):Ec(Tf("cancel"))},t.prototype.read=function(t){return bf(this)?void 0===this.vd?Ec(Rl("read from")):ArrayBuffer.isView(t)?(t.buffer,0===t.byteLength?Ec(new p("view must have non-zero byteLength")):function(t,e){var i=t.vd;if(i.Ed=!0,"errored"===i.Pa)return Ec(i.md);return function(t,e){var i=t.l_,s=1;e.constructor!==DataView&&(s=e.constructor.BYTES_PER_ELEMENT);var n=e.constructor,r={buffer:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength,bytesFilled:0,elementSize:s,ctor:n,readerType:"byob"};if(t.u_.length>0)return t.u_.push(r),mf(i);if("closed"===i.Pa)return Le(ti(new n(r.buffer,r.byteOffset,0),!0,i.wd._d));if(t.xd>0){if(!0===rf(t,r)){var h=sf(r);return of(t),Le(ti(h,!1,i.wd._d))}if(!0===t.n_){var o=new p("Insufficient bytes to fill elements in the given buffer");return ff(t,o),Ec(o)}}t.u_.push(r);var a=mf(i);return tf(t),a}(i.Id,e)}(this,t)):Ec(new p("view must be an array buffer view")):Ec(Tf("read"))},t.prototype.releaseLock=function(){if(!bf(this))throw Tf("releaseLock");if(void 0!==this.vd){if(this.f_.length>0)throw new p("Tried to release a reader lock when that reader has pending read() calls un-settled");Pl(this)}},t}();function bf(t){return!!cl(t)&&!!g.prototype.hasOwnProperty.call(t,"f_")}function Tf(t){return new p("ReadableStreamBYOBReader.prototype."+t+" can only be used on a ReadableStreamBYOBReader")}var Sf=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e={}),Ef(this);var i=e.size,s=e.highWaterMark,n=t.type;if("bytes"===String(n)){if(void 0!==i)throw new RangeError("The strategy for a byte stream cannot have a size function");void 0===s&&(s=0),gf(this,t,s=tr(s))}else{if(void 0!==n)throw new RangeError("Invalid type is specified");var r=wl(i);void 0===s&&(s=1),function(t,e,i,s){var n=g.create(Ud.prototype),r=Rn(e,"pull",0,[n]),h=Rn(e,"cancel",1,[]);Qd(t,n,(function(){return gl(e,"start",[n])}),r,h,i,s)}(this,t,s=tr(s),r)}}return g.defineProperty(t.prototype,"locked",{get:function(){if(!1===bi(this))throw Cf("locked");return Tn(this)},enumerable:!0,configurable:!0}),t.prototype.cancel=function(t){return!1===bi(this)?Ec(Cf("cancel")):!0===Tn(this)?Ec(new p("Cannot cancel a stream that already has a reader")):If(this,t)},t.prototype.getReader=function(t){var e=(void 0===t?{}:t).mode;if(!1===bi(this))throw Cf("getReader");if(void 0===e)return Ol(this,!0);if("byob"===(e=String(e)))return function(t,e){void 0===e&&(e=!1);var i=new Af(t);return i._d=e,i}(this,!0);throw new RangeError("Invalid mode is specified")},t.prototype.pipeThrough=function(t,e){var i=t.writable,s=t.readable,n=void 0===e?{}:e,r=n.preventClose,h=n.preventAbort,o=n.preventCancel,a=n.signal;if(!1===bi(this))throw Cf("pipeThrough");if(!1===Bu(i))throw new p("writable argument to pipeThrough must be a WritableStream");if(!1===bi(s))throw new p("readable argument to pipeThrough must be a ReadableStream");if(r=Boolean(r),h=Boolean(h),o=Boolean(o),void 0!==a&&!Ld(a))throw new p("ReadableStream.prototype.pipeThrough's signal option must be an AbortSignal");if(!0===Tn(this))throw new p("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(!0===Kn(i))throw new p("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return sr(Fd(this,i,r,h,o,a)),s},t.prototype.pipeTo=function(t,e){var i=void 0===e?{}:e,s=i.preventClose,n=i.preventAbort,r=i.preventCancel,h=i.signal;return!1===bi(this)?Ec(Cf("pipeTo")):!1===Bu(t)?Ec(new p("ReadableStream.prototype.pipeTo's first argument must be a WritableStream")):(s=Boolean(s),n=Boolean(n),r=Boolean(r),void 0===h||Ld(h)?!0===Tn(this)?Ec(new p("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):!0===Kn(t)?Ec(new p("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):Fd(this,t,s,n,r,h):Ec(new p("ReadableStream.prototype.pipeTo's signal option must be an AbortSignal")))},t.prototype.tee=function(){if(!1===bi(this))throw Cf("tee");var t=function(t,e){var i,s,n,r,h,o=Ol(t),a=!1,u=!1,c=!1,l=no((function(t){h=t}));function d(){return!0===a||(a=!0,sr(kl(Xl(o),(function(t){if(a=!1,!0===t.done)return!1===u&&zd(n.Id),void(!1===c&&zd(r.Id));var e=t.value,i=e,s=e;!1===u&&Xd(n.Id,i),!1===c&&Xd(r.Id,s)})))),Le(void 0)}function f(){}return n=kf(f,d,(function(e){if(u=!0,i=e,!0===c){var n=ll([i,s]),r=If(t,n);h(r)}return l})),r=kf(f,d,(function(e){if(c=!0,s=e,!0===u){var n=ll([i,s]),r=If(t,n);h(r)}return l})),Sl(o.pd,(function(t){xe(n.Id,t),xe(r.Id,t)})),[n,r]}(this);return ll(t)},t.prototype.getIterator=function(t){var e=(void 0===t?{}:t).preventCancel,i=void 0!==e&&e;if(!1===bi(this))throw Cf("getIterator");return function(t,e){void 0===e&&(e=!1);var i=Ol(t),s=g.create(Ql);return s.Pd=i,s.Rd=Boolean(e),s}(this,i)},t}();function kf(t,e,i,s,n){void 0===s&&(s=1),void 0===n&&(n=function(){return 1});var r=g.create(Sf.prototype);return Ef(r),Qd(r,g.create(Ud.prototype),t,e,i,s,n),r}function Ef(t){t.Pa="readable",t.wd=void 0,t.md=void 0,t.Ed=!1}function bi(t){return!!cl(t)&&!!g.prototype.hasOwnProperty.call(t,"Id")}function Tn(t){return void 0!==t.wd}function If(t,e){return t.Ed=!0,"closed"===t.Pa?Le(void 0):"errored"===t.Pa?Ec(t.md):(Pf(t),kl(t.Id[Bl](e),ol))}function Pf(t){t.Pa="closed";var e=t.wd;void 0!==e&&(zl(e)&&(e.kd.forEach((function(t){t.Td(ti(void 0,!0,e._d))})),e.kd=new Ii),Nl(e))}function Rf(t,e){t.Pa="errored",t.md=e;var i=t.wd;void 0!==i&&(zl(i)?(i.kd.forEach((function(t){t.Sd(e)})),i.kd=new Ii):(i.f_.forEach((function(t){t.Sd(e)})),i.f_=new Ii),Dl(i,e))}function Cf(t){return new p("ReadableStream.prototype."+t+" can only be used on a ReadableStream")}"symbol"==typeof lh.asyncIterator&&g.defineProperty(Sf.prototype,lh.asyncIterator,{value:Sf.prototype.getIterator,enumerable:!1,writable:!0,configurable:!0});!function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}t.prototype.size=function(t){return t.byteLength}}();var xf=function(){function t(t){var e=t.highWaterMark;this.highWaterMark=e}return t.prototype.size=function(){return 1},t}(),Ka=function(){function t(t,e,i){void 0===t&&(t={}),void 0===e&&(e={}),void 0===i&&(i={});var s=e.size,n=e.highWaterMark,r=i.size,h=i.highWaterMark;if(void 0!==t.writableType)throw new RangeError("Invalid writable type specified");var o=wl(s);if(void 0===n&&(n=1),n=tr(n),void 0!==t.readableType)throw new RangeError("Invalid readable type specified");var a,u=wl(r);void 0===h&&(h=0),h=tr(h),function(t,e,i,s,n,r){function h(){return e}function o(e){return function(t,e){var i=t.__;if(!0===t.Ud){return kl(t.g_,(function(){var s=t.v_;if("erroring"===s.Pa)throw s.md;return Hf(i,e)}))}return Hf(i,e)}(t,e)}function a(e){return function(t,e){return Nf(t,e),Le(void 0)}(t,e)}function u(){return function(t){var e=t.w_,i=t.__,s=i.m_();return Ff(i),kl(s,(function(){if("errored"===e.Pa)throw e.md;var t=e.Id;!0===ir(t)&&zd(t)}),(function(i){throw Nf(t,i),e.md}))}(t)}function c(){return function(t){return Lf(t,!1),t.g_}(t)}function l(e){return Bf(t,e),Le(void 0)}t.v_=function(t,e,i,s,n,r){void 0===n&&(n=1),void 0===r&&(r=function(){return 1});var h=g.create(td.prototype);return id(h),wd(h,g.create(vd.prototype),t,e,i,s,n,r),h}(h,o,u,a,i,s),t.w_=kf(h,c,l,n,r),t.Ud=void 0,t.g_=void 0,t.p_=void 0,Lf(t,!0),t.__=void 0}(this,no((function(t){a=t})),n,o,h,u),function(t,e){var i=g.create(Of.prototype),s=function(t){try{return Uf(i,t),Le(void 0)}catch(t){return Ec(t)}},n=e.transform;if(void 0!==n){if("function"!=typeof n)throw new p("transform is not a method");s=function(t){return vl(n,e,[t,i])}}var r=Rn(e,"flush",0,[i]);!function(t,e,i,s){e.y_=t,t.__=e,e.A_=i,e.m_=s}(t,i,s,r)}(this,t);var c=gl(t,"start",[this.__]);a(c)}return g.defineProperty(t.prototype,"readable",{get:function(){if(!1===Df(this))throw Wf("readable");return this.w_},enumerable:!0,configurable:!0}),g.defineProperty(t.prototype,"writable",{get:function(){if(!1===Df(this))throw Wf("writable");return this.v_},enumerable:!0,configurable:!0}),t}();function Df(t){return!!cl(t)&&!!g.prototype.hasOwnProperty.call(t,"__")}function Nf(t,e){xe(t.w_.Id,e),Bf(t,e)}function Bf(t,e){Ff(t.__),Ad(t.v_.Nd,e),!0===t.Ud&&Lf(t,!1)}function Lf(t,e){void 0!==t.g_&&t.p_(),t.g_=no((function(e){t.p_=e})),t.Ud=e}var n,Fc,Of=function(){function t(){throw new p("TransformStreamDefaultController instances cannot be created directly")}return g.defineProperty(t.prototype,"desiredSize",{get:function(){if(!1===Mf(this))throw Vf("desiredSize");return Gd(this.y_.w_.Id)},enumerable:!0,configurable:!0}),t.prototype.enqueue=function(t){if(!1===Mf(this))throw Vf("enqueue");Uf(this,t)},t.prototype.error=function(t){if(!1===Mf(this))throw Vf("error");!function(t,e){Nf(t.y_,e)}(this,t)},t.prototype.terminate=function(){if(!1===Mf(this))throw Vf("terminate");!function(t){var e=t.y_,i=e.w_.Id;!0===ir(i)&&zd(i);var s=new p("TransformStream terminated");Bf(e,s)}(this)},t}();function Mf(t){return!!cl(t)&&!!g.prototype.hasOwnProperty.call(t,"y_")}function Ff(t){t.A_=void 0,t.m_=void 0}function Uf(t,e){var i=t.y_,s=i.w_.Id;if(!1===ir(s))throw new p("Readable side is not in a state that permits enqueue");try{Xd(s,e)}catch(t){throw Bf(i,t),i.w_.md}var n=function(t){return!0!==Wd(t)}(s);n!==i.Ud&&Lf(i,!0)}function Hf(t,e){return kl(t.A_(e),void 0,(function(e){throw Nf(t.y_,e),e}))}function Vf(t){return new p("TransformStreamDefaultController.prototype."+t+" can only be used on a TransformStreamDefaultController")}function Wf(t){return new p("TransformStream.prototype."+t+" can only be used on a TransformStream")}function Jh(t,e){return zf(t.slice(),e)}function qf(t,e){const i=zf(t,e);return i!==t&&Xf(i,void 0,t.length,t),t}function zf(t,e){let i=t;const s=i.length;if(s<=1)return i;let n=new Array(s);for(let t=1;t<s;t*=2){Xf(i,e,t,n);const s=i;i=n,n=s}return i}function Xf(t,e,i,s){const n=t.length;let r=0;const h=2*i;let o,a,u,c,l;for(a=0;a<n;a+=h)for(u=a+i,o=u+i,u>n&&(u=n),o>n&&(o=n),c=a,l=u;;)if(c<u&&l<o)e&&e(t[c],t[l])<=0?s[r++]=t[c++]:s[r++]=t[l++];else if(c<u)s[r++]=t[c++];else{if(!(l<o))break;s[r++]=t[l++]}}!function(t){t[t.CONFIGURATION_ERROR=1e3]="CONFIGURATION_ERROR",t[t.LICENSE_ERROR=2e3]="LICENSE_ERROR",t[t.LICENSE_INVALID_DOMAIN=2001]="LICENSE_INVALID_DOMAIN",t[t.LICENSE_INVALID_SOURCE=2002]="LICENSE_INVALID_SOURCE",t[t.LICENSE_EXPIRED=2003]="LICENSE_EXPIRED",t[t.LICENSE_INVALID_FEATURE=2004]="LICENSE_INVALID_FEATURE",t[t.SOURCE_INVALID=3e3]="SOURCE_INVALID",t[t.SOURCE_NOT_SUPPORTED=3001]="SOURCE_NOT_SUPPORTED",t[t.MANIFEST_LOAD_ERROR=4e3]="MANIFEST_LOAD_ERROR",t[t.MANIFEST_CORS_ERROR=4001]="MANIFEST_CORS_ERROR",t[t.MANIFEST_PARSE_ERROR=4002]="MANIFEST_PARSE_ERROR",t[t.MEDIA_NOT_SUPPORTED=5e3]="MEDIA_NOT_SUPPORTED",t[t.MEDIA_LOAD_ERROR=5001]="MEDIA_LOAD_ERROR",t[t.MEDIA_DECODE_ERROR=5002]="MEDIA_DECODE_ERROR",t[t.MEDIA_AVPLAYER_ERROR=5003]="MEDIA_AVPLAYER_ERROR",t[t.MEDIA_ABORTED=5004]="MEDIA_ABORTED",t[t.NETWORK_ERROR=6e3]="NETWORK_ERROR",t[t.NETWORK_TIMEOUT=6001]="NETWORK_TIMEOUT",t[t.CONTENT_PROTECTION_ERROR=7e3]="CONTENT_PROTECTION_ERROR",t[t.CONTENT_PROTECTION_NOT_SUPPORTED=7001]="CONTENT_PROTECTION_NOT_SUPPORTED",t[t.CONTENT_PROTECTION_CONFIGURATION_MISSING=7002]="CONTENT_PROTECTION_CONFIGURATION_MISSING",t[t.CONTENT_PROTECTION_CONFIGURATION_INVALID=7003]="CONTENT_PROTECTION_CONFIGURATION_INVALID",t[t.CONTENT_PROTECTION_INITIALIZATION_INVALID=7004]="CONTENT_PROTECTION_INITIALIZATION_INVALID",t[t.CONTENT_PROTECTION_CERTIFICATE_ERROR=7005]="CONTENT_PROTECTION_CERTIFICATE_ERROR",t[t.CONTENT_PROTECTION_CERTIFICATE_INVALID=7006]="CONTENT_PROTECTION_CERTIFICATE_INVALID",t[t.CONTENT_PROTECTION_LICENSE_ERROR=7007]="CONTENT_PROTECTION_LICENSE_ERROR",t[t.CONTENT_PROTECTION_LICENSE_INVALID=7008]="CONTENT_PROTECTION_LICENSE_INVALID",t[t.CONTENT_PROTECTION_KEY_EXPIRED=7009]="CONTENT_PROTECTION_KEY_EXPIRED",t[t.CONTENT_PROTECTION_KEY_MISSING=7010]="CONTENT_PROTECTION_KEY_MISSING",t[t.CONTENT_PROTECTION_OUTPUT_RESTRICTED=7011]="CONTENT_PROTECTION_OUTPUT_RESTRICTED",t[t.CONTENT_PROTECTION_INTERNAL_ERROR=7012]="CONTENT_PROTECTION_INTERNAL_ERROR",t[t.SUBTITLE_LOAD_ERROR=8e3]="SUBTITLE_LOAD_ERROR",t[t.SUBTITLE_CORS_ERROR=8001]="SUBTITLE_CORS_ERROR",t[t.SUBTITLE_PARSE_ERROR=8002]="SUBTITLE_PARSE_ERROR",t[t.VR_PLATFORM_UNSUPPORTED=9e3]="VR_PLATFORM_UNSUPPORTED",t[t.VR_PRESENTATION_ERROR=9001]="VR_PRESENTATION_ERROR",t[t.AD_ERROR=1e4]="AD_ERROR",t[t.AD_BLOCKER_DETECTED=10001]="AD_BLOCKER_DETECTED",t[t.FULLSCREEN_ERROR=11e3]="FULLSCREEN_ERROR",t[t.CACHE_SOURCE_ERROR=12e3]="CACHE_SOURCE_ERROR",t[t.CACHE_CONTENT_PROTECTION_ERROR=12001]="CACHE_CONTENT_PROTECTION_ERROR"}(n||(n={})),function(t){t[t.CONFIGURATION=1]="CONFIGURATION",t[t.LICENSE=2]="LICENSE",t[t.SOURCE=3]="SOURCE",t[t.MANIFEST=4]="MANIFEST",t[t.MEDIA=5]="MEDIA",t[t.NETWORK=6]="NETWORK",t[t.CONTENT_PROTECTION=7]="CONTENT_PROTECTION",t[t.SUBTITLE=8]="SUBTITLE",t[t.VR=9]="VR",t[t.AD=10]="AD",t[t.FULLSCREEN=11]="FULLSCREEN",t[t.CACHE=12]="CACHE"}(Fc||(Fc={})),(Fc||(Fc={})).fromCode=function(t){const e=w.floor(t/1e3);if(e in Fc)return e;throw new p("Invalid error code: "+t)};var R={}.hasOwnProperty,Gf={}.toString;function Qf(t){return null!=t}function Kf(t){return void 0===t}var Os=Array.isArray||function(t){return"[object Array]"===Gf.call(t)};function yr(t){return Th(t)&&R.call(t,"length")&&zu(t.length)}function Th(t){return"object"==typeof t&&null!==t}function _i(t){return Th(t)&&t.constructor&&t.constructor===g}function mh(t){return"string"==typeof t}function Mn(t){return"boolean"==typeof t}function Ie(t){return Qf(t)&&"function"==typeof t.then}function jf(t){return"[object Date]"===Gf.call(t)}function zu(t){return"number"==typeof t}var Bt,ne=9007199254740991,Yf=2**-52;function xu(t,e,i){return w.min(w.max(t,e),i)}function au(t,e,i){return t===e||w.abs(t-e)<=i}function Zf(t){return t!=t}function Jf(t,e){return t===e||Zf(t)&&Zf(e)}function $f(t,e){let i=t,s=e;for(;0!==s;){const t=i%s;i=s,s=t}return i<0?-i:i}function t_(t,e){return t.reduce(((t,i)=>t+e(i)),0)}!function(t){t[t.ih=0]="ih",t[t.b_=1]="b_",t[t.T_=-1]="T_"}(Bt||(Bt={}));var Xn=(t,e)=>(0|t)-(0|e),Vi=(t,e)=>t===e?0:t<e?-1:t>e?1:j(t)?j(e)?0:1:-1;function e_(t,e,i){return au(t,e,i)?0:Vi(t,e)}var i_=(t,e)=>function(t,e){if(t===e)return!0;const i=w.abs(t-e);return i<Yf||i<w.max(w.abs(t),w.abs(e))*Yf}(t,e)?0:Vi(t,e);var s_="function"==typeof Array.prototype.find?(t,e)=>t.find(e):(t,e)=>{const i=rs(t,e);return-1===i?void 0:t[i]},pi=s_,n_="function"==typeof Array.prototype.findLast?(t,e)=>t.findLast(e):(t,e)=>{const i=r_(t,e);return-1===i?void 0:t[i]},go=n_,rs="function"==typeof Array.prototype.findIndex?(t,e)=>t.findIndex(e):(t,e)=>{for(let i=0;i<t.length;i+=1){if(e(t[i],i,t))return i}return-1},r_="function"==typeof Array.prototype.findLastIndex?(t,e)=>t.findLastIndex(e):(t,e)=>{for(let i=t.length-1;i>=0;i-=1){if(e(t[i],i,t))return i}return-1};function me(t,e){const i=t.indexOf(e);return-1!==i&&(hn(t,i),!0)}function hn(t,e){0===e?t.shift():t.splice(e,1)}function h_(t,e){const i=new Array(t.length);let s=0,n=0;for(;n<t.length;){if(t[n]===e){n++,i.length-=1;break}i[s++]=t[n++]}for(;n<t.length;)i[s++]=t[n++];return i}function Bc(t,e){return-1!==t.indexOf(e)}function o_(t,e,i){if(t===e)return!0;if(t.length!==e.length)return!1;for(let s=0;s<t.length;s+=1)if(!i(t[s],e[s]))return!1;return!0}function Ce(t){t.length=0}function er(t,e){if(t.length!==e.length)return!1;for(const i of t)if(!Bc(e,i))return!1;return!0}Array.prototype.flat;var Ga="function"==typeof Array.prototype.flatMap?(t,e)=>t.flatMap(e):(t,e)=>{const i=[];for(let s=0;s<t.length;s++)i.push(...e(t[s],s));return i};function a_(t,e){return u_(t,((t,i)=>Vi(e(t),e(i))))}function rr(t,e){return c_(t,((t,i)=>Vi(e(t),e(i))))}function u_(t,e){if(0!==t.length)return t.reduce(((t,i)=>e(t,i)<=0?t:i))}function c_(t,e){return u_(t,((t,i)=>e(i,t)))}function l_(t){return t.filter(((e,i)=>t.indexOf(e)===i))}function d_(t,e){return Promise.all(t.map(e)).then((e=>t.filter(((t,i)=>e[i]))))}function f_(t,e,i){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(!i(t[s],e[s]))return!1;return!0}function __(){const t=g.create(null);return t.S_=void 0,delete t.S_,t}function Wn(){return new m_}function Yh(){return new p_}function g_(t){const e=Wn();for(const i in t)R.call(t,i)&&e.set(i,t[i]);return e}function v_(t){const e=[];return t.forEach((t=>e.push(t))),e}var w_="undefined"!=typeof Map&&"entries"in Map.prototype?Map:void 0,m_=w_||function(){class t{next(){const t=this.index;return t<this.keys.length?(this.index++,{value:this.selector(this.data,this.keys[t]),done:!1}):{value:void 0,done:!0}}constructor(t,e){this.index=0,this.data=t,this.selector=e,this.keys=g.keys(t)}}return class{get(t){return this.data[t]}set(t,e){return this.has(t)||this.size++,this.data[t]=e,this}has(t){return t in this.data}delete(t){return!!this.has(t)&&(this.size--,delete this.data[t],!0)}clear(){this.data=__(),this.size=0}keys(){return new t(this.data,((t,e)=>e))}values(){return new t(this.data,((t,e)=>t[e]))}entries(){return new t(this.data,((t,e)=>[e,t[e]]))}forEach(t){for(const e in this.data)t(this.data[e],e)}constructor(){this.data=__(),this.size=0}}}();var p_=w_||function(){class t{next(){const t=this.k_.next();return t.done?t:{value:this.E_(t.value),done:!1}}constructor(t,e){this.k_=t,this.E_=e}}return class{get size(){return this.I_.size}get(t){return this.I_.get(""+t)}set(t,e){return this.I_.set(""+t,e),this}has(t){return this.I_.has(""+t)}delete(t){return this.I_.delete(""+t)}clear(){this.I_.clear()}keys(){return new t(this.I_.keys(),(t=>Number(t)))}values(){return this.I_.values()}entries(){return new t(this.I_.entries(),(t=>{let[e,i]=t;return[Number(e),i]}))}forEach(t){this.I_.forEach(((e,i)=>{t(e,Number(i))}))}constructor(){this.I_=Wn()}}}();var y_=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];v.apply(this,e)};(y_.prototype=g.create(v.prototype)).constructor=y_;var Ee,Fe=class extends y_{get name(){return"BaseError"}constructor(t,e){super(),this.message=t||"Unknown error",this.cause=e,v.captureStackTrace&&v.captureStackTrace(this,this.constructor)}},A_=class{P_(){if(!this.R_&&!this.C_){this.R_=!0;for(const t of this.x_.slice())t();this.Ou()}}Ou(){if(!this.C_){this.C_=!0;for(const t of this.D_.slice())t();Ce(this.x_),Ce(this.D_)}}N_(t){this.C_||this.x_.push(t)}B_(t){this.C_||me(this.x_,t)}L_(t){this.C_||this.D_.push(t)}O_(t){this.C_||me(this.D_,t)}constructor(){this.R_=!1,this.C_=!1,this.x_=[],this.D_=[]}},Hi=class t{get M_(){return this.F_}Jl(){this.F_.P_()}Ou(){this.F_.Ou()}U_(t){const e=this.F_;if(e.R_)return;if(t.R_)return void e.P_();if(e.C_||t.C_)return;const i=()=>{s(),e.P_()},s=()=>{t.B_(i),t.O_(s),e.B_(i),e.O_(s)};t.N_(i),t.L_(s),e.N_(i),e.L_(s)}H_(){const e=new t,i=new t,s=e.M_,n=i.M_,r=this.F_,h=()=>{s.R_&&n.C_||n.R_&&s.C_?r.P_():s.C_&&n.C_&&r.Ou()};s.N_(h),n.N_(h),s.L_(h),n.L_(h),e.U_(r),i.U_(r);return r.L_((()=>{s.B_(h),n.B_(h),s.O_(h),n.O_(h)})),[e,i]}constructor(){this.F_=new A_}};var Qo=()=>{},b_=t=>t;function E(t,e){let i=-1/0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=Ee.V_();h-i>=e&&(t.apply(this,n),i=h)}}function T_(t,e){let i=0;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];const h=this;0!==i&&Ee.W_(i),i=Ee.q_((()=>{i=0,t.apply(h,n)}),e)}}function S_(t){let e;return()=>(void 0!==t&&(e=t(),t=void 0),e)}var At=class extends Fe{get name(){return"AbortError"}constructor(t,e){super(t||"Aborted",e)}};function Aa(t){return t instanceof v&&"AbortError"===t.name}function k_(t){if(t&&t.R_)throw new At}function pe(t){if(Aa(t))throw t}function B(t){if(!Aa(t))throw t}function E_(t,e){return e?new Promise(((i,s)=>{if(e.R_)return t.catch(Qo),s(new At);const n=()=>{e.B_(n),s(new At)};e.N_(n),t.then((t=>{e.B_(n),i(t)}),(t=>{e.B_(n),s(t)}))})):t}function I_(t,e){return t.then((t=>(e.Ou(),t)),(t=>{throw e.Ou(),t}))}function zs(t,e){const i=new Hi;return e&&i.U_(e),I_(t(i.M_),i)}var P_=Promise.resolve(),xt="function"==typeof queueMicrotask?queueMicrotask:t=>{P_.then(t)};function M(t){t.then(Qo,Qo)}async function so(t){try{return await Promise.all(t)}catch(e){throw await Promise.all(t.map((t=>t.catch(Qo)))),e}}function uc(t,e){return new Promise(((i,s)=>{if(void 0!==e&&e.R_)return void s(new At);const n=Ee.q_((()=>{void 0!==e&&e.B_(r),i()}),t),r=()=>{Ee.W_(n),s(new At)};void 0!==e&&e.N_(r)}))}function R_(t,e,i){if("function"==typeof i)i.call(t,e);else for(const s of i)s.call(t,e)}var ja,Et=class{wn(t,e){if("function"==typeof e)if("string"==typeof t)this.z_(t,e);else for(const i of t)this.z_(i,e)}z_(t,e){const i=this.X_[t];void 0===i?this.X_[t]=e:"function"==typeof i?this.X_[t]=[i,e]:0===this.G_?i.push(e):this.X_[t]=i.concat(e)}Q_(t){if("function"!=typeof t)return;const e=this.K_;void 0===e?this.K_=t:"function"==typeof e?this.K_=[e,t]:0===this.G_?e.push(t):this.K_=e.concat(t)}Lo(){this.X_=__(),this.K_=void 0}To(t){this.G_++;const e=this.X_[t.type],i=this.K_;void 0!==e&&R_(this.j_,t,e),void 0!==i&&R_(this.j_,t,i),this.G_--}pn(t,e){if("function"==typeof e)if("string"==typeof t)this.Y_(t,e);else for(const i of t)this.Y_(i,e)}Y_(t,e){const i=this.X_[t];void 0!==i&&("function"==typeof i?i===e&&(this.X_[t]=void 0):0===this.G_?me(i,e):this.X_[t]=h_(i,e))}Z_(t){if("string"==typeof t)this.X_[t]=void 0;else for(const e of t)this.X_[e]=void 0}J_(t){const e=this.K_;void 0!==e&&("function"==typeof e?e===t&&(this.K_=void 0):0===this.G_?me(e,t):this.K_=h_(e,t))}eg(t,e){return new Promise(((i,s)=>{if(e&&e.R_)return s(new At);const n=t=>{h(),i(t)},r=()=>{h(),s(new At)},h=()=>{this.pn(t,n),e&&e.B_(r)};this.wn(t,n),e&&e.N_(r)}))}constructor(t){this.X_=__(),this.K_=void 0,this.G_=0,this.Os=t=>{this.To(t)},this.j_=null!=t?t:this}},pu=class extends Et{To(t){xt((()=>{super.To(t)}))}},Xo=class extends Et{Q_(t){super.Q_(t)}J_(t){super.J_(t)}},je=class extends Xo{get ht(){return this.rg()}rg(){return this.hg.ht}og(){return this.hg.og()}get bl(){return this.ag()}ag(){return this.hg.bl}get qu(){return this.cg()}set qu(t){this.dg(t)}cg(){return this.hg.qu}dg(t){this.hg.qu=t}get bt(){return this.fg()}fg(){return this.hg.bt}get Wu(){return this._g()}set Wu(t){this.gg(t)}_g(){return this.hg.Wu}gg(t){this.hg.Wu=t}get ct(){return this.vg()}vg(){return this.hg.ct}get je(){return this.wg()}wg(){return this.hg.je}get Ic(){return this.pg()}pg(){return this.hg.Ic}get lt(){return this.yg()}get Ec(){return this.Ag()}yg(){return this.hg.lt}Ag(){return this.hg.Ec}get Tg(){return this.Sg()}Sg(){return this.hg.Tg}get Eg(){return this.Ig()}Ig(){return this.hg.Eg}get Pg(){return this.Rg()}Rg(){return this.hg.Pg}get Xu(){return this.Cg()}set Xu(t){this.xg(t)}Cg(){return this.hg.Xu}xg(t){this.hg.Xu=t}get Dg(){return this.Ng()}Ng(){return this.hg.Dg}get Dc(){return this.Bg()}Bg(){return this.hg.Dc}get $u(){return this.Lg()}set $u(t){this.Iu(t)}Lg(){return this.hg.$u}Iu(t){this.hg.$u=t}get wl(){return this.Og()}Og(){return this.hg.wl}get Mg(){return this.Fg()}set Mg(t){this.Ug(t)}Fg(){return this.hg.Mg}Ug(t){this.hg.Mg=t}get Nc(){return this.Hg()}Hg(){return this.hg.Nc}get kl(){return this.Vg()}Vg(){return this.hg.kl}get Fc(){return this.Wg()}Wg(){return this.hg.Fc}qg(){return this.hg.qg()}ba(t,e){return this.hg.ba(t,e)}get nt(){return this.zg()}zg(){return this.hg.nt}get Xg(){return this.Gg()}Gg(){return this.hg.Xg}get rt(){return this.Qg()}Qg(){return this.hg.rt}get Kg(){return this.jg()}jg(){return this.hg.Kg}get _l(){return this.Yg()}set _l(t){this.Zg(t)}get Jg(){return this.$g()}$g(){return this.hg.Jg}Yg(){return this.hg._l}Zg(t){this.hg._l=t}get tv(){return this.hg.tv}set tv(t){this.hg.tv=t}ev(){return this.hg.ev()}rv(){return this.hg.rv()}hv(t){this.hg.hv(t)}ov(){this.hg.ov()}ke(){this.hg.ke()}uv(){this.hg.uv()}jl(){this.hg.jl()}dl(){this.hg.dl()}be(){this.hg.be()}xl(){return this.hg.xl()}fv(){return this.hg.fv()}_v(){this.hg._v()}vv(){this.hg.vv()}ir(){return this.hg.ir()}wv(){this.hg.wv()}mv(){this.hg.mv()}pv(t){return this.hg.pv(t)}yv(t){return!1}async bn(){this.Lo(),await this.hg.bn()}constructor(t){super(),this.Av=t=>{this.yv(t)||this.To(t)},this.hg=t,t.Q_(this.Av)}};!function(t){t.bv="Tv",t.Sv="Ev"}(ja||(ja={}));var Xi=class{constructor(t,e=new Date){this.type=t,this.date=e}},la=class extends Xi{get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}constructor(t,e){super(t,e),this.Gu=void 0}};function C_(t){return Boolean(t&&t.ma)}var ze,Oo=class extends la{constructor(t){super(t)}},cn=class extends Xi{constructor(t){super(t)}},x_=class extends Oo{pa(){return new D_(this.Ht.ma)}constructor(t){super(ja.bv),this.Ht=t}},D_=class extends cn{constructor(t){super("addtrack"),this.track=t}},N_=class extends Oo{pa(){return new B_(this.Ht.ma)}constructor(t){super(ja.Sv),this.Ht=t}},B_=class extends cn{constructor(t){super("removetrack"),this.track=t}};!function(t){t.Iv="Pv",t.Rv="Cv",t.xv="Dv",t.Nv="Bv",t.Lv="Ov",t.Mv="Fv",t.oa="Uv",t.Bf="Hv",t.Vv="Wv",t.qv="Kn",t.zv="Xv",t.Gv="Qv",t.QUALITY_UNAVAILABLE="qualityunavailable",t.NO_QUALITY="noquality"}(ze||(ze={}));var P=class extends Et{get Kv(){return this.Yv}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}get U(){return this.Yv.length}Zv(t){return this.Yv[t]}tt(t){return!(!t||Bc(this.Yv,t))&&(this.Yv.push(t),this.Gu&&this.Gu.push(t.ma),t.wn(ze.oa,this.Os),this.To(new x_(t)),!0)}it(t){if(!t)return!1;const e=this.Yv.indexOf(t);return!(e<0)&&(hn(this.Yv,e),this.Gu&&hn(this.Gu,e),t.pn(ze.oa,this.Os),this.To(new N_(t)),!0)}Jv(t){return Bc(this.Yv,t)}ir(){const t=this.Yv;for(let e=t.length-1;e>=0;e-=1)this.it(t[e])}bn(){this.ir(),this.Lo()}constructor(){super(),this.Yv=[],this.Gu=void 0}},In=class extends Oo{pa(){return new L_(this.Ht.ma)}constructor(t){super(ze.oa),this.Ht=t}},L_=class extends cn{constructor(t){super("change"),this.track=t}},ar=class extends P{get $v(){return this.ew}set $v(t){const e=this.ew;if(t!==e){if(e){this.iw(e);for(const i of e.Kv)t&&t.Jv(i)||this.it(i)}if(this.ew=t,t){const e=[];for(const i of t.Kv)this.tt(i),this.nw(i)&&e.push(i);this.hw(t);for(const t of e)t.To(new In(t))}}}hw(t){t.wn(ja.bv,this.ow),t.wn(ja.Sv,this.aw)}iw(t){t.pn(ja.bv,this.ow),t.pn(ja.Sv,this.aw)}bn(){this.ew&&this.ew.bn(),super.bn()}constructor(){super(),this.ew=void 0,this.ow=t=>{const e=t.Ht;this.tt(e)},this.aw=t=>{const e=t.Ht;this.it(e)}}},O_=g.freeze||b_;function or(t,e,i){g.defineProperty(t,e,{writable:!1,enumerable:!0,value:i})}function M_(t){return O_(t)}function oe(t,e){for(const i of g.getOwnPropertyNames(e))g.defineProperty(t,i,g.getOwnPropertyDescriptor(e,i));return t}function Ms(t){if(_i(t)){const e={};for(const i in t)R.call(t,i)&&(e[i]=Ms(t[i]));return e}if(Os(t)){const e=new Array(t.length);for(let i=0;i<e.length;i++)i in t&&(e[i]=Ms(t[i]));return e}return t}function Ne(t,e){return t===e||!(!t||!e)&&(!(!Th(t)||!Th(e))&&(yr(t)?!!yr(e)&&function(t,e){const i=t.length,s=e.length;if(i!==s)return!1;for(let s=0;s<i;s+=1)if(!Ne(t[s],e[s]))return!1;return!0}(t,e):!yr(e)&&function(t,e){const i=g.keys(t),s=g.keys(e);if(!i||!s||i.length!==s.length)return!1;for(const s of i)if(!R.call(e,s)||!Ne(t[s],e[s]))return!1;return!0}(t,e)))}function F_(t,e){return t.constructor===e.constructor}function U_(t){const e={};for(const i of g.keys(t)){const s=t[i];null!=s&&(e[i]=s)}return e}function Ru(t){const e={};for(const i of g.keys(t)){const s=t[i];if(yr(s)){const t=[];for(let e=0;e<s.length;e+=1){const i=s[e];if(null!=i){const e=Th(i)?Ru(i):i;t.push(e)}}e[i]=t}else null!=s&&(e[i]=Th(s)?Ru(s):s)}return e}function Dc(t){let e=t;if("string"==typeof e){if(e=e.toLowerCase(),"true"===e)return!0;if("false"===e)return!1}return Boolean(e)}function bu(t){return Qf(t)?Dc(t):void 0}function Mt(t){return"string"==typeof t?""===t?NaN:Number(t):"boolean"==typeof t||null==t||t instanceof Date||"number"!=typeof Number(t)&&!t?NaN:Number(t)}function H_(t){const e=Mt(t);if(j(e))throw new v("Expected a valid number.");return e}function Oi(t){return"string"==typeof t?t:""}function V_(t,e){if(!yr(t))return[];const i=0|t.length,s=new Array(i);for(let n=0;n<i;n++)s[n]=e(t[n]);return s}function ku(t,e){let i;return i=yr(t)?V_(t,e):e(t),i}var zc,W_=[ja.bv,ja.Sv,ze.oa];function q_(t){let e;const i=t.Kv.map((t=>t.ma));return i.item=e=>{const i=0|e,s=t.Zv(i);return s&&s.ma||void 0},i.addEventListener=(t,i)=>{e.wn(t,i)},i.removeEventListener=(t,i)=>{e.pn(t,i)},e=new pu(i),t.wn(W_,(t=>e.To(t.ma))),i}function z_(t){switch(t){case 0:return"caption";case 2:return"sign";case 1:return"description";case 3:return"enhanced audio intelligibility";case 4:return"easy reader";case 5:return"transcribes spoken dialog";case 6:return"describes music and sound";case 7:return"describes video"}}function X_(){}function Kt(t){const e=[ze.qv,ze.oa,ze.zv,ze.Gv,ze.QUALITY_UNAVAILABLE];let i;const s={get activeQuality(){return t.uw&&t.uw.ma},get enabled(){return t.Rt},set enabled(e){t.Rt=Dc(e)},get id(){return t.o},get uid(){return t.cw},get kind(){return t.Lt},get label(){return t._h},set label(e){t._h=Oi(e)},get accessibility(){var e,i;return null!=(i=null==(e=t.lw)?void 0:e.map(z_))?i:[]},get language(){return t.gs},get qualities(){return t.dw.ma},set targetQuality(e){let i;i=e?function(t,e){const i=[];for(const s of t.dw.Kv)for(const t of e)s.ma===t&&i.push(s);return i}(t,Os(e)?e:[e]):[],i.length>0?t.fw=i:t.fw=void 0},get targetQuality(){if(t.fw)return 1===t.fw.length?t.fw[0].ma:t.fw.map((t=>t.ma))},addEventListener(t,e){const s=ku(t,Oi);i.wn(s,e)},removeEventListener(t,e){const s=ku(t,Oi);i.pn(s,e)}};return i=new pu(s),t.wn(e,(t=>i.To(t.ma))),g.defineProperty(s,"constructor",{value:X_}),s}function G_(){}function Q_(t){const e=q_(t);return g.defineProperty(e,"constructor",{value:G_}),e}!function(t){t[t._w=0]="_w",t[t.gw=1]="gw",t[t.ww=2]="ww",t[t.mw=3]="mw",t[t.pw=4]="pw",t[t.TRANSCRIBES_SPOKEN_DIALOG=5]="TRANSCRIBES_SPOKEN_DIALOG",t[t.DESCRIBES_MUSIC_AND_SOUND=6]="DESCRIBES_MUSIC_AND_SOUND",t[t.yw=7]="yw"}(zc||(zc={}));var lu,zn,Fa=class extends ar{pa(){return Q_(this)}nw(t){return t.Rt}};function Ci(t){if("string"==typeof t){const e=t.toLowerCase();switch(e){case"disabled":case"hidden":case"showing":return e}}else if("number"==typeof t)switch(t){case 0:return"disabled";case 1:return"hidden";case 2:return"showing"}return"disabled"}function K_(){}function Jn(t){const e=[ze.oa,ze.qv,ze.Iv,ze.Rv,ze.Nv,ze.Lv,ze.xv,ze.Mv,ze.Bf,ze.Vv],i=[zn.aa];let s;const n={get kind(){return t.Lt},get label(){return t._h},set label(e){t._h=Oi(e)},get language(){return t.gs},get id(){return t.o},get uid(){return t.cw},get inBandMetadataTrackDispatchType(){return t.Aw},get mode(){return t.bw},set mode(e){e!==lu.Qn&&e!==lu.Tw&&e!==lu.Th||t.Sw(e)},get forced(){return Boolean(t.Ew)},get accessibility(){var e,i;return null!=(i=null==(e=t.lw)?void 0:e.map(z_))?i:[]},get type(){return t.Iw},get readyState(){return t.Nc},get cues(){return t.bw===lu.Th?null:t.L.ma},get activeCues(){return t.bw===lu.Th?null:t.W.ma},get src(){return t.Pw||""},addEventListener(t,e){const i=ku(t,Oi);s.wn(i,e)},removeEventListener(t,e){const i=ku(t,Oi);s.pn(i,e)}};return s=new pu(t),t.wn(e,(t=>s.To(t.ma))),t.wn(i,(t=>s.To(t))),g.defineProperty(n,"constructor",{value:K_}),n}function j_(){}function fr(t){const e=q_(t);return g.defineProperty(e,"constructor",{value:j_}),e}!function(t){t.Th="disabled",t.Tw="hidden",t.Qn="showing"}(lu||(lu={})),(zn||(zn={})).aa="error";var o,ee,Yc=class extends ar{pa(){return fr(this)}nw(t){return t.bw===lu.Qn}},Y_=.25,Z_=400,J_={Rw:.2,Cw:.45,xw:.7,Dw:3,Nw:$u,Bw:Gu},$_={Rw:.4,Cw:.65,xw:1,Dw:3,Nw:$u,Bw:Gu},tg={Rw:.4,Cw:.7,xw:.9,Dw:3,Nw:$u,Bw:Gu},eg={Rw:.2,Cw:.45,xw:1,Dw:3,Nw:$u,Bw:Gu},ig={Rw:.5,Cw:1.125,xw:1.75,Dw:2.55,Nw:$u,Bw:Gu};function sg(){let t;return t=Ee.Zs.Lw?eg:Ee.Zs.Ow?$_:Ee.Zs.Mw?"Android"===Ee.Uw.Fw?tg:J_:ig,Ee.Uw.Hw?function(t){if(Ee.Uw.Hw){const e=(Z_+250)/1e3,i=w.max(e,t.Rw),s=w.max(i+Y_,t.Cw),n=w.max(s+Y_,t.xw);return{Rw:i,Cw:s,xw:n,Dw:w.max(n+Y_,t.Dw),Nw:$u,Bw:Gu}}return t}(t):t}function ng(t){return{windowStart:t.Rw,windowEnd:t.xw,target:t.Cw,maxOffset:t.Dw}}!function(t){t.Vw="Ww",t.qw="zw",t.Xw="contentprotectionerror",t.Gw="contentprotectionsuccess",t.Qw="currentsourcechange",t.Kw="destroy",t.Nf="durationchange",t.jw="emptied",t.Yw="encrypted",t.Pf="ended",t.Zw="Jw",t.$w="tm",t.im="nm",t.hm="um",t.Ef="loadstart",t.lm="manifestupdate",t.dm="nosupportedrepresentationfound",t.fm="offline",t._m="online",t.Ch="pause",t.Ph="play",t.Rf="progress",t.Vu="ratechange",t.gm="representationchange",t.vm="resize",t.Tf="seeked",t.If="seeking",t.wm="segmentnotfound",t.pm="ym",t.Am="Tm",t.do="sourcechange",t.Lu="timeupdate",t.Il="volumechange",t.Sm="Em",t.Im="metricschange"}(o||(o={})),function(t){t.pl="canplay",t.ml="canplaythrough",t.gl="loadeddata",t.yl="loadedmetadata",t.Bf="readystatechange",t.Yf="waiting",t.Qf="playing"}(ee||(ee={}));var cc=["canplay","canplaythrough","loadeddata","loadedmetadata","readystatechange","waiting","playing"];function Me(){return Me=g.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)g.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},Me.apply(this,arguments)}var rg,$u=.92,Gu=1.08;!function(t){t[t.Th=0]="Th",t[t.Pm=1]="Pm",t[t.Rm=2]="Rm"}(rg||(rg={}));var pr=class extends Et{get Cm(){}get xm(){}get Dm(){}get Nm(){return!1}get Bm(){}get ma(){var t;return null!=(t=this.Gu)?t:this.Gu=hg(this)}Lm(){}constructor(...t){super(...t),this.Om=ng(sg())}};function hg(t){return{goLive:()=>t.Lm(),get isLive(){return t.Nm},get currentServerLiveTime(){return t.Cm},get currentLatency(){return t.xm},get latencies(){return t.Dm},get latency(){return t.Om},set latency(e){if(!function(t){if(!Th(t))return!1;const e=t,i=Qf(e.target)&&"number"==typeof e.target&&Qf(e.windowEnd)&&"number"==typeof e.windowEnd&&Qf(e.windowStart)&&"number"==typeof e.windowStart&&Qf(e.maxOffset)&&"number"==typeof e.maxOffset,s=e.windowStart>=0&&e.windowStart<=e.target&&e.target<=e.windowEnd&&e.maxOffset>=e.windowEnd;return i&&s}(e))throw new v("Invalid latency configuration");t.Om=e},get manifest(){return t.Bm},addEventListener(e,i){t.wn(ag(e),i)},removeEventListener(e,i){t.pn(ag(e),i)}}}var og=["golive","latencyrecoveryseek"];function ag(t){const e=ku(t,Oi);return(mh(e)?[e]:e).filter((t=>Bc(og,t)))}var Ln=class extends Et{set $v(t){const e=this.ew;t!==e&&(e&&this.iw(e),t&&this.hw(t),this.ew=t,this.ew&&(this.ew.Om=this.Mm))}get $v(){return this.ew}get ma(){return this.Gu||(this.Gu=hg(this)),this.Gu}hw(t){t.wn(og,this.Os)}iw(t){t.pn(og,this.Os)}Lm(){var t;null==(t=this.ew)||t.Lm()}get Cm(){var t;return null==(t=this.ew)?void 0:t.Cm}get xm(){var t;return null==(t=this.ew)?void 0:t.xm}get Dm(){var t;return null==(t=this.ew)?void 0:t.Dm}get Nm(){return!!this.ew&&this.ew.Nm}get Om(){return this.ew?this.ew.Om:this.Mm}set Om(t){this.ew&&(this.ew.Om=t),this.Mm=t}get Bm(){var t;return null==(t=this.ew)?void 0:t.Bm}bn(){this.Lo(),this.ew&&this.iw(this.ew),this.ew=void 0}constructor(){super(),this.ew=void 0,this.Gu=void 0,this.Mm=ng(sg()),this.ew=void 0}},ug="function"==typeof String.prototype.replaceAll?(t,e,i)=>t.replaceAll(e,i):(t,e,i)=>t.split(e).join(i);function Po(t,e){return Qf(t)&&-1!==t.indexOf(e)}var Jo="function"==typeof String.prototype.startsWith?(t,e)=>Qf(t)&&t.startsWith(e):(t,e)=>Qf(t)&&t.substr(0,e.length)===e,wt="function"==typeof String.prototype.endsWith?(t,e)=>Qf(t)&&t.endsWith(e):(t,e)=>Qf(t)&&t.substr(t.length-e.length,e.length)===e;function N(t,e){return t.length===e.length&&t.toUpperCase()===e.toUpperCase()}var cg="function"==typeof String.prototype.repeat?(t,e)=>t.repeat(e):(t,e)=>{let i=0|e;if(0===t.length||0===i)return"";let s=t,n="";for(;1==(1&i)&&(n+=s),i>>>=1,0!==i;)s+=s;return n},Xc="function"==typeof String.prototype.padStart?(t,e,i)=>(void 0===i&&(i=" "),t.padStart(e,i)):(t,e,i)=>{void 0===i&&(i=" ");let s=i;const n=(0|e)-t.length;return n<=0?t:(n>s.length&&(s+=cg(s,n/s.length)),s.slice(0,n)+t)},lg=(String.prototype.padEnd,16384),dg="function"==typeof String.fromCodePoint?t=>t.length<=lg?String.fromCodePoint(...t):_g(t,String.fromCodePoint):t=>{const e=[];for(let i of t)i>65535&&(i-=65536,e.push(i>>>10&1023|55296),i=56320|1023&i),e.push(i);return fg(e)};function fg(t){return t.length<=lg?String.fromCharCode(...t):_g(t,String.fromCharCode)}function _g(t,e){const i=[];for(let s=0;s<t.length;s+=lg)i.push(e(...t.slice(s,s+lg)));return i.join("")}function gg(t){return t.replace(/[\\"]/g,(t=>"\\"+t))}function vg(t,e){for(const i of g.keys(e))t.searchParams.set(i,e[i])}function we(t,e){let i=Ee.Fm(t);return e&&!wt(i,"/")&&(i+="/"),i}var wg=/cache:(.+)?(?=&|$)/,mg="http://webcache.googleusercontent.com/search?q=cache:";function pg(t){if(!Jo(t,mg))return"";const e=Ee.Rh(t).search.match(wg);return e&&e.length>1?e[1]:""}function yg(t){return Ee.Rh(".",t)}var Ag,ya,ra,bg="1ADD53F3";function Tg(t){return{appID:t&&t.appID?Oi(t.appID):bg}}function cr(t){if(null!==t)return t}function Sg(t){const e={apiKey:t.apiKey,integration:t.integration,streamActivityMonitorID:cr(t.streamActivityMonitorID),adTagParameters:Th(t.adTagParameters)?t.adTagParameters:{},authToken:cr(t.authToken),omidAccessModeRules:cr(t.omidAccessModeRules)};if("vod"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.videoID&&e.contentSourceID)}(t)){const i=t.videoID,s=t.contentSourceID;return i?s?Me({},e,{availabilityType:"vod",videoID:i,contentSourceID:s}):void Ee.Um("A VOD DAI configuration was provided without valid contentSourceID which is required."):void Ee.Um("A VOD DAI configuration was provided without valid videoID which is required.")}if("live"===(null==t?void 0:t.availabilityType)||function(t){const e=t;return Boolean(e.assetKey)}(t)){const i=t.assetKey;return i?Me({},e,{availabilityType:"live",assetKey:i}):void Ee.Um("A Live DAI configuration was provided without valid assetKey which is required.")}Ee.Um("A DAI configuration was provided without a valid availabilityType which is required.")}function kg(t){switch(t.integration){case"google-dai":return Sg(t);case"imagine":return function(t){return{integration:t.integration}}(t);case"yospace":return function(t){var e;return{integration:t.integration,streamType:null!=(e=t.streamType)?e:void 0}}(t);default:return{integration:t.integration}}}!function(t){t.AUTO="auto",t.MANUAL="manual",t.DISABLED="disabled"}(Ag||(Ag={})),function(t){t.Hm="",t.Vm="anonymous",t.Wm="use-credentials"}(ya||(ya={})),function(t){t.qm="application/dash+xml",t.zm="application/vnd.apple.mpegurl",t.Xm="application/x-mpegurl",t.Gm="video/mp4",t.Qm="application/vnd.theoplayer.hesp+json",t.Km="application/vnd.theo.hesp+json"}(ra||(ra={}));var Js,ic,eh="titanium",Tr="conax",Eg="ezdrm",Ig="irdeto",Hu="vudrm",Pg="verimatrix",wo="keyos",Rg="drmtoday",Cg="expressplay",xg="azure",Dg="xstream",Ng="vimond",Bg="axinom",Lg="uplynk",Og="comcast",Mg="custom";function Fg(t){return Qf(t.token&&t.deviceId)}function Ug(t){var e;const i=null==(e=t.fairplay)?void 0:e.headers;return void 0!==i&&Qf(i.PreAuthorization)}function Hg(t){const e=t;return Fg(e)&&""!==e.token&&""!==e.deviceId&&!Ug(e)}!function(t){t.jm="playready",t.Ym="widevine",t.Zm="fairplay",t.Jm="clearkey",t.$m="aes128"}(Js||(Js={})),function(t){t.tp=!1,t.ep=!1,t.ip=!1,t.sp=!1,t.LOG_ADS_DETAILS=!1,t.LOG_CHROMECAST_DETAILS=!1,t.LOG_CUSTOM_DRM=!1,t.LOG_BUFFERING_VIDEO_MAIN=!1,t.LOG_BUFFERING_VIDEO_SELECTION=!1,t.LOG_BUFFERING_AUDIO_MAIN=!1,t.LOG_BUFFERING_AUDIO_SELECTION=!1,t.np=!1,t.rp=!1,t.LOG_LCEVC_DETAILS=!1}(ic||(ic={}));var jr=class extends Fe{get name(){return"THEOplayerError"}get category(){return Fc.fromCode(this.code)}constructor(t,e,i){super(e,i),this.code=t}};var ss=class extends jr{get name(){return"ContentProtectionError"}constructor(t,e,i,s,n,r,h,o){super(t,e,i),this.url=s,this.status=n,this.statusText=r,this.response=h,this.systemCode=o}};var bo,Vg=class{get hp(){return this.op}get ap(){return this.cp}lp(t){return function(t){const e=t.onCertificateRequest;if(void 0!==e&&"function"!=typeof e)throw new p("ContentProtectionIntegration.onCertificateRequest is not a function.");const i=t.onCertificateResponse;if(void 0!==i&&"function"!=typeof i)throw new p("ContentProtectionIntegration.onCertificateResponse is not a function.");const s=t.onLicenseRequest;if(void 0!==s&&"function"!=typeof s)throw new p("ContentProtectionIntegration.onLicenseRequest is not a function.");const n=t.onLicenseResponse;if(void 0!==n&&"function"!=typeof n)throw new p("ContentProtectionIntegration.onLicenseResponse is not a function.");const r=t.extractFairplayContentId;if(void 0!==r&&"function"!=typeof r)throw new p("ContentProtectionIntegration.extractFairplayContentId is not a function.");return t}(this.dp.build(t))}constructor(t,e,i){this.op=t,this.cp=e,this.dp=i}};!function(t){t.FAILED="FAILED",t.OVERRIDDEN="OVERRIDDEN",t.SUCCEEDED="SUCCEEDED"}(bo||(bo={}));var Wg,Gc=class{registerContentProtectionIntegration(t,e,i){switch(this.fp(t,e,i)){case bo.FAILED:throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The keySystem should be 'widevine', 'playready' or 'fairplay', but was "+e+".");case bo.OVERRIDDEN:{const i=Sw(e);Ee.Um("Warning: Overwriting an earlier registered integration for "+t+" and "+i+".");break}case bo.SUCCEEDED:Sw(e);0;break}}fp(t,e,i){const s=Sw(e);if(!s)return bo.FAILED;let n=bo.SUCCEEDED;for(const e of this._p.slice())e.hp===t&&e.ap===s&&(n=bo.OVERRIDDEN,me(this._p,e));return this._p.push(new Vg(t,s,i)),n}gp(t,e){return void 0!==this.vp(t,e)}wp(t,e,i){const s=this.vp(t,e);if(!s)throw v("No ContentProtectionIntegrationInit was found for integration id "+t+" and key system "+e);return s.lp(i)}vp(t,e){for(const i of this._p)if(i.hp===t&&(!e||i.ap===e))return i}constructor(){this._p=[]}};Gc.mp=new Gc,function(t){t.jm="9a04f079-9840-4286-ab92-e65be0885f95",t.Ym="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",t.Jm="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",t.Zm="94ce86fb-07ff-4f43-adb8-93d2fa968ca2"}(Wg||(Wg={}));var hs,qg,un,hu,O,zg="urn:mpeg:dash:mp4protection:2011",Sr="cenc",Xg="sinf",rc="skd",Gg="9a04f079-9840-4286-ab92-e65be0885f95",Wi="urn:uuid:"+Gg,ko="com.microsoft.playready",Qg="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",Du="urn:uuid:"+Qg,Kg="com.widevine.alpha",jg="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",Yg="urn:uuid:"+jg,Zg="94ce86fb-07ff-4f43-adb8-93d2fa968ca2",ns="urn:uuid:"+Zg,Jg="com.apple.fps.1_0",$g="com.apple.streamingkeydelivery",tv="identity";!function(t){t.pp="moov",t.yp="mvhd",t.Ap="trak",t.bp="tkhd",t.Tp="mdia",t.Sp="mdhd",t.kp="hdlr",t.Ep="minf",t.Ip="stbl",t.Pp="stsd",t.Rp="stsc",t.Cp="mvex",t.xp="trex",t.Dp="avc1",t.Np="avcC",t.Bp="hev1",t.Lp="hvc1",t.Op="hvcC",t.Mp="vp09",t.Fp="vpcC",t.Up="av01",t.Hp="av1C",t.Vp="colr",t.Wp="pasp",t.qp="mp4a",t.zp="esds",t.Xp="wvtt",t.Gp="vttC",t.Qp="vlab",t.Kp="enca",t.jp="encv",t.Yp="moof",t.Zp="mfhd",t.Jp="traf",t.$p="tfhd",t.ey="trun",t.iy="tfdt",t.sy="senc",t.oy="mdat",t.uy="pssh",t.ly="emsg",t._y="sidx",t.gy="styp",t.vy="ftyp",t.wy="sinf",t.py="frma"}(hs||(hs={})),function(t){t.vl="vide",t.yy="soun",t.Ay="subt",t.by="hint",t.Ty="meta",t.Sy="auxv"}(qg||(qg={})),function(t){t.ON_SCREEN_COLOURS="nclx",t.RESTRICTED_ICC_PROFILE="rICC",t.UNRESTRICED_ICC_PROFILE="prof"}(un||(un={})),function(t){t[t.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",t[t.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",t[t.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",t[t.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",t[t.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT",t[t.DURATION_IS_EMPTY=65536]="DURATION_IS_EMPTY",t[t.DEFAULT_BASE_IS_MOOF=131072]="DEFAULT_BASE_IS_MOOF"}(hu||(hu={})),function(t){t[t.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",t[t.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",t[t.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",t[t.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",t[t.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT=2048]="SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT"}(O||(O={}));var jo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),ev=16383,iv=/[\t\n\f\r ]/g;function _o(t){return 43===t?62:47===t?63:t>=48&&t<=57?t-48+52:t>=65&&t<=90?t-65:t>=97&&t<=122?t-97+26:sv()}function sv(){throw new v("Invalid base64 input")}function Pt(t){let e=t;iv.test(e)&&(e=e.replace(iv,""));let i=e.length;i%4==0&&i>=1&&"="===e[i-1]&&(i>=2&&"="===e[i-2]?i-=2:i-=1,e=e.substr(0,i));const s=i%4;if(1===s)return sv();const n=0===s?0:4-s,r=new x(function(t,e){return 3*(t+e)/4-e}(i,n)),h=n>0?i-4:i;let o,a=0,u=0;for(;a<h;a+=4)o=_o(e.charCodeAt(a))<<18|_o(e.charCodeAt(a+1))<<12|_o(e.charCodeAt(a+2))<<6|_o(e.charCodeAt(a+3)),r[u++]=o>>16&255,r[u++]=o>>8&255,r[u++]=255&o;return 2===n?(o=_o(e.charCodeAt(a))<<2|_o(e.charCodeAt(a+1))>>4,r[u++]=255&o):1===n&&(o=_o(e.charCodeAt(a))<<10|_o(e.charCodeAt(a+1))<<4|_o(e.charCodeAt(a+2))>>2,r[u++]=o>>8&255,r[u++]=255&o),r}function nv(t,e,i){return jo[t>>2]+jo[(3&t)<<4|e>>4]+jo[(15&e)<<2|i>>6]+jo[63&i]}function rv(t,e,i){const s=[];for(let n=e;n<i;n+=3)s.push(nv(t[n],t[n+1],t[n+2]));return s.join("")}function Oe(t){const e=t.length,i=e%3,s=[],n=e-i;for(let e=0;e<n;e+=ev)s.push(rv(t,e,w.min(n,e+ev)));if(1===i){const i=t[e-1];s.push(jo[i>>2]+jo[(3&i)<<4]+"==")}else if(2===i){const i=t[e-2],n=t[e-1];s.push(jo[i>>2]+jo[(3&i)<<4|n>>4]+jo[(15&n)<<2]+"=")}return s.join("")}function hv(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/[=]/g,"")}var ov=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"],Qn=ArrayBuffer.isView||(t=>t&&Bc(ov,Gf.call(t)));function lr(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;return L(new x(t),new x(e))}function L(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let i=0;i<t.length;i+=1)if(t[i]!==e[i])return!1;return!0}function ac(t){const e=t.reduce(((t,e)=>t+e.byteLength),0);return av(t,e)}function av(t,e){const i=new x(e);let s=0;for(const e of t)i.set(e,s),s+=e.byteLength;return i}function uv(t,e,i){const s=new x(t.byteLength+e.byteLength),n=eo(t,0,i),r=eo(t,i);return s.set(n),s.set(e,i),s.set(r,i+e.byteLength),s}function hr(t){return Pt(t).buffer}function cv(t){return Oe(new x(t))}function Ur(t){return Oe(Yn(t))}function Y(t,e){const i=e.Au,s=t.getUint8(i>>3),n=1<<7-(7&i);return e.Ey(1),(s&n)===n?1:0}function qo(t,e,i){let s=0;for(let n=0;n<i;n++)s=2*s+Y(t,e);return s}var _r=class t{get Au(){return this.mc}Ey(t){this.mc+=t}gc(t){this.mc=t}Iy(){return new t(this.Au)}constructor(t=0){this.mc=t}};var lv=w.clz32||function(t){let e=32,i=t>>16;return i&&(e-=16,t=i),i=t>>8,i&&(e-=8,t=i),i=t>>4,i&&(e-=4,t=i),i=t>>2,i&&(e-=2,t=i),i=t>>1,i?e-2:e-t},Fu=null;try{Fu=new WebAssembly.Instance(new WebAssembly.Module(new x([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(r){}function it(t,e,i){this.low=0|t,this.high=0|e,this.unsigned=!!i}function ln(t){return!0===(t&&t.Py)}function dv(t){var e=w.clz32(t&-t);return t?31-e:e}it.prototype.Py,g.defineProperty(it.prototype,"Py",{value:!0}),it.isLong=ln;var fv={},_v={};function gv(t,e){var i,s,n;return e?(n=0<=(t>>>=0)&&t<256)&&(s=_v[t])?s:(i=_u(t,0,!0),n&&(_v[t]=i),i):(n=-128<=(t|=0)&&t<128)&&(s=fv[t])?s:(i=_u(t,t<0?-1:0,!1),n&&(fv[t]=i),i)}function Mu(t,e){if(j(t))return e?xo:G;if(e){if(t<0)return xo;if(t>=pv)return kv}else{if(t<=-yv)return Bs;if(t+1>=yv)return Sv}return t<0?Mu(-t,e).neg():_u(t%mv|0,t/mv|0,e)}function _u(t,e,i){return new it(t,e,i)}it.fromInt=gv,it.fromNumber=Mu,it.fromBits=_u;var vv=w.pow;function wv(t,e,i){if(0===t.length)throw v("empty string");if("number"==typeof e?(i=e,e=!1):e=!!e,"NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return e?xo:G;if((i=i||10)<2||36<i)throw RangeError("radix");var s;if((s=t.indexOf("-"))>0)throw v("interior hyphen");if(0===s)return wv(t.substring(1),e,i).neg();for(var n=Mu(vv(i,8)),r=G,h=0;h<t.length;h+=8){var o=w.min(8,t.length-h),a=k(t.substring(h,h+o),i);if(o<8){var u=Mu(vv(i,o));r=r.mul(u).add(Mu(a))}else r=(r=r.mul(n)).add(Mu(a))}return r.unsigned=e,r}function I(t,e){return"number"==typeof t?Mu(t,e):"string"==typeof t?wv(t,e):_u(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}it.fromString=wv,it.fromValue=I;var mv=4294967296,pv=mv*mv,yv=pv/2,Av=gv(1<<24),G=gv(0);it.ZERO=G;var xo=gv(0,!0);it.UZERO=xo;var gr=gv(1);it.ONE=gr;var bv=gv(1,!0);it.UONE=bv;var Tv=gv(-1);it.NEG_ONE=Tv;var Sv=_u(-1,2147483647,!1);it.MAX_VALUE=Sv;var kv=_u(-1,-1,!0);it.MAX_UNSIGNED_VALUE=kv;var Bs=_u(0,-2147483648,!1);it.MIN_VALUE=Bs;var Us=it.prototype;Us.toInt=function(){return this.unsigned?this.low>>>0:this.low},Us.toNumber=function(){return this.unsigned?(this.high>>>0)*mv+(this.low>>>0):this.high*mv+(this.low>>>0)},Us.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Bs)){var e=Mu(t),i=this.div(e),s=i.mul(e).sub(this);return i.toString(t)+s.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var n=Mu(vv(t,6),this.unsigned),r=this,h="";;){var o=r.div(n),a=(r.sub(o.mul(n)).toInt()>>>0).toString(t);if((r=o).isZero())return a+h;for(;a.length<6;)a="0"+a;h=""+a+h}},Us.getHighBits=function(){return this.high},Us.getHighBitsUnsigned=function(){return this.high>>>0},Us.getLowBits=function(){return this.low},Us.getLowBitsUnsigned=function(){return this.low>>>0},Us.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Bs)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},Us.isZero=function(){return 0===this.high&&0===this.low},Us.eqz=Us.isZero,Us.isNegative=function(){return!this.unsigned&&this.high<0},Us.isPositive=function(){return this.unsigned||this.high>=0},Us.isOdd=function(){return 1==(1&this.low)},Us.isEven=function(){return 0==(1&this.low)},Us.equals=function(t){return ln(t)||(t=I(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&(this.high===t.high&&this.low===t.low)},Us.eq=Us.equals,Us.notEquals=function(t){return!this.eq(t)},Us.neq=Us.notEquals,Us.ne=Us.notEquals,Us.lessThan=function(t){return this.comp(t)<0},Us.lt=Us.lessThan,Us.lessThanOrEqual=function(t){return this.comp(t)<=0},Us.lte=Us.lessThanOrEqual,Us.le=Us.lessThanOrEqual,Us.greaterThan=function(t){return this.comp(t)>0},Us.gt=Us.greaterThan,Us.greaterThanOrEqual=function(t){return this.comp(t)>=0},Us.gte=Us.greaterThanOrEqual,Us.ge=Us.greaterThanOrEqual,Us.compare=function(t){if(ln(t)||(t=I(t)),this.eq(t))return 0;var e=this.isNegative(),i=t.isNegative();return e&&!i?-1:!e&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},Us.comp=Us.compare,Us.negate=function(){return!this.unsigned&&this.eq(Bs)?Bs:this.not().add(gr)},Us.neg=Us.negate,Us.add=function(t){ln(t)||(t=I(t));var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=0,u=0,c=0,l=0;return c+=(l+=n+(65535&t.low))>>>16,u+=(c+=s+o)>>>16,a+=(u+=i+h)>>>16,a+=e+r,_u((c&=65535)<<16|(l&=65535),(a&=65535)<<16|(u&=65535),this.unsigned)},Us.subtract=function(t){return ln(t)||(t=I(t)),this.add(t.neg())},Us.sub=Us.subtract,Us.multiply=function(t){if(this.isZero())return this;if(ln(t)||(t=I(t)),Fu)return _u(Fu.mul(this.low,this.high,t.low,t.high),Fu.get_high(),this.unsigned);if(t.isZero())return this.unsigned?xo:G;if(this.eq(Bs))return t.isOdd()?Bs:G;if(t.eq(Bs))return this.isOdd()?Bs:G;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Av)&&t.lt(Av))return Mu(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,i=65535&this.high,s=this.low>>>16,n=65535&this.low,r=t.high>>>16,h=65535&t.high,o=t.low>>>16,a=65535&t.low,u=0,c=0,l=0,d=0;return l+=(d+=n*a)>>>16,c+=(l+=s*a)>>>16,l&=65535,c+=(l+=n*o)>>>16,u+=(c+=i*a)>>>16,c&=65535,u+=(c+=s*o)>>>16,c&=65535,u+=(c+=n*h)>>>16,u+=e*a+i*o+s*h+n*r,_u((l&=65535)<<16|(d&=65535),(u&=65535)<<16|(c&=65535),this.unsigned)},Us.mul=Us.multiply,Us.divide=function(t){if(ln(t)||(t=I(t)),t.isZero())throw v("division by zero");var e,i,s;if(Fu)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?_u((this.unsigned?Fu.div_u:Fu.div_s)(this.low,this.high,t.low,t.high),Fu.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?xo:G;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return xo;if(t.gt(this.shru(1)))return bv;s=xo}else{if(this.eq(Bs))return t.eq(gr)||t.eq(Tv)?Bs:t.eq(Bs)?gr:(e=this.shr(1).div(t).shl(1)).eq(G)?t.isNegative()?gr:Tv:(i=this.sub(t.mul(e)),s=e.add(i.div(t)));if(t.eq(Bs))return this.unsigned?xo:G;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();s=G}for(i=this;i.gte(t);){e=w.max(1,w.floor(i.toNumber()/t.toNumber()));for(var n=w.ceil(w.log(e)/w.LN2),r=n<=48?1:vv(2,n-48),h=Mu(e),o=h.mul(t);o.isNegative()||o.gt(i);)o=(h=Mu(e-=r,this.unsigned)).mul(t);h.isZero()&&(h=gr),s=s.add(h),i=i.sub(o)}return s},Us.div=Us.divide,Us.modulo=function(t){return ln(t)||(t=I(t)),Fu?_u((this.unsigned?Fu.rem_u:Fu.rem_s)(this.low,this.high,t.low,t.high),Fu.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},Us.mod=Us.modulo,Us.rem=Us.modulo,Us.not=function(){return _u(~this.low,~this.high,this.unsigned)},Us.countLeadingZeros=function(){return this.high?w.clz32(this.high):w.clz32(this.low)+32},Us.clz=Us.countLeadingZeros,Us.countTrailingZeros=function(){return this.low?dv(this.low):dv(this.high)+32},Us.ctz=Us.countTrailingZeros,Us.and=function(t){return ln(t)||(t=I(t)),_u(this.low&t.low,this.high&t.high,this.unsigned)},Us.or=function(t){return ln(t)||(t=I(t)),_u(this.low|t.low,this.high|t.high,this.unsigned)},Us.xor=function(t){return ln(t)||(t=I(t)),_u(this.low^t.low,this.high^t.high,this.unsigned)},Us.shiftLeft=function(t){return ln(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?_u(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):_u(0,this.low<<t-32,this.unsigned)},Us.shl=Us.shiftLeft,Us.shiftRight=function(t){return ln(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?_u(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):_u(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},Us.shr=Us.shiftRight,Us.shiftRightUnsigned=function(t){return ln(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?_u(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):_u(32===t?this.high:this.high>>>t-32,0,this.unsigned)},Us.shru=Us.shiftRightUnsigned,Us.shr_u=Us.shiftRightUnsigned,Us.rotateLeft=function(t){var e;return ln(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?_u(this.high,this.low,this.unsigned):t<32?(e=32-t,_u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(e=32-(t-=32),_u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},Us.rotl=Us.rotateLeft,Us.rotateRight=function(t){var e;return ln(t)&&(t=t.toInt()),0==(t&=63)?this:32===t?_u(this.high,this.low,this.unsigned):t<32?(e=32-t,_u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(e=32-(t-=32),_u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},Us.rotr=Us.rotateRight,Us.toSigned=function(){return this.unsigned?_u(this.low,this.high,!1):this},Us.toUnsigned=function(){return this.unsigned?this:_u(this.low,this.high,!0)},Us.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},Us.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},Us.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},it.fromBytes=function(t,e,i){return i?it.fromBytesLE(t,e):it.fromBytesBE(t,e)},it.fromBytesLE=function(t,e){return new it(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},it.fromBytesBE=function(t,e){return new it(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var Te=it;function Ev(t,e){return t.lessThan(e)?t:e}function Iv(t){if(t>=55296&&t<=57343)throw new v("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function Pv(t,e){return t>>e&63|128}function Rv(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(Iv(t),e.push(t>>12&15|224),e.push(Pv(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(Pv(t,12)),e.push(Pv(t,6))),e.push(63&t|128)):e.push(t)}function Cv(t,e){if(e.Au>=t.length)throw new v("Invalid byte index");const i=255&t[e.Au];if(e.Ey(1),128==(192&i))return 63&i;throw new v("Invalid continuation byte")}function xv(t,e){const i=e.Au;if(i>t.length)throw new v("Invalid byte index");if(i===t.length)return!1;const s=255&t[i];if(e.Ey(1),0==(128&s))return s;if(192==(224&s)){const i=(31&s)<<6|Cv(t,e);if(i>=128)return i;throw new v("Invalid continuation byte")}if(224==(240&s)){const i=(15&s)<<12|Cv(t,e)<<6|Cv(t,e);if(i>=2048)return Iv(i),i;throw new v("Invalid continuation byte")}if(240==(248&s)){const i=(7&s)<<18|Cv(t,e)<<12|Cv(t,e)<<6|Cv(t,e);if(i>=65536&&i<=1114111)return i}throw new v("Invalid UTF-8 detected")}var Dv=65279;var Nv=[128,64,32,16,8,4,2,1],Bv=class{Ry(t){return Lv(this.Cy,t)}constructor(t){this.Cy=t}};function Lv(t,e){return(t&e)===e}function Nc(t,e){return Lv(t,Nv[e])}function Go(t,e){const i=t.getUint8(e.Au);return e.Ey(1),i}function Ov(t,e,i){t.setUint8(e.Au,i),e.Ey(1)}function tl(t,e,i){const s=eo(ou(t),e.Au,e.Au+i);return e.Ey(s.byteLength),s}function sc(t,e,i){ou(t).set(ou(i),e.Au),e.Ey(i.byteLength)}function Mv(t,e,i){return e.Au+i<=t.byteLength}function Fv(t,e,i,s){return void 0===s&&(s=!1),s?function(t,e,i){let s=0,n=1;for(let r=0;r<i;r++)s+=Go(t,e)*n,n*=256;return s}(t,e,i):function(t,e,i){let s=0;for(let n=0;n<i;n++)s=256*s+Go(t,e);return s}(t,e,i)}function Qh(t,e,i){void 0===i&&(i=!1);const s=t.getUint16(e.Au,i);return e.Ey(2),s}function Uv(t,e,i,s){void 0===s&&(s=!1),t.setUint16(e.Au,i,s),e.Ey(2)}function As(t,e,i){void 0===i&&(i=!1);const s=t.getUint32(e.Au,i);return e.Ey(4),s}function Uc(t,e,i,s){void 0===s&&(s=!1),t.setUint32(e.Au,i,s),e.Ey(4)}function St(t,e,i){void 0===i&&(i=!1);const s=As(t,e,i),n=As(t,e,i),r=i?n:s,h=i?s:n;return Te.fromBits(h,r,!0)}function Hv(t,e,i,s){void 0===s&&(s=!1);const n=i.getHighBitsUnsigned(),r=i.getLowBitsUnsigned(),h=s?n:r;Uc(t,e,s?r:n,s),Uc(t,e,h,s)}function Vv(t,e){return en(t,e)}function wc(t,e,i){return fg(ew(tl(t,e,i)))}function Wv(t,e){const i=Go(t,e);let s;return 0==(128&i)?s=i:192==(224&i)?s=64*(31&i)+(63&Go(t,e)):224==(240&i)?s=4096*(15&i)+64*(63&Go(t,e))+(63&Go(t,e)):240==(248&i)&&(s=262144*(7&i)+4096*(63&Go(t,e))+64*(63&Go(t,e))+(63&Go(t,e))),s}function en(t,e){return qv(t,e,!0)}function qv(t,e,i){const s=[];for(;e.Au<t.byteLength;){const n=Go(t,e);if(i&&!n)break;s.push(n)}return fg(s)}function zv(t,e,i){const s=i.length;for(let n=0;n<s;n+=1){Ov(t,e,i.charCodeAt(n))}}function Xv(t,e){if(!(e.Au+2<=t.byteLength))return;const i=t.getUint8(e.Au),s=t.getUint8(e.Au+1);return(254!==i||255!==s)&&(255===i&&254===s||void 0)}function Gv(t,e){const i=Xv(t,e);return void 0!==i&&e.Ey(2),Fr(t,e,!0===i)}function Fr(t,e,i){return void 0===i&&(i=!1),Qv(t,e,i,!0)}function Qv(t,e,i,s){const n=[];for(;e.Au+2<=t.byteLength;){const r=Qh(t,e,i);if(s&&!r)break;n.push(r)}return fg(n)}function Kv(t,e,i,s){void 0===s&&(s=!1);const n=i.length;for(let r=0;r<n;r+=1){Uv(t,e,i.charCodeAt(r),s)}}function V(t){return qv(Sa(t),new Ko,!1)}function Yn(t){const e=new x(t.length);return zv(Sa(e),new Ko,t),e}function jv(t,e){return void 0===e&&(e=!1),Qv(Sa(t),new Ko,e,!1)}function Yv(t,e){void 0===e&&(e=!1);const i=new x(2*t.length);return Kv(Sa(i),new Ko,t,e),i}function Zv(t,e){return e.Au+3<=t.byteLength&&(239===t.getUint8(e.Au)&&187===t.getUint8(e.Au+1)&&191===t.getUint8(e.Au+2))}function Cr(t,e){return function(t,e,i){const s=[],n=Zv(t,e);n&&e.Ey(3);for(;e.Au<t.byteLength;){const n=Wv(t,e);if(void 0===n)break;if(i&&0===n)break;s.push(n)}return dg(s)}(t,e,!0)}function Mr(t){return function(t){return dg(t)}(function(t,e){const i=[],s=new Ko;let n;if(!e){if(n=xv(t,s),!1===n)return i;n===Dv||i.push(n)}for(;!1!==(n=xv(t,s));)i.push(n);return i}(ou(t)))}function Jv(t){return new x(function(t){const e=[];for(const i of t)Rv(i,e);return e}(function(t){const e=[];let i=0;const s=t.length;for(;i<s;){const n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){const s=t.charCodeAt(i++);56320==(64512&s)?e.push(((1023&n)<<10)+(1023&s)+65536):(e.push(n),i--)}else e.push(n)}return e}(t)))}function $v(t,e){if(Zv(t,e))return Cr(t,e);if(void 0!==Xv(t,e))return Gv(t,e);if(e.Au+4<=t.byteLength){if(0===t.getUint8(e.Au)&&0===t.getUint8(e.Au+2))return Fr(t,e,!1);if(0===t.getUint8(e.Au+1)&&0===t.getUint8(e.Au+3))return Fr(t,e,!0)}return Cr(t,e)}function eo(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new x(t.buffer,t.byteOffset+e,i-e)}function Li(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function Sa(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ou(t){return new x(t.buffer,t.byteOffset,t.byteLength)}function tw(t){return t instanceof ArrayBuffer||Qn(t)}function Zn(t){return t instanceof ArrayBuffer?new x(t):ou(t)}function Qu(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),t.slice?t.slice(e,i):A(eo(t,e,i))}function A(t){if(t.slice)return t.slice(0);{const e=new x(t.byteLength);return e.set(t,0),e}}function ew(t){return[].slice.call(t)}var Ko=class t{get Au(){return this.mc}Ey(t){this.mc+=t}gc(t){this.mc=t}Iy(){return new t(this.Au)}xy(){return new _r(this.Au<<3)}constructor(t=0){this.mc=t}};function iw(t){let e=t.toLowerCase(),i=0,s=0;Jo(e,"0x")&&(e=e.substring(2));const n=new x(w.ceil(e.length/2));for(1==(1&e.length)&&(i=1,n[s++]=k(e[0],16));i<e.length;i+=2)n[s++]=k(e.substr(i,2),16);return n}var qn=class t{Dy(){return Go(this.Ny,this.By)}Ly(){return Qh(this.Ny,this.By)}Oy(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt16(e.Au,i);return e.Ey(2),s}(this.Ny,this.By)}My(){return As(this.Ny,this.By)}Fy(){return function(t,e,i){void 0===i&&(i=!1);const s=t.getInt32(e.Au,i);return e.Ey(4),s}(this.Ny,this.By)}Uy(){return St(this.Ny,this.By)}Hy(t){return tl(this.Ny,this.By,t)}Vy(t){return function(t,e,i){const s=[];for(let n=0;n<i;n++)s.push(As(t,e));return s}(this.Ny,this.By,t)}Wy(t){return wc(this.Ny,this.By,t)}qy(){return Cr(this.Ny,this.By)}zy(t){this.By.Ey(t)}Iy(){return new t(this.Ny,this.By.Iy())}constructor(t,e){this.Ny=t,this.By=e}};function sw(t,e){return t.Iw===e}function uo(t,e){for(const i of t)if(sw(i,e))return i}var nw=class extends Fe{get name(){return"DataIncompleteError"}constructor(t,e){super(),this.Xy=t,this.Gy=e}},Ro=class t{static Qy(e){const i=e.Ny,s=e.By,n=t.Ky(i,s,!1);if(!n.jy)throw new nw(s.Au,n.m);return n.m}static Ky(e,i,s){const n=[];for(;i.Au<e.byteLength;){const r=t.Yy(e,i,s);if(!r.jy)return{jy:!1,m:n};n.push(r.Zy)}return{jy:!0,m:n}}static Jy(e,i){const s=t.Yy(e,i,!1);if(!s.jy)throw new nw(i.Au);return s.Zy}static $y(e,i){const s=e.Ny,n=e.By;for(;n.Au<s.byteLength;){const e=t.Yy(s,n,!1);if(!e.jy)return;if(e.Zy.Iw===i)return e.Zy}}static Yy(e,i,s){const n=i.Au,r=t.tA(e,i);if(!r.jy)return r;const h=r.eA;let o=h.iA;if(0===o){if(s)return i.gc(n),{jy:!1,sA:1/0};o=e.byteLength-n}const a=n+o;if(a>e.byteLength){const t=a;return i.gc(n),{jy:!1,sA:t}}const u={Iw:h.Iw,Au:n,Ny:new qn(Li(e,n,a),new Ko(h.nA))};return i.gc(a),{jy:!0,Zy:u}}static tA(t,e){const i=e.Au;if(!Mv(t,e,8)){return{jy:!1,sA:e.Au+8}}let s=As(t,e),n=wc(t,e,4);if(1===s){if(!Mv(t,e,8)){const t=e.Au+8;return e.gc(i),{jy:!1,sA:t}}s=St(t,e).toNumber()}if("uuid"===n){if(!Mv(t,e,16)){const t=e.Au+16;return e.gc(i),{jy:!1,sA:t}}n=wc(t,e,16)}return{jy:!0,eA:{Iw:n,iA:s,nA:e.Au-i}}}static rA(t,e,i){const s=t.Ny,n=t.By;let r=eo(ou(s),n.Au,s.byteLength);return i&&(r=A(r)),n.Ey(r.byteLength),{Iw:e,Ny:r}}static hA(e,i,s){const n=e.My(),{version:r,flags:h}=Oc(n);return{Iw:i,oA:r,aA:h,Ny:t.rA(e,i,s).Ny}}};function Na(t,e){const i=ea(t,e);if(!i)throw new v("Missing "+e+" atom");return i}function ea(t,e){for(const i of t)if(i.Iw===e)return i.Ny}function fc(t,e){const i=[];for(const s of t)s.Iw===e&&i.push(s.Ny);return i}function Oc(t){return{version:t>>24,flags:new Bv(16777215&t)}}var Ue=class t{static uA(e){const i=[],s=Ro.Qy(new qn(e,new Ko));for(const e of s){const s=t.cA(e);s&&i.push(s)}return i}static lA(t){return Ro.Ky(t,new Ko,!1).m.some(this.dA)}static fA(e){return fc(Ro.Qy(new qn(e,new Ko)),hs.uy).map(t._A)}static gA(e){return fc(Ro.Qy(e.Ny),hs.uy).map(t._A)}static dA(t){return t.Iw===hs.vy||t.Iw===hs.gy||t.Iw===hs.pp||t.Iw===hs.Yp||t.Iw===hs.oy||t.Iw===hs._y||t.Iw===hs.ly}static cA(e){switch(e.Iw){case hs.pp:return t.vA(e.Ny);case hs.Yp:return t.wA(e.Ny,e.Au);case hs.oy:return t.mA(e.Ny);case hs._y:return t.pA(e.Ny);case hs.ly:return t.yA(e.Ny)}}static vA(e){const i=Ro.Qy(e),s=Na(i,hs.yp),n=fc(i,hs.Ap),r=ea(i,hs.Cp),h=t.AA(s),o=n.map(t.bA),a=r?t.TA(r):void 0;return{Iw:hs.pp,eA:h,Z:o,SA:a}}static AA(t){const e=t.My(),{version:i,flags:s}=Oc(e),n=1===i?t.Uy():t.My(),r=1===i?t.Uy():t.My(),h=t.My(),o=1===i?t.Uy():t.My(),a=t.My(),u=t.Ly()>>8;t.zy(2),t.zy(8);const c=t.Vy(9);t.zy(24);const l=t.My();return{Iw:hs.yp,oA:i,aA:s,kA:n,EA:r,IA:h,ct:o,PA:a,_l:u,RA:c,CA:l}}static bA(e){const i=Ro.Qy(e),s=Na(i,hs.bp),n=Na(i,hs.Tp),r=t.xA(s),h=t.DA(n);return{Iw:hs.Ap,eA:r,NA:h}}static xA(t){const e=t.My(),{version:i,flags:s}=Oc(e),n=1===i?t.Uy():t.My(),r=1===i?t.Uy():t.My(),h=t.My();t.zy(4);const o=1===i?t.Uy():t.My();t.zy(8);const a=t.Oy(),u=t.Oy(),c=t.Oy()/256;t.zy(2);const l=t.Vy(9),d=t.My()/65536,f=t.My()/65536;return{Iw:hs.bp,BA:s.Ry(1),LA:s.Ry(2),OA:s.Ry(4),kA:n,EA:r,MA:h,ct:o,FA:a,UA:u,_l:c,RA:l,Ti:d,Ci:f}}static DA(e){const i=Ro.Qy(e),s=Na(i,hs.Sp),n=Na(i,hs.kp),r=Na(i,hs.Ep),h=t.HA(s),o=t.VA(n),a=t.WA(r);return{Iw:hs.Tp,eA:h,qA:o,zA:a}}static HA(t){const e=t.My(),{version:i,flags:s}=Oc(e),n=1===i?t.Uy():t.My(),r=1===i?t.Uy():t.My(),h=t.My(),o=1===i?t.Uy():t.My();t.Ly();return t.zy(2),{Iw:hs.Sp,oA:i,aA:s,kA:n,EA:r,IA:h,ct:o}}static VA(t){const e=t.My(),{version:i,flags:s}=Oc(e);t.zy(4);const n=t.Wy(4);t.zy(12);const r=t.qy();return{Iw:hs.kp,oA:i,aA:s,XA:n,l:r}}static WA(e){const i=Na(Ro.Qy(e),hs.Ip),s=t.GA(i);return{Iw:hs.Ep,QA:s}}static GA(e){const i=Na(Ro.Qy(e),hs.Pp),s=t.KA(i);return{Iw:hs.Ip,jA:s}}static KA(e){const i=e.My(),{version:s,flags:n}=Oc(i),r=(e.My(),[]),h=Ro.Qy(e);for(const e of h){const i=t.YA(e.Ny,e.Iw);i&&r.push(i)}return{Iw:hs.Pp,oA:s,aA:n,ZA:r}}static YA(e,i){let s=t.JA(e,i);return s||(s=t.$A(e,i),s||(i===hs.Xp?t.eb(e):void 0))}static JA(e,i){return i===hs.qp?t.ib(e):i===hs.Kp?t.sb(e):void 0}static $A(e,i){return i===hs.Dp?t.hb(e):i===hs.Bp||i===hs.Lp?t.ob(e,i):i===hs.Mp?t.ub(e,i):i===hs.Up?t.cb(e,i):i===hs.jp?t.fb(e):void 0}static _b(t,e){t.zy(6);return{Iw:e,gb:t.Ly()}}static vb(e,i){const s=t._b(e,i);e.zy(8);const n=e.Ly(),r=e.Ly();e.zy(2),e.zy(2);return Me({},s,{wb:n,mb:r,pb:e.My()>>>16})}static yb(e,i){const s=t._b(e,i);e.zy(2),e.zy(2),e.zy(12);const n=e.Ly(),r=e.Ly(),h=e.My(),o=e.My();e.zy(4);const a=e.Ly();e.zy(32);const u=e.Ly();return e.zy(2),Me({},s,{Ti:n,Ci:r,Ab:h,bb:o,Tb:a,Sb:u})}static ib(e){const i=t.vb(e,hs.qp),s=Na(Ro.Qy(e),hs.zp);return Me({},i,{kb:t.Eb(s)})}static eb(e){const i=t._b(e,hs.Xp),s=Ro.Qy(e),n=Na(s,hs.Gp),r=t.Ib(n),h=ea(s,hs.Qp);return Me({},i,{Pb:r,Rb:h?t.Cb(h):h})}static Ib(t){return{Iw:hs.Gp,xb:t.qy()}}static Cb(t){return{Iw:hs.Qp,_h:t.qy()}}static Eb(t){return Ro.hA(t,hs.zp,!0)}static hb(e){const i=t.yb(e,hs.Dp),s=Ro.Qy(e),n=Na(s,hs.Np),r=ea(s,hs.Wp);return Me({},i,{Db:t.Nb(n),Bb:r?t.Lb(r):void 0})}static ob(e,i){const s=t.yb(e,i),n=Na(Ro.Qy(e),hs.Op);return Me({},s,{Ob:t.Mb(n)})}static ub(e,i){const s=t.yb(e,i),n=Na(Ro.Qy(e),hs.Fp);return Me({},s,{Fb:t.Ub(n)})}static cb(e,i){const s=t.yb(e,i),n=Ro.Qy(e),r=Na(n,hs.Hp),h=t.Hb(r),o=ea(n,hs.Vp);return Me({},s,{Vb:h,Wb:o?t.qb(o):void 0})}static fb(e){const i=e.Iy(),s=t.yb(e,hs.jp),n=Na(Ro.Qy(e),hs.wy),r=t.zb(n);return Me({},s,{Xb:t.$A(i,r.Qb.Gb),Kb:r})}static sb(e){const i=e.Iy(),s=t.vb(e,hs.Kp),n=Na(Ro.Qy(e),hs.wy),r=t.zb(n);return Me({},s,{Xb:t.JA(i,r.Qb.Gb),Kb:r})}static zb(e){const i=Na(Ro.Qy(e),hs.py),s=t.jb(i);return{Iw:hs.wy,Qb:s}}static jb(t){const e=t.Wy(4);return{Iw:hs.py,Gb:e}}static Nb(t){return Ro.rA(t,hs.Np,!0)}static Mb(t){return Ro.rA(t,hs.Op,!0)}static Ub(t){return Ro.rA(t,hs.Fp,!0)}static Hb(t){return Ro.rA(t,hs.Hp,!0)}static qb(t){const e=t.Wy(4);switch(e){case"nclx":return{Yb:un.ON_SCREEN_COLOURS,Zb:t.Ly(),Jb:t.Ly(),$b:t.Ly(),tT:0!=(128&t.Dy())};case"rICC":return{Yb:un.RESTRICTED_ICC_PROFILE};case"prof":return{Yb:un.UNRESTRICED_ICC_PROFILE};default:throw v("Could not parse ColourInformationBox: unknown type '"+e+"'.")}}static Lb(t){const e=t.My(),i=t.My();return{Iw:hs.Wp,eT:e,iT:i}}static TA(e){const i=fc(Ro.Qy(e),hs.xp).map(t.sT);return{Iw:hs.Cp,Z:i}}static sT(t){const e=t.My(),{version:i,flags:s}=Oc(e),n=t.My(),r=t.My(),h=t.My(),o=t.My(),a=t.My();return{Iw:hs.xp,oA:i,aA:s,MA:n,nT:r,rT:h,hT:o,oT:a}}static wA(e,i){const s=Ro.Qy(e),n=Na(s,hs.Zp),r=fc(s,hs.Jp),h=t.aT(n),o=r.map(t.uT);return{Iw:hs.Yp,cT:i,eA:h,Z:o}}static aT(t){const e=t.My(),{version:i,flags:s}=Oc(e),n=t.My();return{Iw:hs.Zp,oA:i,aA:s,lT:n}}static uT(e){const i=Ro.Qy(e),s=Na(i,hs.$p),n=fc(i,hs.ey),r=ea(i,hs.iy),h=t.dT(s),o=n.map((e=>t.fT(e,h))),a=r?t._T(r):void 0;return{Iw:hs.Jp,eA:h,gT:o,vT:a}}static dT(t){const e=t.My(),{version:i,flags:s}=Oc(e),n=t.My(),r=s.Ry(hu.BASE_DATA_OFFSET_PRESENT)?t.Uy():void 0,h=s.Ry(hu.SAMPLE_DESCRIPTION_INDEX_PRESENT)?t.My():void 0,o=s.Ry(hu.DEFAULT_SAMPLE_DURATION_PRESENT)?t.My():void 0,a=s.Ry(hu.DEFAULT_SAMPLE_SIZE_PRESENT)?t.My():void 0,u=s.Ry(hu.DEFAULT_SAMPLE_FLAGS_PRESENT)?t.My():void 0;return{Iw:hs.$p,oA:i,aA:s,MA:n,wT:r,mT:h,rT:o,hT:a,oT:u}}static fT(e,i){const s=e.My(),{version:n,flags:r}=Oc(s),h=e.My(),o=r.Ry(O.DATA_OFFSET_PRESENT)?e.Fy():void 0,a=r.Ry(O.FIRST_SAMPLE_FLAGS_PRESENT)?e.My():void 0,u=[];for(let s=0;s<h;s++){const h=t.pT(e,r,n,i);0===s&&void 0!==a&&(h.aA=a),u.push(h)}return{Iw:hs.ey,oA:n,aA:r,yT:h,cT:o,AT:a,bT:u}}static pT(t,e,i,s){return{ct:e.Ry(O.SAMPLE_DURATION_PRESENT)?t.My():s.rT,iA:e.Ry(O.SAMPLE_SIZE_PRESENT)?t.My():s.hT,aA:e.Ry(O.SAMPLE_FLAGS_PRESENT)?t.My():s.oT,TT:e.Ry(O.SAMPLE_COMPOSITION_TIME_OFFSET_PRESENT)?0===i?t.My():t.Fy():void 0}}static yA(t){const e=t.Ny,i=t.By,s=As(e,i),{version:n,flags:r}=Oc(s);if(1===n){const t=As(e,i),s=St(e,i),h=As(e,i),o=As(e,i),a=Vv(e,i),u=Vv(e,i),c=Qu(ou(e),i.Au,e.byteLength);return i.Ey(c.byteLength),{Iw:hs.ly,oA:n,aA:r,ST:a,kT:u,IA:t,ET:s,IT:h,o:o,PT:c}}{const t=Vv(e,i),s=Vv(e,i),h=As(e,i),o=As(e,i),a=As(e,i),u=As(e,i),c=Qu(ou(e),i.Au,e.byteLength);return i.Ey(c.byteLength),{Iw:hs.ly,aA:r,oA:n,ST:t,kT:s,IA:h,RT:o,IT:a,o:u,PT:c}}}static mA(t){return Ro.rA(t,hs.oy,!1)}static _A(e){const i=e.Ny,s=e.By,n=A(ou(i)).buffer,r=As(i,s),{version:h,flags:o}=Oc(r),a=t.CT(i,s),u=[];if(h>0){const t=As(i,s);for(let e=0;e<t;e++){const t=tl(i,s,16);u.push(t)}}const c=As(i,s),l=new x(n,s.Au,c);return s.Ey(i.byteLength),{Iw:hs.uy,oA:h,aA:o,xT:a,DT:u,NT:c,Ny:l,BT:n}}static CT(t,e){let i="";for(let s=0;s<4;s++){const s=Go(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=Go(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=Go(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<2;s++){const s=Go(t,e).toString(16);i+=1===s.length?"0"+s:s}i+="-";for(let s=0;s<6;s++){const s=Go(t,e).toString(16);i+=1===s.length?"0"+s:s}return i.toLowerCase()}static pA(t){const e=t.Ny,i=t.By,s=As(e,i),{version:n,flags:r}=Oc(s),h=As(e,i),o=As(e,i);let a,u;0===n?(a=Te.fromBits(As(e,i),0,!0),u=Te.fromBits(As(e,i),0,!0)):(a=St(e,i),u=St(e,i)),i.Ey(2);const c=Qh(e,i),l=[];for(let t=0;t<c;t+=1){const t=As(e,i),s=t>>31&1,n=2147483647&t,r=As(e,i),h=As(e,i),o=h>>31&1,a=h>>28&7,u=268435455&h;l.push({LT:s,OT:n,ct:r,MT:o,FT:a,UT:u})}return{Iw:hs._y,oA:n,aA:r,HT:h,IA:o,VT:a,WT:u,qT:c,zT:l}}static _T(t){const e=t.Ny,i=t.By,s=As(e,i),{version:n,flags:r}=Oc(s);let h;return h=0===n?Te.fromBits(As(e,i),0,!0):St(e,i),{Iw:hs.iy,oA:n,aA:r,vT:h}}},rw={playready:"https://pr-keyos.licensekeyserver.com/core/rightsmanager.asmx",widevine:"https://wv-keyos.licensekeyserver.com/",fairplay:"https://fp-keyos.licensekeyserver.com/getkey"};function hw(t){if(!t)return!0;const e=t.licenseAcquisitionURL,i=t.certificateURL,s=t.keys,n=t.headers,r=t.useCredentials,h=t.queryParameters;return!(e||i||s||n||r||h)}function ow(t){return t&&void 0!==t.licenseAcquisitionURL}var aw,Di,Ts,uw,cw,lw,Ca,dw,fw=ow,_w=ow;function gw(t){if(!t)return!0;if(ww(t))return!1;const e=t.fairplay,i=t.playready,s=t.widevine,n=t.clearkey,r=t.aes128;return hw(e)&&hw(i)&&hw(s)&&void 0===n&&hw(r)}function vw(t){const e=Hg(t),i=function(t){var e;const i=t;return Ug(i)&&""!==(null==(e=i.fairplay)?void 0:e.headers.PreAuthorization)&&!Fg(i)}(t);return(!e||!i)&&(e||i)}function Co(t){return t.integration===Ig}function Nr(t){const e=t;if(!e)return!1;if(gw(e))return!1;const i=e.fairplay,s=e.playready,n=e.widevine,r=e.clearkey;if(ww(t))return!0;if(i&&!function(t){const e=t;return e&&(void 0!==e.certificateURL||void 0!==e.certificate)}(i))return!1;if(s&&!fw(s))return!1;if(n&&!_w(n))return!1;if(r&&!function(t){return void 0!==t}(r))return!1;if(e.integration){if(Gc.mp.gp(e.integration))return!0;switch(e.integration){case eh:if(!function(t){const e=t,i=e.integration===eh;return i&&(mw(t)||pw(t))}(t))return!1;break;case Hu:if(!yw(t))return!1;break;case Pg:if(!function(t){const e=t;return e.integration===Pg}(t))return!1;break;case Ig:if(!Co(t))return!1;break;case Tr:if(!vw(t))return!1;break;case Eg:if(!function(t){const e=t;return e.integration===Eg}(t))return!1;break;case wo:if(!ww(t))return!1;break;case Rg:if(!function(t){const e=t;return e.integration===Rg&&(void 0!==e.token||function(t){return void 0!==t.merchant&&void 0!==t.sessionId&&void 0!==t.userId}(e))}(t))return!1;break;case Cg:if(!function(t){const e=t;return e.integration===Cg}(t))return!1;break;case Dg:if(!Aw(t))return!1;break;case Ng:if(!function(t){return t.integration===Ng}(t))return!1;break;case Bg:if(!bw(t))return!1;break;case xg:if(!function(t){const e=t;return e.integration===xg&&void 0!==e.token}(t))return!1;break;case Lg:if(!function(t){const e=t;return e.integration===Lg}(t))return!1;break;case Og:if(!function(t){const e=t;return e&&Qf(e.releasePid)&&Qf(e.accountId)&&Qf(e.token)}(t))return!1;break;case Mg:return!0;default:return!1}}return!0}function ww(t){return t.integration===wo}function mw(t){return void 0!==t.authToken}function pw(t){const e=t;return void 0!==e.accountName&&void 0!==e.customerName&&void 0!==e.portalId}function yw(t){const e=t;return e.integration===Hu&&void 0!==e.token}function Aw(t){const e=t;return e&&e.integration===Dg&&mh(e.ticketAcquisitionURL)&&mh(e.streamId)}function bw(t){const e=t;return e.integration===Bg&&void 0!==e.token}function Tw(t,e){const i=e[t];var s;const n=null!=(s=null==i?void 0:i.licenseAcquisitionURL)?s:rw[t];var r;const h=null!=(r=null==i?void 0:i.customdata)?r:e.customdata,o=h?{customData:h}:{};var a;const u=Me({},null!=(a=null==i?void 0:i.headers)?a:{},o),c=null!=i?i:{},{customdata:l}=c,d=function(t,e){if(null==t)return{};var i,s,n={},r=g.keys(t);for(s=0;s<r.length;s++)i=r[s],e.indexOf(i)>=0||(n[i]=t[i]);return n}(c,["customdata"]);return Me({},d,{licenseAcquisitionURL:n,headers:u})}function Sw(t){switch(t.toLowerCase()){case"widevine":case Du:return Du;case"playready":case Wi:return Wi;case"fairplay":case ns:return ns}}function kw(t,e){switch(t){case Sr:return function(t){const e={},i=Ue.fA(new DataView(t));for(const t of i)e[t.xT]=t.BT;return e}(e);case Xg:case rc:return function(t){return{[Zg]:t}}(e);default:throw new jr(n.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Unsupported initDataType "+t)}}function Ew(t,e,i){const s=function(t,e,i){var s;const{useCredentials:n,crossOrigin:r}=function(t,e){let i=ya.Hm;return t.useCredentials?i=ya.Wm:t.crossOrigin&&(i=Fw(t.crossOrigin)),i===ya.Hm&&e&&e.vr&&e.vr[360]&&(i=ya.Vm),{useCredentials:i===ya.Wm,crossOrigin:i}}(t,e);let h=t.liveOffset;Qf(h)||(h=i&&Qf(i.liveOffset)?i.liveOffset:void 0);let o=t.timeServer;Qf(o)||(o=e&&Qf(e.timeServer)?e.timeServer:void 0);let a=t.hlsDateRange;Qf(a)||(a=i&&Qf(i.hlsDateRange)?Boolean(i.hlsDateRange):void 0);const u=Boolean(t.experimentalRendering),c=Boolean(t.nativeUiRendering),l=Boolean(t.lowLatency),d=Boolean(t.useNativePlayback),f=Boolean(t.useManagedMediaSource),_=Qf(t.dash)?Pw(t.dash):void 0,g=Qf(t.hls)?Rw(t.hls):void 0,v=xw(Ir(t.abr),null==i?void 0:i.abr),w=bu(t.lcevc),m=Qf(t.ignoreEmbeddedTextTrackTypes)?Yw(t.ignoreEmbeddedTextTrackTypes):[];var p;const y=Lw(null!=(p=t.seamlessSwitchStrategy)?p:null==(s=t.dash)?void 0:s.useSeamlessPeriodSwitch);return{crossOrigin:r,useCredentials:n,liveOffset:h,timeServer:o,hlsDateRange:a,experimentalRendering:u,nativeUiRendering:c,lowLatency:l,useNativePlayback:d,useManagedMediaSource:f,dash:_,hls:g,abr:v,lcevc:w,ignoreEmbeddedTextTrackTypes:m,seamlessSwitchStrategy:y}}(t,e,i),n=cr(t.src);let r=t.type;r||(r=t.src?Mw(t.src):void 0);const h=function(t,e){let i;i=Qf(t.contentProtection)?t.contentProtection:Qf(t.drm)?t.drm:Qf(e)&&Qf(e.contentProtection)?e.contentProtection:Qf(e)&&Qf(e.drm)?e.drm:void 0;return Iw(i)}(t,e);return Me({},s,{src:n,type:r,contentProtection:h,ssai:Qf(t.ssai)?kg(t.ssai):void 0,integrationData:void 0,isAdvertisement:Boolean(t.isAdvertisement)})}function Iw(t){return Nr(t)&&t.integration&&t.integration===wo?function(t){const e=Tw(Js.Ym,t),i=Tw(Js.jm,t),s=t[Js.Zm]&&Tw(Js.Zm,t);return Me({integration:"keyos",widevine:e,playready:i},s?{fairplay:s}:{})}(t):t}function Pw(t){return{useSeamlessPeriodSwitch:Lw(null==t?void 0:t.useSeamlessPeriodSwitch),needsTimescaleShifting:bu(null==t?void 0:t.needsTimescaleShifting),desiredTimescale:void 0!==(null==t?void 0:t.desiredTimescale)?Mt(null==t?void 0:t.desiredTimescale):void 0,forceSeekToSynchronize:bu(null==t?void 0:t.forceSeekToSynchronize),ignoreAvailabilityWindow:bu(null==t?void 0:t.ignoreAvailabilityWindow),forceHardSwitchWhenSeekingBackwards:bu(null==t?void 0:t.forceHardSwitchWhenSeekingBackwards)}}function Rw(t){return{discontinuityAlignment:Cw(null==t?void 0:t.discontinuityAlignment)}}function Cw(t){if(!t||!mh(t))return"auto";switch(t){case"playlist":return"playlist";case"media":return"media";default:return"auto"}}function Ir(t){if(!Qf(t))return;return Dw(V_(null==t?void 0:t.preferredAudioCodecs,Oi),V_(null==t?void 0:t.preferredVideoCodecs,Oi),bu(null==t?void 0:t.restrictToPlayerSize))}function xw(t,e){if(!Qf(t)&&!Qf(e))return;var i;return Dw(Nw(null==t?void 0:t.preferredAudioCodecs,null==e?void 0:e.preferredAudioCodecs),Nw(null==t?void 0:t.preferredVideoCodecs,null==e?void 0:e.preferredVideoCodecs),null!=(i=null==t?void 0:t.restrictToPlayerSize)?i:null==e?void 0:e.restrictToPlayerSize)}function Dw(t,e,i){if(0!==t.length||0!==e.length||void 0!==i)return{preferredAudioCodecs:0===t.length?void 0:t,preferredVideoCodecs:0===e.length?void 0:e,restrictToPlayerSize:i}}function Nw(t,e){return void 0!==t&&(null==t?void 0:t.length)>0?t:null!=e?e:[]}function Bw(t,e){if(void 0!==e)switch(t){case Di.vl:return e.preferredVideoCodecs;case Di.yy:return e.preferredAudioCodecs;default:return}}function Lw(t){if(!t||!mh(t))return"auto";switch(t){case"always":return"always";case"never":return"never";case"clear-only":return"clear-only";case"same-drm-only":return"same-drm-only";default:return"auto"}}function Er(t){switch(t){case"":case"srt":case"ttml":case"webvtt":case"emsg":case"eventstream":case"id3":case"cea608":case"daterange":return!0;default:return!1}}function Ow(t){return!!t&&Po(t,"mpd")}function Mw(t){let e=ra.Gm;return Ow(t)&&(e=ra.qm),function(t){return!!t&&Po(t,"m3u8")}(t)&&(e=ra.zm),e}function Fw(t){switch(t){case ya.Vm:case ya.Wm:return t;default:return ya.Hm}}function Uw(t){if(!t)return!1;const e=t.toLowerCase();return Jo(e,ra.qm)}function Hw(t){if(!t)return!1;const e=t.toLowerCase();return Jo(e,ra.zm)||Jo(e,ra.Xm)}function Vw(t){return Th(t)&&Th(t.ssai)&&"google-dai"===t.ssai.integration}function Ww(t){return Th(t)&&mh(t.integration)&&"verizon-media"===t.integration}function qw(t){return Th(t)&&mh(t.integration)&&"mediatailor"===t.integration}function zw(t){if(mh(t))return!t;if(Ww(t))return!t.id;if(Vw(t)){const e=t.ssai,i="live"===e.availabilityType&&e.assetKey,s="vod"===e.availabilityType&&e.contentSourceID&&e.videoID;return Boolean(i&&s)}return!t.src}function ot(t){return Boolean(Th(t)&&mh(t.src))}function Xw(t){return t.type===ra.Qm||t.type===ra.Km}function Vn(t){return mh(t)||ot(t)||Vw(t)||Ww(t)}function ho(t){if(t){if(Vn(t))return zw(t);for(const e of t)if(!zw(e))return!1;return!0}return!0}function Gw(){return{crossOrigin:ya.Hm,useCredentials:!1,liveOffset:void 0,timeServer:void 0,hlsDateRange:void 0,experimentalRendering:!1,nativeUiRendering:!1,lowLatency:!1,useNativePlayback:!1,useManagedMediaSource:!1,dash:void 0,hls:void 0,abr:void 0,lcevc:void 0,ignoreEmbeddedTextTrackTypes:[],seamlessSwitchStrategy:Ts.XT}}function Qw(){return Me({},Gw(),{src:void 0,type:ra.Gm,contentProtection:void 0,ssai:void 0,integrationData:void 0,isAdvertisement:void 0})}function Kw(t){const e={allowedMimeTypes:void 0,preload:"midroll-and-postroll",showCountdown:!0,vpaidMode:cw.ENABLED,googleIma:{useNativeIma:!1,bitrate:-1}};return void 0===t||(void 0!==t.preload&&(e.preload=function(t){return"none"===t?lw.NONE:lw.MIDROLL_AND_POSTROLL}(t.preload)),void 0!==t.showCountdown&&(e.showCountdown=Dc(t.showCountdown)),void 0!==t.vpaidMode&&(e.vpaidMode=function(t){switch(t){case"insecure":return cw.INSECURE;case"disabled":return cw.DISABLED;default:return cw.ENABLED}}(t.vpaidMode)),Os(t.allowedMimeTypes)&&(e.allowedMimeTypes=t.allowedMimeTypes.filter(mh)),void 0!==t.googleIma&&(e.googleIma=function(t){return void 0===t?{useNativeIma:!1,bitrate:-1}:{useNativeIma:Dc(t.useNativeIma),bitrate:null!=(e=t.bitrate)?e:-1};var e}(t.googleIma))),e}function jw(t){if(!yr(t))return[];const e=[];for(const i of t)_i(i)&&e.push(i);return e}function Or(t){return mh(t.src)}function Yw(t){return Os(t)?t.filter(Er):[]}!function(t){t.XT="auto",t.GT="playlist",t.QT="media"}(aw||(aw={})),function(t){t.yy="audio",t.vl="video",t.KT="text",t.jT="image",t.YT="unknown"}(Di||(Di={})),function(t){t.XT="auto",t.ZT="always",t.JT="never",t.CLEAR_ONLY="clear-only",t.SAME_DRM_ONLY="same-drm-only"}(Ts||(Ts={})),function(t){t.VERIZON_MEDIA="verizon-media",t.MEDIATAILOR="mediatailor"}(uw||(uw={})),function(t){t.ENABLED="enabled",t.INSECURE="insecure",t.DISABLED="disabled"}(cw||(cw={})),function(t){t.NONE="none",t.MIDROLL_AND_POSTROLL="midroll-and-postroll"}(lw||(lw={})),function(t){t.DEFAULT="",t.SRT="srt",t.TTML="ttml",t.WEBVTT="webvtt",t.EMSG="emsg",t.EVENT_STREAM="eventstream",t.ID3="id3",t.CEA608="cea608",t.DATE_RANGE="daterange"}(Ca||(Ca={})),function(t){t[t.zl=0]="zl",t[t.Jn=1]="Jn",t[t.Hf=2]="Hf",t[t._f=3]="_f",t[t.Wl=4]="Wl"}(dw||(dw={}));var $a=class extends Xi{constructor(t,e=dw.zl){super(o.jw),this.currentTime=t,this.readyState=e}},mt=class extends Xi{constructor(t){super(o.Ch),this.currentTime=t}},ds=class extends Xi{constructor(t){super(o.Ph),this.currentTime=t}},Si=class extends Xi{constructor(t,e=dw.Jn){super(ee.yl),this.currentTime=t,this.readyState=e}},oa=class extends Xi{constructor(t){super(o.Nf),this.duration=t}},Gs=class extends Xi{constructor(t,e){super(o.Vu),this.currentTime=t,this.playbackRate=e}},hc=class extends Xi{constructor(t,e){super(o.Lu),this.currentTime=t,this.currentProgramDateTime=e}},ih=class extends Xi{constructor(t){super(o.Pf),this.currentTime=t}},q=class extends Xi{constructor(t,e=dw.Hf){super(ee.gl),this.currentTime=t,this.readyState=e}},T=class extends Xi{constructor(t){super(o.If),this.currentTime=t}},ju=class extends Xi{constructor(t){super(o.Tf),this.currentTime=t}},Eo=class extends Xi{constructor(t,e){super(o.Il),this.currentTime=t,this.volume=e}},Zw=class extends Xi{constructor(t,e=dw._f){super(ee.pl),this.currentTime=t,this.readyState=e}},tt=class extends Xi{constructor(t,e=dw.Wl){super(ee.ml),this.currentTime=t,this.readyState=e}},Qs=class extends Xi{constructor(t,e){super(ee.Bf),this.currentTime=t,this.readyState=e}},Vo=class extends la{get error(){return this.errorObject.message}pa(){return this}constructor(t){super(zn.aa),this.errorObject=t}};async function Xu(t,e,i,s,n){void 0===i&&(i=3),void 0===s&&(s=1e3),void 0===n&&(n=1/0);let r=0;for(;;)try{return await t(e)}catch(t){if(pe(t),r<i){const t=w.min(s*2**r,n);r++,await uc(t,e);continue}throw t}}var Jw,$w={maxRetries:1/0,minimumBackoff:200,maximumBackoff:3e4};function tm(t){switch(t){case"all":case"content":return t;default:return"none"}}function em(t){const e=Ms(t||{});return e.libraryLocation&&(e.libraryLocation=we(e.libraryLocation,!0)),e.isEmbeddable=Boolean(e.isEmbeddable),e.cast=function(t){const e=Tg(t?t.chromecast:void 0),i=function(t){switch(t){case"auto":return"auto";case"manual":default:return"manual";case"disabled":return"disabled"}}(t?t.strategy:void 0);return{chromecast:e,strategy:i}}(e.cast),e.ads=Kw(e.ads),e.analytics=jw(e.analytics),e.mutedAutoplay=tm(e.mutedAutoplay),e.allowNativeFullscreen=Boolean(e.allowNativeFullscreen),e.allowMixedContent=Boolean(e.allowMixedContent),e.persistVolume=Boolean(e.persistVolume),e.liveOffset=function(t){return Number(t)||void 0}(e.liveOffset),e.hlsDateRange=function(t){return Boolean(t)}(e.hlsDateRange),e.retainPlaybackRateOnSourceChange=Boolean(e.retainPlaybackRateOnSourceChange),e.license=function(t){return mh(t)?t:void 0}(e.license),e.licenseUrl=function(t){if(!t)return;try{return we(t)}catch(t){return void Ee.Um("Invalid 'licenseUrl', falling back to default URL")}}(e.licenseUrl),e.vr=function(t){return{useWebXR:Boolean(t&&t.useWebXR)}}(e.vr),e.abr=Ir(e.abr),e.retryConfiguration=function(t){const e=Me({},$w);return void 0!==t&&(void 0!==t.maxRetries&&(e.maxRetries=Number(t.maxRetries)),void 0!==t.minimumBackoff&&(e.minimumBackoff=Number(t.minimumBackoff)),void 0!==t.maximumBackoff&&(e.maximumBackoff=Number(t.maximumBackoff))),e}(e.retryConfiguration),e.hideDeprecationWarnings=Boolean(e.hideDeprecationWarnings),e}function im(t){return{Wu:t.Wu,ct:t.ct,Ic:t.Ic,lt:t.lt,Ec:t.Ec,Xu:t.Xu,Dc:t.Dc,$u:t.$u,Nc:t.Nc,Fc:t.Fc,Xg:t.Xg,Kg:t.Kg,_l:t._l}}function sm(t,e){const i=e._l,s=e.Xu;t._l=i,t.Xu=s}function $r(t,e,i){if(e===i)return;const s=e.Wu,n=e.ct,r=e.Xu,h=e.Dc,o=e.$u,a=e.Nc,u=e.Fc,c=(e.Kg,e.Xg,e._l),l=i.Wu,d=i.ct,f=i.Ic,_=i.Ec,g=i.Xu,v=i.Dc,w=i.$u,m=i.Nc,p=i.Fc,y=(i.Kg,i.Xg,i._l);a!==dw.zl&&t.To(new $a(l,m)),v&&!h?t.To(new mt(l)):!v&&h&&t.To(new ds(l)),m>=dw.Jn&&t.To(new Si(l,m)),d===n||j(d)&&j(n)||t.To(new oa(d)),w!==o&&t.To(new Gs(l,w)),l!==s&&t.To(new hc(l,void 0)),f&&t.To(new ih(l)),m>=dw.Hf&&t.To(new q(l,m)),p&&!u?t.To(new T(l)):!p&&u&&t.To(new ju(l)),y===c&&g===r||t.To(new Eo(l,y)),m>=dw._f&&t.To(new Zw(l,m)),m>=dw.Wl&&t.To(new tt(l,m)),m!==a&&t.To(new Qs(l,m)),_&&t.To(new Vo(_))}!function(t){t.NONE="none",t.ALL="all",t.CONTENT="content"}(Jw||(Jw={}));var nm=class extends Xi{constructor(t){super(o.Qw),this.currentSource=t}},mc=class extends Xi{constructor(){super(o.Zw)}},st=class extends Xi{constructor(){super(o.$w)}},rm=class extends je{rg(){return this.$T}get Tg(){return this.Sg()}Sg(){return this.tS}zg(){return this.xu}Qg(){return this.eS}iS(t){const e=this.hg;if(e===t)return;e.J_(this.Av);const i=im(this),s=this.fg(),n=this.ev(),r=this.rv();this.hg=t,this.$T.$v=t.ht,this.eS.$v=t.rt,this.xu.$v=t.nt,this.tS.$v=t.Tg,void 0!==i&&$r(this,i,this);const h=this.fg();h!==s&&this.To(new nm(h)),this.ev()!==n&&this.To(new mc),this.rv()!==r&&this.To(new st),t.Q_(this.Av)}async bn(){await super.bn(),this.$T.bn(),this.eS.bn(),this.xu.bn(),this.tS.bn()}constructor(t){super(t),this.$T=new Fa,this.eS=new Fa,this.xu=new Yc,this.tS=new Ln,this.$T.$v=t.ht,this.eS.$v=t.rt,this.xu.$v=t.nt,this.tS.$v=t.Tg}};var Mo,hm=class extends rm{Rg(){return function(t){let e=0,i=0,s=0,n=0,r=0,h=0,o=0;for(const a of t)e+=a.sS,i+=a.nS,s+=a.rS,n+=a.hS,r+=a.oS,h+=a.aS.amountOfBufferedAudioSegments,o+=a.aS.amountOfBufferedVideoSegments;return{sS:e,nS:i,rS:s,hS:n,oS:r,aS:{amountOfBufferedAudioSegments:h,amountOfBufferedVideoSegments:o}}}(this.uS.map((t=>t.Pg)))}xl(){return so(this.uS.map((t=>t.xl()))).then(Qo)}ir(){return so(this.uS.map((t=>t.ir()))).then(Qo)}uv(){if(!this.ko){for(const t of this.uS)t.uv();this.ko=!0}}og(){const t=[];for(const e of this.uS)t.push(...e.og());return t}pv(t){let e=!1;for(const i of this.uS)e=i.pv(t)||e;return e}To(t){this.pv(t)||super.To(t)}get $v(){return this.hg}set $v(t){this.iS(t)}cS(t){this.uS.push(t)}lS(t){me(this.uS,t)}iS(t){if(t===this.hg)return;const e=this.hg;e.ov(),super.iS(t),t.hv(e)}wv(){for(const t of this.uS)t.wv()}async bn(){this.Lo(),this.hg.ov();for(const t of this.uS)this.hg!==t&&await t.bn();await super.bn()}constructor(t){super(t),this.uS=[],this.ko=!1,this.ol=!1,this.cS(t)}};!function(t){t[t.ABORTED=1]="ABORTED",t[t.NETWORK=2]="NETWORK",t[t.DECODE=3]="DECODE",t[t.SRC_NOT_SUPPORTED=4]="SRC_NOT_SUPPORTED",t[t.ENCRYPTED=5]="ENCRYPTED",t[t.LICENSE_INVALID=6]="LICENSE_INVALID",t[t.ADVERTISEMENT_ERROR=7]="ADVERTISEMENT_ERROR"}(Mo||(Mo={}));var gs=class extends y_{get name(){return"MediaError"}constructor(t,e,i,s){super(e),this.code=t,this.message=null!=e?e:"Unknown error",this.cause=i,this.systemCode=s,v.captureStackTrace&&v.captureStackTrace(this,this.constructor)}};function om(t){or(t,"MEDIA_ERR_ABORTED",1),or(t,"MEDIA_ERR_NETWORK",2),or(t,"MEDIA_ERR_DECODE",3),or(t,"MEDIA_ERR_SRC_NOT_SUPPORTED",4),or(t,"MEDIA_ERR_ENCRYPTED",5)}function Lt(t){var e,i;return function(t){return t.category===Fc.CONTENT_PROTECTION}(t)?new gs(5,t.message,null==(e=t.cause)?void 0:e.message,t.systemCode):new gs(am(t.code),t.message,null==(i=t.cause)?void 0:i.message)}function am(t){if(t===n.MEDIA_ABORTED)return 1;if(t===n.MANIFEST_LOAD_ERROR||t===n.MEDIA_LOAD_ERROR||t===n.SUBTITLE_LOAD_ERROR)return 2;if(t===n.MEDIA_DECODE_ERROR)return 3;if(t===n.MEDIA_NOT_SUPPORTED)return 4;const e=Fc.fromCode(t);return e===Fc.NETWORK?2:e===Fc.SOURCE?4:e===Fc.LICENSE?6:e===Fc.CONTENT_PROTECTION?5:e===Fc.AD?7:3}function Ar(t){return new jr(um(t.code),t.message,t)}function um(t){switch(t){case 1:return n.MEDIA_ABORTED;case 2:return n.NETWORK_ERROR;case 3:return n.MEDIA_DECODE_ERROR;case 4:return n.SOURCE_NOT_SUPPORTED;case 5:return n.CONTENT_PROTECTION_ERROR;case 6:return n.LICENSE_ERROR;case 7:return n.AD_ERROR}}om(gs),om(gs.prototype);var mi=class extends P{tt(t){return super.tt(t)}pa(){return Q_(this)}};var Ua=class{get Kv(){return this.dS}get U(){return this.dS.length}get ma(){return this.Gu||(this.Gu=function(t){const e=t.Kv.map((t=>t.ma));return e.item=e=>{const i=0|e,s=t.Zv(i);return s&&s.ma||void 0},e}(this)),this.Gu}fS(t){this.dS.push(t),this.Gu&&this.Gu.push(t.ma)}Qu(t){me(this.dS,t),this.Gu&&me(this.Gu,t.ma)}Zv(t){return this.dS[t]}_S(t){return Os(t)?function(t,e){for(const i of e)if(!Bc(t,i))return!1;return!0}(this.dS,t):Bc(this.dS,t)}ir(){Ce(this.dS),this.Gu&&Ce(this.Gu)}constructor(){this.dS=[],this.Gu=void 0}},xa=class extends Oo{pa(){return new cm(this.Ht.ma)}constructor(t){super(ze.qv),this.Ht=t}},cm=class extends cn{constructor(t){super("update"),this.track=t}},lm=0;function vs(){return lm++}var dm=0;var fm=0;function _m(){return fm++}var gm=0;function vm(){return gm++}var wm=0;var mm=class extends Et{get uw(){}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.gS=t,this.To(new In(this)))}get gS(){return this.vS.enabled}set gS(t){this.vS.enabled=t}get ma(){return this.Gu||(this.Gu=Kt(this)),this.Gu}get o(){return this.wS}get cw(){return this.mS}get Lt(){return this.vS.kind}get _h(){return this.Yu}set _h(t){t!==this.Yu&&(this.Yu=t,this.To(new xa(this)))}get gs(){return this.vS.language}get bw(){return this.Rt?"enabled":"disabled"}get pS(){return this.vS}get dw(){return this.dS}get fw(){}set fw(t){}yS(t){this.Rt=t}AS(){this.Rt=this.gS}constructor(t){super(),this.Iw=Di.yy,this.We=!1,this.Gu=void 0,this.vS=t,this.mS=vs(),this.wS=wm+++"",this.Yu=t.label,this.dS=new Ua,this.AS()}},pm=0;var mn,Pr,ym=class extends Et{get uw(){}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.gS=t,this.To(new In(this)))}get gS(){return!!this.vS.selected}set gS(t){this.vS.selected=t}get ma(){return this.Gu||(this.Gu=Kt(this)),this.Gu}get o(){return this.wS}get cw(){return this.mS}get Lt(){return"main"}get _h(){return this.Yu}set _h(t){t!==this.Yu&&(this.Yu=t,this.To(new xa(this)))}get gs(){return this.vS.language}get bw(){return this.Rt?"enabled":"disabled"}get pS(){return this.vS}get dw(){return this.dS}get fw(){}set fw(t){}AS(){this.Rt=this.gS}yS(t){this.Rt=t}constructor(t){super(),this.Iw=Di.vl,this.We=!1,this.Gu=void 0,this.vS=t,this.mS=vs(),this.wS=pm+++"",this.dS=new Ua,this.Yu=t.label,this.AS()}},Am=class extends Xi{constructor(t){super(o.Vw),this.Eg=t}};!function(t){t[t.NONE=0]="NONE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t[t.ERROR=3]="ERROR"}(mn||(mn={})),function(t){t.bS="cue",t.TS="region",t.SS="stylesheet"}(Pr||(Pr={}));var to,bm={"line-left":"start",center:"middle","line-right":"end"},Tm={start:"line-left",middle:"center",end:"line-right"};function Sm(t,e){if("auto"===t)switch(e){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}return t}function km(t,e){if("auto"===t)switch(e){case"left":return 0;case"right":return 100;default:return 50}return function(t,e){const i="number"==typeof t?t:_(t);return j(i)?e:i}(t,50)}!function(t){t.kS="bo",t.ES="Co",t.qv="Kn"}(to||(to={}));var Qr=class extends Oo{constructor(t,e){super(t),this.IS=e}},qr=class extends cn{constructor(t,e){super(t),this.cue=e}};function dn(t){const e=[to.kS,to.ES,to.qv];let i;const s={get track(){return t.Ht.ma},get id(){return t.o},get uid(){return t.cw},get startTime(){return t.PS},set startTime(e){t.PS=e},get endTime(){return t.RS},set endTime(e){t.RS=e},get content(){return t.O},addEventListener(t,e){const s=ku(t,Oi);i.wn(s,e)},removeEventListener(t,e){const s=ku(t,Oi);i.pn(s,e)}};return i=new pu(s),t.wn(e,(t=>i.To(t.ma))),s}function Em(){}function Im(t){return oe(dn(t),{get align(){return t.CS},get line(){return t.xS},get lineAlign(){return t.DS},get position(){return t.yo},get positionAlign(){return t.NS},get region(){return t.LS?t.LS.ma:null},get size(){return t.iA},get snapToLines(){return t.OS},get text(){return t.O},get vertical(){return t.Mt}})}var nr=class extends Qr{pa(){return new Pm(this.IS.ma)}constructor(t){super(to.qv,t)}},Pm=class extends qr{constructor(t){super("update",t)}},Rm=class extends Oo{pa(){return new Cm(this.IS.ma)}constructor(t){super(ze.xv),this.IS=t}},Cm=class extends cn{constructor(t){super("updatecue"),this.cue=t}},Wc=.02;function xm(t,e){return au(t.MS,e.MS,Wc)&&au(t.FS,e.FS,Wc)&&t.o===e.o}var Da=class extends Et{get PS(){return this.US}set PS(t){var e,i;this.US!==t&&(this.US=t,null==(e=this.HS)||e.VS(this),this.To(new nr(this)),null==(i=this.HS)||i.To(new Rm(this)))}get RS(){return this.WS}set RS(t){var e,i;this.WS!==t&&(this.WS=t,null==(e=this.HS)||e.VS(this),this.To(new nr(this)),null==(i=this.HS)||i.To(new Rm(this)))}get o(){return this.wS}get cw(){return this.mS}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}pa(){return dn(this)}get oo(){return this.ao}set oo(t){this.ao=t}get Ht(){return this.HS}set Ht(t){this.HS=t}get O(){return this.qS}set O(t){var e;this.qS!==t&&(this.qS=t,this.To(new nr(this)),null==(e=this.HS)||e.To(new Rm(this)))}get zS(){return this.XS}set zS(t){this.XS=t}GS(t){return this===t||F_(this,t)&&xm(this,t)&&this.QS(t)}QS(t){return Ne(this.O,t.O)}KS(t,e){this.US=t,this.WS=e,this.MS=t,this.FS=e}bn(){this.Lo()}constructor(t,e,i,s,n){super(),this.Gu=void 0,this.HS=void 0,this.ao=!1,this.jS=-1,this.mS=vm(),this.US=t,this.WS=e,this.MS=t,this.FS=e,this.qS=i,this.XS=Boolean(s),this.wS=null!=n?n:""}};function Dm(t,e){return t.O===e.O&&t.xS===e.xS&&t.DS===e.DS&&t.yo===e.yo&&t.NS===e.NS&&t.LS===e.LS&&t.OS===e.OS&&t.iA===e.iA&&t.CS===e.CS&&t.Mt===e.Mt}var Vr=class extends Da{get ma(){return this.Gu||(this.Gu=Im(this)),this.Gu}get Iw(){return Pr.bS}QS(t){return Dm(this,t)}constructor(t,e,i,s,n){super(t,e,i,s,n),this.xS="auto",this.DS="start",this.yo="auto",this.NS="auto",this.LS=void 0,this.OS=!0,this.iA=100,this.CS="center",this.Mt=""}};function Rr(t){const e=t.xS,i=zu(e);return i&&!t.OS&&(e<0||e>100)?100:i?Number(e):t.OS?-1:100}function Nm(t){return km(t.yo,t.CS)}function Bm(t){return Sm(t.NS,t.CS)}function Lm(t){const e=Bm(t),i=Nm(t);let s;switch(e){case"line-left":s=100-i;break;case"line-right":s=i;break;case"center":s=i<=50?2*i:2*(100-i)}return w.min(t.iA,s)}function Om(t){return{get id(){return t.o},get identifier(){return t.o},get lines(){return t.YS},get regionAnchorX(){return t.ZS},get regionAnchorY(){return t.JS},get scrollValue(){return t.$S},get viewportAnchorX(){return t.ek},get viewportAnchorY(){return t.nk},get width(){return t.Ti}}}var Mm=class{get ma(){return this.Gu||(this.Gu=Om(this)),this.Gu}get Iw(){return Pr.TS}constructor(t,e,i,s,n,r,h,o){this.o=t,this.Ti=e,this.YS=i,this.ZS=s,this.JS=n,this.ek=r,this.nk=h,this.$S=o}},Ji=1e6,Dr=class{rk(t){return this.hk()*t}ck(t){return this.lk(t)>0}dk(t){return this.lk(t)>=0}fk(t,e){return this.gk(t)._k(e)}GS(t){return 0===this.lk(t)}vk(t){return this.lk(t)<0}_k(t){return this.lk(t)<=0}wk(){return this.pk()?this.yk():this}Ak(t){return this.fS(t.yk())}gk(t){return this.Ak(t).wk()}};function Fm(t,e){return t.bk()?e.bk()?Bt.ih:Bt.b_:e.bk()?Bt.T_:t.Tk()?e.Tk()&&t.pk()===e.pk()?Bt.ih:t.pk()?Bt.T_:Bt.b_:e.pk()?Bt.b_:Bt.T_}var Um=4294967296,Hm=Um*Um,Vm=Hm*Hm,Wm=Vm/2,zi=class t{static Sk(e,i,s){return s?new t(e.toUnsigned(),i.toUnsigned()):new t(e.toSigned(),i.toSigned())}static Ek(e){return e.unsigned?new t(e,Te.UZERO):new t(e,e.isNegative()?Te.NEG_ONE:Te.ZERO)}static Ik(e,i){if(j(e))return i?t.Pk:t.Rk;if(i){if(e<0)return t.Pk;if(e>=Vm)return t.Ck}else{if(e<=-Wm)return t.xk;if(e+1>=Wm)return t.Dk}return e<0?t.Ik(-e,i).yk():t.Sk(Te.fromNumber(e%Hm),Te.fromNumber(e/Hm),i)}Nk(){return this.Bk.unsigned}Lk(){return this.Ok.isZero()&&this.Bk.isZero()}pk(){return this.Bk.isNegative()}Mk(){return this.Nk()?t.Sk(this.Ok,this.Bk,!1):this}Fk(){return this.Nk()?this:t.Sk(this.Ok,this.Bk,!0)}Uk(){return this.Ok}hk(){return this.pk()?-this.yk().hk():this.Bk.toNumber()*Hm+this.Ok.toUnsigned().toNumber()}Hk(){return this.Ok.toInt()}GS(t){return(this.Nk()===t.Nk()||this.Bk.getHighBits()>>>31!=1||t.Bk.getHighBits()>>>31!=1)&&(this.Bk.toUnsigned().eq(t.Bk.toUnsigned())&&this.Ok.toUnsigned().eq(t.Ok.toUnsigned()))}lk(t){if(this.GS(t))return Bt.ih;const e=this.pk(),i=t.pk();if(e&&!i)return Bt.T_;if(!e&&i)return Bt.b_;if(!this.Nk())return this.Ak(t).pk()?Bt.T_:Bt.b_;const s=this.Fk(),n=t.Fk(),r=n.Bk.comp(s.Bk);return r>0||0===r&&n.Ok.gt(s.Ok)?Bt.T_:Bt.b_}vk(t){return this.lk(t)<0}_k(t){return this.lk(t)<=0}Vk(t){return this.lk(t)>0}Wk(t){return this.lk(t)>=0}qk(){return new t(this.Ok.not(),this.Bk.not())}zk(e){return new t(this.Ok.and(e.Ok),this.Bk.and(e.Bk))}Xk(e){return new t(this.Ok.or(e.Ok),this.Bk.or(e.Bk))}Gk(e){const i=127&e;return 0===i?this:i<64?t.Sk(this.Ok.shl(i),this.Bk.shl(i).or(this.Ok.shru(64-i)),this.Nk()):t.Sk(Te.ZERO,this.Ok.shl(i-64),this.Nk())}Qk(e){const i=127&e;return 0===i?this:i<64?t.Sk(this.Ok.shru(i).or(this.Bk.shl(64-i)),this.Bk.shr(i),this.Nk()):t.Sk(this.Bk.shr(i-64),this.Bk.isNegative()?Te.NEG_ONE:Te.ZERO,this.Nk())}Kk(e){const i=127&e;return 0===i?this:i<64?t.Sk(this.Ok.shru(i).or(this.Bk.shl(64-i)),this.Bk.shru(i),this.Nk()):64===i?t.Sk(this.Bk,Te.ZERO,this.Nk()):t.Sk(this.Bk.shru(i-64),Te.ZERO,this.Nk())}fS(e){const i=this.Bk.high>>>16,s=65535&this.Bk.high,n=this.Bk.low>>>16,r=65535&this.Bk.low,h=this.Ok.high>>>16,o=65535&this.Ok.high,a=this.Ok.low>>>16,u=65535&this.Ok.low,c=e.Bk.high>>>16,l=65535&e.Bk.high,d=e.Bk.low>>>16,f=65535&e.Bk.low,_=e.Ok.high>>>16,g=65535&e.Ok.high,v=e.Ok.low>>>16;let w=0,m=0,p=0,y=0,A=0,b=0,T=0,S=0;S+=u+(65535&e.Ok.low),T+=S>>>16,S&=65535,T+=a+v,b+=T>>>16,T&=65535,b+=o+g,A+=b>>>16,b&=65535,A+=h+_,y+=A>>>16,A&=65535,y+=r+f,p+=y>>>16,y&=65535,p+=n+d,m+=p>>>16,p&=65535,m+=s+l,w+=m>>>16,m&=65535,w+=i+c,w&=65535;const k=this.Nk(),E=Te.fromBits(p<<16|y,w<<16|m,k),I=Te.fromBits(T<<16|S,A<<16|b,k);return t.Sk(I,E,k)}Ak(t){return this.fS(t.yk())}yk(){return this.qk().fS(t.jk)}Yk(e){if(this.Lk()||e.Lk())return this.Nk()?t.Pk:t.Rk;if(this.pk())return e.pk()?this.yk().Yk(e.yk()):this.yk().Yk(e).yk();if(e.pk())return this.Yk(e.yk()).yk();if(this.Bk.isZero()&&0===this.Ok.high&&e.Bk.isZero()&&0===e.Ok.high)return t.Ek(this.Ok.multiply(e.Ok));const i=Te.fromBits(4294967295,0,!0),s=this.Ok.and(i),n=this.Ok.shru(32),r=this.Bk.and(i),h=this.Bk.shru(32),o=e.Ok.and(i),a=e.Ok.shru(32),u=e.Bk.and(i),c=e.Bk.shru(32);let l=Te.UZERO,d=Te.UZERO,f=Te.UZERO,_=Te.UZERO;l=l.add(s.mul(o)),d=d.add(l.shru(32)),l=l.and(i),d=d.add(n.mul(o)),f=f.add(d.shru(32)),d=d.and(i),d=d.add(s.mul(a)),f=f.add(d.shru(32)),d=d.and(i),f=f.add(r.mul(o)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(n.mul(a)),_=_.add(f.shru(32)),f=f.and(i),f=f.add(s.mul(u)),_=_.add(f.shru(32)),f=f.and(i),_=_.add(h.mul(o)).add(r.mul(a)).add(n.mul(u)).add(s.mul(c)).and(i);const g=Te.fromBits(l.getLowBitsUnsigned(),d.getLowBitsUnsigned(),!0),v=Te.fromBits(f.getLowBitsUnsigned(),_.getLowBitsUnsigned(),!0);return t.Sk(g,v,this.Nk())}Zk(e){let i,s,n=e;if(n.Lk())throw new RangeError("division by zero");if(this.Lk())return this.Nk()?[t.Pk,t.Pk]:[t.Rk,t.Rk];if(this.Nk()){if(n.Nk()||(n=n.Fk()),n.Vk(this))return[t.Pk,this];if(n.Vk(this.Kk(1)))return s=t.Jk,i=this.Ak(n),[s,i];s=t.Pk}else{if(this.GS(t.xk)){if(n.GS(t.jk)||n.GS(t.$k))return[t.xk,t.Rk];if(n.GS(t.xk))return[t.jk,t.Rk];{const e=this.Qk(1).tE(n).Gk(1);return e.GS(t.Rk)?s=n.pk()?t.jk:t.$k:(i=this.Ak(n.Yk(e)),s=e.fS(i.tE(n))),i=this.Ak(n.Yk(s)),[s,i]}}if(n.GS(t.xk))return this.Nk()?[t.Pk,this]:[t.Rk,this];if(this.pk())return n.pk()?this.yk().Zk(n.yk()):([s,i]=this.yk().Zk(n),[s.yk(),i.yk()]);if(n.pk())return[s,i]=this.Zk(n.yk()),[s.yk(),i.yk()];s=t.Rk}for(i=this;i.Wk(n);){let e=w.max(1,w.floor(i.hk()/n.hk()));const r=w.ceil(w.log(e)/w.LN2),h=r<=48?1:2**(r-48);let o=t.Ik(e),a=o.Yk(n);for(;a.pk()||a.Vk(i);)e-=h,o=t.Ik(e,this.Nk()),a=o.Yk(n);o.Lk()&&(o=t.jk),s=s.fS(o),i=i.Ak(a)}return[s,i]}tE(t){return this.Zk(t)[0]}eE(t){return this.Zk(t)[1]}toString(e){const i=e||10;if(i<2||i>36)throw new RangeError("radix");if(this.Lk())return"0";if(this.pk()){if(this.GS(t.xk)){const e=t.Ik(i),s=this.tE(e),n=s.Yk(e).Ak(this);return s.toString(i)+n.Hk().toString(i)}return"-"+this.yk().toString(i)}const s=t.Ik(i**6,this.Nk());let n=this,r="";for(;;){const t=n.tE(s);let e=(n.Ak(t.Yk(s)).Hk()>>>0).toString(i);if(n=t,n.Lk())return e+r;for(;e.length<6;)e="0"+e;r=String(e)+r}}constructor(t,e){this.Ok=t,this.Bk=e}};zi.Rk=zi.Ek(Te.ZERO),zi.Pk=zi.Ek(Te.UZERO),zi.jk=zi.Ek(Te.ONE),zi.Jk=zi.Ek(Te.UONE),zi.$k=zi.Ek(Te.NEG_ONE),zi.Dk=zi.Sk(Te.NEG_ONE,Te.MAX_VALUE,!1),zi.Ck=zi.Sk(Te.MAX_UNSIGNED_VALUE,Te.MAX_UNSIGNED_VALUE,!0),zi.xk=zi.Sk(Te.ZERO,Te.MIN_VALUE,!1);var Oa=class t{get Tk(){return!isFinite(this.iE)}get sE(){return this.iE/this.IA}static nE(e){return new t(w.ceil(e.iE),e.IA)}static rE(e){return new t(w.floor(e.iE),e.IA)}static hE(t,e){return t.dk(e)?t:e}static oE(t,e){return t._k(e)?t:e}fS(e){return this.IA>=e.IA?new t(this.iE+e.aE(this.IA).iE,this.IA):new t(this.aE(e.IA).iE+e.iE,e.IA)}ck(t){return t.vk(this)}dk(t){return t._k(this)}gk(e){if(this.IA>=e.IA){const i=w.abs(this.iE-e.aE(this.IA).iE),s=this.IA;return new t(i,s)}return e.gk(this)}fk(t,e){return this.gk(t)._k(e)}lk(t){return function(t,e){return t.IA>=e.IA?i_(t.iE,e.aE(t.IA).iE):i_(t.aE(e.IA).iE,e.iE)}(this,t)}GS(t){return 0===this.lk(t)}vk(t){return this.lk(t)<0}_k(t){return this.lk(t)<=0}aE(e){return new t(this.iE*(e/this.IA),e)}Ak(e){return this.IA>=e.IA?new t(this.iE-e.aE(this.IA).iE,this.IA):new t(this.aE(e.IA).iE-e.iE,e.IA)}uE(e){return new t(this.iE*e,this.IA)}constructor(t,e=1){this.iE=t,this.IA=e}};Oa.cE=new Oa(1/6,1),Oa.Rk=new Oa(0),Oa.lE=new Oa(1/0),Oa.dE=1e6;var kn=class t extends Dr{static fE(e,i){return void 0===i&&(i=Ji),t.Ik(e*i,i)}static Ik(e,i){return j(e)?t._E:e===1/0?t.gE:e===-1/0?t.vE:new t(Te.fromNumber(e),i)}static Ek(e,i){return new t(e,i)}static wE(e){return t.fE(e.sE,Ji)}static mE(e){return new t(Te.fromNumber(e.getTime()),1e3)}static hE(t,e){return t.dk(e)?t:e}static oE(t,e){return t._k(e)?t:e}static pE(e,i,s){return t.hE(i,t.oE(s,e))}pk(){return this.kT.isNegative()}Lk(){return 0!==this.IA&&this.kT.isZero()}Tk(){return 0===this.IA&&!this.kT.isZero()}bk(){return 0===this.IA&&this.kT.isZero()}hk(){if(0===this.IA)return this.kT.isZero()?NaN:this.kT.isNegative()?-1/0:1/0;const t=this.kT.divide(this.IA),e=this.kT.subtract(t.multiply(this.IA));return t.toNumber()+e.toNumber()/this.IA}Uk(){if(0===this.IA)throw new v("Failed to convert timestamp");return this.kT}yE(){return new Date(0===this.IA?NaN:this.aE(1e3).kT.toNumber())}AE(){return new Oa(0===this.IA?this.hk():this.kT.toNumber(),this.IA)}aE(e,i){void 0===i&&(i=Rc.bE);const s=this.IA;if(s===e)return this;if(0===s)return this;const n=$f(s,e),r=function(t,e,i){const[s,n]=t.Zk(e);if(n.Lk())return s;if(i===Rc.bE)return n.pk()?s.Ak(zi.jk):s;if(i===Rc.TE)return n.pk()?s:s.fS(zi.jk);{const t=n.Yk(zi.Ik(2));return t.pk()?t.yk().vk(e)?s:s.Ak(zi.jk):t.vk(e)?s:s.fS(zi.jk)}}(zi.Ek(this.kT).Yk(zi.Ik(e/n)),zi.Ik(s/n),i);return new t(r.Uk(),e)}lk(t){if(this===t)return Bt.ih;if(0===this.IA||0===t.IA)return Fm(this,t);if(this.Lk())return t.Lk()?Bt.ih:t.pk()?Bt.b_:Bt.T_;if(t.Lk())return this.pk()?Bt.T_:Bt.b_;const e=w.min(this.IA,t.IA),i=this.aE(e,Rc.SE).kT,s=t.aE(e,Rc.SE).kT;return i.compare(s)}yk(){return 0===this.IA?function(t){0;return t.bk()?t:t.pk()?kn.gE:kn.vE}(this):new t(this.kT.negate(),this.IA)}fS(e){if(0===this.IA||0===e.IA)return function(t,e){0;if(t.bk()||e.bk())return kn._E;if(t.Tk()&&e.Tk())return t.pk()===e.pk()?t:kn._E;return t.Tk()?t:e}(this,e);if(this.Lk())return e;if(e.Lk())return this;const i=w.max(this.IA,e.IA),s=this.aE(i,Rc.SE),n=e.aE(i,Rc.SE);return new t(s.kT.add(n.kT),i)}Yk(e){if(this.bk()||j(e))return t._E;if(this.Tk()||!isFinite(e)){if(this.Lk()||0===e)return t._E;{const i=this.pk()?t.vE:t.gE;return e<0?i.yk():i}}return this.Lk()?this:new t(0===e?Te.ZERO:this.kT.multiply(e),this.IA)}tE(e){if(this.bk()||j(e))return t._E;if(this.Tk())return isFinite(e)?0===e?1/e<0?this.yk():this:e<0?this.yk():this:t._E;if(!isFinite(e))return new t(Te.ZERO,this.IA);if(this.Lk())return 0===e?t._E:new t(Te.ZERO,this.IA);if(0===e){const i=this.pk()?t.vE:t.gE;return 1/e<0?i.yk():i}return new t(this.kT.divide(e),this.IA)}kE(){return[this.kT.low,this.kT.high,this.IA]}constructor(t,e){super(),this.kT=t.toSigned(),this.IA=e>>>0}};kn.Rk=new kn(Te.ZERO,Ji),kn._E=new kn(Te.ZERO,0),kn.gE=new kn(Te.ONE,0),kn.vE=new kn(Te.NEG_ONE,0);var Rc,qm=class t extends Dr{static fE(e,i){return void 0===i&&(i=Ji),t.Ik(e*i,i)}static Ik(e,i){return j(e)?t._E:e===1/0?t.gE:e===-1/0?t.vE:new t(BigInt(w.floor(e)),i)}static Ek(e,i){return new t(BigInt(e.high)<<BigInt(32)|BigInt(e.low>>>0),i)}static wE(e){return t.fE(e.sE,Ji)}static mE(e){return t.Ik(e.getTime(),1e3)}static get Rk(){return t.EE||(t.EE=new t(BigInt(0),Ji)),t.EE}static get _E(){return t.IE||(t.IE=new t(BigInt(0),0)),t.IE}static get gE(){return t.PE||(t.PE=new t(BigInt(1),0)),t.PE}static get vE(){return t.RE||(t.RE=new t(BigInt(-1),0)),t.RE}static hE(t,e){return t.dk(e)?t:e}static oE(t,e){return t._k(e)?t:e}static pE(e,i,s){return t.hE(i,t.oE(s,e))}pk(){return this.kT<BigInt(0)}Lk(){return 0!==this.IA&&this.kT===BigInt(0)}Tk(){return 0===this.IA&&this.kT!==BigInt(0)}bk(){return 0===this.IA&&this.kT===BigInt(0)}hk(){if(0===this.IA)return this.kT===BigInt(0)?NaN:this.kT<BigInt(0)?-1/0:1/0;const t=this.kT/BigInt(this.IA),e=this.kT-t*BigInt(this.IA);return Number(t)+Number(e)/this.IA}Uk(){if(0===this.IA)throw new v("Failed to convert timestamp");return this.CE()}CE(){const t=this.kT&BigInt(4294967295),e=this.kT>>BigInt(32)&BigInt(4294967295);return Te.fromBits(Number(t),Number(e))}yE(){return new Date(0===this.IA?NaN:Number(this.aE(1e3).kT))}AE(){return new Oa(0===this.IA?this.hk():Number(this.kT),this.IA)}aE(e,i){void 0===i&&(i=Rc.bE);const s=this.IA;if(s===e)return this;if(0===s)return this;const n=$f(s,e),r=function(t,e,i){const s=t/e,n=t-s*e;if(n===BigInt(0))return s;if(i===Rc.bE)return n<BigInt(0)?s-BigInt(1):s;if(i===Rc.TE)return n<BigInt(0)?s:s+BigInt(1);{const t=n*BigInt(2);return t<BigInt(0)?-t<e?s:s-BigInt(1):t<e?s:s+BigInt(1)}}(this.kT*BigInt(e/n),BigInt(s/n),i);return new t(r,e)}lk(t){if(this===t)return Bt.ih;if(0===this.IA||0===t.IA)return Fm(this,t);if(this.Lk())return t.Lk()?Bt.ih:t.pk()?Bt.b_:Bt.T_;if(t.Lk())return this.pk()?Bt.T_:Bt.b_;const e=w.min(this.IA,t.IA),i=this.aE(e,Rc.SE).kT,s=t.aE(e,Rc.SE).kT;return i>s?Bt.b_:i<s?Bt.T_:Bt.ih}yk(){return 0===this.IA?function(t){0;return t.bk()?t:t.pk()?qm.gE:qm.vE}(this):new t(-this.kT,this.IA)}fS(e){if(0===this.IA||0===e.IA)return function(t,e){0;if(t.bk()||e.bk())return qm._E;if(t.Tk()&&e.Tk())return t.pk()===e.pk()?t:qm._E;return t.Tk()?t:e}(this,e);if(this.Lk())return e;if(e.Lk())return this;const i=w.max(this.IA,e.IA),s=this.aE(i,Rc.SE),n=e.aE(i,Rc.SE);return new t(s.kT+n.kT,i)}Yk(e){if(this.bk()||j(e))return t._E;if(this.Tk()||!isFinite(e)){if(this.Lk()||0===e)return t._E;{const i=this.pk()?t.vE:t.gE;return e<0?i.yk():i}}return this.Lk()?this:new t(0===e?BigInt(0):this.kT*BigInt(e),this.IA)}tE(e){if(this.bk()||j(e))return t._E;if(this.Tk())return isFinite(e)?0===e?1/e<0?this.yk():this:e<0?this.yk():this:t._E;if(!isFinite(e))return new t(BigInt(0),this.IA);if(this.Lk())return 0===e?t._E:new t(BigInt(0),this.IA);if(0===e){const i=this.pk()?t.vE:t.gE;return 1/e<0?i.yk():i}return new t(this.kT/BigInt(e),this.IA)}kE(){const t=this.CE();return[t.low,t.high,this.IA]}constructor(t,e){super(),this.kT=BigInt.asIntN(64,t),this.IA=e>>>0}};qm.EE=void 0,qm.IE=void 0,qm.PE=void 0,qm.RE=void 0,function(t){t[t.bE=0]="bE",t[t.TE=1]="TE",t[t.SE=2]="SE"}(Rc||(Rc={}));var yi=function(){try{return"function"==typeof BigInt&&"bigint"==typeof BigInt(0)}catch(t){return!1}}()?qm:kn;function zm(t,e){return t.lk(e)}function Xm(t,e){return void 0!==t?void 0!==e?yi.oE(t,e):t:e}var Gm=9e4,Qm=S_((()=>yi.Ik(8589934592,Gm))),Km=S_((()=>Qm().tE(2)));var jm={xE:0,DE:1/0,NE:0},Ym=6,Zm=["WEBVTT","WEBVTT ","WEBVTT\t","WEBVTT\n"],Jm=[" ","\t","\n","\f","\r"],$m=/^\d*$/,tp=/.*[0-9]+.*/,ep=/^[\d.-]+$/,ip=/(^\.|\.$)/,sp=/(\D\.|\.\D)/;function np(t,e){void 0===e&&(e=jm);return rp($v(Sa(t),new Ko),e)}function rp(t,e){void 0===e&&(e=jm);const i={L:[],BE:[],LE:[]},s=hp(t),n=new Ko;if(mp(s),op(s,(t=>"\n"!==t),n),n.Au>=s.length)return i;if(n.Ey(1),"\n"!==s.charAt(n.Au)){dp(ap(s,n,false,!0,i,e),i)}else n.Ey(1);for(op(s,(t=>"\n"===t),n);n.Au<s.length;){dp(ap(s,n,false,!1,i,e),i),op(s,(t=>"\n"===t),n)}return i}function hp(t){const e=ug(t,"\0"," "),i=ug(e,"\r\n","\n");return ug(i,"\r","\n")}function op(t,e,i){const s=i.Au;for(;i.Au<t.length&&e(t.charAt(i.Au));)i.Ey(1);return t.substring(s,i.Au)}function ap(t,e,i,s,n,r){let h,o=0,a=e.Au,u="",c=!1,l=!1,d=null,f=null,_=null;for(;!c;)if(h=op(t,(t=>"\n"!==t),e),o++,e.Au>=t.length?c=!0:e.Ey(1),Po(h,"--\x3e")){if(s||1!==o&&(2!==o||l)){e.gc(a);break}l=!0,a=e.Au,d=new Vr(0,0,"",!1,u);try{fp(h,n.BE,d,r),u=""}catch(t){Ee.Um(t),d=null}}else{if(""===h)break;s&&Jo(h,"X-TIMESTAMP-MAP")&&(n.OE=up(h)),s||2!==o||i||(N("STYLE",u.replace(/ /g,""))?(f={Iw:Pr.SS},u=""):N("REGION",u.replace(/ /g,""))&&(_=new Mm("",100,3,0,100,0,100,""),u="")),u&&(u+="\n"),u+=h,a=e.Au}if(d)return d.O=u,d;if(f);else if(_)return function(t,e){const i=t.split(/\s/),s=":";for(const t of i)if(0!==t.length&&Po(t,s)&&t.charAt(0)!==s&&t.charAt(t.length-1)!==s){const i=t.indexOf(s),n=t.substring(0,i),r=t.substring(i+1,t.length);switch(n.toUpperCase()){case"ID":Cp(r,e);break;case"WIDTH":Np(r,e);break;case"LINES":Dp(r,e);break;case"REGIONANCHOR":{const t=Rp(r);t&&(e.ZS=t[0],e.JS=t[1]);break}case"VIEWPORTANCHOR":{const t=Rp(r);t&&(e.ek=t[0],e.nk=t[1]);break}case"SCROLL":xp(r,e)}}}(u,_),_;return null}function up(t){const e=t.split("=")[1].trim().split(","),i=lp(e[0].trim(),"MPEGTS")?e[0]:e[1],s=lp(e[0].trim(),"LOCAL")?e[0]:e[1];var n;return{ME:cp(Number(i.split(/:(.*)/)[1].trim())||0),dh:yi.fE(null!=(n=vp(s.split(/:(.*)/)[1].trim(),new Ko))?n:0)}}function cp(t){return yi.Ik(t,Gm)}function lp(t,e){return Jo(t,e)}function dp(t,e){t&&function(t){return"cue"===t.Iw}(t)?e.L.push(t):t&&function(t){return"region"===t.Iw}(t)?e.BE.push(t):t&&function(t){return"stylesheet"===t.Iw}(t)&&e.LE.push(t)}function fp(t,e,i,s){const n=new Ko;yp(t,n);const r=_p(vp(t,n),s);if(yp(t,n),"--\x3e"!==t.substring(n.Au,n.Au+3))throw v("Something went wrong with parsing a WebVTT Cue");n.Ey(3),yp(t,n);const h=_p(vp(t,n),s);i.KS(r,h);!function(t,e,i){const s=t.split(/\s/),n=":";for(const t of s)if(0!==t.length&&Po(t,n)&&t.charAt(0)!==n&&t.charAt(t.length-1)!==n){const s=t.indexOf(n),r=t.substring(0,s),h=t.substring(s+1,t.length);switch(r.toUpperCase()){case"REGION":kp(h,e,i);break;case"VERTICAL":Ip(h,e);break;case"D":Pp(h,e);break;case"LINE":case"L":Tp(h,e);break;case"POSITION":case"T":Sp(h,e);break;case"SIZE":case"S":Ep(h,e);break;case"ALIGN":case"A":bp(h,e)}}}(t.substring(n.Au,t.length),i,e)}function _p(t,e){return t+e.xE}function gp(t){return/^[0-9]$/.test(t)}function vp(t,e){const i=ug(t,",",".");let s,n,r,h=!1;if(e.Au>=i.length||!gp(i.charAt(e.Au)))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");const o=op(i,gp,e),a=k(o,10);if((o.length>2||a>59)&&(h=!0),e.Au>=i.length||":"!==i.charAt(e.Au))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");e.Ey(1);const u=op(i,gp,e);if(2!==u.length)throw new v("Something went wrong with parsing a WebVTT Cue timestamp");const c=k(u,10);if(h||e.Au<i.length&&":"===i.charAt(e.Au)){if(e.Au>=i.length||":"!==i.charAt(e.Au))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");e.Ey(1);const t=op(i,gp,e);if(2!==u.length)throw new v("Something went wrong with parsing a WebVTT Cue timestamp");s=a,n=c,r=k(t,10)}else s=0,n=a,r=c;if(e.Au>=i.length||"."!==i.charAt(e.Au))throw new v("Something went wrong with parsing a WebVTT Cue timestamp");e.Ey(1);const l=op(i,gp,e),d=k(l,10);if(c>59||r>59)throw new v("Something went wrong with parsing a WebVTT Cue timestamp");return 60*s*60+60*n+r+d/1e3}function wp(t){return mp(hp(t))}function mp(t){if(t.length<Ym)return!1;for(const e of Zm)if(Jo(t,e))return!0;return!1}function pp(t){return Bc(Jm,t)}function yp(t,e){for(;e.Au<t.length&&pp(t.charAt(e.Au));)e.Ey(1)}function Ap(t){const e=t.lastIndexOf("%");if(e>-1){const i=_(t.substring(0,e));if(!j(i)&&i>=0&&i<=100)return i}return null}function bp(t,e){const i=t.toLowerCase();switch(i){case"start":case"center":case"end":case"left":case"right":e.CS=i;break;case"middle":e.CS="center"}}function Tp(t,e){let i,s;const n=t.indexOf(",");if(n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s=""),!tp.test(i))return;let r,h;if(wt(i,"%")){const t=Ap(i);if(null===t)return;r=t,h=!1}else{if(!ep.test(i)||i.lastIndexOf("-")>0)return;const t=i.indexOf(".");if(t>=0&&(t!==i.lastIndexOf(".")||!sp.test(i)||ip.test(i)))return;if(r=_(i),j(r))return;h=!0}switch(e.xS=r,e.OS=h,s=s.toLowerCase(),s){case"start":case"center":case"end":e.DS=s;break;case"middle":e.DS="center"}}function Sp(t,e){let i,s;const n=t.indexOf(",");n>=0?(i=t.substring(0,n),s=t.substring(n+1,t.length)):(i=t,s="");const r=Ap(i);if(null!==r)switch(e.yo=r,s=s.toLowerCase(),s){case"line-left":case"center":case"line-right":case"auto":e.NS=s;break;case"start":e.NS="line-left";break;case"middle":e.NS="center";break;case"end":e.NS="line-right"}}function kp(t,e,i){const s=go(i,(e=>e.o===t));void 0!==s&&(e.LS=s)}function Ep(t,e){const i=Ap(t);null!==i&&(e.iA=i)}function Ip(t,e){switch(t.toLowerCase()){case"rl":case"vertical:rl":case"vertical-rl":e.Mt="rl";break;case"lr":case"vertical:lr":case"vertical-lr":e.Mt="lr";break;default:e.Mt=""}}function Pp(t,e){"VERTICAL"===t.toUpperCase()?e.Mt="rl":"VERTICAL-LR"===t.toUpperCase()&&(e.Mt="lr")}function Rp(t){if(t.indexOf(",")>=0){const e=Ap(t.substring(0,t.indexOf(","))),i=Ap(t.substring(t.indexOf(",")+1,t.length));return[xu(e||0,0,100),xu(i||100,0,100)]}return null}function Cp(t,e){e.o=t}function xp(t,e){"up"===t.toLowerCase()&&(e.$S="up")}function Dp(t,e){$m.test(t)&&(e.YS=k(t))}function Np(t,e){const i=Ap(t);null!==i&&(e.Ti=i)}function Bp(t){return t&&"FE"in t?t.FE:t}var Lp,Op=class extends Da{get UE(){return this.HE}get BE(){return this.VE}get WE(){return this.qE}get ma(){return this.Gu||(this.Gu=function(t){return oe(dn(t),{get styles(){return t.UE},get regions(){return t.BE},get metadata(){return Bp(t.WE)},get content(){return Bp(t.O)}})}(this)),this.Gu}QS(t){return!!Ne(this.UE,t.UE)&&(!!Ne(this.BE,t.BE)&&(this.WE&&t.WE?!!this.WE.zE(t.WE)&&(this.O&&t.O?this.O.zE(t.O):this.O===t.O):this.WE===t.WE))}constructor(t,e,i,s,n,r,h){super(t,e,i,s),this.HE=n,this.VE=r,this.qE=h||void 0}};function nt(t){return 1===t.XE}function Mp(t){return 3===t.XE}!function(t){t[t.GE=1]="GE",t[t.QE=2]="QE",t[t.KT=3]="KT",t[t.KE=4]="KE",t[t.jE=9]="jE"}(Lp||(Lp={}));var Fp=class{get YE(){return this.Mu.ZE(!0)}get PS(){return this.JE}get RS(){return this.$E}constructor(t,e,i){this.JE=t,this.$E=e,nt(i)?this.Mu=function(t,e,i){for(const t of["begin","end","dur"])i.tI(t);return i}(0,0,i):this.Mu=i}};var Ot={VIDEO_H264:"video/avc",VIDEO_H265:"video/hevc",VIDEO_MP4:"video/mp4",VIDEO_MPEG:"video/mpeg",VIDEO_MPEG2:"video/mpeg2",VIDEO_WEBM:"video/webm",VIDEO_UNKNOWN:"video/x-unknown",AUDIO_AAC:"audio/mp4a-latm",AUDIO_MP4:"audio/mp4",AUDIO_WEBM:"audio/webm",AUDIO_UNKOWN:"audio/x-unknown",IMAGE_JPEG:"image/jpeg",APPLICATION_TTML_XML:"application/ttml+xml",APPLICATION_MP4:"application/mp4",TEXT_VTT:"text/vtt"};function lt(t){return Po(t,Ot.APPLICATION_MP4)||Po(t,Ot.VIDEO_MP4)||Po(t,Ot.AUDIO_MP4)}function Up(t){return Po(t,Ot.VIDEO_WEBM)||Po(t,Ot.AUDIO_WEBM)}var Hp=class{eI(t){for(const[e,i]of this.iI)if(e.toLowerCase()===t.toLowerCase())return i}constructor(t,e){this.Iw=t,this.iI=e}};function Vp(t){const e=t.trim(),i=e.indexOf(";");if(i<0)return new Hp(e,[]);const s=e.substr(0,i).trim(),n=e.substr(i+1).trim(),r=[];let h=0,o=!1;for(let t=0;t<n.length;t++){const e=n[t];if(o||";"!==e)'"'===e&&(o=!o);else{const e=Wp(n.substr(h,t));e&&r.push(e),h=t+1}}if(h!==n.length){const t=Wp(n.substr(h));t&&r.push(t)}return new Hp(s,r)}function Wp(t){const e=t.indexOf("=");if(e<0)return;const i=t.substr(0,e).trim();let s=t.substr(e+1).trim();return'"'===s[0]&&(s=s.substring(1,s.length-1)),[i,s]}function qp(t){const e=t.trim(),i=e.indexOf(";");return i<0?e:e.substr(0,i).trim()}function zp(t){let e=t;const i=e.match(/^avc1\.(\d+)\.(\d+)$/);if(i){const t=Number(i[1]),s=Number(i[2]);e="avc1."+Xc((t<<16|s).toString(16),6,"0")}return e}var Xp="http://www.w3.org/XML/1998/namespace";function Gp(t,e,i,s){let n=t.sI(i,e);return 0===n.length&&(n=t.nI(s+":"+e)),n}function Qp(t){const e={};for(const i of t.rI)e[i.hI]=i.kT;return e}var Kp=/^(\d\d+):(\d\d):(\d+)((\.(\d+))?|(:(\d\d+)(\.(\d+))?))$/,jp=/^(\d+)(\.(\d+))?(h|m|s|ms|f|t)$/,Yp="http://www.w3.org/ns/ttml";function Zp(t,e,i,s){void 0===i&&(i=jm),void 0===s&&(s=Ot.APPLICATION_TTML_XML);let n=[];const r=Sa(t);return s===Ot.APPLICATION_MP4?n=function(t,e,i){const s=Ue.uA(t),n=uo(s,hs.oy);if(!n)return[];return ty(Sa(n.Ny),e,i)}(r,e,i):s===Ot.APPLICATION_TTML_XML&&(n=ty(r,e,i)),n}function Jp(t,e,i){return void 0===i&&(i=jm),ey(t,e,i)}function $p(t,e){const i=uy(e.YE),s={};for(const e of i)s[e]=t[e];return s}function ty(t,e,i){return ey($v(t,new Ko),e,i)}function ey(t,e,i){const s=[];let n;try{n=Ee.oI(t)}catch(t){return s}const r=n.aI;if("tt"!==r.hI)return s;const h=r&&r.sI(Yp,"head")[0],o=r&&r.sI(Yp,"body")[0];if(!o||!h)return s;const a=function(t){const e={},i=t.sI(Yp,"styling")[0],s=i&&i.sI(Yp,"style")||[];for(const t of s){e[t.uI(Xp,"id")]=Qp(t)}return e}(h),u=function(t){const e={},i=t.sI(Yp,"layout")[0],s=i&&i.sI(Yp,"region")||[];for(const t of s){const i=t.uI(Xp,"id");if(!i)continue;e[i]=Qp(t);const s=ay(t);for(const t in s)R.call(s,t)&&(e[i][t]=s[t])}return e}(h),c=function(t,e){const i=Ms(t),s=ny(e.cI("tts:extent"));if(!s)return i;for(const t of g.keys(i)){const e=ny(i[t].extent);if(e){const n=iy(e[0],s[0]),r=iy(e[1],s[1]);i[t].extent=n+" "+r}const n=ny(i[t].origin);if(n){const e=iy(n[0],s[0]),r=iy(n[1],s[1]);i[t].origin=e+" "+r}}return i}(u,r),l=h.sI(Yp,"metadata")[0],d=ry(o,i.xE,i.DE,i.NE);for(const t of d){const e=$p(c,t);s.push(new Op(t.PS,t.RS,t.YE,!1,a,e,l))}return s}function iy(t,e){const i=sy(t),s=sy(e);if(i&&s&&i===s){const n=Number(t.slice(0,-i.length)),r=Number(e.slice(0,-s.length));return j(n)||j(r)?t:n/r*100+"%"}return t}function sy(t){return wt(t,"px")?"px":wt(t,"em")?"em":wt(t,"c")?"c":wt(t,"%")?"%":void 0}function ny(t){if(!t)return;const e=t.split(" ");return 2===e.length?[e[0],e[1]]:void 0}function ry(t,e,i,s){let n,r=e,h=i,o=[];const a=[];if(nt(t)){var u,c;r=null!=(u=oy(t.cI("begin"),s))?u:r,n=oy(t.cI("dur"),0),h=null!=(c=oy(t.cI("end"),s))?c:void 0!==n?r+n:h;const e=t.lI;for(let i=0;i<e.length;i++)("body"===t.hI||"div"===t.hI)&&e[i].XE>1||(o=o.concat(ry(e[i],r,h,s)))}const l=function(t,e,i){const s=[];s.push(t,e);for(const t of i)s.push(t.PS,t.RS);s.sort(Vi);let n=s.length;for(let t=0;t<n-1;t++)s[t+1]===s[t]&&(hn(s,t+1),t--,n=s.length);return s}(r,h,o);for(let e=0;e<l.length-1;e++){const i=hy(l[e],l[e+1],o);if(i.length<=0&&cy(t)){const i=t.ZE(!1);a.push(new Fp(l[e],l[e+1],i))}else if(i.length>0){const s=t.ZE(!1);i.forEach((t=>s.dI(t.YE))),a.push(new Fp(l[e],l[e+1],s))}}return a}function hy(t,e,i){const s=[];for(let n=0;n<i.length;n++){const r=i[n].PS,h=i[n].RS;(r>=t&&h<=e||r<e&&h>=e||r<t&&h>t)&&s.push(i[n])}return s}function oy(t,e){if(t){if(Kp.test(t)){const i=Kp.exec(t);if(!i)return;const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,h=i[6];return 3600*s+60*n+r+(h?Number(h)*.1**h.length:0)+e}if(jp.test(t)){const i=jp.exec(t);if(!i)return;const s=Number(i[1]);let n;switch(i[4]){case"h":n=3600*s;break;case"m":n=60*s;break;case"s":n=s;break;case"ms":n=.001*s;break;default:n=NaN}return n+e}}}function ay(t){const e={},i=t.nI("style")||[];for(const t of i){const i=Qp(t);for(const t in i)R.call(i,t)&&(e[t]=i[t])}return e}function uy(t){let e,i=[];if(nt(t)){e=t.cI("region"),e&&i.push(e);const s=t.lI;for(let t=0;t<s.length;t++)i=i.concat(uy(s[t]))}return i}function cy(t){if(nt(t)){const e=t.hI.toUpperCase(),i=Boolean(t.cI("smpte:backgroundImage"));return"BR"===e||i}return t.XE===Lp.KT}function ly(t){const e=function(t){try{return Ee.oI(t).aI}catch(t){}}(t);return"tt"===(null==e?void 0:e.hI)}var bt,gn=class extends P{tt(t){return super.tt(t)}it(t){const e=super.it(t);return e&&(t.bw=lu.Th),e}pa(){return fr(this)}};!function(t){t.Ay="subtitles",t.fI="captions",t._I="descriptions",t.$n="chapters",t.Ty="metadata",t.gI="thumbnails"}(bt||(bt={}));var dy=["subtitles","captions","descriptions","chapters","metadata","thumbnails"];function fy(t){return"string"==typeof t&&Bc(dy,t)}function _y(t,e){return!(!fy(t)||!fy(e))&&(t===e||"subtitles"===t&&"captions"===e||"captions"===t&&"subtitles"===e)}var ht,Wr=class extends jr{constructor(t,e,i,s,n){super(t,e,n),this.url=i,this.status=s}};!function(t){t.vI="HttpOpenError",t.wI="HttpResponseError",t.mI="HttpTimeoutError"}(ht||(ht={}));var gy=class extends Fe{get pI(){return this.yI}constructor(t,e,i){super(e,i),this.yI=t}};var et=class extends gy{get name(){return ht.wI}get AI(){return this.bI}constructor(t,e,i){super(t.pI,null!=i?i:function(t){return"Error while loading "+t.pI.TI+", status code "+t.SI}(t),e),this.bI=t}};var vy,wy=class extends gy{get name(){return ht.mI}constructor(t,e){super(t,function(t){return"Request for "+t.TI+" timed out after "+t.kI+" seconds."}(t),e)}};function my(t){return t instanceof gy}function py(t){return t instanceof et}function yy(t){return t instanceof wy}function Ay(t){return t===bt.Ay||t===bt.fI}function by(t){return t.some(Ty)}function Ty(t){return Po(t,"stpp")}function Sy(t){return t.some(ky)}function ky(t){return Po(t,"vtt")||Po(t,"wvtt")}function Ey(t,e){return lt(t)&&Sy(e)}function Iy(t,e){return t===bt.gI||t===bt.Ty&&e===bt.gI}function Py(t,e,i,s){for(const n of t.L.Kv){if(n.PS>i)break;e<=n.RS&&!Bc(s,n)&&s.push(n)}}function Ry(t,e){return Xn(t.cw,e.cw)}function Cy(t,e,i,s){const r=function(t){switch(t){case Ca.WEBVTT:return"WebVTT";case Ca.SRT:return"SRT";case Ca.TTML:return"TTML";default:return""}}(t);return new Wr(n.SUBTITLE_PARSE_ERROR,"Could not parse the "+(r?r+" ":"")+"subtitle file.",e,i,s)}function xy(t,e){const i=[];for(const s of t.L.Kv)if(s.RS<=e)i.push(s);else if(s.PS>=e)break;for(const e of i)t.EI(e)}function Dy(t,e){if(t.U>0){const i=10,s=t.Tn(0),n=w.max(0,s-i);for(const t of e)t.II(n)}}!function(t){t.RI="vtt",t.Xp="wvtt",t.CI="stpp"}(vy||(vy={}));var Ct,Cu=class extends Et{tt(t){t.wn(ze.oa,this.xI),this.Z.tt(t),this.DI(t)}it(t){t.pn(ze.oa,this.xI),t.bw=lu.Th,this.Z.it(t)}NI(t){}BI(t){}DI(t){t.bw!==lu.Th?this.NI(t):this.BI(t)}LI(){for(const t of this.Z.Kv)t.pn(ze.oa,this.xI),t.bn()}II(t){if(t>0)for(const e of this.Z.Kv)xy(e,t)}ir(){return this.LI(),this.Z.ir(),Promise.resolve()}async bn(){this.Lo(),await this.ir(),this.Z.bn()}constructor(...t){super(...t),this.Z=new gn,this.xI=t=>{const e=t.Ht;this.DI(e)}}};!function(t){t.OI="arraybuffer",t.MI="json",t.FI="stream",t.KT="text"}(Ct||(Ct={}));var ut,_h,hi,Ia,Yu=class t{append(t,e){let i=t,s=e;i=Ny(i),s=By(s);const n=i.toLowerCase();if(this.I_.hasOwnProperty(n)){const t=this.I_[n],e=t[1];t[1]=e?e+", "+s:s}else this.I_[n]=[i,s]}delete(t){const e=Ny(t).toLowerCase();delete this.I_[e]}get(t){const e=Ny(t).toLowerCase();return this.I_.hasOwnProperty(e)?this.I_[e][1]:null}has(t){const e=Ny(t).toLowerCase();return this.I_.hasOwnProperty(e)}set(t,e){let i=t;i=Ny(i);const s=i.toLowerCase();this.I_[s]=[i,By(e)]}forEach(t,e){for(const i in this.I_)this.I_.hasOwnProperty(i)&&t.call(e,this.I_[i][1],i,this)}asList(){const t=[];for(const e in this.I_)if(this.I_.hasOwnProperty(e)){const[i,s]=this.I_[e];t.push([i,s])}return t}UI(){const t={};return this.forEach(((e,i)=>{t[i]=e})),t}HI(t){t.forEach(((t,e)=>{this.append(e,t)}))}VI(t){t.forEach(((t,e)=>{this.set(e,t)}))}constructor(e){this.I_={},e instanceof t?e.asList().forEach((t=>{let[e,i]=t;this.append(e,i)})):Array.isArray(e)?e.forEach((t=>{this.append(t[0],t[1])})):e&&g.getOwnPropertyNames(e).forEach((t=>{this.append(t,e[t])}))}};function Ny(t){let e=t;if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new p("Invalid character in header field name");return e}function By(t){let e=t;return"string"!=typeof e&&(e=String(e)),e}!function(t){t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.OPTIONS="OPTIONS",t.POST="POST",t.PUT="PUT"}(ut||(ut={})),function(t){t.YT="",t.WI="manifest",t.qI="segment",t.zI="preload-hint",t.XI="content-protection"}(_h||(_h={})),function(t){t.YT="",t.GI="initialization-segment",t.QI="fairplay-license",t.KI="fairplay-certificate",t.jI="widevine-license",t.YI="widevine-certificate",t.ZI="playready-license",t.JI="clearkey-license",t.$I="aes128-key"}(hi||(hi={})),function(t){t.YT="",t.yy="audio",t.vl="video",t.KT="text",t.jT="image"}(Ia||(Ia={}));var mo,vh=class{constructor(t,e){const i=t.TI;let s,n,r,h,o,a,u,c,l,d,f,_;e?(s=e.tP,n=e.eP,r=e.iP,h=e.sP,o=e.kI,a=e.nP,u=e.M_,c=e.Iw,l=e.rP,d=e.hP,f=e.oP,_=e.aP):(s=null,n={},r="GET",h=Ct.KT,o=0,a=0,c="",l="",d="",f=!1),this.TI=i,this.tP=t.tP||s,this.eP=new Yu(t.eP||n),this.iP=t.iP||r,this.sP=t.sP||h,this.kI=void 0!==t.kI?Number(t.kI)||0:o,this.nP=void 0!==t.nP?Number(t.nP)||0:a,this.M_=t.M_||u||(new Hi).M_,this.Iw=t.Iw||c,this.rP=t.rP||l,this.hP=t.hP||d,this.oP=void 0!==t.oP?Boolean(t.oP):f,this.aP=t.aP||_}},Ly=class extends la{get error(){return this.errorObject.message}pa(){return this}constructor(t){super(zn.aa),this.errorObject=t}},Oy=class extends Cu{uP(t){if(!t.src)return;const e=t.kind||bt.Ay,i=this.lP.cP(e,t.id,t.label,t.srclang,t.default);return i.Pw=we(t.src),this.tt(i),i}async dP(t,e){t.Nc=mn.LOADING;const i=new vh({TI:t.Pw,sP:Ct.KT,iP:ut.GET,M_:e});let s,r;try{const t=await this.fP.pI(i);r=t.SI,s=await t._P()}catch(e){return pe(e),t.Nc=mn.ERROR,void t.To(new Ly(function(t,e){let i=e,s=0;if(my(t)&&t.name===ht.vI)i=t.pI.TI;else if(py(t)){const e=t.AI;if(i=e.gP,s=e.SI,0===s)return new Wr(n.SUBTITLE_CORS_ERROR,"Could not load the subtitle file. Make sure the source is set correctly and that CORS support is enabled.",i,s,t)}return new Wr(n.SUBTITLE_LOAD_ERROR,"Could not load the subtitle file.",i,s,t)}(e,t.Pw)))}try{const e=function(t){return wp(t)?Ca.WEBVTT:ly(t)?Ca.TTML:Ca.SRT}(s);t.Iw=e;let i=[];if(e===Ca.WEBVTT||e===Ca.SRT){i=rp(s).L}else e===Ca.TTML&&(i=Jp(s,t));for(const e of i)t.vP(e)}catch(e){return pe(e),t.Nc=mn.ERROR,void t.To(new Ly(Cy(t.Iw,t.Pw,r,e)))}t.Nc=mn.LOADED}NI(t){Bc(this.Z.Kv,t)&&t.Nc===mn.NONE&&this.dP(t,this.wP.M_).catch(B)}On(){}async ir(){this.wP.Jl(),this.wP=new Hi;for(const t of this.Z.Kv)this.lP.mP(t);await super.ir()}constructor(t,e){super(),this.wP=new Hi,this.lP=t,this.fP=e}};function My(t,e){for(const i of t)if(i.Lt===e&&i.pP)return i}function Fy(t,e){Uy(My(t.Kv,e))}function Uy(t){void 0!==t&&(t.bw=lu.Qn)}function Hy(t,e){const i=My(t.Kv,e)||function(t,e){for(const i of t)if(i.Lt===e)return i}(t.Kv,e);Uy(i)}function Vy(t){for(const e of dy)e===bt.$n?Hy(t,e):Fy(t,e)}!function(t){t.yP="web",t.AP="android",t.bP="android-tv",t.TP="ios",t.SP="tvos",t.kP="chromecast",t.EP="theoliveweb"}(mo||(mo={}));var mr=il?il.userAgent:"",Wy=mr.match(/chrome\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),qy=mr.match(/Edg\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/i),zy=mr.match(/Android ([0-9\.]+)/i),Xy=mr.match(/Windows NT ([0-9\.]+)/i),Gy=mr.match(/(Version)\/((\d+)\.(\d+)(?:\.(\d+))?).*Safari/),Qy=mr.match(/Firefox\/([0-9\.]+)/i),Ky=mr.match(/OPR\/(\d+\.\d+)/i),jy=mr.match(/Tizen ([0-9\.]+)/i),Yy=mr.match(/(iPhone OS|iPad OS|iPod OS|Mac OS X) (\d+)_(\d+)_?(\d+)?/),Zy=class{get Ye(){return this.IP}get PP(){return this.RP}get CP(){return this.xP}get DP(){return this.NP}get BP(){return this.LP}get OP(){return this.MP}get FP(){return this.UP}get HP(){return this.VP}get WP(){return this.qP}get zP(){return this.XP}get GP(){return this.QP}get KP(){return this.jP}get YP(){return this.ZP}get JP(){return this.$P||this.tR}get eR(){return this.iR}get Ks(){return this.sR}get nR(){return this.rR}get hR(){return this.oR}get aR(){return this.uR}get cR(){return this.lR}get dR(){return this.fR}get _R(){return this.gR}get vR(){return this.wR}get mR(){return this.pR}get yR(){return this.AR}get bR(){return this.SR}get kR(){return this.ER}get IR(){return this.PR}get RR(){return this.xR}get DR(){return this.NR}get LR(){return this.OR}get MR(){return this.FR}get UR(){return this.HR}get WR(){return this.qR}get zR(){return this.XR}get GR(){return this.QR}get KR(){return this.jR}get YR(){return!(!this.mR&&!this._R)&&this.aR<=56}get ZR(){return this.JR}get $R(){return this.tC}get eC(){return this.iC}get sC(){return this.nC}get rC(){return this.hC}get oC(){return this.aC}get uC(){return this.cC}constructor(){this.IP=Boolean("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch||il&&il.msMaxTouchPoints),this.RP=/(mac\sos\sx)\s?([\w\s\.]+\w)*/i.test(mr)||/(macintosh|mac(?=_powerpc)\s)/i.test(mr),this.xP=/Windows NT/i.test(mr),this.NP=Xy?_(Xy[1]):0,this.LP=/Android/i.test(mr),this.MP=zy?_(zy[1]):0,this.UP=/windows phone (8|8\.1)/i.test(mr),this.VP=/iPhone/i.test(mr),this.qP=/iPad/i.test(mr),this.XP=this.RP&&this.IP&&!this.qP,this.QP=/iPod/i.test(mr),this.iR=/Mobile Safari/i.test(mr),this.$P=/EOS\d*STB/i.test(mr),this.tR=/APP\d*STB/i.test(mr),this.jP=(this.VP||this.qP||this.XP||this.QP)&&!this.UP,this.ZP=Yy?_(Yy[2]):0,this.sR=this.UP||this.jP||this.LP||this.iR,this.rR=/CriOS/i.test(mr),this.oR=Boolean(self.chrome&&/google/i.test(il.vendor))||this.rR,this.lR=this.oR&&/Edg\//i.test(il.userAgent),this.fR=qy?k(qy[1],10):0,this.cC=Boolean(self.chrome||/Chrome/i.test(mr)||/CriOS/i.test(mr)),this.uR=Wy?k(Wy[1],10):0,this.gR=/SMART-TV.*Tizen/i.test(mr),this.wR=jy?_(jy[1]):0,this.pR=/webos|web0s/i.test(mr),this.AR=/VIZIO/i.test(mr),this.SR=/Edge\/\d+/i.test(mr),this.ER=/Trident/i.test(mr),this.PR=this.ER&&!self.ActiveXObject&&"ActiveXObject"in self,this.xR=/Vivaldi/i.test(mr),this.NR=/Firefox/i.test(mr)&&!/Seamonkey/i.test(mr),this.OR=Qy?_(Qy[1]):0,this.FR=/Safari/i.test(mr)&&!/Chrome/i.test(mr)&&!this.UP&&!this.gR,this.HR=Gy?_(Gy[2]):0,this.qR=Boolean(Ky),this.XR=Ky?_(Ky[1]):0,this.QR=/CrKey/.test(mr),this.jR=/\b(tv|smart-tv|smarttv|appletv|crkey|googletv|hbbtv|pov_tv|roku|viera|nettv|philipstv|vizio)\b/i.test(mr),this.JR="web"===mo.bP,this.tC="web"===mo.AP,this.iC=this.tC||this.JR,this.nC="web"===mo.TP,this.hC="web"===mo.SP,this.aC="web"===mo.kP}};Zy.lC=new Zy;var Jy,$y,tA,fa,eA,iA,fh=Zy.lC,le=class extends Xi{constructor(){super(o.vm)}};var Yr={Iw:Js.jm,dC:ko,fC:"cenc",_C:Gg,gC:Wi,vC:"PlayReady"},ts={Iw:Js.Ym,dC:Kg,fC:"cenc",_C:Qg,gC:Du,vC:"Widevine"},Br={Iw:Js.Zm,dC:Jg,fC:"skd",_C:Zg,gC:ns,vC:"FairPlay"},sA={Iw:Js.Zm,dC:"com.apple.fps",fC:"sinf",_C:Zg,gC:ns,vC:"FairPlay"},Zr={Iw:Js.Jm,dC:"org.w3.clearkey",fC:"cenc",_C:jg,gC:Yg,vC:"ClearKey"},nA=[Yr,ts,Br,Zr];function rA(t){return nA.filter((e=>e.gC===t.toLowerCase()))}var pt,hA=["cenc"],oA=["cbcs","cbcs-1-9"],Z=class extends Xi{constructor(t){super("wC"),this.mC=t}},ct=class extends Xi{constructor(t,e,i,s){super("pC"),this.mC=t,this.yC=e,this.pC=i,this.AC=s}},aA=class extends Xi{constructor(){super("lt")}};!function(t){t.Yw="bC",t.TC="SC"}(pt||(pt={}));var vt=class extends Xi{constructor(t,e){super("bC"),this.fC=t,this.kC=e}},uA=class extends Xi{constructor(){super("SC")}},zr=new x([0]).buffer,_t=class{get iA(){return this.EC.length}IC(t){for(const e of this.EC)if(e[0]===t)return!0;return!1}RC(t){for(const e of this.EC)if(e[0]===t)return e[1]}xC(t,e){this.EC.forEach((e=>t(e[1],e[0])),e)}DC(t,e){this.EC.push([t,e])}NC(){Ce(this.EC)}constructor(){this.EC=[]}},$i=class{Lf(t){this.Td&&(this.Td(t),this.Ou())}BC(t){this.Sd&&(this.Sd(t),this.Ou())}Jl(){this.jf.catch(Qo),this.BC(new At)}U_(t){t.then((t=>this.Lf(t)),(t=>this.BC(t)))}Ou(){this.Td=void 0,this.Sd=void 0}constructor(){this.jf=new Promise(((t,e)=>{this.Td=t,this.Sd=e}))}};function cA(){return new x([8,4]).buffer}function lA(t,e){return t===ko?function(t){if(t.byteLength<2*dA.length)return t;const e=new DataView(t,0,2*dA.length),i=jv(e,!0);if(i===dA)return t;return function(t){const e='<PlayReadyKeyMessage type="LicenseAcquisition"><LicenseAcquisition Version="1"><Challenge encoding="base64encoded">',i='</Challenge><HttpHeaders><HttpHeader><name>Content-Type</name><value>text/xml; charset=utf-8</value></HttpHeader><HttpHeader><name>SOAPAction</name><value>"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"</value></HttpHeader></HttpHeaders></LicenseAcquisition></PlayReadyKeyMessage>',s=""+e+cv(t)+i;return Yv(s,!0).buffer}(t)}(e):e}var dA="<PlayReady";var eu=class extends Fe{constructor(t,e,i,s){super(t,s),this.LC=e,this.OC=i}},fA=function(t,e){return(fA=g.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)g.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function fi(t,e){if("function"!=typeof e&&null!==e)throw new p("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}fA(t,e),t.prototype=null===e?g.create(e):(i.prototype=e.prototype,new i)}function _A(t,e,i){return t.indexOf?t.indexOf(e,i):Array.prototype.indexOf.call(t,e,i)}(function(){function t(t,e){this.MC=t,this.FC=e}t.prototype.get=function(t){var e=this.MC.get(t);if(0===this.FC||void 0===e)return e;var i=this.MC.get(t+1)||0,s=e&(1<<8-this.FC)-1,n=i>>8-this.FC;return(s<<this.FC)+n},t.prototype.getBit=function(t){if(!(t<0)){var e=this.MC.get(w.floor((t+this.FC)/8));if(void 0!==e)return(e&1<<7-this.FC-t%8)>0?1:0}},g.defineProperty(t.prototype,"bitLength",{get:function(){return this.MC.bitLength-this.FC},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"length",{get:function(){return this.MC.length},enumerable:!1,configurable:!0})})(),w.pow(2,-52);function gA(t,e,i){return w.min(w.max(t,e),i)}function Hr(t,e){return t>>8-e}function Gr(t,e){return t&(1<<e)-1}var te=function(){function t(t){this.UC=t,this.HC=0,this.VC=0}return g.defineProperty(t.prototype,"totalBitsRead",{get:function(){return 8*this.HC+this.VC},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"done",{get:function(){return this.HC===this.UC.length&&0===this.VC},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"location",{get:function(){return{byte:this.HC,bit:this.VC}},enumerable:!1,configurable:!0}),t.prototype.copy=function(){var e=new t(this.UC);return e.seek(this.HC,this.VC),e},t.prototype.canReadBits=function(t){return 8*this.HC+t+this.VC<=8*this.UC.length},t.prototype.canReadBytes=function(t){return 0===this.VC?this.HC+t<=this.UC.length:this.HC+t<this.UC.length},t.prototype.incBit=function(){this.VC++,this.VC>7&&(this.HC++,this.VC=0)},t.prototype.seek=function(t,e){this.HC=t,this.VC=e},t.prototype.peekBit=function(){if(!this.canReadBits(1))throw new v("Cannot read past end of buffer.");return this.UC.get(this.HC)>>7-this.VC&1},t.prototype.readBit=function(){var t=this.peekBit();return this.incBit(),t},t.prototype.readByte=function(){if(!this.canReadBytes(1))throw new v("Cannot read past end of buffer.");if(0===this.VC)return this.UC.get(this.HC++);var t=Gr(this.UC.get(this.HC),8-this.VC),e=Hr(this.UC.get(this.HC+1),this.VC);return this.HC++,t<<this.VC|e},t.prototype.readBits=function(t){if(!this.canReadBits(t))throw new v("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readBit());return e},t.prototype.readUInt=function(t){if(t>32)throw new v("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new v("Cannot read past end of buffer.");var e=0;if(0===this.VC&&t%8==0)for(var i=t-8;i>=0;i-=8)e|=this.readByte()<<i;else for(i=t-1;i>=0;i--)e|=this.readBit()<<i;return e},t.prototype.readInt=function(t){if(t>32)throw new v("The max bitlength that can be provided is 32.");if(!this.canReadBits(t))throw new v("Cannot read past end of buffer.");var e=this.readUInt(t);return 0===(e&1<<t-1)?e:e-w.pow(2,t)},t.prototype.readExponentialGolombCode=function(){for(var t=0;0===this.readBit();)t++;var e=1<<t;return e+=this.readUInt(t)-1},t.prototype.readSignedExponentialGolombCode=function(){var t=this.readExponentialGolombCode();return 1&t?(t+1)/2:-t/2},t.prototype.skipBits=function(t){if(!this.canReadBits(t))throw new v("Skipping over the buffer edge is not allowed.");var e=this.VC+t;this.HC+=e>>3,this.VC=7&e},t.prototype.readBool=function(){return this.readBit()>0},t.prototype.readString=function(t){if(!this.canReadBytes(t))throw new v("Cannot read past end of buffer.");for(var e=[],i=0;i<t;i++)e.push(this.readByte());return String.fromCharCode.apply(String,e)},t}(),vA=function(t,e){return t===e?0:t<e?-1:t>e?1:j(t)?j(e)?0:1:-1},Yo=function(){function t(){this.WC=[],this.qC=[],this.zC=0}return t.from=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];for(var s=new t,n=0,r=e;n<r.length;n++){var h=r[n];s.pushRange(h)}return s},t.prototype.pushRange=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=t.length),i<0)throw new v("The buffer length must be positive.");if(0!==i){if(0===this.qC.length)this.qC.push(0);else{var s=this.qC[this.qC.length-1]+this.WC[this.WC.length-1].length;this.qC.push(s)}this.WC.push(t.subarray(e,e+i)),this.zC+=i}},t.prototype.concat=function(e){var i=new t;return i.pushRange(this.join()),i.pushRange(e.join()),i},t.prototype.copy=function(t,e,i,s){if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=this.length),e<0||i<0||s<0)throw new RangeError;return this.slice(i,s).copyInternal(t,e)},t.prototype.copyInternal=function(t,e){for(var i=0,s=e,n=0,r=this.WC;n<r.length;n++){var h=r[n];t.set(h,s),i+=h.length,s+=h.length}return i},t.prototype.clear=function(){this.WC=[],this.qC=[],this.zC=0},t.prototype.get=function(t){if(!(t<0||t>=this.length)){var e=this.findContainingBufferIndex(t),i=t-this.qC[e];return this.WC[e][i]}},g.defineProperty(t.prototype,"first",{get:function(){return this.get(0)},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){if(this.WC.length<1)return-1;if(this.WC.length>1){var e=this.join();this.clear(),this.pushRange(e)}var i=this.WC[0];return"number"==typeof t?_A(i,t):"undefined"!=typeof Buffer?Buffer.from(i.buffer,i.byteOffset,i.byteLength).indexOf(t):function(t,e){if(0===e.length)return 0;for(var i=e[0],s=e.length,n=t.length-s,r=0;r<=n&&!((r=_A(t,i,r))<0||r>n);r++){for(var h=r+1,o=r+s,a=1;h<o&&t[h]===e[a];h++,a++);if(h===o)return r}return-1}(i,t)},t.prototype.findContainingBufferIndex=function(t){return function(t,e,i){if(0!==t.length){var s=0,n=t.length-1;if(1!==i(t[s],e)){if(1===i(e,t[n]))return n;for(;s!==n;){var r=w.ceil((s+n)/2);i(t[r],e)<=0?s=r:n=r-1}return s}}}(this.qC,t,vA)},t.prototype.join=function(){if(1===this.WC.length)return this.WC[0];var t=new x(this.length);return this.copyInternal(t,0),t},g.defineProperty(t.prototype,"length",{get:function(){return this.zC},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"bitLength",{get:function(){return 8*this.length},enumerable:!1,configurable:!0}),t.prototype.readUIntBE=function(t,e){if(e<=0||e>4)throw new v("Expected byteLength to be between 0 and 4 but was "+e);if(t<0||t>this.length-e)throw new v("Offset must be between 0 and buffer.length - byteLength, but was "+t+" (max allowed "+(this.length-e)+")");if(1===e)return this.get(t);for(var i=0,s=0;s<e;s++)i+=this.get(t+s)*w.pow(2,8*(e-s-1));return i},t.prototype.slice=function(e,i){void 0===i&&(i=this.length);var s=gA(e,0,this.length),n=gA(i,0,this.length);if(s>n)return new t;if(s===n)return new t;for(var r=new t,h=this.findContainingBufferIndex(s),o=this.WC[h],a=s,u=a-this.qC[h];a+o.length-u<n;)r.pushRange(o,u,o.length-u),h+=1,u=(a+=o.length-u)-this.qC[h],o=this.WC[h];var c=n-a;return r.pushRange(o,u,c),r},t.prototype.trim=function(){if(0===this.length)return new t;for(var e=this.length-1,i=this.WC.length-1,s=this.WC[i],n=s.length-1;e>=0&&i>=0;){if(0!==s[n])break;if(0===n){if(0===i)return new t;i-=1,n=(s=this.WC[i]).length-1}else n-=1;e-=1}return this.slice(0,e+1)},t}(),wA=function(){function t(e){this.XC=e||t.BUFFER_CHUNK_SIZE,this.GC=!1,this.QC=new Yo,this.UC=new x(this.XC),this.KC=0,this.jC=0,this.VC=7}return t.prototype.closeByte=function(){this.UC[this.KC++]=this.jC,this.KC>=this.XC&&this.closeBuffer(),this.jC=0,this.VC=7},t.prototype.closeBuffer=function(t){void 0===t&&(t=!0),0!==this.KC&&(this.QC.pushRange(this.UC,0,this.KC),t&&(this.UC=new x(this.XC)),this.KC=0)},g.defineProperty(t.prototype,"isWritingStartBit",{get:function(){return 7===this.VC},enumerable:!1,configurable:!0}),t.prototype.close=function(){if(this.GC)throw new v("Cannot close a closed BitWriter.");return this.isWritingStartBit||this.closeByte(),this.closeBuffer(!1),this.GC=!0,this.QC},t.prototype.writeBit=function(t){if(this.GC)throw new v("Cannot write to a closed BitWriter.");this.jC|=t<<this.VC,0===this.VC?this.closeByte():this.VC--},t.prototype.writeByte=function(t){if(this.GC)throw new v("Cannot write to a closed BitWriter.");this.isWritingStartBit?(this.jC=t,this.closeByte()):this.writeByteUnaligned(t)},t.prototype.writeByteUnaligned=function(t){var e=this.VC;this.jC|=Hr(t,e+1),this.closeByte(),this.jC=Gr(t,8-e)<<e+1,this.VC=e},t.prototype.writeBits=function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];this.writeBit(s)}},t.prototype.writeBytes=function(t){if(this.GC)throw new v("Cannot write to a closed BitWriter.");this.isWritingStartBit?this.writeBytesAligned(t):this.writeBytesUnaligned(t)},t.prototype.writeBytesAligned=function(t){this.KC+t.length<=this.XC?(this.UC.set(t,this.KC),this.KC+=t.length,this.KC===this.XC&&this.closeBuffer()):(this.closeBuffer(),this.QC.pushRange(t))},t.prototype.writeBytesUnaligned=function(t){if(0!==t.length){var e=this.VC;this.jC|=Hr(t[0],e+1),this.closeByte();for(var i=1;i<t.length;i++){var s=Gr(t[i-1],8-e),n=Hr(t[i],e+1);this.jC=s<<e+1|n,this.closeByte()}this.jC=Gr(t[t.length-1],8-e)<<e+1,this.VC=e}},t.prototype.writeUInt=function(t,e){if(t<0)throw new v("Received a negative number.");if(e>32)throw new v("The max bitlength that can be provided is 32.");if(t>=w.pow(2,e))throw new v("Uint "+t+" cannot be represented in "+e+" bit(s).");if(this.isWritingStartBit&&e%8==0)for(var i=e-8;i>=0;i-=8)this.writeByte(t>>i&255);else for(i=e-1;i>=0;i--)this.writeBool((t&1<<i)>0)},t.prototype.writeInt=function(t,e){if(e>32)throw new v("The max bitlength that can be provided is 32.");if(w.abs(t)>=w.pow(2,e-1))throw new v("Signed integer "+t+" cannot be represented in "+e+" bit(s).");t<0?this.writeUInt(t+w.pow(2,e),e):this.writeUInt(t,e)},t.prototype.writeExponentialGolombCode=function(t){if(t<0)throw new v("Received a negative number.");for(var e=w.floor(w.log2(t+1))+1,i=0;i<e-1;i++)this.writeBit(0);this.writeUInt(t+1,e)},t.prototype.writeSignedExponentialGolombCode=function(t){0===t?this.writeExponentialGolombCode(0):t<0?this.writeExponentialGolombCode(-2*t):this.writeExponentialGolombCode(2*t-1)},t.prototype.padByte=function(t){for(;!this.isWritingStartBit;)this.writeBit(t)},t.prototype.writeBool=function(t){this.writeBit(t?1:0)},t.prototype.writeString=function(t){for(var e=function(t){for(var e=new x(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(t),i=0;i<e.length;i++)this.writeByte(e[i])},t.BUFFER_CHUNK_SIZE=1024,t}(),mA=function(){function t(t){this.rb=new Yo,this.Dd=t}return t.prototype.closeWriter=function(){void 0!==this.Dd&&(this.rb=this.rb.concat(this.Dd.close()),this.Dd=void 0)},g.defineProperty(t.prototype,"writer",{get:function(){return void 0===this.Dd&&(this.Dd=new wA),this.Dd},enumerable:!1,configurable:!0}),t.prototype.concat=function(t){this.closeWriter(),this.rb=this.rb.concat(t)},t.prototype.toRangedBuffer=function(){return this.closeWriter(),this.rb},t}(),zt=function(){function t(t){if(this.boxType=t,4!==t.length&&16!==t.length)throw new v("The provided box type does not conform to either a 4 character type or a 16 byte uuid.")}return t.prototype.serializeCommonBoxHeader=function(e){var i=this.getSize(),s=i>=t.LARGE_SIZE/8,n=16===this.boxType.length;e.writeUInt(s?1:i,32),e.writeString(n?"uuid":this.boxType),s&&(e.writeUInt(w.floor(i/t.LARGE_SIZE),32),e.writeUInt(i%t.LARGE_SIZE,32)),n&&e.writeString(this.boxType)},t.prototype.getSize=function(){var e=8+(this.boxType.length>4?16:0),i=this.getBoxContentSize()+e;return i>=t.LARGE_SIZE/8&&(i+=8),i},t.prototype.serialize=function(){var t=new mA;return this.serializeCommonBoxHeader(t.writer),this.serializeBoxContent(t),t.toRangedBuffer()},t.LARGE_SIZE=w.pow(2,32),t}();function Se(t,e){return t instanceof Te?64===e:t<w.pow(2,e)}function Ki(t,e){return w.round(t*w.pow(2,e))}function Ps(t,e){for(var i=0;i<e.length;i++)t.writeByte(e[i])}function Wt(t,e){return t/w.pow(2,e)}var jc=function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!Se(i,8))throw new v("the provided version cannot fit in 8 bits.");return n.flags=s,n}return fi(e,t),g.defineProperty(e.prototype,"flags",{get:function(){return this.YC},set:function(t){this.YC=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new v("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(zt),pA=function(t){function e(e,i){var s=t.call(this,e)||this;return s.data=i,s}return fi(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(Yo.from(this.data))},e}(zt),yA=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t}();var AA=16384;function bA(t){var e=t.length;if(e<=AA)return String.fromCharCode.apply(String,t);for(var i=[],s=0;s<e;s+=AA)i.push(String.fromCharCode.apply(String,t.slice(s,s+AA)));return i.join("")}var TA=function(){function t(t){this.raw=t}return t.prototype.isSet=function(t){return function(t,e){return(t&e)===e}(this.raw,t)},t}();function cs(t,e){var i=t.getUint8(e.offset);return e.shift(1),i}function SA(t,e,i){var s=CA(NA(t),e.offset,e.offset+i);return e.shift(s.byteLength),s}function kA(t,e,i){return e.offset+i<=t.byteLength}function ps(t,e,i){void 0===i&&(i=!1);var s=t.getUint32(e.offset,i);return e.shift(4),s}function EA(t,e,i){void 0===i&&(i=!1);var s=ps(t,e,i),n=ps(t,e,i),r=i?n:s,h=i?s:n;return Te.fromBits(h,r,!0)}function IA(t,e,i){return bA(function(t){return[].slice.call(t)}(SA(t,e,i)))}function PA(t,e){var i,s=cs(t,e);return 0==(128&s)?i=s:192==(224&s)?i=64*(31&s)+(63&cs(t,e)):224==(240&s)?i=4096*(15&s)+64*(63&cs(t,e))+(63&cs(t,e)):240==(248&s)&&(i=262144*(7&s)+4096*(63&cs(t,e))+64*(63&cs(t,e))+(63&cs(t,e))),i}function RA(t,e){return function(t,e,i){var s=[],n=function(t,e){return e.offset+3<=t.byteLength&&239===t.getUint8(e.offset)&&187===t.getUint8(e.offset+1)&&191===t.getUint8(e.offset+2)}(t,e);n&&e.shift(3);for(;e.offset<t.byteLength;){var r=PA(t,e);if(void 0===r)break;if(i&&0===r)break;s.push(r)}return function(t){for(var e=[],i=0,s=t;i<s.length;i++){var n=s[i];n>65535&&(n-=65536,e.push(n>>>10&1023|55296),n=56320|1023&n),e.push(n)}return bA(e)}(s)}(t,e,!0)}function CA(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new x(t.buffer,t.byteOffset+e,i-e)}function xA(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=t.byteLength),new DataView(t.buffer,t.byteOffset+e,i-e)}function DA(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function NA(t){return new x(t.buffer,t.byteOffset,t.byteLength)}var BA=function(){function t(t){void 0===t&&(t=0),this.offset=t}return t.prototype.shift=function(t){this.offset+=t},t.prototype.seek=function(t){this.offset=t},t.prototype.clone=function(){return new t(this.offset)},t.prototype.toBit=function(){return new yA(this.offset<<3)},t}(),LA=function(){function t(t,e){this.data=t,this.cursor=e}return t.prototype.nextUint8=function(){return cs(this.data,this.cursor)},t.prototype.nextUint16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getUint16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextInt16=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt16(e.offset,i);return e.shift(2),s}(this.data,this.cursor)},t.prototype.nextUint32=function(){return ps(this.data,this.cursor)},t.prototype.nextInt32=function(){return function(t,e,i){void 0===i&&(i=!1);var s=t.getInt32(e.offset,i);return e.shift(4),s}(this.data,this.cursor)},t.prototype.nextInt64=function(){return function(t,e,i){void 0===i&&(i=!1);var s=ps(t,e,i),n=ps(t,e,i),r=i?n:s,h=i?s:n;return Te.fromBits(h,r,!1)}(this.data,this.cursor)},t.prototype.nextUint64=function(){return EA(this.data,this.cursor)},t.prototype.nextUint8Array=function(t){return SA(this.data,this.cursor,t)},t.prototype.nextUint32Array=function(t){return function(t,e,i){for(var s=[],n=0;n<i;n++)s.push(ps(t,e));return s}(this.data,this.cursor,t)},t.prototype.nextChars=function(t){return IA(this.data,this.cursor,t)},t.prototype.nextUTF8String=function(){return RA(this.data,this.cursor)},t.prototype.skip=function(t){this.cursor.shift(t)},t.prototype.clone=function(){return new t(this.data,this.cursor.clone())},t}();function C(t,e){return t.type===e}var OA=8;function Je(t){var e=function(t,e){var i=[];for(;e.offset<t.byteLength;){var s=MA(t,e);if(!s.complete)return{complete:!1,boxes:i};i.push(s.box)}return{complete:!0,boxes:i}}(t.data,t.cursor);if(!e.complete)throw new v("Data incomplete");return e.boxes}function MA(t,e){var i=e.offset,s=function(t,e){var i=e.offset;if(!kA(t,e,OA)){return{complete:!1,neededOffset:r=e.offset+OA}}var s=ps(t,e),n=IA(t,e,4);if(1===s){if(!kA(t,e,8)){var r=e.offset+8;return e.seek(i),{complete:!1,neededOffset:r}}s=EA(t,e).toNumber()}if("uuid"===n){if(!kA(t,e,16)){r=e.offset+16;return e.seek(i),{complete:!1,neededOffset:r}}n=IA(t,e,16)}var h=e.offset,o={type:n,size:s,headerSize:h-i};return{complete:!0,header:o}}(t,e);if(!s.complete)return s;var n=s.header,r=n.size;0===r&&(r=t.byteLength-i);var h=i+r;if(h>t.byteLength){var o=h;return e.seek(i),{complete:!1,neededOffset:o}}var a={type:n.type,offset:i,data:new LA(xA(t,i,h),new BA(n.headerSize))};return e.seek(h),{complete:!0,box:a}}function Cc(t){return{version:t>>24,flags:new TA(16777215&t)}}function FA(t,e){var i,s,n,r;return 1===e?(i=t.nextUint64(),s=t.nextUint64(),n=t.nextUint32(),r=t.nextUint64()):(i=t.nextUint32(),s=t.nextUint32(),n=t.nextUint32(),r=t.nextUint32()),{creation:i,modification:s,scale:n,duration:r}}function UA(t){return t.skipBits(4),{isLeading:t.readUInt(2),sampleDependsOn:t.readUInt(2),sampleIsDependedOn:t.readUInt(2),sampleHasRedundancy:t.readUInt(2),samplePaddingValue:t.readUInt(3),sampleIsNonSyncSample:Boolean(t.readBit()),sampleDegradationPriority:t.readUInt(16)}}function HA(t){var e=t.nextUint32Array(9);return{a:Wt(e[0],16),b:Wt(e[1],16),u:Wt(e[2],30),c:Wt(e[3],16),d:Wt(e[4],16),v:Wt(e[5],30),x:Wt(e[6],16),y:Wt(e[7],16),w:Wt(e[8],30)}}function oh(t){return new pA(t.type,CA(NA(t.data.data),t.data.cursor.offset))}var VA=function(t){function e(e,i,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var r=t.call(this,"hdlr",s,n)||this;return r.name=i,r.handlerType=e,r}return fi(e,t),g.defineProperty(e.prototype,"handlerType",{get:function(){return this.ZC},set:function(t){this.ZC=t},enumerable:!1,configurable:!0}),e.prototype.serializeReserved=function(t){t.writer.writeUInt(0,32),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)},e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+4+4+12+(null!==(i=null===(e=this.name)||void 0===e?void 0:e.length)&&void 0!==i?i:0)+1},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeString(this.handlerType),this.serializeReserved(e),this.name&&e.writer.writeString(this.name),e.writer.writeByte(0)},e}(jc);function WA(t){var e=t.data,i=Cc(e.nextUint32()),s=i.version,n=i.flags;e.skip(4);var r=e.nextChars(4);e.skip(12);var h=e.nextUTF8String();return new VA(r,h,s,n.raw)}!function(t){function e(){return t.call(this,"mdir")||this}fi(e,t),e.prototype.serializeReserved=function(t){t.writer.writeString("appl"),t.writer.writeUInt(0,32),t.writer.writeUInt(0,32)}}(VA);var qA=function(){function t(t,e){void 0===e&&(e=!1),this.fixed28BitMode=e,this.tag=t}return t.prototype.encodeSize=function(t){for(var e=[];t>0;)e.length>0&&(e[e.length-1]+=128),e.push(t%128),t>>=7;if(this.fixed28BitMode)for(;e.length<4;)e.push(128);return e.reverse()},g.defineProperty(t.prototype,"tag",{get:function(){return this.JC},set:function(t){if(!Se(t,8))throw new v("Provided tag does not fit in 8 bits.");this.JC=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return this.getDescriptorSize()+1+this.encodeSize(this.getDescriptorSize()).length},t.prototype.serialize=function(t){t.writer.writeByte(this.tag);for(var e=0,i=this.encodeSize(this.getDescriptorSize());e<i.length;e++){var s=i[e];t.writer.writeByte(s)}this.serializeDescriptorContent(t)},t}(),zA=(function(t){function e(e,i,s,n,r,h,o){void 0===o&&(o={});var a=t.call(this,4,o.fixed28BitMode)||this;return a.upStream=s,a.decoderSpecificInfo=h,a.objectTypeIndication=e,a.streamType=i,a.bufferSizeDb=n,a.maxBitrate=r.max,a.avgBitrate=r.avg,a}fi(e,t),g.defineProperty(e.prototype,"objectTypeIndication",{get:function(){return this.$C},set:function(t){if(!Se(t,8))throw new v("Provided objectTypeIndication does not fit in 8 bits.");this.$C=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"streamType",{get:function(){return this.tx},set:function(t){if(!Se(t,6))throw new v("Provided streamType does not fit in 6 bits.");this.tx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.ix},set:function(t){if(!Se(t,24))throw new v("Provided bufferSizeDb does not fit in 24 bits.");this.ix=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"maxBitrate",{get:function(){return this.sx},set:function(t){if(!Se(t,32))throw new v("Provided maxBitrate does not fit in 32 bits.");this.sx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"avgBitrate",{get:function(){return this.nx},set:function(t){if(!Se(t,32))throw new v("Provided avgBitrate does not fit in 32 bits.");this.nx=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 13+this.decoderSpecificInfo.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.objectTypeIndication),t.writer.writeUInt(this.streamType,6),t.writer.writeBool(this.upStream),t.writer.writeBit(1),t.writer.writeUInt(this.bufferSizeDb,24),t.writer.writeUInt(this.maxBitrate,32),t.writer.writeUInt(this.avgBitrate,32);for(var e=0,i=this.decoderSpecificInfo;e<i.length;e++){i[e].serialize(t)}}}(qA),function(t){function e(e,i){void 0===i&&(i={});var s=t.call(this,5,i.fixed28BitMode)||this;return s.data=e,s}fi(e,t),e.prototype.getDescriptorSize=function(){return this.data.length},e.prototype.serializeDescriptorContent=function(t){t.concat(Yo.from(this.data))}}(qA),function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this,6,e)||this;return i.predefined=2,i}return fi(e,t),e.prototype.getDescriptorSize=function(){return 1},e.prototype.serializeDescriptorContent=function(t){t.writer.writeByte(this.predefined)},e}(qA)),XA=(function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,3,n.fixed28BitMode)||this;return r.decoderConfigDescriptor=s,r.esId=e,r.streamPriority=i,r.dependsOnEsId=null==n?void 0:n.dependsOnEsId,r.urlString=null==n?void 0:n.url,r.ocrEsId=null==n?void 0:n.ocrEsId,r.slConfigDescriptor=new zA(n.fixed28BitMode),r}fi(e,t),g.defineProperty(e.prototype,"streamDependenceFlag",{get:function(){return void 0!==this.dependsOnEsId},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"urlFlag",{get:function(){return void 0!==this.urlString},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"ocrStreamFlag",{get:function(){return void 0!==this.ocrEsId},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"esId",{get:function(){return this.hx},set:function(t){if(!Se(t,16))throw new v("Provided esId does not fit in 16 bits.");this.hx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"streamPriority",{get:function(){return this.ox},set:function(t){if(!Se(t,5))throw new v("Provided streamPriority does not fit in 5 bits.");this.ox=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"dependsOnEsId",{get:function(){return this.ux},set:function(t){if(t&&!Se(t,16))throw new v("Provided dependsOnEsId does not fit in 16 bits.");this.ux=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"ocrEsId",{get:function(){return this.lx},set:function(t){if(t&&!Se(t,16))throw new v("Provided ocrEsId does not fit in 16 bits.");this.lx=t},enumerable:!1,configurable:!0}),e.prototype.getDescriptorSize=function(){return 3+(this.streamDependenceFlag?2:0)+(this.urlFlag?1+this.urlString.length:0)+(this.ocrStreamFlag?2:0)+this.decoderConfigDescriptor.getSize()+this.slConfigDescriptor.getSize()},e.prototype.serializeDescriptorContent=function(t){t.writer.writeUInt(this.esId,16),t.writer.writeBool(this.streamDependenceFlag),t.writer.writeBool(this.urlFlag),t.writer.writeBool(this.ocrStreamFlag),t.writer.writeUInt(this.streamPriority,5),this.streamDependenceFlag&&t.writer.writeUInt(this.dependsOnEsId,16),this.urlFlag&&(t.writer.writeByte(this.urlString.length),t.writer.writeString(this.urlString)),this.ocrStreamFlag&&t.writer.writeUInt(this.ocrEsId,16),this.decoderConfigDescriptor.serialize(t),this.slConfigDescriptor.serialize(t)}}(qA),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxes=[],e}return fi(e,t),e.prototype.getSize=function(){return t.prototype.getSize.call(this)+this.boxes.reduce((function(t,e){return t+e.getSize()}),0)},e.prototype.serialize=function(){for(var e=t.prototype.serialize.call(this),i=0,s=this.boxes;i<s.length;i++){var n=s[i];e=e.concat(n.serialize())}return e},e}(zt)),$e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return fi(e,t),e.prototype.serializeBoxContent=function(t){},e.prototype.getBoxContentSize=function(){return 0},e}(XA),GA=function(t){function e(e,i){var s=t.call(this,e)||this;return s.dataReferenceIndex=i,s}return fi(e,t),g.defineProperty(e.prototype,"dataReferenceIndex",{get:function(){return this._x},set:function(t){if(!Se(t,16))throw new v("Provided dataReferenceIndex does not fit in 16 bits.");this._x=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){for(var e=0;e<6;e++)t.writer.writeByte(0);t.writer.writeUInt(this.dataReferenceIndex,16)},e}($e),QA=function(t){function e(e,i,s,n){var r,h,o=this;return(o=t.call(this,e,i)||this).extra=n,o.channelCount=null!==(r=s.channelCount)&&void 0!==r?r:2,o.sampleSize=null!==(h=s.sampleSize)&&void 0!==h?h:16,o.sampleRate=s.sampleRate,o}return fi(e,t),g.defineProperty(e.prototype,"channelCount",{get:function(){return this.gx},set:function(t){if(!Se(t,16))throw new v("Provided channelCount does not fit in 16 bits.");this.gx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleSize",{get:function(){return this.vx},set:function(t){if(!Se(t,16))throw new v("Provided sampleSize does not fit in 16 bits.");this.vx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleRate",{get:function(){return this.wx},set:function(t){if(!Se(Ki(t,16),32))throw new v("Provided rate does not fit in 32 bits (fixed 16.16).");this.wx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+8+2+2+2+2+(void 0!==this.sampleRate?4:0)+(null!==(i=null===(e=this.extra)||void 0===e?void 0:e.length)&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.channelCount,16),e.writer.writeUInt(this.sampleSize,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(Ki(this.sampleRate,16),32),this.extra&&Ps(e.writer,this.extra)},e}(GA),KA=(function(t){function e(e){var i=t.call(this,"stco",0,0)||this;return i.entries=e,i}fi(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.mx},set:function(t){if(!Se(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Se(t,32)})))throw new v("Not all entries can be represented in 32 bits.");this.mx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(jc),function(t){function e(e){var i=t.call(this,"clap")||this;return i.cleanApertureWidthN=e.cleanApertureWidthN,i.cleanApertureWidthD=e.cleanApertureWidthD,i.cleanApertureHeightN=e.cleanApertureHeightN,i.cleanApertureHeightD=e.cleanApertureHeightD,i.horizOffN=e.horizOffN,i.horizOffD=e.horizOffD,i.vertOffN=e.vertOffN,i.vertOffD=e.vertOffD,i}fi(e,t),g.defineProperty(e.prototype,"cleanApertureWidthN",{get:function(){return this.yx},set:function(t){if(!Se(t,32))throw new v("Provided cleanApertureWidthN does not fit in 32 bits.");this.yx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"cleanApertureWidthD",{get:function(){return this.Ax},set:function(t){if(!Se(t,32))throw new v("Provided cleanApertureWidthD does not fit in 32 bits.");this.Ax=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"cleanApertureHeightN",{get:function(){return this.bx},set:function(t){if(!Se(t,32))throw new v("Provided cleanApertureHeightN does not fit in 32 bits.");this.bx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"cleanApertureHeightD",{get:function(){return this.Tx},set:function(t){if(!Se(t,32))throw new v("Provided cleanApertureHeightD does not fit in 32 bits.");this.Tx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"horizOffN",{get:function(){return this.Sx},set:function(t){if(!Se(t,32))throw new v("Provided horizOffN does not fit in 32 bits.");this.Sx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"horizOffD",{get:function(){return this.kx},set:function(t){if(!Se(t,32))throw new v("Provided horizOffD does not fit in 32 bits.");this.kx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"vertOffN",{get:function(){return this.Ex},set:function(t){if(!Se(t,32))throw new v("Provided vertOffN does not fit in 32 bits.");this.Ex=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"vertOffD",{get:function(){return this.Ix},set:function(t){if(!Se(t,32))throw new v("Provided vertOffD does not fit in 32 bits.");this.Ix=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 32},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.cleanApertureWidthN,32),t.writer.writeUInt(this.cleanApertureWidthD,32),t.writer.writeUInt(this.cleanApertureHeightN,32),t.writer.writeUInt(this.cleanApertureHeightD,32),t.writer.writeUInt(this.horizOffN,32),t.writer.writeUInt(this.horizOffD,32),t.writer.writeUInt(this.vertOffN,32),t.writer.writeUInt(this.vertOffD,32)}}(zt),function(t){function e(e,i){var s=t.call(this,"ctts",e,0)||this;return s.entries=i,s}fi(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.mx},set:function(t){if(!Se(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Se(t.sampleCount,32)||!Se(t.sampleOffset,32)})))throw new v("Not all entries can be represented in 64 bits.");this.mx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),0===this.version?e.writer.writeUInt(n.sampleOffset,32):1===this.version&&e.writer.writeInt(n.sampleOffset,32)}}}(jc),function(t){function e(e){var i=t.call(this,"url ",0,void 0===e?1:0)||this;return i.location=e,i}fi(e,t),g.defineProperty(e.prototype,"location",{get:function(){return this.Px},set:function(t){this.flags=void 0===t?1:0,this.Px=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this);return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(jc),function(t){function e(e,i,s){var n=t.call(this,"urn ",0,s)||this;return n.name=e,n.location=i,n}fi(e,t),g.defineProperty(e.prototype,"location",{get:function(){return this.Px},set:function(t){if(1&this.flags)throw new v("The moov containment flag is set, a DataEntryUrlBox should be used instead.");this.Px=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+this.name.length+1;return this.location?e+this.location.length+1:e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.name),e.writer.writeByte(0),this.location&&(e.writer.writeString(this.location),e.writer.writeByte(0))}}(jc),function(t){function e(){return t.call(this,"dinf")||this}fi(e,t)}($e),function(t){function e(e,i,s){var n=t.call(this,e)||this;if(n.version=i,!Se(i,8))throw new v("the provided version cannot fit in 8 bits.");return n.flags=s,n}return fi(e,t),g.defineProperty(e.prototype,"flags",{get:function(){return this.YC},set:function(t){this.YC=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeFlags=function(t){if("number"!=typeof this.flags)throw new v("Missing custom serializeFlags method.");t.writer.writeUInt(this.flags,24)},e.prototype.serializeBoxContent=function(t){t.writer.writeByte(this.version),this.serializeFlags(t)},e}(XA)),jA=(function(t){function e(){return t.call(this,"dref",0,0)||this}fi(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(KA),function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"elst",i,s)||this;return n.entries=e,n}return fi(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"entries",{get:function(){return this.mx},set:function(t){for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!Se(s.segmentDuration,this.bitSize))throw new v("SegmentDuration of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Se(s.mediaTime,this.bitSize))throw new v("MediaTime of one of the entries does not fit in ".concat(this.bitSize," bits."));if(!Se(s.mediaRateInteger,16))throw new v("Provided mediaRateInteger does not fit in 16 bits.");if(s.mediaRateFraction&&!Se(s.mediaRateFraction,16))throw new v("Provided mediaRateFraction does not fit in 16 bits.")}this.mx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(2*this.bitSize/8+2+2)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32),this.serializeElstBoxContent(e)},e}(jc)),YA=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return fi(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration,32),t.writer.writeInt(n.mediaTime,32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(jA),ZA=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return fi(e,t),e.prototype.serializeElstBoxContent=function(t){for(var e,i=0,s=this.entries;i<s.length;i++){var n=s[i];t.writer.writeUInt(n.segmentDuration.getHighBitsUnsigned(),32),t.writer.writeUInt(n.segmentDuration.getLowBitsUnsigned(),32),t.writer.writeInt(n.mediaTime.getHighBits(),32),t.writer.writeInt(n.mediaTime.getLowBits(),32),t.writer.writeUInt(n.mediaRateInteger,16),t.writer.writeUInt(null!==(e=n.mediaRateFraction)&&void 0!==e?e:0,16)}},e}(jA);function JA(t){for(var e=t.data,i=Cc(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),h=[],o=0;o<r;o++){var a=void 0,u=void 0;0===s?(a=e.nextUint32(),u=e.nextInt32()):(a=e.nextUint64(),u=e.nextInt64());var c=e.nextInt16(),l=e.nextInt16();h.push({segmentDuration:a,mediaTime:u,mediaRateFraction:l,mediaRateInteger:c})}return 0===s?new YA(h,n.raw):new ZA(h,n.raw)}var $A=function(t){function e(){return t.call(this,"edts")||this}return fi(e,t),e}($e);function tb(t){for(var e=new $A,i=0,s=Je(t.data);i<s.length;i++){var n=s[i];C(n,"elst")?e.boxes.push(JA(n)):e.boxes.push(oh(n))}return e}var eb=function(t){function e(e,i,s,n){var r=t.call(this,e)||this;return r.majorBrand=i,r.minorVersion=s,r.compatibleBrands=n,r}return fi(e,t),g.defineProperty(e.prototype,"majorBrand",{get:function(){return this.Rx},set:function(t){if(4!==t.length)throw new v("the provided major brand does not conform to the 4 character requirement");this.Rx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"minorVersion",{get:function(){return this.Cx},set:function(t){if(!Se(t,32))throw new v("the provided minor version does not fit in 32 bits.");this.Cx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"compatibleBrands",{get:function(){return this.xx},set:function(t){if(t.some((function(t){return 4!==t.length})))throw new v("Some of the compatible brands do not conform to the 4 character requirement");this.xx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4*(2+this.compatibleBrands.length)},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.majorBrand),t.writer.writeUInt(this.minorVersion,32);for(var e=0,i=this.compatibleBrands;e<i.length;e++){var s=i[e];t.writer.writeString(s)}},e}(zt),ib=function(t){function e(e,i,s){return t.call(this,"ftyp",e,i,s)||this}return fi(e,t),e}(eb);function sb(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new ib(i,s,n)}var nb=function(t){function e(e,i){void 0===i&&(i="free");var s=t.call(this,i)||this;return s.data=e,s}return fi(e,t),e.prototype.getBoxContentSize=function(){var t,e;return null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0},e.prototype.serializeBoxContent=function(t){this.data&&t.concat(Yo.from(this.data))},e}(zt),rb=function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=t.call(this,"mdhd",s,n)||this;return r.creationTime=e.creation,r.modificationTime=e.modification,r.timescale=e.scale,r.duration=e.duration,r.language=i,r}return fi(e,t),g.defineProperty(e.prototype,"creationTime",{get:function(){return this.Dx},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Dx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"modificationTime",{get:function(){return this.Nx},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Nx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"timescale",{get:function(){return this.Bx},set:function(t){if(!Se(t,32))throw new v("Provided sequence number does not fit in 32 bits.");this.Bx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"duration",{get:function(){return this.Zl},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Zl=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"language",{get:function(){return this.Lx},set:function(t){if(!ub(t))throw new v("Expected an ISO-639-2/T language code");this.Lx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMdiaContent(e),e.writer.writeBit(0);for(var i=0,s=this.language;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.charCodeAt(0)-96,5)}e.writer.writeUInt(0,16)},e}(jc),hb=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,0,s)||this}return fi(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(rb),ob=function(t){function e(e,i,s){return void 0===s&&(s=0),t.call(this,e,i,1,s)||this}return fi(e,t),e.prototype.serializeMdiaContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(rb);function ab(t){var e=t.data,i=Cc(e.nextUint32()),s=i.version,n=i.flags,r=FA(e,s),h=new te(Yo.from(e.nextUint8Array(2)));h.skipBits(1);for(var o=[],a=0;a<3;a++)o.push(h.readUInt(5));var u=o.map((function(t){return String.fromCharCode(t+96)})).join("");return ub(u)||(u="und"),e.skip(2),0===s?new hb(r,u,n.raw):new ob(r,u,n.raw)}function ub(t){return/^[a-z]{3}$/.test(t)}var cb=function(t){function e(){return t.call(this,"mdia")||this}return fi(e,t),e}($e);function lb(t){for(var e=new cb,i=0,s=Je(t.data);i<s.length;i++){var n=s[i];C(n,"mdhd")?e.boxes.push(ab(n)):C(n,"hdlr")?e.boxes.push(WA(n)):e.boxes.push(oh(n))}return e}var db=function(t){function e(){var e=t.call(this,"mdat")||this;return e.data=new Yo,e}return fi(e,t),e.prototype.getBoxContentSize=function(){return this.data.length},e.prototype.serializeBoxContent=function(t){t.concat(this.data)},e}(zt);function fb(t){var e=t.data,i=e.nextUint8Array(e.data.byteLength-e.cursor.offset),s=new db;return s.data.pushRange(i),s}var _b;(function(t){function e(){return t.call(this,"minf")||this}fi(e,t)})($e),function(t){function e(e){var i=t.call(this,"meta",0,0)||this;return i.handler=e,i}fi(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.handler.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.handler.serialize())}}(KA);!function(t){t.VIDEO="vide",t.AUXILIARY_VIDEO="auxv",t.AUDIO="soun",t.METADATA="meta",t.HINT="hint",t.TEXT="text",t.SUBTITLE="subt",t.FONT="fdsm"}(_b||(_b={}));var gb,vb,wb={a:1,b:0,u:0,c:0,d:1,v:0,x:0,y:0,w:1};function mb(t,e){e.writer.writeUInt(Ki(t.a,16),32),e.writer.writeUInt(Ki(t.b,16),32),e.writer.writeUInt(Ki(0,30),32),e.writer.writeUInt(Ki(t.c,16),32),e.writer.writeUInt(Ki(t.d,16),32),e.writer.writeUInt(Ki(0,30),32),e.writer.writeUInt(Ki(t.x,16),32),e.writer.writeUInt(Ki(t.y,16),32),e.writer.writeUInt(Ki(1,30),32)}function pb(t,e){var i,s,n,r;e.writer.writeUInt(null!==(i=t.isLeading)&&void 0!==i?i:gb.UNKNOWN,2),e.writer.writeUInt(null!==(s=t.sampleDependsOn)&&void 0!==s?s:vb.UNKNOWN,2),e.writer.writeUInt(null!==(n=t.sampleIsDependedOn)&&void 0!==n?n:vb.UNKNOWN,2),e.writer.writeUInt(null!==(r=t.sampleHasRedundancy)&&void 0!==r?r:vb.UNKNOWN,2)}function yb(t,e){var i,s,n;e.writer.writeUInt(0,4),pb(t,e),e.writer.writeUInt(null!==(i=t.samplePaddingValue)&&void 0!==i?i:0,3),e.writer.writeBool(null!==(s=t.sampleIsNonSyncSample)&&void 0!==s&&s),e.writer.writeUInt(null!==(n=t.sampleDegradationPriority)&&void 0!==n?n:0,16)}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WITH_DEPENDENCY=1]="WITH_DEPENDENCY",t[t.NO=2]="NO",t[t.WITHOUT_DEPENDENCY=3]="WITHOUT_DEPENDENCY"}(gb||(gb={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.YES=1]="YES",t[t.NO=2]="NO",t[t.RESERVED=3]="RESERVED"}(vb||(vb={}));var Ab=function(){},bb=function(t){function e(e,i,s){var n=t.call(this,"pssh",e,0)||this;return n.systemId=i,n.data=s,n}return fi(e,t),g.defineProperty(e.prototype,"systemId",{get:function(){return this.Ox},set:function(t){if(16!==t.length)throw new v("Provided systemId length is not 16.");this.Ox=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"data",{get:function(){return this.Mx},set:function(t){if(!Se(t.length,32))throw new v("Provided data length does not fit in 32 bits.");this.Mx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+16+4+this.data.length},e.prototype.serializeVersionBoxContent=function(t){},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(Yo.from(this.systemId)),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.data.length,32),e.concat(Yo.from(this.data))},e}(jc),Tb=function(t){function e(e,i){return t.call(this,0,e,i)||this}return fi(e,t),e}(bb),Sb=function(t){function e(e,i,s){var n=t.call(this,1,e,i)||this;return n.kIds=s,n}return fi(e,t),g.defineProperty(e.prototype,"kIds",{get:function(){return this.Fx},set:function(t){if(!Se(t.length,32))throw new v("Provided kIds length cannot fit in 32 bits.");if(t.some((function(t){return 16!==t.length})))throw new v("Not all provided key ids are 16 bytes long.");this.Fx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+16*this.kIds.length},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.kIds.length,32);for(var e=0,i=this.kIds;e<i.length;e++){var s=i[e];t.concat(Yo.from(s))}},e}(bb);function Xr(t){var e=t.data.nextUint8();t.data.skip(3);var i=t.data.nextUint8Array(16),s=[];if(1===e)for(var n=t.data.nextUint32(),r=0;r<n;r++)s.push(t.data.nextUint8Array(16));var h=t.data.nextUint32(),o=t.data.nextUint8Array(h);return 1===e?new Sb(i,o,s):new Tb(i,o)}var kb=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"mehd",i,s)||this;return n.fragmentDuration=e,n}return fi(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"fragmentDuration",{get:function(){return this.Ux},set:function(t){if(!Se(t,this.bitSize))throw new v("The provided fragmentDuration does not fit in ".concat(this.bitSize," bits."));this.Ux=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(jc),Eb=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return fi(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration,32)},e}(kb),Ib=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return fi(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.fragmentDuration.getHighBitsUnsigned(),32),e.writer.writeUInt(this.fragmentDuration.getLowBitsUnsigned(),32)},e}(kb);function Pb(t){var e=t.data,i=Cc(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new Eb(e.nextUint32(),n.raw):new Ib(e.nextUint64(),n.raw)}var Rb=function(t){function e(e,i,s,n){void 0===i&&(i={}),void 0===s&&(s=0),void 0===n&&(n=0);var r,h,o,a=this;return(a=t.call(this,"trex",s,n)||this).trackId=e,a.defaultSampleDescriptionIndex=null!==(r=null==i?void 0:i.sampleDescriptionIndex)&&void 0!==r?r:0,a.defaultSampleDuration=null!==(h=i.sampleDuration)&&void 0!==h?h:0,a.defaultSampleSize=null!==(o=i.sampleSize)&&void 0!==o?o:0,a.defaultSampleFlags=i.sampleFlags,a}return fi(e,t),g.defineProperty(e.prototype,"trackId",{get:function(){return this.Hx},set:function(t){if(!Se(t,32))throw new v("Provided track id does not fit in 32 bits.");this.Hx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.Vx},set:function(t){if(!Se(t,32))throw new v("Provided default sample description index does not fit in 32 bits.");this.Vx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.Wx},set:function(t){if(!Se(t,32))throw new v("Provided default sample duration does not fit in 32 bits.");this.Wx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.qx},set:function(t){if(!Se(t,32))throw new v("Provided default sample size does not fit in 32 bits.");this.qx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.zx},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Se(t.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Se(t.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");this.zx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+20},e.prototype.serializeBoxContent=function(e){var i;t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),e.writer.writeUInt(this.defaultSampleDescriptionIndex,32),e.writer.writeUInt(this.defaultSampleDuration,32),e.writer.writeUInt(this.defaultSampleSize,32),yb(null!==(i=this.defaultSampleFlags)&&void 0!==i?i:{},e)},e}(jc);function Cb(t){var e=t.data,i=Cc(e.nextUint32()),s=i.version,n=i.flags,r=e.nextUint32(),h=e.nextUint32(),o=e.nextUint32(),a=e.nextUint32(),u=UA(new te(Yo.from(e.nextUint8Array(4))));return new Rb(r,{sampleDescriptionIndex:h,sampleDuration:o,sampleSize:a,sampleFlags:u},s,n.raw)}var xb=function(t){function e(){return t.call(this,"mvex")||this}return fi(e,t),e}($e);function Db(t){for(var e=new xb,i=0,s=Je(t.data);i<s.length;i++){var n=s[i];C(n,"mehd")?e.boxes.push(Pb(n)):C(n,"trex")?e.boxes.push(Cb(n)):e.boxes.push(oh(n))}return e}var Nb=function(t){function e(i,s,n,r,h){void 0===h&&(h=0);var o,a,u,c=this;return(c=t.call(this,"mvhd",r,h)||this).creationTime=i.creation,c.modificationTime=i.modification,c.timescale=i.scale,c.duration=i.duration,c.rate=null!==(o=n.rate)&&void 0!==o?o:e.DEFAULT_RATE,c.volume=null!==(a=n.volume)&&void 0!==a?a:e.DEFAULT_VOLUME,c.matrix=null!==(u=n.matrix)&&void 0!==u?u:wb,c.Xx=s,c}return fi(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"creationTime",{get:function(){return this.Dx},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Dx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"modificationTime",{get:function(){return this.Nx},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Nx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"timescale",{get:function(){return this.Bx},set:function(t){if(!Se(t,32))throw new v("Provided sequence number does not fit in 32 bits.");this.Bx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"duration",{get:function(){return this.Zl},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Zl=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"rate",{get:function(){return this.Gx},set:function(t){if(!Se(Ki(t,16),32))throw new v("Provided rate does not fit in 32 bits (fixed 16.16).");this.Gx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"volume",{get:function(){return this.Qx},set:function(t){if(!Se(Ki(t,8),16))throw new v("Provided volume does not fit in 16 bits (fixed 8.8).");this.Qx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"matrix",{get:function(){return this.Kx},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new v("(u, v, w) does not match the required (0, 0, 1)");this.Kx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"nextTrackId",{get:function(){return this.Xx},set:function(t){if(0===t)throw new v("NextTrackId cannot be 0.");if(!Se(t,32))throw new v("NextTrackId cannot exceed 32 bits.");this.Xx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+2+2+8+36+24+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeMvhdContent(e),e.writer.writeUInt(Ki(this.rate,16),32),e.writer.writeUInt(Ki(this.volume,8),16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),mb(this.matrix,e);for(var i=0;i<6;i++)e.writer.writeUInt(0,32);e.writer.writeUInt(this.nextTrackId,32)},e.DEFAULT_RATE=1,e.DEFAULT_VOLUME=1,e}(jc),Bb=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,0,n)||this}return fi(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration,32)},e}(Nb),Lb=function(t){function e(e,i,s,n){return void 0===s&&(s={}),void 0===n&&(n=0),t.call(this,e,i,s,1,n)||this}return fi(e,t),e.prototype.serializeMvhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.timescale,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Nb);function Ob(t){var e=t.data,i=Cc(e.nextUint32()),s=i.version,n=i.flags,r=FA(e,s),h=Wt(e.nextUint32(),16),o=Wt(e.nextUint16(),8);e.skip(2),e.skip(8);var a=HA(e);e.skip(24);var u=e.nextUint32();return 0===s?new Bb(r,u,{rate:h,volume:o,matrix:a},n.raw):new Lb(r,u,{rate:h,volume:o,matrix:a},n.raw)}var Mb=function(t){function e(e,i,s,n,r,h,o){void 0===o&&(o={});var a,u,c,l=this;return l=t.call(this,"tkhd",e,function(t){var e,i,s,n;return{trackEnabled:null===(e=null==t?void 0:t.trackEnabled)||void 0===e||e,trackInMovie:null===(i=null==t?void 0:t.trackInMovie)||void 0===i||i,trackInPreview:null===(s=null==t?void 0:t.trackInPreview)||void 0===s||s,trackSizeIsAspectRatio:null!==(n=null==t?void 0:t.trackSizeIsAspectRatio)&&void 0!==n&&n}}(o))||this,l.creationTime=i.creation,l.modificationTime=i.modification,l.trackId=s,l.duration=i.duration,l.volume=n,l.width=r,l.height=h,l.layer=null!==(a=o.layer)&&void 0!==a?a:0,l.alternateGroup=null!==(u=o.alternateGroup)&&void 0!==u?u:0,l.matrix=null!==(c=o.matrix)&&void 0!==c?c:wb,l}return fi(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"creationTime",{get:function(){return this.Dx},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Dx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"modificationTime",{get:function(){return this.Nx},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Nx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"trackId",{get:function(){return this.Hx},set:function(t){if(0===t)throw new v("trackId cannot be 0.");if(!Se(t,32))throw new v("trackId cannot exceed 32 bits.");this.Hx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"duration",{get:function(){return this.Zl},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided sequence number does not fit in ".concat(this.bitSize," bits."));this.Zl=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"volume",{get:function(){return this.Qx},set:function(t){if(!Se(Ki(t,8),16))throw new v("Provided volume does not fit in 16 bits (fixed 8.8).");this.Qx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"width",{get:function(){return this.oc},set:function(t){if(!Se(Ki(t,16),32))throw new v("Provided width does not fit in 32 bits (fixed 16.16).");this.oc=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"height",{get:function(){return this.uc},set:function(t){if(!Se(Ki(t,16),32))throw new v("Provided height does not fit in 32 bits (fixed 16.16).");this.uc=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"layer",{get:function(){return this.jx},set:function(t){if(!Se(t,16))throw new v("Provided layer does not fit in 16 bits.");this.jx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"alternateGroup",{get:function(){return this.Yx},set:function(t){if(!Se(t,16))throw new v("Provided alternateGroup does not fit in 16 bits.");this.Yx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"matrix",{get:function(){return this.Kx},set:function(t){if(0!==t.u||0!==t.v||1!==t.w)throw new v("(u, v, w) does not match the required (0, 0, 1)");this.Kx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8*3+4+4+8+2+2+2+2+36+4+4},e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,20),t.writer.writeBool(this.flags.trackSizeIsAspectRatio),t.writer.writeBool(this.flags.trackInPreview),t.writer.writeBool(this.flags.trackInMovie),t.writer.writeBool(this.flags.trackEnabled)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeTkhdContent(e),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.layer,16),e.writer.writeUInt(this.alternateGroup,16),e.writer.writeUInt(Ki(this.volume,8),16),e.writer.writeUInt(0,16),mb(this.matrix,e),e.writer.writeUInt(Ki(this.width,16),32),e.writer.writeUInt(Ki(this.height,16),32)},e}(jc),Jr=function(t){function e(e,i,s,n,r,h){return t.call(this,0,e,i,s,n,r,h)||this}return fi(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime,32),t.writer.writeUInt(this.modificationTime,32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration,32)},e}(Mb),ah=function(t){function e(e,i,s,n,r,h){return t.call(this,1,e,i,s,n,r,h)||this}return fi(e,t),e.prototype.serializeTkhdContent=function(t){t.writer.writeUInt(this.creationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.creationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.modificationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.trackId,32),t.writer.writeUInt(0,32),t.writer.writeUInt(this.duration.getHighBitsUnsigned(),32),t.writer.writeUInt(this.duration.getLowBitsUnsigned(),32)},e}(Mb);function Fb(t){var e,i,s,n,r=t.data,h=Cc(r.nextUint32()),o=h.version,a=h.flags,u=a.isSet(8),c=a.isSet(4),l=a.isSet(2),d=a.isSet(1);0===o?(e=r.nextUint32(),i=r.nextUint32(),s=r.nextUint32(),r.skip(4),n=r.nextUint32()):(e=r.nextUint64(),i=r.nextUint64(),s=r.nextUint32(),r.skip(4),n=r.nextUint64()),r.skip(8);var f=r.nextInt16(),_=r.nextInt16(),g=Wt(r.nextInt16(),8);r.skip(2);var v=HA(r),w=Wt(r.nextUint32(),16),m=Wt(r.nextUint32(),16);return 0===o?new Jr({creation:e,modification:i,duration:n},s,g,w,m,{layer:f,matrix:v,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l}):new ah({creation:e,modification:i,duration:n},s,g,w,m,{layer:f,matrix:v,alternateGroup:_,trackSizeIsAspectRatio:u,trackEnabled:d,trackInPreview:c,trackInMovie:l})}var Ub=function(t){function e(){return t.call(this,"trak")||this}return fi(e,t),e}($e);function Hb(t){for(var e=new Ub,i=0,s=Je(t.data);i<s.length;i++){var n=s[i];C(n,"tkhd")?e.boxes.push(Fb(n)):C(n,"mdia")?e.boxes.push(lb(n)):C(n,"edts")?e.boxes.push(tb(n)):e.boxes.push(oh(n))}return e}var Vb=function(t){function e(){return t.call(this,"moov")||this}return fi(e,t),e}($e);function Wb(t){for(var e=new Vb,i=0,s=Je(t.data);i<s.length;i++){var n=s[i];C(n,"mvhd")?e.boxes.push(Ob(n)):C(n,"trak")?e.boxes.push(Hb(n)):C(n,"mvex")?e.boxes.push(Db(n)):C(n,"pssh")?e.boxes.push(Xr(n)):e.boxes.push(oh(n))}return e}var qb=function(t){function e(e,i,s){void 0===s&&(s=0);var n=t.call(this,"tfdt",i,s)||this;return n.baseMediaDecodeTime=e,n}return fi(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"baseMediaDecodeTime",{get:function(){return this.Zx},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided baseMediaDecodeTime does not fit in ".concat(this.bitSize," bits."));this.Zx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.bitSize/8},e}(jc),ch=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,0,i)||this}return fi(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime,32)},e}(qb),zb=function(t){function e(e,i){return void 0===i&&(i=0),t.call(this,e,1,i)||this}return fi(e,t),e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.baseMediaDecodeTime.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseMediaDecodeTime.getLowBitsUnsigned(),32)},e}(qb);function Xb(t){var e=t.data,i=Cc(e.nextUint32()),s=i.version,n=i.flags;return 0===s?new ch(e.nextUint32(),n.raw):new zb(e.nextUint64(),n.raw)}var Gb=function(t){function e(e,i){void 0===i&&(i=0);var s=t.call(this,"tfhd",i,function(t){return{baseDataOffsetPresent:void 0!==t.baseDataOffset,sampleDescriptionIndexPresent:void 0!==t.sampleDescriptionIndex,defaultSampleDurationPresent:void 0!==t.defaultSampleDuration,defaultSampleSizePresent:void 0!==t.defaultSampleSize,defaultSampleFlagsPresent:void 0!==t.defaultSampleFlags,durationIsEmpty:t.durationIsEmpty,defaultBaseIsMoof:t.defaultBaseIsMoof}}(e))||this;return s.trackId=e.trackId,s.baseDataOffset=e.baseDataOffset,s.sampleDescriptionIndex=e.sampleDescriptionIndex,s.defaultSampleDuration=e.defaultSampleDuration,s.defaultSampleSize=e.defaultSampleSize,s.defaultSampleFlags=e.defaultSampleFlags,s}return fi(e,t),g.defineProperty(e.prototype,"trackId",{get:function(){return this.Hx},set:function(t){if(!Se(t,32))throw new v("Provided track id does not fit in 32 bits.");this.Hx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"baseDataOffset",{get:function(){return this.Jx},set:function(t){if(void 0===t&&this.flags.baseDataOffsetPresent)throw new v("The base data offset present flag is set.");if(void 0!==t&&!this.flags.baseDataOffsetPresent)throw new v("The base data offset present flag is not set.");if(t&&!Se(t,64))throw new v("Provided baseDataOffset does not fit in 32 bits.");this.Jx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleDescriptionIndex",{get:function(){return this.$x},set:function(t){if(void 0===t&&this.flags.sampleDescriptionIndexPresent)throw new v("The sample description index flag is set.");if(void 0!==t&&!this.flags.sampleDescriptionIndexPresent)throw new v("The sample description index flag is not set.");if(t&&!Se(t,32))throw new v("Provided sampleDescriptionIndex does not fit in 32 bits.");this.$x=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleDuration",{get:function(){return this.Wx},set:function(t){if(void 0===t&&this.flags.defaultSampleDurationPresent)throw new v("The default sample duration present flag is set.");if(void 0!==t&&!this.flags.defaultSampleDurationPresent)throw new v("The default sample duration present flag is not set.");if(t&&!Se(t,32))throw new v("Provided defaultSampleDuration does not fit in 32 bits.");this.Wx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.qx},set:function(t){if(void 0===t&&this.flags.defaultSampleSizePresent)throw new v("The default sample size present flag is set.");if(void 0!==t&&!this.flags.defaultSampleSizePresent)throw new v("The default sample size present flag is not set.");if(t&&!Se(t,32))throw new v("Provided defaultSampleSize does not fit in 32 bits.");this.qx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"defaultSampleFlags",{get:function(){return this.zx},set:function(t){if(void 0===t&&this.flags.defaultSampleFlagsPresent)throw new v("The default sample flags present flag is set.");if(void 0!==t&&!this.flags.defaultSampleFlagsPresent)throw new v("The default sample flags present flag is not set.");if((null==t?void 0:t.samplePaddingValue)&&!Se(t.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Se(t.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");this.zx=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeUInt(0,6),t.writer.writeBool(this.flags.defaultBaseIsMoof),t.writer.writeBool(this.flags.durationIsEmpty),t.writer.writeByte(0),t.writer.writeUInt(0,2),t.writer.writeBool(this.flags.defaultSampleFlagsPresent),t.writer.writeBool(this.flags.defaultSampleSizePresent),t.writer.writeBool(this.flags.defaultSampleDurationPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.sampleDescriptionIndexPresent),t.writer.writeBool(this.flags.baseDataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.baseDataOffsetPresent&&(e+=8),this.flags.sampleDescriptionIndexPresent&&(e+=4),this.flags.defaultSampleDurationPresent&&(e+=4),this.flags.defaultSampleSizePresent&&(e+=4),this.flags.defaultSampleFlagsPresent&&(e+=4),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32),this.flags.baseDataOffsetPresent&&(e.writer.writeUInt(this.baseDataOffset.getHighBitsUnsigned(),32),e.writer.writeUInt(this.baseDataOffset.getLowBitsUnsigned(),32)),this.flags.sampleDescriptionIndexPresent&&e.writer.writeUInt(this.sampleDescriptionIndex,32),this.flags.defaultSampleDurationPresent&&e.writer.writeUInt(this.defaultSampleDuration,32),this.flags.defaultSampleSizePresent&&e.writer.writeUInt(this.defaultSampleSize,32),this.flags.defaultSampleFlagsPresent&&yb(this.defaultSampleFlags,e)},e}(jc);function Qb(t){var e=t.data,i=e.nextUint8(),s=new te(Yo.from(e.nextUint8Array(3)));s.skipBits(6);var n=Boolean(s.readBit()),r=Boolean(s.readBit());s.skipBits(10);var h=Boolean(s.readBit()),o=Boolean(s.readBit()),a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=Boolean(s.readBit()),l=e.nextUint32(),d=c?e.nextUint64():void 0,f=u?e.nextUint32():void 0,_=a?e.nextUint32():void 0,g=o?e.nextUint32():void 0,v=h?UA(new te(Yo.from(e.nextUint8Array(4)))):void 0;return new Gb({trackId:l,defaultBaseIsMoof:n,durationIsEmpty:r,baseDataOffset:d,sampleDescriptionIndex:f,defaultSampleDuration:_,defaultSampleSize:g,defaultSampleFlags:v},i)}var jh=function(t){function e(e,i,s){var n=t.call(this,"trun",e,function(t){var e,i,s,n;return{dataOffsetPresent:void 0!==t.dataOffset,firstSampleFlagsPresent:void 0!==t.firstSampleFlags,sampleDurationPresent:null!==(e=t.sampleDurationPresent)&&void 0!==e&&e,sampleSizePresent:null!==(i=t.sampleSizePresent)&&void 0!==i&&i,sampleFlagsPresent:null!==(s=t.sampleFlagsPresent)&&void 0!==s&&s,sampleCompositionTimeOffsetsPresent:null!==(n=t.sampleCompositionTimeOffsetsPresent)&&void 0!==n&&n}}(i))||this;return n.dataOffset=i.dataOffset,n.samples=s,n.firstSampleFlags=i.firstSampleFlags,n}return fi(e,t),g.defineProperty(e.prototype,"dataOffset",{get:function(){return this.tD},set:function(t){if(t&&!Se(t,32))throw new v("Provided data offset does not fit in 32 bits.");this.tD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"firstSampleFlags",{get:function(){return this.eD},set:function(t){if((null==t?void 0:t.samplePaddingValue)&&!Se(t.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null==t?void 0:t.sampleDegradationPriority)&&!Se(t.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");this.eD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"samples",{get:function(){return this.iD},set:function(t){var e,i;if(!Se(t.length,32))throw new v("The sample count cannot be represented in 32 bits.");for(var s=0,n=t;s<n.length;s++){var r=n[s];if(void 0===r.duration&&this.flags.sampleDurationPresent)throw new v("The sample duration present flag is set.");if(void 0!==r.duration&&!this.flags.sampleDurationPresent)throw new v("The sample duration present flag is not set.");if(r.duration&&!Se(r.duration,32))throw new v("Provided sample duration does not fit in 32 bits.");if(void 0===r.size&&this.flags.sampleSizePresent)throw new v("The sample size present flag is set.");if(void 0!==r.size&&!this.flags.sampleSizePresent)throw new v("The sample size present flag is not set.");if(r.size&&!Se(r.size,32))throw new v("Provided sample size does not fit in 32 bits.");if(void 0===r.flags&&this.flags.sampleFlagsPresent)throw new v("The sample flags present flag is set.");if(void 0!==r.flags&&!this.flags.sampleFlagsPresent)throw new v("The sample flags present flag is not set.");if((null===(e=r.flags)||void 0===e?void 0:e.samplePaddingValue)&&!Se(r.flags.samplePaddingValue,3))throw new v("Provided sample padding value does not fit in 3 bits.");if((null===(i=r.flags)||void 0===i?void 0:i.sampleDegradationPriority)&&!Se(r.flags.sampleDegradationPriority,16))throw new v("Provided sample degradation priority does not fit in 16 bits.");if(void 0===r.compositionTimeOffset&&this.flags.sampleCompositionTimeOffsetsPresent)throw new v("The sample compositionTimeOffset present flag is set.");if(void 0!==r.compositionTimeOffset&&!this.flags.sampleCompositionTimeOffsetsPresent)throw new v("The sample compositionTimeOffset present flag is not set.");if(r.compositionTimeOffset&&!Se(r.compositionTimeOffset,32))throw new v("Provided sample compositionTimeOffset does not fit in 32 bits.")}this.iD=t},enumerable:!1,configurable:!0}),e.prototype.serializeFlags=function(t){t.writer.writeByte(0),t.writer.writeUInt(0,4),t.writer.writeBool(this.flags.sampleCompositionTimeOffsetsPresent),t.writer.writeBool(this.flags.sampleFlagsPresent),t.writer.writeBool(this.flags.sampleSizePresent),t.writer.writeBool(this.flags.sampleDurationPresent),t.writer.writeUInt(0,5),t.writer.writeBool(this.flags.firstSampleFlagsPresent),t.writer.writeBit(0),t.writer.writeBool(this.flags.dataOffsetPresent)},e.prototype.getBoxContentSize=function(){var e=t.prototype.getBoxContentSize.call(this)+4;return this.flags.dataOffsetPresent&&(e+=4),this.flags.firstSampleFlagsPresent&&(e+=4),this.flags.sampleDurationPresent&&(e+=4*this.samples.length),this.flags.sampleSizePresent&&(e+=4*this.samples.length),this.flags.sampleFlagsPresent&&(e+=4*this.samples.length),this.flags.sampleCompositionTimeOffsetsPresent&&(e+=4*this.samples.length),e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32),this.flags.dataOffsetPresent&&e.writer.writeUInt(this.dataOffset,32),this.flags.firstSampleFlagsPresent&&yb(this.firstSampleFlags,e);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];this.flags.sampleDurationPresent&&e.writer.writeUInt(n.duration,32),this.flags.sampleSizePresent&&e.writer.writeUInt(n.size,32),this.flags.sampleFlagsPresent&&yb(n.flags,e),this.flags.sampleCompositionTimeOffsetsPresent&&(0===this.version?e.writer.writeUInt(n.compositionTimeOffset,32):e.writer.writeInt(n.compositionTimeOffset,32))}},e}(jc);function Kb(t){var e=t.data,i=e.nextUint8(),s=new te(Yo.from(e.nextUint8Array(3)));s.skipBits(12);var n=Boolean(s.readBit()),r=Boolean(s.readBit()),h=Boolean(s.readBit()),o=Boolean(s.readBit());s.skipBits(5);var a=Boolean(s.readBit());s.skipBits(1);var u=Boolean(s.readBit()),c=e.nextUint32(),l={sampleDurationPresent:o,sampleSizePresent:h,sampleFlagsPresent:r,sampleCompositionTimeOffsetsPresent:n};u&&(l.dataOffset=e.nextInt32()),a&&(l.firstSampleFlags=UA(new te(Yo.from(e.nextUint8Array(4)))));for(var d=[],f=0;f<c;f++){var _={};o&&(_.duration=e.nextUint32()),h&&(_.size=e.nextUint32()),r&&(_.flags=UA(new te(Yo.from(e.nextUint8Array(4))))),n&&(_.compositionTimeOffset=0===i?e.nextUint32():e.nextInt32()),d.push(_)}return new jh(i,l,d)}var Ti=function(t){function e(){return t.call(this,"traf")||this}return fi(e,t),e}($e);function jb(t){for(var e=new Ti,i=0,s=Je(t.data);i<s.length;i++){var n=s[i];C(n,"tfhd")?e.boxes.push(Qb(n)):C(n,"tfdt")?e.boxes.push(Xb(n)):C(n,"trun")?e.boxes.push(Kb(n)):e.boxes.push(oh(n))}return e}var Yb=function(t){function e(){return t.call(this,"moof")||this}return fi(e,t),e}($e);function Zb(t){for(var e=new Yb,i=0,s=Je(t.data);i<s.length;i++){var n=s[i];C(n,"traf")?e.boxes.push(jb(n)):C(n,"pssh")?e.boxes.push(Xr(n)):e.boxes.push(oh(n))}return e}!function(t){function e(e){var i=t.call(this,"mfhd",0,0)||this;return i.sequenceNumber=e,i}fi(e,t),g.defineProperty(e.prototype,"sequenceNumber",{get:function(){return this.sD},set:function(t){if(!Se(t,32))throw new v("Provided sequence number does not fit in 32 bits.");this.sD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.sequenceNumber,32)}}(jc);var Jb=function(t){function e(e){var i=t.call(this,"frma")||this;return i.codingName=e,i}return fi(e,t),g.defineProperty(e.prototype,"codingName",{get:function(){return this.nD},set:function(t){if(4!==t.length)throw new v("Provided coding name was not 4 characters long.");this.nD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 4},e.prototype.serializeBoxContent=function(t){t.writer.writeString(this.codingName)},e}(zt),$b=(function(t){function e(e,i){var s=t.call(this,"pasp")||this;return s.hSpacing=e,s.vSpacing=i,s}fi(e,t),g.defineProperty(e.prototype,"hSpacing",{get:function(){return this.rD},set:function(t){if(!Se(t,32))throw new v("Provided hSpacing does not fit in 32 bits.");this.rD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"vSpacing",{get:function(){return this.hD},set:function(t){if(!Se(t,32))throw new v("Provided vSpacing does not fit in 32 bits.");this.hD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 8},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.hSpacing,32),t.writer.writeUInt(this.vSpacing,32)}}(zt),function(t){function e(e,i,s){var n=t.call(this,e)||this;return n.sample=i,n.sinf=s,n}fi(e,t),e.prototype.getBoxContentSize=function(){return this.sample.getBoxContentSize()+this.sinf.getSize()},e.prototype.serializeBoxContent=function(t){this.sample.serializeBoxContent(t),t.concat(this.sinf.serialize())}}($e),function(t){function e(e,i,s){var n=t.call(this,"sinf")||this;return n.schm=i,n.schi=s,n.frma=new Jb(e),n}fi(e,t),e.prototype.getBoxContentSize=function(){var t,e,i,s;return this.frma.getSize()+(null!==(e=null===(t=this.schm)||void 0===t?void 0:t.getSize())&&void 0!==e?e:0)+(null!==(s=null===(i=this.schi)||void 0===i?void 0:i.getSize())&&void 0!==s?s:0)},e.prototype.serializeBoxContent=function(t){t.concat(this.frma.serialize()),this.schm&&t.concat(this.schm.serialize()),this.schi&&t.concat(this.schi.serialize())}}(zt),function(t){function e(e,i,s){var n=t.call(this,"saio",e,void 0===s?0:1)||this;return n.entries=i,n.explicitAuxInfoType=s,n}return fi(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"entries",{get:function(){return this.mx},set:function(t){var e=this;if(!Se(t.length,32))throw new v("Number of entries provided does not fit in 32 bits.");if(t.some((function(t){return!Se(t,e.bitSize)})))throw new v("Not all provided entries fit in ".concat(this.bitSize," bits."));this.mx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.oD},set:function(t){if(void 0===t)this.flags=0;else{if(!Se(t.auxInfoType,32))throw new v("Provided auxInfoType does not fit in 32 bits.");if(!Se(t.auxInfoTypeParameter,32))throw new v("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.oD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+4+this.entries.length*this.bitSize/8},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeUInt(this.entries.length,32),this.serializeSaioContent(e)},e}(jc)),tT=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}fi(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s,32)}}}($b),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}fi(e,t),e.prototype.serializeSaioContent=function(t){for(var e=0,i=this.entries;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.getHighBitsUnsigned(),32),t.writer.writeUInt(s.getLowBitsUnsigned(),32)}}}($b),function(t){function e(e,i,s){var n=t.call(this,"saiz",0,void 0===s?0:1)||this;return n.defaultSampleInfoSize=e,n.sampleInfoSizes=i,n.explicitAuxInfoType=s,n}fi(e,t),g.defineProperty(e.prototype,"defaultSampleInfoSize",{get:function(){return this.aD},set:function(t){if(!Se(t,8))throw new v("Provided defaultSampleInfoSize does not fit in a single byte.");this.aD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"sampleInfoSizes",{get:function(){return this.uD},set:function(t){if(!Se(t.length,32))throw new v("Number of sampleInfoSizes provided does not fit in 32 bits.");if(t.some((function(t){return!Se(t,8)})))throw new v("Not all provided sampleInfoSizes fit in a byte.");this.uD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"explicitAuxInfoType",{get:function(){return this.oD},set:function(t){if(void 0===t)this.flags=0;else{if(!Se(t.auxInfoType,32))throw new v("Provided auxInfoType does not fit in 32 bits.");if(!Se(t.auxInfoTypeParameter,32))throw new v("Provided auxInfoTypeParameter does not fit in 32 bits.");this.flags=1}this.oD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(void 0===this.explicitAuxInfoType?0:8)+1+4+(0!==this.defaultSampleInfoSize?0:this.sampleInfoSizes.length)},e.prototype.serializeBoxContent=function(e){if(0!==this.defaultSampleInfoSize&&this.sampleInfoSizes.length>0)throw new v("Both a default size and specific sizes are provided.  This is prohibited.");t.prototype.serializeBoxContent.call(this,e),void 0!==this.explicitAuxInfoType&&(e.writer.writeUInt(this.explicitAuxInfoType.auxInfoType,32),e.writer.writeUInt(this.explicitAuxInfoType.auxInfoTypeParameter,32)),e.writer.writeByte(this.defaultSampleInfoSize),e.writer.writeUInt(this.sampleInfoSizes.length,32);for(var i=0,s=this.sampleInfoSizes;i<s.length;i++){var n=s[i];e.writer.writeByte(n)}}}(jc),function(t){function e(e){var i=t.call(this,"sdtp",0,0)||this;return i.samples=e,i}fi(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.samples.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e);for(var i=0,s=this.samples;i<s.length;i++){pb(s[i],e)}}}(jc),function(t){function e(e){return t.call(this,"stsd",e,0)||this}fi(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.boxes.length,32)}}(KA),function(t){function e(e,i,s){var n=t.call(this,"sgpd",e,0)||this;return n.entries=s,n.groupingType=i,n}return fi(e,t),g.defineProperty(e.prototype,"groupingType",{get:function(){return this.cD},set:function(t){if(4!==t.length)throw new v("The provided groupingType does not equal 4 characters.");this.cD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.groupingType),this.serializeVersionBoxContent(e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];this.serializeEntryBoxContent(e,n)}},e.prototype.serializeEntryBoxContent=function(t,e){e.serializeBoxContent(t)},e}(jc)),eT=(function(t){function e(e,i){return t.call(this,0,e,i)||this}fi(e,t),e.prototype.serializeVersionBoxContent=function(t){}}(tT),function(t){function e(e,i,s){var n=t.call(this,1,e,s)||this;return n.defaultLength=i,n}fi(e,t),g.defineProperty(e.prototype,"defaultLength",{get:function(){return this.lD},set:function(t){if(!Se(t,32))throw new v("The provided defaultLength does not fit in 32 bits.");this.lD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+this.entries.length*(this.defaultLength||4)},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultLength,32)},e.prototype.serializeEntryBoxContent=function(t,e){0===this.defaultLength&&t.writer.writeUInt(e.getBoxContentSize(),32),e.serializeBoxContent(t)}}(tT),function(t){function e(e,i,s,n){void 0===n&&(n=0);var r=this;if(e<2)throw new v("This constructor is only meant for versions 2 and up.");return(r=t.call(this,e,i,s)||this).defaultSampleDescriptionIndex=n,r}fi(e,t),g.defineProperty(e.prototype,"defaultSampleDescriptionIndex",{get:function(){return this.Vx},set:function(t){if(!Se(t,32))throw new v("The provided defaultSampleDescriptionIndex does not fit in 32 bits.");this.Vx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.defaultSampleDescriptionIndex,32)}}(tT),function(t){function e(e){void 0===e&&(e=[]);var i=t.call(this,"stsz",0,0)||this;return i.sampleSizes=e,i}fi(e,t),g.defineProperty(e.prototype,"sampleSizes",{get:function(){return this.dD},set:function(t){if(!Se(t.length,32))throw new v("Number of allowed samples cannot fit in 32 bits.");if(t.some((function(t){return!Se(t,32)})))throw new v("Not all sampleSizes can be represented in 32 bits.");this.dD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+4*this.sampleSizes.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,32),e.writer.writeUInt(this.sampleSizes.length,32);for(var i=0,s=this.sampleSizes;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(jc),function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t.call(this,"stsz",0,0)||this;return s.defaultSampleSize=e,s.samples=i,s}fi(e,t),g.defineProperty(e.prototype,"defaultSampleSize",{get:function(){return this.qx},set:function(t){if(!Se(t,32))throw new v("Provided defaultSampleSize does not fit in 32 bits.");this.qx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"samples",{get:function(){return this.iD},set:function(t){if(!Se(t,32))throw new v("Number of allowed samples cannot fit in 32 bits.");this.iD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.defaultSampleSize,32),e.writer.writeUInt(this.samples,32)}}(jc),function(t){function e(){return t.call(this,"stbl")||this}fi(e,t)}($e),function(t){function e(e){var i=t.call(this,"stsc",0,0)||this;return i.entries=e,i}fi(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.mx},set:function(t){if(!Se(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Se(t.firstChunk,32)||!Se(t.sampleDescriptionIndex,32)||!Se(t.samplesPerChunk,32)})))throw new v("Not all entries can be represented in 96 bits.");this.mx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+12*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.firstChunk,32),e.writer.writeUInt(n.samplesPerChunk,32),e.writer.writeUInt(n.sampleDescriptionIndex,32)}}}(jc),function(t){function e(){return t.call(this,"schi")||this}fi(e,t)}($e),function(t){function e(e,i,s){var n=t.call(this,"schm",0,void 0===s?0:1)||this;return n.schemeType=e,n.schemeVersion=i,n.schemeUri=s,n}fi(e,t),g.defineProperty(e.prototype,"schemeType",{get:function(){return this.fD},set:function(t){if(4!==t.length)throw new v("The provided schemeType does not have a length of 4.");this.fD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"schemeVersion",{get:function(){return this._D},set:function(t){if(!Se(t,32))throw new v("The provided schemeVersion does not fit in 23 bits.");this._D=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"schemeUri",{get:function(){return this.gD},set:function(t){if(t&&4!==t.length)throw new v("The provided schemeUri does not have a length of 4.");this.flags=void 0===t?0:1,this.gD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+(void 0===this.schemeUri?0:this.schemeUri.length+1)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeType),e.writer.writeUInt(this.schemeVersion,32),this.schemeUri&&(e.writer.writeString(this.schemeUri),e.writer.writeByte(0))}}(jc),function(t){function e(e,i,s,n,r,h,o){void 0===o&&(o=0);var a=t.call(this,"sidx",e,o)||this;return a.referenceId=i,a.timescale=s,a.earliestPresentationTime=n,a.firstOffset=r,a.references=h,a}return fi(e,t),g.defineProperty(e.prototype,"bitSize",{get:function(){return 0===this.version?32:64},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"referenceId",{get:function(){return this.vD},set:function(t){if(!Se(t,32))throw new v("Provided referenceId does not fit in 32 bits.");this.vD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"timescale",{get:function(){return this.Bx},set:function(t){if(!Se(t,32))throw new v("Provided timescale does not fit in 32 bits.");this.Bx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"earliestPresentationTime",{get:function(){return this.wD},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided earliestPresentationTime does not fit in ".concat(this.bitSize," bits."));this.wD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"firstOffset",{get:function(){return this.mD},set:function(t){if(!Se(t,this.bitSize))throw new v("Provided timescale does not fit in ".concat(this.bitSize," bits."));this.mD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"references",{get:function(){return this.pD},set:function(t){if(!Se(t.length,16))throw new v("The number of provided reference items does not fit in 16 bits.");for(var e=0,i=t;e<i.length;e++){var s=i[e];if(!Se(s.referencedSize,31))throw new v("Provided referenced size does not fit in 31 bits.");if(!Se(s.subsegmentDuration,32))throw new v("Provided subsegment duration does not fit in 31 bits.");if(!Se(s.sapType,3))throw new v("Provided SAP type does not fit in 3 bits.");if(!Se(s.sapDeltaTime,28))throw new v("Provided SAP delta time does not fit in 28 bits.")}this.pD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4+this.bitSize/8*2+2+2+12*this.references.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.referenceId,32),e.writer.writeUInt(this.timescale,32),this.serializeSidxBoxContent(e),e.writer.writeUInt(0,16),e.writer.writeUInt(this.references.length,16);for(var i=0,s=this.references;i<s.length;i++){var n=s[i];e.writer.writeBit(n.referenceType),e.writer.writeUInt(n.referencedSize,31),e.writer.writeUInt(n.subsegmentDuration,32),e.writer.writeBool(n.startsWithSap),e.writer.writeUInt(n.sapType,3),e.writer.writeUInt(n.sapDeltaTime,28)}},e}(jc)),iT=function(t){function e(e,i,s,n,r,h){return void 0===h&&(h=0),t.call(this,0,e,i,s,n,r,h)||this}return fi(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime,32),t.writer.writeUInt(this.firstOffset,32)},e}(eT),sT=function(t){function e(e,i,s,n,r,h){return void 0===h&&(h=0),t.call(this,1,e,i,s,n,r,h)||this}return fi(e,t),e.prototype.serializeSidxBoxContent=function(t){t.writer.writeUInt(this.earliestPresentationTime.getHighBitsUnsigned(),32),t.writer.writeUInt(this.earliestPresentationTime.getLowBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getHighBitsUnsigned(),32),t.writer.writeUInt(this.firstOffset.getLowBitsUnsigned(),32)},e}(eT);var nT=function(t){function e(e,i,s){return t.call(this,"styp",e,i,s)||this}return fi(e,t),e}(eb);function rT(t){for(var e=t.data,i=e.nextChars(4),s=e.nextUint32(),n=[];e.cursor.offset<e.data.byteLength;)n.push(e.nextChars(4));return new nT(i,s,n)}(function(t){function e(e){void 0===e&&(e=0);var i=t.call(this,"smhd",0,0)||this;return i.balance=e,i}fi(e,t),g.defineProperty(e.prototype,"balance",{get:function(){return this.yD},set:function(t){if(t<-1||t>1)throw new v("Provided balance does not fit in the allowed range [-1, 1].");if(!Se(Ki(t,8),16))throw new v("Provided balance does not fit in 16 bits (fixed 8.8).");this.yD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+2},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(Ki(this.balance,8),16),e.writer.writeUInt(0,16)}})(jc),function(t){function e(e){var i=t.call(this,"stss",0,0)||this;return i.entries=e,i}fi(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.mx},set:function(t){if(!Se(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Se(t,32)})))throw new v("Not all entries can be represented in 32 bits.");this.mx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+4*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n,32)}}}(jc),function(t){function e(e){var i=t.call(this,"stts",0,0)||this;return i.entries=e,i}fi(e,t),g.defineProperty(e.prototype,"entries",{get:function(){return this.mx},set:function(t){if(!Se(t.length,32))throw new v("Number of allowed entries cannot fit in 32 bits.");if(t.some((function(t){return!Se(t.sampleCount,32)||!Se(t.sampleDelta,32)})))throw new v("Not all entries can be represented in 64 bits.");this.mx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4+8*this.entries.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.entries.length,32);for(var i=0,s=this.entries;i<s.length;i++){var n=s[i];e.writer.writeUInt(n.sampleCount,32),e.writer.writeUInt(n.sampleDelta,32)}}}(jc),function(t){function e(e){var i=t.call(this,"trep",0,0)||this;return i.trackId=e,i}fi(e,t),g.defineProperty(e.prototype,"trackId",{get:function(){return this.Hx},set:function(t){if(!Se(t,32))throw new v("The provided trackId does not fit in 32 bits.");this.Hx=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+4},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.trackId,32)}}(KA),function(t){function e(){return t.call(this,"udta")||this}fi(e,t)}($e);var hT={red:0,green:0,blue:0},oT=(function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=hT);var s=t.call(this,"vmhd",0,1)||this;return s.graphicsMode=e,s.opColor=i,s}fi(e,t),g.defineProperty(e.prototype,"opColor",{get:function(){return this.bD},set:function(t){if(!Se(t.red,16)||!Se(t.green,16)||!Se(t.blue,16))throw new v("Not all colors could be represented in 16 bits.");this.bD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+2+6},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.graphicsMode,16),e.writer.writeUInt(this.opColor.red,16),e.writer.writeUInt(this.opColor.green,16),e.writer.writeUInt(this.opColor.blue,16)}}(jc),function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h,o,a,u,c,l=this;return(l=t.call(this,e,i)||this).width=s.width,l.height=s.height,l.horizontalResolution=null!==(h=s.horizontal)&&void 0!==h?h:72,l.verticalResolution=null!==(o=s.vertical)&&void 0!==o?o:72,l.compressorName=null!==(a=n.compressorName)&&void 0!==a?a:"",l.frameCount=null!==(u=n.frameCount)&&void 0!==u?u:1,l.depth=null!==(c=n.depth)&&void 0!==c?c:24,l.clap=n.clap,l.pasp=n.pasp,l.extra=r,l}return fi(e,t),g.defineProperty(e.prototype,"width",{get:function(){return this.oc},set:function(t){if(!Se(t,16))throw new v("Provided width does not fit in 16 bits.");this.oc=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"height",{get:function(){return this.uc},set:function(t){if(!Se(t,16))throw new v("Provided height does not fit in 16 bits.");this.uc=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"horizontalResolution",{get:function(){return this.TD},set:function(t){if(!Se(Ki(t,16),32))throw new v("Provided horizontalResolution does not fit in 32 bits (fixed 16.16).");this.TD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"verticalResolution",{get:function(){return this.SD},set:function(t){if(!Se(Ki(t,16),32))throw new v("Provided verticalResolution does not fit in 32 bits (fixed 16.16).");this.SD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"compressorName",{get:function(){return this.kD},set:function(t){if(t.length>31)throw new v("The provided compressorName should at most be 31 characters long.");this.kD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"frameCount",{get:function(){return this.ED},set:function(t){if(!Se(t,16))throw new v("Provided frameCount does not fit in 16 bits.");this.ED=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"depth",{get:function(){return this.PD},set:function(t){if(!Se(t,16))throw new v("Provided depth does not fit in 16 bits.");this.PD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){var e,i,s,n,r,h;return t.prototype.getBoxContentSize.call(this)+2+2+12+2+2+4+4+4+2+32+2+2+(null!==(i=null===(e=this.clap)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)+(null!==(n=null===(s=this.pasp)||void 0===s?void 0:s.getSize())&&void 0!==n?n:0)+(null!==(h=null===(r=this.extra)||void 0===r?void 0:r.length)&&void 0!==h?h:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(0,16),e.writer.writeUInt(0,16),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.width,16),e.writer.writeUInt(this.height,16),e.writer.writeUInt(Ki(this.horizontalResolution,16),32),e.writer.writeUInt(Ki(this.verticalResolution,16),32),e.writer.writeUInt(0,32),e.writer.writeUInt(this.frameCount,16),e.writer.writeByte(this.compressorName.length),e.writer.writeString(this.compressorName);for(var i=0;i<31-this.compressorName.length;i++)e.writer.writeByte(0);e.writer.writeUInt(this.depth,16),e.writer.writeInt(-1,16),this.clap&&e.concat(this.clap.serialize()),this.pasp&&e.concat(this.pasp.serialize()),this.extra&&Ps(e.writer,this.extra)},e}(GA)),aT=(function(t){function e(e){var i=t.call(this,"esds",0,0)||this;return i.esDescriptor=e,i}fi(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+(this.esDescriptor instanceof x?this.esDescriptor.length:this.esDescriptor.getSize())},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor instanceof x?e.concat(Yo.from(this.esDescriptor)):this.esDescriptor.serialize(e)}}(jc),function(t){function e(e,i,s){var n=t.call(this,"mp4a",e,s)||this;return n.esd=i,n}fi(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esd.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.esd.serialize())}}(QA),function(t){function e(e,i,s,n){void 0===n&&(n={});var r=t.call(this,"mp4v",e,i,n)||this;return r.esDescriptor=s,r}fi(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(oT),function(t){function e(e,i){var s=t.call(this,"mp4s",e)||this;return s.esDescriptor=i,s}fi(e,t),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.esDescriptor.getSize()},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.esDescriptor.serialize(e)}}(GA),function(t){function e(e){var i=t.call(this,"avcC")||this;return i.decoderConfig=e,i}fi(e,t),e.prototype.getBoxContentSize=function(){return this.decoderConfig.getSize()},e.prototype.serializeBoxContent=function(t){this.decoderConfig.serialize(t)}}(zt),function(){function t(t,e,i,s,n,r){void 0===r&&(r=1),this.lengthSizeMinusOne=i,this.version=r,this.profileIndication=t.indication,this.profileCompatibility=t.compatibility,this.levelIndication=e,this.spsSets=s,this.ppsSets=n}g.defineProperty(t.prototype,"version",{get:function(){return this.RD},set:function(t){if(!Se(t,8))throw new v("Provided version does not fit in 8 bits.");this.RD=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"profileIndication",{get:function(){return this.CD},set:function(t){if(!Se(t,8))throw new v("Provided profileIndication does not fit in 8 bits.");this.CD=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"profileCompatibility",{get:function(){return this.xD},set:function(t){if(!Se(t,8))throw new v("Provided profileCompatibility does not fit in 8 bits.");this.xD=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"levelIndication",{get:function(){return this.DD},set:function(t){if(!Se(t,8))throw new v("Provided levelIndication does not fit in 8 bits.");this.DD=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"spsSets",{get:function(){return this.ND},set:function(t){if(!Se(t.length,5))throw new v("Provided number of spsSets exceeds the max (32)");this.ND=t},enumerable:!1,configurable:!0}),g.defineProperty(t.prototype,"ppsSets",{get:function(){return this.BD},set:function(t){if(!Se(t.length,8))throw new v("Provided number of ppsSets exceeds the max (256)");this.BD=t},enumerable:!1,configurable:!0}),t.prototype.getSize=function(){return 7+2*this.spsSets.length+this.spsSets.reduce((function(t,e){return t+e.length}),0)+2*this.ppsSets.length+this.ppsSets.reduce((function(t,e){return t+e.length}),0)},t.prototype.serialize=function(t){t.writer.writeByte(this.version),t.writer.writeByte(this.profileIndication),t.writer.writeByte(this.profileCompatibility),t.writer.writeByte(this.levelIndication),t.writer.writeBits([1,1,1,1,1,1]),t.writer.writeUInt(this.lengthSizeMinusOne,2),t.writer.writeBits([1,1,1]),t.writer.writeUInt(this.spsSets.length,5);for(var e=0,i=this.spsSets;e<i.length;e++){var s=i[e];t.writer.writeUInt(s.length,16),t.concat(Yo.from(s))}t.writer.writeByte(this.ppsSets.length);for(var n=0,r=this.ppsSets;n<r.length;n++){var h=r[n];t.writer.writeUInt(h.length,16),t.concat(Yo.from(h))}}}(),function(t){function e(e,i,s,n,r){void 0===n&&(n={}),void 0===r&&(r=void 0);var h=t.call(this,"avc1",e,i,n)||this;return h.configurationBox=s,h.bitrateBox=r,h}fi(e,t),e.prototype.getBoxContentSize=function(){var e,i;return t.prototype.getBoxContentSize.call(this)+this.configurationBox.getSize()+(null!==(i=null===(e=this.bitrateBox)||void 0===e?void 0:e.getSize())&&void 0!==i?i:0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.concat(this.configurationBox.serialize()),this.bitrateBox&&e.concat(this.bitrateBox.serialize())}}(oT),function(t){function e(e,i,s){var n=t.call(this,"btrt")||this;return n.bufferSizeDb=e,n.max=i,n.avg=s,n}fi(e,t),g.defineProperty(e.prototype,"bufferSizeDb",{get:function(){return this.ix},set:function(t){if(!Se(t,32))throw new v("Provided bufferSizeDb does not fit in 32 bits.");this.ix=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"max",{get:function(){return this.LD},set:function(t){if(!Se(t,32))throw new v("Provided max does not fit in 32 bits.");this.LD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"avg",{get:function(){return this.OD},set:function(t){if(!Se(t,32))throw new v("Provided avg does not fit in 32 bits.");this.OD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return 12},e.prototype.serializeBoxContent=function(t){t.writer.writeUInt(this.bufferSizeDb,32),t.writer.writeUInt(this.max,32),t.writer.writeUInt(this.avg,32)}}(zt),function(t){function e(e,i){var s,n,r,h,o=this;if(o=t.call(this,"tenc",e,0)||this,i.perSampleIvSize>0&&(null!==(n=null===(s=i.constantIv)||void 0===s?void 0:s.length)&&void 0!==n?n:0)>0)throw new v("Either perSampleSize should be > 0 or constantIv should be defined. Not both.");return o.kId=i.kId,o.isProtected=null!==(r=i.isProtected)&&void 0!==r?r:1,i.perSampleIvSize>0?o.perSampleIvSize=i.perSampleIvSize:o.constantIv=null!==(h=i.constantIv)&&void 0!==h?h:new x(0),o}return fi(e,t),g.defineProperty(e.prototype,"isProtected",{get:function(){return this.MD},set:function(t){if(!Se(t,8))throw new v("Provided isProtected does not fit in 1 byte.");this.MD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"perSampleIvSize",{get:function(){return this.FD},set:function(t){if(![8,16].includes(t))throw new v("Provided perSampleIvSize does not match any allowed value [8, 16].");this.FD=t,this.UD=new x(0)},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"kId",{get:function(){return this.HD},set:function(t){if(16!==t.length)throw new v("Provided kId length is not 16.");this.HD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"constantIv",{get:function(){return this.UD},set:function(t){if(![8,16].includes(t.length))throw new v("Provided constant IV length does not match any allowed value [8, 16].");this.UD=t,this.FD=0},enumerable:!1,configurable:!0}),e.prototype.getTencHeaderSize=function(){return 20+(this.constantIv.length>0?1+this.constantIv.length:0)},e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.getTencHeaderSize()},e.prototype.serializeVersionBoxContent=function(t){t.writer.writeByte(0)},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),this.serializeOwnContent(e)},e.prototype.serializeOwnContent=function(t){t.writer.writeByte(0),this.serializeVersionBoxContent(t),t.writer.writeByte(this.isProtected),t.writer.writeByte(this.perSampleIvSize),Ps(t.writer,this.kId),0===this.perSampleIvSize&&(t.writer.writeByte(this.constantIv.length),Ps(t.writer,this.constantIv))},e}(jc)),uT=(function(t){function e(e){return t.call(this,0,e)||this}fi(e,t)}(aT),function(t){function e(e){var i=t.call(this,1,e)||this;return i.cryptByteBlocks=e.cryptByteBlock,i.skipByteBlocks=e.skipByteBlock,i}return fi(e,t),g.defineProperty(e.prototype,"cryptByteBlocks",{get:function(){return this.VD},set:function(t){if(!Se(t,4))throw new v("Provided cryptByteBlocks does not fit in 4 bits.");this.VD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"skipByteBlocks",{get:function(){return this.WD},set:function(t){if(!Se(t,4))throw new v("Provided skipByteBlocks does not fit in 4 bits.");this.WD=t},enumerable:!1,configurable:!0}),e.prototype.serializeVersionBoxContent=function(t){t.writer.writeUInt(this.cryptByteBlocks,4),t.writer.writeUInt(this.skipByteBlocks,4)},e}(aT));!function(t){function e(e){var i=t.call(this)||this;return i.tencBox=new uT(e),i}fi(e,t),e.prototype.serializeBoxContent=function(t){this.tencBox.serializeOwnContent(t)},e.prototype.getBoxContentSize=function(){return this.tencBox.getTencHeaderSize()}}(Ab);function cT(t){return void 0!==t.iv}function lT(t){return void 0!==t.subsamples}(function(t){function e(e){var i=t.call(this,"senc",0,{useSubsampleEncryption:!1})||this;return i.samples=e,i}fi(e,t),g.defineProperty(e.prototype,"samples",{get:function(){return this.iD},set:function(t){var e;if(!Se(t.length,32))throw new v("The number of samples provided does not fit in 32 bits.");for(var i=0,s=t;i<s.length;i++){var n=s[i];if(cT(n)&&![8,16].includes(n.iv.length))throw new v("IV of one of the provided samples did not satisfy the required length constraints. [8, 16]");if(void 0===e&&(e=lT(n)),!0===e&&!lT(n)||!1===e&&lT(n))throw new v("Mix of samples with and without subsamples detected.");if(lT(n)){if(!Se(n.subsamples.length,16))throw new v("Subsample length of one of the provided samples does not fit in 16 bits.");for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];if(!Se(o.clearData,16))throw new v("Subsample clearData of one of the provided samples does not fit in 16 bits.");if(!Se(o.protectedData,23))throw new v("Subsample protectedData of one of the provided samples does not fit in 23 bits.")}}}this.flags.useSubsampleEncryption=null!=e&&e,this.iD=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){for(var e=0,i=0,s=this.samples;i<s.length;i++){var n=s[i];cT(n)&&(e+=n.iv.length),lT(n)&&(e+=2+6*n.subsamples.length)}return t.prototype.getBoxContentSize.call(this)+4+e},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeUInt(this.samples.length,32);for(var i=0,s=this.samples;i<s.length;i++){var n=s[i];if(cT(n)&&Ps(e.writer,n.iv),lT(n)){e.writer.writeUInt(n.subsamples.length,16);for(var r=0,h=n.subsamples;r<h.length;r++){var o=h[r];e.writer.writeUInt(o.clearData,16),e.writer.writeUInt(o.protectedData,32)}}}},e.prototype.serializeFlags=function(t){t.writer.writeUInt(this.flags.useSubsampleEncryption?2:0,24)}})(jc),function(t){function e(e,i,s,n,r){var h=t.call(this,"emsg",0,0)||this;return h.schemeIdUri=e,h.value=i,h.data=r,h.id=s,h.timescale=n.timescale,h.presentationTimeDelta=n.presentationTimeDelta,h.eventDuration=n.eventDuration,h}fi(e,t),g.defineProperty(e.prototype,"timescale",{get:function(){return this.Bx},set:function(t){if(!Se(t,32))throw new v("The provided timescale does not fit in 32 bits.");this.Bx=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"presentationTimeDelta",{get:function(){return this.qD},set:function(t){if(!Se(t,32))throw new v("The provided presentationTimeDelta does not fit in 32 bits.");this.qD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"eventDuration",{get:function(){return this.zD},set:function(t){if(!Se(t,32))throw new v("The provided eventDuration does not fit in 32 bits.");this.zD=t},enumerable:!1,configurable:!0}),g.defineProperty(e.prototype,"id",{get:function(){return this.wS},set:function(t){if(!Se(t,32))throw new v("The provided id does not fit in 32 bits.");this.wS=t},enumerable:!1,configurable:!0}),e.prototype.getBoxContentSize=function(){return t.prototype.getBoxContentSize.call(this)+this.schemeIdUri.length+1+this.value.length+1+16+this.data.length},e.prototype.serializeBoxContent=function(e){t.prototype.serializeBoxContent.call(this,e),e.writer.writeString(this.schemeIdUri),e.writer.writeByte(0),e.writer.writeString(this.value),e.writer.writeByte(0),e.writer.writeUInt(this.timescale,32),e.writer.writeUInt(this.presentationTimeDelta,32),e.writer.writeUInt(this.eventDuration,32),e.writer.writeUInt(this.id,32),e.concat(Yo.from(this.data))}}(jc);var dT=function(){function t(){this.boxes=[]}return t.prototype.serialize=function(){for(var t=new mA,e=0,i=this.boxes;e<i.length;e++){var s=i[e];t.concat(s.serialize())}return t.toRangedBuffer()},t}();function fT(t,e){return function(i){var s=function(t,e){for(var i=t.data,s=t.cursor;s.offset<i.byteLength;){var n=MA(i,s);if(!n.complete)return;if(C(n.box,e))return n.box}}(new LA(DA(i),new BA),t);if(!s)throw new v("".concat(t," box not found"));return e(s)}}var _T=fT("moov",Wb),gT=fT("sidx",(function(t){var e,i,s=t.data,n=Cc(s.nextUint32()),r=n.version,h=n.flags,o=s.nextUint32(),a=s.nextUint32();0===r?(e=s.nextUint32(),i=s.nextUint32()):(e=s.nextUint64(),i=s.nextUint64()),s.skip(2);for(var u=s.nextUint16(),c=[],l=0;l<u;l++){var d=new te(Yo.from(s.nextUint8Array(12))),f=d.readBit(),_=d.readUInt(31),g=d.readUInt(32),v=Boolean(d.readBit()),w=d.readUInt(3),m=d.readUInt(28);c.push({referenceType:f,referencedSize:_,subsegmentDuration:g,startsWithSap:v,sapType:w,sapDeltaTime:m})}return 0===r?new iT(o,a,e,i,c,h.raw):new sT(o,a,e,i,c,h.raw)})),vT=fT("moof",Zb),wT=fT("pssh",Xr);function mT(t){return function(t){for(var e=new dT,i=0,s=Je(t);i<s.length;i++){var n=s[i];C(n,"ftyp")?e.boxes.push(sb(n)):C(n,"styp")?e.boxes.push(rT(n)):C(n,"moov")?e.boxes.push(Wb(n)):C(n,"moof")?e.boxes.push(Zb(n)):C(n,"mdat")?e.boxes.push(fb(n)):e.boxes.push(oh(n))}return e}(new LA(DA(t),new BA))}var pT=class extends Et{get XD(){return this.pd}get GD(){return this.QD.expiration}get KD(){return this.jD}get YD(){return this.QD.sessionId}Xs(){if(this.ZD)return this.pd;const t=[];return t.push(Promise.resolve(this.QD.close())),t.push(uc(1e3)),this.JD.U_(Promise.race(t).catch(U)),this.ZD=!0,this.pd}$D(t,e,i){if(fh.JP){const t=wT(Zn(e));if(1===t.version){e=new Tb(t.systemId,t.data).serialize().join()}}return Promise.resolve(this.QD.generateRequest(t,e)).catch(U)}On(t){return Promise.resolve(this.QD.load(t)).catch(U)}Qu(){return Promise.resolve(this.QD.remove()).catch(U)}Kn(t){return Promise.resolve(this.QD.update(t)).catch(U)}tN(){this.jD.NC(),this.QD.keyStatuses.forEach(((t,e)=>{this.eN(e,t)})),this.To(new Z(this))}eN(t,e){if("string"==typeof t){const i=t;t=e,e=i}const i=Zn(t);if(this.cp===ko&&16===i.byteLength){let t=Sa(i),e=t.getUint32(0,!0),s=t.getUint16(4,!0),n=t.getUint16(6,!0);t.setUint32(0,e,!1),t.setUint16(4,s,!1),t.setUint16(6,n,!1)}this.cp===ko&&"status-pending"===e&&(e="usable"),this.jD.DC(i,e)}constructor(t,e){super(),this.QD=t,this.cp=e,this.ZD=!1,this.iN=()=>{this.tN()},this.sN=t=>{this.To(new ct(this,t.messageType,lA(this.cp,t.message)))},this.nN=()=>{this.ZD=!0,this.jD.iA>0&&(this.jD.NC(),this.To(new Z(this))),this.QD.removeEventListener("keystatuseschange",this.iN),this.QD.removeEventListener("message",this.sN)},this.QD.addEventListener("keystatuseschange",this.iN),this.QD.addEventListener("message",this.sN),this.jD=new _t;const i=[];this.QD.closed&&i.push(Promise.resolve(this.QD.closed)),this.JD=new $i,i.push(this.JD.jf),this.pd=Promise.race(i).then(this.nN,this.nN),this.tN()}};function U(t){let e;if(t.message){const i=t.message.match(/^SystemCode:0x([0-9a-fA-F]+)$/);i&&(e=0|k(i[1],16))}throw new eu(t.message,void 0,e,t)}var yT=class{async rN(t){return new pT(this.hN.createSession(t),this.ap)}oN(t){return Promise.resolve(this.hN.setServerCertificate(t))}kn(t){return Promise.resolve(t.setMediaKeys(this.hN))}aN(t){return Promise.resolve(t.setMediaKeys(null))}ir(){return Promise.resolve()}constructor(t,e,i){this.hN=t,this.ap=e,this.xb=i}},H=class{get ap(){return this.uN.keySystem}async cN(){const t=await this.uN.createMediaKeys();return new yT(t,this.cp,this.lN)}dN(){return this.lN}constructor(t,e,i){this.uN=t,this.cp=e,this.lN=i}},AT=fh.hR&&fh.aR>=42||fh.DR&&fh.LR>=38||fh.bR||fh.IR||fh.WR&&fh.zR>=29;function bT(t,e){return Po(t,"audio")?{initDataTypes:["cenc"],audioCapabilities:[Me({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}:{initDataTypes:["cenc"],videoCapabilities:[Me({contentType:t},e?{robustness:"SW_SECURE_CRYPTO"}:{})]}}function TT(){return void 0!==il&&"function"==typeof il.requestMediaKeySystemAccess}function Sh(){return"undefined"!=typeof HTMLMediaElement&&void 0!==HTMLMediaElement.prototype.webkitGenerateKeyRequest&&void 0!==HTMLMediaElement.prototype.webkitAddKey&&void 0!==HTMLMediaElement.prototype.webkitCancelKeyRequest}var ST=class{fN(){return this._N(ts)}gN(){return this._N(Zr)}vN(){return this._N(Yr)}wN(){return this._N(Br)}_N(t){const e=t.gC,i=this.mN.get(e);if(i)return i;const s=this.pN(t,'video/mp4; codecs="avc1.42000a"');return this.mN.set(e,s),s}async pN(t,e){try{return await this.AN.yN(t.dC,[bT(e,!0)]),!0}catch(i){try{return await this.AN.yN(t.dC,[bT(e,!1)]),!0}catch(t){return!1}}}bN(){return this.TN||(this.TN=this.SN()),this.TN}async SN(){return"https:"!==eA.protocol&&(!!AT&&!await this.gN())}constructor(t){this.mN=Wn(),this.TN=void 0,this.AN=t}};function kT(t,e,i,s){let n=!1;if(s.persistentState&&"optional"!==s.persistentState)return;if(s.distinctiveIdentifier&&"optional"!==s.distinctiveIdentifier)return;const r={audioCapabilities:[],videoCapabilities:[],persistentState:s.persistentState||"optional",distinctiveIdentifier:s.distinctiveIdentifier||"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label,kN:s.kN};let h=!1;if(s.audioCapabilities){const o=s.audioCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.audioCapabilities=o.filter((s=>ET(t,e,i,s))),h=!0,r.audioCapabilities.length&&(n=!0))}if(s.videoCapabilities){const o=s.videoCapabilities.filter((t=>Boolean(t.contentType)));o.length&&(r.videoCapabilities=o.filter((s=>ET(t,e,i,s))),h=!0,r.videoCapabilities.length&&(n=!0))}return h||(n=t(i,"video/mp4")),n?r:void 0}function ET(t,e,i,s){if(!s.contentType)return!1;if(s.encryptionScheme&&!Bc(e,s.encryptionScheme))return!1;if(s.robustness)return!1;return t(i,qp(s.contentType))}function IT(t){if(t.videoCapabilities)for(const e of t.videoCapabilities)if(e.contentType)return e.contentType;if(t.audioCapabilities)for(const e of t.audioCapabilities)if(e.contentType)return e.contentType}function PT(t){const e=[];for(const i of t)i.encryptionScheme&&e.push({contentType:i.contentType,robustness:i.robustness});return t.concat(e)}function RT(t){return!(!t.audioCapabilities||!t.audioCapabilities.some(CT))||!(!t.videoCapabilities||!t.videoCapabilities.some(CT))}function CT(t){return!t.robustness}function xT(t,e){const i=[];for(const s of t)s.robustness?i.push(s):i.push(Me({},s,{robustness:e}));return i}var Zt=class{async yN(t,e){e=e.filter((t=>!t.kN));for(const t of e)t.audioCapabilities&&(t.audioCapabilities=PT(t.audioCapabilities)),t.videoCapabilities&&(t.videoCapabilities=PT(t.videoCapabilities));if(t===Kg&&e.some(RT)){const i=e.map((t=>function(t,e){return Me({},t,{videoCapabilities:t.videoCapabilities?xT(t.videoCapabilities,e):void 0,audioCapabilities:t.audioCapabilities?xT(t.audioCapabilities,e):void 0})}(t,"SW_SECURE_CRYPTO")));try{const e=await il.requestMediaKeySystemAccess(t,i),s=e.getConfiguration();return new H(e,t,s)}catch(t){}}const i=await il.requestMediaKeySystemAccess(t,e),s=i.getConfiguration();return new H(i,t,s)}static EN(){return TT()}},DT=class extends Et{get YD(){return this.IN&&this.IN.sessionId||""}get GD(){return NaN}get XD(){return this.PN.jf}get KD(){return this.RN}async $D(t,e,i){this.CN(),this.xN=new $i,this.rN(Zn(e),i),await this.xN.jf}rN(t,e){if(!t)throw new p("Expected initData to be defined but was "+t+".");const i=e&&e.playready&&e.playready.DN;let s;return s=e?this.NN.createSession(this.BN,t,i):this.NN.createSession(this.BN,t),s.addEventListener("mskeyclose",this.nN),s.addEventListener("mskeymessage",this.LN),s.addEventListener("mskeyerror",this.Ps),s.addEventListener("mskeyadded",this.ON),this.IN=s,this.MN("status-pending"),s}async On(t){return this.CN(),!0}async Kn(t){if(this.FN=new $i,this.CN(),!this.IN)return Promise.resolve();const e=Zn(t);if(0===e.byteLength)throw new p("Cannot call update with an empty response.");this.IN.update(e),await this.FN.jf}Xs(){return!this.ZD&&this.IN&&(this.ZD=!0,this.IN.close()),this.PN.jf}async Qu(){this.CN()}CN(){if(this.ZD)throw new p("Already closing or closed.")}MN(t){this.RN.NC(),this.RN.DC(zr,t),this.To(new Z(this))}constructor(t,e){super(),this.NN=t,this.BN=e,this.ZD=!1,this.FN=void 0,this.xN=void 0,this.IN=void 0,this.nN=()=>{this.ZD=!0,this.PN.Lf(void 0),this.IN&&(this.IN.removeEventListener("mskeyclose",this.nN),this.IN.removeEventListener("mskeymessage",this.LN),this.IN.removeEventListener("mskeyerror",this.Ps),this.IN.removeEventListener("mskeyadded",this.ON))},this.LN=t=>{this.xN&&(this.xN.Lf(void 0),this.xN=void 0),this.To(new ct(this,"license-request",A(t.message).buffer,t.destinationURL||void 0))},this.Ps=()=>{const t=this.IN&&this.IN.error;if(!t)return;const e=new eu("Unknown CDM error",t.code,t.systemCode);if(this.xN)this.xN.BC(e),this.xN=void 0;else if(this.FN)this.FN.BC(e),this.FN=void 0;else switch(e.LC){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:this.MN("output-not-allowed");break;default:this.MN("internal-error")}},this.ON=()=>{this.xN&&(this.MN("usable"),this.xN.Lf(void 0),this.xN=void 0),this.FN&&(this.MN("usable"),this.FN.Lf(void 0),this.FN=void 0)},this.PN=new $i,this.RN=new _t}},NT=class{async rN(t){return new DT(this.NN,this.BN)}oN(t){return Promise.resolve(!1)}kn(t){const e=()=>{t.msSetMediaKeys(this.NN),t.removeEventListener("loadedmetadata",e)};return t.readyState>=1?t.msSetMediaKeys(this.NN):t.addEventListener("loadedmetadata",e),Promise.resolve()}aN(t){return Promise.resolve()}ir(){return Promise.resolve()}constructor(t,e,i){this.NN=t,this.ap=e,this.xb=i;const s=IT(i)||"video/mp4";this.BN=qp(s)}},BT=class{get ap(){return this.cp}dN(){return this.al}cN(){const t=new fa.MSMediaKeys(this.cp);return Promise.resolve(new NT(t,this.cp,this.al))}constructor(t,e){this.cp=t,this.al=e}},si=class{yN(t,e){try{return Promise.resolve(function(t,e){if(!LT())throw new p("Unsupported key system "+t);for(let i of e){let e=kT(OT,hA,t,i);if(e)return new BT(t,e)}throw new p("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static EN(){return LT()}};function LT(){return void 0!==fa.MSMediaKeys&&"function"==typeof fa.MSMediaKeys.isTypeSupported}function OT(t,e){return fa.MSMediaKeys.isTypeSupported(t,e)}var MT=class extends Et{get YD(){return this.UN?this.UN.sessionId:""}get GD(){return NaN}get XD(){return this.PN.jf}get KD(){return this.RN}$D(t,e,i){const s=i&&i.fairplay&&i.fairplay.HN;if(!s)throw new p("Expected FairPlay contentId to be defined but was "+s+".");const n=function(t,e,i){const s=Mr(t),n=2*s.length,r=2*e.length;let h=new ArrayBuffer(4+n+4+r+4+i.byteLength),o=new DataView(h),a=new Ko;return Uc(o,a,n,!0),Kv(o,a,s,!0),Uc(o,a,r,!0),Kv(o,a,e,!0),Uc(o,a,i.byteLength,!0),sc(o,a,i),new x(h)}(Zn(e),s,this.VN);return this.UN=this.WN.createSession(this.BN,n),this.UN.addEventListener("webkitkeymessage",this.LN,!1),this.UN.addEventListener("webkitkeyadded",this.ON,!1),this.UN.addEventListener("webkitkeyerror",this.Ps,!1),this.MN("status-pending"),this.qN.Lf(this.UN),this.qN=new $i,Promise.resolve()}On(t){return Promise.resolve(!0)}async Kn(t){const e=Zn(t);if(0===e.byteLength)throw new p("Cannot call update with an empty response.");this.zN=new $i;(this.UN||await this.qN.jf).update(e),await this.zN.jf}Xs(){var t;const e=this.UN;return e&&(e.removeEventListener("webkitkeymessage",this.LN,!1),e.removeEventListener("webkitkeyadded",this.ON,!1),e.removeEventListener("webkitkeyerror",this.Ps,!1),e.close()),this.qN.Jl(),null==(t=this.zN)||t.Jl(),this.PN.Lf(void 0),this.PN.jf}Qu(){return Promise.resolve(void 0)}MN(t){this.RN.NC(),this.RN.DC(zr,t),this.To(new Z(this))}constructor(t,e,i){super(),this.WN=t,this.BN=e,this.VN=i,this.PN=new $i,this.zN=void 0,this.RN=new _t,this.UN=void 0,this.qN=new $i,this.Ps=()=>{const t=this.UN&&this.UN.error;if(!t)return;const e=new eu("Unknown CDM error",t.code,t.systemCode);this.zN?(this.zN.BC(e),this.zN=void 0):e.LC===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.MN("output-not-allowed"):this.MN("internal-error"),this.To(new aA)},this.LN=t=>{this.To(new ct(this,"license-request",A(t.message).buffer,"this is a test string"===t.destinationURL?void 0:t.destinationURL))},this.ON=()=>{this.zN&&(this.zN.Lf(void 0),this.zN=void 0),this.MN("usable")}}};var FT=class{getInternalMediaKeys(){return this.WN}async rN(t){if(!this.VN)throw new jr(n.CONTENT_PROTECTION_CERTIFICATE_ERROR,"No valid certificate was provided.");return new MT(this.WN,this.BN,this.VN)}oN(t){return this.VN=Zn(t),Promise.resolve(!0)}kn(t){return t.webkitSetMediaKeys(this.WN),Promise.resolve()}aN(t){return t.webkitSetMediaKeys(null),Promise.resolve()}ir(){return Promise.resolve()}constructor(t,e,i){this.WN=t,this.ap=e,this.xb=i,this.VN=void 0;const s=IT(i)||"video/mp4";this.BN=qp(s)}},UT=class{get ap(){return this.cp}dN(){return this.al}cN(){const t=new fa.WebKitMediaKeys(this.cp);return Promise.resolve(new FT(t,this.cp,this.al))}constructor(t,e){this.cp=t,this.al=e}},ri=class{yN(t,e){try{return Promise.resolve(function(t,e){if(t!==Jg)throw new p(t+" is not supported with webkit-prefixed Encrypted Media Extensions.");if(!HT())throw new p("Unsupported key system "+t);for(let i of e){let e=kT(VT,oA,t,i);if(e)return new UT(t,e)}throw new p("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static EN(){return HT()}};function HT(){return void 0!==fa.WebKitMediaKeys&&"function"==typeof fa.WebKitMediaKeys.isTypeSupported}function VT(t,e){return fa.WebKitMediaKeys.isTypeSupported(t,e)}var WT=class{async yN(t,e){for(let i of this.XN)try{return await i.yN(t,e)}catch(t){}throw new p("Unsupported key system configuration for "+t)}constructor(t){this.XN=t}},Uo=class{GN(t,e){return new Promise((i=>{const s=new Hi;s.U_(this.QN.M_),e&&s.U_(e);const n=()=>{s.Ou()};this.KN.push((()=>{const e=qT(t,s.M_);return i(e),e.then(n,n)})),this.jN||(this.jN=this.YN())}))}Jl(){return this.ZN(!0)}bn(){return this.JN=void 0,this.ZN(!1)}ZN(t){const e=this.jN;return this.QN.Jl(),t&&(this.QN=new Hi),Promise.resolve(e)}constructor(t){this.KN=[],this.jN=void 0,this.QN=new Hi,this.YN=()=>{if(0===this.KN.length)return this.JN?qT(this.JN,this.QN.M_).then(this.$N,this.$N):this.$N();return this.KN.shift()().then(this.YN)},this.$N=()=>{if(0!==this.KN.length)return this.YN();this.jN=void 0},this.JN=t}};function qT(t,e){return new Promise((i=>i(t(e))))}var zT,XT=new Uo,GT=class extends Et{tB(){this.zN&&(this.MN("usable"),this.zN.Lf(void 0),this.zN=void 0)}eB(t){const e=new eu("Unknown CDM error",t.errorCode,t.systemCode);this.zN?(this.zN.BC(e),this.zN=void 0):this.xN?(this.xN.BC(e),this.xN=void 0):e.LC===WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT?this.MN("output-restricted"):1===e.OC?this.MN("expired"):this.MN("internal-error")}iB(t){0!==t.message.byteLength&&(this.xN&&(this.xN.Lf(void 0),this.xN=void 0),this.To(new ct(this,"license-request",lA(this.cp,A(t.message).buffer),t.defaultURL||void 0)))}sB(t){this.nB||(this.nB=t,this.rB.Lf(t))}get KD(){return this.hB}get YD(){return this.oB}set YD(t){this.oB=t}get XD(){return this.PN.jf}get GD(){return NaN}async Xs(){this.throwIfClosed(),this.zN&&(this.zN.BC(void 0),this.zN=void 0),this.GC=!0,this.PN.Lf(void 0)}async $D(t,e){this.throwIfClosed(),this.xN=new $i,this.aB=Zn(e);(this.nB||await this.rB.jf).webkitGenerateKeyRequest(this.cp,this.aB),await this.xN.jf}async On(t){return this.throwIfClosed(),!1}async Qu(){this.throwIfClosed()}async Kn(t){if(this.throwIfClosed(),this.zN=new $i,fh.mR||fh._R)return XT.GN((async()=>{await this.doUpdate(t)}));await this.doUpdate(t)}async doUpdate(t){if(void 0===this.zN)return;(this.nB||await this.rB.jf).webkitAddKey(this.cp,Zn(t),this.aB,this.YD),await this.zN.jf}throwIfClosed(){if(this.GC)throw new p("Already closing or closed.")}MN(t){this.hB.NC(),this.hB.DC(zr,t),this.To(new Z(this))}async uB(){const t=this.nB||await this.rB.jf;if(t.webkitCancelKeyRequest)try{t.webkitCancelKeyRequest(this.cp,this.oB)}catch(t){}finally{await uc(500)}}constructor(t){super(),this.cp=t,this.xN=void 0,this.zN=void 0,this.GC=!1,this.aB=void 0,this.nB=void 0,this.PN=new $i,this.oB="",this.rB=new $i,this.hB=new _t}},QT=class{kn(t){return this.nB=t,this.nB.addEventListener("webkitkeyadded",this.ON),this.nB.addEventListener("webkitkeyerror",this.cB),this.nB.addEventListener("webkitkeymessage",this.lB),this.dB.forEach(((e,i)=>e.sB(t))),this.fB.forEach((e=>e.sB(t))),Promise.resolve()}aN(t){return t.removeEventListener("webkitkeyadded",this.ON),t.removeEventListener("webkitkeyerror",this.cB),t.removeEventListener("webkitkeymessage",this.lB),this.nB=void 0,Promise.resolve()}async ir(){let t=this.dB.entries(),e=t.next();for(;!e.done;)await e.value[1].uB(),e=t.next();this.dB.clear()}async rN(t,e,i){const s=new GT(this.ap);return this.nB&&s.sB(this.nB),this.fB.push(s),s}oN(t){return Promise.resolve(!1)}_B(t){if(!t)return;let e=this.dB.get(t);return e||(e=this.fB.shift(),e?(e.YD=t,this.dB.set(t,e),e):void 0)}constructor(t,e){this.ap=t,this.xb=e,this.nB=void 0,this.dB=Wn(),this.fB=[],this.ON=t=>{const e=this._B(t.sessionId);e&&e.tB()},this.cB=t=>{const e=this._B(t.sessionId);e&&e.eB(t)},this.lB=t=>{const e=this._B(t.sessionId);e&&e.iB(t)}}},KT=class{cN(){return Promise.resolve(new QT(this.ap,this.gB))}dN(){return this.gB}constructor(t,e){this.ap=t,this.gB=e}};function dt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function kh(t){if(!t)return;let e;for(;Qf(e=t.firstChild);)t.removeChild(e)}function jT(t){const e=t.className;return"string"==typeof e?e:e&&"string"==typeof e.baseVal?e.baseVal:""}function YT(t,e){const i=t.className;"string"==typeof i?t.className=e:i&&"string"==typeof i.baseVal&&(i.baseVal=e)}function ZT(t,e){return void 0!==t.classList?t.classList.contains(e):void 0!==t.className&&-1!==(" "+jT(t)+" ").indexOf(" "+e+" ")}function ro(t,e){if(void 0!==t.classList)t.classList.add(e);else if(void 0!==t.className){const i=jT(t);-1===(" "+i+" ").indexOf(" "+e+" ")&&YT(t,(i+" "+e).trim())}}function JT(t,e){if(void 0!==t.classList)t.classList.remove(e);else if(void 0!==t.className){let i=" "+jT(t)+" ";const s=" "+e+" ";for(;-1!==i.indexOf(s);)i=i.replace(s," ");YT(t,i.trim())}}function $T(t,e,i){void 0===i&&(i=!ZT(t,e)),i?ro(t,e):JT(t,e)}function tS(t){t.stopPropagation()}function eS(t,e){fh._R&&fh.vR<3?function(t,e){let i=e;switch(e){case"flex":i="-webkit-flex";break;case"inline-flex":i="-webkit-inline-flex"}t.display=i}(t,e):function(t,e){if(t.display=e,t.display!==e){let i=e;switch(e){case"flex":i="-ms-flexbox";break;case"inline-flex":i="-ms-inline-flexbox"}t.display=i}}(t,e)}function ph(t,e){const i=e.style;if(i)for(const e of g.keys(t)){const s=t[e];void 0!==s&&(i[e]=s)}}function ha(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.top="0",e.bottom="0",e.width="100%",e.height="100%"}function iS(t){t.removeAttribute("title")}function sS(t){t.addEventListener("mouseover",(t=>{iS(t.target)}))}function Qt(t){return"video"===function(t){return t&&t.nodeName&&t.nodeName.toLowerCase()||""}(t)}function nS(t){t.src&&(t.removeAttribute("src"),t.load()),t.srcObject&&(t.srcObject=null,t.load())}function rS(){return void 0!==h?h.createElement("video"):void 0}function hS(){return zT||(zT=rS()),zT}var oS,di,aS=class{yN(t,e){try{return Promise.resolve(function(t,e){if(!aS.EN())throw new p("Unsupported key system "+t);for(let i of e){let e=kT(uS,hA,t,i);if(e)return new KT(t,e)}throw new p("Unsupported key system configuration for "+t)}(t,e))}catch(t){return Promise.reject(t)}}static EN(){return Sh()}};function uS(t,e){const i=hS();return!(!i||!i.canPlayType||""===i.canPlayType(e,t))}function dh(){return oS||(oS=function(){const t=[];ri.EN()&&t.push(new ri);Zt.EN()&&t.push(new Zt);si.EN()&&t.push(new si);aS.EN()&&t.push(new aS);return new WT(t)}()),oS}!function(t){t[t.vB=0]="vB",t[t.wB=1]="wB"}(di||(di={}));var ki=class extends Xi{constructor(t){super(ee.Yf),this.currentTime=t}},_a=class extends Xi{constructor(t){super(ee.Qf),this.currentTime=t}},cS=[ee.Bf,ee.Qf,o.Ph,o.Ch],lS=class extends Et{mB(t){!this.pB&&t>=dw.Jn&&(this.pB=!0,this.To(new Si(this.yB.Wu,t)))}AB(t){!this.bB&&t>=dw.Hf&&(this.bB=!0,this.To(new q(this.yB.Wu,t)))}TB(t){this.SB||(t>=dw._f&&this.kB<dw._f&&!this.yB.Dc||this.EB&&t>=dw._f)&&this.To(new _a(this.yB.Wu))}IB(t){!this.PB(t)||this.yB.Ic||this.yB.lt||this.To(new ki(this.yB.Wu))}RB(t){this.kB<=dw.Hf&&t>=dw._f&&this.To(new Zw(this.yB.Wu,t))}maybeDispatchCanPlayThroughEvent(t){t===dw.Wl&&this.To(new tt(this.yB.Wu,t))}PB(t){const e=!this.yB.Dc&&t<=dw.Hf,i=!this.CB&&this.kB<=dw.Hf;return e&&!i}get EB(){return!this.yB.Dc&&this.CB}ir(){this.kB=dw.zl,this.CB=!0,this.bB=!1,this.pB=!1}bn(){this.Lo(),this.SB&&this.yB.pn(ee.Qf,this.xB),this.yB.pn(o.Ph,this.DB),this.yB.pn(o.Ch,this.NB),this.yB.pn(ee.Bf,this.BB)}constructor(t,e=!1){super(),this.yB=t,this.SB=e,this.kB=dw.zl,this.CB=!0,this.bB=!1,this.pB=!1,this.BB=t=>{const e=this.yB.Nc;e!==this.kB&&this.To(new Qs(t.currentTime,e)),e===dw.zl&&(this.bB=!1,this.pB=!1),this.mB(e),this.AB(e),this.RB(e),this.maybeDispatchCanPlayThroughEvent(e),this.TB(e),this.IB(e),this.kB=e},this.DB=()=>{this.IB(this.kB),this.TB(this.kB),this.CB=this.yB.Dc},this.NB=()=>{this.CB=this.yB.Dc},this.xB=t=>{this.To(new _a(t.currentTime))},this.yB.wn(ee.Bf,this.BB),this.yB.wn(o.Ph,this.DB),this.yB.wn(o.Ch,this.NB),this.SB&&this.yB.wn(ee.Qf,this.xB)}},nh=class extends Et{get Wu(){return this.yB.Wu}get Ic(){return this.yB.Ic}get lt(){return this.yB.lt}get Dc(){return this.yB.Dc}get Nc(){return this.yB.Nc}Ou(){this.Lo(),this.yB.pn(cS,this.Os)}constructor(t){super(),this.yB=t,this.yB.wn(cS,this.Os)}},Tt=class{LB(){return this.OB}MB(t){this.OB=t}get Gf(){return this.fP}get FB(){return!1}get UB(){const t=this.HB.certificate;if(t)return mh(t)?Pt(t):Zn(t)}VB(){return this.HB.licenseAcquisitionURL||this.LB()}get WB(){return!1}qB(t){return Promise.resolve()}zB(t,e){return Promise.resolve(void 0)}get oP(){return Boolean(this.HB.useCredentials)}async XB(t,e,i,s){const r=this.GB(t,e,i,s);if(""===r.TI)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Gf.pI(r);return await t.QB(e)}catch(t){return pe(t),void await this.KB(t,r.TI,s)}}GB(t,e,i,s){const n=this.jB().UI(),r=this.oP,h={TI:this.YB(),sP:e,eP:n,tP:t,oP:r,iP:ut.POST,kI:0,M_:s,Iw:_h.XI,rP:i};return new vh(h)}ZB(t,e){return Promise.resolve(t)}JB(t,e,i,s){return Promise.resolve(t)}jB(){return new Yu(this.HB.headers||{})}async KB(t,e,i){throw new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,"Error during license server request",t)}YB(t,e){let i=e;const s=this.HB.queryParameters;if(!i){const t=this.VB();if(!t)return"";i=t}if(s||t){const e=Ee.Rh(i);t&&vg(e,t),s&&vg(e,s),i=e.href}return i}$B(t,e){return ai(t)}tL(t){return new x(t)}async eL(t,e,i){const s=await this.$B(t,i),n=await this.XB(s,this.iL,e,i);return this.tL(n)}bn(){}constructor(t,e,i,s,n){this.OB=void 0,this.ap=t,this.sL=e,this.nL=i,this.fP=s,this.iL=n,this.HB=this.rL(e)}};function ai(t){return Promise.resolve(A(t).buffer)}var _e,Ku=class extends Tt{rL(t){return t.widevine||{}}async hL(t,e){return this.UB?this.UB:this.oL(new x(t),e)}oL(t,e){return super.eL(t,hi.jI,e)}constructor(t,e,i,s){super(ts,t,e,i,s)}};!function(t){t.Ym="Widevine",t.aL="PlayreadyV2",t.uL="PlayreadyV3",t.jm="PlayreadyV2",t.Zm="Fairplay"}(_e||(_e={}));var dS={Widevine:{DRMProvider:"Google",DRMVersion:"1.4.8.86",DRMType:"Widevine"},PlayreadyV2:{DRMProvider:"Microsoft",DRMVersion:"2.9",DRMType:"Playready"},PlayreadyV3:{DRMProvider:"Microsoft",DRMVersion:"3",DRMType:"Playready"},Fairplay:{DRMProvider:"Apple",DRMType:"FairPlay",DRMVersion:"1.0"}};function li(t,e){var i,s,n,r;const h=dS[e],o=t.accountName;return{CustomerName:t.customerName,AccountName:o,PortalId:t.portalId,FriendlyName:t.friendlyName,DeviceInfo:{FormatVersion:"1",DeviceType:"PC",OSType:null==(i=Ee.cL)?void 0:i.Zs,OSVersion:null==(s=Ee.cL)?void 0:s.lL,DRMProvider:h.DRMProvider,DRMVersion:h.DRMVersion,DRMType:h.DRMType,DeviceVendor:null==(n=Ee.cL)?void 0:n.dL,DeviceModel:null==(r=Ee.cL)?void 0:r.fL}}}function fS(t,e){if(!t.accountName)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, accountName is not set.");if(!t.customerName)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, customerName is not set.");if(!t.portalId)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration, portalId is not set.");throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium "+e+" DRM configuration.")}function _S(t,e,i){let s;if(mw(t))s={AuthToken:t.authToken,Payload:e};else{if(!pw(t))throw fS(t,i);s={LatensRegistration:li(t,i),Payload:e}}return Ur(JSON.stringify(s))}async function gS(t,e,i){const s=t.AI;if(!s)throw new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,e);const r=s;let h,o;try{h=await r._L(i),o=function(t){if(t){if(t.WvProxyErr)return t.WvProxyErr.desc;if(t.DrmErr)return t.DrmErr.desc}return}(h)}catch(t){o=""}throw new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium server request",t,r.pI.TI,r.SI,r.gL,o)}var vi=class extends Ku{static vL(){return Ee.Zs.wL?"required":"optional"}KB(t,e,i){return gS(t,e,i)}qB(t){return this.mL?E_(this.mL.jf,t):(this.mL=new $i,Promise.resolve())}async $B(t,e){const i=this.sL;if(!i)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Widevine DRM configuration.");return _S(i,Oe(t),_e.Ym)}tL(t){let e;if(!t.license)throw new ss(n.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Widevine license server");return e=Pt(t.license),e}pL(t){return Promise.resolve(new x(t))}async hL(t,e){this.yL();const i=await this.$B(t,e),s=await this.XB(i,Ct.OI,hi.YI,e);return await this.pL(s)}async oL(t,e){const i=await super.oL(t,e);return this.yL(),i}yL(){this.mL||(this.mL=new $i),this.mL.Lf()}bn(){this.mL&&this.mL.Jl(),super.bn()}constructor(t,e,i){super(t,e,i,Ct.MI),this.mL=void 0}},vS=class extends Ku{get AL(){if(yw(this.sL))return this.sL.token}async $B(t,e){const i=await ai(t),s=this.nL,r=ew(new x(i)),h=this.AL;if(!h)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The Widevine vuDRM token has not been correctly configured.");return JSON.stringify({token:h,drm_info:r,kid:s})}constructor(t,e,i){super(t,e,i,Ct.OI),this.MB("https://widevine-proxy.drm.technology/proxy")}};function wS(t,e){let i=e||{};return t.ticket&&t.sessionId&&(i=Me({},i,{SessionId:t.sessionId,Ticket:t.ticket})),Me({},i,{CrmId:t.crmId,AccountId:t.accountId,ContentId:t.contentId})}var mS=class extends Ku{YB(t,e){let i=t;return Co(this.sL)&&(i=wS(this.sL,i)),super.YB(i,e)}constructor(t,e,i){super(t,e,i,Ct.OI),this.MB("https://emeademo.dev.ott.irdeto.com/Widevine/getlicense")}},pS="Conax-Custom-Data";function wh(t,e,i){const s=t&&vw(t)&&t;if(s&&!i.has(pS)){const t=Hg(s)?s.token:void 0,n=Hg(s)?s.deviceId:void 0,r=JSON.stringify({Version:"1.0.0",CxAuthenticationDataToken:t,CxClientInfo:{DeviceType:"Browser",DrmClientType:e+"-HTML5",DrmClientVersion:"1.0.0",CxDeviceId:n}});i.set(pS,r)}return i}var yS=class extends Ku{jB(){const t=super.jB();return wh(this.sL,"Widevine",t)}constructor(t,e,i){super(t,e,i,Ct.OI),this.MB("https://connect.conax.com:8094/license")}};function AS(t){const e=V(new x(t));return Pt(JSON.parse(e).license)}function xh(t){return"string"==typeof t.token?t.token:Ur(JSON.stringify({userId:t.userId,sessionId:t.sessionId,merchant:t.merchant}))}function gh(t,e,i){let s;return s=i.token?"x-dt-auth-token":"dt-custom-data",t.set(s,e),t}var bS=class extends Ku{get AL(){return xh(this.sL)}tL(t){return AS(t)}jB(){return gh(super.jB(),this.AL,this.sL)}constructor(t,e,i){super(t,e,i,Ct.OI),this.MB("https://lic.drmtoday.com/license-proxy-widevine/cenc/")}},TS=class extends Ku{jB(){const t=super.jB(),e=this.sL.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i){super(t,e,i,Ct.OI)}};async function Ah(t,e,i,s){if(!Aw(t))throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Xstream DRM Configuration");const r=new Yu;r.append("Cache-Control","no-cache"),r.append("Content-Type","application/json");const h=t.sessionId;h&&r.append("XSSESSION",h);const o=t.streamId;let a;a=t.fairplay?"persistent"===t.fairplay.licenseType?"persistent":"non-persistent":t.widevine&&"persistent"===t.widevine.licenseType?"persistent":"non-persistent";const u={drmType:e,licenseType:a,streamId:o},c={TI:t.ticketAcquisitionURL,sP:Ct.MI,eP:r,iP:ut.POST,tP:JSON.stringify(u),M_:s},l=await i.pI(c);return await l._L()}var SS=class extends Ku{jB(){const t=super.jB();return t.set("Content-Type","application/json"),t}async $B(t,e){const i=cv(t.buffer),s=this.sL,n=await Ah(s,"widevine_modular",this.Gf,e);this.MB(n.licenseServerUrl);const r=Yn(JSON.stringify({payload:i,ticket:n.ticket}));return super.$B(r,e)}tL(t){return Pt(t.license)}constructor(t,e,i){super(t,e,i,Ct.MI)}},kS=class extends Ku{jB(){if(!bw(this.sL))throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.jB();return t.set("X-AxDRM-Message",this.sL.token),t}constructor(t,e,i){super(t,e,i,Ct.OI)}};function ES(t){const e=new x(2*t.length);for(let i=0;i<t.length;i+=1)e[2*i]=t.charCodeAt(i),e[2*i+1]=0;return e}var Lu=class extends Tt{rL(t){return t.playready||{}}jB(){const t=new Yu(this.bL);return t.VI(super.jB()),t}TL(t){return t.length>=1&&t[0].lI.length>0}zB(t){const e=this.sL.playready.customData;if(e){const t=ES(e),i=ES('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">'+Oe(t)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>");return Promise.resolve({playready:{DN:i}})}return super.zB(t)}async $B(t,e){const i=await ai(t);return this.SL(i)}async SL(t){var e,i;let s=null;const n=Fr(new DataView(t),new Ko,!0);let r;try{r=Ee.oI(n)}catch(t){return s}const h=null==(e=r.nI("PlayReadyKeyMessage")[0])?void 0:e.nI("LicenseAcquisition")[0];var o;const a=null!=(o=null==h?void 0:h.nI("Challenge"))?o:[];this.TL(a)&&(s=hr(a[0].kL));const u=new Yu;var c;const l=null!=(c=null==(i=null==h?void 0:h.nI("HttpHeaders")[0])?void 0:i.nI("HttpHeader"))?c:[];for(const t of l){const e=t.nI("name")[0].kL,i=t.nI("value")[0].kL;u.append(e,i)}return this.bL=u,s}hL(t,e){return Promise.resolve(t)}oL(t,e){return super.eL(t,hi.ZI,e)}constructor(t,e,i){super(Yr,t,e,i,Ct.OI),this.bL=void 0}},Ih=class t{static EL(t){return"3"===t.version?_e.uL:_e.aL}IL(){const t={};if(this.RD===_e.uL){const e={LatensRegistration:li(this.PL,_e.uL)};t["X-TITANIUM-DRM-CDATA"]=Ur(JSON.stringify(e))}return t}get RL(){return this.RD}get kN(){return this.RD===_e.aL}constructor(e){this.PL=e,this.RD=t.EL(e)}};var IS=class extends Lu{zB(t){const e=this.sL;if(!this.sL)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium PlayReady DRM configuration.");if(pw(e)){const t={};return t.playready={DN:PS(e,this.CL.RL)},Promise.resolve(t)}return Promise.reject(fS(e,_e.jm))}jB(){const t=new Yu(this.CL.IL());return t.VI(super.jB()),t}async KB(t,e,i){const s=t.AI;if(!s)throw new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e);let r,h;try{const t=await s.xL(i),e=V(new x(t)),n=Ee.oI(e);if(n){const t=function(t,e){return function(t,e){const i=t.m.slice(),s=[];for(;i.length>0;){const t=i.shift();e(t)?s.push(t):i.push(...t.m)}return s}(t,(t=>t.DL===e))}(n,"CustomData");var o;if(t.length>0)r=JSON.parse(t[0].kL),h=null==(o=r.DrmErr)?void 0:o.desc}}catch(t){}throw new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Titanium PlayReady license request",t,e,s.SI,s.gL,h)}TL(t){if(1!==t.length)throw new ss(n.CONTENT_PROTECTION_INITIALIZATION_INVALID,"PlayReady license message incorrectly formatted, Challenge not found.");return!0}constructor(t,e,i){super(t,e,i),this.CL=new Ih(this.sL)}};function PS(t,e){const i=li(t,e),s=i.DeviceInfo.FormatVersion,n=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")}(function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}("<TitaniumCustomData>"+Ur('<LatensRegistration formatversion="'+s+'"><AccountName>'+i.AccountName+"</AccountName><CustomerName>"+i.CustomerName+"</CustomerName><PortalID>"+i.PortalId+'</PortalID><DeviceInfo formatversion="'+s+'"><DeviceType>'+i.DeviceInfo.DeviceType+"</DeviceType><OSType>"+i.DeviceInfo.OSType+"</OSType><OSVersion>"+i.DeviceInfo.OSVersion+"</OSVersion><DRMProvider>"+i.DeviceInfo.DRMProvider+"</DRMProvider><DRMVersion>"+i.DeviceInfo.DRMVersion+"</DRMVersion><DRMType>"+i.DeviceInfo.DRMType+"</DRMType><DeviceVendor>"+i.DeviceInfo.DeviceVendor+"</DeviceVendor><DeviceModel>"+i.DeviceInfo.DeviceModel+"</DeviceModel></DeviceInfo></LatensRegistration>")+"</TitaniumCustomData>")),r=Yv(n,!0);return Yv('<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0"><CustomData encoding="base64encoded">'+Oe(r)+"</CustomData></LicenseAcquisition></PlayReadyCDMData>",!0)}var RS,CS=class extends Lu{get AL(){if(yw(this.sL))return this.sL.token}TL(t){if(1!==t.length)throw new ss(n.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Vudrm PlayReady license message incorrectly formatted, Challenge not found.");return!0}YB(t,e){const i=Me({},t||{},{token:this.AL});return super.YB(i,e)}constructor(t,e,i){super(t,e,i),this.MB("https://playready-license.drm.technology/rightsmanager.asmx")}},xS=class extends Lu{YB(t,e){let i=t;return Co(this.sL)&&(i=wS(this.sL,i)),super.YB(i,e)}constructor(t,e,i){super(t,e,i),this.MB("https://emeademo.dev.ott.irdeto.com/playready/rightsmanager.asmx")}},DS=class extends Lu{jB(){const t=super.jB();return wh(this.sL,"PlayReady",t)}constructor(t,e,i){super(t,e,i),this.MB("https://connect.conax.com:8010/cxplayready/rightsmanager.asmx")}},NS=class extends Lu{get AL(){return xh(this.sL)}tL(t){const e=function(t){const e=V(new x(t));return Jo(e,"<?xml")?0:1}(t);return 1===e?AS(t):super.tL(new x(t))}jB(){return gh(super.jB(),this.AL,this.sL)}constructor(t,e,i){super(t,e,i),this.MB("https://lic.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx")}};!function(t){t[t.NL=0]="NL",t[t._L=1]="_L"}(RS||(RS={}));var ie,BS=class extends Lu{jB(){const t=super.jB();return this.BL&&t.set("Ticket",this.BL),t.set("Content-Type","text/xml"),t}async $B(t,e){const i=this.sL,s=await Ah(i,"playready",this.Gf,e);return this.MB(s.licenseServerUrl),this.BL=s.ticket,super.$B(t,e)}constructor(t,e,i){super(t,e,i)}},LS=class extends Lu{jB(){if(!bw(this.sL))throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.jB();return t.set("X-AxDRM-Message",this.sL.token),t}};!function(t){t.MI="application/json",t.LL="application/x-www-form-urlencoded",t.OL="application/octet-stream",t.KT="text/plain;charset=UTF-8"}(ie||(ie={}));var Ss=class extends Tt{get WB(){return!0}ML(){return this.HB.certificateURL||this.FL}UL(t){this.FL=t}$B(t){return Promise.resolve(this.HL(t,this.VL))}HL(t,e){return"spc="+encodeURIComponent(Oe(t))+"&assetId="+encodeURIComponent(e)}get WL(){return ie.LL}rL(t){return t.fairplay||{}}qL(t){const e=t.indexOf("?");if(e>=0)return Promise.resolve(t.substr(e+1));{const e=t.split("skd://").pop();if(e){if(/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(e))return Promise.resolve(e)}const i=t.split("/");return Promise.resolve(i[i.length-1])}}async zB(t){var e;const i=null!=(e=this.zL)?e:Mr(new x(t)),s=await this.qL(i);this.VL=s;const n={};return n.fairplay={HN:s},n}jB(){const t=super.jB();return t.set("Content-Type",this.WL),t}async hL(t,e){return this.UB?this.UB:await this.XL(e)}oL(t,e){return super.eL(t,hi.QI,e)}GL(t){const e=this.ML(),i=this.jB(),s={TI:e,sP:Ct.OI,eP:i,iP:ut.GET,oP:!1,tP:null,kI:0,M_:t,Iw:_h.XI,rP:hi.KI};return new vh(s)}async XL(t){const e=this.GL(t),i=await this.Gf.pI(e),s=await i.xL();return new x(s)}tL(t){let e;if("string"==typeof t){let i=t.trim();"<ckc>"===i.substr(0,5)&&"</ckc>"===i.substr(-6)&&(i=i.slice(5,-6)),e=Pt(i)}else e=new x(t);return e}YB(t,e){let i=super.YB(t,e);return Jo(i,"skd:")&&(i=i.substr(4)),i}constructor(t,e,i,s,n){super(t.ap,e,i,s,n),this.VL="",this.FL=void 0,this.zL=t.QL}};function OS(t){return!j(t.getTime())}function Ri(){return Date.now()||(new Date).getTime()}function MS(t){return t/1e3}function Mh(t){return 1e3*t}var ii=1/6,FS=Te.fromNumber(ne);function ye(t,e){if(0===e)return t.isZero()?NaN:t.isNegative()?-1/0:1/0;if(t.lessThanOrEqual(FS))return t.toNumber()/e;const i=t.divide(e),s=t.subtract(i.multiply(e));return i.toNumber()+s.toNumber()/e}var US=class extends Ss{get WL(){return ie.OL}qL(t){let e=t.split("://",1);return"skd"!==e[0].slice(-3).toLowerCase()?Promise.resolve(""):(e=t.split(";",2),e.length>1?Promise.resolve(e[1]):Promise.resolve(super.qL(t)))}async $B(t){return t}tL(t){return new x(t)}YB(t,e){const i=t||{};return i.p1=Ri(),super.YB(i,e)}constructor(t,e,i,s){super(t,e,i,s,Ct.OI)}},HS=class extends Ss{get WL(){return ie.MI}get AL(){if(!yw(this.sL))throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Token is required for FairPlay VuDrm.");return this.sL.token}HL(t,e){const i={token:this.AL,contentId:e,payload:Oe(t)};return JSON.stringify(i)}tL(t){return new x(t)}jB(){const t=super.jB();return t.set("x-vudrm-token",this.AL),t}constructor(t,e,i,s){super(t,e,i,s,Ct.OI),this.MB("https://fairplay-license.drm.technology/license"),this.UL("https://fairplay-license.drm.technology/certificate")}},VS="Verimatrix Fairplay license response incorrectly formatted. Invalid json.",WS="Verimatrix Fairplay license response incorrectly formatted. Ckc not found.",qS=class extends Ss{tL(t){const e=function(t){let e;try{e=JSON.parse(t).ckc}catch(t){throw new ss(n.CONTENT_PROTECTION_LICENSE_INVALID,VS)}if(!e)throw new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,WS);return e}(V(new DataView(t)));return super.tL(e)}constructor(t,e,i,s){super(t,e,i,s,Ct.OI)}};var zS=class extends Ss{get WL(){return ie.MI}async $B(t){const e=this.sL;if(!e)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Titanium Fairplay DRM configuration.");return _S(e,Oe(t),_e.Zm)}tL(t){try{let e;if(mh(t)){const i=t.trim();e=JSON.parse(i)}else e=t;if(e.license){const t=hr(e.license);return new x(t)}throw new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Titanium Fairplay license server")}catch(t){throw new ss(n.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Titanium Fairplay license server")}}KB(t,e,i){return gS(t,e,i)}constructor(t,e,i,s){super(t,e,i,s,Ct.MI)}},XS=class extends Ss{ML(){const t=super.ML();if(!t)return t;const e=Ee.Rh(t),i=this.sL;return Co(i)&&vg(e,{accountId:i.accountId,applicationId:i.applicationId||""}),e.href}qL(t){return Co(this.sL)?Promise.resolve(this.sL.contentId):super.qL(t)}async $B(t){return t}tL(t){return new x(t)}get WL(){return ie.OL}YB(t,e){let i=t;return Co(this.sL)&&(i=function(t,e){return Me({},wS(t,e),{KeyId:t.keyId})}(this.sL,i)),super.YB(i,e)}constructor(t,e,i,s){super(t,e,i,s,Ct.OI),this.MB("https://emeademo.dev.ott.irdeto.com/streaming/getckc"),this.UL("https://emeademo.dev.ott.irdeto.com/streaming/getcertificate")}},GS=class extends Ss{jB(){const t=super.jB();return wh(this.sL,"FairPlay",t)}async XL(t){const e={TI:this.ML(),sP:Ct.OI,eP:{},iP:ut.GET,oP:!1,tP:null,kI:0,M_:t,Iw:_h.XI,rP:hi.KI},i=await this.Gf.pI(e),s=await i.xL();return new x(s)}async $B(t){return t}qL(t){const e=t.indexOf("?");if(0===t.indexOf("skd://")){let i;return i=e>=0?t.substring(6,e):t.substring(6),Promise.resolve(function(t){return V(Pt(t))}(i))}return Promise.resolve("unknown")}tL(t){try{const e=JSON.parse(t);return new x(hr(e.CkcMessage))}catch(t){throw new v("CFLRW-66")}}constructor(t,e,i,s){if(super(t,e,i,s,Ct.KT),!vw(e))throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Conax configuration");this.MB("https://connect.conax.com:8097/license")}},QS=class extends Ss{qL(t){return Jo(t,"skd://")?Promise.resolve(t.substring(6,40)):Promise.reject(new ss(n.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error while determining the KeyOS Content ID."))}HL(t,e){return"spc="+Oe(t)+"&assetId="+e}constructor(t,e,i,s){super(t,e,i,s,Ct.KT),this.MB(rw[Js.Zm])}},KS=class extends Ss{get AL(){return xh(this.sL)}HL(t,e){const i="spc="+encodeURIComponent(Oe(t))+"&"+encodeURI(e);return"persistent"===this.HB.licenseType?i+"&offline=true":i}jB(){return gh(super.jB(),this.AL,this.sL)}constructor(t,e,i,s){super(t,e,i,s,Ct.KT),this.MB("https://lic.drmtoday.com/license-server-fairplay/")}},jS=class extends Ss{qL(t){let e=t;return Jo(e,"skd:")&&(e="http:"+e.substring(4)),Jo(e,"http:")||Jo(e,"https:")?Promise.resolve(Ee.Rh(e).hostname):Promise.reject(new v("Could not parse ExpressPlay FairPlay content ID."))}async $B(t){return t}tL(t){return new x(t)}get WL(){return ie.OL}constructor(t,e,i,s){super(t,e,i,s,Ct.OI)}},YS=class extends Ss{jB(){const t=super.jB(),e=this.sL.token;return t.set("Authorization","Bearer "+e),t}constructor(t,e,i,s){super(t,e,i,s,Ct.KT)}},ZS=class extends Ss{async XL(t){const e=this.ML(),i=this.jB(),s={TI:e,sP:Ct.MI,eP:i,iP:ut.POST,M_:t,Iw:_h.XI,rP:hi.KI},n=await this.Gf.pI(s),r=await n._L();return new x(Pt(r.certificate))}get WL(){return ie.MI}async oL(t,e,i){void 0===i&&(i=Ct.KT);const s=Oe(t),n=this.sL,r=await Ah(n,"fairplay",this.Gf,e),h=Yn(JSON.stringify({spc:s,ticket:r.ticket})),o={TI:this.VB(),sP:Ct.MI,eP:this.jB(),iP:ut.POST,tP:h,kI:0,M_:e,Iw:_h.XI,rP:hi.QI},a=await this.Gf.pI(o);return Pt((await a._L()).licence)}constructor(t,e,i,s){if(super(t,e,i,s,Ct.MI),!Aw(e))throw new v("Invalid Xstream DRM configuration")}},JS=class extends Ss{HL(t,e){return Oe(t)}tL(t){if(0===t.length)throw new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,"Vimond license request error.");return super.tL(t)}jB(){const t=super.jB();return t.set("Content-Type","text/plain"),t}constructor(t,e,i,s){super(t,e,i,s,Ct.KT)}},$S=class extends Ss{get WL(){return ie.MI}HL(t,e){return t}tL(t){return new x(t)}jB(){if(!bw(this.sL))throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"Invalid Axinom configuration");const t=super.jB();return t.set("X-AxDRM-Message",this.sL.token),t}constructor(t,e,i,s){super(t,e,i,s,Ct.OI)}},tk=class extends Ss{get WL(){return ie.KT}HL(t,e){const i={spc:Oe(t)};return JSON.stringify(i)}qL(t){const e=Ee.Rh(t);return this.KL=t,e.searchParams.has("b")?Promise.resolve(e.searchParams.get("b")):Promise.reject(new ss(n.CONTENT_PROTECTION_INITIALIZATION_INVALID,"Error during license server request: Could not extract content id"))}YB(t,e){let i=this.VB();return!i&&this.KL&&(i=this.KL),i&&(i=i.replace("skd://","https://")),super.YB(t,e||i)}tL(t){try{let e;if(e=mh(t)?JSON.parse(t.trim()):t,e.ckc)return Pt(e.ckc)}catch(t){throw new ss(n.CONTENT_PROTECTION_LICENSE_INVALID,"Could not process the response from the Uplynk Fairplay license server")}throw new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,"No license received from the Uplynk Fairplay license server")}constructor(t,e,i,s){super(t,e,i,s,Ct.MI),this.KL=void 0}},Vt=class{jL(t){return this.YL(t)}ZL(t,e){throw new p(e+" must be "+this.JL+". (Received: "+t+")")}constructor(t,e){this.YL=t,this.JL=e}},ek=(new Vt((function(t){return!0}),"any"),new Vt(zu,"a number")),ik=new Vt(mh,"a string"),sk=new Vt(Mn,"a boolean");new Vt(jf,"a date"),new Vt(Kf,"undefined"),new Vt(Th,"an object"),new Vt((function(t){return null===t}),"null"),new Vt((function(t){return null==t}),"null or undefined");var nk=function(t){return{jL(e){if(!Th(e))return!1;for(const i of g.keys(t)){if(!t[i].jL(e[i]))return!1}return!0},ZL(e,i){if(!Th(e))throw new p(i+" must be an object.");for(const s of g.keys(t)){const n=t[s];if(!n.jL(e[s]))return n.ZL(e[s],i+"."+String(s))}throw new p}}}({responseCode:ek,isException:sk,description:ik,title:ik,correlationId:ik});async function rk(t,e,i,s,r){const h=function(t,e,i,s){const n={token:e.token,account:e.accountId,form:"json"},r=decodeURIComponent(function(t,e){const i=Ee.Rh(t);return vg(i,e),i.toString()}(i,n)),h=new Yu({});h.append("Content-Type","application/json");const o=Oe(t),a={getFairplayLicense:{releasePid:e.releasePid,spcMessage:o}};return{TI:r,sP:Ct.KT,eP:h,iP:ut.POST,tP:JSON.stringify(a),M_:s,Iw:_h.XI,rP:hi.QI}}(t,e,i,r);return await async function(t,e){const i=await e.pI(t),s=await i._L();if(nk.jL(s))throw new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,s.description,void 0,t.TI,s.responseCode);return Pt(s.getFairplayLicenseResponse.ckcResponse)}(h,s)}var hk=class extends Ss{qL(t){const e=t.replace("FairPlay",this.$L.releasePid);return super.qL(e)}async oL(t,e){return await rk(t,this.$L,this.VB(),this.Gf,e)}constructor(t,e,i,s){super(t,e,i,s,Ct.OI),this.$L=e}},ok=class extends Tt{rL(t){return t.clearkey||{}}async XB(t,e,i,s){const r=this.HB;if(this.VB())return super.XB(t,this.iL,i,s);if(r.keys&&r.keys.length){const t={keys:r.keys.map((t=>{let e=t;return e||(e={}),{kty:"oct",kid:e.id,k:e.value}}))};return Jv(JSON.stringify(t)).buffer}throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The clearkey license has not been configured correctly.")}hL(t,e){return Promise.resolve(new x(0))}async oL(t,e){const i=await super.eL(t,hi.JI,e),s=JSON.parse(Mr(i));if(s.keys)for(const t of s.keys)t.k&&(t.k=hv(t.k)),t.kid&&(t.kid=hv(t.kid));return Jv(JSON.stringify(s))}constructor(t,e,i){super(Zr,t,e,i,Ct.OI)}},Ph=class extends Ku{},ak={url:"",method:"GET",headers:{},body:null,useCredentials:!1};async function uk(t,e,i){const s=_k(e),n=t.onCertificateRequest;if(!n||"function"!=typeof n)return Promise.resolve(e);const r=await E_(Promise.resolve(n.call(t,s)),i);return tw(r)?Zn(r):fk(Me({},ak,r))}async function ck(t,e,i,s,n){const r=t.onCertificateResponse,h=dk(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);return Zn(await E_(Promise.resolve(r.call(t,h)),n))}async function lk(t,e,i,s){const n=await async function(t,e,i,s){const n=null==t?void 0:t.onLicenseRequest,r=Rh(e,i);if(!n||"function"!=typeof n)return Promise.resolve(r);0;const h=await E_(Promise.resolve(n.call(t,r)),s);if(tw(h))return Zn(h).buffer;return Me({fairplaySkdUrl:void 0},ak,h)}(t,e,i,s);return n instanceof ArrayBuffer?n:fk(n)}async function Ch(t,e,i,s,n,r){const h=Rh(i,n),o=await async function(t,e,i,s,n){const r=null==t?void 0:t.onLicenseResponse,h=dk(e,i,s);if(!r||"function"!=typeof r)return Promise.resolve(e);0;const o=await E_(Promise.resolve(r.call(t,h)),n);return Zn(o)}(t,new x(e),h,s,r);return Zn(o)}function Rh(t,e){return Me({},_k(t),{fairplaySkdUrl:e})}function dk(t,e,i){return{url:i.gP,status:i.SI,statusText:i.gL,headers:i.eP.UI(),body:t,request:e}}function fk(t){return new vh({TI:t.url,iP:t.method,eP:t.headers,tP:t.body,oP:t.useCredentials})}function _k(t){var e;return{url:t.TI,body:null!=(e=gk(t.tP))?e:null,headers:t.eP.UI(),method:t.iP,useCredentials:t.oP}}function gk(t){if(t)return"string"==typeof t?Jv(t):t instanceof ArrayBuffer?new x(t):Qn(t)?ou(t):void 0}var vk=class extends Lu{hL(t,e){return Promise.resolve(t)}async oL(t,e){const i=await this.SL(A(t).buffer),s=this.GB(i,Ct.OI,hi.ZI,e),r=await lk(this.tO,s,void 0,e);if(r instanceof ArrayBuffer)return new x(r);if(""===r.TI)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Gf.pI(r),i=await t.xL(e);return await Ch(this.tO,i,s,t,void 0,e)}catch(t){throw pe(t),new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,"Error during PlayReady license request",t)}}constructor(t,e,i,s){super(t,e,i),this.tO=s}},wk=class extends Ph{async hL(t,e){if(this.UB)return this.UB;const i=this.GB(t,Ct.OI,hi.YI,e),s=await uk(this.tO,i,e);if(s instanceof x)return s;if(""===s.TI)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The certificate request URL has not been correctly configured.");let r,h;try{r=await this.Gf.pI(s),h=await r.xL(e)}catch(t){throw pe(t),new ss(n.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during Widevine certificate request",t)}const o=Rh(i,void 0);return await ck(this.tO,new x(h),o,r,e)}async oL(t,e){const i=this.GB(t,Ct.OI,hi.jI,e),s=await lk(this.tO,i,void 0,e);if(s instanceof ArrayBuffer)return new x(s);if(""===s.TI)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Gf.pI(s),n=await t.xL(e);return await Ch(this.tO,n,i,t,void 0,e)}catch(t){throw pe(t),new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,"Error during Widevine license request",t)}}constructor(t,e,i,s){super(t,e,i,Ct.OI),this.tO=s}},mk=class extends Ss{async hL(t,e){if(this.UB)return this.UB;const i=this.GL(e),s=await uk(this.tO,i,e);if(Qn(s))return s;try{const t=await this.Gf.pI(s),n=await t.xL(),r=Rh(i,void 0);return await ck(this.tO,new x(n),r,t,e)}catch(t){throw pe(t),new ss(n.CONTENT_PROTECTION_CERTIFICATE_ERROR,"Error during FairPlay certificate request",t)}}async oL(t,e){const i=this.GB(t,Ct.OI,hi.QI,e),s=await lk(this.tO,i,this.eO,e);if(s instanceof ArrayBuffer)return new x(s);if(""===s.TI)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_INVALID,"The license request URL has not been correctly configured.");try{const t=await this.Gf.pI(s),n=await t.xL(e);return await Ch(this.tO,n,i,t,this.eO,e)}catch(t){throw pe(t),new ss(n.CONTENT_PROTECTION_LICENSE_ERROR,"Error during FairPlay license request",t)}}qL(t){var e;return this.eO=t,(null==(e=this.tO)?void 0:e.extractFairplayContentId)?Promise.resolve(this.tO.extractFairplayContentId(t)):super.qL(t)}constructor(t,e,i,s,n){super(t,e,i,s,Ct.OI),this.tO=n}},Uh=class{iO(t,e,i,s){switch(t.ap.Iw){case Js.Ym:return this.sO(e,i,s);case Js.jm:return this.nO(e,i,s);case Js.Zm:return this.rO(t,e,i,s);case Js.Jm:default:return this.hO(e,i,s)}}sO(t,e,i){const s=function(t){return t.integration===Mg&&mh(t.customIntegrationId)}(t)?t.customIntegrationId:t.integration;if(s&&Gc.mp.gp(s,Du)){const n=Gc.mp.wp(s,Du,t);return new wk(t,e,i,n)}switch(s){case eh:return new vi(t,e,i);case Hu:return new vS(t,e,i);case Ig:return new mS(t,e,i);case Tr:return new yS(t,e,i);case Rg:return new bS(t,e,i);case xg:return new TS(t,e,i);case Dg:return new SS(t,e,i);case Bg:return new kS(t,e,i);default:return new Ph(t,e,i,Ct.OI)}}nO(t,e,i){const s=t.integration;if(s&&Gc.mp.gp(s,Wi)){const n=Gc.mp.wp(s,Wi,t);return new vk(t,e,i,n)}switch(s){case eh:return new IS(t,e,i);case Hu:return new CS(t,e,i);case Ig:return new xS(t,e,i);case Tr:return new DS(t,e,i);case Rg:return new NS(t,e,i);case Dg:return new BS(t,e,i);case Bg:return new LS(t,e,i);default:return new Lu(t,e,i)}}rO(t,e,i,s){const n=e.integration;if(n&&Gc.mp.gp(n,ns)){const r=Gc.mp.wp(n,ns,e);return new mk(t,e,i,s,r)}switch(n){case Eg:return new US(t,e,i,s);case Hu:return new HS(t,e,i,s);case Pg:return new qS(t,e,i,s);case eh:return new zS(t,e,i,s);case Ig:return new XS(t,e,i,s);case Tr:return new GS(t,e,i,s);case wo:return new QS(t,e,i,s);case Rg:return new KS(t,e,i,s);case Cg:return new jS(t,e,i,s);case xg:return new YS(t,e,i,s);case Dg:return new ZS(t,e,i,s);case Ng:return new JS(t,e,i,s);case Bg:return new $S(t,e,i,s);case Lg:return new tk(t,e,i,s);case Og:return new hk(t,e,i,s);default:return new Ss(t,e,i,s,Ct.KT)}}hO(t,e,i){return new ok(t,e,i)}oO(t){return t.Iw===Js.jm||t.Iw===Js.Ym||t.Iw===Js.Zm||t.Iw===Js.Jm}kN(t,e){var i;if(t.Iw!==Js.jm)return!1;if(Qf(null==(i=e.playready)?void 0:i.customData))return!0;const s=e.integration;return(!s||!Gc.mp.gp(s,ns))&&(s===eh&&new Ih(e).kN)}vL(t,e){if(t.Iw!==Js.Ym)return;const i=e.integration;return i&&Gc.mp.gp(i,ns)?void 0:i===eh?vi.vL():void 0}};var pk,yk="default",Ak="theoplayer-stored-network-info-v2",Ei=25e5,uh=class{aO(t){var e;const i=null==(e=Ee.uO)?void 0:e.RC(t);if(void 0===i)return;const s=JSON.parse(i);if(void 0!==s&&void 0!==s[this.cO]){if(!this.lO(s))return s[this.cO].availableBandwidth;var n;null==(n=Ee.uO)||n.dO(t,JSON.stringify({}))}}fO(){const t=this.aO(Ak);if(void 0!==t)return t;const e=this.aO("theoplayer-stored-network-info");return e?8*e:void 0}lO(t){const e=t[this.cO].storedTimestamp;return!!e&&Ri()-e>36e5}_O(t){this.gO=t,this.vO()}wO(){var t;return null!=this.gO||(this.gO=null!=(t=this.fO())?t:Ei),this.gO}constructor(){this.cO=yk,this.gO=void 0,this.vO=E((()=>{var t;const e={[this.cO]:{availableBandwidth:this.gO,storedTimestamp:Ri()}};null==(t=Ee.uO)||t.dO(Ak,JSON.stringify(e))}),1e4)}};uh.lC=new uh,function(t){t[t.mO=0]="mO",t[t.pO=1]="pO",t[t.yO=2]="yO",t[t.AO=3]="AO",t[t.bO=4]="bO",t[t.zm=5]="zm",t[t.TO=6]="TO",t[t.SO=7]="SO",t[t.Km=8]="Km",t[t.kO=9]="kO",t[t.EO=10]="EO"}(pk||(pk={}));var bk=class{get IO(){return 0}get PO(){return 0}RO(t){}},Tk=class{CO(t){this.PL=t}vL(t){const e=this.PL;if(void 0!==e)return this.xO.vL(t,e)}kN(t){const e=this.PL;return void 0!==e&&this.xO.kN(t,e)}DO(t){const e={ap:t.ap,BO:t.BO||[],LO:t.LO,QL:t.QL},i=this.xO.iO(e,this.PL||{},t.nL,this.fP);return e.LO&&i.MB(e.LO),new Sk(i)}constructor(t,e=new Uh){this.PL=void 0,this.fP=t,this.xO=e}},Sk=class{qB(t){return this.OO.qB(t)}zB(t,e,i){return this.OO.zB(e,i)}WB(){return this.OO.WB||void 0!==this.OO.UB}hL(t,e){return this.OO.hL(t,e)}oL(t,e,i){return e&&this.OO.MB(e),this.OO.oL(t,i)}Ou(){this.OO.bn()}constructor(t){this.OO=t}},Uu=class extends P{MO(t){this.FO.push(t);for(const e of t.Kv)this.tt(e);this.UO(t)}HO(t){me(this.FO,t),this.VO(t);for(const e of t.Kv)this.WO(e)||this.it(e)}WO(t){for(const e of this.FO)if(e.Jv(t))return!0;return!1}UO(t){t.wn(ja.bv,this.qO),t.wn(ja.Sv,this.zO)}VO(t){t.pn(ja.bv,this.qO),t.pn(ja.Sv,this.zO)}bn(){for(;this.FO.length>0;)this.HO(this.FO[0]);super.bn()}pa(){return fr(this)}constructor(t){super(),this.FO=[],this.qO=t=>{this.tt(t.Ht)},this.zO=t=>{const e=t.Ht;this.WO(e)||this.it(e)};for(const e of t)this.MO(e)}};function kk(t){return{get enabled(){return t.Rt},set enabled(e){t.Rt=Dc(e)},get currentLatency(){return t.xm},get streamConfiguration(){if(void 0!==t.XO)return function(t){return{get minimumOffset(){return t.Rw},get maximumOffset(){return t.xw},get targetOffset(){return t.Cw},get forceSeekOffset(){return t.Dw},get minimumPlaybackRate(){return t.Nw},get maximumPlaybackRate(){return t.Bw}}}(t.XO)},get configuration(){return function(t){return{get minimumOffset(){return t.Rw},set minimumOffset(e){t.Rw=Mt(e)},get maximumOffset(){return t.xw},set maximumOffset(e){t.xw=Mt(e)},get targetOffset(){return t.Cw},set targetOffset(e){t.Cw=Mt(e)},get forceSeekOffset(){return t.Dw},set forceSeekOffset(e){t.Dw=Mt(e)},get minimumPlaybackRate(){return t.Nw},set minimumPlaybackRate(e){t.Nw=Mt(e)},get maximumPlaybackRate(){return t.Bw},set maximumPlaybackRate(e){t.Bw=Mt(e)},update(e){t.Kn(function(t){const e={};void 0!==t.minimumOffset&&(e.Rw=Mt(t.minimumOffset));void 0!==t.maximumOffset&&(e.xw=Mt(t.maximumOffset));void 0!==t.targetOffset&&(e.Cw=Mt(t.targetOffset));void 0!==t.forceSeekOffset&&(e.Dw=Mt(t.forceSeekOffset));void 0!==t.minimumPlaybackRate&&(e.Nw=Mt(t.minimumPlaybackRate));void 0!==t.maximumPlaybackRate&&(e.Bw=Mt(t.maximumPlaybackRate));return e}(e))}}}(t.xb)}}}var Ek,fe=class{get ma(){return null!=this.Gu||(this.Gu=kk(this)),this.Gu}get Rt(){return!1}set Rt(t){}get xm(){}get XO(){}get xb(){return this.GO}constructor(){this.GO={Dw:0,xw:0,Bw:0,Rw:0,Nw:0,Cw:0,Kn:Qo}}};function Ik(){return Ek||(Ek=fa&&fa.document&&fa.document.createElement("video")),Ek}var Pk=!(!fa||!fa.TextTrack),Rk=class extends Xo{get QO(){const t=this.KO.bl,e=this.Wu;return t.br(e,.01)}get ht(){return this.$T}get bl(){return this.KO.bl.ws()}get qu(){return this.KO.qu}set qu(t){t&&this.KO.jO(t)}get Wu(){return void 0!==this.YO?this.YO:this.KO.Wu}set Wu(t){this.Eg&&(this.YO=t),this.KO.gc(t)}get ct(){return this.KO.ct}get Ic(){return this.KO.Ic}get lt(){return this.ZO}get Ec(){return this.Vl}get Tg(){}get Eg(){return this.KO.Eg}get Pg(){return Me({},{sS:0,nS:0,rS:0,hS:0,oS:0,aS:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.KO.Rg())}get Xu(){return this.KO.Xu}set Xu(t){this.KO.Xu=t}get Dg(){return!0}get Dc(){return this.KO.Dc}get $u(){return this.KO.$u}set $u(t){this.KO.$u=t}get wl(){return this.KO.JO.played}get Mg(){return this.$O}set Mg(t){this.$O=t,this.tM&&(this.tM.Mg=t)}get Nc(){return this.KO.Nc}get kl(){return this.KO.kl.ws()}get Fc(){return this.KO.Fc}get eM(){return this.KO.eM}get nt(){return this.xu}get rt(){return this.eS}get Xg(){return this.KO.Xg}get Kg(){return this.KO.Kg}get _l(){return this.KO._l}set _l(t){this.KO._l=t}get Jg(){return this.iM}get tv(){return this.KO.tv}set tv(t){this.KO.tv=t}get sM(){return this.nM}ke(){this.KO.ke()}be(){this.KO.be()}async ba(t,e,i){k_(i);const s={Iw:di.vB,Pw:t.src,rM:t.type,hM:this.oM(t),Mg:this.$O,aM:t.crossOrigin,uM:e.metadata&&e.metadata.title};this.cM.CO(t.contentProtection),this.tM=await this.KO.On(s),k_(i),e.textTracks&&this.lM(e.textTracks),Vy(this.nt)}lM(t){for(let i of t)if(this.KO.dM()&&fh.KP&&Pk&&!Iy(i.kind,i.label)&&this.fM(i)){var e;const t=null!=(e=i.kind)?e:bt.Ay;this.KO._M(i.src,t,i.label,i.srclang,i.default)}else{if(void 0===i.src)continue;this.gM.uP(i)}}fM(t){return!t.format||"webvtt"===t.format}async dl(){try{await this.KO.dl()}catch(t){}for(;!this.QO;)await this.KO.eg(o.Rf)}jl(){this.KO.jl()}fv(){return void 0!==this.KO.JO.webkitShowPlaybackTargetPicker}_v(){this.KO.JO.webkitShowPlaybackTargetPicker&&this.KO.JO.webkitShowPlaybackTargetPicker()}vv(){this.KO.JO.webkitShowPlaybackTargetPicker&&this.KO.JO.webkitShowPlaybackTargetPicker()}rv(){return this.KO.JO}ev(){return this.KO.wa}async ir(){this.ZO=void 0,this.Vl=void 0,this.tM=void 0,await this.gM.ir(),this.KO.vM(),await this.KO.ir(),this.wM.ir(),this.Mg=this.$O,this.ht.ir(),this.rt.ir(),this.YO=void 0}async bn(){await this.ir(),this.Lo(),this.mM(),this.pM(),this.wM.bn(),this.KO.yM=void 0,await this.bM.AM(this.KO),this.$T.bn(),this.eS.bn(),this.xu.bn(),await this.gM.bn()}TM(){this.KO.wn(o.Ph,this.Os),this.KO.wn(o.Ch,this.Os),this.KO.wn(o.Lu,this.SM),this.KO.wn(o.Rf,this.Os),this.KO.wn(o.Ef,this.Os),this.KO.wn(o.If,this.Os),this.KO.wn(o.Tf,this.Cf),this.KO.wn(o.Pf,this.Os),this.KO.wn(o.Vu,this.Os),this.KO.wn(o.Il,this.Os),this.KO.wn(o.Nf,this.Os),this.KO.wn(o.vm,this.kM),this.KO.wn(ee.Qf,this.Vf),this.KO.wn(zn.aa,this.nl),this.KO.wn(o.Gw,this.Os),this.KO.wn(o.Xw,this.EM),this.KO.JO.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.IM)}mM(){this.KO.pn(o.Ph,this.Os),this.KO.pn(o.Ch,this.Os),this.KO.pn(o.Lu,this.SM),this.KO.pn(o.Rf,this.Os),this.KO.pn(o.Ef,this.Os),this.KO.pn(o.If,this.Os),this.KO.pn(o.Tf,this.Cf),this.KO.pn(o.Pf,this.Os),this.KO.pn(o.Vu,this.Os),this.KO.pn(o.Il,this.Os),this.KO.pn(o.Nf,this.Os),this.KO.pn(o.vm,this.kM),this.KO.pn(ee.Qf,this.Vf),this.KO.pn(zn.aa,this.nl),this.KO.pn(o.Gw,this.Os),this.KO.pn(o.Xw,this.EM),this.KO.JO.removeEventListener("webkitcurrentplaybacktargetiswirelesschanged",this.IM)}oM(t){if(!t.contentProtection||!t.contentProtection.fairplay)return[];return[{ap:Br,PM:[{initDataTypes:[Br.fC],videoCapabilities:[{contentType:"video/mp4",encryptionScheme:"cbcs"}]}]}]}RM(){let t=this.KO.JO.audioTracks,e=this.KO.JO.videoTracks;t&&(t.addEventListener("addtrack",this.CM),t.addEventListener("removetrack",this.xM),t.addEventListener("change",this.DM)),e&&(e.addEventListener("addtrack",this.NM),e.addEventListener("removetrack",this.BM),e.addEventListener("change",this.LM))}pM(){let t=this.KO.JO.audioTracks,e=this.KO.JO.videoTracks;t&&(t.removeEventListener("addtrack",this.CM),t.removeEventListener("removetrack",this.xM),t.removeEventListener("change",this.DM)),e&&(e.removeEventListener("addtrack",this.NM),e.removeEventListener("removetrack",this.BM),e.removeEventListener("change",this.LM))}hh(t){for(let e=0;e<t.U;e++){t.Zv(e).AS()}}wv(){this.KO.wv()}mv(){}OM(t,e){this.ZO||(this.ZO=e,this.Vl=t,this.To(new Vo(t)))}constructor(t,e,i,s,n,r=new Uh,h=dh()){super(),this.tM=void 0,this.ZO=void 0,this.Vl=void 0,this.nM=new bk,this.iM=new fe,this.nl=t=>{const e=t.lt,i=e.code,s=new jr(um(i),"Something went wrong during native playback.",e),n=new gs(i,s.message,e.message);this.OM(s,n)},this.SM=()=>{this.To(new hc(this.Wu,this.qu))},this.Cf=t=>{this.Dc||(this.YO=void 0),this.To(t)},this.Vf=t=>{this.YO=void 0},this.IM=()=>{this.To(new Am(this.Eg))},this.kM=()=>{this.Kg>0&&this.Xg>0&&this.To(new le)},this.CM=t=>{this.$T.tt(new mm(t.track))},this.xM=t=>{const e=Dk(this.$T,t.track);e&&this.$T.it(e)},this.DM=()=>{this.hh(this.$T)},this.NM=t=>{this.eS.tt(new ym(t.track))},this.BM=t=>{const e=Dk(this.eS,t.track);e&&this.eS.it(e)},this.LM=()=>{this.hh(this.eS)},this.EM=t=>{this.To(t),this.OM(t.errorObject,Lt(t.errorObject))},this.bM=e,this.fP=i,this.AN=h,this.KO=this.bM.MM(Di.vl),this.$O=this.KO.JO.preload,this.wM=new lS(this.KO,!0),this.wM.wn(cc,this.Os),this.cM=new Tk(i,r),this.KO.yM=this.cM,this.TM(),this.$T=new mi,this.eS=new mi,this.RM(),this.gM=new Oy(this.KO,this.fP),this.xu=new Uu([this.KO.nt]),this.be()}};function Ck(t){return!t.type||!(!Ik().canPlayType||!Ik().canPlayType(t.type))}var xk=class{lp(t,e,i,s,n,r){return new Rk(t,e,i,s,n)}FM(t,e){return Ck(t)}UM(){return!1}constructor(){this.HM=pk.EO}};function Dk(t,e){for(let i of t.Kv)if(i.pS===e)return i}var Wh=class{static VM(){return this.lC}WM(t){this.qM.push(t)}get HM(){return this.zM.HM}lp(t,e,i,s,n,r){let h=this.zM.lp(t,e,i,s,n,r);for(const t of this.qM)h=t(h,i,s);return h}FM(t,e){return this.zM.FM(t,e)}UM(){return!1}constructor(){this.zM=new xk,this.qM=[]}};function Nk(t,e){return Xn(t.HM,e.HM)}Wh.lC=new Wh;var Bk=class{XM(t){this.GM.push(t),this.GM.sort(Nk)}async QM(t,e){for(const i of this.GM){const s=i.FM(t,e);if(Ie(s)?await s:Boolean(s))return i}}constructor(){this.GM=[]}};function Lk(t){_s.lC.XM(t)}var _s=class extends Bk{KM(t){this.jM=t}YM(){return this.jM}async ZM(t,e){for(let i of t){let t=await this.QM(i,e);if(t)return{JM:i,t:t}}const i=this.jM;for(let s of t)if(i.FM(s,e))return{JM:s,t:i};return{JM:t[0],t:i}}constructor(...t){super(...t),this.jM=Wh.VM()}};_s.lC=new _s;var D,Ok=class{bn(){dt(this.Hs)}constructor(t){this.Hs=fa&&fa.document&&fa.document.createElement("div"),ha(this.Hs),t.appendChild(this.Hs)}};!function(t){t.EO="",t.$M="none",t.Ty="metadata",t.XT="auto"}(D||(D={}));var Fi=[zn.aa,o.jw,o.Yw,o.Im,o.Vw,o.Zw,o.$w,o.fm,o._m,o.pm,o.Am,ee.pl,ee.ml,ee.gl,ee.yl,ee.Bf,ee.Yf,ee.Qf,o.Xw,o.Gw,o.Nf,o.Pf,o.Ef,o.lm,o.Ph,o.Rf,o.Ch,o.Vu,o.vm,o.If,o.Tf,o.Lu,o.Il,o.gm,o.dm,o.wm],Mk=class extends Xo{get ht(){return this.$T}get bl(){return this.Ko.bl}get lt(){return this.Ko.lt}get Ec(){return this.Ko.Ec}get qu(){return this.Ko.qu}set qu(t){this.Ko.qu=t}get bt(){return this.tF}get Wu(){return this.Ko.Wu}set Wu(t){this.Ko.Wu=t}get ct(){return this.Ko.ct}get Ic(){return this.Ko.Ic}get Tg(){return this.tS}get Eg(){return this.Ko.Eg}get Pg(){return this.Ko.Pg}get Xu(){return this.Ko.Xu}set Xu(t){this.Ko.Xu=t}get Dg(){return this.Ko.Dg}get Dc(){return this.Ko.Dc}get $u(){return this.Ko.$u}set $u(t){this.Ko.$u=t}get wl(){return this.Ko.wl}get Mg(){return this.$O}set Mg(t){this.$O=t,this.Ko&&(this.Ko.Mg=this.$O)}get Nc(){return this.Ko.Nc}get kl(){return this.Ko.kl}get Fc(){return this.Ko.Fc}get nt(){return this.xu}get Xg(){return this.Ko.Xg}get rt(){return this.eS}get Kg(){return this.Ko.Kg}get _l(){return this.Ko._l}set _l(t){this.Ko._l=t}get Jg(){return this.Ko.Jg}get sM(){return this.Ko.sM}jl(){this.Ko.jl()}dl(){const t=this.Ko.dl();Ie(t)&&M(t)}xl(){return this.ba(void 0)}uv(){}eF(){this.$T.$v=this.Ko.ht,this.eS.$v=this.Ko.rt,this.xu.$v=this.Ko.nt,this.tS.$v=this.Ko.Tg,this.Ko.wn(Fi,this.Os)}iF(){this.Ko.pn(Fi,this.Os),this.$T.$v=void 0,this.eS.$v=void 0,this.xu.$v=void 0,this.tS.$v=void 0}qg(){return this.sF}async ba(t,e){if(k_(e),this.sF=t,!t)return;const i=t.sources.filter(Or);if(ho(i))return;const s=await this.nF.ZM(i,t);k_(e);const n=s.JM,r=s.t,h=this.ev(),o=im(this);(this.rF!==r||this.lt)&&(this.iF(),await this.Ko.bn(),k_(e),this.rF=r,this.Ko=this.hF(r,n),function(t,e){t.Xu!==e.Xu&&(t.Xu=e.Xu);t._l!==e._l&&(t._l=e._l);t.$u!==e.$u&&(t.$u=e.$u)}(this.Ko,o),$r(this,o,this),this.eF()),this.Ko.Mg=this.Mg,this.oF?this.Ko.be():this.Ko.ke(),await this.Ko.ba(n,t,e),k_(e),this.aF(n),this.ev()!==h&&this.To(new mc)}aF(t){this.tF!==t&&(this.tF=t,this.To(new nm(t)))}fv(){return this.Ko.fv()}_v(){this.Ko._v()}vv(){this.Ko.vv()}ev(){return this.Ko.ev()}wv(){this.Ko.wv()}mv(){this.Ko.mv()}async ir(){this.sF=void 0,this.aF(void 0),await this.Ko.ir()}async bn(){this.Lo(),await this.ir(),await this.Ko.bn(),this.$T.bn(),this.eS.bn(),this.xu.bn(),this.tS.bn()}be(){this.oF=!0,this.Ko.be()}ke(){this.oF=!1,this.Ko.ke()}constructor(t,e){super(),this.rF=void 0,this.tF=void 0,this.$O=D.$M,this.sF=void 0,this.oF=!0,this.$T=new Fa,this.eS=new Fa,this.xu=new Yc,this.tS=new Ln,this.nF=t,this.Ko=e,this.Ko.Mg=this.Mg,this.eF()}};function Oh(t,e,i){return i?t<=e:t<e}var is,d=class t{get uF(){return this.cF.slice()}Tn(t){return this.cF[2*t]}Pn(t){return this.cF[2*t+1]}lF(t){return this.dF[2*t]}fF(t){return this.dF[2*t+1]}ws(){const t=this;return{get length(){return t.U},start(e){const i=0|e;return t._F(i),t.Tn(i)},end(e){const i=0|e;return t._F(i),t.Pn(i)}}}gF(){const e=new Array(2*this.U),i=new Array(2*this.U);for(let t=0;t<this.U;t++)e[2*t]=this.Tn(t),e[2*t+1]=this.Pn(t),i[2*t]=!0,i[2*t+1]=!0;return new t(e,i)}_F(t){if(t<0)throw new v("The index provided ("+t+") must be non-negative");if(t>=this.U)throw new v("The index provided ("+t+") is greater than the maximum bound ("+this.U+")")}vF(t){if(0===this.U)return 0;if(this.br(t))return t;if(t<=this.Tn(0))return this.Tn(0);if(t>=this.Pn(this.U-1))return this.Pn(this.U-1);{let e=0,i=1/0;for(let s=0;s<this.U;s++){const n=this.Tn(s),r=w.abs(n-t);r<i&&(e=n,i=r);const h=this.Pn(s),o=w.abs(h-t);o<i&&(e=h,i=o)}return e}}Cn(e){let i=0,s=0;const n=[],r=[];for(;i<this.U&&s<e.U;){const t=this.Tn(i),h=this.Pn(i),o=this.lF(i),a=this.fF(i),u=e.Tn(s),c=e.Pn(s),l=e.lF(s),d=e.fF(s),f=w.max(t,u),_=w.min(h,c);let g,v;g=t===u?o&&l:f===t?o:l,v=h===c?a&&d:_===h?a:d,(f<_||g&&v&&f===_)&&(n.push(f,_),r.push(g,v)),h===c?(i+=1,s+=1):h<c?i+=1:s+=1}return new t(n,r)}wF(){const e=this.mF(),i=e.U;if(0===i)return new t([-1/0,1/0],[!1,!1]);const s=[],n=[],r=e.Tn(0);r!==-1/0&&(s.push(-1/0,r),n.push(!1,!e.lF(0)));for(let t=0;t<i-1;t++)s.push(e.Pn(t),e.Tn(t+1)),n.push(!e.fF(t),!e.lF(t+1));const h=e.Pn(i-1);return h!==1/0&&(s.push(h,1/0),n.push(!e.fF(i-1),!1)),new t(s,n)}pF(e){let i=0,s=0;const n=this.U,r=e.U,h=new Array(2*(n+r)),o=new Array(2*(n+r));let a=0;for(;i<n&&s<r;){const t=this.Tn(i),n=this.Pn(i),r=e.Tn(s),u=e.Pn(s);t<r||t===r&&n<u?(h[a]=t,h[a+1]=n,o[a]=this.lF(i),o[a+1]=this.fF(i),i++):(h[a]=r,h[a+1]=u,o[a]=e.lF(s),o[a+1]=e.fF(s),s++),a+=2}for(;i<n;)h[a]=this.Tn(i),h[a+1]=this.Pn(i),o[a]=this.lF(i),o[a+1]=this.fF(i),i++,a+=2;for(;s<r;)h[a]=e.Tn(s),h[a+1]=e.Pn(s),o[a]=e.lF(s),o[a+1]=e.fF(s),s++,a+=2;return new t(h,o)}yF(e){void 0===e&&(e=0);const i=this.U;if(i<2)return this;const s=[],n=[];let r=this.Tn(0),h=this.Pn(0),o=this.lF(0),a=this.fF(0);for(let t=1;t<i;t++){const i=this.Tn(t),u=this.Pn(t);let c=this.lF(t),l=this.fF(t);r<i&&h>u||(r===i&&(c=o||c,o=c),h===u&&(l=a||l,a=l),Oh(i,h+e,a||c)?(h=u,a=l):(s.push(r,h),n.push(o,a),r=i,h=u,o=c,a=l))}return s.push(r,h),n.push(o,a),new t(s,n).mF()}mF(){const e=[],i=[];for(let t=0;t<this.U;t++){const s=this.Tn(t),n=this.Pn(t),r=this.lF(t),h=this.fF(t);s===n?(r||h)&&(e.push(s,n),i.push(!0,!0)):(e.push(s,n),i.push(r,h))}return new t(e,i)}Hl(t){if(0===this.U)return t;if(0===t.U)return this;return this.pF(t).yF()}AF(t){const e=this.mF(),i=t.mF(),s=e.wF(),n=i.wF(),r=s.Cn(i),h=n.Cn(e);return r.Hl(h)}Ey(e){if(0===this.U||0===e)return this;const i=[],s=[];for(let t=0;t<this.U;t++){const n=this.Tn(t)+e,r=this.Pn(t)+e;i.push(n,r),s.push(this.lF(t),this.fF(t))}return new t(i,s)}bF(t){return 0===this.U||0===t.U?this:this.mF().Cn(t.mF().wF())}br(t,e){return this.TF(t,e)>=0}SF(t,e,i,s,n){return this.kF(t,e,i,s,n)>=0}EF(t,e,i,s,n){return this.IF(t,e,i,s,n)>=0}PF(t){if(t.U!==this.U)return!1;for(let e=0;e<this.U;e++)if(this.Tn(e)!==t.Tn(e)||this.Pn(e)!==t.Pn(e)||this.lF(e)!==t.lF(e)||this.fF(e)!==t.fF(e))return!1;return!0}RF(e){const i=[],s=[];for(let t=0;t<this.U;t++){const n=this.Tn(t),r=this.Pn(t),h=this.lF(t),o=this.fF(t);e(n,r,h,o)&&(i.push(n,r),s.push(h,o))}return new t(i,s)}IF(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!0),void 0===n&&(n=0);const r=t-n,h=e+n;for(let t=0;t<this.U;t+=1)if(Oh(this.Tn(t),h,!s||this.lF(t))&&Oh(r,this.Pn(t),!i||this.fF(t)))return t;return-1}kF(t,e,i,s,n){void 0===i&&(i=!0),void 0===s&&(s=!1),void 0===n&&(n=0);const r=t+n,h=e-n;for(let t=0;t<this.U;t+=1)if(Oh(this.Tn(t),r,!i||this.lF(t))&&Oh(h,this.Pn(t),!s||this.fF(t)))return t;return-1}TF(t,e){return this.kF(t,t,!0,!0,e)}CF(t,e){void 0===e&&(e=0);const i=t+e;for(let t=this.U-1;t>=0;t-=1)if(Oh(this.Tn(t),i,this.lF(t)))return t;return-1}xF(t,e){void 0===e&&(e=0);const i=t-e;for(let t=0;t<this.U;t+=1)if(Oh(i,this.Pn(t),this.fF(t)))return t;return-1}DF(t,e){void 0===e&&(e=0);const i=t+e;for(let t=0;t<this.U;t+=1)if(this.Tn(t)>i)return t;return-1}NF(e){return this._F(e),new t([this.Tn(e),this.Pn(e)],[this.lF(e),this.fF(e)])}BF(t,e){const i=this.TF(t,e);return i<0?void 0:this.NF(i)}get LF(){let t=0;for(let e=0;e<this.U;e++){t+=this.Pn(e)-this.Tn(e)}return t}static Sn(e){const i=[];for(let t=0;t<e.length;t++)i.push(e.start(t),e.end(t));return new t(i)}static OF(e){return new t([e,e],[!0,!0])}static MF(e,i){return e<=i?new t([e,i]):t.Nl()}static Nl(){return Fk}constructor(t,e){this.U=t.length>>1,this.cF=t,this.dF=e||function(t){const e=new Array(2*t);for(let i=0,s=0;i<t;i+=1,s+=2)e[s]=!0,e[s+1]=!1;return e}(this.U)}},Fk=new d([]);!function(t){t.oa="fullscreenchange",t.fa="fullscreensupportchange",t.aa="fullscreenerror"}(is||(is={}));var Hh=class extends Xi{constructor(){super(is.aa)}},Lr=(is.oa,is.fa,is.aa,class extends Et{get cs(){return!1}get sa(){return!1}bo(){this.To(new Hh)}Co(){}bn(){this.Lo()}}),Uk=class extends Et{get qu(){}set qu(t){}get Wu(){return this.FF}set Wu(t){this.FF!==t&&(this.FF=t,this.Yl=!0,this.To(new T(this.Wu)))}get Pg(){return{sS:0,nS:0,rS:0,hS:0,oS:0,aS:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Xu(){return this.UF}set Xu(t){this.UF!==t&&(this.UF=t,this.To(new Eo(this.Wu,this._l)))}get Dc(){return this.Ql}get $u(){return this.HF}set $u(t){this.HF!==t&&(this.HF=t,this.To(new Gs(this.Wu,this.$u)))}get Fc(){return this.Yl}get _l(){return this.Qx}set _l(t){this.Qx!==t&&(this.Qx=t,this.To(new Eo(this.Wu,this._l)))}get tv(){return!1}set tv(t){}get sM(){return this.nM}be(){}ke(){}dl(){this.Ql&&(this.Ql=!1,this.To(new ds(this.Wu)),this.To(new ki(this.Wu)))}jl(){this.Ql||(this.Ql=!0,this.To(new hc(this.Wu,this.qu)),this.To(new mt(this.Wu)))}ba(t,e){return Promise.resolve()}fv(){return!1}_v(){}vv(){}ev(){return this.VF}wv(){}mv(){}async ir(){this.FF=0,this.Yl=!1,this.jl(),this.To(new $a(this.FF))}async bn(){this.Lo(),this.ht.bn(),this.nt.bn(),this.rt.bn()}constructor(...t){super(...t),this.FF=0,this.UF=!1,this.Ql=!0,this.HF=1,this.Yl=!1,this.Qx=1,this.ht=new mi,this.bl=d.Nl().ws(),this.ct=NaN,this.Ic=!1,this.lt=void 0,this.Ec=void 0,this.Tg=void 0,this.Eg=!1,this.Dg=!0,this.wl=d.Nl().ws(),this.Mg=D.$M,this.Nc=dw.zl,this.kl=d.Nl().ws(),this.eM=void 0,this.nt=new gn,this.Xg=0,this.rt=new mi,this.Kg=0,this.Jg=new fe,this.nM=new bk,this.VF=new Lr}},Hk=class extends Uk{set WF(t){this.bM=t,this.KO=t.MM(Di.vl)}rv(){var t;return null==(t=this.KO)?void 0:t.JO}async bn(){await super.bn(),this.KO&&(await this.bM.AM(this.KO),this.KO=void 0)}constructor(...t){super(...t),this.bM=void 0,this.KO=void 0}},Fh=class extends Mk{get je(){return this.qF}get tv(){return this.Ko.tv}set tv(t){this.Ko.tv=t}uv(){super.uv(),this.XF.zF()}hv(t){sm(this,t)}ov(){}pv(t){return!1}async ba(t,e){const i=this.ev(),s=this.rv();await super.ba(t,e),this.ev()!==i&&this.To(new mc),this.rv()!==s&&this.To(new st)}hF(t,e){return t.lp(this.qF,this.XF,this.fP,this.al,this.GF,this.Sc,e)}rv(){return this.Ko.rv()}og(){return this.XF.QF.map((t=>t.JO))}async bn(){await super.bn(),this.XF.bn(),this.KF.bn()}constructor(t,e,i,s,n,r){const h=new Hk;super(_s.lC,h),this.qF=t,this.al=e,this.fP=i,this.GF=s,this.Sc=r,this.XF=new Jy(n,this.Sc),this.XF.jF(this.qF),h.WF=this.XF,this.KF=new Ok(this.qF)}},Vk=class extends Xo{get ht(){return this.YF}get bl(){return d.Nl().ws()}get qu(){return new Date(NaN)}set qu(t){}get bt(){}get Wu(){return 0}set Wu(t){}get ct(){return 0}get je(){return this.qF}get Ic(){return!0}get lt(){return this.ZF}get Ec(){return this.JF}get Tg(){}get Pg(){return{sS:0,nS:0,rS:0,hS:0,oS:0,aS:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}}}get Xu(){return!1}set Xu(t){}get Dg(){return!0}get Dc(){return!0}get $u(){return 0}set $u(t){}get wl(){return d.Nl().ws()}get Mg(){return D.$M}set Mg(t){}get Nc(){return dw.zl}get kl(){return d.Nl().ws()}get Fc(){return!1}get nt(){return this.tU}get Xg(){return 0}get rt(){return this.YF}get Kg(){return 0}get _l(){return 1}set _l(t){}get Jg(){return this.iM}get tv(){return!1}set tv(t){}pv(t){return!0}ke(){}dl(){throw this.To(new Vo(this.JF)),this.ZF}jl(){}qg(){}async ba(t,e){throw k_(e),this.To(new Vo(this.JF)),this.ZF}be(){}xl(){return Promise.resolve()}rv(){}ev(){return this.VF}og(){return[]}uv(){}hv(t){}ov(){}get Eg(){return!1}fv(){return!1}_v(){}vv(){}wv(){}mv(){}ir(){return Promise.resolve()}bn(){return this.Lo(),this.YF.bn(),this.tU.bn(),Promise.resolve()}constructor(t,e,i){super(),this.VF=new Lr,this.iM=new fe,this.qF=t,this.ZF=e,this.YF=new mi,this.tU=new gn,this.JF=i}};function Wk(t){if(t&&Th(t))return Me({},t,{integration:qk(t.integration),fairplay:jk(t.fairplay),widevine:zk(t.widevine),playready:Xk(t.playready),clearkey:Yk(t.clearkey),aes128:Zk(t.aes128),integrationParameters:Jk(t.integrationParameters),preferredKeySystems:$k(t.preferredKeySystems)})}function qk(t){if(mh(t))return t}function zk(t){if(t&&Th(t))return{persistentState:Gk(t.persistentState),distinctiveIdentifier:Gk(t.distinctiveIdentifier),audioRobustness:Qk(t.audioRobustness),videoRobustness:Qk(t.videoRobustness),licenseAcquisitionURL:mh(t.licenseAcquisitionURL)?t.licenseAcquisitionURL:void 0,licenseType:Kk(t.licenseType),headers:t.headers,useCredentials:!!Mn(t.useCredentials)&&t.useCredentials,queryParameters:t.queryParameters,certificate:mh(t.certificate)||tw(t.certificate)?t.certificate:void 0}}function Xk(t){if(!t)return;const e=zk(t);if(!e)return;return Me({},e,{customData:mh(t.customData)?t.customData:void 0})}function Gk(t){switch(null==t?void 0:t.toLowerCase()){case"required":return"required";case"optional":return"optional";case"not-allowed":return"not-allowed"}}function Qk(t){switch(t){case"HW_SECURE_ALL":return"HW_SECURE_ALL";case"HW_SECURE_DECODE":return"HW_SECURE_DECODE";case"HW_SECURE_CRYPTO":return"HW_SECURE_CRYPTO";case"SW_SECURE_DECODE":return"SW_SECURE_DECODE";case"SW_SECURE_CRYPTO":return"SW_SECURE_CRYPTO";case"":return""}}function Kk(t){switch(null==t?void 0:t.toLowerCase()){case"temporary":return"temporary";case"persistent":return"persistent"}}function jk(t){if(!t)return;const e=zk(t);if(!e)return;return Me({},e,{certificateURL:mh(t.certificateURL)?t.certificateURL:void 0})}function Yk(t){if(!t)return;const e=zk(t);if(!e)return;const i=Os(t.keys)?t.keys.map((t=>function(t){if(!t||!Th(t))return;const e=t.id,i=t.value;if(!mh(e)||!mh(i))return;return{id:e,value:i}}(t))).filter(Qf):void 0;return Me({},e,{keys:i})}function Zk(t){if(Th(t))return{useCredentials:Mn(t.useCredentials)?t.useCredentials:void 0}}function Jk(t){if(Th(t))return t}function $k(t){return t&&Os(t)?t.map((t=>Sw(t))).filter(Qf):[Du,Wi,ns]}var tE=class extends Xi{constructor(t){super("presentationmodechange"),this.presentationMode=t}};function dc(t,e,i){return new Promise(((s,n)=>{if(i&&i.R_)return n(new At);const r=t=>{o(),s(t)},h=()=>{o(),n(new At)},o=()=>{t.removeEventListener(e,r),i&&i.B_(h)};t.addEventListener(e,r),i&&i.N_(h)}))}var eE,Ut=class extends Xo{eU(t){t.Q_(this.iU),this.sU.push(t)}nU(t){t.J_(this.iU),me(this.sU,t)}bn(){this.Lo();for(const t of this.sU)t.J_(this.iU);Ce(this.sU)}constructor(t,e=!1){super(t),this.sU=[],this.rU=t=>{xt((()=>{this.Os(t)}))},this.iU=e?this.rU:this.Os}};!function(t){t.INLINE="inline",t.FULLSCREEN="fullscreen",t.PICTURE_IN_PICTURE="picture-in-picture"}(eE||(eE={}));var S,iE=class extends Xo{get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}pa(){return function(t){let e,i={get currentMode(){return t.Go()},requestMode(e){const i=nE(e);i&&t.ia(i)},supportsMode(e){const i=nE(e);return!!i&&t.Jo(i)},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new Ut(i,!0),e.eU(t),i}(this)}ia(t){this.Qo(t,t)}Qo(t,e){this.hU!==e&&(this.oU=!0,this.aU=t,this.Yo(e,this.hU),"fullscreen"!==t&&(this.uU=t),this.oU=!1,this.Zr())}Go(){return this.cU?"fullscreen":"inline"}Jo(t){switch(t){case"fullscreen":return this.VF.sa;case"inline":return!0}return!1}Zr(){if(this.oU)return;const t=this.hU,e=this.Go();this.hU=e,"fullscreen"!==e&&(this.lU=e),t!==e&&this.To(new tE(e))}Yo(t,e){const i="fullscreen"===t;this.cU=i,i!==this.VF.cs&&(i?this.VF.bo():this.VF.Co())}ki(){if(this.oU)return;const t=this.VF.cs;this.cU=t,t?this.Qo("fullscreen","fullscreen"):t||"fullscreen"!==this.aU?this.Zr():this.Qo(this.uU,this.lU)}dU(){this.ki(),this.To(new Vo(new jr(n.FULLSCREEN_ERROR,"Failed to enter fullscreen.")))}bn(){this.VF.bn(),this.Lo()}constructor(t){super(),this.aU="inline",this.hU="inline",this.oU=!1,this.cU=!1,this.uU="inline",this.lU="inline",this.Gu=void 0,this.fU=()=>this.ki(),this._U=()=>this.dU(),this.VF=t,this.VF.wn(is.oa,this.fU),this.VF.wn(is.aa,this._U),this.Zr()}},sE={Wu:0,ct:NaN,Ic:!1,lt:void 0,Ec:void 0,Xu:!1,Dc:!0,$u:1,Nc:dw.zl,Fc:!1,Xg:0,Kg:0,_l:1};function nE(t){switch(t){case eE.INLINE:case eE.FULLSCREEN:case eE.PICTURE_IN_PICTURE:return t;default:return}}!function(t){t.DEFAULT="",t.THEO="theo",t.GOOGLE_IMA="google-ima",t.SPOTX="spotx",t.FREEWHEEL="freewheel",t.MEDIATAILOR="mediatailor"}(S||(S={}));var rE,hE,oE,aE,uE,cE,lE,Gn=class{get gU(){return this.vU}wU(t){const e=this.gU.filter((e=>e.mU(t)));if(e.length>1)0;else if(0===e.length)throw v("Unknown ad integration: "+t.integration);return e[0]||null}pU(t){this.vU.push(t)}constructor(){this.vU=[]}};Gn.lC=new Gn,function(t){t.Qf="PLAYING",t.Rm="PAUSED",t.yU="SEEK",t.AU="STALLED",t.bU="FAILED",t.TU="INITIAL_BUFFERING",t.SU="NO_ACCESS"}(rE||(rE={})),function(t){t.kU="HTTP_REQUEST_STATUS_CODE_1XX",t.EU="HTTP_REQUEST_STATUS_CODE_2XX",t.IU="HTTP_REQUEST_STATUS_CODE_3XX",t.PU="HTTP_REQUEST_STATUS_CODE_4XX",t.RU="HTTP_REQUEST_STATUS_CODE_5XX",t.CU="BUFFER_LENGTH",t.xU="BYTES_RECEIVED",t.DU="SEGMENT_READ_BITRATE",t.NU="SEGMENT_PROFILE_BITRATE",t.BU="VIDEO_PROFILE_BITRATE",t.LU="NUMBER_OF_FRAMES_DROPPED",t.OU="PLAYBACK_POSITION",t.MU="NUMBER_OF_FRAMES_DECODED",t.FU="PLAYBACK_DELTA_TO_ORIGIN",t.UU="STREAM_DELTA_TO_ORIGIN",t.HU="ORIGIN_TIMESTAMP"}(hE||(hE={})),function(t){t.VU="MANIFEST_URI",t.WU="ASSET_DURATION",t.qU="NUMBER_OF_CONTENT_PROFILES",t.zU="CDN",t.XU="CONTENT_TITLE",t.GU="SERVICE_NAME",t.QU="CONTENT_TYPE",t.KU="CONTENT_DESCRIPTION"}(oE||(oE={})),(aE||(aE={})).jU="shutdown_normal_shutdown",function(t){t.YU="session/",t.ZU="content/",t.JU="internalError/",t.$U="drmError/",t.tH="caError/",t.eH="networkError/"}(uE||(uE={})),function(t){t.iH="userAction",t.sH="endOfStreamReached"}(cE||(cE={})),function(t){t.PAUSE="nH",t.RESUME="rH"}(lE||(lE={}));var Nh=class{NC(t){this.hH.delete(t)}oH(){this.hH.clear()}RC(t){return this.hH.get(t)}dO(t,e){this.hH.set(t,e)}constructor(){this.hH=Wn()}},Ft=class t{static aH(){return t.lC||(t.lC=dE.EN()?new dE:new Nh),t.lC}static NC(e){t.aH().NC(e)}static oH(){t.aH().oH()}static RC(e){return t.aH().RC(e)}static dO(e,i){t.aH().dO(e,i)}};Ft.lC=void 0;var Dh,dE=class extends Ft{static EN(){const t="foobar";try{return self.sessionStorage.setItem(t,t),self.sessionStorage.removeItem(t),!0}catch(t){return!1}}NC(t){self.sessionStorage.removeItem(t)}oH(){self.sessionStorage.clear()}RC(t){var e;return null!=(e=self.sessionStorage.getItem(t))?e:void 0}dO(t,e){self.sessionStorage.setItem(t,e)}};!function(t){t.UNAVAILABLE="unavailable",t.AVAILABLE="available",t.CONNECTING="connecting",t.CONNECTED="connected"}(Dh||(Dh={}));var zh,fE,fs,_E="agama";function gE(t){switch(t){case"":return zh.NONE;case"horizontal":return zh.HORIZONTAL;case"vertical":return zh.VERTICAL;default:throw new p}}function vE(t,e){if(e)return fE.PM360;if(null==t)return fE.NONE;switch(t){case"":return fE.NONE;case"360":return fE.PM360;case"180":return fE.PM180;default:throw new p("Provided panoramaMode value is not recognized. Expected '', '360' or '180' but value was "+t)}}!function(t){t.NONE="",t.HORIZONTAL="horizontal",t.VERTICAL="vertical"}(zh||(zh={})),function(t){t.NONE="",t.PM360="360",t.PM180="180"}(fE||(fE={})),function(t){t.ASSET="asset",t.CHANNEL="channel",t.EVENT="event"}(fs||(fs={}));var wE="https://content.uplynk.com";function mE(t){if(!t)return!0;const e=!function(t){return Vn(t)||yr(t)&&Vn(t[0])}(t.sources)||ho(t.sources),i=!t.ads||pE(t.ads),s=""!==t.poster&&!t.poster;return e&&i&&s}function pE(t){return!t||Os(t)&&0===t.length}function yE(t){if(t&&t.sources)return AE(t.sources)}function AE(t){return mh(t)?Mw(t):ot(t)?t.type||t.src&&Mw(t.src):yr(t)&&t.length>0?AE(t[0]):void 0}function bE(t){if(t&&t.sources)return TE(t.sources)}function TE(t){return mh(t)?t:ot(t)?t.src:yr(t)&&t.length>0?TE(t[0]):void 0}function SE(t,e,i){return Ww(t)?function(t,e,i){let s=Me({},Gw(),{ping:{adImpressions:!1,freeWheelVideoViews:!1,linearAdData:!1},integration:uw.VERIZON_MEDIA,id:"",prefix:wE,preplayParameters:{},playbackUrlParameters:{},assetType:fs.ASSET,contentProtected:!1,assetInfo:!0});s.id=function(t){if(mh(t))return t;if(yr(t)&&mh(t[0]))return t;if(function(t){return Th(t)&&mh(t.userId)&&(yr(t.externalId)||mh(t.externalId))}(t))return t;return""}(t.id),t.preplayParameters&&(s.preplayParameters=t.preplayParameters);t.playbackUrlParameters&&(s.playbackUrlParameters=t.playbackUrlParameters);t.assetType&&(s.assetType=function(t){switch(t){case"channel":return fs.CHANNEL;case"event":return fs.EVENT;default:return fs.ASSET}}(t.assetType));t.contentProtected&&(s.contentProtected=Dc(t.contentProtected));t.assetInfo?s.assetInfo=Dc(t.assetInfo):s.assetInfo="asset"===s.assetType;t.prefix&&(s.prefix=Oi(t.prefix)||wE);return s.ping=function(t,e){let i=!1,s=!1,n=!1;e?(i=!!Mn(e.adImpressions)&&e.adImpressions,s=!!Mn(e.freeWheelVideoViews)&&e.freeWheelVideoViews,n=Mn(e.linearAdData)?e.linearAdData:t!==fs.ASSET):t!==fs.ASSET&&(n=!0);return{adImpressions:i,freeWheelVideoViews:s,linearAdData:n}}(s.assetType,t.ping),s=EE(s,t),s=PE(s,e,i),s=IE(s,t,i),s}(t,e,i):qw(t)?function(t,e,i){var s;return Me({},kE(t,e,i),{integration:uw.MEDIATAILOR,adParams:null!=(s=t.adParams)?s:{}})}(t,e,i):kE(t,e,i)}function kE(t,e,i){let s=Qw();const n=e&&(e.contentProtection||e.drm);if(mh(t)){if(s.src=t,s.type=Mw(t),n){const t=Wk(n);s.contentProtection=Iw(t)}}else if(ot(t)||Vw(t)){s.src=t.src,s.type=t.type||Mw(t.src),s.isAdvertisement=t.isAdvertisement;const e=Xw(t)?t.hesp:void 0;void 0!==e&&(s.hesp=e);qw(t)&&(s.integration=t.integration);const i=Wk(t.contentProtection||t.drm||n);s.contentProtection=Iw(i),t.ssai&&(s.ssai=kg(t.ssai)),s=EE(s,t)}return s=PE(s,e,i),s=IE(s,t,i),s}function EE(t,e){var i,s;e.useCredentials?t.crossOrigin=ya.Wm:e.crossOrigin&&(t.crossOrigin=Fw(e.crossOrigin)),mh(e.timeServer)&&(t.timeServer=e.timeServer),e.liveOffset&&(t.liveOffset=e.liveOffset),e.hlsDateRange&&(t.hlsDateRange=e.hlsDateRange),e.lowLatency&&(t.lowLatency=Dc(e.lowLatency)),e.useNativePlayback&&(t.useNativePlayback=Dc(e.useNativePlayback)),e.useManagedMediaSource&&(t.useManagedMediaSource=Dc(e.useManagedMediaSource)),e.dash&&(t.dash=Pw(e.dash)),e.hls&&(t.hls=Rw(e.hls)),e.lcevc&&(t.lcevc=Dc(e.lcevc)),e.ignoreEmbeddedTextTrackTypes&&(t.ignoreEmbeddedTextTrackTypes=Yw(e.ignoreEmbeddedTextTrackTypes)),t.seamlessSwitchStrategy=Lw(null!=(s=e.seamlessSwitchStrategy)?s:null==(i=e.dash)?void 0:i.useSeamlessPeriodSwitch);const n=bu(e.experimentalRendering);void 0!==n&&(t.experimentalRendering=n);const r=bu(e.nativeUiRendering);return void 0!==r&&(t.nativeUiRendering=r),t}function IE(t,e,i){return t.abr=xw(mh(e)?void 0:Ir(e.abr),null==i?void 0:i.abr),t}function PE(t,e,i){var s;const n=e&&e.timeServer;return i&&i.liveOffset&&!Qf(t.liveOffset)&&(t.liveOffset=i.liveOffset),i&&i.hlsDateRange&&!Qf(t.hlsDateRange)&&(t.hlsDateRange=i.hlsDateRange),t.crossOrigin===ya.Hm&&(null==e||null==(s=e.vr)?void 0:s[360])&&(t.crossOrigin=ya.Vm),t.useCredentials=t.crossOrigin===ya.Wm,mh(n)&&!t.timeServer&&(t.timeServer=n),t}function RE(t){const e={src:""};if(t&&t.src){if(e.src=Oi(t.src),"default"in t&&(e.default=Dc(t.default)),e.kind=function(t){const e=String(t||"").toLowerCase();return fy(e)?e:e?"metadata":"subtitles"}(t.kind),Er(t.format)&&(e.format=t.format),"srclang"in t){const i=t.srclang;"string"==typeof i&&""!==i&&(e.srclang=i)}if("label"in t){const i=t.label;"string"==typeof i&&""!==i&&(e.label=i)}}return e}function CE(t,e){if(_i(t))try{return e.wU(t).uH(t)}catch(t){return}}function xE(t){return mh(t.sources)&&""!==t.sources||Th(t.sources)&&mh(t.sources.src)}function DE(t){return t.integration===S.SPOTX&&!j(t.id)}function NE(t){return"freewheel"===t.integration}function gi(t,e,i){if(void 0===i&&(i=Gn.lC),mE(t))return{sources:[Qw()]};const s=Ms(t);if(s.sources=function(t,e,i){if(Vn(t))return[SE(t,e,i)];if(yr(t)&&Vn(t[0])){const s=[];for(const n of t)s.push(SE(n,e,i));return s}return[Qw()]}(s.sources,s,e),"contentProtection"in s&&delete s.contentProtection,"drm"in s&&delete s.drm,"ads"in s){const t=function(t,e){if(!yr(t))return[];const i=[];for(let s of t)s=CE(s,e),s&&(xE(s)||DE(s)||NE(s))&&i.push(s);return i}(s.ads,i);0===t.length?delete s.ads:s.ads=t}const n=!ho(s.sources),r=s.ads&&s.ads.length>0;if(n&&!r?delete s.ads:r&&!n&&(s.sources=[]),"textTracks"in s){const t=function(t){if(!yr(t))return[];const e=[];for(let i of t)i=RE(i),""!==i.src&&e.push(i);return e}(s.textTracks);0===t.length?delete s.textTracks:s.textTracks=t}"poster"in s&&(s.poster=Oi(s.poster)),"streamType"in s&&(s.streamType=function(t){switch(t){case"live":case"dvr":case"vod":return t}}(s.streamType)),"vr"in s&&(s.vr=function(t){const e=t||{};return e.stereoMode=function(t){return function(t){switch(t){case"":case"horizontal":case"vertical":return!0;default:return!1}}(t)?t:""}(e.stereoMode),{panoramaMode:vE(e.panoramaMode,Boolean(e[360])),stereoMode:e.stereoMode?gE(e.stereoMode):zh.NONE,nativeVR:Boolean(e.nativeVR)}}(s.vr));if("analytics"in s||(null==e?void 0:e.analytics)){const t=jw(s.analytics),i=e&&e.analytics||[];s.analytics=function(t,e){const i=Ms(t);for(const s of e){const e=!t.some((t=>t.integration===s.integration));e&&s.integration!==_E&&i.push(s)}return i}(t,i)}return"mutedAutoplay"in s&&(s.mutedAutoplay=tm(s.mutedAutoplay)),"timeServer"in s&&delete s.timeServer,"playAdsAfterTime"in s&&(s.playAdsAfterTime=Mt(s.playAdsAfterTime)),s.blockContentIfAdError=function(t){return void 0!==t&&"boolean"==typeof t&&Boolean(t)}(s.blockContentIfAdError),s}var BE=!(fh.kR&&!fh.IR),LE=self.console;function OE(t){if(Th(t))try{return JSON.stringify(t)}catch(t){}return t}function ME(t){return t.map(OE).join(" ")}function FE(t){const e=LE&&LE[t];return e?e.bind&&BE?e.bind(LE):function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];LE[t](ME(i))}:void 0}var UE=FE("log")||Qo,rt=FE("warn")||UE.bind(void 0,"WARNING:"),Vh=FE("error")||UE.bind(void 0,"ERROR:"),HE=(()=>{const t=LE&&LE.assert;return t?t.bind&&BE?t.bind(LE):function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];LE.assert(t,ME(i))}:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];t||Vh("Assertion failed:",...i)}})();var Cs=function(){function t(t){this.cH=t}return t.prototype.lH=function(t){var e,i,s,n,r,h,o,a=[];if(!t)return"";var u=t.length%4;if(u>0)for(;u++<4;)t+=this.cH.charAt(64);for(e=0;e<t.length;e+=4)i=(o=this.cH.indexOf(t.charAt(e))<<18|this.cH.indexOf(t.charAt(e+1))<<12|(r=this.cH.indexOf(t.charAt(e+2)))<<6|(h=this.cH.indexOf(t.charAt(e+3))))>>>16&255,s=o>>>8&255,n=255&o,a[e/4]=String.fromCharCode(i,s,n),64===h&&(a[e/4]=String.fromCharCode(i,s)),64===r&&(a[e/4]=String.fromCharCode(i));return a.join("")},t.prototype.dH=function(t,e){var i,s,n,r,h,o,a,u=[],c="";if((o=t.length%3)>0)for(;o++<3;)c+=this.cH.charAt(64),t+="\0";for(o=0;o<t.length;o+=3)s=(i=t.charCodeAt(o)<<16|t.charCodeAt(o+1)<<8|t.charCodeAt(o+2))>>18&63,n=i>>12&63,r=i>>6&63,h=63&i,u[o/3]=this.cH.charAt(s)+this.cH.charAt(n)+this.cH.charAt(r)+this.cH.charAt(h);return a=(a=u.join("")).slice(0,a.length-c.length),e||(a+=c),a},t.dh=new t(function(){var t,e,i,s,n=[],r=["object","$","undefined","function","Cannot find module '","MODULE_NOT_FOUND","*","com.widevine.alpha","urn:mpeg:dash:mp4protection:2011","^","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","__proto__","@@iterator","getUTCHours","setUTCFullYear","25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?","SegmentBase","RateChangeEvent","Symbol(","Symbol.",'; codecs="'];for(t=0;t<r.length;t+=1)for(e=r[t],i=0;i<e.length;i+=1)s=e.charAt(i),-1===n.indexOf(s)&&n.push(s);return n.join("")}()),t.fH=new t(function(t){return t.lH("aDtm.Dd_DE.4DuN$CeaD $t?FUa0ac'NlYsgU]dU*|sMCON9NL.i'YU M:.LiEb5TLaTOu18F|'v*:s7C41nOMop")}(t.dh)),t}();function io(t){return"string"==typeof t}function VE(t){return"number"==typeof t}var WE={}.toString;var Ja,qE=Array.isArray||function(t){return"[object Array]"===WE.call(t)};function oo(t,e){return qE(t)&&t.every(e)}!function(t){t.HTML5="html5",t.ANDROID="android",t.IOS="ios",t.TVOS="tvos",t.ANDROIDTV="androidtv",t.TIZEN="tizen",t.WEBOS="webos",t.CHROMECAST="chromecast",t.ROKU="roku",t.FIRETV="firetv",t.CHROMECASTCAF="chromecastcaf",t.THEOLIVEWEB="theoliveweb"}(Ja||(Ja={}));var fo,zE=g.keys(Ja).map((function(t){return Ja[t]}));function XE(t){return-1!==zE.indexOf(t)}!function(t){t.HESP="hesp",t.MULTIVIEW="multiview"}(fo||(fo={}));var GE,QE=g.keys(fo).map((function(t){return fo[t]}));function KE(t){return-1!==QE.indexOf(t)}function jE(t){try{var e=Cs.fH.lH(t),i=JSON.parse(e);if(!function(t,e){var i,s=function(t){return"object"==typeof t&&null!==t}(t),n=io(t.key),r=io(t.customer_id),h=VE(t.generation_date),o=VE(t.expiration_date),a=oo(t.domains_page,io),u=oo(t.domains_source,io),c=oo(t.sdks,e?XE:io),l=function(t){return"boolean"==typeof t}(t.send_impression);t.features?i=oo(t.features,e?KE:io):(i=!0,t.features=[]);if(!(s&&n&&r&&h&&o&&a&&u&&c&&l&&i))return!1;return!0}(i,!1))throw new v("The provided license could not be decoded correctly.");return i}catch(t){throw new v("The provided license could not be decoded correctly.")}}function YE(){return GE||(GE={TI:eA.href,_H:fa.parent&&fa.parent!==a,gH:JE()}),GE}var ji,ZE=["http:","https:","ftp:","ws:","wss:"];function JE(){var t;try{if(null==fa?void 0:fa.top)return fa.top.location.href}catch(t){}return null==fa||null==(t=fa.document)?void 0:t.referrer}!function(t){t[t.vH=0]="vH",t[t.wH=1]="wH",t[t.mH=2]="mH"}(ji||(ji={}));var $E,Lo=class{constructor(t,e,i,s,n=[],r="",h=Date.now(),o=[],a=!0){this.pH=t,this.yH=e,this.AH=i,this.bH=s,this.TH=n,this.SH=r,this.kH=h,this.EH=o,this.IH=a}};!function(t){t.wH="expired",t.PH="invaliddomain",t.RH="invalidsource",t.CH="invalidfeature",t.aa="error"}($E||($E={}));var tI=class t{xH(t,e){let i=[];Vn(t.sources)?i=[t.sources]:yr(t.sources)&&(i=t.sources),this.DH(t,i,e),this.NH(i,e)}DH(t,e,i){if(mE(t)||0===i.AH.length||sI(i.AH))return;if(!e.every((t=>this.BH(t,i)))){const t="invalidsource",e=oc.LH(t);throw new jr(eI(t),e)}}NH(t,e){for(const i of t)ot(i)&&Xw(i)&&this.Wf([fo.HESP],e)}OH(e){return this.MH(e.EH)&&this.FH(e)?t.UH(e.bH)?0:1:2}Wf(t,e){for(const i of t)if(!Bc(e.TH,i)){const t="invalidfeature",e=oc.HH(t,i);throw new jr(eI(t),e)}}MH(t){return 0===t.length||t.some((t=>this.VH(t)))}VH(t){return"web"===function(t){switch(t){case Ja.ANDROID:return mo.AP;case Ja.ANDROIDTV:case Ja.FIRETV:return mo.bP;case Ja.IOS:return mo.TP;case Ja.TVOS:return mo.SP;case Ja.CHROMECAST:case Ja.CHROMECASTCAF:return mo.kP;case Ja.THEOLIVEWEB:return mo.EP;default:return mo.yP}}(t)}static UH(t){const e=Number(new Date);return!!t&&e<=t}FH(t){return!(this.WH&&0!==t.yH.length&&!sI(t.yH))||!!(this.WH&&this.qH(t.yH)&&this.zH(t.yH))}qH(t){return nI(this.Px.TI,t)}zH(t){if(!this.Px._H)return!0;if(this.XH)return!0;const e=this.GH();return!!e&&nI(e,t)}GH(){if(!this.Px._H)return;const t=el.ancestorOrigins;return t&&t.length>0?t[t.length-1]:this.Px.gH?this.Px.gH:void 0}BH(e,i){return!!t.QH(e,i.AH)}static QH(t,e){return nI(this.KH(t),e)}static KH(t){return mh(t)?t:ot(t)&&t.src||""}constructor(t,e,i){this.XH=t,this.jH=e,this.Px=i,this.WH=hI(this.Px)}};function eI(t){switch(t){case"invaliddomain":return n.LICENSE_INVALID_DOMAIN;case"invalidsource":return n.LICENSE_INVALID_SOURCE;case"expired":return n.LICENSE_EXPIRED;case"invalidfeature":return n.LICENSE_INVALID_FEATURE;case"error":return n.LICENSE_ERROR}}function iI(t,e){let i=t,s=e;if(!i)return!1;if(s=s.trim(),"*"===s)return!0;if(i=i.replace(/\.+$/,""),s===i)return!0;const n="\\.",r="25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?",h="(\\*|"+r+")",o=new RegExp("ip-range\\("+h+n+h+n+h+n+h+"\\)"),a=s.match(o),u=t=>"*"===t?"("+r+")":t;if(null!==a&&5===a.length){const t=new RegExp("^"+a[1]+n+u(a[2])+n+u(a[3])+n+u(a[4])+"$");return null!==i.match(t)}return s="."+s,-1!==i.indexOf(s,i.length-s.length)}function sI(t){return t.some((t=>"*"===t))}function nI(t,e){const i=Ee.Rh(t);if(!rI(i))return!0;for(const s of e){if(iI(i.hostname,s))return!0;if(iI(pg(t),s))return!0}return!1}function rI(t){return-1!==ZE.indexOf(t.protocol)}function hI(t){const e=Ee.Rh(t.TI);return rI(e)&&!function(t){return iI(t.hostname,"localhost")}(e)&&!function(t){return iI(t.hostname,"theoplayer.doubleclick.net")}(e)}var Ai,oc=class{static HH(t,e){return"The requested feature '"+e+"' is not available with the license for this player."}static LH(t){return"invaliddomain"===t?this.YH:"invalidsource"===t?this.ZH:"expired"===t?this.JH:"invalidfeature"===t?this.$H:this.tV}};function oI(t){const e=[t.lT,t.eV,t.iV];switch(t.eV){case 1:e.push(t.Pw);break;case 4:e.push(t.Wu),e.push(t.lt);break;case 5:e.push(t.lt)}return e}oc.tV="The license for this player is invalid.",oc.JH="The usage license for this video player has expired.",oc.YH="The current domain is incompatible with the license for this player.",oc.ZH="The provided video source is incompatible with the license for this player.",oc.$H="The requested feature is not available with the license for this player.",function(t){t[t.sV=1]="sV",t[t.nV=4]="nV",t[t.rV=5]="rV"}(Ai||(Ai={}));var yt=new Array(256);for(let t=0;t<256;t+=1)yt[t]=(t<16?"0":"")+t.toString(16);function aI(){const t=Ri(),e=(4294967296*w.random()|0)+t&3029421624,i=(4294967296*w.random()|0)+t&3595553209,s=(4294967296*w.random()|0)+t&1130486254,n=(4294967296*w.random()|0)+t&1284287105;return yt[255&e]+yt[e>>>8&255]+yt[e>>>16&255]+yt[e>>>24&255]+"-"+yt[255&i]+yt[i>>>8&255]+"-"+yt[i>>>16&15|64]+yt[i>>>24&255]+"-"+yt[63&s|128]+yt[s>>>8&255]+"-"+yt[s>>>16&255]+yt[s>>>24&255]+yt[255&n]+yt[n>>>8&255]+yt[n>>>16&255]+yt[n>>>24&255]}function uI(t){return iw(t.replace(/-/g,""))}function cI(){return Ee.V_()}var lI,dI="theoplayer-session-id";function fI(){if(!lI){const t=Ft.RC(dI);t?lI=t:(lI=aI(),Ft.dO(dI,lI))}return lI}var _I=/[^\x00-\x7E]/g;function gI(t){return"\\u"+Xc(t.charCodeAt(0).toString(16),4,"0")}var vI="https://license.theoplayer.com";function wI(t){const e=function(t){const e=[];return function(t,e,i){return JSON.stringify(t,e,i).replace(_I,gI)}(t,((t,i)=>{if(Th(i)){if(-1!==e.indexOf(i))return null;e.push(i)}return i}))}(function(t){return[t.hV,t.YD,t.pH,t.oA,t.oV,t.aV,t.uV.map(oI)]}(t));return Cs.fH.dH(e)}var mI=class{get uV(){return this.cV}lV(){return Boolean(this.oV)}get oV(){return this.dV}async fV(t){if(!(await this.gV._V()).IH)return;const e={eV:Ai.sV,iV:Ri(),Pw:t};await this.vV(e)}async wV(t,e){const i={eV:Ai.nV,iV:Ri(),Wu:e,lt:t};await this.vV(i)}async mV(t){const e={eV:Ai.rV,iV:Ri(),lt:t};await this.vV(e)}async vV(t){const e=await this.gV._V();"a:n[_O*[C4C-N$_@_MYY $D]iOp]N$_-_]th_:c|aen?C:pH"===this.pV.dH(e.pH)&&t.eV!==Ai.rV||(t.eV===Ai.sV?this.yV():this.lV()||this.yV(),t.lT=this.sD++,this.cV.push(t),!function(t){return t===Ai.sV||t===Ai.rV}(t.eV)?this.cV.length>this.AV&&await this.bV():await this.TV())}async TV(t){for(void 0===t&&(t=!1);this.cV.length>0;)await this.bV(t)}async SV(t){const e=await this.gV._V();return{hV:Ri(),YD:fI(),pH:this.pV.dH(e.pH)||"dev",oA:this.RD,oV:this.dV,aV:this.kV,uV:t}}async bV(t){void 0===t&&(t=!1);const e=this.cV.splice(0,this.EV),i=await this.SV(e);t?this.PV(i):this.RV(i),this.CV=cI()}async RV(t){const e=wI(t),i=new vh({TI:vI,tP:e,oP:!1,sP:Ct.KT,eP:{"Content-Type":ie.LL},kI:4e3,iP:ut.POST});try{const t=await this.fP.pI(i);await t.xL()}catch(t){(new Image).src="https://licensing.theoplayer.com/t?"+e}}PV(t){const e=wI(t);this.fP.PV({TI:vI,tP:e,rM:ie.LL})}yV(){this.lV()&&this.TV(),this.dV=aI(),this.sD=0}bn(){tA.xV(this.DV),nl(this.NV),this.TV()}constructor(t,e,i,s=Cs.dh,n=0,r=1){this.RD=t,this.fP=e,this.gV=i,this.pV=s,this.AV=n,this.EV=r,this.cV=[],this.dV=null,this.CV=0,this.kV="unknown",this.sD=0,this.BV=()=>{cI()-this.CV>6e4&&this.TV()},this.DV=()=>{this.TV(!0)},tA.LV(this.DV),this.NV=sl(this.BV,6e4)}};var pI=0;var yI=c,yh=self.requestAnimationFrame||self.webkitRequestAnimationFrame||self.mozRequestAnimationFrame,Ws=self.cancelAnimationFrame||self.webkitCancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelRequestAnimationFrame;yh&&Ws||(yh=function(t){const e=cI(),i=w.max(0,16-(e-pI)),s=u((()=>t(e+i)),i);return pI=e+i,s},Ws=yI),yh=yh.bind(self),Ws=Ws.bind(self);var AI=fh.kR||fh.KP&&fh.UR<13;function bI(t,e,i){const s=t.getImageData(e,i,1,1).data;return 0===s[0]&&0===s[1]&&0===s[2]&&0===s[3]}var Ui,TI=class{get ma(){var t;return null!=(t=this.Gu)?t:this.Gu=function(t){return{drawImage(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return t.OV(e,...s)},texImage2D:(e,i,s,n,r,h)=>t.MV(e,i,s,n,r,h),requestVideoFrameCallback:e=>t.FV(e),cancelVideoFrameCallback:e=>t.UV(e)}}(this)}OV(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const n=this.HV;return void 0!==n&&(t.drawImage(n,...i),!0)}MV(t,e,i,s,n,r){let h=this.HV;return void 0!==h&&(AI&&(h=this.VV(h)),t.texImage2D(e,i,s,n,r,h),!0)}FV(t){const e=this.WV++,i=this.qV(t,e);return this.zV.set(e,{XV:t,GV:i}),e}UV(t){const e=this.zV.get(t);void 0!==e&&(this.zV.delete(t),e.GV())}qV(t,e){const i=this.HV;if(void 0===i)return Qo;if(i instanceof HTMLVideoElement&&i.requestVideoFrameCallback){const s=i.requestVideoFrameCallback(((i,s)=>{this.zV.delete(e),t(i,s)}));return()=>i.cancelVideoFrameCallback(s)}{let i;const s=n=>{this.QV()?(this.zV.delete(e),this.KV=!1,t(n,void 0)):i=yh(s)};return i=yh(s),()=>Ws(i)}}QV(){return(!this.t.Dc||this.KV)&&!this.t.Fc&&this.t.Nc>=dw.Hf}VV(t){let e=this.jV;void 0===e&&(e=h.createElement("canvas"),this.jV=e);const i=e.getContext("2d"),s=this.t,n=s.Kg,r=s.Xg,o=e.width,a=e.height;i.clearRect(0,0,e.width,e.height),o===n&&a===r||(e.width=n,e.height=r),i.drawImage(t,0,0,n,r);let u=!1;return n>0&&bI(i,n-1,0)&&(e.width=o,u=!0),r>0&&bI(i,0,r-1)&&(e.height=a,u=!0),u&&i.drawImage(t,0,0,n,r),e}bn(){this.zV.forEach((t=>t.GV())),this.zV.clear(),this.t.pn(o.$w,this.YV),this.t.pn(o.Tf,this.ZV),this.HV=void 0,this.jV=void 0}constructor(t){this.HV=void 0,this.Gu=void 0,this.jV=void 0,this.zV=Yh(),this.WV=1,this.KV=!0,this.ZV=()=>{this.KV=!0},this.YV=()=>{this.HV=this.t.rv(),this.zV.forEach(((t,e)=>{t.GV(),t.GV=this.qV(t.XV,e)}))},this.t=t,this.t.wn(o.$w,this.YV),this.t.wn(o.Tf,this.ZV),this.YV()}};(Ui||(Ui={})).gn="dimensionchange";var SI,kI=class extends Xi{constructor(t,e){super(Ui.gn),this.width=t,this.height=e}},Io=class{constructor(t,e){this.je=t,this.XV=e}},EI=class extends Io{get JV(){return this.$V}get tW(){return this.eW}bn(){this.iW.disconnect()}constructor(t,e){super(t,e),this.$V=0,this.eW=0,this.sW=t=>{if(t.length>0){const e=t[t.length-1].contentRect;this.eW=e.width,this.$V=e.height,this.XV(this.eW,this.$V)}},this.iW=new fa.ResizeObserver(this.sW),this.iW.observe(this.je)}};var II=["Webkit","Moz","O","ms"],PI=(()=>{let t=!1;try{if(void 0!==fa&&"function"==typeof fa.addEventListener){const e=g.defineProperty({},"passive",{get(){t=!0}});fa.addEventListener("testPassiveEventSupport",Qo,e),fa.removeEventListener("testPassiveEventSupport",Qo,e)}}catch(t){}return t})(),RI=Wn();function CI(t){return RI.has(t)||RI.set(t,function(t){const e=(SI||(SI=fa&&fa.document&&fa.document.createElement("span")),SI);if(!e||!e.style)return t;if(void 0!==e.style[t])return t;const i=t.charAt(0).toUpperCase()+t.slice(1);for(const t of II){const s=t+i;if(void 0!==e.style[s])return s}return t}(t)),RI.get(t)}function xI(t){const e=t.style;e.position="absolute",e.left="0",e.right="0",e.bottom="0",e.top="0",e.overflow="scroll",e.zIndex="-1",e.visibility="hidden"}function DI(t){const e=t.style;e.position="absolute",e.left="0",e.top="0",e[CI("transition")]="0s"}var NI=class extends Io{bn(){Ws(this.nW),this.nW=0,this.rW.removeEventListener("scroll",this.hW),this.oW.removeEventListener("scroll",this.hW),dt(this.aW),a&&a.removeEventListener("resize",this.uW)}get JV(){return this.je.getBoundingClientRect().height||this.$V||0}get tW(){return this.je.getBoundingClientRect().width||this.eW||0}constructor(t,e,i){super(t,e),this.nW=0,this.eW=NaN,this.$V=NaN,this.cW=void 0,this.ir=()=>{const t=1e5;this.lW.style.width=t+"px",this.lW.style.height=t+"px",this.rW.scrollLeft=t,this.rW.scrollTop=t,this.oW.scrollLeft=t,this.oW.scrollTop=t,0===this.oW.scrollTop&&yh(this.ir)},this.dW=()=>{const t=this.tW,e=this.JV;this.XV(t,e),this.eW=t,this.$V=e,this.ir(),this.nW=0},this.hW=()=>{if(this.nW)return;const t=this.tW,e=this.JV;t===this.eW&&e===this.$V||(this.nW=yh(this.dW))},this.uW=()=>{this.cW||(this.cW=u(this.fW,66))},this.fW=()=>{this.cW=void 0,this._W()},this._W=()=>{this.hW()};const s=function(t,e){return a.getComputedStyle(t,void 0).getPropertyValue(e)||t.style[e]}(t,"position");i||"static"!==s||(t.style.position="relative");const n=h.createElement("div");this.aW=n,this.rW=h.createElement("div"),this.lW=h.createElement("div"),this.oW=h.createElement("div"),this.gW=h.createElement("div"),xI(this.rW),xI(this.oW),DI(this.lW),function(t){DI(t),t.style.width="200%",t.style.height="200%"}(this.gW),n.appendChild(this.rW),n.appendChild(this.oW),this.rW.appendChild(this.lW),this.oW.appendChild(this.gW),t.appendChild(n),this.rW.addEventListener("scroll",this.hW),this.oW.addEventListener("scroll",this.hW),a&&a.addEventListener("resize",this.uW),this.hW()}},BI=class extends Et{kn(t){this.iW||("function"==typeof fa.ResizeObserver?this.iW=new EI(this.je,this.sW):this.iW=new NI(this.je,this.sW,t))}bn(){this.Lo(),this.iW&&(this.iW.bn(),this.iW=void 0)}get JV(){return this.iW?this.iW.JV:0}get tW(){return this.iW?this.iW.tW:0}constructor(t){super(),this.iW=void 0,this.sW=(t,e)=>{this.To(new kI(t,e))},this.je=t}},Zh=class extends Xi{constructor(){super(is.oa)}};var LI,xn=function(){if(!h)return;const t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(let e of t)if(e[1]in h)return{Sl:e[0],Tl:e[1],vW:e[2],wW:e[3],Ke:e[4],mW:e[5]}}(),OI=class extends Xi{constructor(){super(is.fa)}},MI=class t extends Et{static ea(t){return Boolean(xn&&h[xn.wW]&&xn.Sl in t)}bo(){const t=this.je[xn.Sl]();t&&t.then?t.then(this.pW,this.yW):(h.removeEventListener(xn.mW,this.yW),h.addEventListener(xn.mW,this.yW))}Co(){const t=h[xn.Tl]();t&&t.then?t.then(this.pW,this.yW):(h.removeEventListener(xn.mW,this.yW),h.addEventListener(xn.mW,this.yW))}fU(){const t=this.cs,e=this.je===h[xn.vW];this.cs=e,t!==e&&this.To(new Zh)}_U(){this.To(new Hh)}bn(){this.Lo(),h.removeEventListener(xn.Ke,this.pW),h.removeEventListener(xn.mW,this.yW)}constructor(e){super(),this.cs=!1,this.pW=()=>this.fU(),this.yW=()=>this._U(),this.je=e,this.sa=t.ea(e),h.addEventListener(xn.Ke,this.pW),this.fU()}},FI=class t extends Et{static ea(t){return fh.KP&&("webkitEnterFullscreen"in t||"webkitSupportsPresentationMode"in t)}bo(){this.je.webkitSupportsPresentationMode&&this.je.webkitSupportsPresentationMode("fullscreen")?fh.KP?requestAnimationFrame((()=>this.je.webkitSetPresentationMode("fullscreen"))):this.je.webkitSetPresentationMode("fullscreen"):this.je.webkitEnterFullscreen()}Co(){this.je.webkitSupportsPresentationMode&&this.je.webkitSupportsPresentationMode("inline")?this.je.webkitSetPresentationMode("inline"):this.je.webkitExitFullscreen()}fU(){const t=this.cs;let e;e=this.je.webkitPresentationMode?"fullscreen"===this.je.webkitPresentationMode:Boolean(this.je.webkitDisplayingFullscreen),this.cs=e,t!==e&&this.To(new Zh)}bn(){this.Lo(),this.je.removeEventListener("webkitbeginfullscreen",this.pW),this.je.removeEventListener("webkitendfullscreen",this.pW),this.je.removeEventListener("webkitpresentationmodechanged",this.pW)}constructor(e){super(),this.cs=!1,this.pW=()=>this.fU(),this.je=e,this.sa=t.ea(e),this.je.addEventListener("webkitbeginfullscreen",this.pW),this.je.addEventListener("webkitendfullscreen",this.pW),this.je.addEventListener("webkitpresentationmodechanged",this.pW),this.fU()}},UI=class extends Et{get sa(){return!!this.AW&&this.AW.sa}get cs(){return this.cU}bo(){this.AW?this.AW.bo():this.To(new Hh)}Co(){for(const t of this.bW)t.cs&&t.Co()}TW(t){this.AW=t}SW(t){this.bW.push(t),t.wn(is.oa,this.fU),t.wn(is.aa,this.Os),this.fU()}kW(t){me(this.bW,t),t.pn(is.oa,this.fU),t.pn(is.aa,this.Os)}EW(){for(const t of this.bW)if(t.cs)return!0;return!1}ir(){this.AW=void 0,this.cU=!1;const t=this.bW.slice();for(const e of t)this.kW(e),e.bn();this.fU()}bn(){this.Lo(),this.ir()}constructor(...t){super(...t),this.bW=[],this.AW=void 0,this.cU=!1,this.fU=()=>{const t=this.cU,e=this.EW();t!==e&&(this.cU=e,this.To(new Zh))}}},HI=class extends Et{get sa(){return!!this.IW&&this.PW.sa}get cs(){return this.PW.cs}bo(){this.IW&&this.PW.bo()}Co(){this.PW.Co()}RW(){this.PW.wn([is.oa,is.fa],this.fU),this.PW.wn(is.aa,this.Os)}xW(){this.PW.pn([is.oa,is.fa],this.fU),this.PW.pn(is.aa,this.Os)}Kn(){const t=this.PW,e=this.t.ev();if(t===e)return;this.ua=!0;const i=this.cs,s=this.sa;i&&this.Co(),this.xW(),this.PW=e,this.RW(),i&&!this.cs&&this.sa?this.bo():this.Co(),this.ua=!1,s!==this.sa&&this.To(new OI),i!==this.cs&&this.To(new Zh)}bn(){this.Lo(),this.xW(),this.t.pn(o.Zw,this.DW)}constructor(t,e){super(),this.ua=!1,this.DW=()=>this.Kn(),this.fU=t=>{this.ua||this.To(t)},this.t=t,this.IW=e,this.PW=new Lr,this.RW(),this.t.wn(o.Zw,this.DW),this.Kn()}},Bh=class extends Fe{get name(){return"AggregateError"}constructor(t){super(""+t.join("\n"),t[0]),this.causes=t}};function VI(t){return function(t){return new Sf({start(e){for(const i of t)e.enqueue(i);e.close()}})}([t])}function WI(t){return VI(function(t){return new x(t)}(t))}function kt(t,e){return function(t,e){let i=e;const s=t.getReader(),n=new $i,r=()=>{h();const t=new At;s.cancel(t).catch(Qo),n.BC(t)},h=()=>{i&&(i.B_(r),i=void 0)};i&&(i.R_?r():i.N_(r));const o=[],a=t=>t.done?(h(),Promise.resolve(o)):(o.push(t.value),Promise.resolve(s.read()).then(a));return Promise.resolve(s.read()).then(a).then((t=>{h(),n.Lf(t)}),(t=>{h(),n.BC(t)})),n.jf}(t,e).then((t=>ac(t).buffer))}function qI(t,e){let i=e;const{readable:s,writable:n}=new Ka,r=n.getWriter(),h=()=>{i&&i.Jl()};return r.closed.then(h,h),t.then((t=>(i=void 0,r.releaseLock(),t.pipeTo(n).catch(Qo))),(t=>(i=void 0,r.releaseLock(),n.abort(t).catch(Qo)))),s}function zI(t){const{readable:e,writable:i}=new Ka;return t.pipeTo(i,{preventCancel:!0}).catch((e=>{let i;i=Os(e)?e[0]===e[1]||Aa(e[0])&&Aa(e[1])?e[0]:new Bh(e):e,t.cancel(i).catch(Qo)})),e.tee()}function XI(t){return Mr(new x(t))}function GI(t){return Jv(t).buffer}!function(t){t[t.FI=0]="FI",t[t.NW=1]="NW"}(LI||(LI={}));var QI="content-type",KI="text/plain;charset=UTF-8",jI=class{_L(t){return this._P(t).then(JSON.parse)}QB(t,e){switch(t){case Ct.OI:return this.xL(e);case Ct.MI:return this._L(e);case Ct.FI:return this.BW();case Ct.KT:return this._P(e);default:throw new p}}};function YI(t,e,i){if(t instanceof jI)return t;if(t instanceof Sf)return function(t,e){return new JI({Iw:0,BW:t,rM:ZI(e)})}(t,i);const s=ZI(i),n=Promise.resolve(t).then((t=>function(t,e){if(t){if("string"==typeof t)return{Iw:Ct.KT,tP:t,rM:e||KI};if(t instanceof ArrayBuffer||Qn(t))return{Iw:Ct.OI,tP:rP(t),rM:e};if(_i(t)||Os(t))return{Iw:Ct.MI,tP:t,rM:e};throw new p("Unsupported BodyInit type")}return{Iw:Ct.KT,tP:null,rM:e}}(t,s)));return new JI({Iw:1,jf:n,LW:e})}function ZI(t){return(t.get(QI)||"").toLowerCase()}var JI=class t extends jI{get OW(){return this.MW}FW(){return this.UW.jf}_P(t){return this.HW($I,t)}_L(t){return this.HW(eP,t)}xL(t){return this.HW(sP,t)}BW(){return this.VW(function(t){return 0===t.Iw?t.BW:qI(t.jf.then(nP).then(WI),t.LW)}(this.WW))}HW(t,e){if(this.MW)return Promise.reject(new p("Already used"));this.MW=!0;const i=t(this.WW,e);return this.UW.U_(i.then(Qo)),i}VW(t){if(this.MW)throw new p("Already used");if(t.locked)throw new p("Body stream is locked");this.MW=!0;const e=new Ka,i=Promise.resolve(t.pipeTo(e.writable));return this.UW.U_(i),e.readable}qW(t){this.WW=t,1===t.Iw&&t.jf.catch(Qo)}zW(){if(this.MW)throw new p("Already used");const e=function(t){if(0===t.Iw){const[e,i]=t.BW.tee();return[{Iw:t.Iw,BW:e,rM:t.rM},{Iw:t.Iw,BW:i,rM:t.rM}]}{const[e,i]=t.LW.H_();return[{Iw:t.Iw,jf:t.jf,LW:e},{Iw:t.Iw,jf:t.jf,LW:i}]}}(this.WW),i=e[0],s=e[1];return this.qW(i),new t(s)}constructor(t){super(),this.MW=!1,this.UW=new $i,this.UW.jf.catch(Qo),this.qW(t)}};function $I(t,e){return 0===t.Iw?kt(t.BW,e).then(XI):(e&&t.LW.U_(e),I_(t.jf.then(tP),t.LW))}function tP(t){switch(t.Iw){case Ct.KT:return Promise.resolve(t.tP||"");case Ct.OI:return Promise.resolve(t.tP).then(XI);case Ct.MI:return Promise.resolve(t.tP).then(JSON.stringify)}}function eP(t,e){return 0===t.Iw?$I(t,e).then(JSON.parse):(e&&t.LW.U_(e),I_(t.jf.then(iP),t.LW))}function iP(t){return t.Iw===Ct.MI?Promise.resolve(t.tP):tP(t).then(JSON.parse)}function sP(t,e){return 0===t.Iw?kt(t.BW,e):(e&&t.LW.U_(e),I_(t.jf.then(nP),t.LW))}function nP(t){switch(t.Iw){case Ct.OI:return Promise.resolve(t.tP);case Ct.KT:case Ct.MI:return tP(t).then(GI)}}function rP(t){return t instanceof ArrayBuffer?t:A(ou(t)).buffer}var hP=class extends jI{get OW(){return this.XW.OW}FW(){return this.XW.FW()}_P(t){return this.XW._P(t)}_L(t){return this.XW._L(t)}xL(t){return this.XW.xL(t)}BW(){return this.XW.BW()}zW(){return this.XW.zW()}constructor(t){super(),this.XW=t}};function lo(t){return t.SI>=200&&t.SI<=299||304===t.SI}var ys=class t extends hP{Ny(t){return this.QB(this.sP,t)}Iy(){return new t({Ny:this.zW(),pI:this.pI},this)}constructor(t,e){let i,s,n,r,h;e?(i=e.eP,s=e.sP,n=e.SI,r=e.gL,h=e.GW):(i=[],s=Ct.KT,n=200,r="OK",h=!1);const o=t.pI,a=new Yu(t.eP||i),u=t.sP||s,c=t.gP||(e&&e.pI===o?e.gP:o.TI),l=e?e.XW:null;super(YI(void 0!==t.Ny?t.Ny:l,t.LW||new Hi,a)),this.eP=a,this.pI=o,this.gP=c,this.sP=u,this.SI=void 0!==t.SI?t.SI:n,this.gL=void 0!==t.gL?String(t.gL):r,this.GW=t.GW||h}},oP=class{pI(t){const e=function(t){return new ys({Ny:null,eP:{},pI:t,gP:t.TI,sP:t.sP,SI:0,gL:o.fm})}(new vh(t));return Promise.resolve(e)}PV(t){}bn(){}};var Is=class t{static get QW(){return t.KW||(t.KW=new t(new oP)),t.KW}pI(t){const e=this.jW(t);return this.YW.pI(e)}PV(t){return this.YW.PV(this.ZW(t))}jW(e){let i=new vh(e);if(!this.JW){const e=t.$W(i.TI);i=new vh({TI:e},i)}return i}ZW(e){let i=e.TI;return this.JW||(i=t.$W(i)),{TI:i,tP:e.tP}}static $W(t){return Ee.tq&&Jo(t,"http://")?t.replace(":","s:"):t}bn(){this.YW.bn()}constructor(t,e=!0){this.YW=t,this.JW=e}};function aP(t){let e;return{get url(){return t.TI},get method(){return t.iP},get headers(){return e||(e=t.eP.UI()),e},get body(){return t.tP},get useCredentials(){return t.oP},get type(){return t.Iw},get subType(){return t.rP},get mediaType(){return t.hP},get responseType(){return t.sP}}}function uP(t){switch(t.toLowerCase()){case"arraybuffer":return Ct.OI;case"json":return Ct.MI;case"stream":return Ct.FI;default:return Ct.KT}}function cP(t){switch(t.toUpperCase()){case"POST":return ut.POST;case"PUT":return ut.PUT;case"DELETE":return ut.DELETE;case"HEAD":return ut.HEAD;case"OPTIONS":return ut.OPTIONS;default:return ut.GET}}function lP(t){switch(t.toLowerCase()){case"manifest":return _h.WI;case"segment":return _h.qI;case"preload-hint":return _h.zI;case"content-protection":return _h.XI;default:return _h.YT}}function dP(t){switch(t.toLowerCase()){case"initialization-segment":return hi.GI;case"fairplay-license":return hi.QI;case"fairplay-certificate":return hi.KI;case"widevine-license":return hi.jI;case"widevine-certificate":return hi.YI;case"playready-license":return hi.ZI;case"clearkey-license":return hi.JI;case"aes128-key":return hi.$I;default:return hi.YT}}function fP(t){switch(t.toLowerCase()){case"audio":return Ia.yy;case"video":return Ia.vl;case"text":return Ia.KT;case"image":return Ia.jT;default:return Ia.YT}}Is.KW=void 0;var Ho=class{get iq(){return this.nq.jf}get ma(){return this.Gu||(this.Gu=this.rq()),this.Gu}get hq(){return this.oq}get aq(){return!this.oq}get uq(){return this.cq>0}get AI(){return this.bI}jy(){this.oq=!0,this.nq.Lf(null)}lq(){this.nq.BC(new Bh(this.dq))}fq(t){if(!this.aq)throw new p("Cannot respond more than once");if(!Th(t))throw new p("Expected valid response");this.bI=this._q(t),this.jy()}gq(){try{const t=this.vq(this.ma);t?this.wq(t):this.uq||this.hq||this.jy()}catch(t){this.dq.push(t),this.lq()}}wq(t){if(this.hq)throw new v("Request has been redirected or a response already exists");if(Ie(t))this.mq(t);else{if("function"!=typeof t)throw new p("Expected promise or function");{const e=new $i,i=t=>{t?e.BC(t):e.Lf(void 0)};try{const s=t(i);Ie(s)&&e.U_(s)}catch(t){e.BC(t)}this.mq(e.jf)}}}async mq(t){try{this.cq++,await t,this.cq--,this.uq||this.hq||(this.dq.length?this.lq():this.jy())}catch(t){this.cq--,this.dq.push(t),this.uq||this.hq||this.lq()}}constructor(t,e){this.pq=t,this.vq=e,this.nq=new $i,this.dq=[],this.Gu=void 0,this.oq=!1,this.bI=void 0,this.cq=0}},_P=class t extends Ho{get tP(){return this.yq}get eP(){return this.pq.eP}get pI(){return this.pq.pI}get AI(){return this.bI}get SI(){return this.pq.SI}get gL(){return this.pq.gL}get TI(){return this.pq.gP}static Aq(t,e,i){const s=void 0===t.body?i:t.body;return new ys({Ny:s,pI:e.pI,sP:e.pI.sP,eP:t.headers,SI:t.status,gL:t.statusText,gP:t.url,GW:!0},e)}rq(){return function(t){let e;const i=aP(t.pI);return{get closed(){return!t.aq},get request(){return i},get url(){return t.TI},get status(){return t.SI},get statusText(){return t.gL},get headers(){return e||(e=t.eP.UI()),e},get body(){return t.tP},respondWith:e=>t.fq(e),waitUntil:e=>t.wq(e)}}(this)}_q(e){return t.Aq(e,this.pq,this.yq)}constructor(t,e,i){super(t,e),this.yq=i,this.gq()}},gP=class extends Ho{get tP(){return this.pq.tP}get aq(){return this.bq&&!this.oq}get eP(){return this.pq.eP}get iP(){return this.pq.iP}get Tq(){return this.Sq}get AI(){return this.bI}get sP(){return this.pq.sP}get kI(){return this.pq.kI}get nP(){return this.pq.nP}get M_(){return this.pq.M_}get Iw(){return this.pq.Iw}get rP(){return this.pq.rP}get hP(){return this.pq.hP}get TI(){return this.pq.TI}get oP(){return this.pq.oP}get aP(){return this.pq.aP}rq(){return function(t){let e;return{get url(){return t.TI},get method(){return t.iP},get headers(){return e||(e=t.eP.UI()),e},get body(){return t.tP},get closed(){return!t.aq},get useCredentials(){return t.oP},get type(){return t.Iw},get subType(){return t.rP},get mediaType(){return t.hP},get responseType(){return t.sP},redirect:e=>t.kq(e),respondWith:e=>t.fq(e),waitUntil:e=>t.wq(e)}}(this)}_q(t){const e=this.pq.tP,i=new ys({Ny:e,eP:{},pI:this.pq,gP:this.pq.TI,sP:this.pq.sP,SI:200,gL:"OK"});return _P.Aq(t,i,e)}kq(t){if(!this.aq)throw new p("Cannot redirect, already redirected or has a response");let e;e=mh(t)?{url:t}:t,this.Sq=function(t,e){return new vh({TI:void 0===t.url?e.TI:t.url,iP:void 0!==t.method?cP(t.method):void 0,eP:t.headers,tP:t.body,oP:t.useCredentials,Iw:void 0!==t.type?lP(t.type):void 0,rP:void 0!==t.subType?dP(t.subType):void 0,hP:void 0!==t.mediaType?fP(t.mediaType):void 0,sP:void 0!==t.responseType?uP(t.responseType):void 0},e)}(e,this.pq),this.jy()}constructor(t,e,i){super(t,e),this.Sq=void 0,this.bq=i,this.gq()}};var Ac,Bo=class extends Is{Eq(t){this.Iq.Eq(t)}Pq(t){this.Iq.Pq(t)}Rq(t){this.Iq.Rq(t)}Cq(t){this.Iq.Cq(t)}xq(t){this.Iq.xq(t)}constructor(t,e=!0){const i=new vP(t);super(i,e),this.Iq=i}},vP=class{async pI(t){let e;try{e=await this.Dq(t,t.M_)}catch(e){if(e instanceof gy)return await this.Nq(e,t.M_);throw e}if(e=await this.Bq(e,t.M_),lo(e))return e;throw new et(e)}PV(t){return this.YW.PV(t)}async Dq(t,e){k_(e);let i,s=t;for(const t of this.Lq.slice()){k_(e);const n=new gP(s,t,!i);if(!n.hq)try{await n.iq}catch(t){0;continue}n.Tq&&!i?s=n.Tq:n.AI&&!i&&(i=n.AI)}return i||this.YW.pI(s)}async Nq(t,e){let i;i=t instanceof et?t.AI:new ys({Ny:null,pI:t.pI,SI:0,gL:""});const s=await this.Bq(i,e);if(s===i)throw t;if(lo(s))return s;throw new et(s)}async Bq(t,e){let i=t;for(const t of this.Oq.slice()){k_(e);const s=await Promise.resolve(i.Iy().Ny(e)),n=new _P(i,t,s);if(!n.hq)try{await n.iq}catch(t){0;continue}i=n.AI||i}return i}Eq(t){this.Lq.unshift(t)}Pq(t){this.Lq.push(t)}Rq(t){me(this.Lq,t)}Cq(t){this.Oq.unshift(t)}xq(t){me(this.Oq,t)}bn(){this.YW.bn(),Ce(this.Lq),Ce(this.Oq)}constructor(t){this.Lq=[],this.Oq=[],this.YW=t}},wP=class{get ma(){return this.Gu||(this.Gu=function(t){return{addRequestInterceptor(e){t.Eq(e)},removeRequestInterceptor(e){t.Rq(e)},addResponseInterceptor(e){t.Cq(e)},removeResponseInterceptor(e){t.xq(e)}}}(this)),this.Gu}Eq(t){this.fP.Eq(t)}Rq(t){this.fP.Rq(t)}Cq(t){this.fP.Cq(t)}xq(t){this.fP.xq(t)}constructor(t){this.fP=t}},mP=class extends Et{get ma(){return this.Gu||(this.Gu=function(t){return{get online(){return t.Dg},get estimator(){return function(t){return{get bandwidth(){return t.IO},get roundTripTime(){return t.PO}}}(t.Mq)},setEstimator(e){t.Fq(function(t){if(!t)return;return{get IO(){return H_(t.bandwidth)},get PO(){return H_(t.roundTripTime)},RO:e=>function(t){if(!t)return;return{Uq(e){t.markRequestStart(e)},Hq(e){t.markResponseStart(e)},Vq(e,i){t.markResponseData(e,i)},Wq(e){t.markResponseEnd(e)}}}(t.createMeasurer(aP(e)))}}(e))},addRequestInterceptor(e){t.Eq(e)},removeRequestInterceptor(e){t.Rq(e)},addResponseInterceptor(e){t.Cq(e)},removeResponseInterceptor(e){t.xq(e)},addEventListener(e,i){t.wn(e,i)},removeEventListener(e,i){t.pn(e,i)}}}(this)),this.Gu}get Dg(){return this.qq.Dg}get Mq(){return this.GF.Mq}Fq(t){this.GF.Fq(t)}Eq(t){this.fP.Eq(t)}Rq(t){this.fP.Rq(t)}Cq(t){this.fP.Cq(t)}xq(t){this.fP.xq(t)}bn(){this.Lo(),this.qq.pn(o._m,this.zq),this.qq.pn(o.fm,this.Xq)}constructor(t,e,i){super(e),this.qq=t,this.fP=e,this.GF=i,this.zq=t=>{this.To(t)},this.Xq=t=>{this.To(t)},this.qq.wn(o._m,this.zq),this.qq.wn(o.fm,this.Xq)}};!function(t){t.PERFORMANCE="performance",t.QUALITY="quality",t.BANDWIDTH="bandwidth"}(Ac||(Ac={}));function pP(t,e,i,s,n,r){const h=[];let o=t-w.max(r,1),a=t+n;if(e&&i){const t=xu(i,1,5),s=e-t;o=w.min(o,s);const n=e+i+t;a=w.max(a,n)}0!==o&&s.EF(0,o)&&h.push([0,o]);return s.EF(a,1/0)&&h.push([a,1/0]),h}function po(t){return t instanceof v&&"QuotaExceededError"===t.name}var yP={type:Ac.BANDWIDTH};function AP(t){const e=Ms(yP);return mh(t)?e.type=bP(t):Th(t)&&function(t){switch(t){case Ac.PERFORMANCE:case Ac.QUALITY:case Ac.BANDWIDTH:return!0;default:return!1}}(t.type)&&(e.type=bP(t.type)),Th(t)&&Th(t.metadata)&&(e.metadata=function(t){const e={},i=Mt(t.bitrate);return j(i)||(e.bitrate=i),e}(t.metadata)),e}function bP(t){switch(t){case"bandwidth":return Ac.BANDWIDTH;case"performance":return Ac.PERFORMANCE;case"quality":return Ac.QUALITY}}var TP=class extends Xi{constructor(t){super("Gq"),this.Qq=t}},SP=class extends Xi{constructor(t){super("Kq"),this.jq=t}},kP=class extends Xi{constructor(t){super("Yq"),this.Zq=t}},EP=class extends Et{Jq(t){this.$q=t}get tz(){switch(this.ez.type){case Ac.PERFORMANCE:return 0;case Ac.QUALITY:return 1/0;case Ac.BANDWIDTH:return this.ez.metadata&&void 0!==this.ez.metadata.bitrate?this.ez.metadata.bitrate:uh.lC.wO();default:return uh.lC.wO()}}get ma(){return this.Gu}get jq(){return this.ez}set jq(t){this.ez=t,this.To(new SP(t))}get Qq(){return this.iz}set Qq(t){this.iz=t,this.To(new TP(t))}get sz(){return w.min(this.iz,this.nz)}get Zq(){return this.rz}set Zq(t){this.rz=t,this.To(new kP(t))}get oz(){return this.nz}get Mq(){var t;return null!=(t=this.cz)?t:this.$q.sM}Fq(t){this.cz=t}lz(t){let e=w.min(t,.8*this.nz);if(e=w.max(10,e),this.nz===e)return!1;const i=this.sz;this.nz=e;const s=this.sz;return s!==i&&this.To(new TP(s)),!0}get fz(){return this._z}set fz(t){this._z=t}constructor(...t){super(...t),this.Gu=function(t){return{get strategy(){return function(t){return{metadata:t.metadata,type:t.type}}(t.jq)},set strategy(e){t.jq=AP(e)},get targetBuffer(){return t.Qq},set targetBuffer(e){const i=Mt(e);j(i)||(t.Qq=i)},get bufferLookbackWindow(){return t.Zq},set bufferLookbackWindow(e){const i=Mt(e);j(i)||(t.Zq=i<=0?30:i)},get maxBufferLength(){return t.oz},get clearBufferWhenSettingTargetQuality(){return t.fz},set clearBufferWhenSettingTargetQuality(e){t.fz=Dc(e)}}}(this),this.ez=yP,this.iz=20,this.rz=30,this.nz=1/0,this._z=!1,this.cz=void 0}},IP=class extends la{pa(){return new PP}constructor(){super("Uv")}},PP=class extends Xi{constructor(){super("change")}},sa=class extends Et{bn(){this.Lo();for(const t of this.cV)this.gz.pn(t,this.vz)}constructor(t,e,i){super(i),this.vz=t=>{C_(t)&&xt((()=>{this.To(t.ma)}))},this.gz=t,this.cV=e;for(const t of this.cV)this.gz.wn(t,this.vz)}},wi=class extends Xo{bn(){this.Lo(),this.gz.J_(this.vz)}constructor(t,e){super(e),this.vz=t=>{C_(t)&&xt((()=>{this.To(t.ma)}))},this.gz=t,this.gz.Q_(this.vz)}};var RP=class extends Xo{get PS(){return this.US}set PS(t){if(this.RS<=t)throw new v("Start time of a clip should be smaller than the end time.");this.US!==t&&(this.US=t,this.To(new IP))}get RS(){return this.WS}set RS(t){if(t<=this.PS)throw new v("End time of a clip should be larger than the start time.");this.WS!==t&&(this.WS=t,this.To(new IP))}get ma(){return this.Gu||(this.Gu=function(t){let e,i={get startTime(){return t.PS},set startTime(e){t.PS=e},get endTime(){return t.RS},set endTime(e){t.RS=e},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new wi(t,i),i}(this)),this.Gu}ir(){0===this.US&&this.WS===1/0||(this.US=0,this.WS=1/0,this.To(new IP))}wz(){return new d([this.PS,this.RS],[!0,!0])}constructor(...t){super(...t),this.US=0,this.WS=1/0}},Fo=class t extends je{gg(t){const e=this.xc.wz().vF(t);super.gg(e),this.mz()}pg(){return super.pg()||this.pz}get yz(){return this.Vg().length?this.Vg():this.xc.wz().ws()}Vg(){return d.Sn(super.Vg()).Cn(this.xc.wz()).ws()}dl(){this.pg()?this.gg(this.yz.start(0)):this.Az(),super.dl(),this.mz()}async ba(t,e){k_(e),this.pz=!1,this.xc.ir(),await super.ba(t,e)}bn(){return this.xc.pn("Uv",this.bz),this.hg.pn(o.Lu,this.SM),this.Tz(),super.bn()}yv(t){switch(t.type){case o.If:return this.To(t),this.Sz(),!0;case o.Tf:case o.jw:return this.To(t),this.kz(),!0;case o.Pf:if(this.Ez)return!0}return super.yv(t)}get Ez(){return this.xc.RS<this.ct}Tz(){this.Iz&&(Ws(this.Iz),this.Iz=void 0)}mz(){const e=this.Wu,i=this.Ez&&e>=this.xc.RS-t.cE;this.pz&&!i?(this.pz=!1,this.Dc&&this.dl()):this.pz||!i||this.Fc||this.Pz||(this.pz=!0,this.To(new ih(e)),this.jl())}Az(){if(this.ct===1/0)return;const e=this.yz,i=d.Sn(e).vF(this.Wu);au(this.Wu,i,t.cE)||this.gg(i)}constructor(e,i){super(e),this.pz=!1,this.Iz=void 0,this.Pz=!1,this.bz=()=>{this.Az(),this.mz()},this.SM=()=>{this.Tz(),this.mz();this.Ez&&this.Wu>=this.xc.RS-t.Rz&&!this.Ic&&(this.Iz=yh(this.SM))},this.Sz=()=>{this.Pz=!0},this.kz=()=>{this.Pz&&(this.Pz=!1,this.mz())},this.xc=i,this.xc.wn("Uv",this.bz),this.hg.wn(o.Lu,this.SM)}};Fo.Rz=1,Fo.cE=.001;var CP=class{get Cz(){return this.xz}set Cz(t){this.xz=t}constructor(){this.xz=!1}},xP=class extends je{pg(){return!this.xz.Cz&&super.pg()}jl(){this.Dz=!0,super.jl()}dl(){this.Dz=!1,super.dl()}yv(t){if(this.xz.Cz)switch(t.type){case o.Pf:return this.Wu=0,this.Dz||(this.Fc?this.Nz=!0:this.dl()),!0;case o.Tf:this.Nz&&(this.Nz=!1,this.dl());break;case o.Ch:if(this.Nz||super.pg())return!0}return super.yv(t)}constructor(t,e){super(t),this.Nz=!1,this.Dz=!1,this.xz=e}};var DP=class{get ma(){return this.Gu}get nS(){return this.Ko.Pg.nS}get hS(){return this.Ko.Pg.hS}get sS(){return this.Ko.Pg.sS}get Bz(){throw new v("Not implemented")}get Lz(){throw new v("Not implemented")}get oS(){return this.Ko.Pg.oS}get rS(){return this.Ko.Pg.rS}get aS(){return this.Ko.Pg.aS}constructor(t){this.Ko=t,this.Gu=function(t){return{get currentBandwidthEstimate(){return t.hS},get corruptedVideoFrames(){return t.nS},get droppedVideoFrames(){return t.sS},get totalBytesLoaded(){return t.oS},get bufferedSegments(){return t.aS}}}(this)}};function NP(t){if(!t||!Qt(t))return{sS:0,nS:0,rS:0,hS:0,oS:0,aS:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}};if("function"==typeof t.getVideoPlaybackQuality){const e=t.getVideoPlaybackQuality();return{sS:e.droppedVideoFrames,nS:e.corruptedVideoFrames||0,rS:e.totalVideoFrames}}return{sS:t.webkitDroppedFrameCount||0,nS:0,rS:t.webkitDecodedFrameCount||0}}var BP=class extends la{pa(){return new LP}constructor(){super("Oz")}},LP=class extends Xi{constructor(){super("castingchange")}};var OP=class extends Et{get Mz(){var t,e;return(null==(t=this.Fz)?void 0:t.Mz)||(null==(e=this.Uz)?void 0:e.Mz)||!1}get Vz(){return this.Fz}get Wz(){return this.Uz}qz(t){this.Fz=t,this.zz(t)}Xz(t){this.Uz=t,this.zz(t)}zz(t){t.wn("statechange",this.Gz)}Qz(t){t.pn("statechange",this.Gz)}get ma(){return this.Gu||(this.Gu=function(t){let e;const i={get casting(){return t.Mz},get airplay(){var e;return null==(e=t.Vz)?void 0:e.ma},get chromecast(){var e;return null==(e=t.Wz)?void 0:e.ma},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new sa(t,["Oz"],i),i}(this)),this.Gu}bn(){this.Lo(),this.Fz&&(this.Qz(this.Fz),this.Fz=void 0),this.Uz&&(this.Qz(this.Uz),this.Uz=void 0)}constructor(...t){super(...t),this.Fz=void 0,this.Uz=void 0,this.Kz=!1,this.Gu=void 0,this.Gz=()=>{const t=this.Kz,e=this.Mz;t!==e&&(this.Kz=e,this.To(new BP))}}},Ht=class{static async jz(t,e){try{const i=new vh({TI:t,sP:Ct.KT,iP:ut.GET}),s=await e.pI(i);return(await s.Ny()).trim()}catch(t){return void Aa(t)}}static Yz(t){try{const e=jE(t);return new Lo(e.key,e.domains_page,e.domains_source,e.expiration_date,e.features,e.customer_id,e.generation_date,e.sdks,e.send_impression)}catch(t){throw new jr(n.LICENSE_ERROR,"Invalid license. No valid license was configured.")}}static Zz(t){void 0===t&&(t=Cs.dh),Ee.Um("The baked-in license is used. Please update the configuration with your license.");const e=t.lH("F2b-iL'[FL[S"),i=JSON.parse('["F$(:_L50F|aY"]').map((e=>t.lH(e))),s=JSON.parse('[".$hsF|b9_Ess*rS:F]Y\\""]').map((e=>t.lH(e))),n=Number(new Date(Number(t.lH('COD|aHpHa:p3Ceo3Co""')))),r=JSON.parse("[]").map((e=>t.lH(e)));return new Lo(e,i,s,n,r)}static convertLicenseToDummyLicense(t){return new Lo(t.pH,t.yH,t.AH,864e13,t.TH,t.SH,Date.now(),t.EH,t.IH)}},Qe=class t{static aH(){return t.lC||(t.lC=MP.EN()?new MP:new Nh),t.lC}static NC(e){t.aH().NC(e)}static oH(){t.aH().oH()}static RC(e){return t.aH().RC(e)}static dO(e,i){t.aH().dO(e,i)}static Jz(e){const i=t.RC(e);if(void 0!==i)return _(i)}static $z(e){return"true"===t.RC(e)}};Qe.lC=void 0;var MP=class extends Qe{static EN(){const t="foobar";try{return self.localStorage.setItem(t,t),self.localStorage.removeItem(t),!0}catch(t){}return!1}NC(t){self.localStorage.removeItem(t)}oH(){self.localStorage.clear()}RC(t){var e;return null!=(e=self.localStorage.getItem(t))?e:void 0}dO(t,e){self.localStorage.setItem(t,e)}},FP="https://validate.theoplayer.com/1/",UP=72e5,HP=w.floor(14399999*w.random()-UP),VP="THEOplayer.license",WP=class{async Xf(){const t=await this.tX(this.eX.license,this.eX.licenseUrl);this.gV.iX(t)}async tX(t,e){let i,s=e;t?i=Ht.Yz(t):s||(i=Ht.Zz()),s||(s=FP+i.pH);const r=this.sX();let h;if(i&&(h=this.nX.OH(i),h===ji.vH)){if(this.rX(i.bH)&&this.rX(null==r?void 0:r.bH)){const t=await this.hX(s);if(t)return t}return i}if(r){if(this.nX.OH(r)===ji.vH){if(this.rX(null==r?void 0:r.bH)){const t=await this.hX(s);if(t)return t}return r}Qe.NC(VP)}const o=await Ht.jz(s,this.fP);let a;if(o){a=Ht.Yz(o);if(this.nX.OH(a)===ji.vH)return Qe.dO(VP,o),a;Qe.NC(VP)}else if(!this.WH&&i&&h===ji.wH&&s===FP+i.pH)return Ht.convertLicenseToDummyLicense(i);if(!i&&!a)throw new jr(n.LICENSE_ERROR,"The given license is invalid!");this.oX(null!=i?i:a,new jr(n.LICENSE_ERROR,"The given license is invalid!"))}async xH(t){let e=await this.gV._V();if(this.rX(e.bH)){var i;const t=null!=(i=this.eX.licenseUrl)?i:FP+e.pH,s=await this.hX(t);s&&(this.gV.iX(s),e=s)}try{const i=this.nX.OH(e);if(i===ji.mH){const t=$E.PH;throw new jr(eI(t),oc.LH(t))}if(i===ji.wH){const t=$E.wH;throw new jr(eI(t),oc.LH(t))}this.nX.xH(t,e)}catch(t){this.aX(t)}}async Wf(t){const e=await this.gV._V();try{this.nX.Wf(t,e)}catch(t){this.aX(t)}}async hX(t){try{const e=await Ht.jz(t,this.fP);if(void 0===e)return;const i=Ht.Yz(e);return this.nX.OH(i)===ji.vH?(Qe.dO(VP,e),i):void 0}catch(t){return}}rX(t){return!t||Number(new Date)+2592e5+HP>=t}sX(){const t=Qe.RC(VP);if(t)return Ht.Yz(t)}oX(t,e){this.gV.iX(t),this.aX(e)}aX(t){throw Vh(t.message),this.uX.mV(t.message),t}constructor(t,e,i,s,n,r){this.fP=t,this.nX=e,this.uX=i,this.gV=s,this.eX=n,this.Px=r,this.WH=hI(r)}},qP=class{iX(t){this.cX=t,this.lX.Lf()}get dX(){return this.cX}async _V(){return this.cX?Promise.resolve(this.cX):(await this.lX.jf,this.cX)}constructor(){this.lX=new $i}},zP=class extends la{pa(){return new XP}constructor(){super("Uv")}},XP=class extends Xi{constructor(){super("change")}};function GP(t){let e;const i={get fontFamily(){return t.fX},set fontFamily(e){t.fX=e},get fontColor(){return t._X},set fontColor(e){t._X=e},get fontSize(){return t.gX},set fontSize(e){t.gX=e},get backgroundColor(){return t.vX},set backgroundColor(e){t.vX=e},get windowColor(){return t.wX},set windowColor(e){t.wX=e},get edgeStyle(){return t.mX},set edgeStyle(e){t.mX=e},get marginTop(){return t.pX},set marginTop(e){t.pX=e},get marginBottom(){return t.yX},set marginBottom(e){t.yX=e},get marginLeft(){return t.AX},set marginLeft(e){t.AX=e},get marginRight(){return t.bX},set marginRight(e){t.bX=e},addEventListener(t,i){const s=ku(t,Oi);e.wn(s,i)},removeEventListener(t,i){const s=ku(t,Oi);e.pn(s,i)}};return e=new pu(i),t.wn(["Uv"],(t=>e.To(t.ma))),i}var QP={fX:void 0,_X:void 0,gX:void 0,vX:void 0,wX:void 0,mX:void 0,TX:void 0,pX:void 0,yX:void 0,AX:void 0,bX:void 0},xc="THEOplayer.textTrackStyle.",KP=class t extends Et{get SX(){return this.kX}get fX(){return this.kX.fX}set fX(t){this.Kn({fX:t})}get _X(){return this.kX._X}set _X(t){this.Kn({_X:t})}get gX(){return this.kX.gX}set gX(t){this.Kn({gX:t})}get vX(){return this.kX.vX}set vX(t){this.Kn({vX:t})}get wX(){return this.kX.wX}set wX(t){this.Kn({wX:t})}get mX(){return this.kX.mX}set mX(t){this.Kn({mX:t})}get TX(){return this.kX.TX}get pX(){return this.kX.pX}set pX(t){this.Kn({pX:t})}get yX(){return this.kX.yX}set yX(t){this.Kn({yX:t})}get bX(){return this.kX.bX}set bX(t){this.Kn({bX:t})}get AX(){return this.kX.AX}set AX(t){this.Kn({AX:t})}get ma(){return this.Gu||(this.Gu=GP(this)),this.Gu}Kn(e){this.kX=Me({},this.kX,e),t.EX(this.kX),this.To(new zP)}static IX(){let t=Me({},QP);return t.fX=Qe.RC(xc+"fontFamily")||t.fX,t._X=Qe.RC(xc+"fontColor")||t._X,t.gX=Qe.RC(xc+"fontSize")||t.gX,t.vX=Qe.RC(xc+"backgroundColor")||t.vX,t.wX=Qe.RC(xc+"windowColor")||t.wX,t.mX=Qe.RC(xc+"edgeStyle")||t.mX,t}static EX(t){Qe.dO(xc+"fontFamily",t.fX||""),Qe.dO(xc+"fontColor",t._X||""),Qe.dO(xc+"fontSize",t.gX||""),Qe.dO(xc+"backgroundColor",t.vX||""),Qe.dO(xc+"windowColor",t.wX||""),Qe.dO(xc+"edgeStyle",t.mX||"")}constructor(){super(),this.Gu=void 0,this.kX=t.IX()}};function jP(t,e){var i,s;t.style.marginLeft=(null!=(i=e.AX)?i:0)+"px",t.style.marginRight=(null!=(s=e.bX)?s:0)+"px",t.style.width="calc(100% - "+t.style.marginLeft+" - "+t.style.marginRight+")"}var Ou,YP=[o.Ph,o.Ch,ee.Qf,o.Lu,o.Rf,o.Ef,o.If,o.Tf,o.Pf,o.Vu,o.Il,o.Nf,ee.Bf,o.vm,zn.aa,pt.Yw,pt.TC,o.Gw,o.Xw,o.Sm,o.im,o.hm,o.$w,o.Zw],ZP={PX:!1};function JP(t){return t.xb.Iw===di.wB}(Ou||(Ou={})).RX="CX";var F,$P=["CX"];!function(t){t[t.xX=0]="xX",t[t.FI=1]="FI",t[t.DX=2]="DX"}(F||(F={}));var na,tR=["loadstart","encrypted","waitingforkey","webkitneedkey","msneedkey"];(na||(na={})).sH="NX";var ia=class extends Et{get ht(){throw new v("Not implemented")}get xb(){return this.al}get JO(){return this.nB}get rt(){throw new v("Not implemented")}async BX(t,e){const i=await this.AN.yN(t.dC,e),s=await i.cN();return await this.LX(s),s}OX(t){const e=this.hN;return e?0!==t.hM.length&&t.hM.some((t=>t.ap.dC===e.ap)):0!==this.al.hM.length?t.hM.some((t=>this.al.hM.some((e=>t.ap===e.ap)))):0===t.hM.length||!this.MX}FX(t){return this.UX.FX(t),this.al=t,Promise.resolve()}HX(t){return!1}async Ou(){this.Lo(),this.nB.removeEventListener("loadedmetadata",this.VX);for(const t of tR)this.nB.removeEventListener(t,this.WX);await this.qX.bn(),this.zX(),await this.UX.ir(),await this.XX(void 0)}GX(t){t!==this.QX&&(this.QX=t,t?this.KX.Lf(void 0):this.KX=new $i)}LX(t){return this.qX.GN((()=>this.XX(t)))}async XX(t){if(t&&!this.nB.src)throw new ss(n.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.nB.src)throw new ss(n.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");t&&!this.QX&&await this.KX.jf;const e=this.hN;e&&(await e.aN(this.nB),this.hN=void 0),t&&(await t.kn(this.nB),this.hN=t)}ba(t){return this.qX.GN((()=>this.jX(t)))}jX(t){this.GX(!1);const e=this.KO.$u;if(function(t){if(void 0!==a.ManagedMediaSource&&t instanceof a.ManagedMediaSource)return!0;if("undefined"!=typeof MediaSource&&t instanceof MediaSource)return!0;return!1}(t))if(function(t){return"srcObject"in t&&fh.KP&&fh.UR>=17}(this.nB))try{this.nB.srcObject=t}catch(e){this.nB.src=URL.createObjectURL(t)}else this.nB.src=URL.createObjectURL(t);else this.nB.src=t;this.KO.$u=e}YX(t){return this.qX.GN((()=>this.ZX(t)))}ZX(t){this.jX(t),this.nB.load()}zX(){this.GX(!1),nS(this.nB)}async JX(){this.hN&&await this.hN.ir()}constructor(t,e,i,s){super(),this.QX=!1,this.KX=new $i,this.MX=!1,this.qX=new Uo,this.hN=void 0,this.VX=()=>{this.MX=!0},this.WX=()=>{this.GX(!0)},this.al=t,this.KO=e,this.nB=e.JO,this.UX=i,this.AN=s,this.nB.addEventListener("loadedmetadata",this.VX);for(const t of tR)this.nB.addEventListener(t,this.WX)}};var eR,iR=class extends ia{get bl(){return d.Sn(this.nB.buffered)}get ct(){return this.nB.duration}get $X(){const t=this.ct;if(!isFinite(t))return!1;const e=this.bl;if(0===e.U)return!1;return t-e.Pn(e.U-1)<ii}get Mg(){return this.nB.preload}set Mg(t){this.nB.preload=t}get kl(){return d.Sn(this.nB.seekable)}get tG(){return this.bl}get eG(){if(Qt(this.nB)&&(this.nB.videoWidth>0||this.nB.videoHeight>0))return this.bl}async Jq(){const t=this.xb;switch(t.aM){case ya.Vm:case ya.Wm:this.nB.setAttribute("crossorigin",t.aM);break;case ya.Hm:default:this.nB.removeAttribute("crossorigin")}void 0!==t.Mg?this.nB.preload=t.Mg:this.nB.preload=D.EO,void 0!==t.uM?this.nB.title=t.uM:iS(this.nB),await this.ba(t.Pw),this.UX.On(this,t)}OX(t){return!1}FX(t){return Promise.resolve(void 0)}async Ou(){iS(this.nB),await super.Ou()}static iG(t,e){return!!e.canPlayType&&Boolean(e.canPlayType(t.rM))}},bc=class extends Xi{constructor(t){super(o.Rf),this.currentTime=t}},os=class extends Xi{constructor(){super(o.Ef)}};(eR||(eR={})).sG="nG";var sR=class extends Xi{constructor(t){super("nG"),this.rG=t}},vo=class extends Et{get hG(){return this.oG}aG(t,e){const i=new d([t,e]);this.oG=this.oG.Hl(i),this.To(new sR(i))}uG(t,e){this.oG=this.oG.bF(new d([t,e]))}ir(){this.oG=d.Nl()}bn(){this.Lo()}constructor(...t){super(...t),this.oG=d.Nl()}};var nR,rR=class{start(t){this.lX=t,this.cG()&&this.lG()}pull(){this.Cd.length>0?this.dG():this.fG=!0,this.cG()&&this.lG()}cancel(t){return Ce(this.Cd),this.xd=0,this.fG=!1,this.wd.cancel(t)}dG(){if(0===this.Cd.length)return;const t=this.Cd;this.Cd=[],this.xd=0,this.fG=!1,this.lX.enqueue(t)}cG(){if(this.fG)return!0;return this._G-this.xd>0}lG(){if(this.gG)return;const t=this.wd.read().then(this.vG).catch(this.wG);this.gG=t;const e=()=>{this.gG===t&&(this.gG=void 0)};t.then(e,e)}constructor(t,{size:e=(()=>1),highWaterMark:i=1}){this.Cd=[],this.xd=0,this.lX=void 0,this.fG=!1,this.gG=void 0,this.vG=t=>t.done?(this.dG(),void this.lX.close()):(this.Cd.push(t.value),this.xd+=this.mG(t.value),this.fG&&this.dG(),this.cG()?this.wd.read().then(this.vG):void 0),this.wG=t=>{this.dG(),this.lX.error(t)},this.wd=t.getReader(),this.mG=e,this._G=i}},hR=class{pG(t){this.yG.push(t),this.iA+=t.byteLength}AG(t){if(this.iA<=t)return this.bG();const e=this.yG;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.slice(0,s);if(s<e.length&&i<t){const r=t-i;0,n.push(eo(e[s],0,r)),i+=r}return{yG:n,iA:i}}TG(t){const e=this.AG(t);return 1===e.yG.length?e.yG[0]:av(e.yG,e.iA)}bG(){return{yG:this.yG,iA:this.iA}}SG(t){if(this.iA<=t)return this.kG();const e=this.yG;let i=0,s=0;for(;s<e.length&&i+e[s].byteLength<=t;)i+=e[s].byteLength,s++;const n=e.splice(0,s);if(e.length>0&&i<t){const s=t-i;0,n.push(eo(e[0],0,s)),e[0]=eo(e[0],s),i+=s}return this.iA-=i,{yG:n,iA:i}}EG(t){const e=this.SG(t);return 1===e.yG.length?e.yG[0]:av(e.yG,e.iA)}kG(){const t=this.bG();return this.yG=[],this.iA=0,t}IG(){const t=1===this.yG.length?this.yG[0]:av(this.yG,this.iA);return this.yG=[],this.iA=0,t}constructor(){this.yG=[],this.iA=0}};!function(t){t[t.PG=0]="PG",t[t.CG=1]="CG",t[t.xG=2]="xG"}(nR||(nR={}));var oR=class{DG(t,e){}NG(){}BG(t){this.Cd.pG(t),this.LG(!1)}OG(){this.LG(!0)}MG(){return 0!==this.Pa||0!==this.Cd.iA}LG(t){for(;0!==this.Cd.iA;){if(!t&&this.FG>this.Cd.iA)return;switch(this.Pa){case 0:this.UG(t);break;case 1:this.HG(t);break;case 2:this.VG(t)}}}WG(){this.Pa=0,this.FG=8}UG(t){const e=Sa(this.Cd.TG(this.FG)),i=new Ko,s=Ro.tA(e,i);if(!s.jy)return this.FG=s.sA,void(t&&this.FG>this.Cd.iA&&this.qG(this.Cd.iA));const n=s.eA.Iw;let r=s.eA.iA;0===r&&(r=1/0),this.DG(n,r),this.zG(n)?this.XG(r):this.qG(r)}XG(t){this.Pa=1,this.FG=t}HG(t){const e=Sa(this.Cd.EG(this.FG)),i=new Ko,s=Ro.Yy(e,i,!t);if(!s.jy)throw new nw(i.Au);this.NG(),this.GG(s.Zy),this.WG()}qG(t){this.Pa=2,this.FG=0,this.QG=t}VG(t){const e=this.Cd.SG(this.QG);this.QG-=e.iA;for(const t of e.yG)this.KG(t);(0===this.QG||t&&this.QG===1/0)&&(this.NG(),this.WG())}constructor(){this.Cd=new hR,this.Pa=0,this.FG=0,this.QG=0,this.WG()}};function aR(t){return t instanceof Vb}function uR(t){return t instanceof Ub}function cR(t){return t instanceof Jr||t instanceof ah}function lR(t){return t instanceof cb}function dR(t){return t instanceof VA}function fR(t){return t instanceof xb}function _R(t){return t instanceof Rb}function gR(t){return t instanceof Yb}function vR(t){return t instanceof Ti}function wR(t){return t instanceof Gb}function mR(t){return t instanceof jh}function pR(t,e){const i=pi(t.boxes,wR);if(i&&i.flags.baseDataOffsetPresent)i.baseDataOffset=i.baseDataOffset.add(e);else for(const i of t.boxes)i instanceof jh&&i.flags.dataOffsetPresent&&(i.dataOffset=i.dataOffset+e)}var yR=class extends oR{start(t){this.lX=t}transform(t){this.BG(t)}flush(){this.OG()}zG(t){return t===hs.pp||t===hs.Yp||t===hs._y}GG(t){const e=this.jG(t);this.lX.enqueue(e)}KG(t){this.lX.enqueue(t)}jG(t){const e=ou(t.Ny.Ny);switch(t.Iw){case"moov":return this.YG(e);case"sidx":return this.ZG(e);case"moof":return this.JG(e)}return e}get $G(){if(void 0===this.tQ)throw new v("Expected to have found a movie header timescale.");return this.tQ}eQ(t){const e=this.iQ.get(t);if(void 0===e)throw new v("Expected to have found a media header timescale for track ID "+t+".");return e}YG(t){const e=_T(t);for(let t=0;t<e.boxes.length;t++){const i=e.boxes[t];i instanceof Bb?e.boxes[t]=this.sQ(i):i instanceof Lb?e.boxes[t]=this.nQ(i):i instanceof Ub&&this.rQ(i)}for(const t of e.boxes)t instanceof xb&&this.hQ(t);return e.serialize().join()}sQ(t){this.tQ=t.timescale;const e=rn(Te.fromNumber(t.duration,!0),this.$G,this.oQ);return 0!==e.getHighBits()?this.nQ(function(t){return new Lb({creation:Te.fromNumber(t.creationTime,!0),modification:Te.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Te.fromNumber(t.duration,!0)},t.nextTrackId,{rate:t.rate,volume:t.volume,matrix:t.matrix},t.flags)}(t)):(t.timescale=this.oQ,t.duration=e.toInt(),t)}nQ(t){return this.tQ=t.timescale,t.timescale=this.oQ,t.duration=rn(t.duration,this.$G,this.oQ),t}rQ(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof Jr?(e=s.trackId,t.boxes[i]=this.aQ(s)):s instanceof ah?(e=s.trackId,t.boxes[i]=this.uQ(s)):s instanceof cb?this.cQ(s,e):s instanceof $A&&this.lQ(s)}}aQ(t){const e=rn(Te.fromNumber(t.duration,!0),this.$G,this.oQ);return 0!==e.getHighBits()?this.uQ(function(t){return new ah({creation:Te.fromNumber(t.creationTime,!0),modification:Te.fromNumber(t.modificationTime,!0),duration:Te.fromNumber(t.duration,!0)},t.trackId,t.volume,t.width,t.height,{layer:t.layer,alternateGroup:t.alternateGroup,matrix:t.matrix})}(t)):(t.duration=e.toInt(),t)}uQ(t){return t.duration=rn(t.duration,this.$G,this.oQ),t}cQ(t,e){for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof hb?t.boxes[i]=this.dQ(s,e):s instanceof ob&&(t.boxes[i]=this.fQ(s,e))}}dQ(t,e){this.iQ.set(e,t.timescale);const i=rn(Te.fromNumber(t.duration,!0),t.timescale,this.oQ);return 0!==i.getHighBits()?this.fQ(function(t){return new ob({creation:Te.fromNumber(t.creationTime,!0),modification:Te.fromNumber(t.modificationTime,!0),scale:t.timescale,duration:Te.fromNumber(t.duration,!0)},t.language,t.flags)}(t),e):(t.timescale=this.oQ,t.duration=i.toInt(),t)}fQ(t,e){return this.iQ.set(e,t.timescale),t.timescale=this.oQ,t.duration=rn(t.duration,t.timescale,this.oQ),t}lQ(t){for(const e of t.boxes)e instanceof YA?this._Q(e):e instanceof ZA&&this.gQ(e)}_Q(t){for(const e of t.entries)e.mediaTime=co(e.mediaTime,this.$G,this.oQ),e.segmentDuration=co(e.segmentDuration,this.$G,this.oQ)}gQ(t){for(const e of t.entries)e.mediaTime=rn(e.mediaTime,this.$G,this.oQ),e.segmentDuration=rn(e.segmentDuration,this.$G,this.oQ)}hQ(t){for(let e=0;e<t.boxes.length;e++){const i=t.boxes[e];i instanceof Rb?this.vQ(i):i instanceof Eb?t.boxes[e]=this.wQ(i):i instanceof Ib&&(t.boxes[e]=this.mQ(i))}}vQ(t){const e=this.eQ(t.trackId);t.defaultSampleDuration=co(t.defaultSampleDuration,e,this.oQ)}wQ(t){const e=rn(Te.fromNumber(t.fragmentDuration,!0),this.$G,this.oQ);return 0!==e.getHighBits()?this.mQ(function(t){return new Ib(Te.fromNumber(t.fragmentDuration,!0),t.flags)}(t)):(t.fragmentDuration=e.toInt(),t)}mQ(t){return t.fragmentDuration=rn(t.fragmentDuration,this.$G,this.oQ),t}ZG(t){let e=gT(t);return e=e instanceof iT?this.pQ(e):this.yQ(e),e.serialize().join()}pQ(t){const e=t.timescale,i=rn(Te.fromNumber(t.earliestPresentationTime,!0),e,this.oQ);if(0!==i.getHighBits())return this.yQ(function(t){return new sT(t.referenceId,t.timescale,Te.fromNumber(t.earliestPresentationTime,!0),Te.fromNumber(t.firstOffset,!0),t.references,t.flags)}(t));t.timescale=this.oQ,t.earliestPresentationTime=i.toInt();for(const i of t.references)i.subsegmentDuration=co(i.subsegmentDuration,e,this.oQ);return t}yQ(t){const e=t.timescale;t.timescale=this.oQ,t.earliestPresentationTime=rn(t.earliestPresentationTime,e,this.oQ);for(const i of t.references)i.subsegmentDuration=co(i.subsegmentDuration,e,this.oQ);return t}JG(t){const e=vT(t),i=e.getSize();for(const t of e.boxes)t instanceof Ti&&this.AQ(t);const s=e.getSize();if(s!==i){const t=s-i;for(const i of e.boxes)i instanceof Ti&&pR(i,t)}return e.serialize().join()}AQ(t){let e;for(let i=0;i<t.boxes.length;i++){const s=t.boxes[i];s instanceof Gb?(e=this.eQ(s.trackId),this.bQ(s,e)):s instanceof ch?t.boxes[i]=this.TQ(s,e):s instanceof zb?t.boxes[i]=this.SQ(s,e):s instanceof jh&&this.kQ(s,e)}}bQ(t,e){void 0!==t.defaultSampleDuration&&(t.defaultSampleDuration=co(t.defaultSampleDuration,e,this.oQ))}TQ(t,e){const i=rn(Te.fromNumber(t.baseMediaDecodeTime,!0),e,this.oQ);return 0!==i.getHighBits()?this.SQ(function(t){return new zb(Te.fromNumber(t.baseMediaDecodeTime,!0),t.flags)}(t),e):(t.baseMediaDecodeTime=i.toInt(),t)}SQ(t,e){return t.baseMediaDecodeTime=rn(t.baseMediaDecodeTime,e,this.oQ),t}kQ(t,e){let i=0,s=0;for(const n of t.samples){if(void 0!==n.duration){s+=n.duration;const t=co(s,e,this.oQ);n.duration=t-i,i=t}void 0!==n.compositionTimeOffset&&(n.compositionTimeOffset=AR(n.compositionTimeOffset,e,this.oQ))}}constructor(t){super(),this.iQ=Yh(),this.oQ=t}};function AR(t,e,i){return Te.fromInt(t,!1).multiply(i).divide(e).toNumber()}function co(t,e,i){return Te.fromInt(t,!0).multiply(i).divide(e).toNumber()}function rn(t,e,i){return zi.Ek(t).Yk(zi.Ik(i,!0)).tE(zi.Ik(e,!0)).Uk()}var bR,TR,SR,kR=class{EQ(t){return t.pipeThrough(new Ka(this.IQ))}constructor(t){this.IQ=new yR(t)}};function ER(t,e,i){const s=Go(t,e);if(s!==i)throw new p("Expected descriptor with tag "+i+", but found "+s)}function IR(t,e){ER(t,e,3);const i=PR(t,e),s=e.Au+i,n=Qh(t,e),r=Go(t,e),h=0!=(64&r),o=0!=(32&r),a=31&r;let u,c,l;if(0!=(128&r)&&(u=Qh(t,e)),h){c=wc(t,e,Go(t,e))}o&&(l=wc(t,e,2));const d=function(t,e){ER(t,e,4);const i=PR(t,e),s=e.Au+i,n=Go(t,e),r=Go(t,e),h=r>>2,o=0!=(2&r),a=Fv(t,e,3),u=As(t,e),c=As(t,e);let l;if(e.Au<s){const i=function(t,e){return t.getUint8(e.Au)}(t,e);5===i&&(l=function(t,e){ER(t,e,5);const i=PR(t,e),s=tl(t,e,i);return{RQ:5,CQ:s}}(t,e))}return e.gc(s),{RQ:4,xQ:n,DQ:h,NQ:o,BQ:a,LQ:u,OQ:c,MQ:l}}(t,e);return e.gc(s),{RQ:3,o:n,FQ:u,TI:c,UQ:a,HQ:l,VQ:d}}function PR(t,e){let i=0;for(let s=0;s<4;s++){const s=Go(t,e);if(i=i<<7|127&s,!(128&s))break}return i}function RR(t,e){const i=Go(t,e),s=Go(t,e),n=Go(t,e),r=Go(t,e),h=3&Go(t,e),o=31&Go(t,e),a=[];for(let i=0;i<o;i++){const i=Qh(t,e);a.push(tl(t,e,i))}const u=Go(t,e),c=[];for(let i=0;i<u;i++){const i=Qh(t,e);c.push(tl(t,e,i))}return{WQ:i,qQ:s,zQ:n,XQ:r,GQ:h,QQ:a,KQ:c}}function Jt(t,e,i){if(i&&e.byte>=i)return;const s=t.RC(e.byte);return e.byte+=1,s}function CR(t,e){return function(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=256*s+Jt(t,e);return s}(t,e,2)}!function(t){t[t.jQ=3]="jQ",t[t.YQ=4]="YQ",t[t.ZQ=5]="ZQ"}(bR||(bR={})),function(t){t[t.JQ=64]="JQ",t[t.$Q=103]="$Q",t[t.tK=107]="tK"}(TR||(TR={})),function(t){t[t.eK=0]="eK",t[t.iK=1]="iK",t[t.$Q=2]="$Q",t[t.sK=5]="sK",t[t.nK=34]="nK"}(SR||(SR={}));var xR,DR=class t{rK(t){this.hK=this.hK.concat(t.hK),this.oK+=t.U}aK(t,e,i){const s=this.oK,n=i-e;n>0&&(this.hK.push({uK:e,cK:i,lK:n,dK:s,fK:t}),this.oK+=n)}RC(t){for(const e of this.hK)if(e.dK<=t&&t<e.dK+e.lK)return e.fK[t+e.uK-e.dK]}_K(t,e){let i=e;for(const e of this.hK){const s=e.cK;for(let n=e.uK;n<s;n+=1,i+=1)t[i]=e.fK[n]}return i}get U(){return this.oK}set U(t){const e=this.hK;let i=this.oK-t;if(!(t>=this.oK))if(this.oK=t,0!==t)for(let t=e.length-1;t>=0;t-=1){const s=e[t];if(i<=s.lK)return s.cK-=i,s.lK-=i,void(e.length!==t+1&&(e.length=t+1));i-=s.lK}else e.length=0}get Ny(){const t=new Array(this.oK);let e=0;for(const i of this.hK){const s=i.cK;for(let n=i.uK;n<s;n+=1,e+=1)t[e]=i.fK[n]}return t}gK(){const t=new x(this.oK);let e=0;for(const i of this.hK){const s=i.cK;for(let n=i.uK;n<s;n+=1,e+=1)t[e]=i.fK[n]}return t}Iy(e){const i=new t;for(const t of this.hK)i.aK(t.fK,t.uK,t.cK);return i.WE=e||Me({},this.WE),i}constructor(){this.oK=0,this.hK=[],this.WE={}}},NR=[128,64,32,16,8,4,2,1];function qh(t,e){const i=w.floor(e.bit/8),s=0==(t.RC(i)&NR[e.bit%8])?0:1;return e.bit+=1,s}function BR(t,e,i){let s=0,n=i;for(;n>0;)n-=1,s=2*s+qh(t,e);return s}function Vc(t,e){let i=0;for(;0===qh(t,e)&&i<32;)i+=1;return BR(t,e,i)+2**i-1}function LR(t,e){const i=Vc(t,e);return 1&i?w.floor((i+1)/2):-w.floor(i/2)}function OR(t,e){const i=[],s={byte:1};let n;do{i.push(FR(t,e,s)),n=e.RC(s.byte)}while(void 0!==n&&128!==n);return i}function MR(t,e){let i,s=0;do{i=Jt(t,e),s+=i}while(255===i);return s}function FR(t,e,i){const s=MR(e,i),n=MR(e,i),r=i.byte,h=r+n;return i.byte=h,{vK:t,wK:s,mK:n,pK:r,yK:h,AK:e}}!function(t){t[t.bK=1]="bK",t[t.TK=2]="TK",t[t.SK=3]="SK",t[t.kK=4]="kK",t[t.EK=5]="EK",t[t.IK=6]="IK",t[t.PK=7]="PK",t[t.RK=8]="RK",t[t.CK=9]="CK"}(xR||(xR={}));var UR=[void 0,[1,1],[12,11],[10,11],[16,11],[40,33],[24,11],[20,11],[32,11],[80,33],[18,11],[15,11],[64,33],[160,99],[4,3],[3,2],[2,1]];function HR(t,e,i){let s=8,n=8;for(let r=0;r<i;r+=1){if(0!==n){n=(s+LR(t,e)+256)%256}s=0===n?s:n}}var VR=class{xK(){const t=this.DK;let e=w.max(0,this.NK+t.length-2);const i=this.BK,s=i.U;let n=0;for(;e<s;e+=1){const s=i.RC(e);0===s?n+=1:(3===s&&n>=2&&t.push(e),n=0)}this.NK=e-t.length}LK(t){const e=this.DK;let i=t;for(const t of e){if(!(t<=i))return i;i+=1}return i}RC(t){if(!(t>this.BK.U))return t>this.NK&&this.xK(),this.BK.RC(this.LK(t))}constructor(t){this.DK=[],this.NK=0,this.BK=t}};function WR(t){const e=new VR(t);let i,s,n,r,h,o,a=0,u=0,c=0,l=0;const d=e.RC(1),f={bit:32};if(Vc(e,f),100===d||110===d||122===d||144===d){const t=Vc(e,f);3===t&&(i=qh(e,f)),Vc(e,f),Vc(e,f),qh(e,f);if(1===qh(e,f))for(let i=0;i<(3!==t?8:12);i+=1){1===qh(e,f)&&HR(e,f,i<6?16:64)}}const _=Vc(e,f),g=Vc(e,f);if(0===g)Vc(e,f);else if(1===g){qh(e,f),LR(e,f),LR(e,f);const t=Vc(e,f);for(let i=0;i<t;i+=1)LR(e,f)}Vc(e,f),qh(e,f);const v=Vc(e,f),m=Vc(e,f),p=qh(e,f);0===p&&qh(e,f),qh(e,f);1===qh(e,f)&&(a=Vc(e,f),u=Vc(e,f),c=Vc(e,f),l=Vc(e,f));if(1===qh(e,f)){if(1===qh(e,f)){const t=BR(e,f,8);if(255===t)s=BR(e,f,16),n=BR(e,f,16);else{const e=UR[t];e&&(s=e[0],n=e[1])}}1===qh(e,f)&&qh(e,f);if(1===qh(e,f)){BR(e,f,3),qh(e,f);1===qh(e,f)&&(BR(e,f,8),BR(e,f,8),BR(e,f,8))}1===qh(e,f)&&(Vc(e,f),Vc(e,f)),r=qh(e,f),1===r&&(h=BR(e,f,32),o=BR(e,f,32),qh(e,f))}return{width:w.floor(16*(v+1)-2*a-2*u),height:w.floor((2-p)*(m+1)*16-2*c-2*l),eT:s,iT:n,MK:r?o/(2*h):void 0,FK:i,UK:_}}function qR(t){const e=uo(Ue.uA(t),hs.pp);if(!e)return;const i=e.eA.IA,s=[];for(const t of e.Z){const e=t.eA.MA,i=t.NA.eA.IA;let o,a,u;for(const e of t.NA.zA.QA.jA.ZA){const t=zR(e);var n,r,h;if(t)o=null!=(n=t.HK)?n:o,a=null!=(r=t.VK)?r:a,u=null!=(h=t.WK)?h:u}s.push({MA:e,IA:i,HK:o,VK:a,WK:u})}return{IA:i,Z:s}}function zR(t){let e,i,s;if(t.Iw===hs.Dp){var n;const i=RR(Sa(t.Db.Ny),new Ko);e=function(t){return"avc1."+XR(t.qQ,2)+XR(t.zQ,2)+XR(t.XQ,2)}(i),s=null==(n=function(t){if(0===t.QQ.length)return;const e=t.QQ[0],i=new DR;return i.aK(e,0,e.byteLength),WR(i)}(i))?void 0:n.MK}else if(t.Iw===hs.Bp||t.Iw===hs.Lp){const i=function(t,e){const i=e.xy(),s=qo(t,i,8),n=qo(t,i,2),r=qo(t,i,1),h=qo(t,i,5),o=qo(t,i,32),a=[];for(let e=0;e<6;e++)a.push(qo(t,i,8));const u=qo(t,i,8);i.Ey(4);const c=qo(t,i,12);i.Ey(6);const l=qo(t,i,2);i.Ey(6);const d=qo(t,i,2);i.Ey(5);const f=qo(t,i,3);i.Ey(5);const _=qo(t,i,3),g=qo(t,i,16),v=qo(t,i,2),w=qo(t,i,3),m=qo(t,i,1),p=qo(t,i,2),y=qo(t,i,8),A=[];for(let e=0;e<y;e++){const e=qo(t,i,1);i.Ey(1);const s=qo(t,i,6),n=qo(t,i,16),r=[];for(let e=0;e<n;e++){const e=qo(t,i,16),s=tl(t,new Ko(i.Au>>3),e);i.Ey(8*e),r.push({qK:e,zK:s})}A.push({XK:e,GK:s,QK:n,KK:r})}return{WQ:s,jK:n,YK:r,ZK:h,JK:a,$K:u,tj:c,ej:l,ij:o,sj:d,nj:f,rj:_,hj:g,aj:w,uj:m,cj:v,GQ:p,lj:y,dj:A}}(Sa(t.Ob.Ny),new Ko);e=function(t,e){let i=t.toString()+".";switch(e.jK){case 0:break;case 1:i+="A";break;case 2:i+="B";break;case 3:i+="C";break;default:return}switch(i+=e.ZK.toString()+".",i+=function(t){let e=t;return e=e>>>1&1431655765|(1431655765&e)<<1,e=e>>>2&858993459|(858993459&e)<<2,e=e>>>4&252645135|(252645135&e)<<4,e=e>>>8&16711935|(16711935&e)<<8,e=e>>>16|e<<16,e}(e.ij).toString(16)+".",e.YK){case 0:i+="L";break;case 1:i+="H";break;default:return}i+=e.$K.toString();const s=e.JK.reduce(((t,e)=>0===t?e:e+1),0);for(let t=0;t<s;t++)i+="."+e.JK[t].toString(16).toUpperCase();return i}(t.Iw,i)}else if(t.Iw===hs.Mp){const i=function(t,e){const i=e.xy(),s=qo(t,i,8);i.Ey(24);const n=qo(t,i,8),r=qo(t,i,8),h=qo(t,i,4),o=qo(t,i,3),a=Y(t,i),u=qo(t,i,8),c=qo(t,i,8),l=qo(t,i,8),d=qo(t,i,16),f=new Array(8);for(let e=0;e<d;e++)f[e]=qo(t,i,8);return{WQ:s,_j:n,gj:r,vj:h,wj:o,mj:a,Zb:u,Jb:c,$b:l,pj:d,yj:f}}(Sa(t.Fb.Ny),new Ko);e=function(t,e){let i=t.toString()+".";return i+="0"+e._j+".",i+=Xc(""+e.gj,2,"0")+".",i+=Xc(""+e.vj,2,"0")+".",i+=Xc(""+e.wj,2,"0")+".",i+=Xc(""+e.Zb,2,"0")+".",i+=Xc(""+e.Jb,2,"0")+".",i+=Xc(""+e.$b,2,"0")+".",i+="0"+e.mj,i}(t.Iw,i)}else if(t.Iw===hs.Up){const i=function(t,e){const i=e.xy();i.Ey(1);const s=qo(t,i,7),n=qo(t,i,3),r=qo(t,i,5),h=Y(t,i),o=Y(t,i),a=Y(t,i),u=Y(t,i),c=Y(t,i),l=Y(t,i),d=qo(t,i,2);i.Ey(3);const f=Y(t,i);let _;return f?_=qo(t,i,4):i.Ey(4),{oA:s,Aj:n,bj:r,Tj:h,Sj:o,Ej:a,Ij:u,Pj:c,Rj:l,Cj:d,xj:f,Dj:_}}(Sa(t.Vb.Ny),new Ko);e=function(t,e,i){let s=t.toString()+".";if(s+=e.Aj+".",s+=""+Xc(""+e.bj,2,"0"),s+=(0===e.Tj?"M":"H")+".",s+=(1===e.Ej?12:10)+".",s+=(1===e.Aj?0:e.Ij)+".",s+=""+e.Pj+e.Rj+(1===e.Pj&&1===e.Rj?e.Cj:"0"),i&&i.Yb===un.ON_SCREEN_COLOURS){const t=i;s+="."+Xc(""+t.Zb,2,"0")+"."+Xc(""+t.Jb,2,"0")+"."+Xc(""+t.$b,2,"0")+"."+(t.tT?1:0)}return s}(t.Iw,i,t.Wb)}else{if(t.Iw!==hs.qp)return(t.Iw===hs.jp||t.Iw===hs.Kp)&&t.Xb?zR(t.Xb):void 0;i=function(t){const e=t.VQ;switch(e.xQ){case TR.JQ:return function(t){var e;if(!(null==(e=t.MQ)?void 0:e.CQ))return"mp4a.40";const i=function(t,e){let i=qo(t,e,5);31===i&&(i=32+qo(t,e,6));const s=qo(t,e,4);let n;return 15===s&&(n=qo(t,e,24)),{Nj:i,Bj:s,Lj:n,Oj:qo(t,e,4)}}(Sa(t.MQ.CQ),new _r);return"mp4a.40."+i.Nj}(e);case TR.$Q:return"mp4a.40.2";case TR.tK:return"mp4a.40.34"}}(IR(Sa(t.kb.Ny),new Ko))}return{HK:e,VK:i,WK:s}}function XR(t,e){const i=t.toString(16);return Xc(i,e,"0")}function GR(t,e){const i=Ue.uA(Sa(t)),s=function(t,e){let i;for(const n of t.Z){var s;const t=null==(s=n.vT)?void 0:s.vT;if(t){const s=n.eA.MA,r=pi(e.Z,(t=>t.MA===s)),h=yi.Ek(t,r.IA);i&&!h.vk(i)||(i=h)}}return i}(uo(i,hs.Yp),e),n=uo(i,hs.oy);return{PS:s.hk(),Mj:n.Ny}}var QR=fh.MR,KR=class extends Et{get Qq(){return this.iz}set Qq(t){this.iz=t}get Zq(){return this.rz}set Zq(t){this.rz=t}get ua(){return this.Fj||this.Uj.updating}Hj(t,e,i){switch(t.Iw){case F.xX:case F.FI:return this.Vj((i=>this.Wj(t,e,i)),i);case F.DX:throw new v("Opaque segments are not supported on web.")}}qj(t,e){switch(t.Iw){case F.xX:return this.Vj((e=>this.zj(t,e)),e);case F.FI:throw new v("Streaming initialization segments are not supported on web.");case F.DX:throw new v("Opaque initialization segments are not supported on web.")}}async zj(t,e){this.Xj?this.Gj=qR(Sa(t.Ny)):(await this.Qj(t,void 0,e),QR&&(this.Kj=!1,this.jj=t))}async Wj(t,e,i){QR&&this.Kj&&this.jj&&await this.zj(this.jj,i);try{if(k_(i),this.Xj&&this.Gj){const n=await async function(t,e){switch(t.Iw){case F.xX:return t;case F.FI:{const i=await kt(t.Ny,e);return k_(e),{Iw:F.xX,Ny:new x(i)}}case F.DX:throw new v("MediaBufferWrapper - Cannot convert opaque SegmentData to ArraySegmentData.")}}(t,i),r=GR(n.Ny,this.Gj);var s;t={Iw:F.xX,Ny:r.Mj},e=Me({},e,{NE:r.PS+(null!=(s=e.NE)?s:0)})}await this.Qj(t,e,i),this.To(new Xi(Ou.RX))}finally{t.Iw===F.FI&&t.Ny.cancel(new At).catch(Qo)}}async Qj(t,e,i){switch(k_(i),e&&await this.Yj(e),t.Iw){case F.xX:if(this.Zj){const e=this.Zj.EQ(VI(t.Ny));return await this.Jj(e,i)}return await this.$j(t.Ny);case F.FI:if(this.Zj){const e=this.Zj.EQ(t.Ny);return await this.Jj(e,i)}return await this.Jj(t.Ny,i)}}async Jj(t,e){const i=this.tY.bl,s=function(t,e){return void 0===e&&(e=new xf({highWaterMark:1/0})),new Sf(new rR(t,e),{highWaterMark:0})}(t),n=s.getReader();let r=!1;try{for(;;){const t=await E_(n.read(),e);if(t.done){r=!1;break}k_(e);const i=ac(t.value);r=!0,await this.$j(i)}}catch(t){if(n.cancel(t).catch(Qo),r){await this.eY();const t=this.tY.bl.Cn(i.wF());for(let e=0;e<t.U;e++)await this.iY(t.Tn(e),t.Pn(e))}throw t}}sY(t,e){return this.Vj((()=>this.nY(t,e)))}async nY(t,e){this.Uj.appendWindowStart===t&&this.Uj.appendWindowEnd===e||(await this.eY(),this.Uj.appendWindowStart=0,this.Uj.appendWindowEnd=e,this.Uj.appendWindowStart=t)}async Yj(t){if(this.Uj.timestampOffset!==t.NE)try{this.Uj.timestampOffset=t.NE}catch(e){await this.eY(),this.Uj.timestampOffset=t.NE}}async $j(t){this.Uj.appendBuffer(t),this.rY=!0,await this.hY()}oY(t,e,i){return this.Vj((i=>this.iY(t,e,i)),i)}async iY(t,e,i){k_(i),this.Uj.remove(t,e),await this.hY()}hY(){const t=this.tY.bl;return new Promise(((e,i)=>{let s,n=!1,r=()=>{n=!0},h=()=>{n=!1,s="error"},o=()=>{n=!1,s="aborted"},a=()=>{u(),n&&!s?(t.PF(this.tY.bl)||this.To(new Xi(Ou.RX)),e()):i(new v(s))},u=()=>{this.Uj.removeEventListener("update",r),this.Uj.removeEventListener("error",h),this.Uj.removeEventListener("abort",o),this.Uj.removeEventListener("updateend",a)};this.Uj.addEventListener("update",r),this.Uj.addEventListener("error",h),this.Uj.addEventListener("abort",o),this.Uj.addEventListener("updateend",a)}))}aY(){return this.Vj((()=>this.eY()))}async eY(){if(this.uY.Nc===Gi.vI){QR&&(this.Kj=!0),this.Uj.updating&&(this.Fj=!0);try{this.Uj.abort()}catch(t){0,this.Fj=!1}this.ua&&await this.hY().catch(Qo)}}cY(){return"function"==typeof this.Uj.changeType}FX(t){if(this.lY(),this.uY.Nc===Gi.dY)return;var e;this.fY=t;const i=null!=(e=this.uY._Y(t.rM))?e:t.rM;this.Xj=jR(t.rM,this.gY),this.cY()&&!N(this.gY,i)&&(this.gY=i,this.Uj.changeType(this.gY))}vY(){this.uY.Nc!==Gi.Pf||this.wY||this.ua||(this.Uj.timestampOffset=this.Uj.timestampOffset,this.uY.mY())}async Vj(t,e){this.lY();const i=new Hi;i.U_(this.pY.M_),e&&i.U_(e);try{this.wY=t(i.M_),await this.wY,this.uY.mY(),this.ua&&await this.hY()}finally{this.wY=void 0,i.Ou()}}lY(){if(this.wY)throw new v("Internal error")}async Ou(){this.Lo(),this.pY.Jl(),this.wY&&(await this.wY.catch(Qo),this.wY=void 0),this.Uj.removeEventListener("updateend",this.yY),this.Uj.removeEventListener("bufferedchange",this.AY)}constructor(t,e,i,s,n){var r;if(super(),this.iz=20,this.rz=30,this.Fj=!1,this.rY=!1,this.wY=void 0,this.pY=new Hi,this.Kj=!1,this.jj=void 0,this.Xj=!1,this.Gj=void 0,this.yY=()=>{this.Fj=!1},this.AY=t=>{t.removedRanges&&this.To(new Xi(Ou.RX))},this.uY=e,this.tY=t,this.Uj=i,this.Uj.addEventListener("updateend",this.yY),this.Uj.addEventListener("bufferedchange",this.AY),this.fY=s,this.gY=n,this.Xj=jR(s.rM,n),null==(r=e.xb)?void 0:r.bY){var h;const t=null!=(h=e.xb.TY)?h:1e5;this.Zj=new kR(t)}}};function jR(t,e){return Jo(t,"audio/mp4")&&Jo(e,"audio/mpeg")}var YR=class{get bl(){if(this.SY.Nc===Gi.dY)return d.Nl();let t=d.Sn(this.Uj.buffered).Cn(new d([0,1/0]));const e=this.kY;return void 0!==e&&t.U>0&&t.Pn(t.U-1)===e&&(t=t.Hl(d.OF(e))),t}$X(){return!!this.kY&&this.bl.gF().br(this.kY)}EY(){const t=this.bl;this.kY=t.U>0?t.Pn(t.U-1):0,this.SY.IY()}vY(){this.kY=void 0}constructor(t,e){this.kY=void 0,this.SY=e,this.Uj=t}};function ZR(t){const e=t.eI("codecs");return e?e.split(",").map((t=>t.trim())):[]}function JR(t,e){const i=$R(t)||tC(t),s=$R(e)||tC(e);return!i&&!s||t===e}function $R(t){return/^(ac-3|dac3|ec-3|dec3|ec\+3|ac-4|dac4)/.test(t)}function tC(t){return/^(dvav|dva1|dvhe|dvh1)/.test(t)}function Ya(t,e){if(t===e)return!0;const i=t.split("."),s=e.split("."),n=i[0];if(n!==s[0])return!1;if("mp4a"===n){const[,t,e]=i,[,n,r]=s;if(t!==n)return!1;if(Number(e)!==Number(r))return!1}return!0}function eC(t,e,i,s,n,r,h){const o=new YR(n,t),a=new KR(o,t,n,i,r);return new iC(t,e,i,s,o,a,h)}var iC=class extends Et{get bl(){return this.tY.bl}get xb(){return this.al}get rM(){return this.BN}get PY(){return this.RY}get CY(){return this.xY.hG}get Qq(){return this.DY.Qq}set Qq(t){this.DY.Qq=t}get Zq(){return this.DY.Zq}set Zq(t){this.DY.Zq=t}get ua(){return this.DY.ua}$X(){return this.tY.$X()}EY(){this.tY.EY()}vY(){this.tY.vY(),this.DY.vY()}NY(t,e){this.xY.aG(t,e)}BY(t,e){this.xY.uG(t,e)}LY(){return this.DY.aY()}Hj(t,e,i){return this.DY.Hj(t,e,i)}qj(t,e,i){return this.DY.qj(t,i)}sY(t,e){return fh._R&&fh.vR<3?this.DY.sY(t,1/0):this.DY.sY(t,e)}async Qu(t,e,i){this.BY(t,e);const s=this.bl;await this.DY.oY(t,e,i);const n=0!==s.U&&0===this.bl.U;(fh.GR||fh.mR)&&n&&this.KO.gc(this.KO.Wu)}OX(t){const e=t.rM;if(this.BN===e)return!0;const i=this.OY.get(e);if(void 0!==i)return i;const s=this.MY(t);return this.OY.set(e,s),s}MY(t){const e=this.uY._Y(t.rM);if(void 0===e)return!1;const i=Vp(this.BN),s=Vp(e),n=ZR(i),r=ZR(s);if(this.DY.cY()){if(!function(t,e){return f_(t,e,JR)}(n,r))return!1}else{if(i.Iw!==s.Iw)return!1;if(!function(t,e){return f_(t,e,Ya)}(n,r))return!1}return!0}async FX(t){const e=t.rM;this.BN!==e&&(this.OY.clear(),this.DY.FX(t),this.BN=e),this.al=t,this.uY.FY()}async Ou(){this.OY.clear(),this.Lo(),this.xY.bn();try{this.DY.pn(Ou.RX,this.Os),await this.DY.Ou()}catch(t){}}constructor(t,e,i,s,n,r,h){super(),this.OY=Wn(),this.uY=t,this.al=i,this.BN=i.rM,this.RY=s,this.KO=e,this.tY=n,this.DY=r,this.xY=h,this.DY.wn(Ou.RX,this.Os)}},js=class{UY(){let t=this.Tn,e=this.Pn;if(this.HY||this.VY){const i=.001*(Ee.V_()-this.WY);this.HY&&(t+=i),this.VY&&(e+=i)}return d.MF(t,e)}constructor(t,e,i=!1,s=!1){this.Tn=t,this.Pn=e,this.HY=i,this.VY=s,this.WY=Ee.V_()}},sC=.5,nC=[o.Ph,o.Ch,o.If,o.Tf,o.im,o.hm,o.Pf,o.Vu,ee.Bf,zn.aa],rC=class{qY(t){this.zY.push(t),t.wn(eR.sG,this.XY)}get hG(){return this.zY.reduce(((t,e)=>t.Hl(e.hG)),d.Nl())}bn(){this.GY(),this.QY.pn(ee.Bf,this.KY),this.KO.pn(o.Rf,this.KY),this.KO.pn(nC,this.jY),this.zY.forEach((t=>t.pn(eR.sG,this.XY))),0!==this.YY&&(Ee.W_(this.YY),this.YY=0),this.ZY=!0}HX(t){if(this.KO.Ic)return!1;if(0!==this.YY)return!1;const e=this.tY.bl,i=e.TF(t);if(i>=0&&t+sC<e.Pn(i))return!1;const s=i>=0?i+1:e.DF(t);if(s<0||s>=e.U)return!1;const n=e.Tn(s);if(d.MF(t,n).bF(this.hG).LF>1)return!1;if(Ee.JY)return this.$Y=this.KO.Wu,this.YY=Ee.q_((()=>{this.$Y===this.KO.Wu&&this.tZ(n),this.YY=0}),250),!0;return!(w.abs(n-t)<=.001)&&(this.tZ(n),!0)}tZ(t){this.KO.gc(t,!1,!0)}eZ(){0!==this.iZ&&(Ee.W_(this.iZ),this.iZ=0),this.KO.pn(o.Lu,this.sZ)}nZ(){0===this.rZ&&(this.eZ(),this.rZ=Ee.hZ(this.oZ,250))}GY(){0!==this.rZ&&(Ee.aZ(this.rZ),this.rZ=0),this.eZ(),this.KO.Fc||(this.uZ=0)}cZ(){return!this.KO.Dc&&!this.KO.Fc&&0!==this.KO.$u&&!this.KO.Ic&&!this.KO.lt&&(this.lZ()||this.QY.Nc>=dw._f)}lZ(){const t=this.KO.Wu,e=this.tY.bl,i=e.TF(t);return-1!==i&&e.Pn(i)>t+sC}dZ(t,e){const i=e.TF(t);return i>-1?e.Pn(i):t}constructor(t,e,i,s){this.tY=t,this.QY=e,this.KO=i,this.ZY=!1,this.zY=[],this.YY=0,this.iZ=0,this.fZ=0,this.$Y=0,this.uZ=0,this.rZ=0,this._Z=1,this.XY=t=>{const e=this.KO.Wu,i=t.rG.br(e),s=t.rG.br(e,sC)&&this.KO.Nc<=dw.Hf;(i||s)&&this.HX(e)},this.KY=T_((t=>{if(this.ZY)return;if(this.QY.Nc<=dw.Hf){const t=this.KO.Wu;this.HX(t)||this.oZ()}}),100),this.sZ=T_((t=>{this.ZY||0===this.rZ&&this.nZ()}),100),this.jY=()=>{this.cZ()?0===this.rZ&&(this.KO.wn(o.Lu,this.sZ),this.iZ=Ee.q_((()=>{this.nZ()}),3500)):this.GY()},this.oZ=()=>{const t=this.fZ,e=this.uZ,i=this.KO.Wu,s=Ee.V_(),n=this.tY.bl;if(t!==i)return this.fZ=i,this.uZ=s,this._Z=1,void(this.gZ=Ee.vZ?2e3:1e3);if(this.cZ()&&0!==n.U&&e>0&&s>e+this.gZ){let t;const e=this.hG.gF().bF(n),s=e.xF(i);if(-1!==s){const n=e.Tn(s);if(n-i<1){const i=e.Pn(s);0,t=i}}var r;if(!t)t=null==(r=this.wZ)?void 0:r.determineStallJumpTarget(),t||(t=i+.01*this._Z,n.br(t)||(t=this.dZ(i,n)));0,this.fZ=t,this._Z++,this.gZ=w.min(2*this.gZ,1e4),this.tZ(t)}},this.QY.wn(ee.Bf,this.KY),this.KO.wn(o.Rf,this.KY),this.KO.wn(nC,this.jY),this.wZ=s,this.gZ=Ee.vZ?2e3:1e3}};function hC(t){const e=[];if(t.mZ&&e.push(t.mZ.bl),t.pZ&&e.push(t.pZ.bl),0===e.length)return d.Nl();let i=0;for(const t of e)t.U>0&&(i=w.max(i,t.Pn(t.U-1)));const s=t.$X;let n=new d([0,i],[!0,s]);for(let t of e)s&&t.U>0&&(t=t.Hl(new d([t.Pn(t.U-1),i],[!0,!0]))),n=n.Cn(t);return n}function ga(t,e,i){const s=t.bl;let n,r=s.TF(e);if(r>=0){if(!(r+1<s.U))return Promise.resolve();n=s.Tn(r+1)}else{if(r=s.DF(e),!(r>=0))return Promise.resolve();n=s.Tn(r)}return t.Qu(n,1/0,i)}function oC(t,e,i){if(!t.br(e)){const s=t.TF(e,i);if(s>=0){const i=t.Tn(s);if(e<i)return i}}return e}var aC=class{yZ(){return new this.AZ}bZ(t){return this.AZ.isTypeSupported(t)}constructor(t){this.AZ=Ns(t)}};function Ns(t){return t&&"function"==typeof fa.ManagedMediaSource?fa.ManagedMediaSource:"function"==typeof fa.MediaSource?fa.MediaSource:void 0}var Gi,uC=fh.bR||fh.kR,cC=fh.DR||fh.MR&&fh.UR>=17;!function(t){t.dY="closed",t.vI="open",t.Pf="ended"}(Gi||(Gi={}));var lC=class extends ia{get mZ(){return this.TZ}get pZ(){return this.SZ}get ct(){if(this.kZ)return this.kZ;const t=this.tM.duration;return t===ne?1/0:t}EZ(t){if(j(t)||t<0)throw new v("Invalid duration");this.IZ()?this.PZ(t):this.kZ=t}PZ(t){const e=t===1/0;if(e&&this.tM.setLiveSeekableRange){const t=2**39;this.tM.setLiveSeekableRange(0,t)}this.tM.duration=e?cC?1/0:ne:t,this.kZ=void 0}get bl(){return uC?hC(this):function(t,e){let i=e;return i.U>0&&t.$X&&(i=i.Hl(d.OF(i.Pn(i.U-1)))),i}(this,d.Sn(this.nB.buffered))}get tG(){var t;return null==(t=this.TZ)?void 0:t.bl}get eG(){var t;return null==(t=this.SZ)?void 0:t.bl}get kl(){return this.RZ.UY().Cn(new d([0,this.ct],[!0,!0]))}CZ(t,e,i,s){this.RZ=new js(t,e,!!i,!!s)}get $X(){return(!this.TZ||this.TZ.$X())&&(!this.SZ||this.SZ.$X())}get Nc(){return this.tM.readyState}async Jq(){const t=this.al,e=pi(t.xZ,(t=>Jo(t.rM,"audio"))),i=pi(t.xZ,(t=>Jo(t.rM,"video")));if(this.nB.disableRemotePlayback=!0,await this.DZ(),e){const t=new vo;var s;this.NZ.qY(t);const i=null!=(s=this._Y(e.rM))?s:e.rM;this.BZ=this.tM.addSourceBuffer(i),this.TZ=eC(this,this.KO,e,Di.yy,this.BZ,i,t),this.TZ.wn(Ou.RX,this.AY)}if(i){const t=new vo;var n;this.NZ.qY(t);const e=null!=(n=this._Y(i.rM))?n:i.rM;this.LZ=this.tM.addSourceBuffer(e),this.SZ=eC(this,this.KO,i,Di.vl,this.LZ,e,t),this.SZ.wn(Ou.RX,this.AY)}this.UX.On(this,t)}async DZ(){await super.YX(this.tM),"open"!==this.Nc&&await dc(this.tM,"sourceopen")}IZ(){if("open"!==this.Nc)return!1;const t=this.TZ&&this.TZ.ua,e=this.SZ&&this.SZ.ua;return!(t||e)}EY(){this.OZ=!0,this.TZ&&this.TZ.EY(),this.SZ&&this.SZ.EY(),this.OZ=!1,this.MZ()}vY(){this.TZ&&this.TZ.vY(),this.SZ&&this.SZ.vY()}OX(t){const e=pi(t.xZ,(t=>Jo(t.rM,"audio"))),i=pi(t.xZ,(t=>Jo(t.rM,"video")));if(this.TZ){if(!e)return!1;if(!this.TZ.OX(e))return!1}else if(e)return!1;if(this.SZ){if(!i)return!1;if(!this.SZ.OX(i))return!1}else if(i)return!1;return!!super.OX(t)}async FX(t){const e=pi(t.xZ,(t=>Jo(t.rM,"audio"))),i=pi(t.xZ,(t=>Jo(t.rM,"video"))),s=[];this.TZ&&s.push(this.TZ.FX(e)),this.SZ&&s.push(this.SZ.FX(i)),await Promise.all(s),await super.FX(t)}async Ou(){if(fh.mR&&await this.JX(),this.TZ){if(await this.TZ.Ou(),this.TZ=void 0,Sh()&&(fh.mR||fh._R))try{this.tM.removeSourceBuffer(this.BZ)}catch(t){}this.BZ=void 0}if(this.SZ){if(await this.SZ.Ou(),this.SZ=void 0,Sh()&&(fh.mR||fh._R))try{this.tM.removeSourceBuffer(this.LZ)}catch(t){}this.LZ=void 0}this.nB.src&&URL.revokeObjectURL(this.nB.src),this.nB.disableRemotePlayback=!1,this.KO.pn([o.If,o.im],this.FZ),this.NZ.bn(),fh._R&&await this.JX(),await super.Ou()}FY(){const t=this.al,e=t.xZ.map((t=>Jo(t.rM,"audio")&&this.TZ?this.TZ.xb:Jo(t.rM,"video")&&this.SZ?this.SZ.xb:t));this.al=Me({},t,{xZ:e})}IY(){this.OZ||this.MZ()}get UZ(){if(!this.$X)return!1;const t=this.bl;return 0!==t.U&&t.Tn(t.U-1)<=this.KO.Wu}MZ(){this.UZ&&this.IZ()&&(this.tM.endOfStream(),this.kZ=void 0,this.To(new Xi(na.sH)),this.KO.AY())}mY(){this.IZ()&&(this.$X?this.MZ():void 0!==this.kZ&&this.PZ(this.kZ))}HX(t){return this.NZ.HX(t)}_Y(t){return dC(this.HZ,t)}static iG(t){const e=Ns(t.VZ);if(void 0===e)return!1;if("function"!=typeof e.isTypeSupported)return!1;const i=new aC(t.VZ);for(const e of t.xZ)if(void 0===dC(i,e.rM))return!1;return!0}constructor(t,e,i,s,n,r=new aC(t.VZ),h){super(t,e,s,n),this.TZ=void 0,this.BZ=void 0,this.SZ=void 0,this.LZ=void 0,this.RZ=new js(0,1/0),this.kZ=void 0,this.OZ=!1,this.FZ=()=>{this.MZ()},this.AY=()=>{this.KO.AY()},this.HZ=r,this.tM=this.HZ.yZ(),this.KO.wn([o.If,o.im],this.FZ),this.NZ=new rC(this,i,this.KO,h)}};function dC(t,e){const i=Vp(e),s="audio/mp4"===i.Iw&&function(t,e){return o_(t,e,((t,e)=>t===e))}(ZR(i),["mp4a.40.34"]);if(t.bZ(e)&&(!s||!fh.MR))return e;if(s){const e=pi(['audio/mp4; codecs="mp3"',"audio/mpeg"],(e=>t.bZ(e)));return void 0!==e?e:void 0}}var qs=class extends Xi{constructor(t){super(o.im),this.currentTime=t}},fC=[o.Il,o.Vu,o.If,o.im,o.Ph,o.Ch],_C=class extends Et{get Wu(){return this.FF}get WZ(){return this.qZ}get Bc(){return this.zZ}get ct(){return this.Zl}get Ic(){return this.Kl}get Dc(){return this.Ql}get Nc(){return this.tf}get Fc(){return this.Yl}get Xu(){return this.UF}set Xu(t){this.Xu!==t&&(this.UF=t,this.To(new Eo(this.Wu,this._l)))}get $u(){return this.HF}set $u(t){this.$u!==t&&(this.HF=t,this.To(new Gs(this.Wu,this.$u)))}get _l(){return this.Qx}set _l(t){this._l!==t&&(this.Qx=t,this.To(new Eo(this.Wu,this._l)))}gc(t,e,i){this.FF!==t&&(this.FF=t,this.qZ=e,i&&!this.Yl?(this.zZ=!0,this.To(new qs(this.Wu))):(this.zZ=!1,this.Yl=!0,this.To(new T(this.Wu))))}jl(){this.Ql||(this.Ql=!0,this.To(new mt(this.Wu)))}dl(){this.Ql&&(this.Ql=!1,this.To(new ds(this.Wu)))}Ou(){this.Lo()}constructor(t,e,i,s,n,r,h,o,a,u,c){super(),this.FF=t,this.Zl=e,this.Kl=i,this.Ql=s,this.Yl=n,this.UF=r,this.HF=h,this.Qx=o,this.tf=a,this.qZ=u,this.zZ=c}};function gC(t){return new _C(t.Wu,t.ct,t.Ic,t.Dc,t.Fc,t.Xu,t.$u,t._l,t.Nc,!1,t.Bc)}function vC(t,e){e.ct===t.ct||j(e.ct)&&j(t.ct)||t.To(new oa(t.ct)),t.Xu=e.Xu,t._l=e._l,t.$u=e.$u,e.Dc?t.jl():t.dl().catch(Qo),e.Wu!==t.Wu||e.Nc>dw.zl&&t.Nc===dw.zl?t.gc(e.Wu,e.WZ,e.Bc):!e.Fc&&t.Fc?t.To(new T(t.Wu)):e.Fc&&!t.Fc&&t.Nc>=dw.Hf&&t.To(new ju(t.Wu)),!e.Ic&&t.Ic&&t.To(new ih(t.Wu))}var pa=class extends Et{get Nc(){return this.Hg()}XZ(t){this.kB!==t&&(this.kB=t,this.To(new Qs(this.KO.Wu,t)))}GZ(){this.XZ(this.Hg())}ir(){this.XZ(dw.zl)}Ou(){this.Lo()}constructor(t){super(),this.kB=dw.zl,this.QZ=()=>{this.GZ()},this.KO=t}},wC=["emptied","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","timeupdate","progress","seeking","seeked"],$s=class extends pa{Hg(){let t=this.KO.JO.readyState;return t>dw.Hf&&this.KO.KZ?dw.Hf:(this.KO.JO.seeking&&t>dw.Jn&&(t=dw.Jn),t)}Ou(){for(const t of wC)this.KO.JO.removeEventListener(t,this.QZ);super.Ou()}constructor(t){super(t);for(const t of wC)this.KO.JO.addEventListener(t,this.QZ)}},mC=class extends pa{Hg(){if(this.KO.JO.readyState===dw.zl)return dw.zl;const t=this.jZ(),e=t?t.Pn-t.Tn:0;if(!t)return dw.Jn;const i=this.KO.$u;return this.YZ()||e>=3*i?dw.Wl:e>=3?dw._f:dw.Hf}jZ(){const t=this.KO.Wu,e=this.KO.bl.yF(.04),i=e.TF(t);if(!(i<0))return{Tn:t,Pn:e.Pn(i)}}YZ(){if(this.KO.Ic)return!0;const t=this.KO.ct,e=this.jZ();return!!e&&t-e.Pn<=.16666666666666666}Ou(){this.KO.pn([o.If,o.im],this.QZ);for(const t of wC)this.KO.JO.removeEventListener(t,this.QZ);super.Ou()}constructor(t){super(t),this.KO.wn([o.If,o.im],this.QZ);for(const t of wC)this.KO.JO.addEventListener(t,this.QZ)}},pC=[ee.Bf,o.Ph,o.Ch,o.If,o.Tf,o.im,o.hm,o.Pf,zn.aa],yC=class extends Et{ZZ(){return(!this.yB.Bc||!this.yB.$c)&&this.yB.Nc<dw._f}JZ(){return!this.yB.Fc&&!(this.yB.Dc||this.yB.Ic||this.yB.lt||this.ZZ())}Kn(){const t=this.$Z;this.$Z=this.JZ(),!t&&this.$Z&&this.To(new _a(this.yB.Wu))}ir(){this.$Z=!1}Ou(){this.Lo(),this.yB.pn(pC,this.DW)}constructor(t){super(),this.$Z=!1,this.DW=()=>{this.Kn()},this.yB=t,this.yB.wn(pC,this.DW)}},AC=class extends yC{JZ(){return this.tJ&&super.JZ()}Kn(){this.tJ&&(this.nB.paused||this.nB.ended||this.nB.error)&&(this.tJ=!1),super.Kn()}ir(){super.ir(),this.tJ=!1}Ou(){this.nB.removeEventListener(ee.Qf,this.xB),super.Ou()}constructor(t){super(t),this.tJ=!1,this.xB=()=>{this.tJ=!0,this.Kn()},this.nB=t.JO,this.nB.addEventListener(ee.Qf,this.xB)}},bC=class extends Xi{constructor(t){super(zn.aa),this.lt=t}};function TC(t,e){return t.PS<=e&&t.RS>e}function qe(t,e){return function(t,e){return e_(t.PS,e.PS,Wc)}(t,e)||function(t,e){return e_(t.RS,e.RS,Wc)}(t,e)}function SC(t,e){return function(t,e){return e_(t.MS,e.MS,Wc)}(t,e)||function(t,e){return e_(t.FS,e.FS,Wc)}(t,e)}function Ds(t,e,i){let s=function(t,e,i,s,n,r,h){void 0===n&&(n=!1),void 0===r&&(r=0),void 0===h&&(h=t.length);let o=r,a=h-1;for(;o<=a;){const h=o+(a-o>>1),u=s(i(t[h]),e);if(u<0)o=h+1;else if(u>0)a=h-1;else{if(!(n&&h>r&&0===s(i(t[h-1]),e)))return h;a=h-1}}return~o}(t,e,b_,i,!0);if(s<0)return s;for(;s<t.length&&i(e,t[s])===Bt.ih;s++)if(t[s].GS(e))return s;return-(s+1)}function kC(t,e,i){const s=Ds(t,e,i);return s>=0?s:-(s+1)}function EC(t){const e=t.Ht;if(!e)return-1;if(t instanceof Da)return e.eJ(t);const i=e.L;if(!i)return-1;const s=Ds(i.Kv,t,qe);return s>=0?s:-1}function IC(t,e){const i=function(t,e,i){const s=t.length,n=e.length;let r=0,h=0;const o=[],a=[];for(;r<s&&h<n;){const s=t[r],n=e[h];s===n?(r++,h++):i(n,s)<=0?(o.push(n),h++):(a.push(s),r++)}for(;r<s;)a.push(t[r]),r++;for(;h<n;)o.push(e[h]),h++;return{iJ:o,sJ:a}}(t,e,qe);return function(t,e){const i=e.length;for(let s=0;s<i;s++)t[s]=e[s];t.length=i}(t,e),i}var Nt=class{get Kv(){return this.nJ}get U(){return this.nJ.length}get ma(){if(this.Gu){const t=this.nJ;this.Gu.length=t.length;for(let e=0;e<t.length;e++)this.Gu[e]=t[e].ma}else this.Gu=this.pa();return this.Gu}pa(){return function(t){const e=[];for(let i=0;i<t.U;i++)e[i]=t.RC(i).ma;return e.item=e=>{const i=0|e,s=t.RC(i);return s&&s.ma||void 0},g.defineProperty(e,"constructor",{value:Em}),e}(this)}_S(t){const e=this.nJ;for(let i=e.length-1;i>=0;i-=1){const s=e[i];if(t.GS(s))return!0}return!1}RC(t){return this.nJ[t]}constructor(t){this.Gu=void 0,this.nJ=t}},Ba=class extends Oo{pa(){return new PC(this.Ht.ma,this.Nc)}constructor(t,e){super(ze.Bf),this.Ht=t,this.Nc=e}},PC=class extends cn{constructor(t,e){super("readystatechange"),this.track=t,this.readyState=e}},ua=class extends Oo{pa(){return new RC(this.Ht.ma)}constructor(t){super(ze.Vv),this.Ht=t}},RC=class extends cn{constructor(t){super("typechange"),this.track=t}},Pa=class extends Oo{pa(){return new CC(this.IS.ma)}constructor(t){super(ze.Iv),this.IS=t}},CC=class extends cn{constructor(t){super("addcue"),this.cue=t}},Ta=class extends Oo{pa(){return new xC(this.IS.ma)}constructor(t){super(ze.Rv),this.IS=t}},xC=class extends cn{constructor(t){super("removecue"),this.cue=t}},Ye=class extends Et{get W(){return this.rJ}get L(){return this.hJ}oJ(t){return pi(this.hJ.Kv,(e=>e.o===t))}get pP(){return this.aJ}set pP(t){this.aJ=t}get Ew(){return this.uJ}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}pa(){return Jn(this)}get o(){return this.wS}get cw(){return this.mS}get Aw(){return this.cJ}set Aw(t){this.cJ=t}get Lt(){return this.lJ}get _h(){return this.Yu}set _h(t){t!==this.Yu&&(this.Yu=t,this.To(new xa(this)))}get gs(){return this.Lx}get lw(){return this.dJ}get bw(){return this.aU}set bw(t){this.Qo(t)}Qo(t){const e=Ci(t);e!==this.bw&&(this.aU=e,e===lu.Th&&(this.fJ.forEach((t=>{t.oo=!1})),Ce(this.fJ),this._J=0),this.To(new In(this)))}get Nc(){return this.tf}set Nc(t){this.tf!==t&&(this.tf=t,this.To(new Ba(this,this.tf)))}get Pw(){return this.gJ}set Pw(t){this.gJ=t}get Iw(){return this.vJ}set Iw(t){this.vJ!==t&&(this.vJ=t,this.To(new ua(this)))}vP(t){if(!t||t.Ht)return;const e=Ds(this.wJ,t,SC);if(e>=0)return;const i=Ds(this.L.Kv,t,qe);t.Ht=this;const s=-(e+1);this.wJ.splice(s,0,t);const n=-(i+1);this.mJ(t,n),this.To(new Pa(t))}mJ(t,e){this.nJ.splice(e,0,t),this.pJ(e),t.jS=e,e<this._J&&(this._J=e)}EI(t){if(!t||t.Ht!==this)return;const e=this.eJ(t);if(e<0)return;t.oo=!1;const i=this.fJ,s=Ds(i,t,qe);s>=0&&hn(i,s);Ds(this.wJ,t,SC);s>=0&&hn(this.wJ,s),this.yJ(t,e),this.To(new Ta(t))}yJ(t,e){hn(this.nJ,e),this.pJ(e),t.jS=-1,this._J>e&&--this._J}VS(t){if(!t||t.Ht!==this)return;const e=this.eJ(t);if(e<0)return;this.yJ(t,e);const i=kC(this.L.Kv,t,qe);this.mJ(t,i);const s=rs(this.fJ,(e=>e===t));if(s>=0){hn(this.fJ,s);const e=kC(this.fJ,t,qe);this.fJ.splice(e,0,t)}}AJ(t,e){const i=this.fJ,s=this.nJ;let n=this._J,r=!1;e&&(n=0);for(let e=i.length-1;e>=0;e--){TC(i[e],t)||(r=!0,hn(i,e))}for(;n<s.length&&s[n].PS<=t;){const e=s[n];if(0===t)break;TC(e,t)&&!Bc(i,e)&&(r=!0,i.push(e)),n++}r&&qf(i,qe),this._J=n}eJ(t){return(-1===t.jS||t.jS>=this.bJ)&&this.TJ(),t.jS}TJ(){const t=this.nJ;for(let e=this.bJ;e<t.length;e++)t[e].jS=e;this.bJ=t.length}pJ(t){t<this.bJ&&(this.bJ=t)}Sw(t){this.Ew||(this.bw=t)}bn(){this.Lo();const t=this.nJ.slice();for(const e of t)e.bn();Ce(this.nJ),Ce(this.wJ),Ce(this.fJ)}constructor(t,e,i,s,n,r,h,o,a){super(),this.mS=vs(),this.aJ=!1,this.aU=lu.Th,this.tf=mn.NONE,this.gJ=void 0,this.nJ=[],this.wJ=[],this.fJ=[],this.bJ=0,this._J=0,this.wS=e||"",this.cJ=o||"",this.lJ=t,this.Lx=s||"",this.aJ=Boolean(n),this.uJ=Boolean(h),this.vJ=r||Ca.DEFAULT,this.Yu=i||"",this.dJ=a||[],this.hJ=new Nt(this.nJ),this.rJ=new Nt(this.fJ)}},ao=class extends Qr{pa(){return new DC(this.IS.ma)}constructor(t,e){super(to.kS,t),this.iE=e}},DC=class extends qr{constructor(t){super("enter",t)}},NC=class extends Qr{pa(){return new BC(this.IS.ma)}constructor(t,e){super(to.ES,t),this.iE=e}},BC=class extends qr{constructor(t){super("exit",t)}},Wo=class extends Oo{pa(){return new LC(this.IS.ma)}constructor(t){super(ze.Nv),this.IS=t}},LC=class extends cn{constructor(t){super("entercue"),this.cue=t}},Ma=class extends Oo{pa(){return new OC(this.IS.ma)}constructor(t){super(ze.Lv),this.IS=t}},OC=class extends cn{constructor(t){super("exitcue"),this.cue=t}},MC=class extends Xo{get cw(){return this.mS}get PS(){return this.SJ.startTime}set PS(t){this.SJ.startTime=t}get RS(){return this.SJ.endTime}set RS(t){this.SJ.endTime=t}get O(){return this.qS}set O(t){this.qS=t}get zS(){return!!this.SJ.pauseOnExit}set zS(t){this.SJ.pauseOnExit=!!t}get Ht(){return this.HS}set Ht(t){this.HS=t}get o(){return this.SJ.id||""}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}pa(){return dn(this)}get oo(){return this.ao}set oo(t){this.oo!==t&&(this.ao=t,t?(this.To(new ao(this,this.PS)),this.HS&&this.HS.To(new Wo(this))):(this.To(new NC(this,this.RS)),this.HS&&this.HS.To(new Ma(this))))}GS(t){return this===t||F_(this,t)&&xm(this,t)&&this.QS(t)}QS(t){return Ne(this.O,t.O)}bn(){this.Lo(),this.SJ.removeEventListener("enter",this.kJ),this.SJ.removeEventListener("exit",this.EJ)}constructor(t){super(),this.qS=void 0,this.HS=void 0,this.Gu=void 0,this.ao=!1,this.kJ=()=>{this.oo=!0},this.EJ=()=>{this.oo=!1},this.mS=vm(),this.SJ=t,this.MS=t.startTime,this.FS=t.endTime,this.SJ.addEventListener("enter",this.kJ),this.SJ.addEventListener("exit",this.EJ)}},FC=class extends Oo{pa(){return new UC(this.Ht.ma)}constructor(t){super(ze.Mv),this.Ht=t}},UC=class extends cn{constructor(t){super("cuechange"),this.track=t}};function HC(t){if(!t)return;let e=t.THEOplayerVTTRegion;return e||(e=new VC(t),t.THEOplayerVTTRegion=e),e}var VC=class{get IJ(){return this.PJ}get o(){return this.PJ.id||""}get Ti(){return+this.PJ.width||0}set Ti(t){this.PJ.width=t||0}get YS(){return+this.PJ.lines||0}set YS(t){this.PJ.lines=t||0}get ZS(){return+this.PJ.regionAnchorX||0}set ZS(t){this.PJ.regionAnchorX=t||0}get JS(){return+this.PJ.regionAnchorY||0}set JS(t){this.PJ.regionAnchorY=t||0}get ek(){return+this.PJ.viewportAnchorX||0}set ek(t){this.PJ.viewportAnchorX=t||0}get nk(){return+this.PJ.viewportAnchorY||0}set nk(t){this.PJ.viewportAnchorY=t||0}get $S(){return this.PJ.scroll||""}get ma(){return this.Gu||(this.Gu=Om(this)),this.Gu}constructor(t){this.Gu=void 0,this.PJ=t}};var WC=class extends MC{get O(){return this.SJ.text}set O(t){this.SJ.text=t}get Mt(){return this.SJ.vertical||""}set Mt(t){this.SJ.vertical=t||""}get OS(){return this.SJ.snapToLines}set OS(t){this.SJ.snapToLines=t}get xS(){return this.SJ.line}set xS(t){this.SJ.line=t}get iA(){return+this.SJ.size}set iA(t){this.SJ.size=xu(t,0,100)}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}pa(){return Im(this)}QS(t){return Dm(this,t)}constructor(t){super(t)}},qC=class extends WC{get LS(){return HC(this.SJ.region)}get DS(){return this.SJ.lineAlign||"start"}set DS(t){this.SJ.lineAlign=t||"start"}get yo(){return this.SJ.position}set yo(t){this.SJ.position=t}get NS(){return this.SJ.positionAlign||"auto"}set NS(t){this.SJ.positionAlign=t||"auto"}get CS(){return this.SJ.align||"center"}set CS(t){this.SJ.align=t||"center"}constructor(t){super(t)}},zC=class extends WC{get LS(){return HC(this.IJ)}get IJ(){return function(t,e){if(void 0===e)return;let i=t&&t.regions;return i&&i.getRegionById(e)||void 0}(this.SJ.track,this.SJ.regionId)}get DS(){return function(t){return"middle"===t?"center":t}(this.SJ.lineAlign||"start")}set DS(t){this.SJ.lineAlign=function(t){return"center"===t?"middle":t}(t||"start")}get yo(){return this.SJ.position}set yo(t){this.SJ.position=function(t,e){return km(t,e)}(t,this.CS)}get NS(){return function(t){return Tm[t]}(this.SJ.positionAlign||"middle")}set NS(t){this.SJ.positionAlign=function(t,e){return bm[Sm(t,e)]}(t||"center",this.CS)}get CS(){return function(t){return"middle"===t?"center":t}(this.SJ.align||"middle")}set CS(t){this.SJ.align=function(t){return"center"===t?"middle":t}(t||"center")}constructor(t){super(t)}};function XC(t,e){return t.O===e.O}function GC(t,e){if(0===e.length)return;const i=e.length-1;if(e[i].PS<t.PS)return void QC(e,i,t.PS);const s=e[0];if(s.PS>t.PS)return void(t.RS=s.PS);const n=Ds(e,t,qe);if(n>=0)return;const r=-(n+1),h=r-1;if(h>=0){e[h].PS<t.PS&&QC(e,h,t.PS)}if(r<e.length){const i=e[r];t.RS=i.PS}}function QC(t,e,i){const s=t[e].PS;for(let n=e;n>=0&&t[n].PS===s;n--)t[n].RS=i}function KC(t){return dn(t)}var jC,YC,Va=class extends MC{get O(){return this.RJ}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}pa(){return KC(this)}QS(t){return XC(this,t)}constructor(t,e){super(t),this.RJ=e}};function qu(t){switch(t){case 0:case 1:case 2:case 3:return!0}return!1}function Sc(t){switch(t){case 0:return en;case 1:return Gv;case 2:return Fr;case 3:return Cr}}function Ra(t,e){const i=e.Au,s=t.byteLength,n=ou(t);return e.Ey(s-i),Qu(n,i,s).buffer}function da(t,e){return{id:t||"",data:e instanceof ArrayBuffer?e:void 0}}function ZC(t,e,i){const s=Go(t,e);if(!qu(s))return;const n=Sc(s);return{id:i,language:wc(t,e,3),description:n(t,e),text:n(t,e)}}function JC(t,e,i){const s=Go(t,e);if(!qu(s))return;const n=Sc(s);return{id:i,mimeType:en(t,e),fileName:n(t,e),description:n(t,e),data:Ra(t,e)}}function $C(t,e,i){const s=Go(t,e);if(!qu(s))return;const n=Sc(s),r=[];for(;e.Au<t.byteLength;)r.push({involvement:n(t,e),involvee:n(t,e)});return{id:i,entries:r}}function tx(t,e,i){const s=Go(t,e);if(!qu(s))return;const n=Sc(s),r=wc(t,e,3),h=Go(t,e),o=Go(t,e),a=n(t,e);let u=!1;const c=[];for(;e.Au<t.byteLength;){let i;if(1===s){let s=Xv(t,e);void 0===s?s=u:u=s,i=Fr(t,e,s)}else i=n(t,e);if(!i||e.Au+4>t.byteLength)break;c.push({text:i,timestamp:As(t,e)})}return{id:i,language:r,format:h,contentType:o,description:a,entries:c}}function ex(t,e,i){return{id:i,ownerIdentifier:en(t,e),identifier:Ra(t,e)}}function ix(t,e,i){const s=Go(t,e);if(!qu(s))return;const n=Sc(s);return{id:i,language:wc(t,e,3),description:n(t,e),text:n(t,e)}}function sx(t,e,i){const s=Go(t,e);if(!qu(s))return;return{id:i,text:Sc(s)(t,e)}}function nx(t,e,i){return{id:i,url:en(t,e)}}function rx(t,e,i){const s=Go(t,e);if(!qu(s))return;const n=Sc(s);return{id:i,description:n(t,e),text:n(t,e)}}function hx(t,e,i){const s=Go(t,e);if(!qu(s))return;return{id:i,description:Sc(s)(t,e),url:en(t,e)}}function ox(t,e,i){switch(i){case"COM":return ZC(t,e,i);case"GEO":return JC(t,e,i);case"IPL":return $C(t,e,i);case"PIC":return function(t,e,i){const s=Go(t,e);if(!qu(s))return;const n=Sc(s),r=wc(t,e,3),h=Go(t,e),o=n(t,e);let a,u;return"--\x3e"===r?(a=r,u=en(t,e)):(a="image/"+r.toLowerCase(),u=Ra(t,e)),{id:i,mimeType:a,pictureType:h,description:o,data:u}}(t,e,i);case"SLT":return tx(t,e,i);case"TXX":return rx(t,e,i);case"UFI":return ex(t,e,i);case"ULT":return ix(t,e,i);case"WXX":return hx(t,e,i);default:if("T"===i.charAt(0))return sx(t,e,i);if("W"===i.charAt(0))return nx(t,e,i)}}function ax(t,e,i){switch(i){case"APIC":return function(t,e,i){const s=Go(t,e);if(!qu(s))return;const n=Sc(s),r=en(t,e),h=Go(t,e),o=n(t,e);let a;return a="--\x3e"===r?en(t,e):Ra(t,e),{id:i,mimeType:r,pictureType:h,description:o,data:a}}(t,e,i);case"COMM":return ZC(t,e,i);case"COMR":return function(t,e,i){const s=Go(t,e);if(!qu(s))return;const n=Sc(s),r=en(t,e),h=wc(t,e,8),o=en(t,e),a=Go(t,e),u=n(t,e),c=n(t,e);let l,d;return e.Au<t.byteLength&&(l=en(t,e)||"image/",d=Ra(t,e)),{id:i,price:r,validUntil:h,contactURL:o,receivedAs:a,nameOfSeller:u,description:c,pictureMimeType:l,sellerLogo:d}}(t,e,i);case"GEOB":return JC(t,e,i);case"IPLS":return $C(t,e,i);case"PRIV":return function(t,e,i){return{id:i,ownerIdentifier:en(t,e),data:Ra(t,e)}}(t,e,i);case"POSS":return function(t,e,i){return{id:i,format:Go(t,e),position:As(t,e)}}(t,e,i);case"SYLT":return tx(t,e,i);case"TXXX":return rx(t,e,i);case"UFID":return ex(t,e,i);case"USER":return function(t,e,i){const s=Go(t,e);if(!qu(s))return;const n=Sc(s);return{id:i,language:wc(t,e,3),text:n(t,e)}}(t,e,i);case"USLT":return ix(t,e,i);case"WXXX":return hx(t,e,i);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return sx(t,e,i);default:{const s=i.charAt(0);if("T"===s)return sx(t,e,i);if("W"===s)return nx(t,e,i)}}}!function(t){t[t.ISO_8859_1=0]="ISO_8859_1",t[t.UTF16_BOM=1]="UTF16_BOM",t[t.UTF16=2]="UTF16",t[t.UTF8=3]="UTF8"}(jC||(jC={})),function(t){t[t.V22=2]="V22",t[t.V23=3]="V23",t[t.V24=4]="V24"}(YC||(YC={}));var ux=10;function cx(t,e){return(127&Go(t,e))<<21|(127&Go(t,e))<<14|(127&Go(t,e))<<7|127&Go(t,e)}function lx(t,e){switch(t){case 4:return{CJ:Nc(e,0),xJ:Nc(e,1),DJ:Nc(e,2),NJ:Nc(e,3)};case 3:return{CJ:Nc(e,0),xJ:Nc(e,1),DJ:Nc(e,2)};case 2:return{CJ:Nc(e,0),BJ:Nc(e,1)}}}function dx(t,e,i){switch(i.oA){case 3:i.aA.xJ&&function(t,e){const i=e.Au,s=As(t,e)+4,n=32768&Qh(t,e);e.gc(i+s),n&&As(t,e)}(t,e);break;case 4:i.aA.xJ&&function(t,e){const i=e.Au,s=cx(t,e);e.gc(i+s)}(t,e)}}function fx(t,e){if(t.byteLength-e.Au<ux)return null;if(73!==Go(t,e)||68!==Go(t,e)||51!==Go(t,e))return null;const i=Go(t,e),s=Go(t,e);if(!function(t){switch(t){case 2:case 3:case 4:return!0}return!1}(i))return null;const n=Go(t,e),r=cx(t,e);return{oA:i,LJ:s,aA:lx(i,n),OJ:r}}function _x(t,e,i){switch(i){case 2:return function(t,e){if(e.Au+6>t.byteLength)return;return{o:wc(t,e,3),iA:Fv(t,e,3)}}(t,e);case 3:return function(t,e){if(e.Au+10>t.byteLength)return;const i=wc(t,e,4),s=As(t,e);Go(t,e);const n=Go(t,e);return{o:i,iA:s,aA:{BJ:Nc(n,0),MJ:Nc(n,1),groupingIdentity:Nc(n,2)}}}(t,e);case 4:return function(t,e){if(e.Au+10>t.byteLength)return;const i=wc(t,e,4),s=cx(t,e);Go(t,e);const n=Go(t,e);return{o:i,iA:s,aA:{groupingIdentity:Nc(n,1),BJ:Nc(n,4),MJ:Nc(n,5),CJ:Nc(n,6),FJ:Nc(n,7)}}}(t,e)}}function gx(t){const e=ou(t),i=new x(e.byteLength);let s=0;for(let t=0;t<e.byteLength;t++){const n=e[t];255===n&&t++,i[s]=n,s++}return Sa(Qu(i,0,s))}function vx(t,e){const i=e||new Ko,s=fx(t,i);if(!s)return null;const n=function(t,e,i){const s=[],n=e.Au;let r=Li(t,n,n+i.OJ);const h=new Ko;switch(e.Ey(i.OJ),i.oA){case 2:case 3:i.aA.CJ&&(r=gx(r))}dx(t,e,i);for(;h.Au<r.byteLength;){const t=wx(r,h,i);if(void 0===t)break;s.push(t)}return s}(t,i,s);return{eA:s,UJ:n}}function wx(t,e,i){const s=_x(t,e,i.oA);if(void 0===s)return;if(0===s.o.charCodeAt(0)||0===s.iA)return;const n=e.Au;let r,h,o=Li(t,n,n+s.iA);switch(e.Ey(s.iA),i.oA){case 2:{const t=s;h=o,r=ox(h,new Ko,t.o);break}case 3:{const t=s,e=new Ko;!function(t,e,i){const s=i.aA;let n,r,h;s.BJ&&(n=As(t,e)),s.MJ&&(r=Go(t,e)),s.groupingIdentity&&(h=Go(t,e))}(o,e,t);h=Li(o,e.Au,o.byteLength),r=ax(h,new Ko,t.o);break}case 4:{const t=s,e=new Ko;t.aA.CJ&&(o=gx(o)),function(t,e,i){const s=i.aA;let n,r,h,o;s.groupingIdentity&&(n=Go(t,e)),s.BJ&&(r=As(t,e)),s.MJ&&(h=Go(t,e)),s.FJ&&(o=cx(t,e))}(o,e,t);h=Li(o,e.Au,o.byteLength),r=ax(h,new Ko,t.o);break}}if(!r){const t=A(ou(h));r=da(s.o,t.buffer)}return r}function mx(t){return function(t,e,i){return sx(t,e,i)}(new DataView(t.data),new Ko,t.key)}function px(t){switch(t.key){case"APIC":case"PIC":return function(t){return{id:t.key,mimeType:t.type,pictureType:16,description:t.info,data:t.data}}(t);case"GEOB":case"GEO":return function(t){return{id:t.key,mimeType:t.type,fileName:t.name,description:t.info,data:t.data}}(t);case"PRIV":return function(t){return{id:t.key,ownerIdentifier:t.info,data:t.data}}(t);case"TXXX":case"TXX":return function(t){return{id:t.key,description:t.info,text:t.data}}(t);case"WXXX":case"WXX":return function(t){return{id:t.key,description:t.info,url:t.data}}(t);case"YMID":case"YTYP":case"YSEQ":case"YDUR":case"YCSP":return mx(t);default:let e=t.key.charAt(0);if("T"===e)return function(t){return{id:t.key,text:t.data}}(t);if("W"===e)return function(t){return{id:t.key,url:t.data}}(t)}return function(t){return da(t.key,t.data)}(t)}var yx=class t extends Et{get W(){return this.rJ}get pP(){return this.HJ?this.HJ.default:void 0}get L(){return this.hJ}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}pa(){return Jn(this)}get o(){return this.vS.id||this.HJ&&this.HJ.id||""}get cw(){return this.mS}get Aw(){return this.vS.inBandMetadataTrackDispatchType||""}get Lt(){return this.vS.kind||bt.Ay}get _h(){return this.Yu}set _h(t){t!==this.Yu&&(this.Yu=t,void 0!==this.HJ&&(this.HJ.label=t),this.To(new xa(this)))}get gs(){return this.vS.language||""}get bw(){return this.aU}set bw(t){let e=this.bw;this.aU=Ci(t),this.VJ();let i=this.bw;e!==i&&this.To(new In(this)),i!==lu.Th&&this.WJ(mn.LOADING)}get qJ(){return Ci(this.vS.mode)}set qJ(t){this.vS.mode=t}get pS(){return this.vS}get Nc(){return this.tf}get zJ(){return this.HJ?+this.HJ.readyState||mn.NONE:mn.LOADED}get Pw(){return this.gJ}get Iw(){return this.vJ}set Iw(t){this.vJ!==t&&(this.vJ=t,this.To(new ua(this)))}get XJ(){return this.GJ}set XJ(t){this.GJ=t,t&&(this.QJ=!0,u((()=>{this.QJ=!1}),50)),this.VJ()}VJ(){let t=this.bw;this.XJ||t!==lu.Qn?this.qJ=t:this.qJ=lu.Tw}KJ(){let t=this.bw,e=this.qJ;t!==e&&(this.XJ||t!==lu.Qn||e!==lu.Tw)&&("metadata"===this.Lt&&e===lu.Th?this.bw=t:this.QJ&&e===lu.Th&&t===lu.Qn?this.qJ=t:this.bw=e)}GZ(t){this.tf!==t&&(this.tf=t,this.To(new Ba(this,t)))}WJ(t){let e=w.max(this.tf,this.zJ,t);this.GZ(e)}static jJ(t){return t&&t.THEOplayerTextTrackCue||void 0}YJ(e){let i=t.jJ(e);if(i)return i;if(i=this.ZJ(e),yr(i))for(let t of i)t.Ht=this;else i.Ht=this;return e.THEOplayerTextTrackCue=i,i}ZJ(t){return function(t){return!(!t||"org.id3"!==t.type||!t.value)}(t)?(this.Iw=Ca.ID3,function(t){let e;try{e=px(t.value)}catch(t){e=da("")}return new Va(t,e)}(t)):function(t){return t&&t.data instanceof ArrayBuffer}(t)?(this.Iw=Ca.ID3,function(t){let e=[];try{let i=vx(new DataView(t.data));if(i)for(let s of i.UJ)e.push(new Va(t,s))}catch(t){}return e}(t)):function(t){return"text"in t}(t)?(this.Iw=Ca.WEBVTT,function(t){return"regionId"in t}(t)?new zC(t):new qC(t)):new MC(t)}JJ(t){let e=[];if(!t)return e;let i=t.length;for(let s=0;s<i;s++){let i=this.YJ(t[s]||t.item(s));if(yr(i))for(let t of i)e.push(t);else e.push(i)}return e}$J(){let t=this.JJ(this.vS.cues),e=IC(this.nJ,t);for(let t of e.sJ)t.pn(to.ES,this.t$),t.pn(to.kS,this.t$),this.To(new Ta(t));for(let t of e.iJ)t.wn(to.kS,this.t$),t.wn(to.ES,this.t$),this.To(new Pa(t))}AJ(){let t=this.JJ(this.vS.activeCues),e=IC(this.fJ,t);for(let t of e.sJ)t.oo=!1;for(let t of e.iJ)t.oo=!0;(e.iJ.length||e.sJ.length)&&this.To(new FC(this))}Sw(t){this.bw=t}bn(){this.Lo();const t=this.nJ.slice();for(let e of t)e.bn();Ce(this.nJ),Ce(this.fJ),this.vS.removeEventListener("cuechange",this.e$),this.vS.removeEventListener("cuechange",this.t$),this.HJ&&(this.HJ.removeEventListener("load",this.i$),this.HJ.removeEventListener("error",this.s$),dt(this.HJ))}constructor(t,e,i=!0){super(),this.nJ=[],this.fJ=[],this.aU=lu.Th,this.tf=mn.NONE,this.gJ=void 0,this.vJ=Ca.DEFAULT,this.QJ=!1,this.e$=()=>{this.VJ(),this.vS.removeEventListener("cuechange",this.e$)},this.t$=()=>{this.bw!==lu.Th&&(this.$J(),this.AJ(),this.nJ.length&&this.WJ(mn.LOADING))},this.i$=()=>{this.WJ(mn.LOADED)},this.s$=()=>{this.WJ(mn.ERROR)},this.vS=t,this.GJ=i,this.vS.addEventListener("cuechange",this.e$),this.vS.addEventListener("cuechange",this.t$),this.HJ=e,this.HJ&&(this.gJ=we(this.HJ.src),this.HJ.addEventListener("load",this.i$),this.HJ.addEventListener("error",this.s$)),this.mS=vs(),this.Yu=t.label||"",this.hJ=new Nt(this.nJ),this.rJ=new Nt(this.fJ),this.bw=this.qJ,xt((()=>{this.t$(),this.WJ(mn.NONE)}))}};function Ax(t,e){return Vi(t.iE,e.iE)||function(t,e){return t.Ht===e.Ht?Xn(EC(t),EC(e)):Ry(t.Ht,e.Ht)}(t.IS,e.IS)||function(t,e){return t===e?Bt.ih:t===to.kS?Bt.T_:Bt.b_}(t.type,e.type)}var _c=class{ir(){Ce(this.n$);for(const t of this.xu.slice())this.it(t);this.r$(),this.h$=0,this.In=0,this.o$=!1,this.a$=!1,this.u$=void 0}tt(t){if(!Bc(this.xu,t)){if(this.xu.push(t),t.wn(ze.Iv,this.c$),t.wn(ze.Rv,this.l$),t.wn(ze.xv,this.d$),t.wn(ze.oa,this.f$),t.L.U>0){for(const e of t.L.Kv)this._$.push(e);this.g$()}this.v$()}}it(t){if(me(this.xu,t)){if(t.pn(ze.Iv,this.c$),t.pn(ze.Rv,this.l$),t.pn(ze.xv,this.d$),t.pn(ze.oa,this.f$),t.L.U>0){for(const e of t.L.Kv)me(this.n$,e),me(this._$,e);this.g$()}this.v$()}}v$(){this.o$=this.xu.some((t=>t.bw!==lu.Th))}w$(){this.Ko.Fc||this.Ko.Dc?this.r$():this.g$()}g$(){this.o$&&(this.h$||(this.h$=this.p$.m$(this.y$)))}r$(){this.h$&&(this.p$.A$(this.h$),this.h$=0)}b$(){if(!this.o$)return;if(this.Ko.Fc)return;const t=this.xu,e=this.In;var i;const s=null!=(i=this.u$)?i:this.Ko.Wu,n=s-e<-.1;let r=this.a$||n;r&&s>e&&s-e<.1&&(r=!1),this.a$=!1,this.u$=void 0;const h=[];for(const e of t)if(e.bw!==lu.Th){e.AJ(s,r);for(const t of e.W.Kv)h.push(t)}const o=this.n$.slice();if(r);else for(const i of t)i.bw!==lu.Th&&Py(i,e-ii,s,o);for(let t=o.length-1;t>=0;t--)Bc(h,o[t])&&hn(o,t);const a=[];if(!r)for(let t=o.length-1;t>=0;t--){const i=o[t];i.PS>e&&i.RS<=s&&(a.push(i),hn(o,t))}for(const t of this._$)me(a,t);Ce(this._$);const u=[],c=[];for(const t of a)t.oo||u.push(new ao(t,t.PS)),u.push(new NC(t,w.max(t.PS,t.RS))),t.oo=!1;for(const t of o)t.oo&&(u.push(new NC(t,w.max(t.PS,t.RS))),t.oo=!1);for(const t of h)t.oo||(u.push(new ao(t,t.PS)),t.oo=!0);u.sort(Ax);for(const t of u){const e=t.IS;e.To(t);const i=e.Ht;i&&(t.type===to.kS?i.To(new Wo(e)):i.To(new Ma(e)),Bc(c,i)||c.push(i))}c.sort(Ry);for(const t of c)t.To(new FC(t));this.In=s,this.n$=h}bn(){this.ir(),this.Ko.pn(o.Lu,this.T$),this.Ko.pn(o.Ph,this.T$),this.Ko.pn(ee.Qf,this.T$),this.Ko.pn(o.Ch,this.T$),this.Ko.pn(o.If,this.S$),this.Ko.pn(o.Tf,this.k$)}constructor(t,e){this.xu=[],this.h$=0,this.In=0,this.n$=[],this._$=[],this.o$=!1,this.a$=!1,this.u$=void 0,this.y$=()=>{this.h$=0,this.b$(),this.w$()},this.T$=()=>{this.b$(),this.w$()},this.S$=()=>{this.a$=!0,this.u$=this.Ko.Wu,this.r$()},this.k$=()=>{this.b$(),this.w$()},this.f$=()=>{this.v$(),this.b$(),this.w$()},this.c$=t=>{const e=t.IS;Bc(this._$,e)||this._$.push(e),this.g$()},this.l$=t=>{const e=t.IS;me(this.n$,e),me(this._$,e),this.g$()},this.d$=t=>{this.g$()},this.p$=e,this.Ko=t,t.wn(o.Lu,this.T$),t.wn(o.Ph,this.T$),t.wn(ee.Qf,this.T$),t.wn(o.Ch,this.T$),t.wn(o.If,this.S$),t.wn(o.Tf,this.k$),this.g$()}},de=class{m$(t){return yh(t)}A$(t){Ws(t)}},bx=new de,Tx=class extends _c{constructor(t,e=bx){super(t,e)}},Sx=class extends Da{get ma(){return this.Gu||(this.Gu=KC(this)),this.Gu}QS(t){return XC(this,t)}constructor(t,e,i){super(t,1/0,e,!1,i)}},kx=class extends Ye{constructor(t,e,i=Ca.DEFAULT){super(bt.Ty,"",e||"","",!1,i,!1,t)}},Ex=class extends kx{vP(t){GC(t,this.nJ),super.vP(t)}pa(){return Jn(this)}constructor(t,e){super(t,e),this.Iw=Ca.ID3}};function Ix(t){const e=t&&t.THEOplayerTextTrackCue||void 0;if(e)return e;const i=t.startTime,s=px(t.value);return t.THEOplayerTextTrackCue=new Sx(i,s),t.THEOplayerTextTrackCue}var Px=class extends Ex{get o(){return this.vS.id||""}get Aw(){return this.vS.inBandMetadataTrackDispatchType||""}get gs(){return this.vS.language||""}Qo(t){super.Qo(t),this.qJ=this.bw}get qJ(){return Ci(this.vS.mode)}set qJ(t){this.vS.mode=t}get pS(){return this.vS}WJ(t){this.Nc=w.max(this.Nc,t)}$J(){let t=this.vS.cues;if(!t)return;let e=function(t){const e=t.length,i=[];for(let s=0;s<e;s++)i.push(Ix(t[s]||t.item(s)));return qf(i,qe),i}(t),i=IC(this.L.Kv.slice(),e);for(let t of i.sJ)this.EI(t);for(let t of i.iJ)this.vP(t)}bn(){this.vS.removeEventListener("cuechange",this.t$),super.bn()}constructor(t){super(t.inBandMetadataTrackDispatchType,t.label),this.t$=()=>{this.bw!==lu.Th&&(this.$J(),this.WJ(mn.LOADED))},this.vS=t,this.vS.addEventListener("cuechange",this.t$),this.bw=this.qJ,xt((()=>{this.t$()}))}},Rx=class extends Cu{E$(){this.I$.wn(ja.bv,this.qO),this.I$.wn(ja.Sv,this.zO)}P$(){this.I$.pn(ja.bv,this.qO),this.I$.pn(ja.Sv,this.zO)}R$(t){const e=t.L.Kv[0];if(!Cx(e))return;const i=function(t){const e=t.match(xx);if(!e)return;return{Ht:e[1],gs:e[2]}}(e.O.description),s=i.Ht,n=i.gs;if(this.C$(s,n))return;const r=this.lP.cP(bt.Ay,t.o,s,n,!1,Ca.TTML);this.tt(r),this.x$.set(t.cw,r);for(let e of t.L.Kv)Cx(e)&&this.D$(e);t.wn(ze.Iv,this.N$)}C$(t,e){return this.Z.Kv.some((i=>i._h===t&&i.gs===e))}D$(t){if(!t.Ht)return;const e=this.x$.get(t.Ht.cw),i=Jp(t.O.text,e,{xE:0,DE:1/0,NE:t.PS});for(let t of i)e.vP(t)}async ir(){for(let t of this.I$.Kv)t.pn(ze.Iv,this.N$);for(let t of this.Z.Kv)this.lP.mP(t);this.x$.clear(),await super.ir()}async bn(){this.P$(),await super.bn()}constructor(t,e){super(),this.lP=t,this.I$=e,this.x$=Yh(),this.qO=async t=>{const e=t.Ht;if(e.Iw||await e.eg(ze.Vv),e.Iw===Ca.ID3){for(;0===e.L.U;)await e.eg(ze.Iv);this.R$(e)}},this.zO=t=>{const e=t.Ht;if(e.Iw!==Ca.ID3||!this.x$.has(e.cw))return;const i=this.x$.get(e.cw);this.it(i),this.lP.mP(i),e.pn(ze.Iv,this.N$)},this.N$=t=>{Cx(t.IS)&&this.D$(t.IS)},this.E$()}};function Cx(t){return function(t){return function(t){return"TXXX"===t.id||"TXX"===t.id}(t)&&xx.test(t.description)}(t.O)}var xx=/^Track:(.+),Lang:(.+)$/;var ce=class extends Xi{get error(){return this.errorObject.message}get licenseAcquisitionURL(){return this.errorObject.url}get status(){return this.errorObject.status}get statusText(){return this.errorObject.statusText}get licenseAcquisitionMessage(){return this.errorObject.response}get systemCode(){return this.errorObject.systemCode}constructor(t){super(o.Xw),this.errorObject=t}},Kc=class extends Xi{constructor(){super(o.Gw)}},Dx=class extends Xi{constructor(t){super("Em"),this.B$=t}},Nx=new Uo,Bx=class extends Xi{constructor(t){super("Xs"),this.session=t}},Lx=class extends Et{$D(){return this.L$=!0,Nx.GN((t=>this.O$(t)),this.QN.M_)}async O$(t){try{k_(t),await this.M$.qB(t);const e=await this.M$.zB(this.F$.fC,this.F$.kC,t);await this.U$.$D(this.F$.fC,this.F$.kC,e)}catch(t){pe(t);const e=t instanceof eu?t.OC:void 0,i=new ss(n.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while performing the CDM request",t,void 0,void 0,void 0,void 0,e);throw this.Ps(i),i}}async ZB(t,e){let i;try{i=function(t){return lr(t,cA())}(t)?await this.M$.hL(new x(t),this.QN.M_):await this.M$.oL(new x(t),e,this.QN.M_)}catch(t){if(Aa(t))return;throw t}if(this.QN.M_.R_)return;const s=this.H$,r=new $i;this.H$=r;try{await this.U$.Kn(i),await uc(100)}catch(t){const e=t instanceof eu?t.OC:void 0;throw new ss(n.CONTENT_PROTECTION_INTERNAL_ERROR,"Error while applying license response",t,void 0,void 0,void 0,void 0,e)}finally{void 0!==s&&await s.jf,r.Lf(),this.H$===r&&(this.H$=void 0)}}Ps(t){const e=t instanceof ss?t:new ss(n.CONTENT_PROTECTION_ERROR,t.message,t);this.To(new ce(e)),this.Xs()}V$(){this.U$.pn("pC",this.sN),this.U$.pn("wC",this.W$),this.U$.pn("lt",this.q$),this.z$=!1,this.QN.Jl(),this.To(new Bx(this))}async Xs(){let t;this.Lo();do{t=this.H$,void 0!==t&&await t.jf}while(this.H$!==t);this.V$(),await this.U$.Xs().catch(Qo)}constructor(t,e,i){super(),this.U$=t,this.M$=e,this.F$=i,this.L$=!1,this.z$=!1,this.QN=new Hi,this.sN=t=>{if(!this.QN.M_.R_)switch(t.yC){case"license-request":case"license-renewal":this.ZB(t.pC,t.AC).catch((t=>this.Ps(t)));break;default:this.Ps(new ss(n.CONTENT_PROTECTION_NOT_SUPPORTED,"Unsupported CDM message type: "+t.yC))}},this.W$=t=>{this.U$.KD.xC(((t,e)=>{switch(t){case"usable":Ee.q_((()=>{this.z$=!0,this.To(new Kc)}),100);break;case"expired":case"status-pending":default:break;case"output-restricted":case"internal-error":this.To(new Dx(e))}}))},this.q$=t=>{this.Ps(new ss(n.CONTENT_PROTECTION_INTERNAL_ERROR,"Unknown CDM error"))},t.wn("pC",this.sN),t.wn("wC",this.W$),t.wn("lt",this.q$),t.XD.then((()=>this.V$()),(t=>this.Ps(t)))}},Ox=[o.Gw,o.Xw,o.Sm],Mx=class extends Et{get ap(){return this.cp}WB(){return this.X$.WB()}G$(t){return this.Q$||(this.Q$=this.K$(t)),this.Q$}async K$(t){k_(t);const e=await this.X$.hL(new x(cA()),t);if(k_(t),!this.hN)throw new v("Invalid MediaKeys when setting ServerCertificate");await this.hN.oN(e.buffer)}async j$(t){if(!this.hN)throw new v("Invalid MediaKeys when creating KeySession");try{this.Y$.push(t);const e=await this.hN.rN("temporary"),i=new Lx(e,this.X$,t);return this.Z$.push(i),i.wn(Ox,this.Os),i.wn("Xs",this.J$),i}finally{me(this.Y$,t)}}t0(t){if(t.e0)return!1;for(const e of this.Z$)if(Fx(e.F$,t))return!0;for(const e of this.Y$)if(Fx(e,t))return!0;return!1}async bn(){this.hN=void 0,this.Lo();const t=this.Z$.slice();Ce(this.Z$),await Promise.all(t.map((t=>t.Xs()))),this.X$.Ou()}constructor(t,e,i){super(),this.Z$=[],this.Q$=void 0,this.Y$=[],this.J$=t=>{t.session.pn(Ox,this.Os),t.session.pn("Xs",this.J$),me(this.Z$,t.session)},this.cp=t,this.hN=e,this.X$=i}};function Fx(t,e){return!t.e0&&t.fC===e.fC&&lr(t.kC,e.kC)}var Ux=class extends Et{get i0(){var t;return null==(t=this.cp)?void 0:t.ap}get yM(){return this.X$}set yM(t){this.X$=t}On(t,e){this.tM=t,this.FX(e)}FX(t){this.al=t,this.s0(this.QN.M_).catch(B)}async s0(t){if(!Ee.Zs.n0||!await this.r0(t))return this.al&&this.al.h0?await this.o0(t):void 0}async r0(t){var e,i;if(!(null==(e=this.al)?void 0:e.hM))return!1;let s=!1;var n;for(const e of null!=(n=null==(i=this.al)?void 0:i.hM)?n:[]){var r;for(const i of null!=(r=e.BO)?r:[])try{await this.a0(e.ap.fC,i,t),s=!0}catch(t){pe(t)}if(s)return!0}return!1}async a0(t,e,i){if(k_(i),!e.byteLength)return;if(!this.al||!this.al.hM.length)throw new ss(n.CONTENT_PROTECTION_CONFIGURATION_MISSING,"Missing configuration for encrypted content");if(t!==Sr&&t!==rc&&t!==Xg)return void 0;const s=kw(t,e),r=this.al.hM;let h;for(const e of r){k_(i);const n=s[e.ap._C];if(n&&e.ap.fC===t)try{const t=await this.u0(e,i);t.WB()&&await t.G$();const s=this.KO.Eg,r={fC:e.ap.fC,kC:n,e0:s};if(this.c0(t,r)){const e=await t.j$(r);await e.$D()}return}catch(t){pe(t),h=t}}throw await Ee.bN()?new ss(n.CONTENT_PROTECTION_NOT_SUPPORTED,"Encrypted content over an insecure connection is not supported",h):new ss(n.CONTENT_PROTECTION_NOT_SUPPORTED,"Cannot create content decryption session",h)}async o0(t){var e;const i=null==(e=this.al)?void 0:e.hM;if(i)for(const e of i){k_(t);try{const i=await this.u0(e,t);return void(i.WB()&&await i.G$())}catch(t){pe(t)}}}c0(t,e){return Ee.Zs.l0||this.KO.d0.PX||!t.t0(e)}u0(t,e){return this.qX.GN((e=>this.f0(t,e)),e)}async f0(t,e){if(k_(e),!this.al||!this.X$||!this.tM)throw new v("Not initialized");if(this.cp){if(this.cp.ap!==t.ap)throw new v("Internal key system error");return this.cp}const i=this.X$;var s;const n=Me({},t,{PM:t.PM.map((e=>Me({},e,{persistentState:null!=(s=e.persistentState)?s:i.vL(t.ap),kN:e.kN||i.kN(t.ap)})))}),r=await this.tM.BX(n.ap,n.PM),h=i.DO(n),a=new Mx(n.ap,r,h);return a.wn([o.Gw,o.Xw,o.Sm],this.Os),this.cp=a,a}Ps(t){if(Aa(t))return;const e=t instanceof ss?t:new ss(n.CONTENT_PROTECTION_ERROR,t.message,t);this.To(new ce(e))}async ir(){this.tM=void 0,this.al=void 0,this.QN.Jl(),this.QN=new Hi,await this._0()}async _0(){await this.qX.Jl();const t=this.cp;t&&(t.pn(o.Sm,this.Os),this.cp=void 0,await t.bn())}async Ou(){this.Lo(),this.KO.pn(pt.Yw,this.g0),await this.ir(),await this.qX.bn()}constructor(t){super(),this.QN=new Hi,this.qX=new Uo,this.al=void 0,this.X$=void 0,this.tM=void 0,this.cp=void 0,this.g0=t=>{this.a0(t.fC,t.kC,this.QN.M_).catch((t=>this.Ps(t)))},this.KO=t,this.KO.wn(pt.Yw,this.g0)}},qi=class extends Xi{constructor(t){super(o.hm),this.currentTime=t}},Hx=class extends Et{get Nc(){return void 0!==this.v0?this.v0.Nc:dw.zl}GZ(){var t;null==(t=this.v0)||t.GZ()}ir(){var t;null==(t=this.v0)||t.ir()}Ou(){this.Lo(),void 0!==this.v0&&(this.v0.Ou(),this.v0=void 0)}w0(t){if(this.v0===t)return;const e=this.Nc;void 0!==this.v0&&this.v0.Ou(),this.v0=t,void 0!==t&&(t.wn(ee.Bf,this.Os),t.GZ());const i=this.Nc;e!==i&&this.To(new Qs(this.m0.Wu,i))}constructor(t){super(),this.m0=t}},Vx=fh.bR||fh.kR,Wx=fh.uC,qx=fh.MR,zx=fh.MR&&fh.KP,Qi=class extends Et{p0(){this.JO.ended||this.Wu===this.ct||(this.y0=!1)}get KZ(){return this.A0}get bl(){return this.tM?this.tM.bl:d.Nl()}get qu(){const t=this.eM;if(!t||j(t.getTime()))return;const e=1e3*this.Wu;return new Date(t.getTime()+e)}get eM(){if(this.JO.getStartDate)return this.Yl&&this.b0||(this.b0=this.JO.getStartDate()),this.b0}get Wu(){return this.T0?this.T0.Wu:void 0!==this.S0?this.S0:this.nB.currentTime}get k0(){return this.E0}get ct(){return this.T0?this.T0.ct:this.tM?this.tM.ct:this.nB.duration}get Ic(){return this.Fc?this.I0():this.T0?this.T0.Ic:this.nB.ended||this.y0}I0(){return void 0!==this.S0&&this.ct===this.S0}get lt(){return this.ZO}get JO(){return this.nB}get Dc(){return this.P0?this.R0:this.T0?this.T0.Dc:this.nB.paused}get wl(){return this.Ho.Hl(d.Sn(this.nB.played))}get Ci(){return this.nB.offsetHeight*Ee.Zs.C0}get Ti(){return this.nB.offsetWidth*Ee.Zs.C0}get wa(){return this.VF}get Nc(){return this.x0.Nc}get kl(){return this.tM?this.tM.kl:d.Nl()}get Fc(){return this.T0?this.T0.Fc:this.Yl}get Bc(){return this.T0?this.T0.Bc:this.zZ}get $c(){return 0!==this.D0}get Xu(){return this.T0?this.T0.Xu:this.nB.muted}set Xu(t){this.T0?this.T0.Xu=t:(this.nB.muted=t,this.N0())}get $u(){return this.T0?this.T0.$u:void 0!==this.B0?this.B0:this.nB.playbackRate}set $u(t){this.T0?this.T0.$u=t:this.Dc||this.A0?(this.B0=t,this.L0()):(this.B0=void 0,this.nB.playbackRate=t,this.L0())}L0(){const t=this.$u;this.O0!==t&&(this.O0=t,this.To(new Gs(this.Wu,t)))}get M0(){return this.oF}get _l(){return this.T0?this.T0._l:this.nB.volume}set _l(t){this.T0?this.T0._l=t:(this.nB.volume=t,this.N0())}N0(){const t=this._l,e=this.Xu;this.F0===t&&this.U0===e||(this.F0=t,this.U0=e,this.To(new Eo(this.Wu,this._l)))}Rg(){return NP(this.nB)}dl(){this.H0||(this.H0=!0);const t=this.V0();return this.W0(),t}W0(){this.P0?this.R0&&(this.R0=!1,this.To(new ds(this.Wu))):this.q0()}q0(){if(this.T0)this.T0.dl();else{fh.MR&&!fh.KP&&this.nB.preload===D.$M&&(this.nB.preload=D.Ty);const t=this.$u,e=this.nB.play();t!==this.JO.playbackRate&&(this.$u=t),Ie(e)?e.then(this.z0,this.X0):this.af.JZ()&&this.G0()}}jl(){this.P0?this.R0||(this.R0=!0,this.To(new mt(this.Wu))):this.Q0()}Q0(){this.T0?this.T0.jl():(this.nB.pause(),this.af.Kn()),this.K0(new At)}V0(){const t=new $i;return this.j0.push(t),t.jf}Y0(){for(const t of this.j0)t.Lf(void 0);Ce(this.j0)}K0(t){for(const e of this.j0)e.BC(t);Ce(this.j0)}G0(){this.P0||this.T0||this.Y0()}Z0(t){this.P0||this.T0||this.K0(t)}gc(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.T0?this.T0.gc(t,e,i):(this.J0.Jl(),this.J0=new Hi,this.$0=this.t1(t,e,i,this.$0,this.J0.M_).catch(Qo))}jO(t){const e=this.eM;if(!e||j(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.gc(i)}async t1(t,e,i,s,n){try{for(this.S0=t,this.e1=t,this.i1=Ee.V_(),i&&!this.Yl?this.zZ=!0:(this.Yl=!0,this.zZ=!1),this.y0&&!this.I0()&&(this.y0=!1),this.zZ?this.To(new qs(this.Wu)):this.To(new T(t)),await s.catch(Qo),k_(n),this.s1&&this.n1(),this.x0.Nc===dw.zl&&await this.x0.eg(ee.Bf,n);0===this.nB.seekable.length||zx&&!this.H0;)await Promise.race([dc(this.nB,"timeupdate",n),uc(100,n)]),k_(n);let r=oC(this.bl,t,.05),h=this.kl,a=!0,u=!1;for(;;){if(h=this.kl,h.U>0&&!h.br(r)&&(r=h.vF(r),a=!0),e&&!this.nB.fastSeek){const t=this.bl;if(!t.br(r)){const e=oC(t,r,1);e!==r&&(r=e,a=!0)}}if(qx){const t=this.h1();void 0!==t&&r>t&&(r=t,a=!0)}if(!u){const t=this.o1();void 0!==t&&r>t&&(u=!0,await this.a1(t,!1,n),await dc(this.nB,"seeked",n),k_(n),a=!0)}if(a){a=!1,await this.a1(r,e,n),k_(n);let t=this.Wu;h=this.kl,r=h.vF(r);let i=1;for(;w.abs(r-t)>=ii;)h=this.kl,r=Gx(r,h,i),await this.a1(r,e,n),k_(n),t=this.Wu,i++}if(!(this.nB.seeking||this.x0.Nc<dw.Hf))break;await zs((t=>{var e;return Promise.race([dc(this.nB,"seeked",t),this.eg([o.Rf,o.Nf],t),this.x0.eg(ee.Bf,t),null==(e=this.tM)?void 0:e.eg(na.sH,t)].filter(Qf))}),n),k_(n)}this.u1()}catch(t){if(Aa(t))return;0}}async a1(t,e,i){k_(i);let s=this.kl;if(t=s.vF(t),this.s1){let e=!0;for(;e||this.x0.Nc<dw._f;)s=this.kl,s.br(t)||(t=s.vF(t),e=!0),e?(e=!1,this.S0=t,this.c1(this.Wu)):await zs((t=>Promise.race([this.eg(o.Nf,t),this.x0.eg(ee.Bf,t)])),i);k_(i)}const n=dc(this.nB,"seeking",i);e&&this.nB.fastSeek?this.nB.fastSeek(t):this.nB.currentTime=t,this.S0=void 0,this.c1(this.Wu),this.nB.seeking&&await n}h1(){if(!this.tM||!this.tM.$X)return;const t=this.tM.tG,e=this.tM.eG,i=t&&e?t.Cn(e):t||e;if(!i||0===i.U)return;const s=i.Tn(i.U-1),n=i.Pn(i.U-1);return w.max(s,n-.001)}o1(){if(!this.tM||!this.tM.$X)return;const t=this.tM.eG;if(!t||0===t.U)return;const e=t.Tn(t.U-1);let i=t.Pn(t.U-1)-.02;return i-=.001,w.max(e,i)}c1(t){this.e1!==t&&(this.e1=t,this.zZ?this.To(new qs(t)):this.To(new T(t)))}u1(){const t=this.zZ;this.Yl=!1,this.zZ=!1,this.i1=0,this.e1=NaN,this.s1&&this.l1(),t?(this.To(new qi(this.Wu)),this.d1()):this.To(new ju(this.Wu))}n1(){this.P0||(this.R0=this.Dc,this.P0=!0,this.Q0())}l1(){this.P0&&(this.P0=!1,this.R0||this.W0())}iG(t){for(const e of t){if(e.Iw===di.vB&&iR.iG(e,this.nB))return e;if(e.Iw===di.wB&&lC.iG(e))return e}}ke(){this.oF=!1,Qt(this.nB)&&(this.nB.style.display="none")}be(){this.oF=!0,Qt(this.nB)&&(this.nB.style.display="block")}get nt(){return this.f1}get Cu(){return this.Sc}cP(t,e,i,s,n,r,h,o,a){const u=new Ye(t,e,i,s,n,r,h,a,o);return this.xu.tt(u),this._1.tt(u),u}dM(){return!0}_M(t,e,i,s,n){const r=h.createElement("track");r.src=we(t),r.kind=e,r.label=null!=i?i:"",s&&(r.srclang=s),r.default=!!n,r.id=aI(),this.nB.appendChild(r);const o=this.nB.textTracks.getTrackById(r.id),a=new yx(o,r);return this.g1.tt(a),this.v1.push(a),a}mP(t){this.xu.it(t),this._1.it(t)}vM(){for(const t of this.xu.Kv.slice())t.bn();this.xu.ir();for(const t of this.v1.slice())this.g1.it(t),t.bn();Ce(this.v1)}RM(){let t=this.nB.textTracks;t&&t.addEventListener&&(t.addEventListener("addtrack",this.w1),t.addEventListener("removetrack",this.m1),t.addEventListener("change",this.A1))}pM(){let t=this.nB.textTracks;t&&t.removeEventListener&&(t.removeEventListener("addtrack",this.w1),t.removeEventListener("removetrack",this.m1),t.removeEventListener("change",this.A1))}b1(t,e){if(fh.MR){if(t.kind===bt.Ty)return void this.T1(t);if(t.kind===bt.fI&&""===t.label&&""===t.language&&!Kx(t))return void this.S1(t,e)}Qx(this.g1,t)||this.g1.tt(new yx(t,e))}T1(t){t.mode=lu.Tw;const e=new Px(t);this.g1.tt(e),this._1.tt(e)}S1(t,e){const i=()=>{Kx(t)&&(t.removeEventListener("cuechange",i),this.g1.tt(new yx(t,e)))};t.addEventListener("cuechange",i),t.mode=lu.Tw}E1(t){let e=this.nB.getElementsByTagName("track");for(let i=0;i<e.length;i++){let s=e[i]||e.item(i);if(s.track===t)return s}}On(t){return this.I1.GN((async e=>{if(k_(e),this.tM)throw new v("Already loaded a media source");let i;if(t.Iw===di.vB)i=new iR(t,this,this.UX,this.AN),this.s1=!1,this.x0.w0(new $s(this));else{if(t.Iw!==di.wB)throw new v("Unsupported configuration");{const e=this.s1?new mC(this):new $s(this);i=new lC(t,this,e,this.UX,this.AN,void 0,this.wZ),this.s1=Vx,this.x0.w0(e),Wx&&(this.wn(o.Lu,this.P1),this.x0.wn(ee.Bf,this.R1))}}return this.tM=i,await i.Jq(),i}))}C1(){if(this.A0)return;const t=this.$u;this.A0=!0,this.$u=t,this.nB.playbackRate=0,this.x0&&this.x0.GZ()}D1(){if(!this.A0)return;const t=this.$u;this.A0=!1,this.$u=t,this.N1()}N1(){this.nB.currentTime=this.nB.currentTime,this.x0&&this.x0.GZ()}async ir(){this.Yl=!1,this.zZ=!1,Ee.W_(this.D0),this.D0=0,this.Ho=d.Nl(),this.J0.Jl(),this.S0=void 0,this.e1=NaN,this.b0=void 0,this.s1=!1,this.P0=!1,this.ZO=void 0,this.y0=!1,this.B1=void 0,this.L1=!1,this.H0=!1,this.O1&&(this.M1(),this.O1=!1),this.K0(new At),this.x0.w0(new $s(this)),this.af.ir(),this.g1.ir(),this.D1(),Wx&&(Ws(this.F1),this.F1=0,this.pn(o.Lu,this.P1)),await this.I1.Jl(),await this.I1.GN((async()=>{this.tM&&(await this.tM.Ou(),this.tM=void 0)}))}async Ou(){this.O1=!1,this.U1(),this.pM(),await this.ir(),await this.I1.bn(),this.af.Ou(),this.x0.Ou(),await this.UX.Ou(),this.vM(),this.xu.bn(),this.g1.bn(),await this.H1.bn(),this.V1.bn(),this.f1.bn(),this.Lo()}M1(){this.JO.addEventListener("play",this.W1),this.JO.addEventListener("pause",this.q1),this.JO.addEventListener("timeupdate",this.z1),this.JO.addEventListener("progress",this.X1),this.JO.addEventListener("loadstart",this.G1),this.JO.addEventListener("ended",this.Q1),this.JO.addEventListener("ratechange",this.K1),this.JO.addEventListener("volumechange",this.j1),this.JO.addEventListener("durationchange",this.Y1),this.JO.addEventListener("resize",this.Z1),this.JO.addEventListener("loadedmetadata",this.Z1),this.JO.addEventListener("error",this.J1),this.JO.addEventListener("emptied",this.t2),TT()?(this.nB.addEventListener("encrypted",this.e2),this.nB.addEventListener("waitingforkey",this.i2)):void 0!==fa.WebKitMediaKeys&&"function"==typeof fa.WebKitMediaKeys.isTypeSupported?this.nB.addEventListener("webkitneedkey",this.s2):Sh()?this.nB.addEventListener("webkitneedkey",this.n2):void 0!==fa.MSMediaKeys&&"function"==typeof fa.MSMediaKeys.isTypeSupported&&this.nB.addEventListener("msneedkey",this.h2)}U1(){this.JO.removeEventListener("play",this.W1),this.JO.removeEventListener("pause",this.q1),this.JO.removeEventListener("timeupdate",this.z1),this.JO.removeEventListener("progress",this.X1),this.JO.removeEventListener("loadstart",this.G1),this.JO.removeEventListener("ended",this.Q1),this.JO.removeEventListener("ratechange",this.K1),this.JO.removeEventListener("volumechange",this.j1),this.JO.removeEventListener("durationchange",this.Y1),this.JO.removeEventListener("resize",this.Z1),this.JO.removeEventListener("loadedmetadata",this.Z1),this.JO.removeEventListener("error",this.J1),this.JO.removeEventListener("encrypted",this.e2),this.JO.removeEventListener("waitingforkey",this.i2),this.JO.removeEventListener("webkitneedkey",this.s2),this.JO.removeEventListener("webkitneedkey",this.n2),this.JO.removeEventListener("msneedkey",this.h2),this.JO.removeEventListener("emptied",this.t2)}o2(){this.T0||(this.Ho=this.wl,this.T0=gC(this),this.U1(),this.T0.wn(fC,this.Os))}a2(){if(!this.T0)return;const t=this.T0;this.T0=void 0,this.x0.GZ(),vC(this,t),t.Ou(),this.M1()}d1(){const t=this.Wu;this.To(new hc(t,void 0)),this.B1=t}OM(t){this.ZO=t,this.K0(this.ZO),this.To(new bC(this.ZO))}get Eg(){return!!this.nB.webkitCurrentPlaybackTargetIsWireless}get u2(){return this.c2}get d0(){return Me({},ZP)}fl(){this.u2||(Zi(this.nB,Ee.Zs),this.c2=!0)}l2(t){t.appendChild(this.nB)}AY(){Wx&&this.P1(),this.x0.GZ()}get yM(){return this.UX.yM}set yM(t){this.UX.yM=t}get d2(){return this.wZ}set d2(t){this.wZ=t}get i0(){return this.UX.i0}wv(){this.UX._0().catch(Qo),this.g1.ir()}get tv(){return this.L1}set tv(t){this.L1=t,this.O1&&!this.L1&&(this.O1=!1,this.M1())}constructor(t,e,i,s){super(),this.ZO=void 0,this.oF=!0,this.tM=void 0,this.I1=new Uo,this.T0=void 0,this.VF=new Lr,this.v1=[],this.S0=void 0,this.i1=0,this.e1=NaN,this.b0=void 0,this.B1=void 0,this.Yl=!1,this.zZ=!1,this.f2=dw.zl,this.D0=0,this.$0=Promise.resolve(),this.J0=new Hi,this.j0=[],this.Ho=d.Nl(),this.B0=void 0,this.O0=1,this.U0=!1,this.F0=1,this.y0=!1,this.L1=!1,this.O1=!1,this.s1=!1,this.P0=!1,this.R0=!1,this.A0=!1,this.c2=!1,this.F1=0,this.H0=!1,this.w1=t=>{const e=t.track,i=this.E1(e);this.b1(e,i)},this.m1=t=>{const e=Qx(this.g1,t.track);e&&this.g1.it(e)},this.A1=()=>{for(let t=0;t<this.g1.U;t++){let e=this.g1.Zv(t);e instanceof yx&&e.KJ()}},this.P1=()=>{if(void 0===this.tM||!JP(this.tM))return;const t=this.tM,e=t.mZ,i=t.pZ;if(!e||!i)return;if(t.$X)return void this.D1();if(t.Nc===Gi.dY)return;const s=e.bl,n=i.bl;if(0===s.U&&0===n.U)return void this.D1();const r=this.Wu;if(r<s.Tn(0)||r<n.Tn(0))return void this.D1();if(s.br(r)!==n.br(r)){if(t.HX(r))return;this.C1()}else if(this.D1(),!this.F1&&this.af.JZ()){s.AF(n).EF(r,r+.5)&&(this.F1=yh(this._2))}},this._2=()=>{this.F1=0,this.P1()},this.R1=()=>{if(this.Fc||this.Bc)return;if(this.x0.Nc>=dw._f)return;if(void 0===this.tM||!JP(this.tM))return;const t=this.tM,e=t.mZ,i=t.pZ;if(!e||!i)return;const s=this.Wu,n=e.bl,r=i.bl;if(!n.br(s)||!r.br(s))return;n.AF(r).EF(s-5,s)&&(this.A0?this.D1():this.N1())},this.W1=()=>{this.To(new ds(this.Wu))},this.q1=()=>{this.Z0(new At),this.To(new mt(this.Wu))},this.g2=()=>{this.G0(),this.To(new _a(this.Wu))},this.K1=()=>{this.L0()},this.Y1=()=>{this.To(new oa(this.ct))},this.X1=()=>{this.To(new bc(this.Wu))},this.G1=()=>{this.To(new os)},this.z1=()=>{const t=this.Wu,e=this.Fc,i=this.x0.Nc<dw._f&&!this.Ic,s=void 0!==this.B1,n=s&&this.B1!==t;(e||!s||n&&!i)&&this.d1()},this.Q1=()=>{!this.y0&&this.Ic&&(this.y0=!0,this.To(new ih(this.Wu)))},this.J1=()=>{if(null!==this.nB.error){const e=this.nB.error;var t;this.OM(new gs(null!=(t=e.code)?t:Mo.DECODE,e.message||"Error decoding media",void 0,e.msExtendedCode))}},this.t2=()=>{this.L1&&(this.U1(),this.O1=!0)},this.w2=t=>{if(Ee.W_(this.D0),this.D0=0,t.readyState<=dw.Hf)if(this.Yl||this.zZ){const e=Ee.V_()-this.i1;if(e<250)return void(this.D0=Ee.q_((()=>this.w2(t)),250-e))}else if(void 0!==this.tM&&this.tM.HX(this.Wu))return void(this.D0=Ee.q_((()=>this.w2(t)),250));this.f2!==t.readyState&&(this.f2=t.readyState,this.To(t))},this.j1=()=>{this.N0()},this.Z1=()=>{this.Kg>0&&this.Xg>0&&this.To(new le)},this.e2=t=>{this.To(new vt(t.initDataType,t.initData||new ArrayBuffer(0)))},this.i2=()=>{this.To(new uA)},this.h2=t=>{const e=t.initData,i=e?A(e).buffer:new ArrayBuffer(0);this.To(new vt(Sr,i))},this.s2=t=>{if(t.initData){const e=function(t){try{const e=Sa(t),i=new Ko,s=tl(e,i,As(e,i,!0));return Yn(jv(s,!0))}catch(t){return}}(t.initData);if(!e)return;this.To(new vt(rc,e))}else this.To(new vt(rc,new ArrayBuffer(0)))},this.n2=t=>{const e=t.initData,i=e?A(e).buffer:new ArrayBuffer(0);this.To(new vt(Sr,i))},this.z0=()=>{this.G0()},this.X0=t=>{this.Z0(t)},this.m2=t=>{this.To(t),t.type===o.Xw&&this.OM(Lt(t.errorObject))},this.nB=t,this.AN=e,this.E0=i,this.Sc=s,this.x0=new Hx(this),this.x0.wn(ee.Bf,this.w2),this.x0.w0(new $s(this)),this.af=new AC(this),this.af.wn(ee.Qf,this.g2),this.UX=new Ux(this),this.UX.wn([o.Gw,o.Xw,o.Sm],this.m2),this.xu=new gn,this.g1=new gn,this.V1=new Uu([this.xu,this.g1]),this.H1=new Rx(this,this.V1),this.f1=new Uu([this.V1,this.H1.Z]),this._1=new Tx(this),this.M1(),this.RM()}};var Xx=.01;function Gx(t,e,i){if(void 0===i&&(i=0),!e.U)return 0;let s=e.vF(t);const n=Xx*i;return s===e.Tn(0)?s+=n:s===e.Pn(e.U-1)&&(s-=n),s}function Qx(t,e){for(let i of t.Kv)if(i.pS===e)return i}function Kx(t){return!!t.cues&&t.cues.length>0}var jx={fX:void 0,_X:void 0,gX:void 0,vX:void 0,wX:void 0,mX:void 0,TX:void 0,pX:void 0,yX:void 0,AX:void 0,bX:void 0},Yx=class extends Et{get ma(){return this.Gu||(this.Gu=GP(this)),this.Gu}get fX(){}get _X(){}get gX(){}get vX(){}get wX(){}get mX(){}get TX(){}get pX(){}get yX(){}get AX(){}get bX(){}constructor(...t){super(...t),this.Gu=void 0}},Zx=class extends Qi{rv(){}get Xg(){return 0}get Kg(){return 0}constructor(t,e,i){super(t,e,i,new Yx)}},Jx=class{get je(){return this.A2}ke(){this.A2.style.display="none"}be(){this.A2.style.display="block"}l2(t){t.appendChild(this.A2)}bn(){dt(this.A2)}constructor(t=5){let e=fa.document.createElement("div");e.className="theoplayer-texttracks",e.style.position="absolute",e.style.display="none",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.width="100%",e.style.height="100%",e.style.lineHeight="1.3em",e.style.zIndex=""+t,this.A2=e,this.be()}};function $x(t,e){return Me({},e,U_(function(t){return{fX:t.fX,_X:t._X,gX:t.gX,vX:t.vX,wX:t.wX,mX:t.mX,TX:t.TX,pX:t.pX,yX:t.yX,AX:t.AX,bX:t.bX}}(t)))}function tD(t){return t.gX&&wt(t.gX,"%")?Number(t.gX.replace("%",""))/100:t.gX&&wt(t.gX,"em")?Number(t.gX.replace("em","")):1}var eD,Yi,iD=class{b2(t){const e=this.T2(t);if(!e)return!1;for(const t of e)dt(t);return this.S2(t),!0}get Ht(){return this.HS}get JO(){return this.nB}get k0(){return this.E0}get E2(){return this.I2}get P2(){return this.R2}Jq(){this.C2(),this.HS.L.Kv.forEach((t=>this.vP(t))),this.k0.wn(Ui.gn,this.D2),this.N2(this.k0.tW,this.k0.JV)}B2(t){this.R2=t,this.I2=$x(this.R2,this.L2),this.I2.fX&&(this.JO.style.fontFamily=this.I2.fX),this.I2.TX&&(this.JO.style.visibility=this.I2.TX),this.N2(this.k0.tW,this.k0.JV),this.O2(!0)}M2(){return this.I2}F2(t){return this.U2.has(t.cw)}C2(){this.HS.wn(ze.Iv,this.H2),this.HS.wn(ze.Rv,this.V2),this.HS.wn(ze.oa,this.W2)}q2(){this.HS.pn(ze.Iv,this.H2),this.HS.pn(ze.Rv,this.V2),this.HS.pn(ze.oa,this.W2)}z2(t){t.wn(to.kS,this.X2),t.wn(to.ES,this.G2),t.wn(to.qv,this.Q2)}K2(t){t.pn(to.kS,this.X2),t.pn(to.ES,this.G2),t.pn(to.qv,this.Q2)}vP(t){this.z2(t),t.oo&&this.j2(t)}EI(t){this.K2(t),this.Y2(t)}Z2(){this.HS.bw===lu.Qn?this.J2():this.t3()}J2(){if(!this.e3)return;this.e3=!1;const t=this.k0.tW,e=this.k0.JV;this.N2(t,e),this.O2(!1)}t3(){this.e3||(this.e3=!0,this.O2(!0))}j2(t){this.e3||t.oo&&!this.F2(t)&&this.O2(!1)}Y2(t){this.F2(t)&&this.O2(!0)}i3(t){(t.oo||this.F2(t))&&this.O2(!0)}O2(t){const e=this.s3,i=this.e3?[]:this.HS.W.Kv.slice();this.n3(i,e,t),this.s3=i}T2(t){return this.U2.get(t.cw)}r3(t,e){this.U2.set(t.cw,e)}S2(t){this.U2.delete(t.cw)}h3(){return this.s3.slice()}bn(){dt(this.JO),this.U2.clear(),this.q2(),this.HS.L.Kv.forEach((t=>this.K2(t))),this.k0.pn(Ui.gn,this.D2)}constructor(t,e,i,s,n){this.U2=Yh(),this.e3=!0,this.R2=Me({},jx),this.s3=[],this.H2=t=>this.vP(t.IS),this.V2=t=>this.EI(t.IS),this.W2=()=>this.Z2(),this.X2=t=>this.j2(t.IS),this.G2=t=>this.Y2(t.IS),this.Q2=t=>this.i3(t.IS),this.D2=t=>{this.N2(t.width,t.height)},this.HS=t,this.L2=this.I2=n,this.nB=this.o3(i),this.E0=s,e.appendChild(this.nB)}};function sD(t,e){return t?{a3:t.a3,u3:t.u3,c3:t.c3,mu:e}:null}function nD(t){const e=t?t.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i):null;return e?{a3:k(e[1],16),u3:k(e[2],16),c3:k(e[3],16)}:null}function rD(t){return("0"+t.toString(16)).slice(-2)}function hD(t){return"#"+rD(t.a3)+rD(t.u3)+rD(t.c3)}function oD(t){const e=t?t.match(/^rgba\(([0-9]+),\s*([0-9]+),\s*([0-9]+),\s*([0-9.]+)\)$/i):null;return e?{a3:k(e[1],10),u3:k(e[2],10),c3:k(e[3],10),mu:_(e[4])}:null}function aD(t,e){return function(t){return t?"rgba("+t.a3+", "+t.u3+", "+t.c3+", "+t.mu+")":void 0}(sD(nD(t),e/100))}function uD(t){return cD[t||"none"]}!function(t){t.Fa='"Courier New", Courier, "Nimbus Mono L", "Cutive Mono", monospace',t.Ba='"Times New Roman", Times, Georgia, Cambria, "PT Serif Caption", serif',t.$a='"Deja Vu Sans Mono", "Lucida Console", Monaco, Consolas, "PT Mono", monospace',t.Ra='Arial, Helvetica, Verdana, "PT Sans Caption", sans-serif'}(eD||(eD={})),function(t){t.BLACK="#000000",t.WHITE="#FFFFFF",t.GREEN="#00ff00",t.BLUE="#0000ff",t.CYAN="#00ffff",t.RED="#ff0000",t.YELLOW="#ffff00",t.MAGENTA="#ff00ff",t.TRANSPARENT="transparent"}(Yi||(Yi={}));var cD={none:"",dropshadow:"#222 2px 2px 3px, #222 2px 2px 4px, #222 2px 2px 5px",raised:"#222 1px 1px, #222 2px 2px, #222 3px 3px",depressed:"#ccc 1px 1px, #ccc 0px 1px, #222 -1px -1px, #222 0px -1px",uniform:"#222 -1px -1px 0, #222 1px -1px 0, #222 -1px 1px 0, #222 1px 1px 0"},lD=g_({monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:"monospace, sans-serif",monospaceSerif:"monospace, serif",proportionalSansSerif:"Arial",proportionalSerif:"Times New Roman",default:"monospace, sans-serif"}),dD={_X:Yi.WHITE,fX:"Arial, Helvetica, Sans-Serif",gX:"100%",vX:Yi.TRANSPARENT,wX:Yi.TRANSPARENT,mX:"none",TX:"visible",pX:void 0,yX:void 0,AX:void 0,bX:void 0},fD=class extends iD{o3(t){let e=h.createElement("div");e.className="theoplayer-ttml-texttrack-"+t;const i=e.style;return i.position="absolute",eS(i,"flex"),i.overflow="hidden",i.pointerEvents="none",i.top="0",i.left="0",i.width="100%",i.height="100%",e}N2(t,e){let i=w.min(t,e)/15;this.JO.style.fontSize=i+"px"}n3(t,e,i){for(const t of e)!i&&t.oo||this.b2(t);for(const e of t)this.l3(e)}l3(t){let e=this.T2(t);e||(e=this.d3(t),this.r3(t,e));for(const t of e)this.JO.appendChild(t)}d3(t){let e=[],i=t.UE,s=t.BE,n=t.O;if(0===g.keys(s).length){const s=h.createElement("div");TD(s),_D(n,i,t.WE,s,s),s.firstChild&&e.push(s)}else for(let r of g.keys(s)){let o=h.createElement("div");o.id=r,TD(o),wD(o,"region",s[r],i),_D(n,i,t.WE,o,o),o.firstChild&&e.push(o)}return e}B2(t){!function(t,e){var i,s;t.style.marginTop=(null!=(i=e.pX)?i:0)+"px",t.style.marginBottom=(null!=(s=e.yX)?s:0)+"px",t.style.height="calc(100% - "+t.style.marginTop+" - "+t.style.marginBottom+")"}(this.JO,t),jP(this.JO,t)}constructor(t,e,i,s){super(t,e,i,s,dD)}};function _D(t,e,i,s,n){if(nt(t)&&function(t){return"SPAN"===t.hI.toUpperCase()||"P"===t.hI.toUpperCase()||"BR"===t.hI.toUpperCase()||"DIV"===t.hI.toUpperCase()||"BODY"===t.hI.toUpperCase()}(t)){let r=gD(t);if(!r||(null==n?void 0:n.id)===r){let r;if("BODY"===t.hI.toUpperCase())r=n;else{if(r=function(t){let e;switch(t.hI.toUpperCase()){case"BR":e=h.createElement("br");break;case"SPAN":e=h.createElement("span"),vD(e,t);break;case"P":e=h.createElement("p"),function(t){const e=t.style;e.fontFamily="inherit",e.color="inherit",e.textAlign="inherit",e.padding="0",e.margin="0",e.lineHeight="inherit"}(e),vD(e,t);break;case"DIV":e=h.createElement("div"),vD(e,t)}return e}(t),!r)return;s.appendChild(r)}!function(t,e,i,s){let n=e.cI("style");yD(t,e.hI,n,i,s),function(t,e,i){for(const s of e.rI)AD(t,e.hI,s.hI,s.kT,i)}(t,e,s)}(r,t,e,n),function(t,e,i){let s=null==e?void 0:e.cI("smpte:backgroundImage");if(s){s=s.replace("#","");let n=i&&mD(i,(t=>t.rI.some((t=>"id"===t.hI&&t.kT===s))));n&&pD(t,n,e,!0)}!function(t,e){const[i]=e.m;if(!i||"metadata"!==i.hI.toLowerCase())return;const[s]=i.m;pD(t,s,e)}(t,e)}(r,t,i);for(const s of t.lI)_D(s,e,i,r,n)}}else if(Mp(t)){const e=h.createTextNode(t.Ny);s.appendChild(e)}}function gD(t){const e=t.cI("region");if("p"===t.hI.toLowerCase())return e;const i=[];for(const e of t.m)i.push(gD(e));return l_(i),0===i.length?e:1===i.length?null!=(s=i[0])?s:e:void 0;var s}function vD(t,e){let i=e.uI(Xp,"id");i&&(t.id=i)}function wD(t,e,i,s){yD(t,e,i.style,s,t);for(const s of g.keys(i))AD(t,e,s,i[s],t)}function mD(t,e){if(e(t))return t;for(let i of t.m){const t=mD(i,e);if(t)return t}return null}function pD(t,e,i,s){void 0===s&&(s=!1),s&&(t.style.width=t.style.height="100%");const n=h.createElement("img");n.src=function(t){const e=t&&t.lI.length>0?t.lI[0]:null;return e&&Mp(e)?"data:image/png;base64,"+e.Ny:""}(e),n.id=t.id,n.style.height="100%",n.style.maxWidth="100%",function(t,e){const i=t.style;eS(i,"flex");let s=e.cI("smpte:backgroundImageVertical");if(s)switch(s.toLowerCase()){case"left":i.alignItems="flex-start";break;case"center":i.alignItems="center";break;case"right":i.alignItems="flex-end";break;case"inherit":i.alignItems="inherit"}else i.alignItems="center";let n=e.cI("smpte:backgroundImageHorizontal");if(n)switch(n.toLowerCase()){case"left":i.justifyContent="flex-start";break;case"center":i.justifyContent="center";break;case"right":i.justifyContent="flex-end";break;case"inherit":i.justifyContent="inherit"}else i.justifyContent="center"}(t,i),t.appendChild(n)}function yD(t,e,i,s,n){if(i)for(const r of i.split(" "))if(s[r])for(const i of g.keys(s[r]))"style"===i.toLowerCase()?yD(t,e,s[r][i],s,n):AD(t,e,i,s[r][i],n)}function AD(t,e,i,s,n){const r=t.style;switch(i){case"backgroundColor":r.backgroundColor=s;break;case"color":r.color=s;break;case"direction":r.direction=s;break;case"display":"none"===s&&(r.display="none");break;case"fontFamily":{const t=lD.get(s);r.fontFamily=t||s;break}case"fontSize":wt(s,"px")?s=k(s)/24+"em":wt(s,"c")&&(s=s.replace("c","em")),r.fontSize=s;break;case"fontStyle":r.fontStyle=s;break;case"fontWeight":r.fontWeight=s;break;case"lineHeight":r.lineHeight=s;break;case"opacity":r.opacity=s;break;case"overflow":r.overflow=s;break;case"padding":r.padding=s;break;case"textAlign":"right"===s?(r.textAlign="right",r.justifyContent="flex-end"):"start"===s?(r.textAlign="start",r.justifyContent="flex-start"):"center"===s?(r.textAlign="center",r.justifyContent="center"):"end"===s?(r.textAlign="end",r.justifyContent="flex-end"):"left"===s&&(r.textAlign="left",r.justifyContent="flex-start");break;case"textDecoration":{let t=s;t=t.replace("lineThrough","line-through"),t=t.replace("noUnderline","none"),t=t.replace("noLineThrough","none"),t=t.replace("noOverline","none"),r.textDecoration=t;break}case"unicodeBidi":r.unicodeBidi=s.replace("bidiOverride","bidi-override");break;case"visibility":r.visibility=s;break;case"zIndex":r.zIndex=s;break;case"displayAlign":{let t;if("before"===s.toLowerCase())t="flex-start";else if("center"===s.toLowerCase())t="center";else{if("after"!==s.toLowerCase())return;t="flex-end"}r.alignItems=t;break}case"extent":{const i=bD(e.toLowerCase())?n:t;let r,h,o=s.split(" ");o.length>=2?(r=o[0],h=o[1]):r=h="100%",i&&(i.style.height=h,i.style.width=r);break}case"origin":{const i=bD(e.toLowerCase())?n:t,[r,h]=s.split(" ");i&&(r||h)&&(r&&(i.style.left=r),h&&(i.style.top=h));break}case"showBackground":case"textOutline":break;case"wrapOption":r.whiteSpace=s.replace("noWrap","nowrp").replace("wrap","normal").replace("nowrp","nowrap");break;case"writingMode":{let t,e,i,n;switch(s){case"lrtb":case"lr":t="horizontal-tb";break;case"rltb":t="horizontal-tb",e="rtl",n="bidi-override";break;case"tbrl":case"tb":t="vertical-rl",i="upright";break;case"tblr":t="vertical-lr",i="upright";break;case"rl":t="horizontal-tb",e="rtl";break;default:return}r.writingMode=t,r.setProperty("-webkit-writing-mode",t),e&&(r.direction=e),i&&(r.textOrientation=i,r.setProperty("-webkit-text-orientation",i)),n&&(r.unicodeBidi=n);break}case"linePadding":if(wt(s,"c")){let t=s.replace("c","em");r.paddingLeft=r.paddingRight=t}break;case"multiRowAlign":"auto"===s.toLowerCase()?r.textAlign="":r.textAlign=s}}function bD(t){return"div"===t||"p"===t||"span"===t}function TD(t){const e=t.style;eS(e,"flex"),e.top="auto",e.left="5%",e.width="90%",e.height="100%",e.maxHeight="100%",e.maxWidth="100%",e.alignItems="flex-start",e.overflow="visible",e.position="absolute",e.fontFamily="Arial, Helvetica, Sans-Serif",e.color="white",e.textShadow="rgb(0, 0, 0) -1px -1px 0px, rgb(0, 0, 0) 1px -1px 0px, rgb(0, 0, 0) -1px 1px 0px, rgb(0, 0, 0) 1px 1px 0px",e.textAlign="start",e.writingMode="horizontal-tb",e.setProperty("-webkit-writing-mode","horizontal-tb"),e.padding="0",e.margin="0",e.lineHeight="1.3em"}var SD,ta,kD=void 0;function ED(t){return kD||(kD=fa.document.createElement("textarea")),kD.innerHTML=t,kD.value}function ID(t,e){let i="Data",s="",n=[],r=t.charAt(e.Au),h="",o={Iw:"starttag",DL:"",f3:[]};for(;e.Au<t.length+1;){switch(r=e.Au<t.length?t.charAt(e.Au):"EOF",i){case"Data":switch(r){case"&":let n=t.substring(e.Au).match(/&#?[0-9a-zA-Z]+;/);n?(s+=ED(n[0]),e.Ey(n[0].length-1)):s+="&";break;case"<":if(s)return{Iw:"string",O:s};i="Tag";break;case"EOF":return{Iw:"string",O:s};default:s+=r}break;case"Tag":switch(r){case"\t":case"\n":case"\f":case" ":i="StartTagAnnotation";break;case".":i="StartTagClass";break;case"/":i="EndTag";break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":s=r,i="TimestampTag";break;case">":return e.Ey(1),o;case"EOF":return o;default:s=r,i="StartTag"}break;case"StartTag":switch(r){case"\t":case"\f":case" ":i="StartTagAnnotation";break;case"\n":h=r,i="StartTagAnnotation";break;case".":i="StartTagClass";break;case">":return e.Ey(1),{Iw:"starttag",DL:s,f3:[]};case"EOF":return{Iw:"starttag",DL:s,f3:[]};default:s+=r}break;case"StartTagClass":switch(r){case"\t":case"\f":case" ":n.push(h),h="",i="StartTagAnnotation";break;case"\n":n.push(h),h=r,i="StartTagAnnotation";break;case".":n.push(h),h="";break;case">":return e.Ey(1),n.push(h),{Iw:"starttag",DL:s,f3:n};case"EOF":return n.push(h),{Iw:"starttag",DL:s,f3:n};default:h+=r}break;case"StartTagAnnotation":switch(r){case"&":i="CharRefInAnnotation";break;case">":e.Ey(1);let t=h.trim();return t=t.replace(/\s/," "),{Iw:"starttag",DL:s,f3:n,_3:t};default:h+=r}break;case"CharRefInAnnotation":let a="";for(let i=e.Au;">"===t.charAt(i);i++)a+=t.charAt(i);h+=a||"&",i="StartTagAnnotation";break;case"EndTag":switch(r){case">":return e.Ey(1),{Iw:"endtag",DL:s};case"EOF":return{Iw:"endtag",DL:s};default:s+=r}break;case"TimestampTag":switch(r){case">":return e.Ey(1),{Iw:"timestamp",g3:s};case"EOF":return{Iw:"timestamp",g3:s};default:s+=r}}e.Ey(1)}return o}function PD(t){let e;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};const i=h.documentElement,s=h.body,n=i.clientLeft||s.clientLeft||0,r=a.pageXOffset||s.scrollLeft,o=e.left+r-n,u=i.clientTop||s.clientTop||0,c=a.pageYOffset||s.scrollTop,l=e.top+c-u;return{left:w.round(o),top:w.round(l)}}function RD(t,e,i,s){if(void 0===s&&(s=0),!t||!e)return;t.style.left="0px";let n=t.getClientRects(),r=e.getClientRects();if(0===n.length||0===r.length)return;let h=n[0],o=r[0],a=h.width/2+h.left;!function(t,e,i,s){void 0===s&&(s=0);!function(t,e,i,s,n,r){void 0===r&&(r=0);const h=t.getClientRects();if(n&&h.length>0){const t=h[0];e=xu(e,n[i]+r-t[i],n[s]-r-t[s])}t.style[i]=e+"px"}(t,e,"left","right",i,s)}(t,o.width/2+o.left-a,i,s)}function $t(t,e){void 0===t.textContent?t.innerText=e:t.textContent=e}!function(t){t.v3="Data",t.w3="Tag",t.m3="StartTag",t.y3="StartTagClass",t.A3="StartTagAnnotation",t.b3="CharRefInAnnotation",t.T3="EndTag",t.S3="TimestampTag"}(SD||(SD={})),function(t){t.E3="string",t.I3="starttag",t.P3="endtag",t.R3="timestamp"}(ta||(ta={}));var CD,xD=class t{get C3(){return this.x3+this.Ti}set C3(t){this.x3=t-this.Ti}get D3(){return this.N3+this.Ci}set D3(t){this.N3=t-this.Ci}B3(t){return this.x3<t.C3&&this.C3>t.x3&&this.N3<t.D3&&this.D3>t.N3}_S(t){return this.x3<=t.x3&&t.C3<=this.C3&&this.N3<=t.N3&&t.D3<=this.D3}Iy(){return new t(this.x3,this.N3,this.Ti,this.Ci)}L3(e){const i=this.x3+e,s=this.N3+e,n=w.max(0,this.Ti-2*e),r=w.max(0,this.Ci-2*e);return new t(i,s,n,r)}constructor(t,e,i,s){this.x3=t,this.N3=e,this.Ti=i,this.Ci=s}},DD={_X:Yi.WHITE,fX:"sans-serif",gX:"100%",vX:"rgba(0,0,0,0.8)",wX:Yi.TRANSPARENT,mX:"none",TX:"visible",pX:void 0,yX:void 0,AX:void 0,bX:void 0},ND="theoplayer-webvtt-region-",BD="theoplayer-webvtt-styling-",LD="theoplayer-webvtt-default-style",OD=5.23,MD=1.14,FD=class extends iD{o3(t){let e=h.createElement("div");e.className="theoplayer-webvtt-texttrack-"+t,ha(e),e.style.overflow="hidden",e.style.pointerEvents="none";const i=this.E2.fX;return i&&(e.style.fontFamily=i),e.style.whiteSpace="pre-line",function(){if(h.getElementById(LD))return;const t=[];for(const[e,i]of JD)t.push("."+BD+e+" { color: "+i+" !important; }"),t.push("."+BD+"O3"+e+" { background-color: "+i+" !important; }"),t.push("video::cue(."+e+") { color: "+i+"; }"),t.push("M3"+e+") { background-color: "+i+"; }");const e=h.createElement("style");e.id=LD,e.innerHTML=t.join("\n"),h.body.appendChild(e)}(),e}Jq(){this.JO.appendChild(this.F3),super.Jq()}N2(t,e){const i=w.min(t/100,e/100),s=tD(this.E2);this.U3.forEach((t=>{let{LS:e,H3:n}=t;this.V3(n,i,s,e)})),this.V3(this.F3,i,s)}B2(t){jP(this.JO,t),super.B2(t)}n3(t,e,i){const s=this.JO,n=this.k0.JV/100;let r=[];for(const e of t)void 0!==e.LS&&(Bc(r,e.LS)||r.push(e.LS));this.U3.forEach(((t,e)=>{let{LS:s,H3:n}=t;!i&&Bc(r,s)||(dt(n),this.U3.delete(e))}));for(const t of e)!i&&t.oo||this.b2(t);let h=[];const o=KD(this.F3.getBoundingClientRect());h.push(...this.W3(o));for(const t of r){let e;this.U3.has(t.o)?e=this.U3.get(t.o).H3:(e=XD(t,n),s.appendChild(e),this.U3.set(t.o,{LS:t,H3:e})),h.push(KD(e.getBoundingClientRect()))}t.sort($D);for(const e of t){const t=this.l3(e,h,o);void 0!==t&&h.push(t.L3(.1))}}W3(t){const e=[],i=this.E2;if(void 0!==i.pX){const s=t.Iy();s.Ci=i.pX,e.push(s)}if(void 0!==i.yX){const s=t.Iy();s.Ci=i.yX,s.D3=t.D3,e.push(s)}return e}l3(t,e,i){var s;let n;t.LS?(n=this.U3.get(t.LS.o).H3,"up"===t.LS.$S&&n.children.length>=1&&(n.style.transitionProperty="top",n.style.transitionDuration="0.433s")):n=this.F3;let r=null==(s=this.T2(t))?void 0:s[0];if(r||(r=this.q3(t),this.r3(t,[r])),n.appendChild(r),t.LS||(UD(r,t),t.OS?function(t,e,i,s){const n=GD(t),r=n?i.Ci:i.Ti;let h=_(getComputedStyle(e).lineHeight);if(0===h)return;let o=KD(e.getBoundingClientRect()),a=w.round(Rr(t));"rl"===t.Mt&&(a=-(a+1));let u=h*a;"rl"===t.Mt&&(u=u-o.Ti+h);a<0&&(u+=r,h=-h);n?o.N3+=u:o.x3+=u;const c=o.Iy();let l=!1;for(;!i._S(o)||QD(o,s);)if(n)if(h<0&&o.N3<i.N3||h>0&&o.D3>i.D3){if(o.N3=c.N3,l)break;h=-h,l=!0}else o.N3+=h;else if(h<0&&o.x3<i.x3||h>0&&o.C3>i.C3){if(o.x3=c.x3,l)break;h=-h,l=!0}else o.x3+=h;n?e.style.top=(o.N3-i.N3)/i.Ci*100+"%":e.style.left=(o.x3-i.x3)/i.Ti*100+"%"}(t,r,i,e):function(t,e,i,s){let n=KD(e.getBoundingClientRect());if(0===n.Ti||0===n.Ci)return;GD(t)?"center"===t.DS?n.N3-=n.Ci/2:"end"===t.DS&&(n.N3-=n.Ci):"center"===t.DS?n.x3-=n.Ti/2:"end"===t.DS&&(n.x3-=n.Ti);let r,h=n.Iy(),o=h,a=1,u=!1;r=""===t.Mt?[2,3,0,1]:"lr"===t.Mt?[0,1,2,3]:[1,0,2,3];const c=4,l=_(getComputedStyle(e).lineHeight)/c;if(l>0){for(let t=0;t<r.length&&!u;t++){for(;!YD(n,i,r[t],.01)&&(!i._S(n)||QD(n,s));)jD(n,r[t],l);if(i._S(n)){o=n.Iy(),u=!0;break}let e=ZD(n,i);a>e&&(o=n.Iy(),a=e),n=h.Iy()}i._S(n)||(o=h.Iy())}e.style.left=(o.x3-i.x3)/i.Ti*100+"%",e.style.top=(o.N3-i.N3)/i.Ci*100+"%"}(t,r,i,e)),!t.LS)return KD(r.getBoundingClientRect())}q3(t){let e=new Ko,i=t.O,s=this.z3(t),n={X3:void 0,je:s},r=n,o="",a="",u=[n],c=[],l=[];for(;e.Au<i.length;){let t=ID(i,e);if(t.Iw===ta.E3){const e=h.createElement("span");$t(e,t.O),HD(e,u),""!==o&&(e.lang=o),this.G3(e,a),r.je.appendChild(e)}else if(t.Iw===ta.I3){const e=t.DL.toLowerCase();switch(e){case"i":case"b":case"u":case"ruby":{let i=h.createElement(e);r.je.appendChild(i),r={X3:t,je:i},u.push(r);break}case"rt":var d;if("ruby"===(null==(d=r.X3)?void 0:d.DL.toLowerCase())){let e=h.createElement("rt");r.je.appendChild(e),r={X3:t,je:e},u.push(r)}break;case"c":case"v":r={X3:t,je:r.je},u.push(r);break;case"font":{var f;const e=null==(f=t._3)?void 0:f.match(/(?:^| )color=["']([^"']+)/i);e&&(a=e[1],l.push(a),r={X3:t,je:r.je},u.push(r));break}case"lang":var _;o=null!=(_=t._3)?_:"",c.push(o)}}else if(t.Iw===ta.P3){var g;const e=t.DL.toLowerCase(),i=null==(g=r.X3)?void 0:g.DL.toLowerCase();i===e?(u.pop(),r=u[u.length-1],"font"===e&&(l.pop(),a=l.length>0?l[l.length-1]:"")):"rt"===i&&"ruby"===e?(u.pop(),u.pop(),r=u[u.length-1]):"lang"===e&&(c.pop(),o=c.length>0?c[c.length-1]:"")}else if(t.Iw===ta.R3){let e=t.g3,i=new Ko;try{vp(e,i)}catch(t){Vh("ERROR collecting timestamp",t)}}}return s}G3(t,e){const i=this.E2,s=this.P2;i.vX&&(t.style.background=i.vX);const n=s._X||e||i._X;n&&(t.style.color=n)}V3(t,e,i,s){if(s){let n=VD(s,e);t.style.height=n*i+"px",t.style.left=WD(s)+"%",t.style.top=qD(s,e)+"px"}t.style.fontSize=OD*e*i+"px"}z3(t){const e=h.createElement("div");e.style.position="absolute",e.style.margin="0",e.style.padding="0",e.style.unicodeBidi="plaintext",e.style.wordWrap="break-word",e.style.overflowWrap="break-word",e.style.width="auto",e.style.textAlign=t.CS,function(t,e){"rl"===e.Mt?t.style.writingMode="vertical-rl":"lr"===e.Mt?t.style.writingMode="vertical-lr":t.style.writingMode="horizontal-tb"}(e,t),function(t,e){let i=Lm(e);GD(e)?(t.style.width=i+"%",t.style.height="auto"):(t.style.height=i+"%",t.style.width="auto")}(e,t),UD(e,t);const i=this.E2.wX;i&&(e.style.background=i);const s=this.E2._X;return s&&(e.style.color=s),e.style.textShadow=uD(this.E2.mX),e}constructor(t,e,i,s){super(t,e,i,s,DD),this.U3=Wn(),this.F3=zD(3)}};function UD(t,e){let i,s,n=Bm(e),r=Nm(e),h=Lm(e);if(GD(e)){switch(n){case"line-left":i=r;break;case"center":i=r-h/2;break;case"line-right":i=r-h}s=e.OS?0:Rr(e)}else{switch(n){case"line-left":s=r;break;case"center":s=r-h/2;break;case"line-right":s=r-h}i=e.OS?0:Rr(e)}t.style.left=i+"%",t.style.top=s+"%"}function HD(t,e){for(const i of e)if(i.X3){for(const e of i.X3.f3)ro(t,BD+e);"v"===i.X3.DL.toLowerCase()&&i.X3._3&&ro(t,"theoplayer-webvtt-voice-"+i.X3._3)}}function VD(t,e){return t.YS*(OD*e)*MD}function WD(t){return t.ek-t.ZS*t.Ti/100}function qD(t,e){let i=t.nk,s=t.JS*VD(t,e)/100;return w.max(0,i-s)}function zD(t){let e=h.createElement("div");return e.className=ND+"default",ha(e),e.style.wordWrap="break-word",e.style.writingMode="horizontal-tb",e.style.pointerEvents="none",e.style.width="auto",e.style.height="auto",e.style.maxHeight="100%",e.style.minHeight="0px",e.style.padding="0",e.style.boxSizing="border-box",e.style.fontSize=OD*t+"px",e.style.lineHeight=MD+"em",e}function XD(t,e){let i=zD(e);i.className=ND+t.o;let s=t.Ti,n=VD(t,e);return i.style.width=s+"%",i.style.height=n+"px",i.style.left=WD(t)+"%",i.style.right="",i.style.top=qD(t,e)+"px",i.style.bottom="",i.style.boxSizing="border-box",i}function GD(t){return""===t.Mt}function QD(t,e){return e.some((e=>t.B3(e)))}function KD(t){return new xD(t.left,t.top,t.width,t.height)}function jD(t,e,i){switch(e){case 0:t.x3+=i;break;case 1:t.x3-=i;break;case 2:t.N3+=i;break;case 3:t.N3-=i}}function YD(t,e,i,s){switch(i){case 0:return t.C3>e.C3+s;case 1:return t.x3<e.x3-s;case 2:return t.D3>e.D3+s;case 3:return t.N3<e.N3-s}}function ZD(t,e){return w.max(0,w.min(t.C3,e.C3)-w.max(t.x3,e.x3))*w.max(0,w.min(t.D3,e.D3)-w.max(t.N3,e.N3))/(t.Ti*t.Ci)}!function(t){t[t.POS_X=0]="POS_X",t[t.NEG_X=1]="NEG_X",t[t.POS_Y=2]="POS_Y",t[t.NEG_Y=3]="NEG_Y"}(CD||(CD={}));var $o,JD=[["white","#fff"],["lime","#0f0"],["cyan","#0ff"],["red","#f00"],["yellow","#ff0"],["magenta","#f0f"],["blue","#00f"],["black","#000"]];function $D(t,e){const i=Rr(t),s=Rr(e),n=tN(i,t.OS),r=tN(s,e.OS);return n&&r?i-s||qe(e,t)||e.cw-t.cw:qe(t,e)||t.cw-e.cw}function tN(t,e){return e?t<0?t>-8:t>8:t>50}!function(t){t.FONT_REGULAR="regular",t.FONT_UNDERLINE="underline",t.FONT_ITALICS="italics",t.FONT_UNDERLINE_ITALICS="underline-italics"}($o||($o={}));var eN={_X:Yi.WHITE,fX:eD.$a,gX:"100%",vX:Yi.BLACK,wX:"transparent",mX:"none",Q3:"regular",TX:"visible",pX:void 0,yX:void 0,AX:void 0,bX:void 0},iN=[{K3:Yi.WHITE,Q3:"regular",j3:0},{K3:Yi.WHITE,Q3:"underline",j3:0},{K3:Yi.GREEN,Q3:"regular",j3:0},{K3:Yi.GREEN,Q3:"underline",j3:0},{K3:Yi.BLUE,Q3:"regular",j3:0},{K3:Yi.BLUE,Q3:"underline",j3:0},{K3:Yi.CYAN,Q3:"regular",j3:0},{K3:Yi.CYAN,Q3:"underline",j3:0},{K3:Yi.RED,Q3:"regular",j3:0},{K3:Yi.RED,Q3:"underline",j3:0},{K3:Yi.YELLOW,Q3:"regular",j3:0},{K3:Yi.YELLOW,Q3:"underline",j3:0},{K3:Yi.MAGENTA,Q3:"regular",j3:0},{K3:Yi.MAGENTA,Q3:"underline",j3:0},{K3:Yi.WHITE,Q3:"italics",j3:0},{K3:Yi.WHITE,Q3:"underline-italics",j3:0},{K3:Yi.WHITE,Q3:"regular",j3:0},{K3:Yi.WHITE,Q3:"underline",j3:0},{K3:Yi.WHITE,Q3:"regular",j3:4},{K3:Yi.WHITE,Q3:"underline",j3:4},{K3:Yi.WHITE,Q3:"regular",j3:8},{K3:Yi.WHITE,Q3:"underline",j3:8},{K3:Yi.WHITE,Q3:"regular",j3:12},{K3:Yi.WHITE,Q3:"underline",j3:12},{K3:Yi.WHITE,Q3:"regular",j3:16},{K3:Yi.WHITE,Q3:"underline",j3:16},{K3:Yi.WHITE,Q3:"regular",j3:20},{K3:Yi.WHITE,Q3:"underline",j3:20},{K3:Yi.WHITE,Q3:"regular",j3:24},{K3:Yi.WHITE,Q3:"underline",j3:24},{K3:Yi.WHITE,Q3:"regular",j3:28},{K3:Yi.WHITE,Q3:"underline",j3:28}],sN=[11,-1,1,2,3,4,12,13,14,15,5,6,7,8,9,10];function nN(t,e){return zm(t.Y3,e.Y3)||Xn(t.lT,e.lT)}var z=32,rN=/CC([1-4])=(.*)/;function hN(t){if(!t)return[];const e=[],i=t.trim().split(";");if(i.every((t=>t.match(rN))))for(const t of i){const[,i,s]=t.match(rN);e.push({Z3:Number(i),J3:s})}else for(let t=0;t<i.length;t++)e.push({Z3:t+1,J3:i[t]});return e}var oN=class t{get t4(){return this.i4.e4}get s4(){return this.i4.n4}get r4(){return this.i4.n4.j3-this.i4.e4.j3+1}get h4(){return this.i4.n4.o4-this.i4.e4.o4+1}gr(){return this.a4=this.u4(),this.c4(),this.l4(),this.a4}u4(){let t=h.createElement("div");t.style.position="absolute",t.style.margin="0",t.style.padding="0",t.style.whiteSpace="pre",t.style.width=this.r4/z*this.f4.d4*100+"%",t.style.height=1.2*this.h4+"em",t.style.lineHeight="1.2em",t.style.letterSpacing=this.f4._4?"calc(1em - 1ch)":"";const e=this.I2.fX;e&&(t.style.fontFamily=e);const i=this.I2.wX;return i&&(t.style.backgroundColor=i),t}c4(){if(!this.a4)return;let t=this.t4.o4/15*100,e=this.t4.j3/z*100,i=(z-this.s4.j3-1)/z*100,s=(15-this.s4.o4-1)/15*100;this.f4.g4||(e=i=1,this.a4.style.width="98%"),s<t?this.a4.style.bottom=s*this.f4.d4+"%":this.a4.style.top=t*this.f4.d4+"%",i<e?this.a4.style.right=i+"%":this.a4.style.left=e+"%"}l4(){const t=this.i4.v4.sort(aN);for(let e=0;e<t.length;e++)this.w4(t[e-1],t[e]),this.m4(t[e]);this.w4(t[t.length-1],void 0)}m4(e){var i;const s=$x(this.I2,e.y4),n=t.A4(s);$t(n,e.b4),null==(i=this.a4)||i.appendChild(n)}static A4(t){const e=h.createElement("span");e.style.display="inline-block",t.Q3!==$o.FONT_ITALICS&&t.Q3!==$o.FONT_UNDERLINE_ITALICS||(e.style.fontStyle="italic"),t.Q3!==$o.FONT_UNDERLINE&&t.Q3!==$o.FONT_UNDERLINE_ITALICS||(e.style.textDecoration="underline");const i=t._X;i&&(e.style.color=i);const s=t.vX;return s&&(e.style.backgroundColor=s),e.style.textShadow=uD(t.mX),e.style.height="1.2em",e}w4(t,e){let i=t?t.n4.o4:this.i4.e4.o4;const s=e?e.e4.o4:this.i4.n4.o4;let n=t?t.n4.j3:this.i4.e4.j3;const r=e?e.e4.j3:this.i4.n4.j3;i<s&&(!e||t&&t.e4.o4!==e.e4.o4?this.T4():this.S4(this.i4.n4.j3-n),n=this.i4.e4.j3),n<r&&(e?this.S4(r-n):this.T4())}T4(){var t;const e=h.createElement("br");null==(t=this.a4)||t.appendChild(e)}S4(t){var e;if(t<=0)return;const i=h.createElement("span");i.style.display="inline-block",$t(i,cg(" ",t)),null==(e=this.a4)||e.appendChild(i)}constructor(t,e,i){this.i4=t,this.f4=e,this.I2=i}};function aN(t,e){return function(t,e){if(t.o4!==e.o4)return t.o4-e.o4;return t.j3-e.j3}(t.e4,e.e4)}var uN=class extends iD{o3(t){let e=h.createElement("div");return e.className="theoplayer-cea608-texttrack-"+t,e.style.position="absolute",e.style.overflow="hidden",e.style.pointerEvents="none",e.style.top="10%",e.style.bottom="10%",this.E2.fX&&(e.style.fontFamily=this.E2.fX),e}N2(t,e){this.Za()}Za(){let t=tD(this.E2);this.E4=function(t){return{d4:t/100,_4:t<=100,g4:t<=150}}(100*t);const e=this.I4/z;this.P4=e*t,this.JO.style.fontSize=this.P4+"px"}get I4(){let t=this.JO.offsetWidth;return this.E4&&this.E4.g4||(t*=.8),t}n3(t,e,i){for(const t of e)!i&&t.oo||this.b2(t);for(const e of t)this.l3(e)}l3(t){this.E4&&this.E4.g4?this.R4(80):this.R4(100),this.Za();let e=this.T2(t);e||(e=this.d3(t),this.r3(t,e));for(const t of e)this.JO.appendChild(t)}d3(t){return t.O.map((t=>new oN(t,this.E4,this.E2).gr()))}R4(t){const e=(100-t)/2;this.JO.style.left=e+"%",this.JO.style.width=t+"%"}constructor(t,e,i,s){super(t,e,i,s,eN)}},cN=class t{C4(t){for(let e of this.x4)if(e.Ht===t)return e}static D4(t){switch(t.Iw){case Ca.TTML:case Ca.SRT:case Ca.WEBVTT:case Ca.CEA608:return!0}return!1}N4(t){switch(t.Iw){case Ca.TTML:return new fD(t,this.B4,t._h,this.E0);case Ca.SRT:case Ca.WEBVTT:return new FD(t,this.B4,t._h,this.E0);case Ca.CEA608:return new uN(t,this.B4,t._h,this.E0)}}L4(t){let e=this.C4(t);e||(e=this.N4(t),e&&(e.Jq(),e.B2(this.Sc),this.x4.push(e),t.bw===lu.Qn&&e.J2()))}O4(t){let e=this.x4;for(let i=e.length-1;i>=0;i-=1){let s=e[i];s.Ht===t&&(s.bn(),hn(e,i))}}M4(e){Ay(e.Lt)&&t.D4(e)&&(e.Nc===mn.ERROR?this.O4(e):this.L4(e))}get XJ(){return this.F4.cs}ir(){for(let t of this.x4)t.Ht.pn(ze.Bf,this.U4),t.Ht.pn(ze.Vv,this.U4),t.bn();Ce(this.x4)}bn(){this.ir();for(let t of this.x4)t.bn();this.xu.pn(ja.bv,this.H4),this.xu.pn(ja.Sv,this.V4),this.xu.pn(ze.oa,this.U4),this.F4.pn(is.oa,this.W4),this.Sc.pn("Uv",this.q4)}constructor(t,e,i,s,n){this.x4=[],this.H4=t=>{let e=t.Ht;e.wn(ze.Bf,this.U4),e.wn(ze.Vv,this.U4),e instanceof yx&&(e.XJ=this.XJ),this.M4(e)},this.U4=t=>{let e=t.Ht;this.M4(e)},this.V4=t=>{let e=t.Ht;e.pn(ze.Bf,this.U4),e.pn(ze.Vv,this.U4),this.O4(e)},this.W4=()=>{let t=this.XJ;for(let e of this.xu.Kv)e instanceof yx&&(e.XJ=t)},this.q4=()=>{for(let t of this.x4)t.B2(this.Sc)},this.z4=()=>{for(let t of this.x4)t.B2(Me({},t.M2(),{TX:"hidden"}))},this.X4=()=>{for(let t of this.x4)t.B2(Me({},t.M2(),{TX:"visible"}))},this.B4=t,this.E0=e,this.xu=i,this.F4=n,this.Sc=s,this.xu.wn(ja.bv,this.H4),this.xu.wn(ja.Sv,this.V4),this.xu.wn(ze.oa,this.U4),this.F4.wn(is.oa,this.W4),this.Sc.wn("Uv",this.q4),this.W4()}};function lN(t){const e=new UI,i=function(t){const e=[];return MI.ea(t)&&e.push(new MI(t)),FI.ea(t)&&e.push(new FI(t)),e}(t);if(i.length>0){for(const t of i)e.SW(t);e.TW(i[0])}return e}var dN,fN=class extends Qi{get JO(){return this.nB}get Xg(){return this.nB.videoHeight}get Kg(){return this.nB.videoWidth}get wa(){return this.G4}rv(){return this.nB}async Ou(){this.G4.bn(),this.Q4.bn(),this.K4.bn(),await super.Ou()}ke(){super.ke(),this.Q4.ke()}be(){super.be(),this.Q4.be()}l2(t){super.l2(t),this.Q4.l2(t)}constructor(t,e,i,s){super(t,e,i,s),this.G4=lN(t),this.Q4=new Jx,this.K4=new cN(this.Q4.je,this.k0,this.nt,this.Cu,this.wa)}};!function(t){t.j4="HELLO",t.Y4="HI_THERE",t.Z4="INITIALIZE",t.J4="APPEND_INIT",t.t6="APPEND_DATA",t.e6="ACK",t.i6="REMOVE",t.s6="DESTROY_SESSION"}(dN||(dN={}));var _N,gN=class{n6(t){return this.qX.GN((async t=>{k_(t);const e=new MessageChannel,i=e.port1,s=e.port2;il.serviceWorker.controller||await dc(il.serviceWorker,"install",t),"activated"!==il.serviceWorker.controller.state&&await dc(il.serviceWorker.controller,"activate",t);const n={kind:"HELLO",port:s};il.serviceWorker.controller.postMessage(n,[s]),i.start(),this.r6=i;try{const e=await dc(i,"message",t),s=e.data;if("HI_THERE"!==s.kind)throw new v("Could not set up message channel");this.oB=s.sessionId}catch(t){throw Aa(t)&&this.h6(),t}}),t)}o6(t,e){return this.r6,this.qX.GN((async()=>{if(!this.r6)throw new v("MessageSession not set up yet or already closed.");e||(e=[]),this.r6.postMessage(t,e);const i=await dc(this.r6,"message");return i.data}))}a6(){return this.qX.GN((()=>this.h6()))}h6(){if(!il.serviceWorker.controller)return;if("activated"!==il.serviceWorker.controller.state)return;if(!this.r6)return;const t={kind:"DESTROY_SESSION"};this.r6.postMessage(t),this.r6.close(),this.r6=void 0}constructor(){this.qX=new Uo}},vN=class{get u6(){return this.c6}l6(t,e){const i=t-e;this.c6=i>this.u6?this.c6:i}d6(t){this.c6=t}constructor(){this.c6=1/0}};!function(t){t.yy="audio",t.vl="video",t.Ty="metadata"}(_N||(_N={}));var wN=class extends Et{get bl(){return void 0===this.f6||void 0===this._6?d.Nl():new d([this.f6,this._6])}get xb(){return{rM:this.kV}}get PY(){return Di.YT}get aV(){return this.kV}get CY(){return d.Nl()}get Qq(){return 30}set Qq(t){}get Zq(){return 30}set Zq(t){}NY(t,e){}BY(t,e){}$X(){return this.g6}get ua(){return this.v6}get w6(){return this.f6}get RS(){return this._6}async LY(){}async sY(t,e){}async Hj(t,e,i){if(t.Iw!==F.xX)throw new v("Streaming or opaque segments are not supported yet.");const s=t.Ny,n=async()=>{const t=s.buffer,i={kind:dN.t6,mediaType:mN(this.kV),segment:s,startPts:e.m6,totalDuration:e.ct};if(await this.p6.o6(i,[t]),void 0===this.f6){const t=e.m6+e.NE;this.f6=t,this._6=t}this._6=this._6+e.ct,this.To(new Xi(Ou.RX))};return this.qX.GN((async t=>{k_(t);try{this.v6=!0,await n()}finally{this.v6=!1}}),i)}async qj(t,e,i){if(t.Iw!==F.xX)throw new v("Streaming or opaque initialization segments are not supported yet.");const s=t.Ny,n=async()=>{const t={kind:dN.J4,mediaType:mN(this.kV),segment:s};await this.p6.o6(t,[])};return this.qX.GN((async t=>{k_(t);try{this.v6=!0,await n()}finally{this.v6=!1}}),i)}EY(){this.g6=!0}vY(){this.g6=!1}async Qu(t,e,i){const s=async()=>{const t={kind:dN.i6,mediaType:mN(this.kV),endTime:e};await this.p6.o6(t),this.f6=void 0,this._6=void 0,this.To(new Xi(Ou.RX))};return this.qX.GN((async t=>{k_(t);try{this.v6=!0,await s()}finally{this.v6=!1}}),i)}OX(t){return this.kV===t.rM}FX(t){return this.kV=t.rM,Promise.resolve()}async Ou(){this.Lo(),await this.qX.bn()}constructor(t,e){super(),this.kV=t,this.p6=e,this.f6=void 0,this._6=void 0,this.qX=new Uo,this.v6=!1,this.g6=!1}};function mN(t){return t.match(/video/)?_N.vl:_N.yy}var pN=class t{static y6(e,i,s,n){const r=[];for(let t=0;t<e.xZ.length;t++){const s=e.xZ[t].rM;r.push(new wN(s,i))}return new t(e,r,s,n)}A6(){}get b6(){return[this.TZ,this.SZ].filter(Qf)}get mZ(){return this.TZ}get bl(){return hC(this)}get xb(){return this.al}get ct(){return 0}get $X(){var t,e,i;const s=null==(i=null==(t=this.TZ)?void 0:t.$X())||i;var n;const r=null==(n=null==(e=this.SZ)?void 0:e.$X())||n;return s&&r}get kl(){return new d([0,1/0])}get pZ(){return this.SZ}get rt(){throw new v("Not implemented")}async Ou(){await Promise.all([this.TZ,this.SZ].filter(Qf).map((t=>t.Ou())))}EZ(t){}CZ(t,e,i,s){}EY(){var t,e;null==(t=this.TZ)||t.EY(),null==(e=this.SZ)||e.EY()}vY(){var t,e;null==(t=this.TZ)||t.vY(),null==(e=this.SZ)||e.vY()}OX(t){return!0}FX(t){return this.al=t,Promise.resolve()}async BX(t,e){const i=await this.AN.yN(t.dC,e),s=await i.cN();return await this.LX(s),s}async LX(t){if(t&&!this.nB.src)throw new ss(n.CONTENT_PROTECTION_ERROR,"Attempted to attach MediaKeys to a sourceless MediaElement");if(!t&&this.nB.src)throw new ss(n.CONTENT_PROTECTION_ERROR,"Attempted to remove MediaKeys from a non-empty MediaElement");const e=this.hN;e&&(await e.aN(this.nB),this.hN=void 0),t&&(await t.kn(this.nB),this.hN=t)}constructor(t,e,i,s){this.hN=void 0,this.al=t,this.SZ=pi(e,(t=>Boolean(t.aV.match(/video/)))),this.TZ=pi(e,(t=>Boolean(t.aV.match(/audio/)))),this.AN=i,this.nB=s,this.A6()}},yN=class extends Et{T6(){this.S6.addEventListener("timeupdate",this.k6),this.S6.addEventListener("ended",this.E6),this.S6.addEventListener("timeupdate",this.I6),this.S6.addEventListener("ratechange",this.P6),this.S6.addEventListener("volumechange",this.R6),this.S6.addEventListener("durationchange",this.C6),this.S6.addEventListener("playing",this.x6),this.S6.addEventListener("seeking",this.D6),this.S6.addEventListener("play",this.N6),this.S6.addEventListener("pause",this.B6),this.S6.addEventListener("encrypted",this.e2)}L6(){this.S6.removeEventListener("timeupdate",this.k6),this.S6.removeEventListener("ended",this.E6),this.S6.removeEventListener("timeupdate",this.I6),this.S6.removeEventListener("ratechange",this.P6),this.S6.removeEventListener("volumechange",this.R6),this.S6.removeEventListener("durationchange",this.C6),this.S6.removeEventListener("playing",this.x6),this.S6.removeEventListener("seeking",this.D6),this.S6.removeEventListener("play",this.N6),this.S6.removeEventListener("pause",this.B6)}O6(){this.x0.wn(ee.Bf,this.Os)}M6(){this.x0.pn(ee.Bf,this.Os)}get JO(){return this.S6}get KZ(){return!1}get Wu(){return this.S6.currentTime+this.F6.u6}get Dc(){return this.S6.paused}get _l(){return this.S6.volume}set _l(t){this.S6.volume=t}get $u(){return this.S6.playbackRate}set $u(t){this.S6.playbackRate=t}get U6(){return this.S6.defaultPlaybackRate}get bl(){var t,e;return null!=(e=null==(t=this.tM)?void 0:t.bl)?e:d.Nl()}get H6(){return d.Sn(this.S6.buffered)}get wl(){const t=this.V6;return this.Ho.Hl(t.Ey(this.F6.u6))}get V6(){return d.Sn(this.S6.played)}get Fc(){return this.Yl}get Bc(){return!1}get $c(){return!1}get ct(){return this.S6.duration}get Xu(){return this.S6.muted}set Xu(t){this.S6.muted=t}get y4(){return this.S6.style}get d0(){return Me({},ZP,{PX:!0})}gc(t,e,i){this.J0.Jl(),this.J0=new Hi,this.$0=this.t1(t,this.$0,this.J0.M_).catch(Qo)}async t1(t,e,i){var s;this.Ho=this.wl;const n=null==(s=this.tM)?void 0:s.b6;if(!n)return;const r=w.max(...n.map((t=>t.w6?t.w6:1/0)));this.Yl=!0,this.To(new T(t)),await e.catch(Qo),k_(i);try{for(this.W6||this.q6(),this.S6.load(),this.z6||(this.X6=!1,await E_(this.S6.play(),i));this.Nc<dw.Hf;)await this.x0.eg(ee.Bf,i);this.G6.Lf(),this.W6=!1,this.Yl=!1,this.To(new ju(this.Wu))}catch(t){throw this.G6.BC(t),t}finally{this.Q6(),this.F6.d6(r)}}jl(){this.z6=!0,this.S6.pause()}async dl(){this.z6&&(this.S6.src||this.fl(),await this.G6.jf,await this.S6.play())}async Ou(){this.p6&&this.p6.a6().catch(Qo),this.J0.Jl(),this.L6(),this.M6(),this.x0.Ou(),this.Lo(),this.xu.bn()}async ir(){this.p6&&this.p6.a6().catch(Qo),this.J0.Jl(),this.S6.removeAttribute("src"),this.S6.removeAttribute("x-webkit-wirelessvideoplaybackdisabled"),this.S6.removeAttribute("x-airplay-deny"),this.S6.disableRemotePlayback=!1,this.S6.load(),this.x0.ir(),this.Ho=d.Nl()}fl(){this.u2||(Zi(this.S6,Ee.Zs),this.c2=!0)}get Nc(){return this.x0.Nc}q6(){const t=this.S6.getClientRects();let e;if(!(t.length>0))return;e=t[0];const i=e.width,s=this.S6.videoWidth/this.S6.videoHeight,n=e.height;let r,h;i/n>s?(r=n*s,h=n):(h=i/s,r=i),this.S6.style.width=r+"px",this.S6.style.height=h+"px",this.S6.style.marginLeft=(i-r)/2+"px",this.S6.style.marginTop=(n-h)/2+"px",this.S6.style.backgroundColor="black"}Q6(){this.S6.style.width="100%",this.S6.style.height="100%",this.S6.style.marginLeft="",this.S6.style.marginTop="",this.S6.style.backgroundColor=""}get Xg(){return this.S6.videoHeight}get Kg(){return this.S6.videoWidth}get Ic(){return this.S6.ended}get Ci(){return this.S6.offsetHeight*Ee.Zs.C0}get Ti(){return this.S6.offsetWidth*Ee.Zs.C0}get Eg(){return!1}get u2(){return this.c2}get qu(){}get k0(){}get lt(){}get wa(){return this.G4}get kl(){return this.tM?this.tM.kl:d.Nl()}get eM(){}get nt(){return this.xu}get Cu(){}get tv(){return!1}set tv(t){}_M(t,e,i,s,n){}cP(t,e,i,s,n,r,h,o,a){const u=new Ye(t,e,i,s,n,r,h,a,o);return this.xu.tt(u),this._1.tt(u),u}iG(t){}Rg(){return NP(this.S6)}get M0(){return"block"===this.S6.style.display}be(){this.S6.style.display="block"}ke(){this.S6.style.display="none"}o2(){}async On(t){if(t.Iw===di.vB)throw new v("Not yet implemented");await this.p6.n6();const e=pi(t.hM,(t=>t.ap.Iw===Js.Zm)),i={kind:dN.Z4,mediaBufferConfigs:t.xZ.map((t=>t.rM)),fairPlaySdkUri:null==e?void 0:e.QL};return await this.p6.o6(i),this.tM=pN.y6(t,this.p6,this.AN,this.S6),this.UX.On(this.tM,t),this.S6.setAttribute("x-webkit-airplay","deny"),this.S6.setAttribute("x-webkit-wirelessvideoplaybackdisabled",""),this.S6.disableRemotePlayback=!0,this.S6.preload="none",this.S6.src="https://theo.proxy/"+this.p6.oB+"/master.m3u8",this.tM}a2(){}mP(t){this.xu.it(t),this._1.it(t)}vM(){for(const t of this.xu.Kv.slice())t.bn();this.xu.ir()}jO(t){}dM(){return!1}l2(t){t.appendChild(this.S6)}rv(){return this.S6}p0(){}get yM(){return this.UX.yM}set yM(t){this.UX.yM=t}get d2(){}set d2(t){}get i0(){}wv(){}constructor(t,e){super(),this.W6=!0,this.p6=new gN,this.F6=new vN,this.z6=!0,this.G6=new $i,this.Yl=!1,this.$0=Promise.resolve(),this.J0=new Hi,this.X6=!0,this.Ho=d.Nl(),this.c2=!1,this.k6=()=>{this.Dc||this.H6.U<=0||this.bl.U<=0||this.F6.l6(this.bl.Pn(this.bl.U-1),this.H6.Pn(this.H6.U-1))},this.E6=()=>{this.To(new ih(this.Wu))},this.I6=()=>{this.To(new hc(this.Wu,this.qu))},this.P6=()=>{this.To(new Gs(this.Wu,this.$u))},this.R6=()=>{this.To(new Eo(this.Wu,this._l))},this.C6=()=>{this.To(new oa(this.ct))},this.x6=()=>{this.To(new _a(this.Wu))},this.D6=()=>{this.gc(this.Wu)},this.N6=async()=>{this.X6&&this.To(new ds(this.Wu)),this.z6=!1,this.X6=!0},this.B6=()=>{this.z6=!0,this.To(new mt(this.Wu))},this.e2=t=>{const e=t.initDataType;var i;const s=null!=(i=t.initData)?i:new ArrayBuffer(0);this.To(new vt(e,s))},this.S6=t,this.x0=new $s(this),this.S6.playsInline=!0,this.S6.style.width="100%",this.S6.style.height="100%",this.T6(),this.O6(),this.G4=lN(this.S6),this.UX=new Ux(this),this.AN=e,this.xu=new gn,this._1=new Tx(this)}},AN=[Di.yy,Di.vl];function bN(t){const e=h.createElement(t);return Qt(e)&&function(t){t.addEventListener("contextmenu",(t=>{t.preventDefault()}))}(e),TN(e),e}function TN(t){t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("style"),kh(t),nS(t),t.pause(),t.playbackRate=1,t.disableRemotePlayback=!1,t.preload=D.XT,t.controls=!1,t.style.display="none",Qt(t)&&(t.style.width="100%",t.style.height="100%",t.style.pointerEvents="none",t.playsInline=!0,t.setAttribute("webkit-playsinline",""))}function Zi(t,e){if(e.K6){const e=t.muted;t.muted=!0,t.muted=!1,t.muted=e}else if(t.paused){const e=t.play();Ie(e)&&M(e),t.pause()}}var SN=class{pI(t){return this.fP.pI(t)}PV(t){this.fP.PV(t)}bn(){this.fP.bn()}constructor(t){this.fP=t}},kN=class extends SN{async pI(t){const e=new vh(t),i=this.GF.Mq.RO(e);if(!i)return this.fP.pI(e);i.Uq(Ee.V_()/1e3);const s=await this.fP.pI(t);i.Hq(Ee.V_()/1e3);const n={Ny:s.BW().pipeThrough(new Ka(new EN(i))),pI:s.pI};return new ys(n,s)}constructor(t,e){super(t),this.GF=e}},EN=class{start(t){this.lX=t}transform(t){this.j6.Vq(Ee.V_()/1e3,t),this.lX.enqueue(t)}flush(){this.j6.Wq(Ee.V_()/1e3)}constructor(t){this.j6=t}};function IN(t){return{get ratio(){return t.Wo},get thresholds(){return t.Y6.slice()}}}function PN(t){const e=[],i=w.floor(1/t);if(j(i))return[];for(let s=0;s<=i;s++){const i=xu(s*t,0,1);e.push(i)}return e}var RN=class{get Wo(){return this.Z6}get Y6(){return this.J6}t5(t){return e=>{const i=e[e.length-1];this.Z6=i.intersectionRatio,t(i.intersectionRatio)}}get ma(){return this.Gu||(this.Gu=IN(this)),this.Gu}xl(){this.e5.disconnect()}constructor(t,e,i){this.Z6=1,this.Gu=void 0,this.J6=PN(e);const s=this.t5(i);this.e5=new a.IntersectionObserver(s,{root:null,threshold:this.J6}),this.e5.observe(t)}},CN=class{get Wo(){return this.Z6}get Y6(){return this.J6}get ma(){return this.Gu||(this.Gu=IN(this)),this.Gu}i5(t){this.Z6=t;const e=this.J6;let i=0;if(t>0)for(;i<e.length&&e[i]<=t;)++i;this.s5!==i&&(this.s5=i,this.n5(t))}constructor(t,e){this.Z6=1,this.s5=-1,this.Gu=void 0,this.J6=PN(t),this.n5=e}},xN=class extends CN{r5(){const t=this.wo.getBoundingClientRect();return xu(w.max(0,w.min(a.innerWidth,t.right)-w.max(0,t.left))*w.max(0,w.min(a.innerHeight,t.bottom)-w.max(0,t.top))/(t.width*t.height),0,1)}xl(){a.removeEventListener("scroll",this.h5)}constructor(t,e,i){super(e,i),this.h5=E((()=>this.i5(this.r5())),50),this.wo=t,a.addEventListener("scroll",this.h5,!!PI&&{passive:!0}),xt((()=>this.i5(this.r5())))}},DN=.1,NN=class{get o5(){return this.a5}get zo(){return this.u5}set zo(t){if(j(t)||t<0||t>1)throw new RangeError("The threshold must be a value between 0 and 1");this.u5=t}get ma(){return this.Gu||(this.Gu=function(t){return{get ratio(){return t.o5},get visible(){return t.o5>t.zo},get visibleThreshold(){return t.zo},set visibleThreshold(e){e=Mt(e),t.zo=e},addObserver:(e,i)=>(e=Mt(e),t.$o(e,i).ma),removeObserver(e){let i=t.c5(e);i&&t.Vo(i)}}}(this)),this.Gu}l5(t){return e=>{this.a5=e,null==t||t(this.a5)}}$o(t,e){if(j(t))throw new p("step is not of the right type");if(t>1||t<=0)throw new RangeError("The step must be a number greater than 0 and smaller than or equal to 1");let i;return i="function"==typeof a.IntersectionObserver?new RN(this.wo,t,this.l5(e)):new xN(this.wo,t,this.l5(e)),this.d5.push(i),i}Vo(t){t.xl(),me(this.d5,t)}c5(t){for(const e of this.d5)if(e.ma===t)return e}bn(){for(const t of this.d5)t.xl();Ce(this.d5)}constructor(t){this.a5=1,this.u5=0,this.d5=[],this.Gu=void 0,this.wo=t,this.$o(.1,this.l5())}},BN=class extends Xi{constructor(){super(o.Kw)}},LN=class{get f5(){return this._5}set f5(t){this._5=t}get ma(){var t;return null!=(t=this.Gu)?t:this.Gu=function(t){return{get conviva(){var e;return null==(e=t.f5)?void 0:e.ma}}}(this)}bn(){this._5=void 0}};var ON=class extends Xo{get g5(){return this.GF}get ol(){return this.Rl}set ol(t){this.Rl=t,this.v5.ol=t}get w5(){return this.ll}get ht(){return this.v5.ht}get m5(){return this.p5}get k0(){return this.y5}get Tg(){return this.v5.Tg}get Pg(){return this.A5}get b5(){return this.T5}get nt(){return this.v5.nt}get Cu(){return this.Sc}get rt(){return this.v5.rt}get bl(){return this.ag()}ag(){return this.v5.bl}get S5(){return this.xc}get Cz(){return this.xz}get Wu(){return this._g()}set Wu(t){this.gg(t)}_g(){return this.v5.Wu}gg(t){this.v5.Wu=t}k5(){return this._g()}get qu(){return this.v5.qu}set qu(t){this.v5.qu=t}get bt(){return this.v5.bt}get ct(){return this.vg()}vg(){return this.v5.ct}get je(){return this.v5.je}get Ic(){return this.v5.Ic}get lt(){return this.yg()}yg(){return this.v5.lt}get Ec(){return this.Ag()}Ag(){return this.v5.Ec}get wa(){return this.v5.ev()}get tv(){return this.v5.tv}set tv(t){this.v5.tv=t}get Xu(){return this.v5.Xu}set Xu(t){const e=Boolean(t);this.xg(e)}xg(t){this.v5.Xu=t,t||this.Dc||this.uv()}get Dc(){return this.v5.Dc}get $u(){return this.v5.$u}set $u(t){this.v5.$u=t}get wl(){return this.Og()}Og(){return this.v5.wl}get Mg(){return this.v5.Mg}set Mg(t){this.v5.Mg=t}get Nc(){return this.v5.Nc}get kl(){return this.Vg()}Vg(){return this.v5.kl}get Fc(){return this.v5.Fc}get cw(){return this.mS}get Xg(){return this.v5.Xg}get Kg(){return this.v5.Kg}get _l(){return this.v5._l}set _l(t){const e=xu(Number(t),0,1)||0;this.Zg(e)}get Jg(){return this.v5.Jg}Zg(t){this.v5._l=t}_a(){$r(this,sE,this)}dl(){this.v5.dl()}jl(){this.v5.jl()}qg(){return this.sF}async ba(t,e){if(this.sF=t,t){this.qf.xH(t).catch(this.E5);const i=function(t){t.sources;const e=t.sources.filter((t=>Kf(t.integration)));0;return t.sources=e,t}(t);await this.v5.ba(i,e)}}uv(){if(this.ko)return;this.v5.uv(),this.ll.uv();const t=this.je.getElementsByTagName("video");for(let e=0;e<t.length;e++){const i=t[e];"Advertisement"===i.title&&Zi(i,Ee.Zs)}this.ko=!0}cs(){return this.I5.Go()===eE.FULLSCREEN}be(){this.v5.be()}ke(){this.v5.ke()}rv(){return this.v5.rv()}wv(){this.v5.wv()}mv(){this.v5.mv()}async xl(){this.sF=void 0,await this.v5.xl(),await this.v5.ir()}async bn(){this.To(new BN),this.Lo(),this.p5.bn(),this.Gf.bn(),this.T5.bn(),this.P5.bn(),this.R5.bn(),this.I5.bn(),this.y5.bn(),this.C5.bn(),this.x5.bn(),this.ll.bn(),this.XF.bn(),await this.v5.bn()}constructor(t,e){super(),this.Rl=!1,this.ko=!1,this.sF=void 0,this.D5=!1,this.C5=new LN,this.ka=void 0,this.E5=t=>{if(this.D5)return;this.D5=!0;const e=this.N5,i=Lt(t);this.v5.$v=new Vk(this.je,i,t),M(e.bn())},this.B5=t=>{t.type!==o._m&&t.type!==o.fm&&this.To(t)};const i=Mt(e.uid);j(i)?this.mS=dm++:this.mS=i,this.xb=e;const s=Ee.Gf,n=new qP;this.x5=new mI("6.10.1",s,n),this.GF=new EP;const r=new kN(s,this.GF);this.Gf=new Bo(r,e.allowMixedContent),this.nX=new tI(e.isEmbeddable,"6.10.1",YE()),this.qf=new WP(s,this.nX,this.x5,n,e,YE()),this.qf.Xf().catch(this.E5),this.y5=new BI(t),this.y5.wn(Ui.gn,this.Os),this.Sc=new KP,this.xc=new RP,this.xz=new CP;const h=new Fh(t,e,this.Gf,this.GF,this.y5,this.Sc);this.GF.Jq(h);let a=h;a=new Fo(a,this.S5),a=new xP(a,this.Cz),this.N5=a,this.v5=new hm(this.N5),this.v5.Q_(this.B5),this.A5=new DP(this.v5),this.T5=new mP(this.v5,this.Gf,this.GF),this.P5=new TI(this),this.R5=new HI(this.v5,e.allowNativeFullscreen),this.I5=new iE(this.R5),this.y5.kn(),this.Fo=new NN(t),this.XF=new Jy(this.y5,this.Sc,1,[Di.vl]),this.ll=new $y(this.XF),this.p5=new OP}};var Fs,Tc=class extends Xo{get g5(){return this.Ko.g5}get L5(){return this.O5()}O5(){return this.Ko.L5}get C5(){return this.Ko.C5}get x5(){return this.Ko.x5}get w5(){return this.M5()}M5(){return this.Ko.w5}get ol(){return this.Ko.ol}set ol(t){this.Ko.ol=t}get P5(){return this.Ko.P5}get m5(){return this.Ko.m5}get S5(){return this.Ko.S5}get xb(){return this.Ko.xb}get k0(){return this.Ko.k0}get wa(){return this.ev()}ev(){return this.Ko.wa}get Gf(){return this.Ko.Gf}get Jg(){return this.Ko.Jg}get Cz(){return this.Ko.Cz}get b5(){return this.Ko.b5}get I5(){return this.Ko.I5}get y5(){return this.Ko.y5}get v5(){return this.Ko.v5}get Cu(){return this.Ko.Cu}get cw(){return this.Ko.cw}get Fo(){return this.Ko.Fo}get ht(){return this.rg()}rg(){return this.Ko.ht}ag(){return this.Ko.ag()}get qu(){return this.cg()}set qu(t){this.dg(t)}cg(){return this.Ko.qu}dg(t){this.Ko.qu=t}get bt(){return this.fg()}fg(){return this.Ko.bt}_g(){return this.Ko._g()}gg(t){this.Ko.gg(t)}k5(){return this.Ko.k5()}vg(){return this.Ko.vg()}get je(){return this.Ko.je}get Ic(){return this.pg()}pg(){return this.Ko.Ic}yg(){return this.Ko.yg()}Ag(){return this.Ko.Ag()}get Tg(){return this.Sg()}Sg(){return this.Ko.Tg}get tv(){return this.Ko.tv}set tv(t){this.Ko.tv=t}get Pg(){return this.Rg()}Rg(){return this.Ko.Pg}get Xu(){return this.Cg()}set Xu(t){this.xg(t)}Cg(){return this.Ko.Xu}xg(t){this.Ko.xg(t)}get Dc(){return this.Bg()}Bg(){return this.Ko.Dc}get $u(){return this.Lg()}set $u(t){this.Iu(t)}Lg(){return this.Ko.$u}Iu(t){this.Ko.$u=t}Og(){return this.Ko.Og()}get Mg(){return this.Fg()}set Mg(t){this.Ug(t)}Fg(){return this.Ko.Mg}Ug(t){this.Ko.Mg=t}get Nc(){return this.Hg()}Hg(){return this.Ko.Nc}get ka(){return this.Ko.ka}set ka(t){this.Ko.ka=t}Vg(){return this.Ko.Vg()}get Fc(){return this.Wg()}Wg(){return this.Ko.Fc}get nt(){return this.zg()}zg(){return this.Ko.nt}get Xg(){return this.Gg()}Gg(){return this.Ko.Xg}get rt(){return this.Qg()}Qg(){return this.Ko.rt}get Kg(){return this.jg()}jg(){return this.Ko.Kg}get _l(){return this.Yg()}set _l(t){this.Zg(t)}Yg(){return this.Ko._l}Zg(t){this.Ko.Zg(t)}uv(){this.Ko.uv()}jl(){this.Ko.jl()}dl(){this.Ko.dl()}be(){this.Ko.be()}ke(){this.Ko.ke()}cs(){return this.Ko.cs()}rv(){return this.Ko.rv()}wv(){this.Ko.wv()}mv(){this.Ko.mv()}_a(){this.Ko._a()}qg(){return this.Ko.qg()}ba(t,e){return this.Ko.ba(t,e)}xl(){return this.Ko.xl()}yv(t){return!1}async bn(){this.Lo(),await this.Ko.bn()}constructor(t,e){super(),this.Av=t=>{this.yv(t)||this.To(t)},this.Ko=t,this.F5=!e,this.F5&&t.Q_(this.Av)}};!function(t){t[t.U5=0]="U5",t[t.H5=1]="H5",t[t.V5=2]="V5",t[t.W5=3]="W5"}(Fs||(Fs={}));var MN=[0,1,2,3],FN={};function UN(t,e){(FN[e]||(FN[e]=[])).push(t)}var HN={};function VN(t,e){(HN[e]||(HN[e]=[])).push(t)}var WN=[];function qN(t){for(const e of WN)e(t)}var zN=self.CustomEvent;var XN=function(){try{const t=new zN("cat",{detail:{foo:"bar"}});return"cat"===t.type&&"bar"===t.detail.foo}catch(t){}return!1}()?function(t,e){return new CustomEvent(t,e)}:function(t,e){const i=h.createEvent("CustomEvent");return i.initCustomEvent(t,(null==e?void 0:e.bubbles)||!1,(null==e?void 0:e.cancelable)||!1,null==e?void 0:e.detail),i};var GN=new class{get U(){return this.uS.length}get ma(){var t;return null!=(t=this.Gu)?t:this.Gu=function(t){const e=[];for(let i=0;i<t.U;i++)e[i]=t.Zv(i).ma;return e.getPlayerByUID=e=>{const i=t.q5(e);return i&&i.ma},e}(this)}Zv(t){return this.uS[t]}pG(t){this.uS.push(t),this.ma.push(t.ma)}Qu(t){const e=this.uS.indexOf(t);e<0||(hn(this.uS,e),this.Gu&&hn(this.Gu,e))}q5(t){for(const e of this.uS)if(e.cw===t)return e}constructor(){this.uS=[],this.Gu=void 0}};var Kh,QN=class extends Xi{constructor(t){super(o.do),this.source=t}},KN=class extends Xo{get qu(){}set qu(t){}get Wu(){return this._g()}set Wu(t){this.gg(t)}_g(){return this.FF}k5(){return this._g()}gg(t){this.Yl&&this.FF===t||(this.FF=t,this.Yl=!0,this.To(new T(this.FF)))}get Dc(){return this.Ql}get $u(){return this.HF}set $u(t){this.HF!==t&&(this.HF=t,this.To(new Gs(this.FF,this.$u)))}get Nc(){return dw.zl}get Fc(){return this.Yl}dl(){this.Ql&&(this.Ql=!1,this.To(new ds(this.FF)),this.To(new ki(this.FF)))}jl(){this.Ql||(this.Ql=!0,this.To(new hc(this.FF,this.qu)),this.To(new mt(this.FF)))}ir(){this.FF=0,this.Yl=!1,this.HF=1,this.jl()}bn(){this.Lo()}ke(){}be(){}constructor(){super(),this.FF=0,this.Ql=!0,this.Yl=!1,this.HF=1}},jN={zIndex:"1",display:"inline-block",verticalAlign:"middle",backgroundRepeat:"no-repeat",backgroundPosition:"50% 50%",backgroundSize:"contain",cursor:"pointer",margin:"0",padding:"0",position:"absolute",top:"0",right:"0",bottom:"0",left:"0",height:"100%"},YN={visibility:"hidden"},ZN={visibility:"visible"},JN=class{get TI(){return void 0!==this.z5?this.z5:void 0!==this.X5?this.X5:void 0}set G5(t){this.X5=t,this.Kn()}Kn(){const t=this.Ko.Dc,e=this.Q5;this.TI?this.Hs.style.backgroundImage='url("'+gg(this.TI)+'")':this.Hs.style.backgroundImage="",t&&this.TI&&!e?this.be():this.ke()}be(){ph(YN,this.Ko.je),ph(ZN,this.Hs)}ke(){ph(YN,this.Hs),ph(ZN,this.Ko.je)}eF(){this.Ko.wn(o.do,this.K5),this.Ko.wn(o.Ph,this.DB)}bn(){this.Ko.pn(o.do,this.K5),this.Ko.pn(o.Ph,this.DB),dt(this.Hs)}constructor(t){this.Q5=!1,this.K5=t=>{var e;this.Q5=!this.Ko.Dc,this.z5=null==(e=t.source)?void 0:e.poster,this.Kn()},this.DB=()=>{this.Q5=!0,this.ke()},this.Ko=t,this.eF(),this.Hs=function(){let t=fa&&fa.document&&fa.document.createElement("div");return t.className="theoplayer-poster",ph(jN,t),t}(),t.je.appendChild(this.Hs)}};function $N(t){let e;const i={get playing(){return t.j5},get currentAds(){return t.Y5.map((t=>t.Z5()))},get currentAdBreak(){var e,i;return null!=(i=null==(e=t.J5)?void 0:e.Z5())?i:null},get scheduledAds(){return t.t8.map((t=>t.Z5()))},get scheduledAdBreaks(){return t.e8.map((t=>t.Z5()))},skip(){t.zy()},schedule(e){let i=CE(e,Gn.lC);i?t.m$(i,Kh.i8,!1):console.error("Invalid ad description")},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new wi(t,i),i}!function(t){t[t.i8=0]="i8",t[t.s8=1]="s8"}(Kh||(Kh={}));var tB,$n=class extends la{constructor(t,e){super(t),this.n8=e}},ur=class extends Xi{get ad(){return this.adBreak}constructor(t,e){super(t),this.adBreak=e}},eB=class extends $n{pa(){return new iB(this.n8.Z5())}constructor(t){super("r8",t)}},iB=class extends ur{constructor(t){super("removeadbreak",t)}},sB=class extends $n{pa(){return new nB(this.n8.Z5())}constructor(t){super("h8",t)}},nB=class extends ur{constructor(t){super("addadbreak",t)}},Lh=class extends la{constructor(t,e){super(t),this.o8=e}},va=class extends Xi{constructor(t,e){super(t),this.ad=e}},rB=class extends Lh{pa(){return new hB(this.o8.Z5())}constructor(t){super("a8",t)}},hB=class extends va{constructor(t){super("addad",t)}},To=class extends $n{pa(){return new oB(this.n8.Z5())}constructor(t){super("u8",t)}},oB=class extends ur{constructor(t){super("adbreakend",t)}},qc=class extends $n{pa(){return new aB(this.n8.Z5())}constructor(t){super("c8",t)}},aB=class extends ur{constructor(t){super("adbreakbegin",t)}},vr=class extends Lh{pa(){return new uB(this.o8.Z5(),this.currentTime)}constructor(t,e){super("l8",t),this.currentTime=e}},uB=class extends va{constructor(t,e){super("adbegin",t),this.currentTime=e}},Eh=class extends Lh{pa(){return new cB(this.o8.Z5(),this.currentTime)}constructor(t,e){super("d8",t),this.currentTime=e}},cB=class extends va{constructor(t,e){super("adend",t),this.currentTime=e}},lB=class extends la{pa(){return new dB}constructor(){super("f8")}},dB=class extends Xi{constructor(){super("adadded")}},fB=class extends Xo{get j5(){return!!this._8&&this._8.j5}get Y5(){return this._8?this._8.Y5:[]}get J5(){return this._8?this._8.J5:null}get t8(){return this._8?this._8.t8:[]}get e8(){return this._8?this._8.e8:[]}m$(t,e,i){var s;null==(s=this._8)||s.m$(t,e,i)}g8(t){var e;null==(e=this._8)||e.g8(t)}zy(){var t;null==(t=this._8)||t.zy()}v8(t){var e;null==(e=this._8)||e.v8(t)}get ma(){var t;return null!=(t=this.Gu)?t:this.Gu=$N(this)}get $v(){return this._8}set $v(t){const e=this._8;if(e===t)return;const i=this.Y5,s=this.J5,n=this.t8,r=this.e8;null==e||e.J_(this.Os),this._8=t,null==t||t.Q_(this.Os);const h=this.Y5,o=this.J5,a=this.t8,u=this.e8,c=[];let l=!1;for(const t of r)Bc(u,t)||c.push(new eB(t));for(const t of u)Bc(r,t)||c.push(new sB(t));for(const t of a)Bc(n,t)||(c.push(new rB(t)),l=!0);l&&c.push(new lB),s!==o&&(s&&c.push(new To(s)),o&&c.push(new qc(o)));for(const t of i)Bc(h,t)||c.push(new Eh(t,this.Ko._g()));for(const t of h)Bc(i,t)||c.push(new vr(t,this.Ko._g()));for(const t of c)this.To(t)}bn(){var t;return this.Lo(),null==(t=this._8)||t.J_(this.Os),this._8=void 0,Promise.resolve()}constructor(t){super(),this.Gu=void 0,this.Ko=t}},_B=class extends Xo{get j5(){return!1}get Y5(){return[]}get J5(){return null}get t8(){return[]}get e8(){return[]}m$(t,e,i){this.w8.push({m8:t,p8:e,y8:i})}zy(){}v8(t){}get ma(){var t;return null!=(t=this.Gu)?t:this.Gu=$N(this)}g8(t){const e=this.w8.slice();this.ir();for(const i of e)t.m$(i.m8,i.p8,i.y8)}A8(){const t=this.w8.map((t=>t.m8));return this.ir(),t}ir(){Ce(this.w8)}bn(){return this.Lo(),this.ir(),Promise.resolve()}constructor(...t){super(...t),this.Gu=void 0,this.w8=[]}};function gB(t){return class extends Xo{get x5(){return this.b8.x5}get L5(){return this._8}get C5(){return this.b8.C5}get P5(){return this.b8.P5}get xb(){return this.b8.xb}get Gf(){return this.b8.Gf}get wa(){return this.b8.wa}get I5(){return this.b8.I5}get y5(){return this.b8.y5}get v5(){return this.b8.v5}get g5(){return this.b8.g5}get ol(){return this.b8.ol}set ol(t){this.b8.ol=t,this.hl()}get w5(){return this.b8.w5}get ht(){return this.b8.ht}get m5(){return this.b8.m5}get k0(){return this.b8.y5}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}get Tg(){return this.b8.Tg}get tv(){return this.b8.tv}set tv(t){this.b8.tv=t}get Pg(){return this.b8.Pg}get b5(){return this.b8.b5}get nt(){return this.b8.nt}get Cu(){return this.b8.Cu}get rt(){return this.b8.rt}get S5(){return this.b8.S5}get Cz(){return this.b8.Cz}get qu(){return this.Ko.qu}set qu(t){this.Ko.qu=t}get bt(){return this.b8.bt}get je(){return this.b8.je}get Ic(){return this.b8.Ic}get Xu(){return this.b8.Xu}set Xu(t){this.xg(t)}get Dc(){return this.Ko.Dc}get mi(){return this.T8.TI||""}set mi(t){this.T8.G5=t}get $u(){return this.b8.$u}set $u(t){this.Ko.$u=t}get Mg(){return this.b8.Mg}set Mg(t){this.b8.Mg=t}get Nc(){return this.Ko.Nc}get ka(){return this.b8.ka}set ka(t){this.b8.ka=t}get Fc(){return this.Ko.Fc}get cw(){return this.b8.cw}get Xg(){return this.b8.Xg}get Kg(){return this.b8.Kg}get _l(){return this.b8._l}set _l(t){this.Zg(t)}get Jg(){return this.b8.Jg}get Fo(){return this.b8.Fo}async GN(t,e){return this.qX.GN(t,e).catch(B)}async S8(t,e){k_(e),this.b8.Q_(this.k8);try{await this.b8.ba(t,e)}finally{this.b8.J_(this.k8)}}async hl(){const t=await this.E8();this.I8(t)}async E8(){const t=this.qg();return t&&!mE(t)&&this.ol&&this.Dc?this.w5.cl(this.Xu):"none"}I8(t){var e;const i=(null==(e=this.qg())?void 0:e.mutedAutoplay)||this.xb.mutedAutoplay;switch(t){case"all":this.P8();break;case"muted":(this.Xu||i===Jw.ALL)&&(this.Xu=!0,this.dl())}}ba(t){mE(this.sF)||this.To(new $a(0,dw.zl)),this.ir(),this.sF=t,M(this.GN((async e=>{k_(e);try{await this.S8(t,e)}catch(t){return this.sF=void 0,void this.OM(function(t,e){return t instanceof jr?t:t instanceof v?new jr(e,t.message,t):new jr(e,String(t))}(t,n.SOURCE_NOT_SUPPORTED))}finally{this.C8(this.b8)}const i=await this.E8();this.To(new QN(this.qg())),this.I8(i)})))}gg(t){this.Ko.gg(t)}yg(){var t;return null!=(t=this.ZF)?t:this.b8.yg()}Ag(){var t;return null!=(t=this.ZO)?t:this.b8.Ag()}OM(t){void 0===this.Ag()&&(this.ZO=t,this.ZF=Lt(t),this.To(new Vo(t)))}dl(){this.Ko.dl()}P8(){this.Xu||this.uv(),this.dl()}uv(){this.b8.uv()}jl(){this.Ko.jl()}xl(){this.ba(void 0)}be(){this.oF=!0,this.Ko.be()}ke(){this.oF=!1,this.Ko.ke()}_a(){this.b8._a()}Zg(t){this.b8.Zg(t)}xg(t){this.b8.xg(t)}ja(t){this.x8=t,t.pG(this)}cs(){return this.b8.cs()}qg(){return this.sF}rv(){return this.b8.rv()}_g(){return this.Ko._g()}k5(){return this.Ko.k5()}vg(){return this.b8.vg()}ag(){return this.b8.ag()}Og(){return this.b8.Og()}Vg(){return this.b8.Vg()}wv(){this.b8.wv()}mv(){this.b8.mv()}ir(){this.sF=void 0,this.ZO=void 0,this.ZF=void 0,this.D8=!0,Ce(this.N8),this.B8.ir(),this.C8(this.B8),this.qX.Jl(),M(this.qX.GN((async t=>{k_(t),await this.b8.xl()})))}bn(){this.To(new BN),this.T8.bn(),this.iF(),this.ir(),M(this.GN((async()=>{await this.b8.bn(),this.x8&&(this.x8.Qu(this),this.x8=void 0),this.qX.bn()}))),this.Lo()}C8(t){if(this.Ko===t)return;const e=this.Ko.Dc,i=this.Ko._g(),s=this.Ko.$u,n=this.Ko.Nc,r=this.Ko.Fc;this.L8=e,this.f2=n,this.iF(),t.Q_(this.O8),t===this.b8?(void 0!==this._8&&(this._8.$v=t.L5,this.M8.g8(this._8)),(r||t._g()!==i)&&t.gg(i),t.$u!==s&&(t.$u=s),e?t.jl():t.dl()):(void 0!==this._8&&(this._8.$v=this.M8,this.M8.ir()),this.xb.retainPlaybackRateOnSourceChange?t.$u=s:1!==s&&this.To(new Gs(this._g(),1))),t.J_(this.O8),this.Ko=t,this.eF();for(const t of this.N8)this.To(t);Ce(this.N8),this.oF?t.be():t.ke()}eF(){this.Ko.Q_(this.pv)}iF(){this.Ko.J_(this.pv)}pa(){return function(t){let e,i;const s=e=>{i=e;const s=gi(e,t.xb);t.ba(s)};let n={get abr(){return t.g5.ma},get ads(){var e;return null==(e=t.L5)?void 0:e.ma},get analytics(){return t.C5.ma},get audioTracks(){return t.ht.ma},get autoplay(){return t.ol},set autoplay(e){t.ol=Boolean(e)},get buffered(){return t.ag()},get canvas(){return t.P5.ma},get cast(){var e;return null==(e=t.m5)?void 0:e.ma},get clip(){return t.S5.ma},get currentProgramDateTime(){var e;return null!=(e=t.qu)?e:null},set currentProgramDateTime(e){t.qu=null!=e?e:void 0},get currentTime(){return t._g()},set currentTime(e){t.gg(Number(e))},get duration(){return t.vg()},get element(){return t.je},get ended(){return t.Ic},get error(){return t.yg()},get errorObject(){return t.Ag()},get loop(){return t.Cz.Cz},set loop(e){t.Cz.Cz=Boolean(e)},get metrics(){return t.Pg.ma},get muted(){return t.Xu},set muted(e){t.xg(e)},get network(){return t.b5.ma},get paused(){return t.Dc},get playbackRate(){return t.$u},set playbackRate(e){const i=Number(e);if(i<0)throw new RangeError("playbackRate must be a positive number");t.$u=i},get played(){return t.Og()},get poster(){return t.mi},set poster(e){t.mi=Oi(e)},get preload(){return t.Mg},set preload(e){t.Mg=function(t){switch(t){case"auto":case"":return"auto";case"metadata":return"metadata";default:return"none"}}(e)},get presentation(){return t.I5.ma},get readyState(){return t.Nc},get seekable(){return t.Vg()},get seeking(){return t.Fc},get source(){return i},set source(t){s(t)},get src(){return bE(t.qg())},set src(t){s({sources:t})},get textTracks(){return t.nt.ma},get textTrackStyle(){return t.Cu.ma},get uid(){return t.cw},get videoHeight(){return t.Xg},get videoTracks(){return t.rt.ma},get videoWidth(){return t.Kg},get visibility(){return t.Fo.ma},get volume(){return t._l},set volume(e){t.Zg(Number(e))},get latency(){return t.Jg.ma},destroy(){t.bn(),t=null,i=void 0},play(){t.P8()},pause(){t.jl()},stop(){i=void 0,t.xl()},prepareWithUserAction(){t.uv()},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)},setSource(t){s(t)}};return e=new Ut(n,!0),e.eU(t),e.wn("destroy",(()=>{e.bn()})),n}(this)}constructor(e,i){super(),this.L8=!0,this.f2=dw.zl,this.D8=!1,this.sF=void 0,this.ZO=void 0,this.ZF=void 0,this.k8=t=>{t.type!==o.Vu&&this.N8.push(t)},this.O8=t=>{(t.type!==o.Ph||this.Ko.Dc)&&(t.type===o.Ch&&this.Ko.Dc||t.type===o.If&&this.Ko.Fc&&this.Ko._g()===t.currentTime||t.type===o.Vu&&this.Ko.$u===t.playbackRate||this.To(t))},this.pv=t=>{if(this.D8){if(t.type===ee.Yf)return;t.type!==ee.pl&&t.type!==ee.Qf||(this.D8=!1)}if(t.type===o.Ph){if(!this.L8)return;this.L8=!1}else if(t.type===o.Ch){if(this.L8)return;this.L8=!0}else if(t.type===ee.Bf){if(this.f2===t.readyState)return;this.f2=t.readyState}else if(t.type===o.Kw)return;this.To(t)},this.b8=new t(e,i),this.B8=new KN,this.Ko=this.b8,this.T8=new JN(this),this.b8.L5&&(this._8=new fB(this),this._8.$v=this.b8.L5,this.M8=new _B),this.qX=new Uo,this.N8=[],this.oF=!0,this.eF()}}}function vB(){if(!tB){let t=ON;t=function(t){return class extends Tc{constructor(e,i){let s=new t(e,i);for(const t of MN)if(HN[t])for(const e of HN[t])s=e(s);super(s)}}}(t);let e=gB(t);e=function(t){let e=t;for(const t of MN)if(FN[t])for(const i of FN[t])e=i(e);return e}(e),tB=e}return tB}function wB(t,e){const i=em(e),s=new(vB())(t,i);s.ka=s;let n=s.ma;return s._a(),s.ja(GN),g.defineProperty(n,"constructor",{value:wB}),n=M_(n),qN(s),n}xt((()=>{self.dispatchEvent&&self.dispatchEvent(XN("theoplayerready"))}));var mB={base64:new class{encode(t){return Oe(t)}decode(t){return Pt(t)}}},pB=JSON.parse('["dash","hls","chromecast","ads","airplay","cache","webaudio","mediatailor","ui","texttrackstyle-ui","multiview"]');function yB(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),g.defineProperty(t,s.key,s)}}function AB(t,e){var i=function(t,e){var i=t.length;if(i<=1)return t;for(var s=new Array(i),n=1;n<i;n*=2){bB(t,e,n,s);var r=t;t=s,s=r}return t}(t,e);return i!==t&&bB(i,null,t.length,t),t}function bB(t,e,i,s){var n,r,h,o,a,u=t.length,c=0,l=2*i;for(n=0;n<u;n+=l)for(h=(r=n+i)+i,r>u&&(r=u),h>u&&(h=u),o=n,a=r;;)if(o<r&&a<h)e(t[o],t[a])<=0?s[c++]=t[o++]:s[c++]=t[a++];else if(o<r)s[c++]=t[o++];else{if(!(a<h))break;s[c++]=t[a++]}}var TB=/[a-zA-Z]/,SB=/[0-9]/,kB=/[0-9a-fA-F]/,EB=/^0x/i,IB=/^[0-9]+$/,PB=/^[0-9a-fA-F]+$/,RB=/^[0-7]+$/,CB=g.prototype.toString,xB=Array.isArray||function(t){return"[object Array]"===CB.call(t)},DB="undefined"!=typeof Symbol&&"symbol"==typeof Symbol.iterator;function NB(t){return xB(t)?t:Array.from(t)}function BB(t,e,i){var s=t[e];t[e]=t[i],t[i]=s}function LB(t){return t>=65&&t<=90}function OB(t){return LB(t)||function(t){return t>=97&&t<=122}(t)}function MB(t){return t>=48&&t<=57}function FB(t){return MB(t)||OB(t)}function UB(t){return MB(t)||t>=65&&t<=70||t>=97&&t<=102}function HB(t){return LB(t)?t+32:t}function VB(t){return MB(t)?t-48:t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:-1}function WB(t,e){return void 0===e&&(e=!1),0<=t&&t<=9?t+48:10<=t&&t<=15?t+(e?87:55):-1}var qB=w.min,zB=String.fromCharCode,XB=16384;function GB(t){for(var e=t.length,i=[],s=0;s<e;s+=XB){var n=qB(s+XB,e);i.push(zB.apply(null,t.slice(s,n)))}return i.join("")}var QB=2147483647,KB=/[^\0-\x7E]/,jB=/[\x2E\u3002\uFF0E\uFF61]/g,YB={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ZB=w.floor,JB=String.fromCharCode;function $B(t){throw new RangeError(YB[t])}function Vs(t){for(var e=[],i=0,s=t.length;i<s;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&n)<<10)+(1023&r)+65536):(e.push(n),i--)}else e.push(n)}return e}var tL,eL,iL,sL=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},nL=function(t,e,i){var s=0;for(t=i?ZB(t/700):t>>1,t+=ZB(t/e);t>455;s+=36)t=ZB(t/35);return ZB(s+36*t/(t+38))},rL=function(t){return function(t,e){var i=t.split("@"),s="";i.length>1&&(s=i[0]+"@",t=i[1]);var n=function(t,e){for(var i=[],s=t.length;s--;)i[s]=e(t[s]);return i}((t=t.replace(jB,".")).split("."),e).join(".");return s+n}(t,(function(t){return KB.test(t)?"xn--"+function(t){for(var e=[],i=(t=Vs(t)).length,s=128,n=0,r=72,h=0,o=t;h<o.length;h++){var a=o[h];a<128&&e.push(JB(a))}var u=e.length,c=u;for(u&&e.push("-");c<i;){for(var l=QB,d=0,f=t;d<f.length;d++){var _=f[d];_>=s&&_<l&&(l=_)}var g=c+1;l-s>ZB((QB-n)/g)&&$B("overflow"),n+=(l-s)*g,s=l;for(var v=0,w=t;v<w.length;v++){var m=w[v];if(m<s&&++n>QB&&$B("overflow"),m==s){for(var p=n,y=36;;y+=36){var A=y<=r?1:y>=r+26?26:y-r;if(p<A)break;var b=p-A,T=36-A;e.push(JB(sL(A+b%T,0))),p=ZB(b/T)}e.push(JB(sL(p,0))),r=nL(n,g,c==u),n=0,++c}}++n,++s}return e.join("")}(t):t}))};function hL(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];s>65535&&(s-=65536,e.push(s>>>10&1023|55296),s=56320|1023&s),e.push(s)}return GB(e)}function oL(t){if(t>=55296&&t<=57343)throw new v("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function aL(t,e){return t>>e&63|128}function uL(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(oL(t),e.push(t>>12&15|224),e.push(aL(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(aL(t,12)),e.push(aL(t,6))),e.push(63&t|128)):e.push(t)}function cL(t){for(var e=[],i=0;i<t.length;i++){uL(t[i],e)}return e}function lL(){if(iL>=eL)throw new v("Invalid byte index");var t=255&tL[iL];if(iL++,128==(192&t))return 63&t;throw new v("Invalid continuation byte")}function dL(){var t,e;if(iL>eL)throw new v("Invalid byte index");if(iL===eL)return!1;if(t=255&tL[iL],iL++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|lL())>=128)return e;throw new v("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|lL()<<6|lL())>=2048)return oL(e),e;throw new v("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|lL()<<12|lL()<<6|lL())>=65536&&e<=1114111)return e;throw new v("Invalid UTF-8 detected")}function fL(t){return[37,WB(t>>4),WB(15&t)]}function _L(t){return function(t){return t>=0&&t<=31}(t)||t>126}function gL(t){return _L(t)||32===t||34===t||60===t||62===t||96===t}function vL(t){return gL(t)||35===t||63===t||123===t||125===t}function wL(t){return vL(t)||47===t||58===t||59===t||61===t||64===t||t>=91&&t<=94||124===t}function mL(t){return t<33||t>126||34===t||35===t||60===t||62===t}function pL(t){return mL(t)||39===t}function as(t,e){if(!e(t))return[t];for(var i=cL([t]),s=[],n=0;n<i.length;n++){var r=i[n];s.push.apply(s,fL(r))}return s}function yL(t,e){for(var i=[],s=0,n=Vs(t);s<n.length;s++){var r=n[s];i.push.apply(i,as(r,e))}return hL(i)}function AL(t){return function(t){for(var e=[],i=t.length,s=0;s<i;s++){var n=t[s];if(37===n&&s+2<i&&UB(t[s+1])&&UB(t[s+2])){var r=VB(t[s+1])<<4|VB(t[s+2]);e.push(r),s+=2}else e.push(n)}return e}(cL(t))}function bL(t){return hL(function(t){tL=t.slice(),eL=tL.length,iL=0;for(var e,i=[];!1!==(e=dL());)i.push(e);return i}(AL(Vs(t))))}function TL(t){var e=t.length,i=[0,0,0,0,0,0,0,0],s=0,n=null,r=0;if(r<e&&":"===t[r]){if(!(r+1<e&&":"===t[r+1]))throw new p;r+=2,n=s+=1}for(;r<e;){if(8===s)throw new p("Too many groups");if(":"!==t[r]){for(var h=0,o=0;o<4&&r<e&&kB.test(t[r]);)h=h<<4|k(t[r],16),r+=1,o+=1;if("."===t[r]){if(0===o)throw new p;if(r-=o,s>6)throw new p;for(var a=0;r<e;){var u=null;if(a>0){if(!("."===t[r]&&a<4))throw new p;r+=1}if(!SB.test(t[r]))throw new p;for(;r<e&&SB.test(t[r]);){var c=k(t[r],10);if(null===u)u=c;else{if(0===u)throw new p;if((u=10*u+c)>255)throw new p}r+=1}i[s]=i[s]<<8|u,2!==(a+=1)&&4!==a||(s+=1)}if(4!==a)throw new p;break}if(":"===t[r]){if((r+=1)===e)throw new p}else if(r<e)throw new p;i[s]=h,s+=1}else{if(null!==n)throw new p("Too many :: groups");r+=1,n=s+=1}}if(null!==n){var l=s-n;for(s=7;0!==s&&l>0;)BB(i,s,n+l-1),s-=1,l-=1}else if(8!==s)throw new p;return i}function SL(t){var e=10,i=IB;return EB.test(t)?(t=t.slice(2),e=16,i=PB):t.length>=2&&"0"===t[0]&&(t=t.slice(1),e=8,i=RB),""===t?0:i.test(t)?k(t,e):void 0}var kL={vJ:4},EL=/[\0\t\n\r #%/:?@\[\\\]]/,IL=/[\0\t\n\r #/:?@\[\\\]]/;function PL(t,e){if("["===t[0]){if("]"!==t[t.length-1])throw new p("Invalid IPv6 address");return{vJ:2,F8:TL(t.slice(1,-1))}}if(!e)return function(t){if(IL.test(t))throw new p("Invalid code point in opaque host");var e=yL(t,_L);return""===e?kL:{vJ:3,Mx:e}}(t);var i=function(t){var e=function(t){return rL(t.toLowerCase())}(t);return e}(bL(t));if(EL.test(i))throw new p("Invalid code point in host");var s=function(t){var e=t.split(".");if(""===e[e.length-1]&&e.pop(),!(e.length>4)){for(var i=[],s=0;s<e.length;s++){var n=e[s];if(""===n)return;var r=SL(n);if(void 0===r)return;i.push(r)}for(var h=0;h<i.length-1;h++)if(i[h]>255)throw new p;if(i[i.length-1]>=w.pow(256,5-i.length))throw new p;for(var o=i.pop(),a=0;a<i.length;a++)o+=i[a]*w.pow(256,3-a);return o}}(i);return void 0!==s?{vJ:1,F8:s}:""===i?kL:{vJ:0,U8:i}}function RL(t){switch(t.vJ){case 0:return t.U8;case 1:return function(t){for(var e=[],i=t,s=1;s<=4;s++)e.push(""+(255&i)),4!==s&&e.push("."),i>>>=8;return e.reverse().join("")}(t.F8);case 2:return"["+function(t){for(var e="",i=function(t){for(var e=0,i=0,s=0,n=0,r=0;r<8;r++)0===t[r]?(0===n&&(s=r),n++):(n>i&&(e=s,i=n),n=0);return n>i&&(e=s,i=n),i>1?e:null}(t),s=!1,n=0;n<8;n++){if(s){if(0===t[n])continue;s=!1}i!==n?(e+=t[n].toString(16),7!==n&&(e+=":")):(e+=0===n?"::":":",s=!0)}return e}(t.F8)+"]";case 3:return t.Mx;case 4:return""}}var CL=/\+/g;function xL(t){return 42===t||45===t||46===t||95===t||FB(t)}function DL(t){for(var e=t.split("&"),i=[],s=0;s<e.length;s++){var n=e[s];if(""!==n){var r=n.indexOf("="),h=void 0,o=void 0;-1!==r?(h=n.slice(0,r),o=n.slice(r+1)):(h=n,o=""),h=h.replace(CL," "),o=o.replace(CL," ");var a=bL(h),u=bL(o);i.push([a,u])}}return i}function NL(t){for(var e="",i=0;i<t.length;i++){var s=t[i];i>0&&(e+="&"),e+=BL(cL(Vs(s[0])))+"="+BL(cL(Vs(s[1])))}return e}function BL(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];32===s?e.push(43):xL(s)?e.push(s):e.push.apply(e,fL(s))}return GB(e)}var LL=/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/;function $h(t){var e=""+t,i=LL.exec(e);return i?function(t,e){for(var i=t.length,s=[],n=e;n<i;n++){var r=t.charCodeAt(n);if(ML(r))if(FL(r)||n===i-1)s.push(OL);else{var h=t.charCodeAt(n+1);FL(h)?(s.push(r,h),n++):s.push(OL)}else s.push(r)}return t.slice(0,e)+GB(s)}(e,i.index):e}var OL=65533,ML=function(t){return 55296==(63488&t)},FL=function(t){return 0!=(1024&t)};function UL(t,e){var i=t[0],s=e[0];return i===s?0:i<s?-1:1}function HL(t){t.H8.length=0}function VL(t,e){!function(t,e){for(var i=0;i<e.length;i++)t[i]=e[i];t.length=e.length}(t.H8,DL(e))}function WL(t){if(t.V8){var e=NL(t.H8);""===e&&(e=null),t.V8.V8.W8=e}}var qL=function(){function t(t){if(void 0===t&&(t=void 0),this.V8=null,null==t)this.H8=[];else if("object"==typeof t||"function"==typeof t)if(function(t){return t instanceof qL&&!!xB(t.H8)&&(!DB||t[Symbol.iterator]===zL)}(t))this.H8=t.H8.slice();else if(function(t){return null!=t&&(!!xB(t)||!!DB&&"function"==typeof t[Symbol.iterator])}(t)){this.H8=[];for(var e=0,i=NB(t);e<i.length;e++){var s=NB(i[e]);if(2!==s.length)throw new p("Invalid name-value pair");this.H8.push([$h(s[0]),$h(s[1])])}}else for(var n in this.H8=[],t)g.prototype.hasOwnProperty.call(t,n)&&this.H8.push([$h(n),$h(t[n])]);else(t=$h(t)).length>0&&"?"===t[0]&&(t=t.slice(1)),this.H8=DL(t)}var e=t.prototype;return e.append=function(t,e){t=$h(t),e=$h(e),this.H8.push([t,e]),WL(this)},e.delete=function(t){t=$h(t);for(var e=this.H8,i=0;i<e.length;){e[i][0]===t?e.splice(i,1):i++}WL(this)},e.get=function(t){t=$h(t);for(var e=this.H8,i=0;i<e.length;i++){var s=e[i];if(s[0]===t)return s[1]}return null},e.getAll=function(t){t=$h(t);for(var e=this.H8,i=[],s=0;s<e.length;s++){var n=e[s];n[0]===t&&i.push(n[1])}return i},e.has=function(t){t=$h(t);for(var e=this.H8,i=0;i<e.length;i++){if(e[i][0]===t)return!0}return!1},e.set=function(t,e){t=$h(t),e=$h(e);for(var i=this.H8,s=!1,n=0;n<i.length;){var r=i[n];r[0]===t?s?i.splice(n,1):(r[1]=e,s=!0,n++):n++}s||i.push([t,e]),WL(this)},e.sort=function(){AB(this.H8,UL),WL(this)},e.toString=function(){return NL(this.H8)},e.entries=function(){return new KL(this.H8,XL)},e.keys=function(){return new KL(this.H8,GL)},e.values=function(){return new KL(this.H8,QL)},e.forEach=function(t){var e=this;this.H8.forEach((function(i){return t(i[1],i[0],e)}))},t}(),zL=qL.prototype.entries;DB&&(qL.prototype[Symbol.iterator]=zL);var XL=function(t){return[t[0],t[1]]},GL=function(t){return t[0]},QL=function(t){return t[1]},KL=function(){function t(t,e){this.q8=0,this.H8=t,this.z8=e}return t.prototype.next=function(){return this.q8<this.H8.length?{done:!1,value:this.z8(this.H8[this.q8++])}:{done:!0,value:void 0}},t}(),jL="null";var De=g.create(null);De.ftp=21,De.file=0,De.gopher=70,De.http=80,De.https=443,De.ws=80,De.wss=443;var YL=/^(?:\.|%2e)$/i,ZL=/^(?:\.|%2e){2}$/i;function JL(t){return YL.test(t)}function $L(t){return ZL.test(t)}function tO(t){return void 0!==De[t]}function K(t){return tO(t.X8)}function eO(t){return""!==t.G8||""!==t.Q8}function iO(t){var e=t.length;if(!(e>=2))return!1;if(!nO(t.slice(0,2)))return!1;if(2!==e){var i=t[2];if(47!==i&&92!==i&&63!==i&&35!==i)return!1}return!0}function sO(t){return 2===t.length&&TB.test(t[0])&&(":"===t[1]||"|"===t[1])}function nO(t){return 2===t.length&&sO(GB(t))}function rO(t){return sO(t)&&":"===t[1]}function hO(t){var e=t.K8;0!==e.length&&("file"===t.X8&&1===e.length&&rO(e[0])||e.pop())}function oO(t){return null===t.j8||kL===t.j8||t.Y8||"file"===t.X8}var Wa=-1,aO=/\t|\n|\r/g,uO=/^[\x00-\x1f ]+|[\x00-\x1f ]+$/g;function cO(t,e,i,s){void 0===i&&(i=null),void 0===s&&(s=null),i||(i=new dO,t=t.replace(uO,""));var n=null!==s?s:0;e=e||null;for(var r=[],h=!1,o=!1,a=!1,u=Vs(t=t.replace(aO,"")),c=u.length,l=0;l<=c;){var d=l<c?u[l]:Wa;switch(n){case 0:if(!OB(d)){if(null===s){r.length=0,n=2;continue}throw new p("Invalid scheme")}r.push(HB(d)),n=1;break;case 1:if(FB(d)||43===d||45===d||46===d)r.push(HB(d));else{if(58!==d){if(null===s){r.length=0,n=2,l=0;continue}throw new p("Invalid scheme")}var f=hL(r);if(null!==s){if(tO(i.X8)&&!tO(f))return;if(!tO(i.X8)&&tO(f))return;if((eO(i)||null!==i.r6)&&"file"===f)return;if("file"===i.X8&&(i.j8===kL||null===i.j8))return}if(i.X8=f,null!==s)return void(K(i)&&i.r6===De[i.X8]&&(i.r6=null));r.length=0,"file"===i.X8?n=13:K(i)&&e&&e.X8===i.X8?n=3:K(i)?n=7:47===u[l+1]?(n=4,l+=1):(i.Y8=!0,i.K8.push(""),n=18)}break;case 2:if(!e||e.Y8&&35!==d)throw new p("Invalid scheme");e.Y8&&35===d?(i.X8=e.X8,i.K8=e.K8.slice(),i.W8=e.W8,i.Z8="",i.Y8=!0,n=20):"file"!==e.X8?(n=5,l-=1):(n=13,l-=1);break;case 3:47===d&&47===u[l+1]?n=8:(n=5,l-=1);break;case 4:47===d?n=9:(n=17,l-=1);break;case 5:i.X8=e.X8,Wa===d?(i.G8=e.G8,i.Q8=e.Q8,i.j8=e.j8,i.r6=e.r6,i.K8=e.K8.slice(),i.W8=e.W8):47===d?n=6:63===d?(i.G8=e.G8,i.Q8=e.Q8,i.j8=e.j8,i.r6=e.r6,i.K8=e.K8.slice(),i.W8="",n=19):35===d?(i.G8=e.G8,i.Q8=e.Q8,i.j8=e.j8,i.r6=e.r6,i.K8=e.K8.slice(),i.W8=e.W8,i.Z8="",n=20):92===d&&K(i)?n=6:(i.G8=e.G8,i.Q8=e.Q8,i.j8=e.j8,i.r6=e.r6,i.K8=e.K8.slice(),i.K8.pop(),n=17,l-=1);break;case 6:!K(i)||47!==d&&92!==d?47===d?n=9:(i.G8=e.G8,i.Q8=e.Q8,i.j8=e.j8,i.r6=e.r6,n=17,l-=1):n=8;break;case 7:if(47!==d||47!==u[l+1]){n=8;continue}n=8,l+=1;break;case 8:47!==d&&92!==d&&(n=9,l-=1);break;case 9:if(64===d){h&&r.unshift(37,52,48),h=!0;for(var _=0;_<r.length;_++){var g=r[_];if(58!==g||a){var v=hL(as(g,wL));a?i.Q8+=v:i.G8+=v}else a=!0}r.length=0}else if(Wa===d||47===d||63===d||35===d||K(i)&&92===d){if(h&&0===r.length)throw new p("Invalid host");l-=r.length+1,r.length=0,n=10}else r.push(d);break;case 10:case 11:if(null!==s&&"file"===i.X8)l-=1,n=15;else if(58!==d||o)if(Wa===d||47===d||63===d||35===d||K(i)&&92===d){if(l-=1,K(i)&&0===r.length)throw new p("Invalid host");if(null!==s&&0===r.length&&(eO(i)||null!==i.r6))return;var w=PL(hL(r),K(i));if(i.j8=w,r.length=0,n=16,null!==s)return}else 91===d?o=!0:93===d&&(o=!1),r.push(d);else{if(0===r.length)throw new p("Invalid host");var m=PL(hL(r),K(i));if(i.j8=m,r.length=0,n=12,11===s)return}break;case 12:if(MB(d))r.push(d);else{if(!(Wa===d||47===d||63===d||35===d||K(i)&&92===d||null!==s))throw new p("Invalid port");if(0!==r.length){var y=k(hL(r),10);if(y>65535)throw new p("Invalid port");i.r6=y===De[i.X8]?null:y,r.length=0}if(null!==s)return;n=16,l-=1}break;case 13:i.X8="file",47===d||92===d?n=14:e&&"file"===e.X8?Wa===d?(i.j8=e.j8,i.K8=e.K8.slice(),i.W8=e.W8):63===d?(i.j8=e.j8,i.K8=e.K8.slice(),i.W8="",n=19):35===d?(i.j8=e.j8,i.K8=e.K8.slice(),i.W8=e.W8,i.Z8="",n=20):(iO(u.slice(l))||(i.j8=e.j8,i.K8=e.K8.slice(),hO(i)),n=17,l-=1):(n=17,l-=1);break;case 14:47===d||92===d?n=15:(e&&"file"===e.X8&&!iO(u.slice(l))&&(rO(e.K8[0])?i.K8.push(e.K8[0]):i.j8=e.j8),n=17,l-=1);break;case 15:if(Wa===d||47===d||92===d||63===d||35===d)if(l-=1,null===s&&nO(r))n=17;else if(0===r.length){if(i.j8=kL,null!==s)return;n=16}else{var A=PL(hL(r),K(i));if(0===A.vJ&&"localhost"===A.U8&&(A=kL),i.j8=A,null!==s)return;r.length=0,n=16}else r.push(d);break;case 16:K(i)?(n=17,47!==d&&92!==d&&(l-=1)):null===s&&63===d?(i.W8="",n=19):null===s&&35===d?(i.Z8="",n=20):Wa!==d&&(n=17,47!==d&&(l-=1));break;case 17:if(Wa===d||47===d||K(i)&&92===d||null===s&&(63===d||35===d)){var b=hL(r);if($L(b)?(hO(i),47===d||K(i)&&92===d||i.K8.push("")):!JL(b)||47===d||K(i)&&92===d?JL(b)||("file"===i.X8&&0===i.K8.length&&nO(r)&&(kL!==i.j8&&null!==i.j8&&(i.j8=kL),r[1]=58,b=hL(r)),i.K8.push(b)):i.K8.push(""),r.length=0,"file"===i.X8&&(Wa===d||63===d||35===d))for(;i.K8.length>1&&""===i.K8[0];)i.K8.shift();63===d?(i.W8="",n=19):35===d&&(i.Z8="",n=20)}else r.push.apply(r,as(d,vL));break;case 18:63===d?(i.W8="",n=19):35===d?(i.Z8="",n=20):Wa!==d&&(i.K8[0]+=hL(as(d,_L)));break;case 19:null===s&&35===d?(i.Z8="",n=20):Wa!==d&&(i.W8+=hL(as(d,K(i)?pL:mL)));break;case 20:Wa===d||0===d||(i.Z8+=hL(as(d,gL)))}l++}return i}function lO(t,e,i,s){try{cO(t,e,i,s)}catch(t){}}var dO=function(){this.X8="",this.G8="",this.Q8="",this.j8=null,this.r6=null,this.K8=[],this.W8=null,this.Z8=null,this.Y8=!1};function fO(t){switch(t.X8){case"blob":var e;try{e=cO(t.K8[0],null)}catch(t){return jL}return fO(e);case"ftp":case"gopher":case"http":case"https":case"ws":case"wss":return function(t,e,i){return t+"://"+RL(e)+(null===i?"":":"+i)}(t.X8,t.j8,t.r6);default:return jL}}var _O=function(){function t(t,e){var i,s=null;if(null!=e)if(function(t){return null!=t&&t instanceof _O&&"object"==typeof t.V8}(e))s=e.V8;else try{s=cO(String(e),null)}catch(t){throw new p("Invalid base URL: "+t.message)}try{i=cO(String(t),s)}catch(t){throw new p("Invalid URL: "+t.message)}var n=i.W8;this.V8=i,this.W8=function(t){var e=new qL;return null!==t&&VL(e,t),e}(n),this.W8.V8=this}var e=t.prototype;return e.toString=function(){return this.href},e.toJSON=function(){return this.href},function(t,e,i){e&&yB(t.prototype,e),i&&yB(t,i)}(t,[{key:"href",get:function(){return function(t,e){void 0===e&&(e=!1);var i=t.X8+":";if(null!==t.j8?(i+="//",eO(t)&&(i+=t.G8,""!==t.Q8&&(i+=":"+t.Q8),i+="@"),i+=RL(t.j8),null!==t.r6&&(i+=":"+t.r6)):null===t.j8&&"file"===t.X8&&(i+="//"),t.Y8)i+=t.K8[0];else for(var s=0,n=t.K8;s<n.length;s++)i+="/"+n[s];return null!==t.W8&&(i+="?"+t.W8),e||null===t.Z8||(i+="#"+t.Z8),i}(this.V8)},set:function(t){var e;try{e=cO(String(t),null)}catch(t){throw new p("Invalid URL: "+t.message)}this.V8=e,HL(this.W8);var i=this.V8.W8;null!==i&&VL(this.W8,i)}},{key:"origin",get:function(){return fO(this.V8)}},{key:"protocol",get:function(){return this.V8.X8+":"},set:function(t){lO(t+":",null,this.V8,0)}},{key:"username",get:function(){return this.V8.G8},set:function(t){oO(this.V8)||(this.V8.G8=yL(t,wL))}},{key:"password",get:function(){return this.V8.Q8},set:function(t){oO(this.V8)||(this.V8.Q8=yL(t,wL))}},{key:"host",get:function(){var t=this.V8,e=t.j8;if(null===e)return"";var i=t.r6,s=RL(e);return null!==i&&(s+=":"+i),s},set:function(t){this.V8.Y8||lO(t,null,this.V8,10)}},{key:"hostname",get:function(){var t=this.V8.j8;return null===t?"":RL(t)},set:function(t){this.V8.Y8||lO(t,null,this.V8,11)}},{key:"port",get:function(){var t=this.V8.r6;return null===t?"":""+t},set:function(t){oO(this.V8)||(""===t?this.V8.r6=null:lO(t,null,this.V8,12))}},{key:"pathname",get:function(){var t=this.V8.K8;return this.V8.Y8?t[0]:0===t.length?"":"/"+t.join("/")},set:function(t){this.V8.Y8||(this.V8.K8.length=0,lO(t,null,this.V8,16))}},{key:"search",get:function(){var t=this.V8.W8;return null===t||""===t?"":"?"+t},set:function(t){t=$h(t);var e=this.V8;if(""===t)return e.W8=null,void HL(this.W8);"?"===t[0]&&(t=t.slice(1)),e.W8="",lO(t,null,e,19),VL(this.W8,t)}},{key:"searchParams",get:function(){return this.W8}},{key:"hash",get:function(){var t=this.V8.Z8;return null===t||""===t?"":"#"+t},set:function(t){""!==t?("#"===t[0]&&(t=t.slice(1)),this.V8.Z8="",lO(t,null,this.V8,20)):this.V8.Z8=null}}]),t}();function gO(t){return t.document&&t.document.baseURI||t.location.href||""}var vO=!!("ontouchstart"in self||self.DocumentTouch&&h instanceof self.DocumentTouch)||!(!il||!il.msMaxTouchPoints),wO=hS(),mO=!(!wO||!wO.webkitShowPlaybackTargetPicker),pO=class{get J8(){return void 0===this.t9&&(this.t9=this.e9()),this.t9}e9(){return 0}get i9(){return!fh.KR}get s9(){if(a.screen)return{width:a.screen.width,height:a.screen.height}}get C0(){return a.devicePixelRatio||1}get n9(){return mO}get l0(){return!1}get n0(){return!0}get Lw(){return fh.MR||fh.KP}get r9(){return!fh.KP}get wL(){return!0}get Mw(){return!0}get Ow(){return!1}get h9(){}get o9(){return!0}get bY(){return!1}get a9(){return!1}get u9(){return fh.yR}c9(t,e){return!0}l9(t){return t>=2*ii}constructor(){this.t9=void 0,this.d9=!1,this.Ye=vO,this.Ks=!1,this.K6=!0}},yO=function(){const t=rS();if(!t)return!1;const e=t.muted;return t.muted=!e,t.muted!==e}(),AO=function(){if(fh.zP)return!1;const t=rS();if(!t)return!1;const e=t.volume;return t.volume=e/2+.1,e!==t.volume}();var Jc=class extends pO{e9(){return this.f9?this.f9.J8:super.e9()}get h9(){var t;return null==(t=this.f9)?void 0:t.h9}get o9(){var t,e;return null==(e=null==(t=this.f9)?void 0:t.o9)||e}c9(t,e){return this.f9?this.f9.c9(t,e):super.c9(t,e)}l9(t){return this.f9?this.f9.l9(t):super.l9(t)}constructor(t){super(),this.f9=t,this.f9&&(this.d9=this.f9.d9,this.Ye=this.f9.Ye,this.K6=yO&&this.f9.K6)}},ue=class extends Jc{get Ow(){return fh.KP}constructor(t){super(t),this.d9=!0,this.Ks=!0}},bO=class extends ue{get Ow(){return!0}e9(){return Ns(!0)?super.e9():1}},TO=class extends Jc{get l0(){return fh.vR<3}get n0(){return fh.vR>=3}get s9(){return a.tizen&&!this._9&&a.tizen.systeminfo.getPropertyValue("DISPLAY",(t=>{const e=t.resolutionWidth,i=t.resolutionHeight;1===e&&1===i||(this._9={width:e,height:i})})),this._9}get bY(){return fh.vR<3}get a9(){return!0}c9(t,e){return super.c9(t,e)}},Qc=class extends pO{constructor(){super()}},SO=class extends Qc{get h9(){if(fh.PP)return 4096}c9(t,e){if(t&&t.g9&&e&&e.g9){let i=Zc(t.g9,"mp4a.40.2")&&Zc(e.g9,"mp4a.40.5"),s=Zc(t.g9,"mp4a.40.5")&&Zc(e.g9,"mp4a.40.2"),n=Zc(t.g9,"mp4a.40.2")&&Zc(e.g9,"mp4a.40.34"),r=Zc(t.g9,"mp4a.40.34")&&Zc(e.g9,"mp4a.40.2"),h=Zc(t.g9,"mp4a.40.5")&&Zc(e.g9,"mp4a.40.34"),o=Zc(t.g9,"mp4a.40.34")&&Zc(e.g9,"mp4a.40.5");return!(i||s||n||r||h||o)}return!0}};function Zc(t,e){return t.indexOf(e)>-1}var kO=class extends Qc{l9(t){return t>=2}},EO=class extends Qc{constructor(){super(),this.d9=fh.UR>=11,this.K6=fh.MR&&!(fh.KP&&fh.UR<10)}},IO=class extends Jc{get s9(){return a.webOS&&!this._9&&a.webOS.deviceInfo((t=>{this._9={width:t.screenWidth,height:t.screenHeight}})),this._9}get wL(){return!1}get a9(){return!0}},PO=class extends Qc{get o9(){return!fh.CP||(fh.cR?92!==fh.dR:fh.aR>=100)}},RO=class extends Jc{get Ow(){return!0}},CO=class{v9(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];UE(...e)}Um(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];rt(...e)}w9(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Vh(...e)}m9(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];HE(t,...i)}q_(t,e){return u(t,e)}hZ(t,e){return sl(t,e)}W_(t){c(t)}aZ(t){nl(t)}bN(){return this.p9.bN()}gN(){return this.p9.gN()}wN(){return this.p9.wN()}vN(){return this.p9.vN()}fN(){return this.p9.fN()}pN(t,e){return this.p9.pN(t,e)}_N(t){return this.p9._N(t)}get cL(){return this.y9}Rh(t,e){let i;return void 0===e&&(e=gO(fa)),i="object"!=typeof e||e instanceof _O?e:e.href,new _O(t,i)}Fm(t,e){if(void 0===e&&(e=gO(fa)),this.A9){const i=mh(e)?e:e.toString();return new self.URL(t,i).href}return this.Rh(t,e).href}get Zs(){return this.b9}get Uw(){return{Fw:il&&il.userAgent.match(/Android /i)?"Android":"other",Hw:Boolean(il&&il.userAgent.match(/Android 8.0.0/i))}}get tq(){return self&&self.location&&"https:"===self.location.protocol}get T9(){return"languages"in il?il.languages.slice():[il.language]}constructor(){this.y9=new xO,this.b9=function(){const t=function(){if(fh.DR)return new SO;if(fh.bR||fh.kR)return new kO;if(fh.MR)return new EO;if(fh.hR)return new PO;return new Qc}();return fh.KP?new bO(t):fh.Ks?new ue(t):fh._R?new TO(t):fh.mR?new IO(t):fh.PP?new RO(t):new Jc(t)}(),this.A9=function(){if(self.URL)try{const t=new self.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href}catch(t){}return!1}(),self.performance&&self.performance.now?this.V_=()=>self.performance.now():this.V_=Ri}},xO=class{get lL(){return il.oscpu}get Zs(){return il.platform}get dL(){return il.vendor}get fL(){return il.vendorSub}};var iu=(()=>{const t=self.Blob;if(t)try{new t;return function(t){return(e,i)=>new t(e,i)}(t)}catch(t){}const e=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder;if(e)return function(t){return(e,i)=>{const s=new t;if(e)for(const t of e)s.append(t);return s.getBlob(i&&i.type||"")}}(e)})();function DO(t,e,i){const s=iu([e],{type:"application/octet-stream"}),n=URL.createObjectURL(s),r=function(t,e){let i=t;const s=i.indexOf("?");if(s>=0&&(i=i.substr(0,s)),i=i.substr(i.lastIndexOf("/")+1),e){let t=i.indexOf(".");t<0&&(t=i.length),i=i.substr(0,t)+e+i.substr(t)}return i}(t,i),o=h.createElement("a");o.href=n,o.download=r,h.body.appendChild(o),o.click(),h.body.removeChild(o),URL.revokeObjectURL(n)}var NO=class extends gy{get name(){return ht.vI}constructor(t,e){super(t,function(t){return"Error while opening "+t+". Invalid URL."}(t.TI),e)}},BO=function(t,e){return(BO=g.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function LO(t,e){function i(){this.constructor=t}BO(t,e),t.prototype=null===e?g.create(e):(i.prototype=e.prototype,new i)}var wa="object"==typeof a?a:"object"==typeof self?self:"object"==typeof global?global:null;var OO=function(){var t=wa.Blob;if(t)try{return new t,function(t,e){return new wa.Blob(t,e)}}catch(t){}var e=wa.BlobBuilder||wa.WebKitBlobBuilder||wa.MozBlobBuilder||wa.MSBlobBuilder;return e?function(t){return function(e,i){var s=new t;if(e)for(var n=0,r=e;n<r.length;n++){var h=r[n];s.append(h)}return s.getBlob(i&&i.type||"")}}(e):null}(),MO="function"==typeof Sf?Sf:void 0;function FO(t){return t&&"function"==typeof t.getReader}function UO(t){if("function"!=typeof t)return!1;try{var e=!1,i=new t({start:function(){e=!0}});return!!e&&FO(i)}catch(t){return!1}}var HO=function(){function t(t,e){this.wd=t,this.S9=e}return t.prototype.pull=function(t){var e=this;return this.wd.read().then((function(i){e.S9&&e.S9(i),i.done?t.close():t.enqueue(i.value)}))},t.prototype.cancel=function(t){return this.wd.cancel(t)},t}();function VO(t,e){return e.constructor===t?e:new t(new HO(e.getReader()),{highWaterMark:0})}var WO=function(){function t(t,e){this.k9=t,this.E9=e}return t.prototype.pull=function(t){return this.k9().then((function(e){t.enqueue(new x(e)),t.close()}))},t.prototype.cancel=function(t){this.E9&&this.E9(t)},t}();function qO(t,e,i){return new t(new WO(e,i),{highWaterMark:0})}var Ju={searchParams:"URLSearchParams"in wa,iterable:"Symbol"in wa&&"iterator"in Symbol,blob:"FileReader"in wa&&!!OO,formData:"FormData"in wa,arrayBuffer:"ArrayBuffer"in wa,stream:UO(MO),streamRequest:"Request"in wa&&"body"in wa.Request.prototype,streamResponse:"Response"in wa&&"body"in wa.Response.prototype,abort:"AbortController"in wa&&"Request"in wa&&"signal"in wa.Request.prototype,encoding:"TextEncoder"in wa&&"TextDecoder"in wa,url:"URL"in wa&&function(t){try{return new wa.URL(t).toString()===t}catch(t){return!1}}("http://example.com/"),firefox:"navigator"in wa&&/Firefox\//.test(wa.navigator.userAgent)};function zO(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new p("Invalid character in header field name");return t}function XO(t){return"string"!=typeof t&&(t=String(t)),t}function GO(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return Ju.iterable&&(e[Symbol.iterator]=function(){return e}),e}var Es=function(){function t(t){var e=this;this.I_={};var i=function(t,i){Array.isArray(t)&&2===t.length?e.append(t[0],t[1]):e.append(i,t)};!function(t){return t&&"function"==typeof t.forEach}(t)?!function(t){return Ju.iterable&&t&&t[Symbol.iterator]}(t)?t&&g.getOwnPropertyNames(t).forEach((function(i){e.append(i,t[i])})):Array.from(t).forEach(i):t.forEach(i)}return t.prototype.append=function(t,e){t=zO(t),e=XO(e);var i=t.toLowerCase();if(this.I_.hasOwnProperty(i)){var s=this.I_[i],n=s[1];s[1]=n?n+", "+e:e}else this.I_[i]=[t,e]},t.prototype.delete=function(t){var e=zO(t).toLowerCase();delete this.I_[e]},t.prototype.get=function(t){var e=zO(t).toLowerCase();return this.I_.hasOwnProperty(e)?this.I_[e][1]:null},t.prototype.has=function(t){var e=zO(t).toLowerCase();return this.I_.hasOwnProperty(e)},t.prototype.set=function(t,e){var i=(t=zO(t)).toLowerCase();this.I_[i]=[t,XO(e)]},t.prototype.forEach=function(t,e){for(var i in this.I_)this.I_.hasOwnProperty(i)&&t.call(e,this.I_[i][1],i,this)},t.prototype.keys=function(){var t=[];return this.forEach((function(e,i){t.push(i)})),GO(t)},t.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),GO(t)},t.prototype.entries=function(){var t=[];return this.forEach((function(e,i){t.push([i,e])})),GO(t)},t.prototype.asList=function(){var t=[];for(var e in this.I_)if(this.I_.hasOwnProperty(e)){var i=this.I_[e],s=i[0],n=i[1];t.push([s,n])}return t},t}();function QO(){}Ju.iterable&&(Es.prototype[Symbol.iterator]=Es.prototype.entries);var KO,jO,YO,ZO=w.min,JO=String.fromCharCode,$O=16384;function tM(t){for(var e=[],i=0,s=t;i<s.length;i++){var n=s[i];n>65535&&(n-=65536,e.push(n>>>10&1023|55296),n=56320|1023&n),e.push(n)}return function(t){for(var e=t.length,i=[],s=0;s<e;s+=$O){var n=ZO(s+$O,e);i.push(JO.apply(null,t.slice(s,n)))}return i.join("")}(e)}function eM(t){if(t>=55296&&t<=57343)throw new v("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function iM(t,e){return t>>e&63|128}function sM(t,e){0!=(4294967168&t)?(0==(4294965248&t)?e.push(t>>6&31|192):0==(4294901760&t)?(eM(t),e.push(t>>12&15|224),e.push(iM(t,6))):0==(4292870144&t)&&(e.push(t>>18&7|240),e.push(iM(t,12)),e.push(iM(t,6))),e.push(63&t|128)):e.push(t)}function ke(){if(YO>=jO)throw new v("Invalid byte index");var t=255&KO[YO];if(YO++,128==(192&t))return 63&t;throw new v("Invalid continuation byte")}function nM(){var t,e;if(YO>jO)throw new v("Invalid byte index");if(YO===jO)return!1;if(t=255&KO[YO],YO++,0==(128&t))return t;if(192==(224&t)){if((e=(31&t)<<6|ke())>=128)return e;throw new v("Invalid continuation byte")}if(224==(240&t)){if((e=(15&t)<<12|ke()<<6|ke())>=2048)return eM(e),e;throw new v("Invalid continuation byte")}if(240==(248&t)&&(e=(7&t)<<18|ke()<<12|ke()<<6|ke())>=65536&&e<=1114111)return e;throw new v("Invalid UTF-8 detected")}var rM=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"];function hM(t){return t&&URLSearchParams.prototype.isPrototypeOf(t)}function oM(t){return t&&ArrayBuffer.prototype.isPrototypeOf(t)}function aM(t){return t&&DataView.prototype.isPrototypeOf(t)}var ma,uM=ArrayBuffer.isView||function(t){return t&&(rM.indexOf(g.prototype.toString.call(t))>-1||aM(t))};function Xs(t){if(t.bodyUsed)return Promise.reject(new p("Already used"));t.bodyUsed=!0}function cM(t){return new Promise((function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}}))}function lM(t){return Ju.encoding?new wa.TextDecoder("utf-8").decode(new x(t)):tM(function(t){jO=(KO=t).length,YO=0;for(var e,i=[];!1!==(e=nM());)i.push(e);return i}(new x(t)))}function dM(t){return Ju.encoding?(new wa.TextEncoder).encode(t).buffer:new x(function(t){for(var e=[],i=0,s=t;i<s.length;i++)sM(s[i],e);return e}(function(t){for(var e=[],i=0,s=t.length;i<s;){var n=t.charCodeAt(i++);if(n>=55296&&n<=56319&&i<s){var r=t.charCodeAt(i++);56320==(64512&r)?e.push(((1023&n)<<10)+(1023&r)+65536):(e.push(n),i--)}else e.push(n)}return e}(t))).buffer}function fM(t){var e=t.getReader(),i=[],s=function(t){var n=t.done,r=t.value;return n?Promise.resolve(i):(i.push(r),e.read().then(s))};return e.read().then(s)}function _M(t){return fM(t).then((function(t){return function(t){for(var e=0,i=0,s=t;i<s.length;i++)e+=(a=s[i]).byteLength;for(var n=new x(e),r=0,h=0,o=t;h<o.length;h++){var a=o[h];n.set(a,r),r+=a.byteLength}return n}(t).buffer}))}function gM(t){return t.slice?t.slice(0):vM(new x(t))}function vM(t){if(t.slice)return t.slice(0).buffer;var e=new x(t.byteLength);return e.set(new x(t.buffer,t.byteOffset,t.byteLength)),e.buffer}function wM(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var i=t.split("="),s=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(s),decodeURIComponent(n))}})),e}function mM(t){var e=t;if(e.bodyUsed)throw new p("Already used");if(e.I9===ma.P9){if(!e.R9.tee)throw new v("could not clone ReadableStream body");var i=e.R9.tee(),s=i[0],n=i[1];return e.body=s,e.R9=s,e.C9=s,n}return e.I9===ma.OI?gM(e.R9):e.I9===ma.NW?e.R9.then(mM):e.C9}!function(t){t[t.KT=0]="KT",t[t.x9=1]="x9",t[t.D9=2]="D9",t[t.OI=3]="OI",t[t.P9=4]="P9",t[t.NW=5]="NW"}(ma||(ma={}));var pM=function(){function t(e,i){this.bodyUsed=!1;var s=this;if(this.C9=e||null,e)if("string"==typeof e)this.I9=ma.KT,this.R9=e;else if(function(t){return t&&"function"==typeof t.then}(e))this.I9=ma.NW,this.R9=Promise.resolve(e).then((function(e){return new t(e,i)})),this.R9.catch(QO);else if(Ju.blob&&function(t){return t&&Blob.prototype.isPrototypeOf(t)}(e))this.I9=ma.x9,this.R9=e;else if(Ju.formData&&function(t){return t&&FormData.prototype.isPrototypeOf(t)}(e))this.I9=ma.D9,this.R9=e;else if(Ju.searchParams&&hM(e))this.I9=ma.KT,this.R9=e.toString();else if(Ju.arrayBuffer&&(oM(e)||uM(e)))aM(e)&&(this.C9=function(t){return new x(t.buffer,t.byteOffset,t.byteLength)}(e)),this.I9=ma.OI,this.R9=function(t){return oM(t)?gM(t):vM(t)}(e);else{if(!Ju.stream||!FO(e))throw new v("unsupported BodyInit type");e=VO(MO,e),this.I9=ma.P9,this.R9=e,this.C9=e}else this.I9=ma.KT,this.R9="";this.N9="",i.has("content-type")?this.N9=(i.get("content-type")||"").toLowerCase():("string"==typeof e?this.N9="text/plain;charset=UTF-8":s.I9===ma.x9&&s.R9.type?this.N9=s.R9.type:Ju.searchParams&&hM(e)&&(this.N9="application/x-www-form-urlencoded;charset=UTF-8"),this.N9&&i.set("content-type",this.N9)),Ju.stream&&(null==e?this.body=null:s.I9===ma.P9?this.body=s.R9:this.body=qO(MO,(function(){return s.arrayBuffer()}),(function(){s.bodyUsed=!0})))}return t.prototype.text=function(){var t=this,e=Xs(t);return e||(t.I9===ma.x9?function(t){var e=new FileReader,i=cM(e);return e.readAsText(t),i}(t.R9):t.I9===ma.OI?Promise.resolve(t.R9).then(lM):t.I9===ma.P9?function(t){return _M(t).then(lM)}(t.R9):t.I9===ma.NW?t.R9.then((function(t){return t.text()})):t.I9===ma.D9?Promise.reject(new v("could not read FormData body as text")):Promise.resolve(t.R9))},t.prototype.json=function(){return this.text().then(JSON.parse)},t}();Ju.blob&&(pM.prototype.blob=function(){var t=this,e=Xs(t);return e||(t.I9===ma.x9?Promise.resolve(t.R9):t.I9===ma.OI?Promise.resolve(OO([t.R9],{type:t.N9})):t.I9===ma.P9?function(t,e){return fM(t).then((function(t){return OO(t,{type:e||""})}))}(t.R9,t.N9):t.I9===ma.NW?t.R9.then((function(t){return t.blob()})):t.I9===ma.D9?Promise.reject(new v("could not read FormData body as Blob")):Promise.resolve(OO([t.R9],{type:t.N9})))}),Ju.arrayBuffer&&(pM.prototype.arrayBuffer=function(){var t=this;return t.I9===ma.OI?Xs(t)||Promise.resolve(t.R9):t.I9===ma.x9?Xs(t)||function(t){var e=new FileReader,i=cM(e);return e.readAsArrayBuffer(t),i}(t.R9):t.I9===ma.P9?_M(t.R9):t.I9===ma.NW?Xs(t)||t.R9.then((function(t){return t.arrayBuffer()})):t.I9===ma.D9?Promise.reject(new v("could not read FormData body as ArrayBuffer")):Promise.resolve(t.R9).then(dM)}),Ju.formData&&(pM.prototype.formData=function(){var t=this;return t.I9===ma.D9?Xs(t)||Promise.resolve(t.R9):t.text().then(wM)});var yM=[301,302,303,307,308],AM=function(t){function e(e,i){var s=this,n=new Es((i=i||{}).headers);return(s=t.call(this,e||null,n)||this).type="default",s.status=void 0===i.status?200:i.status,s.ok=s.status>=200&&s.status<300,s.statusText=void 0!==i.statusText?String(i.statusText):"",s.headers=n,s.url=i.url||"",s}return LO(e,t),e.prototype.clone=function(){return new e(mM(this),{status:this.status,statusText:this.statusText,headers:new Es(this.headers),url:this.url})},e.error=function(){var t=new e(null,{status:0,statusText:""});return t.type="error",t},e.redirect=function(t,i){if(-1===yM.indexOf(i))throw new RangeError("Invalid status code");return new e(null,{status:i,headers:{location:t}})},e}(pM);var bM=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){function i(t,e){if(!(t instanceof e))throw new p("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),g.defineProperty(t,s.key,s)}}function n(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function r(t){return(r=g.setPrototypeOf?g.getPrototypeOf:function(t){return t.__proto__||g.getPrototypeOf(t)})(t)}function o(t,e){return(o=g.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e,i){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var s=function(t,e){for(;!g.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}(t,e);if(s){var n=g.getOwnPropertyDescriptor(s,e);return n.get?n.get.call(i):n.value}},c(t,e,i||t)}g.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(){i(this,t),g.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(t,e){t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"removeEventListener",value:function(t,e){if(t in this.listeners)for(var i=this.listeners[t],s=0,n=i.length;s<n;s++)if(i[s]===e)return void i.splice(s,1)}},{key:"dispatchEvent",value:function(t){var e=this;if(t.type in this.listeners){for(var i=function(i){u((function(){return i.call(e,t)}))},s=this.listeners[t.type],n=0,r=s.length;n<r;n++)i(s[n]);return!t.defaultPrevented}}}]),t}(),d=function(t){function e(){var t;return i(this,e),t=function(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?a(t):e}(this,r(e).call(this)),t.listeners||l.call(a(t)),g.defineProperty(a(t),"aborted",{value:!1,writable:!0,configurable:!0}),g.defineProperty(a(t),"onabort",{value:null,writable:!0,configurable:!0}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new p("Super expression must either be null or a function");t.prototype=g.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,t),n(e,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(t){"abort"===t.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,t)),c(r(e.prototype),"dispatchEvent",this).call(this,t)}}]),e}(l),f=function(){function t(){i(this,t),g.defineProperty(this,"signal",{value:new d,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){var t;try{t=new Event("abort")}catch(e){void 0!==h?h.createEvent?(t=h.createEvent("Event")).initEvent("abort",!1,!1):(t=h.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(t)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(f.prototype[Symbol.toStringTag]="AbortController",d.prototype[Symbol.toStringTag]="AbortSignal"),e.AbortSignal=d,e.AbortController=f,e.default=f}));!function(t){t&&t.__esModule&&g.prototype.hasOwnProperty.call(t,"default")&&t.default}(bM);bM.AbortSignal;var TM=bM.AbortController,ve=wa.DOMException;try{new ve}catch(r){(ve=function(t,e){v.call(this,t),this.name=e||"Error",v.captureStackTrace&&v.captureStackTrace(this,this.constructor)}).prototype=g.create(v.prototype),ve.prototype.constructor=ve}var SM=TM;function kM(t,e){if(!t.signal.aborted)if(e.aborted)t.abort();else{var i=function(){e.removeEventListener("abort",i),t.signal.removeEventListener("abort",i),t.abort()};e.addEventListener("abort",i),t.signal.addEventListener("abort",i)}}function EM(t,e,i){return new Promise((function(s,n){if(e.signal.aborted)return t.catch(QO),n(IM());var r=function(){e.signal.removeEventListener("abort",r),n(IM())};e.signal.addEventListener("abort",r),t.then((function(t){e.signal.removeEventListener("abort",r),s(t),i&&e.abort()}),(function(t){e.signal.removeEventListener("abort",r),n(t),i&&e.abort()}))}))}function IM(){return new ve("Aborted","AbortError")}var PM,RM="moz-chunked-arraybuffer";function CM(t){try{var e=new hl;return e.open("GET","https://test"),e.responseType=t,e.responseType===t}catch(t){}return!1}!function(t){t[t.UNSENT=0]="UNSENT",t[t.OPENED=1]="OPENED",t[t.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",t[t.LOADING=3]="LOADING",t[t.DONE=4]="DONE"}(PM||(PM={}));var xM=function(){function t(t,e){var i=this;this.B9=!1,this.yI=t,this.L9=e,this.O9=new hl,this.M9=new Promise((function(t,e){i.F9=t,i.U9=e}))}return t.prototype.send=function(){var t=this;return this.H9().then((function(e){return t.V9(e,t.L9),t.M9}))},t.prototype.H9=function(){var t=this.yI;return t.I9===ma.P9?t.arrayBuffer():Promise.resolve(t.C9)},t.prototype.W9=function(t){this.yI.onprogress&&this.yI.onprogress(t.loaded,t.lengthComputable?t.total:void 0)},t.prototype.q9=function(t){this.U9(t)},t.prototype.wG=function(){this.q9(new p("Network request failed"))},t.prototype.z9=function(){this.q9(new p("Network request failed"))},t.prototype.X9=function(){this.q9(IM())},t.prototype.V9=function(t,e){var i=this,s=this.yI,n=this.O9,r=function(){return i.G9()};if(s.signal.aborted)return this.X9();n.onreadystatechange=function(){if(n.readyState>=PM.HEADERS_RECEIVED&&!i.B9){var t=function(t){var e=new Es;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var i=t.split(":"),s=i.shift().trim();if(s){var n=i.join(":").trim();e.append(s,n)}})),e}(n.getAllResponseHeaders()||""),e={status:n.status,statusText:n.statusText,headers:t,url:n.responseURL||t.get("X-Request-URL")};i.B9=!0,i.Q9(e)}},n.onprogress=function(t){return i.W9(t)},n.onload=function(){return i.K9()},n.onerror=function(){return i.wG()},n.ontimeout=function(){return i.z9()},n.onabort=function(){return i.X9()},n.open(s.method,s.url,!0),n.withCredentials="include"===s.credentials,"responseType"in n&&e&&(n.responseType=e),s.headers.forEach((function(t,e){n.setRequestHeader(e,t)})),s.signal.addEventListener("abort",r),n.onloadend=function(){s.signal.removeEventListener("abort",r)},t?n.send(t):n.send()},t.prototype.G9=function(){this.X9(),this.O9.abort()},t}(),DM=function(t){function e(e,i){var s=t.call(this,e,i)||this;return s.j9=void 0,s.Y9=void 0,s}return LO(e,t),e.prototype.Q9=function(t){var e=this;this.j9=new Promise((function(t,i){e.Y9=t,e.Z9=i})),this.F9(new AM(this.j9,t))},e.prototype.K9=function(){var t=this.O9.response;if(null==t){var e=this.L9;""===e||"text"===e?t=this.O9.responseText:"document"===e?t=this.O9.responseXML:"arraybuffer"===e?t=new ArrayBuffer(0):"blob"===e&&(t=OO([]))}this.Y9(t)},e.prototype.q9=function(e){t.prototype.q9.call(this,e),this.Z9&&this.Z9(e)},e}(xM),NM=function(t){function e(e){var i=t.call(this,e,RM)||this;return i.J9=void 0,i.t7=void 0,i.e7=!1,i}return LO(e,t),e.prototype.Q9=function(t){var e=this;this.J9=new MO({start:function(t){e.t7=t},cancel:function(){e.e7=!0,e.G9()}}),this.F9(new AM(this.J9,t))},e.prototype.W9=function(e){this.e7||this.t7.enqueue(new x(this.O9.response)),t.prototype.W9.call(this,e)},e.prototype.K9=function(){this.t7.close()},e.prototype.q9=function(e){t.prototype.q9.call(this,e),this.t7&&!this.e7&&(this.e7=!0,this.t7.error(e))},e}(xM),BM=function(){var t=Ju.firefox&&CM(RM);return BM=function(){return t},t},LM=function(){var t;return t=Ju.arrayBuffer&&CM("arraybuffer")?"arraybuffer":Ju.blob&&CM("blob")?"blob":"",LM=function(){return t},t};function OM(t){return(Ju.stream&&BM()?new NM(t):new DM(t,LM())).send()}var MM=wa.fetch,FM=wa.Request,UM=(wa.Response,wa.AbortController);var HM=["http:","https:"];var VM=function(){try{if(Ju.streamRequest){var t=new FM("about:blank",{body:"",method:"POST"}).body;if(t&&UO(t.constructor))return t.constructor}}catch(t){}}();function WM(t){return(t instanceof Es?t:new Es(t)).asList()}function qM(t,e,i){var s;if(Ju.stream){var n=void 0;if(Ju.streamResponse){var r=t.body;n=r&&VO(MO,r)}else n=qO(MO,(function(){return EM(t.arrayBuffer(),e,!0)}),(function(){e.abort()}));n&&i&&(n=function(t,e,i){var s=0,n=function(t){var n=t.done,r=t.value;n?i=void 0===i?s:i:s+=r.byteLength,e(s,i)};return function(t,e,i){return new t(new HO(e.getReader(),i),{highWaterMark:0})}(MO,t,n)}(n,i,zM(t.headers))),s=n}else{var h=EM(t.arrayBuffer(),e,!0);i&&(h=function(t,e,i){return Promise.resolve().then((function(){return e(0,i),t})).then((function(t){var s=t.byteLength;return e(s,i=void 0===i?s:i),t}))}(h,i,zM(t.headers))),s=h}return new AM(s,t)}function zM(t){return t.has("content-length")?Number(t.get("content-length")):void 0}function XM(t){var e=new SM;return t.signal&&kM(e,t.signal),function(t,e){var i,s,n=t;if(i=n.I9===ma.P9?Ju.streamRequest&&VM?Promise.resolve(VO(VM,n.R9)):EM(t.arrayBuffer(),e,!1):EM(Promise.resolve(t.C9),e,!1),Ju.abort){var r=new UM;kM(r,e.signal),s=r.signal}return i.then((function(e){return new FM(t.url,{body:e||void 0,credentials:t.credentials,headers:WM(t.headers),method:t.method,mode:t.mode,referrer:t.referrer,referrerPolicy:t.referrerPolicy,signal:s})}))}(t,e).then((function(i){return MM(i).then((function(i){return qM(i,e,t.onprogress)}))}))}var GM=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];var QM=function(t){function e(i,s){var n,r,h,o,a,u,c,l,d,f=this,_=(s=s||{}).body||null;if(i instanceof e){if(i.bodyUsed)throw new p("Already used");n=i.url,r=i.credentials,s.headers||(h=new Es(i.headers)),o=i.method,a=i.mode,u=i.referrer,c=i.referrerPolicy,l=i.signal,d=i.onprogress,_||null==i.C9||(_=i.C9,i.bodyUsed=!0)}else n=String(i),r="same-origin",o="GET",a="cors",u="about:client",c="",l=null,d=null;if(!s.headers&&h||(h=new Es(s.headers)),s&&(u="about:client",c=""),(f=t.call(this,_,h)||this).url=n,f.headers=h,f.credentials=s.credentials||r,f.method=function(t){var e=t.toUpperCase();return GM.indexOf(e)>-1?e:t}(s.method||o),f.mode=s.mode||a,f.signal=s.signal||l||(new SM).signal,f.referrer=void 0!==s.referrer?s.referrer:u,f.referrerPolicy=void 0!==s.referrerPolicy?s.referrerPolicy:c,f.onprogress=s.onprogress||d,("GET"===f.method||"HEAD"===f.method)&&_)throw new p("Body not allowed for GET or HEAD requests");return f}return LO(e,t),e.prototype.clone=function(){return new e(this,{body:mM(this)})},e}(pM),KM="function"==typeof MM&&Ju.stream&&Ju.streamResponse&&Ju.url;function jM(t,e){return new Promise((function(i){var s=new QM(t,e),n=KM&&function(t){try{return HM.indexOf(new wa.URL(t,wa.location.href).protocol)>=0}catch(t){return!1}}(s.url)?XM:OM;i(n(s))}))}jM.polyfill=!0;var YM=class{async i7(){const t=this.yI;let e,i;t.kI&&u((()=>{this.s7=!0,this.QN.Jl()}),t.kI);try{e=jM(t.TI,{method:t.iP,headers:t.eP.UI(),body:t.tP,credentials:t.oP?"include":"same-origin",signal:$M(this.QN.M_),onprogress:t.aP})}catch(e){throw new NO(t,e)}try{i=await e}catch(t){const e=this.n7(t);throw Aa(e)&&this.QN.Jl(),e}const s=i.url||t.TI,n=0===i.status&&"file:"===function(t){return Ee.Rh(t).protocol}(s)?200:i.status,r=new ZM(this,i,this.QN),h=new ys({Ny:r,pI:t,sP:t.sP,eP:new Yu(i.headers.asList()),SI:n,gL:i.statusText,gP:s});if(this.bI=h,lo(h))return h;throw new et(h)}n7(t){return Aa(t)?this.s7?new wy(this.yI):new At(t.message,t):this.bI?new et(this.bI,t):new NO(this.yI,t)}constructor(t){this.QN=new Hi,this.bI=void 0,this.s7=!1,this.yI=t,this.QN.U_(t.M_),this.AI=this.i7()}},ZM=class t extends jI{get OW(){return this.r7.bodyUsed}FW(){return this.UW.jf}_P(t){return this.HW(this.r7.text(),t)}xL(t){return this.HW(this.r7.arrayBuffer(),t)}BW(){const t=this.r7.body;return t?this.VW(t):qI(this.xL().then(WI),this.QN)}zW(){const e=this.r7.clone(),[i,s]=this.QN.H_();return this.QN=i,new t(this.h7,e,s)}HW(t,e){e&&this.QN.U_(e);let i=Promise.resolve(t).catch((t=>{throw this.h7.n7(t)}));return i=I_(i,this.QN),this.UW.U_(i.then(Qo)),i}VW(t){const e=new Ka;let i=Promise.resolve(t.pipeTo(e.writable,{preventAbort:!0})).catch((t=>{const i=this.h7.n7(t);throw e.writable.abort(i).catch(Qo),i}));return i=I_(i,this.QN),this.UW.U_(i.then(Qo)),e.readable}constructor(t,e,i){super(),this.UW=new $i,this.h7=t,this.r7=e,this.QN=i,this.UW.jf.catch(Qo)}},JM="abort";function $M(t){const e=new SM;if(t.R_)e.abort();else if(!t.C_){const i=()=>{s(),e.abort()},s=()=>{e.signal.removeEventListener(JM,i),t.B_(i),t.O_(s)};e.signal.addEventListener(JM,i),t.N_(i),t.L_(s)}return e.signal}var tF=class{pI(t){return new YM(t).AI}PV(t){if(iA&&iA.sendBeacon)iA.sendBeacon(t.TI,iu([t.tP],{type:t.rM}));else{const e=t.rM?{"Content-type":t.rM}:void 0;M(this.pI(new vh({iP:ut.POST,TI:t.TI,tP:t.tP,eP:e})))}}bn(){}},eF=class extends Fe{constructor(t){super("Invalid XML",t)}},iF=class{oI(t){const e=new DOMParser;let i;try{i=e.parseFromString(t,"text/xml")}catch(t){throw new eF(t)}if(!i||i.getElementsByTagName("parsererror").length>0)throw new eF;return new uF(i)}},sF=class t{get XE(){return Lp.QE}get hI(){var t;return null!=(t=this.o7.localName)?t:dF(this.o7.nodeName)}get l(){return this.o7.nodeName}get a7(){var t;return null!=(t=this.o7.namespaceURI)?t:void 0}get u7(){var t;return null!=(t=this.o7.prefix)?t:void 0}get kT(){return this.o7.nodeValue}zE(t){return this.o7.isEqualNode(t.o7)}ZE(e){return new t(this.o7.cloneNode(e))}constructor(t){this.o7=t}},nF=class{get lI(){return void 0===this.c7&&(this.c7=function(t){const e=[];for(let i=0;i<t.length;i++){const s=lF(t.item(i));s&&e.push(s)}return e}(this.l7.childNodes)),this.c7}get m(){return this.lI.filter(cF)}nI(t){return this.lI.filter((e=>cF(e)&&e.DL===t))}sI(t,e){return this.lI.filter((i=>cF(i)&&i.hI===e&&i.a7===t))}get FE(){return this.l7}dI(t){this.l7.appendChild(t.FE),this.c7&&this.c7.push(t)}zE(t){return this.l7.isEqualNode(t.FE)}constructor(t){this.c7=void 0,this.l7=t}},rF=class t extends nF{get XE(){return Lp.GE}get hI(){var t;return null!=(t=this.l7.localName)?t:dF(this.l7.nodeName)}get a7(){var t;return null!=(t=this.l7.namespaceURI)?t:void 0}get u7(){var t;return null!=(t=this.l7.prefix)?t:void 0}get DL(){return this.l7.nodeName}get rI(){return function(t){const e=[];for(let i=0;i<t.length;i++)e.push(new sF(t.item(i)));return e}(this.l7.attributes)}get kL(){return this.l7.textContent}cI(t){if(this.l7.hasAttribute(t))return this.l7.getAttribute(t)}uI(t,e){if(this.l7.hasAttributeNS(t,e))return this.l7.getAttributeNS(t,e)}tI(t){this.l7.removeAttribute(t)}d7(t,e){this.l7.removeAttributeNS(t,e)}f7(t,e){this.l7.setAttribute(t,e)}_7(t,e,i){this.l7.setAttributeNS(t,e,i)}ZE(e){return new t(this.l7.cloneNode(e))}constructor(t){super(t)}},hF=class{get Ny(){return this.l7.nodeValue}get FE(){return this.l7}zE(t){return this.Ny===t.Ny}constructor(t){this.l7=t}},oF=class t extends hF{get XE(){return Lp.KT}ZE(e){return new t(this.l7.cloneNode(e))}constructor(t){super(t)}},aF=class t extends hF{get XE(){return Lp.KE}ZE(e){return new t(this.l7.cloneNode(e))}constructor(t){super(t)}},uF=class t extends nF{get XE(){return Lp.jE}get aI(){return new rF(this.l7.documentElement)}ZE(e){return new t(this.l7.cloneNode(e))}constructor(t){super(t)}};function cF(t){return nt(t)}function lF(t){switch(t.nodeType){case Lp.GE:return new rF(t);case Lp.KT:return new oF(t);case Lp.KE:return new aF(t)}}function dF(t){const e=t.indexOf(":");return e<0?t:t.substr(e+1)}!function(t){Ee=t}(new class extends CO{get p9(){return this.g7||(this.g7=new ST(dh())),this.g7}get v7(){return this.w7}get JY(){return this.m7}get vZ(){return this.p7}get y7(){return!1}get uO(){return Ft.aH()}get A7(){return{b7:DO}}get T7(){return il.connection&&il.connection.effectiveType||yk}get S7(){return il.connection&&il.connection.type||"unknown"}get Gf(){return this.k7||(this.k7=new Is(new tF)),this.k7}oI(t){return this.E7.oI(t)}constructor(...t){super(...t),this.g7=void 0,this.w7=function(){if(fh.JP)return!1;try{return"body"in self.Response.prototype}catch(t){return!1}}(),this.m7=fh.YR||fh.JP,this.p7=(fh.YR||fh.JP)&&!(fh._R&&fh.vR<3),this.k7=void 0,this.E7=new iF}});var fF=class{get Wu(){const t=this.Ko.currentTime;return"number"==typeof t&&isFinite(t)?t:"now"}get I7(){return this.Ko.src||""}ir(){}constructor(t,e){this.P7=!1,this.R7=t=>{this.C7.wV(t.error,this.Wu)},this.x7=()=>{this.C7.fV(this.I7),this.Ko.removeEventListener("playing",this.x7),this.P7=!1},this.As=()=>{this.P7||(this.Ko.addEventListener("playing",this.x7),this.P7=!0)},this.C7=e,this.Ko=t,this.Ko.addEventListener("error",this.R7),this.Ko.addEventListener("sourcechange",this.As),this.As()}};!function(t){WN.push(t)}((function(t){new fF(t.ma,t.x5)}));var _F="theoplayer-stored-volume",gF="theoplayer-stored-mutedstate";UN((function(t){return class extends t{xg(t){this.xb.persistVolume&&Qe.dO(gF,""+Boolean(t)),super.xg(t)}Zg(t){this.xb.persistVolume&&Qe.dO(_F,""+Number(t)),super.Zg(t)}constructor(t,e){if(super(t,e),e.persistVolume){let t=Qe.Jz(_F);(void 0===t||j(t))&&(t=1);const e=Qe.$z(gF)||!1;this._l=t,this.Xu=e}}}}),Fs.U5);var vF="6.10.1",wF="2024.1.2",mF=GN.ma,pF=Gc.mp.registerContentProtectionIntegration.bind(Gc.mp),yF={LV(t){fa.addEventListener("beforeunload",t)},xV(t){fa.removeEventListener("beforeunload",t)}};!function(t){Jy=t.D7,$y=t.N7,tA=t.B7,fa=t.L7,eA=fa&&fa.location,iA=fa&&fa.navigator}({D7:class{get QF(){const t=[];for(const e of this.O7){const i=this.M7.get(e);if(i){const e=i.map((t=>t.F7));t.push(...e)}}return this.U7&&t.push(this.U7),t}jF(t){for(const e of this.QF)e.l2(t)}MM(t){const e=pi(this.M7.get(t),(t=>t.H7));if(e)return e.H7=!1,e.F7}V7(t){if(!this.U7){var e;const t=null==(e=this.M7.get(Di.vl))?void 0:e[0].F7.JO;if(!t)throw new v("Error creating iOS Safari MediaController");this.U7=new yN(t,this.AN)}return this.U7}async AM(t){const e=t.JO,i=e.tagName.toLowerCase();await t.ir(),TN(e);const s=pi(this.M7.get(i)||[],(e=>t===e.F7));s&&(s.H7=!0)}zF(){for(const t of this.QF)t.fl()}bn(){for(const t of this.QF){const e=t.JO;t.Ou(),TN(e),dt(e)}this.M7.clear(),this.U7=void 0}W7(){for(const t of this.O7){const e=[];this.M7.set(t,e);for(let i=0;i<this.q7;i++){const i=bN(t),s=t===Di.yy?new Zx(i,this.AN,this.E0):new fN(i,this.AN,this.E0,this.Sc);e.push({F7:s,H7:!0})}}}constructor(t,e,i=2,s=AN,n=dh()){this.q7=i,this.O7=[...s],this.AN=n,this.E0=t,this.Sc=e,this.M7=Wn(),this.W7()}},N7:class t{cl(t){return this.z7.GN((()=>this.X7(t)))}uv(){this.XF.zF()}async X7(e){const i=this.XF.MM(Di.vl),s=i.JO,n=await t.G7(s,e);return await this.XF.AM(i),n}static async G7(e,i){return fh.mR||fh._R?"all":(e.src||(e.src="data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAGlzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARwAAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbGlzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYWxfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8mKAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXiEASZACGQAjgCEASZACGQAjgAAAAAdBmjgX4GSAIQBJkAIZACOAAAAAB0GaVAX4GSAhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGagC/AySEASZACGQAjgAAAAAZBmqAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZrAL8DJIQBJkAIZACOAAAAABkGa4C/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmwAvwMkhAEmQAhkAI4AAAAAGQZsgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGbQC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm2AvwMkhAEmQAhkAI4AAAAAGQZuAL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGboC/AySEASZACGQAjgAAAAAZBm8AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZvgL8DJIQBJkAIZACOAAAAABkGaAC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmiAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZpAL8DJIQBJkAIZACOAAAAABkGaYC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBmoAvwMkhAEmQAhkAI4AAAAAGQZqgL8DJIQBJkAIZACOAIQBJkAIZACOAAAAABkGawC/AySEASZACGQAjgAAAAAZBmuAvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZsAL8DJIQBJkAIZACOAAAAABkGbIC/AySEASZACGQAjgCEASZACGQAjgAAAAAZBm0AvwMkhAEmQAhkAI4AhAEmQAhkAI4AAAAAGQZtgL8DJIQBJkAIZACOAAAAABkGbgCvAySEASZACGQAjgCEASZACGQAjgAAAAAZBm6AnwMkhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AhAEmQAhkAI4AAAAhubW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAABDcAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAzB0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAA+kAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAALAAAACQAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAPpAAAAAAABAAAAAAKobWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAB1MAAAdU5VxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACU21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAhNzdGJsAAAAr3N0c2QAAAAAAAAAAQAAAJ9hdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAALAAkABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAALWF2Y0MBQsAN/+EAFWdCwA3ZAsTsBEAAAPpAADqYA8UKkgEABWjLg8sgAAAAHHV1aWRraEDyXyRPxbo5pRvPAyPzAAAAAAAAABhzdHRzAAAAAAAAAAEAAAAeAAAD6QAAABRzdHNzAAAAAAAAAAEAAAABAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAAIxzdHN6AAAAAAAAAAAAAAAeAAADDwAAAAsAAAALAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAACgAAAAoAAAAKAAAAiHN0Y28AAAAAAAAAHgAAAEYAAANnAAADewAAA5gAAAO0AAADxwAAA+MAAAP2AAAEEgAABCUAAARBAAAEXQAABHAAAASMAAAEnwAABLsAAATOAAAE6gAABQYAAAUZAAAFNQAABUgAAAVkAAAFdwAABZMAAAWmAAAFwgAABd4AAAXxAAAGDQAABGh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAACAAAAAAAABDcAAAAAAAAAAAAAAAEBAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAQkAAADcAABAAAAAAPgbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAC7gAAAykBVxAAAAAAALWhkbHIAAAAAAAAAAHNvdW4AAAAAAAAAAAAAAABTb3VuZEhhbmRsZXIAAAADi21pbmYAAAAQc21oZAAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAADT3N0YmwAAABnc3RzZAAAAAAAAAABAAAAV21wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAM2VzZHMAAAAAA4CAgCIAAgAEgICAFEAVBbjYAAu4AAAADcoFgICAAhGQBoCAgAECAAAAIHN0dHMAAAAAAAAAAgAAADIAAAQAAAAAAQAAAkAAAAFUc3RzYwAAAAAAAAAbAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAwAAAAEAAAABAAAABAAAAAIAAAABAAAABgAAAAEAAAABAAAABwAAAAIAAAABAAAACAAAAAEAAAABAAAACQAAAAIAAAABAAAACgAAAAEAAAABAAAACwAAAAIAAAABAAAADQAAAAEAAAABAAAADgAAAAIAAAABAAAADwAAAAEAAAABAAAAEAAAAAIAAAABAAAAEQAAAAEAAAABAAAAEgAAAAIAAAABAAAAFAAAAAEAAAABAAAAFQAAAAIAAAABAAAAFgAAAAEAAAABAAAAFwAAAAIAAAABAAAAGAAAAAEAAAABAAAAGQAAAAIAAAABAAAAGgAAAAEAAAABAAAAGwAAAAIAAAABAAAAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAADMAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAAAAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAAAEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYXZmNTUuMzMuMTAw"),await t.Q7(),!i&&await t.K7(e,!1)?"all":await t.K7(e,!0)?"muted":"none")}static async K7(t,e){t.muted=e;const i=t.play();try{if(!Ie(i))return!fh.Ks;const t=uc(250);return await Promise.race([i,t]),!0}catch(t){return!1}finally{t.pause(),t.muted=!0}}static Q7(){return new Promise((t=>{if("function"==typeof MessageChannel){const e=new MessageChannel;e.port1.onmessage=()=>t(),e.port2.postMessage("")}else u(t,0)}))}bn(){this.z7.bn()}constructor(t){this.XF=t,this.z7=new Uo}},B7:yF,L7:a});var AF=class t{async FM(e){if(!Uw(e.type))return!1;const i=e.contentProtection;if(i&&!gw(i)){if(!Nr(i))return!1;if(!await t.j7(i))return!1}return!0}static async j7(t){return!(!t.playready||!await Ee.vN())||(!(!t.widevine||!await Ee.fN())||(!(!t.clearkey||!await Ee.gN())||!!await Ee.bN()))}},bF=class extends AF{async FM(t){return!!Ns(t.useManagedMediaSource)&&super.FM(t)}};function TF(t){return we(t)}function SF(t,e){const i=we(t);return e?""+i+e:""+i}var Re,kF=class{async Y7(t){return(await this.J7.Z7(t.map(TF))).shift()}ttt(t,e){const i=SF(t,e);return this.ett.IC(i)}async itt(t,e){var i;const s=SF(t,e);return null==(i=await this.stt.RC(s))?void 0:i.data}sX(t){return this.ntt.RC(t)}constructor(t,e,i,s){this.J7=t,this.ett=e,this.stt=i,this.ntt=s}},EF=class{htt(t){return Promise.resolve(!1)}ott(t){return Promise.reject(IF)}att(t){return Promise.reject(IF)}IC(t){return Promise.resolve(!1)}RC(t){return Promise.resolve(void 0)}utt(t,e){return Promise.resolve(void 0)}Z7(t){return Promise.resolve([])}ctt(){return Promise.resolve([])}ltt(t){return Promise.resolve([])}dtt(t,e){return Promise.resolve([])}Qu(t){return Promise.reject(IF)}ftt(t){return Promise.reject(IF)}_tt(){return Promise.reject(IF)}},IF="Storage disabled",PF=class t{static y6(){return Promise.resolve(new t)}gtt(t){return Promise.reject(RF)}constructor(){this.wtt=new EF,this.mtt=new EF,this.ptt=new EF,this.ytt=new EF,this.Att=new EF}},RF="Storage disabled",CF=class{get btt(){return this.F_.jf}async htt(t){return(this.Ttt||await this.btt).htt(t)}async ott(t,e){return(this.Ttt||await this.btt).ott(t,e)}async att(t,e){return(this.Ttt||await this.btt).att(t,e)}async IC(t){return(this.Ttt||await this.btt).IC(t)}async RC(t){return(this.Ttt||await this.btt).RC(t)}async utt(t,e){return(this.Ttt||await this.btt).utt(t,e)}async Z7(t){return(this.Ttt||await this.btt).Z7(t)}async ctt(){return(this.Ttt||await this.btt).ctt()}async ltt(t){return(this.Ttt||await this.btt).ltt(t)}async dtt(t,e){return(this.Ttt||await this.btt).dtt(t,e)}async Qu(t){return(this.Ttt||await this.btt).Qu(t)}async ftt(t){return(this.Ttt||await this.btt).ftt(t)}async _tt(){return(this.Ttt||await this.btt)._tt()}constructor(t){this.F_=new $i,this.Ttt=void 0,this.F_.U_(t),this.F_.jf.then((t=>{this.Ttt=t}))}},xF=class{get Stt(){return this.F_.jf}async gtt(t){const e=this.ktt||await this.Stt;return await e.gtt(t)}constructor(t){this.F_=new $i,this.ktt=void 0,this.F_.U_(t);const e=this.F_.jf;e.then((t=>{this.ktt=t})),this.mtt=new CF(e.then((t=>t.mtt))),this.wtt=new CF(e.then((t=>t.wtt))),this.ptt=new CF(e.then((t=>t.ptt))),this.ytt=new CF(e.then((t=>t.ytt))),this.Att=new CF(e.then((t=>t.Att)))}};function Dt(t){return new v("This storage cannot handle persistency type "+t)}!function(t){t.Ett="readonly",t.Itt="readwrite"}(Re||(Re={}));var ls=class{htt(t){return Promise.resolve("temporary"===t)}ott(t,e){return void 0===e&&(e="temporary"),"temporary"!==e?Promise.reject(Dt(e)):(this.Ptt(t.key),this.mx.push(t),Promise.resolve())}att(t,e){if(void 0===e&&(e="temporary"),"temporary"!==e)return Promise.reject(Dt(e));for(const e of t)this.Ptt(e.key);for(const e of t)this.mx.push(e);return Promise.resolve()}IC(t){return Promise.resolve(Boolean(this.Rtt(t)))}RC(t){return Promise.resolve(this.Rtt(t))}utt(t,e){return Promise.resolve(this.Ctt(t,e))}Z7(t){const e=t?t.map((t=>this.Rtt(t))):this.mx;return Promise.resolve(e.filter(Qf))}ctt(){return Promise.resolve([...this.mx])}ltt(t){return this.dtt(t,"key")}dtt(t,e){const i=this.mx.filter((i=>i[e]===t));return Promise.resolve(i)}Qu(t){return this.Ptt(t),Promise.resolve()}ftt(t){for(const e of t)this.Ptt(e);return Promise.resolve()}_tt(){return Ce(this.mx),Promise.resolve()}Rtt(t){return this.Ctt(t,"key")}Ctt(t,e){for(const i of this.mx)if(i[e]===t)return i}Ptt(t){const e=this.Rtt(t);e&&me(this.mx,e)}constructor(){this.mx=[]}},DF=class t{static y6(){return Promise.resolve(new t)}gtt(t){return t(this)}constructor(){this.wtt=new ls,this.mtt=new ls,this.ptt=new ls,this.ytt=new ls,this.Att=new ls}},NF=class{async htt(t){for(let e of this.xtt)if(await e.htt(t))return!0;return!1}async ott(t,e){void 0===e&&(e="persistent");for(let i of this.xtt)if(await i.htt(e))return i.ott(t);throw Dt(e)}async att(t,e){void 0===e&&(e="persistent");for(let i of this.xtt)if(await i.htt(e))return i.att(t);throw Dt(e)}async IC(t){for(let e of this.xtt)if(await e.IC(t))return!0;return!1}async RC(t){for(let e of this.xtt){const i=await e.RC(t);if(i)return i}}async utt(t,e){for(let i of this.xtt){const s=await i.utt(t,e);if(s)return s}}async Z7(t){const e=[];for(let i of this.xtt)e.push(...await i.Z7(t));return e}async ctt(){const t=[];for(let e of this.xtt)t.push(...await e.ctt());return t}async ltt(t){const e=[];for(let i of this.xtt)e.push(...await i.ltt(t));return e}async dtt(t,e){const i=[];for(let s of this.xtt)i.push(...await s.dtt(t,e));return i}async Qu(t){for(let e of this.xtt)await e.Qu(t)}async ftt(t){for(let e of this.xtt)await e.ftt(t)}async _tt(){for(let t of this.xtt)await t._tt()}constructor(t){this.xtt=t}};function BF(t){return async()=>{const e=await Promise.all(t.map((t=>t())));return LF.y6(e)}}var ks,LF=class t{static y6(e){return Promise.resolve(new t(e))}get ytt(){return this.Dtt}get Att(){return this.Ntt}get ptt(){return this.Btt}get wtt(){return this.Ltt}get mtt(){return this.Ott}gtt(e){if(0===this.Mtt.length)return e(this);const i=[];let s=0;const n=r=>(i.push(r),s++,s<this.Mtt.length?this.Mtt[s].gtt(n):e(new t(i)));return this.Mtt[s].gtt(n)}constructor(t){this.Mtt=t,this.Dtt=new NF(t.map((t=>t.ytt))),this.Ntt=new NF(t.map((t=>t.Att))),this.Btt=new NF(t.map((t=>t.ptt))),this.Ltt=new NF(t.map((t=>t.wtt))),this.Ott=new NF(t.map((t=>t.mtt)))}},OF=class{y6(){return new xF(this.Ftt())}async Ftt(){this.Utt&&(await Promise.resolve(),this.Utt=!1);for(const t of this.Htt)try{return await BF([DF.y6,t])()}catch(t){}return await BF([DF.y6,this.Vtt])()}ja(t){if(!this.Utt)throw new v("Registration overdue");this.Htt.push(t)}constructor(t){this.Htt=[],this.Utt=!0,this.Vtt=t}},$c=class t{static ja(e){t.xO.ja(e)}static get lC(){return t.Wtt||(t.Wtt=t.xO.y6()),t.Wtt}};function Ke(t){return void 0!==t.Xg}$c.xO=new OF(PF.y6),$c.Wtt=void 0,function(t){t.vB="static",t.wB="dynamic"}(ks||(ks={}));var Hs,MF=/^P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d*\.?\d*)S)?)?$/,FF=class t{static uA(e){const i=e.match(MF);if(!i)throw new v("The given value could not be parsed as a valid DateTimeInterval");const s=Number(i[1])||0,n=Number(i[2])||0,r=Number(i[3])||0,h=Number(i[4])||0,o=Number(i[5])||0,a=Number(i[6])||0;return new t(31536e3*s+2592e3*n+86400*r+3600*h+60*o+a)}get qtt(){return yi.fE(this.ztt,1e3)}Xtt(){return this.ztt}Gtt(){return 1e3*this.ztt}constructor(t){this.ztt=t}};!function(t){t.Qtt="progressive",t.Ktt="interlaced",t.YT="unknown"}(Hs||(Hs={}));var UF=class{hk(){return this.jtt/this.Ytt}constructor(t,e){this.jtt=t,this.Ytt=e}},HF=/^(?:true|false)$/i,VF=/^(-?)(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(?:Z|([+-])(\d{2}):(\d{2}))?$/;function us(t){if(void 0!==t)return FF.uA(t)}function WF(t){if(void 0===t)return;const e=t.match(VF);if(!e)throw new v("The given value could not be parsed as a valid Date");const[,i,s,n,r,h,o,a,u,c,l,d]=e,f=("-"===i?-1:1)*Number(s),_=Number(n)-1,g=Number(r),m=Number(h);let p=Number(o);const y=Number(a),A=Number("0."+(u||"")),b=w.round(1e3*A);if(c){p-=("-"===c?-1:1)*(60*Number(l)+Number(d))}const T=new Date(Date.UTC(f,_,g,m,p,y,b));if(j(T.getTime()))throw new v("The given value could not be parsed as a valid Date");return T}function qF(t){if(!t)return;const e=/(\d+)-(\d+)/.exec(t);return e?[Ve(e[1]),Ve(e[2])]:void 0}function zF(t){if(void 0!==t){if(!j(Number(t)))try{return Te.fromString(t,!0)}catch(t){}throw new v("The given value could not be parsed as a valid unsigned long")}}function Ve(t){if(void 0===t)return;const e=Number(t);if(!j(e))return e;throw new v("The given value could not be parsed as a valid Number")}function XF(t){if(void 0===t)return;const e=t.split("/"),i=Number(e[0]),s=Number(e[1]||1);if(!j(i)&&!j(s))return new UF(i,s);throw new v("The given value could not be parsed as a valid frame rate")}function No(t){if(void 0!==t){if(HF.test(t))return"true"===t.toLowerCase();if(!j(k(t)))return Boolean(k(t));throw new v("The given value could not be parsed as a valid Boolean.")}}function GF(t){return{TI:t.kL,Ztt:No(t.cI("availabilityTimeComplete")),Jtt:Ve(t.cI("availabilityTimeOffset"))}}function QF(t){return t.map(GF)}function KF(t){const e=nU(t),i=function(t,e,i,s){let n=t.uI(i,e);return void 0===n&&(n=t.cI(s+":"+e)),n}(t,"default_KID","urn:mpeg:cenc:2013","cenc");let s;const n=Gp(t,"pssh","urn:mpeg:cenc:2013","cenc")[0];if(void 0!==n&&(s=hr(n.kL)),!s){const e=Gp(t,"pro","urn:microsoft:playready","mspr")[0];void 0!==e&&(s=function(t){const e=Pt(t.kL),i=new x([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=e.length,n=12+i.length+4+s,r=new ArrayBuffer(n),h=new x(r),o=new DataView(r),a=new Ko;Uc(o,a,n),Uc(o,a,1886614376),Uc(o,a,0),sc(o,a,i),Uc(o,a,s),sc(o,a,e),!1;return h.buffer}(e))}return{nL:i,$tt:s,tet:e.tet,kT:e.kT}}function jF(t){return{eet:t.cI("sourceURL"),iet:qF(t.cI("range"))}}function YF(t,e){const i=t.cI("d"),s=t.cI("t"),n=Ve(t.cI("r"));e.push({ct:i,PS:s,net:n})}function ZF(t){return{ret:t.cI("index"),het:qF(t.cI("indexRange")),NA:t.cI("media"),oet:qF(t.cI("mediaRange"))}}function JF(t){const e=tU(t),i=function(t){const e=t.map(ZF);return e.length>0?e:void 0}(t.nI("SegmentURL"));return Me({},e,{aet:i,uet:t.cI("xlink:href"),cet:t.cI("xlink:actuate")})}function $F(t){const e=No(t.cI("availabilityTimeComplete")),i=Ve(t.cI("availabilityTimeOffset")),s=qF(t.cI("indexRange")),n=No(t.cI("indexRangeExact")),r=t.nI("Initialization");if(r.length>1)throw new v("The provided MPEG-DASH document's "+t.DL+" element can not have more than one Initialization element.");const h=1===r.length?jF(r[0]):void 0,o=zF(t.cI("presentationTimeOffset")),a=t.nI("RepresentationIndex");if(a.length>1)throw new v("The provided MPEG-DASH document's "+t.DL+" element can not have more than one RepresentationIndex element.");return{Ztt:e,Jtt:i,het:s,let:n,det:h,fet:o,_et:1===a.length?jF(a[0]):void 0,vet:us(t.cI("timeShiftBufferDepth")),IA:Ve(t.cI("timescale"))}}function tU(t){const e=$F(t),i=t.nI("BitstreamSwitching"),s=i.length>0?jF(i[0]):void 0,n=Ve(t.cI("duration")),r=t.nI("SegmentTimeline");if(r.length>1)throw new v("The provided MPEG-DASH document's "+t.DL+" element can not have more than one SegmentTimeline element.");const h=1===r.length?function(t){const e=[],i=t.nI("S");for(const t of i)YF(t,e);return e}(r[0]):void 0;return Me({},e,{wet:s,ct:n,met:h,pet:Ve(t.cI("startNumber")),yet:Ve(t.cI("endNumber"))})}function eU(t){return{Aet:function(t){if(!t)return;const e=t.split(/\s/);return e.length>1?(e.length=2,e.map(Ve)):1===e.length?e.map(Ve)[0]:void 0}(t.cI("audioSamplingRate")),bet:t.cI("codecs"),Tet:No(t.cI("codingDependency")),ket:function(t){if(0!==t.length)return t.map(KF)}(t.nI("ContentProtection")),Eet:function(t){return t.map(rU)}(t.nI("EssentialProperty")),Iet:XF(t.cI("frameRate")),Ci:Ve(t.cI("height")),Pet:Ve(t.cI("maxPlayoutRate")),Ret:Ve(t.cI("maximumSAPPeriod")),aV:t.cI("mimeType"),Cet:t.cI("profiles"),xet:t.cI("sar"),Det:function(t){switch(t){case Hs.Qtt:case Hs.Ktt:case Hs.YT:return t;default:return}}(t.cI("scanType")),Net:t.cI("segmentProfiles"),Bet:Ve(t.cI("startWithSAP")),Ti:Ve(t.cI("width"))}}function iU(t){const e=QF(t.nI("BaseURL")),i=t.nI("SegmentBase");if(i.length>1)throw new v("The provided MPEG-DASH document's "+t.hI+" element can not have more than one SegmentBase element.");const s=1===i.length?$F(i[0]):void 0,n=function(t){const e=t.map(JF);return e.length>0?e:void 0}(t.nI("SegmentList")),r=t.nI("SegmentTemplate");if(r.length>1)throw new v("The provided MPEG-DASH document's "+t.hI+" element can not have more than one SegmentTemplate element.");const h=1===r.length?function(t){return Me({},tU(t),{Let:t.cI("bitstreamSwitching"),Oet:t.cI("index"),Met:t.cI("initialization"),Fet:t.cI("media")})}(r[0]):void 0;return{Uet:e,Het:s,Vet:n,Wet:h}}function sU(t){const e=eU(t),i=iU(t),s=Ve(t.cI("bandwidth")),n=t.cI("dependencyId"),r=t.cI("id"),h=t.cI("mediaStreamStructureId"),o=Ve(t.cI("qualityRanking"));if(t.nI("SegmentBase").length>1)throw new v("The provided MPEG-DASH document's Representation element can not have more than one SegmentBase element.");return Me({},e,i,{IO:s,qet:n,o:r,zet:h,Xet:o})}function nU(t){return{tet:t.cI("schemeIdUri"),kT:t.cI("value")}}function rU(t){return nU(t)}function hU(t){return nU(t)}function oU(t){return nU(t)}function aU(t){var e;const i=eU(t),s=iU(t),n=function(t){return t.map(oU)}(t.nI("Accessibility")),r=No(t.cI("bitstreamSwitching")),h=t.cI("contentType"),o=Ve(t.cI("group")),a=Ve(t.cI("id")),u=(null==(e=t.nI("Label")[0])?void 0:e.kL)||"",c=t.cI("lang"),l=Ve(t.cI("maxBandwidth")),d=XF(t.cI("maxFrameRate")),f=Ve(t.cI("maxHeight")),_=Ve(t.cI("maxWidth")),g=Ve(t.cI("minBandwidth")),w=XF(t.cI("minFrameRate")),m=Ve(t.cI("minHeight")),p=Ve(t.cI("minWidth")),y=t.cI("par"),A=function(t){return t.map(sU)}(t.nI("Representation"));if(0===A.length)throw new v("The provided MPEG-DASH document has an AdaptationSet with no valid Representation's");const b=function(t){return t.map(hU)}(t.nI("Role")),T=No(t.cI("segmentAlignment"))||!1,S=Ve(t.cI("selectionPriority")),k=S||1,E=No(t.cI("subsegmentAlignment"))||!1;let I;try{I=Ve(t.cI("subsegmentStartsWithSAP"))}catch(t){}return Me({},i,s,{Get:n,wet:r,rM:h,Qet:o,o:a,_h:u,gs:c,Ket:l,jet:d,Yet:f,Zet:_,Jet:g,$et:w,tit:m,eit:p,iit:y,sit:A,nit:b,rit:T,HM:k,hit:E,oit:I,ait:t.cI("xlink:actuate")||"onRequest",uit:t.cI("xlink:href")})}function uU(t){const e=zF(t.cI("presentationTime"))||Te.ZERO,i=zF(t.cI("duration")),s=Ve(t.cI("id")),n=function(t){const e=t.rI,i={};for(let t=0;t<e.length;t++)i[e[t].l]=e[t].kT;return i}(t),r=t.kL;return{ET:e,ct:i,o:s,rI:n,Ny:""!==r.trim()?r:t.cI("messageData")||""}}function cU(t){return{uit:t.cI("xlink:href"),ait:t.cI("xlink:actuate"),tet:t.cI("schemeIdUri"),kT:t.cI("value"),IA:Ve(t.cI("timescale")),fet:zF(t.cI("presentationTimeOffset")),uV:t.nI("Event").map(uU)}}function lU(t){const e=iU(t),i=t.nI("AssetIdentifier");if(i.length>1)throw new v("The provided MPEG-DASH document's Period element can not have more than one AssetIdentifier element.");const s=1===i.length?function(t){return nU(t)}(i[0]):void 0,n=function(t){return t.map(aU)}(t.nI("AdaptationSet")),r=No(t.cI("bitstreamSwitching")),h=us(t.cI("duration")),o=function(t){return t.map(cU)}(t.nI("EventStream")),a=t.cI("id"),u=us(t.cI("start")),c=(t.nI("Subset"),t.cI("xlink:href"));return Me({},e,{cit:n,dit:s,wet:r,ct:h,fit:o,o:a,Tn:u,ait:t.cI("xlink:actuate"),uit:c})}function dU(t){const e=t.cI("schemeIdUri");if(!e)return;return{tet:e,kT:t.cI("value")}}function fU(t,e){const i=WF(t.cI("availabilityEndTime")),s=WF(t.cI("availabilityStartTime")),n=QF(t.nI("BaseURL")),r=t.cI("id"),h=function(t){return t.map((t=>""+t.kL))}(t.nI("Location")),o=us(t.cI("maxSegmentDuration")),a=us(t.cI("maxSubsegmentDuration")),u=us(t.cI("mediaPresentationDuration")),c=(t.nI("Metrics"),us(t.cI("minBufferTime")));if(!c)throw new v("The provided MPEG-DASH document's MPD element does not have the required 'minimumBufferTime' attribute.");const l=us(t.cI("minimumUpdatePeriod")),d=function(t){return t.map((t=>lU(t)))}(t.nI("Period"));if(!d.length)throw new v("The provided MPEG-DASH document's MPD element does not have the required 'Period' element.");const f=t.cI("profiles");if(!f)throw new v("The provided MPEG-DASH document's MPD element does not have the required 'profiles' attribute.");const _=WF(t.cI("publishTime")),g=us(t.cI("suggestedPresentationDelay")),w=us(t.cI("timeShiftBufferDepth")),m=function(t){switch(t){case ks.vB:case ks.wB:return t;default:return}}(t.cI("type")),p=function(t){const e=[];for(const i of t){const t=dU(i);t&&e.push(t)}return e}(t.nI("UTCTiming"));return{_it:i,git:s,Uet:n,o:r,vit:h,wit:e,mit:o,pit:a,yit:u,Ait:c,Tit:l,Sit:d,Cet:f,kit:_,Eit:g,vet:w,Iw:m,Iit:p}}var _U=class{Pit(t,e){return function(t,e){if(!t)throw new v("The provided MPEG-DASH document does not contain a valid MPD root element.");return fU(t,e)}(Ee.oI(t).aI,e)}};function gU(t){return{get bandwidth(){return t.IO},get codecs(){return t.bet},get id(){return t.o},get uid(){return t.cw},get name(){return t._h},get averageBandwidth(){return t.Rit},get label(){return t._h},set label(e){t._h=Oi(e)},get available(){return t.H7},get score(){return t.Cit},addEventListener(e,i){t.wn(e,i)},removeEventListener(e,i){t.pn(e,i)}}}function vU(t){return oe(gU(t),{get height(){return t.Ci},get width(){return t.Ti},get frameRate(){return t.Iet},get firstFrame(){return t.xit}})}function wU(t){return oe(gU(t),{get audioSamplingRate(){return t.Aet}})}var se=class extends Xi{constructor(t){super("update"),this.quality=t}},mU=class extends Et{get _h(){return this.Yu}set _h(t){this.Yu!==t&&(this.Yu=t,this.To(new se(this.ma)))}get Rit(){}get H7(){return this.Dit}get Cit(){}BI(){this.Dit=!1,this.To(new se(this.ma))}constructor(t,e,i,s,n){super(),this.o=t,this.IO=e,this.bet=i,this.Nit=n,this.cw=_m(),this.Yu=s||"",this.Dit=!0}},pU=class extends mU{get ma(){return this.Gu||(this.Gu=vU(this)),this.Gu}constructor(t,e,i,s,n,r,h,o,a=0){super(t,e,i,s,n),this.Iet=r,this.Ti=h,this.Ci=o,this.xit=a,this.Gu=void 0}},yU=class extends mU{get ma(){return this.Gu||(this.Gu=wU(this)),this.Gu}constructor(t,e,i,s,n,r){super(t,e,i,s,n),this.Aet=r,this.Gu=void 0}};var sh,He=class extends Et{get Bit(){const t=this.Lit();return null==t?void 0:t.Tn}get Oit(){const t=this.Lit();return null==t?void 0:t.Pn}constructor(...t){super(...t),this.Mit=t=>{this.To(t)}}};function Za(t){return zu(t.Fit)}function AU(t){return Za(t)?t.Fit:t.ret}!function(t){t.Uit="Hit",t.Vit="Wit"}(sh||(sh={}));var bU=class extends He{get qit(){return this.zit}get Aet(){var t;return null!=(t=this.Xit.Ny.Aet)?t:this.qit.Aet}get IO(){return this.Xit.Ny.IO||0}get bet(){const t=this.Xit.Ny;return t.bet?[t.bet]:this.qit.bet}get Git(){const t=this.Xit.Ny;return t.bet?[t.bet]:[]}get g9(){return this.Xit.Ny.bet||this.qit.g9}get Tet(){return this.Xit.Ny.Tet||this.qit.Tet}get ket(){return this.Xit.Ny.ket||this.qit.ket}get rM(){return this.aV+'; codecs="'+this.g9+'"'}get Eet(){const t=this.Xit.Ny;return t.Eet.length?t.Eet:this.qit.Eet}get ma(){return this.Gu||(this.Gu=function(t){return{get id(){return t.o},get type(){return t.Iw},get bandwidth(){return t.IO},get width(){return t.Ti},get height(){return t.Ci},get frameRate(){var e,i;return null!=(i=null==(e=t.Iet)?void 0:e.hk())?i:NaN},get audioSamplingRate(){return t.Aet}}}(this))}get Iet(){var t;return null!=(t=this.Xit.Ny.Iet)?t:this.qit.Iet}get Ci(){return this.Xit.Ny.Ci||this.qit.Ci}get o(){return this.Xit.Ny.o||""}get Qit(){return this.Kit}set Qit(t){this.Kit=t}get jit(){const t=this.Xit.Yit();if(t)return{TI:t.TI,iet:t.iet,oP:this.Zit.oP}}get Pet(){return this.Xit.Ny.Pet||this.qit.Pet||1}get Ret(){return this.Xit.Ny.Ret||this.qit.Ret}get Zit(){return this.Jit.Zit}get aV(){return this.Xit.Ny.aV||this.qit.aV}get Jit(){return this.qit.Jit}get Cet(){return this.Xit.Ny.Cet||this.qit.Cet}get $it(){return this.tst}get xet(){return this.Xit.Ny.xet||this.qit.xet}get Det(){return this.Xit.Ny.Det||this.qit.Det}get ist(){return this.Xit.ist}get Net(){return this.Xit.Ny.Net||this.qit.Net}get met(){return this.Xit.met}get Bet(){return this.Xit.Ny.Bet||this.qit.Bet}get Iw(){const t=this.aV.split("/")[0];return"application"===t||"text"===t||Ey(this.aV,this.bet)?Di.KT:"video"===t?Di.vl:"audio"===t?Di.yy:"image"===t?Di.jT:Di.YT}get Ti(){return this.Xit.Ny.Ti||this.qit.Ti}get sst(){return this.nst}set sst(t){this.nst=t}rst(t){const e=Za(t)?this.Xit.hst(t):this.Xit.rst(t);return{TI:e.TI,iet:e.iet,oP:this.Zit.oP}}ost(){return this.Xit.ost()}Lit(){return this.Xit.Lit()}ast(){return this.Xit.ast()}ust(t){return this.Xit.ust(t)}cst(t,e,i){return this.Xit.cst(t,this.Zit.oP,e,i)}lst(t){return Za(t)?this.met.dst(t,this.Xit):this.met.lst(t)}fst(t){return Za(t)?this.met._st(t,this.Xit):this.met.fst(t)}bn(){this.Xit.pn(sh.Uit,this.Mit)}constructor(t,e){if(super(),this.Gu=void 0,this.Kit=void 0,this.nst=!1,this.zit=t,this.Xit=e,this.Xit.wn(sh.Uit,this.Mit),this.Iw===Di.vl){var i,s;const t=null!=(s=null==(i=this.Iet)?void 0:i.hk())?s:NaN;this.tst=new pU(this.o,this.IO,this.g9,"","",t,this.Ti,this.Ci)}else this.Iw===Di.yy?this.tst=new yU(this.o,this.IO,this.g9,"","",this.Aet):this.tst=void 0}},TU=class extends He{get Get(){return this.Xit.Ny.Get}get Aet(){var t;return null!=(t=this.Xit.Ny.Aet)?t:-1}get bet(){if(this.Xit.Ny.bet)return[this.Xit.Ny.bet];{const t=[];for(const e of this.sit)e.Git.length&&-1===t.indexOf(e.g9)&&t.push(e.g9);return t}}get g9(){return this.bet.join()}get Tet(){return this.Xit.Ny.Tet}get ket(){return this.Xit.Ny.ket}get rM(){return this.aV+'; codecs="'+this.g9+'"'}get Eet(){return this.gst}get Iet(){return this.Xit.Ny.Iet}get Qet(){return this.Xit.Ny.Qet}get Ci(){return this.Xit.Ny.Ci||0}get o(){return this.Xit.Ny.o}get _h(){return this.Xit.Ny._h||""}get Pet(){return this.Xit.Ny.Pet}get Ret(){return this.Xit.Ny.Ret}get Zit(){return this.Jit.Zit}get aV(){return this.Xit.Ny.aV||this.vst[0].aV}get Jit(){return this.wst}get Cet(){return this.Xit.Ny.Cet}get sit(){return this.vst}get nit(){return this.Xit.Ny.nit||[]}get xet(){return this.Xit.Ny.xet}get Det(){return this.Xit.Ny.Det}get Net(){return this.Xit.Ny.Net}get HM(){return this.Xit.Ny.HM}get Bet(){return this.Xit.Ny.Bet}get Iw(){const t=(this.Xit.Ny.rM||this.aV).split("/")[0];return"application"===t||"text"===t||"subtitle"===t||Ey(this.aV,this.bet)?Di.KT:"video"===t?Di.vl:"audio"===t?Di.yy:"image"===t?Di.jT:Di.YT}get Ti(){return this.Xit.Ny.Ti||0}get J3(){return this.Xit.Ny.gs||""}get mst(){return this.Bit}get pst(){const t=this.mst,e=this.Oit;if(void 0===t||void 0===e)return;const i=w.min(e,this.Zit.yst);return w.max(t,i)}async Kn(t,e){if(0===this.vst.length){this.vst=[];const i=this.Xit.sit.map((i=>this.Ast(i,t,e)));this.vst=(await Promise.all(i)).filter(Qf)}this.bst()}async Ast(t,e,i){const s=new bU(this,t),n=await e(s);if(k_(i),n)return s}bst(){if(!this.vst.length)throw new v("Detected an AdaptationSet without any supported Representations.")}Lit(){return this.Xit.Lit()}ast(){return this.Xit.ast()}bn(){this.Xit.pn(sh.Uit,this.Mit);for(const t of this.vst)t.bn();Ce(this.vst)}constructor(t,e){super(),this.gst=[],this.vst=[],this.wst=t,this.Xit=e,this.Xit.wn(sh.Uit,this.Mit)}};function SU(t,e){const i=[];for(const s of e)for(const e of t)i.push(Ee.Rh(e,s));return i}var kU=class{Tst(t){const e=t-this.wst.Tn;if(e<0||e>=this.wst.ct)return;const i=this.Sst();return void 0!==i&&au(i,e,1e-5)?this.kst():this.Est(e)}Ist(t){const e=t-this.wst.Tn;if(!(e<0))return this.Pst(w.min(e,this.wst.ct))}kst(){return this.Rst(0)}Cst(){const t=this.wst.ct;if(isFinite(t))return this.Pst(t)}get xst(){return this.wst.Nst.Dst&&void 0!==this.Bst()}ost(t){if(this.wst.Nst.Iw===ks.wB){if(this.xst){const e=this.kst(),i=this.Bst();if(void 0===e||void 0===i)return;return{Lst:t,Ost:e,Mst:i}}const e=this.Fst(t);if(!e)return;return{Lst:t,Ost:this.Ust(t),Mst:e}}{0;const e=this.kst();if(e)return{Lst:t,Ost:e,Mst:this.Cst()}}}ast(t,e){if(e){let t=this.Hst(e.Ost);const i=this.Vst(e.Mst);if(i){const e=this.Wst(i);(!t||e.getTime()<t.getTime())&&(t=e)}return t}{const e=this.kst();if(e){const i=this.Wst(e);if(t.getTime()<i.getTime())return i}const i=this.wst.Nst.git;return t.getTime()<i.getTime()?i:void 0}}Fst(t){const e=(t.getTime()-this.wst.Nst.git.getTime())/1e3-this.wst.Tn+this.qst;let i=this.Pst(xu(e,0,this.wst.ct));if(!i)return;if(i=this.zst(i,t),!i)return;let s=this.Vst(i);for(;s&&this.Xst(s,t);)i=s,s=this.Vst(i);return i}Ust(t){let e;const i=this.Gst.vet;if(i){const s=(t.getTime()-this.wst.Nst.git.getTime())/1e3-this.wst.Tn-i.Xtt();e=this.Pst(xu(s,0,this.wst.ct)),e||(e=this.kst())}else e=this.kst();if(!e)return;if(e=this.zst(e,t),!e)return;let s=this.Qst(e);for(;s&&this.Xst(s,t);)e=s,s=this.Qst(e);return e}zst(t,e){let i=t;for(;i&&this.Wst(i).getTime()>e.getTime();)i=this.Qst(i);if(!i)return;const s=this.Hst(i);if(s&&s.getTime()<=e.getTime()){const t=this.Qst(i);for(t&&this.Xst(t,e)&&(i=t);i;){if(this.Wst(i).getTime()>e.getTime())return;if(this.Xst(i,e))break;i=this.Vst(i)}if(!i)return}return i}Xst(t,e){if(this.xst)return!0;if(this.Wst(t).getTime()>e.getTime())return!1;const i=this.Hst(t);return!(i&&e.getTime()>=i.getTime())}Kst(t,e){if(this.xst)return!0;if(this.jst(t).getTime()>e.getTime())return!1;const i=this.Hst(t);return!(i&&e.getTime()>=i.getTime())}Yst(t,e,i){const s=ye(e,this.Bx)+this.wst.Tn;return{ret:t,Zst:e,PS:s,ct:i,RS:s+i}}jst(t){return this.wst.Nst.Iw===ks.wB?new Date(this.wst.Nst.git.getTime()+1e3*(t.PS+t.ct)):this.wst.Nst.git}Wst(t){const e=this.jst(t);return this.wst.Nst.Iw===ks.wB?new Date(e.getTime()-1e3*this.qst):e}Hst(t){let e=1/0;if(this.wst.Nst.Iw===ks.wB){const i=this.Gst.vet;i&&(e=this.jst(t).getTime()+1e3*t.ct+i.Gtt())}const i=this.wst.Nst._it;return i&&(e=w.min(e,i.getTime())),e===1/0?void 0:new Date(e)}Jst(t,e){return t.ret+e}get NE(){return this.wst.Tn-ye(this.$st,this.Bx)}get fet(){return ye(this.$st,this.Bx)}ust(t){return!1}cst(t,e,i,s,n){const r=this.tnt(t);if(!r)return Promise.reject(new v("Invalid segment"));const h=this.ent(r.ret,e);return h?Promise.resolve(h):E_(this.int(r.ret,e,i,s),n)}ent(t,e){}int(t,e,i,s){return Promise.reject(new v("Not supported"))}Qst(t){const e=this.tnt(t);if(e)return this.Rst(e.ret-1)}Vst(t){const e=this.tnt(t);if(e)return this.Rst(e.ret+1)}tnt(t){const e=this.Rst(t.ret);if(e&&e.PS===t.PS)return e;const i=this.Tst(t.PS);return i&&i.PS===t.PS?i:void 0}snt(t,e){const i=this.nnt(t);if(!i||!this.ust(i.ret))return;const s=this.ent(i.ret,e);return s?s.snt(t):void 0}nnt(t){return this.Rst(t.rnt)}lst(t){const e=this.tnt(t);return!!e&&0===e.ret}dst(t,e){const i=this.snt(t,e);return!!i&&0===i.Fit}fst(t){const e=this.tnt(t);if(!e)return!1;const i=this.Cst();return!!i&&e.ret===i.ret}_st(t,e){const i=this.snt(t,e);if(!i)return!1;const s=this.Cst();if(!s||i.rnt!==s.ret)return!1;const n=this.ent(i.rnt,e);return i.Fit+1===n.U}Ou(){}constructor(t,e){this.wst=t,this.Gst=e,this.Bx=e.IA,this.qst=e.Jtt,this.$st=e.fet}},EU=class extends kU{Rst(t){if(t<0)return;const e=this.hnt.multiply(t),i=ye(e,this.Bx),s=this.wst.ct;if(i>=s)return;const n=this.ont();if(void 0!==n){if(t>n)return;if(t===n&&isFinite(s))return this.Yst(t,e,s-i)}return isFinite(s)&&i+this.ant>s?this.Yst(t,e,s-i):this.Yst(t,e,this.ant)}Sst(){return 0}Est(t){const e=w.floor(t/this.ant),i=this.ont();return void 0!==i&&e>=i?this.Rst(i):this.Rst(e)}Pst(t){if(t>=this.wst.ct){const t=w.ceil(this.wst.ct/this.ant)-1,e=this.ont();return void 0!==e&&t>=e?this.Rst(e):this.Rst(t)}return this.Est(t)}ont(){const t=this.Gst.yet;var e;if(void 0!==t)return t-(null!=(e=this.Gst.pet)?e:1);const i=this.Gst.unt;return void 0!==i&&i>0?i-1:void 0}Bst(){if(isFinite(this.wst.ct))return this.Cst()}cnt(t,e){return this.hnt.multiply(t.ret+(e-1))}Kn(){}constructor(t,e){super(e,t);const i=t.lnt,s=t.ct;if(void 0===i||void 0===s)throw new v("MultipleSegmentBase does not have a segment duration specified.");this.hnt=i,this.ant=s}};function IU(t,e,i){const s=e.length;if(0===s)return-1;let n=0,r=s-1,h=t.dnt(e[n]),o=t.fnt(e[r]);for(;n<=r&&t._nt(h,i)<=0&&t._nt(i,o)<0;){const a=n+w.floor(t.gnt(i,h,o)*(r-n)),u=e[a],c=t.dnt(u),l=a+1<s?t.dnt(e[a+1]):t.fnt(u);if(t._nt(l,i)<=0)n=a+1,h=l;else{if(!(t._nt(i,c)<0))return a;r=a-1,o=c}}return-1}function PU(t,e){return IU(RU.lC,t,e)}var RU=class t{static get lC(){return null!=this.Wtt||(this.Wtt=new t),this.Wtt}dnt(t){return t.PS}fnt(t){return t.RS}_nt(t,e){return t.compare(e)}gnt(t,e,i){return t.subtract(e).toNumber()/i.subtract(e).toNumber()}},CU=class extends kU{Rst(t){if(!(t<0))return t<this.vnt.length?this.vnt[t].wnt:this.mnt(t-this.vnt.length)}Sst(){if(this.vnt.length>0)return ye(this.vnt[0].PS,this.Bx)}Est(t){if(this.pnt&&ye(this.pnt.PS,this.Bx)<=t){const e=ye(this.pnt.PS,this.Bx),i=ye(this.pnt.ct,this.Bx),s=w.floor((t-e)/i);return this.mnt(s)}if(this.vnt.length>0&&au(t,ye(this.vnt[0].PS,this.Bx),1e-5))return this.vnt[0].wnt;const e=PU(this.vnt,Te.fromNumber(t*this.Bx));return e<0?void 0:this.vnt[e].wnt}Pst(t){if(!this.pnt&&this.vnt.length>0){const e=this.vnt[this.vnt.length-1];if(function(t,e,i){return e_(t,e,i)>=0}(t,ye(e.RS,this.Bx),1e-5))return e.wnt}const e=this.Sst();return e&&t<e?this.vnt[0].wnt:this.Est(t)}Bst(){return isFinite(this.wst.ct)?this.Cst():this.Rst(this.vnt.length-1)}cnt(t){return this.ynt(t)}mnt(t){if(!this.pnt)return;const e=this.pnt.PS,i=this.pnt.ct,s=e.add(i.multiply(t)),n=ye(s,this.Bx),r=this.wst.ct;if(n>=r)return;const h=this.vnt.length+t,o=w.min(ye(i,this.Bx),n+r);return this.Yst(h,s,o)}ynt(t){return t.Zst.add(this.$st)}Kn(){const t=this.Gst.Ny.met;if(!t)throw new v("MultipleSegmentBaseTO does not have a SegmentTimeline specified.");this.Ant(t)}Ant(t){const e=this.$st;this.bnt(t,e);const i=this.Tnt(t);this.Snt(t,e,i.knt,i.rnt)}bnt(t,e){const i=this.vnt;if(0===t.length)Ce(i);else{const s=t[0],n=s.PS?Te.fromString(s.PS,!1).subtract(e):Te.ZERO;let r=0;for(;r<i.length&&i[r].PS.lessThan(n);)r++;r>0&&i.splice(0,r)}}Tnt(t){const e=this.vnt,i=this.Ent;let s=0,n=0;for(;s<t.length&&n<e.length;){const r=t[s].net||0;if(r<0)break;const h=n+r;if(h>=e.length)break;if(e[h].PS.greaterThanOrEqual(i))break;if(e[n].wnt.ret===n)n=h+1;else for(;n<=h;)e[n].wnt.ret=n,n++;0,s++}return{knt:s,rnt:n}}Snt(t,e,i,s){const n=this.vnt;let r,h=i,o=s;for(;h<t.length;){const i=t[h],s=Te.fromString(i.ct,!1),a=i.net||0;let u;if(i.PS){if(u=Te.fromString(i.PS,!1).subtract(e),o>0){const t=n[o-1];t.RS.greaterThan(u)&&(t.ct=u.subtract(t.PS),t.RS=t.PS.add(t.ct))}}else u=o>0?n[o-1].RS:Te.ZERO;if(a<0){if(h+1===t.length){r={PS:u,ct:s};break}const i=Te.fromString(t[h+1].PS,!1).subtract(e);for(;u.lessThan(i);){const t=u.add(s);this.Int(n,o,u,s,t),u=t,o++}}else{const t=o+a;for(;o<=t;){const t=u.add(s);this.Int(n,o,u,s,t),u=t,o++}}h++}o<n.length&&n.splice(o),n.length>0&&(this.Ent=n[n.length-1].PS),this.pnt=r}Int(t,e,i,s,n){if(e<t.length){const r=t[e];0,r.ct.equals(s)?r.wnt.ret=e:t[e]={PS:i,ct:s,RS:n,wnt:this.Yst(e,i,ye(s,this.Bx))}}else t.push({PS:i,ct:s,RS:n,wnt:this.Yst(e,i,ye(s,this.Bx))})}constructor(t,e){super(e,t),this.vnt=[],this.pnt=void 0,this.Ent=Te.ZERO,this.Kn()}},xU=class{get Ny(){return this.Mx}get Jtt(){return this.Mx&&void 0!==this.Mx.Jtt?this.Mx.Jtt:this.Pnt?this.Pnt.Jtt:0}get fet(){return this.Mx&&void 0!==this.Mx.fet?this.Mx.fet:this.Pnt?this.Pnt.fet:Te.ZERO}get vet(){return this.Mx&&void 0!==this.Mx.vet?this.Mx.vet:this.Pnt?this.Pnt.vet:this.Jit.Nst.vet}get IA(){return this.Mx&&void 0!==this.Mx.IA?this.Mx.IA:this.Pnt&&this.Pnt.IA?this.Pnt.IA:1}get het(){return this.Mx&&void 0!==this.Mx.het?this.Mx.het:this.Pnt?this.Pnt.het:void 0}get det(){return this.Mx&&void 0!==this.Mx.det?this.Mx.det:this.Pnt?this.Pnt.det:void 0}get met(){return this.Rnt||(this.Rnt=this.Cnt()),this.Rnt}Cnt(){if(this.xnt=this.Dnt(),this.xnt)return this.xnt;if(this.Pnt)return this.Pnt.met;throw new v("Missing media segment information.")}Yit(t){const e=this.det;if(e){return{TI:(void 0!==e.eet?Ee.Rh(e.eet,t.Uet[0]):t.Uet[0]).href,iet:e.iet}}const i=this.het;if(i)return{TI:t.Uet[0].href,iet:[0,i[0]-1]}}Kn(t){this.Mx=t,this.xnt&&this.xnt.Kn()}Ou(){this.xnt&&(this.xnt.Ou(),this.xnt=void 0)}constructor(t,e,i){this.Rnt=void 0,this.xnt=void 0,this.Jit=t,this.Pnt=e,this.Mx=i}},DU=class extends xU{get ct(){return void 0!==this.Mx.ct?this.Mx.ct/this.IA:this.Pnt&&NU(this.Pnt)?this.Pnt.ct:void 0}get lnt(){return void 0!==this.Mx.ct?Te.fromNumber(this.Mx.ct):this.Pnt&&NU(this.Pnt)?this.Pnt.lnt:void 0}get pet(){return void 0!==this.Mx.pet?this.Mx.pet:this.Pnt&&NU(this.Pnt)?this.Pnt.pet:void 0}get yet(){return void 0!==this.Mx.yet?this.Mx.yet:this.Pnt&&NU(this.Pnt)?this.Pnt.yet:void 0}Dnt(){return void 0!==this.Mx.met?new CU(this,this.Jit):void 0!==this.Mx.ct?new EU(this,this.Jit):void 0}};function NU(t){return t instanceof DU}var BU=class{Lf(t){return this.Nnt.replace(/\$\$|\$(RepresentationID|Number|Bandwidth|Time)(?:%0(\d+)([diuxXo]))?\$/g,((e,i,s,n)=>{if("$$"===e)return"$";const r=t[i];if(void 0===r)return e;if(void 0===s)return r.toString();let h=function(t,e){switch(e){case"d":case"i":case"u":return t.toString(10);case"x":return t.toString(16);case"X":return t.toString(16).toUpperCase();case"o":return t.toString(8);default:return}}(r,n);return void 0===h?e:(h=Xc(h,Number(s),"0"),h)}))}constructor(t){this.Nnt=t}};var LU=class t extends DU{get Met(){return this.Bnt?this.Bnt:this.Pnt&&this.Pnt instanceof t?this.Pnt.Met:void 0}get Fet(){return this.Lnt?this.Lnt:this.Pnt&&this.Pnt instanceof t?this.Pnt.Fet:void 0}Yit(t){const e=this.Met;if(!e)return super.Yit(t);const i=e.Lf({Bandwidth:t.Ny.IO,RepresentationID:t.Ny.o});return{TI:Ee.Fm(i,t.Uet[0])}}rst(t,e){var i;const s=null!=(i=e.ist.pet)?i:1,n=this.Fet.Lf({Bandwidth:e.Ny.IO,Number:e.met.Jst(t,s),RepresentationID:e.Ny.o,Time:e.met.cnt(t,s)});return{TI:Ee.Fm(n,e.Uet[0])}}hst(t,e){}get unt(){}constructor(t,e,i){super(t,e,i),this.Bnt=i.Met?new BU(i.Met):void 0,this.Lnt=i.Fet?new BU(i.Fet):void 0}},OU=class t extends DU{rst(t,e){const i=this.aet[t.ret],s=e.Uet[0];let n;return n=i.NA?Ee.Rh(i.NA,s):s,{TI:n.href,iet:i.oet}}hst(t,e){}get aet(){return void 0!==this.Mx.aet?this.Mx.aet:this.Pnt&&this.Pnt instanceof t?this.Pnt.aet:void 0}get unt(){var t;return null==(t=this.aet)?void 0:t.length}},MU=class{snt(t){const e=this.Ont(t.Fit);if(e&&e.PS===t.PS)return e;const i=this.Mnt(t.PS);return i&&i.PS===t.PS?i:void 0}},FU=class extends MU{get U(){return this.Fnt.length}Ont(t){if(t>=0&&t<this.U)return this.Unt(this.Fnt[t])}Mnt(t){const e=this.Hnt(t);if(this.Fnt.length>0){const t=this.Fnt[0];if(e<=ye(t.PS,this.IA))return this.Unt(t)}const i=PU(this.Fnt,Te.fromNumber(e*this.IA));if(!(i<0))return this.Unt(this.Fnt[i])}Vnt(t){const e=this.Hnt(t);if(this.Fnt.length>0){const t=this.Fnt[this.Fnt.length-1];if(e>=ye(t.RS,this.IA))return this.Unt(t)}return this.Mnt(t)}Unt(t){const e=ye(t.PS,this.IA)-this.fet,i=e+this.Wnt,s=ye(t.ct,this.IA);return{rnt:this.rnt,Fit:t.ret,PS:i,Zst:Te.fromNumber(e*this.IA),ct:s,RS:i+s,qnt:[t.znt,t.Xnt]}}Hnt(t){return t-this.Wnt+this.fet}constructor(t,e,i,s,n){super(),this.rnt=t,this.IA=e,this.Wnt=i,this.fet=s,this.Fnt=n}};var UU=class t{Gnt(){return this.By.Au<this.Ny.byteLength}Qnt(){const e=this.Knt(),i=this.jnt(),s=this.By.Au,n=this.Ny.byteLength;let r;r=t.Ynt(i)?n-s:t.Znt(i);const h=s+r<=n?r:n-s,o=tl(this.Ny,this.By,h);return new VU(e,Sa(o))}Knt(){const t=this.jnt();if(t.length>7)throw new RangeError("Invalid EBML ID size");let e=0;for(let i=0;i<t.length;i++)e=256*e+t[i];return e}jnt(){const t=Go(this.Ny,this.By.Iy());if(0===t)throw new RangeError("EBML variable sized integer is invalid");const e=8-(31-lv(t));return Ee.m9(e<=8&&e>=1,"Incorrect log2 value"),tl(this.Ny,this.By,e)}static Znt(t){if(8===t.length&&224&t[1])throw new p("EBML variable sized integer is too large");let e=0;for(let i=0;i<t.length;i++){const s=t[i];if(0===i){e=s&(1<<8-t.length)-1}else e=256*e+s}return e}static Ynt(t){for(const e of HU)if(L(t,new x(e)))return!0;return!1}constructor(t){this.Ny=t,this.By=new Ko}},HU=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],VU=class{Jnt(){return this.$nt.byteOffset}trt(){return new UU(this.$nt)}ert(){const t=this.$nt.byteLength;if(t>8)throw new RangeError("EMBL integer field size is too large");if(8===t&&224&this.$nt.getUint8(0))throw new RangeError("EMBL integer field value is too large");let e=0;for(let i=0;i<t;i++){e=256*e+this.$nt.getUint8(i)}return e}Jz(){if(4===this.$nt.byteLength)return this.$nt.getFloat32(0);if(8===this.$nt.byteLength)return this.$nt.getFloat64(0);throw new RangeError("Invalid size for EMBL floating-point field")}constructor(t,e){this.id=t,this.$nt=e}};function WU(t,e){const i=function(t){const e=new UU(Sa(t)),i=e.Qnt();if(i.id!==zU)throw new p("Missing WebM EBML header");const s=e.Qnt();if(s.id!==XU)throw new p("Missing WebM SegmentElement");const n=s.Jnt(),r=function(t){const e=t.trt();let i;for(;e.Gnt();){const t=e.Qnt();if(t.id===GU){i=t;break}}if(!i)throw new p("Missing WebM InfoElement");return function(t){const e=t.trt();let i,s=1e6;for(;e.Gnt();){const t=e.Qnt();t.id===QU?s=t.ert():t.id===KU&&(i=t.Jz())}if(void 0===i)throw new p("Missing Duration in WebM InfoElement");const n=s/1e9,r=i*n;return{timecodeScale:n,duration:r}}(i)}(s);return{segmentOffset:n,timecodeScale:r.timecodeScale,duration:r.duration}}(e),s=new UU(Sa(t)).Qnt();if(s.id!==jU)throw new p("Missing WebM CuesElement");const n=function(t,e,i,s){const n=[],r=t.trt();let h,o;for(;r.Gnt();){const t=r.Qnt();if(t.id!==YU)continue;const i=qU(t);if(!i)continue;const s=i.unscaledTime,a=e+i.relativeOffset;void 0!==h&&n.push({ret:n.length,PS:h,ct:s.subtract(h),RS:s,znt:o,Xnt:a-1}),h=s,o=a}if(void 0!==h){0;const t=Te.fromNumber(s/i);n.push({ret:n.length,PS:h,ct:t.subtract(h),RS:t,znt:o,Xnt:void 0})}return n}(s,i.segmentOffset,i.timecodeScale,i.duration);return{IA:w.round(1/i.timecodeScale),irt:n}}function qU(t){const e=t.trt(),i=e.Qnt();if(i.id!==ZU)throw new p("Missing CueTime in WebM CuePointElement");const s=Te.fromNumber(i.ert()),n=e.Qnt();if(n.id!==JU)throw new p("Missing CueTrackPositions in WebM CuePointElement");const r=n.trt();let h=0;for(;r.Gnt();){const t=r.Qnt();if(t.id===$U){h=t.ert();break}}return{unscaledTime:s,relativeOffset:h}}var zU=440786851,XU=408125543,GU=357149030,QU=2807729,KU=17545,jU=475249515,YU=187,ZU=179,JU=183,$U=241,tH=class extends kU{Rst(t){if(0===t)return this.nrt}Sst(){return 0}Est(t){return this.nrt}Pst(t){return this.Est(t)}Bst(){return this.nrt}cnt(t,e){return Te.ZERO}ost(t){const e=this.rrt(t);return e&&{Lst:t,Ost:e,Mst:e}}rrt(t){const e=this.nrt;return this.Xst(e,t)?e:void 0}Fst(t){return this.rrt(t)}Ust(t){return this.rrt(t)}Kn(){}ust(t){return 0===t&&void 0!==this.hrt}ent(t,e){const i=e.Uet[0].href;return this.ort.get(i)}int(t,e,i,s){const r=e.Uet[0].href;let h=this.art.get(r);if(void 0===h){const o=e.aV,a=this.urt.M_;if(lt(o))h=this.crt(t,r,i,s,a);else{if(!Up(o))throw new jr(n.MEDIA_NOT_SUPPORTED,"Unsupported MIME type for segment index: "+o);h=this.lrt(t,r,e,i,s,a)}this.art.set(r,h)}return h}async crt(t,e,i,s,n){const r=this.hrt,h=await s.drt(e,r,i,n),o=this.frt(t,h);return this.ort.set(e,o),o}frt(t,e){const i=this.hrt,s=Ro.Jy(new DataView(e),new Ko);if(s.Iw!==hs._y)throw new v("Invalid segment index");const n=Ue.pA(s.Ny),r=function(t,e){const i=[];let s=t.VT,n=e+t.WT.toNumber(),r=0;for(const e of t.zT){const t=e.OT,h=Te.fromNumber(e.ct),o=s.add(h);0===e.LT&&i.push({ret:r++,PS:s,ct:h,RS:o,znt:n,Xnt:n+t-1}),n+=t,s=o}return i}(n,i[1]+1);return new FU(t,n.IA,this.wst.Tn,ye(this.$st,this.Bx),r)}async lrt(t,e,i,s,n,r){const h=i.Yit(),o=this.hrt,a=n.drt(h.TI,h.iet,s,r),u=n.drt(e,o,s,r),[c,l]=await Promise.all([a,u]),d=this._rt(t,l,c);return this.ort.set(e,d),d}_rt(t,e,i){const s=WU(new x(e),new x(i));return new FU(t,s.IA,this.wst.Tn,ye(this.$st,this.Bx),s.irt)}Ou(){super.Ou(),this.urt.Jl()}constructor(t,e){super(e,t),this.ort=Wn(),this.art=Wn(),this.urt=new Hi,this.hrt=t.het,this.nrt=this.Yst(0,Te.ZERO,this.wst.ct)}},eH=class extends xU{get pet(){}rst(t,e){return{TI:e.Uet[0].href}}hst(t,e){return{TI:e.Uet[0].href,iet:t.qnt}}Dnt(){return new tH(this,this.Jit)}},iH=class extends Xi{constructor(){super(sh.Uit)}};var sH=class extends Et{get Ny(){return this.Mx}get Uet(){return this.grt}vrt(){var t,e;return null!=(e=this.Gst)?e:null==(t=this.h7)?void 0:t.vrt()}wrt(t){const e=this.Jit,i=this.h7&&this.h7.vrt();this.Mx.Wet?this.Gst=new LU(e,i,this.Mx.Wet):this.Mx.Vet?this.Gst=new OU(e,i,this.Mx.Vet[0]):this.Mx.Het?this.Gst=new eH(e,i,this.Mx.Het):t&&!i&&(this.Gst=new eH(e,i,void 0))}mrt(t,e){this.Mx=t,this.grt=t.Uet&&t.Uet.length>0?SU(t.Uet.map((t=>t.TI)),e):e.slice(),this.Gst&&(t.Wet?this.Gst.Kn(t.Wet):t.Vet?this.Gst.Kn(t.Vet[0]):t.Het&&this.Gst.Kn(t.Het))}Lit(){var t;return null==(t=this.prt)?void 0:t.yrt}ast(){var t;return null==(t=this.prt)?void 0:t.Art}brt(t){const e=this.Trt,i=this.Jit.ct,s=this.prt,n=this.Srt(t);s&&au(i,e,1e-5)&&rH(s,n)||(this.Trt=i,this.prt=n,this.To(new iH))}Ou(){this.Lo(),this.Gst&&(this.Gst.Ou(),this.Gst=void 0)}constructor(t,e,i){super(),this.Gst=void 0,this.Trt=1/0,this.prt=void 0,this.h7=e,this.mrt(t,i)}};function nH(t){let e,i;for(const i of t){const t=i.Lit();if(t){e=t.Tn;break}}if(void 0!==e){for(let e=t.length-1;e>=0;e--){const s=t[e].Lit();if(s){i=s.Pn;break}}return void 0!==i?{Tn:e,Pn:i}:void 0}}function an(t){if(0===t.length)return;let e=0,i=1/0;for(const s of t){const t=s.Lit();if(!t)return;if(e=w.max(e,t.Tn),i=w.min(i,t.Pn),e>=i)return}return{Tn:e,Pn:i}}function Ze(t){let e;for(const i of t){const t=i.ast();t&&(!e||t.getTime()<e.getTime())&&(e=t)}return e}function rH(t,e){return function(t,e){return t&&e?t.getTime()===e.getTime():t===e}(t.Art,e.Art)&&function(t,e){return t&&e?au(t.Tn,e.Tn,1e-5)&&au(t.Pn,e.Pn,1e-5):t===e}(t.yrt,e.yrt)}var hH=class extends He{get cit(){return this.krt}get bet(){return this.cit.reduce(((t,e)=>{for(const i of e.bet)Bc(t,i)||t.push(i);return t}),[])}get g9(){return this.bet.length>0?this.bet[0]:""}get Iw(){return this.krt[0].Iw}get o(){return this.wS}get Zit(){return this.wst.Zit}get aV(){return this.krt[0].aV}get Jit(){return this.wst}get sit(){return Ga(this.cit,(t=>t.sit))}Lit(){return an(this.krt)}ast(){let t;for(const e of this.krt){const i=e.ast();i&&(!t||i.getTime()<t.getTime())&&(t=i)}return t}bn(){this.Lo();for(const t of this.krt)t.pn(sh.Uit,this.Mit)}constructor(t,e,i){super(),this.wst=t,this.wS=e,this.krt=i.slice();for(const t of i)t.wn(sh.Uit,this.Mit)}},oH=class extends Xi{constructor(){super(sh.Vit)}};function aH(t){const e=[];for(const i of t){let t;const s=i.Qet;void 0===s||(t=pi(e,(t=>t.o===s))),t||(t={o:s,cit:[]},e.push(t)),t.cit.push(i)}return e}var cu,uH=class extends He{get cit(){return this.krt}get Ert(){return this.Irt}get dit(){return this.Xit.Ny.dit}get ct(){return this.Xit.ct}get Pn(){return this.Tn+this.ct}get fit(){return this.Xit.Ny.fit||[]}get o(){return this.Xit.o}get Wit(){return this.Prt}get Zit(){return this.Rrt}get Crt(){return this.Rrt.xrt(this)}get Jit(){return this}get Drt(){return this.Rrt.Nrt(this)}get Brt(){return this.Lrt(1/0,w.min)}get Ort(){return this.Lrt(0,w.max)}Lrt(t,e){if(0===this.Irt.length)return;let i=t;for(const t of this.Irt){const s=t.Iw;if(s===Di.yy||s===Di.vl){const s=t.Oit;if(void 0===s)return;i=e(i,s)}}return i}get Tn(){return this.Xit.Tn}get oP(){return this.Zit.oP}Mrt(){this.Prt||(this.Prt=!0,this.To(new oH),this.bn())}async Kn(t,e){0===this.krt.length?(await this.Frt(this.Xit.cit,t,e),this.Urt(this.krt),k_(e)):await this.Hrt(t,e)}async Frt(t,e,i){for(const s of t){const t=new TU(this,s);try{await t.Kn(e,i),this.krt.push(t)}catch(t){pe(t)}}}Urt(t){const e=aH(t);for(const t of e){const e=new hH(this,t.o,t.cit);this.Irt.push(e)}}async Hrt(t,e){for(const i of this.krt)await i.Kn(t,e)}Lit(){return this.Xit.Lit()}ast(){return this.Xit.ast()}bn(){this.Lo(),this.Xit.pn(sh.Uit,this.Mit);for(const t of this.Irt)t.bn();for(const t of this.krt)t.bn();Ce(this.krt),Ce(this.Irt)}constructor(t,e){super(),this.krt=[],this.Irt=[],this.Prt=!1,this.Rrt=t,this.Xit=e,this.Xit.wn(sh.Uit,this.Mit)}},cH=class extends Xi{constructor(){super(o.lm)}};(cu||(cu={})).Vrt="Wrt";var lH=class extends Xi{constructor(){super(cu.Vrt)}},dH=class extends sH{get qit(){return this.zit}get Jit(){return this.zit.Jit}get Nst(){return this.zit.Nst}get aV(){return this.Mx.aV||this.zit.aV}get ist(){return this.vrt()}get met(){return this.ist.met}ust(t){const e=this.aV;return!(!lt(e)&&!Up(e))&&this.met.ust(t.ret)}cst(t,e,i,s){return this.met.cst(t,this,e,i,s)}Yit(){return this.ist.Yit(this)}rst(t){return this.ist.rst(t,this)}hst(t){return this.ist.hst(t,this)}ost(){return this.qrt}Srt(t){const e=this.met,i=e.ost(t),s=i&&function(t,e){const{Ost:i,Mst:s,Lst:n}=t,r=i.PS;let h;const o=e.jst(s);if(o.getTime()<=n.getTime())h=s.RS;else{const t=(o.getTime()-n.getTime())/1e3,e=w.max(s.ct-t,0);h=s.PS+e}return{Tn:r,Pn:h}}(i,e),n=this.met.ast(t,i);return this.qrt=i,{Lst:t,yrt:s,Art:n}}Kn(t){this.mrt(t,this.zit.Uet)}constructor(t,e){super(t,e,e.Uet),this.qrt=void 0,this.zit=e,this.wrt(!0)}},fH=class extends sH{get sit(){return this.vst}get Jit(){return this.wst}get Nst(){return this.wst.Nst}get Qet(){return this.Mx.Qet}get aV(){var t;return this.Mx.aV||(null==(t=this.vst[0])?void 0:t.Ny.aV)||""}Kn(t){this.mrt(t,this.wst.Uet);const e=t.sit||[];if(this.vst.length!==e.length)throw new v("Expected "+this.vst.length+' representations in adaptation set "'+t.o+'", found '+e.length);for(let t=0;t<e.length;t++)this.vst[t].Kn(e[t])}brt(t){for(const e of this.vst)e.brt(t);super.brt(t)}Srt(t){return{Lst:t,yrt:an(this.vst),Art:Ze(this.vst)}}Ou(){for(const t of this.vst)t.Ou();super.Ou()}constructor(t,e){super(t,e,e.Uet),this.wst=e,this.wrt(!1),this.vst=t.sit.map((t=>new dH(t,this)))}},_H=class extends sH{get cit(){return this.krt}get Ert(){return this.Irt}get Jit(){return this}get Nst(){return this.zrt}get o(){return this.Mx.o}get Tn(){return this.JE}get ct(){return this.Zl}Kn(t,e){this.mrt(t,this.zrt.Uet),this.Zl=e;const i=t.cit||[];if(this.krt.length!==i.length)throw new v("Expected "+this.krt.length+' adaptation sets in period "'+t.o+'", found '+i.length);for(let t=0;t<i.length;t++)this.krt[t].Kn(i[t])}brt(t){for(const e of this.krt)e.brt(t);super.brt(t)}Srt(t){return{Lst:t,yrt:an(this.krt),Art:Ze(this.krt)}}Ou(){for(const t of this.krt)t.Ou();super.Ou()}constructor(t,e,i,s){super(e,void 0,t.Uet),this.Irt=[],this.zrt=t,this.JE=i,this.Zl=s,this.wrt(!1),this.krt=(e.cit||[]).map((t=>new fH(t,this))),this.Irt=aH(this.krt)}},gH=new Date("2000-01-01"),vH=class extends Et{get Ny(){return this.Mx}get Iw(){return this.Mx.Iw||ks.vB}get git(){return this.Xrt||this.Mx.git||this.kit}get _it(){return this.Mx._it}get Dst(){var t,e;return null!=(e=null==(t=this.Grt)?void 0:t.ignoreAvailabilityWindow)&&e}get yit(){return this.Qrt}get Uet(){return this.grt}get vit(){return this.Krt}get Sit(){return this.jrt}get kit(){return this.Mx.kit||this.In}get vet(){return this.Mx.vet}get Yrt(){return this.Zrt}get Jrt(){return this.In}Lit(){var t;return null==(t=this.prt)?void 0:t.yrt}ast(){var t;return null==(t=this.prt)?void 0:t.Art}Kn(t,e,i,s){var n;const r=void 0!==this.Mx&&this.Mx.Iw===ks.wB;this.Mx=t,this.$rt=e,this.Zrt=null!=s?s:i,this.In=i;const h=[yg(e)];this.grt=t.Uet&&t.Uet.length>0?SU(t.Uet.map((t=>t.TI)),h):h,this.Krt=t.vit&&t.vit.length>0?SU(t.vit,this.grt):[];const o=this.Krt.map((t=>t.href)),a=e.href;Bc(o,a)||(this.Krt.push(e),o.push(a));const u=this.tht.href;Bc(o,u)||(this.Krt.push(this.tht),o.push(u)),this.Qrt=null==(n=t.yit)?void 0:n.Xtt();const c=t.Iw===ks.wB,l=function(t,e,i){const s=[];for(let i=0;i<t.length;i++){const n=t[i];let r;if(n.Tn)r=n.Tn.Xtt();else if(i>0&&t[i-1].ct){r=s[i-1]+t[i-1].ct.Xtt()}else{if(0!==i||e)break;r=0}s.push(r)}const n=[];for(let e=0;e<s.length-1;e++)n.push({Ny:t[e],Tn:s[e],ct:s[e+1]-s[e]});if(s.length>0){const r=s.length-1,h=t[r],o=s[r];let a=1/0;e||(a=h.ct?h.ct.Xtt():i-o),n.push({Ny:h,Tn:o,ct:a})}return n}(t.Sit,c,this.Qrt);this.eht(l,r,c),this.brt(i)}eht(t,e,i){const s=this.jrt;if(0===t.length)return void Ce(s);const n=t[0].Ny.o;let r=0;for(;r<s.length&&s[r].o!==n;)r++;const h=s.splice(0,r);for(const t of h)t.Ou();if(e&&!i&&s.length>0&&t.length>0){var o;const e=null!=(o=wH(s[0].Ny))?o:yi.Rk;var a;const i=null!=(a=wH(t[0].Ny))?a:yi.Rk;if(i.ck(e)){const n=i.Ak(e);void 0!==this.Qrt&&(this.Qrt+=n.hk());for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];i.Tn=t.Tn,bH(i.Ny,t.Ny)}e===t.length-1&&(i.ct+=n.hk())}}}for(let e=0;e<t.length;e++){const i=t[e];if(e<s.length){const t=s[e];0,t.Kn(i.Ny,i.ct)}else s.push(new _H(this,i.Ny,i.Tn,i.ct))}}brt(t){for(const e of this.jrt)e.brt(t);const e=this.prt,i=this.Srt(t);e&&rH(e,i)||(this.prt=i,this.To(new iH))}Srt(t){return{Lst:t,yrt:nH(this.jrt),Art:Ze(this.jrt)}}Bst(){if(0===this.jrt.length)return;const t=this.jrt[this.jrt.length-1];if(isFinite(t.ct))return;if(0===t.cit.length)return;const e=t.cit[0];if(0===e.sit.length)return;const i=e.sit[0].met,s=i.Bst();return s?{wnt:s,_it:i.Hst(s)}:void 0}Ou(){this.Lo();for(const t of this.jrt)t.Ou()}constructor(t,e,i,s,n){if(super(),this.prt=void 0,this.Qrt=void 0,this.Xrt=void 0,this.jrt=[],this.tht=e,this.Grt=n,this.Kn(t,i,s),t.Iw===ks.wB){const t=this.Bst();t&&t._it&&t._it.getTime()<gH.getTime()&&(this.Xrt=new Date(this.kit.getTime()-1e3*(t.wnt.PS+t.wnt.ct)),this.brt(s))}}};function wH(t){let e=yH(t);var i,s;for(const s of null!=(i=t.cit)?i:[])e=Xm(e,mH(s));for(const i of null!=(s=t.fit)?s:[])e=Xm(e,AH(i));return e}function mH(t){let e=yH(t);for(const i of t.sit)e=Xm(e,pH(i));return e}function pH(t){return yH(t)}function yH(t){let e;if(void 0!==t.Wet&&(e=Xm(e,AH(t.Wet))),void 0!==t.Het&&(e=Xm(e,AH(t.Het))),void 0!==t.Vet)for(const i of t.Vet)e=Xm(e,AH(i));return e}function AH(t){var e,i;return yi.Ek(null!=(e=t.fet)?e:Te.ZERO,null!=(i=t.IA)?i:1)}function bH(t,e){if(kH(t,e),t.Tn=e.Tn,void 0!==t.cit&&void 0!==e.cit&&t.cit.length===e.cit.length)for(let i=0;i<t.cit.length;i++)TH(t.cit[i],e.cit[i]);if(void 0!==t.fit&&void 0!==e.fit&&t.fit.length===e.fit.length)for(let i=0;i<t.fit.length;i++)EH(t.fit[i],e.fit[i])}function TH(t,e){if(kH(t,e),void 0!==t.sit&&void 0!==e.sit&&t.sit.length===e.sit.length)for(let i=0;i<t.sit.length;i++)SH(t.sit[i],e.sit[i])}function SH(t,e){kH(t,e)}function kH(t,e){if(void 0!==t.Wet&&void 0!==e.Wet&&EH(t.Wet,e.Wet),void 0!==t.Het&&void 0!==e.Het&&EH(t.Het,e.Het),void 0!==t.Vet&&void 0!==e.Vet&&t.Vet.length===e.Vet.length)for(let i=0;i<t.Vet.length;i++)EH(t.Vet[i],e.Vet[i])}function EH(t,e){t.IA=e.IA,t.fet=e.fet}var IH=class{async Jq(t){await this.iht(t,this.fP,this.sht,this.nht).catch(B)}rht(){return new Date(Ri()+this.hht)}async iht(t,e,i,s){let n;if(s&&(n=await this.oht(e,s,i)),void 0===n){k_(i);for(const s of t)if(n=await this.aht(e,s,i),void 0!==n)break}this.hht=void 0===n?0:n-Ri()}async aht(t,e,i){switch(e.tet){case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2012":case"urn:mpeg:dash:utc:http-iso:2014":{const s=e.kT;if(s)return await this.oht(t,s,i);break}case"urn:mpeg:dash:utc:direct:2012":case"urn:mpeg:dash:utc:direct:2014":{const t=e.kT;if(t){const e=new Date(t).getTime();if(!j(e))return e}break}default:return}}async oht(t,e,i){try{const s=await t.pI({TI:e,iP:ut.GET,sP:Ct.KT,M_:i}),n=await s._P(),r=new Date(n).getTime();if(!j(r))return r}catch(t){pe(t)}}constructor(t,e,i){this.fP=t,this.sht=e,this.nht=i,this.hht=0}},PH=class extends Et{get _it(){return this.Xit&&this.Xit._it}get git(){return this.Xit&&this.Xit.git}get Dst(){return this.Xit&&this.Xit.Dst}get o(){return this.Xit&&this.Xit.Ny.o}get Yrt(){var t;return null==(t=this.Xit)?void 0:t.Yrt}get uht(){var t;return null==(t=this.Xit)?void 0:t.Jrt}get vit(){return this.Xit?this.Xit.vit.map((t=>t.href)):[this.cht]}get cht(){return this.dht.href}get mit(){return this.Xit&&this.Xit.Ny.mit}get pit(){return this.Xit&&this.Xit.Ny.pit}get yit(){return this.Xit&&this.Xit.Ny.yit}get Ait(){return this.Xit&&this.Xit.Ny.Ait}get Tit(){var t,e;const i=(null==(t=null==(e=this.Xit)?void 0:e.Ny.Tit)?void 0:t.Gtt())||0;return w.max(i,CH)}get Dg(){return this.fht}_ht(t){const e=this.Dg;this.fht=t,e!==this.Dg&&this.To(new lH)}get Sit(){return this.jrt}get ght(){return this.Iw===ks.wB?this.yst:this.vht}get wht(){const t=this.ght;if(void 0!==t)for(const e of this.Sit)if(e.Tn<=t&&e.Pn>t)return e}get Cet(){return this.Xit&&this.Xit.Ny.Cet}get kit(){return this.Xit&&this.Xit.kit}get Brt(){for(let t=this.jrt.length-1;t>=0;t-=1){const e=this.jrt[t].Brt;if(e)return e}}get yst(){const t=this.Brt;if(void 0===t)return;const e=t-this.mht;return w.max(e,this.vht)}get vht(){for(const t of this.jrt){const e=t.Bit;if(void 0!==e)return e}}get oP(){return Boolean(this.pht.oP)}get mht(){const t=this.Xit&&this.Xit.Ny.Eit;return t?t.Xtt():this.Iw===ks.wB?this.yht:0}get yht(){return this.pht.yht?this.pht.yht:1.5*this.Ait.Xtt()}get vet(){return this.Xit&&this.Xit.vet}get Iw(){return this.Xit?this.Xit.Iw:void 0}async Kn(t,e,i){const s=[],n=[],r=t.wit?Ee.Rh(t.wit,this.dht):this.dht;void 0===this.Xit?(await this.Aht.Jq(t.Iit),this.Xit=new vH(t,this.dht,r,this.rht(),this.Grt),this.Xit.wn(sh.Uit,this.Os)):this.Xit.Kn(t,r,this.rht(),e);const h=this.Xit.Sit;let o;if(0===h.length)o=this.jrt.slice(),Ce(this.jrt);else{const t=h[0].o;let e=0;for(;e<this.jrt.length&&this.jrt[e].o!==t;)e++;o=this.jrt.splice(0,e);for(let t=0;t<h.length;t++){const e=h[t];let r;t<this.jrt.length?r=this.jrt[t]:(r=new uH(this,e),s.push(r)),n.push(r.Kn(this.bht,i))}}await Promise.all(n),this.jrt.push(...s);for(const t of o)t.Mrt();this.To(new cH)}rht(){return this.Aht.rht()}Nrt(t){const e=this.jrt.indexOf(t);if(e>0)return this.jrt[e-1]}xrt(t){const e=this.jrt.indexOf(t);if(e>=0&&e+1<this.jrt.length)return this.jrt[e+1]}Lit(){return this.Xit?this.Xit.Lit():void 0}ast(){return this.Xit&&this.Xit.ast()}brt(t){this.Xit&&this.Xit.brt(t)}bn(){this.Lo(),this.Tht=void 0,this._ht(!1);for(const t of this.jrt)t.bn();Ce(this.jrt),this.Xit&&this.Xit.Ou()}constructor(t,e,i,s,n){super(),this.Xit=void 0,this.fht=!0,this.jrt=[],this.Tht=void 0,this.pht=t,this.dht=t.Pw,this.bht=e,this.fP=i,this.Sht=s,this.Aht=new IH(this.fP,this.Sht,this.pht.kht),this.Grt=n}},RH=class{get Zit(){return this.Rrt}constructor(t,e,i,s,n){this.Rrt=new PH(t,e,i,s,n)}},CH=1e3,We=class{get Ar(){return this.Xit}get q(){return this.Eht||(this.Eht=this.i7(this.Iht.M_),M(this.Eht)),this.Eht}async i7(t){this.Xit.Zit.To(new os);try{await this.Pht(t),this.Xit.Zit._ht(!0)}catch(t){throw pe(t),this.Eht=void 0,this.Xit.Zit._ht(!1),new v("The provided MPEG-DASH document could not be loaded - "+t.message)}this.Rht=this.Cht(this.Iht.M_)}async Cht(t){try{for(;this.Xit.Zit.Iw===ks.wB;)await E_(this.xht,t)}catch(t){}}get xht(){return this.Xit.Zit.uht&&this.Xit.Zit.Iw===ks.wB?this.Dht(this.Iht.M_):this.q}async Nht(t){k_(t);const e=this.Bht();if(e>0){const i=w.min(e,2147483647);await uc(i,t)}try{await this.Pht(t),this.Xit.Zit._ht(!0)}catch(t){throw new v("The provided MPEG-DASH manifest could not be loaded - "+t.message)}finally{this.Lht=void 0}}Bht(){const t=this.Xit.Zit.rht().getTime()-this.Xit.Zit.Yrt.getTime();return this.Xit.Zit.Tit-t}Oht(t){const e=this.Xit.Zit.ast();if(e){const i=e.getTime()-t.getTime();if(i>0)return i}this.Xit.Zit.brt(t);const i=this.Xit.Zit.ast();return i?i.getTime()-t.getTime():NaN}async Dht(t){this.Lht||(this.Lht=this.Nht(t));const e=new Hi;e.U_(t);try{await Promise.race([this.Lht,this.Mht(e.M_)].filter(Qf))}catch(t){B(t)}finally{e.Jl()}}Mht(t){const e=this.Xit.Zit.rht(),i=this.Oht(e);if(!j(i)&&!this.Ar.Zit.Dst)return this.Fht(i,t)}async Fht(t,e){await uc(t,e);const i=this.Xit.Zit.rht();this.Xit.Zit.brt(i)}async Uht(t,e){const i=await this.Vht.Hht(t,{},e);return(new _U).Pit(i.Wht,i.gP)}bn(){return this.Iht.Jl(),this.Rht=void 0,this.Eht=void 0,this.Lht=void 0,this.Xit.Zit.bn(),Promise.resolve()}constructor(t,e,i,s,n){this.Iht=new Hi,this.Pht=async t=>{try{const e=this.Xit.Zit.rht(),i=await this.Uht(this.Xit.Zit.vit,t);await this.Xit.Zit.Kn(i,e,t)}catch(t){throw my(t)&&this.Xit.Zit._ht(!1),t}},this.Vht=s,this.Xit=new RH(t,e,i,this.Iht.M_,n)}},xH=class extends Xi{constructor(t,e){super("qht"),this.zht=t,this.Xht=e}},DH=class extends Et{get Xht(){return this.Ght}get Iw(){return this.vJ}get Z(){return this.Yv.slice()}NI(t){t&&this.Ght!==t&&this.Qht(t)}BI(t){this.Ght===t&&this.Qht(void 0)}Qht(t){this.Ght=t,this.To(new xH(this,this.Ght))}bn(){this.Lo();for(const t of this.Yv)t.Qet=void 0;Ce(this.Yv)}constructor(t,e){super(),this.Ght=void 0,this.vJ=t,this.Yv=e;for(const t of this.Yv)t.Qet=this}},NH=class extends la{pa(){return new BH(this.dw.map((t=>t.ma)))}constructor(t,e){super(ze.Gv),this.dw=t||[],this.Ht=e}},BH=class extends Xi{constructor(t){super("targetqualitychanged"),this.qualities=t,this.quality=this.qualities.length>0?this.qualities[0]:void 0}},LH=class extends Oo{pa(){return new OH(this.quality.ma)}constructor(t){super(ze.QUALITY_UNAVAILABLE),this.quality=t}},OH=class extends cn{constructor(t){super("qualityunavailable"),this.quality=t}},MH=class extends Xi{constructor(){super(ze.NO_QUALITY)}};function FH(t){return{IO:t.IO,g9:t.bet,Ci:UH(t)?t.Ci:0,Iw:UH(t)?Di.vl:Di.yy,Ti:UH(t)?t.Ti:0}}function UH(t){const e=t;return void 0!==e.Ci&&void 0!==e.Ti}var bs,HH=0,VH=class extends Et{get lw(){return this.zit.Get.map(WH).filter(Qf)}Kht(t){if(!this.dS._S(t))return;t.BI();const e=this.jht();if(this.Yht&&Bc(this.Yht,t)){const t=this.Yht.filter((t=>t.H7));0===t.length&&e.length>0?this.fw=e:this.fw=t}else this.fw=e;this.To(new LH(t))}jht(){const t=[];for(const e of this.dS.Kv)e.H7&&t.push(e);return t}get uw(){return this.Zht}Jht(t){this.Zht=t.$it,this.To(t)}get qit(){return this.zit}get Rt(){return this.We}set Rt(t){this.yS(t)}get ma(){return this.Gu||(this.Gu=Kt(this)),this.Gu}get Qet(){return this.$ht}set Qet(t){this.$ht=t}get o(){return this.wS}get cw(){return this.mS}get Lt(){return this.lJ}get gs(){return this.Lx}get _h(){return this.Yu}set _h(t){t!==this.Yu&&(this.Yu=t,this.To(new xa(this)))}get bw(){return this.Rt?"enabled":"disabled"}get fw(){return this.Yht}set fw(t){let e=[];if(t){const i=(null!=t?t:[]).filter((t=>{const e=this.uw?FH(this.uw):void 0;return Ee.Zs.c9(e,FH(t))}));if(0===i.length)return;e=i.filter((t=>t.H7))}else e=this.jht();0===e.length&&this.To(new MH),this.Yht=t&&this.dS._S(t)?t:void 0,this.tot=this.eot(this.Yht),this.To(new NH(t,this))}get iot(){return this.tot}eot(t){if(!t||0===t.length)return;const e=[];for(const i of this.sit)for(const s of t)s===i.$it&&s.H7&&e.push(i);return e}get dw(){return this.dS}get sit(){return this.qit&&this.qit.sit}get rot(){return this.hot}yS(t){this.We=t,this.$ht&&(t?this.$ht.NI(this):this.$ht.BI(this))}oot(t){this.We=t,this.aot!==t&&(this.aot=t,this.To(new In(this)))}bn(){for(const t of this.dS.Kv)t.pn("update",this.uot);this.dS.ir()}constructor(t,e,i="alternative"){super(),this.Zht=void 0,this.We=!1,this.Gu=void 0,this.$ht=void 0,this.wS="",this.aot=!1,this.dS=new Ua,this.Yht=void 0,this.tot=void 0,this.uot=()=>this.To(new xa(this)),this.zit=t,this.wS=String(HH++),this.mS=vs(),this.lJ=i,this.Lx=t.J3,this.Yu=t._h,this.hot=t.Iw;for(const t of e)t.wn("update",this.uot),this.dw.fS(t)}};function WH(t){if("urn:mpeg:dash:role:2011"===t.tet)return qH(t);if("urn:tva:metadata:cs:AudioPurposeCS:2007"===t.tet){if("1"===t.kT)return zc.gw;if("2"===t.kT)return zc.mw}}function qH(t){if(void 0!==(null==t?void 0:t.kT))switch(t.kT){case"caption":return zc._w;case"sign":return zc.ww;case"description":return zc.gw;case"enhanced-audio-intelligibility":return zc.mw;default:return}}!function(t){t[t.bU=0]="bU",t[t.cot=1]="cot",t[t.lot=10]="lot",t[t.dot=11]="dot",t[t.fot=12]="fot",t[t._ot=13]="_ot",t[t.got=14]="got",t[t.vot=15]="vot",t[t.wot=20]="wot",t[t.mot=21]="mot",t[t.pot=22]="pot",t[t.yot=23]="yot",t[t.Aot=24]="Aot",t[t.bot=30]="bot",t[t.Tot=31]="Tot",t[t.Sot=32]="Sot",t[t.kot=33]="kot",t[t.Eot=34]="Eot",t[t.Iot=35]="Iot",t[t.Pot=40]="Pot",t[t.Rot=41]="Rot",t[t.Cot=42]="Cot",t[t.xot=43]="xot",t[t.Dot=44]="Dot",t[t.Not=50]="Not",t[t.Bot=51]="Bot",t[t.Lot=60]="Lot",t[t.Oot=61]="Oot",t[t.Mot=62]="Mot",t[t.Fot=63]="Fot",t[t.Uot=70]="Uot",t[t.Hot=71]="Hot",t[t.Vot=72]="Vot",t[t.Wot=73]="Wot",t[t.qot=74]="qot",t[t.zot=75]="zot",t[t.Xot=76]="Xot",t[t.Got=77]="Got",t[t.Qot=90]="Qot",t[t.Kot=91]="Kot"}(bs||(bs={}));var re,ca,_n=class extends Xi{constructor(t,e,i){super(o.Yw),this.currentTime=t,this.initDataType=e,this.initData=i}};function gu(t,e,i,s,n){let r=[],h=[];for(const t of e)t.Iw===Di.yy?r=r.concat(t.Z):t.Iw===Di.vl&&(h=h.concat(t.Z));return[zH(t,r,i,s,null==n?void 0:n.preferredAudioCodecs),XH(t,h,i,s,null==n?void 0:n.preferredVideoCodecs)].filter(Qf)}function zH(t,e,i,s,n){const r=pi(s||[],(t=>t.rot===Di.yy&&t.Rt)),h=[QH(r,i,t),KH(r),jH(r,n),YH(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return GH(e,h)}function XH(t,e,i,s,n){const r=pi(s||[],(t=>t.rot===Di.vl&&t.Rt)),h=[QH(r,i,t),jH(r,n),YH(),t=>{const e=t.filter((t=>"main"===t.Lt));return e.length>0?e:t}];return GH(e,h)}function GH(t,e){if(0===t.length)return;let i=t;for(const t of e){if(1===i.length)return i[0];i=t(i)}return i[0]}function QH(t,e,i){return s=>{const n=t?t.qit.o:void 0;if(!Qf(n))return s;const r=null==e?void 0:e.dit,h=i.dit,o=r&&h&&r.kT===h.kT,a=pi(s,(t=>t.qit.o===n));return o&&a?[a]:s}}function KH(t){return e=>{const i=t?t.gs:"",s=e.some((t=>""!==t.gs))?e.filter((t=>""!==t.gs)):e;if(""===i)return s;const n=pi(s,(t=>t.gs===i));return n?[n]:s}}function jH(t,e){return i=>{if(void 0===t&&e&&e.length>0)for(const t of e){const e=i.filter((e=>e.dw.Kv.some((e=>Ya(e.bet,t)))));if(e.length>0)return e}return i}}function YH(){return t=>{let e=[],i=-1/0;for(const s of t){const t=s.qit.HM;t>i?(i=t,e=[s]):t===i&&e.push(s)}return e}}!function(t){t.jot="api",t.Yot="start"}(re||(re={})),(ca||(ca={})).Zot="Jot";var ZH=class extends Xi{constructor(t){super(o.dm),this.error=t}};function JH(t){return void 0!==t.$u}function $H(t,e){const i=t.Ti&&e.Ti,s=t.Ci&&e.Ci;if(i||s){if(i&&s)return t.Ti*t.Ci-e.Ti*e.Ci;if(i)return t.Ti-e.Ti;if(s)return t.Ci-e.Ci;return(t.Ti||1)*(t.Ci||1)-(e.Ti||1)*(e.Ci||1)}return 0}function tV(t,e){return $H(t,e)||function(t,e){return t.IO-e.IO}(t,e)}var Ks=class t{$ot(e,i,s,n){let r=t.sortByQuality(e);if(void 0!==this.eat&&void 0===i&&e.length>1){const e=t.iat(r,this.eat);e&&(r=e)}const h=this.sat(r,i,s,n);return h.length?h[h.length-1]:r[0]}sat(e,i,s,n){var r;const h=t.sortByQuality(e),o={nat:void 0===n||this.oat.rat?this.oat.nat:n,$u:JH(s)&&s.$u?s.$u:1,aat:s.Ti,uat:s.Ci,dat:null==(r=this.fat)?void 0:r.restrictToPlayerSize};let a=h;for(const t of this._at)a=t(a,i,o,this.b9,this.gat);return a}static vat(e){return t.sortByQuality(e)[0]}static wat(e,i){var s;return i?t.vat(null!=(s=t.iat(e,i))?s:e):t.vat(e)}static iat(t,e){for(const i of e){const e=t.filter((t=>Ya(t.g9,i)));if(e.length>0)return e}}static sortByQuality(t){const e=[...t];return e.sort(tV),e}constructor(t,e,i,s,n,r){this._at=t,this.oat=e,this.b9=i,this.fat=s,this.eat=n,this.gat=r}},eV={maxRetries:3,minimumBackoff:1e3,maximumBackoff:1/0},on=class{mat(t,e,i){const s=this.pat.maxRetries===1/0?eV:this.pat;return Xu((()=>this.yat(t,e,i)),i,s.maxRetries,s.minimumBackoff,s.maximumBackoff)}async yat(t,e,i){let s;for(const n of t)try{const t=new vh({TI:n,sP:Ct.KT,eP:e,oP:this.Aat,iP:ut.GET,Iw:_h.WI,rP:hi.YT,M_:i,kI:3e4,nP:5e3}),s=await this.fP.pI(t),r=await s._P(i);return{Wht:r,bat:n,gP:s.gP}}catch(t){s=t}throw s}constructor(t,e,i=eV){this.fP=t,this.Aat=e,this.pat=i}},iV=class{async Hht(t,e,i){let s;for(const n of this.Tat)try{return await n.Hht(t,e,i)}catch(t){pe(t),s=t}throw s}constructor(t){this.Tat=t}},sV=class{async Hht(t,e,i){const s=await this.Sat.Y7(t);if(s)return{Wht:s.data,bat:s.locationURL,gP:s.responseURL};throw new v("Manifest fetch from cache unsuccesful")}constructor(t){this.Sat=t}},nV=class{async Hht(t,e,i){return await this.Eat.mat(t,e,i)}constructor(t){this.Eat=t}};function rV(t,e){return new iV([new sV(e),new nV(t)])}var hV=class{async Hht(t,e,i){const s=await this.Vht.Hht(t,e,i);return await this.Iat(s),s}async Iat(t){await this.Pat.ott({key:TF(t.bat),locationURL:we(t.bat),responseURL:we(t.gP),data:t.Wht,references:[this.Rat.o]})}constructor(t,e,i){this.Vht=t,this.Pat=e,this.Rat=i}},jn=class extends Xi{constructor(){super(o._m)}},tn=class extends Xi{constructor(){super(o.fm)}},oV=class extends Cu{Cat(t){return t.Nc=mn.LOADED,this.tt(t),t}xat(t){for(const e of this.Z.Kv)if(e.Aw===t)return e}constructor(){super()}};function aV(t,e){return""===e?t:t+" "+e}var uV=class extends Da{get ma(){return this.Gu||(this.Gu=function(t){return oe(dn(t),{get attributes(){return t.rI},get eventID(){var e;return""+(null!=(e=t.Dat)?e:"")}})}(this)),this.Gu}QS(t){return this.O===t.O}constructor(t,e,i,s,n){super(t,e,i,!1,null==n?void 0:n.toString()),this.rI=s,this.Dat=n}},cV=class extends oV{Nat(t){const e=this.lP.cP(bt.Ty,"","","",void 0,Ca.EVENT_STREAM);return e.Aw=t,this.Cat(e),e}Bat(t,e,i){const s=t.tet;var n;const r=null!=(n=t.kT)?n:"";var h;const o=null!=(h=t.IA)?h:1;var a;const u=null!=(a=t.fet)?a:Te.ZERO,c=aV(s,r);let l=this.xat(c);l||(l=this.Nat(c));for(const s of t.uV)if(!lV(s,l)){const t=dV(s,o,u,e);t.RS>i&&l.vP(t)}}async On(t){await this.ir(),this.zrt=t,this.zrt.wn(o.lm,this.Lat),this.Lat()}async ir(){this.zrt&&(this.zrt.pn(o.lm,this.Lat),this.zrt=void 0);for(const t of this.Z.Kv)this.lP.mP(t);await super.ir()}constructor(t){super(),this.zrt=void 0,this.Lat=()=>{var t,e;const i=null!=(e=null==(t=this.zrt.Lit())?void 0:t.Tn)?e:0;if(i>0)for(const t of this.Z.Kv)xy(t,i);for(const t of this.zrt.Sit)if(t.Pn>i)for(const e of t.fit)this.Bat(e,t,i)},this.lP=t}};function lV(t,e){const i=t.o;if(void 0!==i){if(pi(e.L.Kv,(e=>e.Dat===i&&e.O===t.Ny)))return!0}return!1}function dV(t,e,i,s){const n=t.o,r=t.ET.toSigned().subtract(i),h=t.ct,o=t.Ny,a=t.rI,u=r.toNumber()/e+s.Tn,c=h?h.toNumber()/e:void 0,l=void 0!==c?u+c:s.Ort;return new uV(u,l,o,a,n)}function fV(t,e,i,s){const n=[],r=pi(i,(t=>t.tet===zg));if(void 0===r)return;const h=r.kT?function(t){const e=t.split(":",1)[0];switch(e){case"cbcs":case"cenc":return e;default:return}}(r.kT.toLowerCase()):"cenc";if(void 0!==h){for(const t of i)if(t.tet!==zg)for(const e of rA(t.tet))n.push({ap:e,BO:t.$tt?[t.$tt]:[],LO:void 0,QL:void 0});if(n.length)return{sL:t,Oat:{Mat:h,nL:r.nL},Fat:n,Uat:e===Di.yy?s.slice():[],Hat:e===Di.vl?s.slice():[],h0:!1}}}function _V(t,e){if(!t)return e;if(!e)return t;const i=[],s=Wn();var n;return gV(i,s,t.Fat),gV(i,s,e.Fat),{sL:t.sL,Oat:{Mat:t.Oat.Mat,nL:null!=(n=t.Oat.nL)?n:e.Oat.nL},Fat:i,Uat:vV(t.Uat,e.Uat,Bc),Hat:vV(t.Hat,e.Hat,Bc),h0:t.h0||e.h0||!1}}function gV(t,e,i){for(const s of i){const i=s.ap.gC;let n;e.has(i)?(n=e.get(i),n.BO=vV(n.BO,s.BO,wV)):(n=Me({},s),t.push(n),e.set(i,n))}}function vV(t,e,i){const s=t.slice();for(const t of e)i(s,t)||s.push(t);return s}function wV(t,e){for(const i of t)if(lr(i,e))return!0;return!1}function mV(t,e){let i;const s=t.ket;if(s){const n=t.aV,r=[];for(const e of t.bet)r.push(n+'; codecs="'+e+'"');i=fV(e||{},t.Iw,s,r)}for(const s of t.sit)i=_V(i,pV(s,e));return i}function pV(t,e){return fV(e||{},t.Iw,t.ket||[],[t.rM])}function yV(t){return t?t.Fat.map((e=>{const i=AV(t.sL,e.ap),s=t.Oat.Mat;return{ap:e.ap,BO:e.BO,QL:e.QL,PM:[{initDataTypes:[e.ap.fC],audioCapabilities:bV(t.Uat,s,null==i?void 0:i.audioRobustness),videoCapabilities:bV(t.Hat,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]}})):[]}function AV(t,e){switch(e.Iw){case Js.Ym:return t.widevine;case Js.jm:return t.playready;case Js.Zm:return t.fairplay;case Js.Jm:return t.clearkey}}function bV(t,e,i){if(0!==t.length)return t.map((t=>({contentType:t,encryptionScheme:e,robustness:i})))}var TV=class extends oV{Nat(t){const e=this.lP.cP(bt.Ty,t.o,"thumbnails","",!1,Ca.DEFAULT);return e.bw=lu.Qn,this.Cat(e),e}async On(t){await this.ir(),this.zrt=t,this.zrt.wn(o.lm,this.Kn),this.Kn()}Vat(t){this.Wat(t),this.qat()}qat(){const t=[];for(const e of this.Z.Kv)this.zat(e)||t.push(e);for(const e of t)this.it(e)}Wat(t){const e=[];for(const i of this.vst)-1===t.indexOf(i)&&e.push(i);for(const t of e)me(this.vst,t)}async ir(){this.zrt&&(this.zrt.pn(o.lm,this.Kn),this.zrt=void 0);for(const t of this.vst)t.pn(sh.Uit,this.Xat);this.vst.length=0;for(const t of this.Z.Kv)this.lP.mP(t);await super.ir()}bn(){return this.Xat=void 0,super.bn()}Gat(){var t,e;const i=null!=(e=null==(t=this.zrt.Lit())?void 0:t.Tn)?e:0;if(i>0)for(const t of this.Z.Kv)xy(t,i)}Qat(t){return this.Z.Kv.some((e=>e.o===t.o))}Kat(t){return pi(this.Z.Kv,(e=>e.o===t.o))}zat(t){return this.vst.some((e=>t.o===e.o))}constructor(t){super(),this.vst=[],this.Kn=()=>{const t=[];for(const e of this.zrt.Sit)for(const i of e.cit)if(i.Iw===Di.jT&&i.sit.length>0){const e=i.sit[0];t.push(e),this.Qat(e)||this.Nat(e),-1===this.vst.indexOf(e)&&(this.vst.push(e),e.wn(sh.Uit,this.Xat)),this.jat(e)}this.Vat(t)},this.jat=t=>{const e=this.Kat(t);e&&t&&e.bw!==lu.Th&&(this.Gat(),function(t,e){const i=t.met,s=t.ost();if(!s)return;const n=s.Ost,r=s.Mst,h=t.Ti,o=t.Ci,[a,u]=function(t){for(const e of t)if(N(e.tet,kV)||N(e.tet,EV)){const t=e.kT.match(SV);if(t){const[,e,i]=t;return[Number(e),Number(i)]}}return[1,1]}(t.Eet);let c=n;for(;c&&c.ret<=r.ret;){const s=t.ist.ct||c.ct,n=IV(e,c,t.rst(c).TI,h,o,a,u,s);for(const t of n)e.vP(t);c=i.Vst(c)}}(t,e))},this.lP=t;const e=this;this.Xat=function(){e.jat(this)}}},SV=/^(\d+)x(\d+)$/,kV="http://dashif.org/guidelines/thumbnail_tile",EV="http://dashif.org/thumbnail_tile";function IV(t,e,i,s,n,r,h,o){const a=[],u=e.PS,c=r*h,l=s/r,d=n/h,f=w.round(l),_=w.round(d),g=o/c;if(1===c){const e=u+g;return PV(t,u,e,i)?a:[new Da(u,e,i,!1)]}for(let s=0;s<h;s++)for(let n=0;n<r;n++){const h=u+(s*r+n)*g,o=h+g,c=i+"#xywh="+w.round(n*l)+","+w.round(s*d)+","+f+","+_;if(PV(t,h,o,c)||a.push(new Da(h,o,c,!1)),o>=e.RS)return a}return a}function PV(t,e,i,s){return t.L.Kv.some((t=>t.PS===e&&t.RS===i&&t.O===s))}var RV=class extends Da{get ST(){return this.Yat}get kT(){return this.Zat}get Jat(){return this.$at}get ma(){return this.Gu||(this.Gu=function(t){return oe(dn(t),{get schemeIDURI(){return t.ST},get value(){return t.kT},get emsgID(){return t.Jat}})}(this)),this.Gu}QS(t){return L(this.O,t.O)}constructor(t,e,i,s,n,r){super(t,e,r,!1),this.Yat=i,this.Zat=s,this.$at=n}},Cn=class t extends oV{tut(e,i,s){const n=Ue.uA(Sa(e));if(!n)return;const r=function(t,e){const i=[];for(const s of t)sw(s,e)&&i.push(s);return i}(n,hs.ly);if(r.length){const e=t.eut(n,i,s);this.iut(r,e,s)}}iut(t,e,i){for(const s of t){let t;t=1===s.oA?s.ET.toNumber()/s.IA+i:e+s.RT/s.IA;const n=t+s.IT/s.IA;"https://aomedia.org/emsg/ID3"===s.ST?this.sut(s,t):this.nut(s,t,n)}}nut(t,e,i){const s=aV(t.ST,t.kT);let n=this.xat(s);n||(n=this.rut(s),this.Cat(n)),n.vP(new RV(e,i,t.ST,t.kT,t.o,t.PT))}sut(t,e){const i=vx(Sa(t.PT));if(!i)return;const s=aV(t.ST,t.kT);let n=this.xat(s);n||(n=this.hut(s),this.Cat(n));for(const t of i.UJ){const i=new Sx(e,t);GC(i,n.L.Kv),n.vP(i)}}static eut(t,e,i){const s=uo(t,hs._y);return s?ye(s.VT,s.IA)+i:e}rut(t){const e=this.lP.cP(bt.Ty,"","","",void 0,Ca.EMSG);return e.Aw=t,e.bw=lu.Tw,e}hut(t){const e=this.lP.cP(bt.Ty,"","","",void 0,Ca.ID3);return e.Aw=t,e.bw=lu.Tw,e}async ir(){for(const t of this.Z.Kv)this.lP.mP(t);await super.ir()}constructor(t){super(),this.lP=t}},CV=class extends Cn{async On(t){await this.ir(),this.zrt=t,this.zrt.wn(o.lm,this.Lat),this.Lat()}async ir(){this.zrt&&(this.zrt.pn(o.lm,this.Lat),this.zrt=void 0),await super.ir()}constructor(...t){super(...t),this.Lat=()=>{var t,e;const i=null!=(e=null==(t=this.zrt.Lit())?void 0:t.Tn)?e:0;this.II(i)}}};var xV=class{ttt(t,e){return this.out?this.Sat.ttt(t,e):Promise.resolve(!1)}itt(t,e){return this.out?this.Sat.itt(t,e):Promise.resolve(void 0)}async Y7(t){const e=await this.Sat.Y7(t);return this.out=void 0!==e,e}sX(t){return this.Sat.sX(t)}constructor(t){this.out=!1,this.Sat=t}},DV=[o.Rf,o.gm,o.wm,o.dm,o.pm],NV=[o.Vu,o.Il,o.$w,o.Zw],BV=class t extends Et{async aut(t,e,i,s){const n=this.uut(this.fP,this.GF,this.Sat,this.cut,t,s);return n.wn(sh.Vit,this.lut),n.wn(o.dm,this.Os),await n.Jq(e,i),n}fut(t){void 0===t&&(t=!1),this._ut.Jl(),this.J0.Jl(),this.gut.Jl(),this.gut=new Hi,this.vut=this.wut(this.mut,this.$0,this.vut,t,this.gut.M_).catch(this.yut)}async wut(t,e,i,s,n){await Promise.all([t,e,i]),k_(n),await E_(this.Aut.jf,n);const r=this.but;await r.Tut(),this.vY(),k_(n);const h=r.JM,o=r.Sut,a=r.kut;let u=this.Eut(h,a,h,o,!1),c=this.Iut(a,u);!s&&this.Put(c)?await this.Rut(a,u,c):(u=this.Eut(h,a,h,o,!0),c=this.Iut(a,u),await this.Cut(a,u,c,n)),k_(n),this.Fc?this.gc(this.Wu):this.xut(),this.Dut()}async Rut(t,e,i){const s=this.but;await this.Nut(i),this.But=i,await this.Lut(s,t,e),await s.Out(bs.dot)}async Cut(t,e,i,s){const n=this.but;this.n1(),this.Mut();const r=this.Fut;await this.Uut(),await this.yZ(i),this.But=i,await this.Lut(n,t,e);try{const t=this.Hut(r,!1,!0,s);await n.Out(bs.dot),await t}finally{this.l1(),this.Vut()}}get ht(){return this.$T}get QO(){const t=this.Fut,e=this.Wut,i=e.TF(t);if(-1!==i)return{Tn:e.Tn(i),Pn:e.Pn(i)}}get Wut(){var t,e,i;const s=null!=(i=null==(t=this.but)?void 0:t.bl)?i:d.Nl();var n;const r=null!=(n=null==(e=this.qut)?void 0:e.bl)?n:d.Nl();return s.Hl(r)}get bl(){return this.Wut.ws()}get qu(){var t;const e=null==(t=this.Xit)?void 0:t.Zit,i=null==e?void 0:e.git;if(!e||!i)return;const s=i.getTime(),n=1e3*this.Wu;return new Date(n+s)}set qu(t){var e;const i=null==(e=this.Xit)?void 0:e.Zit,s=null==i?void 0:i.git;if(!t||!i||!s)return;const n=s.getTime()/1e3,r=t.getTime()/1e3;this.gc(r-n)}get Fut(){return void 0!==this.S0?this.S0:void 0!==this.zut?this.zut:this.KO.Wu}get Wu(){return this.Fut}set Wu(t){this.gc(t,t===1/0)}get ct(){let t=NaN;return this.but&&this.but.Xut?t=this.but.Pn:this.Xit&&void 0!==this.Xit.Zit.Iw&&(t=this.Xit.Zit.yit?this.Xit.Zit.yit.Xtt():1/0),t}get Pn(){return this.ct}get Ic(){return!(!this.but||!this.but.Xut)&&(this.Fc?this.Fut===this.but.Pn:this.KO.Ic)}get lt(){return this.ZO}get Ec(){return this.Vl}get Tg(){}Gut(){var t;const e=this.Qut;if(0===e.U)return!0;var i;return(null!=(i=null==(t=this.QO)?void 0:t.Pn)?i:this.Fut)>=e.Tn(0)}Kut(){var t;if(!this.Xit)return!1;if(this.Xit.Zit.Iw!==ks.wB)return!1;const e=null==(t=this.but)?void 0:t.JM;if(e&&e.Wit)return!0;const i=[];for(const t of this.Xit.Zit.Sit){const e=t.Bit,s=t.Ort;void 0!==e&&void 0!==s&&i.push(e,s)}const s=new d(i).yF();return function(t,e,i){if(!e.U||!i.U)return d.Nl();const s=e.Tn(0),n=e.Pn(e.U-1),r=t.Cn(i).wF().Cn(t).Hl(e);return d.MF(r.Tn(0),r.Pn(r.U-1)).AF(r).RF(((t,e)=>t<s&&e<=n&&e-t>ii))}(this.Wut,this.Qut,s).U>0}get Pg(){return Me({},this.jut,{hS:uh.lC.wO(),oS:this.Yut,aS:{amountOfBufferedAudioSegments:this.Zut,amountOfBufferedVideoSegments:this.Jut}})}get Dc(){return this.P0?this.$ut:this.but&&this.but.Xut?this.tct:this.$ut}get wl(){let t=this.Ho;return this.but&&(t=t.Hl(this.ect)),t.yF(.1).ws()}ict(t){this.Ho=this.Ho.Hl(t)}get Mg(){return this.$O}set Mg(t){this.$O=t,this.sct()}get Nc(){let t=this.KO.Nc;return this.nct&&(t=w.max(dw.Jn,t)),t}get Qut(){return this.rct(!1)}get hct(){return this.rct(!0)}get kl(){return this.Qut.ws()}get Fc(){return this.Yl||this.act}get eM(){}get uct(){var t,e;return null!=(e=null==(t=this.Xit)?void 0:t.Zit.Iw)?e:ks.vB}get nt(){return this.xu}get rt(){return this.eS}get Xg(){var t;return this.cct||(null==(t=this.lct())?void 0:t.Ci)||0}get Kg(){var t;return this.dct||(null==(t=this.lct())?void 0:t.Ti)||0}get Jg(){return this.iM}get tv(){return!1}set tv(t){}get sM(){return this.nM}fct(t){t.wn(DV,this.Os),t.wn(o.Am,this._ct),t.wn(o.qw,this.gct),t.wn(zn.aa,this.vct),t.wn(o.Xw,this.wct),t.wn(o.gm,this.mct),t.wn("qht",this.pct),t.wn("yct",this.pct)}Act(t){t.pn(DV,this.Os),t.pn(o.Am,this._ct),t.pn(o.qw,this.gct),t.pn(zn.aa,this.vct),t.pn(o.Xw,this.wct),t.pn(o.gm,this.mct),t.pn("qht",this.pct),t.pn("yct",this.pct)}bct(t){t.wn(o.Rf,this.Os)}Tct(t){t.pn(o.Rf,this.Os)}lct(){if(!this.but)return;const t=pi(this.but.kut,(t=>t.rot===Di.vl));return t?t.uw:void 0}rct(t){var e;const i=null==(e=this.Xit)?void 0:e.Zit;if(!i)return d.Nl();const s=i.vht;let n=t?i.Brt:i.yst;if(void 0===s||void 0===n)return d.Nl();if(!t){const t=this.ect;t.U>0&&t.Pn(t.U-1)>n&&(n=w.min(t.Pn(t.U-1),i.Brt))}const r=this.ct;return isFinite(r)&&r>n&&(n=r),d.MF(s,n).gF()}async On(t,e){let i,s;k_(e);try{i=this.Xit.Zit.wht,s=this.Xit.Zit.ght}catch(t){throw new v("Something went wrong determining the start of the provided MPEG-DASH stream")}if(!i)throw new v("Something went wrong determining the initial Period of the provided MPEG-DASH stream");if(void 0===s)throw new v("Something went wrong determining the start time of the provided MPEG-DASH stream");t.textTracks&&this.Sct(t.textTracks),this.n1();const n=this.kct(i),r=gu(i,n,void 0,void 0,this.Ect),h=this.Eut(i,r,i,r,!0);r.forEach((t=>t.Rt=!0));const o=this.Iut(r,h);await this.yZ(o),this.But=o,k_(e);const a=await this.aut(i,n,r,h);k_(e),this.Ict(a),this.l1(),k_(e),await a.Out(),k_(e),this.Pct||this.gc(s,!0,re.Yot)}xut(){this._ut.Jl(),this._ut=new Hi,this.mut=this.Rct(this.mut,this.vut,this._ut.M_).catch(this.yut)}Cct(){this._ut.Jl()}async Rct(t,e,i){for(await Promise.all([t,e]),k_(i);;){var s;const t=null==(s=this.but)?void 0:s.JM;if(!t){0;break}if(!await this.xct(t,i)){0;break}}}async xct(t,e){var i;k_(e);const s=this.but;for(0;this.Xit.Zit.Iw===ks.wB&&void 0===(null==(i=this.xrt(t))?void 0:i.Bit);)await E_(this.Dct.xht,e),await this.Nct();for(k_(e),await this.Nct(),k_(e);!s.Bct();)await s.eg(ca.Zot,e),await this.Nct();k_(e),await this.Nct(),k_(e);const n=this.xrt(t);return n?(this.Lct(n)?await this.Oct(n,e):await this.Mct(n,e),!0):(this.EY(),!1)}Lct(t){var e,i,s,n,r;const h=null!=(r=null==(e=this.cut)?void 0:e.seamlessSwitchStrategy)?r:Ts.XT;if(h===Ts.ZT)return!0;if(h===Ts.JT)return!1;const o=this.but,a=null==o?void 0:o.JM,u=null==o?void 0:o.kut,c=gu(t,this.kct(t),a,u,this.Ect),l=this.Eut(t,c,a,u,!1);if(h===Ts.CLEAR_ONLY&&((null==(i=this.but)?void 0:i.Fct)||l)||h===Ts.SAME_DRM_ONLY&&!((null==(s=this.but)?void 0:s.Fct)&&l||!(null==(n=this.but)?void 0:n.Fct)&&!l))return!1;const d=this.Iut(c,l);return this.Put(d)}Uct(){return!1}Hct(t){const e=this.Vct();for(const i of e)i!==t&&(i.bw=lu.Th)}Dut(){if(void 0!==this.Wct){if(this.Wct.Ew){const t=pi(this.ht.Kv,(t=>t.Rt));void 0!==t&&this.Wct.gs===t.gs||(this.Wct.bw=lu.Th)}}else this.qct()}qct(){if(this.Vct().length)return;const t=pi(this.ht.Kv,(t=>t.Rt));if(void 0===t)return;const e=this.nt.Kv.filter((t=>t.Ew));for(const i of e)if(i.gs===t.gs)return i.bw=lu.Qn,void(this.Wct=i)}Vct(){return this.nt.Kv.filter((t=>t.bw===lu.Qn&&(t.Lt===bt.fI||t.Lt===bt.Ay)))}zct(t){if(t&&this.Wct){const e=function(t,e){if(""===t.gs)return;return e.filter((e=>e.gs===t.gs))[0]}(this.Wct,t.nt.Kv);e&&(e.bw=lu.Qn)}}async Oct(t,e){var i,s;const n=this.but;let r=this.qut;const h=this.But;try{k_(e);const i=n.JM,s=n.kut,h=this.kct(t),a=gu(t,h,i,s,this.Ect),u=this.Eut(t,a,i,s,!1);a.forEach((t=>t.Rt=!0));const c=this.Iut(a,u);for(0,await n.Tut(),this.vY(),k_(e),r&&r.JM===t?(this.Put(c)&&await this.Nut(c),this.But=c):(r&&await r.bn(!0),this.Put(c)&&await this.Nut(c),this.But=c,r=await this.aut(t,h,a,u),this.qut=r,this.bct(r),this.Xct.$v=r.nt),await r.Out(),k_(e);this.Fut<t.Tn;)await this.KO.eg(o.Lu,e);k_(e),this.Ict(r)}catch(t){throw Aa(t)&&(r&&await r.Tut(),h&&this.But!==h&&(this.Put(h)&&await this.Nut(h),this.But=h)),t}(null==(i=this.cut)||null==(s=i.dash)?void 0:s.forceSeekToSynchronize)&&await this.Gct(t,e)}async Gct(t,e){const i=Date.now()/1e3;if(void 0===this.Qct)this.Qct=i;else if(i-this.Qct>900){this.Qct=i,this.Mut();const s=w.max(this.Fut,t.Tn);try{await this.Hut(s,!1,!0,e)}finally{this.Vut()}}}async Mct(t,e){for(k_(e),await this.but.Tut(),this.vY(),await this.Kct(t.Tn),k_(e),this.EY();!this.KO.Ic&&this.Fut<t.Tn;)await this.KO.eg([o.Lu,o.Pf],e);k_(e);const i=this.but.JM,s=this.but.kut,n=this.kct(t),r=gu(t,n,i,s,this.Ect),h=this.Eut(t,r,i,s,!0);r.forEach((t=>t.Rt=!0));const a=this.Iut(r,h);this.but&&(this.jct.pn(ze.oa,this.Yct),await this.but.bn(),this.jct.wn(ze.oa,this.Yct),this.but=void 0),this.qut&&(await this.qut.bn(),this.qut=void 0),this.Mut(),this.n1();const u=w.max(this.Fut,t.Tn);await this.Uut(),await this.yZ(a),this.But=a;const c=await this.aut(t,n,r,h);this.Ict(c);try{const t=this.Hut(u,!1,!0,e);await c.Out(),await zs((e=>Promise.race([t,c.eg([ca.Zot],e)])),e)}finally{this.l1(),this.Vut()}}async Nct(){const t=this.qut;t&&t.JM.Wit&&(await t.bn(!0),this.qut=void 0)}static Zct(t,e){const i=e.some((t=>t.nit.some((t=>"main"===t.kT)))),s=e.map(((t,e)=>{const s=function(t,e){const i=t.filter((t=>"urn:mpeg:dash:role:2011"===t.tet)).map((t=>t.kT)).filter(Qf);if(e||Bc(i,"main"))return Bc(i,"caption")?"captions":Bc(i,"subtitle")?"subtitles":Bc(i,"dub")?"translation":"main";if(Bc(i,"sign"))return"sign";if(Bc(i,"description"))return"descriptions";if(Bc(i,"commentary"))return"commentary";return"alternative"}(t.Get.concat(t.nit),!i&&0===e),n=t.sit.map((t=>t.$it));return new VH(t,n,s)}));return new DH(t,s)}kct(e){const i=[],s=[];for(const t of e.Ert)t.Iw!==Di.yy&&t.Iw!==Di.vl||(0===t.sit.length?this.To(new ZH("No supported representation found in the AdaptationSet with mimetype : "+t.Iw)):t.Iw===Di.yy?i.push(...t.cit):s.push(...t.cit));const n=[];return i.length>0&&n.push(t.Zct(Di.yy,i)),s.length>0&&n.push(t.Zct(Di.vl,s)),n}Iut(t,e){var i,s,n,r,h,o,a,u,c;const l=t.map((t=>Ks.wat(null!=(c=t.iot)?c:t.sit,Bw(t.rot,this.Ect)))).map((t=>({rM:t.rM}))),d=null==(i=this.cut)||null==(s=i.dash)?void 0:s.desiredTimescale;var f;const _=(null==(n=this.cut)?void 0:n.seamlessSwitchStrategy)!==Ts.JT&&(null==(r=this.cut)?void 0:r.seamlessSwitchStrategy)!==Ts.CLEAR_ONLY&&(null==(h=this.cut)?void 0:h.seamlessSwitchStrategy)!==Ts.SAME_DRM_ONLY&&(null!=(f=null==(o=this.cut)||null==(a=o.dash)?void 0:a.needsTimescaleShifting)?f:Ee.Zs.bY),g=null==(u=this.cut)?void 0:u.useManagedMediaSource;return{Iw:di.wB,xZ:l,hM:yV(e),h0:null==e?void 0:e.h0,bY:_,TY:d,VZ:g}}static Jct(t,e){if(!t.length)return;let i;for(const s of t)i=_V(i,mV(s.qit,e));return(null==e?void 0:e.preferredKeySystems)&&i&&(i.Fat=function(t,e){const i=t=>{const i=e.indexOf(t.ap.gC);return i>=0?i:e.length};return Jh(t,((t,e)=>i(t)-i(e)))}(i.Fat,e.preferredKeySystems)),i}Eut(e,i,s,n,r){var h,o;const a=this.cut.contentProtection;let u=t.Jct(i,a);if(void 0!==u)return u;var c;const l=null!=(c=null==(h=this.cut)?void 0:h.seamlessSwitchStrategy)?c:Ts.XT;if(l===Ts.JT||l===Ts.CLEAR_ONLY||l===Ts.SAME_DRM_ONLY)return;const d=null==(o=this.but)?void 0:o.Fct;if(!r&&void 0!==d){const t=!d.h0;if(l===Ts.XT&&t&&!this.Uct())return;return d}const f=!r&&l===Ts.XT;return u=this.$ct(e,a,s,n,f),void 0!==u?(u.h0=!0,u):void 0}$ct(e,i,s,n,r){let h=e,o=!1;for(;;){if(h=o?this.Nrt(h):this.xrt(h),void 0===h){if(o)return;o=!0,h=e;continue}const a=gu(h,this.kct(h),s,n,this.Ect),u=t.Jct(a,i);if(r){const t=this.Iut(a,u);if(!this.Put(t))return}if(void 0!==u)return u}}jl(){this.Dc||(this.$ut=!0,this.P0||(this.tlt(new At),this.elt()),this.ilt())}dl(){this.slt||(this.slt=new $i),this.nlt();const t=this.slt.jf;return M(t),t}nlt(){if(this.$ut=!1,this.H0=!0,this.sct(),this.Ic){const t=this.Qut;t.U>0&&this.gc(t.Tn(0))}this.P0||this.W0().then(this.rlt,this.tlt),this.lut(),this.ilt()}n1(){this.P0||(this.$ut=this.Dc,this.P0=!0,this.elt())}l1(){this.P0&&(this.P0=!1,this.$ut||this.W0().then(this.rlt,this.tlt),this.lut(),this.ilt())}ilt(){const t=this.CB,e=this.Dc;t!==e&&(this.CB=e,e?this.To(new mt(this.Wu)):this.To(new ds(this.Wu)))}gc(t,e,i){return void 0===e&&(e=!1),void 0===i&&(i=re.jot),this.Pct=!0,this._ut.Jl(),this.J0.Jl(),this.Yl=!0,this.S0=t,this.ict(this.ect),this.Uc(new T(this.Wu)),this.J0=new Hi,this.$0=this.t1(t,this.mut,this.$0,this.vut,this.J0.M_,e,i).catch(this.yut),this.$0}hlt(){this.J0.Jl()}async t1(t,e,i,s,n,r,h,o){void 0===r&&(r=!1),void 0===h&&(h=re.jot),void 0===o&&(o=!1);try{var a,u;0,await Promise.all([e,i,s]),k_(n),await E_(this.Aut.jf,n);const c=this.Qut.vF(t);this.S0=c;const l=o||(null==(a=this.cut)||null==(u=a.dash)?void 0:u.forceHardSwitchWhenSeekingBackwards)&&c<=this.Wu,d=this.olt(c),f=this.but;if(l||!f||!f.kl.br(c)&&h!==re.Yot&&f.JM!==d){if(d){let t=this.qut;if(this.n1(),f&&await f.Tut(),t&&t.JM===d&&!l){const e=this.Iut(t.Sut,t.Fct);this.vY(),this.Put(e)&&await this.Nut(e),this.But=e}else{t&&await t.bn(!0);const e=this.kct(d),i=null==f?void 0:f.JM,s=null==f?void 0:f.kut,n=gu(d,e,i,s,this.Ect);let r=this.Eut(d,n,i,s,!1);n.forEach((t=>t.Rt=!0));let h=this.Iut(n,r);this.Lct(d)&&!l?(this.vY(),this.Put(h)&&await this.Nut(h)):(r=this.Eut(d,n,i,s,!0),h=this.Iut(n,r),f&&(this.jct.pn(ze.oa,this.Yct),await f.bn(),this.jct.wn(ze.oa,this.Yct),this.but=void 0),await this.Uut(),await this.yZ(h)),this.But=h,t=await this.aut(d,e,n,r),this.qut=t,this.Xct.$v=t.nt,this.bct(t)}await t.Out(bs._ot),this.Ict(t)}}else{0;const t=this.qut;if(t&&!t.ult){await t.Tut(),this.vY();const e=this.Iut(f.Sut,f.Fct);this.Put(e)&&await this.Nut(e),this.But=e}}0;const _=this.Hut(c,r,!1,n);this.S0=void 0,await this.but.Out(bs._ot),k_(n),this.xut(),await _,k_(n),this.l1(),this.Yl=!1,this.Lc(new ju(this.Wu))}catch(t){if(Aa(t))return void 0;0}}async Hut(t,e,i,s){let n,r,h=!0,a=t;for(;;){const u=this.hct;if(u.U>0){const e=u.vF(t);a!==e&&(u.br(a)&&this.Xit.Zit.Iw===ks.wB||(a=e,h=!0))}if(h)h=!1,n&&M(n),null==r||r.Jl(),r=new Hi,r.U_(s),n=this.clt(a,e,i,r.M_);else if(!this.act&&!this.Bc)break;await zs((t=>Promise.race([n,this.eg([o.wm,o.Nf],t),this.Xit.Zit.eg(sh.Uit,t)])),s)}}Mut(){void 0===this.zut&&(this.zut=this.Fut,this.KO.pn(o.If,this.Uc),this.KO.pn(o.Tf,this.Lc))}Vut(){if(void 0===this.zut)return;const t=this.Fut;this.zut=void 0,this.KO.wn(o.If,this.Uc),this.KO.wn(o.Tf,this.Lc),this.Fut!==t&&this.SM()}llt(t){this.Ho=this.Ho.Hl(t)}olt(t){const e=this.Xit.Zit;let i=e.Sit;if(Ee.Zs.a9&&(i=i.filter((t=>t.ct>=.2))),0===i.length)return;const s=i[0];if(t<=s.Tn)return s;for(const e of i)if(e.Pn>t)return e;return e.Iw!==ks.wB?i[i.length-1]:void 0}Nrt(t){let e=t.Drt;if(Ee.Zs.a9)for(;e&&e.ct<.2;)e=e.Drt;return e}xrt(t){let e=t.Crt;if(Ee.Zs.a9)for(;e&&e.ct<.2;)e=e.Crt;return e}async ba(t,e,i){if(this.dlt(),this.cut&&!ho(this.cut)&&await this.ir(),!t||ho(t))return;this.wP=new Hi,i&&this.wP.U_(i),this.cut=t,this.flt=e,this.Ect=t.abr,this._lt=t.ignoreEmbeddedTextTrackTypes;const s=rV(new on(this.fP,Boolean(this.cut.useCredentials),this.pat),this.Sat);this._ht(!0),this.Dct=new We({Pw:Ee.Rh(this.cut.src),yht:this.cut.liveOffset,kht:this.cut.timeServer,oP:this.cut.useCredentials},this.glt(this.Ect),this.fP,s,this.cut.dash),this.Xit=this.Dct.Ar,this.Xit.Zit.wn(o.Ef,this.vlt),this.Xit.Zit.wn(o.lm,this.wlt),this.Xit.Zit.wn(cu.Vrt,this.plt),this.Xit.Zit.wn(sh.Uit,this.lut),await this.ylt.On(this.Xit.Zit),await this.Alt.On(this.Xit.Zit),Bc(this._lt,Ca.EMSG)||(this.blt=new CV(this.lP),this.xu.MO(this.blt.Z),await this.blt.On(this.Xit.Zit)),this.sct()}async Tlt(){const t=this.Xit.Zit.Dg;var e,i;(this._ht(t),t)?this.pct():(await Promise.all([null==(e=this.but)?void 0:e.Tut(bs.Rot),null==(i=this.qut)?void 0:i.Tut(bs.Rot)].filter(Qf)),this.Cct(),this.hlt(),this.gut.Jl())}get Dg(){return this.fht}_ht(t){this.fht!==t&&(this.fht=t,this.To(t?new jn:new tn))}sct(){return this.Xit?(this.Slt=this.klt(this.Slt,this.wP.M_),this.Slt.catch(this.yut)):Promise.resolve()}async klt(t,e){t&&(await t,k_(e));try{this.Mg===D.XT||this.H0?await this.Elt(e):this.Mg===D.Ty&&await this.Ilt(e)}catch(t){throw pe(t),this.OM(new jr(n.MANIFEST_LOAD_ERROR,t.message,t)),t}}async Elt(t){await this.Ilt(t),this.Plt||(this.Plt=!0,this.Aut.U_(this.On(this.flt,t)));try{await this.Aut.jf}catch(t){pe(t),this.OM(new jr(n.MEDIA_DECODE_ERROR,t.message,t))}}async Ilt(t){await E_(this.Dct.q,t)}Ict(e){const i=this.but;e!==i&&(this.but&&this.Act(this.but),this.qut&&this.Tct(this.qut),i&&this.ict(this.ect),this.but=e,this.qut=i,this.fct(this.but),this.qut&&this.bct(this.qut),this.$T.$v=e.ht,this.eS.$v=e.rt,this.zct(e),this.jct.pn(ze.oa,this.Yct),t.Rlt(this.jct),this.jct.wn(ze.oa,this.Yct),this.jct.$v=e.nt,this.Xct.$v=void 0,this.qct())}static Rlt(t){for(const e of t.Kv)e.bw=lu.Th}be(){this.oF=!0}ke(){this.oF=!1}OM(t){this.ZO||(M(this.ir()),this.ZO=Lt(t),this.Vl=t,this.To(new Vo(t)))}dlt(){this.ZO=void 0,this.Vl=void 0}async ir(){this.$u=1,this.wP.Jl(),this.hlt(),this.Cct(),this.gut.Jl(),this.Aut.Jl(),this.Pct=!1,this.jl(),this.H0=!1,this.$T.$v=void 0,this.eS.$v=void 0,this.jct.$v=void 0,this.Xct.$v=void 0,this.Slt&&(await this.Slt.catch(Qo),this.Slt=void 0),await Promise.all([this.mut,this.$0,this.vut,this.Aut.jf.catch(Qo)]),this.but&&(await this.but.bn(),this.but=void 0),this.qut&&(await this.qut.bn(),this.qut=void 0),await this.Uut(),this.But=void 0,this.Wct=void 0,this.wM.ir(),await this.ylt.ir(),await this.Alt.ir(),void 0!==this.blt&&(this.xu.HO(this.blt.Z),await this.blt.bn(),this.blt=void 0),this.lP.ir(),this.Xit&&(this.Xit.Zit.pn(o.Ef,this.vlt),this.Xit.Zit.pn(o.lm,this.wlt),this.Xit.Zit.pn(cu.Vrt,this.plt),await this.Dct.bn(),this.Xit=void 0),this.nct=!1,this.Clt=NaN,this.xlt=0,this.Dlt=0,this.zut=void 0,this.P0=!1,this.Ho=d.Nl(),this.CB=!0,this.S0=void 0,this.Nlt=!1,this.Yl=!1,this.Plt=!1,this.Aut=new $i,this.Yut=0,this.Zut=0,this.Jut=0,this.cut=void 0,this.flt=void 0,this._lt=[],this.Qct=void 0}async bn(){this.Lo(),this.dlt(),await this.ir(),this.Lo(),this.$T.bn(),this.eS.bn(),this.but&&await this.but.bn(),this.qut&&(this.Tct(this.qut),await this.qut.bn()),this.jct.bn(),this.Xct.bn(),this.xu.bn(),this.wM.bn(),this.Blt.Ou(),await this.ylt.bn(),await this.Alt.bn(),this.lP.bn(),this.KO.pn(o.Nf,this.Y1),this.KO.pn(pt.Yw,this.g0),this.KO.pn(o.Pf,this.Q1),this.KO.pn(o.If,this.Uc),this.KO.pn(o.Tf,this.Lc),this.KO.pn(o.vm,this.mct),this.KO.pn(o.Lu,this.SM),this.KO.pn([o.Ph,o.Ch],this.Llt),this.KO.pn(NV,this.Os)}ev(){return this.KO.wa}get Eg(){return!1}fv(){return!1}_v(){}vv(){}wv(){}mv(){this.fut(!0)}constructor(t,e,i,s,r){super(),this.but=void 0,this.qut=void 0,this.H0=!1,this.Clt=NaN,this.ZO=void 0,this.Vl=void 0,this.P0=!1,this.zut=void 0,this.S0=void 0,this.Nlt=!1,this.xlt=0,this.Dlt=0,this.nct=!1,this.wP=new Hi,this.Aut=new $i,this.Plt=!1,this.Xit=void 0,this.Dct=void 0,this.fht=!0,this.$ut=!0,this.slt=void 0,this.Ho=d.Nl(),this.$O=D.$M,this.Slt=void 0,this.CB=!0,this.cut=void 0,this.flt=void 0,this.Ect=void 0,this._lt=[],this.Yl=!1,this.oF=!0,this.iM=new fe,this._ut=new Hi,this.mut=Promise.resolve(),this.J0=new Hi,this.$0=Promise.resolve(),this.Pct=!1,this.gut=new Hi,this.vut=Promise.resolve(),this.But=void 0,this.blt=void 0,this.Yut=0,this.Zut=0,this.Jut=0,this.nM=new bk,this.VF=new Lr,this.Qct=void 0,this.pct=()=>{this.fut()},this.SM=()=>{this.To(new hc(this.Wu,this.qu))},this.g0=t=>{this.To(new _n(this.Wu,t.fC,t.kC))},this._ct=t=>{this.Yut+=t.oS,this.To(t)},this.gct=t=>{const e=t.segments.filter((t=>t.Olt));t.track===Di.yy?this.Zut=e.length:t.track===Di.vl&&(this.Jut=e.length)},this.Y1=()=>{const t=this.ct;j(t)||t===this.Clt||(this.Clt=t,this.To(new oa(this.Clt)))},this.Llt=()=>{this.lut(),this.ilt()},this.Q1=t=>{this.Ic&&this.To(t)},this.wlt=t=>{this.Os(t),this.nct||(this.nct=!0,this.Blt.Mlt())},this.vlt=()=>{this.Xit.Zit.pn(o.Ef,this.vlt),this.To(new os)},this.wct=t=>{this.OM(t.errorObject),this.To(t)},this.vct=t=>{this.OM(t.errorObject)},this.yut=t=>{Aa(t)||this.OM(new jr(n.MEDIA_DECODE_ERROR,t.message,t))},this.lut=()=>{if(!this.Dc)if(this.Gut())if(this.Kut()){const t=this.Xit.Zit.ght;this.gc(t,!0)}else;else{const t=this.Xit.Zit.ght;this.gc(t,!0)}},this.Uc=t=>{this.Nlt=this.Fc,this.To(t)},this.Lc=t=>{const e=this.Nlt,i=this.Fc;this.Nlt=i,e&&!i&&this.To(t)},this.mct=()=>{const t=this.Kg,e=this.Xg;this.xlt===t&&this.Dlt===e||(this.xlt=t,this.Dlt=e,this.To(new le))},this.Yct=t=>{const e=t.Ht;e.bw===lu.Qn?(this.Hct(e),this.Wct=e):e===this.Wct&&e.bw===lu.Th&&(this.Wct=void 0,this.qct())},this.rlt=()=>{this.P0||this.slt&&(this.slt.Lf(),this.slt=void 0)},this.tlt=t=>{this.P0||this.slt&&(this.slt.BC(t),this.slt=void 0)},this.plt=()=>{this.Tlt().catch(this.yut)},this.fP=t,this.GF=i,this.Sat=new xV(s),this.KO=r,this.$T=new Fa,this.eS=new Fa,this.KO.wn(o.Nf,this.Y1),this.KO.wn(pt.Yw,this.g0),this.KO.wn(o.Pf,this.Q1),this.KO.wn(o.If,this.Uc),this.KO.wn(o.Tf,this.Lc),this.KO.wn(o.vm,this.mct),this.KO.wn(o.Lu,this.SM),this.KO.wn([o.Ph,o.Ch],this.Llt),this.KO.wn(NV,this.Os),this.Blt=new LV(this,this.KO),this.wM=new lS(this.Blt,!0),this.wM.wn(ee.Yf,this.lut),this.wM.wn(cc,this.Os),this.jct=new Yc,this.jct.wn(ze.oa,this.Yct),this.Xct=new Yc,this.lP=this.Flt(),this.ylt=new cV(this.lP),this.Alt=new TV(this.lP),this.xu=new Uu([this.jct,this.ylt.Z,this.Alt.Z]),this.pat=e.retryConfiguration}},LV=class extends nh{get Nc(){return this.Ko.Nc}Mlt(){this.To(new Qs(this.Wu,this.Nc))}constructor(t,e){super(e),this.Ko=t}};var ka,OV=class{Ult(t,e,i){return Promise.resolve()}Hlt(t,e,i,s){let n=[];if(s){const r={xE:e.PS,DE:e.RS,NE:i.met.NE};s.Iw===Ca.TTML?n=Zp(t,s,r,i.aV):s.Iw===Ca.WEBVTT&&(n=np(t,r).L)}return n}ir(){}};!function(t){t.Gp="vttc",t.Vlt="vsid",t.Wlt="iden",t.qlt="ctim",t.zlt="sttg",t.Xlt="payl",t.Glt="vtte",t.Qlt="vtta"}(ka||(ka={}));var MV=class t{static Klt(e){return Boolean(t.jlt[e])}static uA(e){const i=[],s=Ro.Qy(new qn(e,new Ko));for(const e of s)t.Klt(e.Iw)&&i.push(t.jlt[e.Iw](e.Ny));return i}static Ylt(e){const i=Ro.Qy(e),s=ea(i,ka.Vlt),n=ea(i,ka.Wlt),r=ea(i,ka.qlt),h=ea(i,ka.zlt),o=ea(i,ka.Xlt);return{Iw:ka.Gp,Zlt:s?t.Jlt(s):void 0,$lt:n?t.tdt(n):void 0,edt:r?t.idt(r):void 0,sdt:h?t.ndt(h):void 0,rdt:o?t.hdt(o):void 0}}static Jlt(t){return{Iw:ka.Vlt,odt:t.Fy()}}static tdt(t){return{Iw:ka.Wlt,$lt:t.qy()}}static idt(t){return{Iw:ka.qlt,adt:t.qy()}}static ndt(t){return{Iw:ka.zlt,udt:t.qy()}}static hdt(t){return{Iw:ka.Xlt,cdt:t.qy()}}static ldt(t){return{Iw:ka.Glt}}static ddt(t){return{Iw:ka.Qlt,fdt:t.qy()}}};MV.jlt={[ka.Gp]:MV.Ylt,[ka.Glt]:MV.ldt,[ka.Qlt]:MV.ddt};var FV=class{Ult(t,e,i){const s=new DataView(t._dt),n=Ue.uA(s),r=pi(n,(t=>t.Iw===hs.pp));return r&&(this.gdt=r.Z[0].NA.eA.IA),Promise.resolve()}Hlt(t,e,i){if(j(this.gdt))return[];const s=Sa(t),n=Ue.uA(s),r=uo(n,hs.Yp),h=uo(n,hs.oy);if(!r||0===r.Z.length||!h)return[];const o=function(t,e,i){const s=t.Z[0],n=s.vT?s.vT.vT.toNumber()/i:e.PS,r=[];for(const t of s.gT)r.push(...t.bT);return{vdt:n,bT:r}}(r,e,this.gdt),a=i.met.NE;return function(t,e,i,s){const n=MV.uA(Sa(e.Ny)),r=t.bT,h=t.vdt+s,o=[];let a=0;for(let t=0;t<r.length;t++){const e=r[t],s=n[t];var u;const c=(null!=(u=e.ct)?u:0)/i;let l;s.Iw===ka.Gp&&(l=UV(s,a,c,h)),l&&o.push(l),a+=c}return o}(o,h,this.gdt,a)}ir(){this.gdt=NaN}constructor(){this.gdt=NaN}};function UV(t,e,i,s){if(!t.rdt)return void 0;const n=t.edt?function(t){return vp(t.adt,new Ko(0))}(t.edt):e,r=s+n,h=r+i,o=t.rdt.cdt;return new Vr(r,h,o,!1)}var HV=class t extends Cu{get Xht(){return this.Ght}set Xht(t){this.Ght=t}get Rt(){for(const t of this.Z.Kv)if(t.bw!==lu.Th)return!0;return!1}async On(t){await this.ir(),this.wdt=t,this.kct(t)}kct(t){for(const e of t.cit){const t=this.mdt(e);this.pdt(t,e),t.Nc=mn.LOADED,this.tt(t)}}it(t){this.ydt(t),super.it(t)}NI(t){const e=this.Adt(t);if(e&&this.Xht!==e){this.Xht=e;for(const t of this.Z.Kv)t!==e&&(t.bw=lu.Th)}}BI(t){const e=this.Adt(t);e&&this.Xht===e&&(this.Xht=void 0)}Adt(t){return pi(this.Z.Kv,(e=>t.cw===e.cw))}pdt(t,e){this.bdt.set(t.cw,e)}Tdt(t){return this.bdt.get(t.cw)}ydt(t){this.bdt.delete(t.cw)}Sdt(){if(!this.Xht)return;const e=this.Tdt(this.Xht);return e?t.kdt(e):void 0}static kdt(t){return t.sit&&t.sit.length>0?t.sit[0]:void 0}constructor(...t){super(...t),this.bdt=Yh()}};function VV(t,e){const i=e.RF(((e,i)=>t.EF(e,i,!1,!1)));return t.Hl(i)}function WV(t,e){const i=e.Cn(t.wF()).RF(((e,i)=>t.br(i)));return t.Hl(i)}var qV,pn=class extends Fe{constructor(t,e,i){super("Edt"),this.Tn=t,this.Pn=e,this.$it=i}},zV=class extends Xi{constructor(){super("Idt")}};!function(t){t.Pdt="Rdt",t.Cdt="xdt",t.Ddt="Ndt",t.bU="Bdt"}(qV||(qV={}));var XV=[o.pm,o.Am,o.wm,o.qw],GV=class extends Et{get Ldt(){var t,e;return(null==(t=this.Mdt.Odt)?void 0:t.$it)||(null==(e=this.Mdt.Fdt)?void 0:e.$it)}get Udt(){return this.Hdt}set Vdt(t){this.Mdt.Vdt=t}get Vdt(){return this.Mdt.Vdt}get SI(){return this.Wdt}qdt(t){this.Wdt!==t&&(this.Wdt=t,this.To(new zV))}get rot(){return this.Hdt.Ht.rot}get lt(){return this.ZO}async Tn(t){if(!this.zdt&&!this.Xdt)return;const e=this.eg("Idt");this.zdt?(this.Gdt.Jl(),this.Gdt=new Hi,this.Qdt(this.Gdt.M_)):(this.Kdt.Lf(void 0),this.Kdt=new $i),await e}get zdt(){return"Rdt"===this.Wdt}get Xdt(){return"xdt"===this.Wdt}get jdt(){return"Ndt"===this.Wdt}get Ydt(){return"Bdt"===this.Wdt}async xl(t){if(this.jdt||this.Xdt)for(0,this.Gdt.Jl();!this.zdt&&!this.Ydt;)await this.eg("Idt")}async ir(t){this.Ydt?(this.ZO=void 0,this.qdt("Rdt")):await this.xl(t),this.Mdt.ir(),this.Hdt.ir()}OM(t){this.ZO=t,this.qdt("Bdt"),this.To(new Vo(t))}Zdt(){this.m0.wn(o.Lu,this.Jdt),this.m0.wn([o.If,o.im],this.Xe),this.Mdt.wn(XV,this.Os),this.zit.wn(sh.Uit,this.Jdt)}$dt(){this.m0.pn(o.Lu,this.Jdt),this.m0.pn([o.If,o.im],this.Xe),this.Mdt.pn(XV,this.Os),this.zit.pn(sh.Uit,this.Jdt)}async Tut(t){this.$dt(),this.tft.Jl(),await this.xl(null!=t?t:bs.xot),this.Mdt.ir()}async Out(t){this.Zdt(),await this.Tn(null!=t?t:bs.vot)}async bn(){this.Lo(),this.$dt(),this.tft.Jl(),await this.xl(bs.Dot),this.Mdt.bn()}async Qdt(t){for(;;)try{k_(t),this.qdt("Ndt"),await this.Mdt.eft(t),k_(t),this.qdt("xdt"),await E_(this.Kdt.jf,t)}catch(t){if(Aa(t))this.qdt("Rdt");else{const e=t instanceof jr?t:new jr(n.MEDIA_LOAD_ERROR,t.message,t);this.OM(e)}break}}async ift(t){k_(t),await this.xl(bs.Cot),this.Mdt.ir(),k_(t),await this.Tn(bs._ot)}constructor(t,e,i,s,n){super(),this.sft=t,this.zit=e,this.Hdt=i,this.Mdt=s,this.m0=n,this.Wdt="Rdt",this.ZO=void 0,this.Kdt=new $i,this.tft=new Hi,this.Gdt=new Hi,this.Xe=t=>{this.zdt||this.Ydt||!Ee.y7&&this.Mdt.nft(t.currentTime)||(this.tft.Jl(),this.tft=new Hi,this.ift(this.tft.M_).catch(B))},this.Jdt=E((()=>{if(this.Xdt){try{this.Mdt.rft();if(this.Mdt.hft())return}catch(t){if(!(t instanceof pn))throw t}this.Tn(bs.got)}}),250),this.Zdt()}},Pn=class t{oft(t,e,i,s,n){return this.aft(t,e,!1,i,n,s)}uft(t,e,i,s,n){return this.aft(t,e,!0,i,n,s)}async aft(e,i,s,n,r,h){k_(h);const o=await this.cft(e,s,n,r,h);return i?t.lft(o):this.dft(o)}dft(t){return t}static lft(t){return t}cft(t,e,i,s,n){var r;const h=new vh({TI:t.TI,sP:Ct.OI,eP:t.iet?{Range:"bytes="+t.iet[0]+"-"+(null!=(r=t.iet[1])?r:"")}:void 0,oP:t.oP,iP:ut.GET,Iw:_h.qI,rP:e?hi.GI:hi.YT,hP:this.fft,kI:i,nP:s,M_:n});return this.fP.pI(h)}constructor(t,e){this.fP=t,this.fft=e}},QV=class{_ft(t,e){const i=this.gft**t,s=e*(1-i)+i*this.l6;j(s)||(this.l6=s,this.vft+=t)}wft(){const t=1-this.gft**this.vft;return this.l6/t}constructor(t){this.l6=0,this.vft=0,this.gft=w.exp(w.log(.5)/t)}},Nn=class{_ft(t,e){const i=8e3*e/t,s=t/1e3;this.mft+=e,this.pft._ft(s,i),this.yft._ft(s,i)}wft(){return this.rat()?w.min(this.pft.wft(),this.yft.wft()):this.Aft}rat(){return this.mft>=this.bft}constructor(t=2,e=5,i=128e3){this.mft=0,this.Aft=Ei,this.pft=new QV(t),this.yft=new QV(e),this.bft=i}},KV=class{get nat(){return this.Tft.wft()}get rat(){return this.Tft.rat()}Sft(t){const e=t.kft,i=this.Eft?t.Ift-t.Pft:t.Ift-t.Rft,s=t.Cft;!s&&e<this.xft||(s?this.Tft._ft(2*i,e):this.Tft._ft(i,e))}constructor(t,e){this.Eft=e,!e||t!==Di.vl&&t!==Di.yy?(this.xft=16e3,this.Tft=new Nn):t===Di.vl?(this.xft=5e3,this.Tft=new Nn(.05,1,0)):(this.xft=0,this.Tft=new Nn(.005,.1,0))}},jV=["ym","Tm"],YV=class extends Et{async Dft(t,e){let i;for(const s of this.Nft)try{return await s.Dft(t,e)}catch(t){pe(t),i=t}throw i}async Bft(t,e){let i;for(const s of this.Nft)try{return await s.Bft(t,e)}catch(t){pe(t),i=t}throw i}bn(){for(const t of this.Nft)t.pn(jV,this.Os),t.bn()}constructor(t){super(),this.Nft=t;for(const t of this.Nft)t.wn(jV,this.Os)}};var ZV=class{transform(t,e){this.Dd.write(t).catch(Qo),e.enqueue(t)}flush(){this.Dd.close().catch(Qo)}constructor(t){this.Dd=t}},JV=class{Lft(){return new $V(WI(this._dt),this.Oft,this.Mft)}constructor(t,e,i){this._dt=t,this.Oft=e,this.Mft=i}},$V=class t{get BW(){return this.Fft}xL(t){return kt(this.Fft,t)}Iy(){const[e,i]=zI(this.Fft);return this.Fft=e,new t(i,this.Oft,this.Mft)}Uft(){const[e,i]=function(t){const e=new Ka,i=e.writable.getWriter(),s=new Ka(new ZV(i));return t.pipeTo(s.writable).catch((t=>{i.abort(t).catch(Qo)})),[s.readable,e.readable]}(this.Fft);return this.Fft=e,new t(i,this.Oft,this.Mft)}Hft(t){return this.xL(t).then((t=>new JV(t,this.Oft,this.Mft)))}constructor(t,e,i){this.Fft=t,this.Oft=e,this.Mft=i}},Ea=class extends Fe{constructor(t,e,i){super(e,i),this.wnt=t}},tW="Cache lookup failed.",eW=class extends Et{async Dft(t,e){k_(e);const i=await this.Sat.itt(t.TI.TI,t.TI.iet);if(k_(e),!i)throw new Ea(t,tW);const s=new JV(i.buffer,i.byteLength,i.reference);return{wnt:t.wnt,Vft:{Iw:F.xX,Ny:s},$it:t.$it,TI:t.TI}}async Bft(t,e){k_(e);const i=await this.Sat.itt(t.TI,t.iet);if(k_(e),!i)throw new Ea(t,tW);const s=new JV(i.buffer,i.byteLength,i.reference);return{Iw:F.xX,Ny:s}}bn(){this.Lo()}constructor(t){super(),this.Sat=t}},Dn=class extends Xi{constructor(t,e,i,s,n,r){super(t),this.Wft=e,this.qft=i,this.lT=s,this.MA=n,this.hP=r}},iW=class extends Dn{constructor(t,e,i,s,n){super(o.pm,t,e,i,s,n)}},sW=class{constructor(t,e){this.zft=t,this.Xft=e}},nW=class extends sW{get kft(){return this.Gft}start(){}transform(t,e){this.Gft+=t.byteLength,e.enqueue(t)}flush(){this.Qft(!1)}Jl(){this.Qft(!0)}Qft(t){this.zft(this.Xft,Ee.V_(),this.kft,t)}constructor(...t){super(...t),this.Gft=0}},rW=class extends sW{get kft(){return this.Gft}start(){this.Xft=Ee.V_()}transform(t,e){this.Gft+=t.byteLength,this.Kft||this.jft(t)&&this.Qft(!1),e.enqueue(t)}flush(){}Jl(){this.Qft(!0)}jft(t){const e=this.Yft(t),i=this.Zft(e);return Boolean(pi(i,hW))}Yft(t){return this.Jft&&void 0!==this.$ft?(this.Jft=ac([this.Jft,t]),new qn(Sa(this.Jft),new Ko(this.$ft))):(this.Jft=t,new qn(Sa(t),new Ko))}Zft(t){const e=Ro.Ky(t.Ny,t.By,!0);return e.jy?(this.Jft=void 0,this.$ft=void 0):this.$ft=t.By.Au,e.m}Qft(t){this.Kft||(this.zft(this.Xft,Ee.V_(),this.kft,t),this.Kft=!0)}constructor(...t){super(...t),this.Gft=0,this.Kft=!1}};function hW(t){return t.Iw===hs.oy}var oW=class{t_t(t){const e=t.GW?this.e_t:Ee.V_(),i=this.i_t(e),s=new Ka(i),n=t.BW().pipeTo(s.writable).then((()=>({Pg:{kft:i.kft}})),(t=>{throw i.Jl(),t}));return this.s_t.U_(n),s.readable}n_t(t){const e=t.GW?this.e_t:Ee.V_(),i=t.xL(),s=i.then((t=>{const i=Ee.V_();return this.Sft(e,i,t.byteLength,!1),{Pg:{kft:t.byteLength}}}),(t=>{const i=Ee.V_();throw this.Sft(e,i,0,!0),t}));return this.s_t.U_(s),i}get r_t(){return this.s_t.jf}constructor(t){this.h_t=t,this.s_t=new $i,this.Sft=(t,e,i,s)=>{const n={Rft:this.e_t,Pft:t,Ift:e,kft:i,Cft:s};this.h_t.Sft(n),this.h_t.rat&&uh.lC._O(this.h_t.nat)},this.s_t.jf.catch(Qo),this.e_t=Ee.V_()}},aW=class extends oW{i_t(t){return new nW(this.Sft,t)}},uW=class extends oW{i_t(t){return new rW(this.Sft,t)}},On=class extends Dn{constructor(t,e,i,s,n,r,h){super(o.Am,t,e,i,s,n),this.o_t=r,this.oS=h}},cW=class extends Fe{constructor(t,e,i){super("Error downloading segment "+AU(e),t),this.a_t=e.PS,this.u_t=e.RS,this.c_t=i}},lW=class extends Et{l_t(){return Ee.v7}d_t(){return this.Eft?new uW(this.h_t):new aW(this.h_t)}async Dft(t,e){k_(e);const i=t.$it,s=t.TI,n=t.wnt,r=AU(n),h=i.$it?i.$it.cw:-1,o=function(t){return t.sit.reduce(((t,e)=>t.IO<e.IO?t:e))}(i.qit)===i,a=n.ct*(o?3:1.2),u=1e3*w.max(a,1);this.To(new iW(s,i.IO,r,h,i.Iw));try{const t=this.d_t(),o=await this.f_t.oft(s,this.l_t(),u,e),a=await this.__t(o,this.l_t(),e,t);return M(this.g_t(t.r_t,i,s,r,h,o)),{Vft:a,$it:i,wnt:n,TI:s}}catch(t){throw pe(t),new cW(t,n,i)}}async Bft(t,e){k_(e);const i=await this.f_t.uft(t,false,1e4,e);return await this.__t(i,false,e)}async __t(t,e,i,s){if(e){const e=s?s.t_t(t):t.BW();return{Iw:F.FI,Ny:new $V(e)}}{const e=s?await s.n_t(t):await t.xL(i);return{Iw:F.xX,Ny:new JV(e)}}}async g_t(t,e,i,s,n,r){try{const h=await t;this.To(new On(i,e.IO,s,n,e.Iw,r.SI,h.Pg.kft))}catch(t){}}bn(){this.Lo()}constructor(t,e,i){super(),this.f_t=t,this.h_t=e,this.Eft=i}};var dW=class{v_t(t,e,i,s,n){const r=new eW(n),h=this.w_t(t,i,s);return new YV([r,h])}w_t(t,e,i){return new lW(t,e,i)}},fW=.001,_W=class{get bl(){return this.m_t.bl}get p_t(){return this.m_t.p_t}get hG(){return this.m_t.hG}get y_t(){if(this.QY.Nc<dw.Jn)return!1;if(this.m_t.Pn<=this.A_t&&this.m_t.b_t())return!0;const t=this.m_t.QO;if(!t||0===t.U)return!1;const e=d.MF(this.m0.Wu,1/0);return t.Cn(e).bF(this.m_t.hG).LF>=this.GF.sz}get A_t(){const t=this.m_t.QO;let e;if(t&&t.U>0)e=t.Pn(0);else{e=this.m0.Wu;const t=this.m_t.hG,i=t.TF(e);i>=0&&(e=t.Pn(i))}const i=this.m_t.kl.Tn(0);if(i>e){if(this.m_t.Tn<=e&&this.m_t.Pn>=e&&i>e+fW)throw new pn(e,i);e=i}return e=this.m_t.T_t.vF(e),e}constructor(t,e,i,s){this.m_t=t,this.m0=e,this.QY=i,this.GF=s}};var gW=class{get S_t(){if(0===this.I_.size)return d.Nl();let t=d.MF(0,1/0);return this.I_.forEach((e=>{t=t.Cn(e)})),t}k_t(){let t=d.Nl();return this.I_.forEach((e=>{t=t.Hl(e)})),t}E_t(t){let e=!1;return this.I_.forEach((i=>{e=e||i.br(t)})),e}I_t(t,e){const i=this.I_.get(e.o);return!!i&&i.br(t)}SF(t,e){let i=!1;return this.I_.forEach((s=>{i=i||s.SF(t,e)})),i}P_t(t,e){const i=this.I_.get(e.o).Hl(t);this.I_.set(e.o,i)}R_t(t){this.I_.forEach(((e,i)=>{const s=e.Hl(t);this.I_.set(i,s)}))}C_t(t){this.I_.forEach(((e,i)=>{this.I_.set(i,e.Cn(t))}))}ir(){this.I_.forEach(((t,e)=>{this.I_.set(e,d.Nl())}))}constructor(t){this.I_=function(t){const e=Wn();for(const i of t)e.set(i.o,d.Nl());return e}(t)}},vW=class{get x_t(){return this.D_t}get hG(){return this.oG}N_t(t){for(const e of this.mtt){if(e.B_t>t)break;if(e.L_t>t)return e}}O_t(t){for(const e of this.mtt){if(e.M_t>t)break;if(e.F_t>=t)return e}}U_t(t,e){const i=[];for(const s of this.mtt){if(s.B_t>t)break;s.L_t>=e&&i.push(s)}return i}H_t(){return this.mtt}V_t(t,e){const i=d.MF(t.M_t,t.F_t),s=i.wF();this.D_t.C_t(s),this.D_t.P_t(i,e),this.W_t(s);const n=rs(this.mtt,(e=>t.B_t<=e.B_t));if(n<0)this.mtt.push(t);else{this.mtt[n].L_t<=t.L_t?this.mtt.splice(n,1,t):this.mtt.splice(n,0,t)}}aG(t,e){this.oG.P_t(t,e)}q_t(t){this.oG.R_t(t)}C_t(t){this.D_t.C_t(t),this.oG.C_t(t);const e=this.D_t.k_t();this.W_t(e)}W_t(t){this.mtt=this.mtt.filter((e=>t.EF(e.M_t,e.F_t))).map((e=>e.Olt&&!t.SF(e.M_t,e.F_t)?function(t,e){return{B_t:t.B_t,L_t:t.L_t,M_t:t.M_t,F_t:t.F_t,Olt:e}}(e,!1):e))}ir(){this.D_t.ir(),this.oG.ir(),this.mtt=[]}bn(){this.ir()}constructor(t){this.mtt=[],this.Ht=t,this.D_t=new gW(t.sit),this.oG=new gW(t.sit)}},wW=class{get Vdt(){return this.z_t}set Vdt(t){this.z_t=t}get rot(){return this.Hdt.Ht.rot}async X_t(t,e,i){let s;k_(i);const n=this.Hdt.O_t(t);s=n&&au(n.F_t,t,1e-5)?w.max(n.L_t,t):t;const r=this.G_t(s),h=function(t){return mW.bind(void 0,t)}(s);let o=await this.z8.Q_t(h,r,e,i);for(k_(i);o&&this.K_t(o.wnt);){const t=bW(o.wnt),s=o.$it;o=await this.z8.Q_t(t,[s],e,i),k_(i)}if(!o)return void 0;if(!this.j_t(o.wnt))return o;const a=this.Y_t(o.wnt);if(t<a.Tn)return await this.findFirstNonAppendedSegmentBeforeSegment(o,e,i,a);if(t>=a.Pn)return await this.findFirstNonAppendedSegmentAfterSegment(o,e,i);if(!o.$it.fst(o.wnt))throw new v("Fatal buffering error")}async findFirstNonAppendedSegmentAfterSegment(t,e,i){let s=t;do{const n=bW(s.wnt),r=t.$it;s=await this.z8.Q_t(n,[r],e,i),k_(i)}while(s&&this.j_t(s.wnt));if(s)return s}async findFirstNonAppendedSegmentBeforeSegment(t,e,i,s){let n=t;do{const s=AW(n.wnt),r=t.$it;n=await this.z8.Q_t(s,[r],e,i),k_(i)}while(n&&this.j_t(n.wnt));if(!n){0;const e=t.$it.Jit.Tn;throw new pn(e,s.Tn,t.$it)}return n}Z_t(t){return this.Hdt.x_t.E_t(t)}J_t(t){return this.Hdt.U_t(t.PS,t.RS)}j_t(t){const e=this.J_t(t);return e.length>0&&function(t,e){return function(t){let e=d.Nl();for(const i of t)e=e.Hl(d.MF(i.B_t,i.L_t));return e}(t).SF(e.PS,e.RS)}(e,t)&&e.every(TW)}K_t(t){return this.Hdt.hG.SF(t.PS,t.RS)}Y_t(t){const e=this.J_t(t);return{Tn:e[0].M_t,Pn:e[e.length-1].F_t}}G_t(t){const e=this.$_t(t);if(0===e.length)return e;const i=e.filter((t=>!t.sst));return i.length>0?i:[e[e.length-1]]}$_t(t){return(this.z_t?this.z_t:this.Hdt.Ht.sit).filter((e=>!this.Hdt.hG.I_t(t,e)))}constructor(t,e,i){this.sft=t,this.Hdt=e,this.z8=i}};async function mW(t,e,i,s){const n=e.met.Ist(t);if(n){if(e.ust(n)){return(await e.cst(n,i,s)).Vnt(t)}return n}}async function pW(t,e,i,s){if(Za(t)){if(0===t.Fit)return;const n=e.met.nnt(t);if(!n)return;return(await e.cst(n,i,s)).Ont(t.Fit-1)}return e.met.Qst(t)}async function yW(t,e,i,s){if(Za(t)){const n=e.met.nnt(t);if(!n)return;const r=await e.cst(n,i,s);if(t.Fit+1===r.U)return;return r.Ont(t.Fit+1)}return e.met.Vst(t)}function AW(t){return pW.bind(void 0,t)}function bW(t){return yW.bind(void 0,t)}function TW(t){return t.Olt}var SW=class{async Q_t(t,e,i,s){k_(s);const n=this.tgt(e,i);if(!n)return;const r=await t(n,this.egt,s);if(!r)return;const h=n.rst(r);return{$it:n,wnt:r,TI:h}}tgt(t,e){if(0===t.length)return;const i=this.igt.$ot(t,this.sgt?e:void 0,this.m_t,this.GF.tz);return this.sgt||(this.sgt=!0),i}constructor(t,e,i,s){this.igt=t,this.m_t=e,this.GF=i,this.egt=s,this.sgt=!1}},kW=class{async Q_t(t,e,i,s){k_(s);const n=this.igt.sat(e,i,this.m_t);if(!n.length)return;let r;for(const e of n)try{k_(s);const i=await t(e,this.egt,s);if(i){const t=e.rst(i);if(await this.Sat.ttt(t.TI,t.iet))return{wnt:i,$it:e,TI:t}}}catch(t){pe(t),r=t}if(r)throw r}constructor(t,e,i,s){this.igt=t,this.m_t=e,this.Sat=i,this.egt=s}},EW=(t,e,i,s,n)=>t.filter((t=>n.OX(t)&&s.c9(e,t))),IW=(t,e,i)=>t.filter((t=>function(t,e,i){const s=i.nat;if(s<=0)return!1;return.8*s>t.IO*i.$u}(t,0,i)));var PW=(t,e,i,s,n)=>{const r=i.dat;if(void 0===r&&!s.Ks)return t;if(!1===r)return t;if(t.length>0&&t[0].Iw!==Di.vl)return t;for(let e=t.length-1;e>=0;e--){const s=t[e];if(s.Ci===i.uat&&s.Ti===i.aat)return t.slice(0,e+1);if(s.Ci<i.uat||s.Ti<i.aat)return t.slice(0,e+2)}return[]},RW=class{async Q_t(t,e,i,s){let n;for(const r of this.ngt)try{const n=await r.Q_t(t,e,i,s);if(n)return n}catch(t){n=t}if(n)throw n}constructor(t){this.ngt=t}},CW=class{async drt(t,e,i,s){let n;for(const r of this.rgt)try{return await r.drt(t,e,i,s)}catch(t){pe(t),n=t}throw n}constructor(t){this.rgt=t}},An=class{async drt(t,e,i,s){var n;const r=await this.fP.pI({TI:t,sP:Ct.OI,eP:e?{Range:"bytes="+e[0]+"-"+(null!=(n=e[1])?n:"")}:void 0,oP:i,iP:ut.GET,Iw:_h.YT,M_:s});return await r.xL()}constructor(t){this.fP=t}},xW=class{async drt(t,e,i,s){const n=await this.Sat.itt(t,e);if(n)return n.buffer;if(e){const i=await this.Sat.itt(t);if(i)return Qu(new x(i.buffer),e[0],e[1])}throw new Ea({TI:t,iet:e,oP:!1})}constructor(t){this.Sat=t}};var DW=1.05,NW=(t,e,i,s)=>{if(!1===i.dat)return t;if(s.i9)return t;const n=s.s9;var r;const h=(null!=(r=null==n?void 0:n.width)?r:i.aat)*DW;var o;const a=(null!=(o=null==n?void 0:n.height)?o:i.uat)*DW;for(let e=t.length-1;e>=0;e--){const i=t[e];if(i.Ci<=a&&i.Ti<=h)return t.slice(0,e+1)}return[]},BW=class{static y6(t,e,i,s,n,r,h,o,a,u){const c=function(t,e){return new CW([new xW(e),new An(t)])}(r,h),l=new Ks([EW],n,Ee.Zs,o,a,u),d=new kW(l,e,h,c),f=new Ks([IW,EW,PW,NW],n,Ee.Zs,o,a,u),_=new SW(f,e,s,c),g=new RW([d,_]);return new wW(t,i,g)}},LW=class{tut(t,e,i,s){return this.m_t.tut(t,e,i,s)}hgt(t,e,i){return this.m_t.Ult(t,e,i)}ogt(t,e,i){return this.m_t.ogt(t,e,i)}aG(t,e){this.m_t.aG(t,e)}uG(t,e){this.m_t.uG(t,e)}EY(){this.m_t.EY()}lz(){return this.m_t.lz()}constructor(t){this.m_t=t}},Bn=class extends Xi{constructor(t,e,i,s,n,r=0){super(o.wm),this.segmentStartTime=t,this.error=e,this.trackType=i,this.track=s,this.quality=n,this.retryCount=r}},OW=class extends Xi{constructor(t,e){super(o.qw),this.track=t,this.segments=e}},MW=class extends Fe{constructor(t,e){super(e),this.agt=t}},FW=[o.pm,o.Am],UW=class extends Et{get Odt(){return this.ugt}get Fdt(){return this.cgt}set Vdt(t){this.lgt.Vdt=t}get Vdt(){return this.lgt.Vdt}get rot(){return this.Hdt.Ht.rot}dgt(t){return!this.jj||!t||!lr(this.jj._dt,t._dt)}nft(t){if(!this.ugt)return!1;const e=this.ugt.wnt,i=d.MF(e.PS,e.RS),s=this.fgt.p_t,n=s.TF(t);return n<0?i.br(t,fW):i.EF(t,s.Pn(n),!0,!0,fW)}async eft(t){const e=this.Hdt.Ht.sit;for(;;)try{k_(t),this.rft();if(this.hft())break;const i=this._gt(),s=await this.Q_t(i,t);if(void 0===s)break;if(this.ugt=s,!HW(this.ugt)){await this.ggt(this.ugt,t);continue}this.cgt&&!Ya(this.cgt.$it.rM,this.ugt.$it.rM)&&await this.gat.FX(this.ugt.$it),await this.vgt(i,this.ugt.wnt,t),this.jj=await this.wgt(this.ugt.$it,t);const n=await this.Dft(this.ugt,t),r=this.fgt.bl,h=this.cgt;this.cgt=await this.mgt(n,t);const o=this.fgt.bl;this.pgt(h,this.ugt,r,o),e.forEach((t=>t.sst=!1))}catch(i){if(i instanceof pn){this.NY(i.Tn,i.Pn,i.$it);continue}if(i instanceof MW){let s;if(e.every((t=>t.sst))){if(this.ygt===this.pat.maxRetries)throw new jr(n.MEDIA_LOAD_ERROR,i.message,i);this.ygt++,s=w.min(this.pat.minimumBackoff*2**(this.ygt-1),this.pat.maximumBackoff)}await uc(null!=s?s:500,t);continue}throw this.Agt=d.Nl(),i}finally{this.ugt=void 0}}pgt(t,e,i,s){const n=s.bF(i),r=e.$it.lst(e.wnt),h=e.$it.fst(e.wnt);let o=e.wnt.PS,a=e.wnt.RS;r&&(o=w.min(o,w.max(0,e.$it.Jit.Tn-.05))),h&&(a=w.max(a,e.$it.Jit.Pn));const u=d.MF(o,a).bF(s);if(0===n.U)return 0===this.Agt.U&&this.Agt.Hl(d.MF(i.Pn(i.U-1),o)),this.Agt=this.Agt.Hl(u),void this.Hdt.q_t(this.Agt);if(r||this.Agt.U>0){const t=u.Cn(d.MF(o,n.Tn(0)));this.bgt(t)}const c=n.wF().Cn(d.MF(n.Tn(0),n.Pn(n.U-1)));if(this.bgt(c),h){const t=u.Cn(d.MF(n.Pn(n.U-1),a));this.bgt(t)}if(this.Agt.U>0){const t=this.Agt.bF(n);this.bgt(t),this.Agt=d.Nl()}const l=e.$it.met,f=Za(e.wnt)?void 0:l.Qst(e.wnt);var _;const g=null!=(_=null==t?void 0:t.wnt)?_:this.Tgt(f)?f:void 0;if(g){const t=this.Hdt.U_t(g.PS,g.RS);if(t.length>0){const e=d.MF(t[t.length-1].F_t,n.Tn(0));this.bgt(e)}}const v=Za(e.wnt)?void 0:l.Vst(e.wnt);if(v&&this.Tgt(v)){const t=this.Hdt.U_t(v.PS,v.RS);if(t.length>0){const e=d.MF(n.Pn(n.U-1),t[0].M_t);this.bgt(e)}}}Tgt(t){return!!t&&this.Hdt.U_t(t.PS,t.RS).length>0}bgt(t){const e=t.bF(this.fgt.bl);for(let t=0;t<e.U;t++)e.Tn(t)!==e.Pn(t)&&this.Sgt.aG(e.Tn(t),e.Pn(t))}kgt(t,e){throw new MW(t,e)}rft(){if(this.Agt.U>0)return;var t;const e=this.fgt.p_t.Hl(null!=(t=this.fgt.hG.gF().BF(this.fgt.A_t))?t:d.Nl());this.Hdt.C_t(e),this.Egt&&!this.Igt(this.Egt)&&(this.Egt=void 0),this.To(new OW(this.Hdt.Ht.rot,this.Hdt.H_t()))}hft(){return this.cgt&&this.cgt.$it.fst(this.cgt.wnt)?(this.Sgt.EY(),!0):(this.Egt&&this.Egt.$it.fst(this.Egt.wnt)&&this.Igt(this.Egt)&&this.Sgt.EY(),!!this.fgt.y_t)}Igt(t){return this.Hdt.x_t.SF(t.Pgt,t.Rgt)}Cgt(t,e,i){(!this.Egt||this.Egt.wnt.RS<t.wnt.RS)&&(this.Egt=Me({},t,{Pgt:e,Rgt:i}))}_gt(){const t=this.fgt.A_t;return t}async Q_t(t,e){k_(e);const i=this.cgt?this.cgt.$it:void 0,s=await this.lgt.X_t(t,i,e);if(s)return s}async ggt(t,e){const i=t.$it,s=i.met,n=Za(t.wnt)?s.nnt(t.wnt):t.wnt,r=i.Zit.rht(),h=s.Hst(n);if(h&&h.getTime()<=r.getTime())return this.kgt(bs.pot,"Segment is not available.");const o=s.Wst(n).getTime()-r.getTime();await zs((t=>Promise.race([uc(o,t),i.eg(sh.Uit,t)])),e)}async wgt(t,e,i){void 0===i&&(i=0),k_(e);const s=t.jit;if(!s)return this.jj;try{if(!t.Qit){const i=await this.xgt.Bft(s,e);t.Qit=i.Ny}}catch(s){if(pe(s),my(s)){if(2===i)return t.sst=!0,this.kgt(bs.Iot,"Could not fetch the initializer.");const s=w.min(this.pat.minimumBackoff*2**i,this.pat.maximumBackoff);return await uc(s,e),this.wgt(t,e,i+1)}throw new jr(n.MEDIA_LOAD_ERROR,s.message,s)}k_(e);try{this.dgt(t.Qit)&&await this.Sgt.hgt(t.Qit,t,e)}catch(t){if(pe(t),my(t))return this.kgt(bs.Iot,"Could not append the initializer.");throw new jr(n.MEDIA_DECODE_ERROR,t.message,t)}return t.Qit}async Dft(t,e,i){void 0===i&&(i=0);try{return k_(e),await this.xgt.Dft(t,e)}catch(s){if(pe(s),s instanceof cW){if(yy(s.cause))return this.Dgt(new cW(s,t.wnt,t.$it),i),this.kgt(bs.pot,"Could not append the segment.");if(2===i)return t.$it.sst=!0,this.Dgt(s,i),this.Ngt(t,s),this.kgt(bs.pot,"Could not fetch the segment.");const n=w.min(this.pat.minimumBackoff*2**i,this.pat.maximumBackoff);return await uc(n,e),await this.Dft(t,e,i+1)}throw new jr(n.MEDIA_LOAD_ERROR,s.message,s)}}async vgt(t,e,i){const s=this.Hdt.U_t(e.PS,e.RS),n=this.fgt.p_t.BF(t);let r=d.Nl();for(const t of s){k_(i);const e=t.M_t,s=t.F_t,h=n&&n.EF(e,s)?w.max(e,n.Pn(0)):e,o=s;h<o&&(r=r.Hl(d.MF(h,o)))}for(let t=0;t<r.U;t++)await this.Sgt.ogt(r.Tn(t),r.Pn(t),i);this.rft()}async mgt(t,e){try{k_(e);const i=await this.Sgt.tut(t.Vft,t.wnt,t.$it,e);return this.Bgt(t,i.Pgt,i.Rgt),this.Cgt(t,i.Pgt,i.Rgt),t}catch(e){if(pe(e),my(e))return this.Dgt(new cW(e,t.wnt,t.$it),0),this.kgt(bs.pot,"Could not append the segment.");if(po(e)&&this.Sgt.lz())return this.kgt(bs.Aot,"Buffer is full. Could not reduce the buffer.");throw new jr(n.MEDIA_DECODE_ERROR,e.message,e)}}Bgt(t,e,i){const s=t.$it,n=t.wnt;this.V_t(n,s,e,i)}V_t(t,e,i,s){this.Hdt.V_t({B_t:t.PS,L_t:t.RS,M_t:i,F_t:s,Olt:!0},e),this.Sgt.uG(i,s)}NY(t,e,i){const s=d.MF(t,e);i?this.Hdt.aG(s,i):this.Hdt.q_t(s),this.Sgt.aG(t,e)}Ngt(t,e){if(!e||!e.cause)return;const i=e.cause;if(yy(i)||py(i)&&i.AI.SI>=400&&i.AI.SI<500){const e=d.MF(t.wnt.PS,t.wnt.RS);t.$it?this.Hdt.aG(e,t.$it):this.Hdt.q_t(e);const i=this.fgt.bl;this.pgt(this.cgt,t,i,i)}}Dgt(t,e){const i=t.a_t,s=this.Hdt.Ht.rot,n=this.Hdt.Ht.ma,r=t.c_t.$it&&t.c_t.$it.ma,h=new Bn(i,t.message,s,n,r,e);this.To(h)}ir(){this.jj=void 0,this.cgt=void 0}bn(){this.ir(),this.Egt=void 0,this.xgt.pn(FW,this.Os),this.xgt.bn()}constructor(t,e,i,s,n,r,h,o){super(),this.sft=t,this.Hdt=e,this.fgt=i,this.lgt=s,this.xgt=n,this.Sgt=r,this.gat=h,this.pat=o,this.ugt=void 0,this.jj=void 0,this.cgt=void 0,this.Egt=void 0,this.ygt=0,this.Agt=d.Nl(),this.xgt.wn(FW,this.Os)}};function HW(t){const e=t.$it,i=e.met,s=Za(t.wnt)?i.nnt(t.wnt):t.wnt;return i.Xst(s,e.Zit.rht())}var VW=0,WW=class{y6(t){const e=VW++,i=this.m_t.PY,s=new vW(t),n=new KV(i,this.Lgt),r=new _W(this.m_t,this.m0,this.QY,this.GF),h=BW.y6(e,this.m_t,s,this.GF,n,this.fP,this.Sat,this.fat,this.eat,this.gat),o=function(t){switch(t){case Di.yy:return Ia.yy;case Di.vl:return Ia.vl;case Di.KT:return Ia.KT;case Di.jT:return Ia.jT;default:return Ia.YT}}(i),a=new Pn(this.fP,o),u=this.v_t(a,n,this.Lgt),c=new LW(this.m_t),l=new UW(e,s,r,h,u,c,this.gat,this.pat);return new GV(e,t.qit,s,l,this.m0)}constructor(t,e,i,s,n,r,h,o,a,u,c){this.m_t=t,this.m0=e,this.QY=i,this.fP=s,this.GF=n,this.Lgt=r,this.Sat=h,this.fat=o,this.eat=a,this.gat=u,this.pat=c}},qW=class extends WW{v_t(t,e,i){return(new dW).v_t(t,this.m_t,e,i,this.Sat)}},zW=class extends WW{Ogt(t,e){const i={rot:Di.KT,qit:e,sit:e.sit,ma:t.ma};return super.y6(i)}v_t(t,e){return(new dW).v_t(t,this.m_t,e,!1,this.Sat)}};var XW=class{OX(t){return this.Mgt.OX(t)}FX(t){return this.Mgt.FX(t)}constructor(t){this.Mgt=t}},GW=class{OX(t){return!0}FX(t){return Promise.resolve(void 0)}},QW=class extends HV{get QO(){const t=this.m0.Wu;return this.p_t.BF(t,.01)}get Fgt(){return this.Xht&&this.Ugt[this.Xht.cw]?this.Ugt[this.Xht.cw]:d.Nl()}get Hgt(){return this.Xht&&this.Vgt[this.Xht.cw]?this.Vgt[this.Xht.cw]:d.Nl()}get T_t(){return new d([0,1/0])}get bl(){return this.Fgt}get hG(){return this.Wgt?this.Wgt.Udt.hG.S_t:d.Nl()}get p_t(){return VV(this.bl,this.hG).yF(2*this.qgt)}get Tn(){return this.wdt?this.wdt.Jit.Tn:NaN}get Pn(){return this.wdt?this.wdt.Jit.Pn:NaN}get Ic(){const t=this.Pn;return!!t&&this.m0.Wu>=t}get qgt(){var t;const e=this.Sdt();if(!e)return.04;var i;return 1/(null!=(i=this.Xht&&(null==e||null==(t=e.Iet)?void 0:t.hk()))?i:25)}get Ci(){return this.uc}get PY(){return Di.KT}get $u(){return this.HF}set $u(t){this.HF=t}get wl(){return this.Hgt}get kl(){if(!this.Xht)return d.OF(0);const t=this.Tdt(this.Xht),e=null==t?void 0:t.pst,i=null==t?void 0:t.mst;if(void 0===i||void 0===e)return d.OF(0);const s=w.max(e,this.m0.Wu);return new d([i,s]).gF()}get Ti(){return this.oc}EY(){}b_t(){return this.p_t.br(this.Pn)}async tut(t,e,i,s){const n=t.Iw===F.xX?t.Ny._dt:await t.Ny.xL(s),r=this.findTrackForRepresentation(i),h=this.Ugt[r.cw],o=e.PS,a=e.RS,u=new d([o,a]);h||(this.Ugt[r.cw]=d.Nl(),this.Vgt[r.cw]=d.Nl()),this.zgt(s);const c=this.Hlt(new x(n),e,i,r);for(const t of c)r.vP(t);return this.Ugt[r.cw]=this.Ugt[r.cw].Hl(u),{Pgt:o,Rgt:a}}zgt(t){const e=pP(this.m0.Wu,void 0,void 0,this.bl,this.GF.sz,this.GF.Zq);for(const[i,s]of e)M(this.ogt(i,s,t))}Ult(t,e,i){return this.Xgt.Ult(t,e,i)}Hlt(t,e,i,s){return this.Xgt.Hlt(t,e,i,s)}ogt(t,e,i){const s=t,n=e;let r=new d([t,e]);for(const t of this.Z.Kv){const e=[];for(const i of t.L.Kv)i.PS>=s&&i.RS<=n?e.push(i):r=r.bF(new d([i.PS,i.RS]));for(const i of e)t.EI(i);const i=this.Ugt[t.cw];i&&(this.Ugt[t.cw]=i.bF(r))}return Promise.resolve()}aG(t,e){}uG(t,e){}lz(){return!1}NI(t){if(super.NI(t),this.Xgt.ir(),this.Wgt&&(this.Wgt.bn(),this.Wgt=void 0),this.Xht){const t=this.Tdt(this.Xht);this.Wgt=new zW(this,this.m0,this.m0,this.fP,this.GF,!1,this.Sat,void 0,void 0,new GW,$w).Ogt(this.Xht,t),this.Wgt.wn(zn.aa,this.Ggt),this.Wgt.Tn(bs.dot)}}BI(t){this.Xht===t&&(super.BI(t),this.Wgt&&(this.Wgt.bn(),this.Wgt=void 0))}mdt(t){const e=function(t){const e=t.sit&&t.sit.length>0&&t.sit[0],i=e&&by(e.bet),s=by(t.bet),n=t.aV===Ot.APPLICATION_TTML_XML;return i||s||n?Ca.TTML:t.aV===Ot.TEXT_VTT||Ey(t.aV,t.bet)?Ca.WEBVTT:Ca.DEFAULT}(t);if(!e)throw new v("Unknown TextTrack type for Representation");const i=t.nit.concat(t.Get);return this.Qgt(function(t){return Bc(t.filter((t=>"urn:mpeg:dash:role:2011"===t.tet)).map((t=>t.kT)).filter(Qf),"caption")?bt.fI:bt.Ay}(i),t._h,t.J3,!1,e,t,function(t){return t.filter((t=>"urn:mpeg:dash:role:2011"===t.tet)).some((t=>function(t){return"forced-subtitle"===t||"forced_subtitle"===t}(t.kT)))}(t.nit),t.Get.map(qH).filter(Qf))}async ir(){await super.ir(),this.Wgt&&(await this.Wgt.ir(bs.Bot),this.Wgt.pn(zn.aa,this.Ggt),this.Wgt=void 0),this.wdt=void 0,this.Ugt={},this.Vgt={}}Kgt(){this.Ugt={},this.Vgt={}}findTrackForRepresentation(t){for(const e of this.Z.Kv){const i=this.Tdt(e);if(i&&HV.kdt(i)===t)return e}}constructor(t,e,i,s,n){super(),this.uc=0,this.HF=1,this.Wgt=void 0,this.Ugt={},this.Vgt={},this.oc=0,this.Ggt=t=>{0},this.m0=t,this.fP=e,this.GF=i,this.Xgt=s,this.Sat=n}},KW=class extends QW{Qgt(t,e,i,s,n,r,h,o){var a;const u=r.sit.reduce(((t,e)=>t||e.o),void 0);var c;const l=null!=(c=null!=u?u:null==(a=r.o)?void 0:a.toString())?c:"";return this.lP.cP(t,l,e,i,s,n,h,o)}bn(){for(const t of this.Z.Kv)this.lP.mP(t);return super.bn()}constructor(t,e,i,s,n,r){super(t,e,i,s,n),this.lP=r}},jW=class{get nt(){return this.xu}async dP(t){if(t.Iw!==Di.KT)return;const e=function(t,e){return by(e)||t===Ot.APPLICATION_TTML_XML||t===Ot.TEXT_VTT?new OV:Ey(t,e)?new FV:void 0}(t.aV,t.bet);if(e){const i=this.jgt(e);return this.Ygt(i),await i.On(t),i}}jgt(t){return new KW(this.m0,this.fP,this.GF,t,this.Sat,this.lP)}Ygt(t){this.Zgt.push(t),this.xu.MO(t.Z)}async ir(){for(const t of this.Zgt.slice())await t.ir();Ce(this.Zgt),this.xu.ir()}async bn(){for(const t of this.Zgt)await t.bn();Ce(this.Zgt),this.xu.bn()}constructor(t,e,i,s,n){this.Zgt=[],this.xu=new Uu([]),this.m0=t,this.fP=e,this.GF=i,this.Sat=s,this.lP=n}},YW=class extends Xi{constructor(){super(ca.Zot)}},ZW=class extends Et{Jq(t,e){return this.Jgt(t,e)}async Jgt(t,e){for(const e of t)this.$gt(e);await this.On(e);for(const t of this.wst.Ert)t.Iw===Di.KT&&(t.sit&&0!==t.sit.length?await this.tvt.dP(t):this.To(new ZH("No supported representation found in the AdaptationSet with mimetype : "+t.Iw)))}get cw(){return this.mS}jdt(){return this.Zgt.some((t=>t.jdt()))}b_t(){return 0!==this.Zgt.length&&this.Zgt.every((t=>t.b_t()))}evt(){this.Bct()&&this.To(new YW)}ivt(t){t.wn([zn.aa,o.gm,o.wm,o.pm,o.Am,o.qw],this.Os),t.wn(Ou.RX,this.svt),t.wn("yct",this.Os)}get Rt(){return this.Zgt.some((t=>t.Rt))}async nvt(t){await Promise.all(this.Zgt.map((e=>e.bn(t)))),Ce(this.Zgt)}get ht(){return this.$T}get bl(){if(0===this.Zgt.length)return d.Nl();const t=this.Zgt.map((t=>t.bl));let e=d.MF(0,1/0);for(const i of t)e=e.Cn(i);if(0===e.U)return e;if(this.b_t()){const t=e.Cn(this.T_t);if(0===t.U)return e;const i=t.Pn(t.U-1);let s=0;for(const t of this.Zgt)s=w.max(s,t.rvt);i<=s&&(e=e.Hl(new d([i,s],[!0,!0])))}return e}get Wu(){return this.KO.Wu}get Fct(){return this.ovt}get Pn(){if(this.Xut){const t=this.ct;if(!j(t)&&t!==ne)return t}if(!this.Zgt.length)return NaN;let t=0;for(const e of this.Zgt)t=w.max(t,e.Pn);return t}get Xut(){const t=this.wst.Zit;if(t.Iw===ks.wB)return!1;const e=t.Sit;return 0!==e.length&&this.wst===e[e.length-1]}get kl(){if(!this.Zgt.length)return d.Nl();let t=new d([0,1/0]);for(const e of this.Zgt)t=t.Cn(e.kl);if(t.U>0&&this.Xut&&isFinite(this.ct)){const e=this.ct,i=t.Pn(t.U-1);e>i&&(t=t.Hl(d.MF(i,e).gF()))}return t}get JM(){return this.wst}get nt(){return this.xu}get rt(){return this.eS}get QO(){const t=this.Wu,e=this.bl,i=e.TF(t);if(-1!==i)return{Tn:e.Tn(i),Pn:e.Pn(i)}}get T_t(){const t=this.wst.Tn,e=this.Xut?1/0:this.wst.Pn;return d.MF(t,e)}Bct(){if(this.jdt())return!1;if(!this.b_t())return!1;const t=this.bl;if(0===t.U)return!1;const e=this.Wu;if(this.Xut)return t.Tn(t.U-1)<=e;{const i=t.Cn(this.T_t);if(0===i.U)return!0;const s=i.Tn(i.U-1),n=i.Pn(i.U-1)+.1;return s<=e&&e<=n}}get ult(){return this.avt}async Tut(t){this.avt||(this.avt=!0,await Promise.all(this.Zgt.map((e=>e.Tut(t)))))}async Out(t){this.avt&&(this.avt=!1,await Promise.all(this.Zgt.map((e=>e.Out(t)))))}async bn(t){this.Lo(),this.wst.pn(sh.Vit,this.Os),this.uvt.Jl(),this.cvt&&(await this.cvt.catch(Qo),this.cvt=void 0),await this.nvt(t),await this.tvt.bn(),this.$T.bn(),this.eS.bn(),this.xu.bn(),this.lvt()}$gt(t){this.dvt.push(t),t.wn("qht",this.fvt);const e=t.Iw===Di.yy?this.$T:this.eS;for(const i of t.Z)e.tt(i)}_vt(t){const e=t.Iw===Di.yy?this.$T:this.eS;for(const i of t.Z)e.it(i),i.bn();t.bn(),me(this.dvt,t)}lvt(){for(let t=this.dvt.length-1;t>=0;t--)this._vt(this.dvt[t])}get kut(){return this.dvt.map((t=>t.Xht)).filter(Qf)}get Sut(){return this.Zgt.map((t=>t.Xht)).filter(Qf)}On(t,e){return this.uvt.Jl(),this.uvt=new Hi,e&&this.uvt.U_(e),this.cvt=I_(this.i7(t,this.cvt,this.uvt.M_),this.uvt).catch(this.yut),this.cvt}async i7(t,e,i){e&&await e.catch(Qo),k_(i);const s=[],n=this.Zgt.slice(),r=t.slice();Ce(this.Zgt);for(const t of n){const e=t.Xht;e&&Bc(r,e)?(this.Zgt.push(t),s.push(t.On(e,i)),me(r,e)):(this.xu.HO(t.nt),await t.bn(),k_(i))}for(const t of r){const e=this.gvt(t.rot);this.xu.MO(e.nt),this.Zgt.push(e),this.ivt(e),s.push(e.On(t,i))}await Promise.all(s),this.vvt()}async wvt(t,e){await this.On(t),this.ovt=e}constructor(t,e,i,s,r,h,o,a,u,c){super(),this.$T=new mi,this.eS=new mi,this.dvt=[],this.uvt=new Hi,this.avt=!0,this.Zgt=[],this.cvt=void 0,this.svt=E((()=>{this.To(new bc(this.Wu))}),350),this.fvt=t=>{const e=t.zht.Xht;if(e)for(const t of this.dvt){var i;t.Xht&&t.Xht!==e&&t.Iw===(null==(i=e.Qet)?void 0:i.Iw)&&(t.pn("qht",this.fvt),t.Xht.Rt=!1,t.wn("qht",this.fvt))}this.Os(t)},this.yut=t=>{Aa(t)||this.To(new Vo(new jr(n.MEDIA_LOAD_ERROR,t.message,t)))},this.mvt=t=>{const e=t.B$;if(e)for(const t of this.Sut){if((t.qit.ket||[]).some((t=>t.nL&&L(Zn(e),uI(t.nL)))))return void this.To(new ce(new ss(n.CONTENT_PROTECTION_OUTPUT_RESTRICTED,"Content unavailable due to DRM restrictions")))}},this.fP=t,this.GF=e,this.Sat=i,this.KO=s,this.cut=r,this.mS=vs(),this.dvt=[],this.wst=h,this.ovt=o,this.lP=a,this.tvt=new jW(s,t,e,i,a),this.xu=new Uu([this.tvt.nt]),this.pat=u,this._lt=c,this.wst.wn(sh.Vit,this.Os)}},JW=[zn.aa,o.wm,o.pm,o.Am,o.qw],$W=0;var Bi,du,tq,eq=class extends Xi{constructor(t,e){super(o.gm),this.representation=t,this.previousRepresentation=e}};function iq(t,e,i){return i===Bi.pvt?i:e!==du.yvt&&e!==du.Avt||i!==Bi.bvt&&i!==Bi.Tvt?t?e===du.Svt?Bi.kvt:e===du.Evt?Bi.Ivt:Bi.pvt:Bi.Pvt:Bi.Tvt}function sq(t,e,i,s){const n={byte:i};let r=Bi.bvt;const h=[],o=31&Jt(e,n,s);n.byte+=1;for(let i=0;i<o;i+=1){const o=Jt(e,n,s),a=4&o,u=3&o;r=iq(Boolean(a),u,r);const c=Jt(e,n,s),l=Jt(e,n,s);h.push({Rvt:t,lT:-1,Cvt:!i,xvt:Boolean(a),Iw:u,Dvt:r,Nvt:c,Bvt:l})}return h}function nq(t,e,i){const s=Jt(t,e,i);if(!j(s))return String.fromCharCode(s)}function rq(t){const e=t.AK,i={byte:t.pK},s=t.yK,n=Jt(e,i,s);if(255===n&&(i.byte+=1),181!==n)return;const r=CR(e,i);if(47!==r&&49!==r)return;if(49===r){const t=function(t,e,i){let s="",n=i;for(;n>0;)n-=1,s+=nq(t,e);return s}(e,i,4);if("GA94"!==t)return}if(3!==Jt(e,i,s))return;47===r&&(i.byte+=1);const h=t;return h.Lvt=i.byte,h}function hq(t){return 4===t.wK}function oq(t){const e=t.filter(hq).map(rq).filter(Qf),i=[];for(const t of e)i.push(...sq(t.vK,t.AK,t.Lvt,t.yK));return i}!function(t){t[t.pvt=0]="pvt",t[t.bvt=1]="bvt",t[t.Tvt=2]="Tvt",t[t.Ivt=3]="Ivt",t[t.kvt=4]="kvt",t[t.Pvt=5]="Pvt"}(Bi||(Bi={})),function(t){t[t.yvt=0]="yvt",t[t.Avt=1]="Avt",t[t.Svt=2]="Svt",t[t.Evt=3]="Evt"}(du||(du={})),function(t){t[t.Ovt=47]="Ovt",t[t.Mvt=49]="Mvt"}(tq||(tq={}));var aq="und";function uq(t){if(t===aq)return;const e=t.toLowerCase();for(const t of cq)if(t[1]===e||t[2]===e||t["2T"]===e||t["2B"]===e||t[3]===e)return t}var cq=[{l:"Abkhaz",dh:"\u0410\u04a7\u0441\u0443\u0430",1:"ab",2:"abk","2T":"abk","2B":"abk",3:"abk"},{l:"Afar",dh:"Afaraf",1:"aa",2:"aar","2T":"aar","2B":"aar",3:"aar"},{l:"Afrikaans",dh:"Afrikaans",1:"af",2:"afr","2T":"afr","2B":"afr",3:"afr"},{l:"Akan",dh:"Akan",1:"ak",2:"aka","2T":"aka","2B":"aka",3:"aka"},{l:"Albanian",dh:"Shqip",1:"sq",2:"sqi","2T":"sqi","2B":"alb",3:"sqi"},{l:"Amharic",dh:"\u12a0\u121b\u122d\u129b",1:"am",2:"amh","2T":"amh","2B":"amh",3:"amh"},{l:"Arabic",dh:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629",1:"ar",2:"ara","2T":"ara","2B":"ara",3:"ara"},{l:"Aragonese",dh:"Aragon\xe9s",1:"an",2:"arg","2T":"arg","2B":"arg",3:"arg"},{l:"Armenian",dh:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576",1:"hy",2:"hye","2T":"hye","2B":"arm",3:"hye"},{l:"Assamese",dh:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be",1:"as",2:"asm","2T":"asm","2B":"asm",3:"asm"},{l:"Avaric",dh:"\u0410\u0432\u0430\u0440",1:"av",2:"ava","2T":"ava","2B":"ava",3:"ava"},{l:"Avestan",dh:"avesta",1:"ae",2:"ave","2T":"ave","2B":"ave",3:"ave"},{l:"Aymara",dh:"Aymar",1:"ay",2:"aym","2T":"aym","2B":"aym",3:"aym"},{l:"Azerbaijani",dh:"Az\u0259rbaycanca",1:"az",2:"aze","2T":"aze","2B":"aze",3:"aze"},{l:"Bambara",dh:"Bamanankan",1:"bm",2:"bam","2T":"bam","2B":"bam",3:"bam"},{l:"Bashkir",dh:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442\u0441\u0430",1:"ba",2:"bak","2T":"bak","2B":"bak",3:"bak"},{l:"Basque",dh:"Euskara",1:"eu",2:"eus","2T":"eus","2B":"baq",3:"eus"},{l:"Belarusian",dh:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f",1:"be",2:"bel","2T":"bel","2B":"bel",3:"bel"},{l:"Bengali",dh:"\u09ac\u09be\u0982\u09b2\u09be",1:"bn",2:"ben","2T":"ben","2B":"ben",3:"ben"},{l:"Bihari",dh:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940",1:"bh",2:"bih","2T":"bih","2B":"bih",3:"bih"},{l:"Bislama",dh:"Bislama",1:"bi",2:"bis","2T":"bis","2B":"bis",3:"bis"},{l:"Bosnian",dh:"Bosanski",1:"bs",2:"bos","2T":"bos","2B":"bos",3:"bos"},{l:"Breton",dh:"Brezhoneg",1:"br",2:"bre","2T":"bre","2B":"bre",3:"bre"},{l:"Bulgarian",dh:"\u0411\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438",1:"bg",2:"bul","2T":"bul","2B":"bul",3:"bul"},{l:"Burmese",dh:"\u1019\u103c\u1014\u103a\u1019\u102c\u1018\u102c\u101e\u102c",1:"my",2:"mya","2T":"mya","2B":"bur",3:"mya"},{l:"Catalan",dh:"Catal\xe0",1:"ca",2:"cat","2T":"cat","2B":"cat",3:"cat"},{l:"Chamorro",dh:"Chamoru",1:"ch",2:"cha","2T":"cha","2B":"cha",3:"cha"},{l:"Chechen",dh:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d",1:"ce",2:"che","2T":"che","2B":"che",3:"che"},{l:"Chichewa",dh:"Chichewa",1:"ny",2:"nya","2T":"nya","2B":"nya",3:"nya"},{l:"Chinese",dh:"\u4e2d\u6587",1:"zh",2:"zho","2T":"zho","2B":"chi",3:"zho"},{l:"Chuvash",dh:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430",1:"cv",2:"chv","2T":"chv","2B":"chv",3:"chv"},{l:"Cornish",dh:"Kernewek",1:"kw",2:"cor","2T":"cor","2B":"cor",3:"cor"},{l:"Corsican",dh:"Corsu",1:"co",2:"cos","2T":"cos","2B":"cos",3:"cos"},{l:"Cree",dh:"\u14c0\u1426\u1403\u152d\u140d\u140f\u1423",1:"cr",2:"cre","2T":"cre","2B":"cre",3:"cre"},{l:"Croatian",dh:"Hrvatski",1:"hr",2:"hrv","2T":"hrv","2B":"hrv",3:"hrv"},{l:"Czech",dh:"\u010ce\u0161tina",1:"cs",2:"ces","2T":"ces","2B":"cze",3:"ces"},{l:"Danish",dh:"Dansk",1:"da",2:"dan","2T":"dan","2B":"dan",3:"dan"},{l:"Divehi",dh:"Divehi",1:"dv",2:"div","2T":"div","2B":"div",3:"div"},{l:"Dutch",dh:"Nederlands",1:"nl",2:"nld","2T":"nld","2B":"dut",3:"nld"},{l:"Dzongkha",dh:"\u0f62\u0fab\u0f7c\u0f44\u0f0b\u0f41",1:"dz",2:"dzo","2T":"dzo","2B":"dzo",3:"dzo"},{l:"English",dh:"English",1:"en",2:"eng","2T":"eng","2B":"eng",3:"eng"},{l:"Esperanto",dh:"Esperanto",1:"eo",2:"epo","2T":"epo","2B":"epo",3:"epo"},{l:"Estonian",dh:"Eesti",1:"et",2:"est","2T":"est","2B":"est",3:"est"},{l:"Ewe",dh:"E\u028begbe",1:"ee",2:"ewe","2T":"ewe","2B":"ewe",3:"ewe"},{l:"Faroese",dh:"F\xf8royskt",1:"fo",2:"fao","2T":"fao","2B":"fao",3:"fao"},{l:"Fijian",dh:"Na Vosa Vaka-Viti",1:"fj",2:"fij","2T":"fij","2B":"fij",3:"fij"},{l:"Finnish",dh:"Suomi",1:"fi",2:"fin","2T":"fin","2B":"fin",3:"fin"},{l:"French",dh:"Fran\xe7ais",1:"fr",2:"fra","2T":"fra","2B":"fre",3:"fra"},{l:"Fula",dh:"Fulfulde",1:"ff",2:"ful","2T":"ful","2B":"ful",3:"ful"},{l:"Galician",dh:"Galego",1:"gl",2:"glg","2T":"glg","2B":"glg",3:"glg"},{l:"Georgian",dh:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8",1:"ka",2:"kat","2T":"kat","2B":"geo",3:"kat"},{l:"German",dh:"Deutsch",1:"de",2:"deu","2T":"deu","2B":"ger",3:"deu"},{l:"Greek",dh:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac",1:"el",2:"ell","2T":"ell","2B":"gre",3:"ell"},{l:"Guaran\xed",dh:"Ava\xf1e'\u1ebd",1:"gn",2:"grn","2T":"grn","2B":"grn",3:"grn"},{l:"Gujarati",dh:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0",1:"gu",2:"guj","2T":"guj","2B":"guj",3:"guj"},{l:"Haitian",dh:"Krey\xf2l Ayisyen",1:"ht",2:"hat","2T":"hat","2B":"hat",3:"hat"},{l:"Hausa",dh:"\u0647\u064e\u0648\u064f\u0633\u064e",1:"ha",2:"hau","2T":"hau","2B":"hau",3:"hau"},{l:"Hebrew",dh:"\u05e2\u05d1\u05e8\u05d9\u05ea",1:"he",2:"heb","2T":"heb","2B":"heb",3:"heb"},{l:"Herero",dh:"Otjiherero",1:"hz",2:"her","2T":"her","2B":"her",3:"her"},{l:"Hindi",dh:"\u0939\u093f\u0928\u094d\u0926\u0940",1:"hi",2:"hin","2T":"hin","2B":"hin",3:"hin"},{l:"Hiri Motu",dh:"Hiri Motu",1:"ho",2:"hmo","2T":"hmo","2B":"hmo",3:"hmo"},{l:"Hungarian",dh:"Magyar",1:"hu",2:"hun","2T":"hun","2B":"hun",3:"hun"},{l:"Interlingua",dh:"Interlingua",1:"ia",2:"ina","2T":"ina","2B":"ina",3:"ina"},{l:"Indonesian",dh:"Bahasa Indonesia",1:"id",2:"ind","2T":"ind","2B":"ind",3:"ind"},{l:"Interlingue",dh:"Interlingue",1:"ie",2:"ile","2T":"ile","2B":"ile",3:"ile"},{l:"Irish",dh:"Gaeilge",1:"ga",2:"gle","2T":"gle","2B":"gle",3:"gle"},{l:"Igbo",dh:"Igbo",1:"ig",2:"ibo","2T":"ibo","2B":"ibo",3:"ibo"},{l:"Inupiaq",dh:"I\xf1upiak",1:"ik",2:"ipk","2T":"ipk","2B":"ipk",3:"ipk"},{l:"Ido",dh:"Ido",1:"io",2:"ido","2T":"ido","2B":"ido",3:"ido"},{l:"Icelandic",dh:"\xcdslenska",1:"is",2:"isl","2T":"isl","2B":"ice",3:"isl"},{l:"Italian",dh:"Italiano",1:"it",2:"ita","2T":"ita","2B":"ita",3:"ita"},{l:"Inuktitut",dh:"\u1403\u14c4\u1483\u144e\u1450\u1466",1:"iu",2:"iku","2T":"iku","2B":"iku",3:"iku"},{l:"Japanese",dh:"\u65e5\u672c\u8a9e",1:"ja",2:"jpn","2T":"jpn","2B":"jpn",3:"jpn"},{l:"Javanese",dh:"Basa Jawa",1:"jv",2:"jav","2T":"jav","2B":"jav",3:"jav"},{l:"Kalaallisut",dh:"Kalaallisut",1:"kl",2:"kal","2T":"kal","2B":"kal",3:"kal"},{l:"Kannada",dh:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1",1:"kn",2:"kan","2T":"kan","2B":"kan",3:"kan"},{l:"Kanuri",dh:"Kanuri",1:"kr",2:"kau","2T":"kau","2B":"kau",3:"kau"},{l:"Kashmiri",dh:"\u0643\u0634\u0645\u064a\u0631\u064a",1:"ks",2:"kas","2T":"kas","2B":"kas",3:"kas"},{l:"Kazakh",dh:"\u049a\u0430\u0437\u0430\u049b\u0448\u0430",1:"kk",2:"kaz","2T":"kaz","2B":"kaz",3:"kaz"},{l:"Khmer",dh:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a",1:"km",2:"khm","2T":"khm","2B":"khm",3:"khm"},{l:"Kikuyu",dh:"G\u0129k\u0169y\u0169",1:"ki",2:"kik","2T":"kik","2B":"kik",3:"kik"},{l:"Kinyarwanda",dh:"Kinyarwanda",1:"rw",2:"kin","2T":"kin","2B":"kin",3:"kin"},{l:"Kyrgyz",dh:"\u041a\u044b\u0440\u0433\u044b\u0437\u0447\u0430",1:"ky",2:"kir","2T":"kir","2B":"kir",3:"kir"},{l:"Komi",dh:"\u041a\u043e\u043c\u0438",1:"kv",2:"kom","2T":"kom","2B":"kom",3:"kom"},{l:"Kongo",dh:"Kongo",1:"kg",2:"kon","2T":"kon","2B":"kon",3:"kon"},{l:"Korean",dh:"\ud55c\uad6d\uc5b4",1:"ko",2:"kor","2T":"kor","2B":"kor",3:"kor"},{l:"Kurdish",dh:"Kurd\xee",1:"ku",2:"kur","2T":"kur","2B":"kur",3:"kur"},{l:"Kwanyama",dh:"Kuanyama",1:"kj",2:"kua","2T":"kua","2B":"kua",3:"kua"},{l:"Latin",dh:"Latina",1:"la",2:"lat","2T":"lat","2B":"lat",3:"lat"},{l:"Luxembourgish",dh:"L\xebtzebuergesch",1:"lb",2:"ltz","2T":"ltz","2B":"ltz",3:"ltz"},{l:"Ganda",dh:"Luganda",1:"lg",2:"lug","2T":"lug","2B":"lug",3:"lug"},{l:"Limburgish",dh:"Limburgs",1:"li",2:"lim","2T":"lim","2B":"lim",3:"lim"},{l:"Lingala",dh:"Ling\xe1la",1:"ln",2:"lin","2T":"lin","2B":"lin",3:"lin"},{l:"Lao",dh:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7",1:"lo",2:"lao","2T":"lao","2B":"lao",3:"lao"},{l:"Lithuanian",dh:"Lietuvi\u0173",1:"lt",2:"lit","2T":"lit","2B":"lit",3:"lit"},{l:"Luba-Katanga",dh:"Tshiluba",1:"lu",2:"lub","2T":"lub","2B":"lub",3:"lub"},{l:"Latvian",dh:"Latvie\u0161u",1:"lv",2:"lav","2T":"lav","2B":"lav",3:"lav"},{l:"Manx",dh:"Gaelg",1:"gv",2:"glv","2T":"glv","2B":"glv",3:"glv"},{l:"Macedonian",dh:"\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438",1:"mk",2:"mkd","2T":"mkd","2B":"mac",3:"mkd"},{l:"Malagasy",dh:"Malagasy",1:"mg",2:"mlg","2T":"mlg","2B":"mlg",3:"mlg"},{l:"Malay",dh:"Bahasa Melayu",1:"ms",2:"msa","2T":"msa","2B":"may",3:"msa"},{l:"Malayalam",dh:"\u0d2e\u0d32\u0d2f\u0d3e\u0d33\u0d02",1:"ml",2:"mal","2T":"mal","2B":"mal",3:"mal"},{l:"Maltese",dh:"Malti",1:"mt",2:"mlt","2T":"mlt","2B":"mlt",3:"mlt"},{l:"M\u0101ori",dh:"M\u0101ori",1:"mi",2:"mri","2T":"mri","2B":"mao",3:"mri"},{l:"Marathi",dh:"\u092e\u0930\u093e\u0920\u0940",1:"mr",2:"mar","2T":"mar","2B":"mar",3:"mar"},{l:"Marshallese",dh:"Kajin M\u0327aje\u013c",1:"mh",2:"mah","2T":"mah","2B":"mah",3:"mah"},{l:"Mongolian",dh:"\u041c\u043e\u043d\u0433\u043e\u043b",1:"mn",2:"mon","2T":"mon","2B":"mon",3:"mon"},{l:"Nauru",dh:"Dorerin Naoero",1:"na",2:"nau","2T":"nau","2B":"nau",3:"nau"},{l:"Navajo",dh:"Din\xe9 Bizaad",1:"nv",2:"nav","2T":"nav","2B":"nav",3:"nav"},{l:"Northern Ndebele",dh:"isiNdebele",1:"nd",2:"nde","2T":"nde","2B":"nde",3:"nde"},{l:"Nepali",dh:"\u0928\u0947\u092a\u093e\u0932\u0940",1:"ne",2:"nep","2T":"nep","2B":"nep",3:"nep"},{l:"Ndonga",dh:"Owambo",1:"ng",2:"ndo","2T":"ndo","2B":"ndo",3:"ndo"},{l:"Norwegian Bokm\xe5l",dh:"Norsk (Bokm\xe5l)",1:"nb",2:"nob","2T":"nob","2B":"nob",3:"nob"},{l:"Norwegian Nynorsk",dh:"Norsk (Nynorsk)",1:"nn",2:"nno","2T":"nno","2B":"nno",3:"nno"},{l:"Norwegian",dh:"Norsk",1:"no",2:"nor","2T":"nor","2B":"nor",3:"nor"},{l:"Nuosu",dh:"\ua188\ua320\ua4bf Nuosuhxop",1:"ii",2:"iii","2T":"iii","2B":"iii",3:"iii"},{l:"Southern Ndebele",dh:"isiNdebele",1:"nr",2:"nbl","2T":"nbl","2B":"nbl",3:"nbl"},{l:"Occitan",dh:"Occitan",1:"oc",2:"oci","2T":"oci","2B":"oci",3:"oci"},{l:"Ojibwe",dh:"\u140a\u14c2\u1511\u14c8\u142f\u14a7\u140e\u14d0",1:"oj",2:"oji","2T":"oji","2B":"oji",3:"oji"},{l:"Old Church Slavonic",dh:"\u0421\u043b\u043e\u0432\u0463\u0301\u043d\u044c\u0441\u043a\u044a",1:"cu",2:"chu","2T":"chu","2B":"chu",3:"chu"},{l:"Oromo",dh:"Afaan Oromoo",1:"om",2:"orm","2T":"orm","2B":"orm",3:"orm"},{l:"Oriya",dh:"\u0b13\u0b21\u0b3f\u0b3c\u0b06",1:"or",2:"ori","2T":"ori","2B":"ori",3:"ori"},{l:"Ossetian",dh:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433",1:"os",2:"oss","2T":"oss","2B":"oss",3:"oss"},{l:"Panjabi",dh:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40",1:"pa",2:"pan","2T":"pan","2B":"pan",3:"pan"},{l:"P\u0101li",dh:"\u092a\u093e\u0934\u093f",1:"pi",2:"pli","2T":"pli","2B":"pli",3:"pli"},{l:"Persian",dh:"\u0641\u0627\u0631\u0633\u06cc",1:"fa",2:"fas","2T":"fas","2B":"per",3:"fas"},{l:"Polish",dh:"Polski",1:"pl",2:"pol","2T":"pol","2B":"pol",3:"pol"},{l:"Pashto",dh:"\u067e\u069a\u062a\u0648",1:"ps",2:"pus","2T":"pus","2B":"pus",3:"pus"},{l:"Portuguese",dh:"Portugu\xeas",1:"pt",2:"por","2T":"por","2B":"por",3:"por"},{l:"Quechua",dh:"Runa Simi",1:"qu",2:"que","2T":"que","2B":"que",3:"que"},{l:"Romansh",dh:"Rumantsch",1:"rm",2:"roh","2T":"roh","2B":"roh",3:"roh"},{l:"Kirundi",dh:"Kirundi",1:"rn",2:"run","2T":"run","2B":"run",3:"run"},{l:"Romanian",dh:"Rom\xe2n\u0103",1:"ro",2:"ron","2T":"ron","2B":"rum",3:"ron"},{l:"Russian",dh:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439",1:"ru",2:"rus","2T":"rus","2B":"rus",3:"rus"},{l:"Sanskrit",dh:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d",1:"sa",2:"san","2T":"san","2B":"san",3:"san"},{l:"Sardinian",dh:"Sardu",1:"sc",2:"srd","2T":"srd","2B":"srd",3:"srd"},{l:"Sindhi",dh:"\u0633\u0646\u068c\u064a\u200e",1:"sd",2:"snd","2T":"snd","2B":"snd",3:"snd"},{l:"Northern Sami",dh:"S\xe1megiella",1:"se",2:"sme","2T":"sme","2B":"sme",3:"sme"},{l:"Samoan",dh:"Gagana S\u0101moa",1:"sm",2:"smo","2T":"smo","2B":"smo",3:"smo"},{l:"Sango",dh:"S\xe4ng\xf6",1:"sg",2:"sag","2T":"sag","2B":"sag",3:"sag"},{l:"Serbian",dh:"\u0421\u0440\u043f\u0441\u043a\u0438",1:"sr",2:"srp","2T":"srp","2B":"srp",3:"srp"},{l:"Gaelic",dh:"G\xe0idhlig",1:"gd",2:"gla","2T":"gla","2B":"gla",3:"gla"},{l:"Shona",dh:"ChiShona",1:"sn",2:"sna","2T":"sna","2B":"sna",3:"sna"},{l:"Sinhala",dh:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd",1:"si",2:"sin","2T":"sin","2B":"sin",3:"sin"},{l:"Slovak",dh:"Sloven\u010dina",1:"sk",2:"slk","2T":"slk","2B":"slo",3:"slk"},{l:"Slovene",dh:"Sloven\u0161\u010dina",1:"sl",2:"slv","2T":"slv","2B":"slv",3:"slv"},{l:"Somali",dh:"Soomaaliga",1:"so",2:"som","2T":"som","2B":"som",3:"som"},{l:"Southern Sotho",dh:"Sesotho",1:"st",2:"sot","2T":"sot","2B":"sot",3:"sot"},{l:"Spanish",dh:"Espa\xf1ol",1:"es",2:"spa","2T":"spa","2B":"spa",3:"spa"},{l:"Sundanese",dh:"Basa Sunda",1:"su",2:"sun","2T":"sun","2B":"sun",3:"sun"},{l:"Swahili",dh:"Kiswahili",1:"sw",2:"swa","2T":"swa","2B":"swa",3:"swa"},{l:"Swati",dh:"SiSwati",1:"ss",2:"ssw","2T":"ssw","2B":"ssw",3:"ssw"},{l:"Swedish",dh:"Svenska",1:"sv",2:"swe","2T":"swe","2B":"swe",3:"swe"},{l:"Tamil",dh:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd",1:"ta",2:"tam","2T":"tam","2B":"tam",3:"tam"},{l:"Telugu",dh:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41",1:"te",2:"tel","2T":"tel","2B":"tel",3:"tel"},{l:"Tajik",dh:"\u0422\u043e\u04b7\u0438\u043a\u04e3",1:"tg",2:"tgk","2T":"tgk","2B":"tgk",3:"tgk"},{l:"Thai",dh:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",1:"th",2:"tha","2T":"tha","2B":"tha",3:"tha"},{l:"Tigrinya",dh:"\u1275\u130d\u122d\u129b",1:"ti",2:"tir","2T":"tir","2B":"tir",3:"tir"},{l:"Tibetan Standard",dh:"\u0f56\u0f7c\u0f51\u0f0b\u0f61\u0f72\u0f42",1:"bo",2:"bod","2T":"bod","2B":"tib",3:"bod"},{l:"Turkmen",dh:"T\xfcrkmen\xe7e",1:"tk",2:"tuk","2T":"tuk","2B":"tuk",3:"tuk"},{l:"Tagalog",dh:"Tagalog",1:"tl",2:"tgl","2T":"tgl","2B":"tgl",3:"tgl"},{l:"Tswana",dh:"Setswana",1:"tn",2:"tsn","2T":"tsn","2B":"tsn",3:"tsn"},{l:"Tonga",dh:"faka Tonga",1:"to",2:"ton","2T":"ton","2B":"ton",3:"ton"},{l:"Turkish",dh:"T\xfcrk\xe7e",1:"tr",2:"tur","2T":"tur","2B":"tur",3:"tur"},{l:"Tsonga",dh:"Xitsonga",1:"ts",2:"tso","2T":"tso","2B":"tso",3:"tso"},{l:"Tatar",dh:"\u0422\u0430\u0442\u0430\u0440\u0447\u0430",1:"tt",2:"tat","2T":"tat","2B":"tat",3:"tat"},{l:"Twi",dh:"Twi",1:"tw",2:"twi","2T":"twi","2B":"twi",3:"twi"},{l:"Tahitian",dh:"Reo M\u0101\u2019ohi",1:"ty",2:"tah","2T":"tah","2B":"tah",3:"tah"},{l:"Uyghur",dh:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u0647",1:"ug",2:"uig","2T":"uig","2B":"uig",3:"uig"},{l:"Ukrainian",dh:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",1:"uk",2:"ukr","2T":"ukr","2B":"ukr",3:"ukr"},{l:"Urdu",dh:"\u0627\u0631\u062f\u0648",1:"ur",2:"urd","2T":"urd","2B":"urd",3:"urd"},{l:"Uzbek",dh:"O\u2018zbek",1:"uz",2:"uzb","2T":"uzb","2B":"uzb",3:"uzb"},{l:"Venda",dh:"Tshiven\u1e13a",1:"ve",2:"ven","2T":"ven","2B":"ven",3:"ven"},{l:"Vietnamese",dh:"Ti\u1ebfng Vi\u1ec7t",1:"vi",2:"vie","2T":"vie","2B":"vie",3:"vie"},{l:"Volap\xfck",dh:"Volap\xfck",1:"vo",2:"vol","2T":"vol","2B":"vol",3:"vol"},{l:"Walloon",dh:"Walon",1:"wa",2:"wln","2T":"wln","2B":"wln",3:"wln"},{l:"Welsh",dh:"Cymraeg",1:"cy",2:"cym","2T":"cym","2B":"wel",3:"cym"},{l:"Wolof",dh:"Wolof",1:"wo",2:"wol","2T":"wol","2B":"wol",3:"wol"},{l:"Western Frisian",dh:"Frysk",1:"fy",2:"fry","2T":"fry","2B":"fry",3:"fry"},{l:"Xhosa",dh:"isiXhosa",1:"xh",2:"xho","2T":"xho","2B":"xho",3:"xho"},{l:"Yiddish",dh:"\u05d9\u05d9\u05b4\u05d3\u05d9\u05e9",1:"yi",2:"yid","2T":"yid","2B":"yid",3:"yid"},{l:"Yoruba",dh:"Yor\xf9b\xe1",1:"yo",2:"yor","2T":"yor","2B":"yor",3:"yor"},{l:"Zhuang",dh:"Cuengh",1:"za",2:"zha","2T":"zha","2B":"zha",3:"zha"},{l:"Zulu",dh:"isiZulu",1:"zu",2:"zul","2T":"zul","2B":"zul",3:"zul"}];function lq(t){var e;const i=null!=(e=function(t){const e=t.QQ,i=new DR;return i.aK(e,0,e.byteLength),WR(i).MK}(t))?e:24;return t.Fvt/i}function dq(t){return t.Iw===hs.Yp}var fq;function _q(t,e,i,s,n){const r=function(t,e,i,s){const n=i.Fvt,r=Te.fromNumber(t.TT||0),h=s.fS(yi.Ek(r,n));return{qtt:s.hk(),Uvt:s,Hvt:h,Vvt:s}}(t,0,i,s),h=yi.Ik(t.ct||0,i.Fvt),o=t.aA||0,a=!(65536&o)&&1!==(o>>24&3);let u;const c=Sa(n),l=new Ko;for(;l.Au<c.byteLength;){const t=As(c,l);if((31&Fv(c,l,1))===xR.IK){const e=new DR;e.aK(n,l.Au-1,l.Au+t-1);const i=new VR(e),s=OR(r.Hvt,i);u=u||[],u.push(...oq(s))}l.Ey(t-1)}return Me({},r,{ct:h.hk(),Wvt:h,qvt:r.Hvt.hk(),zvt:r.qtt,Xvt:a,Gvt:u,Qvt:!1,Kvt:!1})}function gq(t){return{MA:t.eA.MA,Fvt:t.NA.eA.IA}}function vq(t){return t.Iw===hs.pp}!function(t){t[t.SAMPLE_DEPENDS_ON_UNKNOWN=0]="SAMPLE_DEPENDS_ON_UNKNOWN",t[t.SAMPLE_DEPENDS_ON_OTHERS=1]="SAMPLE_DEPENDS_ON_OTHERS",t[t.SAMPLE_DEPENDS_ON_NO_OTHER=2]="SAMPLE_DEPENDS_ON_NO_OTHER",t[t.SAMPLE_DEPENDS_ON_RESERVED=3]="SAMPLE_DEPENDS_ON_RESERVED"}(fq||(fq={}));var Pu=class{GS(t){return this.o4===t.o4&&this.j3===t.j3}constructor(t,e){this.o4=t,this.j3=e}},wq=class{get b4(){return this.jvt}get v4(){return[this]}get y4(){return this.kX}get e4(){return this.Yvt}get n4(){return new Pu(this.e4.o4,this.e4.j3+this.b4.length-1)}Zvt(t){this.jvt+=t}Jvt(t){for(const e of t)this.Zvt(e)}constructor(t,e){this.kX=t,this.Yvt=e,this.jvt=""}};function mq(t,e){return t===e||t.b4===e.b4&&t.e4.GS(e.e4)&&Ne(t.y4,e.y4)}function pq(t,e){return t===e||t.e4.GS(e.e4)&&t.n4.GS(e.n4)&&o_(t.v4,e.v4,mq)}var Fn=class extends Da{QS(t){return o_(this.O,t.O,pq)}constructor(t,e,i){super(t,e,i,!1)}},yq=class{$vt(t){return t.kE(this)}twt(t){return Ga(t,((t,e)=>t.kE(this,e)))}ewt(t,e){return new Aq(t,e).iwt()}},Aq=class{iwt(){if(this.swt)return[];for(let t=0;t<this.o4.length;t++)this.nwt(t);return this.rwt(),this.hwt}owt(t){this.awt=new wq(eN,new Pu(this.uwt,t))}rwt(){this.awt&&(this.hwt.push(this.awt),this.awt=null)}nwt(t){const e=this.o4[t];bq(e)?this.awt&&this.rwt():(this.awt||this.owt(t),this.awt.Zvt(e))}get swt(){return this.o4.every(bq)}constructor(t,e){this.o4=t,this.uwt=e,this.hwt=[],this.awt=null}};function bq(t){return null==t}var Tq=class{static cwt(t,e,i){if(e>=i)return;const s=Ga(t,((t,e)=>new Aq(t.map((t=>t?t.lwt():null)),e).iwt()));return 0!==s.length?new Fn(e,i,s):void 0}},Sq="black",Ys="white",kq=[[42,225],[92,233],[94,237],[95,243],[96,250],[123,231],[124,247],[125,209],[126,241],[127,9608],[128,174],[129,176],[130,189],[131,191],[132,8482],[133,162],[134,163],[135,9834],[136,224],[137,32],[138,232],[139,226],[140,234],[141,238],[142,244],[143,251],[144,193],[145,201],[146,211],[147,218],[148,220],[149,252],[150,8216],[151,161],[152,42],[153,8217],[154,9473],[155,169],[156,8480],[157,8226],[158,8220],[159,8221],[160,192],[161,194],[162,199],[163,200],[164,202],[165,203],[166,235],[167,206],[168,207],[169,239],[170,212],[171,217],[172,249],[173,219],[174,171],[175,187],[176,195],[177,227],[178,205],[179,204],[180,236],[181,210],[182,242],[183,213],[184,245],[185,123],[186,125],[187,92],[188,94],[189,95],[190,124],[191,8764],[192,196],[193,228],[194,214],[195,246],[196,223],[197,165],[198,164],[199,9475],[200,197],[201,229],[202,216],[203,248],[204,9487],[205,9491],[206,9495],[207,9499]].reduce(((t,e)=>(t[e[0]]=e[1],t)),{}),Eq=class{dwt(t){for(let e=0;e<z;e++)t&&(this.fwt[e]=t.fwt[e])}GS(t){for(let e=0;e<z;e++)if(this.fwt[e]!==t.fwt[e])return!1;return!0}_wt(){for(let t=0;t<z;t++)if(null!==this.fwt[t])return!1;return!0}gwt(t){this.vwt!==t&&(this.vwt=t),this.vwt<0?this.vwt=0:this.vwt>z&&(this.vwt=31)}wwt(t){const e=this.vwt+t;this.gwt(e)}mwt(){this.wwt(-1),this.fwt[this.vwt]=null}Zvt(t){t>=144&&this.mwt();const e=function(t){return kq[t]?String.fromCharCode(kq[t]):String.fromCharCode(t)}(t);this.addParsedChar(e)}addParsedChar(t){this.vwt>=z||(32===Number(t)?(this.fwt[this.vwt]=this.pwt?"</i>":"<i>",this.pwt=!this.pwt):this.fwt[this.vwt]=t,this.wwt(1))}ywt(t){for(let e=t;e<z;e++)this.fwt[e]=null}NC(){this.ywt(0),this.vwt=0}Awt(){this.ywt(this.vwt)}bwt(t,e){const i=this.fwt;let s=null;for(let n=0;n<z;n++){const r=i[n];null===r?s=null:(s||(s={Jh:n,Qh:t,Ti:0,Ci:1,fwt:[[]]},e.push(s)),s.fwt[0].push(r),s.Ti++)}}kE(t,e){return t.ewt(this.fwt,e)}constructor(){this.fwt=[],this.vwt=0;for(let t=0;t<z;t++)this.fwt.push(null);this.pwt=!1}};var sn,Iq=class{Twt(t,e){const i="CC"+(this.Swt<<1|this.kwt+1);if(t>=e)return null;const s=(new yq).twt(this.Ewt.slice(1));return 0===s.length?null:{IS:new Fn(t,e,s),BW:i,Iwt:this.Swt<<1|this.kwt+1}}ir(){this.Pwt(),this.Rwt=1}Cwt(){return this.Rwt}xwt(t){this.Rwt=t}gwt(t){this.Ewt[this.Rwt].gwt(t)}wwt(t){this.Ewt[this.Rwt].wwt(t)}Dwt(){return this.Nwt}Bwt(t){this.Nwt=t}Zvt(t,e){if(e<32||e>127)return;let i="";switch(t){case 0:i=void 0!==Rq[e]?Rq[e]:String.fromCharCode(e);break;case 1:i=Cq[e];break;case 2:this.Lwt(),i=xq[e];break;case 3:this.Lwt(),i=Dq[e]}i&&this.Ewt[this.Rwt].addParsedChar(i)}Lwt(){this.Ewt[this.Rwt].mwt()}Owt(t,e,i){if(t>=e)for(let s=i-1;s>=0;s--)this.Ewt[t+s]=this.Ewt[e+s];else for(let s=0;s<i;s++)this.Ewt[t+s]=this.Ewt[e+s]}Mwt(t,e){for(let i=0;i<=e;i++)this.Ewt[t+i]=new Eq}Pwt(){this.Mwt(0,aa)}Fwt(){this.Rwt=this.Nwt>0?this.Nwt:0,this.Pwt()}Uwt(t){this.Hwt=t}Vwt(t){this.Wwt=t}qwt(t){this.zwt=t}Xwt(t){this.Gwt=t}constructor(t,e){this.Ewt=new Array(aa+1);for(let t=0;t<=aa;t++)this.Ewt[t]=new Eq;this.Rwt=1,this.Nwt=0,this.Swt=t,this.kwt=e,this.Hwt=!1,this.Wwt=!1,this.zwt=Ys,this.Gwt=Sq,this.ir()}},aa=15;!function(t){t[t.Qwt=0]="Qwt",t[t.Kwt=1]="Kwt",t[t.jwt=2]="jwt",t[t.Ywt=3]="Ywt"}(sn||(sn={}));var Pq,Rq={39:"\u2019",42:"\xe1",92:"\xe9",94:"\xed",95:"\xf3",96:"\xfa",123:"\xe7",124:"\xf7",125:"\xd1",126:"\xf1",127:"\u2588"},Cq={48:"\xae",49:"\xb0",50:"\xbd",51:"\xbf",52:"\u2122",53:"\xa2",54:"\xa3",55:"\u266a",56:"\xe0",57:"\u2800",58:"\xe8",59:"\xe2",60:"\xea",61:"\xee",62:"\xf4",63:"\xfb"},xq={32:"\xc1",33:"\xc9",34:"\xd3",35:"\xda",36:"\xdc",37:"\xfc",38:"\u2018",39:"\xa1",40:"*",41:"'",42:"\u2500",43:"\xa9",44:"\u2120",45:"\xb7",46:"\u201c",47:"\u201d",48:"\xc0",49:"\xc2",50:"\xc7",51:"\xc8",52:"\xca",53:"\xcb",54:"\xeb",55:"\xce",56:"\xcf",57:"\xef",58:"\xd4",59:"\xd9",60:"\xf9",61:"\xdb",62:"\xab",63:"\xbb"},Dq={32:"\xc3",33:"\xe3",34:"\xcd",35:"\xcc",36:"\xec",37:"\xd2",38:"\xf2",39:"\xd5",40:"\xf5",41:"{",42:"}",43:"\\",44:"^",45:"_",46:"|",47:"~",48:"\xc4",49:"\xe4",50:"\xd6",51:"\xf6",52:"\xdf",53:"\xa5",54:"\xa4",55:"\u2502",56:"\xc5",57:"\xe5",58:"\xd8",59:"\xf8",60:"\u250c",61:"\u2510",62:"\u2514",63:"\u2518"},he=class{ir(){this.Zwt=!0,this.Jwt=0,this.vJ=0,this.$wt=this.tmt,this.emt=void 0,this.tmt.ir(),this.imt.ir(),this.smt.ir()}nmt(t,e){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&t)<<1|e>>5&1]}rmt(t,e){const i=this.nmt(t,e),s=(30&e)>>1;let n=Ys,r=!1;s<7?n=Oq[s]:7===s&&(r=!0);const h=1==(1&e);if(4===this.vJ)return;const o=this.$wt;if(3===this.vJ&&i!==o.Cwt()){const t=1+o.Cwt()-o.Dwt(),e=1+i-o.Dwt();o.Owt(e,t,o.Dwt()),o.Mwt(0,e-1),o.Mwt(i+1,aa-i)}o.xwt(i);const a=sN[t<<1&14|e>>5&1]-1;if(a<0)return;const u=function(t,e){const i=e>95?e-96:e-64;return{K3:iN[i].K3,Q3:iN[i].Q3,j3:iN[i].j3,o4:t}}(a,e);o.gwt(u.j3),this.$wt.Uwt(h),this.$wt.Vwt(r),this.$wt.qwt(n),this.$wt.Xwt(Sq)}hmt(t,e){this.$wt.Uwt(!1),this.$wt.Vwt(!1),this.$wt.qwt(Ys);const i=this.omt(t,sn.Qwt," ".charCodeAt(0));let s=Ys,n=!1;const r=1==(1&e);return s=Oq[(14&e)>>1],"white_italics"===s&&(s="white",n=!0),this.$wt.Uwt(r),this.$wt.Vwt(n),this.$wt.qwt(s),i}omt(t,e,i){if(this.$wt.Zvt(e,i),2===this.vJ||3===this.vJ){const e=this.amt(this.$wt,this.Jwt,t);return this.Jwt=t,e}return null}amt(t,e,i){return this.Zwt?null:2===this.vJ||3===this.vJ?t.Twt(i,i+10):t.Twt(e,i)}umt(t,e){let i=Sq;0==(7&t)&&(i=Lq[(14&e)>>1]),this.$wt.Xwt(i)}cmt(t){const e=Nq,i=t.lmt,s=t.dmt;let n=null;switch(i){case e.RCL:this.fmt();break;case e.BS:this._mt();break;case e.AOD:case e.AON:case e.DER:break;case e.RU2:n=this.gmt(2,s);break;case e.RU3:n=this.gmt(3,s);break;case e.RU4:n=this.gmt(4,s);break;case e.FON:n=this.vmt(s);break;case e.RDC:this.wmt(s);break;case e.TR:this.mmt();break;case e.RTD:this.pmt();break;case e.EDM:n=this.ymt(s);break;case e.CR:n=this.Amt(s);break;case e.ENM:this.bmt();break;case e.EOC:n=this.Tmt(s)}return n}Amt(t){const e=this.$wt;if(3!==this.vJ)return null;const i=this.amt(e,this.Jwt,t),s=e.Cwt()-e.Dwt()+1;return e.Owt(s-1,s,e.Dwt()),e.Mwt(0,s-1),e.Mwt(e.Cwt(),aa-e.Cwt()),this.Jwt=t,i}gmt(t,e){this.$wt=this.tmt;const i=this.$wt;let s=null;return 3!==this.vJ&&4!==this.vJ&&(s=this.amt(i,this.Jwt,e),this.tmt.Fwt(),this.imt.Fwt(),this.Zwt=!1,i.xwt(aa)),this.vJ=3,i.Bwt(t),s}vmt(t){return this.omt(t,sn.Qwt," ".charCodeAt(0))}ymt(t){const e=this.tmt;let i=null;return 4!==this.vJ&&(i=this.amt(e,this.Jwt,t)),e.Pwt(),this.Zwt=!1,i}wmt(t){this.vJ=2,this.$wt=this.tmt,this.$wt.Bwt(0),this.Jwt=t}bmt(){this.imt.Pwt()}Tmt(t){let e=null;4!==this.vJ&&(e=this.amt(this.tmt,this.Jwt,t));const i=this.imt;return this.imt=this.tmt,this.tmt=i,this.fmt(),this.Jwt=t,e}fmt(){this.vJ=1,this.$wt=this.imt,this.$wt.Bwt(0)}_mt(){this.$wt.Lwt()}mmt(){this.smt.ir(),this.Zwt=!1,this.pmt()}pmt(){this.$wt=this.smt,this.vJ=4}Smt(t,e,i){return this.$wt.Zvt(sn.Qwt,e),this.omt(t,sn.Qwt,i)}kmt(t,e,i){const s=1&e?sn.Ywt:sn.jwt;return this.omt(t,s,i)}Emt(t){const e=t.Imt,i=t.lmt,s=t.dmt;if(this.emt===(e<<8|i))return this.emt=void 0,null;if(this.emt=e<<8|i,this.Pmt(e,i))this.rmt(e,i);else{if(this.Rmt(e,i))return this.hmt(s,i);if(this.Cmt(e,i))this.umt(e,i);else{if(this.xmt(e,i))return this.omt(s,sn.Kwt,i);if(this.Dmt(e,i))return this.kmt(s,e,i);if(this.Nmt(e,i))return this.cmt(t);this.isTabOffset(e)&&this.$wt.wwt(i-32)}}return null}isTabOffset(t){return 23===t||31===t}Nmt(t,e){return 20==(246&t)&&32==(240&e)}Pmt(t,e){return 16==(240&t)&&64==(192&e)}Rmt(t,e){return 17==(247&t)&&32==(240&e)}Cmt(t,e){return 16==(247&t)&&32==(240&e)||23==(247&t)&&45==(255&e)}xmt(t,e){return 17==(247&t)&&48==(240&e)}Dmt(t,e){return 18==(246&t)&&32==(224&e)}static Bmt(t){return 16==(112&t)}constructor(t,e){this.vJ=0,this.smt=new Iq(t,e),this.tmt=new Iq(t,e),this.imt=new Iq(t,e),this.$wt=this.tmt,this.Jwt=0,this.emt=void 0,this.Zwt=!1}},Nq={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47};!function(t){t[t.$M=0]="$M",t[t.Lmt=1]="Lmt",t[t.Omt=2]="Omt",t[t.Mmt=3]="Mmt",t[t.KT=4]="KT"}(Pq||(Pq={}));var Bq,Lq=["black","green","blue","cyan","red","yellow","magenta","black"],Oq=["white","green","blue","cyan","red","yellow","magenta","white_italics"],Mq=class{lwt(){return this.Fmt}Umt(){return this.Hwt}Hmt(){return this.Wwt}Vmt(){return this.Gwt}Wmt(){return this.zwt}constructor(t,e,i,s,n){this.Fmt=t,this.Hwt=e,this.Wwt=i,this.Gwt=s,this.zwt=n}},Fq=class{qmt(t,e,i,s,n,r,h){this.oF=t,this.zmt=e,this.Xmt=i,this.Gmt=s,this.Qmt=n,this.Kmt=r,this.jmt=h}Ymt(){this.Zmt=[];for(let t=0;t<Hq;t++)this.Zmt.push(this.Jmt())}Jmt(){const t=[];for(let e=0;e<Uq;e++)t.push(null);return t}$mt(t){this.tpt()&&(this.Zmt[this.Rwt][this.ept]=new Mq(t,this.Hwt,this.Wwt,this.Gwt,this.zwt),this.ept++)}ipt(){this.tpt()&&(this.ept<=0&&this.Rwt<=0||(this.ept<=0?(this.ept=this.jmt-1,this.Rwt--):this.ept--,this.Zmt[this.Rwt][this.ept]=null))}tpt(){const t=this.Rwt<this.Kmt&&this.Rwt>=0,e=this.ept<this.jmt&&this.ept>=0;return t&&e}spt(){return this.oF}npt(t){let e=0;for(let i=t;i<Hq;i++,e++)this.Zmt[e]=this.Zmt[i];for(let i=0;i<t;i++,e++)this.Zmt[e]=this.Jmt()}rpt(){if(this.Rwt+1>=this.Kmt)return this.npt(1),void(this.ept=0);this.Rwt++,this.ept=0}hpt(){this.Zmt[this.Rwt]=this.Jmt(),this.ept=0}Twt(t,e){if(this.US>=t)return null;const i=Tq.cwt(this.Zmt,this.US,t);return i?(this.opt(t),{IS:i,BW:"svc"+e,Iwt:e}):null}apt(t,e){this.Rwt=t,this.ept=e}upt(t){this.Gwt=t}cpt(t){this.zwt=t}lpt(t){this.Hwt=t}dpt(t){this.Wwt=t}fpt(){this.Rwt=0,this.ept=0,this.Hwt=!1,this.Wwt=!1,this.zwt=Ys,this.Gwt=Sq}_pt(t){this.gpt=t}vpt(){this.oF=!0}ke(){this.oF=!1}jh(){this.oF=!this.oF}opt(t){this.US=t}constructor(t){this.wpt=t,this.oF=!1,this.Qmt=!1,this.Xmt=0,this.zmt=0,this.Gmt=0,this.Kmt=0,this.jmt=0,this.gpt=2,this.Zmt=[],this.US=0,this.Rwt=0,this.ept=0,this.Wwt=!1,this.Hwt=!1,this.zwt=Ys,this.Gwt=Sq,this.Ymt()}};!function(t){t[t.mpt=0]="mpt",t[t.ppt=1]="ppt",t[t.ypt=2]="ypt",t[t.Apt=3]="Apt"}(Bq||(Bq={}));var Uq=42,Hq=15,Vq=class{bpt(t){const e=t.Tpt();let i=e.kT;const s=e.dmt;if(i===Gq){i=i<<16|t.Tpt().kT}return i>=0&&i<=31?this.Spt(i,s):i>=128&&i<=159?this.kpt(t,i,s):(i>=4096&&i<=4127?this.Ept(t,255&i):i>=4224&&i<=4255?this.Ipt(t,255&i):i>=32&&i<=127?this.Ppt(i):i>=160&&i<=255?this.Rpt(i):i>=4128&&i<=4223?this.Cpt(255&i):i>=4256&&i<=4351&&this.xpt(255&i),null)}Ppt(t){this.Dpt&&(127!==t?this.Dpt.$mt(String.fromCharCode(t)):this.Dpt.$mt("\u266a"))}Rpt(t){this.Dpt&&this.Dpt.$mt(String.fromCharCode(t))}Cpt(t){if(!this.Dpt)return;if(void 0===Qq[t])return void this.Dpt.$mt("_");const e=Qq[t];this.Dpt.$mt(e)}xpt(t){this.Dpt&&(160===t?this.Dpt.$mt("[CC]"):this.Dpt.$mt("_"))}Spt(t,e){if(!this.Dpt)return null;const i=this.Dpt;let s=null;switch(t){case Wq:i.ipt();break;case zq:i.spt()&&(s=i.Twt(e,this.Npt)),i.rpt();break;case Xq:i.spt()&&(s=i.Twt(e,this.Npt)),i.hpt();break;case qq:i.spt()&&(s=i.Twt(e,this.Npt)),i.Ymt(),i.apt(0,0)}return s}kpt(t,e,i){if(e>=128&&e<=135){const t=7&e;this.Bpt(t)}else{if(136===e){const e=t.Tpt().kT;return this.Lpt(e,i)}if(137===e){const e=t.Tpt().kT;this.Opt(e,i)}else{if(138===e){const e=t.Tpt().kT;return this.Mpt(e,i)}if(139===e){const e=t.Tpt().kT;return this.Fpt(e,i)}if(140===e){const e=t.Tpt().kT;return this.Upt(e,i)}if(143===e)return this.ir(i);if(144===e)this.Hpt(t);else if(145===e)this.Vpt(t);else if(146===e)this.apt(t);else if(151===e)this.Wpt(t);else if(e>=152&&e<=159){const s=(15&e)-8;this.qmt(t,s,i)}}}return null}Ept(t,e){e>=8&&e<=15?t.zy(1):e>=16&&e<=23?t.zy(2):e>=24&&e<=31&&t.zy(3)}Ipt(t,e){e>=128&&e<=135?t.zy(4):e>=136&&e<=143&&t.zy(5)}Bpt(t){this.qpt[t]&&(this.Dpt=this.qpt[t])}*zpt(t){for(let e=0;e<8;e++){1==(1&t)&&this.qpt[e]&&(yield e),t>>=1}}Lpt(t,e){let i=null;for(const s of this.zpt(t)){const t=this.qpt[s];t.spt()&&(i=t.Twt(e,this.Npt)),t.Ymt()}return i}Opt(t,e){for(const i of this.zpt(t)){const t=this.qpt[i];t.spt()||t.opt(e),t.vpt()}}Mpt(t,e){let i=null;for(const s of this.zpt(t)){const t=this.qpt[s];t.spt()&&(i=t.Twt(e,this.Npt)),t.ke()}return i}Fpt(t,e){let i=null;for(const s of this.zpt(t)){const t=this.qpt[s];t.spt()?i=t.Twt(e,this.Npt):t.opt(e),t.jh()}return i}Upt(t,e){let i=null;for(const s of this.zpt(t)){const t=this.qpt[s];t.spt()&&(i=t.Twt(e,this.Npt)),this.qpt[s]=void 0}return i}ir(t){const e=this.Upt(255,t);return this.NC(),e}NC(){this.Dpt=void 0,this.qpt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0]}Hpt(t){t.zy(1);const e=t.Tpt().kT;if(!this.Dpt)return;const i=(128&e)>0,s=(64&e)>0;this.Dpt.dpt(i),this.Dpt.lpt(s)}Vpt(t){const e=t.Tpt().kT,i=t.Tpt().kT;if(t.zy(1),!this.Dpt)return;const s=3&e,n=(12&e)>>2,r=(48&e)>>4,h=3&i,o=(12&i)>>2,a=(48&i)>>4,u=this.Xpt(r,n,s),c=this.Xpt(a,o,h);this.Dpt.cpt(u),this.Dpt.upt(c)}apt(t){const e=t.Tpt().kT,i=t.Tpt().kT;if(!this.Dpt)return;const s=15&e,n=63&i;this.Dpt.apt(s,n)}Wpt(t){t.zy(1),t.zy(1);const e=t.Tpt().kT;if(t.zy(1),!this.Dpt)return;const i=3&e;this.Dpt._pt(i)}qmt(t,e,i){const s=void 0!==this.qpt[e];if(!s){const t=new Fq(e);t.opt(i),this.qpt[e]=t}const n=t.Tpt().kT,r=t.Tpt().kT,h=t.Tpt().kT,o=t.Tpt().kT,a=t.Tpt().kT,u=t.Tpt().kT,c=(32&n)>0,l=127&r,d=(128&r)>0,f=h,_=1+(15&o),g=(240&o)>>4,v=1+(63&a);s&&0===(7&u)||this.qpt[e].fpt(),this.qpt[e].qmt(c,l,f,g,d,_,v),this.Dpt=this.qpt[e]}Xpt(t,e,i){const s={0:0,1:0,2:1,3:1};return Kq[s[t]<<2|s[e]<<1|s[i]]}constructor(t){this.Npt=t,this.qpt=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],this.Dpt=void 0}},Wq=8,qq=12,zq=13,Xq=14,Gq=16,Qq={32:" ",33:"\xa0",37:"\u2026",42:"\u0160",44:"\u0152",48:"\u2588",49:"\u2018",50:"\u2019",51:"\u201c",52:"\u201d",53:"\u2022",57:"\u2122",58:"\u0161",60:"\u0153",61:"\u2120",63:"\u0178",118:"\u215b",119:"\u215c",120:"\u215d",121:"\u215e",122:"\u2502",123:"\u2510",124:"\u2514",125:"\u2500",126:"\u2518",127:"\u250c"},Kq=["black","blue","green","cyan","red","magenta","yellow","white"],jq=class{Gpt(t){if(t.Iw===du.Evt){const e=63&t.kT;return this.Qpt=2*e-1,void(this.Kpt=[])}if(this.Kpt&&(this.Qpt>0&&(this.Kpt.push(t),this.Qpt--),0===this.Qpt)){const t=new Yq(this.Kpt);this.jpt.push(t),this.Kpt=null,this.Qpt=0}}Ypt(){return this.jpt}Zpt(){this.jpt=[]}NC(){this.jpt=[],this.Kpt=[],this.Qpt=0}constructor(){this.jpt=[],this.Kpt=null,this.Qpt=0}},Yq=class{Gnt(){return this.Jpt<this.$pt.length}tyt(){return this.Jpt}Tpt(){if(!this.Gnt())throw new jr(n.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");return this.$pt[this.Jpt++]}zy(t){if(this.Jpt+t>this.$pt.length)throw new jr(n.SUBTITLE_PARSE_ERROR,"Buffer read out of bounds / invalid CEA-708 Data.");this.Jpt+=t}constructor(t){this.Jpt=0,this.$pt=t}},Zq=class{NC(){this.eyt=0,this.iyt=[],this.syt=[],this.nyt.NC(),this.ir(),this.ryt.forEach((t=>{t.NC()}))}ir(){this.hyt=0,this.oyt=0,this.ayt.forEach((t=>{t.ir()}))}uyt(t,e){if(t.xvt){const i=t.Nvt,s=t.Bvt,n=t.Iw;n===du.yvt||n===du.Avt?this.iyt.push({dmt:e,Iw:n,Imt:i,lmt:s,cyt:this.iyt.length}):this.lyt&&(this.syt.push({dmt:e,Iw:n,kT:i,cyt:this.syt.length}),this.syt.push({dmt:e,Iw:du.Svt,kT:s,cyt:this.syt.length}))}}lH(){const t=[];this.iyt.sort(((t,e)=>t.dmt-e.dmt||t.cyt-e.cyt)),this.syt.sort(((t,e)=>t.dmt-e.dmt||t.cyt-e.cyt));for(const e of this.iyt){const i=this.dyt(e);i&&t.push(i)}for(const t of this.syt)this.nyt.Gpt(t);const e=this.nyt.Ypt();for(const i of e){const e=this.fyt(i);t.push(...e)}return this.nyt.Zpt(),this.iyt=[],this.syt=[],t}dyt(t){const e=t.Iw;if(he.Bmt(t.Imt)){const i=t.Imt>>3&1;0===e?this.hyt=i:this.oyt=i}const i="CC"+(e<<1|(e?this.oyt:this.hyt)+1),s=this.ayt.get(i);return 255===t.Imt&&255===t.lmt||!t.Imt&&!t.lmt||!this._yt(t.Imt)||!this._yt(t.lmt)?(++this.eyt>=45&&this.ir(),null):(this.eyt=0,t.Imt&=127,t.lmt&=127,t.Imt||t.lmt?he.Bmt(t.Imt)?s.Emt(t):s.Smt(t.dmt,t.Imt,t.lmt):null)}fyt(t){const e=[];try{for(;t.Gnt();){const i=t.Tpt().kT;let s=(224&i)>>5;const n=31&i;if(7===s&&0!==n){s=63&t.Tpt().kT}if(0!==s){if(!this.ryt.has(s)){const t=new Vq(s);this.ryt.set(s,t)}const i=this.ryt.get(s),r=t.tyt();for(;t.tyt()-r<n;){const s=i.bpt(t);s&&e.push(s)}}}}catch(t){if(!(t instanceof jr&&t.code===n.SUBTITLE_PARSE_ERROR))throw t}return e}_yt(t){let e=0;for(;t;)e^=1&t,t>>=1;return 1===e}constructor(){this.lyt=!1,this.iyt=[],this.syt=[],this.nyt=new jq,this.eyt=0,this.ayt=g_({CC1:new he(0,0),CC2:new he(0,1),CC3:new he(1,0),CC4:new he(1,1)}),this.hyt=0,this.oyt=0,this.ryt=Yh(),this.ir()}},Jq=class extends Xi{constructor(t,e){super("gyt"),this.Iwt=t,this.IS=e}},$q=yi.fE(.1),tz=class extends Et{vyt(t,e){this.wyt.uyt(t,e)}lH(){const t=this.wyt.lH();for(const e of t)this.To(new Jq(e.Iwt,e.IS))}ir(){this.wyt.NC()}bn(){this.Lo(),this.wyt.NC()}constructor(){super(),this.wyt=new Zq}},ez=class extends tz{myt(t,e,i,s){const n=this.pyt(t,s);this.yyt(n,e,i),this.lH()}pyt(t,e){const i=t.slice().sort(nN),s=this.Ayt;if(0===s.length)return i;if(0===i.length)return s;let n;const r=s[0].Y3,h=s[s.length-1].Y3,o=i[0].Y3,a=s[0].$it===i[0].$it;if(h.Ak(o).wk().vk(yi.fE(2.5*e))&&a)n=s.concat(i).sort(nN);else if(o.dk(r)){let t=0;for(;t<s.length&&s[t].Y3.vk(o);)t++;let e=!1,r=!1;for(let n=t,h=0;n<s.length&&h<i.length;n++,h++)iz(s[n],i[h])?e=!0:r=!0;const h=e&&!r,a=e&&r;!e&&r?n=s.concat(i).sort(nN):h?n=s.slice(0,t).concat(i):(n=i,a&&this.ir())}else n=i,this.ir();return n}yyt(t,e,i){for(let s=0;s<t.length;s++){const n=t[s],r=n.Y3.hk();if(!i&&e-r<$q.hk())return void(this.Ayt=t.slice(s));this.vyt(n,r)}this.Ayt=[]}constructor(...t){super(...t),this.Ayt=[]}};function iz(t,e){return t.Y3.GS(e.Y3)&&t.Iw===e.Iw&&t.Nvt===e.Nvt&&t.Bvt===e.Bvt}var Hn=class extends Cu{byt(t){return this.Tyt.get(t)}Syt(t){let e=this.Tyt.get(t.Z3);return e||(e=this.kyt(t),this.Tyt.set(t.Z3,e)),e}kyt(t){const e=[zc._w],i=uq(t.J3);let s,n=i?i.l:"";t.Eyt&&(n="easy "+n,e.push(zc.pw)),s=t._h?"CC "+t._h:n?"CC "+n:"CC"+t.Z3;const r=this.lP.cP(bt.fI,s,s,t.J3,!1,Ca.CEA608,void 0,e);return this.tt(r),r}Ult(t){const e=Ue.uA(Sa(t));this.Iyt=function(t){for(const e of t.Z){const t=gq(e),i=e.NA.zA.QA.jA.ZA;let s=pi(i,(t=>t.Iw===hs.Dp));if(!s){const t=i.filter((t=>t.Iw===hs.jp)),e=pi(t,(t=>{var e;return(null==(e=t.Xb)?void 0:e.Iw)===hs.Dp}));e&&(s=e.Xb)}if(!s)continue;const n=RR(Sa(s.Db.Ny),new Ko),r=s.Bb;return Me({},t,{MA:e.eA.MA,Db:ew(s.Db.Ny),Ti:s.Ti,Ci:s.Ci,iT:r&&r.iT,eT:r&&r.eT,_j:n.qQ,Pyt:n.zQ,gj:n.XQ,QQ:n.QQ[0],KQ:n.KQ[0]})}}(pi(e,vq))}tut(t,e,i,s,n,r){var h;if(!this.Iyt)return;if(!j(this.Ent)&&au(this.Ent,e,1e-5))return;j(this.Ryt)||au(this.Ryt,e,.1)||this.Cyt.ir();const o=function(t,e,i,s,n){const r=[],h=e.filter(dq),o=s(i);for(const e of h){const s=pi(e.Z,(t=>t.eA.MA===i.MA));if(!s)continue;const h=s.eA.rT||0,u=s.eA.hT||0;let c=s.vT?s.vT.vT:Te.ZERO;var a;const l=e.cT+(null!=(a=s.eA.wT)?a:Te.ZERO).toNumber();for(const a of s.gT){let s=l+(a.cT||0);for(const l of a.bT){const a=l.iA||u,d=new DR;d.aK(t,s,s+a);const f=yi.Ek(c,i.Fvt);d.WE=n(l,e,i,f,Qu(t,s,s+a)),r.push(d),s+=a,c=c.add(l.ct||h||o)}}}return r}(t,Ue.uA(Sa(t)),this.Iyt,lq,_q);var a;const u=null!=(a=null==(h=c_(o,(t=>t.WE.ct)))?void 0:h.WE.ct)?a:0,c=function(t){const e=[];for(const i of t)i.WE.Gvt&&e.push(...i.WE.Gvt),delete i.WE.Gvt;for(let t=0;t<e.length;t+=1)e[t].lT=t;return e}(o),l=yi.fE(s),d=[];for(const t of c)d.push(Me({},t,{$it:n,Y3:t.Rvt.fS(l)}));this.Cyt.myt(d,i,r,u),this.Ent=e,this.Ryt=i}ir(){return this.Cyt.ir(),this.Tyt.forEach((t=>{t.bn(),this.it(t),this.lP.mP(t)})),this.Tyt.clear(),this.Iyt=void 0,this.Ent=NaN,this.Ryt=NaN,super.ir()}bn(){return this.Cyt.pn("gyt",this.xyt),this.Cyt.bn(),super.bn()}constructor(t){super(),this.Iyt=void 0,this.Ent=NaN,this.Ryt=NaN,this.xyt=t=>{const e=this.Syt({Z3:t.Iwt,J3:""}),i=t.IS;for(const t of e.L.Kv)i.PS<t.PS&&i.RS>t.PS?i.RS=t.PS:i.PS>t.PS&&t.RS>i.PS?t.RS=i.PS:i.PS===t.PS&&(i.RS=t.RS);e.vP(i)},this.lP=t,this.Tyt=Yh(),this.Cyt=new ez,this.Cyt.wn("gyt",this.xyt)}},sz=/(.*)=(.*)/,nz=/(.*):(.*)/;function rz(t){if(!t)return[];const e=[],i=t.trim().split(";");for(const t of i){const i=t.match(sz);if(i){const[,t,s]=i;let n="",r=!1;for(const t of s.trim().split(","))if(t.match(nz)){const[,e,i]=t.match(nz);switch(e){case"lang":n=i;break;case"er":r=Boolean(Number(i))}}e.push({Z3:Number(t),J3:n,Eyt:r})}}return e}var hz={1:1,2:3,3:2,4:4},oz="urn:scte:dash:cc:cea-608:2015",az="urn:scte:dash:cc:cea-708:2015";var uz=class extends la{pa(){return new cz(this.$it&&this.$it.ma)}constructor(t,e,i){super(ze.zv),this.$it=t,this.c_t=e,this.Dyt=i}},cz=class extends Xi{constructor(t){super("activequalitychanged"),this.quality=t}},lz=[o.Ph,ee.Bf,o.Lu],dz=class extends Et{Nyt(t){const e=this.Wgt.Udt;for(const i of e.Ht.sit)if(e.x_t.I_t(t,i))return i}bn(){this.Lo(),this.KO.pn(lz,this.Byt)}constructor(t,e){super(),this.Byt=t=>{const e=this.Lyt,i=this.Nyt(t.currentTime)||this.Wgt.Ldt;i&&e!==i&&(this.Lyt=i,i.$it&&this.To(new uz(i.$it,null==i?void 0:i.ma,null==e?void 0:e.ma)))},this.KO=t,this.KO.wn(lz,this.Byt),this.Wgt=e}},fz=class extends Et{get Xht(){return this.Ght}get o(){return this.wS}get PY(){return this.RY}get nt(){return this.Oyt}get Iet(){return function(t){const e=29.97,i=1024,s=44100;return t===Di.yy?s/i:e}(this.RY)}get qgt(){return 1/this.Iet}get Rt(){return Boolean(this.Ght&&this.Ght.Rt)}get hG(){const t=this.Wgt?this.Wgt.Udt.hG.S_t:d.Nl();return this.Myt().Hl(t)}get bl(){let t=this.Fyt();const e=this.Uyt;return void 0!==e&&t.gF().br(e)&&(t=t.Hl(d.OF(e))),t}get p_t(){return VV(this.Fyt(),this.hG.Hl(this.Hyt)).yF(2*this.qgt)}get Hyt(){const t=this.Uyt;if(t&&isFinite(t)){const e=this.Vyt.Pn;if(isFinite(e)&&t<e)return new d([t,e],[!1,!0])}return d.Nl()}get kl(){const t=this.Ght;if(!t)return d.OF(0);const e=t.qit.pst,i=t.qit.mst;if(void 0===i||void 0===e)return d.OF(0);const s=i;let n=e>=t.qit.Jit.Pn?w.max(e,this.Pn):e;return n=w.max(s,n),d.MF(s,n).gF()}get QO(){return this.p_t.BF(this.Wu)}get T_t(){return this.Vyt.T_t}get Wu(){return this.KO.Wu}get Tn(){return this.Ght?this.Ght.qit.Jit.Tn:NaN}get Pn(){const t=this.Wyt(),e=this.Uyt;return void 0===t?NaN:void 0!==e?e:t}Wyt(){var t;return null==(t=this.Ght)?void 0:t.qit.Jit.Pn}get Ci(){return this.Vyt.Ci}get Ti(){return this.Vyt.Ti}get rvt(){return this.Uyt}jdt(){return void 0!==this.Wgt&&this.Wgt.jdt}b_t(){if(void 0===this.Uyt)return!1;const t=this.Fyt().gF(),e=t.TF(this.Uyt);return!(e<0)&&t.Tn(e)!==this.Uyt}EY(){const t=this.Vyt.T_t,e=this.Fyt().Cn(t);this.Uyt=e.U>0?e.Pn(e.U-1):0;const i=t.Pn(0);isFinite(i)&&this.Uyt<i&&this.aG(this.Uyt,i),this.evt()}async tut(t,e,i,s){const n=i.met.NE,r=this.qyt(t,e,i,n,s),h=this.zyt(t,e,i,n,s),[o]=await so([h,r]);return o}async qyt(t,e,i,s,n){if(!lt(i.aV))return;let r;if(t.Iw===F.FI){const e=t.Ny.Uft(),i=await e.xL(n);r=new x(i)}else r=new x(t.Ny._dt);const h=[];if(void 0!==this.blt&&(this.blt.tut(r,e.PS,s),h.push(this.blt)),void 0!==this.Xyt){const t=i.fst(e);this.Xyt.tut(r,e.PS,e.RS,s,i.$it,t),h.push(this.Xyt)}Dy(this.bl,h)}Ult(t,e,i){return k_(i),this.Xyt&&this.Xyt.Ult(new x(t._dt)),Promise.resolve()}On(t,e){const i=new Hi;e&&i.U_(e),this.wP.Jl(),this.wP=i;const s=this.Gyt(t,this.cvt,i.M_);return this.cvt=s,s}Qyt(t){if(Bc(this._lt,Ca.CEA608))return;const e=t.qit.Get;if(function(t){return t.some((t=>t.tet===oz||t.tet===az))}(e)){this.Xyt=new Hn(this.lP);const t=function(t){const e=[];for(const i of t)if(i.tet===oz){const t=hN(i.kT);for(const i of t)e.push(i)}else if(i.tet===az){const t=rz(i.kT);for(const i of t)if(i.Z3<=4){const t=hz[i.Z3];e.push(Me({},i,{Z3:t}))}}return e}(e);for(const e of t)this.Xyt.Syt(e);this.Oyt.MO(this.Xyt.Z)}}async Gyt(t,e,i){k_(i),e&&await e.catch(Qo),this.Ght===t&&this.Kyt||(await this.jyt(),k_(i),await this.Yyt(),k_(i),t&&await this.dP(t))}async jyt(){const t=this.Ght;this.Ght=void 0,this.Kyt=!1,this.Uyt=void 0,t&&(t.pn(ze.Gv,this.Zyt),t.oot(!1),t.pn(ze.NO_QUALITY,this.Os)),this.Jyt&&(this.Jyt.bn(),this.Jyt=void 0),this.Wgt&&(await this.Wgt.bn(),this.Wgt=void 0),this.Xyt&&(this.Oyt.HO(this.Xyt.Z),await this.Xyt.bn())}async dP(t){this.Ght=t,this.Qyt(t),t.wn(ze.Gv,this.Zyt),t.wn(ze.NO_QUALITY,this.Os),await this.$yt(t),this.Wgt=this.tAt(t),this.Wgt.wn(JW,this.Os),this.Wgt.wn("Idt",this.evt),this.Wgt.Vdt=t.iot,this.Jyt=new dz(this.KO,this.Wgt),this.Jyt.wn(ze.zv,this.Jht),t.oot(!0),this.Kyt=!0}async ir(t){this.wP.Jl(),this.cvt&&(await this.cvt.catch(Qo),this.cvt=void 0),await this.jyt(),t||await this.Yyt(),await this.eAt()}async iAt(){await this.jyt()}sAt(t){this.Wgt&&this.Ght&&this.Ght===t.Ht&&(this.Wgt.Vdt=this.Ght.iot)}async Tut(t){this.Wgt&&await this.Wgt.Tut(t)}async Out(t){this.Wgt&&await this.Wgt.Out(t)}lz(){const t=this.bl.LF;return this.GF.lz(t)}async bn(t){this.Lo();try{await this.ir(t),await this.iAt()}catch(t){}}constructor(t,e,i,s,n,r,h,o,a,u,c){super(),this.Ght=void 0,this.Wgt=void 0,this.Kyt=!1,this.wP=new Hi,this.cvt=void 0,this.Uyt=void 0,this.Xyt=void 0,this.Oyt=new Uu([]),this.evt=()=>{!this.jdt()&&this.b_t()&&this.Vyt.evt()},this.Jht=t=>{this.Ght.Jht(t),this.To(new eq(t.c_t,t.Dyt))},this.Zyt=t=>{this.sAt(t)},this.wS=function(){const t=$W;return $W+=1,t}(),this.RY=t,this.fP=s,this.GF=n,this.Vyt=e,this.KO=i,this.Sat=r,this.lP=h,this.blt=o,this.fat=a,this.eat=a?Bw(t,a):void 0,this.pat=u,this._lt=c}};function _z(t,e,i){const s=new qn(Sa(t),new Ko),n=Ro.$y(s,hs.pp);if(!n)return;const r=Ro.Qy(n.Ny),h=pi(r,(t=>t.Iw===hs.Ap)),o=pi(r,(t=>t.Iw===hs.uy));if(!h)return;const a=Ro.$y(h.Ny,hs.Tp);if(!a)return;const u=Ro.$y(a.Ny,hs.Ep);if(!u)return;const c=Ro.$y(u.Ny,hs.Ip);if(!c)return;const l=Ro.Qy(c.Ny),d=pi(l,(t=>t.Iw===hs.Pp));if(!d)return;const f=Ro.hA(d.Ny,hs.Pp,!1),_=new qn(Sa(f.Ny),new Ko);_.zy(4);const g=Ro.Qy(_),v=[];for(const t of g){if(t.Iw===hs.Kp||t.Iw===hs.jp)return;t.Iw===hs.Dp?v.push({nAt:t,rAt:hs.jp}):t.Iw===hs.qp&&v.push({nAt:t,rAt:hs.Kp})}if(!function(t,e){return void 0===t&&void 0!==e&&e.length>0}(o,e)&&0===v.length)return;let w=A(t);const m=pi(r,(t=>t.Iw===hs.Cp)),p=m?Ro.$y(m.Ny,hs.xp):void 0,y=p?function(t){const e=t.Ny.Iy();return e.zy(4),e.zy(4),e.My()}(p):1,b=pi(l,(t=>t.Iw===hs.Rp));b&&function(t,e,i){const s=Iu(Sa(t),e),n=Ro.Jy(s,new Ko),r=n.Ny;r.zy(4);const h=r.My();for(let t=0;t<h;t++){r.zy(4),r.zy(4);const t=r.By.Iy(),e=r.My();Uc(r.Ny,t,e+i)}}(w,b,v.length),p&&function(t,e,i){const s=Iu(Sa(t),e),n=Ro.Jy(s,new Ko),r=n.Ny;r.zy(4),r.zy(4),Uc(r.Ny,r.By,i)}(w,p,1),w=function(t,e,i,s){if(i||!s)return t;let n=t;for(const t of s)n=gz(n,e,new x(t));return n}(w,n,o,e);const T=[n,h,a,u,c,d];for(let t=v.length-1;t>=0;t--){const e=v[t];w=vz(w,e.nAt,d,T,e.rAt,i)}return{hAt:w,oAt:{aAt:v.length,nT:y}}}function gz(t,e,i){const s=uv(t,i,e.Ny.Ny.byteOffset+e.Ny.Ny.byteLength);return wz(Iu(Sa(s),e),i.byteLength),s}function vz(t,e,i,s,n,r){const h=function(t,e,i){0;const s=t.Ny.Ny,n=bz(),r=new x(s.byteLength+n.byteLength),h=Sa(r);r.set(ou(s),0),wz(h,n.byteLength),zv(h,new Ko(kz),e),r.set(n,s.byteLength),zv(h,new Ko(s.byteLength+Tz),t.Iw),i&&sc(h,new Ko(s.byteLength+Sz),i);return r}(e,n,r),o=uv(t,h,e.Ny.Ny.byteOffset),a=Sa(o);!function(t,e){const i=Ro.Jy(t,new Ko),s=Ro.hA(i.Ny,hs.Pp,!1),n=Sa(s.Ny),r=n.getUint32(0);n.setUint32(0,r+e)}(Iu(a,i),1);for(const t of s)wz(Iu(a,t),h.byteLength);return o}function Iu(t,e){const i=e.Ny.Ny.byteOffset;return Li(t,i,i+e.Ny.Ny.byteLength)}function wz(t,e){const i=new Ko,s=As(t,i);if(0===s);else if(1===s){i.Ey(4);const s=St(t,i.Iy());Hv(t,i,s.add(e))}else i.gc(0),Uc(t,i,s+e)}var mz=class extends oR{start(t){this.lX=t}transform(t){this.BG(t),this.uAt()}flush(){this.OG(),this.uAt()}zG(t){return t===hs.Yp}GG(t){let e=A(ou(t.Ny.Ny));const i=Ro.Jy(Sa(e),new Ko);e=pz(e,i,this.cAt),this.lAt.push(e)}KG(t){this.lAt.push(t)}uAt(){for(const t of function(t){if(t.length<2)return t;const e=[];let{buffer:i,byteOffset:s,byteLength:n}=t[0];for(let r=1;r<t.length;r++){const h=t[r];i===h.buffer&&s+n===h.byteOffset?n+=h.byteLength:(e.push(new x(i,s,n)),({buffer:i,byteOffset:s,byteLength:n}=h))}return e.push(new x(i,s,n)),e}(this.lAt))this.lX.enqueue(t);Ce(this.lAt)}constructor(t){super(),this.lAt=[],this.cAt=t}};function pz(t,e,i){let s=t;const n=Ro.Qy(e.Ny);for(let t=n.length-1;t>=0;t--){const r=n[t];r.Iw===hs.Jp&&(s=yz(s,r,e,i))}return s}function yz(t,e,i,s){const n=Iu(Sa(t),e),r=Ro.Jy(n,new Ko),h=Ro.Qy(r.Ny),o=pi(h,(t=>t.Iw===hs.$p));if(!o)return t;const a=o.Ny,u=a.By.Iy(),c=a.My(),{flags:l}=Oc(c);a.zy(4),l.Ry(hu.BASE_DATA_OFFSET_PRESENT)&&a.zy(8);const d=a.By.Iy();if(l.Ry(hu.SAMPLE_DESCRIPTION_INDEX_PRESENT)){const e=As(a.Ny,d);return Uc(a.Ny,a.By,e+s.aAt),t}{Uc(a.Ny,u,c|hu.SAMPLE_DESCRIPTION_INDEX_PRESENT);const n=new x(4);Sa(n).setUint32(0,s.nT+s.aAt);const r=a.Ny.byteOffset+d.Au;for(const t of h.filter((t=>t.Iw===hs.ey)))Az(t,n.byteLength);for(const s of[o,e,i])wz(Iu(Sa(t),s),n.byteLength);return uv(t,n,r)}}function Az(t,e){const i=t.Ny,s=i.My(),{flags:n}=Oc(s);if(i.zy(4),n.Ry(O.DATA_OFFSET_PRESENT)){const t=i.Iy().My();Uc(i.Ny,i.By,t+e)}}var bz=S_((()=>new x([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]))),Tz=16,Sz=64,kz=4,Ez=class extends fz{Fyt(){return this.Mgt?this.Mgt.bl:d.Nl()}Myt(){return this.Mgt?this.Mgt.CY:d.Nl()}get Ti(){return this.Vyt.Ti}async zyt(t,e,i,s,n){var r;let h;if(k_(n),t.Iw===F.FI){let e=t.Ny.BW;this.dAt&&(e=function(t,e){return t.pipeThrough(new Ka(new mz(e)))}(e,this.dAt)),h={Iw:F.FI,Ny:e}}else{let e=new x(t.Ny._dt);this.dAt&&(e=function(t,e){let i=A(t);const s=new qn(Sa(i),new Ko),n=Ro.Qy(s);for(let t=n.length-1;t>=0;t--){const s=n[t];s.Iw===hs.Yp&&(i=pz(i,s,e))}return i}(e,this.dAt)),h={Iw:F.xX,Ny:e}}const o={m6:e.PS,ct:e.ct,NE:s,gj:null==(r=i.$it)?void 0:r.cw},a=this.Mgt.bl;await this.fAt(),await this.Mgt.Hj(h,o,n);return function(t,e,i,s){let n,r,h=e.bF(t.gF());return h=h.bF(i.bF(e)),0===h.U?(n=s.RS,r=n):(n=h.Tn(0),r=h.Pn(0)),{Pgt:n,Rgt:r}}(a,this.Mgt.bl,this.Mgt.CY,e)}async Ult(t,e,i){var s;await super.Ult(t,e,i);let n=new x(t._dt);if(this._At(e)){const t=this.Vyt.Fct;let e,i=[];t&&(i=Ga(t.Fat,(t=>t.BO)),e=t.Oat.nL?uI(t.Oat.nL):void 0);const s=_z(n,i,e);s?(this.dAt=s.oAt,n=s.hAt):this.dAt=void 0}const r={Iw:F.xX,Ny:n};await this.fAt(),await this.Mgt.qj(r,{gj:null==(s=e.$it)?void 0:s.cw},i)}ogt(t,e,i){return this.Mgt.Qu(t,e,i)}aG(t,e){this.Mgt.NY(t,e)}uG(t,e){this.Mgt.BY(t,e)}async $yt(t){var e;const i=Ks.wat(null!=(e=t.iot)?e:t.sit,this.eat).aV;this.Mgt||(this.Mgt=await this.Vyt.gAt(i),this.Mgt.wn(Ou.RX,this.Os),this.gat=new XW(this.Mgt)),await this.fAt()}sAt(t){const e=t.Ht.iot;if(void 0===e)return super.sAt(t);if(e.some((t=>this.gat.OX(t))))return super.sAt(t);this.To(new Xi("yct"))}eAt(){return this.Mgt&&(this.Mgt.pn(Ou.RX,this.Os),this.Mgt=void 0),Promise.resolve()}Yyt(){return this.Mgt?this.Mgt.Qu(0,1/0):Promise.resolve()}tAt(t){return new qW(this,this.KO,this.KO,this.fP,this.GF,this.Lgt,this.Sat,this.fat,this.eat,this.gat,this.pat).y6(t)}fAt(){const t=this.Vyt.T_t,e=w.max(0,t.Tn(0)-.1),i=t.Pn(0)+.01;return this.Mgt.sY(e,i)}_At(t){if(!lt(t.aV))return!1;if(this.Vyt.i0)return!0;return void 0!==this.Vyt.Fct}constructor(t,e,i,s,n,r,h,o,a,u,c,l){super(t,e,i,s,n,h,o,a,u,c,l),this.Mgt=void 0,this.gat=new GW,this.dAt=void 0,this.Lgt=r}},Iz=class extends ZW{get Ti(){return this.vAt.Ti}get Ci(){return this.vAt.Ci}get ct(){return this.KO.ct}get i0(){return this.KO.i0}async FX(t,e,i){this.uY!==i&&(this.uY=i,await this.nvt(!1)),await super.wvt(t,e)}gvt(t){return new Ez(t,this,this.KO,this.fP,this.GF,this.Lgt,this.Sat,this.lP,this.blt,this.Ect,this.pat,this._lt)}vvt(){}gAt(t){if(Jo(t,"audio")){if(this.uY.mZ)return Promise.resolve(this.uY.mZ)}else if(Jo(t,"video")&&this.uY.pZ)return Promise.resolve(this.uY.pZ);throw new v("Cannot allocate source buffer for mime type "+t)}bn(t){return this.KO.pn(o.Sm,this.mvt),super.bn(t)}constructor(t,e,i,s,n,r,h,a,u,c,l,d,f){super(i,s,n,t,r,h,a,c,d,f),this.vAt=u,this.uY=e,this.Lgt=r.lowLatency,this.blt=l,this.Ect=r.abr,this.KO.wn(o.Sm,this.mvt)}},Pz=class extends BV{uut(t,e,i,s,n,r){const h=this.KO,o=this.tM;return new Iz(h,o,t,e,i,s,n,r,this.wAt,h,this.blt,this.pat,this._lt)}Lut(t,e,i){return t.FX(e,i,this.tM)}Put(t){return!!this.tM&&this.tM.OX(t)}async yZ(t){this.tM=await this.KO.On(t),this.mAt(),this.pAt(),this.tM.EZ(this.ct)}async Uut(){this.yAt=this.jut,this.tM&&(await this.KO.ir(),this.tM=void 0)}EY(){this.tM.EY()}vY(){const t=this.ct;this.tM.ct<t&&this.tM.EZ(t),this.tM.vY()}async Kct(t){const e=this.tM,i=[];e.mZ&&i.push(ga(e.mZ,t)),e.pZ&&i.push(ga(e.pZ,t)),await Promise.all(i)}Nut(t){return this.tM.FX(t)}Uct(){return!0}get tct(){return this.KO.Dc}W0(){return this.KO.dl()}elt(){this.KO.jl()}get $u(){return this.KO.$u}set $u(t){this.KO.$u=t}get ect(){return this.KO.wl}be(){super.be(),this.KO.be()}ke(){super.ke(),this.KO.ke()}get nt(){return this.xu}get Xu(){return this.KO.Xu}set Xu(t){this.KO.Xu=t}get _l(){return this.KO._l}set _l(t){this.KO._l=xu(t,0,1)}Sct(t){for(const e of t)e.src&&this.gM.uP(e);Vy(this.gM.Z)}async clt(t,e,i,s){for(this.KO.gc(t,e,i);this.act||this.Bc;)await this.KO.eg([o.Tf,o.hm],s)}get act(){return this.KO.Fc}get Bc(){return this.KO.Bc}get jut(){return function(t,e){return{sS:t.sS+e.sS,nS:t.nS+e.nS,rS:t.rS+e.rS}}(this.yAt,this.KO.Rg())}mAt(){const t=this.tM;t&&(t.pZ&&(t.pZ.Qq=this.GF.sz),t.mZ&&(t.mZ.Qq=this.GF.sz))}pAt(){const t=this.tM;t&&(t.pZ&&(t.pZ.Zq=this.GF.Zq),t.mZ&&(t.mZ.Zq=this.GF.Zq))}ba(t,e,i){return this.cM.CO(t.contentProtection),super.ba(t,e,i)}determineStallJumpTarget(){if(this.but)return this.but.Bct()&&this.Wu>this.but.Pn-sC&&!this.but.Xut?this.but.Pn:void 0}async ir(){await super.ir(),this.yAt={sS:0,nS:0,rS:0},await this.gM.ir(),this.KO.vM()}async bn(){await super.bn(),await this.gM.bn(),this.xu.bn(),this.GF.pn("Gq",this.AAt),this.GF.pn("Yq",this.bAt),this.KO.pn(zn.aa,this.TAt),this.KO.pn([o.Gw,o.Xw],this.Os),this.KO.yM=void 0,this.KO.d2=void 0}constructor(t,e,i,s,n,r){super(t,e,i,s,n),this.tM=void 0,this.yAt={sS:0,nS:0,rS:0},this.TAt=t=>{this.OM(Ar(t.lt))},this.AAt=()=>{this.mAt()},this.bAt=()=>{this.pAt()},this.KO.wn(zn.aa,this.TAt),this.GF.wn("Gq",this.AAt),this.GF.wn("Yq",this.bAt),this.wAt=r,this.gM=new Oy(this.KO,this.fP),this.xu.MO(this.gM.Z),this.cM=new Tk(t),this.KO.yM=this.cM,this.KO.d2=this,this.KO.wn([o.Gw,o.Xw],this.Os)}};function Rz(t){const e=fh.mR||fh._R,i=void 0!==t&&void 0!==t.preferredAudioCodecs&&t.preferredAudioCodecs.some((t=>"ac-3"===t||"ec-3"===t)),s=e&&!i,n=new aC(!0);return async t=>{const e=t.rM;if(!n.bZ(e)&&!function(t,e){return!!t&&(lt(t)?by(e)||Sy(e):Po(t,Ot.APPLICATION_TTML_XML)||Po(t,Ot.TEXT_VTT)||Po(t,Ot.IMAGE_JPEG))}(t.aV,t.bet))return!1;const i=t.bet.some((t=>"ac-3"===t||"ec-3"===t));if(s&&i)return!1;if(t.ket){const i=t.ket,s=Ga(i,(t=>rA(t.tet))).filter(Qf),n=await async function(t,e){for(const i of t)if(await e(i))return!0;return!1}(s,(t=>Ee.pN(t,e)));if(!n)return!1}return!0}}var Cz=class{get Ci(){return this.SAt.offsetHeight*Ee.Zs.C0}get Ti(){return this.SAt.offsetWidth*Ee.Zs.C0}constructor(t){this.SAt=t}},xz=class{get nt(){return this.xu}cP(t,e,i,s,n,r,h,o){const a=new Ye(t,e,i,s,n,r,h,void 0,o);return this.xu.tt(a),this._1.tt(a),a}mP(t){this.xu.it(t),this._1.it(t),t.bn()}ir(){for(const t of this.xu.Kv.slice())t.bn();this.xu.ir(),this._1.ir()}bn(){this.ir(),this.xu.bn(),this._1.bn()}constructor(t,e){this.xu=new gn,this._1=new _c(t,e)}},Ls=class{MM(t){return this.xO.MM(t)}V7(t){return this.xO.V7(t)}AM(t){return this.xO.AM(t)}constructor(t){this.xO=t}},Dz=class extends Et{get kAt(){return this.KO}get bl(){return this.ag()}ag(){return this.KO.bl}get qu(){return this.cg()}cg(){return this.KO.qu}get Wu(){return this._g()}_g(){return this.KO.Wu}get k0(){return this.KO.k0}get ct(){return this.vg()}vg(){return this.KO.ct}get eM(){return this.EAt()}EAt(){return this.KO.eM}get Ic(){return this.IAt()}IAt(){return this.KO.Ic}get lt(){return this.KO.lt}get Ci(){return this.KO.Ci}get Ti(){return this.KO.Ti}get wa(){return this.ev()}ev(){return this.KO.wa}get Xu(){return this.KO.Xu}set Xu(t){this.KO.Xu=t}get Dc(){return this.PAt()}PAt(){return this.KO.Dc}get $u(){return this.KO.$u}set $u(t){this.KO.$u=t}get wl(){return this.Og()}Og(){return this.KO.wl}get Nc(){return this.Hg()}Hg(){return this.KO.Nc}get kl(){return this.Vg()}Vg(){return this.KO.kl}get Fc(){return this.Wg()}Wg(){return this.KO.Fc}get Bc(){return this.RAt()}RAt(){return this.KO.Bc}get $c(){return this.CAt()}CAt(){return this.KO.$c}get nt(){return this.zg()}zg(){return this.xAt}get Cu(){return this.M2()}M2(){return this.KO.Cu}get M0(){return this.KO.M0}get _l(){return this.KO._l}set _l(t){this.KO._l=t}get u2(){return this.KO.u2}get Eg(){return this.KO.Eg}get d0(){return this.KO.d0}get yM(){return this.DAt()}set yM(t){this.NAt(t)}DAt(){return this.KO.yM}NAt(t){this.KO.yM=t}get d2(){return this.KO.d2}set d2(t){this.BAt(t)}BAt(t){this.KO.d2=t}get i0(){return this.LAt()}LAt(){return this.KO.i0}Rg(){return this.KO.Rg()}dl(){return this.KO.dl()}jl(){this.KO.jl()}gc(t,e,i){this.KO.gc(t,e,i)}jO(t){this.KO.jO(t)}be(){this.KO.be()}ke(){this.KO.ke()}cP(t,e,i,s,n,r,h,o){return this.KO.cP(t,e,i,s,n,r,h,o)}dM(){return this.KO.dM()}_M(t,e,i,s,n){return this.KO._M(t,e,i,s,n)}mP(t){this.KO.mP(t)}vM(){this.KO.vM()}iG(t){return this.KO.iG(t)}async On(t){const e=await this.KO.On(t);let i;return i=t.Iw===di.vB?this.OAt(e):this.MAt(e),this.tM=i,i}async ir(){this.tM&&(await this.tM.Ou(),this.tM=void 0),await this.KO.ir()}o2(){this.KO.o2()}a2(){this.KO.a2()}async Ou(){this.Lo(),this.KO.pn(YP,this.FAt),this.xAt.$v=void 0,this.xAt.bn(),this.tM&&(await this.tM.Ou(),this.tM=void 0)}fl(){this.KO.fl()}UAt(t){this.KO.pn(YP,this.FAt),this.KO=t,this.xAt.$v=t.nt,this.KO.wn(YP,this.FAt)}pv(t){this.To(t)}constructor(t){super(),this.tM=void 0,this.xAt=new Yc,this.FAt=t=>this.pv(t),this.KO=t,this.xAt.$v=t.nt,this.KO.wn(YP,this.FAt)}},Nz=class extends Dz{get JO(){return this.KO.JO}get KZ(){return this.KO.KZ}get tv(){return this.KO.tv}set tv(t){this.KO.tv=t}l2(t){this.KO.l2(t)}p0(){this.KO.p0()}wv(){this.KO.wv()}constructor(t){super(t)}},Bz=class{get xb(){return this.dN()}dN(){return this.tM.xb}get kl(){return this.Vg()}Vg(){return this.tM.kl}get rt(){return this.tM.rt}OX(t){return this.tM.OX(t)}FX(t){return this.tM.FX(t)}Ou(){return Promise.resolve()}constructor(t){this.tM=t}},Lz=class extends Bz{get mZ(){return this.TZ}get pZ(){return this.SZ}get bl(){return this.ag()}ag(){return this.tM.bl}get ct(){return this.vg()}vg(){return this.tM.ct}get $X(){return this.HAt()}HAt(){return this.tM.$X}EZ(t){this.tM.EZ(t)}CZ(t,e,i,s){this.tM.CZ(t,e,i,s)}EY(){this.tM.EY()}vY(){this.tM.vY()}Ou(){return this.TZ&&(this.TZ.Ou(),this.TZ=void 0),this.SZ&&(this.SZ.Ou(),this.SZ=void 0),super.Ou()}VAt(t){this.tM=t,this.TZ?t.mZ?this.TZ.WAt(t.mZ):(this.TZ.Ou(),this.TZ=void 0):t.mZ&&(this.TZ=this.qAt(t.mZ),this.TZ.wn($P,this.zAt)),this.SZ?t.pZ?this.SZ.WAt(t.pZ):(this.SZ.Ou(),this.SZ=void 0):t.pZ&&(this.SZ=this.qAt(t.pZ),this.SZ.wn($P,this.zAt))}XAt(t){}constructor(t){super(t),this.TZ=void 0,this.SZ=void 0,this.zAt=t=>this.XAt(t)}},Oz=class extends Et{get Zq(){return this.rz}set Zq(t){this.rz=t}get bl(){return d.Nl()}get xb(){return this.al}get PY(){return Di.YT}get CY(){return d.Nl()}get GAt(){return!1}get Qq(){return this.iz}set Qq(t){this.iz=t}Hj(t,e,i){return Promise.reject(new v("Invalid media buffer"))}LY(){return Promise.reject(new v("Invalid media buffer"))}qj(t,e,i){return Promise.reject(new v("Invalid media buffer"))}$X(){return!1}EY(){}NY(t,e){}BY(t,e){}Qu(t,e,i){return Promise.resolve()}sY(t,e){return Promise.reject(new v("Invalid media buffer"))}yS(t,e){return Promise.reject(new v("Invalid media buffer"))}OX(t){return!1}FX(t){return Promise.reject(new v("Invalid media buffer"))}Ou(){this.Lo()}constructor(t){super(),this.iz=0,this.rz=0,this.al=t}},La=class extends Et{get Zq(){return this.QAt()}set Zq(t){this.KAt(t)}QAt(){return this.Mgt.Zq}KAt(t){this.Mgt.Zq=t}get bl(){return this.ag()}ag(){return this.Mgt.bl}get xb(){return this.dN()}dN(){return this.Mgt.xb}get PY(){return this.Mgt.PY}get CY(){return this.jAt()}jAt(){return this.Mgt.CY}get Qq(){return this.YAt()}set Qq(t){this.ZAt(t)}YAt(){return this.Mgt.Qq}ZAt(t){this.Mgt.Qq=t}Hj(t,e,i){return this.Mgt.Hj(t,e,i)}LY(){return this.Mgt.LY()}qj(t,e,i){return this.Mgt.qj(t,e,i)}$X(){return this.Mgt.$X()}EY(){this.Mgt.EY()}NY(t,e){this.Mgt.NY(t,e)}BY(t,e){this.Mgt.BY(t,e)}Qu(t,e,i){return this.Mgt.Qu(t,e,i)}sY(t,e){return this.Mgt.sY(t,e)}OX(t){return this.Mgt.OX(t)}FX(t){return this.Mgt.FX(t)}pv(t){this.To(t)}Ou(){this.Lo(),this.WAt(new Oz(this.xb))}WAt(t){this.Mgt.pn($P,this.JAt),this.Mgt=t,this.Mgt.wn($P,this.JAt)}constructor(t){super(),this.JAt=t=>this.pv(t),this.Mgt=t,this.Mgt.wn($P,this.JAt)}},Mz=class extends La{get F7(){return this.KO}set F7(t){this.KO=t}async Hj(t,e,i){return k_(i),await this.zgt(this.KO.Wu,null==e?void 0:e.m6,null==e?void 0:e.ct),k_(i),t.Iw===F.FI?await this.$At(t,e,i):await this.tbt(t,e,i)}async $At(t,e,i){let s=t;for(;;){const[t,n]=zI(s.Ny);s={Iw:F.FI,Ny:t};try{return await this.ebt(s,e,i),void n.cancel(new At).catch(Qo)}catch(t){if(po(t)){if(await this.zgt(this.KO.Wu,e.m6,e.ct,i)){s={Iw:F.FI,Ny:n};continue}}throw n.cancel(t).catch(Qo),t}}}async tbt(t,e,i){for(;;)try{return k_(i),await this.ebt(t,e,i)}catch(t){if(po(t)){if(await this.zgt(this.KO.Wu,e.m6,e.ct,i))continue}throw t}}async zgt(t,e,i,s){const n=pP(t,e,i,this.bl,this.Qq,this.Zq);for(const[t,e]of n)await this.ibt(t,e,s);return n.length>0}ebt(t,e,i){return super.Hj(t,e,i)}ibt(t,e,i){return super.Qu(t,e,i)}constructor(t){super(t),this.KO=void 0}},Fz=class extends Lz{get F7(){return this.KO}set F7(t){this.KO=t,this.TZ&&(this.TZ.F7=t),this.SZ&&(this.SZ.F7=t)}qAt(t){const e=new Mz(t);return e.F7=this.KO,e}constructor(t){super(t),this.KO=void 0,this.VAt(t)}},oi=class extends Bz{get Mg(){return this.tM.Mg}set Mg(t){this.tM.Mg=t}},Ha=class extends Dz{get JO(){return this.KO.JO}get KZ(){return this.KO.KZ}get Kg(){return this.KO.Kg}get Xg(){return this.KO.Xg}get tv(){return this.KO.tv}set tv(t){this.KO.tv=t}l2(t){this.KO.l2(t)}p0(){this.KO.p0()}wv(){this.KO.wv()}rv(){return this.KO.rv()}constructor(t){super(t)}},Uz=class extends Nz{get kAt(){return this.KO}MAt(t){const e=new Fz(t);return e.F7=this,e}OAt(t){return new oi(t)}},Hz=class extends Ha{get kAt(){return this.KO}MAt(t){const e=new Fz(t);return e.F7=this,e}OAt(t){return new oi(t)}},yn=class extends Ls{MM(t){return t===Di.vl?new Hz(super.MM(t)):t===Di.yy?new Uz(super.MM(t)):void 0}async AM(t){const e=t;await e.Ou(),await super.AM(e.kAt)}},Vz=class{sbt(){this.Ko.mv()}bn(){a.removeEventListener("pageshow",this.nbt)}constructor(t){this.nbt=t=>{t.persisted&&this.sbt()},this.Ko=t,a.addEventListener("pageshow",this.nbt)}},Su=class extends Pz{rv(){if(Ke(this.KO))return this.KO.rv()}get cct(){return Ke(this.KO)?this.KO.Xg:0}get dct(){return Ke(this.KO)?this.KO.Kg:0}async bn(){var t;await super.bn(),null==(t=this.rbt)||t.bn()}Lct(t){var e,i;return((null!=(i=null==(e=this.cut)?void 0:e.seamlessSwitchStrategy)?i:Ts.XT)!==Ts.XT||!fh.ZR)&&super.Lct(t)}Uct(){return!(fh._R&&fh.vR<3)&&super.Uct()}Flt(){return new xz(this,new de)}glt(t){return Rz(t)}constructor(t,e,i,s,n,r){super(t,e,i,s,n,new Cz(r)),this.SAt=r,fh.MR&&(this.rbt=new Vz(this))}},Wz=class extends Su{async bn(){await super.bn(),await this.bM.AM(this.KO)}constructor(t,e,i,s,n,r,h){const o=new yn(n);super(t,e,i,s,o.MM(r),h),this.bM=o}},qz=class extends La{get hbt(){return this.h7.hbt}ag(){return super.ag().Ey(this.hbt)}jAt(){return super.jAt().Ey(this.hbt)}Hj(t,e,i){const s=this.hbt;return super.Hj(t,{m6:e.m6-s,ct:e.ct,NE:e.NE-s},i)}sY(t,e){const i=this.hbt;return super.sY(w.max(0,t-i),w.max(0,e-i))}Qu(t,e,i){const s=this.hbt;return super.Qu(w.max(0,t-s),w.max(0,e-s),i)}NY(t,e){const i=this.hbt;super.NY(w.max(0,t-i),w.max(0,e-i))}BY(t,e){const i=this.hbt;super.BY(w.max(0,t-i),w.max(0,e-i))}constructor(t,e){super(e),this.h7=t}},zz=class extends Lz{get hbt(){return this.h7.hbt}vg(){return super.vg()+this.hbt}EZ(t){super.EZ(t-this.hbt)}Vg(){return super.Vg().Ey(this.hbt)}CZ(t,e,i,s){const n=this.hbt;super.CZ(t-n,e-n,i,s)}qAt(t){return new qz(this,t)}constructor(t,e){super(e),this.VAt(e),this.h7=t}},Xz=class extends Ha{get kAt(){return this.KO}get hbt(){return this.obt}set hbt(t){this.obt=t}ag(){return super.ag().Ey(this.obt)}cg(){return Gz(super.cg(),this.obt)}_g(){return super._g()+this.obt}vg(){return super.vg()+this.obt}Og(){return super.Og().Ey(this.obt)}Vg(){return super.Vg().Ey(this.obt)}gc(t,e,i){const s=w.max(0,t-this.obt);super.gc(s,e,i)}jO(t){super.jO(Gz(t,-this.obt))}zg(){return this.xu}cP(t,e,i,s,n,r,h,o){return this.lP.cP(t,e,i,s,n,r,h,o)}mP(t){this.lP.mP(t)}vM(){this.lP.ir(),super.vM()}dM(){return!1}_M(t,e,i,s,n){throw new v("Not supported")}Ou(){return this.K4.bn(),this.Q4.bn(),this.lP.bn(),this.xu.bn(),super.Ou()}MAt(t){return new zz(this,t)}OAt(t){return new oi(t)}pv(t){let e;switch(t.type){case o.Ph:e=new ds(t.currentTime+this.obt);break;case o.Ch:e=new mt(t.currentTime+this.obt);break;case ee.Qf:e=new _a(t.currentTime+this.obt);break;case o.Lu:e=new hc(t.currentTime+this.obt,Gz(t.currentProgramDateTime,this.obt));break;case o.Rf:e=new bc(t.currentTime+this.obt);break;case o.If:e=new T(t.currentTime+this.obt);break;case o.Tf:e=new ju(t.currentTime+this.obt);break;case o.im:e=new qs(t.currentTime+this.obt);break;case o.hm:e=new qi(t.currentTime+this.obt);break;case o.Pf:e=new ih(t.currentTime+this.obt);break;case o.Vu:e=new Gs(t.currentTime+this.obt,t.playbackRate);break;case o.Il:e=new Eo(t.currentTime+this.obt,t.volume);break;case o.Nf:e=new oa(t.duration+this.obt);break;case ee.Bf:e=new Qs(t.currentTime+this.obt,t.readyState);break;default:e=t}super.pv(e)}ke(){super.ke(),this.Q4.ke()}be(){super.be(),this.Q4.be()}constructor(t){super(t),this.obt=0,this.lP=new xz(this,new de),this.xu=new Uu([this.lP.nt,super.zg()]),this.Q4=new Jx,this.Q4.l2(this.JO.parentElement),this.K4=new cN(this.Q4.je,this.k0,this.xu,this.Cu,this.wa)}};function Gz(t,e){return t?new Date(t.getTime()+1e3*e):void 0}var Qz=class extends Ls{MM(t){if(t===Di.vl)return new Xz(super.MM(t))}async AM(t){const e=t;await e.Ou(),await super.AM(e.kAt)}},Kz=class extends Su{async yZ(t){await super.yZ(t),void 0===this.abt&&(this.abt=this.ubt(),this.KO.hbt=this.abt)}ubt(){if(this.ct===1/0){const t=this.Qut;if(t.U>0)return w.max(0,t.Tn(0)-300)}return 0}t1(t,e,i,s,n,r,h,o){return void 0===r&&(r=!1),void 0===h&&(h=re.jot),void 0===o&&(o=!1),o||(o=this.ct===1/0&&fh._R&&fh.vR<3&&t<=this.Wu),super.t1(t,e,i,s,n,r,h,o)}async ir(){await super.ir(),this.abt=void 0,this.KO.hbt=0}async bn(){await super.bn(),await this.KO.Ou(),await this.bM.AM(this.KO)}static EN(t){var e;return(!t||"google-dai"!==(null==t||null==(e=t.ssai)?void 0:e.integration))&&(fh._R&&fh.vR<4)}constructor(t,e,i,s,n,r,h){const o=new Qz(new yn(n));super(t,e,i,s,o.MM(r),h),this.bM=o,this.abt=void 0}},jz=class extends Dz{get kAt(){return this.KO}get Xg(){return this.KO.Xg}get Kg(){return this.KO.Kg}constructor(t){super(t)}},Yz=class extends La{QAt(){return this.cbt?this.rz:super.QAt()}KAt(t){this.cbt?this.rz=t:super.KAt(t)}ag(){return this.cbt?this.lbt:super.ag()}dN(){return this.cbt?this.al:super.dN()}jAt(){return this.cbt?this.dbt:super.jAt()}YAt(){return this.cbt?this.iz:super.YAt()}ZAt(t){this.cbt?this.iz=t:super.ZAt(t)}Hj(t,e,i){return this.Vj((i=>this.fbt(t,e,i)),i)}fbt(t,e,i){return super.Hj(t,e,i)}LY(){return this.Vj((()=>this._bt()))}_bt(){return super.LY()}qj(t,e,i){return this.Vj((i=>this.gbt(t,e,i)),i)}gbt(t,e,i){return super.qj(t,e,i)}$X(){return this.cbt?this.g6:super.$X()}EY(){this.cbt?this.vbt=!0:super.EY()}NY(t,e){this.lY(),this.cbt?(this.dbt=this.dbt.Hl(new d([t,e])),this.wbt.push({Iw:"P_t",PS:t,RS:e})):this.mbt(t,e)}mbt(t,e){super.NY(t,e)}sY(t,e){return this.Vj((()=>this.pbt(t,e)))}pbt(t,e){return super.sY(t,e)}BY(t,e){this.lY(),this.cbt?(this.dbt=this.dbt.bF(new d([t,e])),this.wbt.push({Iw:"Qu",PS:t,RS:e})):this.ybt(t,e)}ybt(t,e){super.BY(t,e)}Qu(t,e,i){return this.Vj((i=>this.Abt(t,e,i)),i)}Abt(t,e,i){return super.Qu(t,e,i)}FX(t){return this.Vj((()=>this.bbt(t)))}bbt(t){return super.FX(t)}async Vj(t,e){this.lY(),this.cbt&&(await E_(this.cbt.jf,e),this.lY()),k_(e);try{this.wY=t(e),await this.wY}finally{this.wY=void 0}}lY(){if(this.wY)throw new v("Internal error")}async Tbt(){if(this.cbt)throw new p("Already locked");this.cbt=new $i,this.Sbt(),this.wY&&(await this.wY.catch(Qo),this.Sbt())}kbt(){var t;null==(t=this.cbt)||t.Lf(),this.cbt=void 0,this.Ebt()}Sbt(){this.al=super.dN(),this.rz=super.QAt(),this.iz=super.YAt(),this.lbt=super.ag(),this.dbt=super.jAt(),this.g6=super.$X(),this.vbt=!1}Ebt(){this.lY(),super.KAt(this.rz),super.ZAt(this.iz);const t=this.wbt.slice();Ce(this.wbt);for(const e of t)"P_t"===e.Iw?this.mbt(e.PS,e.RS):this.ybt(e.PS,e.RS);this.vbt&&super.EY(),this.lbt.PF(super.ag())||this.To(new Xi(Ou.RX))}Ou(){var t;null==(t=this.cbt)||t.Jl(),this.cbt=void 0,super.Ou()}constructor(t){super(t),this.wY=void 0,this.cbt=void 0,this.rz=0,this.lbt=d.Nl(),this.dbt=d.Nl(),this.wbt=[],this.g6=!1,this.vbt=!1,this.iz=0,this.al=t.xb}},Zz=class extends Yz{ag(){var t,e;return super.ag().Hl(null!=(e=null==(t=this.Ibt)?void 0:t.bl)?e:d.Nl())}jAt(){var t,e;return super.jAt().Hl(null!=(e=null==(t=this.Ibt)?void 0:t.CY)?e:d.Nl())}KAt(t){super.KAt(t),this.Ibt&&(this.Ibt.Zq=t)}ZAt(t){super.ZAt(t),this.Ibt&&(this.Ibt.Qq=t)}mbt(t,e){super.mbt(t,e),this.Ibt&&this.Ibt.NY(t,e)}ybt(t,e){super.ybt(t,e),this.Ibt&&this.Ibt.BY(t,e)}async Abt(t,e,i){k_(i);const s=[];s.push(super.Abt(t,e,i)),this.Ibt&&s.push(this.Ibt.Qu(t,e,i)),await Promise.all(s)}OX(t){return!!super.OX(t)||this.h7.Pbt(t)}bbt(t){return super.OX(t)?super.bbt(t):this.h7.Rbt(t)}Cbt(t){var e,i;null==(e=this.Ibt)||e.pn($P,this.JAt),this.Ibt=t,null==(i=this.Ibt)||i.wn($P,this.JAt)}constructor(t,e){super(e),this.Ibt=void 0,this.h7=t}},Jz=class extends Lz{OX(t){const e=void 0!==this.TZ,i=void 0!==this.SZ,s=t.xZ.some((t=>Jo(t.rM,"audio"))),n=t.xZ.some((t=>Jo(t.rM,"video")));return e===s&&i===n&&(!!super.OX(t)||(!(!this.xbt||!this.xbt.OX(t))||this.h7.Dbt(t)))}async FX(t){return super.OX(t)?await super.FX(t):this.xbt&&this.xbt.OX(t)?(this.Nbt(),await this.FX(t)):(await this.h7.Bbt(t),await this.FX(t))}Pbt(t){return this.OX(this.Lbt(t))}Rbt(t){return this.FX(this.Lbt(t))}Lbt(t){const e=this.xb,i=e.xZ.map((e=>Jo(t.rM,"audio")&&Jo(e.rM,"audio")||Jo(t.rM,"video")&&Jo(e.rM,"video")?t:e));return Me({},e,{xZ:i})}CZ(t,e,i,s){super.CZ(t,e,i,s),this.xbt&&this.xbt.CZ(t,e,i,s)}Obt(){return!this.Mbt&&this.Fbt}vg(){return void 0!==this.Ubt?this.Ubt:this.Obt()?this.Zl:super.vg()}EZ(t){this.Zl=t,this.Ubt=void 0,this.Obt()||super.EZ(t)}HAt(){return!this.Obt()&&super.HAt()}EY(){this.Ubt=w.max($z(this.tM.mZ),$z(this.tM.pZ)),this.Obt()||super.EY()}vY(){this.Ubt=void 0,this.Obt()||super.vY()}qAt(t){return new Zz(this,t)}Hbt(){this.Mbt=!this.Mbt}Nbt(){const t=this.tM,e=this.xbt;e&&(this.Mbt=!this.Mbt,this.VAt(e),this.Vbt(t),this.Obt()&&this.Wbt())}Vbt(t){var e,i;this.xbt=t,null==(e=this.TZ)||e.Cbt(null==t?void 0:t.mZ),null==(i=this.SZ)||i.Cbt(null==t?void 0:t.pZ)}qbt(t){const e=this.tM,i=this.xbt;if(!i)return;const s=this.Mbt,n=s?e:i,r=(s?i:e).bl.BF(t);if(!r)return;const h=WV(n.bl,this.jAt()).BF(r.Pn(0),ii);return!h||r.Pn(0)+ii>=h.Pn(0)?void 0:w.max(r.Pn(0),h.Tn(0))}zbt(t,e){if(this.Fbt)return Promise.resolve();const i=this.Mbt?this.xbt:this.tM;return i?(this.Fbt=!0,this.Xbt((e=>{if(k_(e),this.Fbt)return async function(t,e,i){k_(i);const s=[];t.mZ&&s.push(ga(t.mZ,e,i));t.pZ&&s.push(ga(t.pZ,e,i));await Promise.all(s),t.EY()}(i,t,e)}),e)):Promise.resolve()}Wbt(){if(!this.Fbt)return;const t=this.Mbt?this.xbt:this.tM;if(!t)return;var e;this.Fbt=!1;const i=null!=(e=this.Ubt)?e:this.Zl;t.ct<i&&t.EZ(i),t.vY()}Gbt(t){var e;const i=null!=(e=this.Ubt)?e:this.Zl;t.EZ(i),this.Mbt?this.VAt(t):this.Vbt(t)}jAt(){var t,e,i;const s=null!=(i=null==(t=this.TZ)?void 0:t.CY)?i:d.Nl();var n;const r=null!=(n=null==(e=this.SZ)?void 0:e.CY)?n:d.Nl();return s.Hl(r)}async Xbt(t,e){const i=[];this.TZ&&i.push(this.TZ.Tbt()),this.SZ&&i.push(this.SZ.Tbt());try{await Promise.all(i),await t(e)}finally{this.TZ&&this.TZ.kbt(),this.SZ&&this.SZ.kbt()}}XAt(t){t.type===Ou.RX&&this.h7.AY(),super.XAt(t)}constructor(t,e){super(e),this.xbt=void 0,this.Zl=NaN,this.Mbt=!1,this.Fbt=!1,this.Ubt=void 0,this.VAt(e),this.h7=t}};function $z(t){if(!t)return 0;const e=t.bl;return e.U>0?e.Pn(e.U-1):0}function It(t){return t.xb.Iw===di.wB}var Hc,tX=class extends jz{get Qbt(){return this.Kbt}ag(){return super.ag().Hl(this.Kbt.bl)}vg(){if(!this.jbt){const t=this.tM;if(t&&It(t))return t.ct}return super.vg()}IAt(){return!!super.IAt()&&!(!this.jbt&&!this.$X())}PAt(){return!!super.PAt()&&!(!this.jbt&&super.IAt()&&!this.$X())}$X(){const t=this.tM;return!(!t||!It(t))&&t.$X}Og(){return this.Ho.Hl(this.KO.wl)}Vg(){return super.Vg().Hl(this.Kbt.kl)}Hg(){return super.Hg()}EAt(){var t;return null!=(t=super.EAt())?t:this.Kbt.eM}dl(){return this.Ql=!1,super.dl()}jl(){this.Ql=!0,super.jl()}o2(){this.jbt=!0,super.o2(),this.Kbt.o2()}a2(){this.jbt=!1,super.a2(),this.Kbt.o2()}_g(){var t;return null!=(t=this.S0)?t:super._g()}Wg(){return void 0!==this.S0||super.Wg()}gc(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),this.Ybt.Jl(),this.J0.Jl(),this.J0=new Hi,this.Zbt=this.t1(t,e,i,this.Zbt,this.J0.M_).catch(Qo)}async t1(t,e,i,s,n){this.S0=t,this.e1=t,this.To(new T(t)),s&&await s.catch(Qo),k_(n),this.tM&&It(this.tM)&&this.tM.Wbt(),this.S0=void 0,super.gc(t,e,i),this.Kbt.gc(t,e,i),this.Jbt()}jO(t){const e=this.eM;if(!e||j(e.getTime()))return;const i=(t.getTime()-e.getTime())/1e3;this.gc(i)}fl(){super.fl(),this.Kbt.fl()}get Xg(){return this.$bt.Xg}get Kg(){return this.$bt.Kg}ke(){this.oF&&(this.oF=!1,this.$bt.ke())}be(){this.oF||(this.oF=!0,this.$bt.be())}async tTt(){var t;this.S0=void 0,this.e1=NaN,this.Ho=d.Nl(),null==(t=this.eTt)||t.Jl(),this.Ybt.Jl(),this.J0.Jl(),this.Zbt&&(await this.Zbt.catch(Qo),this.Zbt=void 0)}NAt(t){super.NAt(t),this.Kbt.yM=t}BAt(t){super.BAt(t),this.Kbt.d2=t}zg(){return this.xu}cP(t,e,i,s,n,r,h,o){return this.lP.cP(t,e,i,s,n,r,h,o)}mP(t){this.lP.mP(t)}vM(){this.lP.ir(),super.vM()}async On(t){const e=await super.On(t);return It(e)&&this.Jbt(),e}async ir(){await this.tTt(),await super.ir(),await this.Kbt.ir()}async Ou(){await this.tTt(),this.lP.bn(),this.xu.bn(),await super.Ou()}MAt(t){return new Jz(this,t)}OAt(t){return new oi(t)}Jbt(){this.Ybt.Jl(),this.Ybt=new Hi,this.Zbt=this.iTt(this.Zbt,this.Ybt.M_).catch(Qo)}async iTt(t,e){if(t&&await t.catch(Qo),this.tM&&It(this.tM))for(;;){let t;for(k_(e),this.sTt()&&this.Hbt(),this.tM.Wbt(),k_(e);k_(e),!this.sTt();){if(t=this.tM.qbt(this._g()),void 0!==t){0,this.nTt(),await this.tM.zbt(t,e),k_(e),this.Kbt.gc(t);break}await zs((t=>Promise.race([this.eg(o.Lu,t),this.rTt(t)])),e)}for(k_(e);!this.sTt();)await this.KO.eg([o.Lu,o.Pf,ee.Bf],e)}}sTt(){const t=this.tM;if(void 0===t||!It(t))return!1;const e=this._g(),i=this.KO.bl;if(!this.KO.Ic&&i.br(e))return!1;return!!WV(this.Kbt.bl,t.jAt()).EF(e,e+ii)}Hbt(){if(this.hTt)return;this.hTt=!0,this.Ho=this.Og();const t=gC(this),e=this.Wg(),i=this.Hg(),s=this.KO,n=this.Kbt,r=this.tM;r.Wbt(),r.Hbt(),vC(n,t),this.UAt(n),this.Kbt=s,s.jl(),s.Xu=!0,this.hTt=!1;const h=this.Wg();e!==h&&(h?this.To(new T(this.Wu)):this.To(new ju(this.Wu)));const o=this.Hg();i!==o&&this.To(new Qs(this.Wu,o)),h||this.nTt()}nTt(){const t=this.KO,e=this.$bt;if(e===t)return;const i=this.Kg,s=this.Xg;this.$bt=t,this.oF&&(e.ke(),t.be());const n=this.Kg,r=this.Xg;n>0&&r>0&&(i!==n||s!==r)&&this.To(new le)}Dbt(t){return void 0!==this.Kbt.iG([t])}async Bbt(t){this.nTt();const e=this.tM,i=this.Kbt;await i.ir();const s=await i.On(t);e.Gbt(s)}rTt(t){return this.eTt=new $i,E_(this.eTt.jf,t)}AY(){var t;null==(t=this.eTt)||t.Lf()}pv(t){t.type===o.If&&this.e1===t.currentTime||(t.type===o.Tf&&(this.e1=NaN,this.nTt()),t.type!==ee.Bf&&t.type!==o.Ch&&t.type!==o.Pf||this.hTt||!this.sTt()?(t.type!==o.Pf||this.Ic)&&super.pv(t):this.Jbt())}constructor(t,e,i){super(t),this.jbt=!1,this.S0=void 0,this.e1=NaN,this.Ho=d.Nl(),this.Ql=!0,this.hTt=!1,this.oF=!0,this.eTt=void 0,this.Zbt=void 0,this.Ybt=new Hi,this.J0=new Hi,this.Kbt=e,this.$bt=t,this.KO.be(),this.Kbt.ke(),this.lP=new xz(this,i),this.xu=new Uu([this.lP.nt,super.zg()])}},eX=class extends tX{get kAt(){return this.KO}get Qbt(){return this.Kbt}ke(){super.ke(),this.Q4.ke()}be(){super.be(),this.Q4.be()}get JO(){return this.KO.JO}get KZ(){return this.KO.KZ}get tv(){return this.KO.tv}set tv(t){this.KO.tv=t}l2(t){this.KO.l2(t),this.Kbt.l2(t)}p0(){this.KO.p0()}wv(){this.KO.wv(),this.Kbt.wv()}rv(){return this.KO.rv()}UAt(t){const e=this.ev(),i=this.rv();super.UAt(t),this.ev()!==e&&this.To(new mc),this.rv()!==i&&this.To(new st)}Ou(){return this.K4.bn(),this.Q4.bn(),super.Ou()}constructor(t,e){super(t,e,new de),this.Q4=new Jx,this.Q4.l2(t.JO.parentElement),this.K4=new cN(this.Q4.je,this.k0,this.nt,this.Cu,this.wa)}},iX=class extends Ls{MM(t){if(t===Di.vl){const e=super.MM(t),i=super.MM(t);return new eX(e,i)}return super.MM(t)}async AM(t){t instanceof eX?(await t.Ou(),await super.AM(t.kAt),await super.AM(t.Qbt)):await super.AM(t)}},sX=class extends Su{async bn(){await super.bn(),await this.bM.AM(this.KO)}static EN(t){var e;return!fh.Ks&&!fh.KR&&!(t&&"google-dai"===(null==(e=t.ssai)?void 0:e.integration))}constructor(t,e,i,s,n,r,h){const o=new yn(new iX(n));super(t,e,i,s,o.MM(r),h),this.bM=o}},nX=class extends Lz{qAt(t){return new Yz(t)}dN(){return this.oTt?this.al:super.dN()}ag(){return this.oTt?this.lbt:super.ag()}vg(){return this.oTt?this.Zl:super.vg()}EZ(t){this.oTt?(this.Zl=t,this.aTt=!0):super.EZ(t)}Vg(){return this.oTt?this.uTt?this.uTt.UY():this.RZ:super.Vg()}CZ(t,e,i,s){this.oTt?this.uTt=new js(t,e,i,s):super.CZ(t,e,i,s)}HAt(){return this.oTt?this.g6&&!1!==this.vbt:super.HAt()}EY(){this.oTt?this.vbt=!0:super.EY()}vY(){this.oTt?this.vbt=!1:super.vY()}OX(t){return!this.oTt&&super.OX(t)}FX(t){return this.oTt?Promise.reject(new p("Not supported")):super.FX(t)}async Tbt(){if(this.oTt)throw new p("Already locked");this.oTt=!0,this.Sbt();const t=[];this.TZ&&t.push(this.TZ.Tbt()),this.SZ&&t.push(this.SZ.Tbt()),await Promise.all(t)}kbt(){this.oTt=!1,this.TZ&&this.TZ.kbt(),this.SZ&&this.SZ.kbt(),this.Ebt()}Sbt(){this.al=super.dN(),this.lbt=super.ag(),this.Zl=super.vg(),this.RZ=super.Vg(),this.aTt=!1,this.vbt=void 0,this.uTt=void 0}Ebt(){if(this.aTt&&(super.EZ(this.Zl),this.aTt=!1),void 0!==this.uTt){const t=this.uTt;super.CZ(t.Tn,t.Pn,t.HY,t.VY),this.uTt=void 0}void 0!==this.vbt&&(this.vbt?super.EY():super.vY(),this.vbt=void 0)}constructor(t){super(t),this.oTt=!1,this.lbt=d.Nl(),this.Zl=0,this.aTt=!1,this.g6=!1,this.vbt=void 0,this.RZ=d.Nl(),this.uTt=void 0,this.VAt(t),this.al=t.xb}},rX=class extends Ha{get kAt(){return this.KO}dl(){return void 0!==this.tM&&It(this.tM)&&this.Ic&&this.gc(0),super.dl()}gc(t,e,i){void 0!==this.tM&&It(this.tM)&&this.Ic&&t<this.ct&&this.cTt(),super.gc(t,e,i)}o2(){this.lTt=!0,super.o2()}a2(){this.lTt=!1,this.dTt()||super.a2()}dTt(){return this.lTt||this.fTt}_Tt(){this.fTt||(this.fTt=!0,super.o2())}gTt(){this.fTt&&(this.fTt=!1,this.dTt()||super.a2())}On(t){this.vTt.Jl();const e=this.i7(t,this.wTt);return this.mTt=e,e}async i7(t,e){return e&&await e.catch(Qo),this.gTt(),await super.On(t)}MAt(t){return new nX(t)}OAt(t){return new oi(t)}ir(){this.vTt.Jl();const t=this.pTt(this.wTt);return this.mTt=t,t}async pTt(t){return t&&await t.catch(Qo),this.gTt(),await super.ir()}cTt(){this._Tt(),this.vTt.Jl(),this.vTt=new Hi,this.wTt=I_(this.yTt(this.mTt,this.wTt,this.vTt.M_),this.vTt).catch(B)}async yTt(t,e,i){t&&await t.catch(Qo),e&&await e.catch(Qo),k_(i);const s=this.tM;if(!s||!It(s))return;const n=s.xb;await s.Tbt(),await this.KO.ir();const r=await this.KO.On(n);r.EZ(s.ct),s.VAt(r),s.kbt(),this.gTt()}async Ou(){this.vTt.Jl(),this.wTt&&(await this.wTt.catch(Qo),this.wTt=void 0),this.dTt()&&super.a2(),await super.Ou()}constructor(...t){super(...t),this.lTt=!1,this.fTt=!1,this.mTt=void 0,this.wTt=void 0,this.vTt=new Hi}},hX=class extends Ls{MM(t){if(t===Di.vl)return new rX(super.MM(t))}async AM(t){const e=t;await e.Ou(),await super.AM(e.kAt)}static EN(){return fh.YR}};Lk(new class extends bF{lp(t,e,i,s,n,r,h){const o=new kF($c.lC.ptt,$c.lC.wtt,$c.lC.mtt,$c.lC.Att);let a;a=Kz.EN(h)?Kz:sX.EN(h)?sX:Wz;let u=e;return hX.EN()&&(u=new hX(u)),new a(i,s,n,o,u,Di.vl,t)}UM(){return!0}constructor(...t){super(...t),this.HM=pk.AO}}),function(t){t.ATt="currentbufferingrenditionchange",t.bTt="TTt",t.STt="kTt",t.ETt="ITt"}(Hc||(Hc={}));var oX,aX,uX=class{constructor(t,e){var i,s;this.cw=_m(),this.PTt=e,this.Iw=t.Iw,this.RTt=t.RTt,this.CTt=t.CTt,this.xTt=t.xTt,this.l=t.l,this.gs=t.gs,this.DTt=t.DTt,this.NTt=t.NTt,this.BTt=void 0===t.Nit,this.LTt=null!=(s=null==(i=t.LTt)?void 0:i.split(","))?s:[]}};function qa(t,e){return t.Iw===e.Iw&&(t.l===e.l||!(!t.RTt||!e.RTt))}function cX(t,e){return t.PTt===e.PTt&&t.DTt===e.DTt}function lX(t,e){for(const i of t)if(cX(i,e))return!0;return!1}!function(t){t.OTt="alternative",t.MTt="main",t.FTt="commentary",t.UTt="",t._I="descriptions",t.HTt="main-desc",t.VTt="translation"}(oX||(oX={})),function(t){t.OTt="alternative",t.MTt="main",t.FTt="commentary",t.UTt="",t.fI="captions",t.ww="sign",t.Ay="subtitles"}(aX||(aX={}));var dX,fX=class extends Et{get lw(){return this.WTt}get Rt(){const t=this.qTt();if(!t)return!1;for(const e of this.dw.Kv)if(e.zTt===t)return!0;return!1}set Rt(t){if(t!==this.Rt&&t){let t=this.dw.Zv(0).zTt;const e=this.Ko.XTt;for(const i of this.dw.Kv)if(i.GTt===e){t=i.zTt;break}this.QTt(t)}}get uw(){if(!this.Rt)return;const t=this.Ko.KTt;for(const e of this.dw.Kv)if(lX(t,e.zTt))return e}get ma(){return this.Gu||(this.Gu=Kt(this)),this.Gu}get o(){return this.mS.toString()}get cw(){return this.mS}get _h(){return this.Yu}set _h(t){t!==this.Yu&&(this.Yu=t,this.To(new xa(this)))}get gs(){return this.Lx}get bw(){return this.Rt?"enabled":"disabled"}get fw(){return this.z_t}set fw(t){let e=[];if(t){e=t.filter((t=>{const e=this.uw?FH(this.uw):void 0;return Ee.Zs.c9(e,FH(t))})).filter((e=>this.dw._S(t)&&e.H7))}else e=this.dw.Kv.filter((t=>t.H7));if(0!==e.length){if(!(t===this.z_t||this.z_t&&er(this.z_t,e))){if(this.z_t=t?e:void 0,this.Ko.jTt(e.map((t=>t.GTt))),1===e.length){const t=e[0].GTt,i=this.vJ===Di.vl,s=this.GF.fz;M(this.Ko.YTt(t,{ZTt:!0,JTt:s&&i,$Tt:s&&!i}))}this.To(new NH(e,this))}}else this.To(new MH)}yS(t){this.Rt=t}bn(){this.Lo(),this.Ko.pn(Hc.ATt,this.tSt),this.Ko.pn(Hc.bTt,this.eSt);for(const t of this.dw.Kv)t.bn();this.dw.ir()}constructor(t,e,i,s,n){var r;super(),this.vJ=t,this.Ko=e,this.GF=i,this.mh=s,this.dw=n,this.z_t=void 0,this.iSt=void 0,this.sSt=()=>this.To(new xa(this)),this.tSt=()=>{const t=this.uw;t&&this.iSt!==t&&(this.iSt=t,this.To(new uz(t)))},this.eSt=()=>{const t=this.Rt;this.nSt!==t&&(this.nSt=t,this.mh.To(new In(this)),this.To(new In(this)))},this.iSt=this.uw,this.nSt=this.Rt;const h=n.Zv(0);var o,a;this.Yu=null!=(o=null==h?void 0:h.zTt.l)?o:"",this.Lx=null!=(a=null==h?void 0:h.zTt.gs)?a:"",this.WTt=null==h||null==(r=h.zTt)?void 0:r.LTt.map(pX).filter(Qf),this.mS=vs(),this.Ko.wn(Hc.ATt,this.tSt),this.Ko.wn(Hc.bTt,this.eSt);for(let t=0;t<this.dw.U;t++){this.dw.Zv(t).wn("update",this.sSt)}}},_X=class extends fX{get Lt(){return oX.MTt}qTt(){return this.Ko.rSt}QTt(t){M(this.Ko.hSt(t))}constructor(t,e,i,s){super(Di.yy,t,e,i,s)}},gX=class extends fX{get Lt(){return aX.MTt}qTt(){return this.Ko.oSt}QTt(t){M(this.Ko.aSt(t))}constructor(t,e,i,s){super(Di.vl,t,e,i,s)}},vX=class extends Et{get o(){return String(this.GTt.o)}get cw(){return this.GTt.o}get IO(){return this.GTt.IO}get Rit(){return this.GTt.Rit}get _h(){var t;return null!=(t=this.Yu)?t:this.zTt.l}set _h(t){this._h!==t&&(this.Yu=t,this.To(new se(this.ma)))}get Nit(){return this.zTt.PTt.uSt()}get Cit(){return this.GTt.Cit}BI(){}bn(){this.Lo()}constructor(t,e){super(),this.GTt=t,this.zTt=e,this.Yu="",this.H7=!0}},wX=class extends vX{get Aet(){return 0}get bet(){var t;return(null==(t=this.GTt.bet)?void 0:t.cSt)||""}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}pa(){return wU(this)}constructor(t,e){super(t,e),this.Gu=void 0}},mX=class extends vX{get bet(){var t;return(null==(t=this.GTt.bet)?void 0:t.lSt)||""}get xit(){return this.dSt}set xit(t){this.dSt!==t&&(this.dSt=t,this.To(new se(this.ma)))}get Iet(){var t,e;return null!=(e=null!=(t=this.fSt)?t:this.GTt.Iet)?e:0}set Iet(t){this.Iet!==t&&(this.fSt=t,this.To(new se(this.ma)))}get Ci(){var t,e;return null!=(e=null==(t=this.GTt._St)?void 0:t.Ci)?e:0}get Ti(){var t,e;return null!=(e=null==(t=this.GTt._St)?void 0:t.Ti)?e:0}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}pa(){return vU(this)}constructor(t,e){super(t,e),this.Gu=void 0,this.dSt=0,this.fSt=void 0}};function pX(t){return"public.accessibility.describes-video"===t?zc.yw:"public.accessibility.transcribes-spoken-dialog"===t?zc.TRANSCRIBES_SPOKEN_DIALOG:"public.accessibility.describes-music-and-sound"===t?zc.DESCRIBES_MUSIC_AND_SOUND:"public.accessibility.easy-to-read"===t?zc.pw:void 0}!function(t){t.gSt="FATAL",t.aa="ERROR",t.vSt="WARNING",t.wSt="INFO",t.mSt="DEBUG"}(dX||(dX={}));var ms=new class{pSt(t){if(!this.Rt())return!1;const e=[];return!(e.length>0)||e.some((e=>e.toLowerCase()===t.toLowerCase()))}ySt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.pSt(t)&&Ee.v9("DEBUG "+t+" -",...i)}zA(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.pSt(t)&&Ee.v9("INFO "+t+" -",...i)}ASt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.pSt(t)&&Ee.Um("WARNING "+t+" -",...i)}lt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.pSt(t)&&Ee.w9("ERROR "+t+" -",...i)}bSt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.pSt(t)&&Ee.w9("FATAL "+t+" -",...i)}constructor(){this.Rt=()=>!1}},Yt="HLSPlaylistParser",yX="Discontinuity",ci="Buffering",AX=class{kct(){var t;const e=null==(t=this.Ko.Ar)?void 0:t.TSt;if(!e||0===e.length)return void ms.ASt("LLHLSTrackConfigurator","The HLSModel contains no variant streams.");var i;const s=null!=(i=pi(e,(t=>0!==t.SSt.length&&0!==t.kSt.length)))?i:e[0],n=e.filter((t=>t!==s));for(const t of s.SSt){const e=new Ua,i=[];e.fS(new wX(s,t)),i.push(t);for(const s of n)for(const n of s.SSt)if(qa(n,t)&&!lX(i,n)){e.fS(new wX(s,n)),i.push(n);break}this.ESt.tt(new _X(this.Ko,this.GF,this.ESt,e))}for(const t of s.kSt){const e=new Ua,i=[];e.fS(new mX(s,t)),i.push(t);for(const s of n)for(const n of s.kSt)if(qa(n,t)&&!lX(i,n)){e.fS(new mX(s,n)),i.push(n);break}this.ISt.tt(new gX(this.Ko,this.GF,this.ISt,e))}}PSt(){this.RSt(this.ESt),this.RSt(this.ISt)}RSt(t){const e=[];for(const i of t.Kv){const t=[];for(const e of i.dw.Kv)Bc(e.GTt.CSt,e.zTt)||t.push(e);for(const e of t)i.dw.Qu(e),e.bn();0===i.dw.U&&e.push(i)}for(const i of e)t.it(i),i.bn()}xSt(t,e){const i=this.DSt(t);void 0!==i&&(i.Iet=e)}NSt(t,e){const i=this.DSt(t);void 0!==i&&(i.xit=e)}DSt(t){for(const e of this.ISt.Kv){const i=pi(e.dw.Kv,(e=>e.zTt===t));if(void 0!==i)return i}}constructor(t,e,i,s){this.Ko=t,this.GF=e,this.ESt=i,this.ISt=s}},wn=class{get l6(){const t=1-this.BSt**this.LSt;return this.OSt/t}_ft(t,e){const i=this.BSt**t,s=e*(1-i)+i*this.OSt;j(s)||(this.OSt=s,this.LSt+=t)}FX(t){const e=w.exp(w.log(.5)/t);if(e===this.BSt)return;if(0===this.LSt)return void(this.BSt=e);const i=this.l6,s=1-e**this.LSt;this.OSt=i*s,this.BSt=e}constructor(t){this.OSt=0,this.LSt=0,this.BSt=w.exp(w.log(.5)/t)}},fn=class t{get l6(){return this.rat()?w.max(this.MSt.l6,this.FSt.l6):this.USt}_ft(t){const e=Ee.V_(),i=t;this.HSt&&void 0!==this.VSt&&e-this.VSt>=this.WSt&&this.ir(),this.qSt+=1,this.MSt._ft(1,i),this.FSt._ft(1,i),this.zSt.push(i),this.zSt.length>this.XSt&&this.zSt.shift(),this.VSt=e}rat(){return void 0!==this.VSt&&Ee.V_()-this.VSt<=this.WSt}ir(){this.MSt=new wn(this.GSt),this.FSt=new wn(this.QSt),this.qSt=0,this.zSt=[],this.VSt=void 0}constructor(e=t.KSt,i=t.jSt,s=t.Aft,n=!1){this.qSt=0,this.zSt=[],this.VSt=void 0,this.WSt=6e4,this.XSt=10,this.GSt=e,this.QSt=i,this.USt=s,this.HSt=n,this.MSt=new wn(e),this.FSt=new wn(i)}};fn.KSt=2,fn.jSt=5,fn.Aft=.1;var bX,TX=class{Uq(t){for(const e of this.YSt)e.Uq(t)}Hq(t){for(const e of this.YSt)e.Hq(t)}Vq(t,e){for(const i of this.YSt)i.Vq(t,e)}Wq(t){for(const e of this.YSt)e.Wq(t)}constructor(t){this.YSt=t}},SX=class{Uq(t){this.ZSt=t}Hq(t){this.JSt._ft(t-this.ZSt)}Vq(t){}Wq(t){}constructor(t){this.ZSt=0,this.JSt=t}},kX=class{Hq(t){this.$St=t}Vq(t,e){this.Tft._ft(t-this.$St,e.byteLength),this.$St=t}Wq(t){}Uq(t){}constructor(t){this.$St=0,this.Tft=t}},EX=class{Uq(t){}Vq(t,e){const i=e.byteLength,s=this.tkt;this.tkt=i;const n=t-this.In;this.In=t,this.ekt.BG(e);const r=!this.ekt.ikt(),h=i>=this.skt;s!==Ee.Zs.h9&&r&&h&&this.Tft._ft(n,i)}Hq(t){this.In=t}Wq(t){}constructor(t,e=0){this.ekt=new IX,this.In=0,this.tkt=0,this.Tft=t,this.skt=e}},IX=class extends oR{ikt(){return this.nkt}BG(t){this.nkt=!1,super.BG(t)}DG(t,e){this.rkt&&this.rkt!==hs.oy||(this.nkt=!0),super.DG(t,e),this.rkt=t}zG(t){return!1}GG(t){}KG(t){}constructor(...t){super(...t),this.rkt=void 0,this.nkt=!1}};(bX||(bX={})).hkt="sample";var PX=class extends Et{_O(){if(!this.rat())return;const t=Ee.V_();t-this.okt>1e3&&(this.okt=t,uh.lC._O(this.l6))}constructor(...t){super(...t),this.okt=0}},Gh=class t extends PX{_ft(t,e){const i=8*e/t;this.MSt._ft(t,i),this.FSt._ft(t,i),this.akt+=e,this._O(),this.To(new Xi(bX.hkt))}get l6(){return this.rat()?w.min(this.MSt.l6,this.FSt.l6):this.USt}rat(){return this.akt>=this.ukt}constructor(e=t.KSt,i=t.jSt,s=t.ckt,n=t.Aft){super(),this.akt=0,this.ukt=s,this.MSt=new wn(e),this.FSt=new wn(i),this.USt=n}};Gh.ckt=128e3,Gh.Aft=Ei,Gh.KSt=.5,Gh.jSt=5;var RX=class{get IO(){return this.Tft.l6}get PO(){return this.lkt.l6}RO(t){if("segment"!==t.Iw&&"preload-hint"!==t.Iw)return;const e=[new SX(this.lkt)];return"stream"!==t.sP||!function(t){return"segment"===t.Iw&&"initialization-segment"!==t.rP}(t)&&"preload-hint"!==t.Iw?e.push(new kX(this.Tft)):e.push(new EX(this.Tft,1e3)),new TX(e)}dkt(t){this.Tft=new Gh(Gh.KSt,Gh.jSt,1,t)}constructor(t){const e=t.IO>0?t.IO:Gh.Aft,i=t.PO>0?t.PO:fn.Aft;this.Tft=new Gh(Gh.KSt,Gh.jSt,1,e),this.lkt=new fn(fn.KSt,fn.jSt,i)}};var CX=class extends Xi{constructor(t){super(Hc.ETt),this.lt=t}},xX=class{iG(t,e){const i={Iw:di.wB,hM:[],xZ:t.map((t=>({rM:t}))),VZ:e};return Promise.resolve(void 0!==this.F7.iG([i]))}constructor(t){this.F7=t}},DX=(t,e,i,s,n)=>t.filter((t=>!!Bc(s,t)||1.1*t.IO<=i.IO)),NX=(t,e,i,s,n)=>t.filter((t=>{if(Bc(s,t))return!0;let r=1/0;for(const e of t.CSt){var h,o;r=w.min(r,null!=(o=null!=(h=e.PTt.fkt)?h:e.PTt._kt)?o:1/0)}r===1/0&&(r=1);const a=2*i.PO+t.IO*r/i.IO;return t.IO<=e.IO||n.gkt>a})),BX=(t,e,i,s,n)=>Jh(t,((t,e)=>e.IO-t.IO)),LX=(t,e,i,s,n)=>t.every((t=>t.Cit&&!j(t.Cit)))?Jh(t,((t,e)=>e.Cit-t.Cit)):t,OX=(t,e,i,s,n)=>0===s.length?t:Jh(t,((t,e)=>{const i=Bc(s,t)?1:0;return(Bc(s,e)?1:0)-i})),MX=(t,e,i,s,n,r)=>t.filter((t=>!t.bet||!e.bet||!(void 0!==e.bet.lSt&&void 0!==t.bet.lSt&&!Ya(e.bet.lSt,t.bet.lSt)&&!r.vkt({rM:'video/mp4; codecs="'+t.bet.lSt}))&&!(void 0!==e.bet.cSt&&void 0!==t.bet.cSt&&!Ya(e.bet.cSt,t.bet.cSt)&&!r.wkt({rM:'audio/mp4; codecs="'+t.bet.cSt})))),FX=(t,e,i,s,n)=>{if(!1===n.dat)return t;if(Ee.Zs.i9)return t;const r=Ee.Zs.s9;var h;const o=(null!=(h=null==r?void 0:r.width)?h:n.Ti)*DW;var a;const u=(null!=(a=null==r?void 0:r.height)?a:n.Ci)*DW;for(let e=0;e<t.length;e++){const i=t[e];if(void 0===i._St)return t;const s=i._St.Ci,n=i._St.Ti;if(s<=u&&n<=o)return t.slice(e,t.length)}return[]},UX=(t,e,i,s,n)=>function(t,e){const i=e.dat;if(void 0===i&&!Ee.Zs.Ks)return t;if(!1===i)return t;for(let i=0;i<t.length;i++){const s=t[i];if(void 0===s._St)return t;const n=s._St.Ci,r=s._St.Ti;if(n===e.Ci&&r===e.Ti)return t.slice(i,t.length);if(n<e.Ci||r<e.Ti)return t.slice(0===i?i:i-1,t.length)}return[]}(t,n);var Q,HX,Wu,xi,VX="AbrEvaluator",WX=class{get mkt(){return this.GF.Mq}pkt(t){this._at=t}async ykt(t,e,i,s,n){return(await this.Akt(t,e,i,s,n))[0]}async Akt(t,e,i,s,n){if(0===t.length)throw new v("AbrEvaluator - Unable to select optimal variant stream from an empty list.");ms.ySt(VX,"Performing optimal variant stream selection.");const r=this.mkt;let h=t;for(const t of this._at){const o=t(h,e,r,i,s,n);h=Os(o)?o:await o}if(0===h.length){ms.ASt(VX,"No possible variant stream remains after ABR rule evaluation. Selecting the lowest bandwidth variant stream.");return[a_(t,(t=>t.IO))]}return h}constructor(t){this.GF=t,this._at=[MX,DX,NX,BX,FX,UX,LX,OX]}};function vu(t,e){return[t,void 0!==e?t+e-1:ne]}function qX(t){return Boolean(t.NA)}function Xa(t){return Boolean(t.mtt)}function ws(t){return t?t.qnt?t.kT+"@"+t.qnt.Tn+"-"+(null!=(e=t.qnt.U)?e:""):""+t.kT:"";var e}function zX(t,e){if(e===t)return!0;if(e.kT!==t.kT)return!1;if(!t.qnt)return!0;if(e.qnt){const i=vu(t.qnt.Tn,t.qnt.U),s=vu(e.qnt.Tn,e.qnt.U);if(i[0]<=s[0])return void 0===i[1]||void 0!==s[1]&&i[1]>=s[1]}return!1}function XX(t,e){return t===e||t.kT===e.kT&&(t.qnt&&e.qnt?t.qnt.Tn===e.qnt.Tn&&t.qnt.U===e.qnt.U:t.qnt===e.qnt)}function GX(t){const e=!!t.bkt||void 0;return{o:t.o,Tkt:t.Tkt,eM:t.eM,Skt:t.Skt,ct:t.ct,kkt:t.kkt,bkt:e,Ekt:t.Ikt,Pkt:t.Rkt,Ckt:t.Ckt,xkt:t.xkt}}function QX(t,e){var i,s,n;return{cSt:null!=(i=e.cSt)?i:null==t?void 0:t.cSt,lSt:null!=(s=e.lSt)?s:null==t?void 0:t.lSt,Dkt:null!=(n=e.Dkt)?n:null==t?void 0:t.Dkt}}async function KX(t,e,i,s,n){const r=e.filter((t=>Po(t,"audio"))),h=e.filter((t=>Po(t,"video"))),o=[],a=i.map((t=>async function(t,e,i){if(!t.Nit)return;if(!t.Nkt)return;if(t.iP!==Wu.Bkt)return;const s=jX(t.Nkt);if(!s)return;if(s.gC===ns)return{ap:s,BO:[],LO:void 0,QL:t.Nit};if(s.gC===Yg&&t.Nkt===tv)return{ap:s,BO:[],LO:t.Nit,QL:void 0};{ms.zA("HLSDrmUtils","Fetching key uri "+t.Nit+".");const n=await e.pI({TI:t.Nit,oP:i});return{ap:s,BO:[await n.xL()],LO:void 0,QL:void 0}}}(t,s,n)));var u;const c=function(t,e){if(0===e.length)return t;const i=t=>{const i=e.indexOf(t.ap.gC);return i>=0?i:e.length};return Jh(t,((t,e)=>i(t)-i(e)))}((await Promise.all(a)).filter(Qf),null!=(u=null==t?void 0:t.preferredKeySystems)?u:[]);for(const e of c){const i=AV(null!=t?t:{},e.ap),s="cbcs";o.push({ap:e.ap,BO:e.BO,LO:e.LO,QL:e.QL,PM:[{initDataTypes:[e.ap.fC],audioCapabilities:bV(r,s,null==i?void 0:i.audioRobustness),videoCapabilities:bV(h,s,null==i?void 0:i.videoRobustness),persistentState:null==i?void 0:i.persistentState,distinctiveIdentifier:null==i?void 0:i.distinctiveIdentifier}]})}return o}function jX(t){return t===Du?ts:t===ko?Yr:t===$g?sA:t===tv?Zr:void 0}function YX(t){if("#"!==t[0])throw new v("HLSPlaylistParser - Could not extract M3U8 tag or comment: "+t);return t.split(":",1)[0]}function ZX(t){return"#"!==t[0]?t:t.split(":",1)[0]}function JX(t){const e=t.indexOf(":");if(-1===e||t.length<e+1)throw new v("HLSPlaylistParser - Could not extract M3U8 parameter: "+t);return t.substring(e+1)}function $X(t){const e=fu(JX(t));if(void 0===e)throw new v("HLSPlaylistParser - Could not extract M3U8 float parameter: "+t);return e}function za(t){const e={},i=/[:,] ?([A-Z0-9-]+)=([^",]+|"([^"]*)")/gi;let s=i.exec(t);for(;null!==s;){const n=s[1];let r;r=void 0!==s[3]?s[3]:s[2],null!==n?e[n]=r:ms.ASt(Yt,"Ignoring unparsable M3U8 attribute name: "+t+"."),s=i.exec(t)}return e}function tG(t,e){const i=za(t);let s,n;try{s=i.URI?Ee.Fm(i.URI,e):void 0,n=function(t){switch(t){case"AUDIO":return Q.yy;case"VIDEO":return Q.vl;case"SUBTITLES":return Q.Ay;case"CLOSED-CAPTIONS":return Q.Lkt}throw new v("HLSPlaylistParser - Could not parse M3U8 media type: "+t+".")}(i.TYPE)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".")}const r=i["GROUP-ID"],h=i.LANGUAGE,o=i["ASSOC-LANGUAGE"],a=i.NAME,u="YES"===i.DEFAULT;let c="YES"===i.AUTOSELECT;const l="YES"===i.FORCED,d=i["INSTREAM-ID"],f=i.CHARACTERISTICS,_=i.CHANNELS;if(r||ms.ASt(Yt,"#EXT-X-MEDIA tag has no GROUP-ID attribute: "+t+"."),h||ms.ASt(Yt,"#EXT-X-MEDIA tag has no LANGUAGE attribute: "+t+"."),a||ms.ASt(Yt,"#EXT-X-MEDIA tag has no NAME attribute: "+t+"."),n===Q.Lkt?(s&&ms.ASt(Yt,"#EXT-X-MEDIA tag of type CAPTIONS must not have a URI: "+t+"."),d?/^(CC[0-4])|(SERVICE([1-9]|[1-5][0-9]|6[0-3]))$/.test(d)||ms.ASt(Yt,"#EXT-X-MEDIA's INSTREAM-ID is invalid: "+t+"."):ms.ASt(Yt,"#EXT-X-MEDIA tag of type CAPTIONS must have an INSTREAM-ID attribute: "+t+".")):d&&ms.ASt(Yt,"#EXT-X-MEDIA tag must not have an INSTREAM-ID attribute if the TYPE is not CAPTIONS: "+t+"."),u&&!c&&(c=!0,i.AUTOSELECT&&ms.ASt(Yt,"#EXT-X-MEDIA tag with DEFAULT=YES attribute must have AUTOSELECT=YES attribute: "+t+".")),i.FORCED&&n!==Q.Ay&&ms.ASt(Yt,"#EXT-X-MEDIA tag must not have a FORCED attribute if the TYPE is not SUBTITLES: "+t+"."),void 0===r||void 0===a)throw new v("HLSPlaylistParser - Could not parse #EXT-X-MEDIA tag: "+t+".");return{Okt:o,Mkt:_,LTt:f,DTt:r,CTt:c,RTt:u,xTt:l,NTt:d,gs:h,l:a,Iw:n,Nit:s}}function eG(t,e,i){const s=za(t);let n,r,h;try{n=Ee.Fm(i,e),h=function(t){if(void 0===t)return;const e=t.split("x"),i=Number(e[0]),s=Number(e[1]);if(j(i)||j(s))throw new v("HLSPlaylistParser - Could not parse RESOLUTION attribute: "+t+".");return{Ti:i,Ci:s}}(s.RESOLUTION),r=function(t){if(!t)return;let e,i,s;const n=t.split(",");for(const t of n){const n=t.trim();Jo(n,"mp4a")?e="mp4a.40.05"===n?"mp4a.40.5":"mp4a.40.02"===n?"mp4a.40.2":n:"ac-3"===n||"ec-3"===n?e=n:Jo(n,"avc")||Jo(n,"hvc1")||Jo(n,"hev1")||Jo(n,"dvh")||Jo(n,"vp09")||Jo(n,"av01")?i=t:s=s?s+","+n:n}return{cSt:e,lSt:i,Dkt:s}}(s.CODECS)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".")}const o=fu(s.BANDWIDTH),a=fu(s["AVERAGE-BANDWIDTH"]),u=fu(s.SCORE),c=fu(s["FRAME-RATE"]),l=s["HDCP-LEVEL"],d=[];if(void 0!==s["ALLOWED-CPC"]){const t=s["ALLOWED-CPC"].split(",");d.push(...t.map((t=>{const e=t.split(":");return{keysystem:e[0],label:e[1]}})))}const f=s["VIDEO-RANGE"],_=s.AUDIO,g=s.VIDEO,w=s.SUBTITLES,m=s["CLOSED-CAPTIONS"];if(void 0===o?ms.ASt(Yt,"#EXT-X-STREAM-INF tag has no valid BANDWIDTH attribute: "+t+"."):void 0!==a&&a>o&&ms.ASt(Yt,"#EXT-X-STREAM-INF tag must have BANDWIDTH attribute higher or equal to AVERAGE-BANDWIDTH attribute: "+t+"."),r||ms.zA(Yt,"#EXT-X-STREAM-INF tag should have a CODECS attribute: "+t+"."),r&&r.lSt&&void 0===h&&ms.zA(Yt,"#EXT-X-STREAM-INF tag should have a valid RESOLUTION attribute if it contains video codecs: "+t+"."),void 0===l||Bc(["TYPE-0","TYPE-1","NONE"],l)||ms.ASt(Yt,"#EXT-X-STREAM-INF tag has an invalid HDCP-LEVEL attribute: "+t+"."),void 0===f||Bc(["SDR","PQ","HLG"],f)||ms.ASt(Yt,"#EXT-X-STREAM-INF tag has an invalid VIDEO-RANGE attribute: "+t+"."),void 0===o)throw new v("HLSPlaylistParser - Could not parse #EXT-X-STREAM-INF tag: "+t+".");return{Fkt:d,Ukt:_,Rit:a,IO:o,Hkt:m,bet:r,Iet:c,Vkt:l,_St:h,Cit:u,Wkt:w,Nit:n,qkt:g,zkt:f}}function iG(t,e){const i=za(t);if(!i.URI)throw new v("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".");try{return eG(t,e,i.URI)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-I-FRAME-STREAM-INF tag: "+t+".")}}function fu(t){const e=Number(t);return j(e)?void 0:e}function sG(t,e){const i=za(t);let s,n;try{s=function(t){switch(t){case"NONE":return Wu.$M;case"AES-128":return Wu.Xkt;case"SAMPLE-AES":return Wu.Bkt;case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return t}throw new v("LLHLSPlaylistParser - Could not parse M3U8 key method: "+t+".")}(i.METHOD),n=i.URI?lG(i.URI,e):void 0}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-KEY tag: "+t+".")}const r=i.KEYFORMAT,h=i.IV,o=i.KEYFORMATVERSIONS;let a,u,c,l,d;if(s!==Wu.$M){if(c=r||tv,"SAMPLE-AES-CENC"===s||"SAMPLE-AES-CTR"===s){if(jX(c)!==ts)throw new v("HLSPlaylistParser - #EXT-X-KEY tag with METHOD="+s+" is only compatible with Widevine.");a=Wu.Bkt}else a=s;u=n,l=h?iw(h):void 0,d=o?o.split("/").map((t=>Number(t))):[1]}else a=Wu.$M,(n||r||o||h)&&ms.ASt(Yt,"#EXT-X-KEY tag with METHOD=NONE must not have additional attributes: "+t+".");return{iP:a,Nit:u,Gkt:l,Nkt:c,Qkt:d}}function nG(t){const e=JX(t);if(!e)return[void 0,""];const[i,s]=e.split(",");return[fu(i),s]}function rG(t,e){const i=t.split("@"),s=fu(i[0]),n=i.length>1?fu(i[1]):e;if(void 0===s||void 0===n)throw new v("HLSPlaylistParser - Could not parse #EXT-X-BYTERANGE tag: "+t+".");return{Tn:n,U:s}}function hG(t){if(void 0!==t)return rG(t,void 0)}function oG(t,e){return rG(JX(t),e)}function aG(t,e){const i=za(t);try{const t=lG(i.URI,e);return{kT:t,qnt:hG(i.BYTERANGE)}}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-MAP tag: "+t+".")}}function uG(t){const e=JX(t);if(!e)throw new v("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");const i=new Date(e);if(!OS(i))throw new v("HLSPlaylistParser - Could not parse #EXT-X-PROGRAM-DATE-TIME tag: "+t+".");return i}function cG(t){const e=za(t),i=e["START-DATE"],s=e["END-DATE"],n=fu(e["PLANNED-DURATION"]);let r,h,o,a=fu(e.DURATION);void 0!==e["SCTE35-CMD"]&&(r=iw(e["SCTE35-CMD"]).buffer),e["SCTE35-IN"]&&(h=iw(e["SCTE35-IN"]).buffer),e["SCTE35-OUT"]&&(o=iw(e["SCTE35-OUT"]).buffer);const u="YES"===e["END-ON-NEXT"],c=function(t){const e={};for(const i of g.keys(t)){const s=t[i];void 0!==s&&Jo(i,"X-")&&(e[i]=s)}return e}(e),l=e.ID,d=e.CLASS;let f,_;if(void 0===i)ms.ASt(Yt,"Could not parse #EXT-X-DATERANGE tag without START-DATE attribute: "+i+".");else if(f=new Date(i),_=void 0!==s?new Date(s):void 0,OS(f)||ms.ASt(Yt,"Could not parse EXT-X-DATERANGE tag with invalid START-DATE attribute: "+f+"."),void 0!==a){const e=new Date(f.getTime()+1e3*a);_?_.getTime()!==e.getTime()&&(ms.ASt(Yt,"DURATION and END-DATE attributes of #EXT-X-DATERANGE tag are not aligned, updating the END-DATE: "+t+"."),_=e):_=e}else _&&(a=(f.getTime()-_.getTime())/1e3);if(u&&(e.CLASS||ms.ASt(Yt,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute without CLASS attribute: "+t+"."),e.DURATION&&ms.ASt(Yt,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with DURATION attribute: "+t+"."),_&&ms.ASt(Yt,"Could not parse #EXT-X-DATERANGE tag with END-ON-NEXT attribute with END-DATE attribute: "+t+".")),void 0===l&&ms.ASt(Yt,"Could not parse #EXT-X-DATERANGE tag without valid ID attribute: "+t+"."),void 0===l||void 0===f)throw new v("HLSPlaylistParser - Could not parse #EXT-X-DATERANGE tag: "+t+".");return{o:l,Tkt:d,eM:f,Skt:_,ct:a,kkt:n,Rkt:r,xkt:h,Ckt:o,bkt:u,Ikt:c}}function lG(t,e){if(void 0===t)throw new v("HLSPlaylistParser - Unable to parse URL from string: "+t+".");return Ee.Fm(t,e)}function dG(t,e){const i=za(t),s=fu(i.DURATION),n=lG(i.URI,e),r=hG(i.BYTERANGE),h="YES"===i.INDEPENDENT,o="YES"===i.GAP;if(void 0===s)throw new v("HLSPlaylistParser - Unable to parse #EXT-X-PART without valid DURATION: "+t);return{ct:s,Nit:{kT:n,qnt:r},Kkt:h,jkt:o}}function fG(t){const e=za(t);return{Ykt:"YES"===e["CAN-BLOCK-RELOAD"],Zkt:fu(e["CAN-SKIP-UNTIL"]),Jkt:"YES"===e["CAN-SKIP-DATERANGES"],$kt:fu(e["HOLD-BACK"]),tEt:fu(e["PART-HOLD-BACK"])}}function _G(t,e){const i=za(t);if(void 0===i.URI)throw new v("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");const s=lG(i.URI,e),n=fu(i["LAST-MSN"]),r=fu(i["LAST-PART"]);if(void 0===n)throw new v("HLSPlaylistParser - Could not parse #EXT-X-RENDITION-REPORT: "+t+".");return{Nit:s,eEt:n,iEt:r}}function gG(t,e){var i;const s=za(t),n=fu(s["SKIPPED-SEGMENTS"]),r=null==(i=s["RECENTLY-REMOVED-DATERANGES"])?void 0:i.split("\t");if(!n)throw new v("HLSPlaylistParser - Could not parse #EXT-X-SKIP tag without valid SKIPPED-SEGMENTS attribute: "+t+".");return{sEt:n,nEt:r,rEt:e}}function vG(t){const e=fu(za(t)["PART-TARGET"]);if(void 0===e)throw new v("HLSPlaylistParser - Could not parse #EXT-X-PART-TARGET-DURATION tag: "+t+".");return e}function wG(t){switch(JX(t)){case"VOD":return xi.hEt;case"EVENT":return xi.oEt;default:return ms.ASt(Yt,"Found #EXT-X-PLAYLIST-TYPE tag with invalid value: "+t+"."),xi.YT}}function mG(t,e){const i=za(t);let s,n;try{s=function(t){if(void 0===t)throw new v("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".");if("MAP"===t)return HX.aEt;if("PART"===t)return HX.uEt;throw new v("HLSPlaylistParser - Could not parse PRELOAD-HINT type: "+t+".")}(i.TYPE),n=lG(i.URI,e)}catch(e){throw new v("HLSPlaylistParser - Could not parse #EXT-X-PRELOAD-HINT tag: "+t+".")}const r=fu(i["BYTERANGE-START"]),h=fu(i["BYTERANGE-LENGTH"]);let o;return void 0===r&&void 0===h||(o={Tn:r||0,U:h}),{Iw:s,Nit:{kT:n,qnt:o}}}!function(t){t[t.yy=0]="yy",t[t.vl=1]="vl",t[t.Ay=2]="Ay",t[t.Lkt=3]="Lkt"}(Q||(Q={})),function(t){t[t.aEt=0]="aEt",t[t.uEt=1]="uEt"}(HX||(HX={})),function(t){t[t.$M=0]="$M",t[t.Xkt=1]="Xkt",t[t.Bkt=2]="Bkt"}(Wu||(Wu={})),function(t){t[t.YT=0]="YT",t[t.hEt=1]="hEt",t[t.oEt=2]="oEt"}(xi||(xi={}));var pG=class t{cEt(){const t=this.lEt[this.dEt];return this.dEt+=1,t}fEt(){return this.lEt[this.dEt]}Iy(){const e=new t("");return e.dEt=0,e.lEt=this.lEt.slice(this.dEt),e}static _Et(t){if(!t)return[];return t.split(/[\r\n]+/).map((t=>t.trim())).filter((t=>t))}constructor(e){this.dEt=0,this.lEt=t._Et(e)}};function yG(t,e,i){const s=t.Nit;let n=t.oA,r=t.gEt,h=t.Tn;switch(i){case"#EXT-X-VERSION":n=function(t){const e=$X(t);return j(e)?(ms.ASt(Yt,"Playlist version is NaN: "+t+"."),1):e}(e);break;case"#EXT-X-INDEPENDENT-SEGMENTS":r=!0;break;case"#EXT-X-START":h=function(t){const e=za(t),i=fu(e["TIME-OFFSET"]);if(void 0===i)throw new v("HLSPlaylistParser - #EXT-X-START is missing a TIME-OFFSET: "+t+".");return{vEt:i,wEt:"YES"===e.PRECISE}}(e);break;case"#EXT-X-DEFINE":ms.ASt(Yt,"Ignoring unsupported #EXT-X-DEFINE: "+e+".");break;default:ms.zA(Yt,"Ignoring unrecognized line or comment: "+e+".")}return{Nit:s,oA:n,gEt:r,Tn:h}}function AG(t,e){return t.map((t=>t.iP===Wu.$M||t.Gkt?t:Me({},t,{Gkt:bG(e)})))}function bG(t){const e=new DataView(new ArrayBuffer(16)),i=new Ko;return i.Ey(8),Hv(e,i,Te.fromNumber(t)),new x(e.buffer)}function TG(t,e,i){ms.zA(Yt,"Parsing M3U8 playlist at "+t+".");const s=new pG(i);if("#EXTM3U"!==s.cEt())throw new v("HLSPlaylistParser - Could not parse M3U8 playlist. Playlist does not start with #EXTM3U.");return function(t){return/^#EXT-X-(MEDIA|STREAM-INF|I-FRAME-STREAM-INF|SESSION-DATA|SESSION-KEY):/m.test(t)}(i)?function(t,e){let i;try{i=Ee.Fm(t)}catch(e){throw ms.ASt(Yt,"The master playlist has no valid base URI: "+t+"."),new v("HLSPlaylistParser - Could not parse HLS master playlist: "+t)}let s={Nit:i,gEt:void 0,Tn:void 0,oA:void 0};const n=[],r=[],h=[],o=[];for(;;){const t=e.cEt();if(!t)break;try{const a=YX(t);switch(a){case"#EXT-X-MEDIA":{const e=tG(t,i);n.push(e);break}case"#EXT-X-STREAM-INF":{const s=eG(t,i,e.cEt());r.push(s);break}case"#EXT-X-I-FRAME-STREAM-INF":{const e=iG(t,i);h.push(e);break}case"#EXT-X-SESSION-DATA":ms.ASt(Yt,"Ignoring unsupported #EXT-X-SESSION-DATA: "+t+".");break;case"#EXT-X-SESSION-KEY":{const e=sG(t,i);o.push(e);break}default:s=yG(s,t,a)}}catch(e){ms.ASt(Yt,"Ignoring unparsable line: "+t,e)}}let a=s.oA;var u;const c=null!=(u=s.gEt)&&u,l=s.Tn;return void 0===a&&(ms.ASt(Yt,"The playlist has no #EXT-X-VERSION, assuming version is 2."),a=2),a>=8&&(r.some((t=>void 0!==t.Cit))||h.some((t=>void 0!==t.Cit)))&&(r.some((t=>void 0===t.Cit))||h.some((t=>void 0===t.Cit)))&&ms.ASt(Yt,"If one master playlist variant stream has a SCORE, all variants should have it."),{Nit:i,oA:a,gEt:c,Tn:l,mEt:h,pEt:o,NA:n,yEt:r}}(t,s):function(t,e,i){let s={Nit:t,gEt:void 0,Tn:void 0,oA:void 0};const n=[];let r,h,o,a,u=!1,c=!1;const l=[],d=Wn();let f,_,g,w,m,p,y,A,b,T=[],S=[],k=!1,E=!1;const I=[],P=[];let R,C,x,D,N,B=0,L=!1,O=xi.YT,M=!1,F=0;try{N=Ee.Fm(t)}catch(e){throw ms.ASt(Yt,"The media playlist has no valid base URI: "+t+".",e),new v("HLSPlaylistParser - Could not parse HLS media playlist.")}const U=i.Iy();for(;void 0===C||void 0===x;){const t=U.cEt();if(!t)break;try{switch(ZX(t)){case"#EXT-X-MEDIA-SEQUENCE":C=$X(t);break;case"#EXT-X-DISCONTINUITY-SEQUENCE":x=$X(t)}}catch(e){ms.ASt(Yt,"Ignoring unparsable line: "+t,e)}}void 0===C&&(ms.zA(Yt,"#EXT-X-MEDIA-SEQUENCE tag is missing, assuming first segment media sequence number is 0."),C=0),void 0===x&&(ms.zA(Yt,"#EXT-X-DISCONTINUITY-SEQUENCE tag is missing, assuming first segment discontinuity sequence number is 0."),x=0);let H=C,V=x;for(;;){const t=i.cEt();if(!t)break;let e=!1;try{const i=ZX(t);switch(i){case"#EXTINF":e=!0,[f,_]=nG(t);break;case"#EXT-X-BYTERANGE":e=!0,g=oG(t,B),g&&(B=g.Tn+g.U);break;case"#EXT-X-DISCONTINUITY":e=!0,k=!0,V++;break;case"#EXT-X-KEY":{var W;e=!0;const i=sG(t,N);if(i.iP===Wu.$M){d.clear(),b=void 0;break}var q;const s=null!=(q=null==(W=i.Nkt)?void 0:W.toString())?q:"identity";d.set(s,i),i.iP===Wu.Xkt&&(b=i);break}case"#EXT-X-MAP":e=!0,m=aG(t,N),p=b;break;case"#EXT-X-PROGRAM-DATE-TIME":e=!0,y=uG(t);break;case"#EXT-X-GAP":e=!0,E=!0;break;case"#EXT-X-BITRATE":e=!0,A=$X(t);break;case"#EXT-X-TARGETDURATION":r=$X(t);break;case"#EXT-X-DATERANGE":{const e=cG(t);n.push(e);break}case"#EXT-X-PART":{e=!0;const i=dG(t,N);S.push(i);break}case"#EXT-X-PRELOAD-HINT":{const e=mG(t,N);I.push(e);break}case"#EXT-X-SKIP":{l.length>0&&ms.ASt(Yt,"#EXT-X-SKIP must appear before any #EXTINF tags."),e=!0;const i=gG(t,H);F=i.sEt,D=i.nEt,H+=i.sEt;break}case"#EXT-X-SERVER-CONTROL":{const e=fG(t);u=e.Ykt,h=e.Zkt,c=e.Jkt,o=e.$kt,a=e.tEt;break}case"#EXT-X-RENDITION-REPORT":{const e=_G(t,N);P.push(e);break}case"#EXT-X-PART-INF":R=vG(t);break;case"#EXT-X-MEDIA-SEQUENCE":e&&ms.ASt(Yt,"#EXT-X-MEDIA-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-DISCONTINUITY-SEQUENCE":e&&ms.ASt(Yt,"#EXT-X-DISCONTINUITY-SEQUENCE must appear before any media segment tags.");break;case"#EXT-X-ENDLIST":L=!0;break;case"#EXT-X-PLAYLIST-TYPE":O=wG(t);break;case"#EXT-X-I-FRAMES-ONLY":M=!0;break;default:if(Jo(i,"#"))s=yG(s,t,i);else{w=Ee.Fm(t,N);const e=m?{Nit:m,AEt:p}:void 0,i={pEt:AG(v_(d),H),WE:T,bEt:S,ct:f,uM:_,TEt:k,Nit:{qnt:g,kT:w},SEt:e,kEt:y,jkt:E,EEt:A,rEt:H,IEt:V};l.push(i),H++,T=[],S=[],f=void 0,_=void 0,k=!1,g=void 0,w=void 0,y=void 0,E=!1,A=void 0}}}catch(e){ms.ASt(Yt,"Ignoring unparsable line: "+t,e)}}if(S.length){const t=m?{Nit:m,AEt:b}:void 0,e={pEt:AG(v_(d),H),WE:T,bEt:S,ct:f,uM:_,TEt:k,Nit:void 0,SEt:t,kEt:y,jkt:E,EEt:A,rEt:H,IEt:V};l.push(e)}let z=s.oA;var X;const G=null!=(X=s.gEt)&&X,Q=s.Tn;void 0===z&&(ms.ASt(Yt,"The media playlist has no #EXT-X-VERSION tag, assuming version is 2."),z=2),void 0===r&&ms.ASt(Yt,"Could not parse the HLS media playlist: no #EXT-X-TARGET-DURATION tag was found.");const K=l.length,j=K>0;j||ms.ASt(Yt,"The HLS media playlist contains no segments.");const Y=j&&l[K-1].bEt.length>0;return Y&&void 0===R&&ms.ASt(Yt,"Could not parse the HLS media playlist: no #EXT-X-PART-TARGET-DURATION tag was found, but it is required when some or all segments contain parts."),Y&&void 0===a&&ms.ASt(Yt,"Could not parse the HLS media playlist: The #EXT-X-SERVER-CONTROL tag has no PART-HOLDBACK attribute, but it is required when some or all segments contain parts."),{Ykt:u,Zkt:h,Jkt:c,PEt:n,IEt:x,REt:L,gEt:G,$kt:o,CEt:M,rEt:C,sEt:F,tEt:a,fkt:R,xEt:O,DEt:I,nEt:D,NEt:P,BEt:r,mtt:l,Tn:Q,Nit:N,LEt:e,oA:z}}(t,e,s)}var SG=class{get Nit(){return this.PTt.Nit}get bet(){return this.OEt}set bet(t){this.OEt=t?EG(t):void 0,this.MEt=!0}get FEt(){return this.MEt}get UEt(){if(!this.HEt.length)return d.Nl();var t,e;const i=null!=(e=rr(this.HEt,(e=>null!=(t=e.PTt.VEt)?t:0)))?e:this.CSt[0],s=i.PTt.mtt;if(!s.length||s.length<2)return d.Nl();const n=i.PTt.REt?s[0].PS:s[1].PS;var r,h;const o=s[s.length-1].RS-this.CSt.reduce(((t,e)=>w.max(null!=(h=null!=(r=e.PTt.tEt)?r:e.PTt.$kt)?h:0,t)),0);return o<n?d.Nl():new d([n,o])}get CSt(){return this.HEt}get SSt(){return this.HEt.filter((t=>t.Iw===Q.yy))}get kSt(){return this.HEt.filter((t=>t.Iw===Q.vl))}get WEt(){return this.HEt.filter((t=>t.Iw===Q.Ay))}get qEt(){return this.HEt.filter((t=>t.Iw===Q.Lkt))}zEt(t){for(const e of this.HEt){const i=e.PTt.zEt(t);if(void 0!==i)return i}}XEt(t){for(const e of this.HEt){const i=e.PTt.XEt(t);if(void 0!==i)return i}}GEt(t){me(this.HEt,t)}constructor(t,e,i){var s,n,r,h;this.o=kG++,this.Cit=void 0,this._St=void 0,this.Rit=void 0,this.MEt=!1,this.HEt=[],this.PTt=e,this.IO=t.IO,this.Rit=t.Rit,this.Cit=t.Cit,this.OEt=t.bet?EG(t.bet):void 0,this._St=t._St,this.Iet=t.Iet,this.Ukt=null!=(s=t.Ukt)?s:"QEt"+this.o,this.qkt=null!=(n=t.qkt)?n:"KEt"+this.o,this.Wkt=null!=(r=t.Wkt)?r:"jEt"+this.o,this.Hkt=null!=(h=t.Hkt)?h:"YEt"+this.o,this.HEt=i}},kG=0;function EG(t){return Me({},t,{lSt:t.lSt?zp(t.lSt):void 0})}var IG,PG=class{get PS(){var t;return this.US+(null!=(t=this.ZEt)?t:0)}get JEt(){return this.$Et}get pEt(){return this.tIt.pEt}eIt(t,e){this.US=t,this.$Et=e}constructor(t,e,i,s,n){this.m6=void 0,this.tIt=t,this.iIt=e,this.US=i,this.$Et=s,this.ct=n.ct,this.Nit=n.Nit,this.Kkt=n.Kkt,this.jkt=n.jkt}},RG=class{get PS(){var t;return this.US+(null!=(t=this.sIt)?t:0)}get nIt(){return this.US}get ct(){return this.Zl}get Nit(){return this.rIt}get hIt(){return this.oIt}get JEt(){return this.$Et}get bEt(){return this.aIt}get uIt(){return this.cIt}get RS(){var t;return this.PS+(null!=(t=this.Zl)?t:this.cIt)}set ZEt(t){this.sIt=t;for(const e of this.aIt)e.ZEt=t}get ZEt(){return this.sIt}lIt(t){return this.aIt[t]}dIt(t){for(let e=0;e<this.aIt.length;e++){const i=this.aIt[e],s=i.PS,n=s+i.ct;if(s<=t&&t<=n)return t===n&&e+1<this.aIt.length?this.aIt[e+1]:i}}fIt(t){for(let e=this.aIt.length-1;e>=0;e--){const i=this.aIt[e];if(i.PS<=t)return i}}_It(t){let e=this.fIt(t);for(;e&&!e.Kkt&&e.iIt>0;)e=this.lIt(e.iIt-1);return e}eIt(t,e,i){const s=t.bEt.length!==this.aIt.length||i!==this.$Et;this.oIt=e,this.$Et=i,this.Zl=t.ct,null!=this.kEt||(this.kEt=t.kEt),void 0===this.rIt&&(this.rIt=t.Nit),s&&this.gIt(t.bEt)}gIt(t){this.aIt.length>t.length&&(this.aIt.length=t.length);let e=0;for(let i=0;i<t.length;i++){const s=t[i],n=this.$Et&&i===t.length-1,r=this.US+e;if(i<this.aIt.length)this.aIt[i].eIt(r,n);else{const t=new PG(this,i,r,n,s);this.aIt.push(t)}e+=s.ct}this.cIt=e}vIt(){Ce(this.aIt),this.cIt=0}constructor(t,e,i,s,n){this.m6=void 0,this.aIt=[],this.cIt=0,this.US=t,this.SEt=n.SEt,this.oIt=i,this.$Et=s,this.Zl=n.ct,this.kEt=n.kEt,this.rIt=n.Nit,this.jkt=n.jkt,this.rEt=n.rEt,this.TEt=n.TEt,this.IEt=e,this.pEt=n.pEt,this.gIt(n.bEt)}};!function(t){t.wIt="YES",t.mIt="v2"}(IG||(IG={}));var tc=class extends Fe{};var CG=class extends Da{get ma(){return this.Gu||(this.Gu=function(t){return oe(dn(t),{get content(){return t.O},get class(){return t.Tkt},get startDate(){return t.eM},get endDate(){return t.Skt},get duration(){return t.ct},get plannedDuration(){return t.kkt},get endOnNext(){return t.bkt},get scte35Cmd(){return t.Pkt},get scte35Out(){return t.Ckt},get scte35In(){return t.xkt},get customAttributes(){return t.Ekt}})}(this)),this.Gu}get Tkt(){return this.pIt}get eM(){return this.yIt}get Skt(){return this.AIt}get ct(){return this.Zl}get kkt(){return this.bIt}get bkt(){return this.TIt}get Pkt(){return this.SIt}get Ckt(){return this.kIt}get xkt(){return this.EIt}get Ekt(){return this.IIt}Kn(t){let e=!1;var i;(void 0===this.pIt&&void 0!==t.Tkt&&(e=!0,this.pIt=t.Tkt),void 0===this.AIt&&void 0!==t.Skt&&(e=!0,this.AIt=t.Skt),void 0===this.Zl&&void 0!==t.ct&&(e=!0,this.Zl=t.ct),void 0===this.bIt&&void 0!==t.kkt&&(e=!0,this.bIt=t.kkt),!this.TIt&&t.bkt&&(e=!0,this.TIt=t.bkt),e=this.updateCustomAttributes(t,e),void 0===this.SIt&&void 0!==t.Pkt&&(e=!0,this.SIt=t.Pkt),void 0===this.kIt&&void 0!==t.Ckt&&(e=!0,this.kIt=t.Ckt),void 0===this.EIt&&void 0!==t.xkt&&(e=!0,this.EIt=t.xkt),this.PIt(),this.RIt(),this.CIt(),e)&&(this.To(new nr(this)),null==(i=this.HS)||i.To(new Rm(this)))}updateCustomAttributes(t,e){let i=e;if(t.Ekt)for(const e of g.keys(t.Ekt))void 0===this.IIt[e]&&(i=!0,this.IIt[e]=t.Ekt[e]);return i}PIt(){this.Zl&&!this.AIt&&(this.AIt=new Date(this.yIt.getTime()+Mh(this.Zl)))}RIt(){this.AIt&&!this.Zl&&(this.Zl=MS(this.AIt.getTime()-this.yIt.getTime()))}CIt(){this.WS===1/0&&(this.AIt||this.Zl)&&(this.WS=xG(this.US,this.Zl,this.yIt,this.AIt))}constructor(t,e){super(e,xG(e,t.ct,t.eM,t.Skt),void 0,!1,t.o),this.pIt=t.Tkt,this.yIt=t.eM,this.AIt=t.Skt,this.Zl=t.ct,this.bIt=t.kkt,this.TIt=Boolean(t.bkt),this.IIt=t.Ekt||{},this.SIt=t.Pkt,this.kIt=t.Ckt,this.EIt=t.xkt,this.PIt(),this.RIt()}};function xG(t,e,i,s){return Qf(e)?t+e:s?t+(MS(s.getTime())-MS(i.getTime())):1/0}var DG=class extends kx{Kn(t,e){NG(this,BG(t),e)}vP(t){LG(this.L.Kv,t),super.vP(t)}constructor(){super(void 0,void 0,Ca.DATE_RANGE)}};function NG(t,e,i){const s=t.L.Kv;for(let i=s.length-1;i>=0;i--){const n=s[i],r=pi(e,(t=>t.o===n.o));r?n.Kn(r):t.EI(n)}for(const s of e){const e=s.eM;if(void 0!==e&&!t.oJ(s.o)){const n=i(e),r=new CG(s,n);LG(t.L.Kv,r),t.vP(r)}}}function BG(t){const e=Wn(),i=[];for(const s of t)if(e.has(s.o)){const t=e.get(s.o),i=Me({},t,U_(s),{Ekt:Me({},t.Ekt,s.Ekt)});e.set(s.o,i)}else e.set(s.o,s),i.push(s.o);return i.map((t=>e.get(t)))}function LG(t,e){const i=go(t,(t=>t.Tkt===e.Tkt));i&&i.bkt&&i.Kn({o:i.o,Skt:e.eM})}var OG=String.fromCharCode(95),MG=OG+"HLS_msn",FG=OG+"HLS_part",UG=OG+"HLS_skip",HG="HLSMediaPlaylist",VG=class{get REt(){return Boolean(pi(this.vnt,(t=>t.JEt)))}get ct(){return this.Zl}get kl(){return this.RZ}get xIt(){return this.DIt}get _kt(){return this.NIt}get fkt(){return this.BIt}get $kt(){return this.REt?0:this.LIt?this.LIt:this.NIt?3*this.NIt:void 0}get tEt(){var t;return null!=(t=this.OIt)?t:this.BIt?3*this.BIt:void 0}get MIt(){if(this.REt)return;if(0===this.vnt.length)return;const t=this.vnt[this.vnt.length-1];var e,i;const s=null!=(i=null!=(e=this.tEt)?e:this.$kt)?i:0;return t.RS-s}get Ykt(){return this.FIt}get Zkt(){return this.UIt}get Jkt(){return this.HIt}get xEt(){return this.VIt}get WIt(){return void 0!==this.fkt}get qIt(){if(this.REt)return!0;const t=Ee.V_()/1e3,e=this.VEt,i=this.zIt;return void 0!==e&&t-e<i}get VEt(){return this.XIt}get ZEt(){return this.sIt}get zIt(){var t;return null!=(t=this.NIt)?t:void 0===this.XIt?5:1}get mtt(){return this.vnt}get PEt(){return this.GIt}get QIt(){return this.KIt}set QIt(t){this.KIt=t}get Tn(){return this.JE}get jIt(){return this.YIt}uSt(t){if(!t)return this.Nit;const e=Ee.Rh(this.Nit);return void 0!==t.rEt&&e.searchParams.append(MG,String(t.rEt)),void 0!==t.ZIt&&e.searchParams.append(FG,String(t.ZIt)),void 0!==t.zy&&e.searchParams.append(UG,t.zy),e.href}aft(t){const e=this.vnt;if(0===e.length)return;const i=t-e[0].rEt;return i<0||i>=e.length?void 0:e[i]}JIt(t){if(0===this.vnt.length)return;const e=IU(WG.lC,this.vnt,t);if(!(e<0)){const i=this.vnt[e];return t===i.RS&&e+1<this.vnt.length?this.vnt[e+1]:i}{const e=this.vnt[this.vnt.length-1];if(t===e.RS)return e}}$It(t){if(0===this.vnt.length)return;const e=this.vnt[0];if(t<e.RS)return e;const i=this.vnt[this.vnt.length-1];return t>=i.PS?i:this.JIt(t)}zEt(t){const e=this.$It(t);if(void 0===e)return;for(let i=e.rEt-this.vnt[0].rEt;i>=0;i--){const e=this.vnt[i];if(void 0!==e.kEt)return new Date(e.kEt.getTime()+1e3*(t-e.PS))}}XEt(t){let e;for(const i of this.vnt)if(qG(i))if(void 0===e)e=i;else{if(!(i.kEt.getTime()<=t.getTime()))break;e=i}if(void 0!==e)return e.PS+(t.getTime()-e.kEt.getTime())/1e3}tPt(t){switch(t){case HX.aEt:return this.ePt;case HX.uEt:return this.iPt;default:return}}eIt(t){var e;void 0===this.NIt&&(this.NIt=null!=(e=t.BEt)?e:this.sPt(t));void 0===this.LIt&&void 0!==t.$kt&&(this.LIt=t.$kt),void 0===this.BIt&&void 0!==t.fkt&&(this.BIt=t.fkt),void 0===this.OIt&&void 0!==t.tEt&&(this.OIt=t.tEt),this.FIt=t.Ykt,this.UIt=t.Zkt,this.HIt=t.Jkt,this.VIt=t.xEt,this.Ant(t),this.nPt(t);const i=pi(t.DEt,(t=>t.Iw===HX.aEt)),s=pi(t.DEt,(t=>t.Iw===HX.uEt));this.ePt=i?{Nit:i.Nit,Iw:i.Iw,IEt:t.IEt}:void 0,this.iPt=s?{Nit:s.Nit,Iw:s.Iw,IEt:t.IEt}:void 0,this.XIt=Ee.V_()/1e3,this.rPt(),null!=this.JE||(this.JE=t.Tn)}rPt(){this.DIt=this.hPt(),this.RZ=this.oPt(this.DIt),this.Zl=this.aPt()}hPt(){const t=this.mtt;if(0===t.length)return d.Nl();const e=t[0].PS,i=t[t.length-1].RS;return new d([e,i])}oPt(t){if(0===t.U||this.REt)return t;const e=t.Tn(0);var i,s;const n=t.Pn(0)-(null!=(s=null!=(i=this.tEt)?i:this.$kt)?s:0);return n<e?d.OF(e):new d([e,n])}aPt(){return 0===this.vnt.length?0:this.REt?t_(this.vnt,(e=>null!=(t=e.ct)?t:e.uIt)):1/0;var t}sPt(t){let e;for(const i of t.mtt)if(void 0!==i.ct){const t=w.max(1,w.round(i.ct));(void 0===e||e<t)&&(e=t)}if(void 0===e)throw new v("HLSModel - Could not determine required segment target duration.");return e}Ant(t){if(0===t.mtt.length)return Ce(this.vnt),void this.uPt();const e=this.cPt(t);if(!e)return;let i,s,n;e.lPt>0&&this.vnt.splice(0,e.lPt);const r=t.sEt;if(r>0){if(r>this.vnt.length)throw new tc("New playlist skips over missing segments.");const e=this.vnt[r-1];if(void 0===e.ct)throw new tc("New playlist skips over an incomplete segment.");i=e.nIt+e.ct,n=e.IEt-t.IEt,s=r;for(let t=0;t<r;t++)this.vnt[t].vIt()}else i=e.dPt,n=0,s=0;for(let e=0;e<t.mtt.length;e++,s++){const r=t.mtt[e],h=0===e,o=t.REt&&e===t.mtt.length-1,a=r.ct,u=r.IEt+n;if(s<this.vnt.length){const t=this.vnt[s];0,t.eIt(r,h,o)}else{let t=r;if(this.vnt.length>0&&void 0===t.SEt){t=Me({},t,{SEt:this.vnt[this.vnt.length-1].SEt})}const e=new RG(i,u,h,o,t);e.ZEt=this.sIt,this.vnt.push(e)}void 0!==a&&(i+=a)}}cPt(t){if(0===this.vnt.length)return{lPt:0,dPt:0};const e=this.vnt[0].rEt,i=this.vnt[this.vnt.length-1].rEt,s=t.mtt[0].rEt-t.sEt,n=t.mtt[t.mtt.length-1].rEt;let r=0,h=0;if(s<e){const i=this.mtt[0].kEt,n=t.mtt[0].kEt;if(!(i&&n&&i<n))return void ms.ASt(HG,"Ignoring older playlist (first media sequence number is "+s+", but previous playlist already started at "+e+")");r=this.vnt.length,this.uPt()}else{if(n<i)return void ms.ASt(HG,"Ignoring older playlist (last media sequence number is "+n+", but previous playlist already ended at "+i+")");if(i<s){var o;h=null!=(o=function(t,e){const i=go(t,(t=>void 0!==t.kEt));if(void 0===i)return;const s=function(t){let e=0;for(const s of t){if(s.TEt)return;if(s.kEt)return[s,e];var i;e+=null!=(i=s.ct)?i:0}return}(e.mtt);if(void 0===s)return;const[n,r]=s;if(i.IEt!==n.IEt)return;const h=(n.kEt.getTime()-i.kEt.getTime())/1e3;return i.nIt+h-r}(this.vnt,t))?o:function(t,e,i){const s=t[t.length-1];var n;const r=null!=(n=s.ct)?n:w.max(i,s.uIt),h=i*(e-s.rEt-1);return s.nIt+r+h}(this.vnt,s,this.NIt),ms.ySt(HG,"New playlist (starting at "+s+") is entirely after previous playlist (ending at "+i+"), resetting playlist and restarting at "+h+"s"),r=this.vnt.length,this.uPt()}else{0;const t=rs(this.vnt,(t=>t.rEt===s));0,h=this.vnt[t].nIt,t>0&&(r=t)}}return{lPt:r,dPt:h}}nPt(t){let e=t.PEt.map(GX);if(t.Jkt&&t.LEt.zy===IG.mIt&&(e=this.GIt.concat(e)),this.GIt=BG(e),t.nEt)for(const e of t.nEt){const t=rs(this.GIt,(t=>t.o===e));t>=0&&hn(this.GIt,t)}}fPt(t,e){if(this.sIt!==t){this.sIt=t;for(const t of this.vnt)t.ZEt=this.sIt;this.rPt()}this.YIt=e}uPt(){this.sIt=void 0,this.YIt=void 0}constructor(t,e){this.XIt=void 0,this.ePt=void 0,this.iPt=void 0,this.NIt=void 0,this.BIt=void 0,this.LIt=void 0,this.OIt=void 0,this.vnt=[],this.GIt=[],this.FIt=!1,this.UIt=void 0,this.HIt=!1,this.VIt=xi.YT,this.RZ=d.Nl(),this.DIt=d.Nl(),this.Zl=void 0,this.KIt=-1/0,this.YIt=void 0,this.Nit=t,this.JE=e}},WG=class t{static get lC(){return null!=this.Wtt||(this.Wtt=new t),this.Wtt}dnt(t){return t.PS}fnt(t){return t.RS}_nt(t,e){return Vi(t,e)}gnt(t,e,i){return(t-e)/(i-e)}};function qG(t){return void 0!==t.kEt}function ni(t){return void 0!==t.bEt}function zG(t){return ni(t)?t.hIt:0===t.iIt&&t.tIt.hIt}function XG(t,e){return ni(t)?ni(e)?t.rEt+1===e.rEt:0===e.iIt&&XG(t,e.tIt):t.iIt===t.tIt.bEt.length-1?XG(t.tIt,e):!ni(e)&&t.tIt===e.tIt&&t.iIt+1===e.iIt}var GG=class{_Pt(t){const e=this.gPt.get(t);return void 0!==e&&QG(e)}vPt(t){return this.mPt(t).wPt.jf}pPt(t){const e=this.gPt.get(t);if(!e||!QG(e))throw new v("LLHLSPlayer - Missing timestamp mapping for discontinuity #"+t);return e}yPt(t){return this.pPt(t).NE}APt(t,e){const i=ni(e)?e:e.tIt,s=this.pPt(i.IEt);let n=t.fS(s.NE);if(s.bPt){const t=yi.fE(e.PS).Ak(n);if(t.wk().ck(Km())){const e=w.round(t.hk()/Qm().hk());n=n.fS(Qm().Yk(e))}}return n}TPt(t,e){return this.APt(t,e).Ak(t)}SPt(t,e,i,s,n){const r=this.mPt(t);void 0===r.NE&&(r.kPt.some((t=>t.rot===e))||(r.kPt.push({rot:e,EPt:i,IPt:s.aE(i.IA),bPt:n}),this.PPt(r)))}PPt(t){if(t.NE||!this.RPt(t))return;const e=u_(t.kPt,KG);Ce(t.kPt),t.NE=e.IPt.Ak(e.EPt),t.bPt=e.bPt,t.wPt.Lf()}RPt(t){return this.CPt.length>0&&this.CPt.every((e=>t.kPt.some((t=>t.rot===e))))}mPt(t){if(this.gPt.has(t))return this.gPt.get(t);{const e={NE:void 0,bPt:!1,wPt:new $i,kPt:[]};return this.gPt.set(t,e),e}}xPt(t){this.CPt=t,this.gPt.forEach((t=>this.PPt(t)))}Ou(){this.gPt.forEach((t=>t.wPt.Jl())),this.gPt.clear()}constructor(){this.CPt=[],this.gPt=Yh()}};function QG(t){return void 0!==t.NE}function KG(t,e){return t.bPt||e.bPt?function(t,e){let i=t.Ak(e);return t.Tk()||e.Tk()||(i.dk(Km())?i=i.Ak(Qm()):i.vk(Km().yk())&&(i=i.fS(Qm()))),i}(t.EPt,e.EPt).lk(yi.Rk):t.EPt.lk(e.EPt)}var jG=class{get DPt(){return this.NPt}get TSt(){return this.BPt}get zT(){return this.LPt}eIt(t,e){if(Xa(t))if(0===this.BPt.length)this.OPt(t);else{if(!e)return void ms.ASt("HLSModel","No rendition was provided to update the playlist. Ignoring the update.");e.PTt.eIt(t)}else{if(0!==this.BPt.length)return void ms.ASt("HLSModel","Master playlist can only be applied once. Ignoring the update.");this.MPt(t)}}OPt(t){const e=this.FPt(t.Nit);e.eIt(t);const i=this.UPt(Q.yy,e),s=this.UPt(Q.vl,e),n=new SG({Nit:e.Nit,IO:0,Rit:0,Cit:NaN,bet:void 0,_St:void 0,Iet:0,Fkt:[],Vkt:void 0,zkt:void 0,Ukt:void 0,qkt:void 0,Wkt:void 0,Hkt:void 0},e,[i,s]);this.BPt.push(n)}MPt(t){this.NPt.push(...t.pEt);const e=this.HPt(t);for(const i of t.yEt){const s=e.filter((t=>ZG(t,i)));this.VPt(i,s);const n=new SG(i,this.FPt(i.Nit,t.Tn),s);this.BPt.push(n)}}FPt(t,e){let i=this.WPt.get(t);return void 0===i&&(i=new VG(t,e),this.WPt.set(t,i)),i}HPt(t){const e=[];for(const i of t.NA)if(void 0===i.Nit){for(const s of t.yEt)if(YG(i.Iw,i.DTt,s)){const t=new uX(i,this.FPt(s.Nit));e.push(t)}}else{const t=new uX(i,this.FPt(i.Nit));e.push(t)}return e}UPt(t,e){return new uX({Iw:t,Nit:void 0,DTt:"",gs:void 0,Okt:void 0,l:"",RTt:!0,CTt:!1,xTt:!1,LTt:void 0,NTt:void 0,Mkt:void 0},e)}VPt(t,e){const i=e.filter((t=>t.Iw===Q.yy)),s=e.filter((t=>t.Iw===Q.vl)),n=t.bet&&(t.bet.lSt||t.bet.cSt);if((!n||t.bet.lSt)&&0===s.length){const i=this.UPt(Q.vl,this.FPt(t.Nit));e.push(i)}if((!n||t.bet.cSt)&&0===i.length){const i=this.UPt(Q.yy,this.FPt(t.Nit));e.push(i)}t.bet&&t.bet.Dkt}qPt(t){for(const e of this.BPt)for(const i of e.CSt)if(i===t)return i}zPt(t){for(const e of this.BPt)if(e===t)return e}XPt(t){for(const e of this.BPt)if(Bc(e.CSt,t))return e}Ou(){Ce(this.BPt),Ce(this.NPt),this.WPt.clear(),this.LPt.Ou()}constructor(t){this.GPt=t,this.BPt=[],this.NPt=[],this.WPt=Wn(),this.LPt=new GG}};function YG(t,e,i){switch(t){case Q.yy:return i.Ukt===e;case Q.vl:return i.qkt===e;case Q.Ay:return i.Wkt===e;case Q.Lkt:return i.Hkt===e}return!1}function ZG(t,e){return YG(t.Iw,t.DTt,e)&&(!t.BTt||t.PTt.Nit===e.Nit)}var qt,JG=class extends Xi{constructor(t){super(qt.QPt),this.zTt=t}},$G=class extends Xi{constructor(t){super(qt.KPt),this.zTt=t}},Qa="HlsModelUpdater";!function(t){t.QPt="jPt",t.KPt="YPt"}(qt||(qt={}));var tQ=class extends Et{get ZPt(){return this.JPt}get $Pt(){return this.tRt}get Ar(){return this.Xit}get eRt(){return this.iRt}async sRt(t){const e=this.Xit.GPt;if(!e)throw new v("HLSModelUpdater - Could not load HLS playlist: The provided source is empty.");this.To(new os);const i=await this.nRt(e,{},2,!0,t),s=i.PTt;if(!qX(s)&&!Xa(s))throw new v("HLSModelUpdater - Could not load HLS playlist: The playlist is invalid.");qX(s)||ms.zA(Qa,"Detected media playlist only HLS stream."),this.rRt(s),i.hRt&&(this.tRt=!0,await this.oRt(t)),this.JPt=!0}async aRt(t,e,i,s){const n=this.Xit.qPt(t);if(!n)throw new v("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const r={rEt:e,ZIt:i,zy:nQ(n)},h=Mh(w.max(1,3*t.PTt.zIt));try{await this.uRt(n,r,s,h)}catch(t){throw pe(t),this.cRt(n),t}}lRt(t,e){const i=this.Xit.qPt(t);if(!i)throw new v("HLSModelUpdater - Could not load HLS playlist for rendition: the rendition does not exist on the internal model.");const s={rEt:void 0,ZIt:void 0,zy:nQ(i)},n=Mh(w.max(1,3*t.PTt.zIt));return this.uRt(i,s,e,n)}dRt(t,e){return this.fRt.has(t.cw)||this.fRt.set(t.cw,new $i),E_(this.fRt.get(t.cw).jf,e)}cRt(t){this.To(new $G(t))}async uRt(t,e,i,s){const n=t.PTt.uSt(e);let r;try{r=(await this.nRt(n,e,0,this.tRt,i,s)).PTt}catch(e){throw pe(e),t.PTt.QIt=Ee.V_(),e}if(!Xa(r))throw new v("HLSModelUpdater - Could not load HLS playlist for rendition: the playlist is not a media playlist.");try{this.rRt(r,t)}catch(n){if(n instanceof tc&&void 0!==e.zy){const n=Me({},e,{zy:void 0});return this.uRt(t,n,i,s)}throw n}if(this._Rt&&t!==this._Rt&&!this._Rt.PTt.qIt)try{await this.lRt(this._Rt,i)}catch(e){pe(e),this._Rt=t,this.gRt()}this.vRt(t),this._Rt=t}async nRt(t,e,i,s,n,r){if(ms.zA(Qa,"Loading HLS playlist at "+t+"."),s){const e=await this.wRt(t,n);if(void 0!==e)return{PTt:e,hRt:!0}}return{PTt:await this.mRt(t,e,i,n,r),hRt:!1}}async wRt(t,e){try{const i=await this.Sat.Y7([t]);if(k_(e),void 0!==i)return TG(i.responseURL,{},i.data)}catch(t){pe(t)}}async mRt(t,e,i,s,n){const r={TI:t,sP:Ct.KT,oP:this.Aat,iP:ut.GET,Iw:_h.WI,M_:s,kI:n},h=await Xu((()=>this.pRt(r)),s,i);return TG(h.gP,e,h.Ny)}async pRt(t){const e=await this.fP.pI(t);return{Ny:await e._P(),gP:e.gP}}async oRt(t){k_(t);const e=[];for(const i of this.Xit.TSt)for(const s of i.CSt)e.push(this.yRt(s,t));await Promise.all(e)}async yRt(t,e){try{const i=await this.Sat.Y7([t.PTt.Nit]);k_(e),void 0===i||t.PTt.qIt||await this.lRt(t,e)}catch(t){pe(t)}}gRt(){for(const t of this.Xit.TSt)for(const e of t.CSt)e!==this._Rt&&void 0!==e.PTt.ZEt&&(e.PTt.qIt?this.vRt(e):e.PTt.uPt())}vRt(t){if(0!==t.PTt.mtt.length){if(!this._Rt)return this._Rt=t,void this._Rt.PTt.fPt(0,void 0);if(this.ARt(this._Rt),!this.ARt(t)&&void 0===t.PTt.ZEt){const e=this.bRt(t,this._Rt);ms.ySt(Qa,"Assuming global timeline offset of "+e+"s for rendition "+t.PTt.Nit+"."),t.PTt.fPt(e,void 0)}}}bRt(t,e){if(eQ(t)){const i=t.PTt.mtt[0],s=e.PTt.mtt[0];return ms.ySt(Qa,"Synchronizing by start of VOD: "+s.PS+" vs "+i.PS),s.PS-i.nIt}const i=function(t,e){let i=t.length-1,s=e.length-1;for(;i>=0&&s>=0;){const n=t[i],r=e[s];if(n.IEt>r.IEt)i--;else if(n.IEt<r.IEt)s--;else if(n.TEt){if(r.TEt)return{segment:n,referenceSegment:r};s--}else i--}return}(t.PTt.mtt,e.PTt.mtt);if(void 0!==i){const{segment:t,referenceSegment:e}=i;return ms.ySt(Qa,"Synchronizing by start of discontinuity #"+e.IEt+": "+e.PS+" vs "+t.PS),e.PS-t.nIt}const s=sQ(t.PTt.mtt);if(void 0!==s){const t=sQ(e.PTt.mtt);if(void 0!==t){ms.ySt(Qa,"Synchronizing by PDT:",t.kEt.toISOString()+" vs "+s.kEt.getTime());return t.PS-s.nIt-(t.kEt.getTime()-s.kEt.getTime())/1e3}}const n=iQ(e),r=iQ(t);var h;const o=null!=(h=t.PTt.ZEt)?h:0;return ms.ySt(Qa,"Synchronizing by last segment:",n+" vs "+r),n-r+o}ARt(t){const e=this.Xit.qPt(t);if(!e)return!1;if(eQ(e))return!1;const i=function(t,e){return go(t,(t=>void 0!==t.m6&&e._Pt(t.IEt)))}(e.PTt.mtt,this.Xit.zT);if(void 0===i)return!1;if(e.PTt.jIt===i.IEt)return!0;const s=this.Xit.zT.APt(i.m6,i).hk()-i.nIt;return ms.ySt(Qa,"Synchronize by media timestamp: "+s+"s for rendition "+t.PTt.Nit+"."),e.PTt.fPt(s,i.IEt),(void 0===this._Rt||void 0===this._Rt.PTt.jIt||this._Rt.PTt.jIt<i.IEt)&&(this._Rt=e),!0}rRt(t,e){var i;(this.Xit.eIt(t,e),Xa(t)&&e)&&(this.iRt=e,this.To(new JG(e)),null==(i=this.fRt.get(e.cw))||i.Lf(),this.fRt.delete(e.cw));this.To(new cH)}TRt(t,e){for(const i of this.Xit.TSt){const s=pi(i.kSt,(t=>t.PTt===e));void 0!==s&&void 0===t.lSt&&i.GEt(s);const n=pi(i.SSt,(t=>t.PTt===e));void 0!==n&&void 0===t.cSt&&i.GEt(n),void 0===s&&void 0===n||(i.bet=QX(i.bet,t))}}Ou(){this.Lo(),this.Xit.Ou(),this.fRt.forEach((t=>t.Jl())),this.fRt.clear()}constructor(t,e,i,s){super(),this.fP=t,this.Sat=e,this.Aat=i,this.JPt=!1,this.tRt=!1,this._Rt=void 0,this.iRt=void 0,this.fRt=Yh(),this.Xit=new jG(s)}};function eQ(t){return t.PTt.REt||t.PTt.xEt===xi.oEt}function iQ(t){const e=t.PTt.mtt;return e[e.length-1].RS}function sQ(t){return go(t,(t=>void 0!==t.kEt))}function nQ(t){if(void 0!==t.PTt.Zkt&&!t.PTt.REt&&!(void 0===t.PTt.VEt||Ee.V_()/1e3-t.PTt.VEt>=t.PTt.Zkt/2))return t.PTt.Jkt?IG.mIt:IG.wIt}var rQ,hQ=class{get nt(){return this.Oyt}nPt(t){if(0===t.PTt.PEt.length)return;var e;this.SRt||(this.SRt=this.KO.cP(bt.Ty,void 0,void 0,void 0,void 0,Ca.DATE_RANGE),this.Oyt.tt(this.SRt));NG(this.SRt,t.PTt.PEt,(i=>null!=(e=t.PTt.XEt(i))?e:NaN))}constructor(t,e,i){this.kRt=t=>{this.ERt.hlsDateRange&&this.nPt(t.zTt)},this.ERt=t,this.Dct=e,this.KO=i,this.Oyt=new gn,this.Dct.wn(qt.QPt,this.kRt)}},oQ=class extends Xi{constructor(){super(Hc.ATt)}},Zu=class{get IRt(){return this.jj}get bl(){return VV(this.Mgt.bl,this.Mgt.CY)}get mtt(){return this.vnt}get rvt(){return this.Uyt}PRt(t){var e;return null==(e=this.RRt(t))?void 0:e.zTt}hgt(t){this.jj=t,this.CRt()}tut(t,e,i,s,n,r){this.vnt.push({zTt:t,wnt:e,xRt:d.MF(n,r),DRt:d.MF(i,s)}),this.CRt()}RRt(t){return pi(this.vnt,(e=>e.DRt.br(t)))}aft(t){return pi(this.vnt,(e=>e.wnt===t))}Qst(t,e){return pi(this.vnt,(i=>i.zTt===t&&XG(i.wnt,e)))}EY(){const t=this.bl;t.U>0&&(this.Uyt=t.Pn(t.U-1))}CRt(){const t=this.Mgt.bl;this.vnt=this.vnt.filter((e=>0!==t.Cn(e.DRt).U))}constructor(t){this.Mgt=t,this.vnt=[],this.jj=void 0,this.Uyt=void 0}},aQ=class{get Iw(){return this.vJ}get NRt(){return this.vJ===Di.yy||this.vJ===Di.vl}get BRt(){return this.Hdt}get LRt(){return this.ORt}get MRt(){return void 0!==this.FRt}URt(){if(this.MRt)throw new v("Cannot perform new operation while BufferAppender is still busy")}WAt(t){this.Mgt!==t&&(this.URt(),this.Mgt=t,this.Hdt=new Zu(t))}HRt(){return this.FRt?this.FRt.jf:Promise.resolve()}VRt(t){var e;const i=this.Hdt.rvt,s=this.Hdt.bl;if(void 0===i)return!1;const n=w.min(t,i);var r;return null!=(r=null==(e=s.gF().bF(this.LRt).BF(n))?void 0:e.br(i))&&r}WRt(t){return this.Hdt.PRt(t)}Jl(){this.QN.Jl(),this.QN=new Hi}qj(t){this.URt(),this.FRt=new $i;const e=e=>{this.zRt.qRt(t),this.XRt(e)};this.zj(t,this.QN.M_).then(e,e)}async zj(t,e){ms.ySt(ci,"Appending initializer",ws(t.GRt.Nit)),await this.Mgt.qj(t,e),ms.ySt(ci,"Appended initializer",ws(t.GRt.Nit)),this.Hdt.hgt(t)}mgt(t){this.URt(),this.FRt=new $i;const e=e=>{this.zRt.qRt(t),this.XRt(e)};this.QRt(t,this.QN.M_).then(e,e)}async QRt(t,e){const i=t.zTt;if(void 0===i.PTt._kt)throw new v("MediaBufferWrapper - Cannot append HLSAsset to "+this.vJ+" MediaBuffer for a HLSRendition with an undefined targetDuration.");const s=this.Hdt.bl.uF,n=this.Mgt.bl;ms.ySt(ci,"Appending",ws(t.GRt.Nit)),await this.Mgt.Hj(t,e),ms.ySt(ci,"Appended",ws(t.GRt.Nit),s,this.Hdt.bl.uF);const r=t.PS,h=r+t.ct,o=t.GRt,a=o.PS;var u;const c=o.PS+(null!=(u=o.ct)?u:0);this.Hdt.tut(i,o,r,h,a,c);const l=this.Mgt.bl.bF(n),f=this.Hdt.Qst(i,o);if(this.Iw===Di.vl)if(f)if(this.KRt(f))if(0===l.U){if(void 0===this.Hdt.aft(o)){const t=this.Mgt.CY.Cn(new d([r,h]));this.ORt=this.ORt.Hl(t)}}else{const t=l.Tn(0),e=new d([t,h]);if(this.ORt=this.ORt.bF(e),t>r){const e=this.Mgt.CY.Cn(new d([r,t]));this.ORt=this.ORt.Hl(e)}}else{const t=l.U>0&&l.Tn(0)<r?l.Tn(0):r;this.ORt=this.ORt.bF(new d([t,h]))}else if(0===l.U){const t=this.Mgt.CY.Cn(new d([r,h]));this.ORt=this.ORt.Hl(t)}else{var _;const t=l.Tn(0),e=null==(_=n.BF(r))?void 0:_.Pn(0),i=e&&e>r?e:r;if(t>i){const t=this.Mgt.CY.Cn(new d([i,l.Tn(0)]));this.ORt=this.ORt.Hl(t)}}t.GRt.JEt&&this.Hdt.EY()}KRt(t){const e=t.DRt,i=e.Tn(0),s=e.Pn(e.U-1),n=e.lF(0),r=e.fF(e.U-1);return this.ORt.SF(i,s,n,r)}constructor(t,e,i,s,n){this.FRt=void 0,this.QN=new Hi,this.ORt=d.Nl(),this.XRt=t=>{this.FRt&&(t?po(t)&&this.NRt?this.jRt.lz(this.Mgt.bl.LF)?this.FRt.Lf():this.FRt.BC(t):Aa(t)?this.FRt.Lf():this.FRt.BC(t):this.FRt.Lf(),this.FRt=void 0)},this.vJ=t,this.zRt=i,this.Mgt=e,this.Hdt=s,this.jRt=n}},uQ=class{async YRt(t,e,i,s){const n=await this.ZRt(e,s);return await this.JRt.YRt(t,n,i)}async ZRt(t,e){var i;if((null==(i=this.$Rt)?void 0:i.TI)!==t){ms.ySt("HLSDecryptor","Fetching new AES-128 decryption key from "+t+".");const i=await this.fP.pI({TI:t,sP:Ct.OI,iP:ut.GET,M_:e,Iw:_h.XI,rP:hi.$I,oP:this.Aat}),s=await i.xL(),n=new x(s);this.$Rt={TI:t,Ny:n}}return this.$Rt.Ny}constructor(t,e,i){this.JRt=t,this.fP=e,this.Aat=i,this.$Rt=void 0}},cQ=class{async pI(t,e,i,s,n){const r=await this.tCt(t,e,i,Ct.OI,s,n),h=await r.xL(n);return{httpStatusCode:r.SI,response:new x(h)}}async eCt(t,e,i,s,n){return(await this.tCt(t,e,i,Ct.FI,s,n)).BW(n)}async tCt(t,e,i,s,n,r){let h;t.qnt&&(h=vu(t.qnt.Tn,t.qnt.U),0===h[0]&&h[1]===ne&&(h=void 0));const o=h?{Range:"bytes="+h[0]+"-"+h[1]}:void 0,a=new vh({TI:t.kT,sP:s,eP:o,oP:this.Aat,iP:ut.GET,Iw:e,rP:i,hP:this.fft,aP:n,M_:r});try{const e=await this.Sat.itt(t.kT,h);if(k_(r),void 0!==e)return null==n||n(e.buffer.byteLength,e.buffer.byteLength),new ys({pI:a,Ny:e.buffer})}catch(t){pe(t)}return await Xu((()=>E_(this.fP.pI(a),a.M_)),r,this.iCt)}constructor(t,e,i,s,n=2){this.fP=t,this.Sat=e,this.fft=i,this.Aat=s,this.iCt=n}},gc=class{sCt(){return this.nCt.PTt.Ykt}async rCt(t,e,i){if(!this.sCt())throw new v("Could not perform blocking playlist update.");try{await this.hCt(),k_(i),await this.Dct.aRt(this.nCt,t,e,i),this.In=Ee.V_()}catch(t){throw Aa(t)&&this.oCt(),t}this.oCt()}aCt(t){return this.Dct.dRt(this.nCt,t)}oCt(){if(!this.uCt&&!this.cCt){const t=()=>{this.uCt=void 0};this.uCt=this.lCt(this.dCt.M_).then(t,t)}}async hCt(){this.uCt&&(this.dCt.Jl(),this.dCt=new Hi,await this.uCt.catch(Qo),this.uCt=void 0)}async lCt(t){for(;;){if(this.nCt.PTt.REt&&this.nCt.PTt.qIt)return;const e=Ee.V_()-this.In,i=1e3*this.nCt.PTt.zIt;e<i&&await uc(i-e,t);try{await this.Dct.lRt(this.nCt,t)}catch(t){throw pe(t),this.Dct.cRt(this.nCt),t}this.In=Ee.V_()}}Ou(){this.cCt=!0,M(this.hCt())}constructor(t,e){this.uCt=void 0,this.dCt=new Hi,this.In=-1/0,this.cCt=!1,this.Dct=t,this.nCt=e,this.oCt()}};!function(t){t[t.aEt=0]="aEt",t[t.uEt=1]="uEt",t[t.qI=2]="qI",t[t.zI=3]="zI"}(rQ||(rQ={}));var So="AssetExtractor",lQ=class{fCt(t,e,i){let s=e;for(const e of this._Ct){if(s>=t)return!0;if(s<e.Tn)return!1;if(s<e.Pn){if(i<=e.Pn)return!0;s=e.Pn}}return s>=t}gCt(t,e){const i=[];for(let s=0;s<this._Ct.length;s+=1){const n=this._Ct[s],r=t-n.Tn,h=n.Ny.length,o=w.min(h,w.max(r,0)),a=w.max(0,e+r),u=Qu(n.Ny,o,a);u.length&&(s=this.vCt(s,n,t,o,a),i.push(u))}return i}wCt(t,e){this._Ct.push({Tn:t,Pn:t+e.length,Ny:e})}vCt(t,e,i,s,n){let r=t;this._Ct.splice(r,1),r-=1,e.Tn<i&&(r+=1,this._Ct.splice(r,0,{Tn:e.Tn,Pn:i,Ny:Qu(e.Ny,0,s)}));const h=i+n-s;return h<e.Pn&&(r+=1,this._Ct.splice(r,0,{Tn:h,Pn:e.Pn,Ny:Qu(e.Ny,n)})),r}constructor(){this._Ct=[]}},dQ=class{get mCt(){return this.pCt}async yCt(){const t=await this.wd.read();if(t.done)throw this.pCt=1/0,new v("No more data can be read from the given stream.");return this.pCt+=t.value.length,t.value}async ACt(t){await this.wd.cancel(t)}constructor(t,e){this.pCt=e,this.wd=t.getReader()}},fQ=class{bCt(){this.TCt.Lf(),this.TCt=new $i}SCt(t){const{znt:e,Xnt:i}=gQ(this.rIt.qnt),s=this.kCt.gCt(e,i-e);ms.ySt(So,"Collected "+s.length+" chunks.");for(const e of s)t.enqueue(e)}async readAndSliceOutAssetBytes(t){await this.ECt.jf;const{znt:e,Xnt:i}=gQ(this.rIt.qnt);try{for(;;){const s=this.wd.mCt,n=await this.wd.yCt(),r=n.length;ms.ySt(So,"Read "+r+" at "+s+" for extraction of "+ws(this.rIt));const h=w.min(s+r,e)-s;if(!(h>0)){if(s+r<=i)return ms.ySt(So,"Extracting the read data range for extraction of "+ws(this.rIt)),t.enqueue(n),this.bCt(),M(this.readAndSliceOutAssetBytes(t));{const e=i-s,h=Qu(n,0,e),o=Qu(n,e);return h.length>0&&(ms.ySt(So,"Extracting "+h.length+" bytes for extraction of "+ws(this.rIt)),t.enqueue(h)),ms.ySt(So,"Of the read "+r+" bytes, the last "+o.length+" will be stored locally for extraction of "+ws(this.rIt)),this.kCt.wCt(s+e,o),ms.ySt(So,"Extraction of "+ws(this.rIt)+" completed as the entire request has been fulfilled."),this.ICt(t),void(this.PCt&&(ms.ySt(So,"Aborting stream upstream as no more bytes are needed from "+ws(this.rIt)+"."),await this.wd.ACt("AssetExtraction - AbortOnEnd")))}}{const e=Qu(n,0,h),i=Qu(n,h);if(ms.ySt(So,"Of the read "+r+" bytes, the first "+h+" will be stored locally for extraction of "+ws(this.rIt)),this.kCt.wCt(s,e),i.length>0)return ms.ySt(So,"Extracting "+i.length+" bytes for extraction of "+ws(this.rIt)),t.enqueue(i),this.bCt(),M(this.readAndSliceOutAssetBytes(t))}}}catch(e){ms.ySt(So,"Extraction of "+ws(this.rIt)+" completed as the entire source stream has been read."),this.ICt(t)}}ICt(t){t.close(),this.bCt(),this.RCt.Lf()}start(t){ms.ySt(So,"Preparing to push all collected data to controller for extraction of "+ws(this.rIt)),this.SCt(t),ms.ySt(So,"Collected data pushed to controller for extraction of "+ws(this.rIt));const{Xnt:e}=gQ(this.rIt.qnt);this.wd.mCt>=e?(ms.ySt(So,"Extraction of "+ws(this.rIt)+" completed as the entire request has been fulfilled."),this.ICt(t)):(ms.ySt(So,"Continuing read from original stream for extraction of "+ws(this.rIt)),M(this.readAndSliceOutAssetBytes(t)))}get CCt(){return this.RCt.jf}pull(){return this.ECt.Lf(),this.ECt=new $i,this.TCt.jf}constructor(t,e,i,s){this.RCt=new $i,this.rIt=t,this.wd=e,this.kCt=i,this.PCt=s,this.ECt=new $i,this.TCt=new $i}},_Q=class{_S(t){if(!zX(this.rIt,t))return!1;const{znt:e,Xnt:i}=gQ(t.qnt);return this.kCt.fCt(this.xCt.mCt,e,i)}async uyt(t,e){void 0===e&&(e=!1);const i=this.xCt,s=this.kCt;if(ms.zA(So,"Extracting data from "+ws(t)+" out of "+ws(this.rIt)),this.DCt&&(ms.ySt(So,"Awaiting previous extraction before extracting "+ws(t)+" out of "+ws(this.rIt)),await this.DCt),!this._S(t))throw new v("The extractor does not contain the data requested");const n=new fQ(t,i,s,e);return this.DCt=n.CCt,new Sf(n)}constructor(t,e){this.rIt=e;const{znt:i}=gQ(this.rIt.qnt);this.xCt=new dQ(t,i),this.kCt=new lQ}};function gQ(t){if(t){const e=t.Tn;return{znt:e,Xnt:void 0!==t.U?e+t.U:ne}}return{znt:0,Xnt:ne}}var vQ=class{async On(){const t=await this.NCt.eCt(this.rIt,_h.zI,hi.YT,void 0,this.QN.M_);return new _Q(t,this.rIt)}_S(t){return zX(this.rIt,t)}async uyt(t,e){void 0===e&&(e=!1);const i=await this.cvt;return await E_(i.uyt(t,e),this.QN.M_)}Jl(){this.cvt.catch(Qo),this.QN.Jl()}constructor(t,e){this.rIt=t,this.NCt=e,this.QN=new Hi,this.cvt=this.On()}},wQ=class extends Xi{constructor(t){super(vn.BCt),this.hP=t}},mQ=class extends Xi{constructor(t,e,i,s,n,r,h){super(vn.LCt),this.uri=t,this.OCt=e,this.hP=i,this.mediaSequenceNumeber=s,this.mediaTrackId=n,this.MCt=r,this.httpStatusCode=h}};function pQ(t,e,i){const s=ni(i)?i:i.tIt;if(e._Pt(s.IEt)){if(void 0!==i.m6)return e.APt(i.m6,i).hk();if(i!==s&&void 0!==s.m6){const t=e.APt(s.m6,s).hk();return i.PS+(t-s.PS)}}const n=t.PTt.aft(s.rEt-1);if(void 0!==n&&e._Pt(n.IEt)){if(n.bEt.length>0){const t=n.lIt(n.bEt.length-1);if(void 0!==t.m6){const s=e.APt(t.m6,t).hk();return i.PS+(s-t.PS)}}if(void 0!==n.m6){const t=e.APt(n.m6,n).hk();return i.PS+(t-n.PS)}}const r=t.PTt.aft(s.rEt+1);if(void 0!==r&&e._Pt(r.IEt)){if(r.bEt.length>0){const t=r.lIt(0);if(void 0!==t.m6){const s=e.APt(t.m6,t).hk();return i.PS+(s-t.PS)}}if(void 0!==r.m6){const t=e.APt(r.m6,r).hk();return i.PS+(t-r.PS)}}return i.PS}var vn,yQ="HlsPlaylistDownloader";!function(t){t.BCt="segmentdownloadprogress",t.LCt="segmentdownloaded"}(vn||(vn={}));var AQ=class extends Et{FCt(t){this.UCt.Ou(),this.UCt=new gc(this.Dct,t),this.MRt?this.HCt=t:(this.nCt=t,this.VCt=0,this.WCt=void 0,this.qCt=void 0)}get MRt(){return void 0!==this.zCt}HRt(){return this.zCt?this.zCt.jf:Promise.resolve()}XCt(){return this.zRt.XCt()}GCt(t){this.zRt.GCt(t)}Jl(){var t,e,i;this.QCt.Jl(),this.QCt=new Hi,null==(t=this.KCt)||t.Jl(),this.KCt=void 0,null==(e=this.jCt)||e.Jl(),null==(i=this.YCt)||i.Jl(),this.jCt=void 0,this.YCt=void 0,this.VCt=0,this.WCt=void 0,this.qCt=void 0}Ou(){this.UCt.Ou()}get zTt(){var t;return null!=(t=this.HCt)?t:this.nCt}get ZCt(){if(!this.nCt.PTt.REt||void 0===this.WCt)return!1;const t=this.nCt.PTt.aft(this.WCt);if(!t.JEt)return!1;if(void 0!==this.qCt){if(!t.lIt(this.qCt).JEt)return!1}return!0}JCt(t){const e=this.nCt.PTt.JIt(t);if(!e)return!1;if(void 0!==this.WCt){const i=e.rEt===this.WCt;return void 0!==this.qCt?e.dIt(t)===e.lIt(this.qCt)&&i:i}return!1}$Ct(t){let e;if(void 0===this.WCt||t<this.VCt)e=this.txt(t);else if(e=this.ext(this.WCt,this.qCt),void 0!==e){const[i,s]=e,n=(null!=s?s:i).PS,r=3*this.nCt.PTt._kt;w.abs(n-t)>=r&&(e=this.txt(t))}else if(this.nCt.PTt.REt){if(this.nCt.PTt.aft(this.WCt).JEt&&(e=this.txt(t),void 0!==e&&e[0].rEt===this.WCt))return}if(e){this.VCt=t;const[i,s]=e;return 0===(null==s?void 0:s.iIt)&&void 0!==i.ct?[i,void 0]:[i,s]}}txt(t){let e,i;const s=this.nCt.PTt.mtt;if(0===s.length)return;const n=this.Dct.Ar.zT,r=yi.fE(t),[h,o]=function(t,e,i){const s=t.PTt.mtt;if(0===s.length)return[void 0,void 0];const n=t.PTt.$It(i.hk());if(!e._Pt(n.IEt))return[void 0,void 0];const r=n.rEt-s[0].rEt;let h,o,a,u=0;for(let t=r;t>=0;t--){const e=s[t];if(e.IEt!==n.IEt)break;if(void 0!==e.m6){h=e,u=t;break}}if(void 0===h){for(let t=r+1;t<s.length;t++){const e=s[t];if(e.IEt!==n.IEt)break;if(void 0!==e.m6){h=e,u=t;break}}if(void 0===h)return[void 0,void 0]}if(e.APt(h.m6,h)._k(i)){o=h;for(let t=u+1;t<s.length;t++){const r=s[t];if(r.IEt!==n.IEt)break;if(void 0!==r.m6){if(!e.APt(r.m6,r)._k(i)){a=r;break}o=r}}}else{a=h;for(let t=u-1;t>=0;t--){const r=s[t];if(r.IEt!==n.IEt)break;if(void 0!==r.m6){if(e.APt(r.m6,r)._k(i)){o=r;break}a=r}}}return[o,a]}(this.nCt,n,r);let a;if(void 0!==h&&void 0!==o){const t=n.APt(h.m6,h),e=n.APt(o.m6,o),i=r.Ak(t).hk()/e.Ak(t).hk()*(o.PS-h.PS);a=h.PS+i}else a=t;const u=s[s.length-1];return u.RS<=a?(e=u,i=u._It(a)):s[0].PS>a?(e=s[0],i=e.lIt(0)):(e=this.nCt.PTt.JIt(a),i=null==e?void 0:e._It(a)),e?[e,i]:void 0}ext(t,e){let i,s;if(i=this.nCt.PTt.aft(t),i&&void 0!==e){if(0===i.bEt.length)return[i,void 0];s=i.lIt(e+1)}return void 0!==i&&void 0!==s||(i=this.nCt.PTt.aft(t+1),s=null==i?void 0:i.lIt(0)),i?[i,s]:void 0}URt(){if(this.MRt)throw new v("Cannot perform new operation while PlaylistDownloader is still busy")}ixt(t){this.URt(),this.zCt=new $i,this.sxt(t,this.QCt.M_).then(this.nxt,this.nxt)}rxt(){this.UCt.oCt()}async sxt(t,e){if(this.nCt.PTt.REt)return;let i=this.$Ct(t);for(!i&&this.UCt.sCt()&&void 0!==this.WCt&&(await this.UCt.rCt(void 0===this.qCt?this.WCt+1:this.WCt,void 0!==this.qCt?this.qCt+1:void 0,e),i=this.$Ct(t)),!i&&this.UCt.sCt()&&void 0!==this.WCt&&(await this.UCt.rCt(this.WCt+1,0,e),i=this.$Ct(t));!i;){ms.zA(yQ,"No next segment / part available, need to update playlist before continuing."),await this.UCt.aCt(e);const s=this.zTt.PTt.mtt;s[0].PS>t&&(this.qCt=void 0,this.WCt=void 0);s[s.length-1].rEt<this.WCt&&(this.qCt=void 0,this.WCt=void 0),i=this.$Ct(t)}}hxt(){return this.zRt.oxt()}axt(){this.URt();try{const t=this.nCt.PTt.tPt(HX.aEt);t&&this.uxt(t);const e=this.nCt.PTt.tPt(HX.uEt);e&&this.cxt(e)}catch(t){throw pe(t),this.nCt.PTt.QIt=Ee.V_(),this.Dct.cRt(this.nCt),t}}uxt(t){this.YCt&&!this.YCt._S(t.Nit)&&(this.YCt.Jl(),this.YCt=void 0),this.YCt||(this.YCt=new vQ(t.Nit,this.NCt))}cxt(t){this.jCt&&!this.jCt._S(t.Nit)&&(this.jCt.Jl(),this.jCt=void 0),this.jCt||(this.jCt=new vQ(t.Nit,this.NCt))}oft(t,e,i){this.URt(),ms.zA(yQ,"Starting download of segment "+ws(t.Nit)+" and part "+(null==e?void 0:e.iIt)),this.zCt=new $i,this.lxt(t,e,i,this.QCt.M_).catch((t=>{throw pe(t),this.nCt.PTt.QIt=Ee.V_(),this.Dct.cRt(this.nCt),t})).then(this.nxt,this.nxt)}async lxt(t,e,i,s){let n;if(t.SEt){var r,h;if(!i||!XX(i.GRt.Nit,null==(r=t.SEt)?void 0:r.Nit)||t.IEt!==i.IEt){var o;null==(o=this.KCt)||o.Jl(),this.KCt=new $i;const e=this.dxt(t.SEt,t,s).then((()=>{this.KCt=void 0}));this.KCt.U_(e)}n=null==(h=this.KCt)?void 0:h.jf}await this.fxt(t,e,n,s)}async dxt(t,e,i){const s=await this._xt(t,e,i),n=s.SEt.Ny.Ny.byteLength;this.zRt.gxt(s),this.To(new mQ(s.SEt.GRt.Nit,s.Iw,this.vJ,e.rEt,s.zTt.cw,n,s.SEt.o_t)),ms.ySt(ci,"Download initializer complete",ws(t.Nit))}async fxt(t,e,i,s){const n=await this.vxt(t,e,s),r=n.wnt.Ny.Ny.byteLength;var h;i&&await E_(i,s),this.zRt.gxt(n),this.To(new mQ(n.wnt.GRt.Nit,n.Iw,this.vJ,t.rEt,n.zTt.cw,r,n.wnt.o_t)),ms.ySt(ci,"Download complete",ws(null!=(h=null==e?void 0:e.Nit)?h:t.Nit))}async vxt(t,e,i){let s;if(e){if(this.jCt)if(this.jCt._S(e.Nit)){const t=await this.jCt.uyt(e.Nit),n=await kt(t,i),r=new x(n);s=TQ(e,await this.YRt(r,e.pEt,i),200)}else this.jCt.Jl(),this.jCt=void 0;s||(ms.ySt(ci,"Start download",ws(e.Nit)),s=await this.wxt(e,i))}else ms.ySt(ci,"Start download",ws(t.Nit)),s=await this.cft(t,i);return this.WCt=t.rEt,this.qCt=null==e?void 0:e.iIt,{Iw:"wnt",wnt:s,zTt:this.nCt,IEt:t.IEt}}async _xt(t,e,i){let s;if(this.YCt){var n;if(this.YCt._S(t.Nit)){const n=await E_(this.YCt.uyt(t.Nit),i),r=await kt(n,i),h=new x(r);s=bQ(t,e,await this.YRt(h,t.AEt?[t.AEt]:[],i),200)}ms.zA(yQ,"MAP is required for segment, downloading MAP data."),null==(n=this.YCt)||n.Jl(),this.YCt=void 0}return s||(ms.ySt(ci,"Start download",ws(t.Nit)),s=await this.mxt(t,e,i)),{Iw:"SEt",SEt:s,zTt:this.nCt,PS:e.PS,IEt:e.IEt,pEt:e.pEt}}async mxt(t,e,i){const{response:s,httpStatusCode:n}=await this.NCt.pI(t.Nit,_h.qI,hi.GI,void 0,i),r=t.AEt?[t.AEt]:[];return bQ(t,e,await this.YRt(s,r,i),n)}async cft(t,e){if(!t.Nit)throw new v("Internal error: attempted to download an incomplete segment");let i,s;try{this.pxt(t);const n=await this.NCt.pI(t.Nit,_h.qI,hi.YT,this.yxt,e);i=n.response,s=n.httpStatusCode}finally{this.Axt()}return function(t,e,i){return{Ny:{Ny:e,Iw:F.xX},Iw:rQ.qI,o_t:i,GRt:t,IEt:t.IEt}}(t,await this.YRt(i,t.pEt,e),s)}async wxt(t,e){let i,s;try{this.pxt(t);const n=await this.NCt.pI(t.Nit,_h.qI,hi.YT,this.yxt,e);i=n.response,s=n.httpStatusCode}finally{this.Axt()}return TQ(t,await this.YRt(i,t.pEt,e),s)}async YRt(t,e,i){const s=pi(e,(t=>t.iP===Wu.Xkt));return s?s.Nit&&s.Gkt?await this.bxt.YRt(t,s.Nit,s.Gkt,i):(ms.lt(yQ,"Encountered an AES-128 encrypted segment for which no initialization vector could be determined."),t):t}pxt(t){var e,i,s;this.Txt=t,this.Sxt=0,this.kxt=0,this.Ext=null!=(s=null==(e=t.Nit)||null==(i=e.qnt)?void 0:i.U)?s:0}Axt(){this.Txt=void 0,this.Sxt=0,this.kxt=0,this.Ext=0}Ixt(){if(void 0!==this.Txt)return{wnt:this.Txt,Pxt:this.kxt,Rxt:this.Ext}}Cxt(t){return void 0!==this.Txt&&(0!==this.Sxt&&(0!==this.Ext&&(!(this.kxt>=this.Ext)&&!(t-this.Sxt<500))))}constructor(t,e,i,s,n,r,h,o){super(),this.HCt=void 0,this.zCt=void 0,this.Txt=void 0,this.Sxt=0,this.kxt=0,this.Ext=0,this.QCt=new Hi,this.KCt=void 0,this.VCt=0,this.WCt=void 0,this.qCt=void 0,this.YCt=void 0,this.jCt=void 0,this.nxt=t=>{this.HCt&&(this.nCt=this.HCt,this.HCt=void 0,this.VCt=0,this.WCt=void 0,this.qCt=void 0),this.zCt&&(t&&!Aa(t)?this.zCt.BC(t):this.zCt.Lf(),this.zCt=void 0)},this.yxt=(t,e)=>{this.kxt=t,t>0&&0===this.Sxt&&(this.Sxt=Ee.V_()),void 0!==e&&(this.Ext=e),this.To(new wQ(this.vJ))},this.vJ=t,this.Dct=i,this.zRt=s,this.nCt=e,this.UCt=new gc(i,e),this.bxt=new uQ(h,n,o),this.NCt=new cQ(n,r,function(t){switch(t){case Q.vl:return Ia.vl;case Q.yy:return Ia.yy;case Q.Ay:case Q.Lkt:return Ia.KT;default:return Ia.YT}}(e.Iw),o)}};function bQ(t,e,i,s){return{Ny:{Ny:i,Iw:F.xX},Iw:rQ.aEt,o_t:s,GRt:t,IEt:e.IEt}}function TQ(t,e,i){return{Ny:{Ny:e,Iw:F.xX},o_t:i,Iw:rQ.uEt,GRt:t,IEt:t.tIt.IEt}}var Lc,SQ=class{get IRt(){return this.xxt}get Dxt(){const t=[];for(const i of this.Nxt)if("wnt"===i.Iw){const s=i.wnt.GRt,n=pQ(i.zTt,this.LPt,s);var e;t.push({wnt:s,zTt:i.zTt,PS:n,RS:n+(null!=(e=s.ct)?e:0)})}return t}get Bxt(){const t=[];return this.Lxt.forEach((e=>{for(const i of e.Oxt)"wnt"===i.Iw&&t.push({wnt:i.GRt,zTt:i.zTt,PS:i.PS,RS:i.PS+i.ct})})),t}gxt(t){"SEt"===t.Iw&&(this.xxt=t.SEt),this.Nxt.push(t),this.Mxt&&(this.Mxt.Lf(),this.Mxt=void 0)}XCt(){return this.Nxt[0]}GCt(t){me(this.Nxt,t)}oxt(){return null!=this.Mxt||(this.Mxt=new $i),this.Mxt.jf}Fxt(t){this.Uxt(t.rot).Fxt(t)}Hxt(t){return this.Uxt(t).Hxt()}qRt(t){this.Uxt(t.rot).qRt(t)}Vxt(t){var e;null==(e=this.Lxt.get(t))||e.Ou()}Wxt(t){return this.Uxt(t).Wxt()}Uxt(t){if(this.Lxt.has(t))return this.Lxt.get(t);{const e=new kQ;return this.Lxt.set(t,e),e}}NC(){this.qxt(),this.zxt()}qxt(){this.xxt=void 0,Ce(this.Nxt)}zxt(){this.Lxt.forEach((t=>t.NC()))}Ou(){this.Lxt.forEach((t=>t.Ou())),this.Lxt.clear(),this.NC(),this.Mxt&&(this.Mxt.Jl(),this.Mxt=void 0)}constructor(t){this.Nxt=[],this.Lxt=Wn(),this.Mxt=void 0,this.xxt=void 0,this.LPt=t}},kQ=class{get Oxt(){return this.Xxt}Fxt(t){this.Xxt.push(t),this.Gxt&&(this.Gxt.Lf(),this.Gxt=void 0)}Hxt(){return this.Xxt[0]}qRt(t){me(this.Xxt,t)}Wxt(){return null!=this.Gxt||(this.Gxt=new $i),this.Gxt.jf}NC(){Ce(this.Xxt)}Ou(){this.NC(),this.Gxt&&(this.Gxt.Jl(),this.Gxt=void 0)}constructor(){this.Xxt=[],this.Gxt=void 0}},EQ=1e-6,IQ=class{get bl(){return this.lbt}get CY(){return this.dbt}async qj(t,e){const i=t.Ny.Ny;if(this.Qxt(i),this.Kxt.Iw===Ca.TTML){this.LPt._Pt(t.IEt)||await E_(this.LPt.vPt(t.IEt),e);const s=this.jxt(i,t.IEt);for(const t of s)this.Kxt.vP(t)}}async Hj(t,e){if(void 0===t.Ny)return;const i=t.PS,s=i+t.ct;this.lbt=this.lbt.Hl(d.MF(i,s)).yF(EQ),this.NY(t.Yxt,t.Zxt),this.BY(i,s),this.LPt._Pt(t.IEt)||await E_(this.LPt.vPt(t.IEt),e),this.Wj(t.Ny.Ny,t.IEt,t.GRt)}Wj(t,e,i){let s;this.Qxt(t),s=this.Kxt.Iw===Ca.WEBVTT?this.Jxt(t,i):this.jxt(t,e);for(const t of s)this.Kxt.vP(t)}Jxt(t,e){const i=np(t),s=i.L;var n;const r=null!=(n=i.OE)?n:{ME:yi.Rk,dh:yi.Rk};for(const t of s){const i=yi.fE(t.PS).Ak(r.dh).fS(r.ME),s=this.LPt.APt(i,e).hk(),n=s+(t.RS-t.PS);t.KS(s,n)}return s}jxt(t,e){const i=this.LPt.yPt(e).hk();return Zp(t,this.Kxt,{xE:0,DE:1/0,NE:i},Ot.APPLICATION_MP4)}Qxt(t){this.Kxt.Iw===Ca.DEFAULT&&(this.Kxt.Iw=this.$xt(t)?Ca.WEBVTT:Ca.TTML)}$xt(t){return wp($v(Li(Sa(t),0,w.min(t.byteLength,16)),new Ko))}NY(t,e){this.dbt=this.dbt.Hl(d.MF(t,e)).yF(EQ)}BY(t,e){this.dbt=this.dbt.bF(d.MF(t,e))}constructor(t,e){this.lbt=d.Nl(),this.dbt=d.Nl(),this.Kxt=t,this.LPt=e}},PQ=class extends Xi{constructor(t,e){super(Lc.tDt),this.zTt=t,this.bet=e}},RQ=class extends Xi{constructor(t){super(Lc.eDt),this.zTt=t}},CQ=class extends Xi{constructor(t,e){super(Lc.iDt),this.zTt=t,this.Iet=e}},xQ=class extends Xi{constructor(t,e){super(Lc.sDt),this.zTt=t,this.nDt=e}};!function(t){t.tDt="rDt",t.iDt="hDt",t.sDt="oDt",t.eDt="aDt"}(Lc||(Lc={}));var DQ=class extends Et{get uDt(){return this.cDt}lDt(t){for(const e of this.cDt)Bc(t,e)||this.zRt.Vxt(e);this.cDt=t}get MRt(){return void 0!==this.dDt}HRt(){var t,e;return null!=(e=null==(t=this.dDt)?void 0:t.jf)?e:Promise.resolve()}URt(){if(this.MRt)throw new v("Cannot perform new operation while transmuxer is still busy")}fDt(t,e){}_Dt(t){this.URt(),this.dDt=new $i;const e=e=>{this.gDt(t,e)};this.vDt(t,this.QN.M_).then(e,e)}wDt(t){this.URt(),this.dDt=new $i;const e=e=>{this.gDt(t,e)};this.mDt(t,this.QN.M_).then(e,e)}gDt(t,e){this.dDt&&(!e||Aa(e)?(e||this.zRt.GCt(t),this.dDt.Lf(),this.dDt=void 0):this.dDt.BC(e))}pDt(t,e){this.To(new PQ(t,e))}yDt(t,e){this.To(new CQ(t,e))}ADt(t,e,i){zG(e)&&this.To(new xQ(t,i))}bDt(t){this.To(new RQ(t))}Fxt(t){Bc(this.cDt,t.rot)&&this.zRt.Fxt(t)}TDt(t){return this.zRt.Hxt(t)}qRt(t){this.zRt.qRt(t)}SDt(t){return this.zRt.Wxt(t)}Jl(){this.QN.Jl(),this.QN=new Hi}constructor(t,e,i){super(),this.dDt=void 0,this.QN=new Hi,this.zRt=t,this.LPt=e,this.cDt=i}};function NQ(t,e){return zG(t)?0:w.min(t.PS,e)}function BQ(t,e){var i;return w.max(t.PS,e)+(null!=(i=t.ct)?i:0)}var LQ=class extends DQ{vDt(t,e){k_(e);const i={Iw:"kDt",Ny:t.SEt.Ny,rot:this.uDt[0],IEt:t.IEt,EDt:{bet:"",pEt:t.pEt},PS:t.PS,zTt:t.zTt,GRt:t.SEt.GRt};return this.Fxt(i),Promise.resolve()}async mDt(t,e){k_(e);const i=t.wnt.GRt;let s;void 0!==i.m6?(this.LPt._Pt(t.IEt)||await E_(this.LPt.vPt(t.IEt),e),s=this.LPt.APt(i.m6,i).hk()):s=i.PS;const n=NQ(i,s),r=BQ(i,n);var h;const o={Iw:"wnt",Ny:t.wnt.Ny,rot:this.uDt[0],Yxt:n,Zxt:r,PS:s,ct:null!=(h=i.ct)?h:0,NE:0,IEt:t.IEt,zTt:t.zTt,GRt:t.wnt.GRt};this.Fxt(o)}constructor(t,e,i){super(t,e,[i])}};function OQ(t,e){let i=d.Nl();for(const s of t){let n=s.PS;if(s.zTt.PTt.REt&&zG(s.wnt))n=0;else{const i=t=>s.zTt===t.zTt&&XG(t.wnt,s.wnt),r=pi(t,i);if(void 0!==r)n=w.min(n,r.RS);else{const t=pi(e,i);void 0!==t&&(n=w.min(n,t.DRt.Pn(0)))}}i=i.Hl(d.MF(n,s.RS))}return i}var MQ=.001,FQ=class{get IDt(){return this.PDt}get RDt(){return this.CDt}get xDt(){return this.DDt}get NDt(){return this.zRt}get zTt(){return this.CDt.zTt}FCt(t){this.CDt.FCt(t)}BDt(t){const e=t.slice();for(let t=this.PDt.length-1;t>=0;t--){const i=this.PDt[t];if(!i.NRt)throw new v("Invalid state");const s=rs(e,(t=>t.Iw===i.Iw));s>=0?(i.WAt(e[s]),hn(e,s)):hn(this.PDt,t)}for(const t of e){const e=new Zu(t);this.PDt.push(new aQ(t.Iw,t,this.zRt,e,this))}e.length>0&&this.zRt.NC();const i=t.map((t=>t.Iw));this.DDt.lDt(i)}lz(t){var e;const i=(null==(e=this.GF)?void 0:e.lz(t))||!1;return i&&(this.Jl(),this.NDt.NC()),i}LDt(t){for(const t of this.PDt)if(t.Iw!==Di.KT||t.MRt)throw new v("Invalid state");const e=new Zu(t),i=new aQ(Di.KT,t,this.zRt,e,this);this.PDt=[i]}get IRt(){const t=this.zRt.IRt;if(t)return t;if(this.PDt.length>0){const t=this.PDt[0].BRt.IRt;if(t&&this.PDt.every((e=>e.BRt.IRt===t)))return t}}rft(){for(const t of this.PDt)t.BRt.CRt()}get ODt(){if(0===this.PDt.length)return d.Nl();const t=OQ(this.zRt.Dxt.concat(this.zRt.Bxt),Ga(this.PDt,(t=>t.BRt.mtt))).gF();let e=new d([0,1/0]);for(const t of this.PDt)e=e.Cn(t.BRt.bl);for(const t of this.PDt)e=e.bF(t.LRt);return e=e.Hl(t),e}get MDt(){if(0===this.PDt.length)return d.Nl();const t=OQ(this.zRt.Bxt,Ga(this.PDt,(t=>t.BRt.mtt))).gF();let e=new d([0,1/0]);for(const t of this.PDt)e=e.Cn(t.BRt.bl);return e=e.Hl(t),e}_gt(t){const e=this.ODt.BF(t,MQ);return e?e.Pn(e.U-1):t}JCt(t){return!!this.ODt.BF(t,MQ)||this.CDt.JCt(t)}FDt(t){return this.MDt.br(t,MQ)}UDt(t,e,i){for(const t of this.PDt){const i=t.BRt,s=i.rvt;if(void 0!==s&&e>=s&&!i.bl.gF().br(s))return!0}return e-t<i}Jl(){this.HDt(),this.VDt()}HDt(){this.RDt.Jl()}VDt(){this.xDt.Jl(),this.IDt.forEach((t=>t.Jl()))}Ou(){this.Jl(),this.RDt.Ou()}constructor(t,e,i,s){this.CDt=t,this.zRt=e,this.DDt=i,this.GF=s,this.PDt=[]}};var UQ=class extends Xi{constructor(){super(Hc.STt)}},HQ=class extends Xi{constructor(){super(Hc.bTt)}},VQ="LazyMediaBuffer",WQ=class extends Et{get rM(){return this.BN}get PY(){return this.vJ}get xb(){if(!this.Mgt)throw new jr(n.MEDIA_LOAD_ERROR,"Cannot get the configuration of an uninitialized MediaBuffer.");return this.Mgt.xb}get Qq(){return this.iz}set Qq(t){this.iz=t,this.Mgt&&(this.Mgt.Qq=t)}$X(){return this.Mgt?this.Mgt.$X():this.WDt}get bl(){return this.Mgt?this.Mgt.bl:d.Nl()}get CY(){return this.Mgt?this.Mgt.CY:this.xY.hG}get Zq(){return this.rz}set Zq(t){this.rz=t,this.Mgt&&(this.Mgt.Zq=t)}NY(t,e){ms.ySt(VQ,"Marking gap from "+t+" to "+e+"."),this.xY.aG(t,e),this.Mgt&&this.Mgt.NY(t,e)}BY(t,e){ms.ySt(VQ,"Removing gap from "+t+" to "+e+"."),this.xY.uG(t,e),this.Mgt&&this.Mgt.BY(t,e)}qDt(t){this.Mgt=t,this.Mgt.Zq=this.rz,this.Mgt.Qq=this.iz;const e=this.xY.hG;for(let t=0;t<e.U;t++)this.Mgt.NY(e.Tn(t),e.Pn(t));var i;this.WDt&&(ms.ySt(VQ,"End of stream"),null==(i=this.Mgt)||i.EY());this.Mgt.wn(Ou.RX,this.Os),this.zDt.Lf(t)}XDt(t){return E_(this.zDt.jf,t)}async Hj(t,e,i){const s=await this.XDt(i);await s.Hj(t,e,i)}async LY(){const t=await this.XDt();await t.LY()}async qj(t,e,i){const s=await this.XDt(i);await s.qj(t,e,i)}async Qu(t,e,i){const s=await this.XDt(i);await s.Qu(t,e,i)}async sY(t,e){const i=await this.XDt();await i.sY(t,e)}EY(){this.WDt=!0,this.Mgt&&this.Mgt.EY()}OX(t){return!!this.Mgt&&this.Mgt.OX(t)}async FX(t){const e=await this.XDt();await e.FX(t)}async bn(){var t;this.Lo(),null==(t=this.Mgt)||t.pn(Ou.RX,this.Os)}constructor(t,e){super(),this.vJ=t,this.GDt=e,this.BN=void 0,this.Mgt=void 0,this.zDt=new $i,this.iz=20,this.WDt=!1,this.rz=30,this.xY=new vo}},qQ="LazyMediaSource",zQ=class{get xb(){return{Iw:di.wB,xZ:[],hM:[]}}get rt(){throw new v("Not implemented")}get mZ(){return this.QDt}get pZ(){return this.KDt}get bl(){return this.tM?this.tM.bl:d.Nl()}get ct(){return this.tM?this.tM.ct:this.Zl}get $X(){return!!this.tM&&this.tM.$X}get kl(){return this.tM?this.tM.kl:new d([0,1/0])}EZ(t){this.Zl=t,this.tM&&this.tM.EZ(t)}EY(){this.g6=!0,this.tM&&this.tM.EY()}vY(){this.g6=!1,this.tM&&this.tM.vY()}CZ(t,e,i,s){this.jDt=t,this.YDt=e,this.ZDt=Boolean(i),this.JDt=Boolean(s),this.tM&&this.tM.CZ(t,e,i,s)}OX(t){return!this.tM||this.tM.OX(t)}async FX(t){if(!this.OX(t))throw new v("LazyMediaSource - Unable to reconfigure MediaSource.");if(this.tM)await this.tM.FX(t);else{var e,i;this.KO.o2();const s=await this.KO.On(t);j(this.Zl)||s.EZ(this.Zl),this.g6&&s.EY(),s.CZ(this.jDt,this.YDt,this.ZDt,this.JDt),ms.ySt(qQ,"The MediaSource has been loaded."),this.$Dt=!0,this.tM=s,null==(e=this.QDt)||e.qDt(this.tM.mZ),null==(i=this.KDt)||i.qDt(this.tM.pZ),this.tNt.Lf(s),this.KO.a2()}}async Ou(){this.tM&&await this.tM.Ou()}constructor(t,e,i){this.KO=t,this.QDt=void 0,this.KDt=void 0,this.tNt=new $i,this.tM=void 0,this.$Dt=!1,this.Zl=NaN,this.g6=!1,this.jDt=0,this.YDt=1/0,this.ZDt=!1,this.JDt=!1,e&&(ms.ySt(qQ,"Created lazy media buffer for audio."),this.QDt=new WQ(Di.yy,this)),i&&(ms.ySt(qQ,"Created lazy media buffer for video."),this.KDt=new WQ(Di.vl,this))}};function XQ(t,e){return void 0===e&&(e=!1),function(i,s){void 0===s&&(s="*");let n=QQ(i,"tag");const r=QQ(null==s?"*":s,"range"),h=[];let o,a,u,c=-1;for(;++c<r.length;)if(o=r[c].toLowerCase(),e||"*"!==o){for(a=-1,u=[];++a<n.length;)if(t(n[a].toLowerCase(),o)){if(!e)return n[a];h.push(n[a])}else u.push(n[a]);n=u}return e?h:void 0}}XQ(((t,e)=>"*"===e||t===e||Po(t,e+"-")),!0),XQ(((t,e)=>{const i=t.split("-"),s=e.split("-");let n=0,r=0;if("*"!==s[r]&&i[n]!==s[r])return!1;for(n++,r++;r<s.length;)if("*"!==s[r]){if(!i[n])return!1;if(i[n]!==s[r]){if(1===i[n].length)return!1;n++}else n++,r++}else r++;return!0}),!0);var GQ=XQ(((t,e)=>{let i,s=e;for(;;){if("*"===s||t===s)return!0;if(i=s.lastIndexOf("-"),i<0)return!1;"-"===s.charAt(i-2)&&(i-=2),s=s.slice(0,i)}}));function QQ(t,e){const i=t&&"string"==typeof t?[t]:t;if(!i||"object"!=typeof i||!("length"in i))throw new v("Invalid "+e+" `"+i+"`, expected non-empty string");return i}var KQ,jQ=16384,YQ=71,ZQ=188,JQ=2,$Q=3;function tK(t){return eK(t)?1:function(t){return function(t){if(t.length<JQ*ZQ)return-1;const e=t.length<$Q*ZQ?JQ:$Q,i=w.min(1e3,t.length-e*ZQ);for(let s=0;s<=i;s++){let i=!0;for(let n=0;n<e;n++)if(t[s+n*ZQ]!==YQ){i=!1;break}if(i)return s}return-1}(t)>=0}(t)?2:function(t){return null!==fx(Sa(t),new Ko)}(t)?3:0}function eK(t){const e=eo(t,0,w.min(t.length,jQ));return Ue.lA(Sa(e))}!function(t){t[t.YT=0]="YT",t[t.Gm=1]="Gm",t[t.eNt=2]="eNt",t[t.iNt=3]="iNt"}(KQ||(KQ={}));var Vu=class{get Iw(){return this.vJ}get bl(){return this.Mgt.bl}get CY(){return this.Mgt.CY}sNt(t){return this.Mgt===t}async qj(t,e){await this.Mgt.qj(t.Ny,{gj:t.zTt.cw},e),void 0!==this.nNt&&this.vJ===Di.vl&&eK(t.Ny.Ny)&&this.nNt.Ult(t.Ny.Ny)}async Hj(t,e){k_(e),ms.zA("HlsMediaBuffer","Got media data, appending to "+this.vJ+" MediaBuffer: "+ws(t.GRt.Nit));const i=t.Yxt,s=t.Zxt,n={m6:t.PS,ct:t.ct,NE:t.NE,gj:t.zTt.cw};void 0!==t.Ny&&(await this.Mgt.Hj(t.Ny,n,e),this.rNt(t.Ny,t)),this.hNt(i,s)}rNt(t,e){var i;if(!eK(t.Ny))return;const s=e.PS,n=s+e.ct,r=e.NE;if(null==(i=this.blt)||i.tut(t.Ny,s,r),void 0!==this.nNt&&this.vJ===Di.vl){const i=e.GRt.JEt;this.nNt.tut(t.Ny,s,n,r,e.zTt,i)}const h=[];void 0!==this.blt&&h.push(this.blt),void 0!==this.nNt&&h.push(this.nNt),Dy(this.bl,h)}hNt(t,e){const i=this.Mgt.bl,s=new d([t,e]).bF(i);for(let t=0;t<s.U;t++)this.Mgt.NY(s.Tn(t),s.Pn(t));for(let t=0;t<i.U;t++)this.Mgt.BY(i.Tn(t),i.Pn(t))}NY(t,e){this.Mgt.NY(t,e)}BY(t,e){this.Mgt.BY(t,e)}constructor(t,e,i,s){this.vJ=t,this.Mgt=e,this.blt=i,this.nNt=s}};function iK(t){if(t.Iw!==Q.Lkt||void 0===t.NTt)return;const e=t.NTt.match(/^CC([1-4])$/);if(e)return Number(e[1]);const i=t.NTt.match(/^SERVICE([\d+])$/);return i?Number(i[1]):void 0}var sK=class{vkt(t){var e,i,s;return null==(s=null==(e=this.tM)||null==(i=e.pZ)?void 0:i.OX(t))||s}wkt(t){var e,i,s;return null==(s=null==(e=this.tM)||null==(i=e.mZ)?void 0:i.OX(t))||s}constructor(t){this.tM=t}},ft="LLHLSPlayer",nK=[ee.ml,ee.gl,ee.yl,ee.Bf],rK=[o.Vu,o.Gw,o.$w,o.Zw],hK=2e3,oK=class extends Et{oNt(){if(void 0===this.aNt)return!1;const t=Ee.V_();if(!this.aNt.RDt.Cxt(t))return!1;const e=this.aNt.RDt.Ixt();if(void 0===e||void 0===e.wnt.ct)return!1;const i=this.Wu,s=this.$u,n=this.aNt.ODt.BF(i);if((void 0!==n?n.Pn(0)-i:0)>=2*e.wnt.ct*s)return!1;return 8*e.Rxt/this.GF.Mq.IO>=1.8*e.wnt.ct}async uNt(){var t;const e=await this.ykt();if(void 0===e)return;const i=null==(t=this.aNt)?void 0:t.RDt.Ixt();if(void 0===i)return;const s=this.cNt;if(w.max(0,i.Rxt-i.Pxt)<=i.Rxt*(e.IO/s.IO))return;const n=e.IO<s.IO;await this.YTt(e,{ZTt:n})}lNt(t){return a_(t,(t=>t.IO))}async dNt(){let t=await this.fNt();if(0===t.length)return;const e=await this._Nt(t);e.length>0&&(t=e);const i=this.lNt(t);void 0!==i&&(await this.YTt(i,{ZTt:!0}),this.nM.dkt(i.IO))}get gNt(){const t=[this.vNt,this.wNt].filter(Qf);for(const e of t){if(!e.PTt.REt)return!1;const t=e.PTt.mtt,i=t[t.length-1];if(i&&i.IEt!==this.mNt)return!1}return!0}get XTt(){return this.cNt}get rSt(){return this.vNt}get oSt(){return this.wNt}get pNt(){return this.yNt}get ht(){return this.$T}get bl(){return this.KO.bl.ws()}get KTt(){const t=[];if(this.cNt){const e=this.KO.Wu;for(const i of this.ANt)for(const s of i.IDt){const i=s.WRt(e);i&&!Bc(t,i)&&t.push(i)}}return t}get qu(){if(this.cNt){const t=this.KO.Wu;return this.cNt.zEt(t)}}set qu(t){if(!t||!this.cNt)return;const e=this.cNt.XEt(t);void 0!==e&&this.gc(e,!1,!0)}get Wu(){var t;return null!=(t=this.bNt)?t:this.KO.Wu}set Wu(t){this.gc(t,t===1/0,!0)}gc(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1),ms.zA(ft,"Seeking to "+t+" s."),this.bNt=t,this.TNt=e,this.SNt=!0,this.Pct=!0,this.To(new T(t)),this.J0.Jl(),this.kNt&&(Ee.W_(this.ENt),i?this.ENt=Ee.q_((()=>this.INt(t,e)),50):this.INt(t,e))}INt(t,e){Ee.W_(this.ENt);const i=[this.cvt,this.PNt,this.$0].filter(Qf);this.J0=new Hi,this.$0=this.t1(i,t,e,this.J0.M_).catch(this.RNt)}get ct(){var t,e,i,s,n,r,h;if(!this.gNt)return null!=(h=null!=(r=null!=(n=null==(t=this.vNt)?void 0:t.PTt.ct)?n:null==(e=this.wNt)?void 0:e.PTt.ct)?r:null==(i=this.Dct)||null==(s=i.eRt)?void 0:s.PTt.ct)?h:1/0;const o=this.KO.ct;if(j(o)){var a,u,c;const t=null!=(c=null==(a=this.CNt)?void 0:a.PTt.ct)?c:null==(u=this.xNt)?void 0:u.PTt.ct;if(void 0!==t)return t}return o}get Ic(){if(!this.gNt)return!1;if(this.Fc&&this.kNt){var t,e;const i=this.Wu,s=null==(t=this.vNt)?void 0:t.PTt.ct,n=null==(e=this.wNt)?void 0:e.PTt.ct;return!(void 0!==s&&i<s)&&!(void 0!==n&&i<n)}return this.KO.Ic}get lt(){return this.ZO}get Ec(){return this.Vl}get Tg(){}get Eg(){return!1}get Pg(){return Me({},{sS:0,nS:0,rS:0,hS:0,oS:0,aS:{amountOfBufferedAudioSegments:0,amountOfBufferedVideoSegments:0}},this.KO.Rg(),{oS:this.Yut,hS:this.GF.Mq.IO})}get Ar(){var t;return null==(t=this.Dct)?void 0:t.Ar}get Xu(){return this.KO.Xu}set Xu(t){this.KO.Xu=t}get Dg(){return this.fht}set Dg(t){this.fht!==t&&(this.fht=t,this.To(t?new jn:new tn))}get Dc(){return this.KO.Dc}get $u(){return this.KO.$u}set $u(t){ms.zA(ft,"Setting playback rate to "+t+"."),this.KO.$u=t}get wl(){return this.ect.ws()}get ect(){return this.KO.wl}get Mg(){return this.$O}set Mg(t){this.$O!==t&&(this.$O=t,this.DNt())}get Nc(){let t=this.KO.Nc;return this.nct&&(t=w.max(dw.Jn,t)),t}get kl(){return this.Qut.ws()}get Qut(){let t=this.RZ;const e=[this.vNt,this.wNt].filter(Qf);if(t.U>0&&e.some((t=>!t.PTt.REt))){const i=this.ect,s=t.Pn(t.U-1);if(i.U>0&&i.Pn(i.U-1)>s){let n=i.Pn(i.U-1);const r=function(t){return t.reduce(((t,e)=>t.Cn(e.PTt.xIt)),new d([0,1/0]))}(e);r.U>0&&(n=w.min(n,r.Pn(r.U-1))),t=t.Hl(new d([s,n]))}}return t}rPt(){let t=function(t){if(0===t.length)return d.Nl();let e=new d([0,1/0]),i=0;for(const s of t){const t=s.PTt.kl;t.U>0&&(e=e.Cn(t),i=w.max(i,t.Tn(0)))}if(e.U>0)return e;return d.OF(i)}([this.vNt,this.wNt].filter(Qf));0!==t.U&&(this.tM&&this.gNt&&this.tM.ct!==1/0&&(t=new d([t.Tn(0),this.tM.ct])),this.RZ=t,this.NNt&&this.blt.II(t.Tn(0)),this.BNt&&this.nNt.II(t.Tn(0)))}get Fc(){var t;return null!=(t=this.SNt)?t:this.KO.Fc}get eM(){}get nt(){return this.xu}get rt(){return this.eS}get Xg(){var t,e;return this.KO.Xg||(null==(t=this.cNt)||null==(e=t._St)?void 0:e.Ci)||0}get Kg(){var t,e;return this.KO.Kg||(null==(t=this.cNt)||null==(e=t._St)?void 0:e.Ti)||0}get _l(){return this.KO._l}set _l(t){ms.zA(ft,"Setting volume to "+t+"."),this.KO._l=t}get Jg(){return this.iM}get tv(){return!1}set tv(t){}get sM(){return this.nM}fv(){return!1}ev(){return this.KO.wa}ke(){ms.zA(ft,"Hiding the player."),this.KO.ke()}jl(){ms.zA(ft,"Pausing the player."),this.KO.jl()}async dl(){this.H0=!0;const t=this.KO.dl();if(this.Ic){const t=this.Qut;t.U>0&&this.gc(t.Tn(0))}this.kNt||await this.DNt(),this.lut(),await t}lut(){var t;if(!this.Gut())if(null==(t=this.XTt)?void 0:t.PTt.REt){var e;let t=!0,i=0;const s=null==(e=this.cNt)?void 0:e.PTt.Tn;if(!this.Pct&&s&&(t=!s.wEt,i=s.vEt,i<0)){const t=this.XTt.PTt.xIt;i+=t.Pn(t.U-1)}this.INt(i,t)}else this.INt(1/0,!0);this.LNt()&&this.INt(1/0,!0)}Gut(){var t;const e=this.Qut;if(0===e.U)return!0;const i=null==(t=this.ONt)?void 0:t.TF(this.Wu);return(i&&i>0?this.ONt.Pn(i):this.Wu)>=e.Tn(0)}get ONt(){var t,e;const i=null==(t=this.MNt)?void 0:t.ODt,s=null==(e=this.aNt)?void 0:e.ODt;return i?s?s.Cn(i):i:s}LNt(){return gK(this.Wu,this.vNt)||gK(this.Wu,this.wNt)}dlt(){this.ZO=void 0,this.Vl=void 0}OM(t){this.ZO||(M(this.ir()),this.ZO=Lt(t),this.Vl=t,this.To(new Vo(t)))}be(){ms.zA(ft,"Showing the player."),this.KO.be()}_v(){throw new v("Not implemented")}vv(){throw new v("Not implemented")}wv(){}mv(){this.kNt&&M(this.FNt(this.vNt,this.wNt,this.yNt,{mv:!0}))}async ba(t,e,i){(ms.zA(ft,"Setting the player source to "+t.src+"."),this.dlt(),this.ERt&&!ho(this.ERt)&&(await this.ir(),k_(i)),t.src&&!ho(t))&&(this.cM.CO(t.contentProtection),this.ERt=t,this.UNt=t.seamlessSwitchStrategy,this.BNt=!Bc(t.ignoreEmbeddedTextTrackTypes,Ca.CEA608),this.NNt=!Bc(t.ignoreEmbeddedTextTrackTypes,Ca.EMSG),this.wn(Hc.ETt,this.handleBufferingErrorEvent),this.Dct=new tQ(this.fP,this.Sat,t.useCredentials,Ee.Fm(t.src)),this.Dct.wn(qt.QPt,this.kRt),this.Dct.wn(qt.KPt,this.HNt),this.Dct.wn(o.Ef,this.Os),this.Dct.wn(o.lm,this.Os),this.VNt=new hQ(t,this.Dct,this.KO),this.xu.MO(this.VNt.nt),null!=this.DDt||(this.DDt=this.WNt.y6()),e.textTracks&&this.lM(e.textTracks),Vy(this.xu),this.DNt())}DNt(){return this.cvt=this.qNt(this.cvt,this.wP.M_).catch(this.yut),this.cvt}async qNt(t,e){if(t&&(await t,k_(e)),!this.Dct)return;const i=this.$O;i===D.XT||this.H0?await this.i7(e):i===D.Ty&&await this.zNt(e)}async zNt(t){if(void 0===this.Dct||this.nct)return;if(!this.Dct.ZPt){try{await this.Dct.sRt(t)}catch(t){throw pe(t),this.Dg=!1,new jr(n.MANIFEST_LOAD_ERROR,"The provided HLS document could not be loaded - "+t.message,t)}this.XNt.kct()}const e=await this.GNt();this.QNt(e),await this.KNt(e,t),this.nct=!0,this.Blt.Mlt()}async GNt(){if(this.jNt=this.Dct.Ar.TSt,!this.jNt.length)throw new jr(n.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant streams.");let t=await this.YNt(this.jNt);if(0===t.length)throw new jr(n.MANIFEST_LOAD_ERROR,"LLHLSPlayer - Could not select initial variant stream: the HLS stream contains no variant stream with a supported codec.");const e=await this._Nt(t);return e.length>0&&(t=e),ms.zA(ft,"Selecting initial active variant stream."),function(t,e,i,s){void 0===s&&(s=$w.maximumBackoff);const n=function(t,e){if(void 0===e)return t;const i=e.preferredVideoCodecs,s=e.preferredAudioCodecs;if(void 0!==i){let e;for(const n of i){const i=t.filter((t=>t.bet&&t.bet.lSt&&Ya(t.bet.lSt,n)));if(0===i.length)continue;if(void 0===s)return i;void 0===e&&(e=i);const r=lK(i,s);if(void 0!==r)return r}if(void 0!==e)return e}if(void 0!==s){const e=lK(t,s);if(void 0!==e)return e}return t}(t,e),r=fK(n,s);switch(i.jq.type){case Ac.BANDWIDTH:{const t=i.tz,e=r.filter((e=>e.IO<=t));if(e.length>0)return rr(e,(t=>t.IO))}case Ac.PERFORMANCE:return a_(r,(t=>t.IO));case Ac.QUALITY:return rr(r,(t=>t.IO))}}(t,this.ERt.abr,this.GF,this.pat.maximumBackoff)}async KNt(t,e){const i=[],s=dK(t.SSt);s&&this.xNt!==s&&(ms.zA(ft,"Detected initial audio rendition."),this.xNt=s,i.push(this.ZNt(s,e)));const n=cK(t.WEt);let r;n&&this.JNt!==n&&(ms.zA(ft,"Detected initial subtitle rendition."),this.JNt=n,i.push(this.ZNt(n,e))),n||(r=cK(t.qEt),r&&(ms.zA(ft,"Detected initial closed caption rendition."),this.$Nt(t,r)));const h=dK(t.kSt);if(h&&this.CNt!==h){ms.zA(ft,"Detected initial video rendition."),this.CNt=h;s&&cX(h,s)||i.push(this.ZNt(h,e))}await Promise.all(i)}async ZNt(t,e){try{await this.Dct.lRt(t,e)}catch(i){pe(i),(my(i)||py(i))&&await this.tBt(t,e)}}async tBt(t,e){if(!this.eBt)if(t.Iw!==Q.vl)await this.iBt(t,e);else if(this.jNt&&this.jNt.length<=1)await this.iBt(t,e);else{const t=await this.GNt();this.QNt(t),await this.KNt(t,e)}}async i7(t){await this.zNt(t),this.FNt(this.xNt,this.CNt,this.JNt).catch(Qo),this.kNt=!0}lM(t){for(const e of t)e.src&&this.gM.uP(e)}$Nt(t,e){if(!this.BNt)return;const i=function(t){const e=[];for(const i of t){const t=iK(i);void 0!==t&&e.push({Z3:t,J3:i.gs||"",_h:i.l})}return e}(t.qEt);for(const t of i)this.nNt.Syt(t);if(void 0!==e){const t=iK(e);this.nNt.byt(t).bw=lu.Qn}}get ANt(){return[this.MNt,this.aNt,this.sBt].filter(Qf)}jTt(t){for(const e of t)if(!this.nBt(e))throw new v("LLHLSPlayer - Could not set an allowed variant stream that does not exists in the internal HLS model.");this.jNt=t}nBt(t){const e=this.Ar;return!!e&&Bc(e.TSt,t)}rBt(t){if(this.cNt)return pi(this.cNt.CSt,(e=>e===t))}QNt(t){if(ms.zA(ft,"Setting active variant stream."),this.cNt!==t){var e;if((null==(e=this.cNt)?void 0:e.Wkt)!==(null==t?void 0:t.Wkt)){if(this.cNt)for(const t of this.cNt.WEt)this.mP(t);if(t)for(const e of t.WEt)this.hBt(e)}this.cNt=t,this.To(new UQ),this.mct()}}hBt(t){const e=this.KO.cP(bt.Ay,void 0,t.l,t.gs,t.RTt,void 0,void 0,t.LTt.map(pX).filter(Qf));this.oBt.tt(e),this.aBt.set(t.cw,e),e.wn(ze.oa,this.onTextTrackChange)}mP(t){const e=this.aBt.get(t.cw);e&&(e.pn(ze.oa,this.onTextTrackChange),this.oBt.it(e),this.aBt.delete(t.cw),this.KO.mP(e))}async fNt(){var t;const e=null!=(t=this.jNt)?t:this.Ar.TSt;if(0===e.length&&!this.jNt)return ms.zA(ft,"The HLS stream does not contain any variant streams, skipping ABR selection."),[];if(1===e.length&&!this.jNt)return ms.zA(ft,"The HLS stream contains only a single variant stream, skipping ABR selection."),[];const i=await this.YNt(e);if(0===i.length)return ms.ASt(ft,"LLHLSPlayer - No variant streams with supported codecs available to perform ABR selection on."),[];const s=fK(i,this.pat.maximumBackoff);return 0===s.length?(this.eBt||(ms.ASt(ft,"LLHLSPlayer - No variant streams with online renditions available to perform ABR selection on."),this.uBt++,await this.cBt(i)),[]):s}async lBt(){const t=await this.ykt();if(void 0===t)return;const e=!!this.cNt&&t.IO<this.cNt.IO;await this.YTt(t,{ZTt:e})}async ykt(){var t,e;const i=await this.fNt();if(0===i.length)return;const s=function(t){const e=t.Wu,i=t.bl.BF(e);return i?i.Pn(0)-e:0}(this.KO),n=await this._Nt(i),r={Ti:this.KO.Ti,Ci:this.KO.Ci,gkt:s,dat:null==(t=this.ERt)||null==(e=t.abr)?void 0:e.restrictToPlayerSize},h=await this.dBt.ykt(i,this.cNt,n,r,new sK(this.tM));return!!this.cNt&&h.IO<this.cNt.IO||this.fBt(h,s)?h:void 0}fBt(t,e){var i;if(t===this.XTt)return!1;const s=this.XTt&&_K(this.XTt,this.pat.maximumBackoff),n=_K(t,this.pat.maximumBackoff);if(!s&&n)return!0;(!this._Bt||this._Bt.GTt.IO>t.IO)&&(this._Bt={GTt:t,qtt:Ee.V_()});const r=Ee.V_()-this._Bt.qtt;var h;const o=null!=(h=null==(i=this.oSt)?void 0:i.PTt._kt)?h:1/0;return e>=w.max(o-1,5)||r>1e3}async cBt(t){this.eBt=!0;let e=!1;for(const i of t)try{const t=this.wNt?pi(i.kSt,(t=>qa(t,this.wNt))):void 0;if(void 0===t)continue;await this.lRt(t),t.PTt.QIt=-1/0,e=!0}catch(t){}if(e)this.uBt=0,await this.gBt();else{if(this.uBt>=this.pat.maxRetries)return void this.OM(new jr(n.MEDIA_LOAD_ERROR,"The provided video renditions could not be loaded."));const t=w.min(this.pat.minimumBackoff*2**(this.uBt-1),this.pat.maximumBackoff);await uc(t)}this.eBt=!1,await this.lBt()}async YNt(t){let e=await d_(t,(async t=>{var e,i,s;const n=[(null==(e=t.bet)?void 0:e.cSt)?'audio/mp4; codecs="'+t.bet.cSt+'"':void 0,(null==(i=t.bet)?void 0:i.lSt)?'video/mp4; codecs="'+t.bet.lSt+'"':void 0].filter(Qf);return 0===n.length||await this.vBt.iG(n,null==(s=this.ERt)?void 0:s.useManagedMediaSource)}));return e.some((t=>{var e;return null==(e=t.bet)?void 0:e.lSt}))&&(e=e.filter((t=>!t.bet||t.bet.lSt||0!==t.kSt.length))),e.some((t=>{var e;return null==(e=t.bet)?void 0:e.cSt}))&&(e=e.filter((t=>!t.bet||t.bet.cSt||0!==t.SSt.length))),e}_Nt(t){return this.Dct.$Pt?d_(t,(t=>async function(t,e){for(const i of t)if(!await e(i))return!1;return!0}([dK(t.SSt),dK(t.kSt),cK(t.WEt),cK(t.qEt)].filter(Qf),(t=>this.wBt(t))))):Promise.resolve([])}async wBt(t){if(0===t.PTt.mtt.length)return!1;const e=t.PTt.mtt[0];if(!e.Nit)return!1;const i=e.Nit,s=i.qnt?vu(i.qnt.Tn,i.qnt.U):void 0;try{return await this.Sat.ttt(i.kT,s)}catch(t){return!1}}async YTt(t,e){if(!this.kNt)throw new v("LLHLSPlayer - The LLHLSPlayer is not loaded.");if(!t)throw new v("LLHLSPlayer - Cannot explicitly set the active variant stream to undefined.");if(!this.nBt(t))throw new v("LLHLSPlayer - Trying to set an active variant stream that does not exists on the internal model.");if(t===this.cNt)return void ms.zA(ft,"Trying to set the already active variant stream, ignoring.");const i=this.vNt?pi(t.SSt,(t=>qa(t,this.vNt))):void 0,s=this.wNt?pi(t.kSt,(t=>qa(t,this.wNt))):void 0,n=this.yNt?pi(t.WEt,(t=>qa(t,this.yNt))):void 0;this.QNt(t),this._Bt=void 0,await this.FNt(i,s,n,e)}async hSt(t){if(!this.kNt)throw new v("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.cNt)throw new v("LLHLSPlayer - Cannot set the active audio rendition when there is no active variant stream.");if(!t)throw new v("LLHLSPlayer - Cannot explicitly set the active audio rendition to undefined.");const e=this.rBt(t);if(!e)throw new v("LLHLSPlayer - Trying to set an invalid rendition as the active audio rendition.");ms.zA(ft,"Switching audio rendition"),await this.FNt(e,this.wNt,this.yNt,{$Tt:!0})}async aSt(t){if(!this.kNt)throw new v("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.cNt)throw new v("LLHLSPlayer - Cannot set the active video rendition when there is no active variant stream.");if(!t)throw new v("LLHLSPlayer - Cannot explicitly set the active video rendition to undefined.");const e=this.rBt(t);if(!e)throw new v("LLHLSPlayer - Trying to set an invalid rendition as the active video rendition.");ms.zA(ft,"Switching video rendition"),await this.FNt(this.vNt,e,this.yNt,{JTt:!0})}async mBt(t){if(!this.kNt)throw new v("LLHLSPlayer - The LLHLSPlayer is not loaded");if(!this.cNt)throw new v("LLHLSPlayer - Cannot set the active subtitle rendition when there is no active variant stream.");if(!t)throw new v("LLHLSPlayer - Cannot explicitly set the active video rendition to undefined.");const e=this.rBt(t);if(!e)throw new v("LLHLSPlayer - Trying to set an invalid rendition as the active subtitle rendition.");ms.zA(ft,"Switching subtitle rendition"),await this.FNt(this.vNt,this.wNt,e)}async pBt(t,e){this.eBt||(t.Iw!==Q.vl?await this.iBt(t,e):this.jNt&&this.jNt.length<=1?(this.wNt!==t&&await this.FNt(this.vNt,t,this.yNt),await this.iBt(t,e)):await this.lBt())}async lRt(t,e){try{await this.Dct.lRt(t,e)}catch(i){throw pe(i),(my(i)||py(i))&&await this.pBt(t,e),i}}async iBt(t,e){if(!Bc(this.yBt,t)){this.yBt.push(t);try{const i=t.Iw===Q.Ay||t.Iw===Q.Lkt?1/0:this.pat.maxRetries;await Xu((()=>this.retryOfflineRenditionsCallback(t,e)),e,i,this.pat.minimumBackoff,this.pat.maximumBackoff)}catch(t){this.OM(new jr(n.MEDIA_LOAD_ERROR,t.message,t))}finally{me(this.yBt,t),t.PTt.QIt===-1/0&&await this.gBt()}}}FNt(t,e,i,s){void 0===s&&(s={});const n={ZTt:s.ZTt||!1,$Tt:s.$Tt||!1,JTt:s.JTt||!1,mv:s.mv||!1};return n.mv||this.vNt!==t||this.wNt!==e||this.yNt!==i?void 0===t&&void 0===e?Promise.reject(new v("Trying to buffer no media renditions.")):(this.vNt=t,this.wNt=e,this.yNt=i,this.rPt(),this.To(new HQ),this.J0.Jl(),this.J0=new Hi,this.ABt.Jl(),this.ABt=new Hi,this.PNt=this.bBt([this.PNt,this.$0].filter(Qf),t,e,i,n,this.ABt.M_).catch(this.RNt),this.PNt):Promise.resolve()}async bBt(t,e,i,s,n,r){var h;await Promise.all(t.map((t=>t.catch(Qo)))),this.TBt(),await this.SBt();const o=[];n.$Tt&&this.tM&&this.tM.mZ&&o.push(this.tM.mZ.Qu(0,1/0)),n.JTt&&this.tM&&this.tM.pZ&&o.push(this.tM.pZ.Qu(0,1/0)),await Promise.all(o),k_(r);const a=await this.kBt(e,i,n.mv,r);this.EBt(e,i,n.ZTt||a),this.IBt(s,n.ZTt),k_(r);const u=[i,e&&i&&cX(e,i)?void 0:e,s].filter(Qf);try{await Promise.all(u.filter((t=>!t.PTt.qIt)).map((t=>{var e;return null==(e=this.Dct)?void 0:e.dRt(t,r)})))}catch(t){pe(t)}if(k_(r),this.PZ(),this.rPt(),void 0!==this.bNt)this.INt(this.bNt,this.TNt);else if(!this.Pct&&(null==(h=this.cNt)?void 0:h.PTt.Tn)){const t=this.cNt.PTt,e=t.Tn;let i=e.vEt;if(e.vEt<0){const e=t.xIt;i+=e.Pn(e.U-1)}this.INt(i,!e.wEt)}else!this.Pct&&u.every((t=>!t.PTt.REt))?this.INt(1/0,!0):this.ANt.length>0&&this.PBt()}async kBt(t,e,i,s){var n,r;const h=void 0!==t&&t!==e,o=void 0!==e,a=await this.RBt(t,e,this.cNt);if(k_(s),!i&&this.tM&&!a)return!1;const u=void 0!==(null==(n=this.tM)?void 0:n.mZ),c=void 0!==(null==(r=this.tM)?void 0:r.pZ);if(!i&&!(h!==u||o!==c)&&a&&this.tM&&this.tM.OX(a))return await this.CBt(s),await this.tM.FX(a),!0;for(const t of this.ANt)t.IDt.forEach((t=>t.Jl()));this.KO.o2();try{this.tM&&await this.KO.ir(),this.tM=await this.xBt(a,h,o)}finally{this.KO.a2()}return!0}async RBt(t,e,i){var s,n;const r=i.bet,h=[];if(void 0!==t){if(!r||!r.cSt)return;{const t='audio/mp4; codecs="'+r.cSt+'"';ms.zA(ft,"Configuring MediaSource for initial audio rendition with codec: "+t+"."),h.push(t)}}if(void 0!==e){if(!r||!r.lSt)return;{const t='video/mp4; codecs="'+r.lSt+'"';ms.zA(ft,"Configuring MediaSource for initial video rendition with codec: "+t+"."),h.push(t)}}if(0===h.length)return void ms.ASt(ft,"No codecs found on the active variant stream.");var o;const a=null!=(o=null==(s=null==e?void 0:e.PTt.mtt[0])?void 0:s.pEt)?o:[];var u;const c=null!=(u=null==(n=null==t?void 0:t.PTt.mtt[0])?void 0:n.pEt)?u:[],l=this.Dct.Ar,d=await KX(this.ERt.contentProtection,h,l.DPt.concat(c).concat(a),this.fP,this.ERt.useCredentials);return{Iw:di.wB,xZ:h.map((t=>({rM:t}))),hM:d,VZ:this.ERt.useManagedMediaSource}}async xBt(t,e,i){let s;return s=t?await this.KO.On(t):new zQ(this.KO,e,i),this.tM=s,this.PZ(),this.mAt(),this.pAt(),s}PZ(){const t=this.tM;if(t&&j(t.ct)){var e,i,s;const n=null!=(s=null==(e=this.vNt)?void 0:e.PTt.ct)?s:null==(i=this.wNt)?void 0:i.PTt.ct;void 0!==n&&n>0&&t.EZ(n)}this.rPt()}mAt(){const t=this.tM;t&&(t.pZ&&(t.pZ.Qq=this.GF.sz),t.mZ&&(t.mZ.Qq=this.GF.sz))}pAt(){const t=this.tM;t&&(t.pZ&&(t.pZ.Zq=this.GF.Zq),t.mZ&&(t.mZ.Zq=this.GF.Zq))}EBt(t,e,i){if(!this.tM)throw new v("Invalid state");this.tM.mZ?this.TZ&&this.TZ.sNt(this.tM.mZ)||(this.TZ=new Vu(Di.yy,this.tM.mZ,this.NNt?this.blt:void 0,this.BNt?this.nNt:void 0)):this.TZ=void 0,this.tM.pZ?this.SZ&&this.SZ.sNt(this.tM.pZ)||(this.SZ=new Vu(Di.vl,this.tM.pZ,this.NNt?this.blt:void 0,this.BNt?this.nNt:void 0)):this.SZ=void 0;const s=t&&e&&cX(t,e);if(this.SZ&&e){const t=s&&this.TZ?[this.SZ,this.TZ]:[this.SZ];this.aNt?this.aNt.zTt!==e&&(i&&(this.aNt.Jl(),this.aNt.NDt.NC()),this.aNt.FCt(e)):(this.aNt=function(t,e,i,s,n,r,h,o,a,u){const c=s.Ar.zT,l=new SQ(c),d=new AQ(Di.vl,t,s,l,n,r,h,u),f=e.map((t=>t.Iw)),_=o.Nat(l,s.Ar.zT,f),g=new FQ(d,l,_,a);return g.BDt(e),g}(e,t,this.KO,this.Dct,this.fP,this.Sat,this.JRt,this.DDt,this.GF,this.ERt.useCredentials),this.aNt.RDt.wn(vn.BCt,this.DBt),this.aNt.RDt.wn(vn.LCt,this.NBt),this.aNt.xDt.wn(Lc.tDt,this.BBt),this.aNt.xDt.wn(Lc.iDt,this.LBt),this.aNt.xDt.wn(Lc.sDt,this.OBt),this.aNt.xDt.wn(Lc.eDt,this.MBt)),this.aNt.BDt(t)}else{var n;null==(n=this.aNt)||n.Ou(),this.aNt=void 0}var r;this.TZ&&t&&!s?(this.MNt?this.MNt.zTt!==t&&(i&&(this.MNt.Jl(),this.MNt.NDt.NC()),this.MNt.FCt(t)):(this.MNt=function(t,e,i,s,n,r,h,o,a,u){const c=s.Ar.zT,l=new SQ(c),d=new AQ(Di.yy,t,s,l,n,r,h,u),f=o.Nat(l,s.Ar.zT,[e.Iw]),_=new FQ(d,l,f,a);return _.BDt([e]),_}(t,this.TZ,this.KO,this.Dct,this.fP,this.Sat,this.JRt,this.DDt,this.GF,this.ERt.useCredentials),this.MNt.RDt.wn(vn.LCt,this.NBt),this.MNt.xDt.wn(Lc.tDt,this.BBt),this.MNt.xDt.wn(Lc.eDt,this.MBt)),this.MNt.BDt([this.TZ])):(null==(r=this.MNt)||r.Ou(),this.MNt=void 0);this.FBt()}IBt(t,e){if(this.sBt){this.sBt.RDt.zTt===t?e&&(this.sBt.Jl(),this.sBt.NDt.NC()):(this.sBt.Ou(),this.sBt=void 0)}if(!this.sBt&&t){const e=this.aBt.get(t.cw);e.bw=lu.Qn,this.sBt=function(t,e,i,s,n,r,h){const o=i.Ar.zT,a=new IQ(e,o),u=new SQ(o),c=new AQ(Di.KT,t,i,u,s,n,r,h),l=new LQ(u,o,Di.KT),d=new FQ(c,u,l);return d.LDt(a),d}(t,e,this.Dct,this.fP,this.Sat,this.JRt,this.ERt.useCredentials)}}FBt(){const t=[this.TZ,this.SZ].filter(Qf).map((t=>t.Iw));this.Dct.Ar.zT.xPt(t)}async t1(t,e,i,s){await Promise.all(t.map((t=>t.catch(Qo)))),k_(s),await this.SBt(),k_(s),this.bNt=void 0,this.SNt=void 0,this.Pct=!0;const n=this.Qut.vF(e);this.KO.gc(n,i),this.kNt&&this.ANt.length>0&&(this.UBt(this.KO.Wu),this.PBt())}UBt(t){for(const e of this.ANt)e.JCt(t)||(e.HDt(),e.NDt.qxt()),e.FDt(t)||(e.VDt(),e.NDt.zxt())}TBt(){for(const t of this.ANt)t.Jl()}SBt(){return Promise.all([this.HBt(),this.VBt(),this.WBt()])}PBt(){this.qBt(),this.zBt(),this.XBt()}async gBt(){this.kNt&&this.ANt.length>0&&(this.ANt.forEach((t=>t.HDt())),await this.HBt(),this.qBt(),this.ANt.forEach((t=>t.RDt.rxt())))}qBt(){if(this.GBt)return;const t=()=>{this.GBt=void 0};this.QBt=new Hi,this.GBt=this.KBt(this.QBt.M_).catch(this.RNt).then(t,t)}async HBt(){var t;null==(t=this.QBt)||t.Jl();const e=this.GBt;this.GBt=void 0,e&&await e}async KBt(t){k_(t);const e=this.ANt;for(;;){const i=[],s=this.KO.Wu;for(const t of e){const e=t.RDt,n=t._gt(s);if(e.MRt)i.push(e.HRt());else if(t.UDt(s,n,this.GF.sz)){const s=e.$Ct(n);if(void 0===s){if(e.zTt.PTt.REt)continue;const t=e.zTt.PTt.mtt;t.length&&t[0].PS>n&&(this.Wu=1/0),e.axt(),e.ixt(n)}else{const[i,n]=s;e.oft(i,n,t.IRt),t.xDt.fDt(i,n)}i.push(e.HRt())}}await zs((t=>{if(0===i.length){e.every((t=>t.RDt.ZCt))||i.push(this.KO.eg(o.Lu,t));for(const s of e)i.push(s.xDt.eg(Lc.eDt,t))}return E_(Promise.race(i),t)}),t)}}zBt(){if(this.jBt)return;const t=()=>{this.jBt=void 0};this.YBt=new Hi,this.jBt=this.ZBt(this.YBt.M_).catch(this.RNt).then(t,t)}async VBt(){var t;null==(t=this.YBt)||t.Jl();const e=this.jBt;this.jBt=void 0,e&&await e}async ZBt(t){k_(t);const e=this.ANt;for(;;){const i=[];for(const t of e){const e=t.RDt,s=t.xDt;if(s.MRt)i.push(s.HRt());else{const t=e.XCt();t?"wnt"===t.Iw?(s.wDt(t),i.push(s.HRt())):"SEt"===t.Iw&&(s._Dt(t),i.push(s.HRt())):i.push(e.hxt())}}if(0===i.length)break;await E_(Promise.race(i),t)}}XBt(){if(this.JBt)return;this.$Bt=new Hi;const t=()=>{this.JBt=void 0};this.JBt=this.tLt(this.$Bt.M_).catch(this.RNt).then(t,t)}async WBt(){var t;null==(t=this.$Bt)||t.Jl();const e=this.JBt;this.JBt=void 0,e&&await e}async tLt(t){for(;;){const e=this.ANt;e.forEach((t=>t.rft()));const i=[],s=[],n=[];for(const t of e){const e=t.xDt;for(const r of t.IDt){const t=r.NRt?i:s;if(r.MRt)t.push(r.HRt());else if(!r.VRt(this.KO.Wu)){const i=e.TDt(r.Iw);i?"wnt"===i.Iw&&i.IEt===this.mNt?(r.mgt(i),t.push(r.HRt())):"kDt"===i.Iw&&i.IEt===this.mNt&&(r.qj(i),t.push(r.HRt())):n.push(e.SDt(r.Iw))}}}if(0===i.length){const i=Ga(e,(t=>t.IDt.filter((t=>t.NRt)).map((e=>t.xDt.TDt(e.Iw)))));if(i.length>0&&i.every((t=>void 0!==t&&"kDt"===t.Iw&&t.IEt!==this.mNt))){const s=i,n=rr(s,(t=>t.IEt)).IEt;if(s.every((t=>t.IEt===n))){const e=a_(s,(t=>t.PS)).PS,i=await this.eLt(s);this.iLt(i)?(ms.ySt(yX,"Seamless switch from",this.tM.xb,"to",i),await this.tM.FX(i),ms.ySt(yX,"Seamless switch complete.")):await this.sLt(e,i,t),this.mNt=s[0].IEt}else for(const t of e)for(const e of t.IDt){let i=t.xDt.TDt(e.Iw);for(;i&&i.IEt!==n;)t.xDt.qRt(i),i=t.xDt.TDt(e.Iw)}continue}}if(0===i.length&&0===s.length&&0===n.length){e.every((t=>t.IDt.length>0&&t.IDt.every((t=>t.VRt(this.KO.Wu)))))&&this.tM.EY();break}await E_(Promise.race([...i,...s,...n]),t)}}iLt(t){return this.UNt===Ts.ZT||this.UNt!==Ts.JT&&this.tM.OX(t)}async eLt(t){const e=t.map((t=>t.EDt.bet)),i=e.map((t=>({rM:t}))),s=Ga(t,(t=>t.EDt.pEt));s.push(...this.Dct.Ar.DPt);let n=await KX(this.ERt.contentProtection,e,s,this.fP,this.ERt.useCredentials);return 0===n.length&&this.tM&&this.tM.xb.hM.length>0&&(n=this.tM.xb.hM),{Iw:di.wB,xZ:i,hM:n,VZ:this.ERt.useManagedMediaSource}}async sLt(t,e,i){var s;const n=this.tM,r=n.ct,h=this.bl.length>0&&this.Wu<t;if(h)try{for(ms.ySt(yX,"Marking end of stream and waiting for ended to switch discontinuity."),n.EY();!this.KO.Ic&&this.KO.Wu<t;)await this.KO.eg([o.Lu,o.Pf],i)}catch(t){throw n.vY(),n.EZ(r),t}ms.ySt(yX,"Perform hard switch from",null==(s=this.tM)?void 0:s.xb,"to",e);try{this.KO.o2(),this.Wu<t&&this.KO.gc(t,!0,!0),this.SZ=void 0,this.TZ=void 0,this.FBt(),await this.KO.ir(),this.tM=await this.KO.On(e),this.PZ(),this.mAt(),this.pAt(),this.tM.pZ&&(this.SZ=new Vu(Di.vl,this.tM.pZ,this.NNt?this.blt:void 0,this.BNt?this.nNt:void 0)),this.tM.mZ&&(this.TZ=new Vu(Di.yy,this.tM.mZ,this.NNt?this.blt:void 0,this.BNt?this.nNt:void 0)),this.FBt()}finally{h&&M(this.KO.dl()),this.KO.a2()}if(this.aNt){const t=void 0!==this.TZ&&void 0===this.MNt?[this.SZ,this.TZ]:[this.SZ];this.aNt.BDt(t)}this.MNt&&this.MNt.BDt([this.TZ]),ms.ySt(yX,"Hard switch complete.")}CBt(t){return E_(so(Ga(this.ANt,(t=>t.IDt.map((t=>t.HRt()))))),t)}mct(){const t=this.Kg,e=this.Xg;this.xlt===t&&this.Dlt===e||(this.xlt=t,this.Dlt=e,this.To(new le))}async bn(){ms.zA(ft,"Unloading the player."),this.nLt(),this.dlt(),await this.ir(),this.KO.yM=void 0,this.oBt.bn(),await this.gM.bn(),await this.blt.bn(),await this.nNt.bn(),this.$T.bn(),this.eS.bn(),this.xu.bn(),this.hf.bn(),this.Blt.Ou(),this.JRt.Ou(),this.DDt&&(this.DDt.Ou(),this.DDt=void 0)}async ir(){ms.zA(ft,"Resetting the player."),this.pn(Hc.ETt,this.handleBufferingErrorEvent),this.mNt=-1,this.wP.Jl(),this.wP=new Hi,this.J0.Jl(),this.J0=new Hi,this.ABt.Jl(),this.ABt=new Hi;const t=[this.cvt,this.$0,this.PNt].filter(Qf);await Promise.all(t.map((t=>t.catch(Qo)))),this.cvt=void 0,this.$0=void 0,this.PNt=void 0,this.vNt=void 0,this.wNt=void 0,this.yNt=void 0,this.jNt=void 0,this.xNt=void 0,this.CNt=void 0,this.JNt=void 0,this.yBt=[],this.QNt(void 0),this.TBt(),await this.SBt(),this.MNt&&(this.MNt.Ou(),this.MNt=void 0),this.aNt&&(this.aNt.Ou(),this.aNt=void 0),this.sBt&&(this.sBt.Ou(),this.sBt=void 0),this.TZ=void 0,this.SZ=void 0,this.tM=void 0,this.Dct&&(this.Dct.Ou(),this.Dct=void 0),this.VNt&&(this.xu.HO(this.VNt.nt),this.VNt=void 0),await this.gM.ir(),await this.blt.ir(),await this.nNt.ir(),this.KO.vM(),await this.KO.ir(),this.ERt=void 0,this.kNt=!1,this.RZ=d.Nl(),this.bNt=void 0,this.Clt=void 0,this.xlt=0,this.Dlt=0,this.SNt=void 0,this.Pct=!1,this.H0=!1,Ee.W_(this.ENt),this.nct=!1,this.rLt=!1,this.Yut=0,this.UNt=Ts.XT,this.hf.ir(),this.hLt(),this.To(new $a(this.Wu,this.Nc))}hLt(){for(const t of this.$T.Kv)t.bn();for(const t of this.eS.Kv)t.bn();for(const t of this.xu.Kv)t.bn();this.$T.ir(),this.eS.ir(),this.xu.ir(),this.aBt.clear()}oLt(){this.hf.wn(nK,this.Os),this.hf.wn(ee.Qf,this.Vf),this.hf.wn(ee.Yf,this.aLt),this.hf.wn(ee.pl,this.uLt),this.GF.wn("Gq",this.AAt),this.GF.wn("Yq",this.bAt),this.KO.wn(rK,this.Os),this.KO.wn(o.Xw,this.handleContentProtectionErrorEvent),this.KO.wn(o.Nf,this.cLt),this.KO.wn(o.Pf,this.Mh),this.KO.wn(o.Ch,this.Mf),this.KO.wn(o.Ph,this.Af),this.KO.wn(o.Rf,this.lLt),this.KO.wn(ee.Bf,this.BB),this.KO.wn(o.Lu,this.T$),this.KO.wn(o.If,this.Xe),this.KO.wn(o.Tf,this.Cf),this.KO.wn(o.vm,this.dLt),this.KO.wn(o.Il,this.fLt)}nLt(){this.hf.pn(nK,this.Os),this.hf.pn(ee.Qf,this.Vf),this.hf.pn(ee.Yf,this.aLt),this.hf.pn(ee.pl,this.uLt),this.GF.pn("Gq",this.AAt),this.GF.pn("Yq",this.bAt),this.KO.pn(rK,this.Os),this.KO.pn(o.Xw,this.handleContentProtectionErrorEvent),this.KO.pn(o.Nf,this.cLt),this.KO.pn(o.Pf,this.Mh),this.KO.pn(o.Ch,this.Mf),this.KO.pn(o.Ph,this.Af),this.KO.pn(o.Rf,this.lLt),this.KO.pn(ee.Bf,this.BB),this.KO.pn(o.Lu,this.T$),this.KO.pn(o.If,this.Xe),this.KO.pn(o.Tf,this.Cf),this.KO.pn(o.vm,this.dLt),this.KO.pn(o.Il,this.fLt)}constructor(t,e,i,s,r,h,o){super(),this.GF=i,this.JRt=s,this.WNt=r,this.aBt=Yh(),this.BNt=!0,this.NNt=!0,this.kNt=!1,this.ERt=void 0,this.tM=void 0,this.cvt=void 0,this.wP=new Hi,this.Dct=void 0,this.xNt=void 0,this.CNt=void 0,this.JNt=void 0,this.cNt=void 0,this.vNt=void 0,this.wNt=void 0,this.yNt=void 0,this.jNt=void 0,this.yBt=[],this.TZ=void 0,this.SZ=void 0,this.MNt=void 0,this.aNt=void 0,this.sBt=void 0,this.DDt=void 0,this.ABt=new Hi,this.PNt=void 0,this.J0=new Hi,this.$0=void 0,this.mNt=-1,this.QBt=void 0,this.YBt=void 0,this.$Bt=void 0,this.GBt=void 0,this.jBt=void 0,this.JBt=void 0,this.fht=!0,this.uBt=0,this.eBt=!1,this.$O=D.$M,this.ZO=void 0,this.Vl=void 0,this.RZ=d.Nl(),this._Lt=[],this.bNt=void 0,this.TNt=!1,this.Pct=!1,this.H0=!1,this.Clt=void 0,this.xlt=0,this.Dlt=0,this.SNt=void 0,this.ENt=0,this.nct=!1,this.rLt=!1,this.UNt=Ts.XT,this._Bt=void 0,this.gLt=void 0,this.iM=new fe,this.Yut=0,this.handleContentProtectionErrorEvent=t=>{this.ZO=Lt(t.errorObject),this.Vl=t.errorObject,this.Os(t)},this.handleBufferingErrorEvent=t=>{this.OM(new jr(n.MEDIA_LOAD_ERROR,t.lt.message,t.lt))},this.cLt=()=>{this.rPt();const t=this.ct;t!==this.Clt&&(this.Clt=t,this.To(new oa(this.Clt)))},this.Mh=()=>{this.Ic&&this.To(new ih(this.Wu))},this.Mf=()=>{this.To(new mt(this.Wu))},this.Af=()=>{this.lut(),this.To(new ds(this.Wu))},this.Vf=()=>{void 0!==this.gLt&&Ee.W_(this.gLt),this.To(new _a(this.Wu))},this.lLt=()=>{this.To(new bc(this.Wu))},this.BB=()=>{this.To(new Qs(this.Wu,this.Nc))},this.T$=()=>{const t=this.KTt;er(this._Lt,t)||(this.To(new oQ),this._Lt=t),this.To(new hc(this.Wu,this.qu))},this.DBt=E((t=>{t.hP===Di.vl&&this.oNt()&&M(this.uNt())}),200),this.NBt=t=>{var e;this.Yut+=t.MCt,"wnt"===t.OCt&&t.hP===Di.vl&&M(this.lBt()),this.To(new On(function(t){if(t){if(void 0!==t.qnt){var e,i;const s=t.qnt.Tn+(null!=(i=t.qnt.U)?i:0);return{TI:t.kT,iet:[null==(e=t.qnt)?void 0:e.Tn,s],oP:!0}}return{TI:t.kT.toString()||"",oP:!0}}return{TI:"",oP:!0}}(t.uri),(null==(e=this.XTt)?void 0:e.IO)||0,t.mediaSequenceNumeber,t.mediaTrackId,t.hP,t.httpStatusCode,t.MCt))},this.Xe=()=>{this.To(new T(this.Wu))},this.Cf=()=>{this.To(new ju(this.Wu))},this.dLt=()=>{this.mct()},this.fLt=()=>{this.To(new Eo(this.Wu,this._l))},this.aLt=()=>{this.KO.Fc?this.To(new ki(this.Wu)):(null!=this.gLt||(this.gLt=Ee.q_((()=>{this.rLt&&(this._Bt=void 0,M(this.dNt()))}),2500)),this.lut(),this.To(new ki(this.Wu)))},this.uLt=()=>{this.rLt=!0,this.To(new Zw(this.Wu,this.Nc))},this.RNt=t=>{Aa(t)||my(t)||py(t)||(this.TBt(),M(this.SBt()),this.To(new CX(t)))},this.kRt=()=>{this.rPt()},this.HNt=t=>{M(this.pBt(t.zTt))},this.yut=t=>{if(Aa(t))return;const e=t instanceof jr?t:new jr(n.MEDIA_DECODE_ERROR,t.message,t);this.OM(e)},this.onTextTrackChange=t=>{if(!this.cNt)return;const e=t.Ht,i=pi(this.cNt.WEt,(t=>e===this.aBt.get(t.cw)));i&&(e.bw===lu.Tw||e.bw===lu.Qn?(M(this.mBt(i)),this.aBt.forEach((t=>{t!==e&&(t.bw=lu.Th)}))):this.yNt&&this.yNt===i&&M(this.FNt(this.vNt,this.wNt,void 0)))},this.retryOfflineRenditionsCallback=async(t,e)=>{this.pNt!==t&&this.rSt!==t&&this.oSt!==t||(await this.Dct.lRt(t,e),t.PTt.QIt=-1/0)},this.AAt=()=>{this.mAt()},this.bAt=()=>{this.pAt()},this.BBt=t=>{const e=this.cNt;if(!(null==e?void 0:e.FEt)&&(this.Dct.TRt(t.bet,t.zTt.PTt),this.XNt.PSt(),e)){const t=void 0!==this.vNt&&!Bc(e.SSt,this.vNt),i=void 0!==this.wNt&&!Bc(e.kSt,this.wNt);(t||i)&&this.FNt(t?void 0:this.vNt,i?void 0:this.wNt,this.yNt).catch(Qo)}},this.LBt=t=>{this.XNt.xSt(t.zTt,t.Iet)},this.OBt=t=>{this.XNt.NSt(t.zTt,t.nDt.hk())},this.MBt=t=>{this.Dct.ARt(t.zTt)},this.Sat=new xV(h),this.KO=t,this.fP=e,this.nM=new RX(this.GF.Mq),this.vBt=new xX(this.KO),this.dBt=new WX(this.GF),this.pat=o.retryConfiguration,this.$T=new mi,this.eS=new mi,this.XNt=new AX(this,this.GF,this.$T,this.eS),this.oBt=new gn,this.gM=new Oy(this.KO,this.fP),this.blt=new Cn(this.KO),this.nNt=new Hn(this.KO),this.xu=new Uu([this.oBt,this.gM.Z,this.blt.Z,this.nNt.Z]),this.cM=new Tk(this.fP),this.KO.yM=this.cM,this.Blt=new uK(this,this.KO),this.hf=new lS(this.Blt,!0),this.oLt()}},aK=class{async FM(t,e){if(!Hw(t.type))return!1;if(t.useNativePlayback)return!1;const i=t.contentProtection;if(i&&!gw(i)){if(!Nr(i))return!1;if(!await this.j7(i))return!1}return!0}async j7(t){return!!t.aes128||(!(!t.playready||!await Ee.vN())||(!(!t.widevine||!await Ee.fN())||(!(!t.clearkey||!await Ee.gN())||!t.fairplay&&await Ee.bN())))}},uK=class extends nh{get Nc(){return this.Ko.Nc}Mlt(){this.To(new Qs(this.Wu,this.Nc))}constructor(t,e){super(e),this.Ko=t}};function cK(t){const e=pi(t,(t=>t.RTt)),i=t.filter((t=>t.CTt)),s=Ee.T9,n=i.map((t=>t.gs)).filter(Qf),r=GQ(n,s);return r?pi(i,(t=>t.gs===r)):e}function lK(t,e){for(const i of e){const e=t.filter((t=>t.bet&&t.bet.cSt&&Ya(t.bet.cSt,i)));if(0!==e.length)return e}}function dK(t){var e;return null!=(e=cK(t))?e:t[0]}function fK(t,e){return t.filter((t=>_K(t,e)))}function _K(t,e){const i=e+hK;return 0===t.kSt.length||t.kSt.some((t=>t.PTt.QIt<Ee.V_()-i))}function gK(t,e){if(!e||e.PTt.REt)return!1;const i=e.PTt.mtt;return 0!==i.length&&i[0].PS>t}var vK=class{async YRt(t,e,i){try{const s=await crypto.subtle.importKey("raw",e,{name:"AES-CBC"},!1,["decrypt"]),n=await crypto.subtle.decrypt({name:"AES-CBC",iv:i},s,t);return new x(n)}catch(t){throw new jr(n.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")}}Ou(){}static EN(){return"undefined"!=typeof crypto&&void 0!==crypto.subtle&&void 0!==crypto.subtle.decrypt}},vc=class extends Xi{constructor(t,e){super(t),this.data=e}},wK=["message","messageerror","error"],mK=class extends Xi{constructor(t){super(zn.aa),this.error=t}},pK=class extends Et{get vLt(){return this.wLt.M_.R_}mLt(t,e){this.vLt||(void 0!==this.pLt?this.pLt.mLt(t,e):this.yLt.push({pC:t,ALt:e}))}bLt(){this.vLt||(this.wLt.Jl(),Ce(this.yLt),void 0!==this.pLt&&this.pLt.bLt())}constructor(t){super(),this.pLt=void 0,this.yLt=[],this.TLt=t=>{if(this.vLt)t.bLt();else{this.pLt=t,this.pLt.wn(wK,this.Os);for(const e of this.yLt)t.mLt(e.pC,e.ALt);Ce(this.yLt)}},this.SLt=t=>{if(this.vLt)return;const e=t instanceof v?t:new v("Could not create Worker.");this.To(new mK(e)),this.bLt()},this.wLt=new Hi,t(this.wLt.M_).then(this.TLt,this.SLt)}};var yK=class extends Et{mLt(t,e){e?this.pLt.postMessage(t,e):this.pLt.postMessage(t)}bLt(){this.Lo(),this.pLt.removeEventListener("message",this.kLt),this.pLt.removeEventListener("messageerror",this.ELt),this.pLt.removeEventListener("error",this.J1),this.pLt.terminate()}constructor(t,e){super(),this.kLt=t=>{this.To(new vc("message",t.data))},this.ELt=t=>{this.To(new vc("messageerror",t.data))},this.J1=t=>{null==t.preventDefault||t.preventDefault();const e=t.error instanceof v?t.error:new v(t.message);this.To(new mK(e)),this.bLt()},this.pLt=new rl(t,e),this.pLt.addEventListener("message",this.kLt),this.pLt.addEventListener("messageerror",this.ELt),this.pLt.addEventListener("error",this.J1)}},AK=0,bK=class extends Et{mLt(t,e){e?this.ILt.contentWindow.postMessage({type:"message",data:t},"*",e):this.ILt.contentWindow.postMessage({type:"message",data:t},"*")}bLt(){var t;this.ILt.removeEventListener("load",this.PLt),self.removeEventListener("message",this.RLt),null==(t=this.ILt.contentWindow)||t.postMessage({type:"terminate"},"*"),dt(this.ILt)}constructor(t,e){super(),this.PLt=()=>{this.ILt.removeEventListener("load",this.PLt),this.ILt.contentWindow.postMessage({type:"initialize",id:this.wS,script:this.CLt},"*")},this.RLt=t=>{t.origin===this.xLt&&t.data.id===this.wS&&("initialized"===t.data.type||("error"===t.data.type?(this.To(new mK(new v(t.data.data.message))),this.bLt()):this.To(new vc("message",t.data.data))))},this.wS=AK++,this.CLt=t;const i=Ee.Rh("iframe.html",e);this.ILt=function(t){const e=h.createElement("iframe");return e.width="0",e.height="0",e.style.display="none",e.src=t,h.body.appendChild(e),e}(i.href),this.xLt=i.origin,this.ILt.addEventListener("load",this.PLt),self.addEventListener("message",this.RLt)}};function TK(t,e,i){const s=Ee.Fm(t,e);return new pK((t=>async function(t,e,i,s){let n;try{return n=new yK(t,i),await IK(n,s),n}catch(t){null==n||n.bLt(),pe(t)}if(EK&&iu){let e;try{const i=await Ee.Gf.pI({TI:t,iP:ut.GET,sP:Ct.KT,M_:s});e=await i._P(s)}catch(t){pe(t)}if(e){let t;try{const r=iu([e],{type:"application/javascript"});return t=URL.createObjectURL(r),n=new yK(t,i),await IK(n,s),n}catch(t){null==n||n.bLt(),pe(t),EK=!1}finally{t&&URL.revokeObjectURL(t)}}}try{return n=new bK(t,e),await IK(n,s),n}catch(t){throw null==n||n.bLt(),t}}(s,e,i,t)))}var SK,kK,EK=!0;async function IK(t,e){const i=await t.eg(["message","error"],e);if("error"===i.type)throw function(t){return new jr(n.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check the configuration of the libraryLocation.",t)}(i.error);if(!function(t){return _i(t)&&"6.10.1"===t.DLt}(i.data))throw new jr(n.CONFIGURATION_ERROR,"THEOplayer workers could not be loaded. Please check that the worker's version matches THEOplayer's version (6.10.1).");return i}!function(t){t.NLt="YRt",t.BLt="ACt"}(SK||(SK={})),function(t){t.LLt="OLt",t.MLt="FLt"}(kK||(kK={}));var PK=class{ULt(){const t=TK(this.HLt,this.VLt,{name:"THEOplayer decrypt worker"});return t.wn("message",this.WLt),t.wn("error",this.q9),t}YRt(t,e,i){const s=""+ ++this.qLt,n={zLt:SK.NLt,XLt:s,GLt:t,QLt:e,KLt:i},r=new $i;return this.jLt.set(s,r),null!=this.pLt||(this.pLt=this.ULt()),this.pLt.mLt(n),r.jf}Ou(t){void 0===t&&(t=new At),this.jLt.forEach((e=>e.BC(t))),this.jLt.clear(),this.pLt&&(this.pLt.bLt(),this.pLt=void 0)}constructor(t){this.pLt=void 0,this.qLt=0,this.jLt=Wn(),this.WLt=t=>{const e=t.data,i=e.YLt,s=this.jLt.get(i);s&&(this.jLt.delete(i),e.ZLt===kK.LLt?s.Lf(e.JLt):e.ZLt===kK.MLt&&s.BC(new jr(n.CONTENT_PROTECTION_INTERNAL_ERROR,"Error during AES128 decrypt.")))},this.q9=t=>{const e=new jr(n.CONTENT_PROTECTION_INTERNAL_ERROR,t.error.message,t.error);this.Ou(e)},this.VLt=t;try{this.HLt=Ee.Fm("theoplayer.d.js",t)}catch(t){throw new jr(n.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}}};function RK(t){const e=pi(t.boxes,lR);if(!e)return;const i=pi(e.boxes,dR);return i?i.handlerType:void 0}function CK(t){const e=new dT;return e.boxes.push(...t.boxes),e}function xK(t){const e=new xb;return e.boxes.push(...t.boxes),e}var DK=8;function NK(t,e){const i=function(t){const e=new Vb;return e.boxes.push(...t.boxes),e}(t),s=LK(e);for(let t=0;t<i.boxes.length;t++){const n=i.boxes[t];if(n===e)i.boxes[t]=new nb(new x(e.getSize()-DK));else if(fR(n)){const e=n,r=rs(e.boxes,(t=>t instanceof Rb&&t.trackId===s));if(r>=0){const s=e.boxes[r],n=xK(e);n.boxes[r]=new nb(new x(s.getSize()-DK)),i.boxes[t]=n}}}return i}function BK(t,e){const i=function(t){const e=new Yb;return e.boxes.push(...t.boxes),e}(t);for(let t=0;t<i.boxes.length;t++){const s=i.boxes[t];if(vR(s)){const n=pi(s.boxes,wR);n&&n.trackId===e&&(i.boxes[t]=new nb(new x(s.getSize()-DK)))}}return i}function LK(t){return pi(t.boxes,cR).trackId}function OK(t,e,i,s){const n=pi(t.boxes,wR),r=i.aE(e).Uk();let h=Te.ZERO;for(const e of t.boxes){if(e instanceof zb){h=Ev(e.baseMediaDecodeTime,r),e.baseMediaDecodeTime=e.baseMediaDecodeTime.subtract(h);break}if(e instanceof ch){h=Ev(Te.fromNumber(e.baseMediaDecodeTime),r),e.baseMediaDecodeTime-=h.toNumber();break}}if(h.isZero())return;const o=pi(t.boxes,mR);if(void 0!==o&&o.samples.length>0){const t=o.samples;if(!o.flags.sampleDurationPresent){o.flags.sampleDurationPresent=!0;const e=null!=s?s:n.defaultSampleDuration;for(const i of t)i.duration=e}t[0].duration+=h.toNumber(),o.samples=t}}var MK="Mp4Transmuxer",FK=class extends DQ{vDt(t,e){k_(e);const i=t.zTt,s=qR(Sa(t.SEt.Ny.Ny));if(!s)throw new v("Mp4Transmuxer - Unable to parse "+i.Iw+" MP4 initializer.");this.Gj=s;const n=function(t){let e,i;for(const s of t.Z)e||(e=s.VK),i||(i=s.HK);if(e||i)return{cSt:e,lSt:i,Dkt:void 0};return}(s);n&&this.pDt(i,n);const r=function(t){for(const e of t.Z)if(void 0!==e.WK)return e.WK;return}(s);void 0!==r&&this.yDt(i,r);const h=function(t){var e;const i=mT(t),s=pi(i.boxes,aR),n=s.boxes.filter(uR),r=pi(n,(t=>RK(t)===_b.AUDIO)),h=pi(n,(t=>RK(t)===_b.VIDEO)),o={cSt:{MA:r?LK(r):void 0},lSt:{MA:h?LK(h):void 0}},a=null==(e=pi(s.boxes,fR))?void 0:e.boxes.filter(_R);var u,c;const l=a?{cSt:null!=(u=pi(a,(t=>t.trackId===o.cSt.MA)))?u:void 0,lSt:null!=(c=pi(a,(t=>t.trackId===o.lSt.MA)))?c:void 0}:void 0;var d,f;if(l&&(o.cSt.rT=null==(d=l.cSt)?void 0:d.defaultSampleDuration,o.lSt.rT=null==(f=l.lSt)?void 0:f.defaultSampleDuration),!r||!h)return{cSt:r?t:void 0,lSt:h?t:void 0,WE:o};const _=CK(i),g=CK(i),v=i.boxes.indexOf(s);_.boxes[v]=NK(s,h),g.boxes[v]=NK(s,r);const w=_.serialize().join(),m=g.serialize().join();return{cSt:w,lSt:m,WE:o}}(t.SEt.Ny.Ny);if(this.$Lt=h.WE,h.lSt){const e=pi(s.Z,(t=>t.MA===h.WE.lSt.MA)),i={Iw:"kDt",Ny:{Iw:F.xX,Ny:h.lSt},rot:Di.vl,IEt:t.IEt,EDt:{bet:'video/mp4; codecs="'+e.HK+'"',pEt:t.pEt},PS:t.PS,zTt:t.zTt,GRt:t.SEt.GRt};this.Fxt(i)}if(h.cSt){const e=pi(s.Z,(t=>t.MA===h.WE.cSt.MA)),i={Iw:"kDt",Ny:{Iw:F.xX,Ny:h.cSt},rot:Di.yy,IEt:t.IEt,EDt:{bet:'audio/mp4; codecs="'+e.VK+'"',pEt:t.pEt},PS:t.PS,zTt:t.zTt,GRt:t.SEt.GRt};this.Fxt(i)}return Promise.resolve()}async mDt(t,e){k_(e);const i=t.wnt.GRt;ms.zA(MK,"Transmuxing fMP4: "+ws(i.Nit));const s=t.wnt.Ny,n=UK(s.Ny,this.Gj),r=u_(n.map((t=>t.w6)),zm);if(void 0!==r&&(i.m6=r,this.bDt(t.zTt)),!this.LPt._Pt(t.IEt)){const s=yi.fE(i.PS);if(n.length>0){const e=u_(n.map((t=>t.tOt)),zm);for(const i of this.uDt)this.LPt.SPt(t.IEt,i,e,s,!1);this.bDt(t.zTt)}this.LPt._Pt(t.IEt)||await E_(this.LPt.vPt(t.IEt),e)}const h=this.LPt.yPt(t.IEt),o=i.m6?this.LPt.APt(i.m6,i).hk():i.PS,a=NQ(i,o);var u;const c={Yxt:a,Zxt:BQ(i,a),PS:o,ct:null!=(u=i.ct)?u:0,NE:h.hk(),IEt:t.IEt,zTt:t.zTt,GRt:t.wnt.GRt},l=function(t,e){if(void 0===e.cSt.MA)return{cSt:void 0,lSt:t};if(void 0===e.lSt.MA)return{cSt:t,lSt:void 0};const i=mT(t),s=CK(i),n=CK(i);for(let t=0;t<i.boxes.length;t++){const r=i.boxes[t];gR(r)&&(s.boxes[t]=BK(r,e.lSt.MA),n.boxes[t]=BK(r,e.cSt.MA))}const r=s.serialize().join(),h=n.serialize().join();return{cSt:r,lSt:h}}(s.Ny,this.$Lt);if(l.lSt){var d;const e=this.$Lt.lSt.MA,s=pi(this.Gj.Z,(t=>t.MA===e)),h=pi(n,(t=>t.MA===e)),o=this.eOt(l.lSt,s,h,null==(d=this.$Lt)?void 0:d.lSt.rT,i);this.iOt=s,this.ADt(t.zTt,i,h.w6.Ak(r));const a=Me({Iw:"wnt",Ny:{Iw:F.xX,Ny:o},rot:Di.vl},c);this.Fxt(a)}if(l.cSt){const t=Me({Iw:"wnt",Ny:{Iw:F.xX,Ny:l.cSt},rot:Di.yy},c);this.Fxt(t)}this.sOt=i,this.nOt=n}eOt(t,e,i,s,n){if(!function(t){return ni(t)?t.TEt:0===t.iIt&&t.tIt.TEt}(n))return t;if(!this.sOt||!this.iOt||!this.nOt)return t;const r=this.iOt.MA,h=pi(this.nOt,(t=>t.MA===r)),o=this.LPt.APt(h.rOt,this.sOt),a=this.LPt.APt(i.w6,n).Ak(o).aE(e.IA);if(a._k(yi.Rk))return t;if(a.ck(yi.fE(.5)))return t;const u=ni(n)?n:n.tIt;return ms.ySt(MK,"Stretching first video frame of segment #"+u.rEt+" to fill gap of "+a.hk()+"s"),function(t,e,i,s){const n=mT(t),r=pi(n.boxes,gR);if(r){const t=r.getSize();for(const t of r.boxes)t instanceof Ti&&OK(t,e,i,s);const n=r.getSize();if(n!==t){const e=n-t;for(const t of r.boxes)t instanceof Ti&&pR(t,e)}}return n.serialize().join()}(t,e.IA,a,s)}constructor(...t){super(...t),this.Gj=void 0,this.$Lt=void 0,this.sOt=void 0,this.nOt=void 0,this.iOt=void 0}};function UK(t,e){const i=uo(Ue.uA(Sa(t)),hs.Yp);if(!i)throw new v("Mp4Transmuxer - Unable to parse segment or part.");return function(t,e){const i=[];for(const n of t.Z){if(!n.vT||0===n.gT.length||0===n.gT[0].bT.length)continue;const t=n.eA.MA,r=pi(e.Z,(e=>e.MA===t));let h=0,o=1/0,a=0;const u=n.eA.rT||0;for(const t of n.gT)for(const e of t.bT){const t=e.TT||0,i=h+t;var s;h+=null!=(s=e.ct)?s:u;const n=h+t;i<o&&(o=i),n>a&&(a=n)}const c=yi.Ek(n.vT.vT,r.IA);i.push({MA:t,tOt:c,w6:c.fS(yi.Ik(o,r.IA)),hOt:c.fS(yi.Ik(h,r.IA)),rOt:c.fS(yi.Ik(a,r.IA))})}return i}(i,e)}var HK,VK="MpegtsTransmuxer",WK=class extends FK{vDt(t,e){return super.vDt(t,e)}fDt(t,e){if(super.fDt(t,e),this.h7.oOt())return;var i;const s=null!=(i=null==e?void 0:e.Nit)?i:t.Nit;if(!s)return;/\.(ts|aac|mp3)/i.test(s.kT)&&this.h7.aOt()}uOt(t){let e;return this.cOt.has(t.IEt)?e=this.cOt.get(t.IEt):(e=tK(t.wnt.Ny.Ny),this.cOt.set(t.IEt,e)),e}async mDt(t,e){k_(e);const i=this.uOt(t),s=t.wnt;if(i!==KQ.eNt&&i!==KQ.iNt)return super.mDt(t,e);if(s.GRt.pEt.some(zK))throw new jr(n.CONTENT_PROTECTION_NOT_SUPPORTED,"SAMPLE-AES encryption is not supported for MPEG-TS or Packed Audio segments");const r=this.h7.aOt();let h;i===KQ.eNt?(ms.zA(VK,"Transmuxing MPEG-TS: "+ws(s.GRt.Nit)),h=await r.lOt({data:s.Ny.Ny,metadata:this.dOt})):(ms.zA(VK,"Transmuxing raw audio: "+ws(s.GRt.Nit)),h=await r.fOt({data:s.Ny.Ny,metadata:this.dOt})),k_(e),this.pDt(t.zTt,{cSt:h.metadata.audio_codec,lSt:h.metadata.video_codec,Dkt:void 0}),h.metadata.video_frame_rate&&this.yDt(t.zTt,h.metadata.video_frame_rate);const o=XK(h.metadata.first_decode_timestamp),a=XK(h.metadata.first_presentation_timestamp),u=void 0!==h.metadata.first_video_presentation_timestamp?XK(h.metadata.first_video_presentation_timestamp):void 0;if(s.GRt.m6=a,this.bDt(t.zTt),void 0!==u&&this.ADt(t.zTt,s.GRt,function(t,e){let i=t.Ak(e);return i.vk(yi.Rk)&&(i=i.fS(Qm())),i}(u,a)),!this.LPt._Pt(t.IEt)){const i=yi.fE(s.GRt.PS);for(const e of this.uDt)this.LPt.SPt(t.IEt,e,o,i,!0);this.bDt(t.zTt),this.LPt._Pt(t.IEt)||await E_(this.LPt.vPt(t.IEt),e)}const c=this.LPt.TPt(o,s.GRt);this.dOt=h.metadata;const l=this.LPt.APt(a,s.GRt).hk(),d=NQ(s.GRt,l);var f;const _={Yxt:d,Zxt:BQ(s.GRt,d),PS:l,ct:null!=(f=s.GRt.ct)?f:0,NE:c.hk(),IEt:t.IEt,zTt:t.zTt,GRt:s.GRt};if(void 0===h.data.audio_media&&void 0===h.data.video_media){for(const t of this.uDt){const e=Me({Iw:"wnt",Ny:void 0,rot:t},_);this.Fxt(e)}return}const g=[];if(void 0!==h.data.audio_media){if(h.data.audio_init&&(!this._Ot||this.gOt!==t.IEt||!L(this._Ot,h.data.audio_init))){const e=this.LPt.APt(s.GRt.m6,s.GRt).hk(),i={Iw:"kDt",Ny:{Iw:F.xX,Ny:h.data.audio_init},rot:Di.yy,IEt:t.IEt,EDt:{bet:'audio/mp4; codecs="'+h.metadata.audio_codec+'"',pEt:s.GRt.pEt},PS:e,zTt:t.zTt,GRt:s.GRt};this._Ot=h.data.audio_init,this.gOt=t.IEt,this.Fxt(i)}const e=Me({Iw:"wnt",Ny:{Iw:F.xX,Ny:h.data.audio_media},rot:Di.yy},_);this.Fxt(e)}else if(t.wnt.GRt.JEt&&Bc(this.uDt,Di.yy)){const t=Me({Iw:"wnt",Ny:void 0,rot:Di.yy},_);this.Fxt(t)}if(void 0!==h.data.video_media){if(h.data.video_init&&(!this.vOt||this.wOt!==t.IEt||!L(this.vOt,h.data.video_init))){const e=this.LPt.APt(s.GRt.m6,s.GRt).hk(),i={Iw:"kDt",Ny:{Iw:F.xX,Ny:h.data.video_init},rot:Di.vl,IEt:t.IEt,EDt:{bet:'video/mp4; codecs="'+h.metadata.video_codec+'"',pEt:s.GRt.pEt},PS:e,zTt:t.zTt,GRt:s.GRt};this.vOt=h.data.video_init,this.wOt=t.IEt,this.mOt=qR(Sa(h.data.video_init)),this.Fxt(i)}const e=this.mOt.Z[0],i=UK(h.data.video_media,this.mOt)[0],n=this.eOt(h.data.video_media,e,i,void 0,s.GRt);this.iOt=e;const r=Me({Iw:"wnt",Ny:{Iw:F.xX,Ny:n},rot:Di.vl},_);this.Fxt(r),g.push(i)}else if(t.wnt.GRt.JEt&&Bc(this.uDt,Di.vl)){const t=Me({Iw:"wnt",Ny:void 0,rot:Di.vl},_);this.Fxt(t)}this.sOt=s.GRt,this.nOt=g}Jl(){this._Ot=void 0,this.vOt=void 0,super.Jl()}constructor(t,e,i,s){super(e,i,s),this.dOt=void 0,this._Ot=void 0,this.vOt=void 0,this.mOt=void 0,this.gOt=0,this.wOt=0,this.cOt=Yh(),this.h7=t}},qK=class{Nat(t,e,i){return new WK(this,t,e,i)}};function zK(t){return t.iP===Wu.Bkt}function XK(t){return yi.Ek(Te.fromBits(t.low,t.high),t.base)}!function(t){t[t.MPEGTS_TO_FMP4=0]="MPEGTS_TO_FMP4",t[t.RAW_AUDIO_TO_FMP4=1]="RAW_AUDIO_TO_FMP4"}(HK||(HK={}));var GK=()=>{const t=function(){if("undefined"==typeof WebAssembly)return!1;const t=fh.aR;if(t>0&&t<=56)return!1;try{return void 0!==new WebAssembly.Module(Pt("AGFzbQEAAAA="))}catch(t){return!1}}();return GK=()=>t,t};var QK=class{lOt(t){return this.pOt(HK.MPEGTS_TO_FMP4,t)}fOt(t){return this.pOt(HK.RAW_AUDIO_TO_FMP4,t)}ULt(){const t=TK(this.HLt,this.VLt,{name:"THEOplayer transmux worker"});return t.wn("message",this.WLt),t.wn("error",this.q9),t}pOt(t,e){const i=++this.qLt,s={type:t,id:i,input:e},n=new $i;return this.jLt.set(i,n),this.pLt.mLt(s),n.jf}Ou(t){void 0===t&&(t=new At),this.jLt.forEach((e=>e.BC(t))),this.jLt.clear(),this.pLt.bLt()}constructor(t){this.qLt=0,this.jLt=Yh(),this.WLt=t=>{const e=t.data;if(void 0!==e.requestId){const t=this.jLt.get(e.requestId);if(!t)return;this.jLt.delete(e.requestId),e.success?t.Lf(e.output):t.BC(new jr(e.errorCode,e.error))}else e.success||this.Ou(new jr(e.errorCode,e.error))},this.q9=t=>{const e=new jr(n.MEDIA_DECODE_ERROR,t.error.message,t.error);this.Ou(e)},this.VLt=t;const e=GK()?"THEOplayer.transmux.js":"THEOplayer.transmux.asmjs.js";try{this.HLt=Ee.Fm(e,t)}catch(t){throw new jr(n.CONFIGURATION_ERROR,"Invalid player configuration: missing libraryLocation",t)}this.pLt=this.ULt()}},KK=class extends qK{oOt(){return void 0!==this.pLt}aOt(){var t;return null!=(t=this.pLt)?t:this.pLt=new QK(this.yOt)}Ou(){this.pLt&&(this.pLt.Ou(),this.pLt=void 0)}constructor(t){super(),this.yOt=t,this.pLt=void 0}},jK=class{y6(){return new KK(this.yOt)}constructor(t){this.yOt=t}},YK=class extends oK{rv(){if(Ke(this.KO))return this.KO.rv()}get tv(){return!1}set tv(t){}async bn(){var t;await super.bn(),null==(t=this.rbt)||t.bn()}constructor(t,e,i,s,n,r,h){super(t,e,i,s,n,r,h),fh.MR&&(this.rbt=new Vz(this))}},ZK=class extends YK{async bn(){await super.bn(),await this.bM.AM(this.KO)}constructor(t,e,i,s,n,r,h){const o=new yn(t);super(o.MM(Di.vl),e,i,s,n,r,h),this.bM=o}},JK=class extends aK{async FM(t,e){return!!Ns(t.useManagedMediaSource)&&(!(!t.useManagedMediaSource&&(fh.KP||fh.sC))&&(!e.manifestMetadataTrack&&super.FM(t,e)))}async j7(t){return(!t.clearkey||!fh.MR)&&super.j7(t)}};Lk(new class extends JK{lp(t,e,i,s,n,r){return new ZK(e,i,n,function(t){return vK.EN()?new vK:new PK(t)}(s.libraryLocation),new jK(s.libraryLocation),new kF($c.lC.ptt,$c.lC.wtt,$c.lC.mtt,$c.lC.Att),s)}UM(){return!0}constructor(...t){super(...t),this.HM=pk.zm}}),ms.Rt=()=>Boolean(null==a?void 0:a.THEOplayerDebugLogsEnabled);var $K=class{ttt(t,e){return Promise.resolve(!1)}itt(t,e){return Promise.resolve(void 0)}Y7(t){return Promise.resolve(void 0)}sX(t){return Promise.resolve(void 0)}},tj=class extends Et{AOt(){var t;return null==(t=this.bOt)?void 0:t.PTt}Tn(t){M(Xu((()=>this.TOt(t)),t))}async TOt(t){await this.Dct.sRt(t),this.SOt&&(this.kOt(this.SOt.Ti,this.SOt.Ci),this.SOt=void 0),this.L$=!0}EOt(t,e){this.L$?this.kOt(t,e):this.SOt={Ti:t,Ci:e}}kOt(t,e){const i=this.IOt(t,e),s=null==i?void 0:i.kSt[0];s!==this.bOt&&(this.POt(),void 0!==s&&(this.bOt=s,this.ROt=new gc(this.Dct,s),this.ROt.oCt()))}POt(){this.bOt=void 0,this.ROt&&(this.ROt.Ou(),this.ROt=void 0)}IOt(t,e){const i=pi(this.Dct.Ar.TSt,(i=>void 0!==i._St&&i._St.Ti===t&&i._St.Ci===e));return null!=i?i:this.Dct.Ar.TSt[0]}bn(){this.Lo(),this.POt(),this.Dct.Ou()}constructor(t,e,i){super(),this.bOt=void 0,this.ROt=void 0,this.SOt=void 0,this.COt=()=>{this.To(new cH)},this.cut=t,this.Dct=new tQ(i,new $K,t.useCredentials,t.src),this.Dct.wn(o.lm,this.Os),this.L$=!1}},ej=class extends Xo{get ht(){return this.v0.ht}get bl(){return this.v0.bl}get qu(){return this.v0.qu}set qu(t){this.v0.qu=t}get Wu(){return this.v0.Wu}set Wu(t){this.v0.Wu=t}get ct(){return this.v0.ct}get Ic(){return this.v0.Ic}get Ec(){return this.v0.Ec}get Tg(){return this.v0.Tg}get lt(){return this.v0.lt}get Eg(){return this.v0.Eg}get Pg(){return this.v0.Pg}get Xu(){return this.v0.Xu}set Xu(t){this.v0.Xu=t}get Dg(){return this.v0.Dg}get Dc(){return this.v0.Dc}get $u(){return this.v0.$u}set $u(t){this.v0.$u=t}get wl(){return this.v0.wl}get Mg(){return this.v0.Mg}set Mg(t){this.v0.Mg=t}get Nc(){return this.v0.Nc}get kl(){return this.v0.kl}get Fc(){return this.v0.Fc}get eM(){return this.v0.eM}get nt(){return this.v0.nt}get Xg(){return this.v0.Xg}get rt(){return this.v0.rt}get Kg(){return this.v0.Kg}get _l(){return this.v0._l}set _l(t){this.v0._l=t}get Jg(){return this.v0.Jg}get tv(){return this.v0.tv}set tv(t){this.v0.tv=t}get sM(){return this.v0.sM}fv(){return this.v0.fv()}ev(){return this.v0.ev()}rv(){return this.v0.rv()}ke(){return this.v0.ke()}wv(){return this.v0.wv()}mv(){return this.v0.mv()}jl(){return this.v0.jl()}dl(){return this.v0.dl()}ir(){return this.v0.ir()}ba(t,e,i){return this.v0.ba(t,e,i)}be(){return this.v0.be()}_v(){return this.v0._v()}vv(){return this.v0.vv()}bn(){this.Lo();for(const t of Fi)this.v0.pn(t,this.Os);return this.v0.bn()}constructor(t){super(),this.v0=t;for(const t of Fi)this.v0.wn(t,this.Os)}},ij=class extends ej{async ba(t,e,i){await super.ba(t,e,i),t.hlsDateRange&&this.Pit(t,e,i)}Pit(t,e,i){this.xOt=new tj(t,e,this.DOt),this.xOt.wn(o.lm,this.handleManifestUpdate),this.xOt.Tn(i)}ir(){return this.SRt&&(this.nt.it(this.SRt),this._1.it(this.SRt),this.SRt.bn(),this.SRt=void 0,this.NOt=!1),this.xOt&&(this.xOt.bn(),this.xOt=void 0),this._1.ir(),super.ir()}bn(){return this.pn(o.vm,this.dLt),this.xOt&&(this.xOt.bn(),this.xOt=void 0),this._1.bn(),super.bn()}constructor(t,e,i){super(t),this.xOt=void 0,this.NOt=!1,this.SRt=void 0,this.handleManifestUpdate=()=>{const t=this.xOt.AOt();if(t){const e=this.eM;if(e){const i=e.getTime();let s=this.SRt;s||(s=new DG,this.SRt=s),s.Kn(t.PEt,(t=>(t.getTime()-i)/1e3)),!this.NOt&&s.L.U>0&&(this.nt.tt(s),this._1.tt(s),this.NOt=!0)}}},this.dLt=()=>{this.xOt&&this.xOt.EOt(this.Kg,this.Xg)},this.DOt=e,this.eX=i,this._1=new Tx(this),this.wn(o.vm,this.dLt)}};!function(t){Wh.VM().WM(t)}((function(t,e,i){return new ij(t,e,i)}));var sj,hh=class extends Fe{get name(){return"CastError"}constructor(t,e=""){super("An error occurred while casting."),this.errorCode=t,this.description=e}},nj="//www.gstatic.com/cast/sdk/libs/sender/1.0/cast_framework.js";function rj(){return sj||(sj=async function(){oj()||await async function(){const t=new $i,e=a.__onGCastApiAvailable;return a.__onGCastApiAvailable=(i,s)=>{i?t.Lf():t.BC(new v(s)),a.__onGCastApiAvailable=e,e&&e(i,s)},t.jf}();hj()||await uc(100);hj()||(Ee.Um('Detected the Chromecast library was loaded without the CAF framework. It is strongly encouraged to load it with the CAF framework by using this URL: "//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"'),await function(t){return new Promise(((e,i)=>{const s=h.createElement("script");s.onload=()=>e(),s.onerror=t=>i((null==t?void 0:t.error)||t),s.type="text/javascript",s.src=t,(h.head||h.documentElement).appendChild(s)}))}(nj));return}().catch((()=>{throw new hh("API_NOT_INITIALIZED","The Chromecast library could not be loaded successfully.")}))),sj}function hj(){return Boolean("undefined"!=typeof cast&&cast.framework)}function oj(){return"undefined"!=typeof chrome&&chrome&&chrome.cast&&chrome.cast.isAvailable}function aj(t,e,i,s){if(Qf(e))for(const i of g.keys(e)){if("type"===i||"images"===i)continue;const s=e[i];Qf(s)&&(t[i]=s)}!function(t,e,i,s){if(!Qf(i)&&!Qf(null==e?void 0:e.images))return;t.images=[],i&&t.images.push(new s.Image(i));if(null==e?void 0:e.images)if(mh(e.images))t.images.push(new s.Image(e.images));else if(Os(e.images))for(const i of e.images){let e;var n,r;if(mh(i))e=new s.Image(i);else e=new s.Image(i.src),e.height=null!=(n=i.height)?n:null,e.width=null!=(r=i.width)?r:null;t.images.push(e)}}(t,e,i,s)}function uj(t,e,i){return void 0===i&&(i=chrome),function(t,e,i){switch(null==t?void 0:t.type){case"movie":{const s=new i.MovieMediaMetadata;return aj(s,t,e,i),s}case"audio":{const s=new i.MusicTrackMediaMetadata;return aj(s,t,e,i),!Qf(s.artist)&&Qf(t.artistName)&&(s.artist=t.artistName),s}case"tv-show":{const s=new i.TvShowMediaMetadata;return aj(s,t,e,i),!Qf(s.title)&&Qf(t.episodeTitle)&&(s.title=t.episodeTitle),!Qf(s.season)&&Qf(t.seasonNumber)&&(s.season=t.seasonNumber),!Qf(s.episode)&&Qf(t.episodeNumber)&&(s.episode=t.episodeNumber),s}default:{const s=new i.GenericMediaMetadata;return aj(s,t,e,i),s}}}(t,e,function(t){return{GenericMediaMetadata:t.cast.media.GenericMediaMetadata,MovieMediaMetadata:t.cast.media.MovieMediaMetadata,TvShowMediaMetadata:t.cast.media.TvShowMediaMetadata,MusicTrackMediaMetadata:t.cast.media.MusicTrackMediaMetadata,Image:t.cast.Image}}(i))}function Sn(t){switch(t){case chrome.cast.ErrorCode.CANCEL:return"CANCEL";case chrome.cast.ErrorCode.TIMEOUT:return"TIMEOUT";case chrome.cast.ErrorCode.API_NOT_INITIALIZED:return"API_NOT_INITIALIZED";case chrome.cast.ErrorCode.INVALID_PARAMETER:return"INVALID_PARAMETER";case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:return"EXTENSION_NOT_COMPATIBLE";case chrome.cast.ErrorCode.EXTENSION_MISSING:return"EXTENSION_MISSING";case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:return"RECEIVER_UNAVAILABLE";case chrome.cast.ErrorCode.SESSION_ERROR:return"SESSION_ERROR";case chrome.cast.ErrorCode.CHANNEL_ERROR:return"CHANNEL_ERROR";case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:return"LOAD_MEDIA_FAILED";default:return"CANCEL"}}function cj(t){if(t.items&&t.items.length>0&&t.currentItemId>=0)return pi(t.items,(e=>e.itemId===t.currentItemId))}var lj,wr="urn:x-cast:com.theoplayer.cast";!function(t){t.BOt="theoplayer_receiver_info",t.LOt="theoplayer_trackpropertychange",t.OOt="theoplayer_propertychange"}(lj||(lj={}));var dj;(dj||(dj={})).SKIP_AD="SKIP_AD";function En(t){h.createElement("img").src=t}var fj=new RegExp(/^(\d\d):(\d\d):(\d\d)(?:\.(\d{3}))?$/);function _j(t){if(!mh(t))return;const e=t.match(fj);return e?3600*k(e[1],10)+60*k(e[2],10)+Number(e[3])+(Number(e[4])||0)/1e3:void 0}function gj(t){if(void 0===t)return;const e=t.match(/^([1-9]?\d|100)%$/);return e?k(e[1])/100:void 0}function vj(t,e){return"vmap"===t.type||!Qf(t.type)&&!Qf(e)}function wj(t,e){return"vast"===t.type||!Qf(t.type)&&Qf(e)}var mj,pj=class{},yj=class extends pj{get MOt(){return this._8}FOt(){return null!=this.UOt||(this.UOt=Ga(this._8,(t=>t.FOt()))),this.UOt}constructor(t){super(),this._8=t.sort(((t,e)=>t.lT-e.lT))}},Aj=class extends pj{get o(){return this.HOt}get lT(){return this.VOt}get WOt(){return this.qOt}constructor(t,e){super(),this.HOt=t,this.VOt=e,this.qOt=!1}},bj=class extends Aj{get zOt(){return this.XOt}get GOt(){return this.QOt}get KOt(){return this.jOt}get YOt(){return this.ZOt}get lt(){return this.ZO}FOt(){if(void 0===this.JOt){let t,e,i,s=[];for(const n of this.XOt)n.$Ot&&(t=n.$Ot),n.tMt&&(e=n.tMt),n.eMt&&(i=n.eMt),s=s.concat(n.universalAdIds);this.JOt={YOt:this.YOt,$Ot:t,iMt:e,eMt:i,lt:this.lt,sMt:s}}return[this.JOt]}constructor(t,e,i,s,n,r,h){super(t,e),this.QOt=i,this.jOt=s,this.ZOt=n,this.XOt=r,this.ZO=h}},Tj=class{get nMt(){return this.rMt}get hMt(){return this.oMt}constructor(t,e){this.rMt=t,this.oMt=e}},Sj=class{get aMt(){return this.uMt}get cMt(){return this.lMt}get dMt(){return this.fMt}get _Mt(){return this.gMt}get n8(){return this.vMt}set n8(t){this.vMt=t}get wMt(){return this.mMt}get pMt(){return this.yMt}AMt(){this.yMt=!0}get GOt(){return this.QOt}constructor(t,e,i,s,n,r){this.uMt=t,this.lMt=e,this.fMt=i,this.gMt=s,this.yMt=!1,this.mMt=n,this.QOt=r}};!function(t){t.bMt="all",t.TMt="any",t.$M="none"}(mj||(mj={}));var ba,kj=class{get SMt(){return this.kMt}get EMt(){return this.IMt}constructor(t,e){this.kMt=t,this.IMt=e}},Ej=class{get o(){return this.wS}get Ti(){return this.oc}get Ci(){return this.uc}get PMt(){return this.RMt}get CMt(){return this.xMt}get DMt(){return this.NMt}get BMt(){return this.LMt}get OMt(){return this.MMt}get FMt(){return this.UMt}get HMt(){return this.VMt}get aMt(){return this.uMt}get cMt(){return this.lMt}get dMt(){return this.fMt}get WMt(){return this.qMt}get hMt(){return this.zMt}get XMt(){return this.GMt}constructor(t,e,i,s,n,r,h,o,a,u,c,l,d,f,_,g){this.oc=t,this.uc=e,this.wS=i,this.RMt=s,this.xMt=n,this.NMt=r,this.LMt=h,this.MMt=o,this.UMt=a,this.VMt=u,this.uMt=c,this.lMt=l,this.fMt=d,this.qMt=f,this.zMt=_,this.GMt=g}},Ij=class{get id(){return this.wS}get uri(){return this.rIt}constructor(t,e){this.wS=t,this.rIt=e}},bn=class{get QMt(){return this.KMt}get jMt(){return this.YMt}get ZMt(){return this.JMt}get $Mt(){return this.tFt}constructor(t,e,i,s){this.KMt=t,this.YMt=e,this.JMt=i,this.tFt=s}},Pj=class extends Aj{get YOt(){return this.ZOt}get eFt(){return this.iFt}get sFt(){return this.nFt}get zOt(){return this.XOt}get rFt(){return this.hFt}get oFt(){return this.aFt}get lt(){return this.ZO}FOt(){return void 0===this.iFt?[]:(null!=this.UOt||(this.UOt=this.iFt.FOt().map((t=>this.uFt(t)))),this.UOt)}uFt(t){let e,i,s;for(const t of this.zOt)t.$Ot&&(e=t.$Ot),t.tMt&&(i=t.tMt),t.eMt&&(s=t.eMt);const n=t.YOt.concat(this.YOt);let r=t.$Ot;if(e&&t.$Ot){const i=new bn(t.$Ot.cFt.QMt,t.$Ot.cFt.jMt,t.$Ot.cFt.ZMt.concat(e.cFt.ZMt),t.$Ot.cFt.$Mt.concat(e.cFt.$Mt));r=t.$Ot,r.cFt=i,r.hMt=r.hMt.concat(e.hMt)}let h=t.iMt;if(i&&i.nMt){var o,a;const s=[];for(const t of i.nMt)s.concat(t._Mt.ZMt);const n=[];var u,c;for(const i of null!=(u=null==(o=t.iMt)?void 0:o.nMt)?u:[]){var l,d,f;const r=new bn(i._Mt.QMt,i._Mt.jMt,i._Mt.ZMt.concat(s),(null!=(d=null==(l=t.$Ot)?void 0:l.cFt.$Mt)?d:[]).concat(null!=(f=null==e?void 0:e.cFt.$Mt)?f:[]));n.push(new Sj(i.aMt,i.cMt,i.dMt,r,i.wMt,i.GOt))}h=new Tj(n,(null!=(c=null==(a=t.iMt)?void 0:a.hMt)?c:[]).concat(i.hMt))}let _=t.eMt;if(_){var g;let e=_.SMt;var v,w;s&&s.SMt&&(e=s.SMt),_=new kj(e,(null!=(v=null==(g=t.eMt)?void 0:g.EMt)?v:[]).concat(null!=(w=null==s?void 0:s.EMt)?w:[]))}let m=t.lt;return this.lt&&(m=this.lt),{YOt:n,$Ot:r,iMt:h,eMt:_,lt:m,sMt:t.sMt}}constructor(t,e,i,s,n,r,h,o,a){super(t,e),this.ZOt=i,this.iFt=s,this.nFt=n,this.XOt=r,this.hFt=h,this.aFt=o,this.ZO=a}},Rj=class{get o(){return this.wS}get lFt(){return this.dFt}get fFt(){return this._Ft}get OMt(){return this.MMt}get $Ot(){return this.gFt}get tMt(){return this.vFt}get eMt(){return this.wFt}get universalAdIds(){return this.mFt}constructor(t,e,i,s,n,r,h,o){this.wS=t,this.dFt=e,this._Ft=i,this.MMt=s,this.gFt=n,this.vFt=r,this.wFt=h,this.mFt=o}},Cj=class{get ct(){return this.pFt}get yFt(){return this.AFt}get hMt(){return this.oMt}set hMt(t){this.oMt=t}set cFt(t){this.bFt=t}get cFt(){return this.bFt}get TFt(){return this.SFt}set TFt(t){this.SFt=t}get kFt(){return this.yMt}get n8(){return this.vMt}set n8(t){this.vMt=t}get wMt(){return this.mMt}get GOt(){return this.QOt}AMt(){this.yMt=!0}constructor(t,e,i,s,n,r,h){this.pFt=t,this.AFt=e,this.oMt=i,this.bFt=s,this.SFt=n,this.yMt=!1,this.mMt=r,this.QOt=h}};function Kr(t,e){return Nj(t)&&t.getAttribute(e)||void 0}function xj(t,e){return Dj(t,e,void 0,!1)}function Dj(t,e,i,s){return e===(t.localName?t.localName:t.nodeName)&&(s&&i?i===t.namespaceURI:!i||!t.namespaceURI||i===t.namespaceURI)}function jt(t,e){const i=[];for(let s=0;s<t.childNodes.length;s+=1){const n=t.childNodes.item(s);Nj(n)&&xj(n,e)&&i.push(n)}return i}function Nj(t){return t&&1===t.nodeType}function Bj(t,e){const i=(new DOMParser).parseFromString(t,e);if(!i||i.getElementsByTagName("parsererror").length>0)throw new v('Invalid document for MIME type "'+e+'"');return i}function Lj(t){return t.replace(/[<>&'"]/g,(t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return t}}))}function Oj(t){return"data:application/xml,"+encodeURIComponent(t)}function Mj(t){switch(t){case"breakStart":case"breakEnd":case"error":return!0;default:return!1}}!function(t){t.EFt="mute",t.IFt="unmute",t.Ch="pause",t.PFt="resume",t.RFt="rewind",t.CFt="skip",t.xFt="playerExpand",t.DFt="playerCollapse",t.Ih="fullscreen",t.NFt="exitFullscreen",t.BFt="expand",t.COLLAPSE="collapse",t.Yot="start",t.LFt="firstQuartile",t.OFt="thirdQuartile",t.MFt="midpoint",t.FFt="complete",t.UFt="acceptInvitationLinear",t.HFt="acceptInvitation",t.VFt="timeSpentViewing",t.WFt="otherAdInteraction",t.Rf="progress",t.qFt="creativeView",t.zFt="adExpand",t.XFt="adCollapse",t.GFt="minimize",t.QFt="close",t.KFt="closeLinear",t.jFt="overlayViewDuration",t.YFt="breakStart",t.ZFt="breakEnd",t.aa="error"}(ba||(ba={}));var Fj=["mute","unmute","pause","resume","rewind","skip","closeLinear","close","playerExpand","playerCollapse","fullscreen","exitFullscreen","expand","collapse","creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","acceptInvitationLinear","acceptInvitation","timeSpentViewing","otherAdInteraction","progress"];function Uj(t){return void 0!==t&&-1!==Fj.indexOf(t)}var Hj=["start","firstQuartile","midpoint","thirdQuartile","complete","mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","expand","collapse","fullscreen","exitFullscreen","creativeView","acceptInvitation","adExpand","adCollapse","minimize","close","overlayViewDuration","otherAdInteraction","progress"];function Vj(t){return void 0!==t&&-1!==Hj.indexOf(t)}var Wj=["mute","unmute","pause","resume","rewind","skip","playerExpand","playerCollapse","creativeView"];function qj(t){return void 0!==t&&-1!==Wj.indexOf(t)}function zj(t,e){if(void 0===t||""===t||void 0===e)return;let i=t.match(/^(\d+):(\d+):(\d+)$/);return i?_(i[1]||"0")+60*_(i[2]||"0")+_(i[3]||"0"):(i=t.match(/^(100|[1-9]\d|\d)%$/),i?_(i[1]||"0")*e/100:void 0)}var xs,Gt,Xj=class{get JFt(){return this.$Ft}get Au(){return this.tUt}get eventURL(){return this.eUt}constructor(t,e,i){this.$Ft=t,this.tUt=e,this.eUt=i}},Gj=class{get iUt(){return this.sUt}constructor(t){this.sUt=t}},Qj=class extends Gj{get QMt(){return this.KMt}get XMt(){return this.GMt}get nUt(){return this.rUt}constructor(t,e,i,s){super(t),this.rUt=e,this.KMt=i,this.GMt=s}},Kj=class extends Gj{constructor(t){super(t)}},jj=class extends Gj{constructor(t){super(t)}},Xt={hUt:{LC:100,pC:"XML parsing error."},oUt:{LC:303,pC:"Empty or invalid VAST error."},aUt:{LC:400,pC:"General linear error"},uUt:{LC:403,pC:"Unsupported MIME-type or missing mediafiles error"},cUt:{LC:500,pC:"General nonlinear error"},eH:{LC:900,pC:"Network error"}},nc=class{get lUt(){return this.dUt}fUt(t){if(!this.lUt)return;const e=this.lUt.replace(/\[ERRORCODE]/,""+t.LC);En(e)}constructor(t){this.dUt=t}},gt=class extends Fe{get _Ut(){return this.gUt}get vUt(){var t;return null!=(t=this.wUt)?t:900}constructor(t,e,i,s){super(i||e&&Yj[e]||t,s),this.gUt=t,this.wUt=e,this.mUt=i}};!function(t){t.ADBLOCK="adblock",t.NETWORK="network",t.PARSING="parsing",t.PLAYBACK="playback",t.GENERAL="general"}(xs||(xs={})),function(t){t[t.VAST_MALFORMED_RESPONSE=100]="VAST_MALFORMED_RESPONSE",t[t.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",t[t.VAST_UNSUPPORTED_VERSION=102]="VAST_UNSUPPORTED_VERSION",t[t.VAST_TRAFFICKING_ERROR=200]="VAST_TRAFFICKING_ERROR",t[t.VAST_UNEXPECTED_LINEARITY=201]="VAST_UNEXPECTED_LINEARITY",t[t.VAST_UNEXPECTED_DURATION_ERROR=202]="VAST_UNEXPECTED_DURATION_ERROR",t[t.UNEXPECTED_SIZE=203]="UNEXPECTED_SIZE",t[t.VAST_WRAPPER_ERROR=300]="VAST_WRAPPER_ERROR",t[t.VAST_LOAD_TIMEOUT=301]="VAST_LOAD_TIMEOUT",t[t.VAST_TOO_MANY_REDIRECTS=302]="VAST_TOO_MANY_REDIRECTS",t[t.VAST_NO_ADS_AFTER_WRAPPER=303]="VAST_NO_ADS_AFTER_WRAPPER",t[t.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",t[t.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",t[t.VAST_MEDIA_LOAD_TIMEOUT=402]="VAST_MEDIA_LOAD_TIMEOUT",t[t.VAST_LINEAR_ASSET_MISMATCH=403]="VAST_LINEAR_ASSET_MISMATCH",t[t.VAST_PROBLEM_DISPLAYING_MEDIA_FILE=405]="VAST_PROBLEM_DISPLAYING_MEDIA_FILE",t[t.MEZZANINE_FILE_REQUIRES=406]="MEZZANINE_FILE_REQUIRES",t[t.MEZZANINE_FILE_DOWNLOADED_FIRST_TIME=407]="MEZZANINE_FILE_DOWNLOADED_FIRST_TIME",t[t.AD_IN_VAST_REJECTED=408]="AD_IN_VAST_REJECTED",t[t.INTERACTIVE_CREATIVE_NOT_EXECUTED=409]="INTERACTIVE_CREATIVE_NOT_EXECUTED",t[t.VERIFICATION_CODE_NOT_EXECUTED=410]="VERIFICATION_CODE_NOT_EXECUTED",t[t.GENERAL_NON_LINEAR_ERROR=500]="GENERAL_NON_LINEAR_ERROR",t[t.NONLINEAR_DIMENSIONS_ERROR=501]="NONLINEAR_DIMENSIONS_ERROR",t[t.OVERLAY_AD_LOADING_FAILED=502]="OVERLAY_AD_LOADING_FAILED",t[t.VAST_NONLINEAR_ASSET_MISMATCH=503]="VAST_NONLINEAR_ASSET_MISMATCH",t[t.GENERAL_COMPANION_AD_ERROR=600]="GENERAL_COMPANION_AD_ERROR",t[t.INVALID_DIMENSIONS_COMPANION_AD=601]="INVALID_DIMENSIONS_COMPANION_AD",t[t.COMPANION_REQUIRED_ERROR=602]="COMPANION_REQUIRED_ERROR",t[t.COMPANION_AD_LOADING_FAILED=603]="COMPANION_AD_LOADING_FAILED",t[t.UNABLE_TO_FIND_SUPPORTED_COMPANION=604]="UNABLE_TO_FIND_SUPPORTED_COMPANION",t[t.UNKNOWN_ERROR=900]="UNKNOWN_ERROR",t[t.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR",t[t.MALFORMED_URI=1005]="MALFORMED_URI",t[t.VAST_ASSET_NOT_FOUND=1007]="VAST_ASSET_NOT_FOUND",t[t.VAST_EMPTY_RESPONSE=1009]="VAST_EMPTY_RESPONSE",t[t.UNKNOWN_AD_RESPONSE=1010]="UNKNOWN_AD_RESPONSE",t[t.UNSUPPORTED_LOCALE=1011]="UNSUPPORTED_LOCALE",t[t.INVALID_ARGUMENTS=1101]="INVALID_ARGUMENTS",t[t.INVALID_ADX_EXTENSION=1105]="INVALID_ADX_EXTENSION",t[t.AUTOPLAY_DISALLOWED=1205]="AUTOPLAY_DISALLOWED"}(Gt||(Gt={}));var Yj={100:"XML parsing error.",101:"VAST schema validation error.",102:"VAST version of response not supported.",200:"Trafficking error. The video player received an ad type that it was not expecting and/or cannot display.",201:"Video player expecting different linearity.",202:"Video player expecting different duration.",203:"Video player expecting different size.",300:"General wrapper error.",301:"Timeout of VAST URI provided in wrapper element, or of VAST URI provided in a subsequent wrapper element. This includes request errors such as invalid URI, unreachable or request timeout for URI, and security or other exceptions related to requesting a VAST URI.",302:"Wrapper limit reached, as defined by the video player. Too many wrapper responses have been received with no InLine response. This can be caused by a circular loop of daisy chaining (one network bouncing to another and another).",303:"No ads VAST response after one or more wrappers. This also includes the number of empty VAST responses from fallback.",400:"General linear error. The video player is unable to display the linear ad.",401:"File not found. Unable to find Linear/MediaFile from URI.",402:"Unable to download or timeout of MediaFile URI.",403:"Could not find a media file that is supported by this video player, based on the attributes of the MediaFile element.",405:"Problem displaying a media file.",406:"A mezzanine file was required, but not provided.",407:"The mezzanine file was downloaded for the first time, so the ad did not serve. This can occur when an ad insertion is missed because the creative is being transcoded. It continues to occur until the creative is available for insertion.",408:"The ad returned in the VAST response was rejected.",409:"The interactive creative defined in the InteractiveCreativeFile node was not executed.",410:"The code referenced in the Verification node was not executed.",500:"General NonLinearAds error.",501:"Unable to display non-linear ad because creative dimensions do not align with creative display area (in other words, the creative dimension was too large). This can occur if you use CSS styles to set width and height of the video ,content element. You should instead use the width and height HTML attributes.",502:"Unable to fetch NonLinearAds/NonLinear resource.",503:"Could not find NonLinearResource with supported type. This can occur when a creative size is larger than the player size.",600:"General CompanionAds error.",601:"Unable to display companion because creative dimensions do not fit within the companion display area (in other words, space was not available).",602:"Unable to display required companion.",603:"Unable to fetch CompanionAds/Companion resource.",604:"Could not find Companion resource with supported type.",900:"VAST 2 error. Even if you request VAST 3 or your DFP network default is VAST 3, this can occur if you have a VAST redirect that returns a VAST 2 response.",901:"General VPAID error",1005:"URI malformed."};function Zj(t){if(!t)return!1;switch(t.toLocaleLowerCase()){case ra.zm:case ra.Xm:case ra.qm:return!0;default:return!1}}function Jj(t){const e=hS();return!!(Zj(t)||t&&e&&(null==e?void 0:e.canPlayType)&&e.canPlayType(t))||(kr("Invalid or unsupported MediaFile Content delivery type, skipping mediafile"),!1)}function $j(t,e){for(const i of e){new nc(i).fUt(t)}}function kr(t){0}var tY,eY=class{get pUt(){return this.yUt}get AUt(){return this.bUt}constructor(t,e){this.yUt=t,this.bUt=e}};!function(t){t.TUt="linear",t.SUt="nonlinear",t.kUt="companion",t.EUt="vmap"}(tY||(tY={}));var iY,sY=class t{async IUt(e,i){if(vj(e.sources,e.timeOffset)){const s=await t.PUt(e.sources.src,i),n=s&&s.documentElement;if(!n)throw new gt(xs.NETWORK,Gt.VAST_SCHEMA_VALIDATION_ERROR,"Ad source is not a valid XML document.");if(xj(n,"VMAP"))return await this.RUt(n,e,i);if(xj(n,"VAST")){const t=await this.CUt(n,i,!1);if(t){const i=new hY("",!0,!0,t);return[new wu("start",i,iY.TUt,"",[],!1,!0,e)]}return[]}throw new gt(xs.GENERAL,Gt.VAST_MALFORMED_RESPONSE,"Only VMAP and VAST files are allowed as ad source.")}if(wj(e.sources,e.timeOffset))return[new rY(String(e.timeOffset),e,i)];throw new gt(xs.GENERAL,Gt.VAST_MALFORMED_RESPONSE,"Something went wrong parsing the ad source; only VMAP and VAST files are allowed as ad source.")}async xUt(e,i,s,n){let r;void 0===n&&(n=[]);try{r=await t.PUt(e,i)}catch(t){throw $j(t instanceof gt&&t.vUt===Gt.VAST_MALFORMED_RESPONSE?Xt.oUt:Xt.eH,n),t}const h=r&&r.documentElement;if(h&&xj(h,"VAST"))return await this.CUt(h,i,s,n)}async DUt(t,e,i,s){var n;if(!(null==(n=t.sources)?void 0:n.src))throw new gt(xs.GENERAL,Gt.MALFORMED_URI,"Property src on adSource is missing.");const r=await this.xUt(t.sources.src,s,!1),h=new hY("",!0,!0,r),o=new wu(e,h,iY.TUt,"",[],!1,!0,t);return o.NUt=i,o}static async requestSuccessOnly(t,e){let i;try{i=await e.pI(t)}catch(t){throw new gt(xs.NETWORK,Gt.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.",t)}if(!lo(i))throw new gt(xs.NETWORK,Gt.UNKNOWN_ERROR,"Something went wrong while requesting xml from server.");return i}static async PUt(t,e){const i=new vh({TI:t,sP:Ct.KT,iP:ut.GET}),s=await this.requestSuccessOnly(i,e);try{return function(t){return Bj(t,"text/xml")}(await s.Ny())}catch(t){throw new gt(xs.NETWORK,Gt.VAST_MALFORMED_RESPONSE,"The ad source could not be loaded.")}}async CUt(t,e,i,s){void 0===s&&(s=[]);const n=[],r=[],h=[];if(t&&xj(t,"VAST")){if(0!==jt(t,"Ad").length){for(const i of jt(t,"Ad"))try{const t=await this.BUt(i,e,s);0===t.lT?n.push(t):r.push(t)}catch(t){h.push(t)}if(0===n.length&&0===r.length&&h.length>0)throw h[0];return 1===n.length&&0===r.length?n[0]:0===n.length&&0!==r.length?new yj(r):n.length>0||r.length>0?new yj(r.concat(n)):void 0}if(0!==jt(t,"Error").length){for(const e of jt(t,"Error")){kr(Xt.hUt.pC);const t=e.textContent;t&&s.push(t),$j(Xt.hUt,s)}throw new gt(xs.GENERAL,Gt.VAST_MALFORMED_RESPONSE,"The Ad Server responded with a VAST Error")}if(i)throw $j(Xt.oUt,s),new gt(xs.PARSING,Gt.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}else if(i)throw $j(Xt.oUt,s),new gt(xs.PARSING,Gt.VAST_NO_ADS_AFTER_WRAPPER,"No VAST element found after wrapper.")}async RUt(t,e,i){const s=[],n=jt(t,"AdBreak");for(const t of n)try{const n=await this.LUt(t,e,i);n&&s.push(n)}catch(t){Ee.v9(t)}return s}async BUt(e,i,s){const n=Kr(e,"id")||"";let r=Ve(Kr(e,"sequence"));r||(r=0);const h=jt(e,"InLine"),o=jt(e,"Wrapper");if(0!==o.length)return await this.OUt(o[0],n,r,i,s);if(0!==h.length)return t.MUt(h[0],n,r,s);throw new gt(xs.PARSING,Gt.VAST_SCHEMA_VALIDATION_ERROR,"An Ad tag without a Wrapper or inline element cannot be parsed")}static MUt(e,i,s,n){const r=jt(e,"Error")[0];let h;r&&r.textContent&&(h=r.textContent,n.push(h));const o=jt(e,"AdSystem")[0];let a,u="";o&&(u=o.textContent||u);const c=jt(e,"AdTitle")[0];c&&(a=c.textContent||void 0);const l=[];for(const t of jt(e,"Impression"))t.textContent&&l.push(t.textContent);const d=t.FUt(jt(e,"Creatives")[0],u,n);return new bj(i,s,u,a,l,d,new nc(h))}async OUt(e,i,s,n,r){const h=jt(e,"Error")[0];let o="";h&&h.textContent&&(o=h.textContent,r.push(o));const a=jt(e,"AdSystem")[0];let u="";a&&(u=a.textContent||u);const c=[];for(const t of jt(e,"Impression"))t.textContent&&c.push(t.textContent);const l=jt(e,"VASTAdTagURI")[0];let d="";l&&l.textContent&&(d=l.textContent);const f=await this.xUt(d,n,!0,r),_=jt(e,"Creatives")[0];let g=[];_&&(g=t.UUt(_,u,r));let v=No(Kr(e,"followAdditionalWrappers"));v||(v=!0);let w=No(Kr(e,"allowMultipleAds"));w||(w=!0);let m=No(Kr(e,"fallbackOnNoAd"));return m||(m=!1),new Pj(i,s,c,f,v,g,w,m,new nc(o))}static UUt(e,i,s){const n=[];for(const r of jt(e,"Creative")){let e=Kr(r,"id");e||(e="");let h=Ve(Kr(r,"sequence"));h||(h=0);let o=Kr(r,"adId");o||(o="");const a=jt(r,"Linear")[0];let u;a&&(u=t.HUt(a,"wrapper",e,i,s));const c=jt(r,"NonLinearAds")[0];let l,d;if(c)try{d=t.VUt(c,e,i),l=d}catch(t){}const f=jt(r,"CompanionAds")[0];let _;f&&(_=t.WUt(f)),n.push(new Rj(e,o,h,"",u,l,_,[]))}return n}static FUt(e,i,s){const n=[];for(const r of jt(e,"Creative")){let e=Kr(r,"id");e||(e="");let h=Ve(Kr(r,"sequence"));h||(h=0);let o=Kr(r,"adId");o||(o="");let a=Kr(r,"apiFramework");a||(a="");const u=jt(r,"Linear")[0];let c;if(u)try{c=t.HUt(u,"inline",e,i,s)}catch(t){}const l=jt(r,"NonLinearAds")[0];let d,f;if(l)try{f=t.VUt(l,e,i),d=f}catch(t){}const _=jt(r,"CompanionAds")[0];let g;_&&(g=t.WUt(_));const v=jt(r,"UniversalAdId"),w=t.parseUniversalAdIds(v);n.push(new Rj(e,o,h,a,c,d,g,w))}return n}static HUt(e,i,s,n,r){const h=jt(e,"Duration")[0];let o=0;if(h)o=_j(h.textContent)||0;else if(!h&&"inline"===i)throw new gt(xs.PARSING,Gt.VAST_SCHEMA_VALIDATION_ERROR,"Missing duration element in inLine linear");const a=Kr(e,"skipoffset");let u=-1;if(a){let t=_j(a);if(void 0===t&&a.indexOf("%")>-1){const e=w.abs(Number(a.replace(/(?![0-9])./g,"")))/100;j(e)||(t=o*e)}void 0!==t&&(u=t)}const c=jt(e,"MediaFiles")[0];let l=[];if(c&&(l=function(t,e){const i=[];for(const s of jt(t,"MediaFile")){const t=Kr(s,"delivery"),n=Kr(s,"type");if(!n){kr();continue}if(!e(n))continue;let r=Ve(Kr(s,"width")),h=Ve(Kr(s,"height"));r||(kr(),r=0),h||(kr(),h=0);const o={delivery:t,type:n,width:r,height:h,contentURL:""+s.textContent};i.push(o)}return i}(c,Jj)),"inline"===i&&(!c||0===l.length))throw $j(Xt.uUt,r),new gt(xs.PARSING,Gt.VAST_LINEAR_ASSET_MISMATCH,"Missing MediaFiles in linear element");const d=jt(e,"TrackingEvents")[0];let f=[];d&&(f=t.qUt(d,Uj,"linear"));const _=jt(e,"VideoClicks")[0],g=t.zUt(_);return new Cj(o,l,f,g,u,s,n)}static zUt(e){if(!e)return new bn("","",[],[]);const i=jt(e,"ClickThrough")[0];let s,n="";i&&(s=i.textContent||void 0,n=Kr(i,"id")||"");const r=t.XUt(jt(e,"ClickTracking")),h=t.XUt(jt(e,"CustomClick"));return new bn(s,n,r,h)}static XUt(t){const e=[];for(const i of t){const t=i.textContent;if(!t)continue;const s=Kr(i,"id")||"";e.push(new Ij(s,t))}return e}static qUt(t,e,i){const s=[];for(const n of jt(t,"Tracking")){const r=Kr(n,"event");if(!e(r)){kr();continue}let h="";"linear"===i&&(h=Kr(t,"offset")||"0");const o=n.textContent;o&&s.push(new Xj(r,h,o))}return s}static VUt(e,i,s){const n=[];for(const r of jt(e,"NonLinear")){const e=jt(r,"NonLinearClickThrough")[0];let h;e&&(h=e.textContent||void 0);const o=t.XUt(jt(r,"NonLinearClickTracking")),a=jt(r,"StaticResource")[0];let u;if(a&&a.parentNode){const t=Kr(a,"creativeType"),e=a.textContent||"",i=jt(a.parentNode,"NonLinearClickThrough")[0];let s="";i&&(s=i.textContent||""),u=new Qj(e,t,s,"")}const c=t.GUt(r),l=t.parseHtmlResource(r);if(!u&&!c&&!l){kr();continue}const d=new bn(h,"",o,[]);n.push(new Sj(u,c,l,d,i,s))}if(0===n.length)throw new gt(xs.PARSING,Gt.VAST_SCHEMA_VALIDATION_ERROR,"nonLinearAds element found with no nonLinear elements");const r=jt(e,"TrackingEvents")[0];let h=[];return r&&(h=t.qUt(r,Vj,"nonlinear")),new Tj(n,h)}static parseUniversalAdIds(t){const e=[];for(const r of t){var i;const t=null!=(i=Kr(r,"idRegistry"))?i:"";var s,n;const h=null!=(n=null!=(s=Kr(r,"idValue"))?s:r.textContent)?n:"";e.push(new eY(t,h))}return e}static WUt(e){let i=Kr(e,"requiredType");(function(t){switch(t){case"all":case"any":case"none":return!0;default:return!1}})(i)||(i=mj.$M);const s=[];for(const i of jt(e,"Companion")){let e=Ve(Kr(i,"width")),n=Ve(Kr(i,"height")),r=Kr(i,"id"),h=Ve(Kr(i,"assetWidth")),o=Ve(Kr(i,"assetHeight")),a=Ve(Kr(i,"expandedWidth")),u=Ve(Kr(i,"rxpandedHeight")),c=Kr(i,"apiFramework"),l=Kr(i,"adSlotId"),d=Ve(Kr(i,"pxratio"));const f=jt(i,"AltText")[0];let _=f?f.textContent:"";e||(kr(),e=0),n||(kr(),n=0),r||(r=""),h||(h=0),o||(o=0),a||(a=0),u||(u=0),c||(c=""),l||(l=""),d||(d=1),_||(_="");const g=t.QUt(i),v=t.GUt(i),w=t.parseHtmlResource(i),m=jt(i,"TrackingEvents")[0];let p=[];m&&(p=t.qUt(m,qj,"companion"));const y=jt(i,"CompanionClickThrough")[0];let A;y&&(A=y.textContent||void 0);const b=t.XUt(jt(i,"CompanionClickTracking"));(g||v||w)&&s.push(new Ej(e,n,r,h,o,a,u,c,l,d,g,v,w,new bn(A,"",b,[]),p,_))}return new kj(i,s)}static QUt(t){const e=jt(t,"StaticResource")[0];let i;if(e&&e.parentNode){let t=Kr(e,"creativeType");t||(t="");const s=e.textContent,n=jt(e.parentNode,"AltText")[0],r=jt(e.parentNode,"CompanionClickThrough")[0];let h,o="";n&&(o=n.textContent||""),r&&(h=r.textContent||void 0),s&&(i=new Qj(s,t,h,o))}return i}static GUt(t){const e=jt(t,"IFrameResource")[0];let i;if(e){const t=e.textContent||"";i=new Kj(t)}return i}static parseHtmlResource(t){const e=jt(t,"HTMLResource")[0];let i;if(e){const t=e.textContent||"";i=new jj(t)}return i}async LUt(e,i,s){const n=Kr(e,"timeOffset")||"0",r=Kr(e,"breakType")||iY.YT;let h=Kr(e,"breakId"),o=No(Kr(e,"repeatAfter"));if(void 0===h&&(h=""),void 0===o&&(o=!1),!(void 0!==ge.KUt(n)))throw new gt(xs.PARSING,Gt.VAST_SCHEMA_VALIDATION_ERROR,"Invalid TimeOffset type");const a=jt(e,"AdSource")[0],u=jt(e,"TrackingEvents")[0];let c=[];u&&(c=t.qUt(u,Mj,"vmap"));let l=Kr(a,"id");l||(l="");let d=No(Kr(a,"allowMultipleAds"));void 0===d&&(d=!0);let f=No(Kr(a,"followRedirects"));f||(f=!0);const _=jt(a,"AdTagURI")[0];let g="";const v=jt(a,"VASTAdData")[0];if(!_||!_.textContent){if(v){if(v.firstElementChild&&Dj(v.firstElementChild,"VAST")){const t=await this.CUt(v.firstElementChild,s,!1);if(t){const e=new hY(l,d,f,t);return new wu(n,e,r,h,c,o,!1,i)}return}throw new gt(xs.PARSING,Gt.VAST_SCHEMA_VALIDATION_ERROR,"vmap:VASTAdData does not have a VAST-structure as a child element")}throw new gt(xs.PARSING,Gt.VAST_SCHEMA_VALIDATION_ERROR,"Invalid AdTagURI source or invalid VASTAdData in Adbreak Element")}try{g=_.textContent;const t=Ms(i);return t.sources.src=g,new rY(n,t,s)}catch(t){return}}};!function(t){t.YT="",t.TUt="linear",t.jUt="nonlinear",t.YUt="display"}(iY||(iY={}));var nY,ge=class{static ZUt(t){switch(t){case"linear":case"nonlinear":case"display":return!0;default:return!1}}static JUt(t){}static $Ut(t){if(void 0!==t)return"start"===t?0:"end"===t?-1:void 0}static tHt(t){const e=t.split(":");let i=0;return i+=3600*Number(e[0]),i+=60*Number(e[1]),i+=Number(e[2]),i}static eHt(t){if(t<=0)return"00:00:00.000";const e=w.floor(t),i=t-e;return this.iHt(e/3600,2)+":"+this.iHt(e/60%60,2)+":"+this.iHt(e%60,2)+"."+this.iHt(1e3*i,3)}static iHt(t,e){return("00"+w.floor(t)).slice(-e)}static sHt(t,e){const i=this.KUt(t);if(0===i)switch(t){case"start":return 0;case"end":return-1}else{if(2===i)return gj(t)*e;if(1===i)return _j(t);if(3===i)return this.$Ut(t);if(4===i){const e=Number(t);if(!j(e)&&e>=-1)return e}}}static KUt(t){return"start"===t||"end"===t?0:void 0!==_j(t.toString())?1:void 0!==gj(t.toString())?2:void 0!==this.JUt(t.toString())?3:j(Number(t))?void 0:4}};!function(t){t[t.E3=0]="E3",t[t.nHt=1]="nHt",t[t.rHt=2]="rHt",t[t.hHt=3]="hHt",t[t.oHt=4]="oHt"}(nY||(nY={}));var th,wu=class{get aHt(){return this.uHt}get vEt(){return this.cHt}get TFt(){return this.SFt}set TFt(t){this.SFt=t}get hMt(){return this.zMt}get lHt(){return this.dHt}get fHt(){return this._Ht}get m8(){return this.gHt}get vHt(){return this.NUt.sE}get q(){return!0}On(){return Promise.resolve()}get NUt(){return this.wHt}set NUt(t){this.wHt=t}constructor(t,e,i,s,n,r,h,o){this.SFt=-1,this.uHt=e,this.cHt=t,this.mHt=i,this.dHt=s,this._Ht=r,this.zMt=n,this.pHt=h,this.gHt=o}},rY=class{get aHt(){return this.vMt.aHt}get vEt(){return this.vMt.vEt}get TFt(){return this.vMt.TFt}set TFt(t){this.vMt.TFt=t}get hMt(){return this.vMt.hMt}get lHt(){return this.vMt.lHt}get fHt(){return this.vMt.fHt}get m8(){return this.vMt.m8}get vHt(){return this.vMt.vHt}get q(){return this.yHt}On(){var t;return null!=(t=this.AHt)?t:this.AHt=this.i7()}async i7(){const t=new sY;this.vMt=await t.DUt(this.m8,this.vEt,this.NUt,this.fP),this.yHt=!0}get NUt(){return this.vMt.NUt}set NUt(t){this.vMt.NUt=t}constructor(t,e,i){this.yHt=!1,this.fP=i,this.vMt=new wu(t,void 0,"","",[],!1,!1,e)}},hY=class{get o(){return this.wS}get rFt(){return this.bHt}get THt(){return this.SHt}get MOt(){return this.kHt}constructor(t,e,i,s){this.wS=t,this.bHt=e,this.kHt=s,this.SHt=i}};function oY(t,e){let i;if(t.vastAdsRequest&&(i=function(t){if(t.adTagUrl)return t.adTagUrl;if(t.adsResponse)return Oj(t.adsResponse);return}(t.vastAdsRequest)),!i){const e=function(t){const e=t.contentUrl||t.contentId;if(!e)return;const i=t.contentType||"video/mp4",s=Ow(i)||Hw(t.contentType)?"streaming":"progressive",n=void 0!==t.duration?"<Duration>"+ge.eHt(t.duration)+"</Duration>":"",r=void 0!==t.whenSkippable&&t.whenSkippable>=0?' skipoffset="'+ge.eHt(t.whenSkippable)+'"':"",h='<MediaFile delivery="'+s+'" type="'+i+'">'+Lj(e)+"</MediaFile>",o=t.clickThroughUrl?"<VideoClicks><ClickThrough>"+Lj(t.clickThroughUrl)+"</ClickThrough></VideoClicks>":"",a="<Linear"+r+">"+n+"<MediaFiles>"+h+"</MediaFiles>"+o+"</Linear>",u=t.title?"<AdTitle>"+Lj(t.title)+"</AdTitle>":"";return'<VAST version="3.0"><Ad>'+u+"<InLine><Creatives><Creative>"+a+"</Creative></Creatives></InLine></Ad></VAST>"}(t);e&&(i=Oj(e))}const s=t.customData;if(i){const n={integration:null==s?void 0:s.integration,sources:{src:i,type:"vast"},timeOffset:e};return n.integration&&"theo"!==n.integration||(n.skipOffset=t.whenSkippable),n}}!function(t){t.EHt="error",t.IHt="sourceupdate"}(th||(th={}));var aY=class extends Xi{constructor(t){super("error"),this.lt=t}},uY=class extends Xi{constructor(t,e){super("sourceupdate"),this.bt=t,this.JM=e}},cY=class extends Et{get NA(){return this.PHt}RHt(t){this.CHt.RHt(t)}xHt(t){this.CHt.xHt(t)}DHt(t){this.CHt.DHt(t)}NHt(t){this.CHt.NHt(t)}BHt(t){this.PHt.addUpdateListener(t)}LHt(t){this.PHt.removeUpdateListener(t)}OHt(){const t=new $i,e=new chrome.cast.media.GetStatusRequest;return this.PHt.getStatus(e,(()=>{t.Lf({bt:this.fg(),JM:this.qg()})}),(e=>t.BC(e))),t.jf}fg(){var t;return null==(t=this.PHt.customData)?void 0:t.currentSource}qg(){var t;let e;if(null==(t=this.FHt.MHt())?void 0:t.version){var i;e=null==(i=this.PHt.customData)?void 0:i.sourceDescription}else{var s;const t=null==(s=cj(this.PHt))?void 0:s.customData;(function(t){return Th(t)&&t.theoplayer_version>=1&&Qf(t.streamStart)&&Qf(t.isLive)&&Qf(t.sourceDescription)})(t)&&(e=t.sourceDescription),e||(e=function(t){return{sources:[{src:t.contentId,type:t.contentType}],ads:lY(t)}}(this.PHt.media))}return e}jl(){const t=new chrome.cast.media.PauseRequest;this.PHt.pause(t,Qo,this.UHt)}xl(){const t=new chrome.cast.media.StopRequest;this.PHt.stop(t,Qo,this.UHt)}dl(){const t=new chrome.cast.media.PlayRequest;this.PHt.play(t,Qo,this.UHt)}gc(t,e){const i=new chrome.cast.media.SeekRequest;return i.currentTime=t,i.resumeState=e?chrome.cast.media.ResumeState.PLAYBACK_PAUSE:chrome.cast.media.ResumeState.PLAYBACK_START,new Promise(((t,e)=>{this.PHt.seek(i,t,(t=>{var i;e(new hh(Sn(t.code),null!=(i=t.description)?i:void 0))}))}))}Iu(t){this.CHt.o6(wr,function(t){return{type:lj.OOt,properties:{playbackRate:t}}}(t)).catch(this.HHt)}VHt(t){const e=new chrome.cast.media.EditTracksInfoRequest(t);this.PHt.editTracksInfo(e,Qo,this.UHt)}WHt(){return this.PHt.getEstimatedTime()}qHt(){return this.PHt.getEstimatedBreakClipTime()}zHt(){return this.PHt.getEstimatedBreakTime()}XHt(){this.CHt.o6("urn:x-cast:com.google.cast.media",{type:dj.SKIP_AD,requestId:this.GHt++,mediaSessionId:this.PHt.mediaSessionId}).catch(this.HHt)}bn(){this.Lo()}constructor(t,e,i){super(e),this.GHt=0,this.HHt=t=>{this.To(new aY(t))},this.UHt=t=>{var e;const i=new hh(Sn(t.code),null!=(e=t.description)?e:void 0);this.HHt(i)},this.FHt=t,this.CHt=e,this.PHt=i}};function lY(t){return t.vmapAdsRequest&&t.vmapAdsRequest.adTagUrl?[{sources:{src:t.vmapAdsRequest.adTagUrl,type:"vmap"}}]:t.breaks&&t.breakClips?Ga(t.breaks,(e=>function(t,e){const i=[];if(t.isWatched)return i;for(const s of t.breakClipIds){const n=pi(e,(t=>t.id===s));if(n){const e=oY(n,t.position);e&&i.push(e)}}return i}(e,t.breakClips))):[]}var su,dY=class{QHt(t,e){this.FHt.addMessageListener(t,e)}KHt(t,e){this.FHt.removeMessageListener(t,e)}o6(t,e){return new Promise(((i,s)=>{this.FHt.sendMessage(t,e,i,(t=>{var e;s(new hh(Sn(t.code),null!=(e=t.description)?e:void 0))}))}))}bn(){}constructor(t){this.FHt=t}};function fY(t){return"vmap"===t||"adrule"===t}function _Y(t){if(t)return mh(t)?{src:Oi(t),type:void 0}:function(t){return Th(t)&&Boolean(t.src)}(t)?{src:Oi(t.src),type:gY(t.type)}:void 0}function gY(t){if(mh(t)){const e=t.toLowerCase();switch(e){case"vast":case"vmap":case"adrule":return e;default:return void rt("The ad source type provided in the configuration could not be recognized: '"+t+"'.")}}else t||rt("For better performance it is highly recommended to add the type to the configuration of your ad sources.")}function vY(t){if(void 0!==t&&""!==t&&("string"==typeof t||"number"==typeof t)){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return 0;case"end":case"100%":return-1}if("string"==typeof t){if(function(t){return fj.test(t)}(t))return ge.tHt(t);if(wY(t))return t}return Number(t)>=0?Number(t):void 0}}function wY(t){return new RegExp(/^\d{1,2}%$/).test(t)}!function(t){t.BOt="receiver_info",t.oEt="event",t.jHt="propertychange",t.LOt="trackevent"}(su||(su={}));var tu,mY=class{YHt(t){let e;try{e=JSON.parse(t)}catch(t){0}return e}RHt(t){this.ZHt.push(t)}xHt(t){me(this.ZHt,t)}DHt(t){this.JHt.push(t)}NHt(t){me(this.JHt,t)}$Ht(t){this.tVt=t}o6(t,e){return this.eVt.o6(t,e)}bn(){this.eVt.KHt(wr,this.iVt),Ce(this.JHt),Ce(this.ZHt),this.tVt=void 0}constructor(t){this.ZHt=[],this.JHt=[],this.iVt=(t,e)=>{const i=this.YHt(e);if(i)if(i.type===su.jHt)for(const t of this.ZHt)for(const e of g.keys(i.properties))t(e,i.properties[e]);else if(i.type===su.oEt)for(const t of this.JHt)t(i.event);else i.type===su.LOt&&this.tVt&&i.event.trackState&&this.tVt(i.event.trackId,i.event.trackState.targetQualityIds)},this.eVt=t,this.eVt.QHt(wr,this.iVt)}};!function(t){t.sVt="medialoadedchange",t.Il="volumechange",t.EHt="casterror",t.nVt="playererror",t.rVt="targetqualitychanged",t.hVt="receiverinfochanged"}(tu||(tu={}));var pY,yY=class extends Xi{constructor(){super("medialoadedchange")}},AY=class extends Xi{constructor(t,e){super("volumechange"),this._l=t,this.Xu=e}},bY=class extends Xi{constructor(t){super("casterror"),this.lt=t}},TY=class extends Xi{constructor(t){super("playererror"),this.lt=t}},SY=class extends Xi{constructor(t,e){super("targetqualitychanged"),this.MA=t,this.oVt=e}},kY=class extends Xi{constructor(){super("receiverinfochanged")}},EY=class extends Et{aVt(t,e,i){this.CHt.o6(wr,function(t,e,i){return{type:lj.LOt,trackID:t,trackType:e,properties:{targetQuality:i}}}(t,e,i)).catch(this.HHt)}uVt(){this.eVt.QHt(wr,this.cVt),this.CHt.o6(wr,{type:lj.BOt}).catch(Qo)}MHt(){return this.lVt}dVt(){return this.FHt.getSessionObj()}fVt(t){!this._Vt&&t&&t.idleReason!==chrome.cast.media.IdleReason.FINISHED&&(this._Vt=new cY(this,this.CHt,t),this.gVt(),this.To(new yY),this._Vt.BHt(this.vVt))}wVt(){return this._Vt}async mVt(t){const e=function(t){const e=function(t,e,i,s){const n=bE(t)||"",r=yE(t)||"",h=new chrome.cast.media.MediaInfo(n,r);return h.metadata=uj(t.metadata,t.poster),h.streamType=s,function(t,e,i){const s=[],n=[];let r,h=0,o=0;for(const t of e){const e=_Y(t.sources);if(e)if(vj(e,t.timeOffset))r=new chrome.cast.media.VastAdsRequest,r.adTagUrl=e.src;else if(wj(e,t.timeOffset)){var a;const r=null!=(a=t.timeOffset)?a:0,c=t.skipOffset;var u;const l=null!=(u=ge.sHt(r,i))?u:0,d=void 0!==c?ge.sHt(c,i):void 0,f=new chrome.cast.media.BreakClip("bc"+o++);f.vastAdsRequest=new chrome.cast.media.VastAdsRequest,f.vastAdsRequest.adTagUrl=e.src,f.whenSkippable=d,f.customData={integration:t.integration};let _=pi(n,(t=>t.position===l));void 0===_&&(_=new chrome.cast.media.Break("b"+h++,[],l),n.push(_)),_.breakClipIds.push(f.id),s.push(f)}else 0;else 0}t.breakClips=s,t.breaks=n,t.vmapAdsRequest=r}(h,e,i),h}(t.pVt,t.L5,t.ct,t.DQ),i=new chrome.cast.media.LoadRequest(e);return i.autoplay=!0,i.currentTime=t.Wu,i.customData=t.yVt,i}(t);let i;try{i=await this.FHt.loadMedia(e)}catch(t){i=t}if(i)throw new hh(Sn(i))}xg(t){this.dVt().setReceiverMuted(t,Qo,this.AVt)}Zg(t){this.dVt().setReceiverVolumeLevel(t,Qo,this.AVt)}bVt(){return this.dVt().receiver.friendlyName}bn(){this.Lo(),this.FHt.removeEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.TVt),this.dVt().removeUpdateListener(this.gVt),this.eVt.KHt(wr,this.cVt),this.CHt.bn(),this.eVt.bn()}constructor(t){super(),this.lVt=void 0,this.HHt=t=>{this.To(new bY(t))},this.SVt=(t,e)=>{"error"===t&&this.To(new TY(e))},this.kVt=(t,e)=>{this.To(new SY(t,e))},this.cVt=(t,e)=>{const i=JSON.parse(e);i.type===su.BOt&&(this.lVt=i.info,this.To(new kY))},this.gVt=()=>{const t=this.dVt(),{level:e,muted:i}=t.receiver.volume;this.To(new AY(null!=e?e:void 0,null!=i?i:void 0))},this.TVt=()=>this.fVt(this.FHt.getMediaSession()),this.vVt=t=>{var e;t||(null==(e=this._Vt)||e.LHt(this.vVt),this._Vt=void 0,this.To(new yY))},this.AVt=t=>{var e;const i=new hh(Sn(t.code),null!=(e=t.description)?e:void 0);this.HHt(i)},this.FHt=t,this.FHt.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,this.TVt),this.eVt=new dY(t.getSessionObj()),this.CHt=new mY(this.eVt),this.CHt.RHt(this.SVt),this.CHt.$Ht(this.kVt),this.dVt().addUpdateListener(this.gVt),this.gVt(),this.uVt();const e=this.FHt.getMediaSession();e&&this.fVt(e)}};(pY||(pY={})).EVt="statechange";var Xh,IY=class extends Xi{constructor(t){super("statechange"),this.Dvt=t}},PY=class extends Et{O5(){return this._8}ag(){return d.Nl()}_g(){return this.FF+this.IVt}k5(){return this._g()}cg(){}vg(){return this.Zl}pg(){return this.Kl}yg(){}Bg(){return this.Ql}PVt(){}Lg(){return this.HF}Iu(t){this.HF!==t&&(this.HF=t,this.To(new Gs(this.Ko.Wu,t)))}Hg(){return dw.zl}Og(){return d.Nl()}Vg(){return d.Nl()}Wg(){return!1}rg(){return this.$T}Qg(){return this.eS}zg(){return this.xu}VHt(t){}jg(){return this.RVt}Gg(){return this.CVt}dl(){this.Ql=!1}jl(){this.Ql=!0}gc(t){this.FF=t-this.IVt}xVt(){return this.IVt}DVt(t){this.IVt=t}g8(t){this._8.g8(t)}xl(){}bn(){this.Lo(),this.$T.bn(),this.eS.bn(),this.xu.bn(),this._8.bn()}constructor(t,e,i,s,n,r,h,o,a){super(),this.Ko=t,this.IVt=0,this.$T=new mi,this.eS=new mi,this.xu=new gn,this._8=new _B,this.IVt=e,this.FF=i-e,this.Zl=s,this.Kl=n,this.Ql=r,this.HF=h,this.RVt=o,this.CVt=a}};!function(t){t.NVt="ccmodechangerequest",t.BVt="cctargetqualitychangerequest",t.LVt="cctrackchangerequest"}(Xh||(Xh={}));var RY,Eu,CY=class extends Xi{constructor(t,e,i){super(Xh.NVt),this.track=t,this.trackId=e,this.mode=i}};function xY(t){return"AUDIO"===t.type}function DY(t){return"VIDEO"===t.type}function NY(t){return"TEXT"===t.type}!function(t){t.KT="TEXT",t.yy="AUDIO",t.vl="VIDEO"}(RY||(RY={})),function(t){t.Ay="SUBTITLES",t.fI="CAPTIONS",t._I="DESCRIPTIONS",t.$n="CHAPTERS",t.Ty="METADATA"}(Eu||(Eu={}));var BY=class extends Et{get ma(){return this.Gu||(this.Gu=Jn(this)),this.Gu}get _h(){return this.Yu}set _h(t){t!==this.Yu&&(this.Yu=t,this.To(new xa(this)))}get W(){return this.rJ}get L(){return this.hJ}get bw(){return this.aU}set bw(t){const e=Ci(t);this.aU!==e&&(this.aU=e,this.OVt!==e&&this.To(new CY(this,this.cw,e)),this.To(new In(this)))}get MVt(){return this.OVt}set MVt(t){const e=Ci(t),i=this.aU!==e;this.aU=e,this.OVt=e,i&&this.To(new In(this))}Sw(t){this.bw=t}FVt(t){}bn(){}ir(){}constructor(t){super(),this.Gu=void 0;const e=t.customData;this.cw=Number(t.trackId)||0,this.o=""+(e&&e.id||this.cw),this.Yu=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.Aw=e&&e.inBandMetadataTrackDispatchType||"",this.Lt=e&&e.kind||function(t){switch(t){case Eu.Ay:return bt.Ay;case Eu.fI:return bt.fI;case Eu._I:return bt._I;case Eu.$n:return bt.$n;case Eu.Ty:return bt.Ty}return}(t.subtype)||"subtitles",this.Nc=mn.NONE,this.Iw=e&&void 0!==e.type?function(t){return Er(t)?t:Ca.DEFAULT}(e.type):Ca.WEBVTT,this.nJ=[],this.hJ=new Nt(this.nJ),this.fJ=[],this.rJ=new Nt(this.fJ),this.aU=Ci(e&&e.mode||lu.Th),this.OVt=this.aU}};var LY,OY=class extends Xi{constructor(t,e){super(Xh.LVt),this.trackId=t,this.enabled=e}},MY=class extends Xi{constructor(t,e){super(Xh.BVt),this.track=t,this.targetQuality=e}};!function(t){t.yy="audio",t.vl="video",t.KT="text"}(LY||(LY={}));var FY,br,UY=class extends Et{get uw(){return this.Zht}get fw(){return this.Yht}set fw(t){this.UVt(t),this.To(new MY(this,t))}get dw(){return this.dS}get _h(){return this.Yu}set _h(t){t!==this.Yu&&(this.Yu=t,this.To(new xa(this)))}get Rt(){return this.We}set Rt(t){this.We!==t&&(this.We=t,this.HVt!==t&&this.To(new OY(this.cw,t)),this.To(new In(this)))}get VVt(){return this.HVt}set VVt(t){const e=this.We!==t;this.We=t,this.HVt=t,e&&this.To(new In(this))}get ma(){return this.Gu||(this.Gu=Kt(this)),this.Gu}get bw(){return this.Rt?"enabled":"disabled"}yS(t){this.Rt=t}FVt(t){if(t.targetQualityIds){const e=[];for(let i=0;i<this.dS.U;i++){const s=this.dS.Zv(i);t.targetQualityIds.indexOf(s.o)>-1&&e.push(s)}const i=e.length?e:void 0;this.UVt(i)}}UVt(t){(function(t,e){return!t&&e||t&&!e||t&&e&&!er(t,e)})(this.Yht,t)&&(this.Yht=t&&this.dS._S(t)?t:void 0,this.To(new NH(this.Yht,this)))}unload(){for(const t of this.dS.Kv)t.pn("update",this.sSt);this.dS.ir()}constructor(t){super(),this.Zht=void 0,this.dS=new Ua,this.Yht=void 0,this.Gu=void 0,this.sSt=()=>this.To(new xa(this));const e=t.customData;if(this.cw=Number(t.trackId)||0,this.o=""+(e&&e.id||this.cw),this.Yu=e&&e.label||t.name||"",this.gs=e&&e.language||t.language||"",this.Lt=e&&e.kind||"main",this.We=e&&e.enabled,this.HVt=this.We,xY(t)){this.PY=LY.yy;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new yU(t.id,t.bandwidth,t.codecs,t.name,"",t.audioSamplingRate);e.wn("update",this.sSt),this.dS.fS(e)}}else{this.PY=LY.vl;const e=t.customData&&t.customData.qualities;if(e)for(const t of e){const e=new pU(t.id,t.bandwidth,t.codecs,t.name,"",t.frameRate,t.width,t.height);e.wn("update",this.sSt),this.dS.fS(e)}}}};!function(t){t.WVt="legacy",t.qVt="caf"}(FY||(FY={})),function(t){t.zVt="theo",t.XVt="google-ima",t.no="google-dai",t.GVt="freewheel",t.QVt="mediatailor",t.kP="chromecast"}(br||(br={}));var HY=class{KVt(){if(this.jVt>=this._8.length)return;const t=this._8[this.jVt];return this.jVt+=1,t}lt(){return this.KVt()}constructor(t){this.jVt=0,this._8=t}};function VY(t){var e,i,s;return null!=(s=null==(e=t.aHt)||null==(i=e.MOt)?void 0:i.FOt())?s:[]}var WY=class{},pc=class{Z5(){var t;return null!=(t=this.Gu)?t:this.Gu=function(t){return{get ads(){return t.L5.map((t=>t.Z5()))},get integration(){return t.YVt},get maxDuration(){return t.ZVt},get maxRemainingDuration(){return t.JVt},get timeOffset(){return t.vEt}}}(this)}constructor(){this.Gu=void 0}},qY=class{get $Vt(){return this.tWt}get t(){return this.Ko}constructor(t,e){this.tWt=t,this.Ko=e}},zY=class extends pc{get NUt(){return this.wHt}get L5(){const t=[];for(const s of this.wHt.eWt)for(const n of VY(s)){var e,i;const r=null!=(i=null==(e=n.eMt)?void 0:e.EMt)?i:[];if(n.$Ot&&t.push(this.iWt(n.$Ot,r,n.sMt,s.m8)),n.iMt)for(const e of n.iMt.nMt)t.push(this.sWt(e,r,n.iMt,n.sMt,s.m8))}return t}iWt(t,e,i,s){const n=pi(this.nWt,(e=>e.$Ot===t));if(void 0!==n)return n;const r=new KY(t,e,this,this.rWt,i,s);return this.nWt.push(r),r}sWt(t,e,i,s,n){const r=pi(this.hWt,(e=>e.iMt===t));if(void 0!==r)return r;const h=new QY(t,e,i,this,this.rWt,s,n);return this.hWt.push(h),h}get YVt(){return br.zVt}get vEt(){const t=this.wHt.sE;return t>=0?t:this.rWt.t.vg()}get JVt(){let t=0;for(const e of this.wHt.eWt)for(const i of VY(e))i.$Ot&&!i.$Ot.kFt&&(t+=i.$Ot.ct);return this.rWt&&this.rWt.$Vt&&(t+=this.rWt.$Vt.ct-this.rWt.$Vt.Wu),t}get ZVt(){let t=0;for(const e of this.wHt.eWt)for(const i of VY(e))i.$Ot&&(t+=i.$Ot.ct);return t}constructor(t,e){super(),this.nWt=[],this.hWt=[],this.wHt=t,this.rWt=e}},XY={height:0,width:0,clickThrough:"",contentHTML:"",resourceURI:"",altText:""},GY=class extends WY{get n8(){return this.vMt}get m8(){return this.gHt}get sMt(){return this.mFt}oWt(){return this.aWt}uWt(){this.aWt=!0}cWt(t){return Me({},XY,{resourceURI:t.iUt||""})}lWt(t){return Me({},XY,{contentHTML:t.iUt.trim(),type:"HTMLResource"})}dWt(t){var e,i;return Me({},XY,{clickThrough:(null==(e=t.QMt)?void 0:e.trim())||"",resourceURI:(null==(i=t.iUt)?void 0:i.trim())||"",altText:t.XMt||"",type:"StaticResource"})}fWt(t,e,i){if(!t||!e)return;const s="<img "+(i?"title='"+i+"' ":"")+"src='"+encodeURI(t)+"'>";return"<a href='"+encodeURI(e)+"' target='_blank' rel='noopener'>"+s+"</a>"}eMt(t){return t?t.map((t=>{let e;const i={adSlotId:t.FMt||"",height:t.Ci||0,width:t.Ti||0};if(t.aMt){var s;const i=this.dWt(t.aMt),n=i.clickThrough||(null==(s=t.WMt)?void 0:s.QMt);e=Me({},i,{contentHTML:this.fWt(i.resourceURI,n,i.altText)||""})}else if(t.dMt)e=this.lWt(t.dMt);else{if(!t.cMt)return;e=this.cWt(t.cMt)}return oe(e,i)})).filter((t=>void 0!==t)):[]}_Wt(){return this.gWt.GOt}constructor(t,e,i,s,n,r){super(),this.aWt=!1,this.gWt=t,this.IMt=e,this.vMt=i,this.rWt=s,this.mFt=n,this.gHt=r}},QY=class extends GY{get iMt(){return this.gWt}get tMt(){return this.vWt}pa(){const t=this.vMt,e={companions:this.eMt(this.IMt),type:"nonlinear",id:this.gWt.wMt,skipOffset:this.TFt,integration:br.zVt,adSystem:this.gWt.GOt,get adBreak(){return t.Z5()},creativeId:this.gWt.wMt,universalAdIds:this.mFt.map((t=>({adIdRegistry:t.pUt,adIdValue:t.AUt})))};return this.gWt.cMt?oe(this.cWt(this.gWt.cMt),e):this.gWt.dMt?oe(this.lWt(this.gWt.dMt),e):this.gWt.aMt?oe(this.dWt(this.gWt.aMt),e):e}Z5(){var t;return null!=(t=this.Gu)?t:this.Gu=this.pa()}wWt(){var t,e;return null!=(e=null==(t=this.gWt.aMt)?void 0:t.iUt)?e:""}mWt(){var t,e,i;return null!=(i=null==(t=this.gWt)||null==(e=t.aMt)?void 0:e.nUt)?i:""}get TFt(){const t=this.gWt.n8;return t&&t.m8&&void 0!==t.m8.skipOffset?ge.sHt(t.m8.skipOffset,this.rWt.$Vt.ct):(null==(e=this.gWt.n8)?void 0:e.TFt)||-1;var e}constructor(t,e,i,s,n,r,h){super(t,e,s,n,r,h),this.vWt=i}},KY=class extends GY{get $Ot(){return this.gWt}pa(){var t;const e=this.vMt;return{companions:this.eMt(this.IMt),duration:this.gWt.ct,id:this.gWt.wMt,mediaFiles:this.gWt.yFt,skipOffset:this.TFt,type:"linear",integration:br.zVt,adSystem:this.gWt.GOt,width:void 0,height:void 0,get adBreak(){return e.Z5()},clickThrough:null==(t=this.gWt.cFt)?void 0:t.QMt,creativeId:this.gWt.wMt,universalAdIds:this.mFt.map((t=>({adIdRegistry:t.pUt,adIdValue:t.AUt})))}}Z5(){var t;return null!=(t=this.Gu)?t:this.Gu=this.pa()}wWt(){return this.gWt.yFt.length>0?this.gWt.yFt[0].contentURL:""}mWt(){return this.gWt.yFt.length>0?this.gWt.yFt[0].type:""}get TFt(){const t=this.gWt.n8;return t&&t.m8&&void 0!==t.m8.skipOffset?ge.sHt(t.m8.skipOffset,this.rWt.$Vt.ct):this.gWt.TFt||-1}constructor(t,e,i,s,n,r){super(t,e,i,s,n,r)}};function jY(t){return t instanceof KY}var YY,ec=class extends Lh{pa(){return new ZY(this.o8.Z5())}constructor(t){super("pWt",t)}},ZY=class extends va{constructor(t){super("updatead",t)}},JY=class extends Lh{pa(){return new $Y(this.o8.Z5())}constructor(t){super("yWt",t)}},$Y=class extends va{constructor(t){super("adloaded",t)}},tZ=class extends Xo{get j5(){return void 0!==this.AWt}get Y5(){return this.gWt?[this.gWt]:[]}get J5(){var t;return null!=(t=this.AWt)?t:null}get t8(){return Ga(this.bWt,(t=>{const e=t.L5;if(t===this.AWt&&void 0!==this.gWt){const t=e.indexOf(this.gWt);if(t>=0)return e.slice(t+1)}return t.TWt()?[]:e}))}get e8(){return this.bWt.filter((t=>t===this.AWt||!t.TWt()))}get ma(){var t;return null!=(t=this.Gu)?t:this.Gu=$N(this)}m$(t,e,i){throw new p("Scheduling ads while casting is not supported.")}zy(){this.PHt.XHt()}v8(t){}SWt(t){return pi(this.bWt,(e=>e.o===t))}kWt(t,e,i,s){const n=this.bWt,r=[];let h=!1;for(const n of t){let t=this.SWt(n.id);void 0===t&&(t=new eZ(n),s.push(new sB(t))),!Qf(t.EWt)&&Qf(i)&&(t.EWt=this.IWt(t.PWt,i));const o=t.L5;t.Kn(n,e,i,s);const a=t.L5;for(const t of a)Bc(o,t)||(s.push(new rB(t)),h=!0);r.push(t)}this.bWt=r,h&&s.push(new lB);for(const t of n)Bc(r,t)||s.push(new eB(t))}RWt(t,e){const i=this.AWt,s=this.gWt;let n,r;if(t){var h;const{breakId:e,breakClipId:i}=t;n=e?this.SWt(e):void 0,r=i?null==(h=this.AWt)?void 0:h.CWt(i):void 0}if(this.AWt=n,this.gWt=r,n!==i&&(void 0!==i&&(i.xWt=void 0,e.push(new To(i))),void 0!==n&&(n.xWt=this.PHt,e.push(new qc(n)))),r!==s){const t=this.Ko._g();void 0!==s&&e.push(new Eh(s,t)),void 0!==r&&e.push(new vr(r,t))}}IWt(t,e){if(!e||!e.breaks)return;const i=pi(e.breaks,(e=>e.id===t.id));return i}g8(t){const e=[];for(const t of this.bWt){let i=t.L5;if(t===this.AWt&&void 0!==this.gWt){const t=i.indexOf(this.gWt);t>=0&&(i=i.slice(t))}else if(t.TWt())continue;for(const t of i){const i=t.DWt();i&&e.push(i)}}for(const i of e)t.m$(i,Kh.i8,!1)}bn(){return this.Lo(),this.PHt.LHt(this.Zr),void 0!==this.AWt&&(this.AWt.xWt=void 0,this.AWt=void 0),this.gWt=void 0,Ce(this.bWt),Promise.resolve(void 0)}constructor(t,e){super(),this.bWt=[],this.AWt=void 0,this.gWt=void 0,this.Gu=void 0,this.Zr=t=>{var e;if(!t)return;const i=this.PHt.NA,{breakStatus:s}=i,{breakClips:n,breaks:r}=i.media,h=null==(e=cj(i))?void 0:e.media,o=[];r&&n&&this.kWt(r,n,h,o),this.RWt(s,o);for(const t of o)this.To(t)},this.Ko=t,this.PHt=e,this.PHt.BHt(this.Zr)}},eZ=class extends pc{get PWt(){return this.NWt}get o(){return this.NWt.id}get L5(){return this._8}get YVt(){return br.kP}get ZVt(){let t=this.NWt.duration;return void 0===t&&this._8.length>0&&(t=t_(this._8,(t=>t.ct)),j(t)&&(t=void 0)),t}get JVt(){const t=this.ZVt;if(void 0!==t&&void 0!==this.xWt){const e=this.xWt.zHt();if(void 0!==e)return w.max(0,t-e)}return t}get vEt(){return this.NWt.position}TWt(){return this.NWt.isWatched}CWt(t){return pi(this._8,(e=>e.o===t))}Kn(t,e,i,s){const n=[];for(let r=0;r<t.breakClipIds.length;r++){const h=t.breakClipIds[r],o=pi(e,(t=>t.id===h));if(void 0===o)continue;const a=r<this._8.length?this._8[r]:new iZ(o,this);!Qf(a.BWt)&&Qf(i)&&(a.BWt=this.LWt(i,h,r)),a.Kn(o,s),n.push(a)}this.NWt=t,this._8=n}LWt(t,e,i){if(!t||!t.breakClips)return;let s=pi(t.breakClips,(t=>t.id===e));if(!s){var n;const e=null==(n=this.EWt)?void 0:n.breakClipIds[i];e&&(s=pi(t.breakClips,(t=>t.id===e)))}return s}constructor(t){super(),this.EWt=void 0,this._8=[],this.xWt=void 0,this.NWt=t}},iZ=class{get OWt(){return this.MWt}get o(){return this.MWt.id}get EMt(){return[]}get ct(){var t;return null!=(t=this.MWt.duration)?t:NaN}get yFt(){const t=this.wWt();return t?[{contentURL:t,delivery:"progressive",type:this.mWt(),width:0,height:0}]:[]}get TFt(){const{whenSkippable:t}=this.MWt;return void 0===t?void 0:t<0?-1:t}get QMt(){return this.MWt.clickThroughUrl}get wMt(){}get sMt(){return[]}_Wt(){return""}mWt(){var t;return null!=(t=this.MWt.contentType)?t:""}wWt(){var t,e;return null!=(e=null!=(t=this.MWt.contentUrl)?t:this.MWt.contentId)?e:""}Kn(t,e){const i=this.o,s=this.ct,n=this.MWt.contentUrl;this.MWt=t;const r=this.o,h=this.ct,o=this.MWt.contentUrl;i===r&&(s===h||j(s)&&j(h))&&n===o||e.push(new ec(this)),j(s)&&!j(h)&&e.push(new JY(this))}DWt(){let t;return this.BWt&&(t=oY(this.BWt,this.n8.vEt)),t||(t=oY(this.MWt,this.n8.vEt)),t}Z5(){var t;return null!=(t=this.Gu)?t:this.Gu=this.pa()}pa(){const t=this;return{get companions(){return t.EMt},get duration(){return t.ct},get id(){return t.o},get mediaFiles(){return t.yFt},get skipOffset(){return t.TFt},type:"linear",integration:br.kP,get adSystem(){return t._Wt()},width:void 0,height:void 0,get adBreak(){return t.n8.Z5()},get clickThrough(){return t.QMt},get creativeId(){return t.wMt},get universalAdIds(){return t.sMt.map((t=>({adIdRegistry:t.pUt,adIdValue:t.AUt})))}}}constructor(t,e){this.Gu=void 0,this.MWt=t,this.n8=e}},sZ=class extends Et{get FWt(){return this.UWt}set FWt(t){this.UWt!==t&&(this.UWt=t,this.Hs.href=null!=t?t:"",t?this.NI():this.BI())}NI(){if(this.We)return;this.We=!0,this.Hs.style.display="",this.HWt||(this.h7.style.cursor="pointer");const t=this.HWt?this.Hs:this.h7;Ee.Zs.Ye?(t.addEventListener("touchstart",this.VWt),t.addEventListener("touchend",this.WWt)):(t.addEventListener("mousedown",this.VWt),t.addEventListener("click",this.WWt))}BI(){if(!this.We)return;this.We=!1,this.Hs.style.display="none",this.HWt||(this.h7.style.cursor="");const t=this.HWt?this.Hs:this.h7;Ee.Zs.Ye?(t.removeEventListener("touchstart",this.VWt),t.removeEventListener("touchend",this.WWt)):(t.removeEventListener("mousedown",this.VWt),t.removeEventListener("click",this.WWt))}Ou(){this.Lo(),this.BI(),this.h7.removeChild(this.Hs)}constructor(t,e=Ee.Zs.Ye){super(),this.We=!1,this.VWt=t=>{t.stopPropagation(),this.To(new Xi("clickstart"))},this.WWt=t=>{t.stopPropagation(),this.To(new Xi("click"))},this.h7=t,this.HWt=e,this.Hs=h.createElement("a"),this.Hs.style.position="absolute",this.Hs.style.zIndex="11",this.Hs.target="qWt",this.HWt?($t(this.Hs,"learn more"),this.Hs.className="theoplayer-ad-overlay-component theoplayer-ad-touch-clickthrough",this.Hs.setAttribute("rel","noopener")):ha(this.Hs),this.h7.appendChild(this.Hs),this.BI()}};!function(t){t.zWt="theo-size-xs",t.XWt="theo-size-s",t.GWt="theo-size-m",t.QWt="theo-size-l",t.KWt="theo-size-xl"}(YY||(YY={}));var nZ=[1200,992,768,576],rZ={1200:"theo-size-xl",992:"theo-size-l",768:"theo-size-m",576:"theo-size-s"},hZ=class{jWt(t){let e=oZ(t);e!==this.YWt&&(ro(this.Hs,e),JT(this.Hs,this.YWt),this.YWt=e)}bn(){this.E0.pn(Ui.gn,this.yn)}constructor(t,e){this.Hs=t,this.E0=e,this.yn=t=>{this.jWt(t.width)},this.YWt=oZ(e.tW),ro(this.Hs,this.YWt),e.wn(Ui.gn,this.yn)}};function oZ(t){for(let e of nZ)if(t>e)return rZ[e];return"theo-size-xs"}var aZ=class extends Et{get je(){return this.Hs}get bw(){return this.aU}get _P(){return this.ZWt.textContent||""}set _P(t){$t(this.ZWt,t)}JWt(t){"countdown"!==this.aU&&(this.aU="countdown",this.$Wt(),this.je.classList.remove("theoplayer-ad-skip-button"),this.je.classList.add("theoplayer-ad-skip-countdown")),this._P="You can skip in "+w.round(t)+" seconds"}tqt(){"skip"!==this.aU&&(this.aU="skip",this._P="Skip Ad",this.eqt(),this.je.classList.remove("theoplayer-ad-skip-countdown"),this.je.classList.add("theoplayer-ad-skip-button"))}eqt(){this.je.addEventListener("mouseup",this.iqt),this.je.addEventListener("touchend",this.iqt)}$Wt(){this.je.removeEventListener("mouseup",this.iqt),this.je.removeEventListener("touchend",this.iqt)}bn(){this.Lo(),this.$Wt(),this.sqt.bn(),dt(this.Hs),dt(this.ZWt),this.nqt&&dt(this.nqt)}constructor(t,e){super(),this.iqt=()=>{this.To(new Xi("zy"))},this.Hs=h.createElement("div"),this.je.className="theoplayer-ad-overlay-component theoplayer-ad-skip theoplayer-ad-skip-countdown",this.je.style.position="absolute",this.ZWt=h.createElement("span"),this.je.appendChild(this.ZWt),e&&(this.nqt=h.createElement("div"),this.nqt.className="theoplayer-ad-skip-poster",this.nqt.style.backgroundImage='url("'+gg(e)+'")',this.je.appendChild(this.nqt)),this.aU="countdown",this.sqt=new hZ(this.je,t)}},uZ=class extends Et{rqt(){const t=this.PHt.NA.activeTrackIds;if(t){if(this.hqt()){const e=this.eS.Kv.map((t=>t.o)),i=this.$T.Kv.map((t=>t.o));Bc(e.concat(i),"0")&&t.push(0)}_Z(t,this.$T),_Z(t,this.eS),function(t,e){const i=!1;for(const i of e.Kv)i.MVt=Bc(t,i.cw)?lu.Qn:lu.Th}(t,this.xu)}}oqt(){var t;const e=null==(t=this.PHt.NA.media)?void 0:t.tracks;if(!e)return;const i=e.filter(xY),s=e.filter(DY),n=e.filter(NY);if(dZ(this.$T,i.map((t=>t.trackId))),dZ(this.eS,s.map((t=>t.trackId))),dZ(this.xu,n.map((t=>t.trackId))),this.hqt()&&0===s.length&&0!==this.jg()){const t=this.aqt();s.push(t)}if(this.hqt()&&0===i.length){const t=this.uqt();i.push(t)}fZ(i,this.$T),fZ(s,this.eS),function(t,e){let i=!1;for(const s of t){let t=lZ(e,s.trackId);t||(t=new BY(s),e.tt(t),i=!0)}}(n,this.xu)}cqt(){this.Ql||(this.lqt=sl(this.Jdt,250))}dqt(){nl(this.lqt)}fqt(){this.dqt(),this.cqt()}_qt(){var t;const e=this.PHt.NA,i=e.media;var s;const n=null!=(s=null==i?void 0:i.duration)?s:NaN,r=(null==i?void 0:i.streamType)===chrome.cast.media.StreamType.LIVE||n<0,h=r?1/0:n;this.Zl=h,this.gqt();const o=e.getEstimatedLiveSeekableRange(),a=null==(t=e.customData)?void 0:t.buffers;if(Qf(o)){const{start:t,end:e,isMovingWindow:i=r,isLiveDone:s=!1}=o;this.rPt(t,e,i,s)}else if(Qf(a)){const[t,e]=a.seekable;this.rPt(t,e,r,!1)}else r?this.rPt(void 0,void 0,!0,!1):this.rPt(0,h,!1,!1)}vqt(){const t=this.PHt.NA,e=function(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.PAUSED}(t)||cZ(t);this.wqt=e,this.Ql!==e&&(this.Ql=e,this.Ql?this.To(new mt(this._g())):this.To(new ds(this._g())))}sh(){const{playbackRate:t}=this.PHt.NA;this.mqt!==t&&(this.mqt=void 0,this.HF!==t&&(this.HF=t,this.To(new Gs(this._g(),t))))}pqt(){const{playerState:t}=this.PHt.NA;let e;switch(t){case chrome.cast.media.PlayerState.IDLE:e=dw.zl;break;case chrome.cast.media.PlayerState.BUFFERING:e=dw.Jn;break;case chrome.cast.media.PlayerState.PAUSED:case chrome.cast.media.PlayerState.PLAYING:e=dw._f}this.GZ(e),this.yqt()}rPt(t,e,i,s){Qf(t)&&Qf(e)?this.RZ=new js(t,e,i,i&&!s):this.RZ=void 0}Aqt(t,e){this.CVt=null!=e?e:this.CVt,this.RVt=null!=t?t:this.RVt,this.To(new le)}Xe(t){this.bqt!==t?(this.Yl=!0,this.To(new T(this._g()))):this.bqt=void 0}Cf(){if(!this.Yl)return;this.Yl=!1;const t=this._g();this.To(new hc(t,this.cg())),this.To(new ju(t))}Mh(){this.Kl=!0,this.pg()&&this.To(new ih(this._g()))}gqt(){const t=this.Clt,e=this.vg();t===e||j(t)&&j(e)||(this.Clt=e,this.To(new oa(e)))}Tqt(){const t=this._g();this.Yl||this.Sqt===t||(this.Sqt=t,this.To(new hc(t,this.cg())))}PVt(){this.Ql&&(this.Ql=!1,this.To(new ds(this._g())),this.GZ(dw.zl))}O5(){return this._8}ag(){return this.lbt.Ey(this.IVt)}_g(){if(this._8.j5){const t=this.PHt.qHt();if(void 0!==t)return t}return this.k5()}k5(){return void 0!==this.kqt?this.IVt+this.kqt:this.Kl?this.vg():this.IVt+this.PHt.WHt()}cg(){if(this.Eqt)return new Date(this.k5()+this.Eqt)}vg(){if(this._8.j5){var t;const e=null==(t=this._8.Y5[0])?void 0:t.ct;if(void 0!==e&&!j(e))return e}return this.IVt+this.Zl}yg(){return this.ZO}pg(){return!this._8.j5&&this.Kl}Bg(){return this.Ql}Lg(){return this.HF}Iu(t){this.HF!==t&&(this.mqt=this.HF,this.HF=t,this.To(new Gs(this._g(),t)),this.PHt.Iu(t))}Hg(){return this.tf}Og(){return this._8.j5?d.MF(0,this._g()):this.Ho.Ey(this.IVt)}Vg(){var t,e;if(this._8.j5)return d.Nl();let i=null!=(e=null==(t=this.RZ)?void 0:t.UY().Ey(this.IVt))?e:d.Nl();if(i.U>0){const t=i.Pn(i.U-1);i=i.Hl(d.MF(t,this._g()))}return i}Wg(){return this.Yl}rg(){return this.$T}Qg(){return this.eS}zg(){return this.xu}aqt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",frameRate:0,height:this.Gg(),id:"0",name:"",width:this.jg()},enabled:!0,id:"0",kind:"main",label:"",language:"",qualities:[],uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:RY.vl}}uqt(){return{customData:{activeQuality:{averageBandwidth:0,bandwidth:0,codecs:"",id:"0",name:"",audioSamplingRate:0},qualities:[],enabled:!0,id:"0",kind:"main",label:"",language:"",uid:0},language:"",name:"",trackContentId:"",trackContentType:"",trackId:0,type:RY.yy}}hqt(){var t,e;return!(void 0!==(null==(t=this.FHt.MHt())?void 0:t.version))||(null==(e=this.FHt.MHt())?void 0:e.sdkType)===FY.qVt}VHt(t){this.hqt()&&me(t,0),this.PHt.VHt(t)}jg(){return this.RVt}Gg(){return this.CVt}dl(){this.Ql&&(this.Ql=!1,this.wqt=!1,this.To(new ds(this._g()))),this.PHt.dl()}jl(){this.Ql||(this.Ql=!0,this.wqt=!0,this.To(new mt(this._g()))),this.PHt.jl()}gc(t){if(this._8.j5)return;let e=w.max(0,t-this.IVt);e=w.round(1e6*e)/1e6;const i=this.kqt;this.kqt=e,this.wqt=this.Bg(),this.bqt=e,this.Yl=!0,this.To(new T(this._g())),void 0===i&&this.t1(e)}t1(t){this.PHt.gc(t,this.wqt).then(this.Iqt(t)).catch(this.HHt)}Iqt(t){return()=>{void 0!==this.kqt&&(this.kqt===t?this.kqt=void 0:this.t1(this.kqt))}}GZ(t){this.tf!==t&&(this.tf=t,this.To(new Qs(this._g(),t))),void 0===this.kqt&&this.Yl&&t>=dw.Hf&&this.Cf(),this.yqt()}yqt(){if(this.Ql)return void(this.Pqt=!1);const t=this.tf>=dw._f;this.Pqt!==t&&(this.Pqt=t,t?this.To(new _a(this._g())):this.To(new ki(this._g())))}Rqt(){this.Cqt||(this.Cqt=h.createElement("div"),this.Ko.je.appendChild(this.Cqt),this.Cqt.className="theoplayer-ad-linear theoplayer-chromecast-ad",this.Cqt.style.zIndex="10",ha(this.Cqt)),this.Cqt.style.display=this._8.j5?"":"none"}xqt(){var t;const e=null==(t=this._8.Y5[0])?void 0:t.QMt;e&&!this.Dqt?(this.Dqt=new sZ(this.Cqt,!0),this.Dqt.FWt=e,this.Dqt.wn("clickstart",this.Nqt)):this.Dqt&&(this.Dqt.FWt=e)}Bqt(){var t;const e=null==(t=this._8.Y5[0])?void 0:t.TFt;if(void 0===e||e<0)return void(this.Lqt&&(this.Lqt.bn(),this.Lqt=void 0));if(!this.Lqt){var i;const t=null==(i=this.Ko.ka)?void 0:i.mi;this.Lqt=new aZ(this.Ko.k0,t),this.Cqt.appendChild(this.Lqt.je),this.Lqt.wn("zy",this.Oqt)}const s=this.PHt.qHt();void 0!==s&&(s<e?this.Lqt.JWt(e-s):this.Lqt.tqt())}xVt(){return this.IVt}DVt(t){this.IVt=t}g8(t){}xl(){this.PHt.xl()}bn(){this.Lo(),this._8.bn(),this.Dqt&&(this.Dqt.Ou(),this.Dqt=void 0),this.Lqt&&(this.Lqt.bn(),this.Lqt=void 0),this.Cqt&&(dt(this.Cqt),this.Cqt=void 0),this.PHt.NHt(this.KY),this.PHt.xHt(this.Mqt),this.PHt.LHt(this.vVt),this.PHt.pn(th.EHt,this.Fqt),this.PHt.bn()}constructor(t,e,i,s){super(),this.lbt=d.Nl(),this.Eqt=void 0,this.Kl=!1,this.ZO=void 0,this.mqt=void 0,this.tf=dw.zl,this.Pqt=!1,this.Ho=d.Nl(),this.RZ=void 0,this.Yl=!1,this.$T=new mi,this.eS=new mi,this.xu=new gn,this.Clt=NaN,this.kqt=void 0,this.wqt=!1,this.Sqt=NaN,this.bqt=void 0,this.lqt=0,this.Mqt=(t,e)=>{switch(t){case"buffered":this.lbt=new d(e),this.To(new bc(this._g()));break;case"currentProgramDateTime":this.Eqt=new Date(e).getTime()-this._g();break;case"played":this.Ho=new d(e);break;case"seekable":this._qt();break;case"videoHeight":this.Aqt(void 0,e);break;case"videoWidth":this.Aqt(e,void 0)}},this.KY=t=>{switch(t.type){case o.If:this.Xe(t.currentTime);break;case o.Tf:this.Cf();break;case o.gm:this.To(new eq(t.representation,t.previousRepresentation));break;case o.wm:this.To(new Bn(t.segmentStartTime,t.error,t.trackType,t.track,t.quality,t.retryCount));break;case o.Yw:this.To(new _n(t.currentTime,t.initDataType,t.initData));break;case o.Xw:this.To(new ce(new ss(n.CONTENT_PROTECTION_ERROR,t.error,void 0,t.licenseAcquisitionURL,t.status,t.statusText,t.licenseAcquisitionMessage,t.systemCode)));break;case o.Gw:this.To(new Kc)}},this.vVt=t=>{this._qt(),this.vqt(),this.sh(),this.pqt(),this.Tqt(),this.fqt(),this.oqt(),this.rqt(),this.Rqt(),this.xqt(),this.Bqt(),t||cZ(this.PHt.NA)&&this.Mh()},this.Jdt=()=>{this.Tqt(),this.Bqt()},this.Fqt=t=>{this.To(t)},this.HHt=t=>{this.kqt=void 0,this.To(new aY(t))},this.Nqt=()=>{this.jl()},this.Oqt=()=>{this._8.zy()},this.Ko=t,this.FHt=e,this.PHt=i,this._8=new tZ(t,i),this.IVt=s.xVt(),this.Zl=s.vg()-this.IVt,this.Ql=s.Bg(),this.HF=s.Lg(),this.RVt=s.jg(),this.CVt=s.Gg(),this.PHt.DHt(this.KY),this.PHt.RHt(this.Mqt),this.PHt.BHt(this.vVt),this.PHt.wn(th.EHt,this.Fqt),this.PHt.OHt().then((t=>{this.To(new uY(t.bt,t.JM))}),this.HHt)}};function cZ(t){return void 0!==t&&t.playerState===chrome.cast.media.PlayerState.IDLE&&t.idleReason===chrome.cast.media.IdleReason.FINISHED}function lZ(t,e){for(const i of t.Kv)if(i.cw===e)return i}function dZ(t,e){let i=!1;for(let s=0;s<t.U;s++){const n=t.Zv(s);-1===e.indexOf(n.cw)&&(t.it(n),s--,i=!0)}return i}function fZ(t,e){let i=!1;for(const s of t){let t=lZ(e,s.trackId);t||(t=new UY(s),e.tt(t),i=!0)}return i}function _Z(t,e){for(const i of e.Kv)i.VVt=Bc(t,i.cw);return!1}var gZ=class{cl(t){return Promise.resolve("all")}uv(){}bn(){}};function vZ(t,e,i){if(j(t))return i;if(t===1/0){if("live"===i||"dvr"===i)return i;if(e&&e.length>0){if(e.end(e.length-1)-e.start(0)>60)return"dvr"}return"live"}return"vod"}var wZ=[o.Pf,o.Nf,o.Vu,o.vm,o.Ch,o.Ph,o.Rf,o.Lu,o.If,o.Tf,ee.Yf,ee.Qf,o.gm,o.wm,o.Yw,o.Xw,o.Gw],mZ=class extends Tc{aF(t){if(!t)return;Ne(this.tF&&Ru(this.tF),t&&Ru(t))||(this.tF=t,this.To(new nm(t)))}Uqt(t){if(!t)return;const e=gi(t,this.Ko.xb);Ne(this.cut&&Ru(this.cut),e&&Ru(e))||(this.Pa.DVt(0),this.cut=e,this.To(new QN(e)),this.Pa.PVt())}Hqt(t){for(const e of this.rt.Kv)if(e.cw===t)return e;for(const e of this.ht.Kv)if(e.cw===t)return e}get Dvt(){return this.Pa}set Dvt(t){const e=this.Pa;e&&(e.pn(th.EHt,this.Fqt),e.pn(th.IHt,this.Vqt),e.pn(wZ,this.Os),e.pn(ee.Bf,this.BB),t.DVt(e.xVt()),e.g8(t.O5())),this.Pa=t,this.$T.$v=t.rg(),this.eS.$v=t.Qg(),this.xu.$v=t.zg(),this._8.$v=t.O5(),e&&e.bn(),t.wn(th.EHt,this.Fqt),t.wn(th.IHt,this.Vqt),t.wn(wZ,this.Os),t.wn(ee.Bf,this.BB)}get oo(){return this.ao}get L5(){return this.O5()}O5(){return this._8}M5(){return this.ll}rg(){return this.$T}ag(){return this.Pa.ag().ws()}get Wqt(){return this.qqt||this.cut}set Wqt(t){this.qqt=t}async On(t,e){var i;t&&await this.mVt(t,null!=(i=t.ads)?i:[],t.streamType,NaN,0,null!=e?e:0)}async zqt(t){var e;const i=null!=(e=this.qqt)?e:this.cut;if(!i)return;var s;const n=this.qqt?null!=(s=this.qqt.ads)?s:[]:this.A8(),r=this.Ko.vg(),h=this.Ko.Vg(),o=vZ(r,h,i.streamType),a=h.length>0?h.start(0):0,u=null!=t?t:this.k5();await this.mVt(i,n,o,r,a,u)}A8(){const t=new _B;return this._8.g8(t),t.A8()}cg(){return this.Pa.cg()}fg(){return this.tF}get Wu(){return this._g()}set Wu(t){this.gg(t)}_g(){return this.Pa._g()}k5(){return this.Pa.k5()}gg(t){this.Xqt||(this.FHt.wVt()||this.Xqt||!this.cut?this.Pa.gc(t):this.On(this.cut,t))}vg(){return this.Pa.vg()}pg(){return this.Pa.pg()}yg(){return this.ZO}Ag(){return this.Vl}Sg(){return this.tS}Rg(){return this.Ko.Pg}Cg(){return this.UF}xg(t){this.UF=t,this.To(new Eo(this.Wu,this._l)),this.FHt.xg(t)}Bg(){return this.Pa.Bg()}Lg(){return this.Pa.Lg()}Iu(t){this.Pa.Iu(t)}Og(){return this.Pa.Og().ws()}Fg(){return D.XT}Ug(t){}Hg(){return this.Pa.Hg()}Vg(){return this.Pa.Vg().ws()}Wg(){return this.Pa.Wg()}qg(){return this.cut}async ba(t){this.cut=t,await this.On(t),this.qqt=void 0,this.Pa.PVt()}zg(){return this.xu}Gg(){return this.Pa.Gg()}jg(){return this.Pa.jg()}Qg(){return this.eS}Yg(){return this.Qx}Zg(t){this.Qx=t,this.To(new Eo(this.Wu,this._l)),this.FHt.Zg(t)}get tv(){return!1}set tv(t){}rv(){}ev(){return this.VF}uv(){}dl(){this.FHt.wVt()||this.Xqt||!this.cut?this.Pa.dl():this.On(this.cut)}jl(){this.Pa.jl()}hv(){this.ao=!0}ov(){this.tF=void 0,this.ao=!1}be(){}ke(){}async mVt(t,e,i,s,n,r){this.Xqt=!0,this.Gqt(),this.Pa.DVt(n);const h="live"===i||"dvr"===i,o=function(t,e,i){return{theoplayer_version:1,streamStart:t,isLive:e,sourceDescription:i}}(n,h,t),a={pVt:t,L5:e,Wu:w.max(0,r-n),ct:s,DQ:h?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,yVt:o};try{await this.FHt.mVt(a)}catch(t){this.Qqt(t)}finally{this.Xqt=!1}}Kqt(){this.jqt(this.$T),this.jqt(this.eS),this.Yqt(this.xu)}jqt(t){for(const e of t.Kv)this.Zqt(e);t.wn(ja.bv,(t=>{this.Zqt(t.Ht)}))}Yqt(t){for(const e of t.Kv)this.Jqt(e);t.wn(ja.bv,(t=>{this.Jqt(t.Ht)}))}Zqt(t){t.wn(Xh.BVt,this.Zyt),t.wn(Xh.LVt,this.$qt),t.wn(Xh.LVt,this.rqt)}Jqt(t){t.wn(Xh.NVt,this.tzt),t.wn(Xh.NVt,this.rqt)}ezt(){const t=[];for(const e of this.rt.Kv)e.Rt&&t.push(e.cw);for(const e of this.ht.Kv)e.Rt&&t.push(e.cw);for(const e of this.nt.Kv)e.bw===lu.Qn&&t.push(e.cw);this.Pa.VHt(t)}izt(t){var e,i;if(!t)return!1;return(null!=(i=null==(e=this.FHt.MHt())?void 0:e.version)?i:-1)>=2?t.map((t=>t.o)):[t[0].o]}szt(t){this.nzt=t}wv(){}mv(){}async xl(){this.Pa.xl(),this.Gqt()}Gqt(){this.kB=dw.zl,this.pB=!1,this.bB=!1,this.ZO=void 0,this.Vl=void 0}async bn(){this.Gqt(),this.Lo(),this.Dvt=this.rzt(),this.FHt.pn(tu.EHt,this.Fqt),this.FHt.pn(tu.nVt,this.hzt),this.FHt.pn(tu.Il,this.ozt),this.FHt.pn(tu.sVt,this.azt),this.FHt.pn(tu.rVt,this.uzt),this.FHt.bn()}rzt(){return new PY(this,this.Pa.xVt(),this.Pa._g(),this.Pa.vg(),this.Pa.pg(),this.Pa.Bg(),this.Pa.Lg(),this.Pa.jg(),this.Pa.Gg())}constructor(t,e){super(t,!0),this.ao=!1,this.nzt=Qo,this.kB=dw.zl,this.pB=!1,this.bB=!1,this.Xqt=!1,this.qqt=void 0,this.ZO=void 0,this.Vl=void 0,this.$T=new Fa,this.eS=new Fa,this.xu=new Yc,this.VF=new Lr,this.tS=new pr,this.ll=new gZ,this.ozt=t=>{var e,i;(Qf(t._l)&&!au(t._l,this.Qx,1e-5)||Qf(t.Xu)&&t.Xu!==this.UF)&&(this.Qx=null!=(e=t._l)?e:this.Qx,this.UF=null!=(i=t.Xu)?i:this.UF,this.To(new Eo(this.Wu,this.Qx)))},this.azt=()=>{const t=this.FHt.wVt();this.Dvt=t?new uZ(this,this.FHt,t,this.Pa):this.rzt()},this.Vqt=t=>{this.aF(t.bt),this.Uqt(t.JM)},this.uzt=t=>{const e=this.Hqt(t.MA);if(!e)return void 0;const i={targetQualityIds:t.oVt};e.FVt(i)},this.Fqt=t=>{this.Qqt(t.lt)},this.Qqt=t=>{this.nzt&&this.nzt(t)},this.hzt=t=>{this.ZO=t.lt,this.Vl=Ar(this.ZO),this.To(new Vo(this.Vl))},this.$qt=t=>{if(!t.enabled)return;const e=this.rt.Kv.some((e=>e.cw===t.trackId))?this.rt:this.ht;for(const i of e.Kv)i.Rt&&i.cw!==t.trackId&&(i.Rt=!1)},this.tzt=t=>{if(t.mode===lu.Qn)for(const e of this.nt.Kv)e.bw===lu.Qn&&e.cw!==t.trackId&&_y(e.Lt,t.track.Lt)&&(e.bw=lu.Th)},this.rqt=T_((()=>{this.ezt()}),50),this.Zyt=t=>{const e=this.izt(t.targetQuality),i=t.track;this.FHt.aVt(i.cw,i.PY,e)},this.BB=t=>{this.To(t);const e=t.readyState;!this.pB&&this.kB===dw.zl&&e>=dw.Jn&&(this.pB=!0,this.To(new Si(t.currentTime))),!this.bB&&this.kB<=dw.Jn&&e>=dw.Hf&&(this.bB=!0,this.To(new q(t.currentTime))),this.kB<=dw.Hf&&e>=dw._f&&this.To(new Zw(t.currentTime)),this.kB<=dw._f&&e===dw.Wl&&this.To(new tt(t.currentTime)),this.kB=e},this.Qx=this.Ko._l,this.UF=this.Ko.Xu,this.FHt=e,this.FHt.wn(tu.EHt,this.Fqt),this.FHt.wn(tu.nVt,this.hzt),this.FHt.wn(tu.Il,this.ozt),this.FHt.wn(tu.sVt,this.azt),this.FHt.wn(tu.rVt,this.uzt),this._8=new fB(this),this.tF=this.Ko.bt,this.cut=this.Ko.qg(),this.Dvt=new PY(this,0,this.Ko.k5(),this.Ko.vg(),this.Ko.Ic,this.Ko.Dc,this.Ko.$u,this.Ko.Kg,this.Ko.Xg),this.Kqt()}},pZ=class extends la{pa(){return new yZ(this.lt)}constructor(t){super("error"),this.lt=t}},yZ=class extends Xi{constructor(t){super("error"),this.error=t}},AZ=class extends Xi{constructor(t){super("statechange"),this.state=t}};function bZ(t,e){let i;return{get casting(){return t.Mz},get error(){return t.lt},get receiverName(){return t.czt},get state(){return t.Dvt},start(){t.Tn()},stop(){t.xl()},join(){t.lzt()},leave(){t.dzt()},set connectionCallback(t){null==e||e.fzt(t)},get connectionCallback(){return null==e?void 0:e._zt()},get source(){return i||t.JM},set source(e){i=e,t.JM=e},addEventListener(e,i){const s=ku(e,Oi);t.wn(s,i)},removeEventListener(e,i){const s=ku(e,Oi);t.pn(s,i)}}}var TZ=class extends Xo{get Mz(){return this.Dvt===Dh.CONNECTING||this.Dvt===Dh.CONNECTED}get lt(){return this.ZO}get ma(){return this.Gu||(this.Gu=bZ(this,this.gzt)),this.Gu}get czt(){var t;return null==(t=this.gzt.vzt())?void 0:t.bVt()}get JM(){return this.Ko?this.Ko.Wqt:this.qqt}set JM(t){this.qqt=t?gi(t,this.wzt.xb):void 0,this.Ko&&(this.Ko.Wqt=this.qqt,this.qqt&&this.Ko.On(this.qqt))}get Dvt(){return this.Pa}set Dvt(t){let e=t;this.mzt||e!==Dh.CONNECTING&&e!==Dh.CONNECTED||(e=Dh.AVAILABLE),this.Pa!==e&&(this.Pa=e,this.To(new AZ(this.Dvt)))}async pzt(){if(!this.yzt)throw new v("Chromecast must be initialized before starting a session");await this.yzt,this.gzt.vzt()||await this.gzt.Azt()}async Tn(){this.mzt=!0;try{if(this.Dvt=Dh.CONNECTING,await this.pzt(),await this.bzt(),this.Ko){const t=this.wzt.qg(),e=this.gzt.Tzt(t);this.Ko.Wqt=e?gi(e,this.wzt.xb):this.qqt,this.Ko.zqt()}this.Dvt=Dh.CONNECTED,await this.wzt.xl()}catch(t){this.Szt(!1).catch(Qo),this.Dvt=Dh.AVAILABLE,Aa(t)||this.q$(t)}}async lzt(){this.mzt=!0;try{if(this.Dvt=Dh.CONNECTING,await this.pzt(),await this.bzt(),this.Ko){const t=this.wzt.qg(),e=this.gzt.kzt(t);e&&(this.Ko.Wqt=gi(e,this.wzt.xb))}this.Dvt=Dh.CONNECTED,await this.wzt.xl()}catch(t){await this.Szt(!0).catch(Qo),this.Dvt=Dh.AVAILABLE,Aa(t)||this.q$(t)}}async Ezt(){this.gzt.vzt()&&await this.Tn()}async bzt(){null!=this.Ko||(this.Ko=this.Izt()),this.ZO=void 0,this.wzt.jl(),await this.qq.Pzt(this.Ko)}Izt(){const t=new mZ(this.wzt,this.gzt.vzt());return t.szt(this.q$),t}Rzt(){this.Ko&&(this.Ko.bn(),this.Ko=void 0)}async Szt(t){if(this.mzt=!1,!this.Ko)return;const e=this.Ko.oo,i=this.Ko.qg(),s=this.Ko.k5();try{if(e){let e;e=t?this.gzt.Czt(i):this.gzt.xzt(i),null!=e||(e=i),await this.qq.Dzt(e,e===i),this.wzt.gg(s),this.wzt.dl()}}finally{this.Rzt()}}dzt(){this.Mz&&(this.gzt.Nzt(!1),this.Szt(!0).catch(this.q$))}xl(){this.Mz&&(this.gzt.Nzt(!0),this.Szt(!1).catch(this.q$))}bn(){this.gzt.pn(pY.EVt,this.Bzt),this.Lo(),this.Rzt()}constructor(t,e,i,s){super(),this.ZO=void 0,this.Gu=void 0,this.Ko=void 0,this.Pa=Dh.UNAVAILABLE,this.mzt=!1,this.Lzt=()=>{this.gzt.wn(pY.EVt,this.Bzt),this.Dvt=this.gzt.Ozt()},this.Bzt=t=>{const e=t.Dvt;this.Dvt=e,e!==Dh.UNAVAILABLE&&e!==Dh.AVAILABLE||this.Szt(!1).catch(this.q$)},this.qqt=void 0,this.q$=t=>{t instanceof hh&&(this.ZO=t,this.To(new pZ(t).ma))},this.qq=t,this.wzt=e,this.gzt=s,this.al=i.chromecast,this.yzt=this.gzt.Jq(this.al),this.yzt.then(this.Lzt).catch(this.q$)}},SZ=class extends Xo{get Mz(){return!1}get lt(){}get czt(){}get JM(){}set JM(t){}get Dvt(){return Dh.UNAVAILABLE}get ma(){return this.Gu||(this.Gu=bZ(this)),this.Gu}lzt(){Ee.Um("Joining a Chromecast session is not possible when JoinStrategy is configured to disabled")}dzt(){Ee.Um("Leaving a Chromecast session is not possible when JoinStrategy is configured to disabled")}Tn(){Ee.Um("Starting a Chromecast session is not possible when JoinStrategy is configured to disabled")}xl(){Ee.Um("Stopping a Chromecast session is not possible when JoinStrategy is configured to disabled")}Ezt(){return Promise.resolve()}bn(){}};function kZ(t){return{Wu:t._g(),ct:t.vg(),Ic:t.Ic,lt:t.yg(),Ec:t.Ag(),Xu:t.Xu,Dc:t.Dc,$u:t.$u,Nc:t.Nc,Fc:t.Fc,Xg:t.Xg,Kg:t.Kg,_l:t._l}}var EZ=class extends Tc{O5(){return this._8}rg(){return this.$T}get Tg(){return this.Sg()}Sg(){return this.tS}zg(){return this.xu}Qg(){return this.eS}iS(t){const e=this.Ko;if(e===t)return;let i;this.F5&&(e.J_(this.Av),i=kZ(this));const s=this.fg(),n=this.ev(),r=this.rv();if(this.Ko=t,this.$T.$v=t.ht,this.eS.$v=t.rt,this.xu.$v=t.nt,this.tS.$v=t.Tg,this._8.$v=t.L5,void 0!==i){$r(this,i,kZ(this))}const h=this.fg();h!==s&&this.To(new nm(h)),this.ev()!==n&&this.To(new mc),this.rv()!==r&&this.To(new st),this.F5&&t.Q_(this.Av)}async bn(){await super.bn(),this.$T.bn(),this.eS.bn(),this.xu.bn(),this.tS.bn(),await this._8.bn()}constructor(t,e){super(t,e),this.$T=new Fa,this.eS=new Fa,this.xu=new Yc,this.tS=new Ln,this.$T.$v=t.ht,this.eS.$v=t.rt,this.xu.$v=t.nt,this.tS.$v=t.Tg,this._8=new fB(this),this._8.$v=t.L5}},IZ=class extends EZ{qg(){const t=super.qg();return!t&&this.Mzt.Mz&&this.Mzt.JM?this.Mzt.JM:t}ba(t,e){return this.qX.GN((e=>(this.Fzt=new Hi,this.Fzt.U_(e),super.ba(t,this.Fzt.M_))),e)}dl(){super.dl(),this.xb.cast.strategy!==Ag.AUTO||this.Mzt.Mz||this.Mzt.Ezt()}Pzt(t){return this.qX.GN((e=>this.Uzt(t,e)))}Dzt(t,e){return void 0===t&&(t=void 0),void 0===e&&(e=!1),this.qX.GN((i=>this.Hzt(t,e,i)))}Uzt(t,e){k_(e),this.Vzt.L5&&this.Vzt.L5.g8(t.L5),this.Wzt=t,this.iS(t),this.Wzt.hv()}async Hzt(t,e,i){k_(i);const s=this.Wzt;if(void 0!==s)try{if(t){await this.Vzt.xl(),k_(i);const s=gi(t,this.Vzt.xb);e&&(s.ads=void 0),this.Fzt=new Hi,this.Fzt.U_(i),await this.Vzt.ba(s,this.Fzt.M_)}e&&this.Vzt.L5&&s.L5.g8(this.Vzt.L5)}catch(t){B(t)}finally{s.ov(),this.iS(this.Vzt),this.Wzt===s&&(this.Wzt=void 0)}}xl(){var t;return null==(t=this.Fzt)||t.Jl(),this.qX.GN((()=>super.xl()))}async bn(){var t;null==(t=this.Fzt)||t.Jl(),this.Mzt.bn(),await this.Dzt(),await this.qX.bn(),await super.bn()}constructor(t,e){super(t),this.qX=new Uo,this.Vzt=t,this.xb.cast.strategy!==Ag.DISABLED?this.Mzt=new TZ(this,t,this.xb.cast,e):this.Mzt=new SZ,this.m5.Xz(this.Mzt)}};var PZ=new class extends Et{fzt(t){this.qzt=t}_zt(){return this.qzt}vzt(){return this.zzt}Ozt(){switch(this.Xzt.getCastState()){case cast.framework.CastState.CONNECTED:return Dh.CONNECTED;case cast.framework.CastState.CONNECTING:return Dh.CONNECTING;case cast.framework.CastState.NOT_CONNECTED:return Dh.AVAILABLE;case cast.framework.CastState.NO_DEVICES_AVAILABLE:default:return Dh.UNAVAILABLE}}async Jq(t){await rj(),this.Xzt=cast.framework.CastContext.getInstance(),this.Xzt.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,this.Gz),this.Xzt.setOptions({receiverApplicationId:t.appID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}async Azt(){try{const t=await this.Xzt.requestSession();if(t)throw t}catch(t){throw new hh(Sn(t))}}Tzt(t){var e;return null==(e=this.qzt)?void 0:e.onStart(t)}xzt(t){var e;return null==(e=this.qzt)?void 0:e.onStop(t)}kzt(t){var e;return null==(e=this.qzt)?void 0:e.onJoin(t)}Czt(t){var e;return null==(e=this.qzt)?void 0:e.onLeave(t)}Nzt(t){this.Xzt.endCurrentSession(t)}constructor(...t){super(...t),this.zzt=void 0,this.qzt=void 0,this.Gz=()=>{const t=this.Ozt();this.zzt=t===Dh.CONNECTED?new EY(this.Xzt.getCurrentSession()):void 0,this.To(new IY(t))}}},RZ=new class{get ma(){return this.Gu||(this.Gu=function(t){return{initialize(e){const i=t.Jq(Tg(e));return i.catch(Qo),i},startSession(){const e=t.Azt();return e.catch(Qo),e},endSession(){t.Gzt()}}}(this)),this.Gu}async Jq(t){this.yzt||(this.yzt=this.Qzt(t)),await this.yzt}async Qzt(t){await this.gzt.Jq(t)}async Azt(){if(!this.yzt)throw new v("Chromecast must be initialized before starting a session");await this.yzt,this.gzt.vzt()||await this.gzt.Azt()}Kzt(){this.gzt.Nzt(!1)}Gzt(){this.gzt.Nzt(!0)}constructor(t){this.yzt=void 0,this.Gu=void 0,this.gzt=t}}(PZ),CZ={get chromecast(){return RZ.ma}};VN((t=>new IZ(t,PZ)),Fs.V5);var xZ=class{jzt(t,e,i,s){t.gU.forEach((t=>{if(!this.Yzt(t.Zzt)){const n=t.Jzt(e,i,s);n&&this.$zt(n)}}))}Yzt(t){return this.tXt.get(t)}$zt(t){this.tXt.set(t.eXt,t),this.iXt.set(t.eXt,t.sXt),this.nXt.eU(t.rXt)}v8(t){this.tXt.has(t.eXt)||(this.iXt.set(t.eXt,t),this.nXt.eU(t.rXt))}hXt(t){return this.iXt.forEach(t)}oXt(t){return this.tXt.forEach(t)}aXt(t){let e=!1;return this.tXt.forEach((i=>{e=i.aXt(t)||e})),e}async bn(){const t=[];this.tXt.forEach((e=>t.push(e.bn()))),this.iXt.forEach((e=>t.push(e.bn()))),await Promise.all(t),this.tXt.clear(),this.iXt.clear()}constructor(t){this.nXt=t,this.tXt=Wn(),this.iXt=Wn()}},Zo=class t extends la{pa(){return new DZ(this._Ut,this.pC,this.LC,this.JM)}static uXt(e){return new t(xs.GENERAL,e.pC,e.vUt)}static cXt(e,i){return new t(e._Ut,e.message,e.vUt,i)}constructor(t,e,i,s){super("lXt"),this._Ut=t,this.pC=e,this.LC=i,this.JM=s}},DZ=class extends Xi{constructor(t,e,i,s){super("aderror"),this.problemType=t,this.message=e,this.errorCode=i,this.source=s}},NZ=class extends Ut{get dXt(){return this.fXt}get j5(){let t=!1;return this._Xt((e=>{t=t||e.gXt})),t}get Y5(){const t=[];return this._Xt((e=>{const i=e.Y5;i.length&&t.push(...i)})),t}get J5(){let t=null;return this._Xt((e=>{null!=t||(t=e.J5)})),t}get t8(){const t=[];return this._Xt((e=>{t.push(...e.t8)})),t}get e8(){const t=[];return this._Xt((e=>{t.push(...e.e8)})),t}g8(t){this._Xt((e=>{e.g8(t)}))}get ma(){var t;return null!=(t=this.Gu)?t:this.Gu=$N(this)}m$(t,e,i){try{this.vXt=i;const s=Gn.lC.wU(t),n=this.fXt.Yzt(s.Zzt);if(!n)throw new gt(xs.ADBLOCK,void 0,"Ads could not be loaded.");e!==Kh.s8&&this.H0||this.mXt.wXt(n),s.m$(t,e,n,this.vXt)}catch(e){0,this.To(Zo.cXt(e,t.sources))}}zy(){this._Xt((t=>{t.zy()}))}v8(t){this.fXt.v8(t)}pXt(t){this.fXt.oXt((e=>{e.pXt(t)}))}aXt(t){return this.fXt.aXt(t)}_Xt(t){return this.fXt.hXt(t)}uv(){this.fXt.oXt((t=>t.uv()))}async ir(){this.H0=!1;const t=[];this.fXt.oXt((e=>t.push(e.xl()))),await Promise.all(t)}async bn(){this.Lo(),this.mXt.pn(o.Ph,this.N6),this.pn("lXt",this.yXt),await this.fXt.bn()}constructor(t){super(),this.mXt=t,this.vXt=!1,this.H0=!1,this.Gu=void 0,this.yXt=t=>{if(!this.vXt)return;const e=new gs(Mo.ADVERTISEMENT_ERROR,t.pC),i=new jr(n.AD_BLOCKER_DETECTED,t.pC+" Turn off your AdBlocker and try again.",e);this.mXt.OM(i)},this.N6=()=>{this.H0=!0},t.wn(o.Ph,this.N6),this.fXt=new xZ(this),this.wn("lXt",this.yXt)}},BZ=class extends EZ{O5(){return this.AXt}get bXt(){return this.TXt}uv(){this.Vzt.uv(),this.AXt.uv()}dl(){void 0===this.ZO?(void 0!==this.SXt&&this.kXt(this.SXt),super.dl()):this.To(new Vo(this.ZO))}async ba(t,e){if(k_(e),await super.ba(t,e),k_(e),!t||!t.ads)return;const i=Boolean(t.blockContentIfAdError);this.AXt.pXt(t.playAdsAfterTime);for(const e of t.ads)this.AXt.m$(e,Kh.s8,i)}async xl(){this.ZO=void 0,this.ZF=void 0,await this.AXt.ir(),this.Dzt(),await super.xl()}kXt(t){this.EXt=this.Ko.$u;const e=this.Ko._l,i=this.Ko.Xu;t.Zg(e),t.xg(i),this.oF&&(this.Vzt.ke(),t.be()),this.TXt=t,this.SXt=void 0,this.iS(t)}wXt(t){void 0===this.TXt&&(this.SXt=t)}Dzt(){this.SXt=void 0,void 0!==this.TXt&&(this.Vzt.$u=this.EXt,this.Vzt._l=this._l,this.Vzt.Xu=this.Xu,this.oF&&(this.TXt.ke(),this.Vzt.be()),this.iS(this.Vzt),this.TXt=void 0)}yg(){var t;return null!=(t=this.ZF)?t:super.yg()}Ag(){var t;return null!=(t=this.ZO)?t:super.Ag()}OM(t){void 0===this.Ag()&&(this.ZO=t,this.ZF=Lt(t),this.To(new Vo(t)))}be(){this.oF=!0,super.be()}ke(){this.oF=!1,super.ke()}yv(t){return void 0===this.TXt&&this.AXt.aXt(t)}async bn(){await this.AXt.bn(),this.Dzt(),await super.bn()}constructor(t,e){super(t),this.ZO=void 0,this.ZF=void 0,this.oF=!0,this.EXt=1,this.Vzt=t,this.AXt=new NZ(this),this.AXt.dXt.jzt(e,t,this,t.xb)}};VN((t=>new BZ(t,Gn.lC)),Fs.H5);var LZ,OZ=0!==fh.UR?fh.UR:fh.YP,MZ=fh.KP&&OZ<12,FZ=class extends Tc{get Wu(){return this._g()}set Wu(t){this.gg(t)}k5(){return this.Ko.k5()}get ct(){return this.vg()}get Tg(){return this.tS}get kl(){return this.Vg()}get Jg(){return this.iM}get rXt(){return this.IXt}get ht(){return this.$T}get gXt(){return this.mXt.bXt===this}ag(){return d.Nl().ws()}cg(){}dg(t){}Lg(){return 1}Iu(t){}Og(){return new d([0,this.Wu]).ws()}Wg(){return!1}zg(){return this.xu}Qg(){return this.eS}cs(){return this.ev().cs}ev(){return this.VF}_a(){}async bn(){this.Lo(),this.$T.bn(),this.eS.bn(),this.xu.bn(),this.IXt.bn(),this.Ko.pn(o.Qw,this.Os)}PXt(){MZ&&this.RXt(),this.gXt||this.mXt.kXt(this)}Dzt(){this.gXt&&(MZ&&this.CXt(),fh.sC&&this.je.querySelectorAll("video[src]").forEach((t=>{t.src=""})),Ee.Zs.u9&&this.Ko.mv(),this.mXt.Dzt())}RXt(){this.xXt||(fa.addEventListener("blur",this.DXt),fa.addEventListener("focus",this.NXt),this.xXt=!0)}CXt(){fa.removeEventListener("blur",this.DXt),fa.removeEventListener("focus",this.NXt),this.xXt=!1}BXt(){requestAnimationFrame((()=>this.Ko.ke()))}constructor(t,e){super(t,!0),this.mXt=e,this.xXt=!1,this.eS=new mi,this.$T=new mi,this.xu=new gn,this.tS=new pr,this.IXt=new Ut,this.VF=new Lr,this.iM=new fe,this.DXt=()=>{this.Ko.be()},this.NXt=()=>{this.BXt()},this.Ko.wn(o.Qw,this.Os)}},UZ=0,HZ="theoplayer-wrapper",VZ=class t{get LXt(){return this.OXt}get MXt(){return this.FXt}get UXt(){return this.HXt}VXt(t){const e=this.WXt===t.timeOffset;return!this.qXt&&e}get zXt(){return this.XXt}get GXt(){return wY(this.QXt)&&!this.qXt}get WXt(){return this.QXt}get sE(){return this.KXt}jXt(){if(j(this.KXt)){let t=this.WXt;if(void 0===t)return void(this.KXt=0);if("string"==typeof t&&wY(t)){const e=this.Ko.vg();j(e)||e===1/0||(t=gj(t)*e)}j(t)||(this.KXt=t)}}get YXt(){return this.ZXt}set YXt(t){this.ZXt=t}get JXt(){return this.$Xt}set JXt(t){this.$Xt=t,this.tGt=!1}get eGt(){return this.iGt}sGt(t){this.iGt.push(t)}nGt(){if(!this.qXt){let t,e;const i=this.OXt===Kh.s8&&void 0===this.rGt&&1===this.FXt.length,s=this.FXt[0];fY(s.sources.type)||i?t=s.sources.src:e=this.hGt(),this.qXt={oGt:this.Ko.je.offsetWidth,aGt:this.Ko.je.offsetHeight,uGt:this.Ko.je.offsetWidth,cGt:this.Ko.je.offsetHeight,lGt:this.Rl,dGt:this.UF,fGt:t,_Gt:e,gGt:s.omidAccessModeRules}}return this.qXt}hGt(){return'<vmap:VMAP xmlns:vmap="http://www.iab.net/videosuite/vmap" version="1.0">'+this.FXt.map(((t,e)=>this.vGt(t.sources,e))).join("\n")+"</vmap:VMAP>"}vGt(t,e){const i=this.wGt(),s=t.src;return'<vmap:AdBreak timeOffset="'+i+'" breakType="linear,nonlinear" breakId="theoplayer-break-'+this.cw+"-"+e+'"><vmap:AdSource allowMultipleAds="true" followRedirects="true"><vmap:VASTAdData><VAST version="3.0"><Ad id="'+HZ+"-"+this.cw+"-"+e+'"><Wrapper allowMultipleAds="true" followAdditionalWrappers="true"><VASTAdTagURI><![CDATA['+s+"]]></VASTAdTagURI></Wrapper></Ad></VAST></vmap:VASTAdData></vmap:AdSource></vmap:AdBreak>"}wGt(){if(0===this.WXt)return"start";if(this.WXt===1/0)return"end";const t=this.WXt;if("string"==typeof t&&wY(t)){const e=gj(t)*this.Ko.vg();return ge.eHt(e)}return ge.eHt(this.WXt||0)}mGt(t){this.FXt.push(t)}pGt(t){const e=HZ+"-"+this.cw+"-";for(const i of t)if(Jo(i,e)){const t=Number(i.slice(e.length));if(!j(t)&&t>=0&&t<this.FXt.length)return t}return-1}static yGt(t){if(void 0!==t)return-1===t?1/0:t}AGt(){this.XXt=!0}get ol(){return this.Rl}set ol(t){this.Rl=t}get Xu(){return this.UF}set Xu(t){this.UF=t}constructor(e,i,s,n){this.OXt=i,this.Ko=s,this.HXt=n,this.KXt=NaN,this.ZXt=!1,this.$Xt=!1,this.XXt=!1,this.iGt=[],this.Rl=!1,this.UF=!1,this.FXt=[],this.cw=++UZ,this.rGt=e.timeOffset,this.QXt=t.yGt(this.rGt),this.jXt(),this.FXt.push(e)}},WZ=class{get bGt(){return this.TGt.bGt}get SGt(){return this.TGt.SGt}get t8(){return this.TGt.t8}get t(){return this.TGt.t}pXt(t){this.kGt=t}EGt(t){return!(this.bGt&&!this.bGt.zXt&&"nonlinear"!==this.SGt.IGt)||this.bGt.sE>t.sE&&this.bGt.sE!==t.sE}PGt(t){if(t.length)return t.sort(((t,e)=>t.sE-e.sE))[0]}RGt(){if(this.t8.length)return this.PGt(this.CGt(this.t._g()))}xGt(){if(!(void 0!==this.kGt&&this.kGt>=0))return this.t8.filter((t=>!t.YXt&&0===t.sE&&t!==this.bGt))[0]}CGt(t){if(!this.DGt&&(this.DGt=!this.t8.some((t=>j(t.sE))),!this.DGt))return[];const e=this.t8.filter((e=>!e.YXt&&!j(e.sE)&&t<=e.sE));return void 0===this.kGt?e:e.filter((t=>void 0===t.WXt||t.sE>this.kGt))}constructor(t){this.DGt=!1,this.TGt=t,this.kGt=void 0}};!function(t){t[t.NGt=0]="NGt",t[t.BGt=1]="BGt",t[t.LGt=2]="LGt"}(LZ||(LZ={}));var $,qZ,yu,nu,zZ=class{uv(){this.ko=!0,this.OGt&&this.MGt()}FGt(t,e){this.UGt(t,e);const i=pi(this.t8,(e=>e.VXt(t)));if(i)i.mGt(t);else{var s;const i=new VZ(t,e,this.Ko,null==(s=t.replaceContent)||s);this.HGt.push(i),2===this.VGt&&this.qGt.WGt(i.sE,i,i.WXt),this.zGt(e,i)}}get SGt(){return this.XGt}get t8(){return this.HGt}get t(){return this.Ko}get GGt(){return Boolean(this.cvt)}get VGt(){return this.QGt}KGt(){if(me(this.t8,this.bGt),this.bGt){for(const t of this.bGt.eGt)this.qGt.jGt();this.bGt=void 0}}YGt(){for(const t of this.HGt)for(const e of t.eGt)this.qGt.ZGt(e,!0);Ce(this.HGt)}async JGt(t){this.KGt(),this.$Gt=!0,this.bGt=t,this.tQt=t.sE,this.cvt=this.eQt(t),await this.cvt,this.cvt=void 0}async eQt(t){this.iQt(t);const e=t.nGt(),i=this.XGt.sQt(e);t.YXt=!0;try{await i,t.LXt===Kh.i8&&this.XGt.nQt()}catch(t){0,this.bGt=void 0,await this.MGt()}}iQt(t){this.ko?t.ol=!0:t.ol=this.mXt.ol,t.Xu=this.mXt.Xu}rQt(){var t;return null!=(t=this.hQt.xGt())?t:this.hQt.RGt()}async MGt(){if(this.bGt&&!this.bGt.zXt)return this.cvt;const t=this.rQt();t&&await this.JGt(t)}get bGt(){return this.oQt}set bGt(t){this.oQt=t}get $Gt(){return this.aQt}set $Gt(t){this.aQt=t}ir(){this.KGt(),Ce(this.HGt),this.tQt=0,this.bGt=void 0,this.cvt=void 0,this.$Gt=!1}JXt(){this.$Gt=!1,this.bGt&&(this.bGt.JXt=!0)}async zGt(t,e){t===Kh.i8&&this.ko&&this.hQt.EGt(e)&&!this.GGt&&"linear"!==this.XGt.IGt&&(!this.bGt||this.bGt&&this.bGt.YXt)&&(await Promise.resolve(),await this.JGt(e))}AGt(){this.bGt&&this.bGt.AGt()}get uQt(){if(this.GGt||this.$Gt)return!1;if(this.bGt&&!this.bGt.zXt)return!1;return!!this.HGt.filter((t=>this.bGt!==t)).length&&Boolean(this.rQt())}async cQt(){if(!this.uQt)return void 0;const t=this.rQt();t&&await this.JGt(t)}UGt(t,e){const i=t.sources.type,s=e===Kh.s8&&void 0===t.timeOffset,n=fY(i)||s?1:2;n!==this.QGt&&(this.QGt=n,this.YGt(),this.XGt.$Vt&&!this.GGt&&"linear"!==this.XGt.IGt&&(this.XGt.$Vt.Ou(),this.bGt=void 0,this.cvt=void 0),this.tQt=0,this.OGt=!0)}pXt(t){this.hQt.pXt(t)}bn(){this.Ko.pn(o.Nf,this.Ff)}constructor(t,e,i,s,n){this.QGt=0,this.cvt=void 0,this.aQt=!1,this.Ff=()=>{const t=this.HGt.filter((t=>t.GXt));for(const e of t){e.jXt();const t=e.WXt;this.qGt.lQt(t,e.sE)}this.ko&&this.uQt&&this.MGt()},this.HGt=[],this.XGt=t,this.ko=!1,this.OGt=!1,this.Ko=e,this.mXt=i,this.bGt=void 0,this.tQt=0,this.hQt=new WZ(this),this.ll=s,this.qGt=n,this.Ko.wn(o.Nf,this.Ff)}};function XZ(t,e){if(t===$.dQt){const t=e;return{fQt:t.adBreakDuration,_Qt:t.adPosition,Wu:t.currentTime,ct:t.duration,gQt:t.totalAds}}return e}function GZ(t){switch(t){case google.ima.AdError.Type.AD_LOAD:return nu.vQt;case google.ima.AdError.Type.AD_PLAY:return nu.wQt}}function QZ(t){return Th(t)&&function(t){return"function"==typeof t}(t.getVastErrorCode)}function KZ(t){const e=t.getInnerError(),i=e&&QZ(e)?KZ(e):void 0;return{pC:t.getMessage(),vUt:t.getErrorCode(),mQt:t.getVastErrorCode(),Iw:GZ(t.getType()),pQt:i}}function jZ(t){if(Qf(t))return t}!function(t){t.yQt="contentResumeRequested",t.AQt="contentPauseRequested",t.bQt="click",t.Nf="durationChange",t.TQt="expandedChanged",t.SQt="start",t.kQt="impression",t.Rm="pause",t.EQt="resume",t.dQt="adProgress",t.IQt="adBuffering",t.PQt="firstQuartile",t.MFt="midpoint",t.RQt="thirdQuartile",t.FFt="complete",t.CQt="userClose",t.xQt="linearChanged",t.DQt="loaded",t.NQt="adCanPlay",t.BQt="adMetadata",t.LQt="adBreakReady",t.OQt="interaction",t.MQt="allAdsCompleted",t.FQt="skip",t.UQt="skippableStateChanged",t.HQt="log",t.VQt="viewableImpression",t.WQt="volumeChange",t.qQt="mute"}($||($={})),(qZ||(qZ={})).zQt="adError",function(t){t[t.XQt=-1]="XQt",t[t.GQt=-1]="GQt",t[t.QQt=-1]="QQt",t[t.KQt=101]="KQt",t[t.jQt=102]="jQt",t[t.YQt=200]="YQt",t[t.ZQt=201]="ZQt",t[t.JQt=202]="JQt",t[t.$Qt=300]="$Qt",t[t.tKt=301]="tKt",t[t.eKt=302]="eKt",t[t.iKt=303]="iKt",t[t.sKt=400]="sKt",t[t.nKt=402]="nKt",t[t.rKt=403]="rKt",t[t.hKt=405]="hKt",t[t.oKt=500]="oKt",t[t.aKt=501]="aKt",t[t.uKt=-1]="uKt",t[t.cKt=503]="cKt",t[t.lKt=602]="lKt",t[t.dKt=900]="dKt",t[t.fKt=901]="fKt",t[t._Kt=1005]="_Kt",t[t.gKt=1007]="gKt",t[t.vKt=1009]="vKt",t[t.wKt=1010]="wKt",t[t.mKt=1011]="mKt",t[t.pKt=1012]="pKt",t[t.yKt=1013]="yKt",t[t.AKt=1020]="AKt",t[t.bKt=1021]="bKt",t[t.TKt=1101]="TKt",t[t.SKt=1204]="SKt",t[t.kKt=1205]="kKt",t[t.EKt=1300]="EKt",t[t.IKt=-1]="IKt",t[t.PKt=-1]="PKt",t[t.RKt=-1]="RKt",t[t.CKt=-1]="CKt"}(yu||(yu={})),function(t){t.vQt="adLoadError",t.wQt="adPlayError"}(nu||(nu={}));var ei,YZ,ZZ=class extends Et{xKt(t){this.XGt.To(t)}DKt(t){this.tWt=t,this.tWt.wn(qZ.zQt,this.NKt),this.tWt.wn($.AQt,this.BKt),this.tWt.wn($.yQt,this.LKt),this.tWt.wn($.MQt,this.OKt),this.tWt.wn($.SQt,this.MKt),this.tWt.wn($.FFt,this.FKt),this.tWt.wn($.FQt,this.UKt),this.tWt.wn($.CQt,this.HKt),this.tWt.wn($.bQt,this.VKt),this.tWt.wn($.NQt,this.WKt),this.tWt.wn($.Rm,(()=>{this.XGt.Dc||(this.XGt.qKt(!0),this.XGt.To(new mt(this.XGt.Wu))),this.zKt(!0)})),this.tWt.wn($.EQt,(()=>{this.XGt.Dc&&(this.XGt.qKt(!1),this.XGt.To(new ds(this.XGt.Wu)))})),this.tWt.wn($.qQt,(()=>{const e=t.Yg();e>=0&&this.XKt(e)})),this.tWt.wn($.WQt,(()=>{const e=t.Yg();e>=0&&this.XKt(e)})),this.tWt.wn($.BQt,(t=>{this.QKt.GKt(t.type)})),this.tWt.wn($.Nf,(t=>{t.o8&&this.KKt(t.o8.ct)})),this.tWt.wn($.HQt,(async t=>{const e=t.jKt.adError,i=QZ(e)?KZ(e):void 0;i&&(this.YKt(i)?await this.ZKt(t):this.JKt(i)?await this.$Kt(i):this.tjt(i)&&this.ejt(i))})),this.tWt.wn($.DQt,(t=>{if(t.o8&&(this.XGt.JXt(),this.QKt.ijt(t.o8),this.sjt=0,t.o8.njt)){var e;const t=this.XGt.Nc,i=dw.zl;this.XGt.XZ(i);const s=this.XGt.Wu,n=this.XGt.Nc;n!==t&&this.xKt(new $a(s,n)),null==(e=this.tWt)||e.Zg(this.XGt.rjt()),this.xKt(new Si(s,i))}})),this.tWt.wn([$.IQt,$.kQt,$.PQt,$.MFt,$.RQt],(t=>{t.o8&&this.QKt.hjt(t.o8,t.type,this.XGt.Wu)})),this.tWt.wn($.PQt,this.ojt),this.tWt.wn($.dQt,this.ajt)}async switchToPlayerIfNoNextAd(){if(this.tWt){const t=this.tWt.ujt();t&&this.cjt(t)||(this.XGt.uQt()?await this.XGt.cQt():(this.XGt.ljt(),this.Ko.Dc&&!this.Ko.Ic&&this.Ko.dl()))}else if(this.XGt.uQt())await this.XGt.cQt();else{const t=this.XGt.Dc;this.XGt.ljt(),t||this.Ko.dl()}}cjt(t){const e=t.djt,i=null==e?void 0:e.gQt;return(null==e?void 0:e._Qt)!==i}aZ(){this.XGt.fjt&&(nl(this.XGt.fjt),this.XGt.fjt=null)}tjt(t){return t.Iw===nu.vQt}JKt(t){return t.Iw===nu.wQt}YKt(t){return t.vUt===yu.vKt}async $Kt(t){var e;this.ejt(t);const i=[yu.sKt,yu.fKt,yu.bKt,yu.kKt];var s;this.XGt.y8||Bc(i,t.vUt)||Bc(i,null==(e=t.pQt)?void 0:e.vUt)||(this.XGt._jt.$Gt=!1,null==(s=this.XGt._jt.bGt)||s.AGt(),await this.switchToPlayerIfNoNextAd())}ejt(t){this.XGt.gjt(t)}async vjt(){this.QKt.jGt(),this.XGt.AGt(),"nonlinear"===this.XGt.IGt&&(this.QKt.wjt(-1,!1),this.XGt.mjt(void 0)),"nonlinear"!==this.XGt.IGt&&"none"!==this.XGt.IGt||this.XGt.uQt()&&await this.XGt.cQt(),this.XGt.pjt(),this.XGt.gXt?this.XGt.Dzt():this.yjt()&&this.Ko.To(new ih(this.Ko._g()))}yjt(){return this.XGt.Ajt&&!this.XGt.bjt&&this.Ko.Ic}setCountdownTimer(){this.aZ(),this.XGt.fjt=sl((()=>this.zKt()),250)}async ZKt(t){void 0!==t.o8&&(this.XGt._jt.$Gt=!1,this.XGt.AGt(),this.XGt.uQt()?await this.XGt.cQt():this.XGt.qKt(!0))}KKt(t){this.XGt.ct!==t&&t>=0&&(this.XGt.EZ(t),this.xKt(new oa(this.XGt.ct)))}XKt(t){this.XGt.rjt()!==t&&(0===t?this.XGt.Tjt(t,!0,!1):this.XGt.Tjt(t,!1,!1))}async Sjt(){this.XGt.kjt&&void 0!==this.Ko.yg()&&(this.Ejt=new Hi,await this.Ko.ba(this.Ko.qg(),this.Ejt.M_),this.Ijt&&this.Ko.gg(this.Ijt),this.Ijt=void 0)}zKt(t){if(this.tWt){const t=this.tWt.Pjt();t>this.XGt.ct&&this.KKt(w.round(t))}const e=this.XGt.Wu;(t||!this.XGt.Dc&&e!==this.XGt.Rjt)&&(this.XGt.To(new hc(e,void 0)),this.XGt.Rjt=e)}ir(){this.Ejt&&(this.Ejt.Jl(),this.Ejt=void 0),this.Cjt=!1,this.sjt=0}bn(){this.ir(),this.Lo()}constructor(t,e,i){super(),this.XGt=t,this.Ko=e,this.QKt=i,this.Cjt=!1,this.Ejt=void 0,this.Ijt=void 0,this.sjt=0,this.ojt=t=>{if(!t.o8||!t.o8.djt)return;const e=t.o8.djt;this.QKt.xjt(e.vEt,e.gQt,e.ZVt)},this.ajt=t=>{var e,i,s;if(this.sjt>=5)return;this.sjt++;const n=t.jKt;if(!function(t){return Th(t)&&void 0!==t.fQt&&void 0!==t.gQt}(n))return;const r=null==(e=null==(i=this.tWt)?void 0:i.ujt())||null==(s=e.djt)?void 0:s.vEt;void 0!==r&&this.QKt.xjt(r,n.gQt,n.fQt)},this.NKt=async t=>{t.jKt.Djt&&await this.$Kt(t.jKt.Djt)},this.OKt=async()=>{this.Cjt=!0,this.XGt.AGt(),await this.LKt()},this.MKt=t=>{if(!t.o8)return;const e=t.o8;this.XGt.mjt(e),this.XGt.be(),this.XGt.Njt(),this.QKt.Bjt(e);const i=e.ct;if(this.KKt(i),e.njt){const t=this.XGt.Wu,e=this.XGt.Nc;this.XGt.XZ(dw._f),this.xKt(new q(t,e)),this.xKt(new Zw(t,e)),this.xKt(new tt(t,e)),this.XGt.Dc||this.xKt(new _a(this.XGt.Wu)),this.setCountdownTimer(),this.zKt(!0)}else this.XGt.Dzt(),this.Ko.be(),this.XGt.Dc||this.Ko.dl()},this.FKt=t=>{var e;if(!t.o8)return;const i=t.o8;if(this.aZ(),this.QKt.wjt(this.XGt.ct,i.njt),this.XGt.Nc!==dw.zl){const t=dw.zl;this.XGt.XZ(t);const e=this.XGt.Wu;this.xKt(new $a(e,t))}this.KKt(NaN),this.XGt.Ljt=!1,null==(e=this.tWt)||e.Zg(this.XGt.rjt())},this.UKt=t=>{t.o8&&(this.FKt(t),this.QKt.UKt(t.o8,this.XGt.Wu,this.XGt.ct))},this.HKt=t=>{t.o8&&(this.QKt.wjt(-1,t.o8.njt),this.XGt.AGt(),!t.o8.njt&&this.XGt.uQt()&&this.XGt.cQt())},this.VKt=t=>{t.o8&&(t.o8.njt?this.XGt.jl():this.Ko.jl())},this.WKt=()=>{var t;(this.XGt.Ljt=!0,this.XGt.Ojt)&&(null==(t=this.tWt)||t.jl(),this.XGt.Ojt=!1)},this.BKt=t=>{var e;if(!t.o8)return;this.XGt.kjt&&(this.Ijt=this.Ko._g(),this.Ko.wv(),this.Ko.tv=!0),this.XGt.Mjt=!0;const i=t.o8;this.QKt.Fjt(i);const s=i.ct;this.XGt.mjt(i),this.KKt(s),this.XGt.qKt(!1),this.XGt.be(),this.XGt.PXt(),this.XGt.kjt||this.Ko.ke(),this.Ko.jl(),this.XGt.Ujt(i);0===(null==(e=i.djt)?void 0:e.vEt)||this.XGt.To(new ki(this.XGt.Wu))},this.LKt=async t=>{const e=null==t?void 0:t.o8;this.XGt.Mjt=!1,"linear"===this.XGt.IGt&&this.QKt.Hjt(),e&&e.ct>=0&&this.KKt(e.ct),this.Ko.vg()===1/0&&this.XGt.Vjt(),this.XGt.Ljt=!1,this.Cjt&&await this.vjt(),this.XGt.qKt(!0);try{await this.Sjt()}catch(t){return void(Aa(t)||this.To(new mK(t)))}if(this.XGt.Dzt(),this.XGt.ke(),this.Ko.Ic||this.Ko.dl(),e&&this.XGt.mjt(e),this.XGt.Ajt){if(this.XGt.kjt){var i;const t=this.Ko.rv(),e=null==(i=this.Ko.bt)?void 0:i.src;t&&e&&(t.src=e)}this.XGt.bjt=!0}this.Ko.tv=!1,this.XGt.uQt()&&await this.XGt.cQt()}}},JZ=class extends pc{get L5(){return this._8}get ZVt(){return this.Wjt}set ZVt(t){this.Wjt=t}get JVt(){return this.qjt}set JVt(t){this.qjt=t}set vEt(t){this.cHt=t}get vEt(){return this.cHt}zjt(){this.Xjt=!0}Gjt(t){this._8.push(t)}get wl(){return this.Xjt}constructor(t,e,i){super(),this.Wjt=t,this.qjt=e,this.cHt=i,this._8=[],this.Xjt=!1}},$Z=class extends JZ{get YVt(){return br.XVt}constructor(t,e,i){super(-1,-1,t),this.Qjt=e,this.Kjt=i}};!function(t){t.TUt="linear",t.SUt="nonlinear",t.YT="unknown"}(ei||(ei={})),function(t){t.NONE="none",t.READY="ready"}(YZ||(YZ={}));var kc=class extends WY{jjt(t,e,i,s,n,r){this.wS=t,this.oc=e,this.uc=i,this.Zl=s,this.IMt=n,this.SFt=r,this.Yjt="ready"}get Zjt(){return this.Yjt}get EMt(){return this.IMt}get ct(){return this.Zl}Z5(){var t;return null!=(t=this.Gu)?t:this.Gu=this.pa()}get Ci(){return this.uc}get o(){return this.wS}get TFt(){return this.SFt}get Ti(){return this.oc}get IGt(){return this.Jjt}get QMt(){}_Wt(){return""}mWt(){return""}wWt(){return""}constructor(t,e){super(),this.Jjt=e,this.wS=void 0,this.SFt=void 0,this.oc=void 0,this.uc=void 0,this.Zl=void 0,this.IMt=[],this.Yjt="none",this.n8=t}};function tJ(t){return{adSystem:void 0,creativeId:void 0,universalAdIds:[],get readyState(){return t.Zjt},get adBreak(){return t.n8.Z5()},get duration(){return t.ct},get companions(){return t.EMt.map((t=>t.Z5()))},get clickThrough(){return t.QMt},get width(){return t.Ti},get type(){return t.IGt},get height(){return t.Ci},get id(){return t.o},get skipOffset(){return t.TFt},get integration(){return t.YVt}}}var eJ=class{get FMt(){return this.UMt}get XMt(){return""}get $jt(){return this.tYt}get QMt(){return this.KMt}get Ci(){return this.uc}get iUt(){return this.eYt}get Ti(){return this.oc}Z5(){return this.Gu||(this.Gu=function(t){return{get adSlotId(){return t.FMt},get altText(){return t.XMt},get contentHTML(){return t.$jt},get clickThrough(){return t.QMt},get height(){return t.Ci},get resourceURI(){return t.iUt},get width(){return t.Ti}}}(this)),this.Gu}iYt(t){const e=function(t){try{return Bj(t,"text/html")}catch(t){return}}(t.O);e&&(this.KMt=iJ(e,"a","href"),this.eYt=iJ(e,"img","src"))}constructor(t){this.Gu=void 0,this.KMt=void 0,this.eYt=void 0,this.oc=t.Ti,this.uc=t.Ci,this.tYt=t.O,this.UMt=t.FMt,this.iYt(t)}};function iJ(t,e,i){const s=t.querySelector(e);return s&&s.getAttribute(i)||""}var sJ=class extends kc{pa(){return function(t,e){return oe(t,{get adSystem(){return e.GOt},get apiFramework(){return e.sYt},get bitrate(){return e.nYt},get contentType(){return e.rM},get creativeId(){return e.wMt},get mediaUrl(){return e.rYt},get title(){return e.uM},get traffickingParameters(){return e.hYt},get traffickingParametersString(){return e.oYt},get wrapperAdIds(){return e.aYt},get wrapperAdSystems(){return e.uYt},get wrapperCreativeIds(){return e.cYt},get universalAdIds(){return e.sMt}})}(tJ(this),this)}lYt(t){this.dYt=t,this.jjt(t.lFt,t.fYt,t._Yt,t.ct,function(t){return t.eMt.map((t=>new eJ(t)))}(t),t.gYt),this.Jjt=t.njt?ei.TUt:ei.SUt}get YVt(){return br.XVt}get GOt(){return this.dYt?yc(this.dYt.GOt):void 0}get sYt(){return this.dYt?yc(this.dYt.OMt):void 0}get nYt(){return this.dYt?this.dYt.vYt:0}get rM(){return this.dYt?yc(this.dYt.rM):void 0}get wMt(){return this.dYt?yc(this.dYt.wMt):void 0}get wYt(){return this.dYt?yc(this.dYt.wYt):void 0}get rYt(){var t;const e=null==(t=this.dYt)?void 0:t.rYt;return Qf(e)?e:this.mYt}set rYt(t){this.mYt=t}get uM(){var t;return null==(t=this.dYt)?void 0:t.uM}get hYt(){return this.dYt?yc(this.dYt.hYt):void 0}get oYt(){return this.dYt?yc(this.dYt.oYt):void 0}get aYt(){var t,e;return null!=(e=null==(t=this.dYt)?void 0:t.aYt)?e:[]}get uYt(){var t,e;return null!=(e=null==(t=this.dYt)?void 0:t.uYt)?e:[]}get cYt(){var t,e;return null!=(e=null==(t=this.dYt)?void 0:t.cYt)?e:[]}get sMt(){var t,e;return null!=(e=null==(t=this.dYt)?void 0:t.sMt.map((t=>({adIdRegistry:t.pYt,adIdValue:t.yYt}))))?e:[]}constructor(t){super(t,ei.YT),this.dYt=void 0,this.mYt=void 0}};function yc(t){return null===t?void 0:t}var nJ=class{get rXt(){return this.QKt.rXt}get eXt(){return this.AYt}get gXt(){return this.QKt.gXt}get J5(){var t;return null!=(t=this.QKt.J5)?t:null}get Y5(){const t=this.QKt.bYt;return t?[t]:[]}get t8(){return this.QKt.t8}get e8(){return this.QKt.e8}g8(t){this.QKt.g8(t)}zy(){this.QKt.zy()}bn(){return Promise.resolve()}constructor(t,e){this.QKt=t,this.AYt=e}},rJ=class{get TYt(){return this.SYt}get rXt(){return this.IXt}get gXt(){return this.kYt}get bYt(){return this.gWt}get J5(){return this.AWt}get t8(){return Ga(this.bWt,(t=>{if(t.wl)return[];const e=t.L5;if(t===this.AWt&&void 0!==this.gWt){const t=e.indexOf(this.gWt);if(t>=0)return e.slice(t+1)}return e}))}get e8(){return this.bWt.filter((t=>!t.wl))}constructor(t,e){this.IXt=t,this.bWt=[],this.kYt=!1,this.SYt=new nJ(this,e)}},hJ=class extends Lh{pa(){return new oJ(this.o8.Z5())}constructor(t){super("EYt",t)}},oJ=class extends va{constructor(t){super("adimpression",t)}},aJ=class extends Lh{pa(){return new uJ(this.o8.Z5(),this.currentTime)}constructor(t,e){super("IYt",t),this.currentTime=e}},uJ=class extends va{constructor(t,e){super("adfirstquartile",t),this.currentTime=e}},cJ=class extends Lh{pa(){return new lJ(this.o8.Z5(),this.currentTime)}constructor(t,e){super("PYt",t),this.currentTime=e}},lJ=class extends va{constructor(t,e){super("admidpoint",t),this.currentTime=e}},dJ=class extends Lh{pa(){return new fJ(this.o8.Z5(),this.currentTime)}constructor(t,e){super("RYt",t),this.currentTime=e}},fJ=class extends va{constructor(t,e){super("adthirdquartile",t),this.ad=t,this.currentTime=e}},uu=class extends Lh{pa(){return new _J(this.o8.Z5(),this.CYt)}get CYt(){return this.xYt}constructor(t,e){super("DYt",t),this.xYt=e}},_J=class extends va{constructor(t,e){super("adskip",t),this.playedPercentage=e}},gJ=class extends $n{pa(){return new vJ(this.n8.Z5())}constructor(t){super("NYt",t)}},vJ=class extends ur{constructor(t){super("updateadbreak",t)}},wJ=class extends la{pa(){return new mJ(this.o8.Z5())}constructor(t){super("BYt"),this.o8=t}},mJ=class extends Xi{constructor(t){super("adbuffering"),this.ad=t}},pJ=class extends la{pa(){return new yJ}constructor(){super("LYt")}},yJ=class extends Xi{constructor(){super("admetadata")}},AJ=class t extends rJ{OYt(t,e){for(let i=0;i<t;i++){const t=new sJ(e);e.Gjt(t),this.rXt.To(new rB(t))}}WGt(t,e,i){let s=t;s===1/0&&(s=-1);const n=new $Z(s,i,e);this.bWt.push(n),e.sGt(n),this.rXt.To(new sB(n))}lQt(t,e){for(const i of this.bWt)j(i.vEt)&&i.Qjt===t&&(i.vEt=e,this.rXt.To(new gJ(i)))}ZGt(t,e){void 0===e&&(e=!1),e&&me(this.bWt,t),this.rXt.To(new eB(t))}jGt(){if(this.J5){this.ZGt(this.J5,!0);const t=Boolean(this.gWt&&this.gWt.IGt===ei.TUt);this.MYt(void 0,t)}}FYt(t,e){const i=e.djt;if(!i)return;const s=i._Qt-1,n=t.L5[s];return n.lYt(e),this.rXt.To(new ec(n)),n.n8.ZVt=i.ZVt,n}get gXt(){return this.UYt.gXt}HYt(t){if(!Bc(this.VYt,t)){if(t){if(this.gWt===t)return;this.gWt=t;for(const e of this.WYt)this.GKt(e,t,this.UYt.Wu)}else{if(!this.gWt)return;const t=new Eh(this.gWt,this.gWt.n8.vEt);this.VYt.push(this.gWt),this.gWt=void 0,this.IXt.To(t)}Ce(this.WYt)}}MYt(t,e){if(t){var i;if((null==(i=this.J5)?void 0:i.vEt)===t.vEt)return;this.AWt=t,e&&this.rXt.To(new qc(this.AWt))}else{if(!this.AWt)return;const t=new To(this.AWt);this.AWt=void 0,Ce(this.VYt),e&&this.IXt.To(t)}}qYt(t){return this.bWt.filter((e=>au(e.vEt,t,.01)))[0]}static zYt(t,e){if(e.djt)return t.L5[e.djt._Qt-1]}Fjt(t){if(!t.djt)return;const e=t.djt,i=this.qYt(e.vEt);i&&(Ce(this.WYt),this.MYt(i,t.njt))}Hjt(){this.J5&&this.rXt.To(new To(this.J5)),Ce(this.WYt),this.jGt()}Bjt(e){if(!this.AWt&&e.djt){const t=this.qYt(e.djt.vEt);this.MYt(t,e.njt)}if(this.AWt){const i=t.zYt(this.AWt,e);if(!i)return;this.FYt(this.AWt,e);const s=e.rYt;Qf(s)&&!Qf(i.rYt)&&(i.rYt=s,this.rXt.To(new ec(i))),this.HYt(i),this.rXt.To(new vr(this.gWt,i.n8.vEt))}else 0}wjt(t,e){if(this.HYt(void 0),!e&&this.J5){const t=this.J5;this.MYt(void 0,!1),this.ZGt(t)}}ijt(t){const e=t.djt;if(!e)return;const i=this.qYt(e.vEt);if(!i)return;this.xjt(e.vEt,e.gQt,e.ZVt);const s=this.FYt(i,t);s&&this.rXt.To(new JY(s))}xjt(t,e,i){const s=this.qYt(t);if(!s)return;const n=s.L5.length;if(e>n){const t=e-n;this.OYt(t,s),s.ZVt=i,this.rXt.To(new gJ(s))}}UKt(e,i,s){if(!this.AWt)return;const n=t.zYt(this.AWt,e);if(n){const t=i/s;this.rXt.To(new uu(n,t))}}hjt(e,i,s){if(!this.AWt)return;let n=this.gWt;if(!n){const s=t.zYt(this.AWt,e);if(!s||Bc(this.VYt,s))return void this.WYt.push(i);n=s,this.FYt(this.AWt,e),this.HYt(n)}this.GKt(i,n,s)}GKt(t,e,i){t===$.BQt?this.rXt.To(new pJ):t===$.kQt&&e?this.rXt.To(new hJ(e)):t===$.IQt&&e?this.rXt.To(new wJ(e)):t===$.PQt&&e&&i?this.rXt.To(new aJ(e,i)):t===$.MFt&&e&&i?this.rXt.To(new cJ(e,i)):t===$.RQt&&e&&i&&this.rXt.To(new dJ(e,i))}zy(){this.UYt.zy()}g8(t){this.UYt.g8(t)}ir(){const t=Boolean(this.gWt&&this.gWt.IGt===ei.TUt);this.HYt(void 0),this.MYt(void 0,t);for(const t of this.bWt)this.ZGt(t);Ce(this.bWt),Ce(this.WYt),Ce(this.VYt)}bn(){this.ir()}constructor(t,e){super(t,br.XVt),this.UYt=e,this.WYt=[],this.VYt=[]}};function bJ(t){const e=a.google.ima.settings;t.ads&&t.ads.vpaidMode&&a.google.ima.settings.setVpaidMode(function(t){const e=a.google.ima.ImaSdkSettings.VpaidMode;switch(t){case cw.ENABLED:return e.ENABLED;case cw.INSECURE:return e.INSECURE;case cw.DISABLED:default:return e.DISABLED}}(t.ads.vpaidMode)),e.setPlayerVersion("6.10.1"),e.setPlayerType("THEOplayer"),e.setAutoPlayAdBreaks(!0),e.setDisableCustomPlaybackForIOS10Plus(!TJ(t));const i=function(t){const e=t.ui&&t.ui.language;return"string"==typeof e?e:void 0}(t);i&&e.setLocale(i)}function TJ(t){return fh.KP&&t.allowNativeFullscreen}var SJ=class t extends FZ{get sXt(){return this.qGt.TYt}get XYt(){return this.qGt}get _jt(){return this.TGt}get kjt(){return TJ(this.eX)}GYt(t,e,i){e===Kh.s8&&void 0!==i&&(this.vXt=i),this.TGt.FGt(t,e)}static get eXt(){return br.XVt}get eXt(){return t.eXt}get QYt(){return this.eX.ads.preload===lw.MIDROLL_AND_POSTROLL}g8(t){const e=this.KYt();for(const i of e)vj(i.sources,i.timeOffset)||t.m$(i,Kh.i8,!1)}KYt(){const t=[],{Y5:e,t8:i}=this.sXt,s=[];for(const n of e.concat(i)){const e=n.n8.Kjt;if(Bc(s,e.cw))continue;const i=e.pGt(n.aYt);i>=0?t.push(...e.MXt.slice(i)):t.push(...e.MXt),s.push(e.cw)}for(const e of this.TGt.t8)e.YXt||t.push(...e.MXt);return l_(t)}set IGt(t){this.Jjt=t}get IGt(){return this.Jjt}get $Vt(){return this.tWt}set $Vt(t){this.tWt=t,this.jYt=!1}_g(){if(!this.$Vt)return 0;const t=this.$Vt.Pjt();return j(this.ct)||t<0?0:this.ct-t}gg(t){}vg(){return this.Zl||NaN}EZ(t){this.Zl=t}Cg(){return this.Ko.Xu}xg(t){this.Tjt(this._l,t,!0)}Bg(){return this.Ql}qKt(t){this.Ql=t}get Ljt(){return this.YYt}set Ljt(t){this.YYt=t}get y8(){return this.vXt}get Ajt(){return this.ZYt}get Ojt(){return this.JYt}set Ojt(t){this.JYt=t}get bjt(){return this.$Yt}set bjt(t){this.$Yt=t}Gg(){var t,e,i;return null!=(i=null==(t=null==(e=this.$Vt)?void 0:e.ujt())?void 0:t._Yt)?i:0}jg(){var t,e,i;return null!=(i=null==(t=null==(e=this.$Vt)?void 0:e.ujt())?void 0:t.fYt)?i:0}og(){return[]}pXt(t){this.kGt=t,this.TGt.pXt(t)}nQt(){!this.jYt&&this.$Vt&&(this.$Vt.Tn(),this.jYt=!0)}mjt(t){this.IGt=t?t.njt?"linear":"nonlinear":"none"}Vg(){return d.Nl().ws()}Yg(){return this.Ko._l}Zg(t){this.Tjt(t,this.Xu,!0)}rjt(){return this.Ko.Xu?0:this.Ko._l}Tjt(t,e,i){const s=this.Ko._l!==t||this.Ko.Xu!==e;s&&(this.Ko._l=t,this.Ko.Xu=e),this.$Vt&&i&&this.$Vt.Zg(this.rjt()),s&&this.To(new Eo(this.Wu,this._l))}pg(){return!1}yg(){if(this.tZt&&this.vXt)return this.tZt}Ag(){if(this.eZt&&this.vXt)return this.eZt}Hg(){return this.tf}XZ(t){this.tf=t,this.To(new Qs(this.Wu,t))}get Mjt(){return this.iZt}set Mjt(t){this.iZt=t}uv(){this.Ko.pn(o.Ph,this.sZt),this.ko||(this.ko=!0,this.TGt.uv(),this.Njt())}async dl(){if(this.nZt)return;this.rZt.Jl(),this.rZt=new Hi;const t=this.Dc;this.qKt(!1),this.To(new ds(this.Wu)),this.hZt()||(this.kjt||this.Ko.ke(),this.To(new ki(this.Wu))),this.Ljt||(this.Ojt=!1);const e=Boolean(this.$Vt);this.nZt=this.TGt.MGt();try{await this.nZt}finally{this.nZt=void 0}try{k_(this.rZt.M_)}catch(t){return}if(this.ko||this.sZt(),!this.tZt||!this.vXt)if(this.$Vt){if(t)if(e)try{k_(this.rZt.M_),this.$Vt.oZt(),this.To(new _a(this.Wu))}catch(t){return}else this.nQt()}else this.vXt||(this.Dzt(),this.mXt.dl())}jl(){var t;this.Dc||(this.qKt(!0),this.To(new mt(this.Wu))),this.rZt.Jl(),this.Ljt?null==(t=this.$Vt)||t.jl():this.Ojt=!0}zy(){var t;null==(t=this.$Vt)||t.zy()}pjt(){this.$Vt&&(this.uZt.aZt(),this.$Vt.xl(),this.$Vt.Ou(),this.$Vt=void 0,this.IGt="none",this.jYt=!1)}async xl(){var t;this.Rjt=0,this.TGt.ir(),this.rZt.Jl(),this.qKt(!0),this.ZYt=!1,this.$Yt=!1,this.Ljt=!1,this.qGt.ir(),this.pjt(),this.ljt(),null==(t=this.cZt)||t.ir(),this.Ojt=!1,this.uZt.Ou()}be(){this.lZt.be(),this.kjt&&this.Ko.be()}ke(){this.lZt.ke()}dZt(){return Boolean(this.$Vt)&&Bc(this.$Vt.fZt(),-1)&&!this.ZYt}JXt(){this.TGt.JXt()}uQt(){return this.TGt.uQt}AGt(){this.TGt.AGt()}cQt(){return this.TGt.cQt()}aXt(t){if(this.dZt()){if(t.type===o.Ch&&this.Ko.Ic)return!0;if(t.type===o.Pf)return this.ZYt=!0,this.uZt.aZt(),!0}return!1}hZt(){return Boolean(this.$Vt&&this.$Vt.ujt())}async sQt(t){try{this.pjt();const e=this._Zt();this.lZt.Jq(),this.$Vt=await this.uZt.sQt(t,this.cZt,e),this.gZt(this.$Vt)}catch(t){this.vZt.$Kt(t)}}gZt(t){if(t.Zg(this.rjt()),this.TGt.VGt===LZ.BGt){const e=t.fZt();if(e.length)for(const t of e)this.qGt.WGt(t,this.TGt.bGt);else this.qGt.WGt(this.TGt.bGt.sE,this.TGt.bGt)}this.vZt.ir(),this.vZt.DKt(t)}rv(){if(this.tWt&&this.kjt&&this.hZt())return this.Ko.rv()}ev(){return this.kjt&&this.gXt?this.Ko.wa:super.ev()}_Zt(){const t=this.TGt.VGt===LZ.BGt,e=!(!this.wZt||!t)&&this.QYt;let i,s;this.eX.ads.showCountdown||(i=[]),void 0!==this.eX.ads.allowedMimeTypes&&(s=this.eX.ads.allowedMimeTypes);return{mZt:s,pZt:i,yZt:e,nYt:this.eX.ads.googleIma.bitrate,AZt:void 0,bZt:this.kGt}}Njt(){if(!this.wZt&&!this.Xu&&(this.wZt=!0,this.tWt)){const t=this._Zt();this.tWt.TZt(t)}}gjt(t){this.tZt=new gs(Mo.ADVERTISEMENT_ERROR,t.pC),this.eZt=new jr(n.AD_ERROR,"There was a problem playing ads.",this.tZt),this.rXt.To(Zo.uXt(t))}ljt(){this.gXt&&(this.Ko.be(),this.Dzt(),this.ke())}Vjt(){var t;if(this.Ko._g()===1/0||0===this.Ko.Vg().length)return;(null==(t=this.TGt.bGt)?void 0:t.UXt)&&-1!==this.SZt&&(this.Ko.gg(this.Ko._g()+this.SZt),this.SZt=-1)}Ujt(t){var e,i;this.SZt=null!=(i=null==(e=t.djt)?void 0:e.ZVt)?i:-1}Dzt(){super.Dzt(),this.Ko.be(),this.kjt&&!this.Ko.Ic&&this.Ko.dl()}BXt(){this.kjt||super.BXt()}async bn(){this.vZt.pn(zn.aa,this.kZt),await super.bn(),this.pjt(),this.uZt.pn("EZt",this.IZt),this.uZt.Ou(),this.lZt.Ou(),this.TGt.bn(),this.vZt.bn()}constructor(t,e,i,s,n,r,h){super(t,e),this.ko=!1,this.vXt=!1,this.tZt=void 0,this.eZt=void 0,this.SZt=-1,this.Jjt="none",this.iZt=!1,this.wZt=!1,this.jYt=!1,this.rZt=new Hi,this.YYt=!1,this.JYt=!1,this.IZt=t=>{this.rXt.To(t)},this.kZt=t=>{this.tZt=new gs(Mo.ADVERTISEMENT_ERROR,"Error while recovering from failed IMA ad.",t.error.message),this.eZt=Ar(this.tZt)},this.Rjt=NaN,this.sZt=()=>{this.ko||this.uv()},this.eX=i,this.Ql=!0,this.Zl=NaN,this.tf=dw.zl,this.ZYt=!1,this.$Yt=!1,this.qGt=new AJ(this.rXt,this),this.vZt=new ZZ(this,this.Ko,this.qGt),this.vZt.wn(zn.aa,this.kZt),this.Ko.wn(o.Ph,this.sZt),this.TGt=new zZ(this,this.Ko,this.mXt,s,this.qGt),this.cZt=h,this.uZt=r,this.lZt=n,this.ke(),this.uZt.wn("EZt",this.IZt)}},mu=class{registerWebImaAdPlayerConstructor(t){this.PZt=t}createAdPlayer(t,e,i){return function(){const t=Boolean(fa.google&&fa.google.ima);if(t){return!(1===g.keys(fa.google.ima).length&&fa.google.ima.dai)}return!1}()&&this.PZt?this.PZt(t,e,i):void 0}};mu.lC=new mu;Gn.lC.pU(new class{get Zzt(){return SJ.eXt}mU(t){return t&&t.integration===S.GOOGLE_IMA}Jzt(t,e,i){return mu.lC.createAdPlayer(t,e,i)}m$(t,e,i,s){i.GYt(t,e,s)}uH(t){const e=_Y(t.sources);if(!e)return;const i={integration:S.GOOGLE_IMA,sources:e,omidAccessModeRules:jZ(t.omidAccessModeRules)},s=vY(t.timeOffset);return void 0!==s&&(i.timeOffset=s),i}});var kJ=class extends la{pa(){return new EJ}constructor(){super("yWt")}},EJ=class extends Xi{constructor(){super("adloaded")}},IJ=-1,PJ=class{get eWt(){return this.bWt}get RZt(){return this.CZt}get ret(){return this.q8}get xZt(){return this.QXt}get DZt(){return this.NZt}get sE(){if(j(this.BZt)){const t=ge.sHt(this.QXt,this.rWt.t.vg());void 0===t||j(t)||(this.BZt=t)}return this.BZt}LZt(){return this.q8<this.bWt.length}KVt(){let t;return this.q8<this.bWt.length&&(t=this.bWt[this.q8],this.q8++),t}OZt(t){t.NUt=this,this.bWt.push(t)}async MZt(t){let e=!1;for(const i of this.bWt)try{await i.On(),e=!0}catch(e){0,me(this.bWt,i);const s=i.m8.sources,n="string"==typeof s?s:s.src;t.To(Zo.cXt(e,n))}return this.NZt=!0,e}uWt(){this.aWt=!0}oWt(){return this.aWt}FZt(){return this.bWt.some((t=>VY(t).some((t=>t.$Ot))))}constructor(t,e){this.bWt=[],this.aWt=!1,this.QXt=t,this.q8=0,this.rWt=e,this.BZt=NaN,this.NZt=!1,this.CZt=new zY(this,this.rWt)}},RJ=class t extends Xo{get UZt(){let t=0;for(const e of this.HZt)e.oWt()||(t+=1);return t}VZt(){this.qZt.WZt()}Tn(){this.Eo(),this.zZt.wn("d8",this.qZt.XZt)}Pn(){this.Oo(),this.zZt.pn("d8",this.qZt.XZt),this.fZ=this.US,this.qZt.ir();for(const t of this.HZt)t.uWt();Ce(this.HZt)}Eo(){this.GZt||(this.Ko.wn(o.Lu,this.QZt),this.GZt=!0)}Oo(){this.GZt&&(this.Ko.pn(o.Lu,this.QZt),this.GZt=!1)}get t8(){return this.HZt}KZt(){return this.jZt(new hc(IJ,void 0))}YZt(t){return this.ZZt(t,0,0).length>0}JZt(t,e){let i,s=0;for(const n of this.HZt){if(n.oWt())continue;const r=n.sE;r>=t&&r<=e&&r>=s&&!j(r)&&(i=n,s=i.sE)}return i}$Zt(t){return this.jZt(new hc(t,void 0))}tJt(){if(!this.eJt&&void 0!==this.kGt){this.eJt=!this.HZt.some((t=>j(t.sE)));for(const t of this.HZt)t.sE!==IJ&&t.sE<=this.kGt&&!t.oWt()&&t.uWt()}}iJt(t){for(const e of t)e.uWt();this.TXt.sJt(t),0===this.UZt&&this.Oo()}ZZt(t,e,i){return this.HZt.filter((s=>{if(s.oWt())return!1;const n=s.sE;return this.nJt(n,t)||this.rJt(n,t,e,i)}))}nJt(t,e){switch(e){case 0:return 0===t;case IJ:return t===IJ;default:return!1}}rJt(t,e,i,s){if(t<0)return!1;const n=t-e;return-1!==n&&n<=i&&n>=-s}hJt(e){if(e&&e.length>0){for(const i of e){const e=t.yGt(i.vEt);let s=this.tyt(i);-1===s&&(this.eJt=void 0===this.kGt,this.HZt.push(new PJ(e,this.oJt)),s=this.HZt.length-1);this.HZt[s].OZt(i)}this.Eo()}}static yGt(t){switch(t){case"start":case"00:00:00":case"00:00:00.000":case"0%":case"0":return"0";case"end":case"100%":return"-1";default:return t}}tyt(e){const i=t.yGt(e.vEt);return rs(this.HZt,(e=>i===t.yGt(e.xZt)))}aJt(t){me(this.HZt,t)}pXt(t){this.kGt=t,this.eJt=void 0===t}constructor(t,e,i,s){super(),this.eJt=!1,this.QZt=t=>M(this.jZt(t)),this.jZt=async t=>{this.tJt();const e=t.currentTime,i=t.currentTime!==IJ?this.JZt(this.fZ,t.currentTime):this.ZZt(t.currentTime,0,0)[0];let s,n;const r=this.Ko.vg()-10;if(n=this.YZt(IJ)&&w.ceil(e)===w.ceil(r)?this.ZZt(IJ,10,0).filter((t=>!t.DZt)):this.ZZt(e,10,0).filter((t=>!t.DZt)),n.length){const t=(await Promise.all(n.map((t=>t.MZt(this.zZt))))).some((t=>!0===t));t&&this.To(new kJ),(!t||!this.qZt.uJt||n[0].sE<this.qZt.uJt.sE)&&(s=n[0])}i&&(i!==this.qZt.uJt&&(s=i),this.iJt([i])),s&&(this.qZt.XZt(),this.qZt.uJt=s,await this.qZt.WZt()),j(this.Ko.vg())||(this.fZ=t.currentTime)},this.Ko=t,this.TXt=e,this.oJt=new qY(this.TXt,this.Ko),this.kGt=void 0,this.eJt=!1,t.vg()!==1/0?this.US=0:this.US=t._g(),this.fZ=this.US,this.HZt=[],this.zZt=i,this.qZt=s,this.GZt=!1}},CJ=class extends Xo{get cJt(){return this.Cqt}get rXt(){return this.IXt}lJt(){this.dJt(),this.fJt(),this.ZO=void 0}_Jt(t){this.gJt=this.gJt.concat(t)}vJt(t){this.wJt=this.wJt.concat(t)}fJt(){this.gJt=[]}dJt(){this.wJt=[]}mJt(t){for(const e of this.gJt)e.JFt===t&&En(e.eventURL)}be(){this.cJt.style.display=""}ke(){this.cJt.style.display="none"}bn(){this.Lo(),this.IXt.Lo(),dt(this.Cqt)}constructor(t,e){super(),this.wJt=[],this.gJt=[],this.ZO=void 0,this.IXt=new Xo,this.pJt=t=>{t.stopPropagation(),this.yJt()},this.yJt=()=>{for(const t of this.wJt)for(const e of t.ZMt)En(e.uri)},this.Cqt=h.createElement("div"),this.Cqt.style.display="none",this.AJt=t,this.bJt=e}};function xJ(t,e){let i=e;if(!function(t){return"ui"in t}(t))return i;const s=t.ui.language;let n;if(mh(s)){const e=t.ui.languages;if(!e)return i;n=e[s]}else n=s;return n&&n[e]&&(i=n[e]),i}var DJ={[ra.qm]:1,[ra.zm]:2,[ra.Xm]:2};function NJ(t,e){const i=e?e.map((t=>t.toLowerCase())):e;return Jh(t.filter((t=>{const e=t.type.toLowerCase();return!!Os(i)&&-1!==i.indexOf(e)&&Zj(e)})),((t,e)=>DJ[t.type]-DJ[e.type])).map(BJ)}function BJ(t){return Ew({src:t.contentURL,type:t.type,isAdvertisement:!0})}function LJ(t,e){return $H(OJ(t),OJ(e))}function OJ(t){return{Ci:t.height,Ti:t.width}}function MJ(t,e,i,s){const n=function(t,e,i,s){let n,r=1/0;const h=t.filter((t=>!Zj(t.type))).filter((t=>void 0===s||-1!==s.indexOf(t.type)));if(h.length){for(const t of h){const s=(w.abs(t.width/e-1)+w.abs(t.height/i-1))/2;s<r&&(r=s,n=t)}return BJ(n||h.sort(LJ)[0])}}(t,e.width,e.height,i),r=NJ(t,i);return n&&r.push(n),gi({sources:r},s)}var Ic,FJ=class extends CJ{get TJt(){return this.SJt}get Wu(){return this.kJt.Wu}get ct(){let t=this.kJt.ct;return j(t)&&this.gFt&&(t=this.gFt.ct||0),t}get Ic(){return this.kJt.Ic}get Xu(){return this.kJt.Xu}set Xu(t){this.kJt.Xu=t,t?this.mJt(ba.EFt):this.mJt(ba.IFt)}get Dc(){return this.kJt.Dc}get Nc(){return this.kJt.Nc}get _l(){return this.kJt._l}set _l(t){this.kJt._l=t}get Xg(){return this.kJt.Xg}get Kg(){return this.kJt.Kg}get EJt(){return this.IJt}dl(){this.kJt.Dc&&(this.kJt.dl(),this.To(new ds(this.Wu)),this.SJt&&this.mJt(ba.PFt),this.SJt=!0)}jl(){this.kJt.Dc||(this.kJt.jl(),this.To(new mt(this.Wu)),this.mJt(ba.Ch))}async xl(){var t;null==(t=this.QN)||t.Jl(),this.QN=void 0,this.ke(),this.SJt=!1,this.PJt=!0,this.RJt(),this.CJt(),await this.xJt()}DJt(t){void 0===t&&(t=!0),this.SJt=!1,t&&this.mJt(ba.FFt),this.ke(),this.bJt()}NJt(){var t;const e=null==(t=this.TXt.ka)?void 0:t.mi,i=new aZ(this.E0,e);return this.cJt.appendChild(i.je),i.wn("zy",this.BJt),i}LJt(){this.gFt&&this.gFt.cFt.QMt&&(this.Dqt=new sZ(this.cJt),this.Dqt.FWt=this.gFt.cFt.QMt,this.Dqt.wn("clickstart",this.OJt),this.Dqt.wn("click",this.yJt))}MJt(t,e){for(const i of this.gJt)if(i.JFt===ba.Rf){const s=zj(i.Au,e);void 0!==s&&this.fZ<s&&s<=t&&En(i.eventURL)}}async FJt(){if(!this.gFt||!this.UJt)return;const t=MJ(this.gFt.yFt,this.UJt,this.al.ads.allowedMimeTypes,this.al);if(!t.sources.length)return await this.kJt.ir(),this.AJt(""),void this.gFt.AMt();this.QN=new Hi,this.PJt=!0,await this.kJt.ba(t,this.QN.M_),this.kJt.be(),this.gFt.AMt(),this.LJt()}async HJt(t,e,i){this.IJt=t,this.gFt=t.$Ot,this.kJt.wn(o.Lu,this.VJt),this.kJt.wn(o.Nf,this.WJt),this.kJt.wn(o.Il,this.qJt),this.kJt.wn(cc,this.Os),this.gFt.hMt&&0!==this.gFt.hMt.length&&this._Jt(this.gFt.hMt),this.gFt.cFt&&this.vJt(this.gFt.cFt),this.ZO=e,this.UJt=i,0!==this.gFt.yFt.length&&(this.kJt.wn(zn.aa,this.zJt),await this.FJt(),this.kJt.wn(o.Pf,this.XJt),this.kJt.wn(o.Lu,this.GJt),this.kJt.wn(ee.Qf,this.QJt),this.kJt.wn(o.vm,this.Os))}XHt(){this.TJt&&this.KJt&&this.BJt()}get KJt(){return this.gFt&&-1!==this.gFt.TFt&&this.kJt.Wu>=this.gFt.TFt}jJt(){this.mJt(ba.Yot),this.IJt&&this.rXt.To(new vr(this.IJt,this.Wu))}async xJt(){this.kJt.pn(zn.aa,this.zJt),this.kJt.pn(o.Pf,this.XJt),this.kJt.pn(o.Lu,this.GJt),this.kJt.pn(ee.Qf,this.Os),this.kJt.pn(ee.Qf,this.QJt),this.kJt.pn(o.vm,this.Os),this.kJt.pn(o.Lu,this.VJt),this.kJt.pn(o.Nf,this.WJt),this.kJt.pn(o.Il,this.qJt),this.kJt.pn(cc,this.Os),this.IJt&&(this.IJt.uWt(),this.rXt.To(new Eh(this.IJt,this.Wu))),this.YJt(),this.lJt(),this.RJt(),this.CJt(),this.IJt=void 0,this.gFt=void 0,this.UJt=void 0,await this.kJt.ir(),this.kJt.ke(),this.cJt.style.cursor="",this.ZJt=0,this.fZ=-1,this.JJt&&(this.$Jt.xJt(),this.JJt=!1)}YJt(){this.Dqt&&(this.Dqt.Ou(),this.Dqt=void 0)}CJt(){this.t$t&&(dt(this.t$t),this.t$t=void 0)}RJt(){this.Lqt&&(this.Lqt.bn(),this.Lqt=void 0)}e$t(){this.JJt=!0}i$t(){var t;this.t$t||(this.t$t=h.createElement("div"),this.t$t.className="theoplayer-ad-overlay-component theo-ad-remaining-container",this.cJt.appendChild(this.t$t));const e=null==(t=this.IJt)?void 0:t.n8;if(!e)return;const i=e.L5.filter(jY);let s=xJ(this.al,"The content will play in")+" "+w.round(e.JVt)+" "+xJ(this.al,"seconds");if(i.length>1){const t=i.filter((t=>t.oWt())).length;s+=". "+xJ(this.al,"Ad")+" "+(t+1)+"/"+i.length}$t(this.t$t,s)}constructor(t,e,i,s,n,r,h){super(t,e),this.$Jt=i,this.al=s,this.TXt=n,this.E0=r,this.kJt=h,this.SJt=!1,this.ZJt=0,this.fZ=-1,this.QN=new Hi,this.PJt=!0,this.XJt=()=>{this.DJt()},this.QJt=()=>{this.QN=void 0,this.SJt||(this.jJt(),this.SJt=!0),this.PJt&&(this.PJt=!1,this.TXt.VZt()),this.cJt.style.display="block",this.kJt.pn(ee.Qf,this.QJt),this.SJt=!0},this.GJt=()=>{const t=this.Wu,e=this.ct,i=t/e;(0===this.ZJt&&i>=.25?(this.mJt(ba.LFt),this.ZJt=1):1===this.ZJt&&i>=.5?(this.mJt(ba.MFt),this.ZJt=2):2===this.ZJt&&i>=.75&&(this.mJt(ba.OFt),this.ZJt=3),this.MJt(t,e),this.i$t(),this.fZ=t,this.gFt)&&(-1!==this.gFt.TFt&&this.gFt.TFt<this.gFt.ct&&(null!=this.Lqt||(this.Lqt=this.NJt()),this.Wu<this.gFt.TFt?this.Lqt.JWt(this.gFt.TFt-this.Wu):this.Lqt.tqt()))},this.zJt=()=>{var t,e;this.QN=void 0,this.kJt.pn(zn.aa,this.zJt),this.PJt=!0,null==(t=this.ZO)||t.fUt(Xt.aUt),this.SJt=!1,this.kJt.ke();const i=(null==(e=this.kJt.bt)?void 0:e.src)||"";this.AJt(i)},this.VJt=()=>{this.Os(new hc(this.Wu,void 0))},this.WJt=()=>{this.Os(new oa(this.ct))},this.qJt=()=>{this.Os(new Eo(this.Wu,this._l))},this.OJt=()=>{this.TXt.jl()},this.BJt=()=>{this.IJt&&(this.mJt(ba.CFt),this.rXt.To(new uu(this.IJt,this.Wu/this.ct)),this.DJt(!1))},this.cJt.className="theoplayer-ad-linear",this.cJt.style.zIndex="10",ha(this.cJt),this.kJt.ke(),this.JJt=!1}},UJ=class t extends Et{get je(){return this.Hs}eqt(){this.je.addEventListener("mouseup",this.iqt),this.je.addEventListener("touchend",this.iqt),this.je.addEventListener("mousedown",this.s$t)}$Wt(){this.je.removeEventListener("mouseup",this.iqt),this.je.removeEventListener("touchend",this.iqt),this.je.removeEventListener("mousedown",this.s$t)}static lr(){const t=h.createElement("div");return t.className="theoplayer-ad-nonlinear-close",t.style.position="absolute",t.style.right="0",t.style.top="0",t.style.cursor="pointer",t.style.fontSize="1.7em",t.style.lineHeight="0.75em",t}bn(){this.$Wt(),dt(this.Hs)}constructor(){super(),this.iqt=t=>{this.To(new Xi("zy")),this.s$t(t)},this.s$t=t=>{t.stopPropagation()},this.Hs=t.lr(),this.eqt()}},HJ=class extends CJ{get n$t(){return this.r$t}get h$t(){return this.o$t}lJt(){super.lJt(),this.cJt&&kh(this.cJt)}async HJt(t,e,i){this.vWt&&this.xJt(),this.r$t=t,this.vWt=t.tMt,0!==this.vWt.hMt.length&&this._Jt(this.vWt.hMt),this.ZO=e,0!==this.vWt.nMt.length&&(this.vJt(this.vWt.nMt[0]._Mt),this.cJt.addEventListener("error",this.a$t),this.cJt.addEventListener("load",this.u$t),await this.FJt(),this.c$t())}XHt(){var t;if(void 0!==this.l$t)return;const e=null==(t=this.vWt)?void 0:t.nMt[0];e&&e.n8&&-1!==e.n8.TFt&&(this.mJt(ba.CFt),this.rXt.To(new uu(this.r$t,0)),this.d$t())}jJt(){void 0!==this.r$t&&this.rXt.To(new vr(this.r$t,this.TXt.Wu))}xl(){this.xJt(),this.r$t=void 0,this.vWt=void 0}xJt(){this.f$t(),void 0!==this.r$t&&(this.r$t.uWt(),this.rXt.To(new Eh(this.r$t,this.TXt.Wu))),this.lJt(),this._$t(),void 0!==this.l$t&&(c(this.l$t),this.l$t=void 0)}f$t(){this.cJt.removeEventListener("load",this.u$t),this.cJt.removeEventListener("error",this.a$t)}async FJt(){const t=h.createElement("div");t.className="theoplayer-ad-nonlinear-content",t.style.position="relative",t.style.display="inline-block";const e=this.vWt.nMt[0],i=h.createElement("a");if(e._Mt.QMt&&(i.href=e._Mt.QMt,i.target="qWt",i.setAttribute("rel","noopener")),e.cMt){const t=e.cMt,s=h.createElement("iframe");s.src=t.iUt,i.appendChild(s)}else if(e.aMt){const t=e.aMt,s=h.createElement("img");s.src=t.iUt,i.appendChild(s)}else if(e.dMt){const t=e.dMt,s=h.createElement("iframe");s.src=t.iUt,i.appendChild(s)}e.AMt(),i.addEventListener("mousedown",this.pJt),i.addEventListener("touchend",this.pJt),this.cJt.firstChild&&(kh(this.cJt),this.xJt()),t.appendChild(i),this.cJt.appendChild(t),this.be()}c$t(){var t;if(!this.vWt)return;const e=null==(t=this.vWt.nMt[0].n8)?void 0:t.TFt;void 0!==e&&-1!==e&&(this.l$t=fa.setTimeout(this.g$t,1e3*e))}_$t(){this.o$t&&(this.o$t.pn("zy",this.v$t),this.o$t.bn()),this.o$t=void 0}get w$t(){return this.TXt.m$t()}constructor(t,e,i){super(t,e),this.u$t=()=>{this.f$t(),this.mJt(ba.qFt),this.bJt()},this.a$t=t=>{var e,i;this.f$t(),null==(e=this.ZO)||e.fUt(Xt.cUt);const s=null==(i=this.vWt)?void 0:i.nMt[0];var n,r;const h=null!=(r=null!=(n=null==s?void 0:s.cMt)?n:null==s?void 0:s.aMt)?r:null==s?void 0:s.dMt;var o;this.AJt(null!=(o=null==h?void 0:h.iUt)?o:"")},this.d$t=()=>{this.ke(),kh(this.cJt),this.bJt(),this.r$t=void 0,this.vWt=void 0},this.g$t=()=>{this.o$t||(this.l$t=void 0,this.o$t=new UJ,this.cJt.children[0].appendChild(this.o$t.je),this.o$t.wn("zy",this.v$t))},this.v$t=()=>{this.mJt(ba.CFt),this.XHt()},this.cJt.className="theoplayer-ad-nonlinear",this.cJt.style.position="absolute",this.cJt.style.width="100%",this.cJt.style.bottom="3em",this.cJt.style.zIndex="10",this.cJt.style.textAlign="center",this.TXt=i}},VJ=class extends $n{pa(){return new WJ(this.n8.Z5())}constructor(t){super("p$t",t)}},WJ=class extends ur{constructor(t){super("adbreakchange",t)}},qJ=class{static async y$t(t,e,i){let s=[],n=t.shift();for(;n;){try{const t=await(new sY).IUt(n,e);s=s.concat(t)}catch(t){0;const e=Zo.cXt(t,n.sources.src);i.To(e)}n=t.shift()}return s}},zJ=class extends la{pa(){return new XJ}constructor(){super("Idt")}},XJ=class extends Xi{constructor(){super("statechange")}};!function(t){t.IDLE="idle",t.LOADING="loading",t.DONE="done",t.ERROR="error",t.EVICTED="evicted"}(Ic||(Ic={}));var GJ=class{get A$t(){return this.EC}get U(){return this.EC.length}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}Zv(t){return this.EC[t]}fS(t){this.EC.push(t),this.Gu&&this.Gu.push(t.ma),this.b$t(t)}T$t(t){for(const e of t)this.fS(e)}S$t(t,e){e>=0&&e<=this.EC.length&&(this.EC.splice(e,0,t),this.Gu&&this.Gu.splice(e,0,t.ma),this.b$t(t))}_S(t){return Bc(this.EC,t)}Qu(t){this.k$t(this.EC.indexOf(t))}k$t(t){if(!(t>=0&&t<this.EC.length))return;const e=this.EC[t];hn(this.EC,t),this.Gu&&hn(this.Gu,t),this.E$t(e)}NC(){const t=this.EC.slice();Ce(this.EC),this.Gu&&Ce(this.Gu);for(const e of t)this.E$t(e)}constructor(){this.EC=[],this.Gu=void 0}},QJ=class extends GJ{pa(){return function(t){const e=function(t){const e=t.A$t.map((t=>t.ma));return e.item=e=>{const i=0|e,s=t.Zv(i);return s&&s.ma||void 0},e}(t),i=new wi(t,e);return e.addEventListener=(t,e)=>{i.wn(t,e)},e.removeEventListener=(t,e)=>{i.pn(t,e)},e}(this)}wn(t,e){this.I$t.wn(t,e)}Q_(t){this.I$t.Q_(t)}Lo(){this.I$t.Lo()}To(t){this.I$t.To(t)}pn(t,e){this.I$t.pn(t,e)}Z_(t){this.I$t.Z_(t)}J_(t){this.I$t.J_(t)}eg(t,e){return this.I$t.eg(t,e)}constructor(...t){super(...t),this.I$t=new Xo,this.Os=t=>{this.To(t)}}};var KJ,jJ=class extends Xi{constructor(t){super("addtask"),this.task=t}},YJ=class extends la{pa(){return new jJ(this.P$t.ma)}constructor(t){super("R$t"),this.P$t=t}},ZJ=class extends Xi{constructor(t){super("removetask"),this.task=t}},JJ=class extends la{pa(){return new ZJ(this.task.ma)}constructor(t){super("C$t"),this.task=t}},$J=class extends QJ{b$t(t){this.To(new YJ(t))}E$t(t){this.To(new JJ(t))}constructor(){super()}};!function(t){t.UNINITIALISED="uninitialised",t.INITIALISED="initialised"}(KJ||(KJ={}));var t$=class extends Et{async uv(){await this.x$t(),this.qdt("initialised")}async x$t(){try{await this.D$t()}catch(t){0}}async D$t(){const t=await this.Pat.ctt();for(const e of t){const t=this.B$t.N$t(e.id,e.sourceDescription,e.parameters,this.L$t);this.O$t(t),this.KN.fS(t),await t.M$t}}get SI(){return this.Wdt}qdt(t){this.Wdt=t,this.To(new zJ)}get F$t(){return this.KN}N$t(t,e,i){void 0===i&&(i="persistent");const s=this.B$t.U$t(t,e,i);return this.H$t(s,i),this.KN.fS(s),this.O$t(s),s}async H$t(t,e){try{await this.V$t(t,e)}catch(t){throw v("Unable to persist task - "+t)}}async V$t(t,e){await this.Pat.ott({key:t.o,id:t.o,sourceDescription:t.JM,parameters:t.iI},e)}O$t(t){t.wn("Idt",(()=>{t.SI===Ic.EVICTED&&this.KN.Qu(t)}))}constructor(t,e,i){super(),this.Wdt="uninitialised",this.KN=new $J,this.B$t=e,this.L$t=i,this.Pat=t,this.uv()}};var bh=class{get LF(){return this.W$t}get q$t(){return this.z$t}get X$t(){return this.G$t.LF}get Q$t(){let t=0,e=0;return this.dS.forEach((i=>{t+=i.timeRanges.LF,e+=i.totalQualityDurationToCache})),0===e?0:w.min(1,t/e)}get G$t(){return this.K$t}GS(t){return!!Ne(this.dS,t.dS)&&(!!Jf(this.z$t,t.z$t)&&(!!Jf(this.LF,t.LF)&&(!!Jf(this.X$t,t.X$t)&&this.G$t.PF(t.G$t))))}constructor(t,e,i){if(this.z$t=t,this.dS=e,this.W$t=i,0===this.dS.size)this.K$t=d.Nl();else{let t=new d([-1/0,1/0]);this.dS.forEach((e=>{t=t.Cn(e.timeRanges)})),this.K$t=t}}};bh.QUALITY_TIME_RANGES_NULL_OBJECT=Wn(),bh.CACHE_PROGRESSION_NULL_OBJECT=new bh(0,bh.QUALITY_TIME_RANGES_NULL_OBJECT,NaN),bh.j$t=bh.CACHE_PROGRESSION_NULL_OBJECT;var e$=class extends Xi{constructor(){super("progress")}},i$=class extends la{pa(){return new e$}constructor(){super("Y$t")}};var s$,nn=class extends Fe{get name(){return"Z$t"}constructor(t,e){super(t,e)}};async function n$(t,e,i){const s=[];for(const n of t.Ert)s.push(r$(n,e,i));return{J$t:await Promise.all(s)}}async function r$(t,e,i){const s=[];for(const n of t.cit)h$(n)||s.push(u$(n,e,i));return{Z:await Promise.all(s),Iw:t.Iw}}function h$(t){return t.sit.every(a$)}!function(t){t[t.qm=0]="qm",t[t.zm=1]="zm"}(s$||(s$={}));var o$=1;function a$(t){return t.Pet!==o$&&Boolean(t.Pet)}async function u$(t,e,i){const s=[];for(const e of t.sit)a$(e)||s.push(c$(e,i));const n=await Promise.all(s),r=t.bet[0],h=t.ket,o=h?function(t,e){const i=[],s=function(t){return t?Po(t,"avc")?Ot.VIDEO_H264:Po(t,"hev")||Po(t,"hvc")||Po(t,"hvt")||Po(t,"lhv")||Po(t,"lhe")||Po(t,"lht")?Ot.VIDEO_H265:Po(t,"mp4")?Ot.VIDEO_MP4:Po(t,"mpeg2")?Ot.VIDEO_MPEG2:Po(t,"mpeg")?Ot.VIDEO_MPEG:Ot.VIDEO_UNKNOWN:Ot.VIDEO_UNKNOWN}(t);for(const t of e){const e=t.tet.split(":").pop(),n=t.$tt;i.push({mimeType:s,uuid:e,data:n})}const n=s$.qm,r=Sr;return{type:n,schemeType:r,schemeDatas:i}}(r,h):void 0,a=mV(t,e);return{dw:n,gs:t.J3,Iw:t.Iw,hM:o,Fct:a}}async function c$(t,e){const i=await async function(t,e){const i=[],s=t.met;t.jit&&i.push({PS:0,ct:0,$$t:t.jit});const n=s.kst();let r=n;for(;r;){if(t.ust(r)){const s=await t.cst(r,e,(new Hi).M_);for(let e=0;e<s.U;e++)i.push(l$(s.Ont(e),t))}else i.push(l$(r,t));r=s.Vst(r)}const h=s.Cst(),o=h.RS-n.PS;return{ct:o,mtt:i}}(t,e),s={o:d$(t),zT:i,IO:t.IO,g9:t.g9,Ci:t.Ci,Iw:t.Iw,Ti:t.Ti};switch(t.Iw){case Di.KT:break;case Di.vl:var n,r;s.Iet=null!=(r=null==(n=t.Iet)?void 0:n.hk())?r:NaN;break;case Di.yy:s.audioSamplingRate=t.Aet}return s}function l$(t,e){return{PS:t.PS,ct:t.ct,$$t:e.rst(t)}}function d$(t){return t.Jit.Tn+"-"+(""+t.o)}function f$(t,e){const i=function(t){const e=function(t){const e=Wn();for(const i of t){let t=e.get(i.DTt);t||(t={Iw:i.Iw,NA:[]},e.set(i.DTt,t)),t.NA.push(i)}return e}(t),i=Yh();return e.forEach((t=>{for(const e of t.NA){let s=i.get(t.Iw);s||(s=Wn(),i.set(t.Iw,s));let n=s.get(e.l);n||(n=[],s.set(e.l,n)),n.push(e)}})),i}(t);return function(t,e){const i=Yh();return t.forEach(((t,s)=>{const n=Wn();t.forEach(((t,i)=>{const r=[];for(const i of t){const t=_$(i,s,e);r.push(t)}n.set(i,r)})),i.set(s,n)})),i}(i,e)}function _$(t,e,i){const s=t.DTt,n={zTt:t,TSt:[]};for(const t of i)YG(e,s,t)&&n.TSt.push(t);return n}async function g$(t,e){const i=await e.Hht([t],{});return TG(i.gP,{},i.Wht)}async function v$(t,e){return qX(t)?async function(t,e){const i=f$(t.NA,t.yEt),s=await async function(t,e){const i=[],s=t.entries();for(let t=s.next();!t.done;t=s.next()){const[s,n]=t.value,r=await p$(n,s,e);i.push(r)}return i}(i,e),n=await async function(t,e){const i=[];for(const o of t){var s,n;const t=await T$(o.Nit,e);var r,h;t.IO=o.IO,t.g9=o.bet?m$(o.bet):"",t.Ci=null!=(r=null==(s=o._St)?void 0:s.Ci)?r:0,t.Ti=null!=(h=null==(n=o._St)?void 0:n.Ti)?h:0,i.push(t)}return{Iw:Di.YT,Z:[{gs:aq,Iw:Di.YT,dw:i}]}}(t.yEt,e);return s.push(n),{ct:w$(s),t0t:[t.Nit],Sit:[{J$t:s}]}}(t,e):function(t){const e=S$(t);return{ct:e.ct,t0t:[t.Nit],Sit:[{J$t:[{Iw:Di.YT,Z:[{Iw:Di.YT,gs:aq,dw:[{o:t.Nit,zT:e,IO:0,g9:"",Ci:0,Iw:Di.YT,Ti:0}]}]}]}]}}(t)}function w$(t){let e=-1/0;for(const i of t)for(const t of i.Z)e=w.max(e,...t.dw.map((t=>t.zT.ct)));return e}function m$(t){return[t.cSt,t.lSt,t.Dkt].filter(Qf).join(",")}async function p$(t,e,i){const s=[],n=t.entries();for(let t=n.next();!t.done;t=n.next()){const[,e]=t.value,n=await y$(e,i);s.push(n)}return{Iw:A$(e),Z:s}}async function y$(t,e){const i=[],s=t[0].zTt;for(const s of t){const t=await b$(s,e);i.push(t)}return{gs:s.gs||aq,Iw:A$(s.Iw),dw:i}}function A$(t){switch(t){case Q.yy:return Di.yy;case Q.vl:return Di.vl;case Q.Ay:case Q.Lkt:return Di.KT;default:return Di.YT}}function b$(t,e){const i=function(t){const e=t.zTt.Nit,i=t.TSt.map((t=>t.Nit));return e||(i.length?i[0]:void 0)}(t);return T$(i,e)}async function T$(t,e){let i={ct:0,mtt:[]};if(t){const s=await g$(t,e);Xa(s)&&(i=S$(s))}return{o:t||"default",e0t:t,zT:i,IO:0,g9:"",Ci:0,Iw:Di.YT,Ti:0}}function S$(t){const e=[];let i,s=0;for(const n of t.mtt){const t=s;!n.SEt||void 0!==i&&XX(n.SEt.Nit,i)||(e.push(k$(n.SEt,t)),i=n.SEt.Nit),e.push(E$(n,t)),s+=n.ct}return{ct:s,mtt:e}}function k$(t,e){return{PS:e,ct:0,$$t:I$(t.Nit)}}function E$(t,e){return{PS:e,ct:t.ct,$$t:I$(t.Nit)}}function I$(t){return{TI:t.kT,iet:t.qnt?[t.qnt.Tn,t.qnt.Tn+t.qnt.U]:void 0,oP:!1}}var P$=class{async i0t(t){if(!t.src)throw new v("Invalid typed source");const e=t.type;if(Hw(e))return await this.s0t(t);if(Uw(e))return await this.n0t(t);throw new v("Unexpected source type")}async s0t(t){try{const e=await g$(t.src,this.Vht);return await v$(e,this.Vht)}catch(t){throw new v("Unable to fetch HLS manifest")}}async n0t(t){try{const e=new We({Pw:Ee.Rh(t.src),yht:t.liveOffset,kht:t.timeServer,oP:t.useCredentials},this.r0t,Is.QW,this.Vht,t.dash);return await e.q,await async function(t,e,i){const s=[];for(const n of t.Sit)s.push(n$(n,e,i));const n=await Promise.all(s);return{ct:t.yit.Xtt(),t0t:[t.cht],Sit:n}}(e.Ar.Zit,t.contentProtection,this.egt)}catch(t){throw new v("Unable to fetch DASH manifest")}}constructor(t,e,i){this.Vht=t,this.egt=e,this.r0t=i}},R$=class{h0t(){const t=new $i;return this.o0t.push(t),this.a0t(),t.jf}async u0t(t,e){try{await t}finally{this.c0t-=1,this.a0t(),0===this.o0t.length&&0===this.c0t&&e.Lf(!0)}}a0t(){if(this.o0t.length>0&&this.c0t<this.l0t){this.o0t.shift().Lf(),this.c0t+=1}}constructor(t){this.o0t=[],this.c0t=0,this.l0t=t}};var C$=class extends Et{get M$t(){return this.uv()}async uv(){const t=new P$(this.Vht,this.egt,this.r0t);this.d0t=await t.i0t(this.f0t);const e=function(t,e){if(mh(t)){if(Po(t,"%"))return _(t)/100*e;throw new v("Unexpected - Invalid string supplied as amount to cache.")}return e<t?e:t}(this.Rat.iI.amount,this.d0t.ct);let i;this.W$t=e;const s=TF(this.d0t.t0t[0]),n=(await this.ktt.wtt.dtt(s,"manifestURL")).filter((t=>Bc(t.references,this.Rat.o))),r=[],h=this.Rat.iI.bandwidth;for(const t of this.d0t.Sit)for(const e of t.J$t)for(const t of D$(e,this.Rat.iI.preferredTrackSelection))for(const e of B$(t.dw,h))r.push(e);this._0t=w.ceil(r.map((t=>t.IO*function(t,e){let i=0;for(const s of t.zT.mtt.map((t=>t.ct)))if(i+=s,i>=e)return i;return i}(t,e)/8)).reduce(((t,e)=>t+e),0));const o=Wn();if(n&&0!==n.length){const t=n.reduce(((t,e)=>t+e.byteSize),0);for(const t of n){const e=t.qualityId,i=new d(t.startsAndEnds);if(o.has(e))o.get(e).timeRanges=o.get(e).timeRanges.Hl(i).yF(5e-4);else{const t=pi(r,(t=>t.o===e));var a;const s=w.min(this.W$t,null!=(a=null==t?void 0:t.zT.ct)?a:1/0);o.set(e,{timeRanges:i,totalQualityDurationToCache:s})}}i=new bh(t,o,this.W$t)}else{for(const t of r)o.set(t.o,{timeRanges:d.Nl(),totalQualityDurationToCache:w.min(t.zT.ct,this.W$t)});i=new bh(0,o,this.W$t)}this.g0t=i}get v0t(){return this._0t}get g0t(){return this.w0t}set g0t(t){this.w0t.GS(t)||(this.w0t=t,t.GS(bh.j$t)||this.To(new i$))}async pi(t){await this.ko,await this.m0t(this.d0t,t)}async m0t(t,e){if(!t.t0t)throw new v("Unexpected - manifest is missing locations");await this.p0t();const i=[];for(const s of t.Sit)i.push(this.y0t(s,t.t0t[0],e));return so(i)}async p0t(){const t=await this.A0t.ctt();for(const e of t){const t=await this.ktt.ptt.RC(e.key);if(t)await x$(t,this.Rat.o,this.ktt.ptt,this.L$t);else try{await this.ktt.ptt.ott(e,this.L$t)}catch(t){throw new nn("Unable to store manifest with url: "+e.locationURL,t)}}await this.A0t._tt()}y0t(t,e,i){const s=[];for(const n of t.J$t){const t=D$(n,this.Rat.iI.preferredTrackSelection);for(const n of t)s.push(this.b0t(n,e,i))}return so(s)}async b0t(t,e,i){const s=this.Rat.iI.bandwidth,n=B$(t.dw,s);t.Iw===Di.vl&&t.Fct&&t.Fct.sL.widevine&&"persistent"===t.Fct.sL.widevine.licenseType&&(await this.T0t(t.Fct),k_(i));const r=[];for(const t of n)r.push(this.S0t(t,e,i));return so(r)}async S0t(t,e,i){k_(i);const s=t.zT.mtt[0].PS+this.W$t,n=[];let r=!1;for(const h of t.zT.mtt){if(h.PS>=s||this.stopIfFailed(r))break;await this.k0t(i),await this.E0t.h0t(),n.push(this.E0t.u0t(this.I0t(h,t,e),this.P0t).catch((t=>(r=!0,Promise.reject(t)))))}return so(n)}async k0t(t){if(null==t?void 0:t.R_)throw await this.P0t.jf,new At}async R0t(){return await this.ko.catch(Qo),this.d0t}T0t(t){return Promise.resolve()}C0t(){return Ee.Um("License renewal unsupported in this SDK."),Promise.resolve()}async I0t(t,e,i){const s=this.ktt.wtt,n=SF(t.$$t.TI,t.$$t.iet),r=await s.RC(n);if(r)await x$(r,this.Rat.o,s,this.L$t),this.x0t(r,!1);else try{const s=await this.D0t(t.$$t),{segmentMetadataEntry:n,segmentEntry:r}=this.N0t(t,e,i,s);await this.ktt.gtt((async t=>{await t.wtt.ott(n,this.L$t),await t.mtt.ott(r,this.L$t)})),this.x0t(n,!0)}catch(e){throw new nn("Unable to store segment with url: "+t.$$t.TI,e)}}async D0t(t){const e=await this.f_t.oft(t,!1,this.DEFAULT_CACHING_SEGMENT_TIMEOUT,void 0,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT);return await this.__t(e)}async __t(t){return{buffer:await t.xL()}}N0t(t,e,i,s){const n=SF(t.$$t.TI,t.$$t.iet),r=t.PS,h=t.ct,o=this.B0t(s);return{segmentMetadataEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:TF(i),qualityId:e.o,byteSize:o,startsAndEnds:new d([r,r+h]).uF,references:[this.Rat.o]},segmentEntry:{key:n,segmentURLsegmentByteRange:n,manifestURL:TF(i),data:s,references:[this.Rat.o]}}}B0t(t){return t.buffer.byteLength}x0t(t,e){const i=t.qualityId,s=this.w0t,n=s.dS;n.get(i).timeRanges=n.get(i).timeRanges.Hl(new d(t.startsAndEnds)).yF(5e-4),this.g0t=new bh(e?s.q$t+t.byteSize:s.q$t,n,this.W$t)}stopIfFailed(t){return!1}constructor(t,e,i,s,n,r,h,o){super(),this.DEFAULT_CACHING_SEGMENT_TIMEOUT=3e4,this.DEFAULT_CACHING_SEGMENT_CONNECTION_TIMEOUT=0,this.P0t=new $i,this.w0t=bh.j$t,this.Rat=t,this.ktt=e,this.Vht=i,this.A0t=s,this.f_t=n,this.egt=r,this.r0t=o,this.L$t=h,this._0t=-1;const a=this.Rat.JM.sources[0];this.f0t=a,this.ko=this.uv(),this.E0t=new R$(this.Rat.iI.parallelTasksThreshold)}};async function x$(t,e,i,s){Bc(t.references,e)||(t.references.push(e),await i.ott(t,s))}function D$(t,e){switch(t.Iw){case Di.yy:return N$(t.Z,e.audioTrackSelection);case Di.KT:return N$(t.Z,e.textTrackSelection);default:return N$(t.Z,[])}}function N$(t,e){if(0===e.length)return t.length?[t[0]]:[];const i=[];for(const s of t)e.indexOf(s.gs)>-1&&i.push(s);return i}function B$(t,e){if(!t.length)return[];const i=[...t].sort(tV),s=i.filter((t=>t.IO<=e));return s.length>0?[s.pop()]:[i.shift()]}var L$=class{async L0t(){await this.ktt.gtt((async t=>{await this.O0t(t),await this.M0t(t),await this.F0t(t),await this.U0t(t)}))}async O0t(t){const e=t.ytt,i=this.Rat.o;await e.Qu(i)}async M0t(t){const e=t.wtt,i=t.mtt,s=this.Rat.JM.sources[0];if(!ot(s))return;const n=TF(s.src),r=(await e.dtt(n,"manifestURL")).filter((t=>Bc(t.references,this.Rat.o)));for(const t of r)me(t.references,this.Rat.o),0===t.references.length?(await e.Qu(t.key),await i.Qu(t.key)):await e.ott(t)}async F0t(t){const e=t.ptt,i=this.H0t(),s=(await e.Z7(i)).filter((t=>Bc(t.references,this.Rat.o)));for(const t of s)me(t.references,this.Rat.o),0===t.references.length?await e.Qu(t.key):await e.ott(t)}H0t(){if(!this.d0t)return[];const t=this.Rat.JM.sources[0];if(!ot(t))return[];const e=TF(t.src),i=function(t){if(!t)return[];const e=[];for(const i of t.Sit)for(const t of i.J$t)for(const i of t.Z)for(const t of i.dw)t.e0t&&e.push(t.e0t);return function(t){return t.reduce(((t,e)=>(t.indexOf(e)<0&&t.push(e),t)),[])}(e)}(this.d0t).map((t=>({src:t}))).map((t=>TF(t.src)));return[e,...i]}async U0t(t){const e=t.Att,i=(await e.ctt()).filter((t=>Bc(t.references,this.Rat.o)));for(const t of i)me(t.references,this.Rat.o),0===t.references.length?(await e.Qu(t.key),this.V0t(t)):await e.ott(t)}V0t(t){}constructor(t,e,i){this.Rat=t,this.ktt=e,this.d0t=i}},O$=new class{y6(t,e,i){return new L$(t,e,i)}};var M$=class{get ma(){return this.Gu||(this.Gu=function(t){return{renew(e){t.W0t(e)}}}(this)),this.Gu}W0t(t){this.q0t(t)}async q0t(t){try{await this.z0t.C0t(t)}catch(t){0,this.h7.qdt(Ic.ERROR)}}constructor(t,e){this.h7=t,this.z0t=e}},F$=class extends Xo{get M$t(){return this.z0t.M$t}get ma(){return this.Gu||(this.Gu=function(t){let e,i={get id(){return t.o},get status(){return t.SI},get source(){return t.JM},get parameters(){return t.iI},get duration(){return t.ct},get cached(){return t.X0t.ws()},get secondsCached(){return t.G0t},get percentageCached(){return t.Q0t},get bytes(){return t.K0t},get bytesCached(){return t.j0t},get license(){return t._V.ma},start(){t.Tn()},pause(){t.jl()},remove(){t.Qu()},addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new sa(t,["Y$t","Idt"],i),i}(this)),this.Gu}get o(){return this.wS}get _V(){return this.Y0t}get SI(){return this.Wdt}qdt(t){this.Wdt!==t&&(this.Wdt=t,this.To(new zJ))}get JM(){return this.cut}get iI(){return this.Z0t}get ct(){return this.z0t.g0t.LF}get X0t(){return this.z0t.g0t.G$t}get G0t(){return this.z0t.g0t.X$t}get Q0t(){return this.z0t.g0t.Q$t}get K0t(){return this.z0t.v0t}get j0t(){return this.z0t.g0t.q$t}Tn(){this.Wdt===Ic.EVICTED||this.Wdt===Ic.DONE||this.J0t()}async J0t(){try{this.qdt(Ic.LOADING);const t=new Hi;this.$0t=t,await this.z0t.pi(t.M_),this.qdt(Ic.DONE)}catch(t){Aa(t)?this.qdt(Ic.IDLE):this.qdt(Ic.ERROR)}finally{this.$0t.Ou()}}jl(){this.$0t.Jl()}Qu(){this.SI===Ic.LOADING?(this.wn("Idt",this.evictOnLoading),this.jl()):this.t1t()}async t1t(){try{const t=await this.z0t.R0t();await O$.y6(this,this.ktt,t).L0t(),this.z0t.g0t=bh.j$t,this.qdt(Ic.EVICTED)}catch(t){0,this.qdt(Ic.ERROR)}}constructor(t,e,i,s,n,r){super(),this.$0t=new Hi,this.evictOnLoading=()=>{this.pn("Idt",this.evictOnLoading),this.t1t()},this.wS=t,this.cut=e,this.Z0t=i,this.ktt=s,this.z0t=n.y6(this,this.ktt,r),this.Y0t=new M$(this,this.z0t),this.Wdt=1===this.z0t.g0t.Q$t?Ic.DONE:Ic.IDLE,this.z0t.wn("Y$t",(t=>{this.Os(t),1===this.Q0t&&this.qdt(Ic.DONE)}));const h=new Date,o=this.Z0t.expirationDate.getTime()-h.getTime();(function(t){return t<2147483647})(o)&&u((()=>this.t1t()),o)}};var U$=class{U$t(t,e,i){const s=aI();return this.N$t(s,t,e,i)}N$t(t,e,i,s){return new F$(t,e,i,this.ktt,this.e1t,s)}constructor(t,e){this.ktt=t,this.e1t=e}},H$=30,V$=5;function W$(t){if(!t)throw new v("Unexpected - The cache parameters are undefined");const e=function(t){if(mh(t)&&!Po(t,"%"))return k(t);return t}(t.amount);!function(t){if(function(t){return mh(t)&&Po(t,"%")}(t)){const e=_(t);if(j(e)||e<0||e>100)throw new v("The amount as percentage must be between 0 and 100 percent.")}if(!mh(t)&&j(t))throw new v("The amount must be a number or a string")}(e);const i=function(t){if(!t)return function(){const t=new Date;return t.setMinutes(t.getMinutes()+H$),t}();return t}(t.expirationDate);!function(t){if(t&&!function(t){return!t||jf(t)&&t>new Date}(t))throw new v("Invalid expiration date for the cache parameters")}(i);const s=function(t){if(void 0===t)return 1/0;return t}(t.bandwidth);!function(t){if(j(t)||t<0)throw new v("The bandwidth must be between zero and infinity.")}(s);const n=function(t){if(!t)return V$;if(j(t))throw new v("The amount must be a number");return t}(t.numberOfParallelTasks);return{amount:e,expirationDate:i,bandwidth:s,parallelTasksThreshold:n,preferredTrackSelection:{audioTrackSelection:[],textTrackSelection:[]}}}var q$=class{set uJt(t){this.i1t=t,this.s1t=0,this.n1t=0,this.r1t=void 0}get uJt(){return this.i1t}rQt(){if(!this.i1t)return;const t=this.i1t.eWt;for(;this.s1t<t.length;){const e=t[this.s1t];for(void 0===this.r1t&&(this.r1t=VY(e),this.n1t=0);this.n1t<this.r1t.length;){const t=this.r1t[this.n1t];if(this.n1t++,void 0!==t.$Ot)return t.$Ot}this.s1t++,this.r1t=void 0}}ir(){for(this.uJt=void 0,this.QN.Jl(),this.QN=new Hi;this.h1t.length;)this.XZt()}o1t(t){return new t$(this.ktt.ytt,t,"temporary")}async qNt(t){const e=NJ(t.yFt,this.eX.ads.allowedMimeTypes);if(!e.length)return;const i=await _s.lC.ZM(e,gi({sources:e}));if(!i.t.UM())return;this.z0t||(this.z0t=new this.e1t(this.fP));const s=this.ktt,n=new U$(s,this.z0t),r=this.o1t(n).N$t(gi({sources:i.JM}),W$({amount:10,bandwidth:uh.lC.wO()||this.GF.tz}),"temporary");this.h1t.push(r);const h=this.z0t.y6(r,s,"temporary");this.QN.Jl(),this.QN=new Hi,h.pi(this.QN.M_).then(Qo),this.a1t(h,t)}constructor(t,e,i,s){this.h1t=[],this.s1t=0,this.n1t=0,this.WZt=async()=>{const t=this.rQt();t&&await this.qNt(t)},this.XZt=()=>{const t=this.h1t.shift();null==t||t.Qu()},this.a1t=async(t,e)=>{let i=!1;for(;!i;)await t.eg("Y$t"),i=1===t.g0t.Q$t;e.ct<5&&this.WZt()},this.eX=t,this.fP=e,this.QN=new Hi,this.e1t=i,this.GF=s,this.ktt=new DF}},z$={key:"",segmentURLsegmentByteRange:"",manifestURL:"",qualityId:"",byteSize:0,startsAndEnds:new d([0,0]).uF,references:[]},X$={key:"",segmentURLsegmentByteRange:"",manifestURL:"",data:""},G$=class t extends xW{async drt(t,e,i,s){try{return await super.drt(t,e,i,s)}catch(t){pe(t)}const n=await this.u1t.drt(t,e,i,s);return await this.c1t(t,e,n),n}async c1t(e,i,s){if(void 0===this.l1t)return;const n=this.ktt.wtt,r=SF(e,i),h=await n.RC(r);if(h)await x$(h,this.l1t,n,this.L$t);else try{const e={buffer:s},{segmentMetadataEntry:i,segmentEntry:n}=t.N0t(r,e,this.l1t);await this.ktt.gtt((async t=>{await t.wtt.ott(i,this.L$t),await t.mtt.ott(n,this.L$t)}))}catch(t){throw new nn("Unable to store segment with url: "+e,t)}}static N0t(t,e,i){return{segmentMetadataEntry:Me({},z$,{key:t,segmentURLsegmentByteRange:t,references:[i]}),segmentEntry:Me({},X$,{key:t,segmentURLsegmentByteRange:t,data:e,references:[i]})}}constructor(t,e,i,s,n){super(t),this.u1t=new An(e),this.ktt=i,this.l1t=s,this.L$t=n}};var Q$,K$=class{y6(t,e,i){void 0===i&&(i="persistent");const s=Boolean(t.JM.sources[0].useCredentials),n=new Pn(this.fP,Ia.YT),r=new on(this.fP,s),h=new kF(e.ptt,e.wtt,e.mtt,e.Att),o=function(t,e,i,s,n){return new G$(e,t,i,s,n)}(this.fP,h,e,t.o,i),a=new ls,u=new hV(rV(r,h),a,t);return this.d1t(t,e,u,a,n,o,i)}constructor(t){this.fP=t}},j$=class extends K${d1t(t,e,i,s,n,r,h){return new C$(t,e,i,s,n,r,h,Rz())}},Y$=j$;!function(t){t[t.NOT_INITIALISED=0]="NOT_INITIALISED",t[t.f1t=1]="f1t",t[t._1t=2]="_1t",t[t.Qf=3]="Qf",t[t.Rm=4]="Rm",t[t.g1t=5]="g1t"}(Q$||(Q$={}));var Z$=class t extends FZ{get sXt(){return this}static get eXt(){return br.zVt}get eXt(){return t.eXt}GYt(t,e,i){e===Kh.i8&&this.H0?M(this.sQt([t])):this.v1t.push(t)}_g(){return this.w1t.TJt?this.w1t.Wu:this.k5()}gg(t){}vg(){return this.w1t.ct}pg(){return this.w1t.Ic}yg(){}Ag(){}Cg(){return this.w1t.Xu}xg(t){this.Xu!==t&&(this.w1t.Xu=t,this.To(new Eo(this.Wu,this._l)))}Bg(){return this.w1t.Dc}Hg(){return this.w1t.Nc}Vg(){return d.Nl().ws()}Gg(){return this.w1t.Xg}jg(){return this.w1t.Kg}Yg(){return this.w1t._l}Zg(t){this._l!==t&&(this.w1t._l=t,this.To(new Eo(this.Wu,this._l)))}async dl(){if(this.m1t)return;this.To(new ds(this.Wu)),this.p1t(),this.v1t.length&&(this.m1t=this.sQt(this.v1t),await this.m1t,this.m1t=void 0),await this.y1t.$Zt(this.Ko._g());const t=this.A1t;4!==t&&1!==t&&5!==t||(!this.AWt&&this.b1t.length?this.T1t():this.AWt?(this.S1t=!0,this.w1t.dl()):(this.Dzt(),this.Ko.dl()),this.A1t=3)}jl(){3===this.A1t&&(this.w1t.jl(),this.A1t=4)}VZt(){this.y1t.VZt()}Tn(){this.A1t=1,this.y1t.Tn()}async xl(){this.y1t&&(this.y1t.Pn(),this.k1t(!1),this.$Jt.xl(),this.A1t=5,this.AWt&&(this.y1t.aJt(this.AWt.NUt),this.AWt=void 0)),this.H0=!1,this.S1t=!1,Ce(this.b1t),this.gXt&&(this.Dzt(),this.Ko.be()),Ce(this.v1t),await this.w1t.xl(),await this.kJt.ir()}zy(){this.w1t.XHt(),this.$Jt.XHt()}uv(){this.kJt.uv(),this.p1t()}aXt(t){return!(t.type!==o.Pf||!this.y1t||!this.y1t.YZt(-1))&&(this.y1t.KZt().then(Qo),!0)}be(){void 0!==this.w1t.EJt&&(this.kJt.be(),this.w1t.be()),void 0!==this.$Jt.n$t&&this.$Jt.be()}ke(){this.kJt.ke(),this.w1t.ke(),this.$Jt.ke()}async sQt(t){const e=await qJ.y$t(t,this.fP,this.rXt);if(!e.length){const t="Ads could not be loaded.";return this.rXt.To(Zo.cXt(new gt(xs.ADBLOCK,Gt.FILE_NOT_FOUND),t)),void(this.H0&&!this.AWt&&0===this.b1t.length&&this.E1t())}this.y1t.hJt(e),this.rXt.To(new lB),this.gXt||this.Ko.Dc||this.y1t.$Zt(this.Ko._g()),0!==this.A1t&&5!==this.A1t||this.Tn()}sJt(t){this.b1t.push(...t);for(const e of t)this.H0&&!this.gXt&&this.T1t()}async T1t(){if(2!==this.A1t&&!this.I1t){0,this.I1t=!0,this.A1t=2;const t=this.AWt;this.P1t(),this.AWt?(await this.AWt.NUt.MZt(this.rXt),this.R1t()||(this.I1t=!1),this.rXt.To(new VJ(this.C1t(this.AWt))),await this.x1t()):((null==t?void 0:t.NUt.FZt())&&this.rXt.To(new To(this.C1t(t))),this.I1t=!1,this.A1t=1,this.E1t())}}E1t(){this.Dzt(),this.Ko.be(),this.Ko.Ic?this.Ko.To(new ih(this.Ko._g())):this.Ko.dl()}P1t(){let t;if(this.AWt&&this.R1t())t=this.AWt.NUt;else{if(0===this.b1t.length)return;t=this.b1t.shift()}if(!t)return;const e=t.KVt();e?this.AWt=e:(this.AWt&&(this.y1t.aJt(this.AWt.NUt),this.AWt=void 0),this.AWt=void 0)}async x1t(){const t=this.AWt?function(t){var e,i;const s=null==(e=t.aHt)||null==(i=e.MOt)?void 0:i.FOt();return void 0===s?void 0:new HY(s)}(this.AWt):void 0;if(t){if(!this.AWt)return;this.D1t=t,this.N1t(this.AWt.hMt),this.B1t(ba.YFt);const e=this.D1t.KVt();this.AWt.NUt.FZt()&&(this.$Jt.xJt(),1===this.AWt.NUt.ret&&this.rXt.To(new qc(this.C1t(this.AWt)))),await this.HJt(e)}else this.A1t=1,this.I1t=!1,this.AWt=void 0,this.T1t()}async HJt(t){if(t){var e;let s=Qf(t.$Ot),n=Qf(t.iMt);var i;const r=null!=(i=null==(e=t.eMt)?void 0:e.EMt)?i:[],h=r.length>0,o=this.AWt,a=this.C1t(o);if(t.$Ot){if(t.$Ot.n8=o,void 0!==o.m8.skipOffset){const e=ge.sHt(o.m8.skipOffset,t.$Ot.ct);e&&e<t.$Ot.ct&&(t.$Ot.TFt=e)}const e=a.iWt(t.$Ot,r,t.sMt,o.m8);this.$Jt.xJt(),this.PXt(),await this.w1t.HJt(e,t.lt,{width:this.Ko.je.offsetWidth,height:this.Ko.je.offsetHeight}),s=!0}if(t.iMt){const e=t.iMt.nMt[0];if(e.n8=o,void 0!==o.m8.skipOffset){const t=ge.sHt(o.m8.skipOffset,this.Ko.vg());t&&(e.n8.TFt=t)}const i=s?[]:r,h=a.sWt(e,i,t.iMt,t.sMt,o.m8);s&&this.w1t.e$t(),await this.$Jt.HJt(h,t.lt,{width:this.Ko.je.offsetWidth,height:this.Ko.je.offsetHeight}),n=!0}if(s){this.A1t=3,this.w1t.be();const t=0===a.vEt;this.S1t=t,this.kJt.jl(),this.w1t.dl(),this.Ko.jl(),this.Ko.ke(),this.PXt(),this.w1t.jJt()}n&&(this.A1t=3,this.$Jt.be(),this.$Jt.jJt()),(s||n||h)&&this.L1t(t.YOt),s||n||await this.O1t(),!s&&n&&(this.R1t()||this.b1t.length>0?this.T1t():(this.E1t(),this.AWt=o))}else null===t?await this.O1t():this.k1t(!0)}O1t(){const t=this.D1t;return this.HJt(t&&t.KVt())}k1t(t){this.B1t(ba.ZFt),this.M1t(),this.A1t=1;const e=void 0!==this.AWt&&this.AWt.NUt.LZt();if(this.I1t=!1,e)t&&(this.A1t=1,this.T1t());else{if(!this.gXt)return;this.Ko.be(),!this.Ko.Ic&&t&&this.Ko.dl(),this.Dzt()}}Dzt(){this.F1t(),super.Dzt()}F1t(){this.Ko.Ic&&(this.A1t=5),this.AWt&&(this.AWt.NUt.FZt()&&this.rXt.To(new To(this.C1t(this.AWt))),this.y1t.aJt(this.AWt.NUt),this.AWt=void 0)}N1t(t){this.U1t=this.U1t.concat(t)}M1t(){this.U1t=[]}H1t(t){this.Ko.je.appendChild(t)}B1t(t){for(const e of this.U1t)e.JFt===t&&En(e.eventURL)}L1t(t){this.w1t.mJt(ba.qFt);for(const e of t)En(e)}get J5(){return this.AWt?this.C1t(this.AWt):null}get Y5(){return this.AWt?[this.w1t.EJt,this.$Jt.n$t].filter(Qf):[]}get t8(){const t=this.b1t.concat(this.y1t.t8.filter((t=>!t.oWt())));return Ga(t,(t=>t.RZt.L5.filter((t=>!t.oWt()))))}get e8(){return this.y1t.t8.map((t=>t.RZt))}g8(t){const e=this.KYt();for(const i of e)vj(i.sources,i.timeOffset)||t.m$(i,Kh.i8,!1)}KYt(){const t=[];for(const e of this.Y5.concat(this.t8))t.push(e.m8);const e=this.b1t.concat(this.y1t.t8.filter((t=>!t.oWt())));for(const i of e)for(const e of i.eWt)e.q||t.push(e.m8);return t.push(...this.v1t),l_(t)}R1t(){return!!this.AWt&&VY(this.AWt).some((t=>t.$Ot))}C1t(t){return t.NUt.RZt}m$t(){return this.V1t}rv(){return this.kJt.rv()}og(){return this.kJt.og()}pXt(t){this.y1t.pXt(t)}async bn(){await super.bn(),this.Ko.pn(o.Ph,this.p1t),this.rXt.nU(this.w1t.rXt),this.rXt.nU(this.$Jt.rXt),this.rXt.nU(this.y1t),this.w1t.bn(),this.$Jt.bn(),await this.kJt.bn()}constructor(t,e,i,s,n,r){super(t,e),this.b1t=[],this.A1t=0,this.U1t=[],this.I1t=!1,this.H0=!1,this.S1t=!0,this.v1t=[],this.W1t=t=>{t.type===o.Ph&&this.S1t?this.S1t=!1:this.To(t)},this.p1t=()=>{this.H0=!0},this.q1t=async()=>(this.A1t=1,await this.w1t.xJt(),this.HJt(this.D1t.KVt())),this.z1t=async t=>{const e=new gt(xs.PLAYBACK,Gt.GENERAL_LINEAR_ERROR,"There was a problem playing a linear ad.");return this.rXt.To(Zo.cXt(e,t)),await this.w1t.xJt(),this.HJt(this.D1t.KVt())},this.X1t=()=>(this.$Jt.xJt(),this.HJt(this.D1t.KVt())),this.G1t=t=>{const e=new gt(xs.PLAYBACK,Gt.GENERAL_NON_LINEAR_ERROR,"There was a problem playing a non linear ad.");return this.rXt.To(Zo.cXt(e,t)),this.$Jt.xJt(),this.HJt(this.D1t.KVt())},this.fP=r,this.kJt=i,this.$Jt=new HJ(this.G1t,this.X1t,this),this.w1t=new FJ(this.z1t,this.q1t,this.$Jt,s,this,t.k0,i),this.H1t(this.$Jt.cJt),this.H1t(this.w1t.cJt);const h=new q$(s,r,j$,n);this.y1t=new RJ(this.Ko,this,this.rXt,h),this.w1t.Q_(this.W1t),this.$Jt.Q_(this.Os),this.rXt.eU(this.w1t.rXt),this.rXt.eU(this.$Jt.rXt),this.rXt.eU(this.y1t),this.V1t=new qY(this,this.Ko),this.k0.wn(Ui.gn,this.Os),this.Ko.wn(o.Ph,this.p1t)}};Gn.lC.pU(new class{get Zzt(){return Z$.eXt}mU(t){return t&&("string"!=typeof t.integration||t.integration===S.DEFAULT||t.integration===S.THEO)}Jzt(t,e,i){const s=new Fh(t.je,i,t.Gf,t.g5,t.y5,t.Cu);return new Z$(t,e,s,i,t.g5,t.Gf)}m$(t,e,i,s){i.GYt(t,e,s)}uH(t){const e=_Y(t.sources);if(!e)return;const i={integration:S.THEO,sources:e};"vast"===i.sources.type&&void 0===t.timeOffset?t.timeOffset=0:"vmap"===i.sources.type&&void 0!==t.timeOffset&&rt("property timeOffset will be ignored for vmap ad sources");const s=vY(t.timeOffset);void 0!==s&&(i.timeOffset=s);const n=vY(t.skipOffset);return void 0!==n&&(i.skipOffset=n),i}});var J$=class{Jq(){var t;this.L$||(null==(t=this.lZt)||t.initialize(),this.L$=!0)}get cJt(){return this.Cqt}get Q1t(){return this.K1t.offsetHeight}get j1t(){return this.K1t.offsetWidth}get Y1t(){return this.lZt}Z1t(t){"linear"===t?this.Cqt.style.marginTop="0px":"nonlinear"===t&&(this.Cqt.style.marginTop="-45px")}be(){this.Cqt.style.opacity="1",this.Cqt.style.pointerEvents=""}ke(){this.Cqt.style.opacity="0",this.Cqt.style.pointerEvents="none"}Ou(){var t;null==(t=this.lZt)||t.destroy(),this.lZt=void 0}constructor(t,e){this.lZt=void 0,this.L$=!1,this.S6=t;const i=h.createElement("div");i.className="theoplayer-ima-wrapper",ha(i),i.style.zIndex="10",fh.Ks&&function(t,e){t.addEventListener(e,tS)}(i,"mousedown"),e.appendChild(i);const s=h.createElement("div");s.className="theoplayer-ima",s.style.height="100%",this.K1t=s,i.appendChild(s),this.Cqt=i,this.lZt=new google.ima.AdDisplayContainer(this.K1t,this.S6)}},$$=class{get lFt(){return this.J1t.getAdId()}get djt(){const t=this.J1t.getAdPodInfo();if(void 0!==t)try{return{_Qt:t.getAdPosition(),ZVt:t.getMaxDuration(),$1t:t.getPodIndex(),vEt:t.getTimeOffset(),gQt:t.getTotalAds(),t2t:t.getIsBumper()}}catch(t){return}}get GOt(){return this.J1t.getAdSystem()}get e2t(){return this.J1t.getAdvertiserName()}get OMt(){var t;return null!=(t=this.J1t.getApiFramework())?t:void 0}get eMt(){return this.IMt.map((t=>({FMt:t.getAdSlotId(),rM:t.getContentType(),O:t.getContent(),Ci:t.getHeight(),Ti:t.getWidth()})))}get rM(){var t;return null!=(t=this.J1t.getContentType())?t:void 0}get wMt(){return this.J1t.getCreativeId()}get wYt(){return this.J1t.getCreativeAdId()}get i2t(){return this.J1t.getDealId()}get jA(){return this.J1t.getDescription()}get ct(){return this.J1t.getDuration()}get Ti(){return this.J1t.getWidth()}get Ci(){return this.J1t.getHeight()}get rYt(){var t;return null!=(t=this.J1t.getMediaUrl())?t:void 0}get s2t(){return this.J1t.getMinSuggestedDuration()}get gYt(){return this.J1t.getSkipTimeOffset()}get n2t(){return this.J1t.getSurveyUrl()}get uM(){return this.J1t.getTitle()}get hYt(){return this.J1t.getTraffickingParameters()}get oYt(){return this.J1t.getTraffickingParametersString()}get sMt(){return this.J1t.getUniversalAdIds().map((t=>({pYt:t.getAdIdRegistry(),yYt:t.getAdIdValue()})))}get pZt(){return this.J1t.getUiElements()}get vYt(){return this.J1t.getVastMediaBitrate()}get _Yt(){return this.J1t.getVastMediaHeight()}get fYt(){return this.J1t.getVastMediaWidth()}get aYt(){return this.J1t.getWrapperAdIds()}get uYt(){return this.J1t.getWrapperAdSystems()}get cYt(){return this.J1t.getWrapperCreativeIds()}get njt(){return this.J1t.isLinear()}constructor(t){this.J1t=t;const e=new google.ima.CompanionAdSelectionSettings;e.resourceType=google.ima.CompanionAdSelectionSettings.ResourceType.ALL,e.creativeType=google.ima.CompanionAdSelectionSettings.CreativeType.ALL,e.sizeCriteria=google.ima.CompanionAdSelectionSettings.SizeCriteria.IGNORE,this.IMt=t.getCompanionAds(0,0,e)}};function t0(){return[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.EXPANDED_CHANGED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.AD_PROGRESS,google.ima.AdEvent.Type.AD_BUFFERING,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.AD_CAN_PLAY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.INTERACTION,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.VIEWABLE_IMPRESSION,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED]}var e0=class extends Et{Zg(t){var e;null==(e=this.tWt)||e.setVolume(t)}Yg(){return this.tWt.getVolume()}Pjt(){return this.tWt.getRemainingTime()}Ou(){Ce(this._8),this.E0.pn(Ui.gn,this.r2t),this.tWt.removeEventListener(google.ima.AdEvent.Type.LOADED,this.h2t),this.tWt.removeEventListener(t0(),this.forwardAdEventListener),this.tWt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener),this.tWt.destroy()}Tn(){this.tWt.start()}oZt(){this.tWt.resume()}jl(){this.tWt.pause()}zy(){this.tWt.skip()}xl(){this.tWt.stop()}ujt(){const t=this.tWt.getCurrentAd();if(t)return this.o2t(t)}fZt(){return this.tWt.getCuePoints()}o2t(t){let e=pi(this._8,(e=>e.J1t===t));return e||(e=new $$(t),this._8.push(e)),e}TZt(t){this.tWt.updateAdsRenderingSettings(n0(t))}constructor(t,e,i){super(),this._8=[],this.h2t=t=>{t.getAd().isLinear()?this.lZt.Z1t("linear"):this.lZt.Z1t("nonlinear")},this.r2t=()=>{this.tWt.resize(this.lZt.j1t,this.lZt.Q1t,google.ima.ViewMode.NORMAL)},this.forwardAdEventListener=t=>{const e=t.getAd(),i=function(t){return{[google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED]:$.yQt,[google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED]:$.AQt,[google.ima.AdEvent.Type.CLICK]:$.bQt,[google.ima.AdEvent.Type.DURATION_CHANGE]:$.Nf,[google.ima.AdEvent.Type.EXPANDED_CHANGED]:$.TQt,[google.ima.AdEvent.Type.STARTED]:$.SQt,[google.ima.AdEvent.Type.IMPRESSION]:$.kQt,[google.ima.AdEvent.Type.PAUSED]:$.Rm,[google.ima.AdEvent.Type.RESUMED]:$.EQt,[google.ima.AdEvent.Type.AD_PROGRESS]:$.dQt,[google.ima.AdEvent.Type.AD_BUFFERING]:$.IQt,[google.ima.AdEvent.Type.FIRST_QUARTILE]:$.PQt,[google.ima.AdEvent.Type.MIDPOINT]:$.MFt,[google.ima.AdEvent.Type.THIRD_QUARTILE]:$.RQt,[google.ima.AdEvent.Type.COMPLETE]:$.FFt,[google.ima.AdEvent.Type.USER_CLOSE]:$.CQt,[google.ima.AdEvent.Type.LINEAR_CHANGED]:$.xQt,[google.ima.AdEvent.Type.LOADED]:$.DQt,[google.ima.AdEvent.Type.AD_CAN_PLAY]:$.NQt,[google.ima.AdEvent.Type.AD_METADATA]:$.BQt,[google.ima.AdEvent.Type.AD_BREAK_READY]:$.LQt,[google.ima.AdEvent.Type.INTERACTION]:$.OQt,[google.ima.AdEvent.Type.ALL_ADS_COMPLETED]:$.MQt,[google.ima.AdEvent.Type.SKIPPED]:$.FQt,[google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED]:$.UQt,[google.ima.AdEvent.Type.LOG]:$.HQt,[google.ima.AdEvent.Type.VIEWABLE_IMPRESSION]:$.VQt,[google.ima.AdEvent.Type.VOLUME_CHANGED]:$.WQt,[google.ima.AdEvent.Type.VOLUME_MUTED]:$.qQt}[t]}(t.type),s={type:i,date:new Date,o8:e?this.o2t(e):void 0,jKt:XZ(i,t.getAdData())};this.To(s)},this.forwardAdErrorEventListener=t=>{this.To({date:new Date,o8:void 0,type:qZ.zQt,jKt:{Djt:KZ(t.getError())}})},this.tWt=t,this.lZt=e,this.E0=i,this.E0.wn(Ui.gn,this.r2t),this.tWt.init(this.lZt.j1t,this.lZt.Q1t,google.ima.ViewMode.NORMAL),this.tWt.addEventListener(google.ima.AdEvent.Type.LOADED,this.h2t),this.tWt.addEventListener(t0(),this.forwardAdEventListener),this.tWt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.forwardAdErrorEventListener)}},i0=class extends la{get a2t(){return this.u2t}get cJt(){return this.Cqt}pa(){return this}constructor(t,e){super("EZt"),this.u2t=t,this.Cqt=e}},s0=class extends Et{aZt(){var t;null==(t=this.uZt)||t.contentComplete()}async sQt(t,e,i){if(this.c2t)throw new v("Only one ImaAdsRequest can be made at a time.");if(!this.l2t.Y1t)throw new v("AdDisplayContainer is not initialized.");this.uZt=new google.ima.AdsLoader(this.l2t.Y1t),this.uZt.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.uZt.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.c2t=new $i,this.d2t=e,this.f2t=i;const s=new google.ima.AdsRequest;return t.fGt?s.adTagUrl=t.fGt:t._Gt&&(s.adsResponse=t._Gt),s.linearAdSlotWidth=t.oGt,s.linearAdSlotHeight=t.aGt,s.nonLinearAdSlotWidth=t.uGt,s.nonLinearAdSlotHeight=t.cGt,s.setAdWillAutoPlay(t.lGt),s.setAdWillPlayMuted(t.dGt),t.gGt&&(s.omidAccessModeRules=t.gGt),this.uZt.requestAds(s),this.c2t.jf}Ou(){var t;void 0!==this.uZt&&(this.uZt.removeEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoadedListener),this.uZt.removeEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsManagerErrorListener),this.uZt.destroy(),this.uZt=void 0),null==(t=this.c2t)||t.BC("AdsLoader destroyed"),this.c2t=void 0}constructor(t,e){super(),this.onAdsManagerLoadedListener=t=>{if(this.d2t&&this.f2t&&this.c2t){var e;const i=n0(this.f2t),s=this.d2t,n=t.getAdsManager({get currentTime(){return s.Wu},get duration(){return s.ct}},i),r=new e0(n,this.l2t,this.E0);this.To(new i0(n,this.l2t.cJt)),null==(e=this.c2t)||e.Lf(r),this.c2t=void 0}},this.onAdsManagerErrorListener=t=>{var e;const i={pC:t.getError().getMessage(),mQt:t.getError().getVastErrorCode(),vUt:t.getError().getErrorCode(),Iw:GZ(t.getError().getType()),pQt:void 0};null==(e=this.c2t)||e.BC(i),this.c2t=void 0},this.E0=e,this.l2t=t}};function n0(t){const e=new google.ima.AdsRenderingSettings;return e.enablePreloading=t.yZt,t.pZt&&(e.uiElements=t.pZt),e.mimeTypes=t.mZt,void 0!==t.bZt&&(e.playAdsAfterTime=t.bZt),void 0!==t.AZt&&(e.loadVideoTimeout=t.AZt),void 0!==t.nYt&&(e.bitrate=t.nYt),void 0!==t.bZt&&(e.playAdsAfterTime=t.bZt),e.restoreCustomPlaybackStateOnAdBreakComplete=!0,e}var r0=class extends Et{get Wu(){return this.Ko.Fc?this._2t:this.Ko._g()}get ct(){return this.Ko.vg()}get Xu(){return this.Ko.Xu}get _l(){return this.Ko._l}ir(){this._2t=0}constructor(t){super(),this.Ko=t,this._2t=this.Ko._g(),this.Ko.wn(o.Lu,(()=>{this.Ko.Fc||(this._2t=this.Ko._g()),this.To(new hc(this.Wu,void 0))}))}};mu.lC.registerWebImaAdPlayerConstructor((function(t,e,i){bJ(i);const s=TJ(i)?t.rv():void 0,n=new J$(s,t.je),r=new s0(n,t.k0),h=new r0(t);return new SJ(t,e,i,t.w5,n,r,h)}));var h0=class extends Et{get Mz(){return this.Dvt===Dh.CONNECTED}get Dvt(){return this.Pa}get ma(){return this.Gu||(this.Gu=function(t){return{get casting(){return t.Mz},get state(){return t.Dvt},start(){t._v()},stop(){t.vv()},addEventListener(e,i){const s=ku(e,Oi);t.wn(s,i)},removeEventListener(e,i){const s=ku(e,Oi);t.pn(s,i)}}}(this)),this.Gu}g2t(){this.v2t(),this.Vyt.wn(o.do,this.w2t),Ee.Zs.n9&&this.Aa(Dh.AVAILABLE)}preloadPlayer(t){if(k_(t),this.Ko.Nc<dw.Jn){const e=this.Ko.eg(ee.yl,t);return this.Ko.Mg=D.Ty,e}return Promise.resolve()}Aa(t){t!==this.Pa&&(this.Pa=t,this.To(new AZ(this.Pa)))}async m2t(t){await this.preloadPlayer(t),this.qq._v()}vv(){Ee.Zs.n9&&this.Ko.vv()}bn(){this.Lo(),this.Vyt.pn(o.do,this.w2t),this.p2t.Jl()}constructor(t,e){super(),this.Gu=void 0,this.Pa=Dh.UNAVAILABLE,this.p2t=new Hi,this.handleAirplayChangedEvent=()=>{this.Ko&&this.Ko.Eg?this.y2t():this.Dvt===Dh.CONNECTED&&this.A2t()},this.Vyt=t,this.qq=e}},o0=class extends h0{v2t(){this.Ko&&this.Ko.pn(o.Vw,this.handleAirplayChangedEvent),this.b2t?this.Ko=this.qq:this.Ko=this.T2t,this.Ko.wn(o.Vw,this.handleAirplayChangedEvent)}get b2t(){return this.qq.fv()}async y2t(){if(this.Ko){if(this.b2t){if(!this.Ko.Dc){const t=new Promise((t=>u(t,800))),e=this.Ko.eg(o.Ch,this.p2t.M_);await Promise.race([e,t])}this.Ko.dl()}else{this.S2t=this.qq.Wu,this.k2t=this.qq.qu,this.T2t.wn(o.Lu,this.handleAirplayPlayerTimeUpdate),this.E2t=this.qq.$v,this.qq.$v=this.T2t,this.E2t.jl(),this.E2t.ke(),this.T2t.be(),this.T2t.Xu=this.E2t.Xu,this.T2t.$u=this.E2t.$u,this.T2t._l=this.E2t._l;const t=this.T2t.eg(o.Tf);this.T2t.Wu=this.E2t.Wu,await t,this.T2t.dl(),this.T2t.Xu=this.E2t.Xu,this.T2t.$u=this.E2t.$u,this.T2t._l=this.E2t._l}this.Aa(Dh.CONNECTED)}}A2t(){if(this.E2t){this.T2t.pn(o.Lu,this.handleAirplayPlayerTimeUpdate),this.E2t.Xu=this.T2t.Xu,this.E2t.$u=this.T2t.$u,this.E2t._l=this.T2t._l;fh.MR&&!fh.KP&&this.qq.ct===1/0?this.k2t?this.E2t.qu=this.k2t:this.E2t.Wu=1/0:this.E2t.Wu=this.S2t,this.k2t=void 0,this.S2t=void 0,this.E2t.be(),this.T2t.ke(),this.T2t.Dc||this.E2t.dl(),this.qq.$v=this.E2t,this.T2t.ir(),this.E2t=void 0}else this.Ko&&(this.Ko.Wu=this.Ko.Wu+1e-4);this.Aa(Dh.AVAILABLE)}_v(){Ee.Zs.n9&&(this.Vyt.uv(),this.p2t.Jl(),this.p2t=new Hi,this.b2t?M(this.m2t(this.p2t.M_)):M(this.I2t(this.p2t.M_)))}async I2t(t){try{await this.T2t.ir();const e=this.qq.qg();if(void 0===e)throw new v("Not possible to start Airplay without a source");await this.T2t.ba(e,t);const i=this.T2t.eg(ee.Qf,t);this.T2t.dl(),await function(t,e){return zs((i=>Promise.race([t,uc(e,i).then((()=>{throw new v("Timeout")}))])))}(i,3e3),this.T2t.jl(),k_(t),this.T2t._v()}catch(t){if(Aa(t))return;0}}bn(){var t;super.bn(),this.qq.lS(this.T2t),null==(t=this.T2t)||t.bn()}constructor(t,e,i){super(t,e),this.w2t=()=>{var t;const e=null==(t=this.qq.qg())?void 0:t.sources.filter(Or);Ee.Zs.n9&&(null==e?void 0:e.some(Ck))?this.Aa(Dh.AVAILABLE):this.Aa(Dh.UNAVAILABLE)},this.handleAirplayPlayerTimeUpdate=t=>{this.S2t=t.currentTime,this.k2t=this.qq.qu},this.T2t=i,this.T2t.ke(),e.cS(i),this.g2t()}},a0=class extends Xo{mv(){this.P2t.mv()}get ht(){return this.P2t.ht}get bl(){return this.P2t.bl}get bt(){return this.tF}get Wu(){return this.P2t.Wu}set Wu(t){this.P2t.Wu=t}get qu(){return this.P2t.qu}get ct(){return this.P2t.ct}get je(){return this.Hs}get Ic(){return this.P2t.Ic}get lt(){return this.P2t.lt}get Ec(){return this.P2t.Ec}get Tg(){return this.P2t.Tg}get Eg(){return this.P2t.Eg}get tv(){return this.P2t.tv}get Jg(){return this.P2t.Jg}get Pg(){return this.P2t.Pg}get Xu(){return this.P2t.Xu}set Xu(t){this.P2t.Xu=t}get Dg(){return this.P2t.Dg}get Dc(){return this.P2t.Dc}get $u(){return this.P2t.$u}set $u(t){this.P2t.$u=t}get wl(){return this.P2t.wl}get Mg(){return this.P2t.Mg}set Mg(t){this.P2t.Mg=t}get Nc(){return this.P2t.Nc}get kl(){return this.P2t.kl}get Fc(){return this.P2t.Fc}fv(){return this.P2t.fv()}_v(){this.P2t._v()}vv(){this.P2t.vv()}get nt(){return this.P2t.nt}get Xg(){return this.P2t.Xg}get Kg(){return this.P2t.Kg}get rt(){return this.P2t.rt}get _l(){return this.P2t._l}set _l(t){this.P2t._l=t}dl(){M(this.P2t.dl())}jl(){this.P2t.jl()}async xl(){}qg(){return this.cut}async ba(t,e){let i;if(k_(e),this.cut=t,ho(t.sources))i=Ew({src:""});else{const e=t.sources.filter(Or);for(const t of e)if(Ck(t)){i=t;break}}if(!i)throw new v("Unsupported source.");await this.P2t.ba(i,t,e),this.aF(i)}aF(t){this.tF!==t&&(this.tF=t,this.To(new nm(t)))}rv(){return this.P2t.rv()}og(){return[]}uv(){this.R2t.zF()}hv(t){sm(this,t)}ov(){}pv(t){return!1}wv(){this.P2t.wv()}async ir(){this.tF=void 0,this.cut=void 0,await this.P2t.ir()}be(){this.P2t.be()}ke(){this.P2t.ke()}ev(){return this.P2t.ev()}async bn(){this.Lo(),this.R2t.bn(),await this.P2t.bn(),this.$T.bn(),this.eS.bn(),this.xu.bn()}constructor(t,e,i,s,n,r){super(),this.tF=void 0,this.cut=void 0,this.$T=new Fa,this.eS=new Fa,this.xu=new Yc,this.Hs=t,this.R2t=new Jy(n,r,1,[Di.vl]),this.R2t.jF(t),this.P2t=new Rk(t,this.R2t,e,i,s),this.P2t.Q_(this.Os),this.$T.$v=this.P2t.ht,this.eS.$v=this.P2t.rt,this.xu.$v=this.P2t.nt}},u0=class extends Tc{async bn(){this.C2t.bn(),await super.bn()}constructor(t){super(t);const e=new a0(this.v5.je,this.Gf,this.xb,this.g5,this.y5,this.Cu);this.C2t=new o0(this,this.v5,e),this.m5.qz(this.C2t),this.wn(o.Qw,(()=>{this.C2t.v2t()}))}};VN((t=>new u0(t)),Fs.V5);var c0=class extends Xo{get ma(){return this.Gu||(this.Gu=function(t){let e,i={get status(){return t.SI},get tasks(){return t.F$t},get network(){return t.b5.ma},createTask:(e,i)=>t.x2t(e,i),addEventListener(t,i){e.wn(t,i)},removeEventListener(t,i){e.pn(t,i)}};return e=new wi(t,i),i}(this)),this.Gu}get SI(){return this.D2t.SI}get F$t(){return this.D2t.F$t.ma}get b5(){return this.T5}x2t(t,e,i){let s,n;if(void 0===i&&(i="persistent"),!t)throw new v("Unexpected - The source description is undefined");if(s=gi(t),n=W$(e),mE(s))throw new v("Invalid source description");return this.D2t.N$t(s,n).ma}constructor(t,e){super(),this.D2t=t,this.T5=e,this.D2t.wn("Idt",this.Os)}};var l0=function(){const t=new Bo(Ee.Gf,!1),e=$c.lC,i=new Y$(t),s=new U$(e,i),n=new wP(t),r=new t$(e.ytt,s,"persistent");return new c0(r,n)}().ma;function d0(t,e){if("function"==typeof t.getAll){return be(void 0===e?t.getAll():t.getAll(e))}return function(t){let e=new $i,i=[];return t.onsuccess=()=>{let s=t.result;s&&s.value?(i.push(s.value),s.continue()):e.Lf(i),Qo()},t.onerror=()=>{e.BC(t.error),Qo()},e.jf}(void 0===e?t.openCursor():t.openCursor(e))}function be(t){return new Promise(((e,i)=>{t.onsuccess=()=>{e(t.result),Qo()},t.onerror=()=>{i(t.error),Qo()}}))}var f0=class{Jl(){if(this.oo)try{this.gtt.abort(),this.oo=!1}catch(t){}}constructor(t){this.gtt=t,this.oo=!0,this.jf=new Promise(((t,e)=>{this.gtt.oncomplete=()=>{this.oo=!1,t(),Qo()},this.gtt.onerror=()=>{this.oo&&(this.oo=!1,e(this.gtt.error||new v("Transaction error")),Qo())},this.gtt.onabort=()=>{this.oo=!1,e(new v("Transaction aborted")),Qo()}}))}};async function _0(t,e,i){const s=new f0(t);try{const[t]=await Promise.all([e(i),s.jf]);return t}catch(t){if(!s.oo)throw new nn("IDBTransaction committed prematurely",t);throw t}finally{s.Jl()}}var g0=class{get l(){return this.h7.l}htt(t){return Promise.resolve("persistent"===t)}ott(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(Dt(e));return be(this.N2t(Re.Itt).put(t))}async att(t,e){if(void 0===e&&(e="persistent"),"persistent"!==e)return Promise.reject(Dt(e));for(const i of t)await this.ott(i,e)}async IC(t){return Boolean(await this.RC(t))}RC(t){return be(this.N2t(Re.Ett).get(t))}utt(t,e){return be(this.N2t(Re.Ett).index(e).get(t))}async Z7(t){const e=[];for(let i of t){const t=await this.RC(i);t&&e.push(t)}return e}ctt(){return d0(this.N2t(Re.Ett))}ltt(t){return d0(this.N2t(Re.Ett),t)}dtt(t,e){return d0(this.N2t(Re.Ett).index(e),t)}Qu(t){return be(this.N2t(Re.Itt).delete(t))}async ftt(t){for(const e of t)await this.Qu(e)}_tt(){return be(this.N2t(Re.Itt).clear())}N2t(t){if(!this.B2t)throw new v("Lock was released");if(!function(t,e){return t===Re.Ett&&e===Re.Ett||e===Re.Itt}(t,this.B2t.mode))throw new v("Incompatible transaction mode: "+this.B2t.mode+", expected "+t);return this.B2t.objectStore(this.l)}L2t(){this.h7.O2t(this),this.B2t=void 0}constructor(t,e){this.h7=t,this.B2t=e}};var Zs=class{htt(t){return Promise.resolve("persistent"===t)}ott(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(Dt(e)):this.gtt(Re.Itt,(e=>e.ott(t)))}att(t,e){return void 0===e&&(e="persistent"),"persistent"!==e?Promise.reject(Dt(e)):this.gtt(Re.Itt,(e=>e.att(t)))}IC(t){return this.gtt(Re.Ett,(e=>e.IC(t)))}RC(t){return this.gtt(Re.Ett,(e=>e.RC(t)))}utt(t,e){return this.gtt(Re.Ett,(i=>i.utt(t,e)))}Z7(t){return this.gtt(Re.Ett,(e=>e.Z7(t)))}ctt(){return this.gtt(Re.Ett,(t=>t.ctt()))}ltt(t){return this.gtt(Re.Ett,(e=>e.ltt(t)))}dtt(t,e){return this.gtt(Re.Ett,(i=>i.dtt(t,e)))}Qu(t){return this.gtt(Re.Itt,(e=>e.Qu(t)))}ftt(t){return this.gtt(Re.Itt,(e=>e.ftt(t)))}_tt(){return this.gtt(Re.Itt,(t=>t._tt()))}Tbt(t){return this.M2t(),this.cbt=new g0(this,t),this.cbt}M2t(){if(void 0!==this.cbt)throw new v("Already locked")}O2t(t){if(this.cbt!==t)throw new v("Incorrect lock");this.cbt=void 0}GN(t){return this.qX.GN(t)}gtt(t,e){return this.GN((()=>this.F2t(t,e)))}async F2t(t,e){this.M2t();const i=this.U2t.transaction(this.l,t),s=this.Tbt(i);try{return await _0(i,e,s)}finally{s.L2t()}}H2t(t){this.M2t();const e=this.U2t.transaction(this.l,t);return this.Tbt(e)}static V2t(t,e){let i;const s=new Promise((t=>{i=t})),n=t.reduce(((t,e)=>t.then((()=>{let t;const i=new Promise((e=>{t=e}));return e.GN((()=>(t(),s))).catch(Qo),i}))),Promise.resolve());return i(n.then(e)),s}constructor(t,e){this.cbt=void 0,this.qX=new Uo,this.U2t=t,this.l=e}},v0={oA:17,W2t:async t=>{const{transaction:e,database:i}=t,s=e.objectStoreNames;if(s&&s.length)for(let t=0;t<s.length;t++)i.deleteObjectStore(s[t]);i.createObjectStore(A0,{keyPath:"id"}),i.createObjectStore(b0,{keyPath:"key"}),i.createObjectStore(T0,{keyPath:"key"});i.createObjectStore(S0,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL");i.createObjectStore(k0,{keyPath:"segmentURLsegmentByteRange"}).createIndex("manifestURL","manifestURL")}},w0=class{async q2t(t){for(const e of this.z2t)this.X2t<e.oA&&await e.W2t(t)}constructor(t){this.X2t=t}},m0=class extends w0{get z2t(){return[v0]}},p0=new class{G2t(t){this.Q2t=t}y6(t){return this.Q2t(t)}constructor(){this.Q2t=t=>new m0(t)}},y0=18,A0="cachingTask",b0="licences",T0="manifest",S0="segment",k0="segmentMetadata";async function E0(){!function(){if("undefined"==typeof indexedDB)throw new v("Indexed database unavailable")}();const t=indexedDB.open("theoplayer-cache-database",y0);return t.addEventListener("upgradeneeded",I0),await be(t)}async function I0(t){const e=t.oldVersion<=y0?t.oldVersion:-1,i=t.target,s=i.result,n=i.transaction,r=p0.y6(e),h={database:s,transaction:n};await _0(n,(t=>r.q2t(t)),h)}var P0=class{static get lC(){return this.Wtt||(this.Wtt=E0()),this.Wtt}};P0.Wtt=void 0;var R0=class{gtt(t){return t(this)}L2t(){this.wtt.L2t(),this.mtt.L2t(),this.ptt.L2t(),this.ytt.L2t(),this.Att.L2t()}constructor(t,e){this.wtt=t.wtt.Tbt(e),this.mtt=t.mtt.Tbt(e),this.ptt=t.ptt.Tbt(e),this.ytt=t.ytt.Tbt(e),this.Att=t.Att.Tbt(e)}};$c.ja(class t{static async y6(){const e=await P0.lC;return new t(e)}gtt(t){const e=this.allCollections;return Zs.V2t(e,(()=>this.F2t(e,t)))}async F2t(t,e){const i=t.map((t=>t.l)),s=this.U2t.transaction(i,Re.Itt),n=new R0(this,s);try{return await _0(s,e,n)}finally{n.L2t()}}get allCollections(){return[this.mtt,this.wtt,this.ptt,this.ytt,this.Att]}constructor(t){this.U2t=t,this.wtt=new Zs(t,k0),this.mtt=new Zs(t,S0),this.ptt=new Zs(t,T0),this.ytt=new Zs(t,A0),this.Att=new Zs(t,b0)}}.y6);var X,C0=class{K2t(t){const e=this.qq.og(),i=t.createGain();for(const s of e){t.createMediaElementSource(s).connect(i)}return i}get ma(){return this.Gu||(this.Gu=this.pa()),this.Gu}pa(){const t=this;return{createAudioSourceNode:e=>t.K2t(e)}}constructor(t){this.Gu=void 0,this.qq=t}};UN((function(t){return class extends t{pa(){const t=this.j2t.ma;return oe(super.pa(),{get audio(){return t}})}constructor(t,e){super(t,e),this.j2t=new C0(this.v5)}}}),Fs.U5),function(t){t.CREATIVE_VIEW="creativeView",t.START="start",t.FIRST_QUARTILE="firstQuartile",t.MID_POINT="midpoint",t.THIRD_QUARTILE="thirdQuartile",t.COMPLETE="complete",t.MUTE="mute",t.UNMUTE="unmute",t.PAUSE="pause",t.REWIND="rewind",t.RESUME="resume",t.FULL_SCREEN="fullscreen",t.EXIT_FULL_SCREEN="exitFullscreen",t.EXPAND="expand",t.COLLAPSE="collapse",t.ACCEPT_INVITATION_LINEAR="acceptInvitationLinear",t.ACCEPT_INVITATION="acceptInvitation",t.CLOSE_LINEAR="closeLinear",t.CLOSE="close",t.SKIP="skip",t.SKIP_SHOWN="skipShown",t.PROGRESS="progress",t.ENGAGED_VIEW="engagedView",t.IMPRESSION="impression",t.ERROR="error"}(X||(X={}));var x0=class extends kc{pa(){return tJ(this)}get YVt(){return br.QVt}get PS(){return this.US}get hMt(){return this.zMt}constructor(t,e,i,s){super(t,e),this.zMt=s,this.US=i}},D0=class extends JZ{get kEt(){return this.Y2t}get YVt(){return br.QVt}constructor(t,e,i){if(super(t,t,e),i){const t=new Date(i);OS(t)&&(this.Y2t=t)}}},N0=class{hw(){this.Ko.wn(ee.Qf,this.Vf),this.Ko.wn(o.Ch,this.Mf),this.Ko.wn(o.Ph,this.Af),this.Ko.wn(o.If,this.Xe),this.Ko.wn(o.Pf,this.Mh),this.Ko.wn(o.Lu,this.Jdt),this.Ko.wn(o.Il,this.ozt),this.Ko.wn("presentationmodechange",this.Z2t)}iw(){this.Ko.pn(ee.Qf,this.Vf),this.Ko.pn(o.Ch,this.Mf),this.Ko.pn(o.Ph,this.Af),this.Ko.pn(o.If,this.Xe),this.Ko.pn(o.Pf,this.Mh),this.Ko.pn(o.Lu,this.Jdt),this.Ko.pn(o.Il,this.ozt),this.Ko.pn("presentationmodechange",this.Z2t)}get J2t(){return this.$2t}get Y5(){const t=this.J2t;if(!t)return[];const e=[],i=this.t3t();for(const s of t.L5)i>=s.PS&&this.e3t<=s.PS+s.ct&&e.push(s);return e}t3t(){return this.Ko._g()-this.i3t}s3t(){if(this.n3t)return;if(this.Ko.vg()!==1/0)return void(0===this.r3t.length&&(this.n3t=this.h3t()));const t=()=>{var t;null==(t=this.o3t)||t.Ou(),this.o3t=void 0,this.n3t=void 0};this.o3t=new Hi,this.n3t=this.a3t(this.o3t.M_).catch(this.q$).then(t,t)}async u3t(){const t=w.min(1e3*2**this.c3t,3e4);try{var e;await uc(t,null==(e=this.o3t)?void 0:e.M_),this.c3t++}catch(t){if(Aa(t))return void(this.c3t=0)}this.s3t()}async a3t(t){for(;k_(t),!this.Ko.Dc;){const e=Ee.V_()-this.l3t;if(e>1e4)await this.h3t(t),this.l3t=Ee.V_(),this.c3t=0;else{const i=1e4-e;await uc(i,t)}}}d3t(t){const e=t.kEt;if(e&&this.Ko.qu&&0===this.i3t&&!this.f3t&&0!==w.floor(this.Ko.Vg().start(0))){const i=(this.Ko.qu.getTime()-e.getTime())/1e3,s=this.Ko._g()-t.vEt;this.i3t=s-i}}async h3t(t){try{const e=await this.Ko.Gf.pI({TI:this._3t}),i=await e._L(t);if(0===i.avails.length)return void(0!==this.r3t.length&&(this.r3t=[]));if(i.avails.length===this.r3t.length&&i.avails[0].startTimeInSeconds===this.r3t[0].vEt)return void this.d3t(this.r3t[0]);const s=[];for(const t of i.avails){const e=new D0(t.durationInSeconds,t.startTimeInSeconds,t.availProgramDateTime);for(const i of t.ads){const t=new x0(e,ei.TUt,i.startTimeInSeconds,i.trackingEvents);t.jjt(i.adId,i.width,i.height,i.durationInSeconds,[],i.skipoffset),e.Gjt(t)}s.push(e),this.d3t(e)}this.r3t=Jh(s,((t,e)=>t.vEt-e.vEt))}catch(t){throw pe(t),new v("Failed to poll MediaTailor tracking events")}}g3t(){var t;null==(t=this.o3t)||t.Jl(),this.o3t=void 0,this.n3t=void 0,this.l3t=-1/0}v3t(){if(0===this.r3t.length)return;const t=this.r3t[this.r3t.length-1],e=this.t3t();if(t.vEt+t.ZVt<this.e3t){var i;this.$2t&&(null==(i=this.Ko.L5)||i.To(new To(this.$2t)),this.$2t=void 0)}else{for(const t of this.r3t){const i=t.vEt;if(!(i+t.ZVt<this.e3t)&&(i<=e&&i+t.ZVt>this.e3t)){var s;if(this.J2t===t)return;return this.$2t=t,void(null==(s=this.Ko.L5)||s.To(new qc(this.$2t)))}}var n;if(this.$2t)null==(n=this.Ko.L5)||n.To(new To(this.$2t)),this.$2t=void 0}}w3t(){const t=this.Y5;if(0===t.length)return;let e=[];for(const i of t){const t=i.hMt.filter((t=>Bc(this.m3t,t.eventType)));e=e.concat(t)}for(const t of e)this.p3t(t.startTimeInSeconds)&&(t.eventType===X.COMPLETE&&this.y3t(X.ENGAGED_VIEW),this.A3t(t))}b3t(t,e){return e.hMt.filter((e=>N(e.eventType,t)))[0]}y3t(t){const e=this.Y5;if(0===e.length)return;const i=this.b3t(t,e[0]);i&&this.A3t(i)}A3t(t){this.T3t(t.eventType);for(const e of t.beaconUrls){const t={iP:ut.GET,TI:e,tP:"",sP:Ct.MI};0,M(this.S3t(t))}}T3t(t){let e;const i=this.Y5;switch(t){case X.START:e=new vr(i[i.length-1],this.Ko._g());break;case X.COMPLETE:e=new Eh(i[0],this.Ko._g());break;case X.FIRST_QUARTILE:e=new aJ(i[0],this.Ko._g());break;case X.MID_POINT:e=new cJ(i[0],this.Ko._g());break;case X.THIRD_QUARTILE:e=new dJ(i[0],this.Ko._g())}var s;void 0!==e&&(null==(s=this.Ko.L5)||s.To(e))}async S3t(t){const e=await this.Ko.Gf.pI(t);e.SI}p3t(t){const e=this.t3t();return t>=this.e3t&&t<e}bn(){this.iw(),this.g3t(),this.e3t=-1}constructor(t,e,i){this.l3t=-1/0,this.$2t=void 0,this.i3t=0,this.r3t=[],this.k3t=!1,this.cU=!1,this.e3t=-1,this.o3t=void 0,this.n3t=void 0,this.c3t=0,this.Vf=()=>{this.s3t()},this.Af=()=>{this.y3t(X.RESUME)},this.Mf=()=>{this.g3t(),this.y3t(X.PAUSE)},this.Xe=()=>{this.g3t(),this.e3t=-1},this.Mh=()=>{this.g3t()},this.Jdt=()=>{-1===this.e3t&&(this.e3t=this.t3t()),this.v3t(),this.w3t(),this.e3t=this.t3t()},this.ozt=()=>{if(this.k3t!==this.Ko.Xu){this.k3t=this.Ko.Xu;const t=this.k3t?X.MUTE:X.UNMUTE;this.y3t(t)}},this.Z2t=()=>{if(this.cU!==this.Ko.cs()){this.cU=this.Ko.cs();const t=this.cU?X.FULL_SCREEN:X.EXIT_FULL_SCREEN;this.y3t(t)}},this.q$=t=>{Aa(t)||(this.y3t(X.ERROR),M(this.u3t()))},this.m3t=[X.START,X.FIRST_QUARTILE,X.MID_POINT,X.THIRD_QUARTILE,X.COMPLETE,X.IMPRESSION,X.CREATIVE_VIEW],this.Ko=t,this._3t=e,this.f3t=i,this.hw()}};UN((function(t){return class extends t{ba(t){return this.E3t&&(this.E3t.bn(),this.E3t=void 0,this.dlt()),super.ba(t)}async S8(t,e){if(!t||!function(t){return t.sources.some((t=>t.integration===uw.MEDIATAILOR))}(t))return super.S8(t,e);try{const i=await this.I3t(t,e);await super.S8(i,e)}catch(t){this.OM(new jr(n.MANIFEST_LOAD_ERROR,t.message,t))}}gg(t){var e;(null==(e=this.E3t)?void 0:e.J2t)||super.gg(t)}yg(){var t;return null!=(t=this.ZO)?t:super.yg()}Ag(){var t;return null!=(t=this.Vl)?t:super.Ag()}OM(t){this.ZO=Lt(t),this.Vl=t,this.To(new Vo(t))}dlt(){this.ZO=void 0,this.Vl=void 0}async I3t(t,e){let i=[];for(const s of t.sources){if(!qw(s)){i.push(s);continue}const t=s;if(!t.src){i.push(s);continue}const n=await this.P3t(t,e);k_(e);const r=Me({},t,{integration:void 0,src:n});i.push(r)}const s=Ms(t);return s.sources=i,s}async P3t(t,e){const i=t.src||"",s=i.match(/.+?(?=\/v1\/)/);if(!s)throw new v("Could not find MediaTailor session initialization url");const n=s[0],r=Po(i,"?ads."),h=r?{TI:i,sP:Ct.MI}:{TI:i,iP:ut.POST,tP:JSON.stringify({adParams:t.adParams}),sP:Ct.MI},o=await Xu((()=>this.R3t(h,e)),e);let a;try{if(a=n+o.manifestUrl,!r){const t=n+o.trackingUrl,e=Ow(a);this.E3t=new N0(this,t,e)}}catch(t){throw new v("Something went wrong parsing the MediaTailor session initialization response")}return a}async R3t(t,e){try{const i=await this.Gf.pI(t);return await i._L(e)}catch(t){throw pe(t),new v("Failed to initialize MediaTailor session manifest")}}bn(){this.E3t&&(this.E3t.bn(),this.E3t=void 0),this.dlt(),super.bn()}constructor(t,e){super(t,e),this.E3t=void 0,this.ZO=void 0,this.Vl=void 0}}}),Fs.W5);export{Ee as a,fh as b,Qf as c,Os as d,Th as e,mh as f,Qo as g,E as h,xu as i,Jy as j,$y as k,dt as l,ZT as m,ro as n,JT as o,$T as p,iS as q,sS as r,yO as s,AO as t,Me as u,Jh as v,Bt as w,Vi as x,pi as y,me as z,Bc as A,Ce as B,xt as C,M as D,Et as E,Xi as F,$i as G,n as H,Fc as I,o as J,hc as K,M_ as L,oe as M,Ne as N,Dc as O,Di as P,am as Q,mn as R,lu as S,zn as T,bt as U,_y as V,Ay as W,ee as X,Qs as Y,dw as Z,Si as _,q as $,ki as aa,Zw as ba,tt as ca,_a as da,lS as ea,Vo as fa,qN as ga,Fa as ha,Yc as ia,Vw as ja,$a as ka,mt as la,ds as ma,oa as na,Gs as oa,ih as pa,T as qa,ju as ra,Eo as sa,Jw as ta,em as ua,d as va,is as wa,tE as xa,eE as ya,iE as za,nE as Aa,Dh as Ba,pE as Ca,fo as Da,YE as Ea,tI as Fa,mI as Ga,yh as Ha,Ui as Ia,CI as Ja,BI as Ka,Zh as La,xn as Ma,MI as Na,RP as Oa,WP as Pa,qP as Qa,KP as Ra,bc as Sa,os as Ta,yC as Ua,eD as Va,sD as Wa,nD as Xa,hD as Ya,oD as Za,aD as _a,PD as $a,RD as ab,$t as bb,DN as cb,NN as db,GN as eb,QN as fb,vB as gb,wB as hb,mB as ib,pB as jb,vF as kb,wF as lb,mF as mb,pF as nb,aq as ob,uq as pb,mK as qb,br as rb,vZ as sb,CZ as tb,l0 as ub};